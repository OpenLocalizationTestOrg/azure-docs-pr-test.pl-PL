
<span data-ttu-id="b1a0e-101">Każdy punkt końcowy ma *port publiczny* i *port prywatny*:</span><span class="sxs-lookup"><span data-stu-id="b1a0e-101">Each endpoint has a *public port* and a *private port*:</span></span>

* <span data-ttu-id="b1a0e-102">Port publiczny jest używany przez moduł równoważenia obciążenia Azure do nasłuchiwania ruch przychodzący do maszyny wirtualnej z Internetu.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-102">The public port is used by the Azure load balancer to listen for incoming traffic to the virtual machine from the Internet.</span></span>
* <span data-ttu-id="b1a0e-103">Port prywatny jest używane przez maszynę wirtualną do nasłuchiwania dla ruchu przychodzącego, zwykle kierowanych do aplikacji lub usługi działające na maszynie wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-103">The private port is used by the virtual machine to listen for incoming traffic, typically destined to an application or service running on the virtual machine.</span></span>

<span data-ttu-id="b1a0e-104">Wartości domyślne dla protokołu IP i portów TCP lub UDP sieci dobrze znanych protokołów są dostępne podczas tworzenia punktów końcowych z portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-104">Default values for the IP protocol and TCP or UDP ports for well-known network protocols are provided when you create endpoints with the Azure portal.</span></span> <span data-ttu-id="b1a0e-105">Niestandardowe punkty końcowe należy określić poprawną protokołu IP (TCP lub UDP) i porty publiczne i prywatne.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-105">For custom endpoints, you'll need to specify the correct IP protocol (TCP or UDP) and the public and private ports.</span></span> <span data-ttu-id="b1a0e-106">Aby losowo dystrybucji przychodzącego ruchu między wieloma maszynami wirtualnymi, należy utworzyć zestaw z równoważeniem obciążenia, składające się z wielu punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-106">To distribute incoming traffic randomly across multiple virtual machines, you'll need to create a load-balanced set consisting of multiple endpoints.</span></span>

<span data-ttu-id="b1a0e-107">Po utworzeniu punktu końcowego, można użyć listy kontroli dostępu (ACL) można zdefiniować reguły akceptowanie lub odrzucanie ruch przychodzący do portu publicznego punktu końcowego na podstawie jego adresu IP źródłowego.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-107">After you create an endpoint, you can use an access control list (ACL) to define rules that permit or deny the incoming traffic to the public port of the endpoint based on its source IP address.</span></span> <span data-ttu-id="b1a0e-108">Jednak jeśli maszyna wirtualna znajduje się w sieci wirtualnej platformy Azure, należy zamiast tego użyć grup zabezpieczeń sieci.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-108">However, if the virtual machine is in an Azure virtual network, you should use network security groups instead.</span></span> <span data-ttu-id="b1a0e-109">Aby uzyskać więcej informacji, zobacz [dotyczące grup zabezpieczeń sieci](../articles/virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="b1a0e-109">For details, see [About network security groups](../articles/virtual-network/virtual-networks-nsg.md).</span></span>

> [!NOTE]
> <span data-ttu-id="b1a0e-110">Konfiguracja zapory dla maszyn wirtualnych platformy Azure odbywa się automatycznie dla portów skojarzonych z punktami końcowymi połączenia zdalnego, które Azure konfiguruje się automatycznie.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-110">Firewall configuration for Azure virtual machines is done automatically for ports associated with remote connectivity endpoints that Azure sets up automatically.</span></span> <span data-ttu-id="b1a0e-111">Porty określone dla innych punktów końcowych konfiguracja nie odbywa się automatycznie w zaporze maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-111">For ports specified for all other endpoints, no configuration is done automatically to the firewall of the virtual machine.</span></span> <span data-ttu-id="b1a0e-112">Po utworzeniu punktu końcowego maszyny wirtualnej należy upewnij się, że zapory maszyny wirtualnej również zezwala na ruch protokołu i port prywatny odpowiadający konfiguracji punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-112">When you create an endpoint for the virtual machine, you'll need to ensure that the firewall of the virtual machine also allows the traffic for the protocol and private port corresponding to the endpoint configuration.</span></span> <span data-ttu-id="b1a0e-113">Aby skonfigurować zaporę, skorzystaj z dokumentacji lub pomocy online dla systemu operacyjnego działającego na maszynie wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-113">To configure the firewall, see the documentation or on-line help for the operating system running on the virtual machine.</span></span>
>
>

## <a name="create-an-endpoint"></a><span data-ttu-id="b1a0e-114">Tworzenie punktu końcowego</span><span class="sxs-lookup"><span data-stu-id="b1a0e-114">Create an endpoint</span></span>
1. <span data-ttu-id="b1a0e-115">Jeśli jeszcze tego nie zrobiono, zaloguj się w witrynie [Azure Portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="b1a0e-115">If you haven't already done so, sign in to the [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="b1a0e-116">Kliknij przycisk **maszyn wirtualnych**, a następnie kliknij nazwę maszyny wirtualnej, który chcesz skonfigurować.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-116">Click **Virtual Machines**, and then click the name of the virtual machine that you want to configure.</span></span>
3. <span data-ttu-id="b1a0e-117">Kliknij przycisk **punkty końcowe** w **ustawienia** grupy.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-117">Click **Endpoints** in the **Settings** group.</span></span> <span data-ttu-id="b1a0e-118">**Punkty końcowe** stronie są wyświetlane wszystkie bieżące punkty końcowe dla maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-118">The **Endpoints** page lists all the current endpoints for the virtual machine.</span></span> <span data-ttu-id="b1a0e-119">(W tym przykładzie jest Maszynę wirtualną systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-119">(This example is a Windows VM.</span></span> <span data-ttu-id="b1a0e-120">Linux VM domyślnie wyświetli punkt końcowy SSH.)</span><span class="sxs-lookup"><span data-stu-id="b1a0e-120">A Linux VM will by default show an endpoint for SSH.)</span></span>

   <!-- ![Endpoints](./media/virtual-machines-common-classic-setup-endpoints/endpointswindows.png) -->
   ![Punkty końcowe](./media/virtual-machines-common-classic-setup-endpoints/endpointsblade.png)

4. <span data-ttu-id="b1a0e-122">Na pasku poleceń powyżej wpisów punktu końcowego kliknij **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-122">In the command bar above the endpoint entries, click **Add**.</span></span>
5. <span data-ttu-id="b1a0e-123">Na **dodać punkt końcowy** wpisz nazwę punktu końcowego w **nazwa**.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-123">On the **Add endpoint** page, type a name for the endpoint in **Name**.</span></span>
6. <span data-ttu-id="b1a0e-124">W **protokołu**, albo wybierz **TCP** lub **UDP**.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-124">In **Protocol**, choose either **TCP** or **UDP**.</span></span>
7. <span data-ttu-id="b1a0e-125">W **Port publiczny**, wpisz numer portu dla ruchu przychodzącego z Internetu.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-125">In **Public Port**, type the port number for the incoming traffic from the Internet.</span></span> <span data-ttu-id="b1a0e-126">W **Port prywatny**, wpisz numer portu, na którym nasłuchuje maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-126">In **Private Port**, type the port number on which the virtual machine is listening.</span></span> <span data-ttu-id="b1a0e-127">Numery portów mogą być różne.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-127">These port numbers can be different.</span></span> <span data-ttu-id="b1a0e-128">Upewnij się, że zapora na maszynie wirtualnej została skonfigurowana zezwalająca na ruch odpowiadającego port prywatny i protokół (w kroku 6).</span><span class="sxs-lookup"><span data-stu-id="b1a0e-128">Ensure that the firewall on the virtual machine has been configured to allow the traffic corresponding to the protocol (in step 6) and private port.</span></span>
10. <span data-ttu-id="b1a0e-129">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-129">Click **Ok**.</span></span>

<span data-ttu-id="b1a0e-130">Nowy punkt końcowy zostanie wymieniony na **punkty końcowe** strony.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-130">The new endpoint will be listed on the **Endpoints** page.</span></span>

![Pomyślne utworzenie punktu końcowego](./media/virtual-machines-common-classic-setup-endpoints/endpointcreated.png)

## <a name="manage-the-acl-on-an-endpoint"></a><span data-ttu-id="b1a0e-132">Zarządzanie listy ACL punktu końcowego</span><span class="sxs-lookup"><span data-stu-id="b1a0e-132">Manage the ACL on an endpoint</span></span>
<span data-ttu-id="b1a0e-133">Aby określić zestaw komputerów, które mogą przesyłać, listy ACL punktu końcowego można ograniczyć ruch ustalane na podstawie źródłowego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-133">To define the set of computers that can send traffic, the ACL on an endpoint can restrict traffic based upon source IP address.</span></span> <span data-ttu-id="b1a0e-134">Wykonaj następujące kroki, aby dodać, zmodyfikować lub usunąć listy ACL punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-134">Follow these steps to add, modify, or remove an ACL on an endpoint.</span></span>

> [!NOTE]
> <span data-ttu-id="b1a0e-135">Jeśli punkt końcowy jest częścią zestawu o zrównoważonym obciążeniu, wszystkie zmiany wprowadzone do listy ACL punktu końcowego są stosowane do wszystkich punktów końcowych w zestawie.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-135">If the endpoint is part of a load-balanced set, any changes you make to the ACL on an endpoint are applied to all endpoints in the set.</span></span>
>
>

<span data-ttu-id="b1a0e-136">Jeśli maszyna wirtualna znajduje się w sieci wirtualnej platformy Azure, firma Microsoft zaleca sieciowe grupy zabezpieczeń zamiast listy kontroli dostępu.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-136">If the virtual machine is in an Azure virtual network, we recommend network security groups instead of ACLs.</span></span> <span data-ttu-id="b1a0e-137">Aby uzyskać więcej informacji, zobacz [dotyczące grup zabezpieczeń sieci](../articles/virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="b1a0e-137">For details, see [About network security groups](../articles/virtual-network/virtual-networks-nsg.md).</span></span>

1. <span data-ttu-id="b1a0e-138">Jeśli jeszcze tego nie zrobiono, zaloguj się do portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-138">If you haven't already done so, sign in to the Azure portal.</span></span>
2. <span data-ttu-id="b1a0e-139">Kliknij przycisk **maszyn wirtualnych**, a następnie kliknij nazwę maszyny wirtualnej, który chcesz skonfigurować.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-139">Click **Virtual Machines**, and then click the name of the virtual machine that you want to configure.</span></span>
3. <span data-ttu-id="b1a0e-140">Kliknij przycisk **Punkty końcowe**.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-140">Click **Endpoints**.</span></span> <span data-ttu-id="b1a0e-141">Z listy wybierz odpowiednie punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-141">From the list, select the appropriate endpoint.</span></span> <span data-ttu-id="b1a0e-142">Lista ACL jest w dolnej części strony.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-142">The ACL list is at the bottom of the page.</span></span>

   ![Określ szczegóły list kontroli dostępu](./media/virtual-machines-common-classic-setup-endpoints/aclpreentry.png)

4. <span data-ttu-id="b1a0e-144">Aby dodać, usunąć, lub edytowanie reguły listy ACL i ich kolejność, należy użyć wierszy na liście.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-144">Use rows in the list to add, delete, or edit rules for an ACL and change their order.</span></span> <span data-ttu-id="b1a0e-145">**Podsieci zdalnej** wartość jest zakres adresów IP dla ruchu przychodzącego z Internetu, korzystającą z usługi równoważenia obciążenia Azure celu akceptowanie lub odrzucanie ruchu na podstawie jego adresu IP źródłowego.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-145">The **Remote Subnet** value is an IP address range for incoming traffic from the Internet that the Azure load balancer uses to permit or deny the traffic based on its source IP address.</span></span> <span data-ttu-id="b1a0e-146">Pamiętaj określić zakres adresów IP w formacie CIDR, znanej także jako formacie prefiksu adresu.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-146">Be sure to specify the IP address range in CIDR format, also known as address prefix format.</span></span> <span data-ttu-id="b1a0e-147">Na przykład `10.1.0.0/8`.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-147">An example is `10.1.0.0/8`.</span></span>

 ![Nowy wpis listy kontroli dostępu](./media/virtual-machines-common-classic-setup-endpoints/newaclentry.png)


<span data-ttu-id="b1a0e-149">Zasady można użyć zezwalająca na ruch tylko z określonych komputerów odpowiadający komputerów w Internecie lub odrzucanie ruchu z zakresów określonych, znanych adresów.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-149">You can use rules to allow only traffic from specific computers corresponding to your computers on the Internet or to deny traffic from specific, known address ranges.</span></span>

<span data-ttu-id="b1a0e-150">Zasady są oceniane w kolejności, zaczynając od pierwszej reguły, a kończąc ostatnia reguła.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-150">The rules are evaluated in order starting with the first rule and ending with the last rule.</span></span> <span data-ttu-id="b1a0e-151">Oznacza to, reguły powinna być wyświetlana z najmniej restrykcyjny do najbardziej restrykcyjne.</span><span class="sxs-lookup"><span data-stu-id="b1a0e-151">This means that rules should be ordered from least restrictive to most restrictive.</span></span> <span data-ttu-id="b1a0e-152">Aby uzyskać więcej informacji, zobacz [co to jest lista kontroli dostępu do sieci](../articles/virtual-network/virtual-networks-acl.md).</span><span class="sxs-lookup"><span data-stu-id="b1a0e-152">For examples and more information, see [What is a Network Access Control List](../articles/virtual-network/virtual-networks-acl.md).</span></span>
