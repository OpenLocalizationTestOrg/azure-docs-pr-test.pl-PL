

<span data-ttu-id="6ff29-101">Dostępne są dwa poziomy równoważenia obciążenia dla usług infrastruktury platformy Azure:</span><span class="sxs-lookup"><span data-stu-id="6ff29-101">There are two levels of load balancing available for Azure infrastructure services:</span></span>

* <span data-ttu-id="6ff29-102">**Poziom DNS**: równoważenia obciążenia dla ruchu do usługi w chmurze różnych znajdujących się w różnych danych centrów do innej witryny sieci Web Azure znajduje się w różnych centrach danych lub zewnętrzne punkty końcowe.</span><span class="sxs-lookup"><span data-stu-id="6ff29-102">**DNS Level**:  Load balancing for traffic to different cloud services located in different data centers, to different Azure websites located in different data centers, or to external endpoints.</span></span> <span data-ttu-id="6ff29-103">Jest to zrobić za pomocą usługi Azure Traffic Manager i okrężnego metody równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="6ff29-103">This is done with Azure Traffic Manager and the Round Robin load balancing method.</span></span>
* <span data-ttu-id="6ff29-104">**Sieci poziom**: przychodzący ruch internetowy do różnych maszyn wirtualnych usługi w chmurze Równoważenie obciążenia lub załadować równoważenie ruchu między maszynami wirtualnymi w sieci wirtualnej lub usługi w chmurze.</span><span class="sxs-lookup"><span data-stu-id="6ff29-104">**Network Level**:  Load balancing of incoming Internet traffic to different virtual machines of a cloud service, or load balancing of traffic between virtual machines in a cloud service or virtual network.</span></span> <span data-ttu-id="6ff29-105">Jest to zrobić za pomocą usługi równoważenia obciążenia Azure.</span><span class="sxs-lookup"><span data-stu-id="6ff29-105">This is done with the Azure load balancer.</span></span>

## <a name="traffic-manager-load-balancing-for-cloud-services-and-websites"></a><span data-ttu-id="6ff29-106">Menedżer ruchu równoważenia obciążenia dla usług w chmurze i witryn sieci Web</span><span class="sxs-lookup"><span data-stu-id="6ff29-106">Traffic Manager load balancing for cloud services and websites</span></span>
<span data-ttu-id="6ff29-107">Traffic Manager pozwala kontrolować dystrybucję ruchu użytkowników do punktów końcowych, które mogą obejmować usługi w chmurze, witryn sieci Web, witryny zewnętrzne i innych profilów usługi Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="6ff29-107">Traffic Manager allows you to control the distribution of user traffic to endpoints, which can include cloud services, websites, external sites, and other Traffic Manager profiles.</span></span> <span data-ttu-id="6ff29-108">Menedżer ruchu polega na stosowanie inteligentnego aparatu zasad do systemu nazw domen (DNS, Domain Name System) zapytania dotyczące nazw domen zasobów internetowych.</span><span class="sxs-lookup"><span data-stu-id="6ff29-108">Traffic Manager works by applying an intelligent policy engine to Domain Name System (DNS) queries for the domain names of your Internet resources.</span></span> <span data-ttu-id="6ff29-109">Z usługi w chmurze lub witryny sieci Web mogą być uruchomione w różnych centrach danych całym świecie.</span><span class="sxs-lookup"><span data-stu-id="6ff29-109">Your cloud services or websites can be running in different datacenters across the world.</span></span>

<span data-ttu-id="6ff29-110">Aby skonfigurować punkty końcowe zewnętrznych lub profilów usługi Traffic Manager jako punktów końcowych musi użyć REST lub programu Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6ff29-110">You must use either REST or Windows PowerShell to configure external endpoints or Traffic Manager profiles as endpoints.</span></span>

<span data-ttu-id="6ff29-111">Menedżer ruchu używa trzech metod równoważenia obciążenia do dystrybucji ruchu:</span><span class="sxs-lookup"><span data-stu-id="6ff29-111">Traffic Manager uses three load-balancing methods to distribute traffic:</span></span>

* <span data-ttu-id="6ff29-112">**Tryb failover**: Użyj tej metody można używać podstawowy punkt końcowy dla całego ruchu, ale Podaj kopii zapasowych w przypadku, gdy podstawowy jest niedostępny.</span><span class="sxs-lookup"><span data-stu-id="6ff29-112">**Failover**:  Use this method when you want to use a primary endpoint for all traffic, but provide backups in case the primary becomes unavailable.</span></span>
* <span data-ttu-id="6ff29-113">**Wydajność**: Użyj tej metody, gdy masz punktów końcowych w różnych lokalizacjach geograficznych i żądania klienci mają używać "najbliższy" punktu końcowego pod względem najniższym opóźnieniu.</span><span class="sxs-lookup"><span data-stu-id="6ff29-113">**Performance**:  Use this method when you have endpoints in different geographic locations and you want requesting clients to use the "closest" endpoint in terms of the lowest latency.</span></span>
* <span data-ttu-id="6ff29-114">**Działanie okrężne:** ta metoda umożliwia rozłożenie obciążenia na zbiór usług w chmurze w tym samym centrum danych lub usługi w chmurze lub witryny sieci Web w różnych centrach danych.</span><span class="sxs-lookup"><span data-stu-id="6ff29-114">**Round Robin:**  Use this method when you want to distribute load across a set of cloud services in the same datacenter or across cloud services or websites in different datacenters.</span></span>

<span data-ttu-id="6ff29-115">Aby uzyskać więcej informacji, zobacz [o ruchu Menedżera obciążenia równoważenia metody](../articles/traffic-manager/traffic-manager-routing-methods.md).</span><span class="sxs-lookup"><span data-stu-id="6ff29-115">For more information, see [About Traffic Manager Load Balancing Methods](../articles/traffic-manager/traffic-manager-routing-methods.md).</span></span>

<span data-ttu-id="6ff29-116">Na poniższym diagramie przedstawiono przykład metody dla Dystrybucja ruchu między usługi w chmurze innego równoważenia obciążenia okrężnego.</span><span class="sxs-lookup"><span data-stu-id="6ff29-116">The following diagram shows an example of the Round Robin load balancing method for distributing traffic between different cloud services.</span></span>

![obciążenia](./media/virtual-machines-common-load-balance/TMSummary.png)

<span data-ttu-id="6ff29-118">Podstawowy proces jest następujący:</span><span class="sxs-lookup"><span data-stu-id="6ff29-118">The basic process is the following:</span></span>

1. <span data-ttu-id="6ff29-119">Internet klient wysyła zapytanie do nazwy domeny odpowiadający usługi sieci web.</span><span class="sxs-lookup"><span data-stu-id="6ff29-119">An Internet client queries a domain name corresponding to a web service.</span></span>
2. <span data-ttu-id="6ff29-120">DNS przesyła dalej żądanie nazwę zapytania do usługi Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="6ff29-120">DNS forwards the name query request to Traffic Manager.</span></span>
3. <span data-ttu-id="6ff29-121">Menedżer ruchu wybiera następny usługi w chmurze na liście działanie okrężne i odsyła nazwy DNS.</span><span class="sxs-lookup"><span data-stu-id="6ff29-121">Traffic Manager chooses the next cloud service in the Round Robin list and sends back the DNS name.</span></span> <span data-ttu-id="6ff29-122">Klienta internetowego serwera DNS rozpoznaje nazwę na adres IP i wysyła go do klienta w sieci Internet.</span><span class="sxs-lookup"><span data-stu-id="6ff29-122">The Internet client's DNS server resolves the name to an IP address and sends it to the Internet client.</span></span>
4. <span data-ttu-id="6ff29-123">Klienta internetowego nawiązuje połączenie z usługą w chmurze wybierany przez Menedżera ruchu.</span><span class="sxs-lookup"><span data-stu-id="6ff29-123">The Internet client connects with the cloud service chosen by Traffic Manager.</span></span>

<span data-ttu-id="6ff29-124">Aby uzyskać więcej informacji, zobacz [Traffic Manager](../articles/traffic-manager/traffic-manager-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6ff29-124">For more information, see [Traffic Manager](../articles/traffic-manager/traffic-manager-overview.md).</span></span>

## <a name="azure-load-balancing-for-virtual-machines"></a><span data-ttu-id="6ff29-125">Azure równoważenia obciążenia dla maszyn wirtualnych</span><span class="sxs-lookup"><span data-stu-id="6ff29-125">Azure load balancing for virtual machines</span></span>
<span data-ttu-id="6ff29-126">Usługi w chmurze maszyn wirtualnych w tej samej lub sieci wirtualnej mogą komunikować się ze sobą adresy bezpośrednio za pomocą ich prywatnego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="6ff29-126">Virtual machines in the same cloud service or virtual network can communicate with each other directly using their private IP addresses.</span></span> <span data-ttu-id="6ff29-127">Komputerom i usługom poza usługą w chmurze lub sieci wirtualnej mogą komunikować się tylko z maszynami wirtualnymi w sieci wirtualnej ze skonfigurowanego punktu końcowego lub usługi w chmurze.</span><span class="sxs-lookup"><span data-stu-id="6ff29-127">Computers and services outside the cloud service or virtual network can only communicate with virtual machines in a cloud service or virtual network with a configured endpoint.</span></span> <span data-ttu-id="6ff29-128">Punkt końcowy jest mapowanie publicznego adresu IP i portu na prywatny adres IP i port maszyny wirtualnej lub roli sieci web w ramach usługi w chmurze Azure.</span><span class="sxs-lookup"><span data-stu-id="6ff29-128">An endpoint is a mapping of a public IP address and port to that private IP address and port of a virtual machine or web role within an Azure cloud service.</span></span>

<span data-ttu-id="6ff29-129">Moduł równoważenia obciążenia Azure losowo dystrybuuje określonego typu ruchu przychodzącego wielu maszyn wirtualnych lub usług w konfiguracji, znany jako zestaw o zrównoważonym obciążeniu.</span><span class="sxs-lookup"><span data-stu-id="6ff29-129">The Azure Load Balancer randomly distributes a specific type of incoming traffic across multiple virtual machines or services in a configuration known as a load-balanced set.</span></span> <span data-ttu-id="6ff29-130">Na przykład mogą rozprzestrzeniać się obciążenie ruchu w sieci web żądania wielu serwerów sieci web lub role sieci web.</span><span class="sxs-lookup"><span data-stu-id="6ff29-130">For example, you can spread the load of web request traffic across multiple web servers or web roles.</span></span>

<span data-ttu-id="6ff29-131">Na poniższym diagramie przedstawiono punktu końcowego równoważeniem obciążenia dla ruchu sieci web (niezaszyfrowany) standard, współużytkowany trzech maszyn wirtualnych dla publicznych i prywatnych port TCP 80.</span><span class="sxs-lookup"><span data-stu-id="6ff29-131">The following diagram shows a load-balanced endpoint for standard (unencrypted) web traffic that is shared among three virtual machines for the public and private TCP port of 80.</span></span> <span data-ttu-id="6ff29-132">Te trzy maszyny wirtualne są w zestawie o zrównoważonym obciążeniu.</span><span class="sxs-lookup"><span data-stu-id="6ff29-132">These three virtual machines are in a load-balanced set.</span></span>

![obciążenia](./media/virtual-machines-common-load-balance/LoadBalancing.png)

<span data-ttu-id="6ff29-134">Aby uzyskać więcej informacji, zobacz [modułu równoważenia obciążenia Azure](../articles/load-balancer/load-balancer-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6ff29-134">For more information, see [Azure Load Balancer](../articles/load-balancer/load-balancer-overview.md).</span></span> <span data-ttu-id="6ff29-135">Aby uzyskać instrukcje dotyczące tworzenia zestawu z równoważeniem obciążenia, zobacz [skonfigurować zestawu z równoważeniem obciążenia](../articles/load-balancer/load-balancer-get-started-internet-arm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="6ff29-135">For the steps to create a load-balanced set, see [Configure a load-balanced set](../articles/load-balancer/load-balancer-get-started-internet-arm-ps.md).</span></span>

<span data-ttu-id="6ff29-136">Azure można również zrównoważeniu nakładu w ramach usługi w chmurze lub sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="6ff29-136">Azure can also load balance within a cloud service or virtual network.</span></span> <span data-ttu-id="6ff29-137">Jest on znany jako równoważenia obciążenia wewnętrznego i mogą być używane w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="6ff29-137">This is known as internal load balancing and can be used in the following ways:</span></span>

* <span data-ttu-id="6ff29-138">Ładowanie równowagi między serwerami w różnych warstw wielowarstwową aplikację (na przykład między warstwami sieci web i bazy danych).</span><span class="sxs-lookup"><span data-stu-id="6ff29-138">To load balance between servers in different tiers of a multi-tier application (for example, between web and database tiers).</span></span>
* <span data-ttu-id="6ff29-139">Ładowanie saldo — biznesowych (LOB) hostowanych w Azure bez konieczności dodatkowego obciążenia równoważenia sprzętu lub oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="6ff29-139">To load balance line-of-business (LOB) applications hosted in Azure without requiring additional load balancer hardware or software.</span></span>
* <span data-ttu-id="6ff29-140">Aby objąć serwerów lokalnych zestaw komputerów, których ruch jest obciążenia zrównoważone.</span><span class="sxs-lookup"><span data-stu-id="6ff29-140">To include on-premises servers in the set of computers whose traffic is load balanced.</span></span>

<span data-ttu-id="6ff29-141">Podobnie jak Azure obciążenia równoważenia, wewnętrzny równoważenia obciążenia jest umożliwiają konfigurowanie wewnętrzny zestawu z równoważeniem obciążenia.</span><span class="sxs-lookup"><span data-stu-id="6ff29-141">Similar to Azure load balancing, internal load balancing is facilitated by configuring an internal load-balanced set.</span></span>

<span data-ttu-id="6ff29-142">Na poniższym diagramie przedstawiono przykład wewnętrzny równoważeniem obciążenia punktu końcowego dla aplikacji biznesowych (LOB), współużytkowany trzech maszyn wirtualnych w sieci wirtualnej między lokalizacjami.</span><span class="sxs-lookup"><span data-stu-id="6ff29-142">The following diagram shows an example of an internal load-balanced endpoint for a line of business (LOB) application that is shared among three virtual machines in a cross-premises virtual network.</span></span>

![obciążenia](./media/virtual-machines-common-load-balance/LOBServers.png)

## <a name="load-balancer-considerations"></a><span data-ttu-id="6ff29-144">Zagadnienia dotyczące usługi równoważenia obciążenia</span><span class="sxs-lookup"><span data-stu-id="6ff29-144">Load balancer considerations</span></span>
<span data-ttu-id="6ff29-145">Moduł równoważenia obciążenia jest domyślnie skonfigurowany do limitu czasu usługi 4 minut bezczynności sesji.</span><span class="sxs-lookup"><span data-stu-id="6ff29-145">A load balancer is configured by default to timeout an idle session in 4 minutes.</span></span> <span data-ttu-id="6ff29-146">Jeśli nie ma konfiguracji Keep-Alive aplikacji za modułem równoważenia obciążenia pozostawia połączenie bezczynne przez więcej niż 4 minut, połączenie zostanie usunięty.</span><span class="sxs-lookup"><span data-stu-id="6ff29-146">If your application behind a load balancer leaves a connection idle for more than 4 minutes and it doesn't have a Keep-Alive configuration, the connection will be dropped.</span></span> <span data-ttu-id="6ff29-147">Można zmienić zachowanie usługi równoważenia obciążenia umożliwiają [dłużej ustawienia limitu czasu dla usługi równoważenia obciążenia Azure](../articles/load-balancer/load-balancer-tcp-idle-timeout.md).</span><span class="sxs-lookup"><span data-stu-id="6ff29-147">You can change the load balancer behavior to allow a [longer timeout setting for Azure load balancer](../articles/load-balancer/load-balancer-tcp-idle-timeout.md).</span></span>

<span data-ttu-id="6ff29-148">Inne zagadnieniem jest typ tryb dystrybucji obsługiwany przez usługi równoważenia obciążenia Azure.</span><span class="sxs-lookup"><span data-stu-id="6ff29-148">Other consideration is the type of distribution mode supported by Azure Load Balancer.</span></span> <span data-ttu-id="6ff29-149">Można skonfigurować koligację IP źródła (źródłowy adres IP, docelowy adres IP) lub protokołu IP źródła (źródłowy adres IP, docelowy adres IP i protocol).</span><span class="sxs-lookup"><span data-stu-id="6ff29-149">You can configure source IP affinity (source IP, destination IP) or source IP protocol (source IP , destination IP and protocol).</span></span> <span data-ttu-id="6ff29-150">Zapoznaj się z [tryb dystrybucji modułu równoważenia obciążenia Azure (źródłowego adresu IP koligacja)](../articles/load-balancer/load-balancer-distribution-mode.md) Aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="6ff29-150">Check out [Azure Load Balancer distribution mode (source IP affinity)](../articles/load-balancer/load-balancer-distribution-mode.md) for more information.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6ff29-151">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="6ff29-151">Next steps</span></span>
<span data-ttu-id="6ff29-152">Aby uzyskać instrukcje dotyczące tworzenia zestawu z równoważeniem obciążenia, zobacz [skonfigurować wewnętrzny zestawu z równoważeniem obciążenia](../articles/load-balancer/load-balancer-get-started-ilb-arm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="6ff29-152">For the steps to create a load-balanced set, see [Configure an internal load-balanced set](../articles/load-balancer/load-balancer-get-started-ilb-arm-ps.md).</span></span>

<span data-ttu-id="6ff29-153">Aby uzyskać więcej informacji na temat usługi równoważenia obciążenia, zobacz [równoważenia obciążenia wewnętrznego](../articles/load-balancer/load-balancer-internal-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6ff29-153">For more information about load balancer, see [Internal load balancing](../articles/load-balancer/load-balancer-internal-overview.md).</span></span>

