# <a name="common-errors-during-classic-tooazure-resource-manager-migration"></a><span data-ttu-id="db6b6-101">Typowe błędy podczas tooAzure Classic migracji Menedżera zasobów</span><span class="sxs-lookup"><span data-stu-id="db6b6-101">Common errors during Classic tooAzure Resource Manager migration</span></span>
<span data-ttu-id="db6b6-102">Ten artykuł katalogi hello najbardziej typowe błędy i środki zaradcze podczas migracji hello zasobów IaaS z wdrożenia usługi Azure klasycznego modelu toohello usługi Azure Resource Manager stosu.</span><span class="sxs-lookup"><span data-stu-id="db6b6-102">This article catalogs hello most common errors and mitigations during hello migration of IaaS resources from Azure classic deployment model toohello Azure Resource Manager stack.</span></span>

## <a name="list-of-errors"></a><span data-ttu-id="db6b6-103">Lista błędów</span><span class="sxs-lookup"><span data-stu-id="db6b6-103">List of errors</span></span>
| <span data-ttu-id="db6b6-104">Ciąg błędu</span><span class="sxs-lookup"><span data-stu-id="db6b6-104">Error string</span></span> | <span data-ttu-id="db6b6-105">Środki zaradcze</span><span class="sxs-lookup"><span data-stu-id="db6b6-105">Mitigation</span></span> |
| --- | --- |
| <span data-ttu-id="db6b6-106">Wewnętrzny błąd serwera</span><span class="sxs-lookup"><span data-stu-id="db6b6-106">Internal server error</span></span> |<span data-ttu-id="db6b6-107">W niektórych przypadkach jest to błąd przejściowy, który znika przy ponownej próbie.</span><span class="sxs-lookup"><span data-stu-id="db6b6-107">In some cases, this is a transient error that goes away with a retry.</span></span> <span data-ttu-id="db6b6-108">Jeśli nadal toopersist, [skontaktuj się z pomocą techniczną platformy Azure](../articles/azure-supportability/how-to-create-azure-support-request.md) potrzeb badania dzienników platformy.</span><span class="sxs-lookup"><span data-stu-id="db6b6-108">If it continues toopersist, [contact Azure support](../articles/azure-supportability/how-to-create-azure-support-request.md) as it needs investigation of platform logs.</span></span> <br><br> <span data-ttu-id="db6b6-109">**Uwaga:** po zdarzenia hello jest śledzony przez zespół pomocy technicznej hello, należy nie należy podejmować żadnych własny środki zaradcze ponieważ może to mieć niezamierzonych konsekwencji w danym środowisku.</span><span class="sxs-lookup"><span data-stu-id="db6b6-109">**NOTE:** Once hello incident is tracked by hello support team, please do not attempt any self-mitigation as this might have unintended consequences on your environment.</span></span> |
| <span data-ttu-id="db6b6-110">Migracja wdrożenia {nazwa_wdrożenia} w usłudze hostowanej {nazwa_usługi_hostowanej} nie jest obsługiwana, ponieważ jest to wdrożenie PaaS (sieć Web/proces roboczy).</span><span class="sxs-lookup"><span data-stu-id="db6b6-110">Migration is not supported for Deployment {deployment-name}  in HostedService {hosted-service-name} because it is a PaaS deployment (Web/Worker).</span></span> |<span data-ttu-id="db6b6-111">Ma to miejsce w przypadku, gdy wdrożenie zawiera rolę sieci Web/procesu roboczego.</span><span class="sxs-lookup"><span data-stu-id="db6b6-111">This happens when a deployment contains a web/worker role.</span></span> <span data-ttu-id="db6b6-112">Ponieważ migracja jest obsługiwana tylko dla maszyn wirtualnych, Usuń rolę sieci web/proces roboczy hello z hello wdrożenia, a następnie spróbuj ponownie migracji.</span><span class="sxs-lookup"><span data-stu-id="db6b6-112">Since migration is only supported for Virtual Machines, please remove hello web/worker role from hello deployment and try migration again.</span></span> |
| <span data-ttu-id="db6b6-113">Wdrożenie szablonu {nazwa_szablonu} nie powiodło się.</span><span class="sxs-lookup"><span data-stu-id="db6b6-113">Template {template-name} deployment failed.</span></span> <span data-ttu-id="db6b6-114">CorrelationId={guid}</span><span class="sxs-lookup"><span data-stu-id="db6b6-114">CorrelationId={guid}</span></span> |<span data-ttu-id="db6b6-115">W hello wewnętrznej bazy danych usługi migracji używany w stosie usługi Azure Resource Manager hello zasobów toocreate szablonów usługi Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="db6b6-115">In hello backend of migration service, we use Azure Resource Manager templates toocreate resources in hello Azure Resource Manager stack.</span></span> <span data-ttu-id="db6b6-116">Ponieważ szablony są idempotentności, zwykle można bezpiecznie ponawiania tooget operacji migracji hello poza ten błąd.</span><span class="sxs-lookup"><span data-stu-id="db6b6-116">Since templates are idempotent, usually you can safely retry hello migration operation tooget past this error.</span></span> <span data-ttu-id="db6b6-117">Jeśli ten błąd będzie się powtarzał toopersist, skontaktuj się z [skontaktuj się z pomocą techniczną platformy Azure](../articles/azure-supportability/how-to-create-azure-support-request.md) i nadaj im hello CorrelationId.</span><span class="sxs-lookup"><span data-stu-id="db6b6-117">If this error continues toopersist, please [contact Azure support](../articles/azure-supportability/how-to-create-azure-support-request.md) and give them hello CorrelationId.</span></span> <br><br> <span data-ttu-id="db6b6-118">**Uwaga:** po zdarzenia hello jest śledzony przez zespół pomocy technicznej hello, należy nie należy podejmować żadnych własny środki zaradcze ponieważ może to mieć niezamierzonych konsekwencji w danym środowisku.</span><span class="sxs-lookup"><span data-stu-id="db6b6-118">**NOTE:** Once hello incident is tracked by hello support team, please do not attempt any self-mitigation as this might have unintended consequences on your environment.</span></span> |
| <span data-ttu-id="db6b6-119">sieć wirtualna Hello {nazwa wirtualnej sieci} nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="db6b6-119">hello virtual network {virtual-network-name} does not exist.</span></span> |<span data-ttu-id="db6b6-120">Może to nastąpić, jeśli utworzono hello sieci wirtualnej w hello nowego portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="db6b6-120">This can happen if you created hello Virtual Network in hello new Azure portal.</span></span> <span data-ttu-id="db6b6-121">Rzeczywista nazwa sieci wirtualnej Hello zgodny hello wzorcem "grupy * <VNET name>"</span><span class="sxs-lookup"><span data-stu-id="db6b6-121">hello actual Virtual Network name follows hello pattern "Group * <VNET name>"</span></span> |
| <span data-ttu-id="db6b6-122">Maszyna wirtualna {nazwa_maszyny_wirtualnej} w usłudze hostowanej {nazwa_usługi_hostowanej} zawiera rozszerzenie {nazwa_rozszerzenia}, które nie jest obsługiwane w usłudze Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="db6b6-122">VM {vm-name} in HostedService {hosted-service-name} contains Extension {extension-name} which is not supported in Azure Resource Manager.</span></span> <span data-ttu-id="db6b6-123">Zalecane jest toouninstall z hello maszyny Wirtualnej przed kontynuowaniem migracji.</span><span class="sxs-lookup"><span data-stu-id="db6b6-123">It is recommended toouninstall it from hello VM before continuing with migration.</span></span> |<span data-ttu-id="db6b6-124">Rozszerzenia XML, takie jak BGInfo 1.*, nie są obsługiwane w usłudze Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="db6b6-124">XML extensions such as BGInfo 1.* are not supported in Azure Resource Manager.</span></span> <span data-ttu-id="db6b6-125">W związku z tym nie można migrować tych rozszerzeń.</span><span class="sxs-lookup"><span data-stu-id="db6b6-125">Therefore, these extensions cannot be migrated.</span></span> <span data-ttu-id="db6b6-126">Te rozszerzenia są po lewej stronie powitania zainstalowanych na maszynie wirtualnej, zostaną automatycznie odinstalowane przed ukończeniem migracji hello.</span><span class="sxs-lookup"><span data-stu-id="db6b6-126">If these extensions are left installed on hello virtual machine, they are automatically uninstalled before completing hello migration.</span></span> |
| <span data-ttu-id="db6b6-127">Maszyna wirtualna {nazwa_maszyny_wirtualnej} w usłudze hostowanej {nazwa_usługi_hostowanej} zawiera rozszerzenie VMSnapshot/VMSnapshotLinux, które nie jest obecnie obsługiwane dla migracji.</span><span class="sxs-lookup"><span data-stu-id="db6b6-127">VM {vm-name} in HostedService {hosted-service-name} contains Extension VMSnapshot/VMSnapshotLinux, which is currently not supported for Migration.</span></span> <span data-ttu-id="db6b6-128">Odinstaluj je z hello maszyny Wirtualnej i dodaj go ponownie przy użyciu usługi Azure Resource Manager po zakończeniu hello migracji</span><span class="sxs-lookup"><span data-stu-id="db6b6-128">Uninstall it from hello VM and add it back using Azure Resource Manager after hello Migration is Complete</span></span> |<span data-ttu-id="db6b6-129">To hello scenariusz, gdzie hello maszyna wirtualna jest skonfigurowana dla usługi Kopia zapasowa Azure.</span><span class="sxs-lookup"><span data-stu-id="db6b6-129">This is hello scenario where hello virtual machine is configured for Azure Backup.</span></span> <span data-ttu-id="db6b6-130">Ponieważ aktualnie jest to nieobsługiwany scenariusz, wykonaj obejście hello na https://aka.ms/vmbackupmigration</span><span class="sxs-lookup"><span data-stu-id="db6b6-130">Since this is currently an unsupported scenario, please follow hello workaround at https://aka.ms/vmbackupmigration</span></span> |
| <span data-ttu-id="db6b6-131">{Nazwa maszyny wirtualnej} maszyny Wirtualnej w usłudze hostowanej {hostowanej usługi nazwa-} zawiera rozszerzenia {Nazwa rozszerzenia}, których stan nie jest raportowany przez hello maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="db6b6-131">VM {vm-name} in HostedService {hosted-service-name} contains Extension {extension-name} whose Status is not being reported from hello VM.</span></span> <span data-ttu-id="db6b6-132">Z tego powodu nie można migrować maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="db6b6-132">Hence, this VM cannot be migrated.</span></span> <span data-ttu-id="db6b6-133">Upewnij się, że ten stan rozszerzenia hello jest raportowany lub odinstalować rozszerzenia hello z hello maszyny Wirtualnej i ponów próbę migracji.</span><span class="sxs-lookup"><span data-stu-id="db6b6-133">Ensure that hello Extension status is being reported or uninstall hello extension from hello VM and retry migration.</span></span> <br><br> <span data-ttu-id="db6b6-134">Maszyna wirtualna {nazwa_maszyny_wirtualnej} w usłudze hostowanej {nazwa_usługi_hostowanej} zawiera rozszerzenie {nazwa_rozszerzenia} zgłaszające stan procedury obsługi: {stan_procedury_obsługi}.</span><span class="sxs-lookup"><span data-stu-id="db6b6-134">VM {vm-name} in HostedService {hosted-service-name} contains Extension {extension-name} reporting Handler Status: {handler-status}.</span></span> <span data-ttu-id="db6b6-135">W związku z tym nie można migrować hello maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="db6b6-135">Hence, hello VM cannot be migrated.</span></span> <span data-ttu-id="db6b6-136">Sprawdź, czy stan programu obsługi rozszerzenia hello zgłaszają {obsługi stanu} lub odinstaluj je z hello maszyny Wirtualnej i ponów próbę migracji.</span><span class="sxs-lookup"><span data-stu-id="db6b6-136">Ensure that hello Extension handler status being reported is {handler-status} or uninstall it from hello VM and retry migration.</span></span> <br><br> <span data-ttu-id="db6b6-137">Agent maszyny Wirtualnej dla maszyny Wirtualnej {Nazwa maszyny wirtualnej} w usłudze hostowanej {hostowanej usługi nazwa-} to jest raportowanie hello ogólny stan agenta jako nie jest gotowy.</span><span class="sxs-lookup"><span data-stu-id="db6b6-137">VM Agent for VM {vm-name} in HostedService {hosted-service-name} is reporting hello overall agent status as Not Ready.</span></span> <span data-ttu-id="db6b6-138">W związku z tym hello maszyny Wirtualnej mogły nie zostać zmigrowane, jeśli ma rozszerzenie migrowalna.</span><span class="sxs-lookup"><span data-stu-id="db6b6-138">Hence, hello VM may not be migrated, if it has a migratable extension.</span></span> <span data-ttu-id="db6b6-139">Upewnij się, że hello agenta maszyny Wirtualnej jest raportowania ogólny stan agenta jako gotowy.</span><span class="sxs-lookup"><span data-stu-id="db6b6-139">Ensure that hello VM Agent is reporting overall agent status as Ready.</span></span> <span data-ttu-id="db6b6-140">Zobacz toohttps://aka.ms/classiciaasmigrationfaqs.</span><span class="sxs-lookup"><span data-stu-id="db6b6-140">Refer toohttps://aka.ms/classiciaasmigrationfaqs.</span></span> |<span data-ttu-id="db6b6-141">Agent gościa Azure & rozszerzenia maszyny Wirtualnej należy wychodzącego internet access toohello maszyny Wirtualnej magazynu konta toopopulate ich stan.</span><span class="sxs-lookup"><span data-stu-id="db6b6-141">Azure guest agent & VM Extensions need outbound internet access toohello VM storage account toopopulate their status.</span></span> <span data-ttu-id="db6b6-142">Typowe przyczyny niepowodzenia stanu obejmują następujące sytuacje:</span><span class="sxs-lookup"><span data-stu-id="db6b6-142">Common causes of status failure include</span></span> <li> <span data-ttu-id="db6b6-143">Grupy zabezpieczeń sieci, która blokuje toohello wychodzący dostęp internetowe</span><span class="sxs-lookup"><span data-stu-id="db6b6-143">a Network Security Group that blocks outbound access toohello internet</span></span> <li> <span data-ttu-id="db6b6-144">Jeśli hello sieci Wirtualnej ma lokalnych serwerów DNS i łączność DNS zostaną utracone</span><span class="sxs-lookup"><span data-stu-id="db6b6-144">If hello VNET has on-prem DNS servers and DNS connectivity is lost</span></span> <br><br> <span data-ttu-id="db6b6-145">Jeśli będziesz kontynuować toosee nieobsługiwany stan, możesz odinstalować tooskip rozszerzenia hello to sprawdzenie i rozpocząć migrację.</span><span class="sxs-lookup"><span data-stu-id="db6b6-145">If you continue toosee an unsupported status, you can uninstall hello extensions tooskip this check and move forward with migration.</span></span> |
| <span data-ttu-id="db6b6-146">Migracja wdrożenia {nazwa_wdrożenia} w usłudze hostowanej {nazwa_usługi_hostowanej} nie jest obsługiwana, ponieważ zawiera ono wiele zestawów dostępności.</span><span class="sxs-lookup"><span data-stu-id="db6b6-146">Migration is not supported for Deployment {deployment-name} in HostedService {hosted-service-name} because it has multiple Availability Sets.</span></span> |<span data-ttu-id="db6b6-147">Obecnie można migrować tylko usługi hostowane, które mają nie więcej niż 1 zestaw dostępności.</span><span class="sxs-lookup"><span data-stu-id="db6b6-147">Currently, only hosted services that have 1 or less Availability sets can be migrated.</span></span> <span data-ttu-id="db6b6-148">toowork rozwiązać ten problem, Przenieś hello dodatkowe zestawy dostępności i maszyn wirtualnych w tych zestawów dostępności tooa innej usługi hostowanej.</span><span class="sxs-lookup"><span data-stu-id="db6b6-148">toowork around this problem, please move hello additional Availability sets and Virtual machines in those Availability sets tooa different hosted service.</span></span> |
| <span data-ttu-id="db6b6-149">Migracja nie jest obsługiwana dla wdrożenia {Nazwa wdrożenia} w usłudze hostowanej {hostowanej usługi nazwa-bajtowemu maszyn wirtualnych, które nie są częścią zestawu dostępności hello, mimo że hello usługi hostowanej zawiera jeden.</span><span class="sxs-lookup"><span data-stu-id="db6b6-149">Migration is not supported for Deployment {deployment-name} in HostedService {hosted-service-name because it has VMs that are not part of hello Availability Set even though hello HostedService contains one.</span></span> |<span data-ttu-id="db6b6-150">Obejście Hello w tym scenariuszu jest tooeither Przenieś wszystkie maszyny wirtualne hello w jednej dostępności ustawiania lub usuwania wszystkich maszyn wirtualnych z powitalne w usłudze hostowanej hello zestawu dostępności.</span><span class="sxs-lookup"><span data-stu-id="db6b6-150">hello workaround for this scenario is tooeither move all hello virtual machines into a single Availability set or remove all Virtual machines from hello Availability set in hello hosted service.</span></span> |
| <span data-ttu-id="db6b6-151">Magazyn konta/usługi hostowanej/wirtualnej sieci {nazwa wirtualnej sieci} trwa proces jej migrowania hello i dlatego nie można zmienić</span><span class="sxs-lookup"><span data-stu-id="db6b6-151">Storage account/HostedService/Virtual Network {virtual-network-name} is in hello process of being migrated and hence cannot be changed</span></span> |<span data-ttu-id="db6b6-152">Ten błąd wystąpi podczas operacji migracji "Prepare" hello zostało ukończone w zasobie hello i operacji spowodowałoby, że zasób toohello zmiany zostanie wywołany.</span><span class="sxs-lookup"><span data-stu-id="db6b6-152">This error happens when hello "Prepare" migration operation has been completed on hello resource and an operation that would make a change toohello resource is triggered.</span></span> <span data-ttu-id="db6b6-153">Z powodu blokady hello na płaszczyźnie zarządzania powitania po wykonaniu operacji "Prepare" wszystkie zmiany toohello zasobów są zablokowane.</span><span class="sxs-lookup"><span data-stu-id="db6b6-153">Because of hello lock on hello management plane after "Prepare" operation, any changes toohello resource are blocked.</span></span> <span data-ttu-id="db6b6-154">płaszczyzny zarządzania hello toounlock, można uruchomić hello "Zatwierdź" migracji operacji toocomplete migracji lub hello "Abort" migracji operacji tooroll ponownie hello operacji "Prepare".</span><span class="sxs-lookup"><span data-stu-id="db6b6-154">toounlock hello management plane, you can run hello "Commit" migration operation toocomplete migration or hello "Abort" migration operation tooroll back hello "Prepare" operation.</span></span> |
| <span data-ttu-id="db6b6-155">Migracja jest niedozwolona dla usługi hostowanej {nazwa_usługi_hostowanej}, ponieważ ma ona maszynę wirtualną {nazwa_maszyny_wirtualnej} w stanie: RoleStateUnknown.</span><span class="sxs-lookup"><span data-stu-id="db6b6-155">Migration is not allowed for HostedService {hosted-service-name} because it has VM {vm-name} in State: RoleStateUnknown.</span></span> <span data-ttu-id="db6b6-156">Migracja jest dozwolone, tylko gdy maszyna wirtualna jest w jednym z następujących hello powitalne stany — uruchomiona, zatrzymana, zatrzymana alokację.</span><span class="sxs-lookup"><span data-stu-id="db6b6-156">Migration is allowed only when hello VM is in one of hello following states - Running, Stopped, Stopped Deallocated.</span></span> |<span data-ttu-id="db6b6-157">Witaj maszyny Wirtualnej może być przeprowadzana za pośrednictwem zmiany stanu, który zazwyczaj miejsce, gdy podczas operacji update na powitania usługi hostowanej, takie jak ponowne uruchomienie komputera, instalacja rozszerzenia itp. Przed podjęciem próby migracji zaleca dla toocomplete operacji aktualizacji hello na powitania usługi hostowanej.</span><span class="sxs-lookup"><span data-stu-id="db6b6-157">hello VM might be undergoing through a state transition, which usually happens when during an update operation on hello HostedService such as a reboot, extension installation etc. It is recommended for hello update operation toocomplete on hello HostedService before trying migration.</span></span> |
| <span data-ttu-id="db6b6-158">Wdrożenie {Nazwa wdrożenia} w usłudze hostowanej {hostowanej usługi nazwa-} zawiera {Nazwa maszyny wirtualnej} maszyny Wirtualnej z dyskiem danych {danych dysk name}, którego blob fizycznej w bajtach rozmiarze {size-of-the-vhd-blob-backing-the-data-disk} jest niezgodny z {rozmiar logiczny dysku danych maszyny Wirtualnej hello Size-of-the-data-Disk-specified-in-the-VM-API} bajtów.</span><span class="sxs-lookup"><span data-stu-id="db6b6-158">Deployment {deployment-name} in HostedService {hosted-service-name} contains a VM {vm-name} with Data Disk {data-disk-name} whose physical blob size {size-of-the-vhd-blob-backing-the-data-disk} bytes does not match hello VM Data Disk logical size {size-of-the-data-disk-specified-in-the-vm-api} bytes.</span></span> <span data-ttu-id="db6b6-159">Migracja będzie kontynuowana bez określania rozmiaru dla dysku danych hello hello maszyny Wirtualnej Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="db6b6-159">Migration will proceed without specifying a size for hello data disk for hello Azure Resource Manager VM.</span></span> | <span data-ttu-id="db6b6-160">Ten błąd wystąpi, jeśli został zmieniony obiektu blob dysku VHD hello bez aktualizowania rozmiar hello hello wirtualna interfejsu API modelu.</span><span class="sxs-lookup"><span data-stu-id="db6b6-160">This error happens if you've resized hello VHD blob without updating hello size in hello VM API model.</span></span> <span data-ttu-id="db6b6-161">Szczegółowe kroki zaradcze przedstawiono [poniżej](#vm-with-data-disk-whose-physical-blob-size-bytes-does-not-match-the-vm-data-disk-logical-size-bytes).</span><span class="sxs-lookup"><span data-stu-id="db6b6-161">Detailed mitigation steps are outlined [below](#vm-with-data-disk-whose-physical-blob-size-bytes-does-not-match-the-vm-data-disk-logical-size-bytes).</span></span>|
| <span data-ttu-id="db6b6-162">Wystąpił wyjątek magazynu podczas weryfikowania dysku danych {nazwa_dysku_danych} z linkiem multimediów {identyfikator_URI_dysku_danych} dla maszyny wirtualnej {nazwa_maszyny_wirtualnej} w usłudze w chmurze {nazwa_usługi_w_chmurze}.</span><span class="sxs-lookup"><span data-stu-id="db6b6-162">A storage exception occurred while validating data disk {data disk name} with media link {data disk Uri} for VM {VM name} in Cloud Service {Cloud Service name}.</span></span> <span data-ttu-id="db6b6-163">Upewnij się, że tego łącza nośnika wirtualnego dysku twardego hello jest dostępny dla tej maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="db6b6-163">Please ensure that hello VHD media link is accessible for this virtual machine</span></span> | <span data-ttu-id="db6b6-164">Ten błąd może się zdarzyć, jeśli dyski hello hello maszyna wirtualna została usunięta lub nie są już dostępne.</span><span class="sxs-lookup"><span data-stu-id="db6b6-164">This error can happen if hello disks of hello VM have been deleted or are not accessible anymore.</span></span> <span data-ttu-id="db6b6-165">Upewnij się, że dyski hello hello maszyna wirtualna istnieje.</span><span class="sxs-lookup"><span data-stu-id="db6b6-165">Please make sure hello disks for hello VM exist.</span></span>|
| <span data-ttu-id="db6b6-166">Maszyna wirtualna {nazwa_maszyny_wirtualnej} w usłudze hostowanej {nazwa_usługi_w_chmurze} zawiera dysk z linkiem multimediów {identyfikator_URI_pliku_vhd} mającym nazwę obiektu blob {nazwa_obiektu_blob_pliku_vhd}, który nie jest obsługiwany w usłudze Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="db6b6-166">VM {vm-name} in HostedService {cloud-service-name} contains Disk with MediaLink {vhd-uri} which has blob name {vhd-blob-name}  that is not supported in Azure Resource Manager.</span></span> | <span data-ttu-id="db6b6-167">Ten błąd występuje, gdy nazwa hello obiektu hello blob ma "/" w nim, który nie jest obsługiwany w obliczeniowe dostawcy zasobów na aktualnie.</span><span class="sxs-lookup"><span data-stu-id="db6b6-167">This error occurs when hello name of hello blob has a "/" in it which is not supported in Compute Resource Provider currently.</span></span> |
| <span data-ttu-id="db6b6-168">Nie jest dozwolona migracja wdrożenia {Nazwa wdrożenia} w usłudze hostowanej {— nazwa usługi w chmurze —}, ponieważ nie znajduje się w zakresie regionalnym hello.</span><span class="sxs-lookup"><span data-stu-id="db6b6-168">Migration is not allowed for Deployment {deployment-name} in HostedService {cloud-service-name} as it is not in hello regional scope.</span></span> <span data-ttu-id="db6b6-169">Przenoszenie ten zakres tooregional wdrożenia, zapoznaj się z toohttp://aka.ms/regionalscope.</span><span class="sxs-lookup"><span data-stu-id="db6b6-169">Please refer toohttp://aka.ms/regionalscope for moving this deployment tooregional scope.</span></span> | <span data-ttu-id="db6b6-170">W 2014 r. Azure anonsowania, że zasoby sieciowe zostaną przeniesione z zakresu tooregional zakresie poziomu klastra.</span><span class="sxs-lookup"><span data-stu-id="db6b6-170">In 2014, Azure announced that networking resources will move from a cluster level scope tooregional scope.</span></span> <span data-ttu-id="db6b6-171">Aby uzyskać więcej szczegółów, zobacz [http://aka.ms/regionalscope] (http://aka.ms/regionalscope).</span><span class="sxs-lookup"><span data-stu-id="db6b6-171">See [http://aka.ms/regionalscope] for more details (http://aka.ms/regionalscope).</span></span> <span data-ttu-id="db6b6-172">Ten błąd wystąpi podczas wdrażania hello migrowane nie miał operacji aktualizacji, które automatycznie przenosi je tooa zakresu regionalnego.</span><span class="sxs-lookup"><span data-stu-id="db6b6-172">This error happens when hello deployment being migrated has not had an update operation, which automatically moves it tooa regional scope.</span></span> <span data-ttu-id="db6b6-173">Najlepsze rozwiązania jest tooeither dodać tooa punktu końcowego maszyny Wirtualnej lub danych na dysku toohello maszyny Wirtualnej, a następnie ponów próbę migracji.</span><span class="sxs-lookup"><span data-stu-id="db6b6-173">Best workaround is tooeither add an endpoint tooa VM or a data disk toohello VM and then retry migration.</span></span> <br> <span data-ttu-id="db6b6-174">Zobacz [jak tooset się punkty końcowe w klasycznym maszyny wirtualnej systemu Windows na platformie Azure](../articles/virtual-machines/windows/classic/setup-endpoints.md#create-an-endpoint) lub [dołączanie danych dysku tooa systemu Windows maszyny wirtualnej utworzonej z hello klasycznego modelu wdrażania](../articles/virtual-machines/windows/classic/attach-disk.md)</span><span class="sxs-lookup"><span data-stu-id="db6b6-174">See [How tooset up endpoints on a classic Windows virtual machine in Azure](../articles/virtual-machines/windows/classic/setup-endpoints.md#create-an-endpoint) or [Attach a data disk tooa Windows virtual machine created with hello classic deployment model](../articles/virtual-machines/windows/classic/attach-disk.md)</span></span>|


## <a name="detailed-mitigations"></a><span data-ttu-id="db6b6-175">Szczegółowe środki zaradcze</span><span class="sxs-lookup"><span data-stu-id="db6b6-175">Detailed mitigations</span></span>

### <a name="vm-with-data-disk-whose-physical-blob-size-bytes-does-not-match-hello-vm-data-disk-logical-size-bytes"></a><span data-ttu-id="db6b6-176">Maszynę Wirtualną za pomocą którego fizyczna obiektu blob w bajtach rozmiar dysku danych jest niezgodny z dysku danych maszyny Wirtualnej hello w bajtach rozmiar logiczny.</span><span class="sxs-lookup"><span data-stu-id="db6b6-176">VM with Data Disk whose physical blob size bytes does not match hello VM Data Disk logical size bytes.</span></span>

<span data-ttu-id="db6b6-177">Dzieje się tak, gdy hello logicznej rozmiar dysku danych można uzyskać zsynchronizowane z hello rzeczywisty rozmiar obiektu blob dysku VHD.</span><span class="sxs-lookup"><span data-stu-id="db6b6-177">This happens when hello Data disk logical size can get out of sync with hello actual VHD blob size.</span></span> <span data-ttu-id="db6b6-178">To można łatwo sprawdzić za pomocą następującego polecenia hello:</span><span class="sxs-lookup"><span data-stu-id="db6b6-178">This can be easily verified using hello following commands:</span></span>

#### <a name="verifying-hello-issue"></a><span data-ttu-id="db6b6-179">Weryfikowanie, czy problem hello</span><span class="sxs-lookup"><span data-stu-id="db6b6-179">Verifying hello issue</span></span>

```PowerShell
# Store hello VM details in hello VM object
$vm = Get-AzureVM -ServiceName $servicename -Name $vmname

# Display hello data disk properties
# NOTE hello data disk LogicalDiskSizeInGB below which is 11GB. Also note hello MediaLink Uri of hello VHD blob as we'll use this in hello next step
$vm.VM.DataVirtualHardDisks


HostCaching         : None
DiskLabel           : 
DiskName            : coreosvm-coreosvm-0-201611230636240687
Lun                 : 0
LogicalDiskSizeInGB : 11
MediaLink           : https://contosostorage.blob.core.windows.net/vhds/coreosvm-dd1.vhd
SourceMediaLink     : 
IOType              : Standard
ExtensionData       : 

# Now get hello properties of hello blob backing hello data disk above
# NOTE hello size of hello blob is about 15 GB which is different from LogicalDiskSizeInGB above
$blob = Get-AzureStorageblob -Blob "coreosvm-dd1.vhd" -Container vhds 

$blob

ICloudBlob        : Microsoft.WindowsAzure.Storage.Blob.CloudPageBlob
BlobType          : PageBlob
Length            : 16106127872
ContentType       : application/octet-stream
LastModified      : 11/23/2016 7:16:22 AM +00:00
SnapshotTime      : 
ContinuationToken : 
Context           : Microsoft.WindowsAzure.Commands.Common.Storage.AzureStorageContext
Name              : coreosvm-dd1.vhd
```

#### <a name="mitigating-hello-issue"></a><span data-ttu-id="db6b6-180">Zmniejszenia hello problem</span><span class="sxs-lookup"><span data-stu-id="db6b6-180">Mitigating hello issue</span></span>

```PowerShell
# Convert hello blob size in bytes tooGB into a variable which we'll use later
$newSize = [int]($blob.Length / 1GB)

# See hello calculated size in GB
$newSize

15

# Store hello disk name of hello data disk as we'll use this tooidentify hello disk toobe updated
$diskName = $vm.VM.DataVirtualHardDisks[0].DiskName

# Identify hello LUN of hello data disk tooremove
$lunToRemove = $vm.VM.DataVirtualHardDisks[0].Lun

# Now remove hello data disk from hello VM so that hello disk isn't leased by hello VM and it's size can be updated
Remove-AzureDataDisk -LUN $lunToRemove -VM $vm | Update-AzureVm -Name $vmname -ServiceName $servicename

OperationDescription OperationId                          OperationStatus
-------------------- -----------                          ---------------
Update-AzureVM       213xx1-b44b-1v6n-23gg-591f2a13cd16   Succeeded  

# Verify we have hello right disk that's going toobe updated
Get-AzureDisk -DiskName $diskName

AffinityGroup        : 
AttachedTo           : 
IsCorrupted          : False
Label                : 
Location             : East US
DiskSizeInGB         : 11
MediaLink            : https://contosostorage.blob.core.windows.net/vhds/coreosvm-dd1.vhd
DiskName             : coreosvm-coreosvm-0-201611230636240687
SourceImageName      : 
OS                   : 
IOType               : Standard
OperationDescription : Get-AzureDisk
OperationId          : 0c56a2b7-a325-123b-7043-74c27d5a61fd
OperationStatus      : Succeeded

# Now update hello disk toohello new size
Update-AzureDisk -DiskName $diskName -ResizedSizeInGB $newSize -Label $diskName

OperationDescription OperationId                          OperationStatus
-------------------- -----------                          ---------------
Update-AzureDisk     cv134b65-1b6n-8908-abuo-ce9e395ac3e7 Succeeded 

# Now verify that hello "DiskSizeInGB" property of hello disk matches hello size of hello blob 
Get-AzureDisk -DiskName $diskName


AffinityGroup        : 
AttachedTo           : 
IsCorrupted          : False
Label                : coreosvm-coreosvm-0-201611230636240687
Location             : East US
DiskSizeInGB         : 15
MediaLink            : https://contosostorage.blob.core.windows.net/vhds/coreosvm-dd1.vhd
DiskName             : coreosvm-coreosvm-0-201611230636240687
SourceImageName      : 
OS                   : 
IOType               : Standard
OperationDescription : Get-AzureDisk
OperationId          : 1v53bde5-cv56-5621-9078-16b9c8a0bad2
OperationStatus      : Succeeded

# Now we'll add hello disk back toohello VM as a data disk. First we need tooget an updated VM object
$vm = Get-AzureVM -ServiceName $servicename -Name $vmname

Add-AzureDataDisk -Import -DiskName $diskName -LUN 0 -VM $vm -HostCaching ReadWrite | Update-AzureVm -Name $vmname -ServiceName $servicename

OperationDescription OperationId                          OperationStatus
-------------------- -----------                          ---------------
Update-AzureVM       b0ad3d4c-4v68-45vb-xxc1-134fd010d0f8 Succeeded      
```

### <a name="moving-a-vm-tooa-different-subscription-after-completing-migration"></a><span data-ttu-id="db6b6-181">Przenoszenie maszyny Wirtualnej tooa inną subskrypcję po zakończeniu migracji</span><span class="sxs-lookup"><span data-stu-id="db6b6-181">Moving a VM tooa different subscription after completing migration</span></span>

<span data-ttu-id="db6b6-182">Po zakończeniu procesu migracji hello można toomove hello wirtualna tooanother subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="db6b6-182">After you complete hello migration process, you may want toomove hello VM tooanother subscription.</span></span> <span data-ttu-id="db6b6-183">Jednak jeśli masz klucz tajny/certyfikatu na powitania przenieść maszynę Wirtualną, która odwołuje się do zasobu usługi Key Vault hello nie jest obecnie obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="db6b6-183">However, if you have a secret/certificate on hello VM that references a Key Vault resource, hello move is currently not supported.</span></span> <span data-ttu-id="db6b6-184">Witaj poniżej instrukcje pozwoli tooworkaround hello problem.</span><span class="sxs-lookup"><span data-stu-id="db6b6-184">hello below instructions will allow you tooworkaround hello issue.</span></span> 

#### <a name="powershell"></a><span data-ttu-id="db6b6-185">PowerShell</span><span class="sxs-lookup"><span data-stu-id="db6b6-185">PowerShell</span></span>
```powershell
$vm = Get-AzureRmVM -ResourceGroupName "MyRG" -Name "MyVM"
Remove-AzureRmVMSecret -VM $vm
Update-AzureRmVM -ResourceGroupName "MyRG" -VM $vm
```
#### <a name="azure-cli-20"></a><span data-ttu-id="db6b6-186">Interfejs wiersza polecenia platformy Azure 2.0</span><span class="sxs-lookup"><span data-stu-id="db6b6-186">Azure CLI 2.0</span></span>

```bash
az vm update -g "myrg" -n "myvm" --set osProfile.Secrets=[]
```
