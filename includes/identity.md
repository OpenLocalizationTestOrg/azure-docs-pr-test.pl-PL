Zarządzanie tożsamościami są równie ważne w chmurze publicznej hello jak lokalnie. toohelp z tym, Azure obsługuje kilku technologii tożsamości w innej chmurze. Te obejmują:

* Windows Server Active Directory (często nazywany po prostu AD) można uruchomić w chmurze hello przy użyciu maszyn wirtualnych utworzonych z maszynami wirtualnymi Azure. Takie podejście ma sens podczas korzystania z usługi Azure tooextend lokalnego centrum danych w chmurze hello.
* Można użyć usługi Azure Active Directory toogive użytkownikom pojedynczego logowania jednokrotnego za[oprogramowanie jako usługa (SaaS)](https://azure.microsoft.com/overview/what-is-saas/) aplikacji. Firmy Microsoft Office 365 używa tej technologii, na przykład i aplikacje działające na platformie Azure lub innych platform chmury można jej również użyć.
* Aplikacje działające na powitania w chmurze lub lokalnie za pomocą usługi Azure Active Directory kontroli dostępu toolet użytkownikom zalogowanie się przy użyciu tożsamości z usługi Facebook, Google, Microsoft i innych dostawców tożsamości.

W tym artykule opisano wszystkie trzy z tych opcji.

## <a name="table-of-contents"></a>Spis treści
* [Systemem Windows Server Active Directory w przypadku maszyn wirtualnych](#adinvm)
* [Za pomocą usługi Azure Active Directory](#ad)
* [Za pomocą kontroli dostępu w usłudze Azure Active Directory](#ac)

## <a name="adinvm"></a>Systemem Windows Server Active Directory w przypadku maszyn wirtualnych
System Windows Server AD w maszynach wirtualnych platformy Azure są podobne jak uruchomić je lokalnie. [Rysunek 1](#fig1) pokazuje typowym przykładem, jak wygląda.

![Azure Active Directory w maszynie wirtualnej](./media/identity/identity_01_ADinVM.png)

<a name="Fig1"></a>Rysunek 1: Usługi Active Directory systemu Windows Server można uruchomić w organizacji tooan maszyn wirtualnych platformy Azure połączenia lokalnego centrum danych przy użyciu sieci wirtualnej platformy Azure.

W tym miejscu pokazano przykład Witaj AD systemu Windows Server jest uruchomiony na maszynach wirtualnych utworzonych przy użyciu usługi Azure Virtual Machines hello platformy technologię IaaS. Te maszyny wirtualne i kilka innych są pogrupowane w sieci wirtualnej połączone tooan lokalnego centrum danych przy użyciu sieci wirtualnej platformy Azure. Wycina Hello sieć wirtualną out grupy maszyn wirtualnych chmury wchodzące w interakcje z sieci lokalnej hello za pośrednictwem połączenia wirtualnej sieci prywatnej (VPN). To umożliwia wykonanie tych maszyn wirtualnych platformy Azure wygląda jak po prostu inną podsieć toohello lokalnego centrum danych. Jak pokazano na rysunku hello, działają dwa z tych maszyn wirtualnych kontrolerów domeny systemu Windows Server AD. Witaj innych maszyn wirtualnych w sieci wirtualnej hello może być uruchomiona aplikacji, takich jak SharePoint lub używane w inny sposób, takich jak do projektowania i testowania. Witaj lokalnego centrum danych jest uruchomiona dwa kontrolery domeny systemu Windows Server AD.

Dostępnych jest kilka opcji łączenia hello kontrolerów domeny w chmurze hello z uruchomione lokalnie:

* Wszystkie z nich należą do jednej domeny usługi Active Directory.
* Utwórz oddzielne AD domeny lokalnej i w chmurze hello, które są częścią hello tym samym lesie.
* Utwórz oddzielne lasów usługi AD w hello chmurze i lokalnie, a następnie połącz lasów hello przy użyciu relacji zaufania między lasami lub Windows Server Active Directory Federation Services (AD FS), które można również uruchomić na maszynach wirtualnych na platformie Azure.

Niezależnie od domyślny wybór, administrator upewnij się, żądania uwierzytelniania od użytkowników lokalnych przejdź toocloud kontrolery domeny tylko wtedy, gdy jest to konieczne, ponieważ chmura toohello łącze hello jest prawdopodobnie toobe wolniej niż sieci lokalnej. Inny tooconsider Multi-Factor w chmurze łączenia i kontrolery domeny lokalnej jest hello ruch generowany przez replikacji. Kontrolery domeny w chmurze hello zwykle są w ich własnej lokacji usługi AD, dzięki czemu administrator tooschedule częstotliwość replikacji jest wykonywane. Azure opłaty za ruch wysyłany poza centrum danych Azure, chociaż nie bajtów wysłanych w, co może mieć wpływ na opcji replikacji hello administratora. Warto również wskazujące, że podczas Azure zapewniają obsługę własnego systemu nazw domen (DNS, Domain Name System), ta usługa nie ma funkcje wymagane przez usługę Active Directory (takich jak Obsługa rekordów dynamicznych DNS i SRV). W związku z tym systemem Windows Server AD na platformie Azure wymaga ustawienia własne serwery DNS w chmurze hello.

Systemem Windows Server AD w maszynach wirtualnych platformy Azure może być uzasadniona w kilku różnych sytuacjach. Oto kilka przykładów:

* Jeśli używasz usługi Azure Virtual Machines jako rozszerzenie własnego centrum danych, można uruchamiać aplikacje w chmurze hello niezbędne elementy toohandle kontrolerów domeny lokalnej, np. żądań zintegrowanego uwierzytelniania systemu Windows lub zapytań LDAP. Programu SharePoint, na przykład współdziała często z usługi Active Directory, a więc jest możliwe toorun farmy programu SharePoint na platformie Azure przy użyciu lokalnego katalogu, konfigurowanie kontrolerów domeny w chmurze hello będzie znacznie poprawić wydajność. (Jest ważne toorealize, że nie jest zawsze wymagane, jednak; dużo aplikacji mogą być pomyślnie uruchamiane w chmurze hello przy użyciu tylko kontrolery domeny z lokalnymi).
* Załóżmy, że w biurze oddziału odległych brakuje toorun zasobów hello własnych kontrolerów domeny. Obecnie jego użytkownicy muszą uwierzytelnić się kontrolerów toodomain na powitania po drugiej stronie Witaj świecie — logowania są przetwarzane wolno. Uruchamianie usługi Active Directory na platformie Azure w bliżej centrum danych firmy Microsoft można przyspieszyć to bez konieczności więcej serwerów w biurze oddziału hello.
* Organizacja, która używa usługi Azure do odzyskiwania po awarii może obsługiwać niewielki zestaw aktywnych maszyn wirtualnych w chmurze hello, w tym kontrolerze domeny. Następnie można przygotować tooexpand tej lokacji jako tootake wymagane przez błędów w innym miejscu.

Istnieją także inne możliwości. Na przykład nie masz wymaganych tooconnect AD systemu Windows Server w tooan chmury hello lokalnego centrum danych. Jeśli chce toorun farmy programu SharePoint, który obsłużył określonego zbioru użytkowników, na przykład wszystkich z nich będzie zalogować się wyłącznie z tożsamościami oparte na chmurze, lasu autonomiczny można utworzyć na platformie Azure. Jak użyć tej technologii, zależy od tego, jakie są cele. (Aby uzyskać szczegółowe wskazówki na temat używania systemu Windows Server AD z platformy Azure, [widoczną w tym miejscu](http://msdn.microsoft.com/library/windowsazure/jj156090.aspx).)

## <a name="ad"></a>Za pomocą usługi Azure Active Directory
Jak aplikacje SaaS staną się bardziej popularne, pobierają one oczywistym pytaniem: jakiego rodzaju usługi katalogowej należy używać tych aplikacji opartej na chmurze? Toothat firmy Microsoft w odpowiedzi na pytanie jest usługa Azure Active Directory.

Istnieją dwie główne opcje dotyczące korzystania z tej usługi katalogowej w chmurze hello:

* Azure Active Directory osób i organizacji, które używają tylko aplikacji SaaS można traktować jako ich usługa katalogowa wyłącznie.
* Organizacje z systemem Windows Server Active Directory można połączyć tooAzure katalogu ich lokalnej usługi Active Directory, a następnie użyj go toogive użytkownikom pojedynczy tooSaaS logowania w aplikacji.

[Rysunek 2](#fig2) przedstawiono hello pierwszy z dwóch opcji, Azure Active Directory w przypadku wszystkich, która jest wymagana.

![Azure Active Directory w maszynie wirtualnej](./media/identity/identity_02_AD.png)

<a name="fig2"></a>Rysunek 2: Usługi Azure Active Directory umożliwia użytkownikom w organizacji aplikacji tooSaaS rejestracji jednokrotnej, w tym usługi Office 365.

Jak pokazano na rysunku hello, usługi Azure AD to usługa wielodostępnej. Oznacza to, że jednocześnie może obsługiwać wiele różnych organizacji, przechowywania katalogu informacji o użytkownikach w każdej z nich. W tym przykładzie użytkownik w organizacji, A próbuje tooaccess aplikacji SaaS. Ta aplikacja może być częścią usługi Office 365, takich jak SharePoint Online lub może być inny — aplikacje firmy Microsoft można również użyć tej technologii. Ponieważ usługa Azure AD obsługuje protokół hello SAML 2.0, wszystko wymaga z aplikacji hello możliwości toointeract używa tego standardu branżowego modelu. (W rzeczywistości aplikacji, które używają usługi Azure AD można uruchomić w dowolnego centrum danych, a nie tylko centrum danych Azure.)

proces Hello rozpoczyna się po hello użytkownik uzyskuje dostęp do aplikacji SaaS (krok 1). toouse tej aplikacji hello użytkownik musi przedstawić token wystawiony przez usługę Azure AD.

Token ten zawiera informacje umożliwiające identyfikację użytkownika hello i jest podpisany cyfrowo przez usługę Azure AD. tooget hello token, hello użytkownik jest uwierzytelniany samego tooAzure AD przez podanie nazwy użytkownika i hasła (krok 2). Następnie usługi Azure AD zwraca token hello potrzebuje (krok 3).

Token ten jest następnie wysyłana aplikacji SaaS toohello (krok 4), która sprawdza podpis hello token i używa jej zawartość (krok 5). Zwykle aplikacja hello będzie korzystać z informacji o tożsamości hello hello token zawiera toodecide, jakie informacje hello użytkownik może tooaccess i być może w inny sposób.

Jeśli aplikacja hello wymaga więcej informacji na temat hello użytkownika niż to, co jest zawartych w tokenie hello, go to żądanie bezpośrednio z usługi Azure AD przy użyciu interfejsu API Azure AD Graph hello (krok 6). W hello początkowej wersji programu Azure AD, hello katalogu schematu jest bardzo proste: zawiera tylko użytkowników i grup oraz relacji między nimi. Aplikacje mogą używać tego toolearn informacje dotyczące połączeń między użytkownikami. Na przykład załóżmy, że aplikacja musi tooknow, który Menedżer tego użytkownika jest toodecide, czy jest dozwolony dostęp toosome fragmentów danych. Go to informacje, badając Azure AD za pomocą hello interfejsu API programu Graph.

Witaj interfejsu API programu Graph używa zwykłej protokołu RESTful, co pozwala na bezpośrednie toouse z większości klientów, w tym urządzeń przenośnych. Hello interfejs API obsługuje również rozszerzenia hello zdefiniowane przez OData, dodanie czynności takich jak zapytania języka toolet klientów dostępu do danych w sposób bardziej użyteczne. (Aby uzyskać więcej informacji na temat OData, zobacz [wprowadzenie OData](http://download.microsoft.com/download/E/5/A/E5A59052-EE48-4D64-897B-5F7C608165B8/IntroducingOData.pdf).) Ponieważ hello interfejsu API programu Graph mogą być używane toolearn o relacje między użytkownikami, umożliwia aplikacji zrozumieć hello społecznościowych wykresu, który jest osadzony w schemacie hello Azure AD dla konkretnej organizacji (czyli nazywa się ją hello interfejsu API programu Graph). I tooauthenticate sam zażąda tooAzure AD dla interfejsu API programu Graph, aplikacja korzysta z protokołu OAuth 2.0.

Jeśli organizacja nie korzysta z usługi Active Directory systemu Windows Server — nie ma lokalnych serwerów ani domeny -, a jedynie zależy od aplikacji w chmurze, które używają usługi Azure AD, za pomocą tylko tej katalogiem w chmurze spowodowałoby to nadanie hello firmy użytkownicy pojedynczego logowania jednokrotnego tooall z nich. Jeszcze podczas tego scenariusza pobiera częściej codziennie, większość organizacji używa nadal domenami lokalnymi utworzone za pomocą usługi Active Directory systemu Windows Server. Usługa Azure AD ma tooplay przydatne roli tutaj również jako [rysunek 3](#fig3) zawiera.

![Azure Active Directory w maszynie wirtualnej](./media/identity/identity_03_AD.png)
<a id="fig3"></a>rysunek 3: organizacja może tworzyć federacje Windows Server Active Directory z usługą Azure Active Directory toogive jego użytkowników aplikacji tooSaaS rejestracji jednokrotnej.

W tym scenariuszu użytkownik w organizacji B żąda tooaccess aplikacji SaaS. Aby to zrobi, Administratorzy katalogu organizacji hello musi ustanowić relację federacji z usługą Azure AD za pomocą usług AD FS, jak hello rysunku przedstawiono. Administratorzy te należy również skonfigurować synchronizację danych między organizacji hello lokalnego systemu Windows Server AD i Azure AD. To automatycznie kopiuje użytkowników i informacji o grupie hello lokalnego katalogu tooAzure AD. Zwróć uwagę, dzięki temu: W praktyce hello organizacji stanowi rozszerzenie jego lokalnego katalogu w chmurze hello. Połączenie systemu Windows Server AD i Azure AD w ten sposób zapewnia usługi katalogowej, którymi można zarządzać w pojedynczą jednostkę, przy zachowaniu wpływ zarówno lokalnie, jak i w chmurze hello hello organizacji.

toouse usługi Azure AD, hello najpierw logowania użytkownika w domenie usługi Active Directory lokalnymi tooher w zwykły sposób (krok 1). Gdy użytkownik próbuje aplikacji SaaS hello tooaccess (krok 2), procesie federacyjnym hello powoduje w usłudze Azure AD wystawiania jej tokenu dla tej aplikacji (krok 3). (Aby uzyskać więcej informacji na temat działania federacyjnego zobacz [tożsamości opartego na oświadczeniach dla systemu Windows: technologii i scenariuszy](http://www.davidchappell.com/writing/white_papers/Claims-Based_Identity_for_Windows_v3.0--Chappell.docx).) Przed, token zawiera informacje umożliwiające identyfikację użytkownika hello i jest podpisany cyfrowo przez usługę Azure AD. Token ten jest następnie wysyłana aplikacji SaaS toohello (krok 4), która sprawdza podpis hello token i używa jej zawartość (krok 5). I hello poprzednim scenariuszu hello SaaS, aplikacja może używać hello więcej o tym użytkowniku toolearn interfejsu API programu Graph, jeśli jest to konieczne (krok 6).

Obecnie usługi Azure AD nie jest całkowite zastąpienie lokalnej w systemie Windows Server AD. Jak już wspomniano hello katalogiem w chmurze ma znacznie prostsze schemat, a także brakuje rzeczy, takich jak zasady grupy, hello możliwości toostore informacje dotyczące maszyn i pomocy technicznej dla usługi LDAP. (W rzeczywistości maszynę z systemem Windows nie może być skonfigurowany toolet, które użytkownicy logują się przy użyciu żadnej zawartości ale usługi Azure AD tooit — nie jest obsługiwanym scenariuszem.) Zamiast tego hello początkowe cele usługi Azure AD obejmują umożliwienie enterprise użytkowników dostępu do aplikacji w chmurze hello bez zachowania oddzielne logowania i zwalnianie lokalnych administratorów ręcznie synchronizacją ich katalogu lokalnego z katalogu Każda aplikacja SaaS używa w organizacji. Wraz z upływem czasu jednak oczekiwać tego szerszego zakresu scenariuszy tooaddress usługi katalogu w chmurze.

## <a name="ac"></a>Za pomocą kontroli dostępu w usłudze Azure Active Directory
Technologii tożsamości w chmurze mogą być używane toosolve różne problemy. Usługa Azure Active Directory organizacji użytkownicy mogli aplikacji SaaS toomultiple rejestracji jednokrotnej, np. Ale technologii tożsamości w chmurze hello można również w inny sposób.

Załóżmy na przykład, że aplikacja chce toolet swoim użytkownikom zalogowanie się przy użyciu tokenów wystawionych przez wiele *dostawcy tożsamości (IdPs)*. Wielu dostawców tożsamości różnych istnieje już dziś, Facebook, Google, Microsoft i innych osób, w tym i aplikacje często powiadomić użytkowników, zaloguj się przy użyciu jednej z tych tożsamości. Dlaczego należy aplikacji odblokowane toomaintain własną listę użytkowników i hasła podczas zamiast tego mogą polegać na tożsamości, które już istnieją? Akceptowanie istniejącej tożsamości sprawia, że życia prostsze zarówno dla użytkowników, którzy mają jeden mniej tooremember nazwę użytkownika i hasło, a dla osób hello tworzenie aplikacji hello, który nie jest już potrzebny toomaintain własne listy nazwy użytkowników i hasła.

Jednak podczas każdego dostawcy tożsamości problemy z określonego rodzaju token, tokeny te nie są standardowe — IdP każdy ma własny format. Ponadto hello informacje w tych tokenów również nie standardowa. Aplikacji, który chce tooaccept tokeny wystawione przez, powiedz, Facebook, Google i Microsoft stoi wobec hello żądanie zapisu toohandle unikatowy kod każdego z tych formatach.

Ale Dlaczego warto to zrobić? Dlaczego nie zamiast tego utworzyć pośrednik mogą generować jeden format tokenu z reprezentację typowych informacji o tożsamości? Takie podejście spowodowałoby życia prostsze dla hello deweloperów, którzy tworzenia aplikacji, ponieważ potrzebna jest teraz toohandle tylko jednego rodzaju token. Azure kontroli dostępu Active Directory działanie dokładnie, zapewniając pośrednik w chmurze hello do pracy z różnymi tokenów. [Rysunek 4](#fig4) pokazuje, jak to działa

![Azure Active Directory w maszynie wirtualnej](./media/identity/identity_04_IdentityProviders.png)
<a id="fig4"></a>rysunek 4: Azure Active Directory kontrola dostępu ułatwia tokenów tożsamości tooaccept aplikacji wydany przez dostawców tożsamości innego.

proces Hello rozpoczyna się, gdy użytkownik próbuje aplikacji hello tooaccess w przeglądarce. Aplikacja Hello przekierowuje jej tooan IdP jej wybór (i tej aplikacji hello również zaufania). Użytkownik jest uwierzytelniany sobie toothis dostawców tożsamości, takie jak przez wprowadzenie nazwy użytkownika i hasła (krok 1), a hello IdP zwraca token zawierający informacje o jego (krok 2).

Jak pokazano na rysunku hello, kontroli dostępu obsługuje wiele różnych IdPs oparte na chmurze, w tym kont utworzonych przez Google, Yahoo, Facebook, Microsoft (znanego wcześniej jako identyfikator Windows Live ID) i dowolnego dostawcy uwierzytelniania OpenID. Obsługuje ona również tożsamości utworzone za pomocą usługi Azure Active Directory i przy użyciu federacji z usługami AD FS, Windows Server Active Directory. Celem Hello są toocover hello najczęściej używane tożsamości dzisiaj, czy są one wystawiony przez IdPs w chmurze hello lub lokalnie.

Po przeglądarki użytkownika hello ma token IdP z jej wybrana IdP, wysyła ten token tooAccess formantu (krok 3). Kontrola dostępu weryfikuje hello token, upewniając się, że jej naprawdę został wystawiony przez ten dostawców tożsamości, a następnie tworzy nowy token, zgodnie z zasadami toohello, które zostały zdefiniowane dla tej aplikacji. Podobnie jak Azure Active Directory kontroli dostępu jest usługą wielodostępne, ale dzierżaw hello są aplikacje, a nie w organizacji klienta. Każdej aplikacji można uzyskać jego własnej przestrzeni nazw, jak hello rysunku przedstawiono i można określić różne zasady dotyczące autoryzacji i inne.

Te zasady umożliwiają definiowanie sposobu transformacji tokeny od różnych IdPs w tokenie kontroli dostępu administratora każdej aplikacji. Na przykład użycie różnych IdPs różne typy służący do reprezentowania nazwy użytkownika, zasady kontroli dostępu można przekształcać wszystkich tych do typowych wpisz nazwę użytkownika. Kontrola dostępu wysyła następnie nowe przeglądarka toohello tyłu tokenu (krok 4), który przesyła toohello aplikacji (krok 5). Po posiada token kontroli dostępu hello aplikacji hello sprawdza, czy ten token naprawdę został wystawiony przez kontroli dostępu, a następnie używa informacji hello zawiera (krok 6).

Podczas tego procesu może wydawać się nieco skomplikowany, faktycznie ułatwia życia znacznie łatwiejsze do hello Twórca aplikacji hello. Zamiast obsługi różnych tokenów zawierających różne informacje, aplikacja hello może akceptować tożsamości wystawiony przez wielu dostawców tożsamości podczas odbierania nadal tylko jednego tokenu znanych informacji. Ponadto, a nie wymagają toobe każdej aplikacji skonfigurować tootrust różnych IdPs, te relacje zaufania zamiast tego są obsługiwane przez funkcję Kontrola dostępu — aplikacji tylko muszą ufać.

Warto wskazujące, że nic o kontroli dostępu nie wiązanej tooWindows - równie dobrze może zostać wykorzystana przez aplikację systemu Linux, akceptowane tylko tożsamości Google i Facebook. A nawet kontroli dostępu jest częścią hello rodziny usługi Azure Active Directory, można traktować go jako całkowicie różne usługi z co zostało opisane w poprzedniej sekcji hello. Podczas pracy obu tych technologii z tożsamością, odnoszą się do zupełnie różne problemy (chociaż Microsoft ma dana oczekuje hello toointegrate dwa, w pewnym momencie).

Praca z tożsamości jest ważne dla niemal każdej aplikacji. Celem Hello kontroli dostępu jest toomake ułatwić dla deweloperów toocreate aplikacji, które akceptować tożsamości z tożsamości różnych dostawców. Umieszczenie tej usługi w chmurze hello, firma Microsoft wprowadziła, jego tooany dostępnych aplikacji działających na dowolnej platformie.

## <a name="about-hello-author"></a>O hello autora
Chappell Dominik jest główną Chappell z & stowarzyszonych [www.davidchappell.com](http://www.davidchappell.com) w Warszawie, Polski.

