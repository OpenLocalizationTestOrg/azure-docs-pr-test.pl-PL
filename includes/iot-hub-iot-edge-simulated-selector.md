> [!div class="op_single_selector"]
> * [<span data-ttu-id="2aafc-101">Linux</span><span class="sxs-lookup"><span data-stu-id="2aafc-101">Linux</span></span>](../articles/iot-hub/iot-hub-linux-iot-edge-simulated-device.md)
> * [<span data-ttu-id="2aafc-102">Windows</span><span class="sxs-lookup"><span data-stu-id="2aafc-102">Windows</span></span>](../articles/iot-hub/iot-hub-windows-iot-edge-simulated-device.md)

<span data-ttu-id="2aafc-103">W tym przewodniku hello [symulowane urządzenie chmury Przekaż przykładowe] pokazano, jak toouse [Azure IoT krawędzi] [ lnk-sdk] toosend telemetrii urządzenia do chmury tooIoT Centrum z symulowane urządzenia.</span><span class="sxs-lookup"><span data-stu-id="2aafc-103">This walkthrough of hello [Simulated Device Cloud Upload sample] shows you how toouse [Azure IoT Edge][lnk-sdk] toosend device-to-cloud telemetry tooIoT Hub from simulated devices.</span></span>

<span data-ttu-id="2aafc-104">Przewodnik składa się z następujących elementów:</span><span class="sxs-lookup"><span data-stu-id="2aafc-104">This walkthrough covers:</span></span>

* <span data-ttu-id="2aafc-105">**Architektura**: architektury informacji na temat hello [symulowane urządzenie chmury Przekaż przykładowe].</span><span class="sxs-lookup"><span data-stu-id="2aafc-105">**Architecture**: architectural information about hello [Simulated Device Cloud Upload sample].</span></span>
* <span data-ttu-id="2aafc-106">**Tworzenie i uruchamianie**: hello kroki wymagane toobuild i przykładowa hello wykonywania.</span><span class="sxs-lookup"><span data-stu-id="2aafc-106">**Build and run**: hello steps required toobuild and run hello sample.</span></span>

## <a name="architecture"></a><span data-ttu-id="2aafc-107">Architektura</span><span class="sxs-lookup"><span data-stu-id="2aafc-107">Architecture</span></span>

<span data-ttu-id="2aafc-108">Witaj [symulowane urządzenie chmury Przekaż przykładowe] pokazuje, jak toocreate bramy, która wysyła dane telemetryczne z symulowanych Centrum IoT tooan urządzeń.</span><span class="sxs-lookup"><span data-stu-id="2aafc-108">hello [Simulated Device Cloud Upload sample] shows how toocreate a gateway that sends telemetry from simulated devices tooan IoT hub.</span></span> <span data-ttu-id="2aafc-109">Urządzenie nie może być możliwe tooconnect bezpośrednio tooIoT Centrum ponieważ hello urządzenia:</span><span class="sxs-lookup"><span data-stu-id="2aafc-109">A device may not be able tooconnect directly tooIoT Hub because hello device:</span></span>

* <span data-ttu-id="2aafc-110">Nie używa protokołu komunikacji rozpoznawany przez Centrum IoT.</span><span class="sxs-lookup"><span data-stu-id="2aafc-110">Does not use a communications protocol understood by IoT Hub.</span></span>
* <span data-ttu-id="2aafc-111">Nie jest dostatecznie inteligentny tooremember hello tożsamości przypisane tooit przez Centrum IoT.</span><span class="sxs-lookup"><span data-stu-id="2aafc-111">Is not smart enough tooremember hello identity assigned tooit by IoT Hub.</span></span>

<span data-ttu-id="2aafc-112">Brama brzegowa IoT umożliwia rozwiązanie tych problemów w hello następujące sposoby:</span><span class="sxs-lookup"><span data-stu-id="2aafc-112">An IoT Edge gateway can solve these problems in hello following ways:</span></span>

* <span data-ttu-id="2aafc-113">bramy Hello rozumie hello protokołu używany przez urządzenie hello, odbiera telemetrię urządzenia do chmury z urządzenia hello i przekazuje te tooIoT wiadomości przy użyciu protokołu zrozumiałe hello Centrum IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="2aafc-113">hello gateway understands hello protocol used by hello device, receives device-to-cloud telemetry from hello device, and forwards those messages tooIoT Hub using a protocol understood by hello IoT hub.</span></span>

* <span data-ttu-id="2aafc-114">Brama Hello mapuje toodevices tożsamości Centrum IoT i działa jako serwer proxy, gdy urządzenie wysyła komunikaty tooIoT koncentratora.</span><span class="sxs-lookup"><span data-stu-id="2aafc-114">hello gateway maps IoT Hub identities toodevices and acts as a proxy when a device sends messages tooIoT Hub.</span></span>

<span data-ttu-id="2aafc-115">powitania po diagram przedstawia hello główne składniki próbki hello, tym hello modułów krawędzi IoT:</span><span class="sxs-lookup"><span data-stu-id="2aafc-115">hello following diagram shows hello main components of hello sample, including hello IoT Edge modules:</span></span>

![][1]

<span data-ttu-id="2aafc-116">Moduły Hello są przekazywane komunikaty bezpośrednio tooeach innych.</span><span class="sxs-lookup"><span data-stu-id="2aafc-116">hello modules do not pass messages directly tooeach other.</span></span> <span data-ttu-id="2aafc-117">Moduły Hello publikowania wiadomości tooan wewnętrzny brokera polegającego na dostarczaniu toohello wiadomości powitania innych modułów przy użyciu mechanizmu subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="2aafc-117">hello modules publish messages tooan internal broker that delivers hello messages toohello other modules using a subscription mechanism.</span></span> <span data-ttu-id="2aafc-118">Aby uzyskać więcej informacji, zobacz [wprowadzenie do usługi Azure IoT krawędzi][lnk-gw-getstarted].</span><span class="sxs-lookup"><span data-stu-id="2aafc-118">For more information, see [Get started with Azure IoT Edge][lnk-gw-getstarted].</span></span>

### <a name="protocol-ingestion-module"></a><span data-ttu-id="2aafc-119">Moduł pozyskiwania protokołu</span><span class="sxs-lookup"><span data-stu-id="2aafc-119">Protocol ingestion module</span></span>

<span data-ttu-id="2aafc-120">Ten moduł jest hello punkt początkowy dla odbierania danych z urządzeń, za pośrednictwem bramy hello i w chmurze hello.</span><span class="sxs-lookup"><span data-stu-id="2aafc-120">This module is hello starting point for receiving data from devices, through hello gateway, and into hello cloud.</span></span> <span data-ttu-id="2aafc-121">W przykładowym hello modułu hello:</span><span class="sxs-lookup"><span data-stu-id="2aafc-121">In hello sample, hello module:</span></span>

1. <span data-ttu-id="2aafc-122">Tworzy symulowane temperatury danych.</span><span class="sxs-lookup"><span data-stu-id="2aafc-122">Creates simulated temperature data.</span></span> <span data-ttu-id="2aafc-123">Jeśli używasz urządzenia fizyczne modułu hello odczytuje dane z tych urządzeń fizycznych.</span><span class="sxs-lookup"><span data-stu-id="2aafc-123">If you use physical devices, hello module reads data from those physical devices.</span></span>
1. <span data-ttu-id="2aafc-124">Tworzy komunikat.</span><span class="sxs-lookup"><span data-stu-id="2aafc-124">Creates a message.</span></span>
1. <span data-ttu-id="2aafc-125">Witaj symulowane temperatury dane są umieszczane w treści wiadomości powitania.</span><span class="sxs-lookup"><span data-stu-id="2aafc-125">Places hello simulated temperature data into hello message content.</span></span>
1. <span data-ttu-id="2aafc-126">Dodaje właściwość fałszywy komunikat toohello adres MAC.</span><span class="sxs-lookup"><span data-stu-id="2aafc-126">Adds a property with a fake MAC address toohello message.</span></span>
1. <span data-ttu-id="2aafc-127">Powoduje, że moduł dalej toohello dostępne wiadomość hello w łańcuchu hello.</span><span class="sxs-lookup"><span data-stu-id="2aafc-127">Makes hello message available toohello next module in hello chain.</span></span>

<span data-ttu-id="2aafc-128">wywołuje moduł Hello **wprowadzanie protokołu X** hello poprzedni diagram nosi nazwę **symulowane urządzenie** w kodzie źródłowym hello.</span><span class="sxs-lookup"><span data-stu-id="2aafc-128">hello module called **Protocol X ingestion** in hello previous diagram is called **Simulated device** in hello source code.</span></span>

### <a name="mac-lt-gt-iot-hub-id-module"></a><span data-ttu-id="2aafc-129">Adres MAC &lt;-&gt; moduł identyfikatora usługi IoT Hub</span><span class="sxs-lookup"><span data-stu-id="2aafc-129">MAC &lt;-&gt; IoT Hub ID module</span></span>

<span data-ttu-id="2aafc-130">Ten moduł skanowania pod kątem wiadomości, których właściwość adres Mac.</span><span class="sxs-lookup"><span data-stu-id="2aafc-130">This module scans for messages that have a Mac address property.</span></span> <span data-ttu-id="2aafc-131">W przykładowym hello hello protokołu wprowadzanie moduł dodaje właściwości adresu MAC hello.</span><span class="sxs-lookup"><span data-stu-id="2aafc-131">In hello sample, hello protocol ingestion module adds hello MAC address property.</span></span> <span data-ttu-id="2aafc-132">Jeśli moduł hello znajdzie takich właściwości, dodaje innej właściwości z komunikatem klucza toohello urządzenia IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="2aafc-132">If hello module finds such a property, it adds another property with an IoT Hub device key toohello message.</span></span> <span data-ttu-id="2aafc-133">Moduł Hello następnie tworzy moduł dalej toohello dostępne wiadomość hello w łańcuchu hello.</span><span class="sxs-lookup"><span data-stu-id="2aafc-133">hello module then makes hello message available toohello next module in hello chain.</span></span>

<span data-ttu-id="2aafc-134">Deweloper Hello konfiguruje mapowanie między adresy MAC i Centrum IoT tożsamości tooassociate hello symulowane urządzeń za pomocą tożsamości urządzenia IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="2aafc-134">hello developer sets up a mapping between MAC addresses and IoT Hub identities tooassociate hello simulated devices with IoT Hub device identities.</span></span> <span data-ttu-id="2aafc-135">Deweloper Hello ręcznie dodaje mapowania hello jako część konfiguracji modułu hello.</span><span class="sxs-lookup"><span data-stu-id="2aafc-135">hello developer adds hello mapping manually as part of hello module configuration.</span></span>

> [!NOTE]
> <span data-ttu-id="2aafc-136">W tym przykładzie adres MAC jest używany jako unikatowy identyfikator urządzenia i jest korelowany z tożsamością urządzenia usługi IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="2aafc-136">This sample uses a MAC address as a unique device identifier and correlates it with an IoT Hub device identity.</span></span> <span data-ttu-id="2aafc-137">Możesz jednak napisać swój własny moduł, który będzie używał innego unikatowego identyfikatora.</span><span class="sxs-lookup"><span data-stu-id="2aafc-137">However, you can write your own module that uses a different unique identifier.</span></span> <span data-ttu-id="2aafc-138">Na przykład urządzenia może mieć unikatowe numery seryjne lub dane telemetryczne hello mogą obejmować nazwę unikatową urządzenia osadzonego.</span><span class="sxs-lookup"><span data-stu-id="2aafc-138">For example, your devices may have unique serial numbers or hello telemetry data may include a unique embedded device name.</span></span>

### <a name="iot-hub-communication-module"></a><span data-ttu-id="2aafc-139">Moduł komunikacyjny usługi IoT Hub</span><span class="sxs-lookup"><span data-stu-id="2aafc-139">IoT Hub communication module</span></span>

<span data-ttu-id="2aafc-140">Ten moduł ma komunikatów z Centrum IoT urządzenia właściwości klucza, która została przypisana w poprzednim module hello.</span><span class="sxs-lookup"><span data-stu-id="2aafc-140">This module takes messages with an IoT Hub device key property that was assigned by hello previous module.</span></span> <span data-ttu-id="2aafc-141">Moduł Hello wysyła wiadomość hello koncentratora tooIoT zawartości za pomocą hello protokołu HTTP.</span><span class="sxs-lookup"><span data-stu-id="2aafc-141">hello module sends hello message content tooIoT Hub using hello HTTP protocol.</span></span> <span data-ttu-id="2aafc-142">HTTP jest jednym z hello zrozumiał trzy protokoły Centrum IoT.</span><span class="sxs-lookup"><span data-stu-id="2aafc-142">HTTP is one of hello three protocols understood by IoT Hub.</span></span>

<span data-ttu-id="2aafc-143">Zamiast otwarcie połączenia dla każdego symulowanego urządzenia, ten moduł otwiera pojedynczego połączenia HTTP z Centrum IoT toohello bramy hello.</span><span class="sxs-lookup"><span data-stu-id="2aafc-143">Instead of opening a connection for each simulated device, this module opens a single HTTP connection from hello gateway toohello IoT hub.</span></span> <span data-ttu-id="2aafc-144">Moduł Hello następnie multiplexes połączenia ze wszystkich urządzeń hello symulowane za pośrednictwem tego połączenia.</span><span class="sxs-lookup"><span data-stu-id="2aafc-144">hello module then multiplexes connections from all hello simulated devices over that connection.</span></span> <span data-ttu-id="2aafc-145">Takie podejście umożliwia tooconnect pojedyncza brama wiele większej liczby urządzeń.</span><span class="sxs-lookup"><span data-stu-id="2aafc-145">This approach enables a single gateway tooconnect many more devices.</span></span>

## <a name="before-you-get-started"></a><span data-ttu-id="2aafc-146">Przed rozpoczęciem</span><span class="sxs-lookup"><span data-stu-id="2aafc-146">Before you get started</span></span>

<span data-ttu-id="2aafc-147">Przed rozpoczęciem pracy należy:</span><span class="sxs-lookup"><span data-stu-id="2aafc-147">Before you get started, you must:</span></span>

* <span data-ttu-id="2aafc-148">[Tworzenie Centrum IoT] [ lnk-create-hub] w Twojej subskrypcji platformy Azure, potrzebna hello nazwa Twojej toocomplete Centrum tego przewodnika.</span><span class="sxs-lookup"><span data-stu-id="2aafc-148">[Create an IoT hub][lnk-create-hub] in your Azure subscription, you need hello name of your hub toocomplete this walkthrough.</span></span> <span data-ttu-id="2aafc-149">Jeśli go nie masz, możesz utworzyć [bezpłatne konto][lnk-free-trial] w zaledwie kilka minut.</span><span class="sxs-lookup"><span data-stu-id="2aafc-149">If you don't have an account, you can create a [free account][lnk-free-trial] in just a couple of minutes.</span></span>
* <span data-ttu-id="2aafc-150">Dodaj dwa Centrum IoT tooyour urządzeń i zanotuj ich identyfikatorów i klucze urządzenia.</span><span class="sxs-lookup"><span data-stu-id="2aafc-150">Add two devices tooyour IoT hub and make a note of their ids and device keys.</span></span> <span data-ttu-id="2aafc-151">Można użyć hello [explorer urządzenia] [ lnk-device-explorer] lub [explorer Centrum iothub] [ lnk-iothub-explorer] narzędzia tooadd utworzony w hello Centrum IoT toohello urządzeń poprzedniego kroku i pobieranie ich kluczy.</span><span class="sxs-lookup"><span data-stu-id="2aafc-151">You can use hello [device explorer][lnk-device-explorer] or [iothub-explorer][lnk-iothub-explorer] tool tooadd your devices toohello IoT hub you created in hello previous step and retrieve their keys.</span></span>

![][2]

<!-- Images -->
[1]: media/iot-hub-iot-edge-simulated-selector/image1.png
[2]: media/iot-hub-iot-edge-simulated-selector/image2.png

<!-- Links -->
[symulowane urządzenie chmury Przekaż przykładowe]: https://github.com/Azure/iot-edge/blob/master/samples/simulated_device_cloud_upload/README.md
[lnk-sdk]: https://github.com/Azure/iot-edge
[lnk-gw-getstarted]: ../articles/iot-hub/iot-hub-linux-iot-edge-get-started.md
[lnk-free-trial]: https://azure.microsoft.com/pricing/free-trial/
[lnk-device-explorer]: https://github.com/Azure/azure-iot-sdk-csharp/tree/master/tools/DeviceExplorer
[lnk-iothub-explorer]: https://github.com/Azure/iothub-explorer/blob/master/readme.md
[lnk-create-hub]: ../articles/iot-hub/iot-hub-create-through-portal.md