---
title: "Konfigurowanie systemu operacyjnego poprawki harmonogram dla opartych na systemie Linux klastrów usługi HDInsight - Azure | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak skonfigurować harmonogram dla klastrów usługi HDInsight opartych na systemie Linux poprawki systemu operacyjnego."
services: hdinsight
documentationcenter: 
author: bprakash
manager: asadk
editor: bprakash
ms.assetid: 
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 03/21/2017
ms.author: bhanupr
ms.openlocfilehash: af3c5a19ae8e2e606e4b0506f9f6dddb41192e40
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="os-patching-for-hdinsight"></a><span data-ttu-id="59701-103">Poprawki dla usługi HDInsight systemu operacyjnego</span><span class="sxs-lookup"><span data-stu-id="59701-103">OS patching for HDInsight</span></span> 
<span data-ttu-id="59701-104">Jako zarządzanej usługi Hadoop HDInsight zapewnia obsługę stosowanie poprawek systemu operacyjnego źródłowej maszyn wirtualnych używanych przez klastry usługi HDInsight.</span><span class="sxs-lookup"><span data-stu-id="59701-104">As a managed Hadoop service, HDInsight takes care of patching the OS of the underlying VMs used by HDInsight clusters.</span></span> <span data-ttu-id="59701-105">Począwszy od 1 sierpnia 2016 zmieniono zasady stosowania poprawek systemu operacyjnego gościa opartych na systemie Linux klastrów usługi HDInsight (w wersji 3.4 lub nowszej).</span><span class="sxs-lookup"><span data-stu-id="59701-105">As of August 1, 2016, we have changed the guest OS patching policy for Linux-based HDInsight clusters (version 3.4 or greater).</span></span> <span data-ttu-id="59701-106">Celem nowych zasad jest znacznie zmniejszyć liczbę ponownych uruchomień komputera z powodu stosowania poprawek.</span><span class="sxs-lookup"><span data-stu-id="59701-106">The goal of the new policy is to significantly reduce the number of reboots due to patching.</span></span> <span data-ttu-id="59701-107">Nowe zasady będzie poprawki maszynach wirtualnych (VM) w systemie Linux klastrów każdego poniedziałek i czwartek, zaczynając od 00: 00 czasu UTC, w sposób rozłożone w węzłach żadnego danego klastra.</span><span class="sxs-lookup"><span data-stu-id="59701-107">The new policy will continue to patch virtual machines (VMs) on Linux clusters every Monday or Thursday starting at 12AM UTC in a staggered fashion across nodes in any given cluster.</span></span> <span data-ttu-id="59701-108">Jednak żadnej danej maszyny Wirtualnej zostanie uruchomiony tylko co najwyżej raz na 30 dni z powodu stosowania poprawek systemu operacyjnego gościa.</span><span class="sxs-lookup"><span data-stu-id="59701-108">However, any given VM will only reboot at most once every 30 days due to guest OS patching.</span></span> <span data-ttu-id="59701-109">Ponadto ponownym dla nowo utworzony klaster nie nastąpi szybciej niż 30 dni od daty utworzenia klastra.</span><span class="sxs-lookup"><span data-stu-id="59701-109">In addition, the first reboot for a newly created cluster will not happen sooner than 30 days from the cluster creation date.</span></span> <span data-ttu-id="59701-110">Poprawki zostaną zastosowane po maszyn wirtualnych są ponownie uruchamiane.</span><span class="sxs-lookup"><span data-stu-id="59701-110">Patches will be effective once the VMs are rebooted.</span></span>

## <a name="how-to-configure-the-os-patching-schedule-for-linux-based-hdinsight-clusters"></a><span data-ttu-id="59701-111">Jak skonfigurować system operacyjny poprawki harmonogram dla klastrów usługi HDInsight opartych na systemie Linux</span><span class="sxs-lookup"><span data-stu-id="59701-111">How to configure the OS patching schedule for Linux-based HDInsight clusters</span></span>
<span data-ttu-id="59701-112">Maszyny wirtualne w klastrze HDInsight wymagać ponownego uruchomienia od czasu do czasu, dzięki czemu można zainstalować poprawki zabezpieczeń ważne.</span><span class="sxs-lookup"><span data-stu-id="59701-112">The virtual machines in an HDInsight cluster need to be rebooted occasionally so that important security patches can be installed.</span></span> <span data-ttu-id="59701-113">Począwszy od 1 sierpnia 2016 nowych klastrów usługi HDInsight opartej na systemie Linux (w wersji 3.4 lub nowszego) są ponownie uruchamiane przy użyciu następującego harmonogramu:</span><span class="sxs-lookup"><span data-stu-id="59701-113">As of August 1, 2016, new Linux-based HDInsight clusters (version 3.4 or greater,) are rebooted using the following schedule:</span></span>

1. <span data-ttu-id="59701-114">Maszyny wirtualnej w klastrze można tylko ponownego uruchomienia dla poprawek co najwyżej jeden raz w ciągu 30-dniowego okresu.</span><span class="sxs-lookup"><span data-stu-id="59701-114">A virtual machine in the cluster can only reboot for patches at most, once within a 30-day period.</span></span>
2. <span data-ttu-id="59701-115">Występuje ponownego uruchamiania, zaczynając od 00: 00 czasu UTC.</span><span class="sxs-lookup"><span data-stu-id="59701-115">The reboot occurs starting at 12AM UTC.</span></span>
3. <span data-ttu-id="59701-116">Proces ponownego rozruchu jest rozłożona między maszynami wirtualnymi w klastrze, więc klastra jest nadal dostępny podczas procesu ponownego uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="59701-116">The reboot process is staggered across virtual machines in the cluster, so the cluster is still available during the reboot process.</span></span>
4. <span data-ttu-id="59701-117">Pierwszy ponowny rozruch dla nowo utworzony klaster nie nastąpi szybciej niż 30 dni od daty utworzenia klastra.</span><span class="sxs-lookup"><span data-stu-id="59701-117">The first reboot for a newly created cluster will not happen sooner than 30 days after the cluster creation date.</span></span>

<span data-ttu-id="59701-118">Za pomocą akcji skryptu opisane w tym artykule, można zmodyfikować OS poprawki harmonogramu w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="59701-118">Using the script action described in this article, you can modify the OS patching schedule as follows:</span></span>
1. <span data-ttu-id="59701-119">Włącz lub wyłącz automatyczne ponowne uruchomienie</span><span class="sxs-lookup"><span data-stu-id="59701-119">Enable or disable automatic reboots</span></span>
2. <span data-ttu-id="59701-120">Ustaw częstotliwość ponownego uruchamiania (w dniach od ponownego uruchomienia)</span><span class="sxs-lookup"><span data-stu-id="59701-120">Set the frequency of reboots (days between reboots)</span></span>
3. <span data-ttu-id="59701-121">Ustawiony dzień tygodnia, gdy wystąpi ponowny rozruch</span><span class="sxs-lookup"><span data-stu-id="59701-121">Set the day of the week when a reboot occurs</span></span>

> [!NOTE]
> <span data-ttu-id="59701-122">Ta akcja skryptu działa tylko z klastrami HDInsight opartych na systemie Linux utworzone po 1 sierpnia 2016.</span><span class="sxs-lookup"><span data-stu-id="59701-122">This script action will only work with Linux-based HDInsight clusters created after August 1st, 2016.</span></span> <span data-ttu-id="59701-123">Poprawki zostaną zastosowane tylko wtedy, gdy maszyny wirtualne są ponownie uruchamiane.</span><span class="sxs-lookup"><span data-stu-id="59701-123">Patches will be effective only when VMs are rebooted.</span></span> 
>

## <a name="how-to-use-the-script"></a><span data-ttu-id="59701-124">Jak używać skryptu</span><span class="sxs-lookup"><span data-stu-id="59701-124">How to use the script</span></span> 

<span data-ttu-id="59701-125">Jeśli za pomocą tego skryptu wymaga następujących informacji:</span><span class="sxs-lookup"><span data-stu-id="59701-125">When using this script requires the following information:</span></span>
1. <span data-ttu-id="59701-126">Lokalizacja skryptu: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.</span><span class="sxs-lookup"><span data-stu-id="59701-126">The script location: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.</span></span>
    <span data-ttu-id="59701-127">HDInsight używa tego identyfikatora URI do znalezienia i uruchom skrypt na wszystkich maszynach wirtualnych w klastrze.</span><span class="sxs-lookup"><span data-stu-id="59701-127">HDInsight uses this URI to find and run the script on all the virtual machines in the cluster.</span></span>
  
2. <span data-ttu-id="59701-128">Typy węzłów klastra, zastosowane do skryptu: headnode, workernode, dozorcy.</span><span class="sxs-lookup"><span data-stu-id="59701-128">The cluster node types that the script is applied to: headnode, workernode, zookeeper.</span></span> <span data-ttu-id="59701-129">Ten skrypt należy zastosować do wszystkich typów węzła w klastrze.</span><span class="sxs-lookup"><span data-stu-id="59701-129">This script must be applied to all node types in the cluster.</span></span> <span data-ttu-id="59701-130">Jeśli nie ma zastosowania do typu węzła, następnie maszyn wirtualnych dla tego typu węzła będzie używać poprzedniej harmonogram stosowania poprawek.</span><span class="sxs-lookup"><span data-stu-id="59701-130">If it is not applied to a node type, then the virtual machines for that node type will continue to use the previous patching schedule.</span></span>


3.  <span data-ttu-id="59701-131">Parametr: Ten skrypt akceptuje trzy parametry liczbowe:</span><span class="sxs-lookup"><span data-stu-id="59701-131">Parameter: This script accepts three numeric parameters:</span></span>

    | <span data-ttu-id="59701-132">Parametr</span><span class="sxs-lookup"><span data-stu-id="59701-132">Parameter</span></span> | <span data-ttu-id="59701-133">Definicja</span><span class="sxs-lookup"><span data-stu-id="59701-133">Definition</span></span> |
    | --- | --- |
    | <span data-ttu-id="59701-134">Włączanie/wyłączanie automatycznego ponownego uruchamiania</span><span class="sxs-lookup"><span data-stu-id="59701-134">Enable/disable automatic reboots</span></span> |<span data-ttu-id="59701-135">0 lub 1.</span><span class="sxs-lookup"><span data-stu-id="59701-135">0 or 1.</span></span> <span data-ttu-id="59701-136">Wartość 0 wyłącza automatyczne ponowne uruchomienie, gdy 1 umożliwia automatyczne ponowne uruchomienie.</span><span class="sxs-lookup"><span data-stu-id="59701-136">A value of 0 disables automatic reboots while 1 enables automatic reboots.</span></span> |
    | <span data-ttu-id="59701-137">częstotliwość</span><span class="sxs-lookup"><span data-stu-id="59701-137">Frequency</span></span> |<span data-ttu-id="59701-138">7 do 90 (włącznie).</span><span class="sxs-lookup"><span data-stu-id="59701-138">7 to 90 (inclusive).</span></span> <span data-ttu-id="59701-139">Liczba dni, aby zaczekać na ponowne uruchomienie maszyn wirtualnych do poprawki, które wymagają ponownego uruchomienia komputera.</span><span class="sxs-lookup"><span data-stu-id="59701-139">The number of days to wait before rebooting the virtual machines for patches that require a reboot.</span></span> |
    | <span data-ttu-id="59701-140">Dzień tygodnia</span><span class="sxs-lookup"><span data-stu-id="59701-140">Day of week</span></span> |<span data-ttu-id="59701-141">1-7 (włącznie).</span><span class="sxs-lookup"><span data-stu-id="59701-141">1 to 7 (inclusive).</span></span> <span data-ttu-id="59701-142">Wartość 1 oznacza ponownego uruchamiania powinny występować w poniedziałek i 7 wskazuje przykładzie Sunday.For przy użyciu parametrów 2 60 1 powoduje automatyczne ponowne uruchomienie co 60 dni (maksymalnie) wtorek.</span><span class="sxs-lookup"><span data-stu-id="59701-142">A value of 1 indicates the reboot should occur on a Monday, and 7 indicates a Sunday.For example, using parameters of 1 60 2 results in automatic reboots every 60 days (at most) on Tuesday.</span></span> |
    | <span data-ttu-id="59701-143">Trwałość</span><span class="sxs-lookup"><span data-stu-id="59701-143">Persistence</span></span> |<span data-ttu-id="59701-144">Podczas stosowania akcji skryptu do istniejącego klastra, można oznaczyć skrypt jako utrwalone.</span><span class="sxs-lookup"><span data-stu-id="59701-144">When applying a script action to an existing cluster, you can mark the script as persisted.</span></span> <span data-ttu-id="59701-145">Utrwalonych skryptów są stosowane, gdy nowy workernodes zostaną dodane do klastra za pomocą operacji skalowania.</span><span class="sxs-lookup"><span data-stu-id="59701-145">Persisted scripts are applied when new workernodes are added to the cluster through scaling operations.</span></span> |

> [!NOTE]
> <span data-ttu-id="59701-146">Ten skrypt musi zostać oznaczone jako zachowywane w przypadku zastosowania do istniejącego klastra.</span><span class="sxs-lookup"><span data-stu-id="59701-146">You must mark this script as persisted when applying to an existing cluster.</span></span> <span data-ttu-id="59701-147">W przeciwnym razie wszelkie nowe węzły został utworzony za pomocą operacji skalowania użyje domyślnego harmonogramu poprawki.</span><span class="sxs-lookup"><span data-stu-id="59701-147">Otherwise, any new nodes created through scaling      operations will use the default patching schedule.</span></span>
<span data-ttu-id="59701-148">Jeśli stosujesz skrypt jako część procesu tworzenia klastra jest trwały automatycznie.</span><span class="sxs-lookup"><span data-stu-id="59701-148">If you apply the script as part of the cluster creation process, it is persisted automatically.</span></span>
>

## <a name="next-steps"></a><span data-ttu-id="59701-149">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="59701-149">Next steps</span></span>

<span data-ttu-id="59701-150">Do wykonania określonych kroków przy użyciu akcji skryptu, zobacz następujące sekcje w [klastrów usługi HDInsight opartej na Linuz dostosować za pomocą akcji skryptu](hdinsight-hadoop-customize-cluster-linux.md):</span><span class="sxs-lookup"><span data-stu-id="59701-150">For specific steps on using the script action, see the following sections in the [Customize Linuz-based HDInsight clusters using script action](hdinsight-hadoop-customize-cluster-linux.md):</span></span>

* [<span data-ttu-id="59701-151">Za pomocą akcji skryptu, podczas tworzenia klastra</span><span class="sxs-lookup"><span data-stu-id="59701-151">Use a script action during cluster creation</span></span>](hdinsight-hadoop-customize-cluster-linux.md#use-a-script-action-during-cluster-creation)
* [<span data-ttu-id="59701-152">Zastosowanie akcji skryptu do uruchomionej klastra</span><span class="sxs-lookup"><span data-stu-id="59701-152">Apply a script action to a running cluster</span></span>](hdinsight-hadoop-customize-cluster-linux.md#apply-a-script-action-to-a-running-cluster)
