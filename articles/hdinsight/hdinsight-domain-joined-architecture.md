---
title: "Architektura przyłączone aaaDomain Azure HDInsight | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak tooplan przyłączonych do domeny usługi HDInsight."
services: hdinsight
documentationcenter: 
author: saurinsh
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 7dc6847d-10d4-4b5c-9c83-cc513cf91965
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 02/03/2017
ms.author: saurinsh
ms.openlocfilehash: 1c3ecedf3739b4f8fa54160225be9c1d6e2ca6cc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="plan-azure-domain-joined-hadoop-clusters-in-hdinsight"></a><span data-ttu-id="82fef-103">Planowanie klastrów Hadoop przyłączonych do domeny platformy Azure w usłudze HDInsight</span><span class="sxs-lookup"><span data-stu-id="82fef-103">Plan Azure domain-joined Hadoop clusters in HDInsight</span></span>

<span data-ttu-id="82fef-104">Witaj tradycyjnych Hadoop jest klastra jednego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="82fef-104">hello traditional Hadoop is a single-user cluster.</span></span> <span data-ttu-id="82fef-105">Odpowiada to większości firm, które mają mniejsze zespoły ds. aplikacji tworzące obciążenia składające się z dużych ilości danych.</span><span class="sxs-lookup"><span data-stu-id="82fef-105">It is suitable for most companies that have smaller application teams building large data workloads.</span></span> <span data-ttu-id="82fef-106">Ponieważ usługa Hadoop zyskuje popularność, wiele firm przechodzi na model, w którym klastry są zarządzane przez zespoły IT, a wiele zespołów ds. aplikacji współużytkuje te same klastry.</span><span class="sxs-lookup"><span data-stu-id="82fef-106">As Hadoop gains popularity, many enterprises are moving toward a model in which clusters are managed by IT teams and multiple application teams share clusters.</span></span> <span data-ttu-id="82fef-107">W związku z tym funkcje są udziałem sieciowym klastrów między hello najbardziej żądanej funkcji w usłudze Azure HDInsight.</span><span class="sxs-lookup"><span data-stu-id="82fef-107">Thus, functionalities involving multiuser clusters are among hello most requested functionalities in Azure HDInsight.</span></span>

<span data-ttu-id="82fef-108">Zamiast tworzenia własnego wielodostępnym uwierzytelniania i autoryzacji, HDInsight polega na powitania dostawcy najpopularniejszych tożsamości — Active Directory (AD).</span><span class="sxs-lookup"><span data-stu-id="82fef-108">Instead of building its own multiuser authentication and authorization, HDInsight relies on hello most popular identity provider--Active Directory (AD).</span></span> <span data-ttu-id="82fef-109">Hello funkcji zaawansowanych zabezpieczeń w usłudze AD może być używane toomanage autoryzacji użytkowników w usłudze HDInsight.</span><span class="sxs-lookup"><span data-stu-id="82fef-109">hello powerful security functionality in AD can be used toomanage multiuser authorization in HDInsight.</span></span> <span data-ttu-id="82fef-110">Dzięki integracji usługi HDInsight z usługą Active Directory, mogą komunikować się z klastrami hello przy użyciu poświadczeń usługi AD.</span><span class="sxs-lookup"><span data-stu-id="82fef-110">By integrating HDInsight with AD, you can communicate with hello clusters by using your AD credentials.</span></span> <span data-ttu-id="82fef-111">HDInsight mapuje AD użytkownika tooa Hadoop użytkownika lokalnego, więc wszystkie hello usług uruchomionych w usłudze HDInsight (Ambari, Hive serwera, zakres, Spark thrift serwera i inne) pracy bezproblemowo dla hello uwierzytelnianego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="82fef-111">HDInsight maps an AD user tooa local Hadoop user, so all hello services running on HDInsight (Ambari, Hive server, Ranger, Spark thrift server, and others) work seamlessly for hello authenticated user.</span></span>

## <a name="integrate-hdinsight-with-ad-and-ad-on-iaas-vm"></a><span data-ttu-id="82fef-112">Integracja usługi HDInsight z AD i usługi AD na maszynie Wirtualnej IaaS</span><span class="sxs-lookup"><span data-stu-id="82fef-112">Integrate HDInsight with AD and AD on IaaS VM</span></span>

<span data-ttu-id="82fef-113">Dzięki integracji usługi HDInsight z usługi Azure AD lub AD na maszynie Wirtualnej Iaas, węzły klastra usługi HDInsight hello są domeny tooa przyłączonych do domeny.</span><span class="sxs-lookup"><span data-stu-id="82fef-113">By integrating HDInsight with Azure AD or AD on Iaas VM, hello HDInsight cluster nodes are domain-joined tooa domain.</span></span> <span data-ttu-id="82fef-114">HDInsight tworzy nazwy główne usług dla hello uruchomiona w klastrze hello usług Hadoop i umieszcza je w określonej jednostce organizacyjnej (OU) w usłudze Azure AD lub AD na maszynie Wirtualnej IaaS.</span><span class="sxs-lookup"><span data-stu-id="82fef-114">HDInsight creates service principals for hello Hadoop services running on hello cluster and places them within a specified organizational unit (OU) in Azure AD or AD on IaaS VM.</span></span> <span data-ttu-id="82fef-115">HDInsight tworzy również wstecznego mapowania DNS w domenie hello hello adresów IP określonych węzłów hello toohello przyłączone do domeny.</span><span class="sxs-lookup"><span data-stu-id="82fef-115">HDInsight also creates reverse DNS mappings in hello domain for hello IP addresses of hello nodes that are joined toohello domain.</span></span>

<span data-ttu-id="82fef-116">Taką konfigurację można uzyskać za pomocą różnych architektur.</span><span class="sxs-lookup"><span data-stu-id="82fef-116">You can achieve this setup by using multiple architectures.</span></span> <span data-ttu-id="82fef-117">Można wybrać z powitania po architektury.</span><span class="sxs-lookup"><span data-stu-id="82fef-117">You can choose from hello following architectures.</span></span>

<span data-ttu-id="82fef-118">**HDInsight zintegrowane z usługą Active Directory z systemem Azure IaaS**</span><span class="sxs-lookup"><span data-stu-id="82fef-118">**HDInsight integrated with AD running on Azure IaaS**</span></span>

<span data-ttu-id="82fef-119">Jest to najprostsza architektura hello integrowanie HDInsight z usługą Active Directory.</span><span class="sxs-lookup"><span data-stu-id="82fef-119">This is hello simplest architecture for integrating HDInsight with Active Directory.</span></span> <span data-ttu-id="82fef-120">Witaj kontroler domeny usługi AD jest uruchamiany na jednej (lub wielu) maszynach wirtualnych (VM) na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="82fef-120">hello AD domain controller runs on one (or multiple) virtual machines (VMs) in Azure.</span></span> <span data-ttu-id="82fef-121">Zwykle te maszyny wirtualne znajdują się w sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="82fef-121">These VMs are usually in a virtual network.</span></span> <span data-ttu-id="82fef-122">Konfigurowanie klastra usługi HDInsight hello innej sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="82fef-122">You set up another virtual network for hello HDInsight cluster.</span></span> <span data-ttu-id="82fef-123">Dla usługi HDInsight toohave tooActive wiersza procesów z katalogu, należy toopeer tych sieci wirtualnych za pomocą [równorzędna do wirtualnymi](../virtual-network/virtual-network-create-peering.md).</span><span class="sxs-lookup"><span data-stu-id="82fef-123">For HDInsight toohave a line of sight tooActive Directory, you need toopeer these virtual networks by using [VNet-to-VNet peering](../virtual-network/virtual-network-create-peering.md).</span></span> <span data-ttu-id="82fef-124">Jeśli utworzysz hello usługi Active Directory w usłudze ARM, można utworzyć hello usługi Active Directory i usługi HDInsight w hello tej samej sieci wirtualnej i nie ma potrzeby toodo komunikacji równorzędnej.</span><span class="sxs-lookup"><span data-stu-id="82fef-124">If you create hello Active Directory in ARM, then you can create hello Active Directory and HDInsight in hello same VNet and you don't need toodo peering.</span></span> 

![Topologia klastra HDInsight z przyłączaniem do domeny](./media/hdinsight-domain-joined-architecture/hdinsight-domain-joined-architecture_1.png)

> [!NOTE]
> <span data-ttu-id="82fef-126">W ramach tej architektury usługi Azure Data Lake Store nie można używać z klastrem usługi HDInsight hello.</span><span class="sxs-lookup"><span data-stu-id="82fef-126">In this architecture, you cannot use Azure Data Lake Store with hello HDInsight cluster.</span></span>


<span data-ttu-id="82fef-127">Wymagania wstępne dotyczące usługi Active Directory:</span><span class="sxs-lookup"><span data-stu-id="82fef-127">Prerequisites for Active Directory:</span></span>

* <span data-ttu-id="82fef-128">[Jednostki organizacyjnej](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) musi zostać utworzony, w którym zostanie umieszczony hello maszyn wirtualnych z klastra usługi HDInsight i hello jednostki usługi używane przez klaster hello.</span><span class="sxs-lookup"><span data-stu-id="82fef-128">An [organizational unit](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) must be created, within which you place hello HDInsight cluster VMs and hello service principals used by hello cluster.</span></span>
* <span data-ttu-id="82fef-129">[Protokoły dostępu do katalogu lekkie](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) (LDAPs) musi zostać skonfigurowany do komunikowania się z usługą Active Directory.</span><span class="sxs-lookup"><span data-stu-id="82fef-129">[Lightweight Directory Access Protocols](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) (LDAPs) must be set up for communicating with AD.</span></span> <span data-ttu-id="82fef-130">tooset certyfikat używany Hello zapasowej LDAPS musi być rzeczywistym certyfikatu (nie certyfikatu z podpisem własnym).</span><span class="sxs-lookup"><span data-stu-id="82fef-130">hello certificate used tooset up LDAPS must be a real certificate (not a self-signed certificate).</span></span>
* <span data-ttu-id="82fef-131">Stref wyszukiwania wstecznego DNS należy utworzyć w domenie hello zakresu adresów IP hello hello HDInsight podsieci (na przykład 10.2.0.0/24 poprzedni obraz powitania).</span><span class="sxs-lookup"><span data-stu-id="82fef-131">Reverse DNS zones must be created on hello domain for hello IP address range of hello HDInsight subnet (for example, 10.2.0.0/24 in hello previous picture).</span></span>
* <span data-ttu-id="82fef-132">Potrzebne jest konto usługi lub konto użytkownika.</span><span class="sxs-lookup"><span data-stu-id="82fef-132">A service account or a user account is needed.</span></span> <span data-ttu-id="82fef-133">Użyj tego konta toocreate hello klastra usługi HDInsight.</span><span class="sxs-lookup"><span data-stu-id="82fef-133">Use this account toocreate hello HDInsight cluster.</span></span> <span data-ttu-id="82fef-134">To konto musi mieć hello następujących uprawnień:</span><span class="sxs-lookup"><span data-stu-id="82fef-134">This account must have hello following permissions:</span></span>

    - <span data-ttu-id="82fef-135">Obiekty główne usługi toocreate uprawnienia i obiekty komputera w ramach jednostki organizacyjnej hello</span><span class="sxs-lookup"><span data-stu-id="82fef-135">Permissions toocreate service principal objects and machine objects within hello organizational unit</span></span>
    - <span data-ttu-id="82fef-136">Uprawnienia toocreate wstecznego DNS serwera proxy reguły</span><span class="sxs-lookup"><span data-stu-id="82fef-136">Permissions toocreate reverse DNS proxy rules</span></span>
    - <span data-ttu-id="82fef-137">Domena usługi Active Directory toohello maszyny toojoin uprawnień</span><span class="sxs-lookup"><span data-stu-id="82fef-137">Permissions toojoin machines toohello Active Directory domain</span></span>

<span data-ttu-id="82fef-138">**Usługa HDInsight zintegrowana z usługą Azure AD tylko w chmurze**</span><span class="sxs-lookup"><span data-stu-id="82fef-138">**HDInsight integrated with cloud-only Azure AD**</span></span>

<span data-ttu-id="82fef-139">W przypadku usługi Azure AD działającej tylko na chmurze należy skonfigurować kontroler domeny, aby umożliwić integrację usługi HDInsight z usługą Azure AD.</span><span class="sxs-lookup"><span data-stu-id="82fef-139">For cloud-only Azure AD, configure a domain controller so that HDInsight can be integrated with Azure AD.</span></span> <span data-ttu-id="82fef-140">Jest to realizowane za pośrednictwem [Azure Active Directory Domain Services](../active-directory-domain-services/active-directory-ds-overview.md) (Azure AD DS).</span><span class="sxs-lookup"><span data-stu-id="82fef-140">This is achieved by using [Azure Active Directory Domain Services](../active-directory-domain-services/active-directory-ds-overview.md) (Azure AD DS).</span></span> <span data-ttu-id="82fef-141">Azure AD DS tworzy maszyny kontrolera domeny w chmurze hello i udostępnia adresy IP dla nich.</span><span class="sxs-lookup"><span data-stu-id="82fef-141">Azure AD DS creates domain controller machines on hello cloud and provides IP addresses for them.</span></span> <span data-ttu-id="82fef-142">W celu zapewnienia wysokiej dostępności tworzone są dwa kontrolery domeny.</span><span class="sxs-lookup"><span data-stu-id="82fef-142">It creates two domain controllers for high availability.</span></span>

<span data-ttu-id="82fef-143">Obecnie usługi Azure AD DS istnieją tylko w klasycznych sieciach wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="82fef-143">Currently, Azure AD DS exists only in classic virtual networks.</span></span> <span data-ttu-id="82fef-144">Są one dostępne wyłącznie przy użyciu hello klasycznego portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="82fef-144">It is only accessible by using hello Azure classic portal.</span></span> <span data-ttu-id="82fef-145">Witaj HDInsight w portalu Azure, którą należy toobe hello istnieje sieci wirtualnej połączyć za pomocą z hello klasycznej sieci wirtualnej przy użyciu sieci wirtualnej do sieci wirtualnej komunikacji równorzędnej.</span><span class="sxs-lookup"><span data-stu-id="82fef-145">hello HDInsight virtual network exists in hello Azure portal, which needs toobe peered with hello classic virtual network by using VNet-to-VNet peering.</span></span>

> [!NOTE]
> <span data-ttu-id="82fef-146">Komunikacji równorzędnej między klasycznej sieci wirtualnej i sieci wirtualnej wymaga, aby obie sieci wirtualne znajdują się w usłudze Azure Resource Manager hello na tym samym regionie i w obszarze hello sam subskrypcji platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="82fef-146">Peering between a classic virtual network and an Azure Resource Manager virtual network requires that both virtual networks are in hello same region and under hello same Azure subscription.</span></span>

![Topologia klastra HDInsight z przyłączaniem do domeny](./media/hdinsight-domain-joined-architecture/hdinsight-domain-joined-architecture_2.png)

<span data-ttu-id="82fef-148">Wymagania wstępne dotyczące usługi Azure AD:</span><span class="sxs-lookup"><span data-stu-id="82fef-148">Prerequisites for Azure AD:</span></span>

* <span data-ttu-id="82fef-149">[Jednostki organizacyjnej](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) musi zostać utworzony, w którym zostanie umieszczony hello maszyn wirtualnych z klastra usługi HDInsight i hello jednostki usługi używane przez klaster hello.</span><span class="sxs-lookup"><span data-stu-id="82fef-149">An [organizational unit](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) must be created within which you place hello HDInsight cluster VMs and hello service principals used by hello cluster.</span></span>
* <span data-ttu-id="82fef-150">Podczas konfigurowania usług Azure AD DS musi zostać skonfigurowany protokół [LDAPS](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md).</span><span class="sxs-lookup"><span data-stu-id="82fef-150">[LDAPS](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) must be set up when you configure Azure AD DS.</span></span> <span data-ttu-id="82fef-151">tooset certyfikat używany Hello zapasowej LDAPS musi być rzeczywistym certyfikatu (nie certyfikatu z podpisem własnym).</span><span class="sxs-lookup"><span data-stu-id="82fef-151">hello certificate used tooset up LDAPS must be a real certificate (not a self-signed certificate).</span></span>
* <span data-ttu-id="82fef-152">Stref wyszukiwania wstecznego DNS należy utworzyć w domenie hello zakresu adresów IP hello hello HDInsight podsieci (na przykład 10.2.0.0/24 poprzedni obraz powitania).</span><span class="sxs-lookup"><span data-stu-id="82fef-152">Reverse DNS zones must be created on hello domain for hello IP address range of hello HDInsight subnet (for example, 10.2.0.0/24 in hello previous picture).</span></span>
* <span data-ttu-id="82fef-153">[Skrótów haseł](../active-directory-domain-services/active-directory-ds-getting-started-password-sync.md) musi być synchronizowane z usługi Azure AD tooAzure usług AD DS.</span><span class="sxs-lookup"><span data-stu-id="82fef-153">[Password hashes](../active-directory-domain-services/active-directory-ds-getting-started-password-sync.md) must be synced from Azure AD tooAzure AD DS.</span></span>
* <span data-ttu-id="82fef-154">Potrzebne jest konto usługi lub konto użytkownika.</span><span class="sxs-lookup"><span data-stu-id="82fef-154">A service account or a user account is needed.</span></span> <span data-ttu-id="82fef-155">Użyj tego konta toocreate hello klastra usługi HDInsight.</span><span class="sxs-lookup"><span data-stu-id="82fef-155">Use this account toocreate hello HDInsight cluster.</span></span> <span data-ttu-id="82fef-156">To konto musi mieć hello następujących uprawnień:</span><span class="sxs-lookup"><span data-stu-id="82fef-156">This account must have hello following permissions:</span></span>

    - <span data-ttu-id="82fef-157">Obiekty główne usługi toocreate uprawnienia i obiekty komputera w ramach jednostki organizacyjnej hello</span><span class="sxs-lookup"><span data-stu-id="82fef-157">Permissions toocreate service principal objects and machine objects within hello organizational unit</span></span>
    - <span data-ttu-id="82fef-158">Uprawnienia toocreate wstecznego DNS serwera proxy reguły</span><span class="sxs-lookup"><span data-stu-id="82fef-158">Permissions toocreate reverse DNS proxy rules</span></span>
    - <span data-ttu-id="82fef-159">Uprawnienia toojoin maszyny toohello usługi Azure AD domeny</span><span class="sxs-lookup"><span data-stu-id="82fef-159">Permissions toojoin machines toohello Azure AD domain</span></span>

## <a name="next-steps"></a><span data-ttu-id="82fef-160">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="82fef-160">Next steps</span></span>
* <span data-ttu-id="82fef-161">tooconfigure klastra usługi HDInsight przyłączonych do domeny, zobacz [skonfigurować przyłączonych do domeny w usłudze hdinsight](hdinsight-domain-joined-configure.md).</span><span class="sxs-lookup"><span data-stu-id="82fef-161">tooconfigure a domain-joined HDInsight cluster, see [Configure domain-joined HDInsight clusters](hdinsight-domain-joined-configure.md).</span></span>
* <span data-ttu-id="82fef-162">toomanage przyłączonych do domeny w usłudze hdinsight, zobacz [zarządzania klastrami HDInsight przyłączonych do domeny](hdinsight-domain-joined-manage.md).</span><span class="sxs-lookup"><span data-stu-id="82fef-162">toomanage domain-joined HDInsight clusters, see [Manage domain-joined HDInsight clusters](hdinsight-domain-joined-manage.md).</span></span>
* <span data-ttu-id="82fef-163">zasady Hive tooconfigure i wykonywania zapytań programu Hive, zobacz [Hive skonfigurować zasady dla przyłączonych do domeny w usłudze hdinsight](hdinsight-domain-joined-run-hive.md).</span><span class="sxs-lookup"><span data-stu-id="82fef-163">tooconfigure Hive policies and run Hive queries, see [Configure Hive policies for domain-joined HDInsight clusters](hdinsight-domain-joined-run-hive.md).</span></span>
* <span data-ttu-id="82fef-164">toorun zapytań Hive przy użyciu protokołu SSH w klastrach HDInsight przyłączonych do domeny, zobacz [używanie SSH z usługą HDInsight](hdinsight-hadoop-linux-use-ssh-unix.md).</span><span class="sxs-lookup"><span data-stu-id="82fef-164">toorun Hive queries by using SSH on domain-joined HDInsight clusters, see [Use SSH with HDInsight](hdinsight-hadoop-linux-use-ssh-unix.md).</span></span>
