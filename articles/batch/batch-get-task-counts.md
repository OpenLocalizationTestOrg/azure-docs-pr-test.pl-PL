---
title: "postęp zadania poprzez zliczanie zadań według stanu - partii zadań Azure aaaMonitor | Dokumentacja firmy Microsoft"
description: "Monitorować postęp hello zadania, wywołując operację Get liczby zadań hello toocount zadań dla zadania. Możesz uzyskać liczby aktywnych, uruchomione i zakończonych zadań i zadań, które zakończyło się pomyślnie lub nie powiodło się."
services: batch
author: tamram
manager: timlt
ms.service: batch
ms.topic: article
ms.date: 08/02/2017
ms.author: tamram
ms.openlocfilehash: 03957d8a3d678bf44587f3bc7f988a76885c2af0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="count-tasks-by-state-toomonitor-a-jobs-progress-preview"></a><span data-ttu-id="60b59-104">Liczba zadań według stanu toomonitor postępu zadania (wersja zapoznawcza)</span><span class="sxs-lookup"><span data-stu-id="60b59-104">Count tasks by state toomonitor a job's progress (Preview)</span></span>

<span data-ttu-id="60b59-105">Partia zadań Azure umożliwia efektywną toomonitor hello postępu zadania podczas jego wykonywania swoich zadań.</span><span class="sxs-lookup"><span data-stu-id="60b59-105">Azure Batch provides an efficient way toomonitor hello progress of a job as it runs its tasks.</span></span> <span data-ttu-id="60b59-106">Możesz wywołać program hello [pobrać liczby zadań] [ rest_get_task_counts] toofind operacji jak wielu zadań, które są w stanie active, uruchomione lub zostało zakończone i ma liczbę powodzeniem lub niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="60b59-106">You can call hello [Get Task Counts][rest_get_task_counts] operation toofind out how many tasks are in an active, running, or completed state, and how many have succeeded or failed.</span></span> <span data-ttu-id="60b59-107">Poprzez zliczanie hello liczba zadań w każdym stanie, można łatwiej wyświetlanie użytkownika tooa postępu zadania hello lub wykrywania nieoczekiwane opóźnienia lub błędy, które mogą wpłynąć na powitania zadania.</span><span class="sxs-lookup"><span data-stu-id="60b59-107">By counting hello number of tasks in each state, you can more easily display hello job's progress tooa user, or detect unexpected delays or failures that may affect hello job.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="60b59-108">Hello operacji Get liczby zadań jest obecnie w wersji zapoznawczej i nie jest jeszcze dostępna w Azure dla instytucji rządowych, chińskiej wersji platformy Azure i platformy Azure w Niemczech.</span><span class="sxs-lookup"><span data-stu-id="60b59-108">hello Get Task Counts operation is currently in preview, and is not yet available in Azure Government, Azure China, and Azure Germany.</span></span> 
>
>

## <a name="how-tasks-are-counted"></a><span data-ttu-id="60b59-109">Jak zliczane są zadania</span><span class="sxs-lookup"><span data-stu-id="60b59-109">How tasks are counted</span></span>

<span data-ttu-id="60b59-110">Witaj operacji Get liczby zadań liczby zadań według stanu, w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="60b59-110">hello Get Task Counts operation counts tasks by state, as follows:</span></span>

- <span data-ttu-id="60b59-111">Zadanie jest traktowane jako **active** po jest toorun umieszczonych w kolejce i może, ale nie jest aktualnie przypisany tooa węźle obliczeń.</span><span class="sxs-lookup"><span data-stu-id="60b59-111">A task is counted as **active** when it is queued and able toorun, but is not currently assigned tooa compute node.</span></span> <span data-ttu-id="60b59-112">Zadanie również jest traktowane jako **active** Jeśli jest on zależny od zadaniem nadrzędnym, które nie zostało jeszcze zakończone.</span><span class="sxs-lookup"><span data-stu-id="60b59-112">A task is also counted as **active** if it is dependent on a parent task that has not yet completed.</span></span> <span data-ttu-id="60b59-113">Aby uzyskać więcej informacji o zależnościach zadań, zobacz [utworzyć zależności zadań toorun zadania, które są zależne od innych zadań](batch-task-dependencies.md).</span><span class="sxs-lookup"><span data-stu-id="60b59-113">For more information on task dependencies, see [Create task dependencies toorun tasks that depend on other tasks](batch-task-dependencies.md).</span></span> 
- <span data-ttu-id="60b59-114">Zadanie jest traktowane jako **systemem** po jego przypisano tooa węźle obliczeń, ale nie zostało jeszcze zakończone.</span><span class="sxs-lookup"><span data-stu-id="60b59-114">A task is counted as **running** when it has been assigned tooa compute node, but has not yet completed.</span></span> <span data-ttu-id="60b59-115">Zadanie jest traktowane jako **systemem** po jej stan to `preparing` lub `running`, wskazywany przez hello [uzyskać informacje o zadaniu] [ rest_get_task] operacji.</span><span class="sxs-lookup"><span data-stu-id="60b59-115">A task is counted as **running** when its state is either `preparing` or `running`, as indicated by hello [Get information about a task][rest_get_task] operation.</span></span>
- <span data-ttu-id="60b59-116">Zadanie jest traktowane jako **ukończone** gdy nie jest już toorun kwalifikujących się.</span><span class="sxs-lookup"><span data-stu-id="60b59-116">A task is counted as **completed** when it is no longer eligible toorun.</span></span> <span data-ttu-id="60b59-117">Zadania są liczone jako **ukończone** ma zazwyczaj albo zakończyło się pomyślnie, lub zakończy się niepowodzeniem i również Przekroczono limit ponownych prób.</span><span class="sxs-lookup"><span data-stu-id="60b59-117">A task counted as **completed** has typically either finished successfully, or has finished unsuccessfully and has also exhausted its retry limit.</span></span> 

<span data-ttu-id="60b59-118">Witaj operacji Get liczby zadań udostępnia również ile zadań ma powodzeniem lub niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="60b59-118">hello Get Task Counts operation also reports how many tasks have succeeded or failed.</span></span> <span data-ttu-id="60b59-119">Partii określa, czy zadanie zakończyło się pomyślnie lub nie powiodło się, sprawdzając hello **wynik** właściwości hello [executionInfo] [https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-task#executionInfo] Właściwości:</span><span class="sxs-lookup"><span data-stu-id="60b59-119">Batch determines whether a task has succeeded or failed by checking hello **result** property of hello [executionInfo][https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-task#executionInfo] property:</span></span>

    - <span data-ttu-id="60b59-120">Zadanie jest traktowane jako **zakończyło się pomyślnie** Jeśli hello wynikiem wykonania zadania jest `success`.</span><span class="sxs-lookup"><span data-stu-id="60b59-120">A task is counted as **succeeded** if hello result of task execution is `success`.</span></span>
    - <span data-ttu-id="60b59-121">Zadanie jest traktowane jako **nie powiodło się** Jeśli hello wynikiem wykonania zadania jest `failure`.</span><span class="sxs-lookup"><span data-stu-id="60b59-121">A task is counted as **failed** if hello result of task execution is `failure`.</span></span>

<span data-ttu-id="60b59-122">Aby uzyskać więcej informacji na temat stanów zadań, zobacz [uzyskać informacje o zadaniu][rest_get_task].</span><span class="sxs-lookup"><span data-stu-id="60b59-122">For more information about task states, see [Get information about a task][rest_get_task].</span></span>

<span data-ttu-id="60b59-123">Hello poniższy przykład kodu .NET przedstawia sposób liczby tooretrieve zadań według stanu:</span><span class="sxs-lookup"><span data-stu-id="60b59-123">hello following .NET code sample shows how tooretrieve task counts by state:</span></span> 

```csharp
var taskCounts = await batchClient.JobOperations.GetTaskCountsAsync("job-1");

Console.WriteLine("Task count in active state: {0}", taskCounts.Active);
Console.WriteLine("Task count in preparing or running state: {0}", taskCounts.Running);
Console.WriteLine("Task count in completed state: {0}", taskCounts.Completed);
Console.WriteLine("Succeeded task count: {0}", taskCounts.Succeeded);
Console.WriteLine("Failed task count: {0}", taskCounts.Failed);
Console.WriteLine("ValidationStatus: {0}", taskCounts.ValidationStatus);
```

> [!NOTE]
> <span data-ttu-id="60b59-124">Można użyć tego samego typu dla REST i innych obsługiwanych języków, które zlicza tooget zadań dla zadania.</span><span class="sxs-lookup"><span data-stu-id="60b59-124">You can use a similar pattern for REST and other supported languages tooget task counts for a job.</span></span> 
> 
> 

## <a name="consistency-checking-for-task-counts"></a><span data-ttu-id="60b59-125">Sprawdzanie liczby zadań spójności</span><span class="sxs-lookup"><span data-stu-id="60b59-125">Consistency checking for task counts</span></span>

<span data-ttu-id="60b59-126">Usługa partia zadań Hello agreguje liczby zadań przez zbieranie danych z wielu części asynchroniczne Rozproszony system.</span><span class="sxs-lookup"><span data-stu-id="60b59-126">hello Batch service aggregates task counts by gathering data from multiple parts of an asynchronous distributed system.</span></span> <span data-ttu-id="60b59-127">tooensure, który liczby zadań są poprawne, partii zapewnia dodatkowe sprawdzenie poprawności stanu liczby, wykonując sprawdzenie spójności względem systemu hello przez kilka składników.</span><span class="sxs-lookup"><span data-stu-id="60b59-127">tooensure that task counts are correct, Batch provides additional validation for state counts by performing consistency checks against multiple components of hello system.</span></span> <span data-ttu-id="60b59-128">Partii wykonuje te sprawdzenia spójności tak długo, jak w zadaniu hello jest krótsza niż 200 000 zadań.</span><span class="sxs-lookup"><span data-stu-id="60b59-128">Batch performs these consistency checks as long as there are fewer than 200,000 tasks in hello job.</span></span> <span data-ttu-id="60b59-129">W przypadku mało prawdopodobnego hello czy sprawdzanie spójności hello znajdzie błędy partii poprawia hello wynik operacji Get liczby zadań hello oparte na wynikach hello hello Sprawdzanie spójności.</span><span class="sxs-lookup"><span data-stu-id="60b59-129">In hello unlikely event that hello consistency check finds errors, Batch corrects hello result of hello Get Tasks Counts operation based on hello results of hello consistency check.</span></span> <span data-ttu-id="60b59-130">Witaj Kontrola spójności jest tooensure dodatkowe miary, która klientów, którzy korzystają na powitania pobrać liczby zadań operacji get hello właściwe informacje, które są im niezbędne do ich rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="60b59-130">hello consistency check is an extra measure tooensure that customers who rely on hello Get Task Counts operation get hello right information they need for their solution.</span></span>

<span data-ttu-id="60b59-131">Witaj **stan** właściwość w odpowiedzi hello wskazuje, czy partii ma przeprowadzić sprawdzanie spójności hello.</span><span class="sxs-lookup"><span data-stu-id="60b59-131">hello **validationStatus** property in hello response indicates whether Batch has performed hello consistency check.</span></span> <span data-ttu-id="60b59-132">Jeśli nie zostanie toocheck stanie stanu liczby przed hello stanów rzeczywiste przechowywanych w systemie hello partii, następnie hello **stan** właściwość jest ustawiona zbyt`unvalidated`.</span><span class="sxs-lookup"><span data-stu-id="60b59-132">If Batch has not been able toocheck state counts against hello actual states held in hello system, then hello **validationStatus** property is set too`unvalidated`.</span></span> <span data-ttu-id="60b59-133">Ze względu na wydajność wsadu nie będzie wykonywać sprawdzanie spójności hello, jeśli zadanie hello zawiera więcej niż 200 000 zadań, tak hello **stan** właściwości można ustawić zbyt`unvalidated` w takim przypadku.</span><span class="sxs-lookup"><span data-stu-id="60b59-133">For performance reasons, Batch will not perform hello consistency check if hello job includes more than 200,000 tasks, so hello **validationStatus** property may be set too`unvalidated` in this case.</span></span> <span data-ttu-id="60b59-134">Jednak liczba zadań hello nie jest zawsze niewłaściwy w takim przypadku nawet utraty bardzo ograniczoną ilość danych jest wysoce nieprawdopodobne.</span><span class="sxs-lookup"><span data-stu-id="60b59-134">However, hello task count is not necessarily wrong in this case, as even a very limited data loss is highly unlikely.</span></span> 

<span data-ttu-id="60b59-135">Po zmianie stanu zadania potoku agregacji hello przetwarza hello zmiany w ciągu kilku sekund.</span><span class="sxs-lookup"><span data-stu-id="60b59-135">When a task changes state, hello aggregation pipeline processes hello change within few seconds.</span></span> <span data-ttu-id="60b59-136">Witaj operacji Get liczby zadań odzwierciedla hello zaktualizować liczby zadań w tym okresie.</span><span class="sxs-lookup"><span data-stu-id="60b59-136">hello Get Task Counts operation reflects hello updated task counts within that period.</span></span> <span data-ttu-id="60b59-137">Jednak jeśli potoku agregacji hello chybień zmianę stanu zadań, następnie zmiany nie jest zarejestrowany do hello następny przebieg sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="60b59-137">However, if hello aggregation pipeline misses a change in a task state, then that change is not registered until hello next validation pass.</span></span> <span data-ttu-id="60b59-138">W tym czasie liczby zadań mogą być nieco niedokładne powodu toohello brakujących zdarzeń, ale są one usunąć na powitania następny przebieg sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="60b59-138">During this time, task counts may be slightly inaccurate due toohello missed event, but they are corrected on hello next validation pass.</span></span>

## <a name="best-practices-for-counting-a-jobs-tasks"></a><span data-ttu-id="60b59-139">Najlepsze rozwiązania dotyczące inwentaryzacji zadania podrzędne zadania</span><span class="sxs-lookup"><span data-stu-id="60b59-139">Best practices for counting a job's tasks</span></span>

<span data-ttu-id="60b59-140">Podczas wywoływania operacji Get liczby zadań hello jest hello najbardziej efektywny sposób tooreturn podstawowe liczba zadania według stanu.</span><span class="sxs-lookup"><span data-stu-id="60b59-140">Calling hello Get Task Counts operation is hello most efficient way tooreturn a basic count of a job's tasks by state.</span></span> <span data-ttu-id="60b59-141">Jeśli używasz wersji usługi partii 2017-06-01.5.1, zaleca się zapisywania lub aktualizowanie Twojej toouse kodu pobrać liczby zadań.</span><span class="sxs-lookup"><span data-stu-id="60b59-141">If you are using Batch service version 2017-06-01.5.1, we recommend writing or updating your code toouse Get Task Counts.</span></span>

<span data-ttu-id="60b59-142">Hello operacji Get liczby zadań nie jest starszy niż 2017-06-01.5.1 dostępne w wersjach usługi partii.</span><span class="sxs-lookup"><span data-stu-id="60b59-142">hello Get Task Counts operation is not available in Batch service versions earlier than 2017-06-01.5.1.</span></span> <span data-ttu-id="60b59-143">Jeśli używasz starszej wersji usługi hello, następnie użyć listy zadań toocount zapytania w ramach zadania.</span><span class="sxs-lookup"><span data-stu-id="60b59-143">If you are using an older version of hello service, then use a list query toocount tasks in a job instead.</span></span> <span data-ttu-id="60b59-144">Aby uzyskać więcej informacji, zobacz [tworzenie zapytań wydajnie zasobów partii toolist](batch-efficient-list-queries.md).</span><span class="sxs-lookup"><span data-stu-id="60b59-144">For more information, see [Create queries toolist Batch resources efficiently](batch-efficient-list-queries.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="60b59-145">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="60b59-145">Next steps</span></span>

* <span data-ttu-id="60b59-146">Zobacz hello [Przegląd funkcji partii](batch-api-basics.md) toolearn więcej informacji na temat partii pojęcia dotyczące usługi i funkcje.</span><span class="sxs-lookup"><span data-stu-id="60b59-146">See hello [Batch feature overview](batch-api-basics.md) toolearn more about Batch service concepts and features.</span></span> <span data-ttu-id="60b59-147">Witaj artykule omówiono hello głównej partii zasobów takich jak pule, węzły obliczeniowe, zadań i zadań i zawiera omówienie funkcji hello usługi.</span><span class="sxs-lookup"><span data-stu-id="60b59-147">hello article discusses hello primary Batch resources such as pools, compute nodes, jobs, and tasks, and provides an overview of hello service's features.</span></span>
* <span data-ttu-id="60b59-148">Dowiedz się podstawy hello opracowanie aplikacji z obsługą usługi partia zadań przy użyciu hello [biblioteki klienta .NET partii](batch-dotnet-get-started.md) lub [Python](batch-python-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="60b59-148">Learn hello basics of developing a Batch-enabled application using hello [Batch .NET client library](batch-dotnet-get-started.md) or [Python](batch-python-tutorial.md).</span></span> <span data-ttu-id="60b59-149">Te artykuły wprowadzające informacje pomocne przy działającą aplikację, która używa hello partii usługi tooexecute obciążenia na wielu węzłach obliczeniowych.</span><span class="sxs-lookup"><span data-stu-id="60b59-149">These introductory articles guide you through a working application that uses hello Batch service tooexecute a workload on multiple compute nodes.</span></span>


[rest_get_task_counts]: https://docs.microsoft.com/rest/api/batchservice/get-the-task-counts-for-a-job
[rest_get_task]: https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-task
[rest_list_tasks]: https://docs.microsoft.com/rest/api/batchservice/list-the-tasks-associated-with-a-job
