---
title: "aaaUse obliczeniowych maszyn wirtualnych platformy Azure z instancją | Dokumentacja firmy Microsoft"
description: "Jak rozmiary tootake zaletą maszyny Wirtualnej z funkcją RDMA lub włączone procesora GPU w pulach partii zadań Azure"
services: batch
documentationcenter: 
author: dlepow
manager: timlt
editor: 
ms.assetid: 
ms.service: batch
ms.workload: big-compute
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/27/2017
ms.author: danlep
ms.openlocfilehash: 6a462a5f2a44ddcec8bf4e5c200d444cac8fafe6
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="use-rdma-capable-or-gpu-enabled-instances-in-batch-pools"></a><span data-ttu-id="68571-103">Użyj wystąpień z funkcją RDMA lub włączone procesora GPU w pulach partii</span><span class="sxs-lookup"><span data-stu-id="68571-103">Use RDMA-capable or GPU-enabled instances in Batch pools</span></span>

<span data-ttu-id="68571-104">toorun niektórych zadań wsadowych może być tootake zaletą rozmiary maszyn wirtualnych Azure przeznaczone do obliczeń na dużą skalę.</span><span class="sxs-lookup"><span data-stu-id="68571-104">toorun certain Batch jobs, you might want tootake advantage of Azure VM sizes designed for large-scale computation.</span></span> <span data-ttu-id="68571-105">Na przykład toorun wielowystąpieniowy [obciążeń MPI](batch-mpi.md), można wybrać A8 i A9, lub rozmiary H-series, które sieci interfejsu dla zdalnego bezpośredniego pamięci Access (RDMA).</span><span class="sxs-lookup"><span data-stu-id="68571-105">For example, toorun multi-instance [MPI workloads](batch-mpi.md), you can choose A8, A9, or H-series sizes that have a network interface for Remote Direct Memory Access (RDMA).</span></span> <span data-ttu-id="68571-106">Rozmiary połączenia sieciowe InfiniBand tooan do komunikacji między węzłami, która umożliwia przyspieszanie MPI aplikacji.</span><span class="sxs-lookup"><span data-stu-id="68571-106">These sizes connect tooan InfiniBand network for inter-node communication, which can accelerate MPI applications.</span></span> <span data-ttu-id="68571-107">W przypadku aplikacji CUDA. można też rozmiary N-series, które obejmują grafiki tesla — NVIDIA przetwarzania kart jednostkę GPU.</span><span class="sxs-lookup"><span data-stu-id="68571-107">Or for CUDA applications, you can choose N-series sizes that include NVIDIA Tesla graphics processing unit (GPU) cards.</span></span>

<span data-ttu-id="68571-108">Ten artykuł zawiera wskazówki i przykłady toouse niektóre rozmiary specjalne platformy Azure w pulach partii.</span><span class="sxs-lookup"><span data-stu-id="68571-108">This article provides guidance and examples toouse some of Azure's specialized sizes in Batch pools.</span></span> <span data-ttu-id="68571-109">Aby uzyskać dane techniczne i tło Zobacz:</span><span class="sxs-lookup"><span data-stu-id="68571-109">For specs and background, see:</span></span>

* <span data-ttu-id="68571-110">Wysoka wydajność obliczeniowe rozmiarów maszyn wirtualnych ([Linux](../virtual-machines/linux/sizes-hpc.md), [Windows](../virtual-machines/windows/sizes-hpc.md))</span><span class="sxs-lookup"><span data-stu-id="68571-110">High performance compute VM sizes ([Linux](../virtual-machines/linux/sizes-hpc.md), [Windows](../virtual-machines/windows/sizes-hpc.md))</span></span> 

* <span data-ttu-id="68571-111">Rozmiary maszyn wirtualnych z obsługą procesora GPU ([Linux](../virtual-machines/linux/sizes-gpu.md), [Windows](../virtual-machines/windows/sizes-gpu.md))</span><span class="sxs-lookup"><span data-stu-id="68571-111">GPU-enabled VM sizes ([Linux](../virtual-machines/linux/sizes-gpu.md), [Windows](../virtual-machines/windows/sizes-gpu.md))</span></span> 


## <a name="subscription-and-account-limits"></a><span data-ttu-id="68571-112">Subskrypcja oraz limity konta</span><span class="sxs-lookup"><span data-stu-id="68571-112">Subscription and account limits</span></span>

* <span data-ttu-id="68571-113">**Przydziały** — co najmniej jeden limitach przydziału platformy Azure może ograniczyć liczbę hello lub typ węzłów można dodać puli partii tooa.</span><span class="sxs-lookup"><span data-stu-id="68571-113">**Quotas** - One or more Azure quotas may limit hello number or type of nodes you can add tooa Batch pool.</span></span> <span data-ttu-id="68571-114">Użytkownik jest bardziej prawdopodobne toobe ograniczone po wybraniu z funkcją RDMA, GPU jest włączona, czy inne wielordzeniowych rozmiarów maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="68571-114">You are more likely toobe limited when you choose RDMA-capable, GPU-enabled, or other multicore VM sizes.</span></span> <span data-ttu-id="68571-115">W zależności od typu hello utworzone konto usługi partia zadań przydziały hello można zastosować samo konto toohello lub tooyour subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="68571-115">Depending on hello type of Batch account you created, hello quotas could apply toohello account itself or tooyour subscription.</span></span>

    * <span data-ttu-id="68571-116">Jeśli utworzono konto wsadowe w hello **partii usługi** konfiguracji, są ograniczone przez hello [limit przydziału rdzeni dedykowanych na konto usługi partia zadań](batch-quota-limit.md#resource-quotas).</span><span class="sxs-lookup"><span data-stu-id="68571-116">If you created your Batch account in hello **Batch service** configuration, you are limited by hello [dedicated cores quota per Batch account](batch-quota-limit.md#resource-quotas).</span></span> <span data-ttu-id="68571-117">Domyślnie ten przydział jest 20 rdzeni.</span><span class="sxs-lookup"><span data-stu-id="68571-117">By default, this quota is 20 cores.</span></span> <span data-ttu-id="68571-118">Oddzielne zasoby odnoszą się zbyt[maszyn wirtualnych niskiego priorytetu](batch-low-pri-vms.md), jeśli są używane.</span><span class="sxs-lookup"><span data-stu-id="68571-118">A separate quota applies too[low-priority VMs](batch-low-pri-vms.md), if you use them.</span></span> 

    * <span data-ttu-id="68571-119">Jeśli utworzono konto hello w hello **subskrypcji użytkownika** konfiguracji subskrypcji ogranicza hello liczba rdzeni maszyny Wirtualnej w regionie.</span><span class="sxs-lookup"><span data-stu-id="68571-119">If you created hello account in hello **User subscription** configuration, your subscription limits hello number of VM cores per region.</span></span> <span data-ttu-id="68571-120">Zobacz [subskrypcji platformy Azure i usługi limity, przydziały i ograniczenia](../azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="68571-120">See [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md).</span></span> <span data-ttu-id="68571-121">Subskrypcja ma również zastosowanie regionalnych przydziału toocertain rozmiarów maszyn wirtualnych, w tym wystąpienia HPC i procesora GPU.</span><span class="sxs-lookup"><span data-stu-id="68571-121">Your subscription also applies a regional quota toocertain VM sizes, including HPC and GPU instances.</span></span> <span data-ttu-id="68571-122">W konfiguracji subskrypcji użytkownika hello nie dodatkowych przydziałach zastosować toohello konta usługi partia zadań.</span><span class="sxs-lookup"><span data-stu-id="68571-122">In hello user subscription configuration, no additional quotas apply toohello Batch account.</span></span> 

  <span data-ttu-id="68571-123">Może być konieczne tooincrease na co najmniej jeden przydziały używając wyspecjalizowany rozmiar maszyny Wirtualnej w partii.</span><span class="sxs-lookup"><span data-stu-id="68571-123">You might need tooincrease one or more quotas when using a specialized VM size in Batch.</span></span> <span data-ttu-id="68571-124">toorequest zwiększenia limitu przydziału, otwórz [żądania obsługi online klienta](../azure-supportability/how-to-create-azure-support-request.md) bez dodatkowych opłat.</span><span class="sxs-lookup"><span data-stu-id="68571-124">toorequest a quota increase, open an [online customer support request](../azure-supportability/how-to-create-azure-support-request.md) at no charge.</span></span>

* <span data-ttu-id="68571-125">**Dostępność w danym regionie** — obliczeniowych maszyn wirtualnych mogą nie być dostępne w regionach hello, w której utworzono konta usługi partia zadań.</span><span class="sxs-lookup"><span data-stu-id="68571-125">**Region availability** - Compute-intensive VMs might not be available in hello regions where you create your Batch accounts.</span></span> <span data-ttu-id="68571-126">toocheck, że rozmiar jest dostępny, zobacz [produkty, które są dostępne w regionie](https://azure.microsoft.com/regions/services/).</span><span class="sxs-lookup"><span data-stu-id="68571-126">toocheck that a size is available, see [Products available by region](https://azure.microsoft.com/regions/services/).</span></span>


## <a name="dependencies"></a><span data-ttu-id="68571-127">Zależności</span><span class="sxs-lookup"><span data-stu-id="68571-127">Dependencies</span></span>

<span data-ttu-id="68571-128">Witaj RDMA i procesora GPU możliwości obliczeniowych rozmiary są obsługiwane tylko w niektórych systemach operacyjnych.</span><span class="sxs-lookup"><span data-stu-id="68571-128">hello RDMA and GPU capabilities of compute-intensive sizes are supported only in certain operating systems.</span></span> <span data-ttu-id="68571-129">W zależności od systemu operacyjnego może być konieczne tooinstall lub skonfigurować dodatkowe sterowników lub innego oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="68571-129">Depending on your operating system, you might need tooinstall or configure additional driver or other software.</span></span> <span data-ttu-id="68571-130">następujące tabele Hello podsumowanie tych zależności.</span><span class="sxs-lookup"><span data-stu-id="68571-130">hello following tables summarize these dependencies.</span></span> <span data-ttu-id="68571-131">Zobacz połączonych artykułów, aby uzyskać szczegółowe informacje.</span><span class="sxs-lookup"><span data-stu-id="68571-131">See linked articles for details.</span></span> <span data-ttu-id="68571-132">Dla opcji tooconfigure partii pul zobacz w dalszej części tego artykułu.</span><span class="sxs-lookup"><span data-stu-id="68571-132">For options tooconfigure Batch pools, see later in this article.</span></span>


### <a name="linux-pools---virtual-machine-configuration"></a><span data-ttu-id="68571-133">Pule Linux - konfiguracji maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="68571-133">Linux pools - Virtual machine configuration</span></span>

| <span data-ttu-id="68571-134">Rozmiar</span><span class="sxs-lookup"><span data-stu-id="68571-134">Size</span></span> | <span data-ttu-id="68571-135">Możliwości</span><span class="sxs-lookup"><span data-stu-id="68571-135">Capability</span></span> | <span data-ttu-id="68571-136">Systemy operacyjne</span><span class="sxs-lookup"><span data-stu-id="68571-136">Operating systems</span></span> | <span data-ttu-id="68571-137">Wymagane oprogramowanie</span><span class="sxs-lookup"><span data-stu-id="68571-137">Required software</span></span> | <span data-ttu-id="68571-138">Ustawienia puli</span><span class="sxs-lookup"><span data-stu-id="68571-138">Pool settings</span></span> |
| -------- | -------- | ----- |  -------- | ----- |
| [<span data-ttu-id="68571-139">H16r, H16mr, A8, A9</span><span class="sxs-lookup"><span data-stu-id="68571-139">H16r, H16mr, A8, A9</span></span>](../virtual-machines/linux/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="68571-140">DOSTĘP RDMA</span><span class="sxs-lookup"><span data-stu-id="68571-140">RDMA</span></span> | <span data-ttu-id="68571-141">SUSE Linux Enterprise Server 12 HPC lub</span><span class="sxs-lookup"><span data-stu-id="68571-141">SUSE Linux Enterprise Server 12 HPC or</span></span><br/><span data-ttu-id="68571-142">Na podstawie centOS HPC</span><span class="sxs-lookup"><span data-stu-id="68571-142">CentOS-based HPC</span></span><br/><span data-ttu-id="68571-143">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="68571-143">(Azure Marketplace)</span></span> | <span data-ttu-id="68571-144">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="68571-144">Intel MPI 5</span></span> | <span data-ttu-id="68571-145">Włącz komunikację między węzłami, uniemożliwić wykonywanie zadań jednoczesnych</span><span class="sxs-lookup"><span data-stu-id="68571-145">Enable inter-node communication, disable concurrent task execution</span></span> |
| [<span data-ttu-id="68571-146">NC serii *</span><span class="sxs-lookup"><span data-stu-id="68571-146">NC series*</span></span>](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms) | <span data-ttu-id="68571-147">NVIDIA tesla — K80 procesora GPU</span><span class="sxs-lookup"><span data-stu-id="68571-147">NVIDIA Tesla K80 GPU</span></span> | <span data-ttu-id="68571-148">Ubuntu 16.04 LTS.</span><span class="sxs-lookup"><span data-stu-id="68571-148">Ubuntu 16.04 LTS.</span></span><br/><span data-ttu-id="68571-149">Red Hat Enterprise Linux 7.3, lub</span><span class="sxs-lookup"><span data-stu-id="68571-149">Red Hat Enterprise Linux 7.3, or</span></span><br/><span data-ttu-id="68571-150">Oparty na systemie CentOS 7.3</span><span class="sxs-lookup"><span data-stu-id="68571-150">CentOS-based 7.3</span></span><br/><span data-ttu-id="68571-151">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="68571-151">(Azure Marketplace)</span></span> | <span data-ttu-id="68571-152">Sterowniki NVIDIA CUDA Toolkit 8.0</span><span class="sxs-lookup"><span data-stu-id="68571-152">NVIDIA CUDA Toolkit 8.0 drivers</span></span> | <span data-ttu-id="68571-153">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="68571-153">N/A</span></span> | 
| [<span data-ttu-id="68571-154">Seria wirtualizacją sieci</span><span class="sxs-lookup"><span data-stu-id="68571-154">NV series</span></span>](../virtual-machines/linux/n-series-driver-setup.md#install-grid-drivers-for-nv-vms) | <span data-ttu-id="68571-155">M60 tesla — NVIDIA GPU</span><span class="sxs-lookup"><span data-stu-id="68571-155">NVIDIA Tesla M60 GPU</span></span> | <span data-ttu-id="68571-156">Ubuntu 16.04 LTS</span><span class="sxs-lookup"><span data-stu-id="68571-156">Ubuntu 16.04 LTS</span></span><br/><span data-ttu-id="68571-157">Red Hat Enterprise Linux 7.3</span><span class="sxs-lookup"><span data-stu-id="68571-157">Red Hat Enterprise Linux 7.3</span></span><br/><span data-ttu-id="68571-158">Oparty na systemie CentOS 7.3</span><span class="sxs-lookup"><span data-stu-id="68571-158">CentOS-based 7.3</span></span><br/><span data-ttu-id="68571-159">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="68571-159">(Azure Marketplace)</span></span> | <span data-ttu-id="68571-160">4.3 siatki NVIDIA sterowniki</span><span class="sxs-lookup"><span data-stu-id="68571-160">NVIDIA GRID 4.3 drivers</span></span> | <span data-ttu-id="68571-161">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="68571-161">N/A</span></span> |

<span data-ttu-id="68571-162">* Łączność RDMA na maszynach wirtualnych NC24r jest obsługiwana na podstawie CentOS 7.3 HPC z Intel MPI.</span><span class="sxs-lookup"><span data-stu-id="68571-162">*RDMA connectivity on NC24r VMs is supported on CentOS-based 7.3 HPC with Intel MPI.</span></span>



### <a name="windows-pools---virtual-machine-configuration"></a><span data-ttu-id="68571-163">Pule systemu Windows — konfiguracja maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="68571-163">Windows pools - Virtual machine configuration</span></span>

| <span data-ttu-id="68571-164">Rozmiar</span><span class="sxs-lookup"><span data-stu-id="68571-164">Size</span></span> | <span data-ttu-id="68571-165">Możliwości</span><span class="sxs-lookup"><span data-stu-id="68571-165">Capability</span></span> | <span data-ttu-id="68571-166">Systemy operacyjne</span><span class="sxs-lookup"><span data-stu-id="68571-166">Operating systems</span></span> | <span data-ttu-id="68571-167">Wymagane oprogramowanie</span><span class="sxs-lookup"><span data-stu-id="68571-167">Required software</span></span> | <span data-ttu-id="68571-168">Ustawienia puli</span><span class="sxs-lookup"><span data-stu-id="68571-168">Pool settings</span></span> |
| -------- | ------ | -------- | -------- | ----- |
| [<span data-ttu-id="68571-169">H16r, H16mr, A8, A9</span><span class="sxs-lookup"><span data-stu-id="68571-169">H16r, H16mr, A8, A9</span></span>](../virtual-machines/windows/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="68571-170">DOSTĘP RDMA</span><span class="sxs-lookup"><span data-stu-id="68571-170">RDMA</span></span> | <span data-ttu-id="68571-171">Windows Server 2012 R2 lub</span><span class="sxs-lookup"><span data-stu-id="68571-171">Windows Server 2012 R2 or</span></span><br/><span data-ttu-id="68571-172">Windows Server 2012 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="68571-172">Windows Server 2012 (Azure Marketplace)</span></span> | <span data-ttu-id="68571-173">Microsoft MPI 2012 R2 lub nowszym, lub</span><span class="sxs-lookup"><span data-stu-id="68571-173">Microsoft MPI 2012 R2 or later, or</span></span><br/> <span data-ttu-id="68571-174">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="68571-174">Intel MPI 5</span></span><br/><br/><span data-ttu-id="68571-175">Rozszerzenia maszyny Wirtualnej Azure HpcVMDrivers</span><span class="sxs-lookup"><span data-stu-id="68571-175">HpcVMDrivers Azure VM extension</span></span> | <span data-ttu-id="68571-176">Włącz komunikację między węzłami, uniemożliwić wykonywanie zadań jednoczesnych</span><span class="sxs-lookup"><span data-stu-id="68571-176">Enable inter-node communication, disable concurrent task execution</span></span> |
| [<span data-ttu-id="68571-177">NC serii *</span><span class="sxs-lookup"><span data-stu-id="68571-177">NC series*</span></span>](../virtual-machines/windows/n-series-driver-setup.md) | <span data-ttu-id="68571-178">NVIDIA tesla — K80 procesora GPU</span><span class="sxs-lookup"><span data-stu-id="68571-178">NVIDIA Tesla K80 GPU</span></span> | <span data-ttu-id="68571-179">Windows Server 2016 lub</span><span class="sxs-lookup"><span data-stu-id="68571-179">Windows Server 2016 or</span></span> <br/><span data-ttu-id="68571-180">Windows Server 2012 R2 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="68571-180">Windows Server 2012 R2 (Azure Marketplace)</span></span> | <span data-ttu-id="68571-181">Tesla — NVIDIA sterowników lub sterowników CUDA Toolkit 8.0</span><span class="sxs-lookup"><span data-stu-id="68571-181">NVIDIA Tesla drivers or CUDA Toolkit 8.0 drivers</span></span>| <span data-ttu-id="68571-182">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="68571-182">N/A</span></span> | 
| [<span data-ttu-id="68571-183">Seria wirtualizacją sieci</span><span class="sxs-lookup"><span data-stu-id="68571-183">NV series</span></span>](../virtual-machines/windows/n-series-driver-setup.md) | <span data-ttu-id="68571-184">M60 tesla — NVIDIA GPU</span><span class="sxs-lookup"><span data-stu-id="68571-184">NVIDIA Tesla M60 GPU</span></span> | <span data-ttu-id="68571-185">Windows Server 2016 lub</span><span class="sxs-lookup"><span data-stu-id="68571-185">Windows Server 2016 or</span></span><br/><span data-ttu-id="68571-186">Windows Server 2012 R2 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="68571-186">Windows Server 2012 R2 (Azure Marketplace)</span></span> | <span data-ttu-id="68571-187">4.3 siatki NVIDIA sterowniki</span><span class="sxs-lookup"><span data-stu-id="68571-187">NVIDIA GRID 4.3 drivers</span></span> | <span data-ttu-id="68571-188">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="68571-188">N/A</span></span> |

<span data-ttu-id="68571-189">* Łączność RDMA na maszynach wirtualnych NC24r jest obsługiwana w systemie Windows Server 2012 R2 z rozszerzenia HpcVMDrivers i MPI firmy Microsoft lub Intel MPI.</span><span class="sxs-lookup"><span data-stu-id="68571-189">*RDMA connectivity on NC24r VMs is supported on Windows Server 2012 R2 with HpcVMDrivers extension and Microsoft MPI or Intel MPI.</span></span>

### <a name="windows-pools---cloud-services-configuration"></a><span data-ttu-id="68571-190">Pule systemu Windows — Konfiguracja usług w chmurze</span><span class="sxs-lookup"><span data-stu-id="68571-190">Windows pools - Cloud services configuration</span></span>

> [!NOTE]
> <span data-ttu-id="68571-191">Rozmiary serii N nie są obsługiwane w pulach partii z konfiguracją usługi w chmurze hello.</span><span class="sxs-lookup"><span data-stu-id="68571-191">N-series sizes are not supported in Batch pools with hello cloud services configuration.</span></span>
>

| <span data-ttu-id="68571-192">Rozmiar</span><span class="sxs-lookup"><span data-stu-id="68571-192">Size</span></span> | <span data-ttu-id="68571-193">Możliwości</span><span class="sxs-lookup"><span data-stu-id="68571-193">Capability</span></span> | <span data-ttu-id="68571-194">Systemy operacyjne</span><span class="sxs-lookup"><span data-stu-id="68571-194">Operating systems</span></span> | <span data-ttu-id="68571-195">Wymagane oprogramowanie</span><span class="sxs-lookup"><span data-stu-id="68571-195">Required software</span></span> | <span data-ttu-id="68571-196">Ustawienia puli</span><span class="sxs-lookup"><span data-stu-id="68571-196">Pool settings</span></span> |
| -------- | ------- | -------- | -------- | ----- |
| [<span data-ttu-id="68571-197">H16r, H16mr, A8, A9</span><span class="sxs-lookup"><span data-stu-id="68571-197">H16r, H16mr, A8, A9</span></span>](../virtual-machines/windows/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="68571-198">DOSTĘP RDMA</span><span class="sxs-lookup"><span data-stu-id="68571-198">RDMA</span></span> | <span data-ttu-id="68571-199">Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="68571-199">Windows Server 2012 R2,</span></span><br/><span data-ttu-id="68571-200">Windows Server 2012, lub</span><span class="sxs-lookup"><span data-stu-id="68571-200">Windows Server 2012, or</span></span><br/><span data-ttu-id="68571-201">Windows Server 2008 R2 (rodziny systemów operacyjnych gościa)</span><span class="sxs-lookup"><span data-stu-id="68571-201">Windows Server 2008 R2 (Guest OS family)</span></span> | <span data-ttu-id="68571-202">Microsoft MPI 2012 R2 lub nowszym, lub</span><span class="sxs-lookup"><span data-stu-id="68571-202">Microsoft MPI 2012 R2 or later, or</span></span><br/><span data-ttu-id="68571-203">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="68571-203">Intel MPI 5</span></span><br/><br/><span data-ttu-id="68571-204">Rozszerzenia maszyny Wirtualnej Azure HpcVMDrivers</span><span class="sxs-lookup"><span data-stu-id="68571-204">HpcVMDrivers Azure VM extension</span></span> | <span data-ttu-id="68571-205">Włącz komunikację między węzłami</span><span class="sxs-lookup"><span data-stu-id="68571-205">Enable inter-node communication,</span></span><br/> <span data-ttu-id="68571-206">Wyłącz wykonywanie zadań jednoczesnych</span><span class="sxs-lookup"><span data-stu-id="68571-206">disable concurrent task execution</span></span> |





## <a name="pool-configuration-options"></a><span data-ttu-id="68571-207">Opcje konfiguracji puli</span><span class="sxs-lookup"><span data-stu-id="68571-207">Pool configuration options</span></span>

<span data-ttu-id="68571-208">tooconfigure specjalne rozmiar maszyny Wirtualnej w puli partii, hello partii interfejsów API i narzędzia zawierają kilka opcji tooinstall wymaganego oprogramowania lub sterowników, w tym:</span><span class="sxs-lookup"><span data-stu-id="68571-208">tooconfigure a specialized VM size for your Batch pool, hello Batch APIs and tools provide several options tooinstall required software or drivers, including:</span></span>

* <span data-ttu-id="68571-209">[Uruchom zadanie](batch-api-basics.md#start-task) -przekazać pakietu instalacyjnego jako tooan pliku zasobów konta magazynu Azure w hello tego samego regionu hello konta usługi partia zadań.</span><span class="sxs-lookup"><span data-stu-id="68571-209">[Start task](batch-api-basics.md#start-task) - Upload an installation package as a resource file tooan Azure storage account in hello same region as hello Batch account.</span></span> <span data-ttu-id="68571-210">Trybie dyskretnym Utwórz plik zasobów tooinstall hello rozpoczęcia zadania wiersza polecenia po uruchomieniu puli hello.</span><span class="sxs-lookup"><span data-stu-id="68571-210">Create a start task command line tooinstall hello resource file silently when hello pool starts.</span></span> <span data-ttu-id="68571-211">Aby uzyskać więcej informacji, zobacz hello [dokumentacja interfejsu API REST](/rest/api/batchservice/add-a-pool-to-an-account#bk_starttask).</span><span class="sxs-lookup"><span data-stu-id="68571-211">For more information, see hello [REST API documentation](/rest/api/batchservice/add-a-pool-to-an-account#bk_starttask).</span></span>

  > [!NOTE] 
  > <span data-ttu-id="68571-212">Hello rozpoczęcia zadań należy uruchomić z uprawnieniami z podniesionymi uprawnieniami (Administrator) i poczekaj, aż Powodzenie.</span><span class="sxs-lookup"><span data-stu-id="68571-212">hello start task must run with elevated (admin) permissions, and it must wait for success.</span></span>
  >

* <span data-ttu-id="68571-213">[Pakiet aplikacji](batch-application-packages.md) — Dodawanie tooyour pakietu ZIP instalacji konta usługi partia zadań i konfigurowanie odwołanie do pakietu w puli hello.</span><span class="sxs-lookup"><span data-stu-id="68571-213">[Application package](batch-application-packages.md) - Add a zipped installation package tooyour Batch account, and configure a package reference in hello pool.</span></span> <span data-ttu-id="68571-214">To ustawienie przekazuje i unzips hello pakiet we wszystkich węzłach w puli hello.</span><span class="sxs-lookup"><span data-stu-id="68571-214">This setting uploads and unzips hello package on all nodes in hello pool.</span></span> <span data-ttu-id="68571-215">Jeśli pakiet hello jest Instalator, Utwórz aplikacji hello instalacji toosilently rozpoczęcia zadań wiersza polecenia na wszystkich węzłach puli.</span><span class="sxs-lookup"><span data-stu-id="68571-215">If hello package is an installer, create a start task command line toosilently install hello app on all pool nodes.</span></span> <span data-ttu-id="68571-216">Opcjonalnie należy zainstalować pakiet hello, gdy zadanie jest zaplanowane toorun w węźle.</span><span class="sxs-lookup"><span data-stu-id="68571-216">Optionally, install hello package when a task is scheduled toorun on a node.</span></span>

* <span data-ttu-id="68571-217">[Obraz niestandardowy puli](batch-api-basics.md#pool) — Tworzenie niestandardowych systemu Windows lub obrazu maszyny Wirtualnej systemu Linux, który zawiera sterowników, oprogramowania lub inne ustawienia wymagane dla hello rozmiar maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="68571-217">[Custom pool image](batch-api-basics.md#pool) - Create a custom Windows or Linux VM image that contains drivers, software, or other settings required for hello VM size.</span></span> <span data-ttu-id="68571-218">Jeśli utworzono konto wsadowe w konfiguracji subskrypcji użytkownika hello określić niestandardowy obraz powitania dla użytkownika puli partii.</span><span class="sxs-lookup"><span data-stu-id="68571-218">If you created your Batch account in hello user subscription configuration, specify hello custom image for your Batch pool.</span></span> <span data-ttu-id="68571-219">(Obrazy niestandardowe nie są obsługiwane na kontach w konfiguracji usługi partii hello). Niestandardowe obrazy można używać tylko z pul w konfiguracji maszyny wirtualnej hello.</span><span class="sxs-lookup"><span data-stu-id="68571-219">(Custom images are not supported in accounts in hello Batch service configuration.) Custom images can only be used with pools in hello virtual machine configuration.</span></span>

  > [!IMPORTANT]
  > <span data-ttu-id="68571-220">W puli partii obecnie nie można użyć niestandardowego obrazu utworzone z dysków zarządzanych lub magazyn w warstwie Premium.</span><span class="sxs-lookup"><span data-stu-id="68571-220">In Batch pools, you can't currently use a custom image created with managed disks or with Premium storage.</span></span>
  >



* <span data-ttu-id="68571-221">[Partii stoczni](https://github.com/Azure/batch-shipyard) automatycznie konfiguruje hello procesora GPU i dostępu RDMA toowork w sposób niewidoczny dla użytkownika przy użyciu konteneryzowanych obciążeń w partii zadań Azure.</span><span class="sxs-lookup"><span data-stu-id="68571-221">[Batch Shipyard](https://github.com/Azure/batch-shipyard) automatically configures hello GPU and RDMA toowork transparently with containerized workloads on Azure Batch.</span></span> <span data-ttu-id="68571-222">Stoczni partii całkowicie wynikają z plikami konfiguracyjnymi.</span><span class="sxs-lookup"><span data-stu-id="68571-222">Batch Shipyard is entirely driven with configuration files.</span></span> <span data-ttu-id="68571-223">Istnieje wiele przykładowych przepisu konfiguracji dostępne umożliwiających obciążeń procesora GPU i funkcji RDMA, takich jak hello [CNTK GPU przepisu](https://github.com/Azure/batch-shipyard/tree/master/recipes/CNTK-GPU-OpenMPI) co wstępnie konfiguruje wersji sterowników procesora GPU na maszynach wirtualnych N serii i ładuje oprogramowania kognitywnych zestaw narzędzi firmy Microsoft jako obraz Docker.</span><span class="sxs-lookup"><span data-stu-id="68571-223">There are many sample recipe configurations available that enable GPU and RDMA workloads such as hello [CNTK GPU Recipe](https://github.com/Azure/batch-shipyard/tree/master/recipes/CNTK-GPU-OpenMPI)  which preconfigures GPU drivers on N-series VMs and loads Microsoft Cognitive Toolkit software as a Docker image.</span></span>


## <a name="example-microsoft-mpi-on-an-a8-vm-pool"></a><span data-ttu-id="68571-224">Przykład: Microsoft MPI w puli maszyna wirtualna A8</span><span class="sxs-lookup"><span data-stu-id="68571-224">Example: Microsoft MPI on an A8 VM pool</span></span>

<span data-ttu-id="68571-225">toorun Windows MPI aplikacji w puli węzłów Azure A8, należy tooinstall obsługiwanych implementacji MPI.</span><span class="sxs-lookup"><span data-stu-id="68571-225">toorun Windows MPI applications on a pool of Azure A8 nodes, you need tooinstall a supported MPI implementation.</span></span> <span data-ttu-id="68571-226">Poniżej przedstawiono przykładowe kroki tooinstall [Microsoft MPI](https://msdn.microsoft.com/library/bb524831(v=vs.85).aspx) na Windows puli przy użyciu pakietu aplikacji partii.</span><span class="sxs-lookup"><span data-stu-id="68571-226">Here are sample steps tooinstall [Microsoft MPI](https://msdn.microsoft.com/library/bb524831(v=vs.85).aspx) on a Windows pool using a Batch application package.</span></span>

1. <span data-ttu-id="68571-227">Pobierz hello [pakiet instalacyjny](http://go.microsoft.com/FWLink/p/?LinkID=389556) (MSMpiSetup.exe) dla hello najnowszą wersję programu Microsoft MPI.</span><span class="sxs-lookup"><span data-stu-id="68571-227">Download hello [setup package](http://go.microsoft.com/FWLink/p/?LinkID=389556) (MSMpiSetup.exe) for hello latest version of Microsoft MPI.</span></span>
2. <span data-ttu-id="68571-228">Utwórz plik zip pakietu hello.</span><span class="sxs-lookup"><span data-stu-id="68571-228">Create a zip file of hello package.</span></span>
3. <span data-ttu-id="68571-229">Przekaż konta usługi partia zadań tooyour pakietu hello.</span><span class="sxs-lookup"><span data-stu-id="68571-229">Upload hello package tooyour Batch account.</span></span> <span data-ttu-id="68571-230">Aby uzyskać instrukcje, zobacz hello [pakietów aplikacji](batch-application-packages.md) wskazówki.</span><span class="sxs-lookup"><span data-stu-id="68571-230">For steps, see hello [application packages](batch-application-packages.md) guidance.</span></span> <span data-ttu-id="68571-231">Określ identyfikator aplikacji, takich jak *MSMPI*i wersji, takich jak *8.1*.</span><span class="sxs-lookup"><span data-stu-id="68571-231">Specify an application id such as *MSMPI*, and a version such as *8.1*.</span></span> 
4. <span data-ttu-id="68571-232">Za pomocą interfejsów API partii hello lub portalu Azure, Utwórz pulę w konfiguracji usługi w chmurze hello przy użyciu hello żądaną liczbę węzłów i skali.</span><span class="sxs-lookup"><span data-stu-id="68571-232">Using hello Batch APIs or Azure portal, create a pool in hello cloud services configuration with hello desired number of nodes and scale.</span></span> <span data-ttu-id="68571-233">Witaj poniższej tabeli przedstawiono przykładowe ustawienia tooset się MPI w trybie instalacji nienadzorowanej za pomocą zadania uruchamiania:</span><span class="sxs-lookup"><span data-stu-id="68571-233">hello following table shows sample settings tooset up MPI in unattended mode using a start task:</span></span>

| <span data-ttu-id="68571-234">Ustawienie</span><span class="sxs-lookup"><span data-stu-id="68571-234">Setting</span></span> | <span data-ttu-id="68571-235">Wartość</span><span class="sxs-lookup"><span data-stu-id="68571-235">Value</span></span> |
| ---- | ----- | 
| <span data-ttu-id="68571-236">**Typ obrazu**</span><span class="sxs-lookup"><span data-stu-id="68571-236">**Image Type**</span></span> | <span data-ttu-id="68571-237">Cloud Services</span><span class="sxs-lookup"><span data-stu-id="68571-237">Cloud Services</span></span> |
| <span data-ttu-id="68571-238">**Rodzina systemów operacyjnych**</span><span class="sxs-lookup"><span data-stu-id="68571-238">**OS family**</span></span> | <span data-ttu-id="68571-239">Windows Server 2012 R2 (rodziny systemów operacyjnych 4)</span><span class="sxs-lookup"><span data-stu-id="68571-239">Windows Server 2012 R2 (OS family 4)</span></span> |
| <span data-ttu-id="68571-240">**Rozmiaru węzła**</span><span class="sxs-lookup"><span data-stu-id="68571-240">**Node size**</span></span> | <span data-ttu-id="68571-241">A8 Standard</span><span class="sxs-lookup"><span data-stu-id="68571-241">A8 Standard</span></span> |
| <span data-ttu-id="68571-242">**Włączono komunikację między węzłami**</span><span class="sxs-lookup"><span data-stu-id="68571-242">**Internode communication enabled**</span></span> | <span data-ttu-id="68571-243">True</span><span class="sxs-lookup"><span data-stu-id="68571-243">True</span></span> |
| <span data-ttu-id="68571-244">**Maksymalna liczba zadań na węzeł**</span><span class="sxs-lookup"><span data-stu-id="68571-244">**Max tasks per node**</span></span> | <span data-ttu-id="68571-245">1</span><span class="sxs-lookup"><span data-stu-id="68571-245">1</span></span> |
| <span data-ttu-id="68571-246">**Odwołania do pakietu aplikacji**</span><span class="sxs-lookup"><span data-stu-id="68571-246">**Application package references**</span></span> | <span data-ttu-id="68571-247">MSMPI</span><span class="sxs-lookup"><span data-stu-id="68571-247">MSMPI</span></span> |
| <span data-ttu-id="68571-248">**Uruchom zadanie włączone**</span><span class="sxs-lookup"><span data-stu-id="68571-248">**Start task enabled**</span></span> | <span data-ttu-id="68571-249">True</span><span class="sxs-lookup"><span data-stu-id="68571-249">True</span></span><br><span data-ttu-id="68571-250">**Wiersz polecenia** - `"cmd /c %AZ_BATCH_APP_PACKAGE_MSMPI#8.1%\\MSMpiSetup.exe -unattend -force"`</span><span class="sxs-lookup"><span data-stu-id="68571-250">**Command line** - `"cmd /c %AZ_BATCH_APP_PACKAGE_MSMPI#8.1%\\MSMpiSetup.exe -unattend -force"`</span></span><br/><span data-ttu-id="68571-251">**Tożsamość użytkownika** -autouser puli, administracja</span><span class="sxs-lookup"><span data-stu-id="68571-251">**User identity** - Pool autouser, admin</span></span><br/><span data-ttu-id="68571-252">**Poczekaj, aż Powodzenie** — PRAWDA</span><span class="sxs-lookup"><span data-stu-id="68571-252">**Wait for success** - True</span></span>

## <a name="example-nvidia-tesla-drivers-on-nc-vm-pool"></a><span data-ttu-id="68571-253">Przykład: Tesla — NVIDIA sterowników w puli NC maszyny Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="68571-253">Example: NVIDIA Tesla drivers on NC VM pool</span></span>

<span data-ttu-id="68571-254">toorun CUDA aplikacji w puli węzłów Linux NC, należy tooinstall CUDA Toolkit 8.0 w węzłach hello.</span><span class="sxs-lookup"><span data-stu-id="68571-254">toorun CUDA applications on a pool of Linux NC nodes, you need tooinstall CUDA Toolkit 8.0 on hello nodes.</span></span> <span data-ttu-id="68571-255">Witaj Toolkit instaluje hello niezbędne sterowniki NVIDIA tesla — GPU.</span><span class="sxs-lookup"><span data-stu-id="68571-255">hello Toolkit installs hello necessary NVIDIA Tesla GPU drivers.</span></span> <span data-ttu-id="68571-256">Poniżej przedstawiono przykładowe kroki toodeploy niestandardowego obrazu Ubuntu 16.04 LTS z wersji sterowników procesora GPU hello:</span><span class="sxs-lookup"><span data-stu-id="68571-256">Here are sample steps toodeploy a custom Ubuntu 16.04 LTS image with hello GPU drivers:</span></span>

1. <span data-ttu-id="68571-257">Wdrażanie maszyny Wirtualnej platformy Azure NC6 systemem Ubuntu 16.04 LTS.</span><span class="sxs-lookup"><span data-stu-id="68571-257">Deploy an Azure NC6 VM running Ubuntu 16.04 LTS.</span></span> <span data-ttu-id="68571-258">Na przykład utworzyć hello maszyny Wirtualnej w regionie nam Południowa centralnej hello.</span><span class="sxs-lookup"><span data-stu-id="68571-258">For example, create hello VM in hello US South Central region.</span></span> <span data-ttu-id="68571-259">Upewnij się, że tworzenie hello maszyny Wirtualnej z magazynu w warstwie standardowa, i *bez* dyskach zarządzanych.</span><span class="sxs-lookup"><span data-stu-id="68571-259">Make sure that you create hello VM with standard storage, and *without* managed disks.</span></span>
2. <span data-ttu-id="68571-260">Wykonaj hello kroki tooconnect toohello maszyny Wirtualnej i [zainstalować sterowniki CUDA](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms).</span><span class="sxs-lookup"><span data-stu-id="68571-260">Follow hello steps tooconnect toohello VM and [install CUDA drivers](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms).</span></span>
3. <span data-ttu-id="68571-261">Anulowanie zastrzeżenia hello agenta systemu Linux, a następnie przechwycić obraz maszyny Wirtualnej systemu Linux przy użyciu polecenia hello Azure CLI w wersji 1.0.</span><span class="sxs-lookup"><span data-stu-id="68571-261">Deprovision hello Linux agent, and then capture Linux VM image using hello Azure CLI 1.0 commands.</span></span> <span data-ttu-id="68571-262">Aby uzyskać instrukcje, zobacz [Przechwytywanie maszyny wirtualnej systemu Linux działających na platformie Azure](../virtual-machines/linux/capture-image-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="68571-262">For steps, see [Capture a Linux virtual machine running on Azure](../virtual-machines/linux/capture-image-nodejs.md).</span></span> <span data-ttu-id="68571-263">Zanotuj obraz powitania identyfikatora URI.</span><span class="sxs-lookup"><span data-stu-id="68571-263">Make a note of hello image URI.</span></span>
  > [!IMPORTANT]
  > <span data-ttu-id="68571-264">Nie należy używać obrazu hello toocapture poleceń Azure CLI 2.0 partii zadań Azure.</span><span class="sxs-lookup"><span data-stu-id="68571-264">Do not use Azure CLI 2.0 commands toocapture hello image for Azure Batch.</span></span> <span data-ttu-id="68571-265">Obecnie polecenia hello CLI 2.0 przechwytywania maszyny wirtualne utworzone za pomocą dysków zarządzanych.</span><span class="sxs-lookup"><span data-stu-id="68571-265">Currently hello CLI 2.0 commands only capture VMs created using managed disks.</span></span>
  >
4. <span data-ttu-id="68571-266">Utwórz konto wsadowe hello konfiguracji subskrypcji użytkownika, w region, który obsługuje NC maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="68571-266">Create a Batch account, with hello user subscription configuration, in a region that supports NC VMs.</span></span>
5. <span data-ttu-id="68571-267">Za pomocą interfejsów API partii hello lub portalu Azure, tworzenie puli przy użyciu niestandardowego obrazu hello i z hello żądaną liczbę węzłów i skali.</span><span class="sxs-lookup"><span data-stu-id="68571-267">Using hello Batch APIs or Azure portal, create a pool using hello custom image and with hello desired number of nodes and scale.</span></span> <span data-ttu-id="68571-268">Witaj poniższej tabeli przedstawiono przykładowe ustawienia puli hello obrazu:</span><span class="sxs-lookup"><span data-stu-id="68571-268">hello following table shows sample pool settings for hello image:</span></span>

| <span data-ttu-id="68571-269">Ustawienie</span><span class="sxs-lookup"><span data-stu-id="68571-269">Setting</span></span> | <span data-ttu-id="68571-270">Wartość</span><span class="sxs-lookup"><span data-stu-id="68571-270">Value</span></span> |
| ---- | ---- |
| <span data-ttu-id="68571-271">**Typ obrazu**</span><span class="sxs-lookup"><span data-stu-id="68571-271">**Image Type**</span></span> | <span data-ttu-id="68571-272">Obraz niestandardowy</span><span class="sxs-lookup"><span data-stu-id="68571-272">Custom Image</span></span> |
| <span data-ttu-id="68571-273">**Obraz niestandardowy**</span><span class="sxs-lookup"><span data-stu-id="68571-273">**Custom Image**</span></span> | <span data-ttu-id="68571-274">Identyfikator URI w postaci hello obrazu`https://yourstorageaccountdisks.blob.core.windows.net/system/Microsoft.Compute/Images/vhds/MyVHDNamePrefix-osDisk.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.vhd`</span><span class="sxs-lookup"><span data-stu-id="68571-274">Image URI of hello form `https://yourstorageaccountdisks.blob.core.windows.net/system/Microsoft.Compute/Images/vhds/MyVHDNamePrefix-osDisk.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.vhd`</span></span> |
| <span data-ttu-id="68571-275">**Agent węzła jednostki SKU**</span><span class="sxs-lookup"><span data-stu-id="68571-275">**Node agent SKU**</span></span> | <span data-ttu-id="68571-276">Batch.node.ubuntu 16.04</span><span class="sxs-lookup"><span data-stu-id="68571-276">batch.node.ubuntu 16.04</span></span> |
| <span data-ttu-id="68571-277">**Rozmiaru węzła**</span><span class="sxs-lookup"><span data-stu-id="68571-277">**Node size**</span></span> | <span data-ttu-id="68571-278">NC6 Standard</span><span class="sxs-lookup"><span data-stu-id="68571-278">NC6 Standard</span></span> |



## <a name="next-steps"></a><span data-ttu-id="68571-279">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="68571-279">Next steps</span></span>

* <span data-ttu-id="68571-280">toorun zadań MPI w puli partii zadań Azure, zobacz hello [Windows](batch-mpi.md) lub [Linux](https://blogs.technet.microsoft.com/windowshpc/2016/07/20/introducing-mpi-support-for-linux-on-azure-batch/) przykłady.</span><span class="sxs-lookup"><span data-stu-id="68571-280">toorun MPI jobs on an Azure Batch pool, see hello [Windows](batch-mpi.md) or [Linux](https://blogs.technet.microsoft.com/windowshpc/2016/07/20/introducing-mpi-support-for-linux-on-azure-batch/) examples.</span></span>

* <span data-ttu-id="68571-281">Przykłady obciążeń procesora GPU w partii, zobacz hello [stoczni partii](https://github.com/Azure/batch-shipyard/) przepisami.</span><span class="sxs-lookup"><span data-stu-id="68571-281">For examples of GPU workloads on Batch, see hello [Batch Shipyard](https://github.com/Azure/batch-shipyard/) recipes.</span></span>
