---
title: "Zapewnij pule partii zadań Azure z niestandardowymi obrazami | Dokumentacja firmy Microsoft"
description: "Można utworzyć plik wsadowy puli z niestandardowego obrazu, aby udostępnić obliczeniowe węzłów, które zawierają oprogramowanie i dane potrzebne do aplikacji. Niestandardowe obrazy są wydajnym sposobem konfigurowania węzłów obliczeniowych do uruchamiania obciążeń partii."
services: batch
author: tamram
manager: timlt
ms.service: batch
ms.topic: article
ms.date: 08/07/2017
ms.author: tamram
ms.openlocfilehash: 3d655766b4f2a5efb0c8c29ffa81a89f84b3e17c
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/29/2017
---
# <a name="use-a-custom-image-to-create-a-pool-of-virtual-machines"></a><span data-ttu-id="f1186-104">Użyj obrazu niestandardowego do utworzenia puli maszyn wirtualnych</span><span class="sxs-lookup"><span data-stu-id="f1186-104">Use a custom image to create a pool of virtual machines</span></span>

<span data-ttu-id="f1186-105">Podczas tworzenia puli maszyn wirtualnych w partii zadań Azure, należy określić obraz maszyny wirtualnej (VM), który zawiera system operacyjny na każdym węźle obliczeń w puli.</span><span class="sxs-lookup"><span data-stu-id="f1186-105">When you create a pool of virtual machines in Azure Batch, you specify a virtual machine (VM) image that provides the operating system for each compute node in the pool.</span></span> <span data-ttu-id="f1186-106">Za pomocą portalu Azure Marketplace obrazu lub poprzez świadczenie niestandardowego obrazu wirtualnego dysku twardego, które zostały przygotowane, można utworzyć puli maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="f1186-106">You can create a pool of virtual machines either by using an Azure Marketplace image, or by providing a custom VHD image that you have prepared.</span></span> <span data-ttu-id="f1186-107">Podając niestandardowego obrazu, masz kontrolę nad konfiguracji systemu operacyjnego zostanie zainicjowana w każdym węźle obliczeń w chwili.</span><span class="sxs-lookup"><span data-stu-id="f1186-107">When you provide a custom image, you have control over how the operating system is configured at the time that each compute node is provisioned.</span></span> <span data-ttu-id="f1186-108">Obraz niestandardowy może również obejmować aplikacji i danych referencyjnych, które są dostępne w węźle obliczeń, jak jego obsługa została zainicjowana.</span><span class="sxs-lookup"><span data-stu-id="f1186-108">Your custom image can also include applications and reference data that are available on the compute node as soon as it is provisioned.</span></span>

<span data-ttu-id="f1186-109">Przy użyciu niestandardowego obrazu może zaoszczędzić czas podczas pobierania przez pulę węzły obliczeniowe gotowy do uruchomienia obciążenie partii.</span><span class="sxs-lookup"><span data-stu-id="f1186-109">Using a custom image can save you time in getting your pool's compute nodes ready to run your Batch workload.</span></span> <span data-ttu-id="f1186-110">Mimo że zawsze używać obrazu platformy Azure Marketplace i instalować oprogramowanie na każdy węzeł obliczeniowy po została przygotowana, ta metoda może być mniej wydajne niż przy użyciu niestandardowego obrazu.</span><span class="sxs-lookup"><span data-stu-id="f1186-110">While you can always use an Azure Marketplace image and install software on each compute node after it has been provisioned, this approach may be less efficient than using a custom image.</span></span> 

<span data-ttu-id="f1186-111">Niektóre do użycia niestandardowego obrazu, który jest skonfigurowany dla danego scenariusza przyczyny konieczności:</span><span class="sxs-lookup"><span data-stu-id="f1186-111">Some reasons to use a custom image that is configured for your scenario include needing to:</span></span>

- <span data-ttu-id="f1186-112">**Konfigurowanie systemu operacyjnego (OS)** żadnej specjalnej konfiguracji systemu operacyjnego można wykonać na niestandardowego obrazu.</span><span class="sxs-lookup"><span data-stu-id="f1186-112">**Configure the operating system (OS)** Any special configuration of the operating system can be performed on the custom image.</span></span> 
- <span data-ttu-id="f1186-113">**Zainstaluj dużych aplikacji.**</span><span class="sxs-lookup"><span data-stu-id="f1186-113">**Install large applications.**</span></span> <span data-ttu-id="f1186-114">Instalowanie aplikacji na obraz niestandardowy jest bardziej efektywne niż je zainstalować w każdym węźle obliczeń, po jego obsługa została zainicjowana.</span><span class="sxs-lookup"><span data-stu-id="f1186-114">Installing applications on a custom image is more efficient than installing them on each compute node after it is provisioned.</span></span>
- <span data-ttu-id="f1186-115">**Skopiuj znacznej ilości danych.**</span><span class="sxs-lookup"><span data-stu-id="f1186-115">**Copy significant amounts of data.**</span></span> <span data-ttu-id="f1186-116">Jeśli dane są kopiowane do niestandardowego obrazu, tylko musi ma zostać skopiowany na raz, a nie w każdym węźle obliczeń, oszczędzając czas i przepustowości.</span><span class="sxs-lookup"><span data-stu-id="f1186-116">If the data is copied to the custom image, it only needs to be copied once, rather than to each compute node, saving time and bandwidth.</span></span>
- <span data-ttu-id="f1186-117">**Ponowny rozruch maszyny Wirtualnej podczas procesu instalacji.**</span><span class="sxs-lookup"><span data-stu-id="f1186-117">**Reboot the VM during the setup process.**</span></span> <span data-ttu-id="f1186-118">Ponowny rozruch maszyny Wirtualnej może być czasochłonne, zwłaszcza, jeśli liczba węzłów obliczeniowych.</span><span class="sxs-lookup"><span data-stu-id="f1186-118">Rebooting the VM can be a time-consuming process, especially if you have a number of compute nodes.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="f1186-119">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="f1186-119">Prerequisites</span></span>

- <span data-ttu-id="f1186-120">**Konto usługi partia zadań utworzonych za pomocą trybu alokacji puli subskrypcji użytkownika.**</span><span class="sxs-lookup"><span data-stu-id="f1186-120">**A Batch account created with the User Subscription pool allocation mode.**</span></span> <span data-ttu-id="f1186-121">Aby użyć niestandardowego obrazu w celu udostępnienia pule maszyny wirtualnej, należy utworzyć konta partii zadań z subskrypcji użytkownika [Tryb alokacji puli](batch-api-basics.md#pool-allocation-mode).</span><span class="sxs-lookup"><span data-stu-id="f1186-121">To use a custom image to provision Virtual Machine pools, create your Batch account with the User Subscription [pool allocation mode](batch-api-basics.md#pool-allocation-mode).</span></span> <span data-ttu-id="f1186-122">W tym trybie pule usługi Batch są przydzielane do subskrypcji, w której znajduje się konto.</span><span class="sxs-lookup"><span data-stu-id="f1186-122">With this mode, Batch pools are allocated into the subscription where the account resides.</span></span> <span data-ttu-id="f1186-123">Zobacz [konta](batch-api-basics.md#account) sekcji [Programowanie równoległe na dużą skalę obliczeniowe rozwiązań w partii](batch-api-basics.md) informacje na temat ustawiania trybu alokacji puli podczas tworzenia konta usługi partia zadań.</span><span class="sxs-lookup"><span data-stu-id="f1186-123">See the [Account](batch-api-basics.md#account) section in [Develop large-scale parallel compute solutions with Batch](batch-api-basics.md) for information on setting the pool allocation mode when you create a Batch account.</span></span>

- <span data-ttu-id="f1186-124">**Konto usługi Azure Storage.**</span><span class="sxs-lookup"><span data-stu-id="f1186-124">**An Azure Storage account.**</span></span> <span data-ttu-id="f1186-125">Aby utworzyć puli maszyn wirtualnych przy użyciu niestandardowego obrazu, należy standardowe, ogólnego przeznaczenia konta magazynu Azure w tej samej subskrypcji i regionu.</span><span class="sxs-lookup"><span data-stu-id="f1186-125">To create a pool of virtual machines using a custom image, you need a standard, general-purpose Azure Storage account in the same subscription and region.</span></span> <span data-ttu-id="f1186-126">Jeśli tworzysz niestandardowy obraz z maszyny Wirtualnej platformy Azure, obraz zostanie skopiowany do konta magazynu, w którym znajduje się dysk systemu operacyjnego maszyny Wirtualnej, a nie musisz tworzyć oddzielnego konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="f1186-126">If you create a custom image from an Azure VM, then you will copy the image to the storage account where the VM's OS disk resides, and you won't need to create a separate storage account.</span></span> 
    
## <a name="prepare-a-custom-image"></a><span data-ttu-id="f1186-127">Przygotuj obraz niestandardowy</span><span class="sxs-lookup"><span data-stu-id="f1186-127">Prepare a custom image</span></span>

<span data-ttu-id="f1186-128">Aby przygotować obraz niestandardowy do użycia z partii, musi generalize istniejącej instalacji systemu Linux lub Windows.</span><span class="sxs-lookup"><span data-stu-id="f1186-128">To prepare a custom image for use with Batch, you must generalize an existing installation of Linux or Windows.</span></span> <span data-ttu-id="f1186-129">Uogólnianie instalacji systemu operacyjnego usuwa informacje dotyczące komputera.</span><span class="sxs-lookup"><span data-stu-id="f1186-129">Generalizing an operating system installation removes machine-specific information.</span></span> <span data-ttu-id="f1186-130">Wynik jest obraz, który można zainstalować na innych komputerach lub maszynach wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="f1186-130">The result is an image that can be installed on other computers or VMs.</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="f1186-131">Partii nie obsługuje obecnie korzysta z platformy Azure zarządzanych obrazów do obsługi administracyjnej puli.</span><span class="sxs-lookup"><span data-stu-id="f1186-131">Batch does not currently support using Azure managed images to provision a pool.</span></span> <span data-ttu-id="f1186-132">Niestandardowy obraz, który można użyć w celu udostępnienia puli muszą być przechowywane w usłudze Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="f1186-132">The custom image you use to provision a pool must be stored in Azure Storage.</span></span> 
>
> <span data-ttu-id="f1186-133">Podczas przygotowywania obraz niestandardowy, należy pamiętać następujące kwestie:</span><span class="sxs-lookup"><span data-stu-id="f1186-133">When preparing your custom image, keep in mind the following points:</span></span>
> - <span data-ttu-id="f1186-134">Upewnij się, że podstawowy obraz systemu operacyjnego używany do aprowizowania pul usługi Batch nie ma wstępnie zainstalowanych rozszerzeń platformy Azure, takich jak rozszerzenie skryptu niestandardowego.</span><span class="sxs-lookup"><span data-stu-id="f1186-134">Ensure that the base OS image you use to provision your Batch pools does not have any pre-installed Azure extensions, such as the Custom Script extension.</span></span> <span data-ttu-id="f1186-135">Jeśli obraz zawiera wstępnie zainstalowane rozszerzenie, platforma Azure może napotkać problemy podczas wdrażania maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="f1186-135">If the image contains a pre-installed extension, Azure may encounter problems deploying the VM.</span></span>
> - <span data-ttu-id="f1186-136">Upewnij się, że wybrany podstawowy obraz systemu operacyjnego korzysta z domyślnego dysku tymczasowego, ponieważ agent węzłów usługi Batch oczekuje domyślnego dysku tymczasowego.</span><span class="sxs-lookup"><span data-stu-id="f1186-136">Ensure that the base OS image you provide uses the default temp drive, as the Batch node agent currently expects the default temp drive.</span></span>
>
>

<span data-ttu-id="f1186-137">Można użyć dowolnego istniejącego przygotowane obrazu systemu Windows lub Linux jako obraz niestandardowy.</span><span class="sxs-lookup"><span data-stu-id="f1186-137">You can use any existing prepared Windows or Linux image as a custom image.</span></span> <span data-ttu-id="f1186-138">Na przykład, jeśli chcesz użyć lokalnego obrazu, następnie przesłać do konta usługi Azure Storage, który znajduje się w tej samej subskrypcji i regionu co użycie konta usługi partia zadań [AzCopy](../storage/storage-use-azcopy.md) lub innego narzędzia przekazywania.</span><span class="sxs-lookup"><span data-stu-id="f1186-138">For example, if you wish to use a local image, then upload the image to an Azure Storage account that is in the same subscription and region as your Batch account using [AzCopy](../storage/storage-use-azcopy.md) or another upload tool.</span></span>

<span data-ttu-id="f1186-139">Można również przygotować obraz niestandardowy z nowej lub istniejącej maszyny Wirtualnej Azure.</span><span class="sxs-lookup"><span data-stu-id="f1186-139">You can also prepare a custom image from a new or existing Azure VM.</span></span> <span data-ttu-id="f1186-140">W przypadku tworzenia nowej maszyny Wirtualnej, można użyć obrazu portalu Azure Marketplace jako obrazu podstawowego dla niestandardowego obrazu, a następnie dostosować go.</span><span class="sxs-lookup"><span data-stu-id="f1186-140">If you are creating a new VM, you can use an Azure Marketplace image as the base image for your custom image and then customize it.</span></span> <span data-ttu-id="f1186-141">Aby dostosować obraz podstawowy, tworzenie maszyny Wirtualnej platformy Azure i Dodaj do niej aplikacje lub danych.</span><span class="sxs-lookup"><span data-stu-id="f1186-141">To customize the base image, create an Azure VM and add your applications or data to it.</span></span> <span data-ttu-id="f1186-142">Następnie Uogólnij maszyna wirtualna może służyć jako obraz niestandardowy i zapisać go do magazynu Azure.</span><span class="sxs-lookup"><span data-stu-id="f1186-142">Then generalize the VM to serve as your custom image and save it to Azure Storage.</span></span> 

<span data-ttu-id="f1186-143">Aby przygotować obraz niestandardowy z maszyny Wirtualnej platformy Azure, wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="f1186-143">To prepare a custom image from an Azure VM, follow these steps:</span></span>

1. <span data-ttu-id="f1186-144">Utwórz **niezarządzane** maszyny Wirtualnej platformy Azure z obrazu w portalu Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="f1186-144">Create an **unmanaged** Azure VM from an Azure Marketplace image.</span></span> <span data-ttu-id="f1186-145">Azure Marketplace zawiera obrazy dla obu [Windows](../virtual-machines/windows/quick-create-portal.md) i [Linux](../virtual-machines/linux/quick-create-portal.md).</span><span class="sxs-lookup"><span data-stu-id="f1186-145">Azure Marketplace includes images for both [Windows](../virtual-machines/windows/quick-create-portal.md) and [Linux](../virtual-machines/linux/quick-create-portal.md).</span></span>
    
    <span data-ttu-id="f1186-146">W kroku 3 procesu tworzenia maszyny Wirtualnej, upewnij się, że wybrano **nr** dla **magazynu: Użyj zarządzanych dysków** opcji.</span><span class="sxs-lookup"><span data-stu-id="f1186-146">On step 3 of the VM creation process, make sure that you select **No** for **Storage: Use Managed Disks** option.</span></span> <span data-ttu-id="f1186-147">Również Zanotuj nazwę konta magazynu dla dysku systemu operacyjnego maszyny Wirtualnej, ponieważ to konto magazynu jest również, gdzie Azure zapisze niestandardowego obrazu:</span><span class="sxs-lookup"><span data-stu-id="f1186-147">Also take note of the storage account name for the VM's OS disk, as this storage account is also where Azure will save your custom image:</span></span>

    ![Tworzenie niezarządzanej maszyny Wirtualnej i zanotuj nazwę konta magazynu](media/batch-custom-images/vm-create-storage.png)
 
2. <span data-ttu-id="f1186-149">Ukończenie procesu tworzenia maszyny Wirtualnej, a następnie zaczekaj na jej przydzielone przez platformę Azure.</span><span class="sxs-lookup"><span data-stu-id="f1186-149">Complete the process of creating your VM, and wait for it to be allocated by Azure.</span></span> <span data-ttu-id="f1186-150">Oto obrazu, który zawiera Maszynę wirtualną w portalu Azure w stanie uruchomienia:</span><span class="sxs-lookup"><span data-stu-id="f1186-150">Here's an image that shows a VM in the Azure portal in the running state:</span></span>

    ![Utwórz maszynę Wirtualną z obrazu witryny marketplace](media/batch-custom-images/vm-status-running.png)

3. <span data-ttu-id="f1186-152">Gdy maszyna wirtualna jest uruchomiona, się z nim połączyć za pośrednictwem protokołu RDP (dla systemu Windows) lub protokołu SSH (dla systemu Linux).</span><span class="sxs-lookup"><span data-stu-id="f1186-152">Once the VM is running, connect to it via RDP (for Windows) or SSH (for Linux).</span></span> <span data-ttu-id="f1186-153">Zainstaluj oprogramowanie niezbędne skopiować żądanych danych, a następnie Uogólnij maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="f1186-153">Install any necessary software or copy desired data, and then generalize the VM.</span></span> <span data-ttu-id="f1186-154">Wykonaj kroki opisane w [Generalize maszyny Wirtualnej](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized.md#generalize-the-vm).</span><span class="sxs-lookup"><span data-stu-id="f1186-154">Follow the steps described in [Generalize the VM](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized.md#generalize-the-vm).</span></span> 
   
4. <span data-ttu-id="f1186-155">Wykonaj kroki, aby [zalogować się do programu Azure PowerShell](../virtual-machines/windows/sa-copy-generalized.md#log-in-to-azure-powershell).</span><span class="sxs-lookup"><span data-stu-id="f1186-155">Follow the steps to [Log in to Azure PowerShell](../virtual-machines/windows/sa-copy-generalized.md#log-in-to-azure-powershell).</span></span> <span data-ttu-id="f1186-156">Aby zainstalować program Azure PowerShell, zobacz [Omówienie programu Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azurermps-4.2.0).</span><span class="sxs-lookup"><span data-stu-id="f1186-156">To install Azure PowerShell, see [Overview of Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azurermps-4.2.0).</span></span> 

5. <span data-ttu-id="f1186-157">Następnie wykonaj kroki, aby [Cofnij Przydział maszyny Wirtualnej i ustawić stan na ogólnych](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized#deallocate-the-vm-and-set-the-state-to-generalized).</span><span class="sxs-lookup"><span data-stu-id="f1186-157">Next, follow the steps to [Deallocate the VM and set the state to generalized](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized#deallocate-the-vm-and-set-the-state-to-generalized).</span></span> 

    <span data-ttu-id="f1186-158">W portalu Azure należy zauważyć, że cofnięciu przydziału maszyny Wirtualnej:</span><span class="sxs-lookup"><span data-stu-id="f1186-158">In the Azure portal, notice that the VM is deallocated:</span></span>

    ![Upewnij się, że cofnięciu przydziału maszyny Wirtualnej](media/batch-custom-images/vm-status-deallocated.png)

6.  <span data-ttu-id="f1186-160">Utwórz i Zapisz obraz maszyny Wirtualnej za pomocą usługi Azure Storage [AzureRmVMImage Zapisz](https://docs.microsoft.com/powershell/module/azurerm.compute/save-azurermvmimage) polecenia cmdlet programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f1186-160">Create and save the VM image to Azure Storage using the [Save-AzureRmVMImage](https://docs.microsoft.com/powershell/module/azurerm.compute/save-azurermvmimage) PowerShell cmdlet.</span></span> <span data-ttu-id="f1186-161">Wykonaj instrukcje opisane w [utworzyć obraz](../virtual-machines/windows/sa-copy-generalized.md#create-the-image).</span><span class="sxs-lookup"><span data-stu-id="f1186-161">Follow the instructions described in [Create the image](../virtual-machines/windows/sa-copy-generalized.md#create-the-image).</span></span>
    
    <span data-ttu-id="f1186-162">Konto magazynu Azure utworzona podczas tworzenia maszyny Wirtualnej, jak pokazano w kroku 1 tej procedury jest zapisywany obraz maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="f1186-162">The VM image is saved to the Azure Storage account created when the VM was created, as shown in step 1 of this procedure.</span></span> <span data-ttu-id="f1186-163">Zapisz AzureRmVMImage polecenie cmdlet zapisuje obraz do **systemu** kontenera na tym koncie magazynu.</span><span class="sxs-lookup"><span data-stu-id="f1186-163">the Save-AzureRmVMImage cmdlet saves the image to the **system** container in that storage account.</span></span> <span data-ttu-id="f1186-164">`-DestinationContainername` Katalogu wirtualnego w ramach nazwy parametrów **systemu** kontenera.</span><span class="sxs-lookup"><span data-stu-id="f1186-164">The `-DestinationContainername` parameter names a virtual directory within the **system** container.</span></span> <span data-ttu-id="f1186-165">`-VHDNamePrefix` Parametr określa prefiks nazwy obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="f1186-165">The `-VHDNamePrefix` parameter specifies a prefix for the blob name.</span></span> <span data-ttu-id="f1186-166">Ten prefiks dołączany na początku nazwy obiektu blob z łącznikiem.</span><span class="sxs-lookup"><span data-stu-id="f1186-166">This prefix is prepended to the blob name with a hyphen.</span></span> 

    <span data-ttu-id="f1186-167">Na przykład załóżmy, że wywołanie AzureRmVMImage Zapisz z następującymi parametrami:</span><span class="sxs-lookup"><span data-stu-id="f1186-167">For example, suppose you call Save-AzureRmVMImage with the following parameters:</span></span>  

        Save-AzureRmVMImage -ResourceGroupName sample-resource-group -Name vm-custom-image -DestinationContainerName batchimages -VHDNamePrefix custom -Path C:\Temp\Images\vm-custom-image.json

    <span data-ttu-id="f1186-168">Wynikowy obraz jest zapisany na lokalizację i nazwę obiektu blob, pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="f1186-168">The resulting image is saved to the location and blob name shown here:</span></span>

    ![Lokalizacja zapisanego wirtualnego dysku twardego w kontenerze systemu](media/batch-custom-images/vhd-in-vm-storage-account.png)

    > [!NOTE]
    > <span data-ttu-id="f1186-170">Maszyna wirtualna platformy Azure niezarządzane tworzy kilka kont magazynu do różnych celów.</span><span class="sxs-lookup"><span data-stu-id="f1186-170">An Azure unmanaged VM creates several storage accounts for different purposes.</span></span> <span data-ttu-id="f1186-171">Jeśli nie Zanotuj nazwę kontenera magazynu dla dysku systemu operacyjnego, podczas tworzenia maszyny Wirtualnej, następnie znajdź kontem powiązanym magazynie, które zawiera **systemu** kontenera.</span><span class="sxs-lookup"><span data-stu-id="f1186-171">If you did not note the name of the storage container for the OS disk when the VM was created, then find the associated storage account that contains the **system** container.</span></span> <span data-ttu-id="f1186-172">Przejdź do **systemu** kontener, aby znaleźć niestandardowego obrazu przy użyciu wartości określone dla **AzureRmVMImage Zapisz** polecenia.</span><span class="sxs-lookup"><span data-stu-id="f1186-172">Navigate through the **system** container to find the custom image using the values you specified for the **Save-AzureRmVMImage** command.</span></span>

## <a name="create-a-pool-from-a-custom-image-in-the-portal"></a><span data-ttu-id="f1186-173">Utwórz pulę z niestandardowego obrazu w portalu</span><span class="sxs-lookup"><span data-stu-id="f1186-173">Create a pool from a custom image in the portal</span></span>

<span data-ttu-id="f1186-174">Po zapisaniu niestandardowego obrazu i znasz lokalizacji, można utworzyć puli partii z tego obrazu.</span><span class="sxs-lookup"><span data-stu-id="f1186-174">Once you have saved your custom image and you know its location, you can create a Batch pool from that image.</span></span> <span data-ttu-id="f1186-175">Wykonaj następujące kroki, aby utworzyć pulę z portalu Azure:</span><span class="sxs-lookup"><span data-stu-id="f1186-175">Follow these steps to create a pool from the Azure portal:</span></span>

1. <span data-ttu-id="f1186-176">W witrynie Azure Portal przejdź do swojego konta usługi Batch.</span><span class="sxs-lookup"><span data-stu-id="f1186-176">Navigate to your Batch account in the Azure portal.</span></span> <span data-ttu-id="f1186-177">To konto musi być w tej samej subskrypcji i regionu co konto magazynu zawierające niestandardowego obrazu.</span><span class="sxs-lookup"><span data-stu-id="f1186-177">This account must be in the same subscription and region as the storage account containing the custom image.</span></span> 
2. <span data-ttu-id="f1186-178">W **ustawienia** oknie po lewej stronie, wybierz opcję **pule** elementu menu.</span><span class="sxs-lookup"><span data-stu-id="f1186-178">In the **Settings** window on the left, select the **Pools** menu item.</span></span>
3. <span data-ttu-id="f1186-179">W **pule** wybierz **Dodaj** polecenia.</span><span class="sxs-lookup"><span data-stu-id="f1186-179">In the **Pools** window, select the **Add** command.</span></span>
4. <span data-ttu-id="f1186-180">Na **Dodaj pulę,** wybierz **niestandardowego obrazu (Linux/system Windows)** z **typ obrazu** listy rozwijanej.</span><span class="sxs-lookup"><span data-stu-id="f1186-180">On the **Add Pool** window, select **Custom Image (Linux/Windows)** from the **Image Type** dropdown.</span></span> <span data-ttu-id="f1186-181">Portal zawiera selektor **Obraz niestandardowy**.</span><span class="sxs-lookup"><span data-stu-id="f1186-181">The portal displays the **Custom Image** picker.</span></span> <span data-ttu-id="f1186-182">Przejdź do konta magazynu, w którym znajduje się obraz niestandardowy, a następnie wybierz żądany dysk VHD z kontenera.</span><span class="sxs-lookup"><span data-stu-id="f1186-182">Navigate to the storage account where your custom image is located, and select the desired VHD from the container.</span></span> 
5. <span data-ttu-id="f1186-183">Wybierz poprawny **wydawcy lub oferta/jednostki Sku** dla Twojego niestandardowego pliku VHD.</span><span class="sxs-lookup"><span data-stu-id="f1186-183">Select the correct **Publisher/Offer/Sku** for your custom VHD.</span></span>
6. <span data-ttu-id="f1186-184">Określ pozostałe wymagane ustawienia, w tym **rozmiaru węzła**, **Target dedykowanych węzłów**, i **niski priorytet węzłów**, a także wszelkie potrzebne ustawienia opcjonalne.</span><span class="sxs-lookup"><span data-stu-id="f1186-184">Specify the remaining required settings, including the **Node size**, **Target dedicated nodes**, and **Low priority nodes**, as well as any desired optional settings.</span></span>

    <span data-ttu-id="f1186-185">Na przykład w przypadku obraz niestandardowy Microsoft Windows Server Datacenter 2016 **Dodaj pulę,** zostanie wyświetlone okno, jak pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="f1186-185">For example, for a Microsoft Windows Server Datacenter 2016 custom image, the **Add Pool** window appears as shown here:</span></span>

    ![Dodaj pulę z niestandardowego obrazu systemu Windows](media/batch-custom-images/add-pool-custom-image.png)
  
<span data-ttu-id="f1186-187">Aby sprawdzić, czy istniejącej puli jest oparta na niestandardowego obrazu, zobacz **systemu operacyjnego** właściwości w sekcji Podsumowanie zasobów z **puli** okna.</span><span class="sxs-lookup"><span data-stu-id="f1186-187">To check whether an existing pool is based on a custom image, see the **Operating System** property in the resource summary section of the **Pool** window.</span></span> <span data-ttu-id="f1186-188">Jeśli w puli została utworzona z obrazu niestandardowego, jest równa **niestandardowego obrazu maszyny Wirtualnej**.</span><span class="sxs-lookup"><span data-stu-id="f1186-188">If the pool was created from a custom image, it is set to **Custom VM Image**.</span></span>

<span data-ttu-id="f1186-189">Wszystkie dyski VHD niestandardowe skojarzone z pulą są wyświetlane w puli **właściwości** okna.</span><span class="sxs-lookup"><span data-stu-id="f1186-189">All custom VHDs associated with a pool are displayed on the pool's **Properties** window.</span></span>
 
## <a name="next-steps"></a><span data-ttu-id="f1186-190">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="f1186-190">Next steps</span></span>

- <span data-ttu-id="f1186-191">Aby uzyskać szczegółowe informacje o partii, zobacz [Programowanie równoległe na dużą skalę obliczeniowe rozwiązań w partii](batch-api-basics.md).</span><span class="sxs-lookup"><span data-stu-id="f1186-191">For an in-depth overview of Batch, see [Develop large-scale parallel compute solutions with Batch](batch-api-basics.md).</span></span>
- <span data-ttu-id="f1186-192">Aby uzyskać informacje dotyczące tworzenia konta usługi partia zadań, zobacz [Tworzenie konta usługi partia zadań za pomocą portalu Azure](batch-account-create-portal.md).</span><span class="sxs-lookup"><span data-stu-id="f1186-192">For information about creating a Batch account, see [Create a Batch account with the Azure portal](batch-account-create-portal.md).</span></span>