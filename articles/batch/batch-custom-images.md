---
title: "aaaProvision partii zadań Azure pul z niestandardowymi obrazami | Dokumentacja firmy Microsoft"
description: "Można utworzyć partię obliczeniowe puli z tooprovision niestandardowego obrazu węzłów, które zawierają hello oprogramowania i danych aplikacji. Niestandardowe obrazy są efektywną tooconfigure obliczeniowe toorun węzłów obciążeń partii."
services: batch
author: tamram
manager: timlt
ms.service: batch
ms.topic: article
ms.date: 08/07/2017
ms.author: tamram
ms.openlocfilehash: 5cb698ee90f7d3ec9ffe69fa4dc602132c3f7569
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="use-a-custom-image-toocreate-a-pool-of-virtual-machines"></a><span data-ttu-id="99bc3-104">Użyć niestandardowego obrazu toocreate puli maszyn wirtualnych</span><span class="sxs-lookup"><span data-stu-id="99bc3-104">Use a custom image toocreate a pool of virtual machines</span></span>

<span data-ttu-id="99bc3-105">Podczas tworzenia puli maszyn wirtualnych w partii zadań Azure, należy określić obraz maszyny wirtualnej (VM), który udostępnia hello systemu operacyjnego w każdym węźle obliczeń w puli hello.</span><span class="sxs-lookup"><span data-stu-id="99bc3-105">When you create a pool of virtual machines in Azure Batch, you specify a virtual machine (VM) image that provides hello operating system for each compute node in hello pool.</span></span> <span data-ttu-id="99bc3-106">Za pomocą portalu Azure Marketplace obrazu lub poprzez świadczenie niestandardowego obrazu wirtualnego dysku twardego, które zostały przygotowane, można utworzyć puli maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="99bc3-106">You can create a pool of virtual machines either by using an Azure Marketplace image, or by providing a custom VHD image that you have prepared.</span></span> <span data-ttu-id="99bc3-107">Podając niestandardowego obrazu, masz kontrolę nad konfiguracji systemu operacyjnego hello w czasie hello, że każdy węzeł obliczeniowy zostanie zainicjowana.</span><span class="sxs-lookup"><span data-stu-id="99bc3-107">When you provide a custom image, you have control over how hello operating system is configured at hello time that each compute node is provisioned.</span></span> <span data-ttu-id="99bc3-108">Obraz niestandardowy mogą również obejmować aplikacji i danych referencyjnych, które są dostępne na powitania węźle obliczeń, jak jego obsługa została zainicjowana.</span><span class="sxs-lookup"><span data-stu-id="99bc3-108">Your custom image can also include applications and reference data that are available on hello compute node as soon as it is provisioned.</span></span>

<span data-ttu-id="99bc3-109">Przy użyciu niestandardowego obrazu może zaoszczędzić czas podczas pobierania węzłów obliczeniowych przez pulę gotowe toorun obciążenie partii.</span><span class="sxs-lookup"><span data-stu-id="99bc3-109">Using a custom image can save you time in getting your pool's compute nodes ready toorun your Batch workload.</span></span> <span data-ttu-id="99bc3-110">Mimo że zawsze używać obrazu platformy Azure Marketplace i instalować oprogramowanie na każdy węzeł obliczeniowy po została przygotowana, ta metoda może być mniej wydajne niż przy użyciu niestandardowego obrazu.</span><span class="sxs-lookup"><span data-stu-id="99bc3-110">While you can always use an Azure Marketplace image and install software on each compute node after it has been provisioned, this approach may be less efficient than using a custom image.</span></span> 

<span data-ttu-id="99bc3-111">Niektóre przyczyny toouse niestandardowego obrazu, który jest skonfigurowany dla danego scenariusza obejmują konieczności:</span><span class="sxs-lookup"><span data-stu-id="99bc3-111">Some reasons toouse a custom image that is configured for your scenario include needing to:</span></span>

- <span data-ttu-id="99bc3-112">**Konfigurowanie systemu operacyjnego hello (systemu operacyjnego)** żadnej specjalnej konfiguracji systemu operacyjnego hello można wykonać na powitania niestandardowego obrazu.</span><span class="sxs-lookup"><span data-stu-id="99bc3-112">**Configure hello operating system (OS)** Any special configuration of hello operating system can be performed on hello custom image.</span></span> 
- <span data-ttu-id="99bc3-113">**Zainstaluj dużych aplikacji.**</span><span class="sxs-lookup"><span data-stu-id="99bc3-113">**Install large applications.**</span></span> <span data-ttu-id="99bc3-114">Instalowanie aplikacji na obraz niestandardowy jest bardziej efektywne niż je zainstalować w każdym węźle obliczeń, po jego obsługa została zainicjowana.</span><span class="sxs-lookup"><span data-stu-id="99bc3-114">Installing applications on a custom image is more efficient than installing them on each compute node after it is provisioned.</span></span>
- <span data-ttu-id="99bc3-115">**Skopiuj znacznej ilości danych.**</span><span class="sxs-lookup"><span data-stu-id="99bc3-115">**Copy significant amounts of data.**</span></span> <span data-ttu-id="99bc3-116">Jeśli hello dane są kopiowane toohello niestandardowego obrazu, musi tylko toobe skopiować jeden raz, zamiast tooeach węźle obliczeń, oszczędzając czas i przepustowości.</span><span class="sxs-lookup"><span data-stu-id="99bc3-116">If hello data is copied toohello custom image, it only needs toobe copied once, rather than tooeach compute node, saving time and bandwidth.</span></span>
- <span data-ttu-id="99bc3-117">**Podczas procesu konfiguracji hello ponowny rozruch hello maszyny Wirtualnej.**</span><span class="sxs-lookup"><span data-stu-id="99bc3-117">**Reboot hello VM during hello setup process.**</span></span> <span data-ttu-id="99bc3-118">Witaj ponowny rozruch maszyny Wirtualnej może być czasochłonne, zwłaszcza, jeśli liczba węzłów obliczeniowych.</span><span class="sxs-lookup"><span data-stu-id="99bc3-118">Rebooting hello VM can be a time-consuming process, especially if you have a number of compute nodes.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="99bc3-119">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="99bc3-119">Prerequisites</span></span>

- <span data-ttu-id="99bc3-120">**Konto usługi partia zadań utworzonych za pomocą Tryb alokacji puli subskrypcji użytkownika hello.**</span><span class="sxs-lookup"><span data-stu-id="99bc3-120">**A Batch account created with hello User Subscription pool allocation mode.**</span></span> <span data-ttu-id="99bc3-121">toouse pule maszyny wirtualnej tooprovision niestandardowego obrazu, tworzenie konta partii zadań z hello subskrypcji użytkownika [Tryb alokacji puli](batch-api-basics.md#pool-allocation-mode).</span><span class="sxs-lookup"><span data-stu-id="99bc3-121">toouse a custom image tooprovision Virtual Machine pools, create your Batch account with hello User Subscription [pool allocation mode](batch-api-basics.md#pool-allocation-mode).</span></span> <span data-ttu-id="99bc3-122">W tym trybie partii pule są przydzielone do subskrypcji hello, w którym znajduje się konto hello.</span><span class="sxs-lookup"><span data-stu-id="99bc3-122">With this mode, Batch pools are allocated into hello subscription where hello account resides.</span></span> <span data-ttu-id="99bc3-123">Zobacz hello [konta](batch-api-basics.md#account) sekcji [Programowanie równoległe na dużą skalę obliczeniowe rozwiązań w partii](batch-api-basics.md) informacje na temat ustawiania trybu alokacji puli hello podczas tworzenia konta usługi partia zadań.</span><span class="sxs-lookup"><span data-stu-id="99bc3-123">See hello [Account](batch-api-basics.md#account) section in [Develop large-scale parallel compute solutions with Batch](batch-api-basics.md) for information on setting hello pool allocation mode when you create a Batch account.</span></span>

- <span data-ttu-id="99bc3-124">**Konto usługi Azure Storage.**</span><span class="sxs-lookup"><span data-stu-id="99bc3-124">**An Azure Storage account.**</span></span> <span data-ttu-id="99bc3-125">toocreate puli maszyn wirtualnych przy użyciu niestandardowego obrazu należy standardowe, ogólnego przeznaczenia konta magazynu Azure w hello tej samej subskrypcji i regionu.</span><span class="sxs-lookup"><span data-stu-id="99bc3-125">toocreate a pool of virtual machines using a custom image, you need a standard, general-purpose Azure Storage account in hello same subscription and region.</span></span> <span data-ttu-id="99bc3-126">Jeśli tworzysz niestandardowy obraz z maszyny Wirtualnej platformy Azure, zostanie skopiowany hello toohello konto magazynu obrazu gdzie znajduje się dysk systemu operacyjnego hello maszyny Wirtualnej, a toocreate oddzielnego konta magazynu nie są wymagane.</span><span class="sxs-lookup"><span data-stu-id="99bc3-126">If you create a custom image from an Azure VM, then you will copy hello image toohello storage account where hello VM's OS disk resides, and you won't need toocreate a separate storage account.</span></span> 
    
## <a name="prepare-a-custom-image"></a><span data-ttu-id="99bc3-127">Przygotuj obraz niestandardowy</span><span class="sxs-lookup"><span data-stu-id="99bc3-127">Prepare a custom image</span></span>

<span data-ttu-id="99bc3-128">tooprepare niestandardowego obrazu do użycia z partii musi generalize istniejącej instalacji systemu Linux lub Windows.</span><span class="sxs-lookup"><span data-stu-id="99bc3-128">tooprepare a custom image for use with Batch, you must generalize an existing installation of Linux or Windows.</span></span> <span data-ttu-id="99bc3-129">Uogólnianie instalacji systemu operacyjnego usuwa informacje dotyczące komputera.</span><span class="sxs-lookup"><span data-stu-id="99bc3-129">Generalizing an operating system installation removes machine-specific information.</span></span> <span data-ttu-id="99bc3-130">wynik Hello jest obraz, który można zainstalować na innych komputerach lub maszynach wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="99bc3-130">hello result is an image that can be installed on other computers or VMs.</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="99bc3-131">Partii nie obsługuje obecnie korzysta z platformy Azure zarządzanych obrazów tooprovision puli.</span><span class="sxs-lookup"><span data-stu-id="99bc3-131">Batch does not currently support using Azure managed images tooprovision a pool.</span></span> <span data-ttu-id="99bc3-132">niestandardowy obraz powitania Użyj tooprovision puli musi być przechowywany w usłudze Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="99bc3-132">hello custom image you use tooprovision a pool must be stored in Azure Storage.</span></span> 
>
> <span data-ttu-id="99bc3-133">Podczas przygotowywania obraz niestandardowy, należy pamiętać hello następujące punkty:</span><span class="sxs-lookup"><span data-stu-id="99bc3-133">When preparing your custom image, keep in mind hello following points:</span></span>
> - <span data-ttu-id="99bc3-134">Upewnij się, obraz systemu operacyjnego podstawowej tego hello Użyj tooprovision Twojego pule partii jest nie ma wstępnie zainstalowanych rozszerzeń Azure, takich jak hello rozszerzenia niestandardowego skryptu.</span><span class="sxs-lookup"><span data-stu-id="99bc3-134">Ensure that hello base OS image you use tooprovision your Batch pools does not have any pre-installed Azure extensions, such as hello Custom Script extension.</span></span> <span data-ttu-id="99bc3-135">Jeśli obraz powitania zawiera wstępnie zainstalowane rozszerzenia, Azure mogą wystąpić problemy, wdrażanie hello maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="99bc3-135">If hello image contains a pre-installed extension, Azure may encounter problems deploying hello VM.</span></span>
> - <span data-ttu-id="99bc3-136">Upewnij się, tego hello podstawowy obraz systemu operacyjnego zapewniają się, że używa hello domyślnym tymczasowego dysku, jak hello agenta węzła partii aktualnie oczekuje hello domyślnym tymczasowego dysku.</span><span class="sxs-lookup"><span data-stu-id="99bc3-136">Ensure that hello base OS image you provide uses hello default temp drive, as hello Batch node agent currently expects hello default temp drive.</span></span>
>
>

<span data-ttu-id="99bc3-137">Można użyć dowolnego istniejącego przygotowane obrazu systemu Windows lub Linux jako obraz niestandardowy.</span><span class="sxs-lookup"><span data-stu-id="99bc3-137">You can use any existing prepared Windows or Linux image as a custom image.</span></span> <span data-ttu-id="99bc3-138">Na przykład, jeśli chcesz toouse obraz lokalnych, Przekaż konta Azure Storage tooan obrazu hello, który znajduje się w hello tej samej subskrypcji i regionu co użycie konta usługi partia zadań [AzCopy](../storage/storage-use-azcopy.md) lub innego narzędzia przekazywania.</span><span class="sxs-lookup"><span data-stu-id="99bc3-138">For example, if you wish toouse a local image, then upload hello image tooan Azure Storage account that is in hello same subscription and region as your Batch account using [AzCopy](../storage/storage-use-azcopy.md) or another upload tool.</span></span>

<span data-ttu-id="99bc3-139">Można również przygotować obraz niestandardowy z nowej lub istniejącej maszyny Wirtualnej Azure.</span><span class="sxs-lookup"><span data-stu-id="99bc3-139">You can also prepare a custom image from a new or existing Azure VM.</span></span> <span data-ttu-id="99bc3-140">W przypadku tworzenia nowej maszyny Wirtualnej, można użyć obrazu portalu Azure Marketplace jako obrazu podstawowego hello niestandardowego obrazu, a następnie dostosować go.</span><span class="sxs-lookup"><span data-stu-id="99bc3-140">If you are creating a new VM, you can use an Azure Marketplace image as hello base image for your custom image and then customize it.</span></span> <span data-ttu-id="99bc3-141">podstawowy obraz powitania toocustomize utworzyć maszyny Wirtualnej platformy Azure i dodać aplikacje lub tooit danych.</span><span class="sxs-lookup"><span data-stu-id="99bc3-141">toocustomize hello base image, create an Azure VM and add your applications or data tooit.</span></span> <span data-ttu-id="99bc3-142">Następnie generalize hello tooserve maszyny Wirtualnej jako obraz niestandardowy i zapisać go tooAzure magazynu.</span><span class="sxs-lookup"><span data-stu-id="99bc3-142">Then generalize hello VM tooserve as your custom image and save it tooAzure Storage.</span></span> 

<span data-ttu-id="99bc3-143">tooprepare niestandardowego obrazu z maszyny Wirtualnej platformy Azure, wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="99bc3-143">tooprepare a custom image from an Azure VM, follow these steps:</span></span>

1. <span data-ttu-id="99bc3-144">Utwórz **niezarządzane** maszyny Wirtualnej platformy Azure z obrazu w portalu Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="99bc3-144">Create an **unmanaged** Azure VM from an Azure Marketplace image.</span></span> <span data-ttu-id="99bc3-145">Azure Marketplace zawiera obrazy dla obu [Windows](../virtual-machines/windows/quick-create-portal.md) i [Linux](../virtual-machines/linux/quick-create-portal.md).</span><span class="sxs-lookup"><span data-stu-id="99bc3-145">Azure Marketplace includes images for both [Windows](../virtual-machines/windows/quick-create-portal.md) and [Linux](../virtual-machines/linux/quick-create-portal.md).</span></span>
    
    <span data-ttu-id="99bc3-146">W kroku 3 hello proces tworzenia maszyny Wirtualnej, upewnij się, że wybrano **nr** dla **magazynu: Użyj zarządzanych dysków** opcji.</span><span class="sxs-lookup"><span data-stu-id="99bc3-146">On step 3 of hello VM creation process, make sure that you select **No** for **Storage: Use Managed Disks** option.</span></span> <span data-ttu-id="99bc3-147">Również Zanotuj hello nazwy konta magazynu dla dysku systemu operacyjnego hello maszyny Wirtualnej, ponieważ to konto magazynu jest również, gdzie Azure zapisze niestandardowego obrazu:</span><span class="sxs-lookup"><span data-stu-id="99bc3-147">Also take note of hello storage account name for hello VM's OS disk, as this storage account is also where Azure will save your custom image:</span></span>

    ![Tworzenie maszyny Wirtualnej niezarządzanej i nazwy konta magazynu hello Uwaga](media/batch-custom-images/vm-create-storage.png)
 
2. <span data-ttu-id="99bc3-149">Ukończyć powitalnych proces tworzenia maszyny Wirtualnej, a następnie zaczekaj na jej toobe przydzielone przez platformę Azure.</span><span class="sxs-lookup"><span data-stu-id="99bc3-149">Complete hello process of creating your VM, and wait for it toobe allocated by Azure.</span></span> <span data-ttu-id="99bc3-150">Oto obrazu, który zawiera Maszynę wirtualną w hello portalu Azure w hello uruchomiona:</span><span class="sxs-lookup"><span data-stu-id="99bc3-150">Here's an image that shows a VM in hello Azure portal in hello running state:</span></span>

    ![Utwórz maszynę Wirtualną z obrazu witryny marketplace](media/batch-custom-images/vm-status-running.png)

3. <span data-ttu-id="99bc3-152">Po uruchomieniu hello maszyny Wirtualnej, Połącz tooit za pośrednictwem protokołu RDP (dla systemu Windows) lub protokołu SSH (dla systemu Linux).</span><span class="sxs-lookup"><span data-stu-id="99bc3-152">Once hello VM is running, connect tooit via RDP (for Windows) or SSH (for Linux).</span></span> <span data-ttu-id="99bc3-153">Zainstaluj oprogramowanie niezbędne skopiować żądanych danych, a następnie Uogólnij hello maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="99bc3-153">Install any necessary software or copy desired data, and then generalize hello VM.</span></span> <span data-ttu-id="99bc3-154">Wykonaj kroki hello opisanego w [Generalize hello wirtualna](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized.md#generalize-the-vm).</span><span class="sxs-lookup"><span data-stu-id="99bc3-154">Follow hello steps described in [Generalize hello VM](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized.md#generalize-the-vm).</span></span> 
   
4. <span data-ttu-id="99bc3-155">Wykonaj kroki hello zbyt[Zaloguj tooAzure PowerShell](../virtual-machines/windows/sa-copy-generalized.md#log-in-to-azure-powershell).</span><span class="sxs-lookup"><span data-stu-id="99bc3-155">Follow hello steps too[Log in tooAzure PowerShell](../virtual-machines/windows/sa-copy-generalized.md#log-in-to-azure-powershell).</span></span> <span data-ttu-id="99bc3-156">tooinstall programu Azure PowerShell, zobacz [Omówienie programu Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azurermps-4.2.0).</span><span class="sxs-lookup"><span data-stu-id="99bc3-156">tooinstall Azure PowerShell, see [Overview of Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azurermps-4.2.0).</span></span> 

5. <span data-ttu-id="99bc3-157">Następnie wykonaj kroki hello zbyt[hello Deallocate maszyny Wirtualnej i zestaw hello stanu toogeneralized](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized#deallocate-the-vm-and-set-the-state-to-generalized).</span><span class="sxs-lookup"><span data-stu-id="99bc3-157">Next, follow hello steps too[Deallocate hello VM and set hello state toogeneralized](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized#deallocate-the-vm-and-set-the-state-to-generalized).</span></span> 

    <span data-ttu-id="99bc3-158">W portalu Azure hello Zwróć uwagę, że powitalne cofnięciu przydziału maszyny Wirtualnej:</span><span class="sxs-lookup"><span data-stu-id="99bc3-158">In hello Azure portal, notice that hello VM is deallocated:</span></span>

    ![Upewnij się, że powitalne cofnięciu przydziału maszyny Wirtualnej](media/batch-custom-images/vm-status-deallocated.png)

6.  <span data-ttu-id="99bc3-160">Tworzenie i zapisywanie tooAzure obrazu maszyny Wirtualnej hello magazynu przy użyciu hello [AzureRmVMImage Zapisz](https://docs.microsoft.com/powershell/module/azurerm.compute/save-azurermvmimage) polecenia cmdlet programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="99bc3-160">Create and save hello VM image tooAzure Storage using hello [Save-AzureRmVMImage](https://docs.microsoft.com/powershell/module/azurerm.compute/save-azurermvmimage) PowerShell cmdlet.</span></span> <span data-ttu-id="99bc3-161">Postępuj zgodnie z instrukcjami hello opisane w [Utwórz obraz powitania](../virtual-machines/windows/sa-copy-generalized.md#create-the-image).</span><span class="sxs-lookup"><span data-stu-id="99bc3-161">Follow hello instructions described in [Create hello image](../virtual-machines/windows/sa-copy-generalized.md#create-the-image).</span></span>
    
    <span data-ttu-id="99bc3-162">Witaj maszyny Wirtualnej jest zapisywany obraz konta usługi Magazyn Azure toohello utworzone podczas tworzenia hello maszyny Wirtualnej, jak pokazano w kroku 1 tej procedury.</span><span class="sxs-lookup"><span data-stu-id="99bc3-162">hello VM image is saved toohello Azure Storage account created when hello VM was created, as shown in step 1 of this procedure.</span></span> <span data-ttu-id="99bc3-163">polecenie cmdlet Hello AzureRmVMImage Zapisz zapisuje toohello obraz powitania **systemu** kontenera na tym koncie magazynu.</span><span class="sxs-lookup"><span data-stu-id="99bc3-163">hello Save-AzureRmVMImage cmdlet saves hello image toohello **system** container in that storage account.</span></span> <span data-ttu-id="99bc3-164">Witaj `-DestinationContainername` katalogu wirtualnego w ramach hello nazwy parametrów **systemu** kontenera.</span><span class="sxs-lookup"><span data-stu-id="99bc3-164">hello `-DestinationContainername` parameter names a virtual directory within hello **system** container.</span></span> <span data-ttu-id="99bc3-165">Witaj `-VHDNamePrefix` parametr określa prefiks nazwy obiektu blob hello.</span><span class="sxs-lookup"><span data-stu-id="99bc3-165">hello `-VHDNamePrefix` parameter specifies a prefix for hello blob name.</span></span> <span data-ttu-id="99bc3-166">Ten prefiks jest dołączany początku toohello nazwa obiektu blob z łącznikiem.</span><span class="sxs-lookup"><span data-stu-id="99bc3-166">This prefix is prepended toohello blob name with a hyphen.</span></span> 

    <span data-ttu-id="99bc3-167">Na przykład załóżmy, że wywołanie AzureRmVMImage Zapisz z hello następujące parametry:</span><span class="sxs-lookup"><span data-stu-id="99bc3-167">For example, suppose you call Save-AzureRmVMImage with hello following parameters:</span></span>  

        Save-AzureRmVMImage -ResourceGroupName sample-resource-group -Name vm-custom-image -DestinationContainerName batchimages -VHDNamePrefix custom -Path C:\Temp\Images\vm-custom-image.json

    <span data-ttu-id="99bc3-168">Obraz wynikowy Hello jest zapisywany toohello lokalizację i nazwę obiektu blob, pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="99bc3-168">hello resulting image is saved toohello location and blob name shown here:</span></span>

    ![Lokalizacja zapisanego wirtualnego dysku twardego w kontenerze systemu](media/batch-custom-images/vhd-in-vm-storage-account.png)

    > [!NOTE]
    > <span data-ttu-id="99bc3-170">Maszyna wirtualna platformy Azure niezarządzane tworzy kilka kont magazynu do różnych celów.</span><span class="sxs-lookup"><span data-stu-id="99bc3-170">An Azure unmanaged VM creates several storage accounts for different purposes.</span></span> <span data-ttu-id="99bc3-171">Jeśli nie Zanotuj hello nazwę kontenera magazynu hello dysku hello systemu operacyjnego, gdy hello maszyna wirtualna została utworzona, a następnie znajdź magazynu hello skojarzonego konta, które zawiera hello **systemu** kontenera.</span><span class="sxs-lookup"><span data-stu-id="99bc3-171">If you did not note hello name of hello storage container for hello OS disk when hello VM was created, then find hello associated storage account that contains hello **system** container.</span></span> <span data-ttu-id="99bc3-172">Nawigowanie hello **systemu** kontenera toofind hello niestandardowego obrazu przy użyciu określonej wartości hello na powitania **AzureRmVMImage Zapisz** polecenia.</span><span class="sxs-lookup"><span data-stu-id="99bc3-172">Navigate through hello **system** container toofind hello custom image using hello values you specified for hello **Save-AzureRmVMImage** command.</span></span>

## <a name="create-a-pool-from-a-custom-image-in-hello-portal"></a><span data-ttu-id="99bc3-173">Utwórz pulę z niestandardowego obrazu w portalu hello</span><span class="sxs-lookup"><span data-stu-id="99bc3-173">Create a pool from a custom image in hello portal</span></span>

<span data-ttu-id="99bc3-174">Po zapisaniu niestandardowego obrazu i znasz lokalizacji, można utworzyć puli partii z tego obrazu.</span><span class="sxs-lookup"><span data-stu-id="99bc3-174">Once you have saved your custom image and you know its location, you can create a Batch pool from that image.</span></span> <span data-ttu-id="99bc3-175">Wykonaj te kroki toocreate pulę z hello portalu Azure:</span><span class="sxs-lookup"><span data-stu-id="99bc3-175">Follow these steps toocreate a pool from hello Azure portal:</span></span>

1. <span data-ttu-id="99bc3-176">Przejdź tooyour konta usługi partia zadań w hello portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="99bc3-176">Navigate tooyour Batch account in hello Azure portal.</span></span> <span data-ttu-id="99bc3-177">To konto musi być w hello tej samej subskrypcji i regionu co hello magazynu zawierającego niestandardowy obraz powitania konta.</span><span class="sxs-lookup"><span data-stu-id="99bc3-177">This account must be in hello same subscription and region as hello storage account containing hello custom image.</span></span> 
2. <span data-ttu-id="99bc3-178">W hello **ustawienia** okno na powitania po lewej, wybierz hello **pule** elementu menu.</span><span class="sxs-lookup"><span data-stu-id="99bc3-178">In hello **Settings** window on hello left, select hello **Pools** menu item.</span></span>
3. <span data-ttu-id="99bc3-179">W hello **pule** okna, wybierz hello **Dodaj** polecenia.</span><span class="sxs-lookup"><span data-stu-id="99bc3-179">In hello **Pools** window, select hello **Add** command.</span></span>
4. <span data-ttu-id="99bc3-180">Na powitania **Dodaj pulę,** wybierz **niestandardowego obrazu (Linux/system Windows)** z hello **typ obrazu** listy rozwijanej.</span><span class="sxs-lookup"><span data-stu-id="99bc3-180">On hello **Add Pool** window, select **Custom Image (Linux/Windows)** from hello **Image Type** dropdown.</span></span> <span data-ttu-id="99bc3-181">Hello portal Wyświetla hello **obraz niestandardowy** selektora.</span><span class="sxs-lookup"><span data-stu-id="99bc3-181">hello portal displays hello **Custom Image** picker.</span></span> <span data-ttu-id="99bc3-182">Przejdź toohello konta magazynu, gdzie znajduje się obraz niestandardowy, a następnie wybierz hello żądaną wirtualnego dysku twardego z kontenera hello.</span><span class="sxs-lookup"><span data-stu-id="99bc3-182">Navigate toohello storage account where your custom image is located, and select hello desired VHD from hello container.</span></span> 
5. <span data-ttu-id="99bc3-183">Wybierz prawidłowe hello **wydawcy lub oferta/jednostki Sku** dla Twojego niestandardowego pliku VHD.</span><span class="sxs-lookup"><span data-stu-id="99bc3-183">Select hello correct **Publisher/Offer/Sku** for your custom VHD.</span></span>
6. <span data-ttu-id="99bc3-184">Określ pozostałych hello wymagane ustawienia, w tym hello **rozmiaru węzła**, **Target dedykowanych węzłów**, i **niski priorytet węzłów**, a także wszelkie potrzebne ustawienia opcjonalne.</span><span class="sxs-lookup"><span data-stu-id="99bc3-184">Specify hello remaining required settings, including hello **Node size**, **Target dedicated nodes**, and **Low priority nodes**, as well as any desired optional settings.</span></span>

    <span data-ttu-id="99bc3-185">Na przykład dla programu Microsoft Windows Server Datacenter 2016 niestandardowego obrazu, hello **Dodaj pulę,** zostanie wyświetlone okno, jak pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="99bc3-185">For example, for a Microsoft Windows Server Datacenter 2016 custom image, hello **Add Pool** window appears as shown here:</span></span>

    ![Dodaj pulę z niestandardowego obrazu systemu Windows](media/batch-custom-images/add-pool-custom-image.png)
  
<span data-ttu-id="99bc3-187">toocheck czy istniejącej puli jest oparta na niestandardowego obrazu, zobacz hello **systemu operacyjnego** właściwości hello zasobów podsumowania część hello **puli** okna.</span><span class="sxs-lookup"><span data-stu-id="99bc3-187">toocheck whether an existing pool is based on a custom image, see hello **Operating System** property in hello resource summary section of hello **Pool** window.</span></span> <span data-ttu-id="99bc3-188">Jeśli pula hello został utworzony z obrazu niestandardowego, ustawiono zbyt**niestandardowego obrazu maszyny Wirtualnej**.</span><span class="sxs-lookup"><span data-stu-id="99bc3-188">If hello pool was created from a custom image, it is set too**Custom VM Image**.</span></span>

<span data-ttu-id="99bc3-189">Wszystkie dyski VHD niestandardowe skojarzone z pulą są wyświetlane w puli hello **właściwości** okna.</span><span class="sxs-lookup"><span data-stu-id="99bc3-189">All custom VHDs associated with a pool are displayed on hello pool's **Properties** window.</span></span>
 
## <a name="next-steps"></a><span data-ttu-id="99bc3-190">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="99bc3-190">Next steps</span></span>

- <span data-ttu-id="99bc3-191">Aby uzyskać szczegółowe informacje o partii, zobacz [Programowanie równoległe na dużą skalę obliczeniowe rozwiązań w partii](batch-api-basics.md).</span><span class="sxs-lookup"><span data-stu-id="99bc3-191">For an in-depth overview of Batch, see [Develop large-scale parallel compute solutions with Batch](batch-api-basics.md).</span></span>
- <span data-ttu-id="99bc3-192">Aby uzyskać informacje dotyczące tworzenia konta usługi partia zadań, zobacz [Tworzenie konta usługi partia zadań z portalu Azure hello](batch-account-create-portal.md).</span><span class="sxs-lookup"><span data-stu-id="99bc3-192">For information about creating a Batch account, see [Create a Batch account with hello Azure portal](batch-account-create-portal.md).</span></span>
