---
title: "Tworzenie rozwiązań partii z szablony projektu Visual Studio - Azure aaaStart | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak szablony projektu Visual Studio może pomóc w implementacji i uruchamiania obciążeń obliczeniowych w partii zadań Azure."
services: batch
documentationcenter: .net
author: fayora
manager: timlt
editor: 
ms.assetid: 5e041ae2-25af-4882-a79e-3aa63c4bfb20
ms.service: batch
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: big-compute
ms.date: 02/27/2017
ms.author: tamram
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: a61c480ddc4dffd66c01220a137a3e852e39c338
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="use-visual-studio-project-templates-toojump-start-batch-solutions"></a><span data-ttu-id="f04a8-103">Użyj rozwiązań toojump start szablony programu Visual Studio projektu w partii</span><span class="sxs-lookup"><span data-stu-id="f04a8-103">Use Visual Studio project templates toojump-start Batch solutions</span></span>

<span data-ttu-id="f04a8-104">Hello **Menedżer zadań** i **szablony zadań procesora Visual Studio** dla partii Podaj kod toohelp możesz tooimplement i uruchom obciążeń obliczeniowych w partii o hello najmniej wysiłku.</span><span class="sxs-lookup"><span data-stu-id="f04a8-104">hello **Job Manager** and **Task Processor Visual Studio templates** for Batch provide code toohelp you tooimplement and run your compute-intensive workloads on Batch with hello least amount of effort.</span></span> <span data-ttu-id="f04a8-105">Ten dokument zawiera opis tych szablonów i zawiera wskazówki dotyczące toouse je.</span><span class="sxs-lookup"><span data-stu-id="f04a8-105">This document describes these templates and provides guidance for how toouse them.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f04a8-106">W tym artykule opisano tylko informacje o odpowiednich toothese dwa szablony i przyjęto założenie, że czytelnik zna hello usługa partia zadań i tooit powiązane kluczowe założenia: pule, obliczeniowe węzłów, zadań i zadań, zadania Menedżer zadania, zmienne środowiskowe i innych istotne informacje.</span><span class="sxs-lookup"><span data-stu-id="f04a8-106">This article discusses only information applicable toothese two templates, and assumes that you are familiar with hello Batch service and key concepts related tooit: pools, compute nodes, jobs and tasks, job manager tasks, environment variables, and other relevant information.</span></span> <span data-ttu-id="f04a8-107">Więcej informacji można znaleźć [partii podstawy usługi Azure](batch-technical-overview.md), [Przegląd funkcji partii dla deweloperów](batch-api-basics.md), i [wprowadzenie hello biblioteki partii zadań Azure dla platformy .NET](batch-dotnet-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="f04a8-107">You can find more information in [Basics of Azure Batch](batch-technical-overview.md), [Batch feature overview for developers](batch-api-basics.md), and [Get started with hello Azure Batch library for .NET](batch-dotnet-get-started.md).</span></span>
> 
> 

## <a name="high-level-overview"></a><span data-ttu-id="f04a8-108">Ogólne omówienie</span><span class="sxs-lookup"><span data-stu-id="f04a8-108">High-level overview</span></span>
<span data-ttu-id="f04a8-109">Szablony Hello Menedżer zadań i zadań procesora może być używane toocreate dwa składniki przydatne:</span><span class="sxs-lookup"><span data-stu-id="f04a8-109">hello Job Manager and Task Processor templates can be used toocreate two useful components:</span></span>

* <span data-ttu-id="f04a8-110">Zadanie Menedżer zadania, które implementuje podziału zadania, które można podzielić zadania na wielu zadań, które można uruchomić osobno, równolegle.</span><span class="sxs-lookup"><span data-stu-id="f04a8-110">A job manager task that implements a job splitter that can break a job down into multiple tasks that can run independently, in parallel.</span></span>
* <span data-ttu-id="f04a8-111">Procesor zadania, które mogą być używane tooperform przetwarzanie wstępne i przetwarzania końcowego wokół wiersza polecenia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f04a8-111">A task processor that can be used tooperform pre-processing and post-processing around an application command line.</span></span>

<span data-ttu-id="f04a8-112">Na przykład w przypadku renderowania film, podziału zadania hello czy przekształcić zadania pojedynczego filmu setek lub tysięcy oddzielnych zadań, które będzie przetwarzać osobno poszczególne ramki.</span><span class="sxs-lookup"><span data-stu-id="f04a8-112">For example, in a movie rendering scenario, hello job splitter would turn a single movie job into hundreds or thousands of separate tasks that would process individual frames separately.</span></span> <span data-ttu-id="f04a8-113">Odpowiednio hello zadań procesora może wywołać hello renderowanie aplikacji i wszystkie procesy zależne, które są potrzebne toorender każdej ramce, a także wszelkie dodatkowe akcje (na przykład kopiowanie hello renderowane ramki tooa lokalizacji magazynu).</span><span class="sxs-lookup"><span data-stu-id="f04a8-113">Correspondingly, hello task processor would invoke hello rendering application and all dependent processes that are needed toorender each frame, as well as perform any additional actions (for example, copying hello rendered frame tooa storage location).</span></span>

> [!NOTE]
> <span data-ttu-id="f04a8-114">Hello szablonów Menedżer zadań i zadań procesora są niezależne od siebie, więc możesz wybrać toouse obie lub tylko jeden z nich, w zależności od wymagań hello zadania obliczeniowych i na swoje preferencje.</span><span class="sxs-lookup"><span data-stu-id="f04a8-114">hello Job Manager and Task Processor templates are independent of each other, so you can choose toouse both, or only one of them, depending on hello requirements of your compute job and on your preferences.</span></span>
> 
> 

<span data-ttu-id="f04a8-115">Jak pokazano na poniższym diagramie hello, zadanie obliczeniowe, które korzysta z tych szablonów będzie przejście przez trzech etapów:</span><span class="sxs-lookup"><span data-stu-id="f04a8-115">As shown in hello diagram below, a compute job that uses these templates will go through three stages:</span></span>

1. <span data-ttu-id="f04a8-116">Kod klienta Hello (np. aplikacji, usługi sieci web, itp.) przesyła toohello zadania usługa partia zadań Azure, określając jako jego program zadania Menedżer zadania hello zadania menedżera.</span><span class="sxs-lookup"><span data-stu-id="f04a8-116">hello client code (e.g., application, web service, etc.) submits a job toohello Batch service on Azure, specifying as its job manager task hello job manager program.</span></span>
2. <span data-ttu-id="f04a8-117">Hello usługa partia zadań uruchamia zadanie Menedżer zadania hello w węźle obliczeń i hello hello powoduje uruchomienie podziału zadania określone liczba zadań procesora zadań, na jako wiele węzły obliczeniowe zgodnie z potrzebami, na podstawie parametrów hello i specyfikacje hello zadania podziału kodu.</span><span class="sxs-lookup"><span data-stu-id="f04a8-117">hello Batch service runs hello job manager task on a compute node and hello job splitter launches hello specified number of task processor tasks, on as many compute nodes as required, based on hello parameters and specifications in hello job splitter code.</span></span>
3. <span data-ttu-id="f04a8-118">Witaj zadań procesora zadania są uruchamiane niezależnie, równoległe, tooprocess hello danych wejściowych i generowanie danych wyjściowych hello.</span><span class="sxs-lookup"><span data-stu-id="f04a8-118">hello task processor tasks run independently, in parallel, tooprocess hello input data and generate hello output data.</span></span>

![Diagram pokazujący, jak kod klienta współdziała z hello usługa partia zadań][diagram01]

## <a name="prerequisites"></a><span data-ttu-id="f04a8-120">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="f04a8-120">Prerequisites</span></span>
<span data-ttu-id="f04a8-121">Szablony partii hello toouse, będą potrzebne następujące hello:</span><span class="sxs-lookup"><span data-stu-id="f04a8-121">toouse hello Batch templates, you will need hello following:</span></span>

* <span data-ttu-id="f04a8-122">Komputer z programu Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="f04a8-122">A computer with Visual Studio 2015 installed.</span></span> <span data-ttu-id="f04a8-123">Szablony usługi partia zadań są obecnie obsługiwane tylko dla programu Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="f04a8-123">Batch templates are currently only supported for Visual Studio 2015.</span></span>
* <span data-ttu-id="f04a8-124">Witaj partii szablonów, które nie są dostępne z hello [galerii programu Visual Studio] [ vs_gallery] jako rozszerzenia programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f04a8-124">hello Batch templates, which are available from hello [Visual Studio Gallery][vs_gallery] as Visual Studio extensions.</span></span> <span data-ttu-id="f04a8-125">Istnieją dwa sposoby tooget hello szablonów:</span><span class="sxs-lookup"><span data-stu-id="f04a8-125">There are two ways tooget hello templates:</span></span>
  
  * <span data-ttu-id="f04a8-126">Zainstaluj hello szablonów przy użyciu hello **rozszerzenia i aktualizacje** okno dialogowe w programie Visual Studio (Aby uzyskać więcej informacji, zobacz [Znajdowanie i rozszerzenia przy użyciu programu Visual Studio][vs_find_use_ext]).</span><span class="sxs-lookup"><span data-stu-id="f04a8-126">Install hello templates using hello **Extensions and Updates** dialog box in Visual Studio (for more information, see [Finding and Using Visual Studio Extensions][vs_find_use_ext]).</span></span> <span data-ttu-id="f04a8-127">W hello **rozszerzenia i aktualizacje** okno dialogowe, wyszukiwanie i pobieranie hello następujące dwa rozszerzenia:</span><span class="sxs-lookup"><span data-stu-id="f04a8-127">In hello **Extensions and Updates** dialog box, search and download hello following two extensions:</span></span>
    
    * <span data-ttu-id="f04a8-128">Azure Menedżer zadania wsadowego z rozdzielaczem zadania</span><span class="sxs-lookup"><span data-stu-id="f04a8-128">Azure Batch Job Manager with Job Splitter</span></span>
    * <span data-ttu-id="f04a8-129">Procesor zadania usługa partia zadań Azure</span><span class="sxs-lookup"><span data-stu-id="f04a8-129">Azure Batch Task Processor</span></span>
  * <span data-ttu-id="f04a8-130">Pobieranie hello z galerii online hello for Visual Studio: [szablony projektów programu Microsoft Azure partii][vs_gallery_templates]</span><span class="sxs-lookup"><span data-stu-id="f04a8-130">Download hello templates from hello online gallery for Visual Studio: [Microsoft Azure Batch Project Templates][vs_gallery_templates]</span></span>
* <span data-ttu-id="f04a8-131">Jeśli planujesz toouse hello [pakietów aplikacji](batch-application-packages.md) Menedżer zadań hello toodeploy funkcji i toohello procesor zadania wsadowego węzły obliczeniowe, należy toolink tooyour konta magazynu konta usługi partia zadań.</span><span class="sxs-lookup"><span data-stu-id="f04a8-131">If you plan toouse hello [Application Packages](batch-application-packages.md) feature toodeploy hello job manager and task processor toohello Batch compute nodes, you need toolink a storage account tooyour Batch account.</span></span>

## <a name="preparation"></a><span data-ttu-id="f04a8-132">Przygotowanie</span><span class="sxs-lookup"><span data-stu-id="f04a8-132">Preparation</span></span>
<span data-ttu-id="f04a8-133">Zaleca się tworzenia rozwiązania, które mogą zawierać Menedżera zadań, a także zadań procesora, ponieważ to może być łatwiejsze kodu tooshare między Menedżer zadań i zadań procesora programy.</span><span class="sxs-lookup"><span data-stu-id="f04a8-133">We recommend creating a solution that can contain your job manager as well as your task processor, because this can make it easier tooshare code between your job manager and task processor programs.</span></span> <span data-ttu-id="f04a8-134">toocreate to rozwiązanie, wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="f04a8-134">toocreate this solution, follow these steps:</span></span>

1. <span data-ttu-id="f04a8-135">Otwórz program Visual Studio i wybierz **pliku** > **nowy** > **projektu**.</span><span class="sxs-lookup"><span data-stu-id="f04a8-135">Open Visual Studio and select **File** > **New** > **Project**.</span></span>
2. <span data-ttu-id="f04a8-136">W obszarze **szablony**, rozwiń węzeł **inne typy projektów**, kliknij przycisk **rozwiązań programu Visual Studio**, a następnie wybierz **puste rozwiązanie**.</span><span class="sxs-lookup"><span data-stu-id="f04a8-136">Under **Templates**, expand **Other Project Types**, click **Visual Studio Solutions**, and then select **Blank Solution**.</span></span>
3. <span data-ttu-id="f04a8-137">Wpisz nazwę, która opisuje z aplikacji i hello celem tego rozwiązania (np. "LitwareBatchTaskPrograms").</span><span class="sxs-lookup"><span data-stu-id="f04a8-137">Type a name that describes your application and hello purpose of this solution (e.g., "LitwareBatchTaskPrograms").</span></span>
4. <span data-ttu-id="f04a8-138">toocreate hello nowe rozwiązanie, kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="f04a8-138">toocreate hello new solution, click **OK**.</span></span>

## <a name="job-manager-template"></a><span data-ttu-id="f04a8-139">Menedżer zadań szablonu</span><span class="sxs-lookup"><span data-stu-id="f04a8-139">Job Manager template</span></span>
<span data-ttu-id="f04a8-140">Szablon Menedżer zadań Hello pomaga tooimplement zadanie Menedżer zadania, które można wykonać następujące akcje hello:</span><span class="sxs-lookup"><span data-stu-id="f04a8-140">hello Job Manager template helps you tooimplement a job manager task that can perform hello following actions:</span></span>

* <span data-ttu-id="f04a8-141">Podziel zadania na wielu zadań.</span><span class="sxs-lookup"><span data-stu-id="f04a8-141">Split a job into multiple tasks.</span></span>
* <span data-ttu-id="f04a8-142">Przedstawia toorun tych zadań w partii.</span><span class="sxs-lookup"><span data-stu-id="f04a8-142">Submit those tasks toorun on Batch.</span></span>

> [!NOTE]
> <span data-ttu-id="f04a8-143">Aby uzyskać więcej informacji na temat zadania Menedżera zadań, zobacz [Przegląd funkcji partii dla deweloperów](batch-api-basics.md#job-manager-task).</span><span class="sxs-lookup"><span data-stu-id="f04a8-143">For more information about job manager tasks, see [Batch feature overview for developers](batch-api-basics.md#job-manager-task).</span></span>
> 
> 

### <a name="create-a-job-manager-using-hello-template"></a><span data-ttu-id="f04a8-144">Tworzenie przy użyciu szablonu hello Menedżer zadania</span><span class="sxs-lookup"><span data-stu-id="f04a8-144">Create a Job Manager using hello template</span></span>
<span data-ttu-id="f04a8-145">tooadd rozwiązania toohello Menedżer zadania utworzone wcześniej, wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="f04a8-145">tooadd a job manager toohello solution that you created earlier, follow these steps:</span></span>

1. <span data-ttu-id="f04a8-146">Otwórz istniejącego rozwiązania programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f04a8-146">Open your existing solution in Visual Studio.</span></span>
2. <span data-ttu-id="f04a8-147">W Eksploratorze rozwiązań kliknij prawym przyciskiem myszy rozwiązanie hello, kliknij przycisk **Dodaj** > **nowy projekt**.</span><span class="sxs-lookup"><span data-stu-id="f04a8-147">In Solution Explorer, right-click hello solution, click **Add** > **New Project**.</span></span>
3. <span data-ttu-id="f04a8-148">W obszarze **Visual C#**, kliknij przycisk **chmury**, a następnie kliknij przycisk **Menedżer zadań wsadowych Azure z rozdzielaczem zadania**.</span><span class="sxs-lookup"><span data-stu-id="f04a8-148">Under **Visual C#**, click **Cloud**, and then click **Azure Batch Job Manager with Job Splitter**.</span></span>
4. <span data-ttu-id="f04a8-149">Wpisz nazwę opisującą aplikacji i identyfikuje tego projektu jako Menedżer zadań hello (np. "LitwareJobManager").</span><span class="sxs-lookup"><span data-stu-id="f04a8-149">Type a name that describes your application and identifies this project as hello job manager (e.g. "LitwareJobManager").</span></span>
5. <span data-ttu-id="f04a8-150">toocreate hello projektu, kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="f04a8-150">toocreate hello project, click **OK**.</span></span>
6. <span data-ttu-id="f04a8-151">Na koniec kompilacji hello projektu tooforce Visual Studio tooload wszystkie odwołania do pakietów NuGet i tooverify, który hello projektu jest prawidłowa, przed rozpoczęciem modyfikowania jej.</span><span class="sxs-lookup"><span data-stu-id="f04a8-151">Finally, build hello project tooforce Visual Studio tooload all referenced NuGet packages and tooverify that hello project is valid before you start modifying it.</span></span>

### <a name="job-manager-template-files-and-their-purpose"></a><span data-ttu-id="f04a8-152">Pliki szablonów Menedżer zadań i ich przeznaczenie</span><span class="sxs-lookup"><span data-stu-id="f04a8-152">Job Manager template files and their purpose</span></span>
<span data-ttu-id="f04a8-153">Podczas tworzenia projektu za pomocą szablonu Menedżer zadań hello generuje trzech grup plików kodu:</span><span class="sxs-lookup"><span data-stu-id="f04a8-153">When you create a project using hello Job Manager template, it generates three groups of code files:</span></span>

* <span data-ttu-id="f04a8-154">plik główny program Hello (Program.cs).</span><span class="sxs-lookup"><span data-stu-id="f04a8-154">hello main program file (Program.cs).</span></span> <span data-ttu-id="f04a8-155">Zawiera punkt wejścia program hello i obsługa wyjątków najwyższego poziomu.</span><span class="sxs-lookup"><span data-stu-id="f04a8-155">This contains hello program entry point and top-level exception handling.</span></span> <span data-ttu-id="f04a8-156">Nie powinien zwykle toomodify to konieczne.</span><span class="sxs-lookup"><span data-stu-id="f04a8-156">You shouldn't normally need toomodify this.</span></span>
* <span data-ttu-id="f04a8-157">Witaj katalogu Framework.</span><span class="sxs-lookup"><span data-stu-id="f04a8-157">hello Framework directory.</span></span> <span data-ttu-id="f04a8-158">Zawiera pliki hello odpowiedzialny za hello "standardowy" pracy przez program Menedżer zadania hello — rozpakowywania parametrów, Dodawanie zadania wsadowego zadania toohello itp. Nie powinien zwykle należy toomodify tych plików.</span><span class="sxs-lookup"><span data-stu-id="f04a8-158">This contains hello files responsible for hello 'boilerplate' work done by hello job manager program – unpacking parameters, adding tasks toohello Batch job, etc. You shouldn't normally need toomodify these files.</span></span>
* <span data-ttu-id="f04a8-159">Plik podziału zadania Hello (JobSplitter.cs).</span><span class="sxs-lookup"><span data-stu-id="f04a8-159">hello job splitter file (JobSplitter.cs).</span></span> <span data-ttu-id="f04a8-160">Jest to, gdzie należy umieścić specyficzne dla aplikacji logiki do dzielenia zadania do zadania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-160">This is where you will put your application-specific logic for splitting a job into tasks.</span></span>

<span data-ttu-id="f04a8-161">Oczywiście można dodać dodatkowe pliki jako wymagany toosupport kodu podziału zadania, w zależności od złożoności hello zadania hello dzielenia logiki.</span><span class="sxs-lookup"><span data-stu-id="f04a8-161">Of course you can add additional files as required toosupport your job splitter code, depending on hello complexity of hello job splitting logic.</span></span>

<span data-ttu-id="f04a8-162">Szablon Hello generuje również standardowe pliki projektu .NET pliku .csproj app.config, packages.config, np.</span><span class="sxs-lookup"><span data-stu-id="f04a8-162">hello template also generates standard .NET project files such as a .csproj file, app.config, packages.config, etc.</span></span>

<span data-ttu-id="f04a8-163">Hello pozostałej części tej sekcji przedstawiono hello różnych plików i ich struktury kodu oraz opisano, co oznacza każdej klasy.</span><span class="sxs-lookup"><span data-stu-id="f04a8-163">hello rest of this section describes hello different files and their code structure, and explains what each class does.</span></span>

![Visual Studio Solution Explorer przedstawiający hello Menedżer zadań szablon rozwiązania][solution_explorer01]

<span data-ttu-id="f04a8-165">**Pliki Framework**</span><span class="sxs-lookup"><span data-stu-id="f04a8-165">**Framework files**</span></span>

* <span data-ttu-id="f04a8-166">`Configuration.cs`: Hermetyzuje hello ładowanie danych konfiguracji zadania, takie jak szczegóły konta wsadowego, poświadczenia konta magazynu połączone, informacje i zadań i parametrów zadania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-166">`Configuration.cs`: Encapsulates hello loading of job configuration data such as Batch account details, linked storage account credentials, job and task information, and job parameters.</span></span> <span data-ttu-id="f04a8-167">Umożliwia również dostęp zmienne środowiskowe zdefiniowane tooBatch (Zobacz ustawienia środowiska dla zadań, w dokumentacji partii hello) za pomocą klasy Configuration.EnvironmentVariable hello.</span><span class="sxs-lookup"><span data-stu-id="f04a8-167">It also provides access tooBatch-defined environment variables (see Environment settings for tasks, in hello Batch documentation) via hello Configuration.EnvironmentVariable class.</span></span>
* <span data-ttu-id="f04a8-168">`IConfiguration.cs`: Abstract hello implementacji hello klasa konfiguracji, tak aby można było z podziału zadania przy użyciu obiektu fałszywych lub zasymulować konfiguracji testu jednostkowego.</span><span class="sxs-lookup"><span data-stu-id="f04a8-168">`IConfiguration.cs`: Abstracts hello implementation of hello Configuration class, so that you can unit test your job splitter using a fake or mock configuration object.</span></span>
* <span data-ttu-id="f04a8-169">`JobManager.cs`: Organizuje hello składniki programu Menedżer zadania hello.</span><span class="sxs-lookup"><span data-stu-id="f04a8-169">`JobManager.cs`: Orchestrates hello components of hello job manager program.</span></span> <span data-ttu-id="f04a8-170">Jest odpowiedzialny za hello inicjowanie podziału zadania hello, wywoływania hello podziału zadania, oraz wysyłania zadań hello zwrócona przez hello obiekt przesyłający zadania toohello podziału zadania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-170">It is responsible for hello initializing hello job splitter, invoking hello job splitter, and dispatching hello tasks returned by hello job splitter toohello task submitter.</span></span>
* <span data-ttu-id="f04a8-171">`JobManagerException.cs`: Błąd, który wymaga hello zadania Menedżera tooterminate reprezentuje.</span><span class="sxs-lookup"><span data-stu-id="f04a8-171">`JobManagerException.cs`: Represents an error that requires hello job manager tooterminate.</span></span> <span data-ttu-id="f04a8-172">JobManagerException jest używane toowrap błędy "Oczekiwano" gdzie określone informacje diagnostyczne można podać jako część rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-172">JobManagerException is used toowrap 'expected' errors where specific diagnostic information can be provided as part of termination.</span></span>
* <span data-ttu-id="f04a8-173">`TaskSubmitter.cs`: Ta klasa jest zadania odpowiada tooadding zwrócony przez zadanie wsadowe toohello hello zadania podziału.</span><span class="sxs-lookup"><span data-stu-id="f04a8-173">`TaskSubmitter.cs`: This class is responsible tooadding tasks returned by hello job splitter toohello Batch job.</span></span> <span data-ttu-id="f04a8-174">Klasa JobManager Hello agreguje hello sekwencji zadań w partie dodanie wydajne, ale odpowiednim toohello zadania, a następnie wywołuje TaskSubmitter.SubmitTasks wątku w tle dla każdej partii.</span><span class="sxs-lookup"><span data-stu-id="f04a8-174">hello JobManager class aggregates hello sequence of tasks into batches for efficient but timely addition toohello job, then calls TaskSubmitter.SubmitTasks on a background thread for each batch.</span></span>

<span data-ttu-id="f04a8-175">**Zadanie podziału**</span><span class="sxs-lookup"><span data-stu-id="f04a8-175">**Job Splitter**</span></span>

<span data-ttu-id="f04a8-176">`JobSplitter.cs`: Ta klasa zawiera specyficzne dla aplikacji logiki do dzielenia hello zadania do zadania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-176">`JobSplitter.cs`: This class contains application-specific logic for splitting hello job into tasks.</span></span> <span data-ttu-id="f04a8-177">Witaj framework wywołuje hello JobSplitter.Split metody tooobtain sekwencji zadań, które dodaje zadania toohello metodą hello zwraca je.</span><span class="sxs-lookup"><span data-stu-id="f04a8-177">hello framework invokes hello JobSplitter.Split method tooobtain a sequence of tasks, which it adds toohello job as hello method returns them.</span></span> <span data-ttu-id="f04a8-178">Jest klasa hello, gdzie będzie wstrzyknąć logiki hello zadania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-178">This is hello class where you will inject hello logic of your job.</span></span> <span data-ttu-id="f04a8-179">Implementuje hello podziału metody tooreturn sekwencję wystąpień CloudTask przedstawiających hello zadania, do których mają toopartition hello zadania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-179">Implement hello Split method tooreturn a sequence of CloudTask instances representing hello tasks into which you want toopartition hello job.</span></span>

<span data-ttu-id="f04a8-180">**Standardowe pliki projektu wiersza polecenia platformy .NET**</span><span class="sxs-lookup"><span data-stu-id="f04a8-180">**Standard .NET command line project files**</span></span>

* <span data-ttu-id="f04a8-181">`App.config`: Standardowego pliku konfiguracji aplikacji .NET.</span><span class="sxs-lookup"><span data-stu-id="f04a8-181">`App.config`: Standard .NET application configuration file.</span></span>
* <span data-ttu-id="f04a8-182">`Packages.config`: Standardowy plik zależności pakietu NuGet.</span><span class="sxs-lookup"><span data-stu-id="f04a8-182">`Packages.config`: Standard NuGet package dependency file.</span></span>
* <span data-ttu-id="f04a8-183">`Program.cs`: Zawiera punkt wejścia program hello oraz wyjątków najwyższego poziomu.</span><span class="sxs-lookup"><span data-stu-id="f04a8-183">`Program.cs`: Contains hello program entry point and top-level exception handling.</span></span>

### <a name="implementing-hello-job-splitter"></a><span data-ttu-id="f04a8-184">Implementowanie hello zadania podziału</span><span class="sxs-lookup"><span data-stu-id="f04a8-184">Implementing hello job splitter</span></span>
<span data-ttu-id="f04a8-185">Po otwarciu projektu szablonu Menedżer zadań hello hello projektu zostanie otworzył pliku JobSplitter.cs hello domyślnie.</span><span class="sxs-lookup"><span data-stu-id="f04a8-185">When you open hello Job Manager template project, hello project will have hello JobSplitter.cs file open by default.</span></span> <span data-ttu-id="f04a8-186">Można zaimplementować hello dzielenie logikę zadań hello w obciążenia przy użyciu hello Split() metody wyświetlane poniżej:</span><span class="sxs-lookup"><span data-stu-id="f04a8-186">You can implement hello split logic for hello tasks in your workload by using hello Split() method show below:</span></span>

```csharp
/// <summary>
/// Gets hello tasks into which toosplit hello job. This is where you inject
/// your application-specific logic for decomposing hello job into tasks.
///
/// hello job manager framework invokes hello Split method for you; you need
/// only tooimplement it, not toocall it yourself. Typically, your
/// implementation should return tasks lazily, for example using a C#
/// iterator and hello "yield return" statement; this allows tasks toobe added
/// and toostart running while splitting is still in progress.
/// </summary>
/// <returns>hello tasks toobe added toohello job. Tasks are added automatically
/// by hello job manager framework as they are returned by this method.</returns>
public IEnumerable<CloudTask> Split()
{
    // Your code for hello split logic goes here.
    int startFrame = Convert.ToInt32(_parameters["StartFrame"]);
    int endFrame = Convert.ToInt32(_parameters["EndFrame"]);

    for (int i = startFrame; i <= endFrame; i++)
    {
        yield return new CloudTask("myTask" + i, "cmd /c dir");
    }
}
```

> [!NOTE]
> <span data-ttu-id="f04a8-187">Witaj adnotacji części hello `Split()` metoda jest hello tylko części hello Menedżer zadań szablonu kod, który jest przeznaczony dla toomodify możesz, dodając toosplit logiki hello zadaniach do różnych zadań.</span><span class="sxs-lookup"><span data-stu-id="f04a8-187">hello annotated section in hello `Split()` method is hello only section of hello Job Manager template code that is intended for you toomodify by adding hello logic toosplit your jobs into different tasks.</span></span> <span data-ttu-id="f04a8-188">Jeśli chcesz toomodify różnych części szablonu hello, sprawdź, czy są zapoznaniu z działania partii i wypróbować kilka hello [partii przykłady kodu][github_samples].</span><span class="sxs-lookup"><span data-stu-id="f04a8-188">If you want toomodify a different section of hello template, please ensure you are familiarized with how Batch works, and try out a few of hello [Batch code samples][github_samples].</span></span>
> 
> 

<span data-ttu-id="f04a8-189">Implementacji Split() ma dostęp do:</span><span class="sxs-lookup"><span data-stu-id="f04a8-189">Your Split() implementation has access to:</span></span>

* <span data-ttu-id="f04a8-190">Witaj parametrów zadania przy użyciu hello `_parameters` pola.</span><span class="sxs-lookup"><span data-stu-id="f04a8-190">hello job parameters, via hello `_parameters` field.</span></span>
* <span data-ttu-id="f04a8-191">Witaj CloudJob obiektów reprezentująca zadania hello, za pośrednictwem hello `_job` pola.</span><span class="sxs-lookup"><span data-stu-id="f04a8-191">hello CloudJob object representing hello job, via hello `_job` field.</span></span>
* <span data-ttu-id="f04a8-192">Witaj CloudTask obiektów reprezentująca zadania Menedżer zadania hello, za pomocą hello `_jobManagerTask` pola.</span><span class="sxs-lookup"><span data-stu-id="f04a8-192">hello CloudTask object representing hello job manager task, via hello `_jobManagerTask` field.</span></span>

<span data-ttu-id="f04a8-193">Twoje `Split()` implementacji nie jest konieczne tooadd zadania toohello zadania bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="f04a8-193">Your `Split()` implementation does not need tooadd tasks toohello job directly.</span></span> <span data-ttu-id="f04a8-194">Zamiast tego kod powinien zwrócić sekwencji CloudTask obiektów, a te zostaną dodane zadania toohello automatycznie przez hello framework klasy, które wywołują hello podziału zadania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-194">Instead, your code should return a sequence of CloudTask objects, and these will be added toohello job automatically by hello framework classes that invoke hello job splitter.</span></span> <span data-ttu-id="f04a8-195">Jest typowe iteratora toouse C# w (`yield return`) funkcji tooimplement rozdzielaczy zadania, ponieważ dzięki temu hello toostart zadania uruchomione tak szybko, jak to możliwe, zamiast oczekiwania dla wszystkich zadań toobe obliczane.</span><span class="sxs-lookup"><span data-stu-id="f04a8-195">It's common toouse C#'s iterator (`yield return`) feature tooimplement job splitters as this allows hello tasks toostart running as soon as possible rather than waiting for all tasks toobe calculated.</span></span>

<span data-ttu-id="f04a8-196">**Niepowodzenie zadania podziału**</span><span class="sxs-lookup"><span data-stu-id="f04a8-196">**Job splitter failure**</span></span>

<span data-ttu-id="f04a8-197">Jeśli Twoje podziału zadań wystąpi błąd, powinno być:</span><span class="sxs-lookup"><span data-stu-id="f04a8-197">If your job splitter encounters an error, it should either:</span></span>

* <span data-ttu-id="f04a8-198">Zakończenie sekwencji hello za pomocą hello C# `yield break` instrukcji, w którym Menedżer zadań wielkość hello będą traktowane jako pomyślnie; lub</span><span class="sxs-lookup"><span data-stu-id="f04a8-198">Terminate hello sequence using hello C# `yield break` statement, in which case hello job manager will be treated as successful; or</span></span>
* <span data-ttu-id="f04a8-199">Zgłoś wyjątek, w którym Menedżer zadań wielkość hello będą traktowane jako nieudane i może podjęta w zależności od tego, jak powitania klienta skonfigurował go).</span><span class="sxs-lookup"><span data-stu-id="f04a8-199">Throw an exception, in which case hello job manager will be treated as failed and may be retried depending on how hello client has configured it).</span></span>

<span data-ttu-id="f04a8-200">W obu przypadkach żadnych zadań już zwracane przez podziału zadań hello, a zadanie wsadowe dodano toohello będzie toorun kwalifikujących się.</span><span class="sxs-lookup"><span data-stu-id="f04a8-200">In both cases, any tasks already returned by hello job splitter and added toohello Batch job will be eligible toorun.</span></span> <span data-ttu-id="f04a8-201">Jeśli nie chcesz tego toohappen, następnie możesz:</span><span class="sxs-lookup"><span data-stu-id="f04a8-201">If you don't want this toohappen, then you could:</span></span>

* <span data-ttu-id="f04a8-202">Zakończ zadanie hello przed powrotem z hello zadania podziału</span><span class="sxs-lookup"><span data-stu-id="f04a8-202">Terminate hello job before returning from hello job splitter</span></span>
* <span data-ttu-id="f04a8-203">Sformułować hello całe zadanie kolekcji przed jej zwróceniem (oznacza to, zwróć `ICollection<CloudTask>` lub `IList<CloudTask>` zamiast wykonania programu podziału zadania przy użyciu iteratora C#)</span><span class="sxs-lookup"><span data-stu-id="f04a8-203">Formulate hello entire task collection before returning it (that is, return an `ICollection<CloudTask>` or `IList<CloudTask>` instead of implementing your job splitter using a C# iterator)</span></span>
* <span data-ttu-id="f04a8-204">Użyj toomake zależności zadań, wszystkie zadania zależą od hello pomyślne zakończenie hello Menedżer zadań</span><span class="sxs-lookup"><span data-stu-id="f04a8-204">Use task dependencies toomake all tasks depend on hello successful completion of hello job manager</span></span>

<span data-ttu-id="f04a8-205">**Ponowne próby Menedżer zadania**</span><span class="sxs-lookup"><span data-stu-id="f04a8-205">**Job manager retries**</span></span>

<span data-ttu-id="f04a8-206">Jeśli hello Menedżer zadań nie powiedzie się, może zostać powtórzone przez usługi partia zadań hello w zależności od ustawienia ponawiania próby powitania klienta.</span><span class="sxs-lookup"><span data-stu-id="f04a8-206">If hello job manager fails, it may be retried by hello Batch service depending on hello client retry settings.</span></span> <span data-ttu-id="f04a8-207">Ogólnie rzecz biorąc jest bezpieczne, ponieważ hello framework dodaje zadania toohello zadania, ignoruje wszystkie zadania, które już istnieją.</span><span class="sxs-lookup"><span data-stu-id="f04a8-207">In general, this is safe, because when hello framework adds tasks toohello job, it ignores any tasks that already exist.</span></span> <span data-ttu-id="f04a8-208">Jednak jeśli obliczanie zadania jest kosztowna, nie możesz tooincur hello koszt ponownego obliczenia zadania, które już zostały dodane zadania toohello; z drugiej strony Jeśli Uruchom ponownie hello jest toogenerate nie gwarantuje hello takich samych identyfikatorów zadań zachowanie "Ignoruj duplikaty" hello zostanie nie zaczną działać, a następnie.</span><span class="sxs-lookup"><span data-stu-id="f04a8-208">However, if calculating tasks is expensive, you may not wish tooincur hello cost of recalculating tasks that have already been added toohello job; conversely, if hello re-run is not guaranteed toogenerate hello same task IDs then hello 'ignore duplicates' behavior will not kick in.</span></span> <span data-ttu-id="f04a8-209">W takich przypadkach należy zaprojektować jego zadania podziału toodetect hello pracy, które zostało już wykonane i powtarzaj go, na przykład, wykonując CloudJob.ListTasks przed uruchomieniem zadania tooyield.</span><span class="sxs-lookup"><span data-stu-id="f04a8-209">In these cases you should design your job splitter toodetect hello work that has already been done and not repeat it, for example by performing a CloudJob.ListTasks before starting tooyield tasks.</span></span>

### <a name="exit-codes-and-exceptions-in-hello-job-manager-template"></a><span data-ttu-id="f04a8-210">Zakończ kody i wyjątków w szablonie Menedżer zadań hello</span><span class="sxs-lookup"><span data-stu-id="f04a8-210">Exit codes and exceptions in hello Job Manager template</span></span>
<span data-ttu-id="f04a8-211">Kody wyjścia i wyjątków udostępniają mechanizm toodetermine hello wyniki działania programu i mogą pomóc tooidentify problemów z wykonywania hello hello programu.</span><span class="sxs-lookup"><span data-stu-id="f04a8-211">Exit codes and exceptions provide a mechanism toodetermine hello outcome of running a program, and they can help tooidentify any problems with hello execution of hello program.</span></span> <span data-ttu-id="f04a8-212">Szablon Menedżer zadań Hello implementuje hello kody wyjścia i wyjątków opisanych w tej sekcji.</span><span class="sxs-lookup"><span data-stu-id="f04a8-212">hello Job Manager template implements hello exit codes and exceptions described in this section.</span></span>

<span data-ttu-id="f04a8-213">Zadanie Menedżer zadania, które jest implementowana przy użyciu szablonu Menedżer zadań hello może zwracać trzy kody zakończenia możliwe:</span><span class="sxs-lookup"><span data-stu-id="f04a8-213">A job manager task that is implemented with hello Job Manager template can return three possible exit codes:</span></span>

| <span data-ttu-id="f04a8-214">Kod</span><span class="sxs-lookup"><span data-stu-id="f04a8-214">Code</span></span> | <span data-ttu-id="f04a8-215">Opis</span><span class="sxs-lookup"><span data-stu-id="f04a8-215">Description</span></span> |
| --- | --- |
| <span data-ttu-id="f04a8-216">0</span><span class="sxs-lookup"><span data-stu-id="f04a8-216">0</span></span> |<span data-ttu-id="f04a8-217">Menedżer zadań Hello została ukończona pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="f04a8-217">hello job manager completed successfully.</span></span> <span data-ttu-id="f04a8-218">Toocompletion uruchomiono zadanie kodu podziału, a wszystkie zadania zostały dodane toohello zadania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-218">Your job splitter code ran toocompletion, and all tasks were added toohello job.</span></span> |
| <span data-ttu-id="f04a8-219">1</span><span class="sxs-lookup"><span data-stu-id="f04a8-219">1</span></span> |<span data-ttu-id="f04a8-220">Hello zadania Menedżer zadania nie powiodło się z powodu wyjątku w części 'oczekiwano' hello program.</span><span class="sxs-lookup"><span data-stu-id="f04a8-220">hello job manager task failed with an exception in an 'expected' part of hello program.</span></span> <span data-ttu-id="f04a8-221">Hello wyjątek przetłumaczonego tooa JobManagerException informacji diagnostycznych i, w miarę możliwości sugestie dotyczące rozwiązywania hello awarii.</span><span class="sxs-lookup"><span data-stu-id="f04a8-221">hello exception was translated tooa JobManagerException with diagnostic information and, where possible, suggestions for resolving hello failure.</span></span> |
| <span data-ttu-id="f04a8-222">2</span><span class="sxs-lookup"><span data-stu-id="f04a8-222">2</span></span> |<span data-ttu-id="f04a8-223">Hello zadania Menedżer zadania nie powiodło się z powodu wyjątku "nieoczekiwane".</span><span class="sxs-lookup"><span data-stu-id="f04a8-223">hello job manager task failed with an 'unexpected' exception.</span></span> <span data-ttu-id="f04a8-224">Witaj wyjątek toostandard zarejestrowanych danych wyjściowych, ale Menedżer zadań hello był tooadd wszelkie dodatkowe informacje diagnostyczne lub korygowania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-224">hello exception was logged toostandard output, but hello job manager was unable tooadd any additional diagnostic or remediation information.</span></span> |

<span data-ttu-id="f04a8-225">W przypadku hello niepowodzenie zadania Menedżer zadania niektóre zadania mogą nadal dodano toohello usługi przed hello błąd.</span><span class="sxs-lookup"><span data-stu-id="f04a8-225">In hello case of job manager task failure, some tasks may still have been added toohello service before hello error occurred.</span></span> <span data-ttu-id="f04a8-226">Te zadania będą uruchamiane jako standardowe.</span><span class="sxs-lookup"><span data-stu-id="f04a8-226">These tasks will run as normal.</span></span> <span data-ttu-id="f04a8-227">Omówienie tę ścieżkę kodu w temacie "Niepowodzenie podziału zadania" powyżej.</span><span class="sxs-lookup"><span data-stu-id="f04a8-227">See "Job Splitter Failure" above for discussion of this code path.</span></span>

<span data-ttu-id="f04a8-228">Wszystkie informacje hello zwrócony przez wyjątki są zapisywane w plikach stdout.txt i stderr.txt.</span><span class="sxs-lookup"><span data-stu-id="f04a8-228">All hello information returned by exceptions is written into stdout.txt and stderr.txt files.</span></span> <span data-ttu-id="f04a8-229">Aby uzyskać więcej informacji, zobacz [obsługi błędu](batch-api-basics.md#error-handling).</span><span class="sxs-lookup"><span data-stu-id="f04a8-229">For more information, see [Error Handling](batch-api-basics.md#error-handling).</span></span>

### <a name="client-considerations"></a><span data-ttu-id="f04a8-230">Uwagi dotyczące klientów</span><span class="sxs-lookup"><span data-stu-id="f04a8-230">Client considerations</span></span>
<span data-ttu-id="f04a8-231">W tej sekcji opisano niektóre wymagania dotyczące wdrażania klienta podczas wywoływania Menedżer zadań, na podstawie tego szablonu.</span><span class="sxs-lookup"><span data-stu-id="f04a8-231">This section describes some client implementation requirements when invoking a job manager based on this template.</span></span> <span data-ttu-id="f04a8-232">Zobacz [jak toopass parametrów i zmiennych środowiskowych z hello kodu klienta](#pass-environment-settings) szczegółowe informacje na temat przekazywania parametry i ustawienia środowiska.</span><span class="sxs-lookup"><span data-stu-id="f04a8-232">See [How toopass parameters and environment variables from hello client code](#pass-environment-settings) for details on passing parameters and environment settings.</span></span>

<span data-ttu-id="f04a8-233">**Wymagane poświadczenia**</span><span class="sxs-lookup"><span data-stu-id="f04a8-233">**Mandatory credentials**</span></span>

<span data-ttu-id="f04a8-234">W kolejności tooadd zadania toohello Azure zadania wsadowego hello zadania Menedżer zadania wymaga swój adres URL konta partii zadań Azure i klucz.</span><span class="sxs-lookup"><span data-stu-id="f04a8-234">In order tooadd tasks toohello Azure Batch job, hello job manager task requires your Azure Batch account URL and key.</span></span> <span data-ttu-id="f04a8-235">Należy podać je w zmiennych środowiskowych o nazwie YOUR_BATCH_URL i YOUR_BATCH_KEY.</span><span class="sxs-lookup"><span data-stu-id="f04a8-235">You must pass these in environment variables named YOUR_BATCH_URL and YOUR_BATCH_KEY.</span></span> <span data-ttu-id="f04a8-236">Można ustawić w hello zadania Menedżera zadań ustawienia środowiska.</span><span class="sxs-lookup"><span data-stu-id="f04a8-236">You can set these in hello Job Manager task environment settings.</span></span> <span data-ttu-id="f04a8-237">Na przykład w języku C# klienta:</span><span class="sxs-lookup"><span data-stu-id="f04a8-237">For example, in a C# client:</span></span>

```csharp
job.JobManagerTask.EnvironmentSettings = new [] {
    new EnvironmentSetting("YOUR_BATCH_URL", "https://account.region.batch.azure.com"),
    new EnvironmentSetting("YOUR_BATCH_KEY", "{your_base64_encoded_account_key}"),
};
```
<span data-ttu-id="f04a8-238">**Poświadczenia magazynu**</span><span class="sxs-lookup"><span data-stu-id="f04a8-238">**Storage credentials**</span></span>

<span data-ttu-id="f04a8-239">Zazwyczaj hello klient nie potrzebuje tooprovide hello magazynu połączone konta poświadczenia toohello zadania Menedżer zadania, ponieważ () większości menedżerów zadania nie są konta magazynu hello połączone dostępu tooexplicitly i (b) hello połączonym koncie magazynu jest często dostępne zadania tooall jako wspólne ustawienia środowiska hello zadania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-239">Typically, hello client does not need tooprovide hello linked storage account credentials toohello job manager task because (a) most job managers do not need tooexplicitly access hello linked storage account and (b) hello linked storage account is often provided tooall tasks as a common environment setting for hello job.</span></span> <span data-ttu-id="f04a8-240">Jeśli nie udostępniasz hello połączone konta magazynu za pomocą typowych ustawień środowiska hello i Menedżer zadań hello wymaga dostępu do magazynu toolinked, a następnie, należy określić poświadczenia magazynu hello połączone w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="f04a8-240">If you are not providing hello linked storage account via hello common environment settings, and hello job manager requires access toolinked storage, then you should supply hello linked storage credentials as follows:</span></span>

```csharp
job.JobManagerTask.EnvironmentSettings = new [] {
    /* other environment settings */
    new EnvironmentSetting("LINKED_STORAGE_ACCOUNT", "{storageAccountName}"),
    new EnvironmentSetting("LINKED_STORAGE_KEY", "{storageAccountKey}"),
};
```

<span data-ttu-id="f04a8-241">**Ustawienia zadania Menedżer zadania**</span><span class="sxs-lookup"><span data-stu-id="f04a8-241">**Job manager task settings**</span></span>

<span data-ttu-id="f04a8-242">powitania klienta należy ustawić Menedżer zadań hello *killJobOnCompletion* Flaga zbyt**false**.</span><span class="sxs-lookup"><span data-stu-id="f04a8-242">hello client should set hello job manager *killJobOnCompletion* flag too**false**.</span></span>

<span data-ttu-id="f04a8-243">Jest zwykle bezpieczne dla powitania klienta tooset *runExclusive* za**false**.</span><span class="sxs-lookup"><span data-stu-id="f04a8-243">It is usually safe for hello client tooset *runExclusive* too**false**.</span></span>

<span data-ttu-id="f04a8-244">powitania klienta należy używać hello *resourceFiles* lub *applicationPackageReferences* węzeł obliczeniowy toohello wdrożone wykonywalnego Menedżer zadań hello toohave kolekcji (i jego wymaganych bibliotek DLL).</span><span class="sxs-lookup"><span data-stu-id="f04a8-244">hello client should use hello *resourceFiles* or *applicationPackageReferences* collection toohave hello job manager executable (and its required DLLs) deployed toohello compute node.</span></span>

<span data-ttu-id="f04a8-245">Domyślnie hello Menedżer zadań nie zostanie podjęta, jeśli działanie nie powiodło się.</span><span class="sxs-lookup"><span data-stu-id="f04a8-245">By default, hello job manager will not be retried if it fails.</span></span> <span data-ttu-id="f04a8-246">W zależności od logiki Menedżer zadania powitania klienta może być ponownych prób tooenable za pośrednictwem *ograniczenia*/*maxTaskRetryCount*.</span><span class="sxs-lookup"><span data-stu-id="f04a8-246">Depending on your job manager logic, hello client may want tooenable retries via *constraints*/*maxTaskRetryCount*.</span></span>

<span data-ttu-id="f04a8-247">**Ustawienia zadania**</span><span class="sxs-lookup"><span data-stu-id="f04a8-247">**Job settings**</span></span>

<span data-ttu-id="f04a8-248">Jeśli podziału zadania hello emituje zadania z zależnościami, powitania klienta należy ustawić tootrue usesTaskDependencies hello zadania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-248">If hello job splitter emits tasks with dependencies, hello client must set hello job's usesTaskDependencies tootrue.</span></span>

<span data-ttu-id="f04a8-249">W modelu podziału zadania hello jest rzadko klientów toowish tooadd zadania toojobs poza jakiego podziału zadania hello tworzy.</span><span class="sxs-lookup"><span data-stu-id="f04a8-249">In hello job splitter model, it is unusual for clients toowish tooadd tasks toojobs over and above what hello job splitter creates.</span></span> <span data-ttu-id="f04a8-250">powitania klienta w związku z tym należy zwykle ustawić hello zadania *onAllTasksComplete* za**terminatejob**.</span><span class="sxs-lookup"><span data-stu-id="f04a8-250">hello client should therefore normally set hello job's *onAllTasksComplete* too**terminatejob**.</span></span>

## <a name="task-processor-template"></a><span data-ttu-id="f04a8-251">Szablon zadania</span><span class="sxs-lookup"><span data-stu-id="f04a8-251">Task Processor template</span></span>
<span data-ttu-id="f04a8-252">Szablon zadań procesora pomaga tooimplement procesor zadania, które można wykonać następujące akcje hello:</span><span class="sxs-lookup"><span data-stu-id="f04a8-252">A Task Processor template helps you tooimplement a task processor that can perform hello following actions:</span></span>

* <span data-ttu-id="f04a8-253">Konfigurowanie hello informacji wymaganych przez każdy toorun zadania wsadowego.</span><span class="sxs-lookup"><span data-stu-id="f04a8-253">Set up hello information required by each Batch task toorun.</span></span>
* <span data-ttu-id="f04a8-254">Wykonanie wszystkich akcji wymagane przez poszczególne zadania wsadowego.</span><span class="sxs-lookup"><span data-stu-id="f04a8-254">Run all actions required by each Batch task.</span></span>
* <span data-ttu-id="f04a8-255">Zapisz dane wyjściowe zadania toopersistent magazynu.</span><span class="sxs-lookup"><span data-stu-id="f04a8-255">Save task outputs toopersistent storage.</span></span>

<span data-ttu-id="f04a8-256">Procesor zadania nie jest wymagane toorun zadania wsadowego, zaletą hello użycia procesora zadań jest tooimplement otoki wszystkie akcje wykonania zadania w jednej lokalizacji.</span><span class="sxs-lookup"><span data-stu-id="f04a8-256">Although a task processor is not required toorun tasks on Batch, hello key advantage of using a task processor is that it provides a wrapper tooimplement all task execution actions in one location.</span></span> <span data-ttu-id="f04a8-257">Na przykład jeśli potrzebujesz toorun kilka aplikacji w kontekście hello każdego zadania lub jeśli potrzebujesz toocopy toopersistent pamięci masowej po zakończeniu poszczególnych zadań.</span><span class="sxs-lookup"><span data-stu-id="f04a8-257">For example, if you need toorun several applications in hello context of each task, or if you need toocopy data toopersistent storage after completing each task.</span></span>

<span data-ttu-id="f04a8-258">Witaj akcje wykonywane przez hello zadań procesora może być jako prosty lub złożonych, a wiele lub kilku, co jest wymagane przez obciążenie.</span><span class="sxs-lookup"><span data-stu-id="f04a8-258">hello actions performed by hello task processor can be as simple or complex, and as many or as few, as required by your workload.</span></span> <span data-ttu-id="f04a8-259">Ponadto implementując wszystkie akcje zadania w jednym procesorze zadań, można łatwo zaktualizować lub dodać akcje na podstawie zmiany wymagań tooapplications lub obciążenia.</span><span class="sxs-lookup"><span data-stu-id="f04a8-259">Additionally, by implementing all task actions into one task processor, you can readily update or add actions based on changes tooapplications or workload requirements.</span></span> <span data-ttu-id="f04a8-260">Jednak w niektórych przypadkach procesor zadania może nie być optymalne rozwiązanie hello implementacji można dodać niepotrzebnych złożoności, na przykład podczas uruchamiania zadania, które można szybko uruchomić z wiersza polecenia, proste.</span><span class="sxs-lookup"><span data-stu-id="f04a8-260">However, in some cases a task processor might not be hello optimal solution for your implementation as it can add unnecessary complexity, for example when running jobs that can be quickly started from a simple command line.</span></span>

### <a name="create-a-task-processor-using-hello-template"></a><span data-ttu-id="f04a8-261">Tworzenie przy użyciu szablonu hello procesor zadania</span><span class="sxs-lookup"><span data-stu-id="f04a8-261">Create a Task Processor using hello template</span></span>
<span data-ttu-id="f04a8-262">tooadd rozwiązania toohello procesor zadania utworzone wcześniej, wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="f04a8-262">tooadd a task processor toohello solution that you created earlier, follow these steps:</span></span>

1. <span data-ttu-id="f04a8-263">Otwórz istniejącego rozwiązania programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f04a8-263">Open your existing solution in Visual Studio.</span></span>
2. <span data-ttu-id="f04a8-264">W Eksploratorze rozwiązań kliknij prawym przyciskiem myszy rozwiązanie hello, kliknij przycisk **Dodaj**, a następnie kliknij przycisk **nowy projekt**.</span><span class="sxs-lookup"><span data-stu-id="f04a8-264">In Solution Explorer, right-click hello solution, click **Add**, and then click **New Project**.</span></span>
3. <span data-ttu-id="f04a8-265">W obszarze **Visual C#**, kliknij przycisk **chmury**, a następnie kliknij przycisk **Azure partii zadań procesora**.</span><span class="sxs-lookup"><span data-stu-id="f04a8-265">Under **Visual C#**, click **Cloud**, and then click **Azure Batch Task Processor**.</span></span>
4. <span data-ttu-id="f04a8-266">Wpisz nazwę opisującą aplikacji i identyfikuje tego projektu jako hello zadań procesora (np. "LitwareTaskProcessor").</span><span class="sxs-lookup"><span data-stu-id="f04a8-266">Type a name that describes your application and identifies this project as hello task processor (e.g. "LitwareTaskProcessor").</span></span>
5. <span data-ttu-id="f04a8-267">toocreate hello projektu, kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="f04a8-267">toocreate hello project, click **OK**.</span></span>
6. <span data-ttu-id="f04a8-268">Na koniec kompilacji hello projektu tooforce Visual Studio tooload wszystkie odwołania do pakietów NuGet i tooverify, który hello projektu jest prawidłowa, przed rozpoczęciem modyfikowania jej.</span><span class="sxs-lookup"><span data-stu-id="f04a8-268">Finally, build hello project tooforce Visual Studio tooload all referenced NuGet packages and tooverify that hello project is valid before you start modifying it.</span></span>

### <a name="task-processor-template-files-and-their-purpose"></a><span data-ttu-id="f04a8-269">Pliki szablonów zadań procesora i ich przeznaczenie</span><span class="sxs-lookup"><span data-stu-id="f04a8-269">Task Processor template files and their purpose</span></span>
<span data-ttu-id="f04a8-270">Podczas tworzenia projektu za pomocą szablonu procesora zadań hello generuje trzech grup plików kodu:</span><span class="sxs-lookup"><span data-stu-id="f04a8-270">When you create a project using hello task processor template, it generates three groups of code files:</span></span>

* <span data-ttu-id="f04a8-271">plik główny program Hello (Program.cs).</span><span class="sxs-lookup"><span data-stu-id="f04a8-271">hello main program file (Program.cs).</span></span> <span data-ttu-id="f04a8-272">Zawiera punkt wejścia program hello i obsługa wyjątków najwyższego poziomu.</span><span class="sxs-lookup"><span data-stu-id="f04a8-272">This contains hello program entry point and top-level exception handling.</span></span> <span data-ttu-id="f04a8-273">Nie powinien zwykle toomodify to konieczne.</span><span class="sxs-lookup"><span data-stu-id="f04a8-273">You shouldn't normally need toomodify this.</span></span>
* <span data-ttu-id="f04a8-274">Witaj katalogu Framework.</span><span class="sxs-lookup"><span data-stu-id="f04a8-274">hello Framework directory.</span></span> <span data-ttu-id="f04a8-275">Zawiera pliki hello odpowiedzialny za hello "standardowy" pracy przez program Menedżer zadania hello — rozpakowywania parametrów, Dodawanie zadania wsadowego zadania toohello itp. Nie powinien zwykle należy toomodify tych plików.</span><span class="sxs-lookup"><span data-stu-id="f04a8-275">This contains hello files responsible for hello 'boilerplate' work done by hello job manager program – unpacking parameters, adding tasks toohello Batch job, etc. You shouldn't normally need toomodify these files.</span></span>
* <span data-ttu-id="f04a8-276">Witaj zadań procesora pliku (TaskProcessor.cs).</span><span class="sxs-lookup"><span data-stu-id="f04a8-276">hello task processor file (TaskProcessor.cs).</span></span> <span data-ttu-id="f04a8-277">Jest to, gdzie należy umieścić specyficzne dla aplikacji logiki wykonywania zadania (zazwyczaj wywołując limit tooan istniejący plik wykonywalny).</span><span class="sxs-lookup"><span data-stu-id="f04a8-277">This is where you will put your application-specific logic for executing a task (typically by calling out tooan existing executable).</span></span> <span data-ttu-id="f04a8-278">Wstępne i przetwarzanie końcowe kodu, na przykład pobranie dodatkowych danych lub przekazywania plików wyników również tu jest.</span><span class="sxs-lookup"><span data-stu-id="f04a8-278">Pre- and post-processing code, such as downloading additional data or uploading result files, also goes here.</span></span>

<span data-ttu-id="f04a8-279">Oczywiście można dodać dodatkowe pliki jako toosupport wymaganych zadań procesora kodu, w zależności od złożoności hello zadania hello dzielenia logiki.</span><span class="sxs-lookup"><span data-stu-id="f04a8-279">Of course you can add additional files as required toosupport your task processor code, depending on hello complexity of hello job splitting logic.</span></span>

<span data-ttu-id="f04a8-280">Szablon Hello generuje również standardowe pliki projektu .NET pliku .csproj app.config, packages.config, np.</span><span class="sxs-lookup"><span data-stu-id="f04a8-280">hello template also generates standard .NET project files such as a .csproj file, app.config, packages.config, etc.</span></span>

<span data-ttu-id="f04a8-281">Hello pozostałej części tej sekcji przedstawiono hello różnych plików i ich struktury kodu oraz opisano, co oznacza każdej klasy.</span><span class="sxs-lookup"><span data-stu-id="f04a8-281">hello rest of this section describes hello different files and their code structure, and explains what each class does.</span></span>

![Visual Studio Solution Explorer przedstawiający hello zadań procesora szablon rozwiązania][solution_explorer02]

<span data-ttu-id="f04a8-283">**Pliki Framework**</span><span class="sxs-lookup"><span data-stu-id="f04a8-283">**Framework files**</span></span>

* <span data-ttu-id="f04a8-284">`Configuration.cs`: Hermetyzuje hello ładowanie danych konfiguracji zadania, takie jak szczegóły konta wsadowego, poświadczenia konta magazynu połączone, informacje i zadań i parametrów zadania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-284">`Configuration.cs`: Encapsulates hello loading of job configuration data such as Batch account details, linked storage account credentials, job and task information, and job parameters.</span></span> <span data-ttu-id="f04a8-285">Umożliwia również dostęp zmienne środowiskowe zdefiniowane tooBatch (Zobacz ustawienia środowiska dla zadań, w dokumentacji partii hello) za pomocą klasy Configuration.EnvironmentVariable hello.</span><span class="sxs-lookup"><span data-stu-id="f04a8-285">It also provides access tooBatch-defined environment variables (see Environment settings for tasks, in hello Batch documentation) via hello Configuration.EnvironmentVariable class.</span></span>
* <span data-ttu-id="f04a8-286">`IConfiguration.cs`: Abstract hello implementacji hello klasa konfiguracji, tak aby można było z podziału zadania przy użyciu obiektu fałszywych lub zasymulować konfiguracji testu jednostkowego.</span><span class="sxs-lookup"><span data-stu-id="f04a8-286">`IConfiguration.cs`: Abstracts hello implementation of hello Configuration class, so that you can unit test your job splitter using a fake or mock configuration object.</span></span>
* <span data-ttu-id="f04a8-287">`TaskProcessorException.cs`: Błąd, który wymaga hello zadania Menedżera tooterminate reprezentuje.</span><span class="sxs-lookup"><span data-stu-id="f04a8-287">`TaskProcessorException.cs`: Represents an error that requires hello job manager tooterminate.</span></span> <span data-ttu-id="f04a8-288">TaskProcessorException jest używane toowrap błędy "Oczekiwano" gdzie określone informacje diagnostyczne można podać jako część rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-288">TaskProcessorException is used toowrap 'expected' errors where specific diagnostic information can be provided as part of termination.</span></span>

<span data-ttu-id="f04a8-289">**Procesor zadania**</span><span class="sxs-lookup"><span data-stu-id="f04a8-289">**Task Processor**</span></span>

* <span data-ttu-id="f04a8-290">`TaskProcessor.cs`: Uruchamia zadanie hello.</span><span class="sxs-lookup"><span data-stu-id="f04a8-290">`TaskProcessor.cs`: Runs hello task.</span></span> <span data-ttu-id="f04a8-291">Hello framework wywołuje metodę TaskProcessor.Run hello.</span><span class="sxs-lookup"><span data-stu-id="f04a8-291">hello framework invokes hello TaskProcessor.Run method.</span></span> <span data-ttu-id="f04a8-292">Jest klasa hello, gdzie będzie wstrzyknąć logiki specyficzne dla aplikacji hello zadania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-292">This is hello class where you will inject hello application-specific logic of your task.</span></span> <span data-ttu-id="f04a8-293">Implementuje metody Run hello do:</span><span class="sxs-lookup"><span data-stu-id="f04a8-293">Implement hello Run method to:</span></span>
  * <span data-ttu-id="f04a8-294">Analizowanie i sprawdź poprawność parametrów zadania</span><span class="sxs-lookup"><span data-stu-id="f04a8-294">Parse and validate any task parameters</span></span>
  * <span data-ttu-id="f04a8-295">Redagowanie hello wiersza polecenia dla dowolnego programu zewnętrznego ma tooinvoke</span><span class="sxs-lookup"><span data-stu-id="f04a8-295">Compose hello command line for any external program you want tooinvoke</span></span>
  * <span data-ttu-id="f04a8-296">Zaloguj się żadnych informacji diagnostycznych, które mogą wymagać na potrzeby debugowania</span><span class="sxs-lookup"><span data-stu-id="f04a8-296">Log any diagnostic information you may require for debugging purposes</span></span>
  * <span data-ttu-id="f04a8-297">Rozpocznij proces przy użyciu tego wiersza polecenia</span><span class="sxs-lookup"><span data-stu-id="f04a8-297">Start a process using that command line</span></span>
  * <span data-ttu-id="f04a8-298">Poczekaj, aż hello tooexit procesu</span><span class="sxs-lookup"><span data-stu-id="f04a8-298">Wait for hello process tooexit</span></span>
  * <span data-ttu-id="f04a8-299">Przechwytywanie kod zakończenia hello hello toodetermine procesu, jeśli zakończyło się pomyślnie, lub nie powiodło się</span><span class="sxs-lookup"><span data-stu-id="f04a8-299">Capture hello exit code of hello process toodetermine if it succeeded or failed</span></span>
  * <span data-ttu-id="f04a8-300">Zapisz wszystkie pliki wyjściowe, które mają tookeep toopersistent magazynu</span><span class="sxs-lookup"><span data-stu-id="f04a8-300">Save any output files you want tookeep toopersistent storage</span></span>

<span data-ttu-id="f04a8-301">**Standardowe pliki projektu wiersza polecenia platformy .NET**</span><span class="sxs-lookup"><span data-stu-id="f04a8-301">**Standard .NET command line project files**</span></span>

* <span data-ttu-id="f04a8-302">`App.config`: Standardowego pliku konfiguracji aplikacji .NET.</span><span class="sxs-lookup"><span data-stu-id="f04a8-302">`App.config`: Standard .NET application configuration file.</span></span>
* <span data-ttu-id="f04a8-303">`Packages.config`: Standardowy plik zależności pakietu NuGet.</span><span class="sxs-lookup"><span data-stu-id="f04a8-303">`Packages.config`: Standard NuGet package dependency file.</span></span>
* <span data-ttu-id="f04a8-304">`Program.cs`: Zawiera punkt wejścia program hello oraz wyjątków najwyższego poziomu.</span><span class="sxs-lookup"><span data-stu-id="f04a8-304">`Program.cs`: Contains hello program entry point and top-level exception handling.</span></span>

## <a name="implementing-hello-task-processor"></a><span data-ttu-id="f04a8-305">Implementowanie hello zadań procesora</span><span class="sxs-lookup"><span data-stu-id="f04a8-305">Implementing hello task processor</span></span>
<span data-ttu-id="f04a8-306">Po otwarciu projektu szablonu zadań procesora hello hello projektu zostanie otworzył pliku TaskProcessor.cs hello domyślnie.</span><span class="sxs-lookup"><span data-stu-id="f04a8-306">When you open hello Task Processor template project, hello project will have hello TaskProcessor.cs file open by default.</span></span> <span data-ttu-id="f04a8-307">Można zaimplementować logikę hello Uruchom zadania hello w obciążenia przy użyciu metody Run() hello pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="f04a8-307">You can implement hello run logic for hello tasks in your workload by using hello Run() method shown below:</span></span>

```csharp
/// <summary>
/// Runs hello task processing logic. This is where you inject
/// your application-specific logic for decomposing hello job into tasks.
///
/// hello task processor framework invokes hello Run method for you; you need
/// only tooimplement it, not toocall it yourself. Typically, your
/// implementation will execute an external program (from resource files or
/// an application package), check hello exit code of that program and
/// save output files toopersistent storage.
/// </summary>
public async Task<int> Run()

{
    try
    {
        //Your code for hello task processor goes here.
        var command = $"compare {_parameters["Frame1"]} {_parameters["Frame2"]} compare.gif";
        using (var process = Process.Start($"cmd /c {command}"))
        {
            process.WaitForExit();
            var taskOutputStorage = new TaskOutputStorage(
            _configuration.StorageAccount,
            _configuration.JobId,
            _configuration.TaskId
            );
            await taskOutputStorage.SaveAsync(
            TaskOutputKind.TaskOutput,
            @"..\stdout.txt",
            @"stdout.txt"
            );
            return process.ExitCode;
        }
    }
    catch (Exception ex)
    {
        throw new TaskProcessorException(
        $"{ex.GetType().Name} exception in run task processor: {ex.Message}",
        ex
        );
    }
}
```
> [!NOTE]
> <span data-ttu-id="f04a8-308">Witaj adnotacjami części hello metody Run() jest hello tylko sekcja hello zadań procesora szablonu kodu, który jest przeznaczony dla należy toomodify przez dodanie logiki hello uruchamiania zadań hello obciążenie.</span><span class="sxs-lookup"><span data-stu-id="f04a8-308">hello annotated section in hello Run() method is hello only section of hello Task Processor template code that is intended for you toomodify by adding hello run logic for hello tasks in your workload.</span></span> <span data-ttu-id="f04a8-309">Jeśli chcesz toomodify różnych części szablonu hello, należy najpierw zapoznać się z działanie wsadowego przez przejrzenie dokumentacji partii hello i wypróbować kilka przykładów kodu hello partii.</span><span class="sxs-lookup"><span data-stu-id="f04a8-309">If you want toomodify a different section of hello template, please first familiarize yourself with how Batch works by reviewing hello Batch documentation and trying out a few of hello Batch code samples.</span></span>
> 
> 

<span data-ttu-id="f04a8-310">Hello metody Run() jest odpowiedzialny za uruchamianie hello wiersza polecenia, uruchamianie procesów z co najmniej jeden oczekiwanie na wszystkich toocomplete procesu, zapisywanie wyników hello i na koniec zwróciło kod zakończenia.</span><span class="sxs-lookup"><span data-stu-id="f04a8-310">hello Run() method is responsible for launching hello command line, starting one or more processes, waiting for all process toocomplete, saving hello results, and finally returning with an exit code.</span></span> <span data-ttu-id="f04a8-311">Witaj metody Run() polega na tym, gdzie wdrożyć hello przetwarzania logiki dla zadań.</span><span class="sxs-lookup"><span data-stu-id="f04a8-311">hello Run() method is where you implement hello processing logic for your tasks.</span></span> <span data-ttu-id="f04a8-312">Witaj zadań procesora framework wywołuje metodę Run() hello automatycznie; nie trzeba toocall ją samodzielnie.</span><span class="sxs-lookup"><span data-stu-id="f04a8-312">hello task processor framework invokes hello Run() method for you; you do not need toocall it yourself.</span></span>

<span data-ttu-id="f04a8-313">Implementacji Run() ma dostęp do:</span><span class="sxs-lookup"><span data-stu-id="f04a8-313">Your Run() implementation has access to:</span></span>

* <span data-ttu-id="f04a8-314">Witaj parametrów zadania przy użyciu hello `_parameters` pola.</span><span class="sxs-lookup"><span data-stu-id="f04a8-314">hello task parameters, via hello `_parameters` field.</span></span>
* <span data-ttu-id="f04a8-315">identyfikatory poleceń i zadań, za pośrednictwem hello Hello `_jobId` i `_taskId` pól.</span><span class="sxs-lookup"><span data-stu-id="f04a8-315">hello job and task ids, via hello `_jobId` and `_taskId` fields.</span></span>
* <span data-ttu-id="f04a8-316">Witaj zadań konfiguracji, za pomocą hello `_configuration` pola.</span><span class="sxs-lookup"><span data-stu-id="f04a8-316">hello task configuration, via hello `_configuration` field.</span></span>

<span data-ttu-id="f04a8-317">**Niepowodzenie zadania**</span><span class="sxs-lookup"><span data-stu-id="f04a8-317">**Task failure**</span></span>

<span data-ttu-id="f04a8-318">W razie awarii wyjściu metody Run() hello Zgłaszanie wyjątku, ale w formancie kodu zakończenia zadania hello spowoduje to pozostawienie hello wyjątek najwyższego poziomu obsługi.</span><span class="sxs-lookup"><span data-stu-id="f04a8-318">In case of failure, you can exit hello Run() method by throwing an exception, but this leaves hello top level exception handler in control of hello task exit code.</span></span> <span data-ttu-id="f04a8-319">Jeśli potrzebujesz kod zakończenia hello toocontrol tak, aby odróżnić różnego rodzaju błąd, na przykład na potrzeby diagnostyki lub ponieważ niektóre rodzaje uszkodzenia należy zakończyć hello zadania i inne osoby nie powinien, a następnie metody Run() hello powinny być kończone zwracając Kod wyjścia równy zero.</span><span class="sxs-lookup"><span data-stu-id="f04a8-319">If you need toocontrol hello exit code so that you can distinguish different types of failure, for example for diagnostic purposes or because some failure modes should terminate hello job and others should not, then you should exit hello Run() method by returning a non-zero exit code.</span></span> <span data-ttu-id="f04a8-320">Staje się on kod zakończenia zadania hello.</span><span class="sxs-lookup"><span data-stu-id="f04a8-320">This becomes hello task exit code.</span></span>

### <a name="exit-codes-and-exceptions-in-hello-task-processor-template"></a><span data-ttu-id="f04a8-321">Zakończ kody i wyjątków w szablonie zadań procesora hello</span><span class="sxs-lookup"><span data-stu-id="f04a8-321">Exit codes and exceptions in hello Task Processor template</span></span>
<span data-ttu-id="f04a8-322">Kody wyjścia i wyjątków udostępniają mechanizm toodetermine hello wynik działania programu, a są pomocne w identyfikacji problemów z wykonywania hello hello programu.</span><span class="sxs-lookup"><span data-stu-id="f04a8-322">Exit codes and exceptions provide a mechanism toodetermine hello outcome of running a program, and they can help identify any problems with hello execution of hello program.</span></span> <span data-ttu-id="f04a8-323">szablon zadania Hello implementuje hello kody wyjścia i wyjątków opisanych w tej sekcji.</span><span class="sxs-lookup"><span data-stu-id="f04a8-323">hello Task Processor template implements hello exit codes and exceptions described in this section.</span></span>

<span data-ttu-id="f04a8-324">Zadanie procesora zadań, które jest implementowana przy użyciu szablonu zadań procesora hello może zwracać trzy kody zakończenia możliwe:</span><span class="sxs-lookup"><span data-stu-id="f04a8-324">A task processor task that is implemented with hello Task Processor template can return three possible exit codes:</span></span>

| <span data-ttu-id="f04a8-325">Kod</span><span class="sxs-lookup"><span data-stu-id="f04a8-325">Code</span></span> | <span data-ttu-id="f04a8-326">Opis</span><span class="sxs-lookup"><span data-stu-id="f04a8-326">Description</span></span> |
| --- | --- |
| <span data-ttu-id="f04a8-327">[Process.ExitCode][process_exitcode]</span><span class="sxs-lookup"><span data-stu-id="f04a8-327">[Process.ExitCode][process_exitcode]</span></span> |<span data-ttu-id="f04a8-328">Procesor zadania Hello uruchomiono toocompletion.</span><span class="sxs-lookup"><span data-stu-id="f04a8-328">hello task processor ran toocompletion.</span></span> <span data-ttu-id="f04a8-329">Należy pamiętać, że to nie oznacza, że ten program hello, wywołany zakończyła się pomyślnie — tylko ten procesor zadania hello pomyślnie wywołany i wykonać wszelkie przetwarzania końcowego bez wyjątków.</span><span class="sxs-lookup"><span data-stu-id="f04a8-329">Note that this does not imply that hello program you invoked was successful – only that hello task processor invoked it successfully and performed any post-processing without exceptions.</span></span> <span data-ttu-id="f04a8-330">znaczenie Hello kod zakończenia hello zależy program hello wywoływane — zwykle kod zakończenia 0 oznacza, że hello program zakończyło się pomyślnie i inny kod zakończenia oznacza, że hello program nie powiodło się.</span><span class="sxs-lookup"><span data-stu-id="f04a8-330">hello meaning of hello exit code depends on hello invoked program – typically exit code 0 means hello program succeeded and any other exit code means hello program failed.</span></span> |
| <span data-ttu-id="f04a8-331">1</span><span class="sxs-lookup"><span data-stu-id="f04a8-331">1</span></span> |<span data-ttu-id="f04a8-332">Hello zadań procesora nie powiodło się z powodu wyjątku w części 'oczekiwano' hello program.</span><span class="sxs-lookup"><span data-stu-id="f04a8-332">hello task processor failed with an exception in an 'expected' part of hello program.</span></span> <span data-ttu-id="f04a8-333">Witaj wyjątek przetłumaczonego tooa `TaskProcessorException` informacji diagnostycznych i, jeśli to możliwe, sugestie dotyczące rozwiązywania hello awarii.</span><span class="sxs-lookup"><span data-stu-id="f04a8-333">hello exception was translated tooa `TaskProcessorException` with diagnostic information and, where possible, suggestions for resolving hello failure.</span></span> |
| <span data-ttu-id="f04a8-334">2</span><span class="sxs-lookup"><span data-stu-id="f04a8-334">2</span></span> |<span data-ttu-id="f04a8-335">Procesor zadania Hello nie powiodło się z powodu wyjątku "nieoczekiwane".</span><span class="sxs-lookup"><span data-stu-id="f04a8-335">hello task processor failed with an 'unexpected' exception.</span></span> <span data-ttu-id="f04a8-336">Witaj wyjątek toostandard zarejestrowanych danych wyjściowych, ale hello zadań procesora był tooadd wszelkie dodatkowe informacje diagnostyczne lub korygowania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-336">hello exception was logged toostandard output, but hello task processor was unable tooadd any additional diagnostic or remediation information.</span></span> |

> [!NOTE]
> <span data-ttu-id="f04a8-337">Jeśli program hello, który wywołuje używa zakończenia kody 1 i 2 tooindicate określony błąd tryby, następnie przy użyciu kodów zakończenia 1 i 2 dla błędów procesor zadania jest niejednoznaczna.</span><span class="sxs-lookup"><span data-stu-id="f04a8-337">If hello program you invoke uses exit codes 1 and 2 tooindicate specific failure modes, then using exit codes 1 and 2 for task processor errors is ambiguous.</span></span> <span data-ttu-id="f04a8-338">Kodów zakończenia toodistinctive kody błędów zadań procesora można zmienić przez edycję przypadków wyjątek hello w pliku Program.cs hello.</span><span class="sxs-lookup"><span data-stu-id="f04a8-338">You can change these task processor error codes toodistinctive exit codes by editing hello exception cases in hello Program.cs file.</span></span>
> 
> 

<span data-ttu-id="f04a8-339">Wszystkie informacje hello zwrócony przez wyjątki są zapisywane w plikach stdout.txt i stderr.txt.</span><span class="sxs-lookup"><span data-stu-id="f04a8-339">All hello information returned by exceptions is written into stdout.txt and stderr.txt files.</span></span> <span data-ttu-id="f04a8-340">Aby uzyskać więcej informacji zobacz błąd obsługi, w hello dokumentację partii.</span><span class="sxs-lookup"><span data-stu-id="f04a8-340">For more information, see Error Handling, in hello Batch documentation.</span></span>

### <a name="client-considerations"></a><span data-ttu-id="f04a8-341">Uwagi dotyczące klientów</span><span class="sxs-lookup"><span data-stu-id="f04a8-341">Client considerations</span></span>
<span data-ttu-id="f04a8-342">**Poświadczenia magazynu**</span><span class="sxs-lookup"><span data-stu-id="f04a8-342">**Storage credentials**</span></span>

<span data-ttu-id="f04a8-343">Jeśli procesor zadania używa wyjść toopersist magazynu obiektów blob platformy Azure, na przykład za pomocą hello pliku konwencje pomocnika biblioteki, musi mieć dostęp za*albo* hello poświadczeń konta magazynu w chmurze *lub* kontener adresu URL obiektu blob zawierającego sygnatury dostępu współdzielonego (SAS).</span><span class="sxs-lookup"><span data-stu-id="f04a8-343">If your task processor uses Azure blob storage toopersist outputs, for example using hello file conventions helper library, then it needs access too*either* hello cloud storage account credentials *or* a blob container URL that includes a shared access signature (SAS).</span></span> <span data-ttu-id="f04a8-344">Szablon Hello obsługuje podawania poświadczeń za pomocą wspólnych zmiennych środowiskowych.</span><span class="sxs-lookup"><span data-stu-id="f04a8-344">hello template includes support for providing credentials via common environment variables.</span></span> <span data-ttu-id="f04a8-345">Klient może przekazać hello magazynu poświadczeń w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="f04a8-345">Your client can pass hello storage credentials as follows:</span></span>

```csharp
job.CommonEnvironmentSettings = new [] {
    new EnvironmentSetting("LINKED_STORAGE_ACCOUNT", "{storageAccountName}"),
    new EnvironmentSetting("LINKED_STORAGE_KEY", "{storageAccountKey}"),
};
```

<span data-ttu-id="f04a8-346">Konto magazynu Hello jest dostępna w hello klasy TaskProcessor za pośrednictwem hello `_configuration.StorageAccount` właściwości.</span><span class="sxs-lookup"><span data-stu-id="f04a8-346">hello storage account is then available in hello TaskProcessor class via hello `_configuration.StorageAccount` property.</span></span>

<span data-ttu-id="f04a8-347">Jeśli wolisz toouse adresu URL kontenera za sygnatury dostępu Współdzielonego, można również przekazać to za pomocą ustawienia środowiska typowe zadania, ale hello zadań procesora szablon nie zawiera wbudowaną obsługę to.</span><span class="sxs-lookup"><span data-stu-id="f04a8-347">If you prefer toouse a container URL with SAS, you can also pass this via an job common environment setting, but hello task processor template does not currently include built-in support for this.</span></span>

<span data-ttu-id="f04a8-348">**Konfiguracja magazynu**</span><span class="sxs-lookup"><span data-stu-id="f04a8-348">**Storage setup**</span></span>

<span data-ttu-id="f04a8-349">Zaleca się zadania powitania klienta lub zadania Menedżera tworzyć żadnych kontenerów wymagane przez zadania przed dodaniem hello zadania toohello zadania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-349">It is recommended that hello client or job manager task create any containers required by tasks before adding hello tasks toohello job.</span></span> <span data-ttu-id="f04a8-350">Jest to konieczne, korzystając z adresu URL kontenera do skojarzeń zabezpieczeń, w związku adresu URL nie ma uprawnień toocreate hello kontenera.</span><span class="sxs-lookup"><span data-stu-id="f04a8-350">This is mandatory if you use a container URL with SAS, as such a URL does not include permission toocreate hello container.</span></span> <span data-ttu-id="f04a8-351">Zaleca się nawet wtedy, gdy przekazujesz poświadczeń konta magazynu, zgodnie z zapisuje każdego zadania o toocall CloudBlobContainer.CreateIfNotExistsAsync hello kontenera.</span><span class="sxs-lookup"><span data-stu-id="f04a8-351">It is recommended even if you pass storage account credentials, as it saves every task having toocall CloudBlobContainer.CreateIfNotExistsAsync on hello container.</span></span>

## <a name="pass-parameters-and-environment-variables"></a><span data-ttu-id="f04a8-352">Przekaż parametry i zmienne środowiskowe</span><span class="sxs-lookup"><span data-stu-id="f04a8-352">Pass parameters and environment variables</span></span>
### <a name="pass-environment-settings"></a><span data-ttu-id="f04a8-353">Przekaż ustawienia środowiska</span><span class="sxs-lookup"><span data-stu-id="f04a8-353">Pass environment settings</span></span>
<span data-ttu-id="f04a8-354">Klient może przekazać informacje toohello zadania Menedżera zadań w formie hello ustawienia środowiska.</span><span class="sxs-lookup"><span data-stu-id="f04a8-354">A client can pass information toohello job manager task in hello form of environment settings.</span></span> <span data-ttu-id="f04a8-355">Te informacje można następnie używane przez zadanie Menedżer zadania hello, podczas generowania hello zadań procesora zadań, które zostanie uruchomiony jako część hello obliczeniowe zadania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-355">This information can then be used by hello job manager task when generating hello task processor tasks that will run as part of hello compute job.</span></span> <span data-ttu-id="f04a8-356">Przykładami informacji hello, które można przekazać jako ustawienia środowiska są:</span><span class="sxs-lookup"><span data-stu-id="f04a8-356">Examples of hello information that you can pass as environment settings are:</span></span>

* <span data-ttu-id="f04a8-357">Klucze konta magazynu nazwy i konta</span><span class="sxs-lookup"><span data-stu-id="f04a8-357">Storage account name and account keys</span></span>
* <span data-ttu-id="f04a8-358">Adres URL konta usługi partia zadań</span><span class="sxs-lookup"><span data-stu-id="f04a8-358">Batch account URL</span></span>
* <span data-ttu-id="f04a8-359">Klucz konta usługi partia zadań</span><span class="sxs-lookup"><span data-stu-id="f04a8-359">Batch account key</span></span>

<span data-ttu-id="f04a8-360">Witaj usługa partia zadań ma prosty mechanizm toopass środowiska ustawienia tooa zadania Menedżer zadania przy użyciu hello `EnvironmentSettings` właściwości w [Microsoft.Azure.Batch.JobManagerTask][net_jobmanagertask].</span><span class="sxs-lookup"><span data-stu-id="f04a8-360">hello Batch service has a simple mechanism toopass environment settings tooa job manager task by using hello `EnvironmentSettings` property in [Microsoft.Azure.Batch.JobManagerTask][net_jobmanagertask].</span></span>

<span data-ttu-id="f04a8-361">Na przykład tooget hello `BatchClient` wystąpienia dla konta usługi partia zadań, można przekazać jako zmienne środowiskowe z powitania klienta kodu hello adresu URL i klucza poświadczeń dla konta wsadowego hello udostępnionych.</span><span class="sxs-lookup"><span data-stu-id="f04a8-361">For example, tooget hello `BatchClient` instance for a Batch account, you can pass as environment variables from hello client code hello URL and shared key credentials for hello Batch account.</span></span> <span data-ttu-id="f04a8-362">Podobnie tooaccess hello konto magazynu połączone konta usługi partia zadań toohello, nazwa konta magazynu hello i klucz konta magazynu hello można przekazać jako zmienne środowiskowe.</span><span class="sxs-lookup"><span data-stu-id="f04a8-362">Likewise, tooaccess hello storage account that is linked toohello Batch account, you can pass hello storage account name and hello storage account key as environment variables.</span></span>

### <a name="pass-parameters-toohello-job-manager-template"></a><span data-ttu-id="f04a8-363">Przekazywanie parametrów toohello Menedżer zadań szablonu</span><span class="sxs-lookup"><span data-stu-id="f04a8-363">Pass parameters toohello Job Manager template</span></span>
<span data-ttu-id="f04a8-364">W wielu przypadkach jest przydatne toopass-job parametry toohello Menedżera zadanie, albo zadania hello toocontrol podziału procesu lub zadania hello tooconfigure hello zadania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-364">In many cases, it's useful toopass per-job parameters toohello job manager task, either toocontrol hello job splitting process or tooconfigure hello tasks for hello job.</span></span> <span data-ttu-id="f04a8-365">Można to zrobić, przekazując plik JSON o nazwie parameters.JSON następującym kodem jako plik zasobów hello zadania Menedżer zadania.</span><span class="sxs-lookup"><span data-stu-id="f04a8-365">You can do this by uploading a JSON file named parameters.json as a resource file for hello job manager task.</span></span> <span data-ttu-id="f04a8-366">Parametry Hello następnie może stać się dostępne w hello `JobSplitter._parameters` w hello Menedżer zadań szablonu.</span><span class="sxs-lookup"><span data-stu-id="f04a8-366">hello parameters can then become available in hello `JobSplitter._parameters` field in hello Job Manager template.</span></span>

> [!NOTE]
> <span data-ttu-id="f04a8-367">Program obsługi wbudowanych parametru Hello wspiera tylko słowniki ciąg ciąg.</span><span class="sxs-lookup"><span data-stu-id="f04a8-367">hello built-in parameter handler supports only string-to-string dictionaries.</span></span> <span data-ttu-id="f04a8-368">Chcąc toopass złożone JSON wartości jako wartości parametrów, będzie konieczne toopass je jako ciągi i analizować je w podziału zadania hello lub modyfikuje hello framework `Configuration.GetJobParameters` metody.</span><span class="sxs-lookup"><span data-stu-id="f04a8-368">If you want toopass complex JSON values as parameter values, you will need toopass these as strings and parse them in hello job splitter, or modify hello framework's `Configuration.GetJobParameters` method.</span></span>
> 
> 

### <a name="pass-parameters-toohello-task-processor-template"></a><span data-ttu-id="f04a8-369">Przekazywanie parametrów toohello procesor zadania szablonu</span><span class="sxs-lookup"><span data-stu-id="f04a8-369">Pass parameters toohello Task Processor template</span></span>
<span data-ttu-id="f04a8-370">Można również przekazać parametrów zadania tooindividual implementowane przy użyciu szablonu zadań procesora hello.</span><span class="sxs-lookup"><span data-stu-id="f04a8-370">You can also pass parameters tooindividual tasks implemented using hello Task Processor template.</span></span> <span data-ttu-id="f04a8-371">Podobnie jak przy użyciu szablonu Menedżer zadania hello, hello zadań procesora szablon wyszukuje plik zasobów o nazwie</span><span class="sxs-lookup"><span data-stu-id="f04a8-371">Just as with hello job manager template, hello task processor template looks for a resource file named</span></span>

<span data-ttu-id="f04a8-372">parameters.JSON następującym kodem, a jeśli go znaleziono ładuje go jako słownik parametrów hello.</span><span class="sxs-lookup"><span data-stu-id="f04a8-372">parameters.json, and if found it loads it as hello parameters dictionary.</span></span> <span data-ttu-id="f04a8-373">Istnieje kilka opcji dotyczących sposobu toopass toohello parametrów zadania procesora:</span><span class="sxs-lookup"><span data-stu-id="f04a8-373">There are a couple of options for how toopass parameters toohello task processor tasks:</span></span>

* <span data-ttu-id="f04a8-374">Ponowne użycie parametrów zadania hello JSON.</span><span class="sxs-lookup"><span data-stu-id="f04a8-374">Reuse hello job parameters JSON.</span></span> <span data-ttu-id="f04a8-375">Działa to dobrze, jeśli tylko parametry hello są pokazane na poziomie zadania (na przykład renderowania wysokość i szerokość).</span><span class="sxs-lookup"><span data-stu-id="f04a8-375">This works well if hello only parameters are job-wide ones (for example, a render height and width).</span></span> <span data-ttu-id="f04a8-376">toodo, podczas tworzenia CloudTask w podziału zadania hello, dodać odwołanie do obiektu pliku zasobów parameters.JSON następującym kodem toohello z ResourceFiles zadań hello zadania Menedżera (`JobSplitter._jobManagerTask.ResourceFiles`) toohello CloudTask ResourceFiles kolekcji.</span><span class="sxs-lookup"><span data-stu-id="f04a8-376">toodo this, when creating a CloudTask in hello job splitter, add a reference toohello parameters.json resource file object from hello job manager task's ResourceFiles (`JobSplitter._jobManagerTask.ResourceFiles`) toohello CloudTask's ResourceFiles collection.</span></span>
* <span data-ttu-id="f04a8-377">Generowanie przekazania dokumentu parameters.JSON następującym kodem poszczególnych zadań w ramach wykonywania podziału zadań i odwołania do tego obiektu blob w kolekcji plików zasobów hello zadań.</span><span class="sxs-lookup"><span data-stu-id="f04a8-377">Generate and upload a task-specific parameters.json document as part of job splitter execution, and reference that blob in hello task's resource files collection.</span></span> <span data-ttu-id="f04a8-378">Jest to konieczne, jeśli różne zadania mają różne parametry.</span><span class="sxs-lookup"><span data-stu-id="f04a8-378">This is necessary if different tasks have different parameters.</span></span> <span data-ttu-id="f04a8-379">Przykładem może być scenariusza renderowania 3W, gdzie indeksu ramki hello jest przekazywany toohello zadań jako parametr.</span><span class="sxs-lookup"><span data-stu-id="f04a8-379">An example might be a 3D rendering scenario where hello frame index is passed toohello task as a parameter.</span></span>

> [!NOTE]
> <span data-ttu-id="f04a8-380">Program obsługi wbudowanych parametru Hello wspiera tylko słowniki ciąg ciąg.</span><span class="sxs-lookup"><span data-stu-id="f04a8-380">hello built-in parameter handler supports only string-to-string dictionaries.</span></span> <span data-ttu-id="f04a8-381">Chcąc toopass złożone JSON wartości jako wartości parametrów, będzie konieczne toopass je jako ciągi i analizować je w procesorze zadań hello lub modyfikuje hello framework `Configuration.GetTaskParameters` metody.</span><span class="sxs-lookup"><span data-stu-id="f04a8-381">If you want toopass complex JSON values as parameter values, you will need toopass these as strings and parse them in hello task processor, or modify hello framework's `Configuration.GetTaskParameters` method.</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="f04a8-382">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="f04a8-382">Next steps</span></span>
### <a name="persist-job-and-task-output-tooazure-storage"></a><span data-ttu-id="f04a8-383">Utrwalanie zadań i zadań tooAzure wyjście magazynu</span><span class="sxs-lookup"><span data-stu-id="f04a8-383">Persist job and task output tooAzure Storage</span></span>
<span data-ttu-id="f04a8-384">Kolejnym narzędziem pomocne w partii opracowywanie rozwiązań jest [konwencje pliku wsadowego Azure][nuget_package].</span><span class="sxs-lookup"><span data-stu-id="f04a8-384">Another helpful tool in Batch solution development is [Azure Batch File Conventions][nuget_package].</span></span> <span data-ttu-id="f04a8-385">Użyj tego Biblioteka klas programu .NET (obecnie w wersji zapoznawczej) w magazynie tooeasily aplikacji partiami platformy .NET i pobieranie tooand dane wyjściowe zadania z usługi Magazyn Azure.</span><span class="sxs-lookup"><span data-stu-id="f04a8-385">Use this .NET class library (currently in preview) in your Batch .NET applications tooeasily store and retrieve task outputs tooand from Azure Storage.</span></span> <span data-ttu-id="f04a8-386">[Utrwalić danych wyjściowych i zadań partii zadań Azure](batch-task-output.md) zawiera pełne omówienie hello biblioteki i jej użycia.</span><span class="sxs-lookup"><span data-stu-id="f04a8-386">[Persist Azure Batch job and task output](batch-task-output.md) contains a full discussion of hello library and its usage.</span></span>

### <a name="batch-forum"></a><span data-ttu-id="f04a8-387">Forum usługi partia zadań</span><span class="sxs-lookup"><span data-stu-id="f04a8-387">Batch Forum</span></span>
<span data-ttu-id="f04a8-388">Witaj [Forum usługi partia zadań Azure] [ forum] w witrynie MSDN jest doskonałym umieścić toodiscuss partii i zadać pytania dotyczące usługi hello.</span><span class="sxs-lookup"><span data-stu-id="f04a8-388">hello [Azure Batch Forum][forum] on MSDN is a great place toodiscuss Batch and ask questions about hello service.</span></span> <span data-ttu-id="f04a8-389">HEAD na za pośrednictwem przydatne Posty "trwałe" i opublikuj swoje pytania powstałych podczas tworzenia własnych rozwiązań partii.</span><span class="sxs-lookup"><span data-stu-id="f04a8-389">Head on over for helpful "sticky" posts, and post your questions as they arise while you build your Batch solutions.</span></span>

[forum]: https://social.msdn.microsoft.com/forums/azure/en-US/home?forum=azurebatch
[net_jobmanagertask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.jobmanagertask.aspx
[github_samples]: https://github.com/Azure/azure-batch-samples
[nuget_package]: https://www.nuget.org/packages/Microsoft.Azure.Batch.Conventions.Files
[process_exitcode]: https://msdn.microsoft.com/library/system.diagnostics.process.exitcode.aspx
[vs_gallery]: https://visualstudiogallery.msdn.microsoft.com/
[vs_gallery_templates]: https://go.microsoft.com/fwlink/?linkid=820714
[vs_find_use_ext]: https://msdn.microsoft.com/library/dd293638.aspx

[diagram01]: ./media/batch-visual-studio-templates/diagram01.png
[solution_explorer01]: ./media/batch-visual-studio-templates/solution_explorer01.png
[solution_explorer02]: ./media/batch-visual-studio-templates/solution_explorer02.png
