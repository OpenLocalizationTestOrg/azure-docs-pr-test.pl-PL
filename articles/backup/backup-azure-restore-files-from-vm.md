---
title: "Kopia zapasowa Azure: Odzyskiwanie plików i folderów z kopii zapasowej maszyny Wirtualnej platformy Azure | Dokumentacja firmy Microsoft"
description: "Odzyskiwanie plików z punktu odzyskiwania maszyny wirtualnej platformy Azure"
services: backup
documentationcenter: dev-center-name
author: pvrk
manager: shivamg
keywords: "odzyskiwanie na poziomie elementu; odzyskiwanie plików z kopii zapasowej maszyny Wirtualnej platformy Azure. Przywróć pliki z maszyny Wirtualnej Azure"
ms.assetid: f1c067a2-4826-4da4-b97a-c5fd6c189a77
ms.service: backup
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 07/20/2017
ms.author: pullabhk;markgal
ms.openlocfilehash: ae7c345c11a7db25413d60ad822f16f84ca37362
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/03/2017
---
# <a name="recover-files-from-azure-virtual-machine-backup"></a><span data-ttu-id="34104-104">Odzyskiwanie plików z kopii zapasowej maszyny wirtualnej platformy Azure</span><span class="sxs-lookup"><span data-stu-id="34104-104">Recover files from Azure virtual machine backup</span></span>

<span data-ttu-id="34104-105">Kopia zapasowa Azure udostępnia możliwość przywracania [maszynach wirtualnych platformy Azure i dyski](./backup-azure-arm-restore-vms.md) z kopii zapasowych maszyny Wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="34104-105">Azure backup provides the capability to restore [Azure VMs and disks](./backup-azure-arm-restore-vms.md) from Azure VM backups.</span></span> <span data-ttu-id="34104-106">Teraz w tym artykule opisano, jak można odzyskać elementy, takie jak pliki i foldery z kopii zapasowej maszyny Wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="34104-106">Now this article explains how you can recover items such as files and folders from an Azure VM backup.</span></span>

> [!Note]
> <span data-ttu-id="34104-107">Ta funkcja jest dostępna dla maszyn wirtualnych platformy Azure wdrażane za pomocą modelu usługi Resource Manager i chronione w magazynie usług odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="34104-107">This feature is available for Azure VMs deployed using the Resource Manager model and protected to a Recovery services vault.</span></span>
> <span data-ttu-id="34104-108">Odzyskiwanie plików z zaszyfrowanej kopii zapasowej maszyny Wirtualnej nie jest obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="34104-108">File recovery from an encrypted VM backup is not supported.</span></span>
>

## <a name="mount-the-volume-and-copy-files"></a><span data-ttu-id="34104-109">Zainstaluj woluminu i kopiować pliki</span><span class="sxs-lookup"><span data-stu-id="34104-109">Mount the volume and copy files</span></span>

1. <span data-ttu-id="34104-110">Zaloguj się do [Azure Portal](http://portal.Azure.com).</span><span class="sxs-lookup"><span data-stu-id="34104-110">Sign into the [Azure portal](http://portal.Azure.com).</span></span> <span data-ttu-id="34104-111">Znajdź odpowiedniego magazynu usług odzyskiwania i wymagany element kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="34104-111">Find the relevant Recovery services vault and the required backup item.</span></span>

2. <span data-ttu-id="34104-112">W bloku elementu kopii zapasowej, kliknij **odzyskiwanie plików**</span><span class="sxs-lookup"><span data-stu-id="34104-112">On the Backup Item blade, click **File Recovery**</span></span>

    ![Otwórz element kopii zapasowej magazynu usług odzyskiwania](./media/backup-azure-restore-files-from-vm/open-vault-item.png)

    <span data-ttu-id="34104-114">**Odzyskiwanie plików** zostanie otwarty blok.</span><span class="sxs-lookup"><span data-stu-id="34104-114">The **File Recovery** blade opens.</span></span>

    ![Blok odzyskiwania plików](./media/backup-azure-restore-files-from-vm/file-recovery-blade.png)

3. <span data-ttu-id="34104-116">Z **wybierz punkt odzyskiwania** menu rozwijanego wybierz punkt odzyskiwania, który zawiera pliki.</span><span class="sxs-lookup"><span data-stu-id="34104-116">From the **Select recovery point** drop-down menu, select the recovery point that contains the files you want.</span></span> <span data-ttu-id="34104-117">Domyślnie już jest wybrany najnowszy punkt odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="34104-117">By default, the latest recovery point is already selected.</span></span>

4. <span data-ttu-id="34104-118">Kliknij przycisk **Pobierz plik wykonywalny** (dla systemu Windows Azure maszyny Wirtualnej) lub **Pobierz skrypt** (dla systemu Linux Azure VM) w celu pobrania oprogramowania, które będzie używane do kopiowania plików z punktu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="34104-118">Click **Download Executable** (for Windows Azure VM) or **Download Script** (for Linux Azure VM) to download the software that you'll use to copy files from the recovery point.</span></span>

  <span data-ttu-id="34104-119">Skryptu lub pliku wykonywalnego tworzy połączenie między komputerem lokalnym a określony punkt odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="34104-119">The executable/script creates a connection between the local computer and the specified recovery point.</span></span>

5. <span data-ttu-id="34104-120">Wymagane jest hasło, aby uruchomić skrypt pobrany/plik wykonywalny.</span><span class="sxs-lookup"><span data-stu-id="34104-120">You need a password to run the downloaded script/executable.</span></span> <span data-ttu-id="34104-121">Hasło można skopiować z portalu, za pomocą przycisku Kopiuj obok wygenerowane hasło</span><span class="sxs-lookup"><span data-stu-id="34104-121">You can copy the password from the portal using the copy button beside the generated password</span></span>

    ![Wygenerowane hasło](./media/backup-azure-restore-files-from-vm/generated-pswd.png)

6. <span data-ttu-id="34104-123">Na komputerze, na którym chcesz odzyskać pliki uruchamianie skryptu lub pliku wykonywalnego.</span><span class="sxs-lookup"><span data-stu-id="34104-123">On the computer where you want to recover the files, run the executable/script.</span></span> <span data-ttu-id="34104-124">Należy uruchomić je przy użyciu poświadczeń administratora.</span><span class="sxs-lookup"><span data-stu-id="34104-124">You must run it with Administrator credentials.</span></span> <span data-ttu-id="34104-125">Jeśli skrypt zostanie uruchomiony na komputerze z ograniczonym dostępem, upewnij się, Brak dostępu do:</span><span class="sxs-lookup"><span data-stu-id="34104-125">If you run the script on a computer with restricted access, ensure there is access to:</span></span>

    - <span data-ttu-id="34104-126">witrynie Download.microsoft.com</span><span class="sxs-lookup"><span data-stu-id="34104-126">download.microsoft.com</span></span>
    - <span data-ttu-id="34104-127">Punkty końcowe systemu Azure, używany do tworzenia kopii zapasowych maszyny Wirtualnej Azure</span><span class="sxs-lookup"><span data-stu-id="34104-127">Azure endpoints used for Azure VM backups</span></span>
    - <span data-ttu-id="34104-128">wychodzące port 3260</span><span class="sxs-lookup"><span data-stu-id="34104-128">outbound port 3260</span></span>

   <span data-ttu-id="34104-129">Dla systemu Linux skrypt wymaga składników "open-iscsi" i "lshw" połączyć się z punktem odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="34104-129">For Linux, the script requires 'open-iscsi' and 'lshw' components to connect to the recovery point.</span></span> <span data-ttu-id="34104-130">Jeśli te nie istnieją na komputerze, na którym jest uruchomiony, poprosi o podanie uprawnień zainstalować odpowiednie składniki i instaluje je na zgody.</span><span class="sxs-lookup"><span data-stu-id="34104-130">If those do not exist on the machine where it is run, it asks for permission to install the relevant components and installs them upon consent.</span></span>
   
   <span data-ttu-id="34104-131">Wprowadź hasło skopiowane z portalu po wyświetleniu monitu.</span><span class="sxs-lookup"><span data-stu-id="34104-131">Enter the password copied from the portal when prompted.</span></span> <span data-ttu-id="34104-132">Po wprowadzeniu prawidłowego hasła skrypty nawiązuje połączenie z punktem odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="34104-132">Once the valid password is entered the scripts connects to the recovery point.</span></span>
      
    ![Blok odzyskiwania plików](./media/backup-azure-restore-files-from-vm/executable-output.png)
    
   
   <span data-ttu-id="34104-134">Skrypt można uruchomić na dowolnym komputerze, systemu operacyjnego tego samego (lub zgodne) jako kopii zapasowej maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="34104-134">You can run the script on any machine that has the same (or compatible) operating system as the backed-up VM.</span></span> <span data-ttu-id="34104-135">Zobacz [tabeli zgodny system operacyjny](backup-azure-restore-files-from-vm.md#compatible-os) dla zgodnych systemów operacyjnych.</span><span class="sxs-lookup"><span data-stu-id="34104-135">See the [Compatible OS table](backup-azure-restore-files-from-vm.md#compatible-os) for compatible operating systems.</span></span> <span data-ttu-id="34104-136">Jeśli chronionej maszyny wirtualnej Azure korzysta z miejsca do magazynowania systemu Windows (w przypadku maszyn wirtualnych systemu Windows Azure) lub Arrays(for Linux VMs) LVM/RAID, nie można uruchomić skryptu lub pliku wykonywalnego w tej samej maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="34104-136">If the protected Azure virtual machine uses Windows Storage Spaces (for Windows Azure VMs) or LVM/RAID Arrays(for Linux VMs), then you can't run the executable/script on the same virtual machine.</span></span> <span data-ttu-id="34104-137">Zamiast tego należy uruchomić ją na innym komputerze z zgodny system operacyjny.</span><span class="sxs-lookup"><span data-stu-id="34104-137">Instead, run it on any other machine with a compatible operating system.</span></span>

### <a name="compatible-os"></a><span data-ttu-id="34104-138">Zgodny system operacyjny</span><span class="sxs-lookup"><span data-stu-id="34104-138">Compatible OS</span></span>

#### <a name="for-windows"></a><span data-ttu-id="34104-139">Dla systemu Windows</span><span class="sxs-lookup"><span data-stu-id="34104-139">For Windows</span></span>

<span data-ttu-id="34104-140">W poniższej tabeli przedstawiono zgodność między systemami operacyjnymi serwera i komputera.</span><span class="sxs-lookup"><span data-stu-id="34104-140">The following table shows the compatibility between server and computer operating systems.</span></span> <span data-ttu-id="34104-141">Podczas odzyskiwania plików, nie można przywrócić plików między systemy operacyjne niezgodne.</span><span class="sxs-lookup"><span data-stu-id="34104-141">When recovering files, you can't restore files between incompatible operating systems.</span></span>

|<span data-ttu-id="34104-142">System operacyjny serwera</span><span class="sxs-lookup"><span data-stu-id="34104-142">Server OS</span></span> | <span data-ttu-id="34104-143">Zgodny system operacyjny klienta</span><span class="sxs-lookup"><span data-stu-id="34104-143">Compatible client OS</span></span>  |
| --------------- | ---- |
| <span data-ttu-id="34104-144">Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="34104-144">Windows Server 2012 R2</span></span> | <span data-ttu-id="34104-145">Windows 8.1</span><span class="sxs-lookup"><span data-stu-id="34104-145">Windows 8.1</span></span> |
| <span data-ttu-id="34104-146">Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="34104-146">Windows Server 2012</span></span>    | <span data-ttu-id="34104-147">Windows 8</span><span class="sxs-lookup"><span data-stu-id="34104-147">Windows 8</span></span>  |
| <span data-ttu-id="34104-148">Windows Server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="34104-148">Windows Server 2008 R2</span></span> | <span data-ttu-id="34104-149">Windows 7</span><span class="sxs-lookup"><span data-stu-id="34104-149">Windows 7</span></span>   |

#### <a name="for-linux"></a><span data-ttu-id="34104-150">Dla systemu Linux</span><span class="sxs-lookup"><span data-stu-id="34104-150">For Linux</span></span>

<span data-ttu-id="34104-151">W systemie Linux podstawowe wymagane jest, że system operacyjny na komputerze, na którym skrypt jest uruchamiany powinna obsługiwać systemu plików występuje w maszyny Wirtualnej systemu Linux kopii zapasowej plików.</span><span class="sxs-lookup"><span data-stu-id="34104-151">In Linux, the fundamental requirement is that the OS of the machine where the script is run should support the filesystem of the files present in the backed-up Linux VM.</span></span> <span data-ttu-id="34104-152">Podczas wybierania maszyny, aby uruchomić skrypt, upewnij się, że ma zgodny system operacyjny i wersje wymienione w poniższej tabeli.</span><span class="sxs-lookup"><span data-stu-id="34104-152">While selecting a machine to run the script, please ensure it has the compatible OS and the versions as mentioned in the table below.</span></span>

|<span data-ttu-id="34104-153">System operacyjny Linux</span><span class="sxs-lookup"><span data-stu-id="34104-153">Linux OS</span></span> | <span data-ttu-id="34104-154">Wersje</span><span class="sxs-lookup"><span data-stu-id="34104-154">Versions</span></span>  |
| --------------- | ---- |
| <span data-ttu-id="34104-155">Ubuntu</span><span class="sxs-lookup"><span data-stu-id="34104-155">Ubuntu</span></span> | <span data-ttu-id="34104-156">12.04 i powyżej.</span><span class="sxs-lookup"><span data-stu-id="34104-156">12.04 and above</span></span> |
| <span data-ttu-id="34104-157">CentOS</span><span class="sxs-lookup"><span data-stu-id="34104-157">CentOS</span></span> | <span data-ttu-id="34104-158">6.5 i powyżej.</span><span class="sxs-lookup"><span data-stu-id="34104-158">6.5 and above</span></span>  |
| <span data-ttu-id="34104-159">RHEL</span><span class="sxs-lookup"><span data-stu-id="34104-159">RHEL</span></span> | <span data-ttu-id="34104-160">6.7 i powyżej.</span><span class="sxs-lookup"><span data-stu-id="34104-160">6.7 and above</span></span> |
| <span data-ttu-id="34104-161">Debian</span><span class="sxs-lookup"><span data-stu-id="34104-161">Debian</span></span> | <span data-ttu-id="34104-162">7 i nowsze</span><span class="sxs-lookup"><span data-stu-id="34104-162">7 and above</span></span> |
| <span data-ttu-id="34104-163">Oracle Linux</span><span class="sxs-lookup"><span data-stu-id="34104-163">Oracle Linux</span></span> | <span data-ttu-id="34104-164">6.4 i powyżej.</span><span class="sxs-lookup"><span data-stu-id="34104-164">6.4 and above</span></span> |

<span data-ttu-id="34104-165">Skrypt wymaga również python i bash składników do wykonywania i bezpieczne łączenie z punktu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="34104-165">The script also requires python and bash components to execute and connect securely to the recovery point.</span></span>

|<span data-ttu-id="34104-166">Składnik</span><span class="sxs-lookup"><span data-stu-id="34104-166">Component</span></span> | <span data-ttu-id="34104-167">Wersja</span><span class="sxs-lookup"><span data-stu-id="34104-167">Version</span></span>  |
| --------------- | ---- |
| <span data-ttu-id="34104-168">Bash</span><span class="sxs-lookup"><span data-stu-id="34104-168">bash</span></span> | <span data-ttu-id="34104-169">4 i nowsze</span><span class="sxs-lookup"><span data-stu-id="34104-169">4 and above</span></span> |
| <span data-ttu-id="34104-170">python</span><span class="sxs-lookup"><span data-stu-id="34104-170">python</span></span> | <span data-ttu-id="34104-171">2.6.6 i powyżej.</span><span class="sxs-lookup"><span data-stu-id="34104-171">2.6.6 and above</span></span>  |


### <a name="identifying-volumes"></a><span data-ttu-id="34104-172">Identyfikowanie woluminów</span><span class="sxs-lookup"><span data-stu-id="34104-172">Identifying Volumes</span></span>

#### <a name="for-windows"></a><span data-ttu-id="34104-173">Dla systemu Windows</span><span class="sxs-lookup"><span data-stu-id="34104-173">For Windows</span></span>

<span data-ttu-id="34104-174">Po uruchomieniu exectuable systemu operacyjnego instaluje nowe woluminy i przypisuje litery dysku.</span><span class="sxs-lookup"><span data-stu-id="34104-174">When you run the exectuable, the operating system mounts the new volumes and assigns drive letters.</span></span> <span data-ttu-id="34104-175">Eksplorator Windows lub w Eksploratorze plików można użyć do przeglądania tych dysków.</span><span class="sxs-lookup"><span data-stu-id="34104-175">You can use Windows Explorer or File Explorer to browse those drives.</span></span> <span data-ttu-id="34104-176">Przypisane do woluminów litery dysków może nie być tych samych liter, co oryginalna maszyna wirtualna, jednak jest zachowywana nazwa woluminu.</span><span class="sxs-lookup"><span data-stu-id="34104-176">The drive letters assigned to the volumes may not be the same letters as the original virtual machine, however, the volume name is preserved.</span></span> <span data-ttu-id="34104-177">Na przykład, jeśli został woluminu na maszynie wirtualnej oryginalnego "dysk danych (E:\)", można dołączyć jako woluminu "dysk danych ("Wszystkie litery dysków dostępne":\) na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="34104-177">For example, if the volume on the original virtual machine was “Data Disk (E:\)”, that volume can be attached as “Data Disk ('Any drive letter available':\) on the local computer.</span></span> <span data-ttu-id="34104-178">Przeglądaj wszystkie woluminy wymienionych w danych wyjściowych skryptu do momentu znalezienia plików/folderów.</span><span class="sxs-lookup"><span data-stu-id="34104-178">Browse through all volumes mentioned in the script output until you find your files/folder.</span></span>  
       
   ![Blok odzyskiwania plików](./media/backup-azure-restore-files-from-vm/volumes-attached.png)
           
#### <a name="for-linux"></a><span data-ttu-id="34104-180">Dla systemu Linux</span><span class="sxs-lookup"><span data-stu-id="34104-180">For Linux</span></span>

<span data-ttu-id="34104-181">W systemie Linux woluminy punktu odzyskiwania są instalowane w folderze, w którym skrypt jest uruchamiany.</span><span class="sxs-lookup"><span data-stu-id="34104-181">In Linux, the volumes of the recovery point are mounted to the folder where the script is run.</span></span> <span data-ttu-id="34104-182">W związku z tym są wyświetlane dołączonych dysków, woluminów i odpowiadające im ścieżki instalacji.</span><span class="sxs-lookup"><span data-stu-id="34104-182">The attached disks, volumes and the corresponding mount paths are shown accordingly.</span></span> <span data-ttu-id="34104-183">Zainstaluj tych ścieżek są widoczne dla użytkowników mających dostęp na poziomie głównym.</span><span class="sxs-lookup"><span data-stu-id="34104-183">These mount paths are visible to users having root level access.</span></span> <span data-ttu-id="34104-184">Przeglądaj woluminów wymienionych w danych wyjściowych skryptu.</span><span class="sxs-lookup"><span data-stu-id="34104-184">Browse through the volumes mentioned in the script output.</span></span>

  ![Blok odzyskiwania plików systemu Linux](./media/backup-azure-restore-files-from-vm/linux-mount-paths.png)
  

## <a name="closing-the-connection"></a><span data-ttu-id="34104-186">Zamykanie połączenia</span><span class="sxs-lookup"><span data-stu-id="34104-186">Closing the connection</span></span>

<span data-ttu-id="34104-187">Po zidentyfikowaniu pliki i skopiować je do lokalizacji magazynu lokalnego, usunąć lub odinstalować dodatkowych dysków.</span><span class="sxs-lookup"><span data-stu-id="34104-187">After identifying the files and copying them to a local storage location, remove (or unmount) the additional drives.</span></span> <span data-ttu-id="34104-188">Aby odinstalować dyski, na **odzyskiwanie plików** bloku w portalu Azure, kliknij przycisk **odinstalować dyski**.</span><span class="sxs-lookup"><span data-stu-id="34104-188">To unmount the drives, on the **File Recovery** blade in the Azure portal, click **Unmount Disks**.</span></span>

![Odinstaluj dysków](./media/backup-azure-restore-files-from-vm/unmount-disks3.png)

<span data-ttu-id="34104-190">Gdy dyski zostały odinstalowane, pojawi się komunikat informujący o pomyślnym zakończeniu go.</span><span class="sxs-lookup"><span data-stu-id="34104-190">Once the disks have been unmounted, you receive a message letting you know it was successful.</span></span> <span data-ttu-id="34104-191">Może upłynąć kilka minut, aż połączenie w celu odświeżenia, aby usunąć dyski.</span><span class="sxs-lookup"><span data-stu-id="34104-191">It may take a few minutes for the connection to refresh so that you can remove the disks.</span></span>

<span data-ttu-id="34104-192">W systemie Linux, po jest Przerwano połączenie z punktem odzyskiwania, system operacyjny nie powoduje usunięcia odpowiednich ścieżkach instalacji automatycznie.</span><span class="sxs-lookup"><span data-stu-id="34104-192">In Linux, after the connection to the recovery point is severed, the OS doesn't remove the corresponding mount paths automatically.</span></span> <span data-ttu-id="34104-193">Istnieją one jako woluminy "oddzielony" i są widoczne, ale zgłosić błąd, gdy użytkownik dostępu do zapisu plików.</span><span class="sxs-lookup"><span data-stu-id="34104-193">These exist as "orphan" volumes and they are visible but throw an error when you access/write the files.</span></span> <span data-ttu-id="34104-194">Można je ręcznie usunąć.</span><span class="sxs-lookup"><span data-stu-id="34104-194">They can be manually removed.</span></span> <span data-ttu-id="34104-195">Skrypt uruchamiania, identyfikuje wszelkie istniejące z poprzednich punktów odzyskiwania woluminy i czyści po zgody.</span><span class="sxs-lookup"><span data-stu-id="34104-195">The script, when run, identifies any such volumes existing from any previous recovery points and cleans them up upon consent.</span></span>

## <a name="special-configurations"></a><span data-ttu-id="34104-196">Konfiguracje specjalne</span><span class="sxs-lookup"><span data-stu-id="34104-196">Special configurations</span></span>

### <a name="dynamic-disks"></a><span data-ttu-id="34104-197">Dyski dynamiczne</span><span class="sxs-lookup"><span data-stu-id="34104-197">Dynamic Disks</span></span>

<span data-ttu-id="34104-198">Jeśli maszyny Wirtualnej platformy Azure, która została utworzona kopia zapasowa ma woluminy, które obejmują wiele dysków (łączone i woluminów rozłożonych) i/lub odpornej na uszkodzenia (woluminy dublowane i RAID-5) na dyskach dynamicznych, nie można uruchomić pliku wykonywalnego skryptu na tej samej maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="34104-198">If the Azure VM that was backed up has volumes that span multiple disks (spanned and striped volumes) and/or fault-tolerant volumes (mirrored and RAID-5 volumes) on dynamic disks, then you can't run the executable script on the same VM.</span></span> <span data-ttu-id="34104-199">Zamiast tego należy uruchomić pliku wykonywalnego skryptu na innym komputerze z zgodny system operacyjny.</span><span class="sxs-lookup"><span data-stu-id="34104-199">Instead, run the executable script on any other machine with a compatible operating system.</span></span>

### <a name="windows-storage-spaces"></a><span data-ttu-id="34104-200">Miejsca do magazynowania systemu Windows</span><span class="sxs-lookup"><span data-stu-id="34104-200">Windows Storage Spaces</span></span>

<span data-ttu-id="34104-201">Miejsca do magazynowania systemu Windows jest to technologia magazynu systemu Windows, który pozwala na wirtualizację magazynu.</span><span class="sxs-lookup"><span data-stu-id="34104-201">Windows Storage Spaces is a technology in Windows storage that enables you to virtualize storage.</span></span> <span data-ttu-id="34104-202">Z miejscami do magazynowania systemu Windows można grupowanie standardowych dysków w pule magazynu, a następnie tworzyć dyski wirtualne miejsca do magazynowania, z dostępnego miejsca w tych pul magazynów.</span><span class="sxs-lookup"><span data-stu-id="34104-202">With Windows Storage Spaces you can group industry-standard disks into storage pools, and then create virtual disks, called storage spaces, from the available space in those storage pools.</span></span>

<span data-ttu-id="34104-203">Jeśli maszyny Wirtualnej platformy Azure, która została utworzona kopia zapasowa korzysta z funkcji miejsca do magazynowania systemu Windows, nie można uruchomić pliku wykonywalnego skryptu na tej samej maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="34104-203">If the Azure VM that was backed up uses Windows Storage Spaces, then you can't run the executable script on the same VM.</span></span> <span data-ttu-id="34104-204">Zamiast tego należy uruchomić pliku wykonywalnego skryptu na innym komputerze z zgodny system operacyjny.</span><span class="sxs-lookup"><span data-stu-id="34104-204">Instead, run the executable script on any other machine with a compatible operating system.</span></span>

### <a name="lvmraid-arrays"></a><span data-ttu-id="34104-205">Tablice LVM/RAID</span><span class="sxs-lookup"><span data-stu-id="34104-205">LVM/RAID Arrays</span></span>

<span data-ttu-id="34104-206">W systemie Linux Menedżer woluminów logicznych (LVM) i/lub oprogramowania macierze RAID są używane do zarządzania przez wiele dysków logicznych woluminów.</span><span class="sxs-lookup"><span data-stu-id="34104-206">In Linux, Logical volume manager (LVM) and/or software RAID Arrays are used to manage logical volumes over multiple disks.</span></span> <span data-ttu-id="34104-207">Jeśli kopie zapasowe maszyny Wirtualnej systemu Linux używa LVM i/lub macierzy RAID, nie można uruchomić skrypt na tej samej maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="34104-207">If the backed up Linux VM uses LVM and/or RAID Arrays, you can't run the script on the same VM.</span></span> <span data-ttu-id="34104-208">Zamiast tego uruchomić skrypt na żadną inną maszynę z systemem operacyjnym zgodny i który obsługuje system plików kopii zapasowej maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="34104-208">Instead run the script on any other machine with compatible OS and which supports filesystem of the backed up VM.</span></span>

<span data-ttu-id="34104-209">Dane wyjściowe skryptu wyświetla dyski LVM i/lub macierzy RAID i woluminów o typie partycji, jak pokazano poniżej</span><span class="sxs-lookup"><span data-stu-id="34104-209">The script output displays the LVM and/or RAID Arrays disks and the volumes with the partition type as shown below</span></span>

   ![Blok danych wyjściowych LVM systemu Linux](./media/backup-azure-restore-files-from-vm/linux-LVMOutput.png)
   
<span data-ttu-id="34104-211">Następujące polecenia muszą być uruchamiane przez użytkownika, aby wyświetlić te partycje w trybie online.</span><span class="sxs-lookup"><span data-stu-id="34104-211">The following commands need to be run by the user to bring these partitions online.</span></span> 

<span data-ttu-id="34104-212">**W przypadku partycji LVM**</span><span class="sxs-lookup"><span data-stu-id="34104-212">**For LVM Partitions**</span></span>

```
$ pvs <volume name as shown above in the script output> 
```
<span data-ttu-id="34104-213">Ta lista zawiera nazwy grup woluminu w obszarze woluminu fizycznych.</span><span class="sxs-lookup"><span data-stu-id="34104-213">This lists the volume group names under a physical volume.</span></span>

```
$ lvdisplay <volume-group-name from the pvs command’s results> 
```
<span data-ttu-id="34104-214">Ta lista zawiera wszystkie woluminy logiczne, nazwy i ich ścieżki w grupie woluminu.</span><span class="sxs-lookup"><span data-stu-id="34104-214">This lists all logical volumes, names and their paths in a volume group.</span></span>

```
$ mount <LV path> </mountpath>
```
<span data-ttu-id="34104-215">Aby zainstalować logicznej woluminów na ścieżkę wybranych przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="34104-215">To mount the logical volumes to the path of your choice.</span></span>


<span data-ttu-id="34104-216">**Dla macierzy RAID**</span><span class="sxs-lookup"><span data-stu-id="34104-216">**For RAID Arrays**</span></span>

```
$ mdadm –detail –scan
```
<span data-ttu-id="34104-217">Zostaną wyświetlone szczegółowe informacje o wszystkich dysków raid.</span><span class="sxs-lookup"><span data-stu-id="34104-217">This displays details about all raid disks.</span></span> <span data-ttu-id="34104-218">Odpowiedni dysk RAID, które będą wyświetlane jako`/dev/mdm/<RAID array name in the backed up VM>`</span><span class="sxs-lookup"><span data-stu-id="34104-218">The relevant RAID disk will be displayed as `/dev/mdm/<RAID array name in the backed up VM>`</span></span>

<span data-ttu-id="34104-219">Jeśli na dysku RAID woluminy fizyczne za pomocą polecenia instalacji.</span><span class="sxs-lookup"><span data-stu-id="34104-219">Use the mount command if the RAID disk has physical volumes.</span></span>
```
$ mount [RAID Disk Path] [/mounthpath]
```

<span data-ttu-id="34104-220">Jeśli ten dysk RAID inny LVM skonfigurowane w nim postępuj zgodnie z procedurą w sposób opisany powyżej dla partycji LVM o nazwie woluminu RAID dysku nazwy</span><span class="sxs-lookup"><span data-stu-id="34104-220">If this RAID disk has another LVM configured in it then follow the same procedure as outlined above for LVM partitions with the volume name being the RAID Disk name</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="34104-221">Rozwiązywanie problemów</span><span class="sxs-lookup"><span data-stu-id="34104-221">Troubleshooting</span></span>

<span data-ttu-id="34104-222">Jeśli masz problemy podczas przywracania plików z maszyn wirtualnych Sprawdź poniższej tabeli, aby uzyskać dodatkowe informacje.</span><span class="sxs-lookup"><span data-stu-id="34104-222">If you have problems while recovering files from the virtual machines, check the following table for additional information.</span></span>

| <span data-ttu-id="34104-223">Komunikat o błędzie / scenariusza</span><span class="sxs-lookup"><span data-stu-id="34104-223">Error Message / Scenario</span></span> | <span data-ttu-id="34104-224">Prawdopodobna przyczyna</span><span class="sxs-lookup"><span data-stu-id="34104-224">Probable Cause</span></span> | <span data-ttu-id="34104-225">Zalecane działanie</span><span class="sxs-lookup"><span data-stu-id="34104-225">Recommended action</span></span> |
| ------------------------ | -------------- | ------------------ |
| <span data-ttu-id="34104-226">Dane wyjściowe exe: *wyjątek łączenie się z obiektem docelowym*</span><span class="sxs-lookup"><span data-stu-id="34104-226">Exe output: *Exception connecting to the target*</span></span> |<span data-ttu-id="34104-227">Skrypt nie będzie mógł uzyskać dostępu do punktu odzyskiwania</span><span class="sxs-lookup"><span data-stu-id="34104-227">Script is not able to access the recovery point</span></span> | <span data-ttu-id="34104-228">Sprawdź, czy komputer spełnia wymagania dotyczące dostępu wymienionym powyżej</span><span class="sxs-lookup"><span data-stu-id="34104-228">Check whether the machine fulfills the access requirements mentioned above</span></span>|  
|   <span data-ttu-id="34104-229">Dane wyjściowe exe: *element docelowy ma już zalogowany za pośrednictwem sesji ISCSI.*</span><span class="sxs-lookup"><span data-stu-id="34104-229">Exe output: *The target has already been logged in via an ISCSI session.*</span></span> | <span data-ttu-id="34104-230">Skrypt zostało już wykonane na tym samym komputerze, a dyski zostały dołączone</span><span class="sxs-lookup"><span data-stu-id="34104-230">The script was already executed on the same machine and the drives have been attached</span></span> | <span data-ttu-id="34104-231">Już zostały dołączone woluminy punktu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="34104-231">The volumes of the recovery point have already been attached.</span></span> <span data-ttu-id="34104-232">Mogą one nie można zainstalować z tych samych liter dysków oryginalnego maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="34104-232">They may NOT be mounted with the same drive letters of the original VM.</span></span> <span data-ttu-id="34104-233">Przeglądaj wszystkie dostępne woluminy w Eksploratorze plików dla pliku</span><span class="sxs-lookup"><span data-stu-id="34104-233">Browse through all the available volumes in the file explorer for your file</span></span> |
| <span data-ttu-id="34104-234">Dane wyjściowe exe: *tego skryptu jest nieprawidłowa, ponieważ dyski mają został odinstalowany przez 12 hr portal/przekroczył limit. Pobierz nowy skrypt z portalu.*</span><span class="sxs-lookup"><span data-stu-id="34104-234">Exe output: *This script is invalid because the disks have been dismounted via portal/exceeded the 12-hr limit. Please download a new script from the portal.*</span></span> |  <span data-ttu-id="34104-235">Dyski mają został odinstalowany z portalu lub przekroczono limit 12 hr</span><span class="sxs-lookup"><span data-stu-id="34104-235">The disks have been dismounted from the portal or the 12-hr limit exceeded</span></span> |    <span data-ttu-id="34104-236">Tego konkretnego pliku exe teraz jest nieprawidłowy i nie można uruchomić.</span><span class="sxs-lookup"><span data-stu-id="34104-236">This particular exe is now invalid and can’t be run.</span></span> <span data-ttu-id="34104-237">Jeśli chcesz uzyskać dostęp do plików tego odzyskiwania w momencie, odwiedź portal dla nowego pliku exe</span><span class="sxs-lookup"><span data-stu-id="34104-237">If you want to access the files of that recovery point-in-time, visit the portal for a new exe</span></span>|
| <span data-ttu-id="34104-238">Na komputerze, na którym uruchomiono pliku exe: nowe woluminy nie są odinstalowany po kliknięciu przycisku dezinstalacji</span><span class="sxs-lookup"><span data-stu-id="34104-238">On the machine where the exe is run: The new volumes are not dismounted after the dismount button is clicked</span></span> |    <span data-ttu-id="34104-239">Inicjator ISCSI na tym komputerze nie jest odpowiada/odświeżyć połączenie z docelowym i obsługi pamięci podręcznej</span><span class="sxs-lookup"><span data-stu-id="34104-239">The ISCSI initiator on the machine is not responding/refreshing its connection to the target and maintaining the cache</span></span> |    <span data-ttu-id="34104-240">Poczekaj kilka minut po naciśnięciu przycisku dezinstalacji.</span><span class="sxs-lookup"><span data-stu-id="34104-240">Wait for some mins after the dismount button is pressed.</span></span> <span data-ttu-id="34104-241">Jeśli nowe woluminy nadal są nie odinstalowana, przejdź do wszystkich woluminów.</span><span class="sxs-lookup"><span data-stu-id="34104-241">If the new volumes are still not dismounted, please browse through all the volumes.</span></span> <span data-ttu-id="34104-242">To zmusza inicjatora, aby odświeżyć połączenie i ten wolumin został odinstalowany z komunikatem o błędzie, że dysk nie jest dostępna</span><span class="sxs-lookup"><span data-stu-id="34104-242">This forces the initiator to refresh the connection and the volume is dismounted with an error message that the disk is not available</span></span>|
| <span data-ttu-id="34104-243">Dane wyjściowe exe: skrypt jest uruchamiany pomyślnie, ale "Nowe woluminy dołączony" nie jest wyświetlany w danych wyjściowych skryptu</span><span class="sxs-lookup"><span data-stu-id="34104-243">Exe output: Script is run successfully but “New volumes attached” is not displayed on the script output</span></span> | <span data-ttu-id="34104-244">Jest to przejściowy błąd</span><span class="sxs-lookup"><span data-stu-id="34104-244">This is a transient error</span></span>   | <span data-ttu-id="34104-245">Woluminy czy zostały już dołączone.</span><span class="sxs-lookup"><span data-stu-id="34104-245">The volumes would have been already attached.</span></span> <span data-ttu-id="34104-246">Otwórz Eksploratora do przeglądania.</span><span class="sxs-lookup"><span data-stu-id="34104-246">Open Explorer to browse.</span></span> <span data-ttu-id="34104-247">Jeśli używasz tej samej maszyny do uruchamiania skryptów zawsze, rozważ ponowne uruchomienie komputera i listy powinien być wyświetlany w kolejnych exe uruchamia.</span><span class="sxs-lookup"><span data-stu-id="34104-247">If you are using the same machine for running scripts every time, consider restarting the machine and the list should be displayed in the subsequent exe runs.</span></span> |
| <span data-ttu-id="34104-248">Właściwe dla systemu Linux: nie można wyświetlić żądanego woluminów</span><span class="sxs-lookup"><span data-stu-id="34104-248">Linux specific: Not able to view the desired volumes</span></span> | <span data-ttu-id="34104-249">System operacyjny na komputerze, na którym skrypt jest uruchamiany nie może rozpoznać źródłowy system plików kopii zapasowej maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="34104-249">The OS of the machine where the script is run may not recognize the underlying filesystem of the backed up VM</span></span> | <span data-ttu-id="34104-250">Sprawdź, czy punkt odzyskiwania awaryjnego zgodne lub zgodne z plikami.</span><span class="sxs-lookup"><span data-stu-id="34104-250">Check whether the recovery point is crash consistent or file-consistent.</span></span> <span data-ttu-id="34104-251">Jeśli plik spójne, uruchom skrypt na innym komputerze których system operacyjny rozpoznaje kopię zapasową plików maszyny Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="34104-251">If file consistent, run the script on another machine whose OS recognizes the backed up VM's filesystem</span></span> |
| <span data-ttu-id="34104-252">Właściwe dla systemu Windows: nie można wyświetlić żądanego woluminów</span><span class="sxs-lookup"><span data-stu-id="34104-252">Windows specific: Not able to view the desired volumes</span></span> | <span data-ttu-id="34104-253">Dyski zostały dołączone, ale nie skonfigurowano woluminów</span><span class="sxs-lookup"><span data-stu-id="34104-253">The disks may have been attached but the volumes were not configured</span></span> | <span data-ttu-id="34104-254">Na ekranie zarządzania dysku określenie dodatkowych dysków, powiązane z punktem odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="34104-254">From the disk management screen, identify the additional disks related to the recovery point.</span></span> <span data-ttu-id="34104-255">Jeśli którykolwiek z tych dysków znajduje się w trybie offline stan spróbuj je w trybie online klikając prawym przyciskiem myszy na dysku i kliknij przycisk "Online"</span><span class="sxs-lookup"><span data-stu-id="34104-255">If any of these disks are in offline state try making them online by right-clicking on the disk and click 'Online'</span></span>|
