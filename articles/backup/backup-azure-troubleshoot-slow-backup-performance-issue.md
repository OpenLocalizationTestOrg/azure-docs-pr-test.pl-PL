---
title: "aaaTroubleshoot powolne kopii zapasowej plików i folderów w usłudze Kopia zapasowa Azure | Dokumentacja firmy Microsoft"
description: "Udostępnia rozwiązywanie problemów z toohelp wskazówki diagnozowanie hello przyczyną problemów z wydajnością kopia zapasowa Azure"
services: backup
documentationcenter: 
author: genlin
manager: cshepard
editor: 
ms.assetid: e379180a-db13-4e0c-90e4-28e5dd6f5b14
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: genli
ms.openlocfilehash: 21d79bbd03c2706bc43fcc7c14020cffd6b919c7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-slow-backup-of-files-and-folders-in-azure-backup"></a><span data-ttu-id="87452-103">Rozwiązywanie problemów związanych z powolnym tworzeniem kopii zapasowych plików i folderów w usłudze Azure Backup</span><span class="sxs-lookup"><span data-stu-id="87452-103">Troubleshoot slow backup of files and folders in Azure Backup</span></span>
<span data-ttu-id="87452-104">Ten artykuł zawiera wskazówki dotyczące rozwiązywania problemów toohelp zdiagnozowaniu przyczyny hello niską wydajność tworzenia kopii zapasowej plików i folderów podczas korzystania z usługi Kopia zapasowa Azure.</span><span class="sxs-lookup"><span data-stu-id="87452-104">This article provides troubleshooting guidance toohelp you diagnose hello cause of slow backup performance for files and folders when you're using Azure Backup.</span></span> <span data-ttu-id="87452-105">Gdy używasz hello Azure Backup agent tooback zapasowych plików, hello procesu tworzenia kopii zapasowej może trwać dłużej, niż oczekiwano.</span><span class="sxs-lookup"><span data-stu-id="87452-105">When you use hello Azure Backup agent tooback up files, hello backup process might take longer than expected.</span></span> <span data-ttu-id="87452-106">To opóźnienie może być spowodowany przez jedną lub więcej z następujących hello:</span><span class="sxs-lookup"><span data-stu-id="87452-106">This delay might be caused by one or more of hello following:</span></span>

* [<span data-ttu-id="87452-107">Brak wąskich gardeł wydajności na komputerze hello, która jest tworzona kopia zapasowa.</span><span class="sxs-lookup"><span data-stu-id="87452-107">There are performance bottlenecks on hello computer that’s being backed up.</span></span>](#cause1)
* [<span data-ttu-id="87452-108">Inny proces lub oprogramowanie antywirusowe jest zakłócać hello procesu tworzenia kopii zapasowej Azure.</span><span class="sxs-lookup"><span data-stu-id="87452-108">Another process or antivirus software is interfering with hello Azure Backup process.</span></span>](#cause2)
* [<span data-ttu-id="87452-109">agent usługi Kopia zapasowa Hello jest uruchomiona na maszynie wirtualnej platformy Azure (VM).</span><span class="sxs-lookup"><span data-stu-id="87452-109">hello Backup agent is running on an Azure virtual machine (VM).</span></span>](#cause3)  
* [<span data-ttu-id="87452-110">W przypadku tworzenia kopii zapasowej dużą liczbą plików (w milionach).</span><span class="sxs-lookup"><span data-stu-id="87452-110">You're backing up a large number (millions) of files.</span></span>](#cause4)

<span data-ttu-id="87452-111">Przed rozpoczęciem rozwiązywania problemów zaleca się pobrać i zainstalować hello [najnowsza wersja agenta usługi Kopia zapasowa Azure](http://aka.ms/azurebackup_agent).</span><span class="sxs-lookup"><span data-stu-id="87452-111">Before you start troubleshooting issues, we recommend that you download and install hello [latest Azure Backup agent](http://aka.ms/azurebackup_agent).</span></span> <span data-ttu-id="87452-112">Firma Microsoft dokonać toofix agenta kopii zapasowej toohello częste aktualizacje różne problemy, Dodaj funkcje i zwiększyć wydajność.</span><span class="sxs-lookup"><span data-stu-id="87452-112">We make frequent updates toohello Backup agent toofix various issues, add features, and improve performance.</span></span>

<span data-ttu-id="87452-113">Ponadto zdecydowanie zalecamy zapoznanie się hello [usługi Kopia zapasowa Azure — często zadawane pytania](backup-azure-backup-faq.md) toomake się, że nie występują dowolne hello typowych problemów z konfiguracją.</span><span class="sxs-lookup"><span data-stu-id="87452-113">We also strongly recommend that you review hello [Azure Backup service FAQ](backup-azure-backup-faq.md) toomake sure you're not experiencing any of hello common configuration issues.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

<a id="cause1"></a>

## <a name="cause-performance-bottlenecks-on-hello-computer"></a><span data-ttu-id="87452-114">Przyczyna: Wąskich gardeł wydajności na komputerze hello</span><span class="sxs-lookup"><span data-stu-id="87452-114">Cause: Performance bottlenecks on hello computer</span></span>
<span data-ttu-id="87452-115">Wąskie gardła na komputerze hello, która jest tworzona kopia zapasowa może powodować opóźnienia.</span><span class="sxs-lookup"><span data-stu-id="87452-115">Bottlenecks on hello computer that's being backed up can cause delays.</span></span> <span data-ttu-id="87452-116">Na przykład Witaj toodisk tooread lub zapisu możliwości komputera lub danych toosend dostępną przepustowość sieci hello może spowodować wąskich gardeł.</span><span class="sxs-lookup"><span data-stu-id="87452-116">For example, hello computer's ability tooread or write toodisk, or available bandwidth toosend data over hello network, can cause bottlenecks.</span></span>

<span data-ttu-id="87452-117">System Windows oferuje wbudowane narzędzie, które jest nazywany [monitora wydajności](https://technet.microsoft.com/magazine/2008.08.pulse.aspx) toodetect (Perfmon) tych wąskich gardeł.</span><span class="sxs-lookup"><span data-stu-id="87452-117">Windows provides a built-in tool that's called [Performance Monitor](https://technet.microsoft.com/magazine/2008.08.pulse.aspx) (Perfmon) toodetect these bottlenecks.</span></span>

<span data-ttu-id="87452-118">Poniżej przedstawiono niektóre liczniki wydajności i zakresy, które mogą pomóc w zdiagnozowaniu wąskich gardeł optymalne kopii zapasowych.</span><span class="sxs-lookup"><span data-stu-id="87452-118">Here are some performance counters and ranges that can be helpful in diagnosing bottlenecks for optimal backups.</span></span>

| <span data-ttu-id="87452-119">Licznik</span><span class="sxs-lookup"><span data-stu-id="87452-119">Counter</span></span> | <span data-ttu-id="87452-120">Stan</span><span class="sxs-lookup"><span data-stu-id="87452-120">Status</span></span> |
| --- | --- |
| <span data-ttu-id="87452-121">Dysk logiczny (dysk fizyczny)--% bezczynności</span><span class="sxs-lookup"><span data-stu-id="87452-121">Logical Disk(Physical Disk)--%idle</span></span> |<span data-ttu-id="87452-122">• too50 bezczynności 100% % bezczynności = w dobrej kondycji</span><span class="sxs-lookup"><span data-stu-id="87452-122">• 100% idle too50% idle = Healthy</span></span></br><span data-ttu-id="87452-123">• too20 bezczynności 49% % bezczynności = ostrzeżenia lub monitora</span><span class="sxs-lookup"><span data-stu-id="87452-123">• 49% idle too20% idle = Warning or Monitor</span></span></br><span data-ttu-id="87452-124">• too0 bezczynności 19% % bezczynności = krytyczne lub specyfikacji z</span><span class="sxs-lookup"><span data-stu-id="87452-124">• 19% idle too0% idle = Critical or Out of Spec</span></span> |
| <span data-ttu-id="87452-125">Dysk logiczny (dysk fizyczny)--% średni S odczytu lub zapisu na dysku</span><span class="sxs-lookup"><span data-stu-id="87452-125">Logical Disk(Physical Disk)--%Avg. Disk Sec Read or Write</span></span> |<span data-ttu-id="87452-126">• 0,001 ms too0.015 ms = w dobrej kondycji</span><span class="sxs-lookup"><span data-stu-id="87452-126">• 0.001 ms too0.015 ms  = Healthy</span></span></br><span data-ttu-id="87452-127">• 0,015 ms too0.025 ms = ostrzeżenia lub monitora</span><span class="sxs-lookup"><span data-stu-id="87452-127">• 0.015 ms too0.025 ms = Warning or Monitor</span></span></br><span data-ttu-id="87452-128">• 0.026 ms lub już = krytyczne lub specyfikacji z</span><span class="sxs-lookup"><span data-stu-id="87452-128">• 0.026 ms or longer = Critical or Out of Spec</span></span> |
| <span data-ttu-id="87452-129">Dysk logiczny (dysk fizyczny) — bieżąca długość kolejki dysku (dla wszystkich wystąpień)</span><span class="sxs-lookup"><span data-stu-id="87452-129">Logical Disk(Physical Disk)--Current Disk Queue Length (for all instances)</span></span> |<span data-ttu-id="87452-130">80 żądań przez więcej niż 6 minut</span><span class="sxs-lookup"><span data-stu-id="87452-130">80 requests for more than 6 minutes</span></span> |
| <span data-ttu-id="87452-131">Pamięć — Bajty z systemem innym niż puli stronicowanej</span><span class="sxs-lookup"><span data-stu-id="87452-131">Memory--Pool Non Paged Bytes</span></span> |<span data-ttu-id="87452-132">• Mniej niż 60% puli używane = w dobrej kondycji</span><span class="sxs-lookup"><span data-stu-id="87452-132">• Less than 60% of pool consumed = Healthy</span></span><br><span data-ttu-id="87452-133">• 61% too80% puli używane = ostrzeżenia lub monitora</span><span class="sxs-lookup"><span data-stu-id="87452-133">• 61% too80% of pool consumed = Warning or Monitor</span></span></br><span data-ttu-id="87452-134">• Większa niż 80% puli używane = krytyczne lub specyfikacji z</span><span class="sxs-lookup"><span data-stu-id="87452-134">• Greater than 80% pool consumed = Critical or Out of Spec</span></span> |
| <span data-ttu-id="87452-135">Pamięć — Bajty w puli stronicowanej</span><span class="sxs-lookup"><span data-stu-id="87452-135">Memory--Pool Paged Bytes</span></span> |<span data-ttu-id="87452-136">• Mniej niż 60% puli używane = w dobrej kondycji</span><span class="sxs-lookup"><span data-stu-id="87452-136">• Less than 60% of pool consumed = Healthy</span></span></br><span data-ttu-id="87452-137">• 61% too80% puli używane = ostrzeżenia lub monitora</span><span class="sxs-lookup"><span data-stu-id="87452-137">• 61% too80% of pool consumed = Warning or Monitor</span></span></br><span data-ttu-id="87452-138">• Większa niż 80% puli używane = krytyczne lub specyfikacji z</span><span class="sxs-lookup"><span data-stu-id="87452-138">• Greater than 80% pool consumed = Critical or Out of Spec</span></span> |
| <span data-ttu-id="87452-139">Pamięć — dostępnego w megabajtach</span><span class="sxs-lookup"><span data-stu-id="87452-139">Memory--Available Megabytes</span></span> |<span data-ttu-id="87452-140">• 50% pamięci lub więcej = w dobrej kondycji</span><span class="sxs-lookup"><span data-stu-id="87452-140">• 50% of free memory available or more = Healthy</span></span></br><span data-ttu-id="87452-141">• 25% pamięci = monitora</span><span class="sxs-lookup"><span data-stu-id="87452-141">• 25% of free memory available = Monitor</span></span></br><span data-ttu-id="87452-142">• 10% pamięci = ostrzeżenie</span><span class="sxs-lookup"><span data-stu-id="87452-142">• 10% of free memory available = Warning</span></span></br><span data-ttu-id="87452-143">• Mniej niż 100 MB lub 5% wolnej pamięci = krytyczne lub specyfikacji z</span><span class="sxs-lookup"><span data-stu-id="87452-143">• Less than 100 MB or 5% of free memory available = Critical or Out of Spec</span></span> |
| <span data-ttu-id="87452-144">Procesor —\%czas procesora (wszystkie wystąpienia)</span><span class="sxs-lookup"><span data-stu-id="87452-144">Processor--\%Processor Time (all instances)</span></span> |<span data-ttu-id="87452-145">• Mniej niż 60% używane = w dobrej kondycji</span><span class="sxs-lookup"><span data-stu-id="87452-145">• Less than 60% consumed = Healthy</span></span></br><span data-ttu-id="87452-146">• 61% too90% używane = Monitor lub Uwaga</span><span class="sxs-lookup"><span data-stu-id="87452-146">• 61% too90% consumed = Monitor or Caution</span></span></br><span data-ttu-id="87452-147">• 91% too100% używane = krytyczne</span><span class="sxs-lookup"><span data-stu-id="87452-147">• 91% too100% consumed = Critical</span></span> |

> [!NOTE]
> <span data-ttu-id="87452-148">Jeśli okaże się, że infrastruktura hello jest hello culprit, zaleca się defragmentowania dysków hello regularnie w celu zapewnienia lepszej wydajności.</span><span class="sxs-lookup"><span data-stu-id="87452-148">If you determine that hello infrastructure is hello culprit, we recommend that you defragment hello disks regularly for better performance.</span></span>
>
>

<a id="cause2"></a>

## <a name="cause-another-process-or-antivirus-software-interfering-with-azure-backup"></a><span data-ttu-id="87452-149">Przyczyna: Inny proces lub zakłócać kopia zapasowa Azure oprogramowanie antywirusowe</span><span class="sxs-lookup"><span data-stu-id="87452-149">Cause: Another process or antivirus software interfering with Azure Backup</span></span>
<span data-ttu-id="87452-150">Firma Microsoft przedstawiono kilka wystąpień, gdy inne procesy w systemie Windows hello mieć negatywny wpływ na wydajność hello procesu agenta usługi Kopia zapasowa Azure.</span><span class="sxs-lookup"><span data-stu-id="87452-150">We've seen several instances where other processes in hello Windows system have negatively affected performance of hello Azure Backup agent process.</span></span> <span data-ttu-id="87452-151">Na przykład hello agenta usługi Kopia zapasowa Azure i inny program tooback zapasową danych, lub gdy oprogramowanie antywirusowe jest uruchomiony i ma blokadę toobe pliki kopii zapasowej, hello blokad wielu plików może spowodować rywalizacji.</span><span class="sxs-lookup"><span data-stu-id="87452-151">For example, if you use both hello Azure Backup agent and another program tooback up data, or if antivirus software is running and has a lock on files toobe backed up, hello multiple locks on files might cause contention.</span></span> <span data-ttu-id="87452-152">W takiej sytuacji hello kopii zapasowej może zakończyć się niepowodzeniem lub hello zadania może trwać dłużej, niż oczekiwano.</span><span class="sxs-lookup"><span data-stu-id="87452-152">In this situation, hello backup might fail, or hello job might take longer than expected.</span></span>

<span data-ttu-id="87452-153">Witaj najlepsze zalecenie, w tym scenariuszu jest tooturn poza hello innych toosee kopii zapasowej program, czy zmiany czasu tworzenia kopii zapasowych hello hello Azure Backup agent.</span><span class="sxs-lookup"><span data-stu-id="87452-153">hello best recommendation in this scenario is tooturn off hello other backup program toosee whether hello backup time for hello Azure Backup agent changes.</span></span> <span data-ttu-id="87452-154">Zwykle, upewniając się, że wiele zadań tworzenia kopii zapasowej nie są uruchomione na powitania jednocześnie jest wystarczające tooprevent je z wpływających na siebie.</span><span class="sxs-lookup"><span data-stu-id="87452-154">Usually, making sure that multiple backup jobs are not running at hello same time is sufficient tooprevent them from affecting each other.</span></span>

<span data-ttu-id="87452-155">Programy antywirusowe, zaleca się wykluczenie hello następujące pliki i lokalizacje:</span><span class="sxs-lookup"><span data-stu-id="87452-155">For antivirus programs, we recommend that you exclude hello following files and locations:</span></span>

* <span data-ttu-id="87452-156">C:\Program Files\Microsoft Azure Recovery Services Agent\bin\cbengine.exe jako proces</span><span class="sxs-lookup"><span data-stu-id="87452-156">C:\Program Files\Microsoft Azure Recovery Services Agent\bin\cbengine.exe as a process</span></span>
* <span data-ttu-id="87452-157">C:\Program Files\Microsoft Azure Recovery Services Agent\ folderów</span><span class="sxs-lookup"><span data-stu-id="87452-157">C:\Program Files\Microsoft Azure Recovery Services Agent\ folders</span></span>
* <span data-ttu-id="87452-158">Pliki tymczasowe lokalizacji (Jeśli nie używasz hello standardowej lokalizacji)</span><span class="sxs-lookup"><span data-stu-id="87452-158">Scratch location (if you're not using hello standard location)</span></span>

<a id="cause3"></a>

## <a name="cause-backup-agent-running-on-an-azure-virtual-machine"></a><span data-ttu-id="87452-159">Przyczyna: Kopia zapasowa agenta uruchomionego na maszynie wirtualnej platformy Azure</span><span class="sxs-lookup"><span data-stu-id="87452-159">Cause: Backup agent running on an Azure virtual machine</span></span>
<span data-ttu-id="87452-160">Jeśli używasz hello agenta kopii zapasowej na maszynie Wirtualnej, wydajność będzie mniejsza niż po uruchomieniu go na komputerze fizycznym.</span><span class="sxs-lookup"><span data-stu-id="87452-160">If you're running hello Backup agent on a VM, performance will be slower than when you run it on a physical machine.</span></span> <span data-ttu-id="87452-161">Jest to zachowanie normalne powodu tooIOPS ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="87452-161">This is expected due tooIOPS limitations.</span></span>  <span data-ttu-id="87452-162">Jednak można zoptymalizować wydajność hello przełączając hello dysków z danymi tworzona jest kopia zapasowa tooAzure magazyn w warstwie Premium.</span><span class="sxs-lookup"><span data-stu-id="87452-162">However, you can optimize hello performance by switching hello data drives that are being backed up tooAzure Premium Storage.</span></span> <span data-ttu-id="87452-163">Pracujemy nad rozwiązywania tego problemu, a hello poprawki będą dostępne w przyszłej wersji.</span><span class="sxs-lookup"><span data-stu-id="87452-163">We're working on fixing this issue, and hello fix will be available in a future release.</span></span>

<a id="cause4"></a>

## <a name="cause-backing-up-a-large-number-millions-of-files"></a><span data-ttu-id="87452-164">Przyczyna: Tworzenie kopii zapasowej dużą liczbą plików (w milionach)</span><span class="sxs-lookup"><span data-stu-id="87452-164">Cause: Backing up a large number (millions) of files</span></span>
<span data-ttu-id="87452-165">Przenoszenie dużej ilości danych będzie trwało dłużej niż przenoszenie mniejsza ilość danych.</span><span class="sxs-lookup"><span data-stu-id="87452-165">Moving a large volume of data will take longer than moving a smaller volume of data.</span></span> <span data-ttu-id="87452-166">W niektórych przypadkach czas tworzenia kopii zapasowej jest powiązana toonot tylko hello rozmiar danych hello, ale także hello liczbę plików lub folderów.</span><span class="sxs-lookup"><span data-stu-id="87452-166">In some cases, backup time is related toonot only hello size of hello data, but also hello number of files or folders.</span></span> <span data-ttu-id="87452-167">Jest to szczególnie istotne, kiedy miliony małych plików (kilka tooa bajtów kilku kilobajtów) tworzona jest kopia zapasowa.</span><span class="sxs-lookup"><span data-stu-id="87452-167">This is especially true when millions of small files (a few bytes tooa few kilobytes) are being backed up.</span></span>

<span data-ttu-id="87452-168">Dzieje się tak, ponieważ w przypadku tworzenia kopii zapasowej danych hello i przeniesienie ich tooAzure, Azure jest jednocześnie skatalogowania plików.</span><span class="sxs-lookup"><span data-stu-id="87452-168">This behavior occurs because while you're backing up hello data and moving it tooAzure, Azure is simultaneously cataloging your files.</span></span> <span data-ttu-id="87452-169">W niektórych scenariuszach rzadkich hello katalogu operacji może potrwać dłużej niż oczekiwano.</span><span class="sxs-lookup"><span data-stu-id="87452-169">In some rare scenarios, hello catalog operation might take longer than expected.</span></span>

<span data-ttu-id="87452-170">powitania po wskaźniki może pomóc w zrozumieć "wąskie gardło" hello i odpowiednio działają na powitania następne kroki:</span><span class="sxs-lookup"><span data-stu-id="87452-170">hello following indicators can help you understand hello bottleneck and accordingly work on hello next steps:</span></span>

* <span data-ttu-id="87452-171">**Interfejs użytkownika jest wyświetlany postęp do transferu danych hello**.</span><span class="sxs-lookup"><span data-stu-id="87452-171">**UI is showing progress for hello data transfer**.</span></span> <span data-ttu-id="87452-172">dane Hello są wciąż przesyłane.</span><span class="sxs-lookup"><span data-stu-id="87452-172">hello data is still being transferred.</span></span> <span data-ttu-id="87452-173">przepustowość sieci Hello lub hello rozmiar danych mogą być przyczyną opóźnień.</span><span class="sxs-lookup"><span data-stu-id="87452-173">hello network bandwidth or hello size of data might be causing delays.</span></span>
* <span data-ttu-id="87452-174">**Interfejs użytkownika nie jest wyświetlany postęp do transferu danych hello**.</span><span class="sxs-lookup"><span data-stu-id="87452-174">**UI is not showing progress for hello data transfer**.</span></span> <span data-ttu-id="87452-175">Hello otwórz dzienniki znajdujący się w Agent\Temp usług odzyskiwania Azure C:\Microsoft, a następnie wyszukaj hello FileProvider::EndData wpis w dziennikach hello.</span><span class="sxs-lookup"><span data-stu-id="87452-175">Open hello logs located at C:\Microsoft Azure Recovery Services Agent\Temp, and then check for hello FileProvider::EndData entry in hello logs.</span></span> <span data-ttu-id="87452-176">Ten wpis oznacza, że zakończono transferu danych hello dzieje hello katalogu operacji.</span><span class="sxs-lookup"><span data-stu-id="87452-176">This entry signifies that hello data transfer finished and hello catalog operation is happening.</span></span> <span data-ttu-id="87452-177">Nie Anuluj hello zadania tworzenia kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="87452-177">Don't cancel hello backup jobs.</span></span> <span data-ttu-id="87452-178">Zamiast tego należy zaczekać nieco dłużej na powitania katalogu operacji toofinish.</span><span class="sxs-lookup"><span data-stu-id="87452-178">Instead, wait a little longer for hello catalog operation toofinish.</span></span> <span data-ttu-id="87452-179">Jeśli hello problem będzie się powtarzać, skontaktuj się z [pomocy technicznej platformy Azure](https://portal.azure.com/#create/Microsoft.Support).</span><span class="sxs-lookup"><span data-stu-id="87452-179">If hello problem persists, contact [Azure support](https://portal.azure.com/#create/Microsoft.Support).</span></span>
