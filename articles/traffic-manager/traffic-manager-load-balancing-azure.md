---
title: "Przy użyciu usługi równoważenia obciążenia na platformie Azure | Dokumentacja firmy Microsoft"
description: "W tym samouczku przedstawiono sposób tworzenia scenariusza za pomocą usługi Azure portfolio równoważenia obciążenia: Traffic Manager, bramę aplikacji i moduł równoważenia obciążenia."
services: traffic-manager
documentationcenter: 
author: liumichelle
manager: vitinnan
editor: 
ms.assetid: f89be3be-a16f-4d47-bcae-db2ab72ade17
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 10/27/2016
ms.author: limichel
ms.openlocfilehash: ae9bd30b76786f94f0d836a39137da696fdb94a2
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="using-load-balancing-services-in-azure"></a><span data-ttu-id="d9217-103">Przy użyciu usługi równoważenia obciążenia na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="d9217-103">Using load-balancing services in Azure</span></span>

## <a name="introduction"></a><span data-ttu-id="d9217-104">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="d9217-104">Introduction</span></span>

<span data-ttu-id="d9217-105">Microsoft Azure udostępnia wiele usług do zarządzania ruchem w sieci i równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="d9217-105">Microsoft Azure provides multiple services for managing how network traffic is distributed and load balanced.</span></span> <span data-ttu-id="d9217-106">Możesz użyć tych usług indywidualnie lub łączenie ich metod w zależności od potrzeb optymalnego rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="d9217-106">You can use these services individually or combine their methods, depending on your needs, to build the optimal solution.</span></span>

<span data-ttu-id="d9217-107">W tym samouczku, możemy najpierw zdefiniować przypadek użycia klienta i wyświetlić sposób można go było bardziej niezawodne i wydajności za pomocą następujących Azure portfolio równoważenia obciążenia: Traffic Manager, bramę aplikacji i moduł równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="d9217-107">In this tutorial, we first define a customer use case and see how it can be made more robust and performant by using the following Azure load-balancing portfolio: Traffic Manager, Application Gateway, and Load Balancer.</span></span> <span data-ttu-id="d9217-108">Następnie udostępniamy instrukcje tworzenia wdrożenia, które jest geograficznie nadmiarowy, dystrybuuje ruch do maszyn wirtualnych i pomaga w zarządzaniu różnych typów żądań.</span><span class="sxs-lookup"><span data-stu-id="d9217-108">We then provide step-by-step instructions for creating a deployment that is geographically redundant, distributes traffic to VMs, and helps you manage different types of requests.</span></span>

<span data-ttu-id="d9217-109">Na poziomie pojęciach każdy z tych usług pełni rolę distinct w hierarchii równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="d9217-109">At a conceptual level, each of these services plays a distinct role in the load-balancing hierarchy.</span></span>

* <span data-ttu-id="d9217-110">**Menedżer ruchu** zapewnia DNS globalnego równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="d9217-110">**Traffic Manager** provides global DNS load balancing.</span></span> <span data-ttu-id="d9217-111">Analizuje przychodzące żądania DNS, a odpowiada dobrej kondycji punktu końcowego, zgodnie z zasadami routingu, wybranych przez klienta.</span><span class="sxs-lookup"><span data-stu-id="d9217-111">It looks at incoming DNS requests and responds with a healthy endpoint, in accordance with the routing policy the customer has selected.</span></span> <span data-ttu-id="d9217-112">Dostępne są następujące opcje dla metody routingu:</span><span class="sxs-lookup"><span data-stu-id="d9217-112">Options for routing methods are:</span></span>
  * <span data-ttu-id="d9217-113">Wydajność routingu, aby wysłać obiekt żądający do najbliższego punktu końcowego pod względem opóźnienia.</span><span class="sxs-lookup"><span data-stu-id="d9217-113">Performance routing to send the requestor to the closest endpoint in terms of latency.</span></span>
  * <span data-ttu-id="d9217-114">Priorytet routingu, aby kierować cały ruch do punktu końcowego z innych punktów końcowych na kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="d9217-114">Priority routing to direct all traffic to an endpoint, with other endpoints as backup.</span></span>
  * <span data-ttu-id="d9217-115">Ważone działanie okrężne routingu, która dystrybuuje ruch według wagi, która jest przypisana do każdego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="d9217-115">Weighted round-robin routing, which distributes traffic based on the weighting that is assigned to each endpoint.</span></span>

  <span data-ttu-id="d9217-116">Klient łączy się bezpośrednio do tego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="d9217-116">The client connects directly to that endpoint.</span></span> <span data-ttu-id="d9217-117">Menedżer ruchu Azure wykrywa punkt końcowy jest zła, a następnie przekierowuje klientów do innego wystąpienia dobrej kondycji.</span><span class="sxs-lookup"><span data-stu-id="d9217-117">Azure Traffic Manager detects when an endpoint is unhealthy and then redirects the clients to another healthy instance.</span></span> <span data-ttu-id="d9217-118">Zapoznaj się [dokumentacji usługi Azure Traffic Manager](traffic-manager-overview.md) Aby dowiedzieć się więcej o usłudze.</span><span class="sxs-lookup"><span data-stu-id="d9217-118">Refer to [Azure Traffic Manager documentation](traffic-manager-overview.md) to learn more about the service.</span></span>
* <span data-ttu-id="d9217-119">**Brama aplikacji w** zawiera kontroler dostarczania aplikacji (ADC) jako usługa, oferty różnych warstwy 7 Równoważenie obciążenia sieciowego funkcji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9217-119">**Application Gateway** provides application delivery controller (ADC) as a service, offering various Layer 7 load-balancing capabilities for your application.</span></span> <span data-ttu-id="d9217-120">Umożliwia ona klientom zoptymalizować wydajność kolektywu serwerów sieci web dzięki przeniesieniu kończenia żądań SSL użycie Procesora CPU na bramie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9217-120">It allows customers to optimize web farm productivity by offloading CPU-intensive SSL termination to the application gateway.</span></span> <span data-ttu-id="d9217-121">Inne funkcje routingu warstwy 7 obejmują rozdzielanie ruchu przychodzącego, koligacji na podstawie plików cookie sesji, routingu adresów URL na podstawie ścieżki i może obsługiwać wiele witryn sieci Web za bramy pojedynczej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9217-121">Other Layer 7 routing capabilities include round-robin distribution of incoming traffic, cookie-based session affinity, URL path-based routing, and the ability to host multiple websites behind a single application gateway.</span></span> <span data-ttu-id="d9217-122">Brama aplikacji można skonfigurować jako bramy łączącej z Internetem, bramę wyłącznie wewnętrznym lub obie te grupy.</span><span class="sxs-lookup"><span data-stu-id="d9217-122">Application Gateway can be configured as an Internet-facing gateway, an internal-only gateway, or a combination of both.</span></span> <span data-ttu-id="d9217-123">Brama aplikacji jest w pełni Azure zarządzanych, skalowalności i wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="d9217-123">Application Gateway is fully Azure managed, scalable, and highly available.</span></span> <span data-ttu-id="d9217-124">Zapewnia ona bogaty zestaw funkcji diagnostyki i rejestrowania, aby uprościć zarządzanie.</span><span class="sxs-lookup"><span data-stu-id="d9217-124">It provides a rich set of diagnostics and logging capabilities for better manageability.</span></span>
* <span data-ttu-id="d9217-125">**Moduł równoważenia obciążenia** jest integralną częścią stosu Azure SDN udostępnia wysokiej wydajności i małych opóźnieniach 4 warstwy równoważenia obciążenia usługi do wszystkich protokołów UDP i TCP.</span><span class="sxs-lookup"><span data-stu-id="d9217-125">**Load Balancer** is an integral part of the Azure SDN stack, providing high-performance, low-latency Layer 4 load-balancing services for all UDP and TCP protocols.</span></span> <span data-ttu-id="d9217-126">Zarządza połączeń przychodzących i wychodzących.</span><span class="sxs-lookup"><span data-stu-id="d9217-126">It manages inbound and outbound connections.</span></span> <span data-ttu-id="d9217-127">Można skonfigurować publicznych oraz wewnętrznych końcowych z równoważeniem obciążenia i zdefiniuj reguły mapowania połączenia przychodzące do miejsc docelowych puli zaplecza przy użyciu opcji TCP i HTTP badania kondycji dostępności usługi zarządzania.</span><span class="sxs-lookup"><span data-stu-id="d9217-127">You can configure public and internal load-balanced endpoints and define rules to map inbound connections to back-end pool destinations by using TCP and HTTP health-probing options to manage service availability.</span></span>

## <a name="scenario"></a><span data-ttu-id="d9217-128">Scenariusz</span><span class="sxs-lookup"><span data-stu-id="d9217-128">Scenario</span></span>

<span data-ttu-id="d9217-129">W tym przykładowym scenariuszu używamy prosty witryny sieci Web, który obsługuje dwa typy zawartości: obrazów i dynamicznie renderowanych stronach sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d9217-129">In this example scenario, we use a simple website that serves two types of content: images and dynamically rendered webpages.</span></span> <span data-ttu-id="d9217-130">Witryna sieci Web musi być geograficznie nadmiarowy, a powinien służyć swoim użytkownikom z najbliższego (najniższym opóźnieniu) lokalizacji do nich.</span><span class="sxs-lookup"><span data-stu-id="d9217-130">The website must be geographically redundant, and it should serve its users from the closest (lowest latency) location to them.</span></span> <span data-ttu-id="d9217-131">Deweloper aplikacji zdecydował, że wszystkie adresy URL zgodne ze wzorcem/obrazów / * są obsługiwane z dedykowanym puli maszyn wirtualnych, które różnią się od reszty kolektywu serwerów sieci web.</span><span class="sxs-lookup"><span data-stu-id="d9217-131">The application developer has decided that any URLs that match the pattern /images/* are served from a dedicated pool of VMs that are different from the rest of the web farm.</span></span>

<span data-ttu-id="d9217-132">Ponadto domyślna pula maszyna wirtualna obsługująca zawartość dynamiczną musi komunikować się do wewnętrznej bazy danych, który znajduje się w klastrze wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="d9217-132">Additionally, the default VM pool serving the dynamic content needs to talk to a back-end database that is hosted on a high-availability cluster.</span></span> <span data-ttu-id="d9217-133">Całe wdrożenie jest skonfigurowane za pomocą usługi Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d9217-133">The entire deployment is set up through Azure Resource Manager.</span></span>

<span data-ttu-id="d9217-134">Przy użyciu usługi Traffic Manager, bramę aplikacji i usługi równoważenia obciążenia umożliwia tej witryny sieci Web na osiągnięcie tych celów projektu:</span><span class="sxs-lookup"><span data-stu-id="d9217-134">Using Traffic Manager, Application Gateway, and Load Balancer allows this website to achieve these design goals:</span></span>

* <span data-ttu-id="d9217-135">**Nadmiarowość geograficzna Multi**: Jeśli jeden region ulegnie awarii, Traffic Manager kieruje ruchem bezproblemowo najbliżej regionu bez żadnej interwencji z właścicielem aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9217-135">**Multi-geo redundancy**: If one region goes down, Traffic Manager routes traffic seamlessly to the closest region without any intervention from the application owner.</span></span>
* <span data-ttu-id="d9217-136">**Mniejsze opóźnienia**: ponieważ Traffic Manager automatycznie poleca klientowi najbliżej regionu, klient napotyka mniejsze opóźnienia podczas żądania zawartości strony sieci Web.</span><span class="sxs-lookup"><span data-stu-id="d9217-136">**Reduced latency**: Because Traffic Manager automatically directs the customer to the closest region, the customer experiences lower latency when requesting the webpage contents.</span></span>
* <span data-ttu-id="d9217-137">**Skalowalność niezależne**: ponieważ obciążenia aplikacji sieci web jest oddzielona typu zawartości, właściciel aplikacji można skalować obciążeń żądania od siebie niezależne.</span><span class="sxs-lookup"><span data-stu-id="d9217-137">**Independent scalability**: Because the web application workload is separated by type of content, the application owner can scale the request workloads independent of each other.</span></span> <span data-ttu-id="d9217-138">Brama aplikacji w gwarantuje, że ruch jest kierowany do prawej pul na podstawie określonej reguły i kondycji tej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9217-138">Application Gateway ensures that the traffic is routed to the right pools based on the specified rules and the health of the application.</span></span>
* <span data-ttu-id="d9217-139">**Równoważenie obciążenia wewnętrznego**: ponieważ moduł równoważenia obciążenia jest przed klastra o wysokiej dostępności, tylko aktywne i dobrej kondycji punktu końcowego dla bazy danych jest uwidaczniany w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9217-139">**Internal load balancing**: Because Load Balancer is in front of the high-availability cluster, only the active and healthy endpoint for a database is exposed to the application.</span></span> <span data-ttu-id="d9217-140">Ponadto administrator bazy danych można zoptymalizować obciążenie przez dystrybucję replik aktywnym i pasywnym niezależnie od aplikacji frontonu klastra.</span><span class="sxs-lookup"><span data-stu-id="d9217-140">Additionally, a database administrator can optimize the workload by distributing active and passive replicas across the cluster independent of the front-end application.</span></span> <span data-ttu-id="d9217-141">Moduł równoważenia obciążenia zapewnia połączenia klastra o wysokiej dostępności i zapewnia tylko dobrej kondycji bazy danych żądania połączenia.</span><span class="sxs-lookup"><span data-stu-id="d9217-141">Load Balancer delivers connections to the high-availability cluster and ensures that only healthy databases receive connection requests.</span></span>

<span data-ttu-id="d9217-142">Na poniższym diagramie przedstawiono architektury tego scenariusza:</span><span class="sxs-lookup"><span data-stu-id="d9217-142">The following diagram shows the architecture of this scenario:</span></span>

![Diagram równoważenia obciążenia architektury](./media/traffic-manager-load-balancing-azure/scenario-diagram.png)

> [!NOTE]
> <span data-ttu-id="d9217-144">W tym przykładzie jest tylko jeden z wielu możliwych konfiguracji usługi równoważenia obciążenia, które platforma Azure oferuje.</span><span class="sxs-lookup"><span data-stu-id="d9217-144">This example is only one of many possible configurations of the load-balancing services that Azure offers.</span></span> <span data-ttu-id="d9217-145">Menedżera ruchu, brama aplikacji w moduł równoważenia obciążenia mogą być łączone i dopasować zależności potrzeb równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="d9217-145">Traffic Manager, Application Gateway, and Load Balancer can be mixed and matched to best suit your load-balancing needs.</span></span> <span data-ttu-id="d9217-146">Na przykład jeśli odciążanie protokołu SSL lub przetwarzania warstwy 7 nie jest konieczne, usługi równoważenia obciążenia można użyć zamiast Application Gateway.</span><span class="sxs-lookup"><span data-stu-id="d9217-146">For example, if SSL offload or Layer 7 processing is not necessary, Load Balancer can be used in place of Application Gateway.</span></span>

## <a name="setting-up-the-load-balancing-stack"></a><span data-ttu-id="d9217-147">Konfigurowanie równoważenia obciążenia stosu</span><span class="sxs-lookup"><span data-stu-id="d9217-147">Setting up the load-balancing stack</span></span>

### <a name="step-1-create-a-traffic-manager-profile"></a><span data-ttu-id="d9217-148">Krok 1: Tworzenie profilu Menedżera ruchu</span><span class="sxs-lookup"><span data-stu-id="d9217-148">Step 1: Create a Traffic Manager profile</span></span>

1. <span data-ttu-id="d9217-149">W portalu Azure kliknij **nowy**, a następnie wyszukaj marketplace "Profilu Menedżera ruchu".</span><span class="sxs-lookup"><span data-stu-id="d9217-149">In the Azure portal, click **New**, and then search the marketplace for "Traffic Manager profile."</span></span>
2. <span data-ttu-id="d9217-150">Na **profilu usługi Traffic Manager utwórz** bloku, wprowadź następujące informacje podstawowe:</span><span class="sxs-lookup"><span data-stu-id="d9217-150">On the **Create Traffic Manager profile** blade, enter the following basic information:</span></span>

  * <span data-ttu-id="d9217-151">**Nazwa**: należy podać nazwę prefiks DNS profilu Menedżera ruchu.</span><span class="sxs-lookup"><span data-stu-id="d9217-151">**Name**: Give your Traffic Manager profile a DNS prefix name.</span></span>
  * <span data-ttu-id="d9217-152">**Metoda routingu**: Wybierz zasady metody routingu ruchu.</span><span class="sxs-lookup"><span data-stu-id="d9217-152">**Routing method**: Select the traffic-routing method policy.</span></span> <span data-ttu-id="d9217-153">Aby uzyskać więcej informacji na temat metod, zobacz [Traffic Manager metody routingu ruchu](traffic-manager-routing-methods.md).</span><span class="sxs-lookup"><span data-stu-id="d9217-153">For more information about the methods, see [About Traffic Manager traffic routing methods](traffic-manager-routing-methods.md).</span></span>
  * <span data-ttu-id="d9217-154">**Subskrypcja**: Wybierz subskrypcję, która zawiera profil.</span><span class="sxs-lookup"><span data-stu-id="d9217-154">**Subscription**: Select the subscription that contains the profile.</span></span>
  * <span data-ttu-id="d9217-155">**Grupa zasobów**: Wybierz grupę zasobów, który zawiera profil.</span><span class="sxs-lookup"><span data-stu-id="d9217-155">**Resource group**: Select the resource group that contains the profile.</span></span> <span data-ttu-id="d9217-156">Może być grupą nowy lub istniejący zasób.</span><span class="sxs-lookup"><span data-stu-id="d9217-156">It can be a new or existing resource group.</span></span>
  * <span data-ttu-id="d9217-157">**Lokalizacja grupy zasobów**: Usługa Menedżera ruchu jest globalna i niepowiązana do lokalizacji.</span><span class="sxs-lookup"><span data-stu-id="d9217-157">**Resource group location**: Traffic Manager service is global and not bound to a location.</span></span> <span data-ttu-id="d9217-158">Należy jednak określić region grupy, w której znajduje się metadane skojarzone z profilem Menedżera ruchu.</span><span class="sxs-lookup"><span data-stu-id="d9217-158">However, you must specify a region for the group where the metadata associated with the Traffic Manager profile resides.</span></span> <span data-ttu-id="d9217-159">Ta lokalizacja nie ma wpływu na dostępność środowiska uruchomieniowego profilu.</span><span class="sxs-lookup"><span data-stu-id="d9217-159">This location has no impact on the runtime availability of the profile.</span></span>

3. <span data-ttu-id="d9217-160">Kliknij przycisk **Utwórz** do generowania profil Menedżera ruchu.</span><span class="sxs-lookup"><span data-stu-id="d9217-160">Click **Create** to generate the Traffic Manager profile.</span></span>

  ![Blok "Tworzenie Menedżera ruchu"](./media/traffic-manager-load-balancing-azure/s1-create-tm-blade.png)

### <a name="step-2-create-the-application-gateways"></a><span data-ttu-id="d9217-162">Krok 2: Tworzenie bramy aplikacji</span><span class="sxs-lookup"><span data-stu-id="d9217-162">Step 2: Create the application gateways</span></span>

1. <span data-ttu-id="d9217-163">W portalu Azure, w okienku po lewej stronie kliknij **nowy** > **sieci** > **brama aplikacji w**.</span><span class="sxs-lookup"><span data-stu-id="d9217-163">In the Azure portal, in the left pane, click **New** > **Networking** > **Application Gateway**.</span></span>
2. <span data-ttu-id="d9217-164">Wprowadź poniższe podstawowe informacje o bramy aplikacji:</span><span class="sxs-lookup"><span data-stu-id="d9217-164">Enter the following basic information about the application gateway:</span></span>

  * <span data-ttu-id="d9217-165">**Nazwa**: Nazwa bramy aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9217-165">**Name**: The name of the application gateway.</span></span>
  * <span data-ttu-id="d9217-166">**Rozmiar jednostki SKU**: rozmiar bramy aplikacji jest dostępna jako mały, średni lub duży.</span><span class="sxs-lookup"><span data-stu-id="d9217-166">**SKU size**: The size of the application gateway, available as Small, Medium, or Large.</span></span>
  * <span data-ttu-id="d9217-167">**Liczba wystąpień**: liczba wystąpień, wartość z zakresu od 2 do 10.</span><span class="sxs-lookup"><span data-stu-id="d9217-167">**Instance count**: The number of instances, a value from 2 through 10.</span></span>
  * <span data-ttu-id="d9217-168">**Grupa zasobów**: grupy zasobów, która przechowuje bramy aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9217-168">**Resource group**: The resource group that holds the application gateway.</span></span> <span data-ttu-id="d9217-169">Można go istniejącą grupę zasobów lub do nowego.</span><span class="sxs-lookup"><span data-stu-id="d9217-169">It can be an existing resource group or a new one.</span></span>
  * <span data-ttu-id="d9217-170">**Lokalizacja**: region bramy aplikacji, która jest tej samej lokalizacji co grupa zasobów.</span><span class="sxs-lookup"><span data-stu-id="d9217-170">**Location**: The region for the application gateway, which is the same location as the resource group.</span></span> <span data-ttu-id="d9217-171">Lokalizacja jest ważna, ponieważ sieć wirtualna i publiczny adres IP musi znajdować się w tej samej lokalizacji co brama.</span><span class="sxs-lookup"><span data-stu-id="d9217-171">The location is important, because the virtual network and public IP must be in the same location as the gateway.</span></span>
3. <span data-ttu-id="d9217-172">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="d9217-172">Click **OK**.</span></span>
4. <span data-ttu-id="d9217-173">Definiowanie sieci wirtualnej, podsieci IP frontonu i konfiguracji odbiornika dla bramy aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9217-173">Define the virtual network, subnet, front-end IP, and listener configurations for the application gateway.</span></span> <span data-ttu-id="d9217-174">W tym scenariuszu jest adres IP frontonu **publicznych**, dzięki czemu ma zostać dodany jako punkt końcowy profilu Menedżera ruchu na dalszym etapie.</span><span class="sxs-lookup"><span data-stu-id="d9217-174">In this scenario, the front-end IP address is **Public**, which allows it to be added as an endpoint to the Traffic Manager profile later on.</span></span>
5. <span data-ttu-id="d9217-175">Konfigurowanie odbiornika z jednym z następujących opcji:</span><span class="sxs-lookup"><span data-stu-id="d9217-175">Configure the listener with one of the following options:</span></span>
    * <span data-ttu-id="d9217-176">Jeśli używasz protokołu HTTP nie ma nic do skonfigurowania.</span><span class="sxs-lookup"><span data-stu-id="d9217-176">If you use HTTP, there is nothing to configure.</span></span> <span data-ttu-id="d9217-177">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="d9217-177">Click **OK**.</span></span>
    * <span data-ttu-id="d9217-178">Jeśli jest używany protokół HTTPS, konfiguracji są wymagane dodatkowe.</span><span class="sxs-lookup"><span data-stu-id="d9217-178">If you use HTTPS, further configuration is required.</span></span> <span data-ttu-id="d9217-179">Zapoznaj się [Utwórz bramę aplikacji](../application-gateway/application-gateway-create-gateway-portal.md), rozpoczynając od kroku 9.</span><span class="sxs-lookup"><span data-stu-id="d9217-179">Refer to [Create an application gateway](../application-gateway/application-gateway-create-gateway-portal.md), starting at step 9.</span></span> <span data-ttu-id="d9217-180">Po zakończeniu konfiguracji kliknij **OK**.</span><span class="sxs-lookup"><span data-stu-id="d9217-180">When you have completed the configuration, click **OK**.</span></span>

#### <a name="configure-url-routing-for-application-gateways"></a><span data-ttu-id="d9217-181">Konfigurowanie adresu URL routingu dla bramy aplikacji</span><span class="sxs-lookup"><span data-stu-id="d9217-181">Configure URL routing for application gateways</span></span>

<span data-ttu-id="d9217-182">Po wybraniu puli zaplecza bramy aplikacji, który jest skonfigurowany przy użyciu reguły na podstawie ścieżki trwa wzorzec ścieżki adresu URL żądania, oprócz rozdzielanie.</span><span class="sxs-lookup"><span data-stu-id="d9217-182">When you choose a back-end pool, an application gateway that's configured with a path-based rule takes a path pattern of the request URL in addition to round-robin distribution.</span></span> <span data-ttu-id="d9217-183">W tym scenariuszu dodajemy regułę ścieżki bezpośrednie dowolny adres URL z "/images/\*" do puli serwerów obrazu.</span><span class="sxs-lookup"><span data-stu-id="d9217-183">In this scenario, we are adding a path-based rule to direct any URL with "/images/\*" to the image server pool.</span></span> <span data-ttu-id="d9217-184">Aby uzyskać więcej informacji na temat konfigurowania adresu URL na podstawie ścieżki routingu dla bramy aplikacji dotyczą [Tworzenie reguły na podstawie ścieżki dla bramy aplikacji](../application-gateway/application-gateway-create-url-route-portal.md).</span><span class="sxs-lookup"><span data-stu-id="d9217-184">For more information about configuring URL path-based routing for an application gateway, refer to [Create a path-based rule for an application gateway](../application-gateway/application-gateway-create-url-route-portal.md).</span></span>

![Diagram warstwa sieci web bramy aplikacji](./media/traffic-manager-load-balancing-azure/web-tier-diagram.png)

1. <span data-ttu-id="d9217-186">W grupie zasobów przejdź do wystąpienia bramy aplikacji, który został utworzony w poprzedniej sekcji.</span><span class="sxs-lookup"><span data-stu-id="d9217-186">From your resource group, go to the instance of the application gateway that you created in the preceding section.</span></span>
2. <span data-ttu-id="d9217-187">W obszarze **ustawienia**, wybierz pozycję **pul zaplecza**, a następnie wybierz **Dodaj** można dodać maszyn wirtualnych, które chcesz skojarzyć z pul zaplecza warstwa sieci web.</span><span class="sxs-lookup"><span data-stu-id="d9217-187">Under **Settings**, select **Backend pools**, and then select **Add** to add the VMs that you want to associate with the web-tier back-end pools.</span></span>
3. <span data-ttu-id="d9217-188">Na **Dodaj pulę zaplecza** bloku, wprowadź nazwę puli zaplecza i adresów IP komputerów, które znajdują się w puli.</span><span class="sxs-lookup"><span data-stu-id="d9217-188">On the **Add backend pool** blade, enter the name of the back-end pool and all the IP addresses of the machines that reside in the pool.</span></span> <span data-ttu-id="d9217-189">W tym scenariuszu połączono dwie pule serwera zaplecza maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="d9217-189">In this scenario, we are connecting two back-end server pools of virtual machines.</span></span>

  ![Blok "Dodaj pulę zaplecza" bramy aplikacji](./media/traffic-manager-load-balancing-azure/s2-appgw-add-bepool.png)

4. <span data-ttu-id="d9217-191">W obszarze **ustawienia** bramy aplikacji wybierz **reguły**, a następnie kliknij przycisk **opartych na ścieżce** przycisk, aby dodać regułę.</span><span class="sxs-lookup"><span data-stu-id="d9217-191">Under **Settings** of the application gateway, select **Rules**, and then click the **Path based** button to add a rule.</span></span>

  ![Przycisk "Na podstawie ścieżki" reguły bramy aplikacji](./media/traffic-manager-load-balancing-azure/s2-appgw-add-pathrule.png)

5. <span data-ttu-id="d9217-193">Na **reguły na podstawie ścieżki Dodaj** bloku, skonfiguruj regułę podając następujące informacje.</span><span class="sxs-lookup"><span data-stu-id="d9217-193">On the **Add path-based rule** blade, configure the rule by providing the following information.</span></span>

   <span data-ttu-id="d9217-194">Podstawowe ustawienia:</span><span class="sxs-lookup"><span data-stu-id="d9217-194">Basic settings:</span></span>

   + <span data-ttu-id="d9217-195">**Nazwa**: przyjazną nazwę reguły, który jest dostępny w portalu.</span><span class="sxs-lookup"><span data-stu-id="d9217-195">**Name**: The friendly name of the rule that is accessible in the portal.</span></span>
   + <span data-ttu-id="d9217-196">**Odbiornik**: odbiornik, który jest używany dla reguły.</span><span class="sxs-lookup"><span data-stu-id="d9217-196">**Listener**: The listener that is used for the rule.</span></span>
   + <span data-ttu-id="d9217-197">**Domyślna pula zaplecza**: puli zaplecza do użycia z reguły domyślnej.</span><span class="sxs-lookup"><span data-stu-id="d9217-197">**Default backend pool**: The back-end pool to be used with the default rule.</span></span>
   + <span data-ttu-id="d9217-198">**Domyślne ustawienia HTTP**: ustawienia używane z regułą domyślnego protokołu HTTP.</span><span class="sxs-lookup"><span data-stu-id="d9217-198">**Default HTTP settings**: The HTTP settings to be used with the default rule.</span></span>

   <span data-ttu-id="d9217-199">Ścieżka reguły:</span><span class="sxs-lookup"><span data-stu-id="d9217-199">Path-based rules:</span></span>

   + <span data-ttu-id="d9217-200">**Nazwa**: przyjazną nazwę reguły na podstawie ścieżki.</span><span class="sxs-lookup"><span data-stu-id="d9217-200">**Name**: The friendly name of the path-based rule.</span></span>
   + <span data-ttu-id="d9217-201">**Ścieżki**: reguły ścieżki, która jest używana do przesyłania ruchu.</span><span class="sxs-lookup"><span data-stu-id="d9217-201">**Paths**: The path rule that is used for forwarding traffic.</span></span>
   + <span data-ttu-id="d9217-202">**Puli zaplecza**: puli zaplecza do użycia z tą regułą.</span><span class="sxs-lookup"><span data-stu-id="d9217-202">**Backend Pool**: The back-end pool to be used with this rule.</span></span>
   + <span data-ttu-id="d9217-203">**Ustawienie HTTP**: ustawienia protokołu HTTP do użycia z tą regułą.</span><span class="sxs-lookup"><span data-stu-id="d9217-203">**HTTP Setting**: The HTTP settings to be used with this rule.</span></span>

   > [!IMPORTANT]
   > <span data-ttu-id="d9217-204">Ścieżki: Ścieżkach prawidłowy musi rozpoczynać się od "/".</span><span class="sxs-lookup"><span data-stu-id="d9217-204">Paths: Valid paths must start with "/".</span></span> <span data-ttu-id="d9217-205">Symbol wieloznaczny "\*" jest dozwolona tylko na końcu.</span><span class="sxs-lookup"><span data-stu-id="d9217-205">The wildcard "\*" is allowed only at the end.</span></span> <span data-ttu-id="d9217-206">Nieprawidłowa przykładów /xyz, /xyz\*, lub /xyz/\*.</span><span class="sxs-lookup"><span data-stu-id="d9217-206">Valid examples are /xyz, /xyz\*, or /xyz/\*.</span></span>

   ![Blok "Dodaj ścieżkę na podstawie reguły" bramy aplikacji](./media/traffic-manager-load-balancing-azure/s2-appgw-pathrule-blade.png)

### <a name="step-3-add-application-gateways-to-the-traffic-manager-endpoints"></a><span data-ttu-id="d9217-208">Krok 3: Dodawanie bramy aplikacji do punktów końcowych usługi Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="d9217-208">Step 3: Add application gateways to the Traffic Manager endpoints</span></span>

<span data-ttu-id="d9217-209">W tym scenariuszu Menedżera ruchu jest podłączony do bramy aplikacji (zgodnie z konfiguracją w poprzednim kroku), które znajdują się w różnych regionach.</span><span class="sxs-lookup"><span data-stu-id="d9217-209">In this scenario, Traffic Manager is connected to application gateways (as configured in the preceding steps) that reside in different regions.</span></span> <span data-ttu-id="d9217-210">Teraz, gdy skonfigurowano bram aplikacji, następnym krokiem jest podłącz je do profilu Menedżera ruchu.</span><span class="sxs-lookup"><span data-stu-id="d9217-210">Now that the application gateways are configured, the next step is to connect them to your Traffic Manager profile.</span></span>

1. <span data-ttu-id="d9217-211">Otwórz profil Menedżera ruchu.</span><span class="sxs-lookup"><span data-stu-id="d9217-211">Open your Traffic Manager profile.</span></span> <span data-ttu-id="d9217-212">Aby to zrobić, Szukaj w grupie zasobów lub wyszukiwanie nazwy profilu Menedżera ruchu z **wszystkie zasoby**.</span><span class="sxs-lookup"><span data-stu-id="d9217-212">To do so, look in your resource group or search for the name of the Traffic Manager profile from **All Resources**.</span></span>
2. <span data-ttu-id="d9217-213">W okienku po lewej stronie wybierz **punkty końcowe**, a następnie kliknij przycisk **Dodaj** Dodawanie punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="d9217-213">In the left pane, select **Endpoints**, and then click **Add** to add an endpoint.</span></span>

  ![Przycisk usługi Traffic Manager punkty końcowe "Dodaj"](./media/traffic-manager-load-balancing-azure/s3-tm-add-endpoint.png)

3. <span data-ttu-id="d9217-215">Na **dodać punkt końcowy** bloku Utwórz punkt końcowy, wprowadzając następujące informacje:</span><span class="sxs-lookup"><span data-stu-id="d9217-215">On the **Add endpoint** blade, create an endpoint by entering the following information:</span></span>

  * <span data-ttu-id="d9217-216">**Typ**: Wybierz typ punktu końcowego do równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="d9217-216">**Type**: Select the type of endpoint to load-balance.</span></span> <span data-ttu-id="d9217-217">W tym scenariuszu wybierz **punktu końcowego platformy Azure** ponieważ połączono go do wystąpień bramy aplikacji, które zostały wcześniej skonfigurowane.</span><span class="sxs-lookup"><span data-stu-id="d9217-217">In this scenario, select **Azure endpoint** because we are connecting it to the application gateway instances that were configured previously.</span></span>
  * <span data-ttu-id="d9217-218">**Nazwa**: Wprowadź nazwę punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="d9217-218">**Name**: Enter the name of the endpoint.</span></span>
  * <span data-ttu-id="d9217-219">**Typ zasobu docelowy**: Wybierz **publicznego adresu IP** , a następnie w obszarze **zasób docelowy**, wybierz publiczny adres IP bramy aplikacji, który został wcześniej skonfigurowany.</span><span class="sxs-lookup"><span data-stu-id="d9217-219">**Target resource type**: Select **Public IP address** and then, under **Target resource**, select the public IP of the application gateway that was configured previously.</span></span>

   ![Blok "Dodaj punkt końcowy" Menedżera ruchu](./media/traffic-manager-load-balancing-azure/s3-tm-add-endpoint-blade.png)

4. <span data-ttu-id="d9217-221">Teraz możesz przetestować konfigurację dostępu do niego profil Menedżera ruchu sieciowego w systemie DNS (w tym przykładzie: TrafficManagerScenario.trafficmanager.net).</span><span class="sxs-lookup"><span data-stu-id="d9217-221">Now you can test your setup by accessing it with the DNS of your Traffic Manager profile (in this example: TrafficManagerScenario.trafficmanager.net).</span></span> <span data-ttu-id="d9217-222">Można ponownie wysłać żądania, wywołaj lub doprowadzić do maszyn wirtualnych i serwery sieci web, które zostały utworzone w różnych regionach i zmienić ustawienia profilu Menedżera ruchu, aby przetestować konfigurację.</span><span class="sxs-lookup"><span data-stu-id="d9217-222">You can resend requests, bring up or bring down VMs and web servers that were created in different regions, and change the Traffic Manager profile settings to test your setup.</span></span>

### <a name="step-4-create-a-load-balancer"></a><span data-ttu-id="d9217-223">Krok 4: Tworzenie usługi równoważenia obciążenia</span><span class="sxs-lookup"><span data-stu-id="d9217-223">Step 4: Create a load balancer</span></span>

<span data-ttu-id="d9217-224">W tym scenariuszu usługi równoważenia obciążenia dystrybuuje połączenia z warstwą sieci web do baz danych w ramach klastra o wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="d9217-224">In this scenario, Load Balancer distributes connections from the web tier to the databases within a high-availability cluster.</span></span>

<span data-ttu-id="d9217-225">Jeśli klaster wysokiej dostępności bazy danych używa funkcji AlwaysOn programu SQL Server, zapoznaj się [skonfigurować jeden lub więcej zawsze na dostępność odbiorniki grupy](../virtual-machines/windows/sql/virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md) instrukcje krok po kroku.</span><span class="sxs-lookup"><span data-stu-id="d9217-225">If your high-availability database cluster is using SQL Server AlwaysOn, refer to [Configure one or more Always On Availability Group Listeners](../virtual-machines/windows/sql/virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md) for step-by-step instructions.</span></span>

<span data-ttu-id="d9217-226">Aby uzyskać więcej informacji na temat konfigurowania wewnętrznego modułu równoważenia obciążenia, zobacz [utworzyć wewnętrznego modułu równoważenia obciążenia w portalu Azure](../load-balancer/load-balancer-get-started-ilb-arm-portal.md).</span><span class="sxs-lookup"><span data-stu-id="d9217-226">For more information about configuring an internal load balancer, see [Create an Internal load balancer in the Azure portal](../load-balancer/load-balancer-get-started-ilb-arm-portal.md).</span></span>

1. <span data-ttu-id="d9217-227">W portalu Azure, w okienku po lewej stronie kliknij **nowy** > **sieci** > **modułu równoważenia obciążenia**.</span><span class="sxs-lookup"><span data-stu-id="d9217-227">In the Azure portal, in the left pane, click **New** > **Networking** > **Load balancer**.</span></span>
2. <span data-ttu-id="d9217-228">Na **modułu równoważenia obciążenia Utwórz** bloku, wybierz nazwę dla Twojej usługi równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="d9217-228">On the **Create load balancer** blade, choose a name for your load balancer.</span></span>
3. <span data-ttu-id="d9217-229">Ustaw **typu** do **wewnętrzne**i wybierz odpowiednią sieć wirtualna i podsieć do znajdują się w usłudze równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="d9217-229">Set the **Type** to **Internal**, and choose the appropriate virtual network and subnet for the load balancer to reside in.</span></span>
4. <span data-ttu-id="d9217-230">W obszarze **przypisywania adresów IP**, wybierz opcję **dynamiczne** lub **statycznych**.</span><span class="sxs-lookup"><span data-stu-id="d9217-230">Under **IP address assignment**, select either **Dynamic** or **Static**.</span></span>
5. <span data-ttu-id="d9217-231">W obszarze **grupy zasobów**, wybierz grupę zasobów dla usługi równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="d9217-231">Under **Resource group**, choose the resource group for the load balancer.</span></span>
6. <span data-ttu-id="d9217-232">W obszarze **lokalizacji**, wybierz odpowiedni region dla usługi równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="d9217-232">Under **Location**, choose the appropriate region for the load balancer.</span></span>
7. <span data-ttu-id="d9217-233">Kliknij przycisk **Utwórz** do generowania równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="d9217-233">Click **Create** to generate the load balancer.</span></span>

#### <a name="connect-a-back-end-database-tier-to-the-load-balancer"></a><span data-ttu-id="d9217-234">Połącz warstwy bazy danych zaplecza modułu równoważenia obciążenia</span><span class="sxs-lookup"><span data-stu-id="d9217-234">Connect a back-end database tier to the load balancer</span></span>

1. <span data-ttu-id="d9217-235">Z grupy zasobów Znajdź usługę równoważenia obciążenia, który został utworzony w poprzednich krokach.</span><span class="sxs-lookup"><span data-stu-id="d9217-235">From your resource group, find the load balancer that was created in the previous steps.</span></span>
2. <span data-ttu-id="d9217-236">W obszarze **ustawienia**, kliknij przycisk **pul zaplecza**, a następnie kliknij przycisk **Dodaj** można dodać puli zaplecza.</span><span class="sxs-lookup"><span data-stu-id="d9217-236">Under **Settings**, click **Backend pools**, and then click **Add** to add a back-end pool.</span></span>

  ![Blok "Dodaj pulę zaplecza" moduł równoważenia obciążenia](./media/traffic-manager-load-balancing-azure/s4-ilb-add-bepool.png)

3. <span data-ttu-id="d9217-238">Na **Dodaj pulę zaplecza** bloku, wprowadź nazwę puli zaplecza.</span><span class="sxs-lookup"><span data-stu-id="d9217-238">On the **Add backend pool** blade, enter the name of the back-end pool.</span></span>
4. <span data-ttu-id="d9217-239">Dodaj poszczególnych maszyn lub dostępności ustawioną puli zaplecza.</span><span class="sxs-lookup"><span data-stu-id="d9217-239">Add either individual machines or an availability set to the back-end pool.</span></span>

#### <a name="configure-a-probe"></a><span data-ttu-id="d9217-240">Skonfiguruj sondę</span><span class="sxs-lookup"><span data-stu-id="d9217-240">Configure a probe</span></span>

1. <span data-ttu-id="d9217-241">W moduł równoważenia obciążenia w obszarze **ustawienia**, wybierz pozycję **sondy**, a następnie kliknij przycisk **Dodaj** Aby dodać badanie.</span><span class="sxs-lookup"><span data-stu-id="d9217-241">In your load balancer, under **Settings**, select **Probes**, and then click **Add** to add a probe.</span></span>

 ![Blok "Dodaj sondy" moduł równoważenia obciążenia](./media/traffic-manager-load-balancing-azure/s4-ilb-add-probe.png)

2. <span data-ttu-id="d9217-243">Na **sondowania Dodaj** bloku, wprowadź nazwę dla sondy.</span><span class="sxs-lookup"><span data-stu-id="d9217-243">On the **Add probe** blade, enter the name for the probe.</span></span>
3. <span data-ttu-id="d9217-244">Wybierz **protokołu** sondy.</span><span class="sxs-lookup"><span data-stu-id="d9217-244">Select the **Protocol** for the probe.</span></span> <span data-ttu-id="d9217-245">Dla bazy danych może być sondowaniem TCP, a nie badania HTTP.</span><span class="sxs-lookup"><span data-stu-id="d9217-245">For a database, you might want a TCP probe rather than an HTTP probe.</span></span> <span data-ttu-id="d9217-246">Aby dowiedzieć się więcej na temat sondy modułu równoważenia obciążenia, zobacz [sondy modułu równoważenia obciążenia omówienie](../load-balancer/load-balancer-custom-probe-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d9217-246">To learn more about load-balancer probes, refer to [Understand load balancer probes](../load-balancer/load-balancer-custom-probe-overview.md).</span></span>
4. <span data-ttu-id="d9217-247">Wprowadź **portu** bazy danych używanego do uzyskiwania dostępu do sondowania.</span><span class="sxs-lookup"><span data-stu-id="d9217-247">Enter the **Port** of your database to be used for accessing the probe.</span></span>
5. <span data-ttu-id="d9217-248">W obszarze **interwał**, określ częstotliwość sondowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9217-248">Under **Interval**, specify how frequently to probe the application.</span></span>
6. <span data-ttu-id="d9217-249">W obszarze **próg złej kondycji**, określ liczbę ciągłego niepowodzeń sondy, musi nastąpić dla zaplecza maszyna wirtualna może być określana jako zła.</span><span class="sxs-lookup"><span data-stu-id="d9217-249">Under **Unhealthy threshold**, specify the number of continuous probe failures that must occur for the back-end VM to be considered unhealthy.</span></span>
7. <span data-ttu-id="d9217-250">Kliknij przycisk **OK** można utworzyć sondy.</span><span class="sxs-lookup"><span data-stu-id="d9217-250">Click **OK** to create the probe.</span></span>

#### <a name="configure-the-load-balancing-rules"></a><span data-ttu-id="d9217-251">Konfigurowanie reguł równoważenia obciążenia</span><span class="sxs-lookup"><span data-stu-id="d9217-251">Configure the load-balancing rules</span></span>

1. <span data-ttu-id="d9217-252">W obszarze **ustawienia** moduł równoważenia obciążenia, wybierz **reguły równoważenia obciążenia**, a następnie kliknij przycisk **Dodaj** do utworzenia reguły.</span><span class="sxs-lookup"><span data-stu-id="d9217-252">Under **Settings** of your load balancer, select **Load balancing rules**, and then click **Add** to create a rule.</span></span>
2. <span data-ttu-id="d9217-253">Na **reguły równoważenia obciążenia Dodaj** bloku, wprowadź **nazwa** reguły równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="d9217-253">On the **Add load balancing rule** blade, enter the **Name** for the load-balancing rule.</span></span>
3. <span data-ttu-id="d9217-254">Wybierz **adresu IP frontonu** usługi równoważenia obciążenia **protokołu**, i **portu**.</span><span class="sxs-lookup"><span data-stu-id="d9217-254">Choose the **Frontend IP Address** of the load balancer, **Protocol**, and **Port**.</span></span>
4. <span data-ttu-id="d9217-255">W obszarze **portu zaplecza**, określ port używany w puli zaplecza.</span><span class="sxs-lookup"><span data-stu-id="d9217-255">Under **Backend port**, specify the port to be used in the back-end pool.</span></span>
5. <span data-ttu-id="d9217-256">Wybierz **puli zaplecza** i **sondowania** utworzonych w poprzednie kroki, aby zastosować regułę.</span><span class="sxs-lookup"><span data-stu-id="d9217-256">Select the **Backend pool** and the **Probe** that were created in the previous steps to apply the rule to.</span></span>
6. <span data-ttu-id="d9217-257">W obszarze **trwałości sesji**, wybierz sposób sesji do innej witryny.</span><span class="sxs-lookup"><span data-stu-id="d9217-257">Under **Session persistence**, choose how you want the sessions to persist.</span></span>
7. <span data-ttu-id="d9217-258">W obszarze **limitów czasu bezczynności**, określ liczbę minut przed upływem limitu czasu bezczynności.</span><span class="sxs-lookup"><span data-stu-id="d9217-258">Under **Idle timeouts**, specify the number of minutes before an idle timeout.</span></span>
8. <span data-ttu-id="d9217-259">W obszarze **pływający adres IP**, wybierz opcję **wyłączone** lub **włączone**.</span><span class="sxs-lookup"><span data-stu-id="d9217-259">Under **Floating IP**, select either **Disabled** or **Enabled**.</span></span>
9. <span data-ttu-id="d9217-260">Kliknij przycisk **OK**, aby utworzyć regułę.</span><span class="sxs-lookup"><span data-stu-id="d9217-260">Click **OK** to create the rule.</span></span>

### <a name="step-5-connect-web-tier-vms-to-the-load-balancer"></a><span data-ttu-id="d9217-261">Krok 5: Nawiązać połączenia z maszynami wirtualnymi warstwy sieci web usługi równoważenia obciążenia</span><span class="sxs-lookup"><span data-stu-id="d9217-261">Step 5: Connect web-tier VMs to the load balancer</span></span>

<span data-ttu-id="d9217-262">Teraz możemy skonfigurować adres i modułu równoważenia obciążenia frontonu portu IP w aplikacjach, które są uruchomione na maszyny wirtualne warstwy sieci web dla połączeń bazy danych.</span><span class="sxs-lookup"><span data-stu-id="d9217-262">Now we configure the IP address and load-balancer front-end port in the applications that are running on your web-tier VMs for any database connections.</span></span> <span data-ttu-id="d9217-263">Ta konfiguracja jest specyficzne dla aplikacji działających na tych maszynach wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="d9217-263">This configuration is specific to the applications that run on these VMs.</span></span> <span data-ttu-id="d9217-264">Aby skonfigurować docelowy adres IP i port, zajrzyj do dokumentacji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9217-264">To configure the destination IP address and port, refer to the application documentation.</span></span> <span data-ttu-id="d9217-265">Aby znaleźć adres IP frontonu, w portalu Azure, przejdź do puli adresów IP frontonu **ustawienia usługi równoważenia obciążenia** bloku.</span><span class="sxs-lookup"><span data-stu-id="d9217-265">To find the IP address of the front end, in the Azure portal, go to the front-end IP pool on the **Load balancer settings** blade.</span></span>

![Okienko nawigacji "Adresu IP frontonu puli" moduł równoważenia obciążenia](./media/traffic-manager-load-balancing-azure/s5-ilb-frontend-ippool.png)

## <a name="next-steps"></a><span data-ttu-id="d9217-267">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="d9217-267">Next steps</span></span>

* [<span data-ttu-id="d9217-268">Omówienie Menedżera ruchu</span><span class="sxs-lookup"><span data-stu-id="d9217-268">Overview of Traffic Manager</span></span>](traffic-manager-overview.md)
* [<span data-ttu-id="d9217-269">Omówienie bramy aplikacji</span><span class="sxs-lookup"><span data-stu-id="d9217-269">Application Gateway overview</span></span>](../application-gateway/application-gateway-introduction.md)
* [<span data-ttu-id="d9217-270">Omówienie usługi Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="d9217-270">Azure Load Balancer overview</span></span>](../load-balancer/load-balancer-overview.md)
