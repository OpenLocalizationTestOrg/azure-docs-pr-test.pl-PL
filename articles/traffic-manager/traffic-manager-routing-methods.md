---
title: "aaaAzure Traffic Manager — metody routingu ruchu | Dokumentacja firmy Microsoft"
description: "Ten artykuł pomaga zrozumieć metody routingu ruchu innego hello użyty przez Menedżera ruchu"
services: traffic-manager
documentationcenter: 
author: KumudD
manager: timlt
editor: 
ms.assetid: db1efbf6-6762-4c7a-ac99-675d4eeb54d0
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/13/2017
ms.author: kumud
ms.openlocfilehash: b3eeca63ab5f2b9cd4a3a6b6a8fd3e40059e32b5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="traffic-manager-routing-methods"></a><span data-ttu-id="2adcb-103">Metody routingu w usłudze Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="2adcb-103">Traffic Manager routing methods</span></span>

<span data-ttu-id="2adcb-104">Azure Traffic Manager toodetermine metody routingu ruchu obsługuje czterech jak tooroute sieci toohello ruchu różnych punktów końcowych usługi.</span><span class="sxs-lookup"><span data-stu-id="2adcb-104">Azure Traffic Manager supports four traffic-routing methods toodetermine how tooroute network traffic toohello various service endpoints.</span></span> <span data-ttu-id="2adcb-105">Menedżera ruchu stosuje hello routingu ruchu metody tooeach DNS kwerendę.</span><span class="sxs-lookup"><span data-stu-id="2adcb-105">Traffic Manager applies hello traffic-routing method tooeach DNS query it receives.</span></span> <span data-ttu-id="2adcb-106">Metoda routingu ruchu Hello Określa, które punkt końcowy zwrócił w odpowiedzi DNS hello.</span><span class="sxs-lookup"><span data-stu-id="2adcb-106">hello traffic-routing method determines which endpoint returned in hello DNS response.</span></span>

<span data-ttu-id="2adcb-107">Dostępne są cztery metody routingu ruchu w usłudze Traffic Manager:</span><span class="sxs-lookup"><span data-stu-id="2adcb-107">There are four traffic routing methods available in Traffic Manager:</span></span>

* <span data-ttu-id="2adcb-108">**[Priorytet](#priority):** wybierz **priorytet** po toouse podstawowego punktu końcowego dla całego ruchu, a następnie podaj kopii zapasowych w przypadku hello podstawowego lub kopii zapasowej punktów końcowych hello są niedostępne.</span><span class="sxs-lookup"><span data-stu-id="2adcb-108">**[Priority](#priority):** Select **Priority** when you want toouse a primary service endpoint for all traffic, and provide backups in case hello primary or hello backup endpoints are unavailable.</span></span>
* <span data-ttu-id="2adcb-109">**[Ważone](#weighted):** wybierz **ważone** zużycia toodistribute ruch między zbiorem punktów końcowych, albo równomiernie lub zgodnie z tooweights, który zdefiniowano.</span><span class="sxs-lookup"><span data-stu-id="2adcb-109">**[Weighted](#weighted):** Select **Weighted** when you want toodistribute traffic across a set of endpoints, either evenly or according tooweights, which you define.</span></span>
* <span data-ttu-id="2adcb-110">**[Wydajność](#performance):** wybierz **wydajności** gdy masz punktów końcowych w różnych lokalizacjach geograficznych i chcesz, aby użytkownicy końcowi toouse hello "najbliższy" punktu końcowego pod względem hello najniższe opóźnienia sieci.</span><span class="sxs-lookup"><span data-stu-id="2adcb-110">**[Performance](#performance):** Select **Performance** when you have endpoints in different geographic locations and you want end users toouse hello "closest" endpoint in terms of hello lowest network latency.</span></span>
* <span data-ttu-id="2adcb-111">**[Geograficzne](#geographic):** wybierz **geograficzne** tak, aby użytkownicy są toospecific ukierunkowanej punktów końcowych (Azure, zewnętrzne lub zagnieżdżone) na podstawie których lokalizacji geograficznej pochodzi ich zapytanie DNS.</span><span class="sxs-lookup"><span data-stu-id="2adcb-111">**[Geographic](#geographic):** Select **Geographic** so that users are directed toospecific endpoints (Azure, External, or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="2adcb-112">Umożliwia to Menedżera ruchu klientów tooenable zastosowaniach wiedząc regionu geograficznego użytkownika oraz routing ich oparta na ważne.</span><span class="sxs-lookup"><span data-stu-id="2adcb-112">This empowers Traffic Manager customers tooenable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="2adcb-113">Przykładami zgodnych z danych suwerenności zleceń, lokalizacja środowiska użytkownika & zawartości i pomiar ruchu z różnych regionów.</span><span class="sxs-lookup"><span data-stu-id="2adcb-113">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>

<span data-ttu-id="2adcb-114">Wszystkie profile Menedżera ruchu obejmują monitorowania kondycji punktu końcowego i punktu końcowego automatycznej pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="2adcb-114">All Traffic Manager profiles include monitoring of endpoint health and automatic endpoint failover.</span></span> <span data-ttu-id="2adcb-115">Aby uzyskać więcej informacji, zobacz [monitorowanie punktu końcowego Menedżera ruchu](traffic-manager-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="2adcb-115">For more information, see [Traffic Manager Endpoint Monitoring](traffic-manager-monitoring.md).</span></span> <span data-ttu-id="2adcb-116">Jeden profil usługi Traffic Manager można użyć tylko jedna metoda routingu ruchu.</span><span class="sxs-lookup"><span data-stu-id="2adcb-116">A single Traffic Manager profile can use only one traffic routing method.</span></span> <span data-ttu-id="2adcb-117">W dowolnym momencie można wybrać metodę routingu ruchu innego profilu.</span><span class="sxs-lookup"><span data-stu-id="2adcb-117">You can select a different traffic routing method for your profile at any time.</span></span> <span data-ttu-id="2adcb-118">Zmiany zostaną zastosowane w ciągu jednej minuty, a poniesienia bez przestojów.</span><span class="sxs-lookup"><span data-stu-id="2adcb-118">Changes are applied within one minute, and no downtime is incurred.</span></span> <span data-ttu-id="2adcb-119">Metody routingu ruchu można łączyć, używając zagnieżdżonych profilów usługi Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="2adcb-119">Traffic-routing methods can be combined by using nested Traffic Manager profiles.</span></span> <span data-ttu-id="2adcb-120">Zagnieżdżanie umożliwia zaawansowane i elastyczne routingu ruchu konfiguracje, które potrzeb hello większych i złożonych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2adcb-120">Nesting enables sophisticated and flexible traffic-routing configurations that meet hello needs of larger, complex applications.</span></span> <span data-ttu-id="2adcb-121">Aby uzyskać więcej informacji, zobacz [zagnieżdżonych profilów usługi Traffic Manager](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="2adcb-121">For more information, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

## <span data-ttu-id="2adcb-122"><a name = "priority"></a>Metody routingu ruchu o priorytecie</span><span class="sxs-lookup"><span data-stu-id="2adcb-122"><a name = "priority"></a>Priority traffic-routing method</span></span>

<span data-ttu-id="2adcb-123">Często organizacja chce tooprovide niezawodności jego usług przez wdrożenie co najmniej jednej usługi tworzenia kopii zapasowych w przypadku, gdy ich podstawowa usługa przestanie działać.</span><span class="sxs-lookup"><span data-stu-id="2adcb-123">Often an organization wants tooprovide reliability for its services by deploying one or more backup services in case their primary service goes down.</span></span> <span data-ttu-id="2adcb-124">Metoda routingu ruchu 'Priority' Hello umożliwia Azure tooeasily klientów implementacji tego wzorca trybu failover.</span><span class="sxs-lookup"><span data-stu-id="2adcb-124">hello 'Priority' traffic-routing method allows Azure customers tooeasily implement this failover pattern.</span></span>

![Menedżer ruchu Azure 'Priority' routingu ruchu — metoda][1]

<span data-ttu-id="2adcb-126">Witaj profilu usługi Traffic Manager zawiera priorytetową listą punktów końcowych usługi.</span><span class="sxs-lookup"><span data-stu-id="2adcb-126">hello Traffic Manager profile contains a prioritized list of service endpoints.</span></span> <span data-ttu-id="2adcb-127">Domyślnie usługi Traffic Manager wysyła wszystkie ruchu toohello głównej (najwyższy priorytet) punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="2adcb-127">By default, Traffic Manager sends all traffic toohello primary (highest-priority) endpoint.</span></span> <span data-ttu-id="2adcb-128">Jeśli hello podstawowy punkt końcowy nie jest dostępna, trasy menedżera ruchu hello ruchu toohello drugiego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="2adcb-128">If hello primary endpoint is not available, Traffic Manager routes hello traffic toohello second endpoint.</span></span> <span data-ttu-id="2adcb-129">Jeśli oba hello podstawowych i pomocniczych punkty końcowe nie są dostępne, hello ruch przechodzi toohello innej itd.</span><span class="sxs-lookup"><span data-stu-id="2adcb-129">If both hello primary and secondary endpoints are not available, hello traffic goes toohello third, and so on.</span></span> <span data-ttu-id="2adcb-130">Dostępność punktu końcowego hello opiera się na stan hello skonfigurowane (włączona lub wyłączona) i hello monitorowania bieżących punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="2adcb-130">Availability of hello endpoint is based on hello configured status (enabled or disabled) and hello ongoing endpoint monitoring.</span></span>

### <a name="configuring-endpoints"></a><span data-ttu-id="2adcb-131">Konfigurowanie punktów końcowych</span><span class="sxs-lookup"><span data-stu-id="2adcb-131">Configuring endpoints</span></span>

<span data-ttu-id="2adcb-132">Usługi Azure Resource Manager można skonfigurować priorytet punktu końcowego hello jawnie za pomocą właściwości "priority" hello, dla każdego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="2adcb-132">With Azure Resource Manager, you configure hello endpoint priority explicitly using hello 'priority' property for each endpoint.</span></span> <span data-ttu-id="2adcb-133">Ta właściwość jest wartość z zakresu od 1 do 1000.</span><span class="sxs-lookup"><span data-stu-id="2adcb-133">This property is a value between 1 and 1000.</span></span> <span data-ttu-id="2adcb-134">Niższe wartości reprezentują wyższy priorytet.</span><span class="sxs-lookup"><span data-stu-id="2adcb-134">Lower values represent a higher priority.</span></span> <span data-ttu-id="2adcb-135">Punkty końcowe nie mogą mieć wartości priorytetu.</span><span class="sxs-lookup"><span data-stu-id="2adcb-135">Endpoints cannot share priority values.</span></span> <span data-ttu-id="2adcb-136">Ustawienie właściwości hello jest opcjonalna.</span><span class="sxs-lookup"><span data-stu-id="2adcb-136">Setting hello property is optional.</span></span> <span data-ttu-id="2adcb-137">W przypadku pominięcia będzie używana domyślna wartość priorytetu na podstawie kolejności punktu końcowego hello jest używany.</span><span class="sxs-lookup"><span data-stu-id="2adcb-137">When omitted, a default priority based on hello endpoint order is used.</span></span>

##<span data-ttu-id="2adcb-138"><a name = "weighted"></a>Ważoną metody routingu ruchu</span><span class="sxs-lookup"><span data-stu-id="2adcb-138"><a name = "weighted"></a>Weighted traffic-routing method</span></span>
<span data-ttu-id="2adcb-139">metody routingu ruchu "Ważone" Hello pozwala toodistribute ruch równomiernie lub toouse wagi wstępnie zdefiniowane.</span><span class="sxs-lookup"><span data-stu-id="2adcb-139">hello 'Weighted' traffic-routing method allows you toodistribute traffic evenly or toouse a pre-defined weighting.</span></span>

![Azure Traffic Manager "Ważoną" routingu ruchu — metoda][2]

<span data-ttu-id="2adcb-141">Witaj metody ważoną routingu ruchu przypisaniu punktu końcowego tooeach wag w konfiguracji profilu Menedżera ruchu hello.</span><span class="sxs-lookup"><span data-stu-id="2adcb-141">In hello Weighted traffic-routing method, you assign a weight tooeach endpoint in hello Traffic Manager profile configuration.</span></span> <span data-ttu-id="2adcb-142">Waga Hello jest liczba całkowita od 1 too1000.</span><span class="sxs-lookup"><span data-stu-id="2adcb-142">hello weight is an integer from 1 too1000.</span></span> <span data-ttu-id="2adcb-143">Ten parametr jest opcjonalny.</span><span class="sxs-lookup"><span data-stu-id="2adcb-143">This parameter is optional.</span></span> <span data-ttu-id="2adcb-144">Pominięcie menedżerów ruchu korzysta z domyślną wagę "1".</span><span class="sxs-lookup"><span data-stu-id="2adcb-144">If omitted, Traffic Managers uses a default weight of '1'.</span></span>

<span data-ttu-id="2adcb-145">Dla każdego zapytania DNS Odebrano Traffic Manager losowo wybiera dostępnego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="2adcb-145">For each DNS query received, Traffic Manager randomly chooses an available endpoint.</span></span> <span data-ttu-id="2adcb-146">prawdopodobieństwo Hello wybrać punkt końcowy jest oparta na wag hello przypisane tooall dostępnych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="2adcb-146">hello probability of choosing an endpoint is based on hello weights assigned tooall available endpoints.</span></span> <span data-ttu-id="2adcb-147">Przy użyciu hello sama waga we wszystkich wyników punktów końcowych w nawet Dystrybucja ruchu.</span><span class="sxs-lookup"><span data-stu-id="2adcb-147">Using hello same weight across all endpoints results in an even traffic distribution.</span></span> <span data-ttu-id="2adcb-148">Za pomocą wag wyższe lub niższe w określonych punktach końcowych sprawia, że te toobe punkty końcowe częściej lub rzadziej zwracany w odpowiedzi DNS hello.</span><span class="sxs-lookup"><span data-stu-id="2adcb-148">Using higher or lower weights on specific endpoints causes those endpoints toobe returned more or less frequently in hello DNS responses.</span></span>

<span data-ttu-id="2adcb-149">Metoda Hello ważone umożliwia niektórych przydatne w scenariuszach:</span><span class="sxs-lookup"><span data-stu-id="2adcb-149">hello weighted method enables some useful scenarios:</span></span>

* <span data-ttu-id="2adcb-150">Uaktualnienie stopniowe aplikacji: przydzielić procent ruchu tooroute tooa nowy punkt końcowy, a następnie stopniowo zwiększać hello ruchu w czasie too100%.</span><span class="sxs-lookup"><span data-stu-id="2adcb-150">Gradual application upgrade: Allocate a percentage of traffic tooroute tooa new endpoint, and gradually increase hello traffic over time too100%.</span></span>
* <span data-ttu-id="2adcb-151">TooAzure migracji aplikacji: Tworzenie profilu z zarówno dla platformy Azure, jak i zewnętrznych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="2adcb-151">Application migration tooAzure: Create a profile with both Azure and external endpoints.</span></span> <span data-ttu-id="2adcb-152">Dostosuj hello wagę hello punkty końcowe tooprefer hello nowe punkty końcowe.</span><span class="sxs-lookup"><span data-stu-id="2adcb-152">Adjust hello weight of hello endpoints tooprefer hello new endpoints.</span></span>
* <span data-ttu-id="2adcb-153">Chmura poszerzająca dodatkowej pojemności: szybko rozwiń lokalnego wdrożenia w chmurze hello umieszczając za profilu usługi Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="2adcb-153">Cloud-bursting for additional capacity: Quickly expand an on-premises deployment into hello cloud by putting it behind a Traffic Manager profile.</span></span> <span data-ttu-id="2adcb-154">Jeśli potrzebujesz dodatkowej pojemności w chmurze hello można dodać lub włączyć więcej punktów końcowych i określić, jaka część ruchu przechodzi tooeach punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="2adcb-154">When you need extra capacity in hello cloud, you can add or enable more endpoints and specify what portion of traffic goes tooeach endpoint.</span></span>

<span data-ttu-id="2adcb-155">Hello portal Azure Resource Manager obsługuje hello Konfigurowanie routingu ruchu ważoną.</span><span class="sxs-lookup"><span data-stu-id="2adcb-155">hello Resource Manager Azure portal supports hello configuration of weighted traffic routing.</span></span>  <span data-ttu-id="2adcb-156">Można skonfigurować wag używane wersje hello Menedżera zasobów Azure PowerShell, interfejsu wiersza polecenia i hello interfejsów API REST.</span><span class="sxs-lookup"><span data-stu-id="2adcb-156">You can configure weights using hello Resource Manager versions of Azure PowerShell, CLI, and hello REST APIs.</span></span>

<span data-ttu-id="2adcb-157">Jest ważne toounderstand czy odpowiedzi DNS jest buforowany przez klientów i przez serwery DNS cykliczne hello hello klientów za pomocą tooresolve nazwy DNS.</span><span class="sxs-lookup"><span data-stu-id="2adcb-157">It is important toounderstand that DNS responses are cached by clients and by hello recursive DNS servers that hello clients use tooresolve DNS names.</span></span> <span data-ttu-id="2adcb-158">To buforowanie może mieć wpływ na dystrybucje ważoną ruchu.</span><span class="sxs-lookup"><span data-stu-id="2adcb-158">This caching can have an impact on weighted traffic distributions.</span></span> <span data-ttu-id="2adcb-159">W przypadku dużych hello liczba klientów i serwery DNS cykliczne Dystrybucja ruchu działa zgodnie z oczekiwaniami.</span><span class="sxs-lookup"><span data-stu-id="2adcb-159">When hello number of clients and recursive DNS servers is large, traffic distribution works as expected.</span></span> <span data-ttu-id="2adcb-160">Jednak w przypadku małych hello liczbę klientów lub serwerów DNS cykliczne buforowanie może znacznie pochylanie hello Dystrybucja ruchu.</span><span class="sxs-lookup"><span data-stu-id="2adcb-160">However, when hello number of clients or recursive DNS servers is small, caching can significantly skew hello traffic distribution.</span></span>

<span data-ttu-id="2adcb-161">Typowe przypadki użycia obejmują:</span><span class="sxs-lookup"><span data-stu-id="2adcb-161">Common use cases include:</span></span>

* <span data-ttu-id="2adcb-162">Projektowanie i środowisk testowych</span><span class="sxs-lookup"><span data-stu-id="2adcb-162">Development and testing environments</span></span>
* <span data-ttu-id="2adcb-163">Komunikacja aplikacji do aplikacji</span><span class="sxs-lookup"><span data-stu-id="2adcb-163">Application-to-application communications</span></span>
* <span data-ttu-id="2adcb-164">Aplikacje celem wąskie użytkownika — podstawowy, które używają wspólnej infrastruktury DNS cykliczne (na przykład pracownicy firmy łączących się za pośrednictwem serwera proxy)</span><span class="sxs-lookup"><span data-stu-id="2adcb-164">Applications aimed at a narrow user-base that share a common recursive DNS infrastructure (for example, employees of company connecting through a proxy)</span></span>

<span data-ttu-id="2adcb-165">Efekty buforowania te DNS to typowe tooall ruchem DNS routingu systemy, nie tylko usługi Azure Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="2adcb-165">These DNS caching effects are common tooall DNS-based traffic routing systems, not just Azure Traffic Manager.</span></span> <span data-ttu-id="2adcb-166">W niektórych przypadkach jawnie wyczyszczenie pamięci podręcznej DNS hello może udostępnić obejście tego problemu.</span><span class="sxs-lookup"><span data-stu-id="2adcb-166">In some cases, explicitly clearing hello DNS cache may provide a workaround.</span></span> <span data-ttu-id="2adcb-167">W innych przypadkach może być bardziej odpowiednie alternatywną metodę routingu ruchu.</span><span class="sxs-lookup"><span data-stu-id="2adcb-167">In other cases, an alternative traffic-routing method may be more appropriate.</span></span>

## <span data-ttu-id="2adcb-168"><a name = "performance"></a>Metody routingu ruchu wydajności</span><span class="sxs-lookup"><span data-stu-id="2adcb-168"><a name = "performance"></a>Performance traffic-routing method</span></span>

<span data-ttu-id="2adcb-169">Wdrażanie punktów końcowych w co najmniej dwie lokalizacje w Witaj świecie może zwiększyć szybkość reakcji hello wiele aplikacji przez routingu ruchu toohello lokalizacji tooyou "najbliższy".</span><span class="sxs-lookup"><span data-stu-id="2adcb-169">Deploying endpoints in two or more locations across hello globe can improve hello responsiveness of many applications by routing traffic toohello location that is 'closest' tooyou.</span></span> <span data-ttu-id="2adcb-170">metody routingu ruchu "Performance" Hello, obsługuje tę funkcję.</span><span class="sxs-lookup"><span data-stu-id="2adcb-170">hello 'Performance' traffic-routing method provides this capability.</span></span>

![Menedżer ruchu Azure "Performance" routingu ruchu — metoda][3]

<span data-ttu-id="2adcb-172">punkt końcowy "najbliższy" Hello nie jest niekoniecznie najbliższego mierzony odległość geograficznej.</span><span class="sxs-lookup"><span data-stu-id="2adcb-172">hello 'closest' endpoint is not necessarily closest as measured by geographic distance.</span></span> <span data-ttu-id="2adcb-173">Zamiast tego metody routingu ruchu "Performance" hello określa hello najbliższego punktu końcowego, mierząc opóźnienia sieci.</span><span class="sxs-lookup"><span data-stu-id="2adcb-173">Instead, hello 'Performance' traffic-routing method determines hello closest endpoint by measuring network latency.</span></span> <span data-ttu-id="2adcb-174">Menedżer ruchu zapisuje tabeli opóźnienia Internet tootrack hello czasu Rundy między zakresów adresów IP i każdego centrum danych Azure.</span><span class="sxs-lookup"><span data-stu-id="2adcb-174">Traffic Manager maintains an Internet Latency Table tootrack hello round-trip time between IP address ranges and each Azure datacenter.</span></span>

<span data-ttu-id="2adcb-175">Menedżer ruchu wyszukuje hello źródłowy adres IP żądania przychodzącego DNS hello w hello Internet opóźnienia tabeli.</span><span class="sxs-lookup"><span data-stu-id="2adcb-175">Traffic Manager looks up hello source IP address of hello incoming DNS request in hello Internet Latency Table.</span></span> <span data-ttu-id="2adcb-176">Menedżer ruchu wybiera dostępnego punktu końcowego w hello ma hello można uzyskać najmniejsze opóźnienia dla tego zakresu adresów IP, a następnie zwraca w odpowiedzi DNS hello tego punktu końcowego centrum danych Azure.</span><span class="sxs-lookup"><span data-stu-id="2adcb-176">Traffic Manager chooses an available endpoint in hello Azure datacenter that has hello lowest latency for that IP address range, then returns that endpoint in hello DNS response.</span></span>

<span data-ttu-id="2adcb-177">Zgodnie z objaśnieniem w [sposób działania usługi Traffic Manager](traffic-manager-overview.md#how-traffic-manager-works), Menedżera ruchu nie odbiera zapytania DNS bezpośrednio od klientów.</span><span class="sxs-lookup"><span data-stu-id="2adcb-177">As explained in [How Traffic Manager Works](traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="2adcb-178">Zamiast zapytania DNS pochodzą z usługi DNS cykliczne hello klientom Witaj czy toouse skonfigurowany.</span><span class="sxs-lookup"><span data-stu-id="2adcb-178">Rather, DNS queries come from hello recursive DNS service that hello clients are configured toouse.</span></span> <span data-ttu-id="2adcb-179">W związku z tym hello endpoint "najbliższy" hello toodetermine użyty adres IP nie jest adres IP powitania klienta, ale jest adres IP hello hello cykliczne DNS usługi.</span><span class="sxs-lookup"><span data-stu-id="2adcb-179">Therefore, hello IP address used toodetermine hello 'closest' endpoint is not hello client's IP address, but it is hello IP address of hello recursive DNS service.</span></span> <span data-ttu-id="2adcb-180">W praktyce ten adres IP jest dobrym serwera proxy dla powitania klienta.</span><span class="sxs-lookup"><span data-stu-id="2adcb-180">In practice, this IP address is a good proxy for hello client.</span></span>


<span data-ttu-id="2adcb-181">Ruch Menedżer regularnie aktualizacje hello tooaccount Internet opóźnienia tabeli zmian w hello globalne internetowe i nowe regiony platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="2adcb-181">Traffic Manager regularly updates hello Internet Latency Table tooaccount for changes in hello global Internet and new Azure regions.</span></span> <span data-ttu-id="2adcb-182">Jednakże wydajność aplikacji w zależności od w czasie rzeczywistym wahania obciążenia między hello Internet.</span><span class="sxs-lookup"><span data-stu-id="2adcb-182">However, application performance varies based on real-time variations in load across hello Internet.</span></span> <span data-ttu-id="2adcb-183">Routing ruchu wydajności nie monitoruje obciążenie danego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="2adcb-183">Performance traffic-routing does not monitor load on a given service endpoint.</span></span> <span data-ttu-id="2adcb-184">Jednak jeśli punkt końcowy jest niedostępny, usługi Traffic Manager nie ma go w odpowiedzi na zapytania DNS.</span><span class="sxs-lookup"><span data-stu-id="2adcb-184">However, if an endpoint becomes unavailable, Traffic Manager does not include it in DNS query responses.</span></span>


<span data-ttu-id="2adcb-185">Toonote punktów:</span><span class="sxs-lookup"><span data-stu-id="2adcb-185">Points toonote:</span></span>

* <span data-ttu-id="2adcb-186">Jeśli Twój profil zawiera wiele punktów końcowych w hello tego samego regionu Azure, a następnie Traffic Manager dystrybuuje ruch równomiernie między hello dostępnych punktów końcowych w tym regionie.</span><span class="sxs-lookup"><span data-stu-id="2adcb-186">If your profile contains multiple endpoints in hello same Azure region, then Traffic Manager distributes traffic evenly across hello available endpoints in that region.</span></span> <span data-ttu-id="2adcb-187">Jeśli wolisz dystrybucji różnych ruchu w obrębie regionu, możesz użyć [zagnieżdżonych profilów usługi Traffic Manager](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="2adcb-187">If you prefer a different traffic distribution within a region, you can use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="2adcb-188">Włączenie wszystkich punktów końcowych w hello najbliższy region platformy Azure są obniżeniem, Traffic Manager przenosi punkty końcowe toohello ruchu hello dalej najbliższy region platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="2adcb-188">If all enabled endpoints in hello closest Azure region are degraded, Traffic Manager moves traffic toohello endpoints in hello next closest Azure region.</span></span> <span data-ttu-id="2adcb-189">Toodefine sekwencji preferowany tryb failover, należy użyć [zagnieżdżonych profilów usługi Traffic Manager](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="2adcb-189">If you want toodefine a preferred failover sequence, use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="2adcb-190">Jeśli używasz metody routingu ruchu wydajności hello z zewnętrznych punktów końcowych lub zagnieżdżone punktów końcowych, należy toospecify hello lokalizacji tych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="2adcb-190">When using hello Performance traffic routing method with external endpoints or nested endpoints, you need toospecify hello location of those endpoints.</span></span> <span data-ttu-id="2adcb-191">Wybierz najbliższą wdrożenia tooyour hello region platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="2adcb-191">Choose hello Azure region closest tooyour deployment.</span></span> <span data-ttu-id="2adcb-192">Te lokalizacje są wartości hello hello Internet opóźnienia tabeli.</span><span class="sxs-lookup"><span data-stu-id="2adcb-192">Those locations are hello values supported by hello Internet Latency Table.</span></span>
* <span data-ttu-id="2adcb-193">Algorytm Hello, który wybiera punkt końcowy hello jest deterministyczna.</span><span class="sxs-lookup"><span data-stu-id="2adcb-193">hello algorithm that chooses hello endpoint is deterministic.</span></span> <span data-ttu-id="2adcb-194">Powtarzany toohello skierowane do zapytania DNS z hello są tego samego klienta tego samego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="2adcb-194">Repeated DNS queries from hello same client are directed toohello same endpoint.</span></span> <span data-ttu-id="2adcb-195">Zazwyczaj klienci używają serwerów DNS innej cykliczne podczas podróży.</span><span class="sxs-lookup"><span data-stu-id="2adcb-195">Typically, clients use different recursive DNS servers when traveling.</span></span> <span data-ttu-id="2adcb-196">powitania klienta może być kierowany tooa innym punktem końcowym.</span><span class="sxs-lookup"><span data-stu-id="2adcb-196">hello client may be routed tooa different endpoint.</span></span> <span data-ttu-id="2adcb-197">Routing można również zostaną objęte toohello aktualizacji tabeli opóźnienia Internet.</span><span class="sxs-lookup"><span data-stu-id="2adcb-197">Routing can also be affected by updates toohello Internet Latency Table.</span></span> <span data-ttu-id="2adcb-198">W związku z tym hello wydajności metody routingu ruchu nie gwarantuje, że klient jest zawsze kierowane toohello tego samego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="2adcb-198">Therefore, hello Performance traffic-routing method does not guarantee that a client is always routed toohello same endpoint.</span></span>
* <span data-ttu-id="2adcb-199">Po zmianie hello Internet opóźnienia tabeli można zauważyć, że niektórzy klienci są ukierunkowanej tooa innym punktem końcowym.</span><span class="sxs-lookup"><span data-stu-id="2adcb-199">When hello Internet Latency Table changes, you may notice that some clients are directed tooa different endpoint.</span></span> <span data-ttu-id="2adcb-200">Ta zmiana routingu jest dokładniejsze na podstawie bieżących danych opóźnienia.</span><span class="sxs-lookup"><span data-stu-id="2adcb-200">This routing change is more accurate based on current latency data.</span></span> <span data-ttu-id="2adcb-201">Te aktualizacje są istotne toomaintain hello dokładność wydajności-routingu ruchu jako powitalne Internet stale rozwoju środowisko.</span><span class="sxs-lookup"><span data-stu-id="2adcb-201">These updates are essential toomaintain hello accuracy of Performance traffic-routing as hello Internet continually evolves.</span></span>

## <span data-ttu-id="2adcb-202"><a name = "geographic"></a>Geograficzne metody routingu ruchu</span><span class="sxs-lookup"><span data-stu-id="2adcb-202"><a name = "geographic"></a>Geographic traffic-routing method</span></span>

<span data-ttu-id="2adcb-203">Profile Menedżera ruchu może być skonfigurowany toouse powitalne Geographic metody routingu, dzięki czemu użytkownicy są przekierowywane toospecific endpoints (Azure, zewnętrzne lub zagnieżdżone), na podstawie której lokalizacji geograficznej ich zapytanie DNS pochodzi z.</span><span class="sxs-lookup"><span data-stu-id="2adcb-203">Traffic Manager profiles can be configured toouse hello Geographic routing method so that users are directed toospecific endpoints (Azure, External or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="2adcb-204">Umożliwia to Menedżera ruchu klientów tooenable zastosowaniach wiedząc regionu geograficznego użytkownika oraz routing ich oparta na ważne.</span><span class="sxs-lookup"><span data-stu-id="2adcb-204">This empowers Traffic Manager customers tooenable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="2adcb-205">Przykładami zgodnych z danych suwerenności zleceń, lokalizacja środowiska użytkownika & zawartości i pomiar ruchu z różnych regionów.</span><span class="sxs-lookup"><span data-stu-id="2adcb-205">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>
<span data-ttu-id="2adcb-206">Po skonfigurowaniu profilu geograficznego routingu każdego punktu końcowego skojarzone z wymagane przez profil toohave zestaw tooit regionów geograficznych przypisane.</span><span class="sxs-lookup"><span data-stu-id="2adcb-206">When a profile is configured for geographic routing, each endpoint associated with that profile needs toohave a set of geographic regions assigned tooit.</span></span> <span data-ttu-id="2adcb-207">W następujących poziomów szczegółowości może być regionu geograficznego</span><span class="sxs-lookup"><span data-stu-id="2adcb-207">A geographic region can be at following levels of granularity</span></span> 
- <span data-ttu-id="2adcb-208">World — dowolny region</span><span class="sxs-lookup"><span data-stu-id="2adcb-208">World– any region</span></span>
- <span data-ttu-id="2adcb-209">Regionalne grupowania — na przykład Afryka Bliski Wschód, Australia/pacyficzny itp.</span><span class="sxs-lookup"><span data-stu-id="2adcb-209">Regional Grouping – for example, Africa, Middle East, Australia/Pacific etc.</span></span> 
- <span data-ttu-id="2adcb-210">Kraj/Region — na przykład Irlandii Peru, Hongkong SAR itp.</span><span class="sxs-lookup"><span data-stu-id="2adcb-210">Country/Region – for example, Ireland, Peru, Hong Kong SAR etc.</span></span> 
- <span data-ttu-id="2adcb-211">Województwo — na przykład Kalifornijskiej USA, Australia-Queensland, Kanada Alberta itp. (Uwaga: ten poziom szczegółowości jest obsługiwana tylko w przypadku stanów / prowincje w Australii, Kanady UK i USA).</span><span class="sxs-lookup"><span data-stu-id="2adcb-211">State/Province – for example, USA-California, Australia-Queensland, Canada-Alberta etc. (note: this granularity level is supported only for states / provinces in Australia, Canada, UK, and USA).</span></span>

<span data-ttu-id="2adcb-212">Po przypisaniu punktu końcowego tooan region lub zestawie regionów, wszystkie żądania z tych regionów pobiera routingiem tylko punkt końcowy toothat.</span><span class="sxs-lookup"><span data-stu-id="2adcb-212">When a region or a set of regions is assigned tooan endpoint, any requests from those regions gets routed only toothat endpoint.</span></span> <span data-ttu-id="2adcb-213">Menedżer ruchu używa adresu IP źródłowego hello hello DNS zapytania toodetermine hello regionu, w którym pyta użytkownika z — zazwyczaj jest to adres IP hello hello lokalny program rozpoznawania nazw DNS wykonywania zapytania hello w imieniu użytkownika hello.</span><span class="sxs-lookup"><span data-stu-id="2adcb-213">Traffic Manager uses hello source IP address of hello DNS query toodetermine hello region from which a user is querying from – usually this is hello IP address of hello local DNS resolver doing hello query on behalf of hello user.</span></span>  

![Azure Traffic Manager "Geograficzne" routingu ruchu — metoda](./media/traffic-manager-routing-methods/geographic.png)

<span data-ttu-id="2adcb-215">Menedżera ruchu odczytuje źródłowy adres IP hello hello zapytania DNS i decyduje o tym, które regionu geograficznego jest z.</span><span class="sxs-lookup"><span data-stu-id="2adcb-215">Traffic Manager reads hello source IP address of hello DNS query and decides which geographic region it is originating from.</span></span> <span data-ttu-id="2adcb-216">Następnie wygląda toosee w przypadku punktu końcowego, który ma tooit tego regionu geograficznego zamapowane.</span><span class="sxs-lookup"><span data-stu-id="2adcb-216">It then looks toosee if there is an endpoint that has this geographic region mapped tooit.</span></span> <span data-ttu-id="2adcb-217">Tego odnośnika rozpoczyna się na najniższym poziomie szczegółowości hello (województwo gdzie jest obsługiwany, else na poziomie Kraj/Region hello) i przejdzie do końca hello się toohello najwyższego poziomu, który jest **World**.</span><span class="sxs-lookup"><span data-stu-id="2adcb-217">This lookup starts at hello lowest granularity level (State/Province where it is supported, else at hello Country/Region level) and goes all hello way up toohello highest level, which is **World**.</span></span> <span data-ttu-id="2adcb-218">Pierwsze dopasowanie Hello ustalił, że przy użyciu tego przechodzenie jest oznaczony jako hello tooreturn punkt końcowy w odpowiedzi na zapytanie hello.</span><span class="sxs-lookup"><span data-stu-id="2adcb-218">hello first match found using this traversal is designated as hello endpoint tooreturn in hello query response.</span></span> <span data-ttu-id="2adcb-219">Dopasowywanie za punkt końcowy typu zagnieżdżone w tym profilu podrzędnego punktu końcowego jest zwracany, oparty na jego metody routingu.</span><span class="sxs-lookup"><span data-stu-id="2adcb-219">When matching with a Nested type endpoint, an endpoint within that child profile is returned, based on its routing method.</span></span> <span data-ttu-id="2adcb-220">Hello następujące punkty są odpowiednie toothis zachowanie:</span><span class="sxs-lookup"><span data-stu-id="2adcb-220">hello following points are applicable toothis behavior:</span></span>

- <span data-ttu-id="2adcb-221">Region geograficzny mogą być mapowane tylko końcowego tooone w profilu Menedżera ruchu, gdy typ routingu hello jest geograficzne routingu.</span><span class="sxs-lookup"><span data-stu-id="2adcb-221">A geographic region can be mapped only tooone endpoint in a Traffic Manager profile when hello routing type is Geographic Routing.</span></span> <span data-ttu-id="2adcb-222">Dzięki temu routingu użytkowników jest deterministyczna, a mogą umożliwić scenariusze, które wymagają jednoznaczne granice geograficzne.</span><span class="sxs-lookup"><span data-stu-id="2adcb-222">This ensures that routing of users is deterministic, and customers can enable scenarios that require unambiguous geographic boundaries.</span></span>
- <span data-ttu-id="2adcb-223">Jeśli regionu użytkownika zawiera mapowania geograficznej w dwóch różnych punktów końcowych, Menedżer ruchu wybiera hello punktu końcowego z hello najniższy poziom szczegółowości i nie należy wziąć pod uwagę routingu żądań z tego regionu toohello innych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="2adcb-223">If a user’s region comes under two different endpoints’ geographic mapping, Traffic Manager selects hello endpoint with hello lowest granularity and does not consider routing requests from that region toohello other endpoint.</span></span> <span data-ttu-id="2adcb-224">Rozważmy na przykład typ profilu geograficznego routingu z dwoma punktami końcowymi - Punk końcowy 1 i Punk końcowy 2.</span><span class="sxs-lookup"><span data-stu-id="2adcb-224">For example, consider a Geographic Routing type profile with two endpoints - Endpoint1 and Endpoint2.</span></span> <span data-ttu-id="2adcb-225">Skonfigurowano Punk końcowy 1 skonfigurowano tooreceive ruch z Irlandii i Punk końcowy 2 tooreceive ruch z Europy.</span><span class="sxs-lookup"><span data-stu-id="2adcb-225">Endpoint1 is configured tooreceive traffic from Ireland and Endpoint2 is configured tooreceive traffic from Europe.</span></span> <span data-ttu-id="2adcb-226">Jeśli żądanie pochodzi z Irlandii, zawsze jest kierowany tooEndpoint1.</span><span class="sxs-lookup"><span data-stu-id="2adcb-226">If a request originates from Ireland, it is always routed tooEndpoint1.</span></span>
- <span data-ttu-id="2adcb-227">Ponieważ region mogą być mapowane tylko punkt końcowy tooone, Traffic Manager zwraca niezależnie od tego, czy punkt końcowy hello jest w dobrej kondycji lub nie.</span><span class="sxs-lookup"><span data-stu-id="2adcb-227">Since a region can be mapped only tooone endpoint, Traffic Manager returns it regardless of whether hello endpoint is healthy or not.</span></span>

    >[!IMPORTANT]
    ><span data-ttu-id="2adcb-228">Zdecydowanie zaleca się, że klientów przy użyciu metody routingu geograficzne hello skojarzyć go z punktów hello zagnieżdżone typu końcowych, które ma profile podrzędnych zawierające co najmniej dwa punkty końcowe w ramach każdej.</span><span class="sxs-lookup"><span data-stu-id="2adcb-228">It is strongly recommended that customers using hello geographic routing method associate it with hello Nested type endpoints that has child profiles containing at least two endpoints within each.</span></span>
- <span data-ttu-id="2adcb-229">Jeśli znaleziono punktu końcowego i tego punktu końcowego jest hello **zatrzymane** stanu odpowiedzi NODATA zwraca Menedżera ruchu.</span><span class="sxs-lookup"><span data-stu-id="2adcb-229">If an endpoint match is found and that endpoint is in hello **Stopped** state, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="2adcb-230">W takim przypadku nie dalsze wyszukiwań następuje wyższego rzędu w hierarchii regionu geograficznego hello.</span><span class="sxs-lookup"><span data-stu-id="2adcb-230">In this case, no further lookups is made higher up in hello geographic region hierarchy.</span></span> <span data-ttu-id="2adcb-231">To zachowanie mają też zastosowanie dla typów zagnieżdżonych punktu końcowego, gdy hello podrzędne profil jest hello **zatrzymane** lub **wyłączone** stanu.</span><span class="sxs-lookup"><span data-stu-id="2adcb-231">This behavior is also applicable for nested endpoint types when hello child profile is in hello **Stopped** or **Disabled** state.</span></span>
- <span data-ttu-id="2adcb-232">Jeśli punkt końcowy Wyświetla **wyłączone** stanu, nie będą uwzględniane w regionie hello zgodny proces.</span><span class="sxs-lookup"><span data-stu-id="2adcb-232">If an endpoint displays a **Disabled** status, it won’t be included in hello region matching process.</span></span> <span data-ttu-id="2adcb-233">To zachowanie mają też zastosowanie dla typów zagnieżdżonych punktu końcowego, gdy punkt końcowy hello hello **wyłączone** stanu.</span><span class="sxs-lookup"><span data-stu-id="2adcb-233">This behavior is also applicable for nested endpoint types when hello endpoint is in hello **Disabled** state.</span></span>
- <span data-ttu-id="2adcb-234">Jeśli zapytanie pochodzi od regionu geograficznego, który nie ma mapowania w tym profilu, Traffic Manager zwraca odpowiedź NODATA.</span><span class="sxs-lookup"><span data-stu-id="2adcb-234">If a query is coming from a geographic region that has no mapping in that profile, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="2adcb-235">W związku z tym zdecydowanie zaleca się klienci powinni korzystać geograficzne routingu o jeden punkt końcowy, najlepszym rozwiązaniem typu zagnieżdżone z co najmniej dwa punkty końcowe w ramach profilu podrzędnych hello z regionu hello **World** przypisane tooit.</span><span class="sxs-lookup"><span data-stu-id="2adcb-235">Therefore, it is strongly recommended that customers use geographic routing with one endpoint, ideally of type Nested with at least two endpoints within hello child profile, with hello region **World** assigned tooit.</span></span> <span data-ttu-id="2adcb-236">Dzięki temu, że wszystkie adresy IP, które mapują tooa region są obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="2adcb-236">This also ensures that any IP addresses that do not map tooa region are handled.</span></span>

<span data-ttu-id="2adcb-237">Zgodnie z objaśnieniem w [sposób działania usługi Traffic Manager](traffic-manager-how-traffic-manager-works.md), Menedżera ruchu nie odbiera zapytania DNS bezpośrednio od klientów.</span><span class="sxs-lookup"><span data-stu-id="2adcb-237">As explained in [How Traffic Manager Works](traffic-manager-how-traffic-manager-works.md), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="2adcb-238">Zamiast zapytania DNS pochodzą z usługi DNS cykliczne hello klientom Witaj czy toouse skonfigurowany.</span><span class="sxs-lookup"><span data-stu-id="2adcb-238">Rather, DNS queries come from hello recursive DNS service that hello clients are configured toouse.</span></span> <span data-ttu-id="2adcb-239">W związku z tym hello IP adres używany toodetermine hello region nie jest hello adres IP klienta, ale jest adres IP hello hello cykliczne DNS usługi.</span><span class="sxs-lookup"><span data-stu-id="2adcb-239">Therefore, hello IP address used toodetermine hello region is not hello client's IP address, but it is hello IP address of hello recursive DNS service.</span></span> <span data-ttu-id="2adcb-240">W praktyce ten adres IP jest dobrym serwera proxy dla powitania klienta.</span><span class="sxs-lookup"><span data-stu-id="2adcb-240">In practice, this IP address is a good proxy for hello client.</span></span>


## <a name="next-steps"></a><span data-ttu-id="2adcb-241">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="2adcb-241">Next steps</span></span>

<span data-ttu-id="2adcb-242">Dowiedz się, jak toodevelop wysokiej dostępności aplikacji przy użyciu [monitorowania punktu końcowego Menedżera ruchu](traffic-manager-monitoring.md)</span><span class="sxs-lookup"><span data-stu-id="2adcb-242">Learn how toodevelop high-availability applications using [Traffic Manager endpoint monitoring](traffic-manager-monitoring.md)</span></span>

<span data-ttu-id="2adcb-243">Dowiedz się, jak za[Tworzenie profilu Menedżera ruchu](traffic-manager-create-profile.md)</span><span class="sxs-lookup"><span data-stu-id="2adcb-243">Learn how too[create a Traffic Manager profile](traffic-manager-create-profile.md)</span></span>

<!--Image references-->
[1]: ./media/traffic-manager-routing-methods/priority.png
[2]: ./media/traffic-manager-routing-methods/weighted.png
[3]: ./media/traffic-manager-routing-methods/performance.png



