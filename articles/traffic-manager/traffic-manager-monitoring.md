---
title: "monitorowanie punktu końcowego Menedżera ruchu aaaAzure | Dokumentacja firmy Microsoft"
description: "W tym artykule może pomóc Ci zrozumieć, jak Traffic Manager używa monitorowania punktów końcowych i punktu końcowego automatycznej pracy awaryjnej toohelp Azure klienci wdrażać aplikacje wysokiej dostępności"
services: traffic-manager
documentationcenter: 
author: kumudd
manager: timlt
editor: 
ms.assetid: fff25ac3-d13a-4af9-8916-7c72e3d64bc7
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/22/2017
ms.author: kumud
ms.openlocfilehash: b4862499c88bdb1951833d06199b034a07ac7576
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="traffic-manager-endpoint-monitoring"></a><span data-ttu-id="323b8-103">Monitorowanie punktu końcowego Menedżera ruchu</span><span class="sxs-lookup"><span data-stu-id="323b8-103">Traffic Manager endpoint monitoring</span></span>

<span data-ttu-id="323b8-104">Usługi Azure Traffic Manager obejmuje monitorowanie wbudowanym punktem końcowym i punktu końcowego automatycznej pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="323b8-104">Azure Traffic Manager includes built-in endpoint monitoring and automatic endpoint failover.</span></span> <span data-ttu-id="323b8-105">Ta funkcja pomaga aplikacje wysokiej dostępności, które są odporne tooendpoint awarii, tym awarii region platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="323b8-105">This feature helps you deliver high-availability applications that are resilient tooendpoint failure, including Azure region failures.</span></span>

## <a name="configure-endpoint-monitoring"></a><span data-ttu-id="323b8-106">Konfigurowanie monitorowania punktów końcowych</span><span class="sxs-lookup"><span data-stu-id="323b8-106">Configure endpoint monitoring</span></span>

<span data-ttu-id="323b8-107">tooconfigure monitorowania punktów końcowych, należy określić następujące ustawienia w profilu usługi Traffic Manager hello:</span><span class="sxs-lookup"><span data-stu-id="323b8-107">tooconfigure endpoint monitoring, you must specify hello following settings on your Traffic Manager profile:</span></span>

* <span data-ttu-id="323b8-108">**Protokół**.</span><span class="sxs-lookup"><span data-stu-id="323b8-108">**Protocol**.</span></span> <span data-ttu-id="323b8-109">Wybierz HTTP, HTTPS lub TCP jako protokół hello Traffic Manager używa podczas badania toocheck Twojego punktu końcowego jej kondycji.</span><span class="sxs-lookup"><span data-stu-id="323b8-109">Choose HTTP, HTTPS, or TCP as hello protocol that Traffic Manager uses when probing your endpoint toocheck its health.</span></span> <span data-ttu-id="323b8-110">Monitorowania HTTPS nie Sprawdź, czy certyfikat SSL jest nieprawidłowy — tylko sprawdza hello tego certyfikatu jest obecny.</span><span class="sxs-lookup"><span data-stu-id="323b8-110">HTTPS monitoring does not verify whether your SSL certificate is valid--it only checks that hello certificate is present.</span></span>
* <span data-ttu-id="323b8-111">**Port**.</span><span class="sxs-lookup"><span data-stu-id="323b8-111">**Port**.</span></span> <span data-ttu-id="323b8-112">Wybierz hello port używany do żądania hello.</span><span class="sxs-lookup"><span data-stu-id="323b8-112">Choose hello port used for hello request.</span></span>
* <span data-ttu-id="323b8-113">**Ścieżka**.</span><span class="sxs-lookup"><span data-stu-id="323b8-113">**Path**.</span></span> <span data-ttu-id="323b8-114">To ustawienie konfiguracji jest prawidłowy tylko w przypadku protokołów HTTP i HTTPS hello, dla których wymagane jest określenie ustawienia ścieżki hello.</span><span class="sxs-lookup"><span data-stu-id="323b8-114">This configuration setting is valid only for hello HTTP and HTTPS protocols, for which specifying hello path setting is required.</span></span> <span data-ttu-id="323b8-115">Zapewnia to ustawienie dla hello TCP monitorowania protokołu powoduje błąd.</span><span class="sxs-lookup"><span data-stu-id="323b8-115">Providing this setting for hello TCP monitoring protocol results in an error.</span></span> <span data-ttu-id="323b8-116">Dla protokołu TCP należy podać hello względną ścieżkę i nazwę hello hello strony sieci Web lub pliku hello tego hello uzyskuje dostęp do monitorowania.</span><span class="sxs-lookup"><span data-stu-id="323b8-116">For TCP protocol, give hello relative path and hello name of hello webpage or hello file that hello monitoring accesses.</span></span> <span data-ttu-id="323b8-117">Ukośnika (/) jest prawidłowym wpisem hello ścieżki względnej.</span><span class="sxs-lookup"><span data-stu-id="323b8-117">A forward slash (/) is a valid entry for hello relative path.</span></span> <span data-ttu-id="323b8-118">Ta wartość oznacza, czy plik hello jest w katalogu głównym hello (ustawienie domyślne).</span><span class="sxs-lookup"><span data-stu-id="323b8-118">This value implies that hello file is in hello root directory (default).</span></span>
* <span data-ttu-id="323b8-119">**Interwał sondowania**.</span><span class="sxs-lookup"><span data-stu-id="323b8-119">**Probing Interval**.</span></span> <span data-ttu-id="323b8-120">Ta wartość określa, jak często punkt końcowy jest sprawdzany pod kątem kondycji od agenta sondowania Menedżera ruchu.</span><span class="sxs-lookup"><span data-stu-id="323b8-120">This value specifies how often an endpoint is checked for its health from a Traffic Manager probing agent.</span></span> <span data-ttu-id="323b8-121">Można określić w tym miejscu dwóch wartości: 30 sekund (zwykłego sondowania) i 10 sekund (fast sondowanie).</span><span class="sxs-lookup"><span data-stu-id="323b8-121">You can specify two values here: 30 seconds (normal probing) and 10 seconds (fast probing).</span></span> <span data-ttu-id="323b8-122">Jeśli wartości nie są dostarczane, profilu hello ustawia domyślną wartość tooa 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="323b8-122">If no values are provided, hello profile sets tooa default value of 30 seconds.</span></span> <span data-ttu-id="323b8-123">Odwiedź hello [cennik usługi Traffic Manager](https://azure.microsoft.com/pricing/details/traffic-manager) więcej o cenach sondowania szybkiego toolearn strony.</span><span class="sxs-lookup"><span data-stu-id="323b8-123">Visit hello [Traffic Manager Pricing](https://azure.microsoft.com/pricing/details/traffic-manager) page toolearn more about fast probing pricing.</span></span>
* <span data-ttu-id="323b8-124">**Liczba błędów dopuszczalne**.</span><span class="sxs-lookup"><span data-stu-id="323b8-124">**Tolerated Number of Failures**.</span></span> <span data-ttu-id="323b8-125">Ta wartość określa, ile błędów sondowania agentem menedżera ruchu zaakceptować przed oznaczeniem określonego punktu końcowego swój stan jako niezdrowy.</span><span class="sxs-lookup"><span data-stu-id="323b8-125">This value specifies how many failures a Traffic Manager probing agent tolerates before marking that endpoint as unhealthy.</span></span> <span data-ttu-id="323b8-126">Wartość może należeć do zakresu od 0 do 9.</span><span class="sxs-lookup"><span data-stu-id="323b8-126">Its value can range between 0 and 9.</span></span> <span data-ttu-id="323b8-127">Wartość 0 oznacza pojedynczego uszkodzenia monitorowania może spowodować toobe tego punktu końcowego, oznaczona jako w złej kondycji.</span><span class="sxs-lookup"><span data-stu-id="323b8-127">A value of 0 means a single monitoring failure can cause that endpoint toobe marked as unhealthy.</span></span> <span data-ttu-id="323b8-128">Jeśli nie określono wartości, używa hello domyślna wartość 3.</span><span class="sxs-lookup"><span data-stu-id="323b8-128">If no value is specified, it uses hello default value of 3.</span></span>
* <span data-ttu-id="323b8-129">**Limit czasu monitorowania**.</span><span class="sxs-lookup"><span data-stu-id="323b8-129">**Monitoring Timeout**.</span></span> <span data-ttu-id="323b8-130">Ta właściwość określa hello ilość czasu hello agenta sondowania powinien zaczekać na uwzględnieniu Menedżera ruchu, który Sprawdź awarii po wysłaniu końcowego toohello sonda sprawdzania kondycji.</span><span class="sxs-lookup"><span data-stu-id="323b8-130">This property specifies hello amount of time hello Traffic Manager probing agent should wait before considering that check a failure when a health check probe is sent toohello endpoint.</span></span> <span data-ttu-id="323b8-131">Jeśli powitalne interwał sondowania jest ustawiony too30 sekund, możesz można ustawić wartość limitu czasu powitania od 5 do 10 sekund.</span><span class="sxs-lookup"><span data-stu-id="323b8-131">If hello Probing Interval is set too30 seconds, then you can set hello Timeout value between 5 and 10 seconds.</span></span> <span data-ttu-id="323b8-132">Jeśli nie określono wartości, używa wartość domyślną równą 10 sekund.</span><span class="sxs-lookup"><span data-stu-id="323b8-132">If no value is specified, it uses a default value of 10 seconds.</span></span> <span data-ttu-id="323b8-133">Jeśli powitalne interwał sondowania jest ustawiony too10 sekund, możesz można ustawić wartość limitu czasu powitania od 5 do 9 sekund.</span><span class="sxs-lookup"><span data-stu-id="323b8-133">If hello Probing Interval is set too10 seconds, then you can set hello Timeout value between 5 and 9 seconds.</span></span> <span data-ttu-id="323b8-134">Jeśli wartość limitu czasu nie zostanie określona, używa wartość domyślną 9 sekund.</span><span class="sxs-lookup"><span data-stu-id="323b8-134">If no Timeout value is specified, it uses a default value of 9 seconds.</span></span>

![Monitorowanie punktu końcowego Menedżera ruchu](./media/traffic-manager-monitoring/endpoint-monitoring-settings.png)

<span data-ttu-id="323b8-136">**Rysunek 1: Monitorowanie punktu końcowego Menedżera ruchu**</span><span class="sxs-lookup"><span data-stu-id="323b8-136">**Figure 1:  Traffic Manager endpoint monitoring**</span></span>

## <a name="how-endpoint-monitoring-works"></a><span data-ttu-id="323b8-137">Jak działa monitorowania punktów końcowych</span><span class="sxs-lookup"><span data-stu-id="323b8-137">How endpoint monitoring works</span></span>

<span data-ttu-id="323b8-138">Przypadku hello monitorowania protokołu HTTP lub HTTPS, sondowania agenta menedżera ruchu hello sprawia, że punkt końcowy toohello na żądanie GET przy użyciu hello protokół, port i ścieżka względna podane.</span><span class="sxs-lookup"><span data-stu-id="323b8-138">If hello monitoring protocol is set as HTTP or HTTPS, hello Traffic Manager probing agent makes a GET request toohello endpoint using hello protocol, port, and relative path given.</span></span> <span data-ttu-id="323b8-139">Jeśli ponownie pobiera odpowiedź 200 OK, a następnie tego punktu końcowego jest uznawany za dobrej kondycji.</span><span class="sxs-lookup"><span data-stu-id="323b8-139">If it gets back a 200-OK response, then that endpoint is considered healthy.</span></span> <span data-ttu-id="323b8-140">Jeśli odpowiedź hello jest inną wartość, lub jeśli brak odpowiedzi nie są odbierane hello limit czasu określony, hello sondowanie agenta menedżera ruchu ponownie podejmuje zgodnie z toohello ustawienie dopuszczalne liczbę błędów (ponowne próby są wykonywane informacji, jeśli to ustawienie ma wartość 0) .</span><span class="sxs-lookup"><span data-stu-id="323b8-140">If hello response is a different value, or, if no response is received within hello timeout period specified, then hello Traffic Manager probing agent re-attempts according toohello Tolerated Number of Failures setting (no re-attempts are done if this setting is 0).</span></span> <span data-ttu-id="323b8-141">Jeśli hello liczbę kolejnych niepowodzeń jest wyższa niż ustawienie dopuszczalne liczbę błędów hello, tego punktu końcowego jest oznaczona jako w złej kondycji.</span><span class="sxs-lookup"><span data-stu-id="323b8-141">If hello number of consecutive failures is higher than hello Tolerated Number of Failures setting, then that endpoint is marked as unhealthy.</span></span> 

<span data-ttu-id="323b8-142">Jeśli hello monitorowania protokołu TCP, hello Traffic Manager sondowania agent inicjuje żądanie połączenia TCP za pomocą portu hello określony.</span><span class="sxs-lookup"><span data-stu-id="323b8-142">If hello monitoring protocol is TCP, hello Traffic Manager probing agent initiates a TCP connection request using hello port specified.</span></span> <span data-ttu-id="323b8-143">Jeśli punkt końcowy hello odpowiada toohello żądanie połączenia odpowiedzi hello tooestablish, że sprawdzenie kondycji jest oznaczony jako sukcesu i sondowania agenta menedżera ruchu hello resetuje połączenie TCP hello.</span><span class="sxs-lookup"><span data-stu-id="323b8-143">If hello endpoint responds toohello request with a response tooestablish hello connection, that health check is marked as a success and hello Traffic Manager probing agent resets hello TCP connection.</span></span> <span data-ttu-id="323b8-144">Jeśli odpowiedź hello jest inną wartość, lub brak odpowiedzi nie są odbierane hello limit czasu określony, hello sondowanie agenta menedżera ruchu próbuje ponownie, zgodnie z toohello ustawienie dopuszczalne liczbę błędów (ponowne próby będą Jeśli to ustawienie ma wartość 0).</span><span class="sxs-lookup"><span data-stu-id="323b8-144">If hello response is a different value, or if no response is received within hello timeout period specified, hello Traffic Manager probing agent re-attempts according toohello Tolerated Number of Failures setting (no re-attempts are made if this setting is 0).</span></span> <span data-ttu-id="323b8-145">Jeśli hello liczbę kolejnych niepowodzeń jest wyższa niż ustawienie dopuszczalne liczbę błędów hello, ten punkt końcowy jest oznaczona złej kondycji.</span><span class="sxs-lookup"><span data-stu-id="323b8-145">If hello number of consecutive failures is higher than hello Tolerated Number of Failures setting, then that endpoint is marked unhealthy.</span></span>

<span data-ttu-id="323b8-146">We wszystkich przypadkach sondy Menedżera ruchu z wielu lokalizacji i oznaczanie niepowodzenie kolejnych hello się stanie w każdym regionie.</span><span class="sxs-lookup"><span data-stu-id="323b8-146">In all cases, Traffic Manager probes from multiple locations and hello consecutive failure determination happens within each region.</span></span> <span data-ttu-id="323b8-147">Oznacza to również, czy punkty końcowe otrzymują sondy kondycji z Menedżera ruchu z częstotliwością wyższe niż ustawienie hello używane dla interwału sondowania.</span><span class="sxs-lookup"><span data-stu-id="323b8-147">This also means that endpoints are receiving health probes from Traffic Manager with a higher frequency than hello setting used for Probing Interval.</span></span>

>[!NOTE]
><span data-ttu-id="323b8-148">Dla protokołu HTTP lub HTTPS Protokół monitorowania po stronie punktu końcowego hello popularną praktyką jest tooimplement niestandardowej strony w aplikacji — na przykład /health.aspx.</span><span class="sxs-lookup"><span data-stu-id="323b8-148">For HTTP or HTTPS monitoring protocol, a common practice on hello endpoint side is tooimplement a custom page within your application - for example, /health.aspx.</span></span> <span data-ttu-id="323b8-149">Przy użyciu tej ścieżki do monitorowania, można wykonać testy specyficzne dla aplikacji, takich jak sprawdzanie liczników wydajności lub Sprawdzanie dostępności bazy danych.</span><span class="sxs-lookup"><span data-stu-id="323b8-149">Using this path for monitoring, you can perform application-specific checks, such as checking performance counters or verifying database availability.</span></span> <span data-ttu-id="323b8-150">W oparciu o te niestandardowe kontroli, strona hello zwraca odpowiedni kod stanu HTTP.</span><span class="sxs-lookup"><span data-stu-id="323b8-150">Based on these custom checks, hello page returns an appropriate HTTP status code.</span></span>

<span data-ttu-id="323b8-151">Wszystkie punkty końcowe w profilu usługi Traffic Manager udostępnić ustawienia monitorowania.</span><span class="sxs-lookup"><span data-stu-id="323b8-151">All endpoints in a Traffic Manager profile share monitoring settings.</span></span> <span data-ttu-id="323b8-152">Jeśli potrzebujesz toouse różne ustawienia monitorowania dla różnych punktów końcowych, możesz utworzyć [zagnieżdżonych profilów usługi Traffic Manager](traffic-manager-nested-profiles.md#example-5-per-endpoint-monitoring-settings).</span><span class="sxs-lookup"><span data-stu-id="323b8-152">If you need toouse different monitoring settings for different endpoints, you can create [nested Traffic Manager profiles](traffic-manager-nested-profiles.md#example-5-per-endpoint-monitoring-settings).</span></span>

## <a name="endpoint-and-profile-status"></a><span data-ttu-id="323b8-153">Stan punktu końcowego i profilu</span><span class="sxs-lookup"><span data-stu-id="323b8-153">Endpoint and profile status</span></span>

<span data-ttu-id="323b8-154">Można włączyć i wyłączyć profilów usługi Traffic Manager i punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="323b8-154">You can enable and disable Traffic Manager profiles and endpoints.</span></span> <span data-ttu-id="323b8-155">Jednak zmiany w stan punktu końcowego również mogą wystąpić jako wynik Traffic Manager automatycznego ustawienia i procesów.</span><span class="sxs-lookup"><span data-stu-id="323b8-155">However, a change in endpoint status also might occur as a result of Traffic Manager automated settings and processes.</span></span>

### <a name="endpoint-status"></a><span data-ttu-id="323b8-156">Stan punktu końcowego</span><span class="sxs-lookup"><span data-stu-id="323b8-156">Endpoint status</span></span>

<span data-ttu-id="323b8-157">Można włączyć lub wyłączyć określonego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="323b8-157">You can enable or disable a specific endpoint.</span></span> <span data-ttu-id="323b8-158">nie wpływa na podległej usłudze Hello, którym może nadal być dobrej kondycji.</span><span class="sxs-lookup"><span data-stu-id="323b8-158">hello underlying service, which might still be healthy, is unaffected.</span></span> <span data-ttu-id="323b8-159">Zmiana formanty stanu punktu końcowego hello hello dostępność punktu końcowego hello w hello profilu usługi Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="323b8-159">Changing hello endpoint status controls hello availability of hello endpoint in hello Traffic Manager profile.</span></span> <span data-ttu-id="323b8-160">Po wyłączeniu stan punktu końcowego Menedżera ruchu nie sprawdza jego kondycji, a punkt końcowy hello jest niedostępna w odpowiedzi DNS.</span><span class="sxs-lookup"><span data-stu-id="323b8-160">When an endpoint status is disabled, Traffic Manager does not check its health and hello endpoint is not included in a DNS response.</span></span>

### <a name="profile-status"></a><span data-ttu-id="323b8-161">Stan profilu</span><span class="sxs-lookup"><span data-stu-id="323b8-161">Profile status</span></span>

<span data-ttu-id="323b8-162">Przy użyciu ustawienia stanu profilu hello, można włączyć lub wyłączyć określonego profilu.</span><span class="sxs-lookup"><span data-stu-id="323b8-162">Using hello profile status setting, you can enable or disable a specific profile.</span></span> <span data-ttu-id="323b8-163">Gdy stan punktu końcowego ma wpływ na jeden punkt końcowy, stan profilu wpływa na całą profil hello, w tym wszystkie punkty końcowe.</span><span class="sxs-lookup"><span data-stu-id="323b8-163">While endpoint status affects a single endpoint, profile status affects hello entire profile, including all endpoints.</span></span> <span data-ttu-id="323b8-164">Po wyłączeniu profilu hello punkty końcowe nie są sprawdzane pod kątem kondycji i punkty końcowe nie są uwzględnione w odpowiedzi DNS.</span><span class="sxs-lookup"><span data-stu-id="323b8-164">When you disable a profile, hello endpoints are not checked for health and no endpoints are included in a DNS response.</span></span> <span data-ttu-id="323b8-165">[NXDOMAIN](https://tools.ietf.org/html/rfc2308) kod odpowiedzi jest zwracany hello zapytania DNS.</span><span class="sxs-lookup"><span data-stu-id="323b8-165">An [NXDOMAIN](https://tools.ietf.org/html/rfc2308) response code is returned for hello DNS query.</span></span>

### <a name="endpoint-monitor-status"></a><span data-ttu-id="323b8-166">Stan monitora punktu końcowego</span><span class="sxs-lookup"><span data-stu-id="323b8-166">Endpoint monitor status</span></span>

<span data-ttu-id="323b8-167">Punkt końcowy monitoruje stan jest wyświetlany stan hello hello punktu końcowego wartość generowanych przez Menedżera ruchu.</span><span class="sxs-lookup"><span data-stu-id="323b8-167">Endpoint monitor status is a Traffic Manager-generated value that shows hello status of hello endpoint.</span></span> <span data-ttu-id="323b8-168">Nie można zmienić tego ustawienia ręcznie.</span><span class="sxs-lookup"><span data-stu-id="323b8-168">You cannot change this setting manually.</span></span> <span data-ttu-id="323b8-169">Stan monitora punktu końcowego Hello jest kombinacją hello wyniki monitorowania punktów końcowych i hello stan punktu końcowego skonfigurowanego.</span><span class="sxs-lookup"><span data-stu-id="323b8-169">hello endpoint monitor status is a combination of hello results of endpoint monitoring and hello configured endpoint status.</span></span> <span data-ttu-id="323b8-170">w hello w poniższej tabeli przedstawiono możliwe wartości punktu końcowego monitoruje stan Hello:</span><span class="sxs-lookup"><span data-stu-id="323b8-170">hello possible values of endpoint monitor status are shown in hello following table:</span></span>

| <span data-ttu-id="323b8-171">Stan profilu</span><span class="sxs-lookup"><span data-stu-id="323b8-171">Profile status</span></span> | <span data-ttu-id="323b8-172">Stan punktu końcowego</span><span class="sxs-lookup"><span data-stu-id="323b8-172">Endpoint status</span></span> | <span data-ttu-id="323b8-173">Stan monitora punktu końcowego</span><span class="sxs-lookup"><span data-stu-id="323b8-173">Endpoint monitor status</span></span> | <span data-ttu-id="323b8-174">Uwagi</span><span class="sxs-lookup"><span data-stu-id="323b8-174">Notes</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="323b8-175">Disabled (Wyłączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-175">Disabled</span></span> |<span data-ttu-id="323b8-176">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-176">Enabled</span></span> |<span data-ttu-id="323b8-177">Nieaktywne</span><span class="sxs-lookup"><span data-stu-id="323b8-177">Inactive</span></span> |<span data-ttu-id="323b8-178">Profil Hello została wyłączona.</span><span class="sxs-lookup"><span data-stu-id="323b8-178">hello profile has been disabled.</span></span> <span data-ttu-id="323b8-179">Chociaż stan punktu końcowego hello jest włączona, pierwszeństwo ma stan profilu hello (wyłączone).</span><span class="sxs-lookup"><span data-stu-id="323b8-179">Although hello endpoint status is Enabled, hello profile status (Disabled) takes precedence.</span></span> <span data-ttu-id="323b8-180">Punkty końcowe w profilach wyłączone nie są monitorowane.</span><span class="sxs-lookup"><span data-stu-id="323b8-180">Endpoints in disabled profiles are not monitored.</span></span> <span data-ttu-id="323b8-181">NXDOMAIN kod odpowiedzi jest zwracany hello zapytania DNS.</span><span class="sxs-lookup"><span data-stu-id="323b8-181">An NXDOMAIN response code is returned for hello DNS query.</span></span> |
| <span data-ttu-id="323b8-182">&lt;wszystkie&gt;</span><span class="sxs-lookup"><span data-stu-id="323b8-182">&lt;any&gt;</span></span> |<span data-ttu-id="323b8-183">Disabled (Wyłączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-183">Disabled</span></span> |<span data-ttu-id="323b8-184">Disabled (Wyłączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-184">Disabled</span></span> |<span data-ttu-id="323b8-185">punkt końcowy Hello została wyłączona.</span><span class="sxs-lookup"><span data-stu-id="323b8-185">hello endpoint has been disabled.</span></span> <span data-ttu-id="323b8-186">Wyłączone punkty końcowe nie są monitorowane.</span><span class="sxs-lookup"><span data-stu-id="323b8-186">Disabled endpoints are not monitored.</span></span> <span data-ttu-id="323b8-187">Witaj punktu końcowego nie jest uwzględniony w odpowiedzi DNS, w związku z tym nie odbieranie ruchu.</span><span class="sxs-lookup"><span data-stu-id="323b8-187">hello endpoint is not included in DNS responses, therefore, it does not receive traffic.</span></span> |
| <span data-ttu-id="323b8-188">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-188">Enabled</span></span> |<span data-ttu-id="323b8-189">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-189">Enabled</span></span> |<span data-ttu-id="323b8-190">Online</span><span class="sxs-lookup"><span data-stu-id="323b8-190">Online</span></span> |<span data-ttu-id="323b8-191">punkt końcowy Hello jest monitorowane i jest w dobrej kondycji.</span><span class="sxs-lookup"><span data-stu-id="323b8-191">hello endpoint is monitored and is healthy.</span></span> <span data-ttu-id="323b8-192">Jest dołączony do odpowiedzi DNS, a mogą odbierać dane.</span><span class="sxs-lookup"><span data-stu-id="323b8-192">It is included in DNS responses and can receive traffic.</span></span> |
| <span data-ttu-id="323b8-193">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-193">Enabled</span></span> |<span data-ttu-id="323b8-194">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-194">Enabled</span></span> |<span data-ttu-id="323b8-195">Ograniczone</span><span class="sxs-lookup"><span data-stu-id="323b8-195">Degraded</span></span> |<span data-ttu-id="323b8-196">Monitorowania kontroli kondycji punktu końcowego kończą się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="323b8-196">Endpoint monitoring health checks are failing.</span></span> <span data-ttu-id="323b8-197">punkt końcowy Hello nie jest uwzględniony w odpowiedzi DNS i nie odbiera ruch.</span><span class="sxs-lookup"><span data-stu-id="323b8-197">hello endpoint is not included in DNS responses and does not receive traffic.</span></span> <br><span data-ttu-id="323b8-198">Toothis wyjątku jest Jeśli wszystkie punkty końcowe są ograniczone, w którym to przypadku wszystkich z nich są traktowane jako toobe zwracany w odpowiedzi na kwerendę hello).</span><span class="sxs-lookup"><span data-stu-id="323b8-198">An exception toothis is if all endpoints are degraded, in which case all of them are considered toobe returned in hello query response).</span></span></br>|
| <span data-ttu-id="323b8-199">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-199">Enabled</span></span> |<span data-ttu-id="323b8-200">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-200">Enabled</span></span> |<span data-ttu-id="323b8-201">CheckingEndpoint</span><span class="sxs-lookup"><span data-stu-id="323b8-201">CheckingEndpoint</span></span> |<span data-ttu-id="323b8-202">punkt końcowy Hello jest monitorowana, ale wyniki hello hello pierwsze badanie nie zostały jeszcze odebrane.</span><span class="sxs-lookup"><span data-stu-id="323b8-202">hello endpoint is monitored, but hello results of hello first probe have not been received yet.</span></span> <span data-ttu-id="323b8-203">CheckingEndpoint to stan tymczasowy, który zazwyczaj występuje natychmiast po dodaniu lub włączanie punktu końcowego w profilu hello.</span><span class="sxs-lookup"><span data-stu-id="323b8-203">CheckingEndpoint is a temporary state that usually occurs immediately after adding or enabling an endpoint in hello profile.</span></span> <span data-ttu-id="323b8-204">Punkt końcowy w tym stanie jest dołączony do odpowiedzi DNS i mogą odbierać dane.</span><span class="sxs-lookup"><span data-stu-id="323b8-204">An endpoint in this state is included in DNS responses and can receive traffic.</span></span> |
| <span data-ttu-id="323b8-205">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-205">Enabled</span></span> |<span data-ttu-id="323b8-206">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-206">Enabled</span></span> |<span data-ttu-id="323b8-207">Zatrzymane</span><span class="sxs-lookup"><span data-stu-id="323b8-207">Stopped</span></span> |<span data-ttu-id="323b8-208">Witaj chmury usługi lub aplikacji sieci web który hello toois punktów punktu końcowego nie działa.</span><span class="sxs-lookup"><span data-stu-id="323b8-208">hello cloud service or web app that hello endpoint points toois not running.</span></span> <span data-ttu-id="323b8-209">Sprawdź hello chmury usługi lub aplikacji internetowej ustawień aplikacji.</span><span class="sxs-lookup"><span data-stu-id="323b8-209">Check hello cloud service or web app settings.</span></span> <span data-ttu-id="323b8-210">Może to również nastąpić, jeśli hello punktu końcowego jest typ zagnieżdżony punktu końcowego i profilu podrzędnych hello jest wyłączony lub jest nieaktywna.</span><span class="sxs-lookup"><span data-stu-id="323b8-210">This can also happen if hello endpoint is of type nested endpoint and hello child profile is disabled or is inactive.</span></span> <br><span data-ttu-id="323b8-211">Punkt końcowy ze stanem zatrzymania nie jest monitorowany.</span><span class="sxs-lookup"><span data-stu-id="323b8-211">An endpoint with a Stopped status is not monitored.</span></span> <span data-ttu-id="323b8-212">Nie jest uwzględniony w odpowiedzi DNS, a nie odbiera ruch.</span><span class="sxs-lookup"><span data-stu-id="323b8-212">It is not included in DNS responses and does not receive traffic.</span></span> <span data-ttu-id="323b8-213">Toothis wyjątku jest, jeśli wszystkie punkty końcowe są ograniczone, w którym to przypadku wszystkie z nich będą uznawane za toobe zwracany w odpowiedzi na kwerendę hello.</span><span class="sxs-lookup"><span data-stu-id="323b8-213">An exception toothis is if all endpoints are degraded, in which case all of them will be considered toobe returned in hello query response.</span></span></br>|

<span data-ttu-id="323b8-214">Szczegółowe informacje na temat obliczania stan monitora punktu końcowego dla zagnieżdżonej punktów końcowych, zobacz [zagnieżdżonych profilów usługi Traffic Manager](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="323b8-214">For details about how endpoint monitor status is calculated for nested endpoints, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

### <a name="profile-monitor-status"></a><span data-ttu-id="323b8-215">Stan monitora profilu</span><span class="sxs-lookup"><span data-stu-id="323b8-215">Profile monitor status</span></span>

<span data-ttu-id="323b8-216">Stan monitora profilu Hello jest kombinacją stan profilu hello skonfigurowane i wartości stanu monitora hello punktu końcowego dla wszystkich punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="323b8-216">hello profile monitor status is a combination of hello configured profile status and hello endpoint monitor status values for all endpoints.</span></span> <span data-ttu-id="323b8-217">w hello w poniższej tabeli opisano Hello możliwe wartości:</span><span class="sxs-lookup"><span data-stu-id="323b8-217">hello possible values are described in hello following table:</span></span>

| <span data-ttu-id="323b8-218">Stan profilu (zgodnie z konfiguracją)</span><span class="sxs-lookup"><span data-stu-id="323b8-218">Profile status (as configured)</span></span> | <span data-ttu-id="323b8-219">Stan monitora punktu końcowego</span><span class="sxs-lookup"><span data-stu-id="323b8-219">Endpoint monitor status</span></span> | <span data-ttu-id="323b8-220">Stan monitora profilu</span><span class="sxs-lookup"><span data-stu-id="323b8-220">Profile monitor status</span></span> | <span data-ttu-id="323b8-221">Uwagi</span><span class="sxs-lookup"><span data-stu-id="323b8-221">Notes</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="323b8-222">Disabled (Wyłączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-222">Disabled</span></span> |<span data-ttu-id="323b8-223">&lt;wszelkie&gt; lub profil z określonych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="323b8-223">&lt;any&gt; or a profile with no defined endpoints.</span></span> |<span data-ttu-id="323b8-224">Disabled (Wyłączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-224">Disabled</span></span> |<span data-ttu-id="323b8-225">Profil Hello została wyłączona.</span><span class="sxs-lookup"><span data-stu-id="323b8-225">hello profile has been disabled.</span></span> |
| <span data-ttu-id="323b8-226">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-226">Enabled</span></span> |<span data-ttu-id="323b8-227">Stan Hello co najmniej jeden punkt końcowy jest znacznie mniej wydajna.</span><span class="sxs-lookup"><span data-stu-id="323b8-227">hello status of at least one endpoint is Degraded.</span></span> |<span data-ttu-id="323b8-228">Ograniczone</span><span class="sxs-lookup"><span data-stu-id="323b8-228">Degraded</span></span> |<span data-ttu-id="323b8-229">Przejrzyj hello poszczególnych punktu końcowego stan wartości toodetermine które punkty końcowe wymagać dalszych działań.</span><span class="sxs-lookup"><span data-stu-id="323b8-229">Review hello individual endpoint status values toodetermine which endpoints require further attention.</span></span> |
| <span data-ttu-id="323b8-230">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-230">Enabled</span></span> |<span data-ttu-id="323b8-231">Stan Hello co najmniej jeden punkt końcowy jest w trybie Online.</span><span class="sxs-lookup"><span data-stu-id="323b8-231">hello status of at least one endpoint is Online.</span></span> <span data-ttu-id="323b8-232">Punkty końcowe nie będą miały stan obniżony.</span><span class="sxs-lookup"><span data-stu-id="323b8-232">No endpoints have a Degraded status.</span></span> |<span data-ttu-id="323b8-233">Online</span><span class="sxs-lookup"><span data-stu-id="323b8-233">Online</span></span> |<span data-ttu-id="323b8-234">Usługa Hello akceptuje ruch.</span><span class="sxs-lookup"><span data-stu-id="323b8-234">hello service is accepting traffic.</span></span> <span data-ttu-id="323b8-235">Są wymagane żadne dalsze akcje.</span><span class="sxs-lookup"><span data-stu-id="323b8-235">No further action is required.</span></span> |
| <span data-ttu-id="323b8-236">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-236">Enabled</span></span> |<span data-ttu-id="323b8-237">Stan Hello co najmniej jeden punkt końcowy jest CheckingEndpoint.</span><span class="sxs-lookup"><span data-stu-id="323b8-237">hello status of at least one endpoint is CheckingEndpoint.</span></span> <span data-ttu-id="323b8-238">Punkty końcowe nie są w stanie Online lub obniżony.</span><span class="sxs-lookup"><span data-stu-id="323b8-238">No endpoints are in Online or Degraded status.</span></span> |<span data-ttu-id="323b8-239">CheckingEndpoints</span><span class="sxs-lookup"><span data-stu-id="323b8-239">CheckingEndpoints</span></span> |<span data-ttu-id="323b8-240">Ten stan przejścia występuje, gdy profilu, jeśli utworzone lub włączone.</span><span class="sxs-lookup"><span data-stu-id="323b8-240">This transition state occurs when a profile if created or enabled.</span></span> <span data-ttu-id="323b8-241">Kondycja punktu końcowego Hello sprawdzany powitania po raz pierwszy.</span><span class="sxs-lookup"><span data-stu-id="323b8-241">hello endpoint health is being checked for hello first time.</span></span> |
| <span data-ttu-id="323b8-242">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="323b8-242">Enabled</span></span> |<span data-ttu-id="323b8-243">Stany Hello wszystkich punktów końcowych w profilu hello są wyłączone lub zatrzymana lub hello profilu nie ma zdefiniowanych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="323b8-243">hello statuses of all endpoints in hello profile are either Disabled or Stopped, or hello profile has no defined endpoints.</span></span> |<span data-ttu-id="323b8-244">Nieaktywne</span><span class="sxs-lookup"><span data-stu-id="323b8-244">Inactive</span></span> |<span data-ttu-id="323b8-245">Punkty końcowe nie są aktywne, ale profil hello jest nadal włączony.</span><span class="sxs-lookup"><span data-stu-id="323b8-245">No endpoints are active, but hello profile is still Enabled.</span></span> |

## <a name="endpoint-failover-and-recovery"></a><span data-ttu-id="323b8-246">Punkt końcowy trybu failover i odzyskiwania</span><span class="sxs-lookup"><span data-stu-id="323b8-246">Endpoint failover and recovery</span></span>

<span data-ttu-id="323b8-247">Menedżer ruchu okresowo sprawdza dostępność hello kondycję każdego punktu końcowego, w tym zła punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="323b8-247">Traffic Manager periodically checks hello health of every endpoint, including unhealthy endpoints.</span></span> <span data-ttu-id="323b8-248">Menedżer ruchu wykrywa punkt końcowy staje się dobrej kondycji, a jego powrót do obrotu.</span><span class="sxs-lookup"><span data-stu-id="323b8-248">Traffic Manager detects when an endpoint becomes healthy and brings it back into rotation.</span></span>

<span data-ttu-id="323b8-249">Punkt końcowy jest zła, gdy wystąpienia któregokolwiek z hello następujące zdarzenia:</span><span class="sxs-lookup"><span data-stu-id="323b8-249">An endpoint is unhealthy when any of hello following events occur:</span></span>
- <span data-ttu-id="323b8-250">W przypadku hello monitorowania protokołu HTTP lub HTTPS:</span><span class="sxs-lookup"><span data-stu-id="323b8-250">If hello monitoring protocol is HTTP or HTTPS:</span></span>
    - <span data-ttu-id="323b8-251">Odebrano odpowiedź z systemem innym niż 200 (w tym kod różnych 2xx lub przekierowanie 301/302).</span><span class="sxs-lookup"><span data-stu-id="323b8-251">A non-200 response is received (including a different 2xx code, or a 301/302 redirect).</span></span>
- <span data-ttu-id="323b8-252">Jeśli hello monitorowania protokołu TCP:</span><span class="sxs-lookup"><span data-stu-id="323b8-252">If hello monitoring protocol is TCP:</span></span> 
    - <span data-ttu-id="323b8-253">Odpowiedź innych niż potwierdzenia lub SYN potwierdzenia odebranego żądanie SYNCHRONIZACJI toohello odpowiedzi wysyłane przez Menedżera ruchu tooattempt ustanawianie połączenia.</span><span class="sxs-lookup"><span data-stu-id="323b8-253">A response other than ACK or SYN-ACK is received in response toohello SYNC request sent by Traffic Manager tooattempt a connection establishment.</span></span>
- <span data-ttu-id="323b8-254">Limit czasu.</span><span class="sxs-lookup"><span data-stu-id="323b8-254">Timeout.</span></span> 
- <span data-ttu-id="323b8-255">Wszelkie inne połączenia problemy powodujące hello punktu końcowego nie są dostępne.</span><span class="sxs-lookup"><span data-stu-id="323b8-255">Any other connection issue resulting in hello endpoint being not reachable.</span></span>

<span data-ttu-id="323b8-256">Aby uzyskać więcej informacji dotyczących rozwiązywania problemów nie powiodło się sprawdzenie, zobacz [stan rozwiązywania problemów ze spadkiem w usłudze Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span><span class="sxs-lookup"><span data-stu-id="323b8-256">For more information about troubleshooting failed checks, see [Troubleshooting Degraded status on Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span></span> 

<span data-ttu-id="323b8-257">Hello następujący plan na rysunku 2 jest szczegółowy opis hello monitorowania procesu punktu końcowego Menedżera ruchu, który ma hello następujące ustawienia: jest monitorowanie protokołu HTTP, interwał sondowania wynosi 30 sekund, liczba niepowodzeń tolerowaną to 3, wartość limitu czasu to 10 sekund, a czas wygaśnięcia DNS wynosi 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="323b8-257">hello following timeline in Figure 2 is a detailed description of hello monitoring process of Traffic Manager endpoint that has hello following settings: monitoring protocol is HTTP, probing interval is 30 seconds, number of tolerated failures is 3, timeout value is 10 seconds, and DNS TTL is 30 seconds.</span></span>

![Punkt końcowy Menedżera ruchu sekwencji trybu failover i powrotu po awarii](./media/traffic-manager-monitoring/timeline.png)

<span data-ttu-id="323b8-259">**Rysunek 2: Ruchu Menedżer punktu końcowego trybu failover i odzyskiwania sekwencji**</span><span class="sxs-lookup"><span data-stu-id="323b8-259">**Figure 2:  Traffic manager endpoint failover and recovery sequence**</span></span>

1. <span data-ttu-id="323b8-260">**POBIERZ**.</span><span class="sxs-lookup"><span data-stu-id="323b8-260">**GET**.</span></span> <span data-ttu-id="323b8-261">Dla każdego punktu końcowego hello monitorowania systemu Menedżera ruchu wykonuje żądanie GET na powitania ścieżce określonej w hello ustawienia monitorowania.</span><span class="sxs-lookup"><span data-stu-id="323b8-261">For each endpoint, hello Traffic Manager monitoring system performs a GET request on hello path specified in hello monitoring settings.</span></span>
2. <span data-ttu-id="323b8-262">**200 OK**.</span><span class="sxs-lookup"><span data-stu-id="323b8-262">**200 OK**.</span></span> <span data-ttu-id="323b8-263">system monitorowania Hello oczekuje toobe komunikat HTTP 200 OK zwrócona w ciągu 10 sekund.</span><span class="sxs-lookup"><span data-stu-id="323b8-263">hello monitoring system expects an HTTP 200 OK message toobe returned within 10 seconds.</span></span> <span data-ttu-id="323b8-264">Po otrzymaniu tej odpowiedzi rozpoznaje, że usługa hello jest dostępna.</span><span class="sxs-lookup"><span data-stu-id="323b8-264">When it receives this response, it recognizes that hello service is available.</span></span>
3. <span data-ttu-id="323b8-265">**30 sekund między każdym sprawdzeniem**.</span><span class="sxs-lookup"><span data-stu-id="323b8-265">**30 seconds between checks**.</span></span> <span data-ttu-id="323b8-266">sprawdzenie kondycji punktu końcowego Hello jest powtarzany co 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="323b8-266">hello endpoint health check is repeated every 30 seconds.</span></span>
4. <span data-ttu-id="323b8-267">**Usługa jest niedostępna**.</span><span class="sxs-lookup"><span data-stu-id="323b8-267">**Service unavailable**.</span></span> <span data-ttu-id="323b8-268">Usługa Hello jest niedostępny.</span><span class="sxs-lookup"><span data-stu-id="323b8-268">hello service becomes unavailable.</span></span> <span data-ttu-id="323b8-269">Menedżer ruchu nie będzie wiedzieć, do czasu następnego sprawdzania kondycji hello.</span><span class="sxs-lookup"><span data-stu-id="323b8-269">Traffic Manager will not know until hello next health check.</span></span>
5. <span data-ttu-id="323b8-270">**Hello tooaccess prób monitorowania ścieżki**.</span><span class="sxs-lookup"><span data-stu-id="323b8-270">**Attempts tooaccess hello monitoring path**.</span></span> <span data-ttu-id="323b8-271">Witaj monitorowania systemu wykonuje żądanie GET, ale nie otrzymał odpowiedzi w określonym przedziale czasu hello 10 sekund (alternatywnie odpowiedzi z systemem innym niż 200 mogą pojawić się).</span><span class="sxs-lookup"><span data-stu-id="323b8-271">hello monitoring system performs a GET request, but does not receive a response within hello timeout period of 10 seconds (alternatively, a non-200 response may be received).</span></span> <span data-ttu-id="323b8-272">Próbuje trzy razy, w odstępach 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="323b8-272">It then tries three more times, at 30-second intervals.</span></span> <span data-ttu-id="323b8-273">Jeśli jeden z wpisów hello zakończy się pomyślnie, hello liczbę prób jest resetowany.</span><span class="sxs-lookup"><span data-stu-id="323b8-273">If one of hello tries is successful, then hello number of tries is reset.</span></span>
6. <span data-ttu-id="323b8-274">**Stan ustawiony tooDegraded**.</span><span class="sxs-lookup"><span data-stu-id="323b8-274">**Status set tooDegraded**.</span></span> <span data-ttu-id="323b8-275">Po czwartym niepowodzeniu kolejnych hello monitorowania systemu oznacza stan niedostępny punktu końcowego hello jako obniżony.</span><span class="sxs-lookup"><span data-stu-id="323b8-275">After a fourth consecutive failure, hello monitoring system marks hello unavailable endpoint status as Degraded.</span></span>
7. <span data-ttu-id="323b8-276">**Ruch jest punkty końcowe kierunku tooother**.</span><span class="sxs-lookup"><span data-stu-id="323b8-276">**Traffic is diverted tooother endpoints**.</span></span> <span data-ttu-id="323b8-277">Witaj serwery DNS Menedżera ruchu są aktualizowane i Traffic Manager nie będzie już zwracać hello punktu końcowego w zapytaniach tooDNS odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="323b8-277">hello Traffic Manager DNS name servers are updated and Traffic Manager no longer returns hello endpoint in response tooDNS queries.</span></span> <span data-ttu-id="323b8-278">Nowe połączenia są ukierunkowanej tooother, dostępnych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="323b8-278">New connections are directed tooother, available endpoints.</span></span> <span data-ttu-id="323b8-279">Jednak poprzedniej odpowiedzi DNS, które zawierają ten punkt końcowy nadal można buforować cykliczne serwery DNS i klientów DNS.</span><span class="sxs-lookup"><span data-stu-id="323b8-279">However, previous DNS responses that include this endpoint may still be cached by recursive DNS servers and DNS clients.</span></span> <span data-ttu-id="323b8-280">Klienci kontynuują punktu końcowego hello toouse do momentu wygaśnięcia hello pamięci podręcznej DNS.</span><span class="sxs-lookup"><span data-stu-id="323b8-280">Clients continue toouse hello endpoint until hello DNS cache expires.</span></span> <span data-ttu-id="323b8-281">Jako hello pamięć podręczna DNS wygaśnie, klienci utworzyć nowego zapytania DNS i ukierunkowanej toodifferent punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="323b8-281">As hello DNS cache expires, clients make new DNS queries and are directed toodifferent endpoints.</span></span> <span data-ttu-id="323b8-282">czas trwania pamięci podręcznej Hello jest kontrolowana przez ustawienie TTL hello w hello profilu usługi Traffic Manager, na przykład 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="323b8-282">hello cache duration is controlled by hello TTL setting in hello Traffic Manager profile, for example, 30 seconds.</span></span>
8. <span data-ttu-id="323b8-283">**Kontrole kondycji kontynuować**.</span><span class="sxs-lookup"><span data-stu-id="323b8-283">**Health checks continue**.</span></span> <span data-ttu-id="323b8-284">Toocheck hello kondycji hello punktu końcowego Menedżera ruchu będzie nadal występować, gdy ma stan obniżony.</span><span class="sxs-lookup"><span data-stu-id="323b8-284">Traffic Manager continues toocheck hello health of hello endpoint while it has a Degraded status.</span></span> <span data-ttu-id="323b8-285">Menedżer ruchu wykrywa toohealth zwraca hello punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="323b8-285">Traffic Manager detects when hello endpoint returns toohealth.</span></span>
9. <span data-ttu-id="323b8-286">**Usługa wraca do trybu online**.</span><span class="sxs-lookup"><span data-stu-id="323b8-286">**Service comes back online**.</span></span> <span data-ttu-id="323b8-287">Usługa Hello staną się dostępne.</span><span class="sxs-lookup"><span data-stu-id="323b8-287">hello service becomes available.</span></span> <span data-ttu-id="323b8-288">punkt końcowy Hello zachowuje jego stan obniżony w usłudze Traffic Manager do momentu jego następnego sprawdzania kondycji wykonuje hello monitorowania systemu.</span><span class="sxs-lookup"><span data-stu-id="323b8-288">hello endpoint retains its Degraded status in Traffic Manager until hello monitoring system performs its next health check.</span></span>
10. <span data-ttu-id="323b8-289">**Wznawia tooservice ruchu**.</span><span class="sxs-lookup"><span data-stu-id="323b8-289">**Traffic tooservice resumes**.</span></span> <span data-ttu-id="323b8-290">Traffic Manager wysyła żądanie GET i odbiera odpowiedź 200 OK stanu.</span><span class="sxs-lookup"><span data-stu-id="323b8-290">Traffic Manager sends a GET request and receives a 200 OK status response.</span></span> <span data-ttu-id="323b8-291">Usługa Hello zwróciła tooa dobrej kondycji.</span><span class="sxs-lookup"><span data-stu-id="323b8-291">hello service has returned tooa healthy state.</span></span> <span data-ttu-id="323b8-292">serwery nazw Menedżera ruchu Hello są aktualizowane i rozpoczęciem toohand się nazwą DNS hello usługa w odpowiedzi DNS.</span><span class="sxs-lookup"><span data-stu-id="323b8-292">hello Traffic Manager name servers are updated, and they begin toohand out hello service's DNS name in DNS responses.</span></span> <span data-ttu-id="323b8-293">Ruch zwraca punkt końcowy toohello buforowane odpowiedzi DNS, które zwracają inne punkty końcowe wygasa, a jako istniejących połączeń kończą tooother punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="323b8-293">Traffic returns toohello endpoint as cached DNS responses that return other endpoints expire, and as existing connections tooother endpoints are terminated.</span></span>

    > [!NOTE]
    > <span data-ttu-id="323b8-294">Ponieważ działanie Menedżera ruchu polega na powitania poziom DNS, nie może mieć wpływ istniejącego punktu końcowego tooany połączenia.</span><span class="sxs-lookup"><span data-stu-id="323b8-294">Because Traffic Manager works at hello DNS level, it cannot influence existing connections tooany endpoint.</span></span> <span data-ttu-id="323b8-295">Składającym ruchu między punktami końcowymi (albo przez ustawienia profilu zmienione albo podczas pracy awaryjnej lub powrotu po awarii), usługi Traffic Manager określa, że nowe punkty końcowe tooavailable połączenia.</span><span class="sxs-lookup"><span data-stu-id="323b8-295">When it directs traffic between endpoints (either by changed profile settings, or during failover or failback), Traffic Manager directs new connections tooavailable endpoints.</span></span> <span data-ttu-id="323b8-296">Jednak inne punkty końcowe może kontynuacja tooreceive ruchu za pomocą istniejących połączeń kończą się tymi sesjami.</span><span class="sxs-lookup"><span data-stu-id="323b8-296">However, other endpoints might continue tooreceive traffic via existing connections until those sessions are terminated.</span></span> <span data-ttu-id="323b8-297">tooenable toodrain ruchu z istniejących połączeń, aplikacje należy ograniczyć hello czas trwania sesji z każdego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="323b8-297">tooenable traffic toodrain from existing connections, applications should limit hello session duration used with each endpoint.</span></span>

## <a name="traffic-routing-methods"></a><span data-ttu-id="323b8-298">Metody routingu ruchu</span><span class="sxs-lookup"><span data-stu-id="323b8-298">Traffic-routing methods</span></span>

<span data-ttu-id="323b8-299">Punkt końcowy ma stan obniżony, jest już zwracany w odpowiedzi tooDNS zapytania.</span><span class="sxs-lookup"><span data-stu-id="323b8-299">When an endpoint has a Degraded status, it is no longer returned in response tooDNS queries.</span></span> <span data-ttu-id="323b8-300">Zamiast tego alternatywny punkt końcowy jest wybrane i zwracane.</span><span class="sxs-lookup"><span data-stu-id="323b8-300">Instead, an alternative endpoint is chosen and returned.</span></span> <span data-ttu-id="323b8-301">metody routingu ruchu Hello skonfigurowane w profilu hello Określa, jak wybrano hello alternatywnych punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="323b8-301">hello traffic-routing method configured in hello profile determines how hello alternative endpoint is chosen.</span></span>

* <span data-ttu-id="323b8-302">**Priorytet**.</span><span class="sxs-lookup"><span data-stu-id="323b8-302">**Priority**.</span></span> <span data-ttu-id="323b8-303">Punkty końcowe tworzą listy priorytetów.</span><span class="sxs-lookup"><span data-stu-id="323b8-303">Endpoints form a prioritized list.</span></span> <span data-ttu-id="323b8-304">zwracany jest zawsze Hello pierwszego dostępnego punktu końcowego na liście hello.</span><span class="sxs-lookup"><span data-stu-id="323b8-304">hello first available endpoint on hello list is always returned.</span></span> <span data-ttu-id="323b8-305">Jeśli stan punktu końcowego jest ograniczone, zwracany jest hello następnego dostępnego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="323b8-305">If an endpoint status is Degraded, then hello next available endpoint is returned.</span></span>
* <span data-ttu-id="323b8-306">**Ważone**.</span><span class="sxs-lookup"><span data-stu-id="323b8-306">**Weighted**.</span></span> <span data-ttu-id="323b8-307">Wszystkie dostępne punkt końcowy jest wybierany losowo oparte na ich wagi przypisanej i hello wag hello innych dostępnych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="323b8-307">Any available endpoint is chosen at random based on their assigned weights and hello weights of hello other available endpoints.</span></span>
* <span data-ttu-id="323b8-308">**Wydajność**.</span><span class="sxs-lookup"><span data-stu-id="323b8-308">**Performance**.</span></span> <span data-ttu-id="323b8-309">użytkownik końcowy toohello najbliższy punkt końcowy Hello jest zwracana.</span><span class="sxs-lookup"><span data-stu-id="323b8-309">hello endpoint closest toohello end user is returned.</span></span> <span data-ttu-id="323b8-310">Jeśli ten punkt końcowy jest niedostępny, punkt końcowy jest losowo wybrany z hello wszystkich innych dostępnych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="323b8-310">If that endpoint is unavailable, an endpoint is randomly chosen from all hello other available endpoints.</span></span> <span data-ttu-id="323b8-311">Wybieranie losowy punkt końcowy pozwala uniknąć kaskadowych błąd, który może wystąpić, gdy hello najbliższy punkt końcowy jest przeciążona.</span><span class="sxs-lookup"><span data-stu-id="323b8-311">Choosing a random endpoint avoids a cascading failure that can occur when hello next-closest endpoint becomes overloaded.</span></span> <span data-ttu-id="323b8-312">Plany alternatywnych trybu failover dla routingu ruchu wydajności można skonfigurować za pomocą [zagnieżdżonych profilów usługi Traffic Manager](traffic-manager-nested-profiles.md#example-4-controlling-performance-traffic-routing-between-multiple-endpoints-in-the-same-region).</span><span class="sxs-lookup"><span data-stu-id="323b8-312">You can configure alternative failover plans for performance traffic-routing by using [nested Traffic Manager profiles](traffic-manager-nested-profiles.md#example-4-controlling-performance-traffic-routing-between-multiple-endpoints-in-the-same-region).</span></span>
* <span data-ttu-id="323b8-313">**Geograficzne**.</span><span class="sxs-lookup"><span data-stu-id="323b8-313">**Geographic**.</span></span> <span data-ttu-id="323b8-314">punkt końcowy Hello mapowane lokalizacji geograficznej hello tooserve na podstawie żądania zapytania hello, zwracane są adresami IP.</span><span class="sxs-lookup"><span data-stu-id="323b8-314">hello endpoint mapped tooserve hello geographic location based on hello query request IP’s is returned.</span></span> <span data-ttu-id="323b8-315">Jeśli ten punkt końcowy jest niedostępny, inny punkt końcowy nie będzie wybranego toofailover, od lokalizacji geograficznej mogą być mapowane tylko końcowego tooone w profilu (szczegółowe informacje znajdują się w hello [— często zadawane pytania](traffic-manager-FAQs.md#traffic-manager-geographic-traffic-routing-method)).</span><span class="sxs-lookup"><span data-stu-id="323b8-315">If that endpoint is unavailable, another endpoint will not be selected toofailover to, since a geographic location can be mapped only tooone endpoint in a profile (more details are in hello [FAQ](traffic-manager-FAQs.md#traffic-manager-geographic-traffic-routing-method)).</span></span> <span data-ttu-id="323b8-316">Najlepszym rozwiązaniem, przy użyciu routingu geograficznego zaleca się klienci toouse zagnieżdżonych profilów usługi Traffic Manager z więcej niż jeden punkt końcowy jako punkty końcowe hello hello profilu.</span><span class="sxs-lookup"><span data-stu-id="323b8-316">As a best practice, when using geographic routing, we recommend customers toouse nested Traffic Manager profiles with more than one endpoint as hello endpoints of hello profile.</span></span>

<span data-ttu-id="323b8-317">Aby uzyskać więcej informacji, zobacz [metody routingu ruchu Menedżera ruchu](traffic-manager-routing-methods.md).</span><span class="sxs-lookup"><span data-stu-id="323b8-317">For more information, see [Traffic Manager traffic-routing methods](traffic-manager-routing-methods.md).</span></span>

> [!NOTE]
> <span data-ttu-id="323b8-318">Jeden wyjątek toonormal routingu ruchu zachowanie występuje, gdy wszystkie kwalifikujące się punkty końcowe mają obniżeniem stanu.</span><span class="sxs-lookup"><span data-stu-id="323b8-318">One exception toonormal traffic-routing behavior occurs when all eligible endpoints have a degraded status.</span></span> <span data-ttu-id="323b8-319">Sprawia, że Menedżera ruchu "optymalnego" podejmować i *odpowiada tak, jakby wszystkie punkty końcowe stan obniżony hello faktycznie znajdują się w stanie online*.</span><span class="sxs-lookup"><span data-stu-id="323b8-319">Traffic Manager makes a "best effort" attempt and *responds as if all hello Degraded status endpoints actually are in an online state*.</span></span> <span data-ttu-id="323b8-320">To zachowanie jest ewentualnie toohello preferowane byłoby toonot zwracać żadnych punktów końcowych w hello odpowiedzi DNS.</span><span class="sxs-lookup"><span data-stu-id="323b8-320">This behavior is preferable toohello alternative, which would be toonot return any endpoint in hello DNS response.</span></span> <span data-ttu-id="323b8-321">Wyłączony lub zatrzymany punkty końcowe nie są monitorowane, w związku z tym nie uważa się kwalifikujące się do ruchu sieciowego.</span><span class="sxs-lookup"><span data-stu-id="323b8-321">Disabled or Stopped endpoints are not monitored, therefore, they are not considered eligible for traffic.</span></span>
>
> <span data-ttu-id="323b8-322">Ten stan jest często spowodowane niewłaściwa konfiguracja usługi hello, takich jak:</span><span class="sxs-lookup"><span data-stu-id="323b8-322">This condition is commonly caused by improper configuration of hello service, such as:</span></span>
>
> * <span data-ttu-id="323b8-323">Listy kontroli dostępu [ACL] blokuje kontroli kondycji hello Menedżera ruchu.</span><span class="sxs-lookup"><span data-stu-id="323b8-323">An access control list [ACL] blocking hello Traffic Manager health checks.</span></span>
> * <span data-ttu-id="323b8-324">Niepoprawna konfiguracja hello monitorowanie portu lub protokół hello profilu Menedżera ruchu.</span><span class="sxs-lookup"><span data-stu-id="323b8-324">An improper configuration of hello monitoring port or protocol in hello Traffic manager profile.</span></span>
>
> <span data-ttu-id="323b8-325">Witaj konsekwencją to zachowanie jest czy kontroli kondycji usługi Traffic Manager nie są poprawnie skonfigurowane, mogą być wyświetlane do od ruchu hello routingu jako menedżera ruchu *jest* działa prawidłowo.</span><span class="sxs-lookup"><span data-stu-id="323b8-325">hello consequence of this behavior is that if Traffic Manager health checks are not configured correctly, it might appear from hello traffic routing as though Traffic Manager *is* working properly.</span></span> <span data-ttu-id="323b8-326">Jednak w takim przypadku trybu failover punktu końcowego nie może się zdarzyć, co ma wpływ na dostępność aplikacji ogólnej.</span><span class="sxs-lookup"><span data-stu-id="323b8-326">However, in this case, endpoint failover cannot happen which affects overall application availability.</span></span> <span data-ttu-id="323b8-327">Jest ważne toocheck, że profil hello pokazuje stan Online, nie stan obniżony.</span><span class="sxs-lookup"><span data-stu-id="323b8-327">It is important toocheck that hello profile shows an Online status, not a Degraded status.</span></span> <span data-ttu-id="323b8-328">Stan Online wskazuje, że hello Traffic Manager kondycji sprawdza, czy działa zgodnie z oczekiwaniami.</span><span class="sxs-lookup"><span data-stu-id="323b8-328">An Online status indicates that hello Traffic Manager health checks are working as expected.</span></span>

<span data-ttu-id="323b8-329">Aby uzyskać więcej informacji na temat rozwiązywania problemów nie przeszły pomyślnie sprawdzania kondycji, zobacz [stan rozwiązywania problemów ze spadkiem w usłudze Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span><span class="sxs-lookup"><span data-stu-id="323b8-329">For more information about troubleshooting failed health checks, see [Troubleshooting Degraded status on Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span></span>



## <a name="next-steps"></a><span data-ttu-id="323b8-330">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="323b8-330">Next steps</span></span>

<span data-ttu-id="323b8-331">Dowiedz się [działania Menedżera ruchu](traffic-manager-how-traffic-manager-works.md)</span><span class="sxs-lookup"><span data-stu-id="323b8-331">Learn [how Traffic Manager works](traffic-manager-how-traffic-manager-works.md)</span></span>

<span data-ttu-id="323b8-332">Dowiedz się więcej o hello [metody routingu ruchu](traffic-manager-routing-methods.md) obsługiwane przez Menedżera ruchu</span><span class="sxs-lookup"><span data-stu-id="323b8-332">Learn more about hello [traffic-routing methods](traffic-manager-routing-methods.md) supported by Traffic Manager</span></span>

<span data-ttu-id="323b8-333">Dowiedz się, jak za[Tworzenie profilu Menedżera ruchu](traffic-manager-manage-profiles.md)</span><span class="sxs-lookup"><span data-stu-id="323b8-333">Learn how too[create a Traffic Manager profile](traffic-manager-manage-profiles.md)</span></span>

<span data-ttu-id="323b8-334">[Rozwiązywanie problemów z obniżony stan](traffic-manager-troubleshooting-degraded.md) na punkt końcowy Menedżera ruchu</span><span class="sxs-lookup"><span data-stu-id="323b8-334">[Troubleshoot Degraded status](traffic-manager-troubleshooting-degraded.md) on a Traffic Manager endpoint</span></span>
