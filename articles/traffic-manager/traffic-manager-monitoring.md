---
title: "Azure monitorowania punktów końcowych usługi Traffic Manager | Dokumentacja firmy Microsoft"
description: "W tym artykule może pomóc Ci zrozumieć, jak Menedżera ruchu korzysta z monitorowania punktów końcowych i trybu failover punktu końcowego automatycznego ułatwiających klientom Azure wdrażać aplikacje wysokiej dostępności"
services: traffic-manager
documentationcenter: 
author: kumudd
manager: timlt
editor: 
ms.assetid: fff25ac3-d13a-4af9-8916-7c72e3d64bc7
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/22/2017
ms.author: kumud
ms.openlocfilehash: 5ce000814f2f5899a7338fdefb39c4873c006b1d
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="traffic-manager-endpoint-monitoring"></a><span data-ttu-id="ba816-103">Monitorowanie punktu końcowego Menedżera ruchu</span><span class="sxs-lookup"><span data-stu-id="ba816-103">Traffic Manager endpoint monitoring</span></span>

<span data-ttu-id="ba816-104">Usługi Azure Traffic Manager obejmuje monitorowanie wbudowanym punktem końcowym i punktu końcowego automatycznej pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="ba816-104">Azure Traffic Manager includes built-in endpoint monitoring and automatic endpoint failover.</span></span> <span data-ttu-id="ba816-105">Ta funkcja pomaga dostarczania aplikacji wysokiej dostępności, które są odporne na błędy punktu końcowego, w tym awarii region platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="ba816-105">This feature helps you deliver high-availability applications that are resilient to endpoint failure, including Azure region failures.</span></span>

## <a name="configure-endpoint-monitoring"></a><span data-ttu-id="ba816-106">Konfigurowanie monitorowania punktów końcowych</span><span class="sxs-lookup"><span data-stu-id="ba816-106">Configure endpoint monitoring</span></span>

<span data-ttu-id="ba816-107">Aby Skonfiguruj punkt końcowy monitorowania, należy określić następujące ustawienia w profilu usługi Traffic Manager:</span><span class="sxs-lookup"><span data-stu-id="ba816-107">To configure endpoint monitoring, you must specify the following settings on your Traffic Manager profile:</span></span>

* <span data-ttu-id="ba816-108">**Protokół**.</span><span class="sxs-lookup"><span data-stu-id="ba816-108">**Protocol**.</span></span> <span data-ttu-id="ba816-109">Wybierz pozycję HTTP, HTTPS lub TCP jako protokół usługi Traffic Manager używany podczas badania punktu końcowego w celu sprawdzenia jej kondycji.</span><span class="sxs-lookup"><span data-stu-id="ba816-109">Choose HTTP, HTTPS, or TCP as the protocol that Traffic Manager uses when probing your endpoint to check its health.</span></span> <span data-ttu-id="ba816-110">Monitorowanie HTTPS nie sprawdza, czy obowiązuje certyfikat SSL — go tylko sprawdza, czy certyfikat jest obecny.</span><span class="sxs-lookup"><span data-stu-id="ba816-110">HTTPS monitoring does not verify whether your SSL certificate is valid--it only checks that the certificate is present.</span></span>
* <span data-ttu-id="ba816-111">**Port**.</span><span class="sxs-lookup"><span data-stu-id="ba816-111">**Port**.</span></span> <span data-ttu-id="ba816-112">Wybierz port używany dla żądania.</span><span class="sxs-lookup"><span data-stu-id="ba816-112">Choose the port used for the request.</span></span>
* <span data-ttu-id="ba816-113">**Ścieżka**.</span><span class="sxs-lookup"><span data-stu-id="ba816-113">**Path**.</span></span> <span data-ttu-id="ba816-114">To ustawienie konfiguracji jest prawidłowy tylko w przypadku protokołów HTTP i HTTPS, w których Ścieżka określająca ustawienie jest wymagane.</span><span class="sxs-lookup"><span data-stu-id="ba816-114">This configuration setting is valid only for the HTTP and HTTPS protocols, for which specifying the path setting is required.</span></span> <span data-ttu-id="ba816-115">Zapewnia to ustawienie dla monitorowania powoduje błąd protokołu TCP.</span><span class="sxs-lookup"><span data-stu-id="ba816-115">Providing this setting for the TCP monitoring protocol results in an error.</span></span> <span data-ttu-id="ba816-116">W przypadku protokołu TCP nadaj względną ścieżkę i nazwę strony sieci Web lub plik, którego monitorowanie ma dostęp.</span><span class="sxs-lookup"><span data-stu-id="ba816-116">For TCP protocol, give the relative path and the name of the webpage or the file that the monitoring accesses.</span></span> <span data-ttu-id="ba816-117">Ukośnika (/) jest prawidłowym wpisem dla ścieżki względnej.</span><span class="sxs-lookup"><span data-stu-id="ba816-117">A forward slash (/) is a valid entry for the relative path.</span></span> <span data-ttu-id="ba816-118">Ta wartość oznacza, że plik znajduje się w katalogu głównym (ustawienie domyślne).</span><span class="sxs-lookup"><span data-stu-id="ba816-118">This value implies that the file is in the root directory (default).</span></span>
* <span data-ttu-id="ba816-119">**Interwał sondowania**.</span><span class="sxs-lookup"><span data-stu-id="ba816-119">**Probing Interval**.</span></span> <span data-ttu-id="ba816-120">Ta wartość określa, jak często punkt końcowy jest sprawdzany pod kątem kondycji od agenta sondowania Menedżera ruchu.</span><span class="sxs-lookup"><span data-stu-id="ba816-120">This value specifies how often an endpoint is checked for its health from a Traffic Manager probing agent.</span></span> <span data-ttu-id="ba816-121">Można określić w tym miejscu dwóch wartości: 30 sekund (zwykłego sondowania) i 10 sekund (fast sondowanie).</span><span class="sxs-lookup"><span data-stu-id="ba816-121">You can specify two values here: 30 seconds (normal probing) and 10 seconds (fast probing).</span></span> <span data-ttu-id="ba816-122">Jeśli wartości nie są dostarczane, profil ustawia domyślną wartość 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="ba816-122">If no values are provided, the profile sets to a default value of 30 seconds.</span></span> <span data-ttu-id="ba816-123">Odwiedź stronę [cennik usługi Traffic Manager](https://azure.microsoft.com/pricing/details/traffic-manager) strony, aby dowiedzieć się więcej o cenach sondowania szybkie.</span><span class="sxs-lookup"><span data-stu-id="ba816-123">Visit the [Traffic Manager Pricing](https://azure.microsoft.com/pricing/details/traffic-manager) page to learn more about fast probing pricing.</span></span>
* <span data-ttu-id="ba816-124">**Liczba błędów dopuszczalne**.</span><span class="sxs-lookup"><span data-stu-id="ba816-124">**Tolerated Number of Failures**.</span></span> <span data-ttu-id="ba816-125">Ta wartość określa, ile błędów sondowania agentem menedżera ruchu zaakceptować przed oznaczeniem określonego punktu końcowego swój stan jako niezdrowy.</span><span class="sxs-lookup"><span data-stu-id="ba816-125">This value specifies how many failures a Traffic Manager probing agent tolerates before marking that endpoint as unhealthy.</span></span> <span data-ttu-id="ba816-126">Wartość może należeć do zakresu od 0 do 9.</span><span class="sxs-lookup"><span data-stu-id="ba816-126">Its value can range between 0 and 9.</span></span> <span data-ttu-id="ba816-127">Wartość 0 oznacza pojedynczego uszkodzenia monitorowania może spowodować tego punktu końcowego może być oznaczony jako w złej kondycji.</span><span class="sxs-lookup"><span data-stu-id="ba816-127">A value of 0 means a single monitoring failure can cause that endpoint to be marked as unhealthy.</span></span> <span data-ttu-id="ba816-128">Jeśli nie określono wartości, używa domyślna wartość 3.</span><span class="sxs-lookup"><span data-stu-id="ba816-128">If no value is specified, it uses the default value of 3.</span></span>
* <span data-ttu-id="ba816-129">**Limit czasu monitorowania**.</span><span class="sxs-lookup"><span data-stu-id="ba816-129">**Monitoring Timeout**.</span></span> <span data-ttu-id="ba816-130">Ta właściwość określa ilość czasu, który agenta menedżera ruchu sondowania powinien zaczekać na uwzględnieniu który Sprawdź awarii, gdy sonda sprawdzania kondycji są wysyłane do punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="ba816-130">This property specifies the amount of time the Traffic Manager probing agent should wait before considering that check a failure when a health check probe is sent to the endpoint.</span></span> <span data-ttu-id="ba816-131">Interwał sondowania wynosi 30 sekund, można ustawić wartość limitu czasu od 5 do 10 sekund.</span><span class="sxs-lookup"><span data-stu-id="ba816-131">If the Probing Interval is set to 30 seconds, then you can set the Timeout value between 5 and 10 seconds.</span></span> <span data-ttu-id="ba816-132">Jeśli nie określono wartości, używa wartość domyślną równą 10 sekund.</span><span class="sxs-lookup"><span data-stu-id="ba816-132">If no value is specified, it uses a default value of 10 seconds.</span></span> <span data-ttu-id="ba816-133">Interwał sondowania wynosi 10 sekund, można ustawić wartość limitu czasu od 5 do 9 sekund.</span><span class="sxs-lookup"><span data-stu-id="ba816-133">If the Probing Interval is set to 10 seconds, then you can set the Timeout value between 5 and 9 seconds.</span></span> <span data-ttu-id="ba816-134">Jeśli wartość limitu czasu nie zostanie określona, używa wartość domyślną 9 sekund.</span><span class="sxs-lookup"><span data-stu-id="ba816-134">If no Timeout value is specified, it uses a default value of 9 seconds.</span></span>

![Monitorowanie punktu końcowego Menedżera ruchu](./media/traffic-manager-monitoring/endpoint-monitoring-settings.png)

<span data-ttu-id="ba816-136">**Rysunek 1: Monitorowanie punktu końcowego Menedżera ruchu**</span><span class="sxs-lookup"><span data-stu-id="ba816-136">**Figure 1:  Traffic Manager endpoint monitoring**</span></span>

## <a name="how-endpoint-monitoring-works"></a><span data-ttu-id="ba816-137">Jak działa monitorowania punktów końcowych</span><span class="sxs-lookup"><span data-stu-id="ba816-137">How endpoint monitoring works</span></span>

<span data-ttu-id="ba816-138">Jeśli protokół monitorowania jest ustawiony jako protokołu HTTP lub HTTPS, agent sondowania Menedżera ruchu zgłasza żądanie GET przy użyciu protokołu, portu i ścieżki względnej danego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="ba816-138">If the monitoring protocol is set as HTTP or HTTPS, the Traffic Manager probing agent makes a GET request to the endpoint using the protocol, port, and relative path given.</span></span> <span data-ttu-id="ba816-139">Jeśli ponownie pobiera odpowiedź 200 OK, a następnie tego punktu końcowego jest uznawany za dobrej kondycji.</span><span class="sxs-lookup"><span data-stu-id="ba816-139">If it gets back a 200-OK response, then that endpoint is considered healthy.</span></span> <span data-ttu-id="ba816-140">Jeśli odpowiedź ma inną wartość lub, jeśli odpowiedź nie zostanie odebrana przed upływem limitu czasu określona, przyjmowana Traffic Manager sondowanie agenta ponownie próbuje zgodnie z ustawieniem dopuszczalne liczbę błędów (ponowne próby są wykonywane informacji, jeśli to ustawienie ma wartość 0).</span><span class="sxs-lookup"><span data-stu-id="ba816-140">If the response is a different value, or, if no response is received within the timeout period specified, then the Traffic Manager probing agent re-attempts according to the Tolerated Number of Failures setting (no re-attempts are done if this setting is 0).</span></span> <span data-ttu-id="ba816-141">Jeśli liczbę kolejnych niepowodzeń jest wyższa niż wartość ustawienia dopuszczalne liczbę błędów, tego punktu końcowego jest oznaczona jako w złej kondycji.</span><span class="sxs-lookup"><span data-stu-id="ba816-141">If the number of consecutive failures is higher than the Tolerated Number of Failures setting, then that endpoint is marked as unhealthy.</span></span> 

<span data-ttu-id="ba816-142">Jeśli monitorowania protokołu TCP, agent sondowania Menedżera ruchu inicjuje żądanie połączenia TCP za pomocą określony port.</span><span class="sxs-lookup"><span data-stu-id="ba816-142">If the monitoring protocol is TCP, the Traffic Manager probing agent initiates a TCP connection request using the port specified.</span></span> <span data-ttu-id="ba816-143">Jeśli punkt końcowy odpowiada na żądanie za pomocą odpowiedzi do nawiązania połączenia, sprawdzanie kondycji jest oznaczony jako sukcesu i agenta sondowania Traffic Manager resetuje połączenie TCP.</span><span class="sxs-lookup"><span data-stu-id="ba816-143">If the endpoint responds to the request with a response to establish the connection, that health check is marked as a success and the Traffic Manager probing agent resets the TCP connection.</span></span> <span data-ttu-id="ba816-144">Jeśli odpowiedź ma inną wartość lub odpowiedź nie zostanie odebrana przed upływem limitu czasu określonego, Traffic Manager sondowanie agenta ponownie próbuje zgodnie z ustawieniem dopuszczalne liczbę błędów (ponowne próby będą Jeśli to ustawienie ma wartość 0).</span><span class="sxs-lookup"><span data-stu-id="ba816-144">If the response is a different value, or if no response is received within the timeout period specified, the Traffic Manager probing agent re-attempts according to the Tolerated Number of Failures setting (no re-attempts are made if this setting is 0).</span></span> <span data-ttu-id="ba816-145">Jeśli liczbę kolejnych niepowodzeń jest wyższa niż wartość ustawienia dopuszczalne liczbę błędów, ten punkt końcowy jest oznaczona złej kondycji.</span><span class="sxs-lookup"><span data-stu-id="ba816-145">If the number of consecutive failures is higher than the Tolerated Number of Failures setting, then that endpoint is marked unhealthy.</span></span>

<span data-ttu-id="ba816-146">We wszystkich przypadkach sondy Menedżera ruchu z wielu lokalizacji i oznaczanie niepowodzenie kolejnych się stanie w każdym regionie.</span><span class="sxs-lookup"><span data-stu-id="ba816-146">In all cases, Traffic Manager probes from multiple locations and the consecutive failure determination happens within each region.</span></span> <span data-ttu-id="ba816-147">Oznacza to również, czy punkty końcowe otrzymują sondy kondycji z Menedżera ruchu z częstotliwością wyższa niż wartość ustawienia używane dla interwału sondowania.</span><span class="sxs-lookup"><span data-stu-id="ba816-147">This also means that endpoints are receiving health probes from Traffic Manager with a higher frequency than the setting used for Probing Interval.</span></span>

>[!NOTE]
><span data-ttu-id="ba816-148">Dla protokołu HTTP lub HTTPS Protokół monitorowania popularną praktyką po stronie punktu końcowego jest wprowadzenie niestandardowej strony w aplikacji — na przykład /health.aspx.</span><span class="sxs-lookup"><span data-stu-id="ba816-148">For HTTP or HTTPS monitoring protocol, a common practice on the endpoint side is to implement a custom page within your application - for example, /health.aspx.</span></span> <span data-ttu-id="ba816-149">Przy użyciu tej ścieżki do monitorowania, można wykonać testy specyficzne dla aplikacji, takich jak sprawdzanie liczników wydajności lub Sprawdzanie dostępności bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ba816-149">Using this path for monitoring, you can perform application-specific checks, such as checking performance counters or verifying database availability.</span></span> <span data-ttu-id="ba816-150">W oparciu o te niestandardowe kontroli, strony zwraca odpowiedni kod stanu HTTP.</span><span class="sxs-lookup"><span data-stu-id="ba816-150">Based on these custom checks, the page returns an appropriate HTTP status code.</span></span>

<span data-ttu-id="ba816-151">Wszystkie punkty końcowe w profilu usługi Traffic Manager udostępnić ustawienia monitorowania.</span><span class="sxs-lookup"><span data-stu-id="ba816-151">All endpoints in a Traffic Manager profile share monitoring settings.</span></span> <span data-ttu-id="ba816-152">Jeśli musisz używać różnych ustawień monitorowania dla różnych punktów końcowych, możesz utworzyć [zagnieżdżonych profilów usługi Traffic Manager](traffic-manager-nested-profiles.md#example-5-per-endpoint-monitoring-settings).</span><span class="sxs-lookup"><span data-stu-id="ba816-152">If you need to use different monitoring settings for different endpoints, you can create [nested Traffic Manager profiles](traffic-manager-nested-profiles.md#example-5-per-endpoint-monitoring-settings).</span></span>

## <a name="endpoint-and-profile-status"></a><span data-ttu-id="ba816-153">Stan punktu końcowego i profilu</span><span class="sxs-lookup"><span data-stu-id="ba816-153">Endpoint and profile status</span></span>

<span data-ttu-id="ba816-154">Można włączyć i wyłączyć profilów usługi Traffic Manager i punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="ba816-154">You can enable and disable Traffic Manager profiles and endpoints.</span></span> <span data-ttu-id="ba816-155">Jednak zmiany w stan punktu końcowego również mogą wystąpić jako wynik Traffic Manager automatycznego ustawienia i procesów.</span><span class="sxs-lookup"><span data-stu-id="ba816-155">However, a change in endpoint status also might occur as a result of Traffic Manager automated settings and processes.</span></span>

### <a name="endpoint-status"></a><span data-ttu-id="ba816-156">Stan punktu końcowego</span><span class="sxs-lookup"><span data-stu-id="ba816-156">Endpoint status</span></span>

<span data-ttu-id="ba816-157">Można włączyć lub wyłączyć określonego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="ba816-157">You can enable or disable a specific endpoint.</span></span> <span data-ttu-id="ba816-158">Usługi podstawowej, która może nadal być dobrej kondycji, nie mają wpływu.</span><span class="sxs-lookup"><span data-stu-id="ba816-158">The underlying service, which might still be healthy, is unaffected.</span></span> <span data-ttu-id="ba816-159">Zmiana stanu punktu końcowego określa dostępność punktu końcowego profilu Menedżera ruchu.</span><span class="sxs-lookup"><span data-stu-id="ba816-159">Changing the endpoint status controls the availability of the endpoint in the Traffic Manager profile.</span></span> <span data-ttu-id="ba816-160">Po wyłączeniu stan punktu końcowego Menedżera ruchu nie sprawdza jego kondycji, a punkt końcowy nie jest dołączany do odpowiedzi DNS.</span><span class="sxs-lookup"><span data-stu-id="ba816-160">When an endpoint status is disabled, Traffic Manager does not check its health and the endpoint is not included in a DNS response.</span></span>

### <a name="profile-status"></a><span data-ttu-id="ba816-161">Stan profilu</span><span class="sxs-lookup"><span data-stu-id="ba816-161">Profile status</span></span>

<span data-ttu-id="ba816-162">Przy użyciu ustawienia stanu profilu, można włączyć lub wyłączyć określonego profilu.</span><span class="sxs-lookup"><span data-stu-id="ba816-162">Using the profile status setting, you can enable or disable a specific profile.</span></span> <span data-ttu-id="ba816-163">Gdy stan punktu końcowego ma wpływ na jeden punkt końcowy, stan profilu wpływa na całą profil, w tym wszystkie punkty końcowe.</span><span class="sxs-lookup"><span data-stu-id="ba816-163">While endpoint status affects a single endpoint, profile status affects the entire profile, including all endpoints.</span></span> <span data-ttu-id="ba816-164">Po wyłączeniu profilu punktów końcowych, które nie są sprawdzane pod kątem kondycji i punkty końcowe nie są uwzględnione w odpowiedzi DNS.</span><span class="sxs-lookup"><span data-stu-id="ba816-164">When you disable a profile, the endpoints are not checked for health and no endpoints are included in a DNS response.</span></span> <span data-ttu-id="ba816-165">[NXDOMAIN](https://tools.ietf.org/html/rfc2308) kod odpowiedzi jest zwracany dla zapytania DNS.</span><span class="sxs-lookup"><span data-stu-id="ba816-165">An [NXDOMAIN](https://tools.ietf.org/html/rfc2308) response code is returned for the DNS query.</span></span>

### <a name="endpoint-monitor-status"></a><span data-ttu-id="ba816-166">Stan monitora punktu końcowego</span><span class="sxs-lookup"><span data-stu-id="ba816-166">Endpoint monitor status</span></span>

<span data-ttu-id="ba816-167">Stan monitora punktu końcowego jest generowanych przez Menedżera ruchu wartość, która wyświetla stan punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="ba816-167">Endpoint monitor status is a Traffic Manager-generated value that shows the status of the endpoint.</span></span> <span data-ttu-id="ba816-168">Nie można zmienić tego ustawienia ręcznie.</span><span class="sxs-lookup"><span data-stu-id="ba816-168">You cannot change this setting manually.</span></span> <span data-ttu-id="ba816-169">Monitoruje stan punktu końcowego jest kombinacją wyniki monitorowania punktów końcowych i stan skonfigurowanego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="ba816-169">The endpoint monitor status is a combination of the results of endpoint monitoring and the configured endpoint status.</span></span> <span data-ttu-id="ba816-170">Możliwe wartości stanu monitora punktu końcowego są przedstawione w poniższej tabeli:</span><span class="sxs-lookup"><span data-stu-id="ba816-170">The possible values of endpoint monitor status are shown in the following table:</span></span>

| <span data-ttu-id="ba816-171">Stan profilu</span><span class="sxs-lookup"><span data-stu-id="ba816-171">Profile status</span></span> | <span data-ttu-id="ba816-172">Stan punktu końcowego</span><span class="sxs-lookup"><span data-stu-id="ba816-172">Endpoint status</span></span> | <span data-ttu-id="ba816-173">Stan monitora punktu końcowego</span><span class="sxs-lookup"><span data-stu-id="ba816-173">Endpoint monitor status</span></span> | <span data-ttu-id="ba816-174">Uwagi</span><span class="sxs-lookup"><span data-stu-id="ba816-174">Notes</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="ba816-175">Disabled (Wyłączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-175">Disabled</span></span> |<span data-ttu-id="ba816-176">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-176">Enabled</span></span> |<span data-ttu-id="ba816-177">Nieaktywne</span><span class="sxs-lookup"><span data-stu-id="ba816-177">Inactive</span></span> |<span data-ttu-id="ba816-178">Profil został wyłączony.</span><span class="sxs-lookup"><span data-stu-id="ba816-178">The profile has been disabled.</span></span> <span data-ttu-id="ba816-179">Mimo że stan punktu końcowego jest włączona, pierwszeństwo ma stan profilu (wyłączone).</span><span class="sxs-lookup"><span data-stu-id="ba816-179">Although the endpoint status is Enabled, the profile status (Disabled) takes precedence.</span></span> <span data-ttu-id="ba816-180">Punkty końcowe w profilach wyłączone nie są monitorowane.</span><span class="sxs-lookup"><span data-stu-id="ba816-180">Endpoints in disabled profiles are not monitored.</span></span> <span data-ttu-id="ba816-181">NXDOMAIN kod odpowiedzi jest zwracany dla zapytania DNS.</span><span class="sxs-lookup"><span data-stu-id="ba816-181">An NXDOMAIN response code is returned for the DNS query.</span></span> |
| <span data-ttu-id="ba816-182">&lt;wszystkie&gt;</span><span class="sxs-lookup"><span data-stu-id="ba816-182">&lt;any&gt;</span></span> |<span data-ttu-id="ba816-183">Disabled (Wyłączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-183">Disabled</span></span> |<span data-ttu-id="ba816-184">Disabled (Wyłączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-184">Disabled</span></span> |<span data-ttu-id="ba816-185">Punkt końcowy został wyłączony.</span><span class="sxs-lookup"><span data-stu-id="ba816-185">The endpoint has been disabled.</span></span> <span data-ttu-id="ba816-186">Wyłączone punkty końcowe nie są monitorowane.</span><span class="sxs-lookup"><span data-stu-id="ba816-186">Disabled endpoints are not monitored.</span></span> <span data-ttu-id="ba816-187">Punkt końcowy nie jest uwzględniony w odpowiedzi DNS, w związku z tym nie odbieranie ruchu.</span><span class="sxs-lookup"><span data-stu-id="ba816-187">The endpoint is not included in DNS responses, therefore, it does not receive traffic.</span></span> |
| <span data-ttu-id="ba816-188">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-188">Enabled</span></span> |<span data-ttu-id="ba816-189">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-189">Enabled</span></span> |<span data-ttu-id="ba816-190">Online</span><span class="sxs-lookup"><span data-stu-id="ba816-190">Online</span></span> |<span data-ttu-id="ba816-191">Punkt końcowy jest monitorowane i jest w dobrej kondycji.</span><span class="sxs-lookup"><span data-stu-id="ba816-191">The endpoint is monitored and is healthy.</span></span> <span data-ttu-id="ba816-192">Jest dołączony do odpowiedzi DNS, a mogą odbierać dane.</span><span class="sxs-lookup"><span data-stu-id="ba816-192">It is included in DNS responses and can receive traffic.</span></span> |
| <span data-ttu-id="ba816-193">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-193">Enabled</span></span> |<span data-ttu-id="ba816-194">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-194">Enabled</span></span> |<span data-ttu-id="ba816-195">Ograniczone</span><span class="sxs-lookup"><span data-stu-id="ba816-195">Degraded</span></span> |<span data-ttu-id="ba816-196">Monitorowania kontroli kondycji punktu końcowego kończą się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="ba816-196">Endpoint monitoring health checks are failing.</span></span> <span data-ttu-id="ba816-197">Punkt końcowy nie jest uwzględniony w odpowiedzi DNS i nie odbiera ruch.</span><span class="sxs-lookup"><span data-stu-id="ba816-197">The endpoint is not included in DNS responses and does not receive traffic.</span></span> <br><span data-ttu-id="ba816-198">Wyjątkiem jest Jeśli wszystkie punkty końcowe są ograniczone, w którym to przypadku wszystkie z nich są traktowane jako ma zostać zwrócona w odpowiedzi na zapytanie).</span><span class="sxs-lookup"><span data-stu-id="ba816-198">An exception to this is if all endpoints are degraded, in which case all of them are considered to be returned in the query response).</span></span></br>|
| <span data-ttu-id="ba816-199">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-199">Enabled</span></span> |<span data-ttu-id="ba816-200">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-200">Enabled</span></span> |<span data-ttu-id="ba816-201">CheckingEndpoint</span><span class="sxs-lookup"><span data-stu-id="ba816-201">CheckingEndpoint</span></span> |<span data-ttu-id="ba816-202">Punkt końcowy jest monitorowana, ale wyniki pierwsze badanie nie zostały jeszcze odebrane.</span><span class="sxs-lookup"><span data-stu-id="ba816-202">The endpoint is monitored, but the results of the first probe have not been received yet.</span></span> <span data-ttu-id="ba816-203">CheckingEndpoint jest to stan przejściowy, który zazwyczaj występuje natychmiast po dodaniu lub włączanie punktu końcowego w profilu.</span><span class="sxs-lookup"><span data-stu-id="ba816-203">CheckingEndpoint is a temporary state that usually occurs immediately after adding or enabling an endpoint in the profile.</span></span> <span data-ttu-id="ba816-204">Punkt końcowy w tym stanie jest dołączony do odpowiedzi DNS i mogą odbierać dane.</span><span class="sxs-lookup"><span data-stu-id="ba816-204">An endpoint in this state is included in DNS responses and can receive traffic.</span></span> |
| <span data-ttu-id="ba816-205">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-205">Enabled</span></span> |<span data-ttu-id="ba816-206">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-206">Enabled</span></span> |<span data-ttu-id="ba816-207">Zatrzymane</span><span class="sxs-lookup"><span data-stu-id="ba816-207">Stopped</span></span> |<span data-ttu-id="ba816-208">Chmury usługi lub aplikacji sieci web, która wskazuje punkt końcowy nie jest uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="ba816-208">The cloud service or web app that the endpoint points to is not running.</span></span> <span data-ttu-id="ba816-209">Sprawdź ustawienia aplikacji usługi lub aplikacji internetowej chmury.</span><span class="sxs-lookup"><span data-stu-id="ba816-209">Check the cloud service or web app settings.</span></span> <span data-ttu-id="ba816-210">Może to również nastąpić, jeśli punkt końcowy jest zagnieżdżony typ punktu końcowego i profilu podrzędnych jest wyłączony lub jest nieaktywna.</span><span class="sxs-lookup"><span data-stu-id="ba816-210">This can also happen if the endpoint is of type nested endpoint and the child profile is disabled or is inactive.</span></span> <br><span data-ttu-id="ba816-211">Punkt końcowy ze stanem zatrzymania nie jest monitorowany.</span><span class="sxs-lookup"><span data-stu-id="ba816-211">An endpoint with a Stopped status is not monitored.</span></span> <span data-ttu-id="ba816-212">Nie jest uwzględniony w odpowiedzi DNS, a nie odbiera ruch.</span><span class="sxs-lookup"><span data-stu-id="ba816-212">It is not included in DNS responses and does not receive traffic.</span></span> <span data-ttu-id="ba816-213">Wyjątkiem jest, jeśli wszystkie punkty końcowe są ograniczone, w którym to przypadku wszystkie z nich będą uznawane za ma zostać zwrócona w odpowiedzi na kwerendę.</span><span class="sxs-lookup"><span data-stu-id="ba816-213">An exception to this is if all endpoints are degraded, in which case all of them will be considered to be returned in the query response.</span></span></br>|

<span data-ttu-id="ba816-214">Szczegółowe informacje na temat obliczania stan monitora punktu końcowego dla zagnieżdżonej punktów końcowych, zobacz [zagnieżdżonych profilów usługi Traffic Manager](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="ba816-214">For details about how endpoint monitor status is calculated for nested endpoints, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

### <a name="profile-monitor-status"></a><span data-ttu-id="ba816-215">Stan monitora profilu</span><span class="sxs-lookup"><span data-stu-id="ba816-215">Profile monitor status</span></span>

<span data-ttu-id="ba816-216">Stan monitora profilu jest kombinacją stan skonfigurowanego profilu i punktu końcowego wartości stanu monitora dla wszystkich punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="ba816-216">The profile monitor status is a combination of the configured profile status and the endpoint monitor status values for all endpoints.</span></span> <span data-ttu-id="ba816-217">Możliwe wartości zostały opisane w poniższej tabeli:</span><span class="sxs-lookup"><span data-stu-id="ba816-217">The possible values are described in the following table:</span></span>

| <span data-ttu-id="ba816-218">Stan profilu (zgodnie z konfiguracją)</span><span class="sxs-lookup"><span data-stu-id="ba816-218">Profile status (as configured)</span></span> | <span data-ttu-id="ba816-219">Stan monitora punktu końcowego</span><span class="sxs-lookup"><span data-stu-id="ba816-219">Endpoint monitor status</span></span> | <span data-ttu-id="ba816-220">Stan monitora profilu</span><span class="sxs-lookup"><span data-stu-id="ba816-220">Profile monitor status</span></span> | <span data-ttu-id="ba816-221">Uwagi</span><span class="sxs-lookup"><span data-stu-id="ba816-221">Notes</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="ba816-222">Disabled (Wyłączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-222">Disabled</span></span> |<span data-ttu-id="ba816-223">&lt;wszelkie&gt; lub profil z określonych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="ba816-223">&lt;any&gt; or a profile with no defined endpoints.</span></span> |<span data-ttu-id="ba816-224">Disabled (Wyłączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-224">Disabled</span></span> |<span data-ttu-id="ba816-225">Profil został wyłączony.</span><span class="sxs-lookup"><span data-stu-id="ba816-225">The profile has been disabled.</span></span> |
| <span data-ttu-id="ba816-226">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-226">Enabled</span></span> |<span data-ttu-id="ba816-227">Stan co najmniej jeden punkt końcowy jest znacznie mniej wydajna.</span><span class="sxs-lookup"><span data-stu-id="ba816-227">The status of at least one endpoint is Degraded.</span></span> |<span data-ttu-id="ba816-228">Ograniczone</span><span class="sxs-lookup"><span data-stu-id="ba816-228">Degraded</span></span> |<span data-ttu-id="ba816-229">Przejrzyj wartości stanu poszczególnych punktu końcowego, aby ustalić, które punkty końcowe wymagać dalszych działań.</span><span class="sxs-lookup"><span data-stu-id="ba816-229">Review the individual endpoint status values to determine which endpoints require further attention.</span></span> |
| <span data-ttu-id="ba816-230">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-230">Enabled</span></span> |<span data-ttu-id="ba816-231">Stan co najmniej jeden punkt końcowy jest w trybie Online.</span><span class="sxs-lookup"><span data-stu-id="ba816-231">The status of at least one endpoint is Online.</span></span> <span data-ttu-id="ba816-232">Punkty końcowe nie będą miały stan obniżony.</span><span class="sxs-lookup"><span data-stu-id="ba816-232">No endpoints have a Degraded status.</span></span> |<span data-ttu-id="ba816-233">Online</span><span class="sxs-lookup"><span data-stu-id="ba816-233">Online</span></span> |<span data-ttu-id="ba816-234">Usługa akceptuje ruch.</span><span class="sxs-lookup"><span data-stu-id="ba816-234">The service is accepting traffic.</span></span> <span data-ttu-id="ba816-235">Są wymagane żadne dalsze akcje.</span><span class="sxs-lookup"><span data-stu-id="ba816-235">No further action is required.</span></span> |
| <span data-ttu-id="ba816-236">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-236">Enabled</span></span> |<span data-ttu-id="ba816-237">Stan co najmniej jeden punkt końcowy jest CheckingEndpoint.</span><span class="sxs-lookup"><span data-stu-id="ba816-237">The status of at least one endpoint is CheckingEndpoint.</span></span> <span data-ttu-id="ba816-238">Punkty końcowe nie są w stanie Online lub obniżony.</span><span class="sxs-lookup"><span data-stu-id="ba816-238">No endpoints are in Online or Degraded status.</span></span> |<span data-ttu-id="ba816-239">CheckingEndpoints</span><span class="sxs-lookup"><span data-stu-id="ba816-239">CheckingEndpoints</span></span> |<span data-ttu-id="ba816-240">Ten stan przejścia występuje, gdy profilu, jeśli utworzone lub włączone.</span><span class="sxs-lookup"><span data-stu-id="ba816-240">This transition state occurs when a profile if created or enabled.</span></span> <span data-ttu-id="ba816-241">Kondycja punktu końcowego jest sprawdzany po raz pierwszy.</span><span class="sxs-lookup"><span data-stu-id="ba816-241">The endpoint health is being checked for the first time.</span></span> |
| <span data-ttu-id="ba816-242">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="ba816-242">Enabled</span></span> |<span data-ttu-id="ba816-243">Stany wszystkie punkty końcowe w profilu są wyłączone lub zatrzymana lub profil nie ma zdefiniowanych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="ba816-243">The statuses of all endpoints in the profile are either Disabled or Stopped, or the profile has no defined endpoints.</span></span> |<span data-ttu-id="ba816-244">Nieaktywne</span><span class="sxs-lookup"><span data-stu-id="ba816-244">Inactive</span></span> |<span data-ttu-id="ba816-245">Punkty końcowe nie są aktywne, ale profil jest nadal włączony.</span><span class="sxs-lookup"><span data-stu-id="ba816-245">No endpoints are active, but the profile is still Enabled.</span></span> |

## <a name="endpoint-failover-and-recovery"></a><span data-ttu-id="ba816-246">Punkt końcowy trybu failover i odzyskiwania</span><span class="sxs-lookup"><span data-stu-id="ba816-246">Endpoint failover and recovery</span></span>

<span data-ttu-id="ba816-247">Menedżer ruchu okresowo sprawdza kondycję każdego punktu końcowego, w tym zła punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="ba816-247">Traffic Manager periodically checks the health of every endpoint, including unhealthy endpoints.</span></span> <span data-ttu-id="ba816-248">Menedżer ruchu wykrywa punkt końcowy staje się dobrej kondycji, a jego powrót do obrotu.</span><span class="sxs-lookup"><span data-stu-id="ba816-248">Traffic Manager detects when an endpoint becomes healthy and brings it back into rotation.</span></span>

<span data-ttu-id="ba816-249">Punkt końcowy jest zła, gdy wystąpienia któregokolwiek z następujących zdarzeń:</span><span class="sxs-lookup"><span data-stu-id="ba816-249">An endpoint is unhealthy when any of the following events occur:</span></span>
- <span data-ttu-id="ba816-250">W przypadku monitorowania protokołu HTTP lub HTTPS:</span><span class="sxs-lookup"><span data-stu-id="ba816-250">If the monitoring protocol is HTTP or HTTPS:</span></span>
    - <span data-ttu-id="ba816-251">Odebrano odpowiedź z systemem innym niż 200 (w tym kod różnych 2xx lub przekierowanie 301/302).</span><span class="sxs-lookup"><span data-stu-id="ba816-251">A non-200 response is received (including a different 2xx code, or a 301/302 redirect).</span></span>
- <span data-ttu-id="ba816-252">Jeśli protokół monitorowania jest TCP:</span><span class="sxs-lookup"><span data-stu-id="ba816-252">If the monitoring protocol is TCP:</span></span> 
    - <span data-ttu-id="ba816-253">Odebrano odpowiedź niż potwierdzenia lub SYN potwierdzenia w odpowiedzi na żądania SYNCHRONIZACJI wysyłane przez usługę Traffic Manager próby ustanowienia połączenia.</span><span class="sxs-lookup"><span data-stu-id="ba816-253">A response other than ACK or SYN-ACK is received in response to the SYNC request sent by Traffic Manager to attempt a connection establishment.</span></span>
- <span data-ttu-id="ba816-254">Limit czasu.</span><span class="sxs-lookup"><span data-stu-id="ba816-254">Timeout.</span></span> 
- <span data-ttu-id="ba816-255">Wszystkie inne problem z połączeniem spowodować, że punkt końcowy nie są dostępne.</span><span class="sxs-lookup"><span data-stu-id="ba816-255">Any other connection issue resulting in the endpoint being not reachable.</span></span>

<span data-ttu-id="ba816-256">Aby uzyskać więcej informacji dotyczących rozwiązywania problemów nie powiodło się sprawdzenie, zobacz [stan rozwiązywania problemów ze spadkiem w usłudze Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span><span class="sxs-lookup"><span data-stu-id="ba816-256">For more information about troubleshooting failed checks, see [Troubleshooting Degraded status on Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span></span> 

<span data-ttu-id="ba816-257">Następujące oś czasu na rysunku 2 jest szczegółowy opis procesu monitorowania punktu końcowego Menedżera ruchu, który ma następujące ustawienia: jest monitorowanie protokołu HTTP, interwał sondowania wynosi 30 sekund, liczba niepowodzeń tolerowaną to 3, wartość limitu czasu wynosi 10 sekund i czas wygaśnięcia DNS to 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="ba816-257">The following timeline in Figure 2 is a detailed description of the monitoring process of Traffic Manager endpoint that has the following settings: monitoring protocol is HTTP, probing interval is 30 seconds, number of tolerated failures is 3, timeout value is 10 seconds, and DNS TTL is 30 seconds.</span></span>

![Punkt końcowy Menedżera ruchu sekwencji trybu failover i powrotu po awarii](./media/traffic-manager-monitoring/timeline.png)

<span data-ttu-id="ba816-259">**Rysunek 2: Ruchu Menedżer punktu końcowego trybu failover i odzyskiwania sekwencji**</span><span class="sxs-lookup"><span data-stu-id="ba816-259">**Figure 2:  Traffic manager endpoint failover and recovery sequence**</span></span>

1. <span data-ttu-id="ba816-260">**POBIERZ**.</span><span class="sxs-lookup"><span data-stu-id="ba816-260">**GET**.</span></span> <span data-ttu-id="ba816-261">Dla każdego punktu końcowego Menedżera ruchu monitorowania systemu wykonuje żądanie GET w ścieżce określonej w ustawieniach monitorowania.</span><span class="sxs-lookup"><span data-stu-id="ba816-261">For each endpoint, the Traffic Manager monitoring system performs a GET request on the path specified in the monitoring settings.</span></span>
2. <span data-ttu-id="ba816-262">**200 OK**.</span><span class="sxs-lookup"><span data-stu-id="ba816-262">**200 OK**.</span></span> <span data-ttu-id="ba816-263">System monitorowania oczekuje komunikat HTTP 200 OK ma zostać zwrócona w ciągu 10 sekund.</span><span class="sxs-lookup"><span data-stu-id="ba816-263">The monitoring system expects an HTTP 200 OK message to be returned within 10 seconds.</span></span> <span data-ttu-id="ba816-264">Po otrzymaniu tej odpowiedzi rozpoznaje, że usługa jest dostępna.</span><span class="sxs-lookup"><span data-stu-id="ba816-264">When it receives this response, it recognizes that the service is available.</span></span>
3. <span data-ttu-id="ba816-265">**30 sekund między każdym sprawdzeniem**.</span><span class="sxs-lookup"><span data-stu-id="ba816-265">**30 seconds between checks**.</span></span> <span data-ttu-id="ba816-266">Sprawdzenie kondycji punktu końcowego jest powtarzany co 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="ba816-266">The endpoint health check is repeated every 30 seconds.</span></span>
4. <span data-ttu-id="ba816-267">**Usługa jest niedostępna**.</span><span class="sxs-lookup"><span data-stu-id="ba816-267">**Service unavailable**.</span></span> <span data-ttu-id="ba816-268">Usługa jest niedostępny.</span><span class="sxs-lookup"><span data-stu-id="ba816-268">The service becomes unavailable.</span></span> <span data-ttu-id="ba816-269">Menedżer ruchu nie będzie wiedzieć, do czasu następnego sprawdzania kondycji.</span><span class="sxs-lookup"><span data-stu-id="ba816-269">Traffic Manager will not know until the next health check.</span></span>
5. <span data-ttu-id="ba816-270">**Próbuje uzyskać dostęp do ścieżki monitorowania**.</span><span class="sxs-lookup"><span data-stu-id="ba816-270">**Attempts to access the monitoring path**.</span></span> <span data-ttu-id="ba816-271">System monitorowania wykonuje żądanie GET, ale nie otrzymał odpowiedzi przed upływem limitu czasu 10 sekund (alternatywnie odpowiedzi z systemem innym niż 200 mogą pojawić się).</span><span class="sxs-lookup"><span data-stu-id="ba816-271">The monitoring system performs a GET request, but does not receive a response within the timeout period of 10 seconds (alternatively, a non-200 response may be received).</span></span> <span data-ttu-id="ba816-272">Próbuje trzy razy, w odstępach 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="ba816-272">It then tries three more times, at 30-second intervals.</span></span> <span data-ttu-id="ba816-273">Jeśli jeden z wpisów zakończy się pomyślnie, liczbę prób jest resetowany.</span><span class="sxs-lookup"><span data-stu-id="ba816-273">If one of the tries is successful, then the number of tries is reset.</span></span>
6. <span data-ttu-id="ba816-274">**Stan ustawiony na obniżony**.</span><span class="sxs-lookup"><span data-stu-id="ba816-274">**Status set to Degraded**.</span></span> <span data-ttu-id="ba816-275">Po czwartym niepowodzeniu kolejnych monitorowania systemu oznacza stan punktu końcowego niedostępny jako obniżony.</span><span class="sxs-lookup"><span data-stu-id="ba816-275">After a fourth consecutive failure, the monitoring system marks the unavailable endpoint status as Degraded.</span></span>
7. <span data-ttu-id="ba816-276">**Ruch jest kierowane do innych punktów końcowych**.</span><span class="sxs-lookup"><span data-stu-id="ba816-276">**Traffic is diverted to other endpoints**.</span></span> <span data-ttu-id="ba816-277">Serwery nazw DNS Menedżera ruchu są aktualizowane i Menedżera ruchu już zwraca punkt końcowy w odpowiedzi na zapytania DNS.</span><span class="sxs-lookup"><span data-stu-id="ba816-277">The Traffic Manager DNS name servers are updated and Traffic Manager no longer returns the endpoint in response to DNS queries.</span></span> <span data-ttu-id="ba816-278">Nowe połączenia są kierowane do innych, dostępnych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="ba816-278">New connections are directed to other, available endpoints.</span></span> <span data-ttu-id="ba816-279">Jednak poprzedniej odpowiedzi DNS, które zawierają ten punkt końcowy nadal można buforować cykliczne serwery DNS i klientów DNS.</span><span class="sxs-lookup"><span data-stu-id="ba816-279">However, previous DNS responses that include this endpoint may still be cached by recursive DNS servers and DNS clients.</span></span> <span data-ttu-id="ba816-280">Klienci w dalszym ciągu korzystać z punktu końcowego do momentu wygaśnięcia pamięci podręcznej DNS.</span><span class="sxs-lookup"><span data-stu-id="ba816-280">Clients continue to use the endpoint until the DNS cache expires.</span></span> <span data-ttu-id="ba816-281">Zgodnie z pamięci podręcznej DNS wygaśnie, klienci utworzyć nowego zapytania DNS i są kierowane do różnych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="ba816-281">As the DNS cache expires, clients make new DNS queries and are directed to different endpoints.</span></span> <span data-ttu-id="ba816-282">Czas trwania pamięci podręcznej jest kontrolowana przez ustawienie Czas wygaśnięcia w profilu usługi Traffic Manager, na przykład 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="ba816-282">The cache duration is controlled by the TTL setting in the Traffic Manager profile, for example, 30 seconds.</span></span>
8. <span data-ttu-id="ba816-283">**Kontrole kondycji kontynuować**.</span><span class="sxs-lookup"><span data-stu-id="ba816-283">**Health checks continue**.</span></span> <span data-ttu-id="ba816-284">Menedżer ruchu w dalszym ciągu Sprawdź kondycję punktu końcowego, gdy ma stan obniżony.</span><span class="sxs-lookup"><span data-stu-id="ba816-284">Traffic Manager continues to check the health of the endpoint while it has a Degraded status.</span></span> <span data-ttu-id="ba816-285">Menedżer ruchu wykrywa zwraca punkt końcowy do kondycji.</span><span class="sxs-lookup"><span data-stu-id="ba816-285">Traffic Manager detects when the endpoint returns to health.</span></span>
9. <span data-ttu-id="ba816-286">**Usługa wraca do trybu online**.</span><span class="sxs-lookup"><span data-stu-id="ba816-286">**Service comes back online**.</span></span> <span data-ttu-id="ba816-287">Usługa stanie się dostępny.</span><span class="sxs-lookup"><span data-stu-id="ba816-287">The service becomes available.</span></span> <span data-ttu-id="ba816-288">Punkt końcowy zachowuje jego stan obniżony w usłudze Traffic Manager do momentu jego następnego sprawdzania kondycji wykonuje system monitorowania.</span><span class="sxs-lookup"><span data-stu-id="ba816-288">The endpoint retains its Degraded status in Traffic Manager until the monitoring system performs its next health check.</span></span>
10. <span data-ttu-id="ba816-289">**Ruch do usługi wznawia**.</span><span class="sxs-lookup"><span data-stu-id="ba816-289">**Traffic to service resumes**.</span></span> <span data-ttu-id="ba816-290">Traffic Manager wysyła żądanie GET i odbiera odpowiedź 200 OK stanu.</span><span class="sxs-lookup"><span data-stu-id="ba816-290">Traffic Manager sends a GET request and receives a 200 OK status response.</span></span> <span data-ttu-id="ba816-291">Usługa powrócił do stanu dobrej kondycji.</span><span class="sxs-lookup"><span data-stu-id="ba816-291">The service has returned to a healthy state.</span></span> <span data-ttu-id="ba816-292">Serwery nazw Menedżera ruchu są aktualizowane i rozpoczęciem przekazywaniu nazwę DNS usługi w odpowiedzi DNS.</span><span class="sxs-lookup"><span data-stu-id="ba816-292">The Traffic Manager name servers are updated, and they begin to hand out the service's DNS name in DNS responses.</span></span> <span data-ttu-id="ba816-293">Ruch zwraca do punktu końcowego buforowane odpowiedzi DNS zwracające innych punktów końcowych wygasa, a jako istniejących połączeń z innych punktów końcowych są zamykane.</span><span class="sxs-lookup"><span data-stu-id="ba816-293">Traffic returns to the endpoint as cached DNS responses that return other endpoints expire, and as existing connections to other endpoints are terminated.</span></span>

    > [!NOTE]
    > <span data-ttu-id="ba816-294">Ponieważ usługi Traffic Manager działa na poziomie DNS, nie może mieć wpływ istniejących połączeń z dowolnego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="ba816-294">Because Traffic Manager works at the DNS level, it cannot influence existing connections to any endpoint.</span></span> <span data-ttu-id="ba816-295">Po jego kieruje ruch między punktami końcowymi (albo przez ustawienia profilu zmienione albo podczas pracy awaryjnej lub powrotu po awarii), usługi Traffic Manager kieruje nowych połączeń z dostępnych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="ba816-295">When it directs traffic between endpoints (either by changed profile settings, or during failover or failback), Traffic Manager directs new connections to available endpoints.</span></span> <span data-ttu-id="ba816-296">Jednak inne punkty końcowe mogą w dalszym ciągu odbieranie ruchu za pośrednictwem istniejących połączeń, dopóki nie kończą się tymi sesjami.</span><span class="sxs-lookup"><span data-stu-id="ba816-296">However, other endpoints might continue to receive traffic via existing connections until those sessions are terminated.</span></span> <span data-ttu-id="ba816-297">Aby umożliwić ruch do opróżnienia z istniejących połączeń, aplikacji, należy ograniczyć czas trwania sesji z każdego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="ba816-297">To enable traffic to drain from existing connections, applications should limit the session duration used with each endpoint.</span></span>

## <a name="traffic-routing-methods"></a><span data-ttu-id="ba816-298">Metody routingu ruchu</span><span class="sxs-lookup"><span data-stu-id="ba816-298">Traffic-routing methods</span></span>

<span data-ttu-id="ba816-299">Punkt końcowy ma stan obniżony, jest już zwracany w odpowiedzi na zapytania DNS.</span><span class="sxs-lookup"><span data-stu-id="ba816-299">When an endpoint has a Degraded status, it is no longer returned in response to DNS queries.</span></span> <span data-ttu-id="ba816-300">Zamiast tego alternatywny punkt końcowy jest wybrane i zwracane.</span><span class="sxs-lookup"><span data-stu-id="ba816-300">Instead, an alternative endpoint is chosen and returned.</span></span> <span data-ttu-id="ba816-301">Metoda routingu ruchu skonfigurowane w profilu określa, jak wybrano alternatywny punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="ba816-301">The traffic-routing method configured in the profile determines how the alternative endpoint is chosen.</span></span>

* <span data-ttu-id="ba816-302">**Priorytet**.</span><span class="sxs-lookup"><span data-stu-id="ba816-302">**Priority**.</span></span> <span data-ttu-id="ba816-303">Punkty końcowe tworzą listy priorytetów.</span><span class="sxs-lookup"><span data-stu-id="ba816-303">Endpoints form a prioritized list.</span></span> <span data-ttu-id="ba816-304">Zwracany jest zawsze pierwszego dostępnego punktu końcowego na liście.</span><span class="sxs-lookup"><span data-stu-id="ba816-304">The first available endpoint on the list is always returned.</span></span> <span data-ttu-id="ba816-305">Jeśli stan punktu końcowego jest ograniczone, zwracany jest następnego dostępnego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="ba816-305">If an endpoint status is Degraded, then the next available endpoint is returned.</span></span>
* <span data-ttu-id="ba816-306">**Ważone**.</span><span class="sxs-lookup"><span data-stu-id="ba816-306">**Weighted**.</span></span> <span data-ttu-id="ba816-307">Wszystkie dostępne punktu końcowego jest wybierany losowo na podstawie ich wagi przypisanej i wagi innych dostępnych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="ba816-307">Any available endpoint is chosen at random based on their assigned weights and the weights of the other available endpoints.</span></span>
* <span data-ttu-id="ba816-308">**Wydajność**.</span><span class="sxs-lookup"><span data-stu-id="ba816-308">**Performance**.</span></span> <span data-ttu-id="ba816-309">Zwracany jest punktem końcowym najbliżej użytkownika końcowego.</span><span class="sxs-lookup"><span data-stu-id="ba816-309">The endpoint closest to the end user is returned.</span></span> <span data-ttu-id="ba816-310">Jeśli ten punkt końcowy jest niedostępny, punkt końcowy jest losowo wybrany z wszystkich innych dostępnych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="ba816-310">If that endpoint is unavailable, an endpoint is randomly chosen from all the other available endpoints.</span></span> <span data-ttu-id="ba816-311">Wybieranie losowy punkt końcowy pozwala uniknąć kaskadowych błąd, który może wystąpić, gdy najbliższy punkt końcowy jest przeciążona.</span><span class="sxs-lookup"><span data-stu-id="ba816-311">Choosing a random endpoint avoids a cascading failure that can occur when the next-closest endpoint becomes overloaded.</span></span> <span data-ttu-id="ba816-312">Plany alternatywnych trybu failover dla routingu ruchu wydajności można skonfigurować za pomocą [zagnieżdżonych profilów usługi Traffic Manager](traffic-manager-nested-profiles.md#example-4-controlling-performance-traffic-routing-between-multiple-endpoints-in-the-same-region).</span><span class="sxs-lookup"><span data-stu-id="ba816-312">You can configure alternative failover plans for performance traffic-routing by using [nested Traffic Manager profiles](traffic-manager-nested-profiles.md#example-4-controlling-performance-traffic-routing-between-multiple-endpoints-in-the-same-region).</span></span>
* <span data-ttu-id="ba816-313">**Geograficzne**.</span><span class="sxs-lookup"><span data-stu-id="ba816-313">**Geographic**.</span></span> <span data-ttu-id="ba816-314">Zwracany jest mapowane do obsługi lokalizacji geograficznej, na podstawie zapytania żądania punktu końcowego adresami IP.</span><span class="sxs-lookup"><span data-stu-id="ba816-314">The endpoint mapped to serve the geographic location based on the query request IP’s is returned.</span></span> <span data-ttu-id="ba816-315">Jeśli ten punkt końcowy jest niedostępny, inny punkt końcowy nie zostanie wybrany do trybu failover, ponieważ lokalizacji geograficznej, mogą być mapowane tylko na jeden punkt końcowy w profilu (szczegółowe informacje znajdują się w [— często zadawane pytania](traffic-manager-FAQs.md#traffic-manager-geographic-traffic-routing-method)).</span><span class="sxs-lookup"><span data-stu-id="ba816-315">If that endpoint is unavailable, another endpoint will not be selected to failover to, since a geographic location can be mapped only to one endpoint in a profile (more details are in the [FAQ](traffic-manager-FAQs.md#traffic-manager-geographic-traffic-routing-method)).</span></span> <span data-ttu-id="ba816-316">Najlepszym rozwiązaniem, przy użyciu routingu geograficznego firma Microsoft zaleca klientom korzystanie z więcej niż jeden punkt końcowy zagnieżdżonych profilów usługi Traffic Manager, jako punkty końcowe profilu.</span><span class="sxs-lookup"><span data-stu-id="ba816-316">As a best practice, when using geographic routing, we recommend customers to use nested Traffic Manager profiles with more than one endpoint as the endpoints of the profile.</span></span>

<span data-ttu-id="ba816-317">Aby uzyskać więcej informacji, zobacz [metody routingu ruchu Menedżera ruchu](traffic-manager-routing-methods.md).</span><span class="sxs-lookup"><span data-stu-id="ba816-317">For more information, see [Traffic Manager traffic-routing methods](traffic-manager-routing-methods.md).</span></span>

> [!NOTE]
> <span data-ttu-id="ba816-318">Jedynym wyjątkiem normalne zachowanie routingu ruchu występuje, gdy wszystkie kwalifikujące się punkty końcowe mają obniżeniem stanu.</span><span class="sxs-lookup"><span data-stu-id="ba816-318">One exception to normal traffic-routing behavior occurs when all eligible endpoints have a degraded status.</span></span> <span data-ttu-id="ba816-319">Sprawia, że Menedżera ruchu "optymalnego" podejmować i *odpowiada tak, jakby wszystkie punkty końcowe stan obniżony faktycznie są w stanie online*.</span><span class="sxs-lookup"><span data-stu-id="ba816-319">Traffic Manager makes a "best effort" attempt and *responds as if all the Degraded status endpoints actually are in an online state*.</span></span> <span data-ttu-id="ba816-320">To zachowanie jest inny byłoby nie zwrócił żadnych punktów końcowych w odpowiedzi DNS.</span><span class="sxs-lookup"><span data-stu-id="ba816-320">This behavior is preferable to the alternative, which would be to not return any endpoint in the DNS response.</span></span> <span data-ttu-id="ba816-321">Wyłączony lub zatrzymany punkty końcowe nie są monitorowane, w związku z tym nie uważa się kwalifikujące się do ruchu sieciowego.</span><span class="sxs-lookup"><span data-stu-id="ba816-321">Disabled or Stopped endpoints are not monitored, therefore, they are not considered eligible for traffic.</span></span>
>
> <span data-ttu-id="ba816-322">Ten stan jest często spowodowane niewłaściwa konfiguracja usługi, takie jak:</span><span class="sxs-lookup"><span data-stu-id="ba816-322">This condition is commonly caused by improper configuration of the service, such as:</span></span>
>
> * <span data-ttu-id="ba816-323">Sprawdza, czy lista kontroli dostępu [ACL] blokowaniem kondycji usługi Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="ba816-323">An access control list [ACL] blocking the Traffic Manager health checks.</span></span>
> * <span data-ttu-id="ba816-324">Niepoprawna konfiguracja monitorowania portu lub protokół w profilu Menedżera ruchu.</span><span class="sxs-lookup"><span data-stu-id="ba816-324">An improper configuration of the monitoring port or protocol in the Traffic manager profile.</span></span>
>
> <span data-ttu-id="ba816-325">Konsekwencją to zachowanie jest czy kontroli kondycji usługi Traffic Manager nie są poprawnie skonfigurowane, mogą być wyświetlane do od ruchu routingu jako menedżera ruchu *jest* działa prawidłowo.</span><span class="sxs-lookup"><span data-stu-id="ba816-325">The consequence of this behavior is that if Traffic Manager health checks are not configured correctly, it might appear from the traffic routing as though Traffic Manager *is* working properly.</span></span> <span data-ttu-id="ba816-326">Jednak w takim przypadku trybu failover punktu końcowego nie może się zdarzyć, co ma wpływ na dostępność aplikacji ogólnej.</span><span class="sxs-lookup"><span data-stu-id="ba816-326">However, in this case, endpoint failover cannot happen which affects overall application availability.</span></span> <span data-ttu-id="ba816-327">Należy sprawdzić, czy profil pokazuje stan Online, nie stan obniżony.</span><span class="sxs-lookup"><span data-stu-id="ba816-327">It is important to check that the profile shows an Online status, not a Degraded status.</span></span> <span data-ttu-id="ba816-328">Stan Online wskazuje, że sprawdzenia kondycji usługi Traffic Manager działają zgodnie z oczekiwaniami.</span><span class="sxs-lookup"><span data-stu-id="ba816-328">An Online status indicates that the Traffic Manager health checks are working as expected.</span></span>

<span data-ttu-id="ba816-329">Aby uzyskać więcej informacji na temat rozwiązywania problemów nie przeszły pomyślnie sprawdzania kondycji, zobacz [stan rozwiązywania problemów ze spadkiem w usłudze Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span><span class="sxs-lookup"><span data-stu-id="ba816-329">For more information about troubleshooting failed health checks, see [Troubleshooting Degraded status on Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span></span>



## <a name="next-steps"></a><span data-ttu-id="ba816-330">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="ba816-330">Next steps</span></span>

<span data-ttu-id="ba816-331">Dowiedz się [działania Menedżera ruchu](traffic-manager-how-traffic-manager-works.md)</span><span class="sxs-lookup"><span data-stu-id="ba816-331">Learn [how Traffic Manager works](traffic-manager-how-traffic-manager-works.md)</span></span>

<span data-ttu-id="ba816-332">Dowiedz się więcej o [metody routingu ruchu](traffic-manager-routing-methods.md) obsługiwane przez Menedżera ruchu</span><span class="sxs-lookup"><span data-stu-id="ba816-332">Learn more about the [traffic-routing methods](traffic-manager-routing-methods.md) supported by Traffic Manager</span></span>

<span data-ttu-id="ba816-333">Dowiedz się, jak [Tworzenie profilu Menedżera ruchu](traffic-manager-manage-profiles.md)</span><span class="sxs-lookup"><span data-stu-id="ba816-333">Learn how to [create a Traffic Manager profile](traffic-manager-manage-profiles.md)</span></span>

<span data-ttu-id="ba816-334">[Rozwiązywanie problemów z obniżony stan](traffic-manager-troubleshooting-degraded.md) na punkt końcowy Menedżera ruchu</span><span class="sxs-lookup"><span data-stu-id="ba816-334">[Troubleshoot Degraded status](traffic-manager-troubleshooting-degraded.md) on a Traffic Manager endpoint</span></span>
