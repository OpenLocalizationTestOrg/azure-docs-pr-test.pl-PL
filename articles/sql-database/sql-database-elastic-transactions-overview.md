---
title: Transakcje aaaDistributed dla baz danych w chmurze
description: "Omówienie transakcji elastycznej bazy danych z bazy danych Azure SQL"
services: sql-database
documentationcenter: 
author: torsteng
manager: jhubbard
editor: torsteng
ms.assetid: e14df7a3-7788-4cfb-bcd1-7ad6433ef1f9
ms.service: sql-database
ms.custom: scale out apps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: sql-database
ms.date: 05/27/2016
ms.author: torsteng
ms.openlocfilehash: 9a18f2749108d337bf115b3dc21dd0c7828dd9c2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="distributed-transactions-across-cloud-databases"></a><span data-ttu-id="7f09e-103">Transakcje rozproszone w bazach danych w chmurze</span><span class="sxs-lookup"><span data-stu-id="7f09e-103">Distributed transactions across cloud databases</span></span>
<span data-ttu-id="7f09e-104">Transakcji elastycznej bazy danych dla usługi Azure SQL Database (baza danych SQL) pozwalają transakcje toorun, obejmujące wiele baz danych w bazie danych SQL.</span><span class="sxs-lookup"><span data-stu-id="7f09e-104">Elastic database transactions for Azure SQL Database (SQL DB) allow you toorun transactions that span several databases in SQL DB.</span></span> <span data-ttu-id="7f09e-105">Transakcji elastycznej bazy danych dla bazy danych SQL są dostępne dla aplikacji .NET przy użyciu ADO .NET oraz integrują się z hello znanych środowisko programowania przy użyciu hello [System.Transaction](https://msdn.microsoft.com/library/system.transactions.aspx) klasy.</span><span class="sxs-lookup"><span data-stu-id="7f09e-105">Elastic database transactions for SQL DB are available for .NET applications using ADO .NET and integrate with hello familiar programming experience using hello [System.Transaction](https://msdn.microsoft.com/library/system.transactions.aspx) classes.</span></span> <span data-ttu-id="7f09e-106">Biblioteka hello tooget, zobacz [.NET Framework 4.6.1 (Instalator internetowy)](https://www.microsoft.com/download/details.aspx?id=49981).</span><span class="sxs-lookup"><span data-stu-id="7f09e-106">tooget hello library, see [.NET Framework 4.6.1 (Web Installer)](https://www.microsoft.com/download/details.aspx?id=49981).</span></span>

<span data-ttu-id="7f09e-107">Lokalnie takiej sytuacji są zwykle wymagane systemem koordynatora transakcji rozproszonych (MSDTC).</span><span class="sxs-lookup"><span data-stu-id="7f09e-107">On premises, such a scenario usually required running Microsoft Distributed Transaction Coordinator (MSDTC).</span></span> <span data-ttu-id="7f09e-108">Ponieważ usługa MSDTC nie jest dostępna dla aplikacji platformy jako usługa na platformie Azure, transakcje rozproszone toocoordinate możliwości hello ma teraz bezpośrednio integrowane bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="7f09e-108">Since MSDTC is not available for Platform-as-a-Service application in Azure, hello ability toocoordinate distributed transactions has now been directly integrated into SQL DB.</span></span> <span data-ttu-id="7f09e-109">Aplikacje mogą łączyć transakcje rozproszone toolaunch bazy danych SQL tooany i jednej z baz danych hello niewidocznie będzie koordynować z transakcji rozproszonych hello pokazane na powitania po rysunku.</span><span class="sxs-lookup"><span data-stu-id="7f09e-109">Applications can connect tooany SQL Database toolaunch distributed transactions, and one of hello databases will transparently coordinate hello distributed transaction, as shown in hello following figure.</span></span> 

  ![<span data-ttu-id="7f09e-110">Transakcje rozproszone w usłudze Azure SQL Database przy użyciu transakcji elastycznej bazy danych</span><span class="sxs-lookup"><span data-stu-id="7f09e-110">Distributed transactions with Azure SQL Database using elastic database transactions</span></span> ][1]

## <a name="common-scenarios"></a><span data-ttu-id="7f09e-111">Typowe scenariusze</span><span class="sxs-lookup"><span data-stu-id="7f09e-111">Common scenarios</span></span>
<span data-ttu-id="7f09e-112">Transakcji elastycznej bazy danych dla bazy danych SQL. Włącz toodata atomic zmiany toomake aplikacji przechowywanych w wielu różnych baz danych SQL.</span><span class="sxs-lookup"><span data-stu-id="7f09e-112">Elastic database transactions for SQL DB enable applications toomake atomic changes toodata stored in several different SQL Databases.</span></span> <span data-ttu-id="7f09e-113">Podgląd Hello koncentruje się na procesy programowanie po stronie klienta w C# i platformy .NET.</span><span class="sxs-lookup"><span data-stu-id="7f09e-113">hello preview focuses on client-side development experiences in C# and .NET.</span></span> <span data-ttu-id="7f09e-114">Czynności po stronie serwera, za pomocą T-SQL jest zaplanowane na później.</span><span class="sxs-lookup"><span data-stu-id="7f09e-114">A server-side experience using T-SQL is planned for a later time.</span></span>  
<span data-ttu-id="7f09e-115">Następujące scenariusze hello cele transakcji elastycznej bazy danych:</span><span class="sxs-lookup"><span data-stu-id="7f09e-115">Elastic database transactions targets hello following scenarios:</span></span>

* <span data-ttu-id="7f09e-116">Bazy danych wielu aplikacji na platformie Azure: W tym scenariuszu danych jest pionowo podzielonym na partycje w kilku baz danych w bazie danych SQL tak, aby różne rodzaje danych znajdują się na różnych baz danych.</span><span class="sxs-lookup"><span data-stu-id="7f09e-116">Multi-database applications in Azure: With this scenario, data is vertically partitioned across several databases in SQL DB such that different kinds of data reside on different databases.</span></span> <span data-ttu-id="7f09e-117">Niektóre operacje wymagają toodata zmian, który jest przechowywany w dwóch lub więcej baz danych.</span><span class="sxs-lookup"><span data-stu-id="7f09e-117">Some operations require changes toodata which is kept in two or more databases.</span></span> <span data-ttu-id="7f09e-118">Aplikacja Hello używa zmiany hello toocoordinate transakcji elastycznej bazy danych dla baz danych i upewnij się, niepodzielność.</span><span class="sxs-lookup"><span data-stu-id="7f09e-118">hello application uses elastic database transactions toocoordinate hello changes across databases and ensure atomicity.</span></span>
* <span data-ttu-id="7f09e-119">Aplikacje bazy danych podzielonej na platformie Azure: W tym scenariuszu hello warstwy danych użyto hello [biblioteki klienta elastycznej bazy danych](sql-database-elastic-database-client-library.md) lub toohorizontally dzielenia na fragmenty samoobsługowego partycji hello danych przez wiele baz danych w bazie danych SQL.</span><span class="sxs-lookup"><span data-stu-id="7f09e-119">Sharded database applications in Azure: With this scenario, hello data tier uses hello [Elastic Database client library](sql-database-elastic-database-client-library.md) or self-sharding toohorizontally partition hello data across many databases in SQL DB.</span></span> <span data-ttu-id="7f09e-120">Jeden przypadek użycia poświęcone jest hello potrzeby tooperform atomic zmiany dla podzielonej aplikacji wielodostępnej podczas zmiany span dzierżaw.</span><span class="sxs-lookup"><span data-stu-id="7f09e-120">One prominent use case is hello need tooperform atomic changes for a sharded multi-tenant application when changes span tenants.</span></span> <span data-ttu-id="7f09e-121">Traktować dla wystąpienia transfer z tooanother jednej dzierżawy, zarówno znajdującej się na różnych baz danych.</span><span class="sxs-lookup"><span data-stu-id="7f09e-121">Think for instance of a transfer from one tenant tooanother, both residing on different databases.</span></span> <span data-ttu-id="7f09e-122">Drugim przypadku jest wymagana pojemność tooaccommodate szczegółowych dzielenia na fragmenty dla dużych dzierżawy, który z kolei zwykle oznacza, że niektóre toostretch potrzeb operacji niepodzielnych w kilku bazy danych używane do hello sam dzierżawy.</span><span class="sxs-lookup"><span data-stu-id="7f09e-122">A second case is fine-grained sharding tooaccommodate capacity needs for a large tenant which in turn typically implies that some atomic operations needs toostretch across several databases used for hello same tenant.</span></span> <span data-ttu-id="7f09e-123">Trzeci zdarza się atomic tooreference danych, które są replikowane między bazami danych.</span><span class="sxs-lookup"><span data-stu-id="7f09e-123">A third case is atomic updates tooreference data that are replicated across databases.</span></span> <span data-ttu-id="7f09e-124">Niepodzielne, transakcyjne, operacje na te wiersze można teraz koordynowane przez wiele baz danych za pomocą podglądu hello.</span><span class="sxs-lookup"><span data-stu-id="7f09e-124">Atomic, transacted, operations along these lines can now be coordinated across several databases using hello preview.</span></span>
  <span data-ttu-id="7f09e-125">Transakcji elastycznej bazy danych użyj dwufazowe tooensure transakcji niepodzielność dla baz danych.</span><span class="sxs-lookup"><span data-stu-id="7f09e-125">Elastic database transactions use two-phase commit tooensure transaction atomicity across databases.</span></span> <span data-ttu-id="7f09e-126">Należy dobrze dla transakcji, które obejmują mniej niż 100 baz danych w czasie w ramach jednej transakcji.</span><span class="sxs-lookup"><span data-stu-id="7f09e-126">It is a good fit for transactions that involve less than 100 databases at a time within a single transaction.</span></span> <span data-ttu-id="7f09e-127">Ograniczenia te nie są wymuszane, ale jeden oczekiwać wydajności i odsetka pomyślnych dla toosuffer transakcji elastycznej bazy danych po przekroczeniu tych limitów.</span><span class="sxs-lookup"><span data-stu-id="7f09e-127">These limits are not enforced, but one should expect performance and success rates for elastic database transactions toosuffer when exceeding these limits.</span></span>

## <a name="installation-and-migration"></a><span data-ttu-id="7f09e-128">Instalacja i migracji</span><span class="sxs-lookup"><span data-stu-id="7f09e-128">Installation and migration</span></span>
<span data-ttu-id="7f09e-129">możliwości Hello transakcji elastycznej bazy danych w bazie danych SQL są realizowane za pośrednictwem aktualizacji bibliotek .NET toohello System.Data.dll i Biblioteka System.Transactions.dll.</span><span class="sxs-lookup"><span data-stu-id="7f09e-129">hello capabilities for elastic database transactions in SQL DB are provided through updates toohello .NET libraries System.Data.dll and System.Transactions.dll.</span></span> <span data-ttu-id="7f09e-130">Witaj biblioteki DLL upewnij się że dwufazowe jest używana w miarę potrzeby niepodzielność tooensure.</span><span class="sxs-lookup"><span data-stu-id="7f09e-130">hello DLLs ensure that two-phase commit is used where necessary tooensure atomicity.</span></span> <span data-ttu-id="7f09e-131">Zainstaluj toostart: tworzenie aplikacji przy użyciu transakcji elastycznej bazy danych, [.NET Framework 4.6.1](https://www.microsoft.com/download/details.aspx?id=49981) lub nowszym.</span><span class="sxs-lookup"><span data-stu-id="7f09e-131">toostart developing applications using elastic database transactions, install [.NET Framework 4.6.1](https://www.microsoft.com/download/details.aspx?id=49981) or a later version.</span></span> <span data-ttu-id="7f09e-132">Podczas uruchamiania w starszej wersji hello platformy .NET Framework, transakcje zakończy się niepowodzeniem transakcji rozproszonych tooa toopromote i zostanie zgłoszony wyjątek.</span><span class="sxs-lookup"><span data-stu-id="7f09e-132">When running on an earlier version of hello .NET framework, transactions will fail toopromote tooa distributed transaction and an exception will be raised.</span></span>

<span data-ttu-id="7f09e-133">Po instalacji można transakcji rozproszonych hello interfejsów API w System.Transactions z tooSQL połączenia bazy danych.</span><span class="sxs-lookup"><span data-stu-id="7f09e-133">After installation, you can use hello distributed transaction APIs in System.Transactions with connections tooSQL DB.</span></span> <span data-ttu-id="7f09e-134">Jeśli masz istniejące aplikacje usługi MSDTC za pomocą tych interfejsów API, po zainstalowaniu hello 4.6.1 po prostu odbudować istniejące aplikacje dla .NET 4.6 Framework.</span><span class="sxs-lookup"><span data-stu-id="7f09e-134">If you have existing MSDTC applications using these APIs, simply rebuild your existing applications for .NET 4.6 after installing hello 4.6.1 Framework.</span></span> <span data-ttu-id="7f09e-135">Projektów skierowania .NET 4.6, zostanie automatycznie korzystają z bibliotek DLL hello zaktualizowane z nowej wersji Framework hello i wywołania interfejsu API transakcji rozproszonych w połączeniu z tooSQL połączeń, które teraz powiedzie się bazy danych.</span><span class="sxs-lookup"><span data-stu-id="7f09e-135">If your projects target .NET 4.6, they will automatically use hello updated DLLs from hello new Framework version and distributed transaction API calls in combination with connections tooSQL DB will now succeed.</span></span>

<span data-ttu-id="7f09e-136">Należy pamiętać, że transakcji elastycznej bazy danych nie wymagają instalowania usługi MSDTC.</span><span class="sxs-lookup"><span data-stu-id="7f09e-136">Remember that elastic database transactions do not require installing MSDTC.</span></span> <span data-ttu-id="7f09e-137">Zamiast tego transakcji elastycznej bazy danych są zarządzane bezpośrednio przez i w obrębie bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="7f09e-137">Instead, elastic database transactions are directly managed by and within SQL DB.</span></span> <span data-ttu-id="7f09e-138">To znacznie upraszcza scenariusze chmury, ponieważ wdrożenie usługi MSDTC nie jest konieczne toouse rozproszonych transakcje z bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="7f09e-138">This significantly simplifies cloud scenarios since a deployment of MSDTC is not necessary toouse distributed transactions with SQL DB.</span></span> <span data-ttu-id="7f09e-139">4 z sekcji wyjaśniono szczegółowo w sposób toodeploy transakcji elastycznej bazy danych i hello wymagane .NET framework wraz z tooAzure aplikacji w chmurze.</span><span class="sxs-lookup"><span data-stu-id="7f09e-139">Section 4 explains in more detail how toodeploy elastic database transactions and hello required .NET framework together with your cloud applications tooAzure.</span></span>

## <a name="development-experience"></a><span data-ttu-id="7f09e-140">Środowisko programistyczne</span><span class="sxs-lookup"><span data-stu-id="7f09e-140">Development experience</span></span>
### <a name="multi-database-applications"></a><span data-ttu-id="7f09e-141">Aplikacje wielu baz danych</span><span class="sxs-lookup"><span data-stu-id="7f09e-141">Multi-database applications</span></span>
<span data-ttu-id="7f09e-142">Witaj następujący przykładowy kod używa hello znanych środowisko programowania z .NET System.Transactions.</span><span class="sxs-lookup"><span data-stu-id="7f09e-142">hello following sample code uses hello familiar programming experience with .NET System.Transactions.</span></span> <span data-ttu-id="7f09e-143">Witaj klasy elementu TransactionScope ustanawia transakcja otoczenia w .NET.</span><span class="sxs-lookup"><span data-stu-id="7f09e-143">hello TransactionScope class establishes an ambient transaction in .NET.</span></span> <span data-ttu-id="7f09e-144">("Transakcja otoczenia" jest taki, który znajduje się w bieżącym wątku hello). Wszystkie połączenia otwarty w hello TransactionScope uczestniczyć w hello transakcji.</span><span class="sxs-lookup"><span data-stu-id="7f09e-144">(An “ambient transaction” is one that lives in hello current thread.) All connections opened within hello TransactionScope participate in hello transaction.</span></span> <span data-ttu-id="7f09e-145">Jeśli udział różnych baz danych, transakcji hello jest automatycznie z podwyższonym poziomem uprawnień tooa distributed transaction.</span><span class="sxs-lookup"><span data-stu-id="7f09e-145">If different databases participate, hello transaction is automatically elevated tooa distributed transaction.</span></span> <span data-ttu-id="7f09e-146">Witaj wyniku transakcji hello jest kontrolowany przez ustawienie tooindicate toocomplete zakresu hello na zatwierdzenie.</span><span class="sxs-lookup"><span data-stu-id="7f09e-146">hello outcome of hello transaction is controlled by setting hello scope toocomplete tooindicate a commit.</span></span>

    using (var scope = new TransactionScope())
    {
        using (var conn1 = new SqlConnection(connStrDb1))
        {
            conn1.Open();
            SqlCommand cmd1 = conn1.CreateCommand();
            cmd1.CommandText = string.Format("insert into T1 values(1)");
            cmd1.ExecuteNonQuery();
        }

        using (var conn2 = new SqlConnection(connStrDb2))
        {
            conn2.Open();
            var cmd2 = conn2.CreateCommand();
            cmd2.CommandText = string.Format("insert into T2 values(2)");
            cmd2.ExecuteNonQuery();
        }

        scope.Complete();
    }

### <a name="sharded-database-applications"></a><span data-ttu-id="7f09e-147">Aplikacje baz danych podzielonej</span><span class="sxs-lookup"><span data-stu-id="7f09e-147">Sharded database applications</span></span>
<span data-ttu-id="7f09e-148">Transakcji elastycznej bazy danych dla bazy danych SQL obsługuje również koordynowanie transakcji rozproszonych, gdy używana jest metoda OpenConnectionForKey hello hello elastycznej bazy danych klienta biblioteki tooopen połączeń skalowanej danych warstwy.</span><span class="sxs-lookup"><span data-stu-id="7f09e-148">Elastic database transactions for SQL DB also support coordinating distributed transactions where you use hello OpenConnectionForKey method of hello elastic database client library tooopen connections for a scaled out data tier.</span></span> <span data-ttu-id="7f09e-149">Należy wziąć pod uwagę przypadkach, gdy muszą spójności transakcyjnej tooguarantee zmiany na kilka różnych dzielenia na fragmenty wartości klucza.</span><span class="sxs-lookup"><span data-stu-id="7f09e-149">Consider cases where you need tooguarantee transactional consistency for changes across several different sharding key values.</span></span> <span data-ttu-id="7f09e-150">Hosting wartości klucza różnych dzielenia na fragmenty hello odłamków toohello połączenia jest przeprowadzana przy użyciu OpenConnectionForKey.</span><span class="sxs-lookup"><span data-stu-id="7f09e-150">Connections toohello shards hosting hello different sharding key values are brokered using OpenConnectionForKey.</span></span> <span data-ttu-id="7f09e-151">W przypadku ogólnych hello hello połączenia może być odłamków toodifferent tak, aby zapewnienie transakcyjne gwarancje wymaga transakcji rozproszonej.</span><span class="sxs-lookup"><span data-stu-id="7f09e-151">In hello general case, hello connections can be toodifferent shards such that ensuring transactional guarantees requires a distributed transaction.</span></span> <span data-ttu-id="7f09e-152">powitania po przykładowy kod przedstawia tej metody.</span><span class="sxs-lookup"><span data-stu-id="7f09e-152">hello following code sample illustrates this approach.</span></span> <span data-ttu-id="7f09e-153">Przyjęto założenie, że zmienna o nazwie shardmap jest używane toorepresent niezależnego fragmentu mapowania z biblioteki klienta elastycznej bazy danych hello:</span><span class="sxs-lookup"><span data-stu-id="7f09e-153">It assumes that a variable called shardmap is used toorepresent a shard map from hello elastic database client library:</span></span>

    using (var scope = new TransactionScope())
    {
        using (var conn1 = shardmap.OpenConnectionForKey(tenantId1, credentialsStr))
        {
            conn1.Open();
            SqlCommand cmd1 = conn1.CreateCommand();
            cmd1.CommandText = string.Format("insert into T1 values(1)");
            cmd1.ExecuteNonQuery();
        }

        using (var conn2 = shardmap.OpenConnectionForKey(tenantId2, credentialsStr))
        {
            conn2.Open();
            var cmd2 = conn2.CreateCommand();
            cmd2.CommandText = string.Format("insert into T1 values(2)");
            cmd2.ExecuteNonQuery();
        }

        scope.Complete();
    }


## <a name="net-installation-for-azure-cloud-services"></a><span data-ttu-id="7f09e-154">Instalacja środowiska .NET dla usługi w chmurze Azure</span><span class="sxs-lookup"><span data-stu-id="7f09e-154">.NET installation for Azure Cloud Services</span></span>
<span data-ttu-id="7f09e-155">Platforma Azure udostępnia kilka ofert toohost aplikacji .NET.</span><span class="sxs-lookup"><span data-stu-id="7f09e-155">Azure provides several offerings toohost .NET applications.</span></span> <span data-ttu-id="7f09e-156">Porównanie różnych ofert hello jest dostępna w [porównanie usługi Azure App Service, usługi w chmurze i maszyn wirtualnych](../app-service-web/choose-web-site-cloud-service-vm.md).</span><span class="sxs-lookup"><span data-stu-id="7f09e-156">A comparison of hello different offerings is available in [Azure App Service, Cloud Services, and Virtual Machines comparison](../app-service-web/choose-web-site-cloud-service-vm.md).</span></span> <span data-ttu-id="7f09e-157">Witaj system operacyjny gościa oferty hello jest mniejszy niż .NET 4.6.1 wymagane dla transakcji elastycznej, należy najpierw too4.6.1 systemu operacyjnego gościa hello tooupgrade.</span><span class="sxs-lookup"><span data-stu-id="7f09e-157">If hello guest OS of hello offering is smaller than .NET 4.6.1 required for elastic transactions, you need tooupgrade hello guest OS too4.6.1.</span></span> 

<span data-ttu-id="7f09e-158">Usługi aplikacji Azure uaktualnia gościa toohello systemu operacyjnego nie są obecnie obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="7f09e-158">For Azure App Services, upgrades toohello guest OS are currently not supported.</span></span> <span data-ttu-id="7f09e-159">Maszyn wirtualnych platformy Azure, wystarczy zalogować się do hello maszyny Wirtualnej i uruchom Instalatora hello hello najnowsze .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="7f09e-159">For Azure Virtual Machines, simply log into hello VM and run hello installer for hello latest .NET framework.</span></span> <span data-ttu-id="7f09e-160">Usługi w chmurze Azure należy tooinclude instalacji hello nowszą wersją .NET na powitania uruchamianie zadania wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="7f09e-160">For Azure Cloud Services, you need tooinclude hello installation of a newer .NET version into hello startup tasks of your deployment.</span></span> <span data-ttu-id="7f09e-161">Witaj pojęcia i kroki opisano w [zainstalować .NET dla roli usługi chmury](../cloud-services/cloud-services-dotnet-install-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="7f09e-161">hello concepts and steps are documented in [Install .NET on a Cloud Service Role](../cloud-services/cloud-services-dotnet-install-dotnet.md).</span></span>  

<span data-ttu-id="7f09e-162">Należy pamiętać, że hello Instalatora dla platformy .NET 4.6.1 może wymagać więcej magazyn tymczasowy podczas hello uruchamianie procesu na usług w chmurze Azure niż hello Instalator programu .NET 4.6.</span><span class="sxs-lookup"><span data-stu-id="7f09e-162">Note that hello installer for .NET 4.6.1 may require more temporary storage during hello bootstrapping process on Azure cloud services than hello installer for .NET 4.6.</span></span> <span data-ttu-id="7f09e-163">tooensure instalacja zakończyła się pomyślnie, należy tooincrease tymczasowego magazynu dla usługi w chmurze platformy Azure w pliku ServiceDefinition.csdef w sekcji LocalResources hello i ustawienia środowiska hello uruchomienia zadania, jak pokazano poniżej hello przykład:</span><span class="sxs-lookup"><span data-stu-id="7f09e-163">tooensure a successful installation, you need tooincrease temporary storage for your Azure cloud service in your ServiceDefinition.csdef file in hello LocalResources section and hello environment settings of your startup task, as shown in hello following sample:</span></span>

    <LocalResources>
    ...
        <LocalStorage name="TEMP" sizeInMB="5000" cleanOnRoleRecycle="false" />
        <LocalStorage name="TMP" sizeInMB="5000" cleanOnRoleRecycle="false" />
    </LocalResources>
    <Startup>
        <Task commandLine="install.cmd" executionContext="elevated" taskType="simple">
            <Environment>
        ...
                <Variable name="TEMP">
                    <RoleInstanceValue xpath="/RoleEnvironment/CurrentInstance/LocalResources/LocalResource[@name='TEMP']/@path" />
                </Variable>
                <Variable name="TMP">
                    <RoleInstanceValue xpath="/RoleEnvironment/CurrentInstance/LocalResources/LocalResource[@name='TMP']/@path" />
                </Variable>
            </Environment>
        </Task>
    </Startup>

## <a name="transactions-across-multiple-servers"></a><span data-ttu-id="7f09e-164">Transakcje na wielu serwerach</span><span class="sxs-lookup"><span data-stu-id="7f09e-164">Transactions across multiple servers</span></span>
<span data-ttu-id="7f09e-165">Transakcji elastycznej bazy danych są obsługiwane na różnych serwerach logicznych w bazie danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="7f09e-165">Elastic database transactions are supported across different logical servers in Azure SQL Database.</span></span> <span data-ttu-id="7f09e-166">Gdy transakcje przekraczają granice serwer logiczny, serwerów hello muszą najpierw toobe wprowadzona w relacji wzajemnego komunikacji.</span><span class="sxs-lookup"><span data-stu-id="7f09e-166">When transactions cross logical server boundaries, hello participating servers first need toobe entered into a mutual communication relationship.</span></span> <span data-ttu-id="7f09e-167">Po ustanowieniu relacji komunikacji hello wszystkie bazy danych w żadnym powitalne dwa serwery mogą uczestniczyć w elastycznej transakcje z bazy danych z hello inny serwer.</span><span class="sxs-lookup"><span data-stu-id="7f09e-167">Once hello communication relationship has been established, any database in any of hello two servers can participate in elastic transactions with databases from hello other server.</span></span> <span data-ttu-id="7f09e-168">O transakcjach więcej niż dwa serwery logiczne relację komunikacji wymaga toobe w miejscu dla każdej pary serwerów logicznych.</span><span class="sxs-lookup"><span data-stu-id="7f09e-168">With transactions spanning more than two logical servers, a communication relationship needs toobe in place for any pair of logical servers.</span></span>

<span data-ttu-id="7f09e-169">Użyj hello następującego środowiska PowerShell polecenia cmdlet toomanage komunikacji między serwerami relacje dla transakcji elastycznej bazy danych:</span><span class="sxs-lookup"><span data-stu-id="7f09e-169">Use hello following PowerShell cmdlets toomanage cross-server communication relationships for elastic database transactions:</span></span>

* <span data-ttu-id="7f09e-170">**Nowy AzureRmSqlServerCommunicationLink**: Użyj tego polecenia cmdlet toocreate nowej relacji komunikacji między dwoma serwerami logicznych w bazie danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="7f09e-170">**New-AzureRmSqlServerCommunicationLink**: Use this cmdlet toocreate a new communication relationship between two logical servers in Azure SQL DB.</span></span> <span data-ttu-id="7f09e-171">Relacja Hello jest symetrycznego, co oznacza, że oba serwery mogą inicjować transakcji z hello inny serwer.</span><span class="sxs-lookup"><span data-stu-id="7f09e-171">hello relationship is symmetric which means both servers can initiate transactions with hello other server.</span></span>
* <span data-ttu-id="7f09e-172">**Get-AzureRmSqlServerCommunicationLink**: Użyj tego polecenia cmdlet tooretrieve istniejącą komunikację relacji i ich właściwości.</span><span class="sxs-lookup"><span data-stu-id="7f09e-172">**Get-AzureRmSqlServerCommunicationLink**: Use this cmdlet tooretrieve existing communication relationships and their properties.</span></span>
* <span data-ttu-id="7f09e-173">**Usuń AzureRmSqlServerCommunicationLink**: Użyj tego polecenia cmdlet tooremove istniejącej relacji komunikacji.</span><span class="sxs-lookup"><span data-stu-id="7f09e-173">**Remove-AzureRmSqlServerCommunicationLink**: Use this cmdlet tooremove an existing communication relationship.</span></span> 

## <a name="monitoring-transaction-status"></a><span data-ttu-id="7f09e-174">Monitorowanie stanu transakcji</span><span class="sxs-lookup"><span data-stu-id="7f09e-174">Monitoring transaction status</span></span>
<span data-ttu-id="7f09e-175">Użyj dynamicznych widoków zarządzania (widoków DMV) w bazy danych SQL toomonitor stan i postęp transakcji trwającą elastycznej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="7f09e-175">Use Dynamic Management Views (DMVs) in SQL DB toomonitor status and progress of your ongoing elastic database transactions.</span></span> <span data-ttu-id="7f09e-176">Wszystkie widoków DMV tootransactions powiązane są odpowiednie dla transakcji rozproszonych w bazie danych SQL.</span><span class="sxs-lookup"><span data-stu-id="7f09e-176">All DMVs related tootransactions are relevant for distributed transactions in SQL DB.</span></span> <span data-ttu-id="7f09e-177">Listę można znaleźć hello odpowiedniego z widoków DMV tutaj: [powiązane dynamicznych widoków zarządzania transakcji i funkcji (Transact-SQL)](https://msdn.microsoft.com/library/ms178621.aspx).</span><span class="sxs-lookup"><span data-stu-id="7f09e-177">You can find hello corresponding list of DMVs here: [Transaction Related Dynamic Management Views and Functions (Transact-SQL)](https://msdn.microsoft.com/library/ms178621.aspx).</span></span>

<span data-ttu-id="7f09e-178">Tych widoków DMV jest szczególnie przydatna:</span><span class="sxs-lookup"><span data-stu-id="7f09e-178">These DMVs are particularly useful:</span></span>

* <span data-ttu-id="7f09e-179">**sys.DM\_tran\_active\_transakcji**: Wyświetla listę obecnie aktywnych transakcji i ich stan.</span><span class="sxs-lookup"><span data-stu-id="7f09e-179">**sys.dm\_tran\_active\_transactions**: Lists currently active transactions and their status.</span></span> <span data-ttu-id="7f09e-180">Witaj kolumny UOW (jednostka pracy) może zidentyfikować hello podrzędnego innej transakcji, które należy toohello sama transakcja rozproszona.</span><span class="sxs-lookup"><span data-stu-id="7f09e-180">hello UOW (Unit Of Work) column can identify hello different child transactions that belong toohello same distributed transaction.</span></span> <span data-ttu-id="7f09e-181">Tę samą wartość UOW hello wszystkie transakcje hello przenoszenia jednej transakcji rozproszonej.</span><span class="sxs-lookup"><span data-stu-id="7f09e-181">All transactions within hello same distributed transaction carry hello same UOW value.</span></span> <span data-ttu-id="7f09e-182">Zobacz hello [dokumentacji DMV](https://msdn.microsoft.com/library/ms174302.aspx) więcej szczegółów.</span><span class="sxs-lookup"><span data-stu-id="7f09e-182">See hello [DMV documentation](https://msdn.microsoft.com/library/ms174302.aspx) for more details.</span></span>
* <span data-ttu-id="7f09e-183">**sys.DM\_tran\_bazy danych\_transakcji**: udostępnia dodatkowe informacje o transakcji, takich jak umieszczania hello transakcji w dzienniku hello.</span><span class="sxs-lookup"><span data-stu-id="7f09e-183">**sys.dm\_tran\_database\_transactions**: Provides additional information about transactions, such as placement of hello transaction in hello log.</span></span> <span data-ttu-id="7f09e-184">Zobacz hello [dokumentacji DMV](https://msdn.microsoft.com/library/ms186957.aspx) więcej szczegółów.</span><span class="sxs-lookup"><span data-stu-id="7f09e-184">See hello [DMV documentation](https://msdn.microsoft.com/library/ms186957.aspx) for more details.</span></span>
* <span data-ttu-id="7f09e-185">**sys.DM\_tran\_blokad**: zawiera informacje o hello blokad, które są obecnie przechowywane w bieżących transakcji.</span><span class="sxs-lookup"><span data-stu-id="7f09e-185">**sys.dm\_tran\_locks**: Provides information about hello locks that are currently held by ongoing transactions.</span></span> <span data-ttu-id="7f09e-186">Zobacz hello [dokumentacji DMV](https://msdn.microsoft.com/library/ms190345.aspx) więcej szczegółów.</span><span class="sxs-lookup"><span data-stu-id="7f09e-186">See hello [DMV documentation](https://msdn.microsoft.com/library/ms190345.aspx) for more details.</span></span>

## <a name="limitations"></a><span data-ttu-id="7f09e-187">Ograniczenia</span><span class="sxs-lookup"><span data-stu-id="7f09e-187">Limitations</span></span>
<span data-ttu-id="7f09e-188">Witaj obecnie następujące ograniczenia mają zastosowanie tooelastic transakcji bazy danych w bazie danych SQL:</span><span class="sxs-lookup"><span data-stu-id="7f09e-188">hello following limitations currently apply tooelastic database transactions in SQL DB:</span></span>

* <span data-ttu-id="7f09e-189">Obsługiwane są tylko transakcje dla baz danych w bazie danych SQL.</span><span class="sxs-lookup"><span data-stu-id="7f09e-189">Only transactions across databases in SQL DB are supported.</span></span> <span data-ttu-id="7f09e-190">Inne [X / Otwórz XA](https://en.wikipedia.org/wiki/X/Open_XA) dostawców zasobów i baz danych poza bazy danych SQL nie może brać udziału w transakcji elastycznej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="7f09e-190">Other [X/Open XA](https://en.wikipedia.org/wiki/X/Open_XA) resource providers and databases outside of SQL DB cannot participate in elastic database transactions.</span></span> <span data-ttu-id="7f09e-191">Oznacza to, że transakcji elastycznej bazy danych nie można rozciągnąć na lokalnie serwer SQL i baz danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="7f09e-191">That means that elastic database transactions cannot stretch across on premises SQL Server and Azure SQL Databases.</span></span> <span data-ttu-id="7f09e-192">Transakcje rozproszone lokalnie nadal toouse usługi MSDTC.</span><span class="sxs-lookup"><span data-stu-id="7f09e-192">For distributed transactions on premises, continue toouse MSDTC.</span></span> 
* <span data-ttu-id="7f09e-193">Tylko koordynowane klienta transakcje z aplikacji .NET są obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="7f09e-193">Only client-coordinated transactions from a .NET application are supported.</span></span> <span data-ttu-id="7f09e-194">Obsługa po stronie serwera T-SQL, takich jak rozpocząć transakcji ROZPROSZONYCH jest planowane, ale nie jest jeszcze dostępna.</span><span class="sxs-lookup"><span data-stu-id="7f09e-194">Server-side support for T-SQL such as BEGIN DISTRIBUTED TRANSACTION is planned, but not yet available.</span></span> 
* <span data-ttu-id="7f09e-195">Transakcje w usługach WCF nie są obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="7f09e-195">Transactions across WCF services are not supported.</span></span> <span data-ttu-id="7f09e-196">Na przykład masz metody usługi WCF, która wykonuje transakcji.</span><span class="sxs-lookup"><span data-stu-id="7f09e-196">For example, you have a WCF service method that executes a transaction.</span></span> <span data-ttu-id="7f09e-197">Otaczający wywołanie hello w zakresie transakcji nie powiedzie się jako [System.ServiceModel.ProtocolException](https://msdn.microsoft.com/library/system.servicemodel.protocolexception).</span><span class="sxs-lookup"><span data-stu-id="7f09e-197">Enclosing hello call within a transaction scope will fail as a [System.ServiceModel.ProtocolException](https://msdn.microsoft.com/library/system.servicemodel.protocolexception).</span></span>

## <a name="next-steps"></a><span data-ttu-id="7f09e-198">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="7f09e-198">Next steps</span></span>
<span data-ttu-id="7f09e-199">Odpowiedzi na pytania, proszę dotrzeć toous na powitania [forum bazy danych SQL](http://social.msdn.microsoft.com/forums/azure/home?forum=ssdsgetstarted) i funkcja żądań, dodaj je toohello [forum opinii bazy danych SQL](https://feedback.azure.com/forums/217321-sql-database/).</span><span class="sxs-lookup"><span data-stu-id="7f09e-199">For questions, please reach out toous on hello [SQL Database forum](http://social.msdn.microsoft.com/forums/azure/home?forum=ssdsgetstarted) and for feature requests, please add them toohello [SQL Database feedback forum](https://feedback.azure.com/forums/217321-sql-database/).</span></span>

<!--Image references-->
[1]: ./media/sql-database-elastic-transactions-overview/distributed-transactions.png



