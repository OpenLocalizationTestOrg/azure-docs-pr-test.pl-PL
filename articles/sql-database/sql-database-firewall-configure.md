---
title: "Reguły zapory bazy danych SQL Azure | Dokumentacja firmy Microsoft"
description: "Informacje o sposobie konfigurowania zapory bazy danych SQL do zarządzania dostępem za pomocą reguł zapory na poziomie serwera i bazy danych."
keywords: zapora bazy danych
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: cgronlun
tags: 
ms.assetid: ac57f84c-35c3-4975-9903-241c8059011e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 04/10/2017
ms.author: rickbyh
ms.openlocfilehash: 583c91376418d20d34db17d57d3fa14a1e71cd3b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="azure-sql-database-server-level-and-database-level-firewall-rules"></a><span data-ttu-id="06455-104">Reguły zapory poziomu serwera i bazy danych na poziomie bazy danych SQL Azure</span><span class="sxs-lookup"><span data-stu-id="06455-104">Azure SQL Database server-level and database-level firewall rules</span></span> 

<span data-ttu-id="06455-105">Usługa Microsoft Azure SQL Database udostępnia usługę relacyjnej bazy danych dla platformy Azure i innych aplikacji internetowych.</span><span class="sxs-lookup"><span data-stu-id="06455-105">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="06455-106">Aby chronić dane, zapora uniemożliwia wszelki dostęp do serwera bazy danych do momentu określenia komputerów, które mają uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="06455-106">To help protect your data, firewalls prevent all access to your database server until you specify which computers have permission.</span></span> <span data-ttu-id="06455-107">Zapora udziela dostępu do bazy danych na podstawie źródłowego adresu IP każdego żądania.</span><span class="sxs-lookup"><span data-stu-id="06455-107">The firewall grants access to databases based on the originating IP address of each request.</span></span>

## <a name="overview"></a><span data-ttu-id="06455-108">Omówienie</span><span class="sxs-lookup"><span data-stu-id="06455-108">Overview</span></span>

<span data-ttu-id="06455-109">Początkowo cały dostęp języka Transact-SQL do serwera Azure SQL jest blokowany przez zaporę.</span><span class="sxs-lookup"><span data-stu-id="06455-109">Initially, all Transact-SQL access to your Azure SQL server is blocked by the firewall.</span></span> <span data-ttu-id="06455-110">Aby rozpocząć korzystanie z serwera Azure SQL, należy określić co najmniej jedną regułę zapory poziomu serwera, które umożliwiają dostęp do serwera Azure SQL.</span><span class="sxs-lookup"><span data-stu-id="06455-110">To begin using your Azure SQL server, you must specify one or more server-level firewall rules that enable access to your Azure SQL server.</span></span> <span data-ttu-id="06455-111">Użyj reguł zapory do określenia zakresu dozwolonych adresów IP pochodzących z Internetu oraz możliwości podejmowania przez aplikacje platformy Azure prób połączenia się z serwerem Azure SQL.</span><span class="sxs-lookup"><span data-stu-id="06455-111">Use the firewall rules to specify which IP address ranges from the Internet are allowed, and whether Azure applications can attempt to connect to your Azure SQL server.</span></span>

<span data-ttu-id="06455-112">Aby selektywnie udzielić dostępu do tylko jednej z baz danych na serwerze Azure SQL, należy utworzyć regułę na poziomie bazy danych dla wymaganej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="06455-112">To selectively grant access to just one of the databases in your Azure SQL server, you must create a database-level rule for the required database.</span></span> <span data-ttu-id="06455-113">Określ zakres adresów IP dla reguły zapory bazy danych, który wykracza poza zakres adresów IP określony w regule zapory na poziomie serwera, i upewnij się, że adres IP klienta znajduje się w zakresie określonym w regule na poziomie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="06455-113">Specify an IP address range for the database firewall rule that is beyond the IP address range specified in the server-level firewall rule, and ensure that the IP address of the client falls in the range specified in the database-level rule.</span></span>

<span data-ttu-id="06455-114">Próby połączenia z Internetu i platformy Azure muszą najpierw przejść przez zaporę, zanim dotrą do serwera Azure SQL lub usługi SQL Database, jak pokazano na poniższym diagramie:</span><span class="sxs-lookup"><span data-stu-id="06455-114">Connection attempts from the Internet and Azure must first pass through the firewall before they can reach your Azure SQL server or SQL Database, as shown in the following diagram:</span></span>

   ![Diagram opisujący konfigurację zapory.][1]

* <span data-ttu-id="06455-116">**Reguły zapory na poziomie serwera:** te reguły umożliwiają klientom dostęp do całego serwera Azure SQL, to znaczy do wszystkich baz danych na tym samym serwerze logicznym.</span><span class="sxs-lookup"><span data-stu-id="06455-116">**Server-level firewall rules:** These rules enable clients to access your entire Azure SQL server, that is, all the databases within the same logical server.</span></span> <span data-ttu-id="06455-117">Reguły te są przechowywane w **głównej** bazie danych.</span><span class="sxs-lookup"><span data-stu-id="06455-117">These rules are stored in the **master** database.</span></span> <span data-ttu-id="06455-118">Reguły zapory na poziomie serwera można skonfigurować za pomocą portalu lub za pomocą instrukcji języka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="06455-118">Server-level firewall rules can be configured by using the portal or by using Transact-SQL statements.</span></span> <span data-ttu-id="06455-119">Aby utworzyć reguły zapory na poziomie serwera przy użyciu witryny Azure Portal lub programu PowerShell, musisz być właścicielem bądź współautorem subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="06455-119">To create server-level firewall rules using the Azure portal or PowerShell, you must be the subscription owner or a subscription contributor.</span></span> <span data-ttu-id="06455-120">Aby utworzyć regułę zapory na poziomie serwera przy użyciu języka Transact-SQL, musisz połączyć się z wystąpieniem usługi SQL Database za pomocą identyfikatora logowania podmiotu zabezpieczeń na poziomie serwera lub jako administrator usługi Azure Active Directory (co oznacza, że reguła zapory na poziomie serwera musi zostać pierwotnie utworzona przez użytkownika mającego uprawnienia na poziomie platformy Azure).</span><span class="sxs-lookup"><span data-stu-id="06455-120">To create a server-level firewall rule using Transact-SQL, you must connect to the SQL Database instance as the server-level principal login or the Azure Active Directory administrator (which means that a server-level firewall rule must first be created by a user with Azure-level permissions).</span></span>
* <span data-ttu-id="06455-121">**Reguły zapory poziomu bazy danych:** reguły te umożliwiają klientom dostęp do niektórych (bezpieczny) bazy danych, w tym samym serwerze logicznym.</span><span class="sxs-lookup"><span data-stu-id="06455-121">**Database-level firewall rules:** These rules enable clients to access certain (secure) databases within the same logical server.</span></span> <span data-ttu-id="06455-122">Można utworzyć zasady dla każdej bazy danych (w tym **wzorca** database0) i są przechowywane w poszczególnych bazach danych.</span><span class="sxs-lookup"><span data-stu-id="06455-122">You can create these rules for each database (including the **master** database0) and they are stored in the individual databases.</span></span> <span data-ttu-id="06455-123">Reguły zapory poziomu bazy danych może być skonfigurowany za pomocą instrukcji języka Transact-SQL lub tylko po skonfigurowaniu pierwszego zapory poziomu serwera.</span><span class="sxs-lookup"><span data-stu-id="06455-123">Database-level firewall rules can only be configured by using Transact-SQL statements and only after you have configured the first server-level firewall.</span></span> <span data-ttu-id="06455-124">Jeśli zakres adresów IP określony w regule zapory na poziomie bazy danych znajduje się poza zakresem określonym w regule zapory na poziomie serwera, dostęp do bazy danych mogą uzyskać tylko ci klienci, którzy mają adresy IP z zakresu ustalonego na poziomie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="06455-124">If you specify an IP address range in the database-level firewall rule that is outside the range specified in the server-level firewall rule, only those clients that have IP addresses in the database-level range can access the database.</span></span> <span data-ttu-id="06455-125">Dla bazy danych można określić maksymalnie 128 reguł zapory na poziomie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="06455-125">You can have a maximum of 128 database-level firewall rules for a database.</span></span> <span data-ttu-id="06455-126">Reguły zapory poziomu bazy danych dla baz danych master i użytkownika tylko można tworzyć i zarządzać nimi przy użyciu języka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="06455-126">Database-level firewall rules for master and user databases can only be created and managed through Transact-SQL.</span></span> <span data-ttu-id="06455-127">Aby uzyskać więcej informacji na temat konfigurowania reguł zapory na poziomie bazy danych, zobacz przykład później w tym artykuł i zobacz [sp_set_database_firewall_rule (baz danych SQL Azure)](https://msdn.microsoft.com/library/dn270010.aspx).</span><span class="sxs-lookup"><span data-stu-id="06455-127">For more information on configuring database-level firewall rules, see the example later in this article and see [sp_set_database_firewall_rule (Azure SQL Databases)](https://msdn.microsoft.com/library/dn270010.aspx).</span></span>

<span data-ttu-id="06455-128">**Zalecenie:** firma Microsoft zaleca korzystanie z reguł zapory na poziomie bazy danych zawsze wtedy, gdy jest to możliwe, aby zwiększyć poziom bezpieczeństwa i uczynić bazę danych bardziej przenośną.</span><span class="sxs-lookup"><span data-stu-id="06455-128">**Recommendation:** Microsoft recommends using database-level firewall rules whenever possible to enhance security and to make your database more portable.</span></span> <span data-ttu-id="06455-129">Reguły zapory na poziomie serwera powinny być używane dla administratorów i w przypadku, gdy wiele baz danych ma takie same wymagania dotyczące dostępu, a użytkownik nie chce poświęcać czasu na oddzielne konfigurowanie każdej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="06455-129">Use server-level firewall rules for administrators and when you have many databases that have the same access requirements and you don't want to spend time configuring each database individually.</span></span>

> [!Note]
> <span data-ttu-id="06455-130">Aby uzyskać informacje o przenośnych bazach danych w kontekście ciągłości działalności biznesowej, zobacz [Wymagania dotyczące uwierzytelniania dla odzyskiwania po awarii](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="06455-130">For information about portable databases in the context of business continuity, see [Authentication requirements for disaster recovery](sql-database-geo-replication-security-config.md).</span></span>
>

### <a name="connecting-from-the-internet"></a><span data-ttu-id="06455-131">Łączenie się z Internetu</span><span class="sxs-lookup"><span data-stu-id="06455-131">Connecting from the Internet</span></span>

<span data-ttu-id="06455-132">Gdy komputer próbuje połączyć się z Internetu z serwerem bazy danych, zapora najpierw sprawdza źródłowy adres IP żądania i porównuje go z regułami zapory na poziomie bazy danych, której dotyczy żądanie:</span><span class="sxs-lookup"><span data-stu-id="06455-132">When a computer attempts to connect to your database server from the Internet, the firewall first checks the originating IP address of the request against the database-level firewall rules, for the database that the connection is requesting:</span></span>

* <span data-ttu-id="06455-133">Jeśli adres IP żądania należy do jednego z zakresów określonych w regułach zapory na poziomie bazy danych, jest ustanawiane połączenie z bazą danych SQL Database zawierającą tę regułę.</span><span class="sxs-lookup"><span data-stu-id="06455-133">If the IP address of the request is within one of the ranges specified in the database-level firewall rules, the connection is granted to the SQL Database that contains the rule.</span></span>
* <span data-ttu-id="06455-134">Jeśli adres IP żądania nie należy do jednego z zakresów określonych w regułach zapory na poziomie bazy danych, sprawdzane są reguły zapory na poziomie serwera.</span><span class="sxs-lookup"><span data-stu-id="06455-134">If the IP address of the request is not within one of the ranges specified in the database-level firewall rule, the server-level firewall rules are checked.</span></span> <span data-ttu-id="06455-135">Jeśli adres IP żądania należy do jednego z zakresów określonych w regułach zapory na poziomie serwera, ustanawiane jest połączenie.</span><span class="sxs-lookup"><span data-stu-id="06455-135">If the IP address of the request is within one of the ranges specified in the server-level firewall rules, the connection is granted.</span></span> <span data-ttu-id="06455-136">Reguły zapory na poziomie serwera mają zastosowanie do wszystkich baz danych SQL na serwerze SQL platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="06455-136">Server-level firewall rules apply to all SQL databases on the Azure SQL server.</span></span>  
* <span data-ttu-id="06455-137">Jeśli adres IP żądania nie jest w zakresie określony w żadnym z reguły zapory poziomu serwera lub na poziomie bazy danych, żądanie połączenia zakończy się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="06455-137">If the IP address of the request is not within the ranges specified in any of the database-level or server-level firewall rules, the connection request fails.</span></span>

> [!NOTE]
> <span data-ttu-id="06455-138">Aby uzyskać dostęp do usługi Azure SQL Database z komputera lokalnego, upewnij się, że zapora w sieci i na komputerze lokalnym zezwala na komunikację wychodzącą na porcie TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="06455-138">To access Azure SQL Database from your local computer, ensure the firewall on your network and local computer allows outgoing communication on TCP port 1433.</span></span>
> 

### <a name="connecting-from-azure"></a><span data-ttu-id="06455-139">Łączenie z platformy Azure</span><span class="sxs-lookup"><span data-stu-id="06455-139">Connecting from Azure</span></span>
<span data-ttu-id="06455-140">Aby umożliwić aplikacjom z platformy Azure łączenie się z serwerem Azure SQL, należy włączyć połączenia platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="06455-140">To allow applications from Azure to connect to your Azure SQL server, Azure connections must be enabled.</span></span> <span data-ttu-id="06455-141">Gdy aplikacja platformy Azure próbuje połączyć się z serwerem bazy danych, zapora sprawdza, czy połączenia platformy Azure są dozwolone.</span><span class="sxs-lookup"><span data-stu-id="06455-141">When an application from Azure attempts to connect to your database server, the firewall verifies that Azure connections are allowed.</span></span> <span data-ttu-id="06455-142">Ustawienie zapory z początkowym i końcowym adresem równym 0.0.0.0 wskazuje, że te połączenia są dozwolone.</span><span class="sxs-lookup"><span data-stu-id="06455-142">A firewall setting with starting and ending address equal to 0.0.0.0 indicates these connections are allowed.</span></span> <span data-ttu-id="06455-143">Jeśli próba połączenia nie jest dozwolona, żądanie nie dociera do serwera usługi Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="06455-143">If the connection attempt is not allowed, the request does not reach the Azure SQL Database server.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="06455-144">Ta opcja konfiguruje zaporę w celu zezwalania na wszystkie połączenia z platformy Azure, w tym połączenia z subskrypcji innych klientów.</span><span class="sxs-lookup"><span data-stu-id="06455-144">This option configures the firewall to allow all connections from Azure including connections from the subscriptions of other customers.</span></span> <span data-ttu-id="06455-145">W przypadku wybrania tej opcji upewnij się, że uprawnienia logowania i użytkownika zezwalają na dostęp tylko uprawnionym użytkownikom.</span><span class="sxs-lookup"><span data-stu-id="06455-145">When selecting this option, make sure your login and user permissions limit access to only authorized users.</span></span>
> 

## <a name="creating-and-managing-firewall-rules"></a><span data-ttu-id="06455-146">Tworzenie i zarządzanie nimi reguł zapory</span><span class="sxs-lookup"><span data-stu-id="06455-146">Creating and managing firewall rules</span></span>
<span data-ttu-id="06455-147">Pierwsze ustawienie zapory na poziomie serwera można tworzyć przy użyciu [portalu Azure](https://portal.azure.com/) lub programowo przy użyciu [programu Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [interfejsu wiersza polecenia Azure](/cli/azure/sql/server/firewall-rule#create), lub [ Interfejs API REST](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span><span class="sxs-lookup"><span data-stu-id="06455-147">The first server-level firewall setting can be created using the [Azure portal](https://portal.azure.com/) or programmatically using [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), or the [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span></span> <span data-ttu-id="06455-148">Kolejne reguły zapory na poziomie serwera mogą być tworzone i zarządzane przy użyciu tych metod oraz za pomocą języka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="06455-148">Subsequent server-level firewall rules can be created and managed using these methods, and through Transact-SQL.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="06455-149">Reguły zapory poziomu bazy danych można tworzyć tylko i zarządzane przy użyciu języka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="06455-149">Database-level firewall rules can only be created and managed using Transact-SQL.</span></span> 
>

<span data-ttu-id="06455-150">Aby poprawić wydajność, reguły zapory na poziomie serwera są tymczasowo przechowywane w pamięci podręcznej na poziomie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="06455-150">To improve performance, server-level firewall rules are temporarily cached at the database level.</span></span> <span data-ttu-id="06455-151">Aby odświeżyć pamięć podręczną, zobacz [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span><span class="sxs-lookup"><span data-stu-id="06455-151">To refresh the cache, see [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span></span> 

> [!TIP]
> <span data-ttu-id="06455-152">Można użyć [SQL Database Auditing](sql-database-auditing.md) inspekcji zmian zapory poziomu serwera i poziom bazy danych.</span><span class="sxs-lookup"><span data-stu-id="06455-152">You can use [SQL Database Auditing](sql-database-auditing.md) to audit server-level and database-level firewall changes.</span></span>
>

### <a name="azure-portal"></a><span data-ttu-id="06455-153">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="06455-153">Azure portal</span></span>

<span data-ttu-id="06455-154">Aby skonfigurować regułę zapory poziomu serwera w portalu Azure, można albo przejść do strony Przegląd dla Twojej bazy danych Azure SQL lub strony Przegląd dla serwera logicznego bazy danych Azure.</span><span class="sxs-lookup"><span data-stu-id="06455-154">To set a server-level firewall rule in the Azure portal, you can either go to the Overview page for your Azure SQL database or the Overview page for your Azure Database logical server.</span></span>

> [!TIP]
> <span data-ttu-id="06455-155">Samouczek, zobacz [tworzenie bazy danych przy użyciu portalu Azure](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="06455-155">For a tutorial, see [Create a DB using the Azure portal](sql-database-get-started-portal.md).</span></span>
>

<span data-ttu-id="06455-156">**Na stronie Przegląd bazy danych**</span><span class="sxs-lookup"><span data-stu-id="06455-156">**From database overview page**</span></span>

1. <span data-ttu-id="06455-157">Aby ustawić regułę zapory poziomu serwera na stronie Przegląd bazy danych, kliknij przycisk **ustawić Zapora serwera** na pasku narzędzi, jak pokazano na poniższej ilustracji: **ustawienia zapory** strony serwera bazy danych SQL zostanie otwarty.</span><span class="sxs-lookup"><span data-stu-id="06455-157">To set a server-level firewall rule from the database overview page, click **Set server firewall** on the toolbar as shown in the following image: The **Firewall settings** page for the SQL Database server opens.</span></span>

      ![reguła zapory serwera](./media/sql-database-get-started-portal/server-firewall-rule.png) 

2. <span data-ttu-id="06455-159">Kliknij przycisk **Dodaj adres IP klienta** na pasku narzędzi, aby dodać adres IP komputera obecnie używasz a następnie kliknij przycisk **zapisać**.</span><span class="sxs-lookup"><span data-stu-id="06455-159">Click **Add client IP** on the toolbar to add the IP address of the computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="06455-160">Dla bieżącego adresu IP zostanie utworzona reguła zapory na poziomie serwera.</span><span class="sxs-lookup"><span data-stu-id="06455-160">A server-level firewall rule is created for your current IP address.</span></span>

      ![ustawianie reguły zapory serwera](./media/sql-database-get-started-portal/server-firewall-rule-set.png) 

<span data-ttu-id="06455-162">**Na stronie Przegląd serwera**</span><span class="sxs-lookup"><span data-stu-id="06455-162">**From server overview page**</span></span>

<span data-ttu-id="06455-163">Zostanie otwarta strona Omówienie serwera, wyświetlając nazwę FQDN serwera (takich jak **mynewserver20170403.database.windows.net**) i udostępnia opcje dla dalszej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="06455-163">The overview page for your server opens, showing you the fully qualified server name (such as **mynewserver20170403.database.windows.net**) and provides options for further configuration.</span></span>

1. <span data-ttu-id="06455-164">Aby ustawić regułę poziomu serwera na stronie Przegląd serwera, kliknij przycisk **zapory** w menu po lewej stronie w obszarze Ustawienia, jak pokazano na poniższej ilustracji:</span><span class="sxs-lookup"><span data-stu-id="06455-164">To set a server-level rule from server overview page, click **Firewall** in the left-hand menu under Settings as showed in the following image:</span></span> 

     ![Omówienie serwera logicznego](./media/sql-database-migrate-your-sql-server-database/logical-server-overview.png)

2. <span data-ttu-id="06455-166">Kliknij przycisk **Dodaj adres IP klienta** na pasku narzędzi, aby dodać adres IP komputera obecnie używasz a następnie kliknij przycisk **zapisać**.</span><span class="sxs-lookup"><span data-stu-id="06455-166">Click **Add client IP** on the toolbar to add the IP address of the computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="06455-167">Dla bieżącego adresu IP zostanie utworzona reguła zapory na poziomie serwera.</span><span class="sxs-lookup"><span data-stu-id="06455-167">A server-level firewall rule is created for your current IP address.</span></span>

     ![ustawianie reguły zapory serwera](./media/sql-database-migrate-your-sql-server-database/server-firewall-rule-set.png)

### <a name="transact-sql"></a><span data-ttu-id="06455-169">Język Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="06455-169">Transact-SQL</span></span>
| <span data-ttu-id="06455-170">Widok wykazu lub procedura składowana</span><span class="sxs-lookup"><span data-stu-id="06455-170">Catalog View or Stored Procedure</span></span> | <span data-ttu-id="06455-171">Poziom</span><span class="sxs-lookup"><span data-stu-id="06455-171">Level</span></span> | <span data-ttu-id="06455-172">Opis</span><span class="sxs-lookup"><span data-stu-id="06455-172">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="06455-173">sys.firewall_rules</span><span class="sxs-lookup"><span data-stu-id="06455-173">sys.firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269980.aspx) |<span data-ttu-id="06455-174">Serwer</span><span class="sxs-lookup"><span data-stu-id="06455-174">Server</span></span> |<span data-ttu-id="06455-175">Wyświetla bieżące reguły zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="06455-175">Displays the current server-level firewall rules</span></span> |
| [<span data-ttu-id="06455-176">sp_set_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="06455-176">sp_set_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270017.aspx) |<span data-ttu-id="06455-177">Serwer</span><span class="sxs-lookup"><span data-stu-id="06455-177">Server</span></span> |<span data-ttu-id="06455-178">Tworzy lub aktualizuje reguły zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="06455-178">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="06455-179">sp_delete_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="06455-179">sp_delete_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270024.aspx) |<span data-ttu-id="06455-180">Serwer</span><span class="sxs-lookup"><span data-stu-id="06455-180">Server</span></span> |<span data-ttu-id="06455-181">Usuwa reguły zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="06455-181">Removes server-level firewall rules</span></span> |
| [<span data-ttu-id="06455-182">sys.database_firewall_rules</span><span class="sxs-lookup"><span data-stu-id="06455-182">sys.database_firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269982.aspx) |<span data-ttu-id="06455-183">Database (Baza danych)</span><span class="sxs-lookup"><span data-stu-id="06455-183">Database</span></span> |<span data-ttu-id="06455-184">Wyświetla bieżące reguły zapory na poziomie bazy danych</span><span class="sxs-lookup"><span data-stu-id="06455-184">Displays the current database-level firewall rules</span></span> |
| [<span data-ttu-id="06455-185">sp_set_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="06455-185">sp_set_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270010.aspx) |<span data-ttu-id="06455-186">Database (Baza danych)</span><span class="sxs-lookup"><span data-stu-id="06455-186">Database</span></span> |<span data-ttu-id="06455-187">Tworzy lub aktualizuje reguły zapory na poziomie bazy danych</span><span class="sxs-lookup"><span data-stu-id="06455-187">Creates or updates the database-level firewall rules</span></span> |
| [<span data-ttu-id="06455-188">sp_delete_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="06455-188">sp_delete_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270030.aspx) |<span data-ttu-id="06455-189">Bazy danych</span><span class="sxs-lookup"><span data-stu-id="06455-189">Databases</span></span> |<span data-ttu-id="06455-190">Usuwa reguły zapory na poziomie bazy danych</span><span class="sxs-lookup"><span data-stu-id="06455-190">Removes database-level firewall rules</span></span> |


<span data-ttu-id="06455-191">Poniższe przykłady przejrzyj istniejące zasady, Włącz zakres adresów IP na serwerze Contoso i usuwa regułę zapory:</span><span class="sxs-lookup"><span data-stu-id="06455-191">The following examples review the existing rules, enable a range of IP addresses on the server Contoso, and deletes a firewall rule:</span></span>
   
```sql
SELECT * FROM sys.firewall_rules ORDER BY name;
```
  
<span data-ttu-id="06455-192">Następnie dodaj regułę zapory.</span><span class="sxs-lookup"><span data-stu-id="06455-192">Next, add a firewall rule.</span></span>
   
```sql
EXECUTE sp_set_firewall_rule @name = N'ContosoFirewallRule',
   @start_ip_address = '192.168.1.1', @end_ip_address = '192.168.1.10'
```

<span data-ttu-id="06455-193">Aby usunąć regułę zapory na poziomie serwera, wykonaj procedurę składowaną sp_delete_firewall_rule.</span><span class="sxs-lookup"><span data-stu-id="06455-193">To delete a server-level firewall rule, execute the sp_delete_firewall_rule stored procedure.</span></span> <span data-ttu-id="06455-194">Reguła o nazwie ContosoFirewallRule można znaleźć w następującym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="06455-194">The following example deletes the rule named ContosoFirewallRule:</span></span>
   
```sql
EXECUTE sp_delete_firewall_rule @name = N'ContosoFirewallRule'
```   

### <a name="azure-powershell"></a><span data-ttu-id="06455-195">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="06455-195">Azure PowerShell</span></span>
| <span data-ttu-id="06455-196">Polecenie cmdlet</span><span class="sxs-lookup"><span data-stu-id="06455-196">Cmdlet</span></span> | <span data-ttu-id="06455-197">Poziom</span><span class="sxs-lookup"><span data-stu-id="06455-197">Level</span></span> | <span data-ttu-id="06455-198">Opis</span><span class="sxs-lookup"><span data-stu-id="06455-198">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="06455-199">Get-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="06455-199">Get-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546731.aspx) |<span data-ttu-id="06455-200">Serwer</span><span class="sxs-lookup"><span data-stu-id="06455-200">Server</span></span> |<span data-ttu-id="06455-201">Zwraca bieżące reguły zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="06455-201">Returns the current server-level firewall rules</span></span> |
| [<span data-ttu-id="06455-202">New-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="06455-202">New-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546724.aspx) |<span data-ttu-id="06455-203">Serwer</span><span class="sxs-lookup"><span data-stu-id="06455-203">Server</span></span> |<span data-ttu-id="06455-204">Tworzy nową regułę zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="06455-204">Creates a new server-level firewall rule</span></span> |
| [<span data-ttu-id="06455-205">Set-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="06455-205">Set-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546739.aspx) |<span data-ttu-id="06455-206">Serwer</span><span class="sxs-lookup"><span data-stu-id="06455-206">Server</span></span> |<span data-ttu-id="06455-207">Aktualizuje właściwości istniejącej reguły zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="06455-207">Updates the properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="06455-208">Remove-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="06455-208">Remove-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546727.aspx) |<span data-ttu-id="06455-209">Serwer</span><span class="sxs-lookup"><span data-stu-id="06455-209">Server</span></span> |<span data-ttu-id="06455-210">Usuwa reguły zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="06455-210">Removes server-level firewall rules</span></span> |


<span data-ttu-id="06455-211">W poniższym przykładzie ustawiono regułę zapory poziomu serwera przy użyciu programu PowerShell:</span><span class="sxs-lookup"><span data-stu-id="06455-211">The following example sets a server-level firewall rule using PowerShell:</span></span>

```powershell
New-AzureRmSqlServerFirewallRule -ResourceGroupName "myResourceGroup" `
    -ServerName $servername `
    -FirewallRuleName "AllowSome" -StartIpAddress "0.0.0.0" -EndIpAddress "0.0.0.0"
```

> [!TIP]
> <span data-ttu-id="06455-212">Przykłady programu PowerShell w kontekście tego szybki start, zobacz [utworzyć DB - PowerShell](sql-database-get-started-powershell.md) i [utworzyć pojedynczą bazę danych i skonfigurować regułę zapory przy użyciu programu PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="06455-212">For PowerShell examples in the context of a quick start, see [Create DB - PowerShell](sql-database-get-started-powershell.md) and [Create a single database and configure a firewall rule using PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span></span>
>

### <a name="azure-cli"></a><span data-ttu-id="06455-213">Interfejs wiersza polecenia platformy Azure</span><span class="sxs-lookup"><span data-stu-id="06455-213">Azure CLI</span></span>
| <span data-ttu-id="06455-214">Polecenie cmdlet</span><span class="sxs-lookup"><span data-stu-id="06455-214">Cmdlet</span></span> | <span data-ttu-id="06455-215">Poziom</span><span class="sxs-lookup"><span data-stu-id="06455-215">Level</span></span> | <span data-ttu-id="06455-216">Opis</span><span class="sxs-lookup"><span data-stu-id="06455-216">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="06455-217">Utwórz zapory serwera sql az</span><span class="sxs-lookup"><span data-stu-id="06455-217">az sql server firewall create</span></span>](/cli/azure/sql/server/firewall-rule#create) | <span data-ttu-id="06455-218">Tworzy regułę zapory zezwalają na dostęp do wszystkich baz danych na serwerze z wprowadzony zakres adresów IP.</span><span class="sxs-lookup"><span data-stu-id="06455-218">Creates a firewall rule to allow access to all SQL Databases on the server from the entered IP address range.</span></span>|
| [<span data-ttu-id="06455-219">Usuń zapory serwera sql az</span><span class="sxs-lookup"><span data-stu-id="06455-219">az sql server firewall delete</span></span>](/cli/azure/sql/server/firewall-rule#delete)| <span data-ttu-id="06455-220">Usuwa regułę zapory.</span><span class="sxs-lookup"><span data-stu-id="06455-220">Deletes a firewall rule.</span></span>|
| [<span data-ttu-id="06455-221">Lista zapory serwera sql az</span><span class="sxs-lookup"><span data-stu-id="06455-221">az sql server firewall list</span></span>](/cli/azure/sql/server/firewall-rule#list)| <span data-ttu-id="06455-222">Wyświetla listę reguł zapory.</span><span class="sxs-lookup"><span data-stu-id="06455-222">Lists the firewall rules.</span></span>|
| [<span data-ttu-id="06455-223">Pokaż reguły zapory serwera sql az</span><span class="sxs-lookup"><span data-stu-id="06455-223">az sql server firewall rule show</span></span>](/cli/azure/sql/server/firewall-rule#show)| <span data-ttu-id="06455-224">Przedstawia szczegóły reguły zapory.</span><span class="sxs-lookup"><span data-stu-id="06455-224">Shows the details of a firewall rule.</span></span>|
| [<span data-ttu-id="06455-225">AX aktualizacja reguły zapory programu sql server</span><span class="sxs-lookup"><span data-stu-id="06455-225">ax sql server firewall rule update</span></span>](/cli/azure/sql/server/firewall-rule#update)| <span data-ttu-id="06455-226">Aktualizuje regułę zapory.</span><span class="sxs-lookup"><span data-stu-id="06455-226">Updates a firewall rule.</span></span>

<span data-ttu-id="06455-227">W poniższym przykładzie ustawiono regułę zapory poziomu serwera przy użyciu wiersza polecenia platformy Azure:</span><span class="sxs-lookup"><span data-stu-id="06455-227">The following example sets a server-level firewall rule using the Azure CLI:</span></span> 

```azurecli-interactive
az sql server firewall-rule create --resource-group myResourceGroup --server $servername \
    -n AllowYourIp --start-ip-address 0.0.0.0 --end-ip-address 0.0.0.0
```

> [!TIP]
> <span data-ttu-id="06455-228">Przykład wiersza polecenia platformy Azure w ramach szybkiego startu, zobacz [utworzyć DDB - Azure CLI](sql-database-get-started-cli.md) i [utworzyć pojedynczą bazę danych i skonfigurować regułę zapory przy użyciu wiersza polecenia platformy Azure](scripts/sql-database-create-and-configure-database-cli.md)</span><span class="sxs-lookup"><span data-stu-id="06455-228">For an Azure CLI example in the context of a quick start, see [Create DDB - Azure CLI](sql-database-get-started-cli.md) and [Create a single database and configure a firewall rule using the Azure CLI](scripts/sql-database-create-and-configure-database-cli.md)</span></span>
>

### <a name="rest-api"></a><span data-ttu-id="06455-229">Interfejs API REST</span><span class="sxs-lookup"><span data-stu-id="06455-229">REST API</span></span>
| <span data-ttu-id="06455-230">Interfejs API</span><span class="sxs-lookup"><span data-stu-id="06455-230">API</span></span> | <span data-ttu-id="06455-231">Poziom</span><span class="sxs-lookup"><span data-stu-id="06455-231">Level</span></span> | <span data-ttu-id="06455-232">Opis</span><span class="sxs-lookup"><span data-stu-id="06455-232">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="06455-233">[List Firewall Rules](https://msdn.microsoft.com/library/azure/dn505715.aspx) (Lista reguł zapory)</span><span class="sxs-lookup"><span data-stu-id="06455-233">[List Firewall Rules](https://msdn.microsoft.com/library/azure/dn505715.aspx)</span></span> |<span data-ttu-id="06455-234">Serwer</span><span class="sxs-lookup"><span data-stu-id="06455-234">Server</span></span> |<span data-ttu-id="06455-235">Wyświetla bieżące reguły zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="06455-235">Displays the current server-level firewall rules</span></span> |
| <span data-ttu-id="06455-236">[Create Firewall Rule](https://msdn.microsoft.com/library/azure/dn505712.aspx) (Tworzenie reguły zapory)</span><span class="sxs-lookup"><span data-stu-id="06455-236">[Create Firewall Rule](https://msdn.microsoft.com/library/azure/dn505712.aspx)</span></span> |<span data-ttu-id="06455-237">Serwer</span><span class="sxs-lookup"><span data-stu-id="06455-237">Server</span></span> |<span data-ttu-id="06455-238">Tworzy lub aktualizuje reguły zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="06455-238">Creates or updates server-level firewall rules</span></span> |
| <span data-ttu-id="06455-239">[Set Firewall Rule](https://msdn.microsoft.com/library/azure/dn505707.aspx) (Ustawianie reguły zapory)</span><span class="sxs-lookup"><span data-stu-id="06455-239">[Set Firewall Rule](https://msdn.microsoft.com/library/azure/dn505707.aspx)</span></span> |<span data-ttu-id="06455-240">Serwer</span><span class="sxs-lookup"><span data-stu-id="06455-240">Server</span></span> |<span data-ttu-id="06455-241">Aktualizuje właściwości istniejącej reguły zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="06455-241">Updates the properties of an existing server-level firewall rule</span></span> |
| <span data-ttu-id="06455-242">[Delete Firewall Rule](https://msdn.microsoft.com/library/azure/dn505706.aspx) (Usuwanie reguły zapory)</span><span class="sxs-lookup"><span data-stu-id="06455-242">[Delete Firewall Rule](https://msdn.microsoft.com/library/azure/dn505706.aspx)</span></span> |<span data-ttu-id="06455-243">Serwer</span><span class="sxs-lookup"><span data-stu-id="06455-243">Server</span></span> |<span data-ttu-id="06455-244">Usuwa reguły zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="06455-244">Removes server-level firewall rules</span></span> |

## <a name="server-level-firewall-rule-versus-a-database-level-firewall-rule"></a><span data-ttu-id="06455-245">Reguły zapory poziomu serwera i regułę zapory poziomu bazy danych</span><span class="sxs-lookup"><span data-stu-id="06455-245">Server-level firewall rule versus a database-level firewall rule</span></span>
<span data-ttu-id="06455-246">Q.</span><span class="sxs-lookup"><span data-stu-id="06455-246">Q.</span></span> <span data-ttu-id="06455-247">Użytkownicy z jednej bazy danych należy całkowicie odizolowane od innej bazy danych?</span><span class="sxs-lookup"><span data-stu-id="06455-247">Should users of one database be fully isolated from another database?</span></span>   
  <span data-ttu-id="06455-248">Jeśli tak, należy przyznać dostęp przy użyciu reguł zapory na poziomie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="06455-248">If yes, grant access using database-level firewall rules.</span></span> <span data-ttu-id="06455-249">Dzięki temu można uniknąć przy użyciu reguły zapory poziomu serwera, które zezwalają na dostęp przez zaporę do wszystkich baz danych, zmniejszenie głębokości dalszej.</span><span class="sxs-lookup"><span data-stu-id="06455-249">This avoids using server-level firewall rules, which permit access through the firewall to all databases, reducing the depth of your defenses.</span></span>   
 
<span data-ttu-id="06455-250">Q.</span><span class="sxs-lookup"><span data-stu-id="06455-250">Q.</span></span> <span data-ttu-id="06455-251">Czy użytkownicy o adresie IP mają dostęp do wszystkich baz danych?</span><span class="sxs-lookup"><span data-stu-id="06455-251">Do users at the IP address’s need access to all databases?</span></span>   
  <span data-ttu-id="06455-252">Aby zmniejszyć liczbę razy, należy skonfigurować reguły zapory, należy użyć reguły zapory poziomu serwera.</span><span class="sxs-lookup"><span data-stu-id="06455-252">Use server-level firewall rules to reduce the number of times you must configure firewall rules.</span></span>   

<span data-ttu-id="06455-253">Q.</span><span class="sxs-lookup"><span data-stu-id="06455-253">Q.</span></span> <span data-ttu-id="06455-254">Osobie lub zespołowi Konfigurowanie reguł zapory tylko ma dostęp za pośrednictwem portalu Azure, programu PowerShell lub interfejsu API REST?</span><span class="sxs-lookup"><span data-stu-id="06455-254">Does the person or team configuring the firewall rules only have access through the Azure portal, PowerShell, or the REST API?</span></span>   
  <span data-ttu-id="06455-255">Należy użyć reguły zapory poziomu serwera.</span><span class="sxs-lookup"><span data-stu-id="06455-255">You must use server-level firewall rules.</span></span> <span data-ttu-id="06455-256">Reguły zapory poziomu bazy danych można skonfigurować tylko za pomocą języka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="06455-256">Database-level firewall rules can only be configured using Transact-SQL.</span></span>  

<span data-ttu-id="06455-257">Q.</span><span class="sxs-lookup"><span data-stu-id="06455-257">Q.</span></span> <span data-ttu-id="06455-258">Jest osobie lub zespołowi Konfigurowanie reguł zapory zabroniony z konieczności wysokiego poziomu uprawnień na poziomie bazy danych?</span><span class="sxs-lookup"><span data-stu-id="06455-258">Is the person or team configuring the firewall rules prohibited from having high-level permission at the database level?</span></span>   
  <span data-ttu-id="06455-259">Użyj reguł zapory na poziomie serwera.</span><span class="sxs-lookup"><span data-stu-id="06455-259">Use server-level firewall rules.</span></span> <span data-ttu-id="06455-260">Konfigurowanie reguł zapory na poziomie bazy danych przy użyciu języka Transact-SQL, wymaga co najmniej `CONTROL DATABASE` uprawnienia na poziomie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="06455-260">Configuring database-level firewall rules using Transact-SQL, requires at least `CONTROL DATABASE` permission at the database level.</span></span>  

<span data-ttu-id="06455-261">Q.</span><span class="sxs-lookup"><span data-stu-id="06455-261">Q.</span></span> <span data-ttu-id="06455-262">Jest osobie lub zespołowi inspekcję reguły zapory i konfigurowanie centralne zarządzanie reguły zapory dla wielu (prawdopodobnie 100) baz danych?</span><span class="sxs-lookup"><span data-stu-id="06455-262">Is the person or team configuring or auditing the firewall rules, centrally managing firewall rules for many (perhaps 100s) of databases?</span></span>   
  <span data-ttu-id="06455-263">Tego wyboru zależy od środowiska i potrzeb użytkowników.</span><span class="sxs-lookup"><span data-stu-id="06455-263">This selection depends upon your needs and environment.</span></span> <span data-ttu-id="06455-264">Reguły zapory poziomu serwera może być łatwiejsze do skonfigurowania, ale skryptów można skonfigurować zasady na poziomie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="06455-264">Server-level firewall rules might be easier to configure, but scripting can configure rules at the database-level.</span></span> <span data-ttu-id="06455-265">A nawet wtedy, gdy używasz reguły zapory poziomu serwera, może być konieczne inspekcji reguły zapory bazy danych, aby sprawdzić, czy użytkownicy z `CONTROL` uprawnień w bazie danych zostały utworzone reguły zapory poziomu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="06455-265">And even if you use server-level firewall rules, you might need to audit the database-firewall rules, to see if users with `CONTROL` permission on the database have created database-level firewall rules.</span></span>   

<span data-ttu-id="06455-266">Q.</span><span class="sxs-lookup"><span data-stu-id="06455-266">Q.</span></span> <span data-ttu-id="06455-267">Czy można używać różnych obie reguły zapory poziomu serwera i poziom bazy danych?</span><span class="sxs-lookup"><span data-stu-id="06455-267">Can I use a mix of both server-level and database-level firewall rules?</span></span>   
  <span data-ttu-id="06455-268">Tak.</span><span class="sxs-lookup"><span data-stu-id="06455-268">Yes.</span></span> <span data-ttu-id="06455-269">W przypadku niektórych użytkowników, takich jak Administratorzy mogą wymagać reguły zapory poziomu serwera.</span><span class="sxs-lookup"><span data-stu-id="06455-269">Some users, such as administrators might need server-level firewall rules.</span></span> <span data-ttu-id="06455-270">Innych użytkowników, takich jak użytkownicy aplikacji bazy danych, może być konieczne reguły zapory poziomu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="06455-270">Other users, such as users of a database application, might need database-level firewall rules.</span></span>   

## <a name="troubleshooting-the-database-firewall"></a><span data-ttu-id="06455-271">Rozwiązywanie problemów z zaporą bazy danych</span><span class="sxs-lookup"><span data-stu-id="06455-271">Troubleshooting the database firewall</span></span>
<span data-ttu-id="06455-272">Jeśli dostęp do usługi Microsoft Azure SQL Database nie działa zgodnie z oczekiwaniami, należy rozważyć następujące kwestie:</span><span class="sxs-lookup"><span data-stu-id="06455-272">Consider the following points when access to the Microsoft Azure SQL Database service does not behave as you expect:</span></span>

* <span data-ttu-id="06455-273">**Konfiguracja lokalnej zapory:** aby komputer mógł uzyskać dostęp do usługi Azure SQL Database, może być konieczne utworzenie wyjątku zapory na komputerze dla portu TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="06455-273">**Local firewall configuration:** Before your computer can access Azure SQL Database, you may need to create a firewall exception on your computer for TCP port 1433.</span></span> <span data-ttu-id="06455-274">W przypadku nawiązywania połączeń wewnątrz granic chmury Azure może być konieczne otwarcie dodatkowych portów.</span><span class="sxs-lookup"><span data-stu-id="06455-274">If you are making connections inside the Azure cloud boundary, you may have to open additional ports.</span></span> <span data-ttu-id="06455-275">Aby uzyskać więcej informacji, zobacz **bazy danych SQL: poza vs wewnątrz** sekcji [porty inne niż 1433 ADO.NET 4.5 i bazy danych SQL](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="06455-275">For more information, see the **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="06455-276">**Translator adresów sieciowych (NAT):** z powodu translatora adresów sieciowych (NAT), adres IP używany przez komputer do połączenia z usługą Azure SQL Database może być inny niż adres IP wyświetlany w ustawieniach konfiguracji adresu IP komputera.</span><span class="sxs-lookup"><span data-stu-id="06455-276">**Network address translation (NAT):** Due to NAT, the IP address used by your computer to connect to Azure SQL Database may be different than the IP address shown in your computer IP configuration settings.</span></span> <span data-ttu-id="06455-277">Aby wyświetlić adres IP używany przez komputer do łączenia się z platformą Azure, zaloguj się do portalu i przejdź na kartę **Konfigurowanie** na serwerze, który hostuje bazę danych.</span><span class="sxs-lookup"><span data-stu-id="06455-277">To view the IP address your computer is using to connect to Azure, log in to the portal and navigate to the **Configure** tab on the server that hosts your database.</span></span> <span data-ttu-id="06455-278">W sekcji **Dozwolone adresy IP** wyświetlany jest **bieżący adres IP klienta**.</span><span class="sxs-lookup"><span data-stu-id="06455-278">Under the **Allowed IP Addresses** section, the **Current Client IP Address** is displayed.</span></span> <span data-ttu-id="06455-279">Kliknij przycisk **Dodaj** do listy **Dozwolone adresy IP**, aby zezwolić temu komputerowi na dostęp do serwera.</span><span class="sxs-lookup"><span data-stu-id="06455-279">Click **Add** to the **Allowed IP Addresses** to allow this computer to access the server.</span></span>
* <span data-ttu-id="06455-280">**Zmiany na liście dozwolonych jeszcze nie zaczęły obowiązywać:** może wystąpić do pięciu minut opóźnienia, zanim zmiany konfiguracji zapory usługi Azure SQL Database zostaną zastosowane.</span><span class="sxs-lookup"><span data-stu-id="06455-280">**Changes to the allow list have not taken effect yet:** There may be as much as a five-minute delay for changes to the Azure SQL Database firewall configuration to take effect.</span></span>
* <span data-ttu-id="06455-281">**Logowanie nie ma autoryzacji lub użyto nieprawidłowego hasła:** jeśli logowanie nie ma uprawnień na serwerze usługi Azure SQL Database lub użyte hasło jest nieprawidłowe, nastąpi odmowa połączenia z serwerem usługi Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="06455-281">**The login is not authorized or an incorrect password was used:** If a login does not have permissions on the Azure SQL Database server or the password used is incorrect, the connection to the Azure SQL Database server is denied.</span></span> <span data-ttu-id="06455-282">Utworzenie ustawień zapory zapewnia klientom jedynie możliwość próby nawiązania połączenia z serwerem, ale każdy klient musi podać niezbędne poświadczenia zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="06455-282">Creating a firewall setting only provides clients with an opportunity to attempt connecting to your server; each client must provide the necessary security credentials.</span></span> <span data-ttu-id="06455-283">Aby uzyskać więcej informacji na temat przygotowywania logowań, zobacz sekcję Zarządzanie bazami danych, logowaniami i użytkownikami w usłudze Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="06455-283">For more information about preparing logins, see Managing Databases, Logins, and Users in Azure SQL Database.</span></span>
* <span data-ttu-id="06455-284">**Dynamiczny adres IP:** jeśli używane jest połączenie internetowe za pomocą dynamicznego adresowania IP i występują problemy z przejściem przez zaporę, można wypróbować jedno z poniższych rozwiązań:</span><span class="sxs-lookup"><span data-stu-id="06455-284">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through the firewall, you could try one of the following solutions:</span></span>
  
  * <span data-ttu-id="06455-285">Poproś usługodawcę internetowego (ISP) o zakres adresów IP przypisany do komputerów klienckich uzyskujących dostęp do serwera usługi Azure SQL Database, a następnie dodaj ten zakres adresów IP jako regułę zapory.</span><span class="sxs-lookup"><span data-stu-id="06455-285">Ask your Internet Service Provider (ISP) for the IP address range assigned to your client computers that access the Azure SQL Database server, and then add the IP address range as a firewall rule.</span></span>
  * <span data-ttu-id="06455-286">Pobierz statyczne adresy IP dla komputerów klienckich, a następnie dodaj te adresy IP jako reguły zapory.</span><span class="sxs-lookup"><span data-stu-id="06455-286">Get static IP addressing instead for your client computers, and then add the IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="06455-287">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="06455-287">Next steps</span></span>

- <span data-ttu-id="06455-288">Aby uzyskać szybki start dotyczące tworzenia bazy danych i regułę zapory poziomu serwera, zobacz [tworzenie bazy danych Azure SQL](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="06455-288">For a quick start on creating a database and a server-level firewall rule, see [Create an Azure SQL database](sql-database-get-started-portal.md).</span></span>
- <span data-ttu-id="06455-289">Aby uzyskać pomoc podczas łączenia się z bazą danych Azure SQL z aplikacji innych firm lub aplikacji typu open source, zobacz [Client quick-start code samples to SQL Database](https://msdn.microsoft.com/library/azure/ee336282.aspx) (Przykłady kodu umożliwiające szybki start dla klienta usługi SQL Database).</span><span class="sxs-lookup"><span data-stu-id="06455-289">For help in connecting to an Azure SQL database from open source or third-party applications, see [Client quick-start code samples to SQL Database](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span></span>
- <span data-ttu-id="06455-290">Informacje dotyczące dodatkowych portów, które mogą wymagać, aby otworzyć znajdują się w temacie **bazy danych SQL: poza vs wewnątrz** sekcji [porty inne niż 1433 ADO.NET 4.5 i bazy danych SQL](sql-database-develop-direct-route-ports-adonet-v12.md)</span><span class="sxs-lookup"><span data-stu-id="06455-290">For information on additional ports that you may need to open, see the **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md)</span></span>
- <span data-ttu-id="06455-291">Omówienie zabezpieczeń usługi Azure SQL Database, zobacz [zabezpieczania bazy danych](sql-database-security-overview.md)</span><span class="sxs-lookup"><span data-stu-id="06455-291">For an overview of Azure SQL Database security, see [Securing your database](sql-database-security-overview.md)</span></span>

<!--Image references-->
[1]: ./media/sql-database-firewall-configure/sqldb-firewall-1.png
