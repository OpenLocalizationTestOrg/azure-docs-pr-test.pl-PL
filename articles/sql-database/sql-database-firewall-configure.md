---
title: "reguły zapory bazy danych SQL aaaAzure | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak tooconfigure SQL bazy danych zapory dostęp toomanage reguły zapory poziomu serwera i poziom bazy danych."
keywords: zapora bazy danych
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: cgronlun
tags: 
ms.assetid: ac57f84c-35c3-4975-9903-241c8059011e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 04/10/2017
ms.author: rickbyh
ms.openlocfilehash: 6a8cdf629d0d0e55421a5e9f9b894a21371be568
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-server-level-and-database-level-firewall-rules"></a><span data-ttu-id="163c9-104">Reguły zapory poziomu serwera i bazy danych na poziomie bazy danych SQL Azure</span><span class="sxs-lookup"><span data-stu-id="163c9-104">Azure SQL Database server-level and database-level firewall rules</span></span> 

<span data-ttu-id="163c9-105">Usługa Microsoft Azure SQL Database udostępnia usługę relacyjnej bazy danych dla platformy Azure i innych aplikacji internetowych.</span><span class="sxs-lookup"><span data-stu-id="163c9-105">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="163c9-106">toohelp chronić dane, zapór zapobiec wszystkich serwera bazy danych tooyour dostępu do chwili określenia komputery, które ma uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="163c9-106">toohelp protect your data, firewalls prevent all access tooyour database server until you specify which computers have permission.</span></span> <span data-ttu-id="163c9-107">Zapora Hello przyznaje toodatabases dostępu oparte na powitania pochodzące z adresu IP dla każdego żądania.</span><span class="sxs-lookup"><span data-stu-id="163c9-107">hello firewall grants access toodatabases based on hello originating IP address of each request.</span></span>

## <a name="overview"></a><span data-ttu-id="163c9-108">Omówienie</span><span class="sxs-lookup"><span data-stu-id="163c9-108">Overview</span></span>

<span data-ttu-id="163c9-109">Początkowo wszystkie języka Transact-SQL dostępu tooyour Azure SQL server jest blokowany przez zaporę hello.</span><span class="sxs-lookup"><span data-stu-id="163c9-109">Initially, all Transact-SQL access tooyour Azure SQL server is blocked by hello firewall.</span></span> <span data-ttu-id="163c9-110">toobegin przy użyciu serwera Azure SQL, należy określić co najmniej jedną regułę zapory poziomu serwera umożliwiających dostęp tooyour Azure SQL server.</span><span class="sxs-lookup"><span data-stu-id="163c9-110">toobegin using your Azure SQL server, you must specify one or more server-level firewall rules that enable access tooyour Azure SQL server.</span></span> <span data-ttu-id="163c9-111">Użyj toospecify reguły zapory hello, który adres IP od hello są dozwolone przez Internet, i czy aplikacjami platformy Azure może próbować tooconnect tooyour Azure SQL server.</span><span class="sxs-lookup"><span data-stu-id="163c9-111">Use hello firewall rules toospecify which IP address ranges from hello Internet are allowed, and whether Azure applications can attempt tooconnect tooyour Azure SQL server.</span></span>

<span data-ttu-id="163c9-112">tooselectively Udziel dostępu toojust, jeden hello baz danych serwera Azure SQL, należy utworzyć regułę poziom bazy danych dla hello wymaganej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="163c9-112">tooselectively grant access toojust one of hello databases in your Azure SQL server, you must create a database-level rule for hello required database.</span></span> <span data-ttu-id="163c9-113">Określ zakres adresów IP dla hello reguły zapory bazy danych, która wykracza poza hello określone w regule zapory poziomu serwera hello zakres adresów IP i upewnij się, że adres IP hello powitania klienta znajduje się w zakresie hello określone w regule bazy danych na poziomie hello.</span><span class="sxs-lookup"><span data-stu-id="163c9-113">Specify an IP address range for hello database firewall rule that is beyond hello IP address range specified in hello server-level firewall rule, and ensure that hello IP address of hello client falls in hello range specified in hello database-level rule.</span></span>

<span data-ttu-id="163c9-114">Próby nawiązania połączenia z hello Internet i Azure musi najpierw przejść przez zaporę Windows hello przed dotarciem serwera Azure SQL lub bazy danych SQL, pokazane na powitania po diagramu:</span><span class="sxs-lookup"><span data-stu-id="163c9-114">Connection attempts from hello Internet and Azure must first pass through hello firewall before they can reach your Azure SQL server or SQL Database, as shown in hello following diagram:</span></span>

   ![Diagram opisujący konfigurację zapory.][1]

* <span data-ttu-id="163c9-116">**Reguły zapory poziomu serwera:** reguły te umożliwiają klientom tooaccess cały serwer Azure SQL, oznacza to, że wszystkie hello bazy danych w ramach hello tym samym serwerze logicznym.</span><span class="sxs-lookup"><span data-stu-id="163c9-116">**Server-level firewall rules:** These rules enable clients tooaccess your entire Azure SQL server, that is, all hello databases within hello same logical server.</span></span> <span data-ttu-id="163c9-117">Te reguły są przechowywane w hello **wzorca** bazy danych.</span><span class="sxs-lookup"><span data-stu-id="163c9-117">These rules are stored in hello **master** database.</span></span> <span data-ttu-id="163c9-118">Reguły zapory poziomu serwera można skonfigurować przy użyciu portalu hello lub za pomocą instrukcji języka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="163c9-118">Server-level firewall rules can be configured by using hello portal or by using Transact-SQL statements.</span></span> <span data-ttu-id="163c9-119">reguły zapory poziomu serwera toocreate przy użyciu hello portalu Azure lub programu PowerShell, muszą być hello subskrypcji właścicielem lub współautorem subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="163c9-119">toocreate server-level firewall rules using hello Azure portal or PowerShell, you must be hello subscription owner or a subscription contributor.</span></span> <span data-ttu-id="163c9-120">toocreate regułę zapory poziomu serwera przy użyciu języka Transact-SQL, należy połączyć toohello wystąpienie bazy danych SQL jako głównego identyfikatora logowania poziomu serwera hello lub administratora usługi Azure Active Directory hello, (co oznacza, że należy najpierw utworzyć regułę zapory poziomu serwera Użytkownik z uprawnieniami na poziomie usługi Azure).</span><span class="sxs-lookup"><span data-stu-id="163c9-120">toocreate a server-level firewall rule using Transact-SQL, you must connect toohello SQL Database instance as hello server-level principal login or hello Azure Active Directory administrator (which means that a server-level firewall rule must first be created by a user with Azure-level permissions).</span></span>
* <span data-ttu-id="163c9-121">**Reguły zapory poziomu bazy danych:** reguły te umożliwiają klientom tooaccess niektórych (bezpieczny) baz danych w ramach hello sam serwer logiczny.</span><span class="sxs-lookup"><span data-stu-id="163c9-121">**Database-level firewall rules:** These rules enable clients tooaccess certain (secure) databases within hello same logical server.</span></span> <span data-ttu-id="163c9-122">Można utworzyć zasady dla każdej bazy danych (w tym hello **wzorca** database0) i są przechowywane w poszczególnych bazach danych hello.</span><span class="sxs-lookup"><span data-stu-id="163c9-122">You can create these rules for each database (including hello **master** database0) and they are stored in hello individual databases.</span></span> <span data-ttu-id="163c9-123">Reguły zapory poziomu bazy danych można skonfigurować tylko za pomocą instrukcji języka Transact-SQL i dopiero po skonfigurowaniu hello pierwszy zapory poziomu serwera.</span><span class="sxs-lookup"><span data-stu-id="163c9-123">Database-level firewall rules can only be configured by using Transact-SQL statements and only after you have configured hello first server-level firewall.</span></span> <span data-ttu-id="163c9-124">Jeśli określisz hello reguły zapory poziomu bazy danych, która jest określone w regule zapory poziomu serwera hello zakres hello poza zakres adresów IP, tylko tych klientów, którzy mają hello bazy danych na poziomie zakresu adresów IP komputerowi dostęp hello bazy danych.</span><span class="sxs-lookup"><span data-stu-id="163c9-124">If you specify an IP address range in hello database-level firewall rule that is outside hello range specified in hello server-level firewall rule, only those clients that have IP addresses in hello database-level range can access hello database.</span></span> <span data-ttu-id="163c9-125">Dla bazy danych można określić maksymalnie 128 reguł zapory na poziomie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="163c9-125">You can have a maximum of 128 database-level firewall rules for a database.</span></span> <span data-ttu-id="163c9-126">Reguły zapory poziomu bazy danych dla baz danych master i użytkownika tylko można tworzyć i zarządzać nimi przy użyciu języka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="163c9-126">Database-level firewall rules for master and user databases can only be created and managed through Transact-SQL.</span></span> <span data-ttu-id="163c9-127">Aby uzyskać więcej informacji na temat konfigurowania reguł zapory na poziomie bazy danych, zobacz przykład hello później w tym artykuł i zobacz [sp_set_database_firewall_rule (baz danych SQL Azure)](https://msdn.microsoft.com/library/dn270010.aspx).</span><span class="sxs-lookup"><span data-stu-id="163c9-127">For more information on configuring database-level firewall rules, see hello example later in this article and see [sp_set_database_firewall_rule (Azure SQL Databases)](https://msdn.microsoft.com/library/dn270010.aspx).</span></span>

<span data-ttu-id="163c9-128">**Zalecenie:** firma Microsoft zaleca korzystanie z reguł zapory na poziomie bazy danych przy każdym możliwe tooenhance zabezpieczeń i toomake przenośną bazy danych.</span><span class="sxs-lookup"><span data-stu-id="163c9-128">**Recommendation:** Microsoft recommends using database-level firewall rules whenever possible tooenhance security and toomake your database more portable.</span></span> <span data-ttu-id="163c9-129">Przy użyciu reguły zapory poziomu serwera dla administratorów, a jeśli masz wiele baz danych, które mają hello te same wymagania dostępu, a nie ma czasu toospend indywidualnie skonfigurowanie każdej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="163c9-129">Use server-level firewall rules for administrators and when you have many databases that have hello same access requirements and you don't want toospend time configuring each database individually.</span></span>

> [!Note]
> <span data-ttu-id="163c9-130">Aby uzyskać informacje o przenośne baz danych w kontekście hello ciągłość prowadzenia działalności biznesowej, zobacz [wymagania dotyczące uwierzytelniania dla odzyskiwania po awarii](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="163c9-130">For information about portable databases in hello context of business continuity, see [Authentication requirements for disaster recovery](sql-database-geo-replication-security-config.md).</span></span>
>

### <a name="connecting-from-hello-internet"></a><span data-ttu-id="163c9-131">Łączenie z hello Internet</span><span class="sxs-lookup"><span data-stu-id="163c9-131">Connecting from hello Internet</span></span>

<span data-ttu-id="163c9-132">Gdy komputer próbuje tooconnect tooyour bazy danych serwera z hello Internet, zapory hello najpierw sprawdza hello pochodzące z adresu IP hello żądania dotyczącego hello reguły zapory poziomu bazy danych, hello bazy danych, który żąda połączenia hello:</span><span class="sxs-lookup"><span data-stu-id="163c9-132">When a computer attempts tooconnect tooyour database server from hello Internet, hello firewall first checks hello originating IP address of hello request against hello database-level firewall rules, for hello database that hello connection is requesting:</span></span>

* <span data-ttu-id="163c9-133">Jeśli adres IP hello żądania hello jest w jednej z określonych w regułach zapory na poziomie bazy danych hello zakresach hello, toohello bazy danych SQL, która zawiera regułę hello zostanie ustanowione połączenie hello.</span><span class="sxs-lookup"><span data-stu-id="163c9-133">If hello IP address of hello request is within one of hello ranges specified in hello database-level firewall rules, hello connection is granted toohello SQL Database that contains hello rule.</span></span>
* <span data-ttu-id="163c9-134">Jeśli adres IP hello hello żądania nie jest w jednym z zakresów hello określone w regule zapory na poziomie bazy danych hello, reguły zapory poziomu serwera hello są sprawdzane.</span><span class="sxs-lookup"><span data-stu-id="163c9-134">If hello IP address of hello request is not within one of hello ranges specified in hello database-level firewall rule, hello server-level firewall rules are checked.</span></span> <span data-ttu-id="163c9-135">Jeśli adres IP hello żądania hello jest w jednej z określonych w regułach zapory poziomu serwera hello zakresach hello, zostanie ustanowione połączenie hello.</span><span class="sxs-lookup"><span data-stu-id="163c9-135">If hello IP address of hello request is within one of hello ranges specified in hello server-level firewall rules, hello connection is granted.</span></span> <span data-ttu-id="163c9-136">Reguły zapory poziomu serwera stosowanie tooall baz danych na serwerze Azure SQL hello.</span><span class="sxs-lookup"><span data-stu-id="163c9-136">Server-level firewall rules apply tooall SQL databases on hello Azure SQL server.</span></span>  
* <span data-ttu-id="163c9-137">Jeśli adres IP hello hello żądania nie jest w hello zakresy określone w żadnym hello poziom bazy danych lub reguły zapory poziomu serwera hello żądanie połączenia zakończy się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="163c9-137">If hello IP address of hello request is not within hello ranges specified in any of hello database-level or server-level firewall rules, hello connection request fails.</span></span>

> [!NOTE]
> <span data-ttu-id="163c9-138">tooaccess bazy danych SQL Azure z komputera lokalnego, upewnij się, że hello zapory w sieci i komputera lokalnego umożliwia komunikację wychodzący na porcie TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="163c9-138">tooaccess Azure SQL Database from your local computer, ensure hello firewall on your network and local computer allows outgoing communication on TCP port 1433.</span></span>
> 

### <a name="connecting-from-azure"></a><span data-ttu-id="163c9-139">Łączenie z platformy Azure</span><span class="sxs-lookup"><span data-stu-id="163c9-139">Connecting from Azure</span></span>
<span data-ttu-id="163c9-140">tooallow aplikacji Azure tooconnect tooyour serwera Azure SQL Azure połączenia musi być włączony.</span><span class="sxs-lookup"><span data-stu-id="163c9-140">tooallow applications from Azure tooconnect tooyour Azure SQL server, Azure connections must be enabled.</span></span> <span data-ttu-id="163c9-141">Po aplikacji z platformy Azure prób tooconnect tooyour bazy danych serwera, zapory hello sprawdza, czy są dozwolone połączenia platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="163c9-141">When an application from Azure attempts tooconnect tooyour database server, hello firewall verifies that Azure connections are allowed.</span></span> <span data-ttu-id="163c9-142">Zapora ustawienie początkową i końcową too0.0.0.0 taki sam adres wskazuje, że te połączenia są dozwolone.</span><span class="sxs-lookup"><span data-stu-id="163c9-142">A firewall setting with starting and ending address equal too0.0.0.0 indicates these connections are allowed.</span></span> <span data-ttu-id="163c9-143">Niedozwolona próba połączenia hello hello żądania nie dochodzi powitania serwera bazy danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="163c9-143">If hello connection attempt is not allowed, hello request does not reach hello Azure SQL Database server.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="163c9-144">Ta opcja powoduje skonfigurowanie hello zapory tooallow wszystkich połączeń z Azure połączeń między innymi w subskrypcji hello innych klientów.</span><span class="sxs-lookup"><span data-stu-id="163c9-144">This option configures hello firewall tooallow all connections from Azure including connections from hello subscriptions of other customers.</span></span> <span data-ttu-id="163c9-145">Wybranie tej opcji upewnij się, że logowanie po tooonly dostępu ograniczyć uprawnienia użytkowników autoryzowanych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="163c9-145">When selecting this option, make sure your login and user permissions limit access tooonly authorized users.</span></span>
> 

## <a name="creating-and-managing-firewall-rules"></a><span data-ttu-id="163c9-146">Tworzenie i zarządzanie nimi reguł zapory</span><span class="sxs-lookup"><span data-stu-id="163c9-146">Creating and managing firewall rules</span></span>
<span data-ttu-id="163c9-147">Pierwsze ustawienie zapory poziomu serwera Hello można tworzyć przy użyciu hello [portalu Azure](https://portal.azure.com/) lub programowo przy użyciu [programu Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [interfejsu wiersza polecenia Azure](/cli/azure/sql/server/firewall-rule#create), lub hello [Interfejsu API REST](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span><span class="sxs-lookup"><span data-stu-id="163c9-147">hello first server-level firewall setting can be created using hello [Azure portal](https://portal.azure.com/) or programmatically using [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), or hello [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span></span> <span data-ttu-id="163c9-148">Kolejne reguły zapory na poziomie serwera mogą być tworzone i zarządzane przy użyciu tych metod oraz za pomocą języka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="163c9-148">Subsequent server-level firewall rules can be created and managed using these methods, and through Transact-SQL.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="163c9-149">Reguły zapory poziomu bazy danych można tworzyć tylko i zarządzane przy użyciu języka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="163c9-149">Database-level firewall rules can only be created and managed using Transact-SQL.</span></span> 
>

<span data-ttu-id="163c9-150">wydajność tooimprove, reguły są tymczasowo przechowywane na poziomie bazy danych hello zapory poziomu serwera.</span><span class="sxs-lookup"><span data-stu-id="163c9-150">tooimprove performance, server-level firewall rules are temporarily cached at hello database level.</span></span> <span data-ttu-id="163c9-151">pamięć podręczna hello toorefresh, zobacz [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span><span class="sxs-lookup"><span data-stu-id="163c9-151">toorefresh hello cache, see [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span></span> 

> [!TIP]
> <span data-ttu-id="163c9-152">Można użyć [SQL Database Auditing](sql-database-auditing.md) tooaudit zmiany zapory poziomu serwera i poziom bazy danych.</span><span class="sxs-lookup"><span data-stu-id="163c9-152">You can use [SQL Database Auditing](sql-database-auditing.md) tooaudit server-level and database-level firewall changes.</span></span>
>

### <a name="azure-portal"></a><span data-ttu-id="163c9-153">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="163c9-153">Azure portal</span></span>

<span data-ttu-id="163c9-154">tooset regułę zapory poziomu serwera w portalu Azure hello albo możesz strony Przegląd toohello strony Przegląd bazy danych lub hello Azure SQL dla serwera logicznego bazy danych Azure.</span><span class="sxs-lookup"><span data-stu-id="163c9-154">tooset a server-level firewall rule in hello Azure portal, you can either go toohello Overview page for your Azure SQL database or hello Overview page for your Azure Database logical server.</span></span>

> [!TIP]
> <span data-ttu-id="163c9-155">Samouczek, zobacz [tworzenie bazy danych przy użyciu hello portalu Azure](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="163c9-155">For a tutorial, see [Create a DB using hello Azure portal](sql-database-get-started-portal.md).</span></span>
>

<span data-ttu-id="163c9-156">**Na stronie Przegląd bazy danych**</span><span class="sxs-lookup"><span data-stu-id="163c9-156">**From database overview page**</span></span>

1. <span data-ttu-id="163c9-157">tooset reguły zapory poziomu serwera z hello strony Przegląd bazy danych, kliknij przycisk **ustawić Zapora serwera** na powitania narzędzi pokazane na powitania po obrazu: hello **ustawienia zapory** stronę hello SQL Otwiera serwera bazy danych.</span><span class="sxs-lookup"><span data-stu-id="163c9-157">tooset a server-level firewall rule from hello database overview page, click **Set server firewall** on hello toolbar as shown in hello following image: hello **Firewall settings** page for hello SQL Database server opens.</span></span>

      ![reguła zapory serwera](./media/sql-database-get-started-portal/server-firewall-rule.png) 

2. <span data-ttu-id="163c9-159">Kliknij przycisk **Dodaj adres IP klienta** na powitania narzędzi tooadd hello adres IP komputera hello obecnie używasz a następnie kliknij przycisk **zapisać**.</span><span class="sxs-lookup"><span data-stu-id="163c9-159">Click **Add client IP** on hello toolbar tooadd hello IP address of hello computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="163c9-160">Dla bieżącego adresu IP zostanie utworzona reguła zapory na poziomie serwera.</span><span class="sxs-lookup"><span data-stu-id="163c9-160">A server-level firewall rule is created for your current IP address.</span></span>

      ![ustawianie reguły zapory serwera](./media/sql-database-get-started-portal/server-firewall-rule-set.png) 

<span data-ttu-id="163c9-162">**Na stronie Przegląd serwera**</span><span class="sxs-lookup"><span data-stu-id="163c9-162">**From server overview page**</span></span>

<span data-ttu-id="163c9-163">Witaj strona przeglądu otwartym serwera przedstawiający hello w pełni kwalifikowana nazwa serwera (takich jak **mynewserver20170403.database.windows.net**) i udostępnia opcje dla dalszej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="163c9-163">hello overview page for your server opens, showing you hello fully qualified server name (such as **mynewserver20170403.database.windows.net**) and provides options for further configuration.</span></span>

1. <span data-ttu-id="163c9-164">Kliknij tooset reguły poziom serwera, na stronie Omówienie serwera **zapory** w menu po lewej stronie powitania w obszarze Ustawienia, jak wynika powitania po obrazu:</span><span class="sxs-lookup"><span data-stu-id="163c9-164">tooset a server-level rule from server overview page, click **Firewall** in hello left-hand menu under Settings as showed in hello following image:</span></span> 

     ![Omówienie serwera logicznego](./media/sql-database-migrate-your-sql-server-database/logical-server-overview.png)

2. <span data-ttu-id="163c9-166">Kliknij przycisk **Dodaj adres IP klienta** na powitania narzędzi tooadd hello adres IP komputera hello obecnie używasz a następnie kliknij przycisk **zapisać**.</span><span class="sxs-lookup"><span data-stu-id="163c9-166">Click **Add client IP** on hello toolbar tooadd hello IP address of hello computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="163c9-167">Dla bieżącego adresu IP zostanie utworzona reguła zapory na poziomie serwera.</span><span class="sxs-lookup"><span data-stu-id="163c9-167">A server-level firewall rule is created for your current IP address.</span></span>

     ![ustawianie reguły zapory serwera](./media/sql-database-migrate-your-sql-server-database/server-firewall-rule-set.png)

### <a name="transact-sql"></a><span data-ttu-id="163c9-169">Język Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="163c9-169">Transact-SQL</span></span>
| <span data-ttu-id="163c9-170">Widok wykazu lub procedura składowana</span><span class="sxs-lookup"><span data-stu-id="163c9-170">Catalog View or Stored Procedure</span></span> | <span data-ttu-id="163c9-171">Poziom</span><span class="sxs-lookup"><span data-stu-id="163c9-171">Level</span></span> | <span data-ttu-id="163c9-172">Opis</span><span class="sxs-lookup"><span data-stu-id="163c9-172">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="163c9-173">sys.firewall_rules</span><span class="sxs-lookup"><span data-stu-id="163c9-173">sys.firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269980.aspx) |<span data-ttu-id="163c9-174">Serwer</span><span class="sxs-lookup"><span data-stu-id="163c9-174">Server</span></span> |<span data-ttu-id="163c9-175">Wyświetla bieżące reguły zapory poziomu serwera hello</span><span class="sxs-lookup"><span data-stu-id="163c9-175">Displays hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="163c9-176">sp_set_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="163c9-176">sp_set_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270017.aspx) |<span data-ttu-id="163c9-177">Serwer</span><span class="sxs-lookup"><span data-stu-id="163c9-177">Server</span></span> |<span data-ttu-id="163c9-178">Tworzy lub aktualizuje reguły zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="163c9-178">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="163c9-179">sp_delete_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="163c9-179">sp_delete_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270024.aspx) |<span data-ttu-id="163c9-180">Serwer</span><span class="sxs-lookup"><span data-stu-id="163c9-180">Server</span></span> |<span data-ttu-id="163c9-181">Usuwa reguły zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="163c9-181">Removes server-level firewall rules</span></span> |
| [<span data-ttu-id="163c9-182">sys.database_firewall_rules</span><span class="sxs-lookup"><span data-stu-id="163c9-182">sys.database_firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269982.aspx) |<span data-ttu-id="163c9-183">Database (Baza danych)</span><span class="sxs-lookup"><span data-stu-id="163c9-183">Database</span></span> |<span data-ttu-id="163c9-184">Wyświetla hello bieżące reguły zapory poziomu bazy danych</span><span class="sxs-lookup"><span data-stu-id="163c9-184">Displays hello current database-level firewall rules</span></span> |
| [<span data-ttu-id="163c9-185">sp_set_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="163c9-185">sp_set_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270010.aspx) |<span data-ttu-id="163c9-186">Database (Baza danych)</span><span class="sxs-lookup"><span data-stu-id="163c9-186">Database</span></span> |<span data-ttu-id="163c9-187">Tworzy lub aktualizuje hello reguły zapory poziomu bazy danych</span><span class="sxs-lookup"><span data-stu-id="163c9-187">Creates or updates hello database-level firewall rules</span></span> |
| [<span data-ttu-id="163c9-188">sp_delete_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="163c9-188">sp_delete_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270030.aspx) |<span data-ttu-id="163c9-189">Bazy danych</span><span class="sxs-lookup"><span data-stu-id="163c9-189">Databases</span></span> |<span data-ttu-id="163c9-190">Usuwa reguły zapory na poziomie bazy danych</span><span class="sxs-lookup"><span data-stu-id="163c9-190">Removes database-level firewall rules</span></span> |


<span data-ttu-id="163c9-191">Witaj następujące przykłady Sprawdź hello istniejących reguł, Włącz zakres adresów IP na serwerze hello Contoso i usuwa regułę zapory:</span><span class="sxs-lookup"><span data-stu-id="163c9-191">hello following examples review hello existing rules, enable a range of IP addresses on hello server Contoso, and deletes a firewall rule:</span></span>
   
```sql
SELECT * FROM sys.firewall_rules ORDER BY name;
```
  
<span data-ttu-id="163c9-192">Następnie dodaj regułę zapory.</span><span class="sxs-lookup"><span data-stu-id="163c9-192">Next, add a firewall rule.</span></span>
   
```sql
EXECUTE sp_set_firewall_rule @name = N'ContosoFirewallRule',
   @start_ip_address = '192.168.1.1', @end_ip_address = '192.168.1.10'
```

<span data-ttu-id="163c9-193">toodelete regułę zapory poziomu serwera wykonać hello sp_delete_firewall_rule przechowywane procedury.</span><span class="sxs-lookup"><span data-stu-id="163c9-193">toodelete a server-level firewall rule, execute hello sp_delete_firewall_rule stored procedure.</span></span> <span data-ttu-id="163c9-194">Witaj poniższy przykład powoduje usunięcie hello reguły o nazwie ContosoFirewallRule:</span><span class="sxs-lookup"><span data-stu-id="163c9-194">hello following example deletes hello rule named ContosoFirewallRule:</span></span>
   
```sql
EXECUTE sp_delete_firewall_rule @name = N'ContosoFirewallRule'
```   

### <a name="azure-powershell"></a><span data-ttu-id="163c9-195">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="163c9-195">Azure PowerShell</span></span>
| <span data-ttu-id="163c9-196">Polecenie cmdlet</span><span class="sxs-lookup"><span data-stu-id="163c9-196">Cmdlet</span></span> | <span data-ttu-id="163c9-197">Poziom</span><span class="sxs-lookup"><span data-stu-id="163c9-197">Level</span></span> | <span data-ttu-id="163c9-198">Opis</span><span class="sxs-lookup"><span data-stu-id="163c9-198">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="163c9-199">Get-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="163c9-199">Get-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546731.aspx) |<span data-ttu-id="163c9-200">Serwer</span><span class="sxs-lookup"><span data-stu-id="163c9-200">Server</span></span> |<span data-ttu-id="163c9-201">Zwraca bieżące reguły zapory poziomu serwera hello</span><span class="sxs-lookup"><span data-stu-id="163c9-201">Returns hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="163c9-202">New-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="163c9-202">New-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546724.aspx) |<span data-ttu-id="163c9-203">Serwer</span><span class="sxs-lookup"><span data-stu-id="163c9-203">Server</span></span> |<span data-ttu-id="163c9-204">Tworzy nową regułę zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="163c9-204">Creates a new server-level firewall rule</span></span> |
| [<span data-ttu-id="163c9-205">Set-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="163c9-205">Set-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546739.aspx) |<span data-ttu-id="163c9-206">Serwer</span><span class="sxs-lookup"><span data-stu-id="163c9-206">Server</span></span> |<span data-ttu-id="163c9-207">Aktualizuje właściwości hello istniejącej reguły zapory poziomu serwera</span><span class="sxs-lookup"><span data-stu-id="163c9-207">Updates hello properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="163c9-208">Remove-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="163c9-208">Remove-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546727.aspx) |<span data-ttu-id="163c9-209">Serwer</span><span class="sxs-lookup"><span data-stu-id="163c9-209">Server</span></span> |<span data-ttu-id="163c9-210">Usuwa reguły zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="163c9-210">Removes server-level firewall rules</span></span> |


<span data-ttu-id="163c9-211">Poniższy przykład Hello Ustawia regułę zapory poziomu serwera przy użyciu programu PowerShell:</span><span class="sxs-lookup"><span data-stu-id="163c9-211">hello following example sets a server-level firewall rule using PowerShell:</span></span>

```powershell
New-AzureRmSqlServerFirewallRule -ResourceGroupName "myResourceGroup" `
    -ServerName $servername `
    -FirewallRuleName "AllowSome" -StartIpAddress "0.0.0.0" -EndIpAddress "0.0.0.0"
```

> [!TIP]
> <span data-ttu-id="163c9-212">Przykłady programu PowerShell w kontekście hello Szybki Start można znaleźć [utworzyć DB - PowerShell](sql-database-get-started-powershell.md) i [utworzyć pojedynczą bazę danych i skonfigurować regułę zapory przy użyciu programu PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="163c9-212">For PowerShell examples in hello context of a quick start, see [Create DB - PowerShell](sql-database-get-started-powershell.md) and [Create a single database and configure a firewall rule using PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span></span>
>

### <a name="azure-cli"></a><span data-ttu-id="163c9-213">Interfejs wiersza polecenia platformy Azure</span><span class="sxs-lookup"><span data-stu-id="163c9-213">Azure CLI</span></span>
| <span data-ttu-id="163c9-214">Polecenie cmdlet</span><span class="sxs-lookup"><span data-stu-id="163c9-214">Cmdlet</span></span> | <span data-ttu-id="163c9-215">Poziom</span><span class="sxs-lookup"><span data-stu-id="163c9-215">Level</span></span> | <span data-ttu-id="163c9-216">Opis</span><span class="sxs-lookup"><span data-stu-id="163c9-216">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="163c9-217">Utwórz zapory serwera sql az</span><span class="sxs-lookup"><span data-stu-id="163c9-217">az sql server firewall create</span></span>](/cli/azure/sql/server/firewall-rule#create) | <span data-ttu-id="163c9-218">Tworzy zapory reguły tooallow dostępu tooall baz danych na serwerze hello z zakresu adresów IP hello wprowadzona.</span><span class="sxs-lookup"><span data-stu-id="163c9-218">Creates a firewall rule tooallow access tooall SQL Databases on hello server from hello entered IP address range.</span></span>|
| [<span data-ttu-id="163c9-219">Usuń zapory serwera sql az</span><span class="sxs-lookup"><span data-stu-id="163c9-219">az sql server firewall delete</span></span>](/cli/azure/sql/server/firewall-rule#delete)| <span data-ttu-id="163c9-220">Usuwa regułę zapory.</span><span class="sxs-lookup"><span data-stu-id="163c9-220">Deletes a firewall rule.</span></span>|
| [<span data-ttu-id="163c9-221">Lista zapory serwera sql az</span><span class="sxs-lookup"><span data-stu-id="163c9-221">az sql server firewall list</span></span>](/cli/azure/sql/server/firewall-rule#list)| <span data-ttu-id="163c9-222">Wyświetla listę reguł zapory hello.</span><span class="sxs-lookup"><span data-stu-id="163c9-222">Lists hello firewall rules.</span></span>|
| [<span data-ttu-id="163c9-223">Pokaż reguły zapory serwera sql az</span><span class="sxs-lookup"><span data-stu-id="163c9-223">az sql server firewall rule show</span></span>](/cli/azure/sql/server/firewall-rule#show)| <span data-ttu-id="163c9-224">Wyświetla szczegóły hello reguły zapory.</span><span class="sxs-lookup"><span data-stu-id="163c9-224">Shows hello details of a firewall rule.</span></span>|
| [<span data-ttu-id="163c9-225">AX aktualizacja reguły zapory programu sql server</span><span class="sxs-lookup"><span data-stu-id="163c9-225">ax sql server firewall rule update</span></span>](/cli/azure/sql/server/firewall-rule#update)| <span data-ttu-id="163c9-226">Aktualizuje regułę zapory.</span><span class="sxs-lookup"><span data-stu-id="163c9-226">Updates a firewall rule.</span></span>

<span data-ttu-id="163c9-227">Poniższy przykład Hello Ustawia regułę zapory poziomu serwera przy użyciu interfejsu wiersza polecenia Azure hello:</span><span class="sxs-lookup"><span data-stu-id="163c9-227">hello following example sets a server-level firewall rule using hello Azure CLI:</span></span> 

```azurecli-interactive
az sql server firewall-rule create --resource-group myResourceGroup --server $servername \
    -n AllowYourIp --start-ip-address 0.0.0.0 --end-ip-address 0.0.0.0
```

> [!TIP]
> <span data-ttu-id="163c9-228">Przykład wiersza polecenia platformy Azure w kontekście hello szybki start, zobacz [utworzyć DDB - Azure CLI](sql-database-get-started-cli.md) i [utworzyć pojedynczą bazę danych i skonfigurować regułę zapory przy użyciu hello wiersza polecenia platformy Azure](scripts/sql-database-create-and-configure-database-cli.md)</span><span class="sxs-lookup"><span data-stu-id="163c9-228">For an Azure CLI example in hello context of a quick start, see [Create DDB - Azure CLI](sql-database-get-started-cli.md) and [Create a single database and configure a firewall rule using hello Azure CLI](scripts/sql-database-create-and-configure-database-cli.md)</span></span>
>

### <a name="rest-api"></a><span data-ttu-id="163c9-229">Interfejs API REST</span><span class="sxs-lookup"><span data-stu-id="163c9-229">REST API</span></span>
| <span data-ttu-id="163c9-230">Interfejs API</span><span class="sxs-lookup"><span data-stu-id="163c9-230">API</span></span> | <span data-ttu-id="163c9-231">Poziom</span><span class="sxs-lookup"><span data-stu-id="163c9-231">Level</span></span> | <span data-ttu-id="163c9-232">Opis</span><span class="sxs-lookup"><span data-stu-id="163c9-232">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="163c9-233">[List Firewall Rules](https://msdn.microsoft.com/library/azure/dn505715.aspx) (Lista reguł zapory)</span><span class="sxs-lookup"><span data-stu-id="163c9-233">[List Firewall Rules](https://msdn.microsoft.com/library/azure/dn505715.aspx)</span></span> |<span data-ttu-id="163c9-234">Serwer</span><span class="sxs-lookup"><span data-stu-id="163c9-234">Server</span></span> |<span data-ttu-id="163c9-235">Wyświetla bieżące reguły zapory poziomu serwera hello</span><span class="sxs-lookup"><span data-stu-id="163c9-235">Displays hello current server-level firewall rules</span></span> |
| <span data-ttu-id="163c9-236">[Create Firewall Rule](https://msdn.microsoft.com/library/azure/dn505712.aspx) (Tworzenie reguły zapory)</span><span class="sxs-lookup"><span data-stu-id="163c9-236">[Create Firewall Rule](https://msdn.microsoft.com/library/azure/dn505712.aspx)</span></span> |<span data-ttu-id="163c9-237">Serwer</span><span class="sxs-lookup"><span data-stu-id="163c9-237">Server</span></span> |<span data-ttu-id="163c9-238">Tworzy lub aktualizuje reguły zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="163c9-238">Creates or updates server-level firewall rules</span></span> |
| <span data-ttu-id="163c9-239">[Set Firewall Rule](https://msdn.microsoft.com/library/azure/dn505707.aspx) (Ustawianie reguły zapory)</span><span class="sxs-lookup"><span data-stu-id="163c9-239">[Set Firewall Rule](https://msdn.microsoft.com/library/azure/dn505707.aspx)</span></span> |<span data-ttu-id="163c9-240">Serwer</span><span class="sxs-lookup"><span data-stu-id="163c9-240">Server</span></span> |<span data-ttu-id="163c9-241">Aktualizuje właściwości hello istniejącej reguły zapory poziomu serwera</span><span class="sxs-lookup"><span data-stu-id="163c9-241">Updates hello properties of an existing server-level firewall rule</span></span> |
| <span data-ttu-id="163c9-242">[Delete Firewall Rule](https://msdn.microsoft.com/library/azure/dn505706.aspx) (Usuwanie reguły zapory)</span><span class="sxs-lookup"><span data-stu-id="163c9-242">[Delete Firewall Rule](https://msdn.microsoft.com/library/azure/dn505706.aspx)</span></span> |<span data-ttu-id="163c9-243">Serwer</span><span class="sxs-lookup"><span data-stu-id="163c9-243">Server</span></span> |<span data-ttu-id="163c9-244">Usuwa reguły zapory na poziomie serwera</span><span class="sxs-lookup"><span data-stu-id="163c9-244">Removes server-level firewall rules</span></span> |

## <a name="server-level-firewall-rule-versus-a-database-level-firewall-rule"></a><span data-ttu-id="163c9-245">Reguły zapory poziomu serwera i regułę zapory poziomu bazy danych</span><span class="sxs-lookup"><span data-stu-id="163c9-245">Server-level firewall rule versus a database-level firewall rule</span></span>
<span data-ttu-id="163c9-246">Q.</span><span class="sxs-lookup"><span data-stu-id="163c9-246">Q.</span></span> <span data-ttu-id="163c9-247">Użytkownicy z jednej bazy danych należy całkowicie odizolowane od innej bazy danych?</span><span class="sxs-lookup"><span data-stu-id="163c9-247">Should users of one database be fully isolated from another database?</span></span>   
  <span data-ttu-id="163c9-248">Jeśli tak, należy przyznać dostęp przy użyciu reguł zapory na poziomie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="163c9-248">If yes, grant access using database-level firewall rules.</span></span> <span data-ttu-id="163c9-249">Dzięki temu można uniknąć przy użyciu reguły zapory poziomu serwera, które zezwalają na dostęp przez zaporę Windows hello tooall baz danych, zmniejszenie głębokości hello dalszej.</span><span class="sxs-lookup"><span data-stu-id="163c9-249">This avoids using server-level firewall rules, which permit access through hello firewall tooall databases, reducing hello depth of your defenses.</span></span>   
 
<span data-ttu-id="163c9-250">Q.</span><span class="sxs-lookup"><span data-stu-id="163c9-250">Q.</span></span> <span data-ttu-id="163c9-251">Czy użytkownicy pod adresem IP hello muszą uzyskiwać dostęp do baz danych tooall?</span><span class="sxs-lookup"><span data-stu-id="163c9-251">Do users at hello IP address’s need access tooall databases?</span></span>   
  <span data-ttu-id="163c9-252">Użyj zapory poziomu serwera reguły tooreduce hello liczbę razy, należy skonfigurować reguły zapory.</span><span class="sxs-lookup"><span data-stu-id="163c9-252">Use server-level firewall rules tooreduce hello number of times you must configure firewall rules.</span></span>   

<span data-ttu-id="163c9-253">Q.</span><span class="sxs-lookup"><span data-stu-id="163c9-253">Q.</span></span> <span data-ttu-id="163c9-254">Hello osobę lub zespół Konfigurowanie reguł zapory hello tylko ma dostęp za pośrednictwem portalu Azure, programu PowerShell, hello lub hello interfejsu API REST?</span><span class="sxs-lookup"><span data-stu-id="163c9-254">Does hello person or team configuring hello firewall rules only have access through hello Azure portal, PowerShell, or hello REST API?</span></span>   
  <span data-ttu-id="163c9-255">Należy użyć reguły zapory poziomu serwera.</span><span class="sxs-lookup"><span data-stu-id="163c9-255">You must use server-level firewall rules.</span></span> <span data-ttu-id="163c9-256">Reguły zapory poziomu bazy danych można skonfigurować tylko za pomocą języka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="163c9-256">Database-level firewall rules can only be configured using Transact-SQL.</span></span>  

<span data-ttu-id="163c9-257">Q.</span><span class="sxs-lookup"><span data-stu-id="163c9-257">Q.</span></span> <span data-ttu-id="163c9-258">Jest hello osobę lub zespół Konfigurowanie reguł zapory hello zabroniony z konieczności wysokiego poziomu uprawnień na poziomie bazy danych hello?</span><span class="sxs-lookup"><span data-stu-id="163c9-258">Is hello person or team configuring hello firewall rules prohibited from having high-level permission at hello database level?</span></span>   
  <span data-ttu-id="163c9-259">Użyj reguł zapory na poziomie serwera.</span><span class="sxs-lookup"><span data-stu-id="163c9-259">Use server-level firewall rules.</span></span> <span data-ttu-id="163c9-260">Konfigurowanie reguł zapory na poziomie bazy danych przy użyciu języka Transact-SQL, wymaga co najmniej `CONTROL DATABASE` uprawnienia na poziomie bazy danych hello.</span><span class="sxs-lookup"><span data-stu-id="163c9-260">Configuring database-level firewall rules using Transact-SQL, requires at least `CONTROL DATABASE` permission at hello database level.</span></span>  

<span data-ttu-id="163c9-261">Q.</span><span class="sxs-lookup"><span data-stu-id="163c9-261">Q.</span></span> <span data-ttu-id="163c9-262">Jest hello osobie lub zespołowi inspekcję hello reguły zapory, i konfigurowanie centralne zarządzanie reguły zapory dla wielu (prawdopodobnie 100) baz danych?</span><span class="sxs-lookup"><span data-stu-id="163c9-262">Is hello person or team configuring or auditing hello firewall rules, centrally managing firewall rules for many (perhaps 100s) of databases?</span></span>   
  <span data-ttu-id="163c9-263">Tego wyboru zależy od środowiska i potrzeb użytkowników.</span><span class="sxs-lookup"><span data-stu-id="163c9-263">This selection depends upon your needs and environment.</span></span> <span data-ttu-id="163c9-264">Reguły zapory poziomu serwera może być łatwiejsze tooconfigure, ale skryptów można skonfigurować reguły w hello poziom bazy danych.</span><span class="sxs-lookup"><span data-stu-id="163c9-264">Server-level firewall rules might be easier tooconfigure, but scripting can configure rules at hello database-level.</span></span> <span data-ttu-id="163c9-265">A nawet wtedy, gdy używasz reguły zapory poziomu serwera, może być potrzebny reguły zapory bazy danych tooaudit hello toosee użytkownikom `CONTROL` uprawnień w bazie danych hello zostały utworzone reguły zapory poziomu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="163c9-265">And even if you use server-level firewall rules, you might need tooaudit hello database-firewall rules, toosee if users with `CONTROL` permission on hello database have created database-level firewall rules.</span></span>   

<span data-ttu-id="163c9-266">Q.</span><span class="sxs-lookup"><span data-stu-id="163c9-266">Q.</span></span> <span data-ttu-id="163c9-267">Czy można używać różnych obie reguły zapory poziomu serwera i poziom bazy danych?</span><span class="sxs-lookup"><span data-stu-id="163c9-267">Can I use a mix of both server-level and database-level firewall rules?</span></span>   
  <span data-ttu-id="163c9-268">Tak.</span><span class="sxs-lookup"><span data-stu-id="163c9-268">Yes.</span></span> <span data-ttu-id="163c9-269">W przypadku niektórych użytkowników, takich jak Administratorzy mogą wymagać reguły zapory poziomu serwera.</span><span class="sxs-lookup"><span data-stu-id="163c9-269">Some users, such as administrators might need server-level firewall rules.</span></span> <span data-ttu-id="163c9-270">Innych użytkowników, takich jak użytkownicy aplikacji bazy danych, może być konieczne reguły zapory poziomu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="163c9-270">Other users, such as users of a database application, might need database-level firewall rules.</span></span>   

## <a name="troubleshooting-hello-database-firewall"></a><span data-ttu-id="163c9-271">Rozwiązywanie problemów dotyczących zapory bazy danych hello</span><span class="sxs-lookup"><span data-stu-id="163c9-271">Troubleshooting hello database firewall</span></span>
<span data-ttu-id="163c9-272">Należy wziąć pod uwagę następujące punkty, gdy toohello dostępu do usługi Microsoft Azure SQL Database nie działają zgodnie z oczekiwaniami hello:</span><span class="sxs-lookup"><span data-stu-id="163c9-272">Consider hello following points when access toohello Microsoft Azure SQL Database service does not behave as you expect:</span></span>

* <span data-ttu-id="163c9-273">**Konfiguracja zapory lokalnej:** zanim komputer może uzyskać dostęp do bazy danych SQL Azure, konieczne może toocreate wyjątek zapory na komputerze dla portu TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="163c9-273">**Local firewall configuration:** Before your computer can access Azure SQL Database, you may need toocreate a firewall exception on your computer for TCP port 1433.</span></span> <span data-ttu-id="163c9-274">Jeśli tworzysz połączeń wewnątrz granic chmury Azure hello, może być tooopen dodatkowych portów.</span><span class="sxs-lookup"><span data-stu-id="163c9-274">If you are making connections inside hello Azure cloud boundary, you may have tooopen additional ports.</span></span> <span data-ttu-id="163c9-275">Aby uzyskać więcej informacji, zobacz hello **bazy danych SQL: poza vs wewnątrz** sekcji [porty inne niż 1433 ADO.NET 4.5 i bazy danych SQL](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="163c9-275">For more information, see hello **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="163c9-276">**Adres translatora adresów sieciowych:** tooNAT termin, hello adres IP używany przez Twoje tooAzure tooconnect komputera bazy danych SQL mogą różnić się od adresu IP hello wyświetlany w ustawieniach konfiguracji adresu IP komputera.</span><span class="sxs-lookup"><span data-stu-id="163c9-276">**Network address translation (NAT):** Due tooNAT, hello IP address used by your computer tooconnect tooAzure SQL Database may be different than hello IP address shown in your computer IP configuration settings.</span></span> <span data-ttu-id="163c9-277">tooview hello adres IP komputera przy użyciu tooconnect tooAzure, zaloguj się w portalu toohello i przejdź toohello **Konfiguruj** kartę na powitania serwera, który hostuje bazę danych.</span><span class="sxs-lookup"><span data-stu-id="163c9-277">tooview hello IP address your computer is using tooconnect tooAzure, log in toohello portal and navigate toohello **Configure** tab on hello server that hosts your database.</span></span> <span data-ttu-id="163c9-278">W obszarze hello **dozwolone adresy IP** sekcji, hello **bieżącego adresu IP klienta** jest wyświetlany.</span><span class="sxs-lookup"><span data-stu-id="163c9-278">Under hello **Allowed IP Addresses** section, hello **Current Client IP Address** is displayed.</span></span> <span data-ttu-id="163c9-279">Kliknij przycisk **Dodaj** toohello **dozwolone adresy IP** tooallow serwera hello tooaccess tego komputera.</span><span class="sxs-lookup"><span data-stu-id="163c9-279">Click **Add** toohello **Allowed IP Addresses** tooallow this computer tooaccess hello server.</span></span>
* <span data-ttu-id="163c9-280">**Lista dozwolonych toohello zmiany nie zostały uwzględnione jeszcze:** może być jak opóźnienie 5 minutową zmienia toohello bazy danych SQL Azure zapory konfiguracji tootake efekt.</span><span class="sxs-lookup"><span data-stu-id="163c9-280">**Changes toohello allow list have not taken effect yet:** There may be as much as a five-minute delay for changes toohello Azure SQL Database firewall configuration tootake effect.</span></span>
* <span data-ttu-id="163c9-281">**nie ma uprawnień logowania Hello lub niepoprawne hasło było używane:** Jeśli nazwa logowania nie ma uprawnień na serwerze bazy danych SQL Azure hello lub hello hasło używane jest niepoprawny, serwera bazy danych SQL Azure toohello połączeń hello zostanie odrzucone.</span><span class="sxs-lookup"><span data-stu-id="163c9-281">**hello login is not authorized or an incorrect password was used:** If a login does not have permissions on hello Azure SQL Database server or hello password used is incorrect, hello connection toohello Azure SQL Database server is denied.</span></span> <span data-ttu-id="163c9-282">Tworzenie ustawień zapory tylko zapewnia klientom tooattempt możliwość łączenia serwera tooyour; Każdy klient musi podać poświadczenia zabezpieczeń wymaganymi hello.</span><span class="sxs-lookup"><span data-stu-id="163c9-282">Creating a firewall setting only provides clients with an opportunity tooattempt connecting tooyour server; each client must provide hello necessary security credentials.</span></span> <span data-ttu-id="163c9-283">Aby uzyskać więcej informacji na temat przygotowywania logowań, zobacz sekcję Zarządzanie bazami danych, logowaniami i użytkownikami w usłudze Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="163c9-283">For more information about preparing logins, see Managing Databases, Logins, and Users in Azure SQL Database.</span></span>
* <span data-ttu-id="163c9-284">**Dynamicznego adresu IP:** Jeśli masz kłopot przez zaporę Windows hello ma połączenia internetowego z dynamicznych adresów IP, można Wypróbuj jedną z następujących rozwiązań hello:</span><span class="sxs-lookup"><span data-stu-id="163c9-284">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through hello firewall, you could try one of hello following solutions:</span></span>
  
  * <span data-ttu-id="163c9-285">Zapytaj dostawcę usługi internetowego (ISP) dla zakresu adresów IP hello przypisane tooyour komputerów klienckich serwera bazy danych SQL Azure hello tego dostępu, a następnie Dodaj zakres adresów IP hello jako regułę zapory.</span><span class="sxs-lookup"><span data-stu-id="163c9-285">Ask your Internet Service Provider (ISP) for hello IP address range assigned tooyour client computers that access hello Azure SQL Database server, and then add hello IP address range as a firewall rule.</span></span>
  * <span data-ttu-id="163c9-286">Pobierz statycznych adresów IP zamiast tego dla komputerów klienckich, a następnie dodaj adresy IP hello jako reguły zapory.</span><span class="sxs-lookup"><span data-stu-id="163c9-286">Get static IP addressing instead for your client computers, and then add hello IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="163c9-287">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="163c9-287">Next steps</span></span>

- <span data-ttu-id="163c9-288">Aby uzyskać szybki start dotyczące tworzenia bazy danych i regułę zapory poziomu serwera, zobacz [tworzenie bazy danych Azure SQL](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="163c9-288">For a quick start on creating a database and a server-level firewall rule, see [Create an Azure SQL database](sql-database-get-started-portal.md).</span></span>
- <span data-ttu-id="163c9-289">Aby uzyskać pomoc w bazie danych Azure SQL z tooan nawiązujący połączenie z typu open source lub aplikacje innych firm, [tooSQL bazy danych — przykłady kodu szybki start klienta](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span><span class="sxs-lookup"><span data-stu-id="163c9-289">For help in connecting tooan Azure SQL database from open source or third-party applications, see [Client quick-start code samples tooSQL Database](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span></span>
- <span data-ttu-id="163c9-290">Informacje dotyczące dodatkowych portów, że może być konieczne tooopen znajdują się w temacie hello **bazy danych SQL: poza vs wewnątrz** sekcji [porty inne niż 1433 ADO.NET 4.5 i bazy danych SQL](sql-database-develop-direct-route-ports-adonet-v12.md)</span><span class="sxs-lookup"><span data-stu-id="163c9-290">For information on additional ports that you may need tooopen, see hello **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md)</span></span>
- <span data-ttu-id="163c9-291">Omówienie zabezpieczeń usługi Azure SQL Database, zobacz [zabezpieczania bazy danych](sql-database-security-overview.md)</span><span class="sxs-lookup"><span data-stu-id="163c9-291">For an overview of Azure SQL Database security, see [Securing your database](sql-database-security-overview.md)</span></span>

<!--Image references-->
[1]: ./media/sql-database-firewall-configure/sqldb-firewall-1.png
