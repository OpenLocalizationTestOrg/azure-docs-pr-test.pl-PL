---
title: "aaaRestore bazy danych Azure SQL w aplikacji wielodostępnych | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak toorestore pojedynczej dzierżawy SQL bazy danych po przypadkowym usunięciu danych"
keywords: "samouczek usługi sql database"
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: billgib;sstein
ms.openlocfilehash: 8507ecec2424c135f1859b88ebf2bb4e17538a58
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="restore-a-wingtip-saas-tenants-sql-database"></a><span data-ttu-id="cd5d3-104">Przywracanie bazy danych SQL dzierżaw Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="cd5d3-104">Restore a Wingtip SaaS tenants SQL database</span></span>

<span data-ttu-id="cd5d3-105">Aplikacja Wingtip SaaS Hello jest utworzony przy użyciu modelu bazy danych dla dzierżawy, którym każdy dzierżawca ma własnych bazy danych.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-105">hello Wingtip SaaS app is built using a database-per-tenant model, where each tenant has their own database.</span></span> <span data-ttu-id="cd5d3-106">Jedną z zalet hello ten model jest jego jest łatwe toorestore danych pojedynczej dzierżawy w izolacji bez wpływu na innych dzierżawców.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-106">One of hello benefits of this model is that it is easy toorestore a single tenant’s data in isolation without impacting other tenants.</span></span>

<span data-ttu-id="cd5d3-107">W tym samouczku Dowiedz się dwa wzorce odzyskiwania danych:</span><span class="sxs-lookup"><span data-stu-id="cd5d3-107">In this tutorial you learn two data recovery patterns:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="cd5d3-108">Przywróć bazę danych do bazy danych równoległej (side-by-side)</span><span class="sxs-lookup"><span data-stu-id="cd5d3-108">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="cd5d3-109">Przywracanie bazy danych w miejscu</span><span class="sxs-lookup"><span data-stu-id="cd5d3-109">Restore a database in place</span></span>


|||
|:--|:--|
| <span data-ttu-id="cd5d3-110">**Przywróć dzierżawy tooa wcześniejszego punktu w czasie do równoległego bazy danych**</span><span class="sxs-lookup"><span data-stu-id="cd5d3-110">**Restore tenant tooa prior point in time, into a parallel database**</span></span> | <span data-ttu-id="cd5d3-111">Ten wzorzec może być używany przez dzierżawcę hello w recenzji, inspekcji, zgodności, oryginalnej bazy danych itp. hello pozostaje bez zmian i online.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-111">This pattern can be used by hello tenant for review, auditing, compliance, etc. hello original database remains online and unchanged.</span></span> |
| <span data-ttu-id="cd5d3-112">**Przywróć dzierżawy w miejscu**</span><span class="sxs-lookup"><span data-stu-id="cd5d3-112">**Restore tenant in-place**</span></span> | <span data-ttu-id="cd5d3-113">Ten wzorzec jest najczęściej używanymi toorecover dzierżawy tooa wcześniejszego punktu w czasie, po dzierżawcy przypadkowo usunął danych.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-113">This pattern is typically used toorecover a tenant tooa prior point in time, after a tenant accidentally deletes data.</span></span> <span data-ttu-id="cd5d3-114">Hello oryginalnej bazy danych jest przełączona w tryb offline i zastąpione hello przywróconej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-114">hello original database is taken offline, and replaced with hello restored database.</span></span> |
|||

<span data-ttu-id="cd5d3-115">toocomplete ukończenia tego samouczka, Utwórz hello się, że następujące wymagania wstępne:</span><span class="sxs-lookup"><span data-stu-id="cd5d3-115">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="cd5d3-116">Aplikacja Wingtip SaaS Hello jest wdrażana.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-116">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="cd5d3-117">Zobacz toodeploy w mniej niż pięć minut [wdrażania i aplikacji Wingtip SaaS hello](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="cd5d3-117">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="cd5d3-118">Zainstalowany jest program Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-118">Azure PowerShell is installed.</span></span> <span data-ttu-id="cd5d3-119">Aby uzyskać szczegółowe informacje, zobacz [Rozpoczynanie pracy z programem Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="cd5d3-119">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-toohello-saas-tenant-restore-pattern"></a><span data-ttu-id="cd5d3-120">Wprowadzenie toohello SaaS dzierżawy przywracania wzorca</span><span class="sxs-lookup"><span data-stu-id="cd5d3-120">Introduction toohello SaaS tenant restore pattern</span></span>

<span data-ttu-id="cd5d3-121">Dla dzierżawcy hello przywrócić wzorzec, istnieją dwa proste wzorce w celu przywrócenia danych dzierżawy usługi.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-121">For hello tenant restore pattern, there are two simple patterns for restoring an individual tenant's data.</span></span> <span data-ttu-id="cd5d3-122">Ponieważ dzierżawy baz danych są od siebie odizolowane, Przywracanie jednego dzierżawcy nie ma wpływu na dane żadnych innych dzierżawców.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-122">Because tenant databases are isolated from each other, restoring one tenant has no impact on any other tenant's data.</span></span>

<span data-ttu-id="cd5d3-123">We wzorcu pierwszy hello dane są przywracane do nowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-123">In hello first pattern, data is restored into a new database.</span></span> <span data-ttu-id="cd5d3-124">dzierżawy Hello następnie otrzymuje baz danych programu access toothis obok ich danych produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-124">hello tenant is then given access toothis database alongside their production data.</span></span> <span data-ttu-id="cd5d3-125">Ten wzorzec umożliwia dzierżawcy admin tooreview hello przywrócić danych i potencjalnie przy jego użyciu tooselectively zastąpić bieżące wartości danych.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-125">This pattern allows a tenant admin tooreview hello restored data and potentially use it tooselectively overwrite current data values.</span></span> <span data-ttu-id="cd5d3-126">Jest zapasowej toohello SaaS aplikacji projektanta toodetermine jak zaawansowane hello odzyskiwania danych, który powinien być opcje.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-126">It's up toohello SaaS app designer toodetermine just how sophisticated hello data recovery options should be.</span></span> <span data-ttu-id="cd5d3-127">Po prostu stanie tooreview danych w stanie hello, który znajdował się w danym punkcie w czasie może być wszystkie, który jest wymagany w niektórych scenariuszach.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-127">Simply being able tooreview data in hello state it was in at a given point in time may be all that is required in some scenarios.</span></span> <span data-ttu-id="cd5d3-128">Jeśli baza danych hello używa [— replikacja geograficzna](sql-database-geo-replication-overview.md), zaleca się kopiowanie danych hello wymagane z kopii hello przywrócone do hello oryginalnej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-128">If hello database uses [geo-replication](sql-database-geo-replication-overview.md), we recommend copying hello required data from hello restored copy into hello original database.</span></span> <span data-ttu-id="cd5d3-129">Jeśli zastąpić oryginalnej bazy danych hello hello przywrócić bazy danych, należy tooreconfigure go i ponownie zsynchronizować replikację geograficzną.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-129">If you replace hello original database with hello restored database, you need tooreconfigure and resynchronize geo-replication.</span></span>

<span data-ttu-id="cd5d3-130">We wzorcu drugi hello, który tej dzierżawy hello poniosła utratę lub uszkodzenie danych przyjmuje się, że dzierżawy hello w produkcyjnej bazie danych jest przywracany tooa wcześniejszego punktu w czasie.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-130">In hello second pattern, which assumes that hello tenant has suffered a loss or corruption of data, hello tenant’s production database is restored tooa prior point in time.</span></span> <span data-ttu-id="cd5d3-131">W ramach operacji przywracania hello we wzorcu miejsce hello dzierżawy do trybu offline przez krótki czas podczas hello baza danych jest przywracane i przywrócony do trybu online.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-131">In hello restore in place pattern, hello tenant is taken offline for a brief time while hello database is restored and brought back online.</span></span> <span data-ttu-id="cd5d3-132">Witaj oryginalnej bazy danych zostanie usunięty, ale nadal można przywrócić z, jeśli potrzebujesz tooan wstecz toogo nawet wcześniejszego punktu w czasie.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-132">hello original database is deleted, but can still be restored from if you need toogo back tooan even earlier point in time.</span></span> <span data-ttu-id="cd5d3-133">Odmianą tego wzorca można zmienić nazwy bazy danych hello zamiast usuwania, mimo że zmiana nazwy bazy danych hello oferuje nie dodatkowych zalet pod względem zabezpieczeń danych.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-133">A variation of this pattern could rename hello database instead of deleting it, although renaming hello database offers no additional advantage in terms of data security.</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="cd5d3-134">Pobierz skrypty aplikacji hello Wingtip</span><span class="sxs-lookup"><span data-stu-id="cd5d3-134">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="cd5d3-135">Witaj Wingtip SaaS skrypty i kod źródłowy aplikacji są dostępne w hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) repozytorium github.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-135">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="cd5d3-136">[Kroki skrypty Wingtip SaaS hello toodownload](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="cd5d3-136">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="simulate-a-tenant-accidentally-deleting-data"></a><span data-ttu-id="cd5d3-137">Symulowanie dzierżawcy przypadkowego usunięcia danych</span><span class="sxs-lookup"><span data-stu-id="cd5d3-137">Simulate a tenant accidentally deleting data</span></span>

<span data-ttu-id="cd5d3-138">toodemonstrate tych scenariuszy odzyskiwania potrzebujemy zbyt*przypadkowo* usuwać niektóre dane w jednej z baz danych dzierżawy hello.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-138">toodemonstrate these recovery scenarios, we need too*accidentally* delete some data in one of hello tenant databases.</span></span> <span data-ttu-id="cd5d3-139">Podczas można usunąć rekordu, hello następny krok konfiguruje toonot pokaz hello zablokowane przez naruszenie integralności referencyjnej!</span><span class="sxs-lookup"><span data-stu-id="cd5d3-139">While you can delete any record, hello next step sets up hello demo toonot get blocked by referential integrity violations!</span></span> <span data-ttu-id="cd5d3-140">Dodane również pewne dane zakupu biletu, można użyć w dalszej części hello *samouczki Wingtip SaaS Analytics*.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-140">It also adds some ticket purchase data you can use later in hello *Wingtip SaaS Analytics tutorials*.</span></span>

<span data-ttu-id="cd5d3-141">Uruchom skrypt generator biletu hello i utworzyć dodatkowe dane.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-141">Run hello ticket generator script and create additional data.</span></span> <span data-ttu-id="cd5d3-142">generator biletu Hello celowo nie kupuje biletów dla poszczególnych dzierżawców ostatniego zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-142">hello ticket generator intentionally does not purchase tickets for each tenants last event.</span></span>

1. <span data-ttu-id="cd5d3-143">Otwórz... \\Modułów uczenia\\narzędzia\\*TicketGenerator.ps1 pokaz* w hello *PowerShell ISE*</span><span class="sxs-lookup"><span data-stu-id="cd5d3-143">Open ...\\Learning Modules\\Utilities\\*Demo-TicketGenerator.ps1* in hello *PowerShell ISE*</span></span>
1. <span data-ttu-id="cd5d3-144">Naciśnij klawisz **F5** toorun hello skryptu i generowanie odbiorców i biletu danych sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-144">Press **F5** toorun hello script and generate customers and ticket sales data.</span></span>


### <a name="open-hello-events-app-tooreview-hello-current-events"></a><span data-ttu-id="cd5d3-145">Otwórz hello zdarzeń aplikacji tooreview hello bieżącego zdarzeń</span><span class="sxs-lookup"><span data-stu-id="cd5d3-145">Open hello Events app tooreview hello current events</span></span>

1. <span data-ttu-id="cd5d3-146">Otwórz hello *Centrum zdarzeń* (http://events.wtp.&lt; Użytkownik&gt;. trafficmanager.net) i kliknij przycisk **Hall porozumieniu Contoso**:</span><span class="sxs-lookup"><span data-stu-id="cd5d3-146">Open hello *Events Hub* (http://events.wtp.&lt;user&gt;.trafficmanager.net) and click **Contoso Concert Hall**:</span></span>

   ![centrum zdarzeń](media/sql-database-saas-tutorial-restore-single-tenant/events-hub.png)

1. <span data-ttu-id="cd5d3-148">Przewiń listę hello zdarzeń i zanotuj hello ostatnie zdarzenie na liście hello:</span><span class="sxs-lookup"><span data-stu-id="cd5d3-148">Scroll hello list of events and make a note of hello last event in hello list:</span></span>

   ![Ostatnie zdarzenie](media/sql-database-saas-tutorial-restore-single-tenant/last-event.png)


### <a name="run-hello-demo-scenario-tooaccidentally-delete-hello-last-event"></a><span data-ttu-id="cd5d3-150">Uruchom hello pokaz scenariusza tooaccidentally delete hello ostatniego zdarzenia</span><span class="sxs-lookup"><span data-stu-id="cd5d3-150">Run hello demo scenario tooaccidentally delete hello last event</span></span>

1. <span data-ttu-id="cd5d3-151">Otwórz... \\Modułów uczenia\\ciągłość prowadzenia działalności biznesowej i odzyskiwania po awarii\\RestoreTenant\\*RestoreTenant.ps1 pokaz* w hello *PowerShell ISE*, i hello ustaw następujące wartości:</span><span class="sxs-lookup"><span data-stu-id="cd5d3-151">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\*Demo-RestoreTenant.ps1* in hello *PowerShell ISE*, and set hello following value:</span></span>
   * <span data-ttu-id="cd5d3-152">**$DemoScenario** = **1**zbyt ustaw**1** -Usuń zdarzenia bez sprzedaży biletów.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-152">**$DemoScenario** = **1**, Set too**1** - Delete events with no ticket sales.</span></span>
1. <span data-ttu-id="cd5d3-153">Naciśnij klawisz **F5** toorun hello skryptu i usunąć hello ostatnie zdarzenie.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-153">Press **F5** toorun hello script and delete hello last event.</span></span> <span data-ttu-id="cd5d3-154">Powinny pojawić się potwierdzenie komunikat podobny toohello następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="cd5d3-154">You should see a confirmation message similar toohello following:</span></span>

   ```Console
   Deleting unsold events from Contoso Concert Hall ...
   Deleted event 'Seriously Strauss' from Contoso Concert Hall venue.
   ```

1. <span data-ttu-id="cd5d3-155">zostanie otwarta strona zdarzenia Contoso Hello.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-155">hello Contoso events page opens.</span></span> <span data-ttu-id="cd5d3-156">Przewiń w dół i sprawdź, czy zdarzenie hello został usunięty.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-156">Scroll down and verify hello event is gone.</span></span> <span data-ttu-id="cd5d3-157">Jeśli zdarzenie hello jest nadal znajduje się na liście hello, kliknij przycisk Odśwież i sprawdź, czy został on usunięty.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-157">If hello event is still in hello list, click refresh and verify it is gone.</span></span>

   ![Ostatnie zdarzenie](media/sql-database-saas-tutorial-restore-single-tenant/last-event-deleted.png)


## <a name="restore-a-tenant-database-in-parallel-with-hello-production-database"></a><span data-ttu-id="cd5d3-159">Przywróć bazę danych dzierżawy równolegle z hello w produkcyjnej bazie danych</span><span class="sxs-lookup"><span data-stu-id="cd5d3-159">Restore a tenant database in parallel with hello production database</span></span>

<span data-ttu-id="cd5d3-160">Tego ćwiczenia przywraca hello Hall porozumieniu Contoso bazy danych tooa punktu w czasie przed hello zdarzenie zostało usunięte.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-160">This exercise restores hello Contoso Concert Hall database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="cd5d3-161">Po usunięciu zdarzenia hello w poprzednich krokach hello mają toorecover i wyświetlić dane hello usunięte.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-161">After hello event is deleted in hello previous steps, you want toorecover and see hello deleted data.</span></span> <span data-ttu-id="cd5d3-162">Nie ma potrzeby toorestore produkcyjnej bazy danych za pomocą hello usunąć rekord, ale należy toorecover hello stare bazy danych tooaccess hello stare dane z innych powodów biznesowych.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-162">You don't need toorestore your production database with hello deleted record, but you need toorecover hello old database tooaccess hello old data for other business reasons.</span></span>

 <span data-ttu-id="cd5d3-163">Witaj *TenantInParallel.ps1 przywracania* skrypt tworzy równoległych dzierżawy bazy danych i równoległych wpisu katalogu zarówno o nazwie *ContosoConcertHall\_starego*.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-163">hello *Restore-TenantInParallel.ps1* script creates a parallel tenant database, and a parallel catalog entry both named *ContosoConcertHall\_old*.</span></span> <span data-ttu-id="cd5d3-164">Ten wzorzec przywracania jest najodpowiedniejsze do odzyskiwania danych po utracie danych drobne lub zgodności i inspekcji scenariuszy odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-164">This pattern of restore is best suited for recovering from a minor data loss or for compliance and auditing recovery scenarios.</span></span> <span data-ttu-id="cd5d3-165">Jest również zalecane podejście, gdy używasz hello [— replikacja geograficzna](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="cd5d3-165">It is also hello recommended approach when you are using [geo-replication](sql-database-geo-replication-overview.md).</span></span>

1. <span data-ttu-id="cd5d3-166">Zakończenie hello [symulować użytkownika przypadkowego usunięcia danych](#simulate-a-tenant-accidentally-deleting-data) sekcji.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-166">Complete hello [simulate a user accidentally deleting data](#simulate-a-tenant-accidentally-deleting-data) section.</span></span>
1. <span data-ttu-id="cd5d3-167">Otwórz... \\Modułów uczenia\\ciągłość prowadzenia działalności biznesowej i odzyskiwania po awarii\\RestoreTenant\\_RestoreTenant.ps1 pokaz_ w hello *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-167">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\_Demo-RestoreTenant.ps1_ in hello *PowerShell ISE*.</span></span>
1. <span data-ttu-id="cd5d3-168">Ustaw **$DemoScenario** = **2**, ustaw tę wartość za**2** za*dzierżawy przywracania równolegle*.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-168">Set **$DemoScenario** = **2**, Set this too**2** too*Restore tenant in parallel*.</span></span>
1. <span data-ttu-id="cd5d3-169">Naciśnij klawisz **F5** toorun hello skryptu.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-169">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="cd5d3-170">skrypt Hello przywraca hello dzierżawy bazy danych (bazy danych równoległych tooa) tooa punktu w czasie, aby usunąć zdarzenie hello w poprzedniej sekcji hello.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-170">hello script restores hello tenant database (tooa parallel database) tooa point in time before you deleted hello event in hello previous section.</span></span> <span data-ttu-id="cd5d3-171">Tworzy drugi bazę danych, spowoduje usunięcie wszystkich istniejących metadanych katalogu, które istnieje w tej bazie danych i dodaje hello katalogu toohello bazy danych w obszarze hello *ContosoConcertHall\_starego* wpisu.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-171">It creates a second database, removes any existing catalog metadata that exists in this database, and adds hello database toohello catalog under hello *ContosoConcertHall\_old* entry.</span></span>

<span data-ttu-id="cd5d3-172">Witaj pokaz skryptu spowoduje otwarcie strony zdarzenia hello w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-172">hello demo script opens hello events page in your browser.</span></span> <span data-ttu-id="cd5d3-173">Uwaga z adresu URL hello: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` czy to jest wyświetlane dane z bazy danych hello przywrócić gdzie *_old* dodaniu toohello nazwy.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-173">Note from hello URL: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` that this is showing data from hello restored database where *_old* is added toohello name.</span></span>

<span data-ttu-id="cd5d3-174">Hello przewijania zdarzenia wymienione w hello tooconfirm przeglądarki, które hello zdarzeń usunięte w poprzedniej sekcji hello została przywrócona.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-174">Scroll hello events listed in hello browser tooconfirm that hello event deleted in hello previous section has been restored.</span></span>

<span data-ttu-id="cd5d3-175">Należy zwrócić uwagę tego uwidaczniającą dzierżawy hello przywrócić dodatkowe dzierżawy, z własnego biletów toobrowse zdarzeń aplikacji jest mało prawdopodobne toobe, w jaki będzie zapewnia się, że dane toorestored dostępu dzierżawy, ale służy tooeasily ilustrują hello przywracania wzorzec.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-175">Note that exposing hello restored tenant as an additional tenant, with its own Events app toobrowse tickets, is unlikely toobe how you would provide a tenant access toorestored data, but serves tooeasily illustrate hello restore pattern.</span></span>

<span data-ttu-id="cd5d3-176">W rzeczywistości ma prawdopodobnie tylko zachowanie tej przywróconej bazy danych w zdefiniowanym okresie.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-176">In reality, you would probably only retain this restored database for a defined period.</span></span> <span data-ttu-id="cd5d3-177">Możesz usunąć wpis dzierżawy hello przywrócić po zakończeniu przez wywołanie hello *RestoredTenant.ps1 Usuń* skryptu.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-177">You can delete hello restored tenant entry once you are finished by calling hello *Remove-RestoredTenant.ps1* script.</span></span>

1. <span data-ttu-id="cd5d3-178">Ustaw **$DemoScenario** za**4** tooselect hello *dzierżawy Usuń przywrócić* scenariusza.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-178">Set **$DemoScenario** too**4** tooselect hello *remove restored tenant* scenario.</span></span>
1. <span data-ttu-id="cd5d3-179">**Wykonanie** **przy użyciu** **F5**</span><span class="sxs-lookup"><span data-stu-id="cd5d3-179">**Execute** **using** **F5**</span></span>
1. <span data-ttu-id="cd5d3-180">Witaj *ContosoConcertHall\_starego* wpis jest teraz usunięty z katalogu hello.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-180">hello *ContosoConcertHall\_old* entry is now deleted from hello catalog.</span></span> <span data-ttu-id="cd5d3-181">Przejdź dalej i zamknij hello wydarzenia strony dla tej dzierżawy w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-181">Go ahead and close hello events page for this tenant in your browser.</span></span>


## <a name="restore-a-tenant-in-place-replacing-hello-existing-tenant-database"></a><span data-ttu-id="cd5d3-182">Przywróć dzierżawcy w miejscu, zastępując hello istniejącej dzierżawy bazy danych</span><span class="sxs-lookup"><span data-stu-id="cd5d3-182">Restore a tenant in place, replacing hello existing tenant database</span></span>

<span data-ttu-id="cd5d3-183">Tego ćwiczenia przywraca hello Hall porozumieniu Contoso dzierżawy tooa punktu w czasie przed hello zdarzenie zostało usunięte.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-183">This exercise restores hello Contoso Concert Hall tenant tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="cd5d3-184">Witaj *TenantInPlace przywracania* skryptu przywrócenie hello bieżącej dzierżawy bazy danych tooa nową bazę danych wskazujące tooa wcześniejszego punktu w czasie i usuwa hello oryginalnej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-184">hello *Restore-TenantInPlace* script restores hello current tenant database tooa new database pointing tooa previous point in time, and deletes hello original database.</span></span> <span data-ttu-id="cd5d3-185">Ten wzorzec przywracania jest najodpowiedniejsze, odzyskiwanie danych poważne uszkodzenie jako może być utracie dużej ilości danych, które hello dzierżawy może mieć tooaccommodate.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-185">This pattern of restore is best suited for recovering from serious data corruption as there may be significant data loss that hello tenant would have tooaccommodate.</span></span>

1. <span data-ttu-id="cd5d3-186">Otwórz **RestoreTenant.ps1 pokaz** pliku w programie PowerShell ISE</span><span class="sxs-lookup"><span data-stu-id="cd5d3-186">Open **Demo-RestoreTenant.ps1** file in PowerShell ISE</span></span>
1. <span data-ttu-id="cd5d3-187">Ustaw **$DemoScenario** za**5** tooselect hello *przywrócić dzierżawy w scenariuszu miejscu*.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-187">Set **$DemoScenario** too**5** tooselect hello *restore tenant in place scenario*.</span></span>
1. <span data-ttu-id="cd5d3-188">Wykonywanie za pomocą **F5**.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-188">Execute using **F5**.</span></span>

<span data-ttu-id="cd5d3-189">skrypt Hello przywraca punktu tooa bazy danych dzierżawy hello pięć minut przed hello zdarzenie zostało usunięte.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-189">hello script restores hello tenant database tooa point five minutes before hello event was deleted.</span></span> <span data-ttu-id="cd5d3-190">Robi to przy pierwszym biorąc hello Contoso porozumieniu Hall dzierżawy w trybie offline więc nie wyszukiwanie aktualizacji toohello danych.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-190">It does this by first taking hello Contoso Concert Hall tenant offline so there are no further updates toohello data.</span></span> <span data-ttu-id="cd5d3-191">Następnie równoległych bazy danych jest tworzone przez przywrócenie z punktu przywracania hello i o nazwie z sygnaturą czasową Nazwa bazy danych hello tooensure nie powoduje konfliktu z hello nazwy istniejącej bazy danych dzierżawy.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-191">Then, a parallel database is created by restoring from hello restore point and named with a timestamp tooensure hello database name does not conflict with hello existing tenant database name.</span></span> <span data-ttu-id="cd5d3-192">Następnie hello starego dzierżawcy w bazie danych zostanie usunięta, a hello przywróconej bazy danych jest toohello zmieniono nazwę oryginalną nazwę bazy danych.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-192">Next, hello old tenant database is deleted, and hello restored database is renamed toohello original database name.</span></span> <span data-ttu-id="cd5d3-193">Na koniec Hall porozumieniu Contoso jest przełączana w tryb online tooallow hello aplikacji dostępu toohello przywrócić do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-193">Finally, Contoso Concert Hall is brought online tooallow hello app access toohello restored database.</span></span>

<span data-ttu-id="cd5d3-194">Pomyślnie przywrócił się hello bazy danych tooa punktu w czasie przed hello zdarzenie zostało usunięte.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-194">You successfully restored hello database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="cd5d3-195">Witaj zostanie otwarta strona zdarzeń, upewnij się, więc hello ostatnie zdarzenie zostało przywrócone.</span><span class="sxs-lookup"><span data-stu-id="cd5d3-195">hello Events page opens, so confirm hello last event has been restored.</span></span>


## <a name="next-steps"></a><span data-ttu-id="cd5d3-196">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="cd5d3-196">Next steps</span></span>

<span data-ttu-id="cd5d3-197">W niniejszym samouczku zawarto informacje na temat wykonywania następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="cd5d3-197">In this tutorial, you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="cd5d3-198">Przywróć bazę danych do bazy danych równoległej (side-by-side)</span><span class="sxs-lookup"><span data-stu-id="cd5d3-198">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="cd5d3-199">Przywracanie bazy danych w miejscu</span><span class="sxs-lookup"><span data-stu-id="cd5d3-199">Restore a database in place</span></span>

[<span data-ttu-id="cd5d3-200">Zarządzanie dzierżawy schematu bazy danych</span><span class="sxs-lookup"><span data-stu-id="cd5d3-200">Manage tenant database schema</span></span>](sql-database-saas-tutorial-schema-management.md)

## <a name="additional-resources"></a><span data-ttu-id="cd5d3-201">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="cd5d3-201">Additional resources</span></span>

* <span data-ttu-id="cd5d3-202">Dodatkowe [samouczki, które zależą od hello aplikacji Wingtip SaaS](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="cd5d3-202">Additional [tutorials that build upon hello Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="cd5d3-203">Omówienie ciągłości działalności biznesowej z bazy danych SQL Azure</span><span class="sxs-lookup"><span data-stu-id="cd5d3-203">Overview of business continuity with Azure SQL Database</span></span>](sql-database-business-continuity.md)
* [<span data-ttu-id="cd5d3-204">Więcej informacji na temat tworzenia kopii zapasowych bazy danych SQL</span><span class="sxs-lookup"><span data-stu-id="cd5d3-204">Learn about SQL Database backups</span></span>](sql-database-automated-backups.md)
