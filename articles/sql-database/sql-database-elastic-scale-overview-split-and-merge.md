---
title: "aaaMoving danych między bazami danych w chmurze skalowalnych w poziomie | Dokumentacja firmy Microsoft"
description: "W tym artykule wyjaśniono, jak odłamków toomanipulate i przenoszenia danych za pośrednictwem usługi hostowanej własnym przy użyciu elastyczne bazy danych interfejsów API."
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
ms.assetid: 204fd902-0397-4185-985a-dea3ed7c7d9f
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/24/2016
ms.author: ddove
ms.openlocfilehash: 629dee06e22609e9b61edf93ba5c38d997132d8c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="moving-data-between-scaled-out-cloud-databases"></a><span data-ttu-id="cda91-103">Przenoszenie danych między skalowanymi bazami danych w chmurze</span><span class="sxs-lookup"><span data-stu-id="cda91-103">Moving data between scaled-out cloud databases</span></span>
<span data-ttu-id="cda91-104">Jeśli jesteś oprogramowania jako deweloper usługi, i nagle ulega ogromne żądanie w aplikacji, należy tooaccommodate hello wzrostu.</span><span class="sxs-lookup"><span data-stu-id="cda91-104">If you are a Software as a Service developer, and suddenly your app undergoes tremendous demand, you need tooaccommodate hello growth.</span></span> <span data-ttu-id="cda91-105">Dlatego należy dodać więcej baz danych (odłamków).</span><span class="sxs-lookup"><span data-stu-id="cda91-105">So you add more databases (shards).</span></span> <span data-ttu-id="cda91-106">Jak rozpowszechniać hello danych toohello nowych baz danych bez zakłócania hello integralność danych</span><span class="sxs-lookup"><span data-stu-id="cda91-106">How do you redistribute hello data toohello new databases without disrupting hello data integrity?</span></span> <span data-ttu-id="cda91-107">Użyj hello **narzędzia do scalania podziału** toohello nowych baz danych w bazach danych toomove danych z ograniczeniami.</span><span class="sxs-lookup"><span data-stu-id="cda91-107">Use hello **split-merge tool** toomove data from constrained databases toohello new databases.</span></span>  

<span data-ttu-id="cda91-108">Narzędzie do scalania podziału Hello działa jako usługa sieci web platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="cda91-108">hello split-merge tool runs as an Azure web service.</span></span> <span data-ttu-id="cda91-109">Administratorem lub deweloperem używa narzędzia hello toomove shardlets (dane z niezależnego fragmentu) między różnych baz danych (odłamków).</span><span class="sxs-lookup"><span data-stu-id="cda91-109">An administrator or developer uses hello tool toomove shardlets (data from a shard) between different databases (shards).</span></span> <span data-ttu-id="cda91-110">Narzędzie Hello używa niezależnego fragmentu mapy zarządzania toomaintain hello metadanych bazy danych usługi i zapewnić spójne mapowania.</span><span class="sxs-lookup"><span data-stu-id="cda91-110">hello tool uses shard map management toomaintain hello service metadata database, and ensure consistent mappings.</span></span>

![Omówienie][1]

## <a name="download"></a><span data-ttu-id="cda91-112">Do pobrania</span><span class="sxs-lookup"><span data-stu-id="cda91-112">Download</span></span>
[<span data-ttu-id="cda91-113">Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge</span><span class="sxs-lookup"><span data-stu-id="cda91-113">Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge</span></span>](http://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge/)

## <a name="documentation"></a><span data-ttu-id="cda91-114">Dokumentacja</span><span class="sxs-lookup"><span data-stu-id="cda91-114">Documentation</span></span>
1. [<span data-ttu-id="cda91-115">Samouczek narzędzi elastycznej bazy danych scalania podziału</span><span class="sxs-lookup"><span data-stu-id="cda91-115">Elastic database Split-Merge tool tutorial</span></span>](sql-database-elastic-scale-configure-deploy-split-and-merge.md)
2. [<span data-ttu-id="cda91-116">Konfiguracja zabezpieczeń scalania podziału</span><span class="sxs-lookup"><span data-stu-id="cda91-116">Split-Merge security configuration</span></span>](sql-database-elastic-scale-split-merge-security-configuration.md)
3. [<span data-ttu-id="cda91-117">Zagadnienia dotyczące zabezpieczeń scalania podziału</span><span class="sxs-lookup"><span data-stu-id="cda91-117">Split-merge security considerations</span></span>](sql-database-elastic-scale-split-merge-security-configuration.md)
4. [<span data-ttu-id="cda91-118">Zarządzanie mapami fragmentów</span><span class="sxs-lookup"><span data-stu-id="cda91-118">Shard map management</span></span>](sql-database-elastic-scale-shard-map-management.md)
5. [<span data-ttu-id="cda91-119">Migrowanie istniejących baz danych tooscale w poziomie</span><span class="sxs-lookup"><span data-stu-id="cda91-119">Migrate existing databases tooscale-out</span></span>](sql-database-elastic-convert-to-use-elastic-tools.md)
6. [<span data-ttu-id="cda91-120">Narzędzi elastycznej bazy danych</span><span class="sxs-lookup"><span data-stu-id="cda91-120">Elastic database tools</span></span>](sql-database-elastic-scale-introduction.md)
7. [<span data-ttu-id="cda91-121">Elastyczne słownik Narzędzia bazy danych</span><span class="sxs-lookup"><span data-stu-id="cda91-121">Elastic Database tools glossary</span></span>](sql-database-elastic-scale-glossary.md)

## <a name="why-use-hello-split-merge-tool"></a><span data-ttu-id="cda91-122">Dlaczego warto używać narzędzia do scalania podziału hello?</span><span class="sxs-lookup"><span data-stu-id="cda91-122">Why use hello split-merge tool?</span></span>
<span data-ttu-id="cda91-123">**Elastyczność**</span><span class="sxs-lookup"><span data-stu-id="cda91-123">**Flexibility**</span></span>

<span data-ttu-id="cda91-124">Aplikacje muszą toostretch elastycznie poza granice hello pojedynczej bazy danych bazy danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="cda91-124">Applications need toostretch flexibly beyond hello limits of a single Azure SQL DB database.</span></span> <span data-ttu-id="cda91-125">Użyj hello narzędzia toomove danych jako baz danych wymagane toonew przy zachowaniu integralności.</span><span class="sxs-lookup"><span data-stu-id="cda91-125">Use hello tool toomove data as needed toonew databases while retaining integrity.</span></span>

<span data-ttu-id="cda91-126">**Toogrow podziału**</span><span class="sxs-lookup"><span data-stu-id="cda91-126">**Split toogrow**</span></span> 

<span data-ttu-id="cda91-127">Należy tooincrease ogólną pojemność toohandle dynamiczny rozwój.</span><span class="sxs-lookup"><span data-stu-id="cda91-127">You need tooincrease overall capacity toohandle explosive growth.</span></span> <span data-ttu-id="cda91-128">toodo tak, utwórz jej większą pojemność przez podanie hello danych i przekazując go przyrostowo więcej baz danych do momentu wymagań wydajności są spełnione.</span><span class="sxs-lookup"><span data-stu-id="cda91-128">toodo so, create additional capacity by sharding hello data and by distributing it across incrementally more databases until capacity needs are fulfilled.</span></span> <span data-ttu-id="cda91-129">To jest przykład głównym funkcji "podział" hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-129">This is a prime example of hello ‘split’ feature.</span></span> 

<span data-ttu-id="cda91-130">**Scal tooshrink**</span><span class="sxs-lookup"><span data-stu-id="cda91-130">**Merge tooshrink**</span></span>

<span data-ttu-id="cda91-131">Pojemność musi zmniejszać powodu toohello okresach rodzaj działalności.</span><span class="sxs-lookup"><span data-stu-id="cda91-131">Capacity needs shrink due toohello seasonal nature of a business.</span></span> <span data-ttu-id="cda91-132">Umożliwia narzędzie Hello można skalować w dół jednostki skalowania toofewer spowalnia biznesowych.</span><span class="sxs-lookup"><span data-stu-id="cda91-132">hello tool lets you scale down toofewer scale units when business slows.</span></span> <span data-ttu-id="cda91-133">Funkcja "merge" Hello w hello elastycznego skalowania usługi scalania podziału obejmuje to wymaganie.</span><span class="sxs-lookup"><span data-stu-id="cda91-133">hello ‘merge’ feature in hello Elastic Scale split-merge Service covers this requirement.</span></span> 

<span data-ttu-id="cda91-134">**Zarządzanie punktami HotSpot przenosząc shardlets**</span><span class="sxs-lookup"><span data-stu-id="cda91-134">**Manage hotspots by moving shardlets**</span></span>

<span data-ttu-id="cda91-135">Z wieloma dzierżawcami na bazę danych Alokacja hello shardlets tooshards może spowodować wąskich gardeł toocapacity na niektórych fragmentów.</span><span class="sxs-lookup"><span data-stu-id="cda91-135">With multiple tenants per database, hello allocation of shardlets tooshards can lead toocapacity bottlenecks on some shards.</span></span> <span data-ttu-id="cda91-136">Wymaga to ponowne przydzielanie shardlets lub przeniesienie toonew shardlets zajęty lub mniej wykorzystywanych fragmentów.</span><span class="sxs-lookup"><span data-stu-id="cda91-136">This requires re-allocating shardlets or moving busy shardlets toonew or less utilized shards.</span></span> 

## <a name="concepts--key-features"></a><span data-ttu-id="cda91-137">Pojęcia dotyczące & najważniejsze funkcje</span><span class="sxs-lookup"><span data-stu-id="cda91-137">Concepts & key features</span></span>
<span data-ttu-id="cda91-138">**Obsługiwana w środowisku klienta usługi**</span><span class="sxs-lookup"><span data-stu-id="cda91-138">**Customer-hosted services**</span></span>

<span data-ttu-id="cda91-139">Scalanie podziału Hello jest dostarczana jako usługa hostowana przez klienta.</span><span class="sxs-lookup"><span data-stu-id="cda91-139">hello split-merge is delivered as a customer-hosted service.</span></span> <span data-ttu-id="cda91-140">Należy wdrożyć i obsługi usługi hello w subskrypcji platformy Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="cda91-140">You must deploy and host hello service in your Microsoft Azure subscription.</span></span> <span data-ttu-id="cda91-141">Pakiet Hello, pobierane z NuGet zawiera toocomplete szablonu konfiguracji hello informacje dla określonego wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="cda91-141">hello package you download from NuGet contains a configuration template toocomplete with hello information for your specific deployment.</span></span> <span data-ttu-id="cda91-142">Zobacz hello [samouczek scalania podziału](sql-database-elastic-scale-configure-deploy-split-and-merge.md) szczegółowe informacje.</span><span class="sxs-lookup"><span data-stu-id="cda91-142">See hello [split-merge tutorial](sql-database-elastic-scale-configure-deploy-split-and-merge.md) for details.</span></span> <span data-ttu-id="cda91-143">Ponieważ usługa hello jest uruchamiana w Twojej subskrypcji platformy Azure, można kontrolować i skonfigurować większość ustawień zabezpieczeń hello usługi.</span><span class="sxs-lookup"><span data-stu-id="cda91-143">Since hello service runs in your Azure subscription, you can control and configure most security aspects of hello service.</span></span> <span data-ttu-id="cda91-144">szablon domyślny Hello obejmuje tooconfigure opcje hello SSL, uwierzytelnianie klienta oparte na certyfikatach, szyfrowania przechowywanych poświadczeń, ochrona systemu DoS i ograniczenia adresów IP.</span><span class="sxs-lookup"><span data-stu-id="cda91-144">hello default template includes hello options tooconfigure SSL, certificate-based client authentication, encryption for stored credentials, DoS guarding and IP restrictions.</span></span> <span data-ttu-id="cda91-145">Można znaleźć więcej informacji na temat hello aspekty zabezpieczeń w powitania po dokumentu [konfiguracji zabezpieczeń scalania podziału](sql-database-elastic-scale-split-merge-security-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="cda91-145">You can find more information on hello security aspects in hello following document [split-merge security configuration](sql-database-elastic-scale-split-merge-security-configuration.md).</span></span>

<span data-ttu-id="cda91-146">domyślne Hello wdrożona usługa działa z jednego procesu roboczego i jedną rolę sieci web.</span><span class="sxs-lookup"><span data-stu-id="cda91-146">hello default deployed service runs with one worker and one web role.</span></span> <span data-ttu-id="cda91-147">Hello maszyna wirtualna A1 rozmiar każdego używa usługi w chmurze Azure.</span><span class="sxs-lookup"><span data-stu-id="cda91-147">Each uses hello A1 VM size in Azure Cloud Services.</span></span> <span data-ttu-id="cda91-148">Gdy nie można zmodyfikować te ustawienia podczas wdrażania pakietu hello, można je zmienić po pomyślnym wdrożeniu w hello uruchamiania usługi w chmurze (za pośrednictwem hello portalu Azure).</span><span class="sxs-lookup"><span data-stu-id="cda91-148">While you cannot modify these settings when deploying hello package, you could change them after a successful deployment in hello running cloud service, (through hello Azure portal).</span></span> <span data-ttu-id="cda91-149">Należy pamiętać, że w tej roli procesu roboczego hello nie mogą być skonfigurowane dla więcej niż jednego wystąpienia przyczyn technicznych.</span><span class="sxs-lookup"><span data-stu-id="cda91-149">Note that hello worker role must not be configured for more than a single instance for technical reasons.</span></span> 

<span data-ttu-id="cda91-150">**Identyfikator niezależnego fragmentu integracji mapy**</span><span class="sxs-lookup"><span data-stu-id="cda91-150">**Shard map integration**</span></span>

<span data-ttu-id="cda91-151">Usługa scalania podziału Hello współdziała z mapy niezależnego fragmentu hello aplikacji hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-151">hello split-merge service interacts with hello shard map of hello application.</span></span> <span data-ttu-id="cda91-152">Używając toosplit usługi scalania podziału hello lub zakresy scalania lub toomove shardlets między odłamków, hello usługa automatycznie aktualizuje mapy niezależnego fragmentu hello się toodate.</span><span class="sxs-lookup"><span data-stu-id="cda91-152">When using hello split-merge service toosplit or merge ranges or toomove shardlets between shards, hello service automatically keeps hello shard map up toodate.</span></span> <span data-ttu-id="cda91-153">toodo tak, usługa hello łączy bazy danych Menedżera mapy niezależnego fragmentu toohello aplikacji hello i obsługuje zakresy i mapowania postęp żądań move podziału/merge.</span><span class="sxs-lookup"><span data-stu-id="cda91-153">toodo so, hello service connects toohello shard map manager database of hello application and maintains ranges and mappings as split/merge/move requests progress.</span></span> <span data-ttu-id="cda91-154">Dzięki temu tej mapy niezależnego fragmentu hello zawsze przedstawia aktualny widok podczas operacji scalania podziału będą.</span><span class="sxs-lookup"><span data-stu-id="cda91-154">This ensures that hello shard map always presents an up-to-date view when split-merge operations are going on.</span></span> <span data-ttu-id="cda91-155">Podzielić, operacje przenoszenia scalania i shardlet są implementowane przez przeniesienie partii shardlets z hello źródłowego niezależnego fragmentu toohello docelowy identyfikator niezależnego fragmentu.</span><span class="sxs-lookup"><span data-stu-id="cda91-155">Split, merge and shardlet movement operations are implemented by moving a batch of shardlets from hello source shard toohello target shard.</span></span> <span data-ttu-id="cda91-156">Podczas hello shardlet przepływu operacji hello shardlets podmiotu toohello bieżącej partii są oznaczone w trybie offline w mapie niezależnego fragmentu hello i są dostępne na potrzeby połączeń routingu zależne od danych za pomocą hello **OpenConnectionForKey** interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="cda91-156">During hello shardlet movement operation hello shardlets subject toohello current batch are marked as offline in hello shard map and are unavailable for data-dependent routing connections using hello **OpenConnectionForKey** API.</span></span> 

<span data-ttu-id="cda91-157">**Spójne shardlet połączeń**</span><span class="sxs-lookup"><span data-stu-id="cda91-157">**Consistent shardlet connections**</span></span>

<span data-ttu-id="cda91-158">Po uruchomieniu przepływu danych dla nowej partii shardlets wszystkie podane mapowanie niezależnych zależne od danych routingu połączeń toohello niezależnego fragmentu przechowywania hello shardlet są zabitych i kolejnych połączeń z mapy niezależnego fragmentu hello toohello interfejsów API shardlets te są blokowane podczas Przenoszenie danych Hello jest w toku w kolejności tooavoid niespójności.</span><span class="sxs-lookup"><span data-stu-id="cda91-158">When data movement starts for a new batch of shardlets, any shard-map provided data-dependent routing connections toohello shard storing hello shardlet are killed and subsequent connections from hello shard map APIs toohello these shardlets are blocked while hello data movement is in progress in order tooavoid inconsistencies.</span></span> <span data-ttu-id="cda91-159">Shardlets tooother połączeń na powitania sam identyfikator niezależnego fragmentu również pobrać skasowane, ale powiedzie się ponownie od razu przy ponownej próbie.</span><span class="sxs-lookup"><span data-stu-id="cda91-159">Connections tooother shardlets on hello same shard will also get killed, but will succeed again immediately on retry.</span></span> <span data-ttu-id="cda91-160">Po przeniesieniu partii hello hello shardlets oznaczonych jako online ponownie dla niezależnych docelowy hello, a hello źródło danych zostanie usunięta z hello niezależnych źródła.</span><span class="sxs-lookup"><span data-stu-id="cda91-160">Once hello batch is moved, hello shardlets are marked online again for hello target shard and hello source data is removed from hello source shard.</span></span> <span data-ttu-id="cda91-161">Usługa Hello przechodzi przez te czynności dla każdej partii, dopóki wszystkie shardlets zostały przeniesione.</span><span class="sxs-lookup"><span data-stu-id="cda91-161">hello service goes through these steps for every batch until all shardlets have been moved.</span></span> <span data-ttu-id="cda91-162">To operacji kill połączenia tooseveral podczas trwania hello hello podziału/merge/przeniesienia ukończenie tej operacji.</span><span class="sxs-lookup"><span data-stu-id="cda91-162">This will lead tooseveral connection kill operations during hello course of hello complete split/merge/move operation.</span></span>  

<span data-ttu-id="cda91-163">**Zarządzanie shardlet dostępności**</span><span class="sxs-lookup"><span data-stu-id="cda91-163">**Managing shardlet availability**</span></span>

<span data-ttu-id="cda91-164">Ograniczanie połączenia hello skasowanie toohello bieżącej partii shardlets zgodnie z powyższym opisem ogranicza zakres hello niedostępności partii tooone shardlets naraz.</span><span class="sxs-lookup"><span data-stu-id="cda91-164">Limiting hello connection killing toohello current batch of shardlets as discussed above restricts hello scope of unavailability tooone batch of shardlets at a time.</span></span> <span data-ttu-id="cda91-165">To jest preferowana za pośrednictwem podejście gdzie niezależnych pełną hello pozostanie w trybie offline dla wszystkich jego shardlets podczas trwania operacji dzielenie i scalanie hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-165">This is preferred over an approach where hello complete shard would remain offline for all its shardlets during hello course of a split or merge operation.</span></span> <span data-ttu-id="cda91-166">Hello rozmiaru partii, zdefiniowany jako hello liczbę unikatowych shardlets toomove jednocześnie, to parametr konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="cda91-166">hello size of a batch, defined as hello number of distinct shardlets toomove at a time, is a configuration parameter.</span></span> <span data-ttu-id="cda91-167">Może być zdefiniowana dla każdej operacji dzielenie i scalanie w zależności od potrzeb aplikacji hello dostępności i wydajności.</span><span class="sxs-lookup"><span data-stu-id="cda91-167">It can be defined for each split and merge operation depending on hello application’s availability and performance needs.</span></span> <span data-ttu-id="cda91-168">Należy pamiętać, że hello zakresu, który jest zablokowany na mapie niezależnego fragmentu hello może być większy niż określony rozmiar partii hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-168">Note that hello range that is being locked in hello shard map may be larger than hello batch size specified.</span></span> <span data-ttu-id="cda91-169">Jest to spowodowane usługi hello wybiera rozmiar zakresu hello tak, aby rzeczywista liczba wartości kluczy dzielenia na fragmenty danych hello hello około dopasowuje rozmiar partii hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-169">This is because hello service picks hello range size such that hello actual number of sharding key values in hello data approximately matches hello batch size.</span></span> <span data-ttu-id="cda91-170">Jest to ważne tooremember w szczególności kluczy słabo wypełnione dzielenia na fragmenty.</span><span class="sxs-lookup"><span data-stu-id="cda91-170">This is important tooremember in particular for sparsely populated sharding keys.</span></span> 

<span data-ttu-id="cda91-171">**Magazynu metadanych**</span><span class="sxs-lookup"><span data-stu-id="cda91-171">**Metadata storage**</span></span>

<span data-ttu-id="cda91-172">Usługa scalania podziału Hello używa toomaintain bazy danych, stanu i tookeep rejestruje podczas przetwarzania żądania.</span><span class="sxs-lookup"><span data-stu-id="cda91-172">hello split-merge service uses a database toomaintain its status and tookeep logs during request processing.</span></span> <span data-ttu-id="cda91-173">Użytkownik Hello tworzy tej bazy danych w swoich subskrypcji i zapewnia on hello parametry połączenia w pliku konfiguracji wdrożenia usługi hello hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-173">hello user creates this database in their subscription and provides hello connection string for it in hello configuration file for hello service deployment.</span></span> <span data-ttu-id="cda91-174">Administratorzy z organizacji użytkownika hello umożliwia też łączność toothis postępu żądania tooreview bazy danych i tooinvestigate szczegółowe informacje na temat potencjalnych błędów.</span><span class="sxs-lookup"><span data-stu-id="cda91-174">Administrators from hello user’s organization can also connect toothis database tooreview request progress and tooinvestigate detailed information regarding potential failures.</span></span>

<span data-ttu-id="cda91-175">**Rozpoznawanie dzielenia na fragmenty**</span><span class="sxs-lookup"><span data-stu-id="cda91-175">**Sharding-awareness**</span></span>

<span data-ttu-id="cda91-176">Usługa scalania podziału Hello oddzieli (1) podzielonej tabel, tabele odwołań (2) i (3) normalne tabel.</span><span class="sxs-lookup"><span data-stu-id="cda91-176">hello split-merge service differentiates between (1) sharded tables, (2) reference tables, and (3) normal tables.</span></span> <span data-ttu-id="cda91-177">Semantyka Hello operacji przenoszenia podziału/merge są zależne od typu hello tabeli hello użyte i są zdefiniowane w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="cda91-177">hello semantics of a split/merge/move operation depend on hello type of hello table used and are defined as follows:</span></span> 

* <span data-ttu-id="cda91-178">**Tabele podzielonej**: podziału, scalania i operacji przenoszenia przenieść shardlets z niezależnych tootarget źródła.</span><span class="sxs-lookup"><span data-stu-id="cda91-178">**Sharded tables**: Split, merge, and move operations move shardlets from source tootarget shard.</span></span> <span data-ttu-id="cda91-179">Po pomyślnym ukończeniu hello żądania ogólnego, shardlets te nie są już dostępne w źródle hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-179">After successful completion of hello overall request, those shardlets are no longer present on hello source.</span></span> <span data-ttu-id="cda91-180">Warto zauważyć, że tabel docelowych hello muszą tooexist na powitania docelowy identyfikator niezależnego fragmentu nie może zawierać danych w poprzednich tooprocessing zakres docelowy hello hello operacji.</span><span class="sxs-lookup"><span data-stu-id="cda91-180">Note that hello target tables need tooexist on hello target shard and must not contain data in hello target range prior tooprocessing of hello operation.</span></span> 
* <span data-ttu-id="cda91-181">**Tabele odwołań dla**: tabele odwołań, Podziel hello scalania i przenieść operacje skopiowanie danych hello z hello źródła toohello docelowy identyfikator niezależnego fragmentu.</span><span class="sxs-lookup"><span data-stu-id="cda91-181">**Reference tables**: For reference tables, hello split, merge and move operations copy hello data from hello source toohello target shard.</span></span> <span data-ttu-id="cda91-182">Należy jednak pamiętać, że żadne zmiany wystąpić na powitania niezależnych docelowy dla danej tabeli, jeśli wszystkie wiersze znajduje się już w tej tabeli w celu hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-182">Note, however, that no changes occur on hello target shard for a given table if any row is already present in this table on hello target.</span></span> <span data-ttu-id="cda91-183">Tabela Hello ma toobe puste dla dowolnego tabeli odwołania kopiowania tooget operacji przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="cda91-183">hello table has toobe empty for any reference table copy operation tooget processed.</span></span>
* <span data-ttu-id="cda91-184">**Inne tabele**: inne tabele mogą być obecne na hello źródłowy lub docelowy hello operacji dzielenie i scalanie.</span><span class="sxs-lookup"><span data-stu-id="cda91-184">**Other Tables**: Other tables can be present on either hello source or hello target of a split and merge operation.</span></span> <span data-ttu-id="cda91-185">Usługa scalania podziału Hello pomija te tabele operacje kopiowania lub przenoszenia danych.</span><span class="sxs-lookup"><span data-stu-id="cda91-185">hello split-merge service disregards these tables for any data movement or copy operations.</span></span> <span data-ttu-id="cda91-186">Należy jednak pamiętać, że może zakłócać te operacje, w przypadku ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="cda91-186">Note, however, that they can interfere with these operations in case of constraints.</span></span>

<span data-ttu-id="cda91-187">informacje Hello na odwołanie a podzielonej tabele są udostępniane przez hello **SchemaInfo** interfejsów API hello niezależnego fragmentu mapy.</span><span class="sxs-lookup"><span data-stu-id="cda91-187">hello information on reference vs. sharded tables is provided by hello **SchemaInfo** APIs on hello shard map.</span></span> <span data-ttu-id="cda91-188">Hello poniższy przykład przedstawia hello korzystanie z tych interfejsów API danego niezależnych Mapa menedżera obiektu smm:</span><span class="sxs-lookup"><span data-stu-id="cda91-188">hello following example illustrates hello use of these APIs on a given shard map manager object smm:</span></span> 

    // Create hello schema annotations 
    SchemaInfo schemaInfo = new SchemaInfo(); 

    // Reference tables 
    schemaInfo.Add(new ReferenceTableInfo("dbo", "region")); 
    schemaInfo.Add(new ReferenceTableInfo("dbo", "nation")); 

    // Sharded tables 
    schemaInfo.Add(new ShardedTableInfo("dbo", "customer", "C_CUSTKEY")); 
    schemaInfo.Add(new ShardedTableInfo("dbo", "orders", "O_CUSTKEY")); 

    // Publish 
    smm.GetSchemaInfoCollection().Add(Configuration.ShardMapName, schemaInfo); 

<span data-ttu-id="cda91-189">tabele Hello "region" i "uprzywilejowania" są zdefiniowane jako tabele odwołań i zostaną skopiowane z operacji przenoszenia podziału/merge.</span><span class="sxs-lookup"><span data-stu-id="cda91-189">hello tables ‘region’ and ‘nation’ are defined as reference tables and will be copied with split/merge/move operations.</span></span> <span data-ttu-id="cda91-190">"klient" i "zamówienia" z kolei są definiowane jako podzielonej tabel.</span><span class="sxs-lookup"><span data-stu-id="cda91-190">‘customer’ and ‘orders’ in turn are defined as sharded tables.</span></span> <span data-ttu-id="cda91-191">C_CUSTKEY i O_CUSTKEY stanowią hello dzielenia na fragmenty klucza.</span><span class="sxs-lookup"><span data-stu-id="cda91-191">C_CUSTKEY and O_CUSTKEY serve as hello sharding key.</span></span> 

<span data-ttu-id="cda91-192">**Integralność referencyjna**</span><span class="sxs-lookup"><span data-stu-id="cda91-192">**Referential Integrity**</span></span>

<span data-ttu-id="cda91-193">Usługa scalania podziału Hello analizuje zależności między tabelami i używa relacje klucza obcego klucza podstawowego toostage hello operacji przenoszenia tabele odwołań i shardlets.</span><span class="sxs-lookup"><span data-stu-id="cda91-193">hello split-merge service analyzes dependencies between tables and uses foreign key-primary key relationships toostage hello operations for moving reference tables and shardlets.</span></span> <span data-ttu-id="cda91-194">Ogólnie rzecz biorąc tabele odwołań są kopiowane najpierw w kolejności zależności, a następnie shardlets są kopiowane w kolejności ich zależności w ramach każdej partii.</span><span class="sxs-lookup"><span data-stu-id="cda91-194">In general, reference tables are copied first in dependency order, then shardlets are copied in order of their dependencies within each batch.</span></span> <span data-ttu-id="cda91-195">Jest to konieczne, aby klucz podstawowy klucz OBCY ograniczenia niezależnych docelowy hello są honorowane jako dociera hello nowych danych.</span><span class="sxs-lookup"><span data-stu-id="cda91-195">This is necessary so that FK-PK constraints on hello target shard are honored as hello new data arrives.</span></span> 

<span data-ttu-id="cda91-196">**Spójność mapy niezależnego fragmentu i ostatecznego zakończenia**</span><span class="sxs-lookup"><span data-stu-id="cda91-196">**Shard Map Consistency and Eventual Completion**</span></span>

<span data-ttu-id="cda91-197">Hello występowania błędów usługi scalania podziału hello wznawia działania po awarii dowolnego i toocomplete celem jest w toku żądania.</span><span class="sxs-lookup"><span data-stu-id="cda91-197">In hello presence of failures, hello split-merge service resumes operations after any outage and aims toocomplete any in progress requests.</span></span> <span data-ttu-id="cda91-198">Jednak może być sytuacjach nieodwracalny, np. przypadku utracenia lub naruszony naprawić hello docelowy identyfikator niezależnego fragmentu.</span><span class="sxs-lookup"><span data-stu-id="cda91-198">However, there may be unrecoverable situations, e.g., when hello target shard is lost or compromised beyond repair.</span></span> <span data-ttu-id="cda91-199">W tych warunkach niektórych shardlets, które były zaplanowane przenieść toobe mogą nadal tooreside na powitania niezależnych źródła.</span><span class="sxs-lookup"><span data-stu-id="cda91-199">Under those circumstances, some shardlets that were supposed toobe moved may continue tooreside on hello source shard.</span></span> <span data-ttu-id="cda91-200">Usługa Hello gwarantuje, że shardlet mapowania są aktualizowane wyłącznie po hello niezbędne dane zostały pomyślnie skopiowane toohello docelowej.</span><span class="sxs-lookup"><span data-stu-id="cda91-200">hello service ensures that shardlet mappings are only updated after hello necessary data has been successfully copied toohello target.</span></span> <span data-ttu-id="cda91-201">Shardlets są usuwane tylko w źródle powitania po wszystkie swoje dane zostały skopiowane toohello docelowych i mapowania odpowiedniego hello zostały pomyślnie zaktualizowane.</span><span class="sxs-lookup"><span data-stu-id="cda91-201">Shardlets are only deleted on hello source once all their data has been copied toohello target and hello corresponding mappings have been updated successfully.</span></span> <span data-ttu-id="cda91-202">operacji usuwania Hello odbywa się w tle hello podczas zakresu hello jest w trybie online na powitania docelowy identyfikator niezależnego fragmentu.</span><span class="sxs-lookup"><span data-stu-id="cda91-202">hello deletion operation happens in hello background while hello range is already online on hello target shard.</span></span> <span data-ttu-id="cda91-203">Usługa scalania podziału Hello zawsze gwarantuje poprawność mapowania hello przechowywane w mapie niezależnego fragmentu hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-203">hello split-merge service always ensures correctness of hello mappings stored in hello shard map.</span></span>

## <a name="hello-split-merge-user-interface"></a><span data-ttu-id="cda91-204">Interfejs użytkownika scalania podziału Hello</span><span class="sxs-lookup"><span data-stu-id="cda91-204">hello split-merge user interface</span></span>
<span data-ttu-id="cda91-205">pakiet usługi scalania podziału Hello obejmuje rolę procesu roboczego oraz roli sieci web.</span><span class="sxs-lookup"><span data-stu-id="cda91-205">hello split-merge service package includes a worker role and a web role.</span></span> <span data-ttu-id="cda91-206">rola sieci web Hello jest żądań scalania podziału toosubmit używane w sposób interaktywny.</span><span class="sxs-lookup"><span data-stu-id="cda91-206">hello web role is used toosubmit split-merge requests in an interactive way.</span></span> <span data-ttu-id="cda91-207">Witaj główne składniki interfejsu użytkownika hello są następujące:</span><span class="sxs-lookup"><span data-stu-id="cda91-207">hello main components of hello user interface are as follows:</span></span>

* <span data-ttu-id="cda91-208">Typ operacji: typ operacji hello jest przycisku radiowego, która kontroluje hello rodzaj działania wykonywane przez usługę powitania dla tego żądania.</span><span class="sxs-lookup"><span data-stu-id="cda91-208">Operation Type: hello operation type is a radio button that controls hello kind of operation performed by hello service for this request.</span></span> <span data-ttu-id="cda91-209">Można wybrać hello podziału, scalanie i Przenieś scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="cda91-209">You can choose between hello split, merge and move scenarios.</span></span> <span data-ttu-id="cda91-210">Można również anulować operację wcześniej zostało przesłane.</span><span class="sxs-lookup"><span data-stu-id="cda91-210">You can also cancel a previously submitted operation.</span></span> <span data-ttu-id="cda91-211">Można użyć podziału, Scal i Przenieś żądania zakresu niezależnego fragmentu mapowania.</span><span class="sxs-lookup"><span data-stu-id="cda91-211">You can use split, merge and move requests for range shard maps.</span></span> <span data-ttu-id="cda91-212">Lista niezależnych mapuje tylko operacji przenoszenia pomocy technicznej.</span><span class="sxs-lookup"><span data-stu-id="cda91-212">List shard maps only support move operations.</span></span>
* <span data-ttu-id="cda91-213">Mapa niezależnego fragmentu: hello następnej sekcji żądania parametry obejmują informacji dotyczących mapy niezależnego fragmentu hello i bazy danych hello hosting mapy niezależnego fragmentu.</span><span class="sxs-lookup"><span data-stu-id="cda91-213">Shard Map: hello next section of request parameters cover information about hello shard map and hello database hosting your shard map.</span></span> <span data-ttu-id="cda91-214">W szczególności należy tooprovide hello nazwę serwera bazy danych SQL Azure hello i obsługi hello shardmap bazy danych, poświadczenia tooconnect toohello niezależnych zamapować bazy danych, a koniec hello nazwa hello niezależnego fragmentu mapowania.</span><span class="sxs-lookup"><span data-stu-id="cda91-214">In particular, you need tooprovide hello name of hello Azure SQL Database server and database hosting hello shardmap, credentials tooconnect toohello shard map database, and finally hello name of hello shard map.</span></span> <span data-ttu-id="cda91-215">Obecnie operację hello akceptuje tylko jednego zestawu poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="cda91-215">Currently, hello operation only accepts a single set of credentials.</span></span> <span data-ttu-id="cda91-216">Wymagane są poświadczenia wystarczające uprawnienia toohave tooperform zmienia toohello niezależnego fragmentu mapy, a także toohello dane użytkowników na powitania fragmentów.</span><span class="sxs-lookup"><span data-stu-id="cda91-216">These credentials need toohave sufficient permissions tooperform changes toohello shard map as well as toohello user data on hello shards.</span></span>
* <span data-ttu-id="cda91-217">Zakres źródła (dzielenie i scalanie): operacja dzielenie i scalanie przetwarza zakresu, używając swojego klucza niski i wysoki.</span><span class="sxs-lookup"><span data-stu-id="cda91-217">Source Range (split and merge): A split and merge operation processes a range using its low and high key.</span></span> <span data-ttu-id="cda91-218">toospecify operację, podając niepowiązanego wysoka wartość klucza, sprawdź pole wyboru "max jest wysoka wartość klucza" hello i hello wysokiej klucza pole powinno pozostać puste.</span><span class="sxs-lookup"><span data-stu-id="cda91-218">toospecify an operation with an unbounded high key value, check hello “High key is max” check box and leave hello high key field empty.</span></span> <span data-ttu-id="cda91-219">Hello zakres wartości kluczy, które można określić czy nie potrzeba tooprecisely dopasowania mapowania i jego granice na mapie niezależnego fragmentu.</span><span class="sxs-lookup"><span data-stu-id="cda91-219">hello range key values that you specify do not need tooprecisely match a mapping and its boundaries in your shard map.</span></span> <span data-ttu-id="cda91-220">Jeśli nie określono żadnych granic zakresu na wszystkich usługi hello wywnioskuje hello najbliższego zakresu można automatycznie.</span><span class="sxs-lookup"><span data-stu-id="cda91-220">If you do not specify any range boundaries at all hello service will infer hello closest range for you automatically.</span></span> <span data-ttu-id="cda91-221">Można użyć hello GetMappings.ps1 PowerShell skryptu tooretrieve hello bieżące mapowania na mapie danego niezależnego fragmentu.</span><span class="sxs-lookup"><span data-stu-id="cda91-221">You can use hello GetMappings.ps1 PowerShell script tooretrieve hello current mappings in a given shard map.</span></span>
* <span data-ttu-id="cda91-222">Zachowanie źródła podziału (podział): dla operacji podziału, zdefiniuj hello toosplit punktu hello źródłowy zakres.</span><span class="sxs-lookup"><span data-stu-id="cda91-222">Split Source Behavior (split): For split operations, define hello point toosplit hello source range.</span></span> <span data-ttu-id="cda91-223">Aby to zrobić, podając hello dzielenia na fragmenty klucza, którym chcesz hello podzielić toooccur.</span><span class="sxs-lookup"><span data-stu-id="cda91-223">You do this by providing hello sharding key where you want hello split toooccur.</span></span> <span data-ttu-id="cda91-224">Przycisk radiowy hello Określ, czy hello dolnej części hello toomove zakresu (z wyjątkiem podziału klucza hello), czy czy ma toomove górnej części hello (w tym hello klucza podziału).</span><span class="sxs-lookup"><span data-stu-id="cda91-224">Use hello radio button specify whether you want hello lower part of hello range (excluding hello split key) toomove, or whether you want hello upper part toomove (including hello split key).</span></span>
* <span data-ttu-id="cda91-225">Źródło Shardlet (przenoszenia): Przenieś operacji różnią się od podziału lub scalić operacji, ponieważ nie wymagają źródłem hello toodescribe zakresu.</span><span class="sxs-lookup"><span data-stu-id="cda91-225">Source Shardlet (move): Move operations are different from split or merge operations as they do not require a range toodescribe hello source.</span></span> <span data-ttu-id="cda91-226">Źródło przenoszenia jest po prostu identyfikowany przez wartość klucza dzielenia na fragmenty hello zaplanowanie toomove.</span><span class="sxs-lookup"><span data-stu-id="cda91-226">A source for move is simply identified by hello sharding key value that you plan toomove.</span></span>
* <span data-ttu-id="cda91-227">Docelowy identyfikator niezależnego fragmentu (podział): po hello informacji podano w źródle hello operacji podziału, należy toodefine, w którym mają zostać skopiowane hello danych toobe tooby udostępnienie hello bazy danych SQL Azure serwera i nazwę bazy danych dla obiektu docelowego hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-227">Target Shard (split): Once you have provided hello information on hello source of your split operation, you need toodefine where you want hello data toobe copied tooby providing hello Azure SQL Db server and database name for hello target.</span></span>
* <span data-ttu-id="cda91-228">Zakres docelowy (scalanie): operacji scalania przenieść shardlets tooan istniejący identyfikator niezależnego fragmentu.</span><span class="sxs-lookup"><span data-stu-id="cda91-228">Target Range (merge): Merge operations move shardlets tooan existing shard.</span></span> <span data-ttu-id="cda91-229">Zapewniając granice zakresu hello hello istniejącego zakresu, który ma toomerge z należy zidentyfikować hello istniejących niezależnego fragmentu.</span><span class="sxs-lookup"><span data-stu-id="cda91-229">You identify hello existing shard by providing hello range boundaries of hello existing range that you want toomerge with.</span></span>
* <span data-ttu-id="cda91-230">Rozmiar partii: formanty rozmiaru partii hello hello liczba shardlets, które przechodzą w tryb offline w czasie przenoszenia danych hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-230">Batch Size: hello batch size controls hello number of shardlets that will go offline at a time during hello data movement.</span></span> <span data-ttu-id="cda91-231">Jest to wartość całkowita gdzie użyciem mniejszej wartości są poufne toolong okresy przestojów w przypadku shardlets.</span><span class="sxs-lookup"><span data-stu-id="cda91-231">This is an integer value where you can use smaller values when you are sensitive toolong periods of downtime for shardlets.</span></span> <span data-ttu-id="cda91-232">Większe wartości spowoduje zwiększenie hello czas danego shardlet w trybie offline, ale może zwiększyć wydajność.</span><span class="sxs-lookup"><span data-stu-id="cda91-232">Larger values will increase hello time that a given shardlet is offline but may improve performance.</span></span>
* <span data-ttu-id="cda91-233">Identyfikator operacji (anulować): Jeśli masz wykonywana operacja, która nie jest już potrzebne, można anulować operację hello podając jego identyfikator operacji w tym polu.</span><span class="sxs-lookup"><span data-stu-id="cda91-233">Operation Id (Cancel): If you have an ongoing operation that is no longer needed, you can cancel hello operation by providing its operation ID in this field.</span></span> <span data-ttu-id="cda91-234">Identyfikator operacji hello można pobrać z tabeli stan żądania hello (zobacz sekcja 8.1) lub z danych wyjściowych hello w przeglądarce sieci web hello której przesłano Żądanie hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-234">You can retrieve hello operation ID from hello request status table (see Section 8.1) or from hello output in hello web browser where you submitted hello request.</span></span>

## <a name="requirements-and-limitations"></a><span data-ttu-id="cda91-235">Wymagania i ograniczenia</span><span class="sxs-lookup"><span data-stu-id="cda91-235">Requirements and Limitations</span></span>
<span data-ttu-id="cda91-236">Bieżąca implementacja usługi scalania podziału hello Hello jest toohello podmiotu następujące wymagania i ograniczenia:</span><span class="sxs-lookup"><span data-stu-id="cda91-236">hello current implementation of hello split-merge service is subject toohello following requirements and limitations:</span></span> 

* <span data-ttu-id="cda91-237">odłamków Hello muszą tooexist i zarejestrowany w mapie niezależnego fragmentu hello, zanim będzie można wykonać operacji scalania podziału na tych fragmentów.</span><span class="sxs-lookup"><span data-stu-id="cda91-237">hello shards need tooexist and be registered in hello shard map before a split-merge operation on these shards can be performed.</span></span> 
* <span data-ttu-id="cda91-238">Usługa Hello nie tworzy tabele lub inne obiekty bazy danych, które automatycznie w ramach operacji.</span><span class="sxs-lookup"><span data-stu-id="cda91-238">hello service does not create tables or any other database objects automatically as part of its operations.</span></span> <span data-ttu-id="cda91-239">Oznacza to, hello schematu dla wszystkich podzielonej tabel, które odwołują się do tabel muszą tooexist hello docelowy niezależnego fragmentu tooany uprzedniego podziału/merge/przeniesienia operacji.</span><span class="sxs-lookup"><span data-stu-id="cda91-239">This means that hello schema for all sharded tables and reference tables need tooexist on hello target shard prior tooany split/merge/move operation.</span></span> <span data-ttu-id="cda91-240">Podzielonej tabele są w szczególności toobe wymagane w zakresie hello skutkującej toobe dodane przez operację podziału/merge/przeniesienia shardlets nowy pusty.</span><span class="sxs-lookup"><span data-stu-id="cda91-240">Sharded tables in particular are required toobe empty in hello range where new shardlets are toobe added by a split/merge/move operation.</span></span> <span data-ttu-id="cda91-241">W przeciwnym razie hello operacja zakończy się niepowodzeniem sprawdzania spójności początkowej hello na powitania docelowy identyfikator niezależnego fragmentu.</span><span class="sxs-lookup"><span data-stu-id="cda91-241">Otherwise, hello operation will fail hello initial consistency check on hello target shard.</span></span> <span data-ttu-id="cda91-242">Należy pamiętać, że danych referencyjnych jest kopiowana tylko, jeśli tabela referencyjna hello jest pusta i czy nie występują żadne spójności gwarantuje również z uwzględnieniem tooother równoczesnych zapisu na powitania tabele odwołań.</span><span class="sxs-lookup"><span data-stu-id="cda91-242">Also note that reference data is only copied if hello reference table is empty and that there are no consistency guarantees with regard tooother concurrent write operations on hello reference tables.</span></span> <span data-ttu-id="cda91-243">Jest to zalecane: podczas uruchamiania operacji podziału/merge, żadne inne operacje zapisu zmiany toohello tabele odwołań.</span><span class="sxs-lookup"><span data-stu-id="cda91-243">We recommend this: when running split/merge operations, no other write operations make changes toohello reference tables.</span></span>
* <span data-ttu-id="cda91-244">Usługa Hello opiera się na tożsamości wiersza unikatowy indeks lub klucz, który obejmuje hello dzielenia na fragmenty klucza tooimprove wydajności i niezawodności dla dużych shardlets.</span><span class="sxs-lookup"><span data-stu-id="cda91-244">hello service relies on row identity established by a unique index or key that includes hello sharding key tooimprove performance and reliability for large shardlets.</span></span> <span data-ttu-id="cda91-245">Dzięki temu dane toomove usługi hello w jeszcze bardziej szczegółowy od właśnie hello dzielenia na fragmenty wartości klucza.</span><span class="sxs-lookup"><span data-stu-id="cda91-245">This allows hello service toomove data at an even finer granularity than just hello sharding key value.</span></span> <span data-ttu-id="cda91-246">Dzięki temu tooreduce hello maksymalną ilość miejsca w dzienniku i blokad, które są wymagane podczas operacji hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-246">This helps tooreduce hello maximum amount of log space and locks that are required during hello operation.</span></span> <span data-ttu-id="cda91-247">Należy rozważyć utworzenie unikatowego indeksu lub klucza podstawowego, w tym hello dzielenia na fragmenty klucza w danej tabeli, jeśli chcesz, aby toouse tę tabelę z żądaniami podziału/merge/przeniesienia.</span><span class="sxs-lookup"><span data-stu-id="cda91-247">Consider creating a unique index or a primary key including hello sharding key on a given table if you want toouse that table with split/merge/move requests.</span></span> <span data-ttu-id="cda91-248">Ze względu na wydajność hello dzielenia na fragmenty klucz powinien być hello wiodące kolumny hello klucz lub indeks hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-248">For performance reasons, hello sharding key should be hello leading column in hello key or hello index.</span></span>
* <span data-ttu-id="cda91-249">Trakcie hello przetwarzania żądania niektóre dane shardlet mogą występować zarówno na źródłowym hello i hello docelowy identyfikator niezależnego fragmentu.</span><span class="sxs-lookup"><span data-stu-id="cda91-249">During hello course of request processing, some shardlet data may be present both on hello source and hello target shard.</span></span> <span data-ttu-id="cda91-250">Jest to niezbędne tooprotect przed awariami podczas przemieszczania shardlet hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-250">This is necessary tooprotect against failures during hello shardlet movement.</span></span> <span data-ttu-id="cda91-251">Hello integracji podziału scalanie z mapą niezależnego fragmentu hello gwarantuje, że połączeń za pośrednictwem hello danych zależnych routingu interfejsów API przy użyciu hello **OpenConnectionForKey** metody na mapie niezależnego fragmentu hello nie ma żadnych niespójne pośrednich stanów.</span><span class="sxs-lookup"><span data-stu-id="cda91-251">hello integration of split-merge with hello shard map ensures that connections through hello data dependent routing APIs using hello **OpenConnectionForKey** method on hello shard map do not see any inconsistent intermediate states.</span></span> <span data-ttu-id="cda91-252">Jednak jeśli łączącego źródło toohello lub hello rozpoczęta odłamków bez użycia hello **OpenConnectionForKey** metody niespójne pośrednich stanów mogą być widoczne, gdy będą żądań move podziału/merge.</span><span class="sxs-lookup"><span data-stu-id="cda91-252">However, when connecting toohello source or hello target shards without using hello **OpenConnectionForKey** method, inconsistent intermediate states might be visible when split/merge/move requests are going on.</span></span> <span data-ttu-id="cda91-253">Połączenia te mogą być wyświetlane wyniki częściowe lub zduplikowane w zależności od czasu hello lub podstawowego połączenia hello hello niezależnego fragmentu.</span><span class="sxs-lookup"><span data-stu-id="cda91-253">These connections may show partial or duplicate results depending on hello timing or hello shard underlying hello connection.</span></span> <span data-ttu-id="cda91-254">To ograniczenie zawiera obecnie połączeń hello przez elastycznego skalowania kilku-Shard-zapytania.</span><span class="sxs-lookup"><span data-stu-id="cda91-254">This limitation currently includes hello connections made by Elastic Scale Multi-Shard-Queries.</span></span>
* <span data-ttu-id="cda91-255">Witaj bazy danych metadanych dla usługi scalania podziału hello nie może być udostępniany między różne role.</span><span class="sxs-lookup"><span data-stu-id="cda91-255">hello metadata database for hello split-merge service must not be shared between different roles.</span></span> <span data-ttu-id="cda91-256">Na przykład rola hello scalania podziału usługa działająca w tymczasowej bazy danych metadanych tooa toopoint potrzeb niż hello produkcji roli.</span><span class="sxs-lookup"><span data-stu-id="cda91-256">For example, a role of hello split-merge service running in staging needs toopoint tooa different metadata database than hello production role.</span></span>

## <a name="billing"></a><span data-ttu-id="cda91-257">Rozliczenia</span><span class="sxs-lookup"><span data-stu-id="cda91-257">Billing</span></span>
<span data-ttu-id="cda91-258">Usługa scalania podziału Hello działa jako usługa w chmurze w ramach subskrypcji Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="cda91-258">hello split-merge service runs as a cloud service in your Microsoft Azure subscription.</span></span> <span data-ttu-id="cda91-259">W związku z tym dla usługi w chmurze opłaty za wystąpienia tooyour hello usługi.</span><span class="sxs-lookup"><span data-stu-id="cda91-259">Therefore charges for cloud services apply tooyour instance of hello service.</span></span> <span data-ttu-id="cda91-260">Jeśli często wykonać operacji przenoszenia podziału/merge, zaleca się usunąć usługi w chmurze podziału scalania.</span><span class="sxs-lookup"><span data-stu-id="cda91-260">Unless you frequently perform split/merge/move operations, we recommend you delete your split-merge cloud service.</span></span> <span data-ttu-id="cda91-261">Zapisuje kosztów uruchomiona albo wdrożyć wystąpienia usługi chmury.</span><span class="sxs-lookup"><span data-stu-id="cda91-261">That saves costs for running or deployed cloud service instances.</span></span> <span data-ttu-id="cda91-262">Można ponownie wdrożyć i rozpocząć konfigurację łatwo do uruchomienia przy każdym tooperform dzielenie i scalanie operacji.</span><span class="sxs-lookup"><span data-stu-id="cda91-262">You can re-deploy and start your readily runnable configuration whenever you need tooperform split or merge operations.</span></span> 

## <a name="monitoring"></a><span data-ttu-id="cda91-263">Monitorowanie</span><span class="sxs-lookup"><span data-stu-id="cda91-263">Monitoring</span></span>
### <a name="status-tables"></a><span data-ttu-id="cda91-264">Stan tabel</span><span class="sxs-lookup"><span data-stu-id="cda91-264">Status tables</span></span>
<span data-ttu-id="cda91-265">Hello scalania podziału usługa zapewnia hello **stan żądania** tabeli w bazie danych magazynu metadanych hello monitorowania została zakończona i bieżących żądań.</span><span class="sxs-lookup"><span data-stu-id="cda91-265">hello split-merge Service provides hello **RequestStatus** table in hello metadata store database for monitoring of completed and ongoing requests.</span></span> <span data-ttu-id="cda91-266">Witaj tabela zawiera wiersz dla każdego żądania podziału scalania, który został przesłany toothis wystąpienie usługi scalania podziału hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-266">hello table lists a row for each split-merge request that has been submitted toothis instance of hello split-merge service.</span></span> <span data-ttu-id="cda91-267">Udostępnia następujące informacje dla każdego żądania hello:</span><span class="sxs-lookup"><span data-stu-id="cda91-267">It gives hello following information for each request:</span></span>

* <span data-ttu-id="cda91-268">**Sygnatura czasowa**: hello godzinę i datę rozpoczęcia hello żądania.</span><span class="sxs-lookup"><span data-stu-id="cda91-268">**Timestamp**: hello time and date when hello request was started.</span></span>
* <span data-ttu-id="cda91-269">**OperationId**: A identyfikator GUID, który unikatowo identyfikuje hello żądania.</span><span class="sxs-lookup"><span data-stu-id="cda91-269">**OperationId**: A GUID that uniquely identifies hello request.</span></span> <span data-ttu-id="cda91-270">To żądanie może być również używane toocancel hello operacji jest nadal uruchomione.</span><span class="sxs-lookup"><span data-stu-id="cda91-270">This request can also be used toocancel hello operation while it is still ongoing.</span></span>
* <span data-ttu-id="cda91-271">**Stan**: hello bieżący stan żądania hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-271">**Status**: hello current state of hello request.</span></span> <span data-ttu-id="cda91-272">Bieżące żądania również wyświetlane hello Bieżąca faza, w których hello jest żądanie.</span><span class="sxs-lookup"><span data-stu-id="cda91-272">For ongoing requests, it also lists hello current phase in which hello request is.</span></span>
* <span data-ttu-id="cda91-273">**CancelRequest**: flagę wskazującą, czy hello żądanie zostało anulowane.</span><span class="sxs-lookup"><span data-stu-id="cda91-273">**CancelRequest**: A flag that indicates whether hello request has been cancelled.</span></span>
* <span data-ttu-id="cda91-274">**Postęp**: oszacowanie przez procent wykonania operacji hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-274">**Progress**: A percentage estimate of completion for hello operation.</span></span> <span data-ttu-id="cda91-275">Wartość 50 wskazuje, że operacja hello jest wykonano około 50%.</span><span class="sxs-lookup"><span data-stu-id="cda91-275">A value of 50 indicates that hello operation is approximately 50% complete.</span></span>
* <span data-ttu-id="cda91-276">**Szczegóły**: wartości XML, która zapewnia bardziej szczegółowy raport postępu.</span><span class="sxs-lookup"><span data-stu-id="cda91-276">**Details**: An XML value that provides a more detailed progress report.</span></span> <span data-ttu-id="cda91-277">Raport dotyczący postępu Hello jest okresowo aktualizowany jako zestawy wierszy są kopiowane z tootarget źródła.</span><span class="sxs-lookup"><span data-stu-id="cda91-277">hello progress report is periodically updated as sets of rows are copied from source tootarget.</span></span> <span data-ttu-id="cda91-278">W przypadku awarii lub wyjątki ta kolumna zawiera bardziej szczegółowe informacje dotyczące niepowodzenia hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-278">In case of failures or exceptions, this column also includes more detailed information about hello failure.</span></span>

### <a name="azure-diagnostics"></a><span data-ttu-id="cda91-279">Diagnostyka Azure</span><span class="sxs-lookup"><span data-stu-id="cda91-279">Azure Diagnostics</span></span>
<span data-ttu-id="cda91-280">Usługa scalania podziału Hello używa diagnostyki Azure oparte na 2.5 zestawu SDK platformy Azure, monitorowania i diagnostyki.</span><span class="sxs-lookup"><span data-stu-id="cda91-280">hello split-merge service uses Azure Diagnostics based on Azure SDK 2.5 for monitoring and diagnostics.</span></span> <span data-ttu-id="cda91-281">Konfiguracją hello diagnostyki opisane tutaj: [Włączanie diagnostyki w usług Azure Cloud Services i maszyn wirtualnych](../cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="cda91-281">You control hello diagnostics configuration as explained here: [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md).</span></span> <span data-ttu-id="cda91-282">Witaj pakiet do pobrania zawiera dwie konfiguracje diagnostyki — jeden dla roli sieci web hello i jeden dla roli proces roboczy hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-282">hello download package includes two diagnostics configurations - one for hello web role and one for hello worker role.</span></span> <span data-ttu-id="cda91-283">Te konfiguracje diagnostyki dla usługi hello postępuj zgodnie ze wskazówkami hello [podstawy usługi w chmurze w systemie Microsoft Azure](https://code.msdn.microsoft.com/windowsazure/Cloud-Service-Fundamentals-4ca72649).</span><span class="sxs-lookup"><span data-stu-id="cda91-283">These diagnostics configurations for hello service follow hello guidance from [Cloud Service Fundamentals in Microsoft Azure](https://code.msdn.microsoft.com/windowsazure/Cloud-Service-Fundamentals-4ca72649).</span></span> <span data-ttu-id="cda91-284">Zawiera toolog definicje hello liczniki wydajności, dzienniki programu IIS, dzienniki zdarzeń systemu Windows i dzienniki zdarzeń aplikacji podziału scalania.</span><span class="sxs-lookup"><span data-stu-id="cda91-284">It includes hello definitions toolog Performance Counters, IIS logs, Windows Event Logs, and split-merge application event logs.</span></span> 

## <a name="deploy-diagnostics"></a><span data-ttu-id="cda91-285">Wdrażanie diagnostyki</span><span class="sxs-lookup"><span data-stu-id="cda91-285">Deploy Diagnostics</span></span>
<span data-ttu-id="cda91-286">tooenable monitorowania i diagnostyki dla role sieci web i proces roboczy hello udostępniane przez pakiet NuGet hello, uruchom następujące polecenia przy użyciu programu Azure PowerShell hello za pomocą Konfiguracja diagnostyczna hello:</span><span class="sxs-lookup"><span data-stu-id="cda91-286">tooenable monitoring and diagnostics using hello diagnostic configuration for hello web and worker roles provided by hello NuGet package, run hello following commands using Azure PowerShell:</span></span> 

    $storage_name = "<YourAzureStorageAccount>" 

    $key = "<YourAzureStorageAccountKey" 

    $storageContext = New-AzureStorageContext -StorageAccountName $storage_name -StorageAccountKey $key  


    $config_path = "<YourFilePath>\SplitMergeWebContent.diagnostics.xml" 

    $service_name = "<YourCloudServiceName>" 

    Set-AzureServiceDiagnosticsExtension -StorageContext $storageContext -DiagnosticsConfigurationPath $config_path -ServiceName $service_name -Slot Production -Role "SplitMergeWeb" 


    $config_path = "<YourFilePath>\SplitMergeWorkerContent.diagnostics.xml" 

    $service_name = "<YourCloudServiceName>" 

    Set-AzureServiceDiagnosticsExtension -StorageContext $storageContext -DiagnosticsConfigurationPath $config_path -ServiceName $service_name -Slot Production -Role "SplitMergeWorker" 

<span data-ttu-id="cda91-287">Można znaleźć więcej informacji na temat tooconfigure i wdrażanie ustawień diagnostycznych tutaj: [Włączanie diagnostyki w usług Azure Cloud Services i maszyn wirtualnych](../cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="cda91-287">You can find more information on how tooconfigure and deploy diagnostics settings here: [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md).</span></span> 

## <a name="retrieve-diagnostics"></a><span data-ttu-id="cda91-288">Pobrać diagnostyki</span><span class="sxs-lookup"><span data-stu-id="cda91-288">Retrieve diagnostics</span></span>
<span data-ttu-id="cda91-289">Łatwo dostępne diagnostycznej hello Eksploratora serwera w usłudze Visual Studio w hello Azure części drzewa Eksploratora serwera hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-289">You can easily access your diagnostics from hello Visual Studio Server Explorer in hello Azure part of hello Server Explorer tree.</span></span> <span data-ttu-id="cda91-290">Otwórz wystąpienie programu Visual Studio, a na pasku menu powitania kliknij widok i Eksploratora serwera.</span><span class="sxs-lookup"><span data-stu-id="cda91-290">Open a Visual Studio instance, and in hello menu bar click View, and Server Explorer.</span></span> <span data-ttu-id="cda91-291">Kliknij przycisk hello Azure ikona tooconnect tooyour subskrypcji platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="cda91-291">Click hello Azure icon tooconnect tooyour Azure subscription.</span></span> <span data-ttu-id="cda91-292">Następnie przejdź tooAzure -> magazynu -> <your storage account> -> WADLogsTable -> tabel.</span><span class="sxs-lookup"><span data-stu-id="cda91-292">Then navigate tooAzure -> Storage -> <your storage account> -> Tables -> WADLogsTable.</span></span> <span data-ttu-id="cda91-293">Aby uzyskać więcej informacji, zobacz [przeglądanie zasobami magazynu za pomocą Eksploratora serwera](http://msdn.microsoft.com/library/azure/ff683677.aspx).</span><span class="sxs-lookup"><span data-stu-id="cda91-293">For more information, see [Browsing Storage Resources with Server Explorer](http://msdn.microsoft.com/library/azure/ff683677.aspx).</span></span> 

![WADLogsTable][2]

<span data-ttu-id="cda91-295">Witaj WADLogsTable wyróżniane na powyższej ilustracji hello zawiera hello szczegółowe zdarzenia z dziennika aplikacji hello scalania podziału usługi.</span><span class="sxs-lookup"><span data-stu-id="cda91-295">hello WADLogsTable highlighted in hello figure above contains hello detailed events from hello split-merge service’s application log.</span></span> <span data-ttu-id="cda91-296">Należy zwrócić uwagę tej domyślnej konfiguracji hello hello pobrany pakiet jest przeznaczone dla wdrożenia produkcyjnego.</span><span class="sxs-lookup"><span data-stu-id="cda91-296">Note that hello default configuration of hello downloaded package is geared towards a production deployment.</span></span> <span data-ttu-id="cda91-297">W związku z tym interwał powitania jaką dzienniki i liczniki są pobierane z wystąpień usługi hello jest duża (5 minut).</span><span class="sxs-lookup"><span data-stu-id="cda91-297">Therefore hello interval at which logs and counters are pulled from hello service instances is large (5 minutes).</span></span> <span data-ttu-id="cda91-298">Badań i rozwoju niższe interwał powitania dostosowując hello ustawienia diagnostyki sieci web hello lub tooyour roli procesu roboczego hello musi.</span><span class="sxs-lookup"><span data-stu-id="cda91-298">For test and development, lower hello interval by adjusting hello diagnostics settings of hello web or hello worker role tooyour needs.</span></span> <span data-ttu-id="cda91-299">Kliknij prawym przyciskiem myszy na powitania roli w hello Eksploratora serwera w usłudze Visual Studio (zobacz powyżej), a następnie Dostosuj hello Transfer okres, w oknie dialogowym hello ustawień konfiguracji diagnostyki hello:</span><span class="sxs-lookup"><span data-stu-id="cda91-299">Right-click on hello role in hello Visual Studio Server Explorer (see above) and then adjust hello Transfer Period in hello dialog for hello Diagnostics configuration settings:</span></span> 

![Konfiguracja][3]

## <a name="performance"></a><span data-ttu-id="cda91-301">Wydajność</span><span class="sxs-lookup"><span data-stu-id="cda91-301">Performance</span></span>
<span data-ttu-id="cda91-302">Ogólnie rzecz biorąc lepszą wydajność jest toobe z hello nowszą, oczekiwane więcej wydajności warstw usług w bazie danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="cda91-302">In general, better performance is toobe expected from hello higher, more performant service tiers in Azure SQL Database.</span></span> <span data-ttu-id="cda91-303">Wyższy we/wy, Procesor i pamięć przydziały hello wyższych warstw usług korzystają z kopiowaniem masowym hello i Usuń operacje, które hello używa usługi podziału scalania.</span><span class="sxs-lookup"><span data-stu-id="cda91-303">Higher IO, CPU and memory allocations for hello higher service tiers benefit hello bulk copy and delete operations that hello split-merge service uses.</span></span> <span data-ttu-id="cda91-304">Z tego powodu należy zwiększyć warstwy usług hello tylko dla tych baz danych zdefiniowana, ograniczony okres czasu.</span><span class="sxs-lookup"><span data-stu-id="cda91-304">For that reason, increase hello service tier just for those databases for a defined, limited period of time.</span></span>

<span data-ttu-id="cda91-305">Usługa Hello również wykonuje zapytania weryfikacji w ramach normalnych operacji.</span><span class="sxs-lookup"><span data-stu-id="cda91-305">hello service also performs validation queries as part of its normal operations.</span></span> <span data-ttu-id="cda91-306">Te zapytania weryfikacji sprawdzić nieoczekiwany obecności danych w zakresie docelowego hello i upewnij się, że wszelkie operacje podziału/merge/przeniesienia zaczyna się w spójnym stanie.</span><span class="sxs-lookup"><span data-stu-id="cda91-306">These validation queries check for unexpected presence of data in hello target range and ensure that any split/merge/move operation starts from a consistent state.</span></span> <span data-ttu-id="cda91-307">Te wszystkie zapytania pracy klucza zakresach dzielenia na fragmenty określonych przez zakres hello hello działania i rozmiar partii hello w ramach hello definicję żądania.</span><span class="sxs-lookup"><span data-stu-id="cda91-307">These queries all work over sharding key ranges defined by hello scope of hello operation and hello batch size provided as part of hello request definition.</span></span> <span data-ttu-id="cda91-308">Te zapytania wykonywane najlepiej, gdy indeks jest obecny, zawierającej klucz dzielenia na fragmenty hello hello wiodących kolumn.</span><span class="sxs-lookup"><span data-stu-id="cda91-308">These queries perform best when an index is present that has hello sharding key as hello leading column.</span></span> 

<span data-ttu-id="cda91-309">Ponadto właściwość unikatowości kluczem dzielenia na fragmenty hello jako kolumnę początku hello umożliwi toouse usługi hello zoptymalizowane metody, która ogranicza zużycie zasobów w zakresie miejsca w dzienniku i pamięci.</span><span class="sxs-lookup"><span data-stu-id="cda91-309">In addition, a uniqueness property with hello sharding key as hello leading column will allow hello service toouse an optimized approach that limits resource consumption in terms of log space and memory.</span></span> <span data-ttu-id="cda91-310">Ta właściwość unikatowości jest wymagana toomove rozmiary dużej ilości danych (zazwyczaj ponad 1GB).</span><span class="sxs-lookup"><span data-stu-id="cda91-310">This uniqueness property is required toomove large data sizes (typically above 1GB).</span></span> 

## <a name="how-tooupgrade"></a><span data-ttu-id="cda91-311">Jak tooupgrade</span><span class="sxs-lookup"><span data-stu-id="cda91-311">How tooupgrade</span></span>
1. <span data-ttu-id="cda91-312">Wykonaj kroki hello w [wdrożyć usługę scalania podziału](sql-database-elastic-scale-configure-deploy-split-and-merge.md).</span><span class="sxs-lookup"><span data-stu-id="cda91-312">Follow hello steps in [Deploy a split-merge service](sql-database-elastic-scale-configure-deploy-split-and-merge.md).</span></span>
2. <span data-ttu-id="cda91-313">Zmienianie pliku konfiguracji usługi chmury dla wdrożenia scalania podziału tooreflect hello nowej konfiguracji parametry.</span><span class="sxs-lookup"><span data-stu-id="cda91-313">Change your cloud service configuration file for your split-merge deployment tooreflect hello new configuration parameters.</span></span> <span data-ttu-id="cda91-314">Nowy parametr wymagany jest hello informacji na temat hello certyfikat używany do szyfrowania.</span><span class="sxs-lookup"><span data-stu-id="cda91-314">A new required parameter is hello information about hello certificate used for encryption.</span></span> <span data-ttu-id="cda91-315">Toodo łatwo jest toocompare hello nowego szablonu pliku konfiguracji z pobierania hello względem istniejącej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="cda91-315">An easy way toodo this is toocompare hello new configuration template file from hello download against your existing configuration.</span></span> <span data-ttu-id="cda91-316">Upewnij się, że możesz dodać ustawienia hello "DataEncryptionPrimaryCertificateThumbprint" i "DataEncryptionPrimary" hello sieci web i roli proces roboczy hello.</span><span class="sxs-lookup"><span data-stu-id="cda91-316">Make sure you add hello settings for “DataEncryptionPrimaryCertificateThumbprint” and “DataEncryptionPrimary” for both hello web and hello worker role.</span></span>
3. <span data-ttu-id="cda91-317">Przed wdrożeniem hello tooAzure aktualizacji, upewnij się, że wszystkie operacje aktualnie uruchomione podziału scalanie zostało ukończone.</span><span class="sxs-lookup"><span data-stu-id="cda91-317">Before deploying hello update tooAzure, ensure that all currently running split-merge operations have finished.</span></span> <span data-ttu-id="cda91-318">Można to łatwo zrobić badając hello stan żądania i PendingWorkflows tabele w bazie danych metadanych scalania podziału hello bieżących żądań.</span><span class="sxs-lookup"><span data-stu-id="cda91-318">You can easily do this by querying hello RequestStatus and PendingWorkflows tables in hello split-merge metadata database for ongoing requests.</span></span>
4. <span data-ttu-id="cda91-319">Aktualizowanie istniejącego wdrożenia usługi podziału scalanie w Twojej subskrypcji platformy Azure przy użyciu nowego pakietu hello i zaktualizowany plik konfiguracji chmury.</span><span class="sxs-lookup"><span data-stu-id="cda91-319">Update your existing cloud service deployment for split-merge in your Azure subscription with hello new package and your updated service configuration file.</span></span>

<span data-ttu-id="cda91-320">Nie trzeba tooprovision nowej bazy danych metadanych dla tooupgrade podziału scalania.</span><span class="sxs-lookup"><span data-stu-id="cda91-320">You do not need tooprovision a new metadata database for split-merge tooupgrade.</span></span> <span data-ttu-id="cda91-321">Witaj nowej wersji automatycznie zaktualizuje istniejących metadanych bazy danych toohello nowej wersji.</span><span class="sxs-lookup"><span data-stu-id="cda91-321">hello new version will automatically upgrade your existing metadata database toohello new version.</span></span> 

## <a name="best-practices--troubleshooting"></a><span data-ttu-id="cda91-322">Najlepsze rozwiązania i rozwiązywanie problemów</span><span class="sxs-lookup"><span data-stu-id="cda91-322">Best practices & troubleshooting</span></span>
* <span data-ttu-id="cda91-323">Zdefiniuj dzierżawcą testowym i wykonuje operacje podziału/merge/przeniesienia najważniejszych z dzierżawcą testowym hello między kilka fragmentów.</span><span class="sxs-lookup"><span data-stu-id="cda91-323">Define a test tenant and exercise your most important split/merge/move operations with hello test tenant across several shards.</span></span> <span data-ttu-id="cda91-324">Upewnij się, wszystkie metadane w którym jest zdefiniowany poprawnie mapy niezależnego fragmentu i że operacje hello narusza ograniczenia lub klucze obce.</span><span class="sxs-lookup"><span data-stu-id="cda91-324">Ensure that all metadata is defined correctly in your shard map and that hello operations do not violate constraints or foreign keys.</span></span>
* <span data-ttu-id="cda91-325">Rozmiar danych dzierżawy testu hello Keep powyżej hello maksymalnego rozmiaru danych dzierżawy największy tooensure pojawiły się nie rozmiar danych związane problemy.</span><span class="sxs-lookup"><span data-stu-id="cda91-325">Keep hello test tenant data size above hello maximum data size of your largest tenant tooensure you are not encountering data size related issues.</span></span> <span data-ttu-id="cda91-326">Dzięki temu można ocenić górna granica na powitania czas toomove pojedynczej dzierżawy wokół.</span><span class="sxs-lookup"><span data-stu-id="cda91-326">This helps you assess an upper bound on hello time it takes toomove a single tenant around.</span></span> 
* <span data-ttu-id="cda91-327">Upewnij się, że schemat zezwala na usuwanie.</span><span class="sxs-lookup"><span data-stu-id="cda91-327">Make sure that your schema allows deletions.</span></span> <span data-ttu-id="cda91-328">usługi scalania podziału Hello wymaga hello możliwości tooremove danych z niezależnych źródła hello po hello dane zostały pomyślnie skopiowane toohello docelowej.</span><span class="sxs-lookup"><span data-stu-id="cda91-328">hello split-merge service requires hello ability tooremove data from hello source shard once hello data has been successfully copied toohello target.</span></span> <span data-ttu-id="cda91-329">Na przykład **Usuwanie wyzwalaczy** może uniemożliwić usunięcie hello danych w źródle hello hello usługi i może spowodować toofail operacji.</span><span class="sxs-lookup"><span data-stu-id="cda91-329">For example, **delete triggers** can prevent hello service from deleting hello data on hello source and may cause operations toofail.</span></span>
* <span data-ttu-id="cda91-330">klucz dzielenia na fragmenty Hello powinien być hello wiodących kolumn w kluczu podstawowym lub definicji unikatowego indeksu.</span><span class="sxs-lookup"><span data-stu-id="cda91-330">hello sharding key should be hello leading column in your primary key or unique index definition.</span></span> <span data-ttu-id="cda91-331">Dzięki temu hello najlepszą wydajność dla hello dzielenie i scalanie zapytania sprawdzania poprawności i hello rzeczywiste dane przenoszenie i usuwanie operacji zawsze działających na zakresami kluczy dzielenia na fragmenty.</span><span class="sxs-lookup"><span data-stu-id="cda91-331">That ensures hello best performance for hello split or merge validation queries, and for hello actual data movement and deletion operations which always operate on sharding key ranges.</span></span>
* <span data-ttu-id="cda91-332">W ten sposób rozmieszczać usługi podziału scalania w centrum danych i region hello gdzie znajdują się bazy danych.</span><span class="sxs-lookup"><span data-stu-id="cda91-332">Collocate your split-merge service in hello region and data center where your databases reside.</span></span> 

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Anchors-->
<!--Image references-->
[1]:./media/sql-database-elastic-scale-overview-split-and-merge/split-merge-overview.png
[2]:./media/sql-database-elastic-scale-overview-split-and-merge/diagnostics.png
[3]:./media/sql-database-elastic-scale-overview-split-and-merge/diagnostics-config.png

