---
title: "wydajność aaaMonitor wiele baz danych Azure SQL w wielodostępnych aplikacji SaaS | Dokumentacja firmy Microsoft"
description: "Monitorowanie i zarządzanie nimi wydajności baz danych i pul aplikacji SaaS Wingtip bazy danych SQL Azure hello"
keywords: "samouczek usługi sql database"
services: sql-database
documentationcenter: 
author: stevestein
manager: craigg
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: sstein
ms.openlocfilehash: f0d7ba456c485b7de249a56abac3cf4be3857285
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="monitor-performance-of-hello-wingtip-saas-application"></a><span data-ttu-id="95a1f-104">Monitorowanie wydajności aplikacji Wingtip SaaS hello</span><span class="sxs-lookup"><span data-stu-id="95a1f-104">Monitor performance of hello Wingtip SaaS application</span></span>

<span data-ttu-id="95a1f-105">W tym samouczku są przedstawione kilka kluczowych scenariuszy zarządzania używana w aplikacji SaaS.</span><span class="sxs-lookup"><span data-stu-id="95a1f-105">In this tutorial, several key performance management scenarios used in SaaS applications are explored.</span></span> <span data-ttu-id="95a1f-106">Za pomocą działania toosimulate generator obciążenia dla wszystkich baz danych dzierżawy, hello wbudowaną funkcję monitorowania i alertów funkcje bazy danych SQL i pule elastyczne przedstawiono.</span><span class="sxs-lookup"><span data-stu-id="95a1f-106">Using a load generator toosimulate activity across all tenant databases, hello built-in monitoring and alerting features of SQL Database and elastic pools are demonstrated.</span></span>

<span data-ttu-id="95a1f-107">aplikacji Wingtip SaaS Hello wykorzystuje model danych pojedynczej dzierżawy, gdzie każda właściwość (dzierżawcy) ma własne bazy danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-107">hello Wingtip SaaS app uses a single-tenant data model, where each venue (tenant) has their own database.</span></span> <span data-ttu-id="95a1f-108">Jak wiele aplikacji SaaS hello zakładano wzorzec obciążenia dzierżawy to nieprzewidywalne i sporadyczne.</span><span class="sxs-lookup"><span data-stu-id="95a1f-108">Like many SaaS applications, hello anticipated tenant workload pattern is unpredictable and sporadic.</span></span> <span data-ttu-id="95a1f-109">Innymi słowy, sprzedaż biletów może nastąpić w dowolnej chwili.</span><span class="sxs-lookup"><span data-stu-id="95a1f-109">In other words, ticket sales may occur at any time.</span></span> <span data-ttu-id="95a1f-110">tootake zaletą tego wzorca użycia typowych bazy danych, dzierżawy, baz danych są wdrażane na elastyczne pule baz danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-110">tootake advantage of this typical database usage pattern, tenant databases are deployed into elastic database pools.</span></span> <span data-ttu-id="95a1f-111">Pule elastyczne zoptymalizować hello kosztów rozwiązania udostępniania zasobów przez wiele baz danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-111">Elastic pools optimize hello cost of a solution by sharing resources across many databases.</span></span> <span data-ttu-id="95a1f-112">W przypadku tego typu wzorzec jest ważne toomonitor bazy danych i puli zasobów użycia tooensure, który ładuje rozsądnych jest równoważone między pule.</span><span class="sxs-lookup"><span data-stu-id="95a1f-112">With this type of pattern, it's important toomonitor database and pool resource usage tooensure that loads are reasonably balanced across pools.</span></span> <span data-ttu-id="95a1f-113">Należy również tooensure, że odpowiednie zasoby pojedynczych baz danych, i że pule nie są naciśnięcie klawisza ich [eDTU](sql-database-what-is-a-dtu.md) limity.</span><span class="sxs-lookup"><span data-stu-id="95a1f-113">You also need tooensure that individual databases have adequate resources, and that pools are not hitting their [eDTU](sql-database-what-is-a-dtu.md) limits.</span></span> <span data-ttu-id="95a1f-114">W tym samouczku opisuje sposoby toomonitor i zarządzanie nimi baz danych i pul, jak i tootake akcję naprawczą w odpowiedzi toovariations obciążenia pracą.</span><span class="sxs-lookup"><span data-stu-id="95a1f-114">This tutorial explores ways toomonitor and manage databases and pools, and how tootake corrective action in response toovariations in workload.</span></span>

<span data-ttu-id="95a1f-115">Ten samouczek zawiera informacje na temat wykonywania następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="95a1f-115">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="95a1f-116">Symulowanie użycia baz danych dzierżawy hello uruchamiając generator podana obciążenia</span><span class="sxs-lookup"><span data-stu-id="95a1f-116">Simulate usage on hello tenant databases by running a provided load generator</span></span>
> * <span data-ttu-id="95a1f-117">Monitor hello dzierżawy baz danych, ponieważ one odpowiadać toohello wzrost obciążenia</span><span class="sxs-lookup"><span data-stu-id="95a1f-117">Monitor hello tenant databases as they respond toohello increase in load</span></span>
> * <span data-ttu-id="95a1f-118">Skalowanie w górę hello elastycznej puli w odpowiedzi toohello zwiększona bazy danych obciążenia</span><span class="sxs-lookup"><span data-stu-id="95a1f-118">Scale up hello Elastic pool in response toohello increased database load</span></span>
> * <span data-ttu-id="95a1f-119">Obsługi administracyjnej drugiego działania bazy danych saldo tooload puli elastycznej</span><span class="sxs-lookup"><span data-stu-id="95a1f-119">Provision a second Elastic pool tooload balance database activity</span></span>


<span data-ttu-id="95a1f-120">toocomplete ukończenia tego samouczka, Utwórz hello się, że następujące wymagania wstępne:</span><span class="sxs-lookup"><span data-stu-id="95a1f-120">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="95a1f-121">Aplikacja Wingtip SaaS Hello jest wdrażana.</span><span class="sxs-lookup"><span data-stu-id="95a1f-121">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="95a1f-122">Zobacz toodeploy w mniej niż pięć minut [wdrażania i aplikacji Wingtip SaaS hello](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="95a1f-122">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="95a1f-123">Zainstalowany jest program Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="95a1f-123">Azure PowerShell is installed.</span></span> <span data-ttu-id="95a1f-124">Aby uzyskać szczegółowe informacje, zobacz [Rozpoczynanie pracy z programem Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="95a1f-124">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-toosaas-performance-management-patterns"></a><span data-ttu-id="95a1f-125">Wprowadzenie tooSaaS wydajności zarządzania wzorce</span><span class="sxs-lookup"><span data-stu-id="95a1f-125">Introduction tooSaaS performance management patterns</span></span>

<span data-ttu-id="95a1f-126">Zarządzanie wydajnością bazy danych składa się z kompilowania i analizowanie danych dotyczących wydajności, a następnie reaguje toothis danych przez dostosowanie wartości parametrów toomaintain akceptowalny czas odpowiedzi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="95a1f-126">Managing database performance consists of compiling and analyzing performance data, and then reacting toothis data by adjusting parameters toomaintain an acceptable response time for your application.</span></span> <span data-ttu-id="95a1f-127">Podczas obsługi wielu dzierżawców, elastyczne pule baz danych są tooprovide ekonomiczny sposób zasobów i zarządzanie nimi dla grupy baz danych z nieprzewidywalnych obciążeń.</span><span class="sxs-lookup"><span data-stu-id="95a1f-127">When hosting multiple tenants, Elastic database pools are a cost-effective way tooprovide and manage resources for a group of databases with unpredictable workloads.</span></span> <span data-ttu-id="95a1f-128">Przy pewnych wzorcach obciążenia korzyści mogą się pojawić przy zarządzaniu w puli zaledwie dwoma bazami danych S3.</span><span class="sxs-lookup"><span data-stu-id="95a1f-128">With certain workload patterns, as few as two S3 databases can benefit from being managed in a pool.</span></span>

![nośnik](./media/sql-database-saas-tutorial-performance-monitoring/app-diagram.png)

<span data-ttu-id="95a1f-130">Pule i baz danych hello w pulach, powinny być monitorowane tooensure, które pozostają w dopuszczalnych zakresach wydajności.</span><span class="sxs-lookup"><span data-stu-id="95a1f-130">Pools, and hello databases in pools, should be monitored tooensure they stay within acceptable ranges of performance.</span></span> <span data-ttu-id="95a1f-131">Dostosuj hello puli konfiguracji toomeet hello potrzeb obciążenia agregacji hello wszystkich baz danych, zapewnienie odpowiedniej dla hello jednostek Edtu puli hello ogólną obciążenia.</span><span class="sxs-lookup"><span data-stu-id="95a1f-131">Tune hello pool configuration toomeet hello needs of hello aggregate workload of all databases, ensuring that hello pool eDTUs are appropriate for hello overall workload.</span></span> <span data-ttu-id="95a1f-132">Dostosuj hello na bazę danych min i -database maksymalną liczbę jednostek eDTU wartości tooappropriate wartości dla wymagań określonej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="95a1f-132">Adjust hello per-database min and per-database max eDTU values tooappropriate values for your specific application requirements.</span></span>

### <a name="performance-management-strategies"></a><span data-ttu-id="95a1f-133">Strategie zarządzania wydajnością</span><span class="sxs-lookup"><span data-stu-id="95a1f-133">Performance management strategies</span></span>

* <span data-ttu-id="95a1f-134">tooavoid o toomanually monitorować wydajność, najbardziej skutecznych jest zbyt**ustawić alerty, które są wyzwalane w razie baz danych lub pul Zabłąkana poza normalne zakresy**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-134">tooavoid having toomanually monitor performance, it’s most effective too**set alerts that trigger when databases or pools stray out of normal ranges**.</span></span>
* <span data-ttu-id="95a1f-135">Witaj toorespond tooshort termin wahań poziom wydajności agregacji hello puli, **poziom eDTU puli można skalować w górę lub w dół**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-135">toorespond tooshort-term fluctuations in hello aggregate performance level of a pool, hello **pool eDTU level can be scaled up or down**.</span></span> <span data-ttu-id="95a1f-136">W przypadku tego wahań na podstawie regularnych lub przewidywalną **skalowania puli hello może być zaplanowane toooccur automatycznie**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-136">If this fluctuation occurs on a regular or predictable basis, **scaling hello pool can be scheduled toooccur automatically**.</span></span> <span data-ttu-id="95a1f-137">Na przykład skalowanie w dół może nastąpić, kiedy przewidywane jest niskie obciążenie — w nocy lub podczas weekendów.</span><span class="sxs-lookup"><span data-stu-id="95a1f-137">For example, scale down when you know your workload is light, maybe overnight, or during weekends.</span></span>
* <span data-ttu-id="95a1f-138">toorespond toolonger termin wahań lub zmiany w liczbie baz danych, hello **pojedynczych baz danych można przenieść do innej puli**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-138">toorespond toolonger-term fluctuations, or changes in hello number of databases, **individual databases can be moved into other pools**.</span></span>
* <span data-ttu-id="95a1f-139">wzrost termin tooshort toorespond *poszczególnych* obciążenie bazy danych **pojedynczych baz danych można znaleźć poza puli i przypisane poziom wydajności poszczególnych**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-139">toorespond tooshort term increases in *individual* database load **individual databases can be taken out of a pool and assigned an individual performance level**.</span></span> <span data-ttu-id="95a1f-140">Po to za sobą zmniejszenie obciążenia hello, hello bazy danych może być zwracany toohello puli.</span><span class="sxs-lookup"><span data-stu-id="95a1f-140">Once hello load is reduced, hello database can then be returned toohello pool.</span></span> <span data-ttu-id="95a1f-141">Jeśli jest to znane z wyprzedzeniem, baz danych można przenieść pre-emptively się, że baza danych hello tooensure ma zawsze zasobów hello i tooavoid wpływu na innych baz danych w puli hello.</span><span class="sxs-lookup"><span data-stu-id="95a1f-141">When this is known in advance, databases can be moved pre-emptively tooensure hello database always has hello resources it needs, and tooavoid impact on other databases in hello pool.</span></span> <span data-ttu-id="95a1f-142">Jeśli to wymaganie jest przewidywalne, takie jak miejsce, w których występują łazienkowych sprzedaży biletów dla popularnych zdarzenia, a następnie to zachowanie zarządzania można zintegrować aplikacji hello.</span><span class="sxs-lookup"><span data-stu-id="95a1f-142">If this requirement is predictable, such as a venue experiencing a rush of ticket sales for a popular event, then this management behavior can be integrated into hello application.</span></span>

<span data-ttu-id="95a1f-143">Witaj [portalu Azure](https://portal.azure.com) zawiera wbudowane monitorowanie i alerty na najwięcej zasobów.</span><span class="sxs-lookup"><span data-stu-id="95a1f-143">hello [Azure portal](https://portal.azure.com) provides built-in monitoring and alerting on most resources.</span></span> <span data-ttu-id="95a1f-144">W usłudze SQL Database funkcje monitorowania i zgłaszania alertów są dostępne na poziomie baz danych i pul.</span><span class="sxs-lookup"><span data-stu-id="95a1f-144">For SQL Database, monitoring and alerting is available on databases and pools.</span></span> <span data-ttu-id="95a1f-145">Ten wbudowany, monitorowanie i alerty jest określonych zasobów, dlatego jest wygodne toouse dla małej liczby zasobów, ale nie jest wygodną podczas pracy z wielu zasobów.</span><span class="sxs-lookup"><span data-stu-id="95a1f-145">This built-in monitoring and alerting is resource-specific, so it's convenient toouse for small numbers of resources, but is not very convenient when working with many resources.</span></span>

<span data-ttu-id="95a1f-146">W scenariuszach dużych którym pracujesz z wielu reources [analizy dzienników (OMS)](sql-database-saas-tutorial-log-analytics.md) mogą być używane.</span><span class="sxs-lookup"><span data-stu-id="95a1f-146">For high-volume scenarios where you're working with many reources, [Log Analytics (OMS)](sql-database-saas-tutorial-log-analytics.md) can be used.</span></span> <span data-ttu-id="95a1f-147">Jest to oddzielne usługa Azure, która udostępnia analityka w porównaniu z emitowany dzienniki diagnostyczne i dane telemetryczne zebrane w obszarze roboczym analizy dzienników.</span><span class="sxs-lookup"><span data-stu-id="95a1f-147">This is a separate Azure service that provides analytics over emitted diagnostic logs and telemetry gathered in a log analytics workspace.</span></span> <span data-ttu-id="95a1f-148">Analizy dzienników można zbierać dane telemetryczne z wielu usług i być tooquery używane i Ustaw alerty.</span><span class="sxs-lookup"><span data-stu-id="95a1f-148">Log Analytics can collect telemetry from many services and be used tooquery and set alerts.</span></span>

## <a name="get-hello-wingtip-application-source-code-and-scripts"></a><span data-ttu-id="95a1f-149">Pobieranie kodu źródłowego aplikacji Wingtip hello i skryptów</span><span class="sxs-lookup"><span data-stu-id="95a1f-149">Get hello Wingtip application source code and scripts</span></span>

<span data-ttu-id="95a1f-150">Witaj Wingtip SaaS skrypty i kod źródłowy aplikacji są dostępne w hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) repozytorium github.</span><span class="sxs-lookup"><span data-stu-id="95a1f-150">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="95a1f-151">[Kroki skrypty Wingtip SaaS hello toodownload](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="95a1f-151">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="provision-additional-tenants"></a><span data-ttu-id="95a1f-152">Aprowizacja dodatkowych dzierżaw</span><span class="sxs-lookup"><span data-stu-id="95a1f-152">Provision additional tenants</span></span>

<span data-ttu-id="95a1f-153">Pule mogą być ekonomicznego z dwóch S3 baz danych, hello więcej baz danych znajdujących się w hello puli hello bardziej ekonomiczne rozwiązanie staje się hello uśrednianie efekt.</span><span class="sxs-lookup"><span data-stu-id="95a1f-153">While pools can be cost-effective with just two S3 databases, hello more databases that are in hello pool hello more cost-effective hello averaging effect becomes.</span></span> <span data-ttu-id="95a1f-154">Aby dobrze zrozumieć działanie monitorowania wydajności i zarządzania nią w dużej skali, w tym samouczku zalecamy wdrożenie co najmniej 20 baz danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-154">For a good understanding of how performance monitoring and management works at scale, this tutorial requires you have at least 20 databases deployed.</span></span>

<span data-ttu-id="95a1f-155">Jeśli już alokacji partii dzierżaw w samouczku wcześniejsze pominąć toohello [Symulacja użycie na wszystkich baz danych dzierżawy](#simulate-usage-on-all-tenant-databases) sekcji.</span><span class="sxs-lookup"><span data-stu-id="95a1f-155">If you already provisioned a batch of tenants in a prior tutorial, skip toohello [Simulate usage on all tenant databases](#simulate-usage-on-all-tenant-databases) section.</span></span>

1. <span data-ttu-id="95a1f-156">Otwórz... \\Modułów uczenia\\zarządzania i monitorowania wydajności\\*PerformanceMonitoringAndManagement.ps1 pokaz* w hello *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="95a1f-156">Open …\\Learning Modules\\Performance Monitoring and Management\\*Demo-PerformanceMonitoringAndManagement.ps1* in hello *PowerShell ISE*.</span></span> <span data-ttu-id="95a1f-157">Nie zamykaj tego skryptu, gdyż w ramach tego samouczka będzie konieczne uruchomienie kilku scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="95a1f-157">Keep this script open as you'll run several scenarios during this tutorial.</span></span>
1. <span data-ttu-id="95a1f-158">Ustaw zmienną **$DemoScenario** = **1**, **Provision a batch of tenants** (Aprowizacja partii dzierżaw)</span><span class="sxs-lookup"><span data-stu-id="95a1f-158">Set **$DemoScenario** = **1**, **Provision a batch of tenants**</span></span>
1. <span data-ttu-id="95a1f-159">Naciśnij klawisz **F5** toorun hello skryptu.</span><span class="sxs-lookup"><span data-stu-id="95a1f-159">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="95a1f-160">skrypt Hello wdroży 17 dzierżaw w mniej niż pięć minut.</span><span class="sxs-lookup"><span data-stu-id="95a1f-160">hello script will deploy 17 tenants in less than five minutes.</span></span>

<span data-ttu-id="95a1f-161">Witaj *TenantBatch nowy* skrypt używa zestawu połączonych lub zagnieżdżone [Menedżera zasobów](../azure-resource-manager/index.md) szablonów, które tworzenia partii dzierżawcy, która domyślnie kopiuje hello bazy danych **basetenantdb** na powitania katalogu serwera toocreate hello nowych dzierżawy baz danych, następnie rejestruje je w katalogu hello i na koniec inicjuje ich typu hello dzierżawy nazwę i miejsce.</span><span class="sxs-lookup"><span data-stu-id="95a1f-161">hello *New-TenantBatch* script uses a nested or linked set of [Resource Manager](../azure-resource-manager/index.md) templates that create a batch of tenants, which by default copies hello database **basetenantdb** on hello catalog server toocreate hello new tenant databases, then registers these in hello catalog, and finally initializes them with hello tenant name and venue type.</span></span> <span data-ttu-id="95a1f-162">Jest to zgodne z sposób hello aplikacji hello przepisy nowej dzierżawy.</span><span class="sxs-lookup"><span data-stu-id="95a1f-162">This is consistent with hello way hello app provisions a new tenant.</span></span> <span data-ttu-id="95a1f-163">Wszelkie zmiany wprowadzone za*basetenantdb* są stosowane tooany nowi dzierżawcy elastycznie później.</span><span class="sxs-lookup"><span data-stu-id="95a1f-163">Any changes made too*basetenantdb* are applied tooany new tenants provisioned thereafter.</span></span> <span data-ttu-id="95a1f-164">Zobacz hello [samouczek Zarządzanie schematami](sql-database-saas-tutorial-schema-management.md) toosee jak zmiany schematu toomake zbyt*istniejących* dzierżawy baz danych (łącznie hello *basetenantdb* bazy danych).</span><span class="sxs-lookup"><span data-stu-id="95a1f-164">See hello [Schema Management tutorial](sql-database-saas-tutorial-schema-management.md) toosee how toomake schema changes too*existing* tenant databases (including hello *basetenantdb* database).</span></span>

## <a name="simulate-usage-on-all-tenant-databases"></a><span data-ttu-id="95a1f-165">Symulowanie użycia we wszystkich baz danych dzierżaw</span><span class="sxs-lookup"><span data-stu-id="95a1f-165">Simulate usage on all tenant databases</span></span>

<span data-ttu-id="95a1f-166">Witaj *PerformanceMonitoringAndManagement.ps1 pokaz* skryptów jest pod warunkiem że symuluje pracą dzierżawy w przypadku wszystkich baz danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-166">hello *Demo-PerformanceMonitoringAndManagement.ps1* script is provided that simulates a workload running against all tenant databases.</span></span> <span data-ttu-id="95a1f-167">obciążenia Hello jest generowana z użyciem jednego ze scenariuszy dostępnych obciążenia hello:</span><span class="sxs-lookup"><span data-stu-id="95a1f-167">hello load is generated using one of hello available load scenarios:</span></span>

| <span data-ttu-id="95a1f-168">Demonstracja</span><span class="sxs-lookup"><span data-stu-id="95a1f-168">Demo</span></span> | <span data-ttu-id="95a1f-169">Scenariusz</span><span class="sxs-lookup"><span data-stu-id="95a1f-169">Scenario</span></span> |
|:--|:--|
| <span data-ttu-id="95a1f-170">2</span><span class="sxs-lookup"><span data-stu-id="95a1f-170">2</span></span> | <span data-ttu-id="95a1f-171">Generowanie obciążenia o normalnym natężeniu (ok. 40 jednostek DTU)</span><span class="sxs-lookup"><span data-stu-id="95a1f-171">Generate normal intensity load (approx. 40 DTU)</span></span> |
| <span data-ttu-id="95a1f-172">3</span><span class="sxs-lookup"><span data-stu-id="95a1f-172">3</span></span> | <span data-ttu-id="95a1f-173">Generowanie obciążenia z dłuższymi i częstszymi skokami wartości dla każdej bazy danych</span><span class="sxs-lookup"><span data-stu-id="95a1f-173">Generate load with longer and more frequent bursts per database</span></span>|
| <span data-ttu-id="95a1f-174">4</span><span class="sxs-lookup"><span data-stu-id="95a1f-174">4</span></span> | <span data-ttu-id="95a1f-175">Generowanie obciążenia o wyższych skokach wartości DTU dla każdej bazy danych (ok. 80 jednostek DTU)</span><span class="sxs-lookup"><span data-stu-id="95a1f-175">Generate load with higher DTU bursts per database (approx. 80 DTU)</span></span>|
| <span data-ttu-id="95a1f-176">5</span><span class="sxs-lookup"><span data-stu-id="95a1f-176">5</span></span> | <span data-ttu-id="95a1f-177">Generowanie normalnego obciążenia oraz wysokiego obciążenia dla jednej dzierżawy (ok. 95 jednostek DTU)</span><span class="sxs-lookup"><span data-stu-id="95a1f-177">Generate a normal load plus a high load on a single tenant (approx. 95 DTU)</span></span>|
| <span data-ttu-id="95a1f-178">6</span><span class="sxs-lookup"><span data-stu-id="95a1f-178">6</span></span> | <span data-ttu-id="95a1f-179">Generowanie niezrównoważonego obciążenia dla wielu pul</span><span class="sxs-lookup"><span data-stu-id="95a1f-179">Generate unbalanced load across multiple pools</span></span>|

<span data-ttu-id="95a1f-180">generator obciążenia Hello stosuje *syntetycznych* obciążenia procesora CPU — tylko do tooevery dzierżawcy w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-180">hello load generator applies a *synthetic* CPU-only load tooevery tenant database.</span></span> <span data-ttu-id="95a1f-181">Hello generator uruchamia zadanie dla każdego dzierżawcy bazy danych, która wywołuje procedurę przechowywaną okresowo generujący hello obciążenia.</span><span class="sxs-lookup"><span data-stu-id="95a1f-181">hello generator starts a job for each tenant database, which calls a stored procedure periodically that generates hello load.</span></span> <span data-ttu-id="95a1f-182">poziomy obciążenia Hello (w jednostkach Edtu), czas trwania i interwały są różne dla wszystkich baz danych, symulując dzierżawy nieprzewidywalne działanie.</span><span class="sxs-lookup"><span data-stu-id="95a1f-182">hello load levels (in eDTUs), duration, and intervals are varied across all databases, simulating unpredictable tenant activity.</span></span>

1. <span data-ttu-id="95a1f-183">Otwórz... \\Modułów uczenia\\zarządzania i monitorowania wydajności\\*PerformanceMonitoringAndManagement.ps1 pokaz* w hello *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="95a1f-183">Open …\\Learning Modules\\Performance Monitoring and Management\\*Demo-PerformanceMonitoringAndManagement.ps1* in hello *PowerShell ISE*.</span></span> <span data-ttu-id="95a1f-184">Nie zamykaj tego skryptu, gdyż w ramach tego samouczka będzie konieczne uruchomienie kilku scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="95a1f-184">Keep this script open as you'll run several scenarios during this tutorial.</span></span>
1. <span data-ttu-id="95a1f-185">Ustaw **$DemoScenario** = **2**, *Generuj normalnym natężeniu obciążenia*.</span><span class="sxs-lookup"><span data-stu-id="95a1f-185">Set **$DemoScenario** = **2**, *Generate normal intensity load*.</span></span>
1. <span data-ttu-id="95a1f-186">Naciśnij klawisz **F5** tooapply tooall obciążenia dzierżawcy baz danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-186">Press **F5** tooapply a load tooall your tenant databases.</span></span>

<span data-ttu-id="95a1f-187">Wingtip jest to aplikacja SaaS i hello rzeczywiste obciążenie aplikacji SaaS jest zazwyczaj sporadyczne i nieprzewidywalny.</span><span class="sxs-lookup"><span data-stu-id="95a1f-187">Wingtip is a SaaS app, and hello real-world load on a SaaS app is typically sporadic and unpredictable.</span></span> <span data-ttu-id="95a1f-188">toosimulate to tworzy generator obciążenia hello losowego obciążenia dystrybuowana do wszystkich dzierżawców.</span><span class="sxs-lookup"><span data-stu-id="95a1f-188">toosimulate this, hello load generator produces a randomized load distributed across all tenants.</span></span> <span data-ttu-id="95a1f-189">Kilka minut są wymagane dla hello tooemerge wzorzec obciążenia, więc Uruchom generator obciążenia hello 3 – 5 minut przed podjęciem próby wykonania toomonitor obciążenia hello hello następujące sekcje.</span><span class="sxs-lookup"><span data-stu-id="95a1f-189">Several minutes are needed for hello load pattern tooemerge, so run hello load generator for 3-5 minutes before attempting toomonitor hello load in hello following sections.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="95a1f-190">generator obciążenia Hello jest uruchomiona jako serię zadań w lokalnej sesji programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="95a1f-190">hello load generator is running as a series of jobs in your local PowerShell session.</span></span> <span data-ttu-id="95a1f-191">Zachowaj hello *PerformanceMonitoringAndManagement.ps1 pokaz* Otwórz kartę!</span><span class="sxs-lookup"><span data-stu-id="95a1f-191">Keep hello *Demo-PerformanceMonitoringAndManagement.ps1* tab open!</span></span> <span data-ttu-id="95a1f-192">Jeśli zamknąć kartę hello lub zawiesić komputera, zatrzymuje hello generator obciążenia.</span><span class="sxs-lookup"><span data-stu-id="95a1f-192">If you close hello tab, or suspend your machine, hello load generator stops.</span></span> <span data-ttu-id="95a1f-193">generator obciążenia Hello pozostaje w *wywoływania zadania* stanu, w którym generuje obciążenie nowi dzierżawcy, które są udostępniane po rozpoczęciu hello generator.</span><span class="sxs-lookup"><span data-stu-id="95a1f-193">hello load generator remains in a *job-invoking* state where it generates load on any new tenants that are provisioned after hello generator is started.</span></span> <span data-ttu-id="95a1f-194">Użyj *Ctrl-C* toostop wywoływania nowe zadania i zakończenia hello skryptu.</span><span class="sxs-lookup"><span data-stu-id="95a1f-194">Use *Ctrl-C* toostop invoking new jobs and exit hello script.</span></span> <span data-ttu-id="95a1f-195">generator obciążenia Hello będzie toorun, ale tylko na istniejących dzierżawców.</span><span class="sxs-lookup"><span data-stu-id="95a1f-195">hello load generator will continue toorun, but only on existing tenants.</span></span>

## <a name="monitor-resource-usage-using-hello-azure-portal"></a><span data-ttu-id="95a1f-196">Monitorowanie użycia zasobów przy użyciu hello portalu Azure</span><span class="sxs-lookup"><span data-stu-id="95a1f-196">Monitor resource usage using hello Azure portal</span></span>

<span data-ttu-id="95a1f-197">użycie zasobów hello toomonitor, że załadowane wyniki z hello są stosowane, otwórz hello portalu toohello puli zawierającej hello dzierżawcy z bazy danych:</span><span class="sxs-lookup"><span data-stu-id="95a1f-197">toomonitor hello resource usage that results from hello load being applied, open hello portal toohello pool containing hello tenant databases:</span></span>

1. <span data-ttu-id="95a1f-198">Otwórz hello [portalu Azure](https://portal.azure.com) i Przeglądaj toohello *tenants1 -&lt;użytkownika&gt;*  serwera.</span><span class="sxs-lookup"><span data-stu-id="95a1f-198">Open hello [Azure portal](https://portal.azure.com) and browse toohello *tenants1-&lt;USER&gt;* server.</span></span>
1. <span data-ttu-id="95a1f-199">Przewiń w dół, zlokalizuj elastyczne pule i kliknij pozycję **Pool1**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-199">Scroll down and locate elastic pools and click **Pool1**.</span></span> <span data-ttu-id="95a1f-200">Ta pula zawiera wszystkie hello dzierżawy bazy danych utworzono dotychczas.</span><span class="sxs-lookup"><span data-stu-id="95a1f-200">This pool contains all hello tenant databases created so far.</span></span>

<span data-ttu-id="95a1f-201">Obserwować hello **monitorowania puli elastycznej** i **elastycznej bazy danych monitorowania** wykresów.</span><span class="sxs-lookup"><span data-stu-id="95a1f-201">Observe hello **Elastic pool monitoring** and **Elastic database monitoring** charts.</span></span>

<span data-ttu-id="95a1f-202">Witaj puli użycie zasobów jest hello użycie agregacji bazy danych dla wszystkich baz danych w puli hello.</span><span class="sxs-lookup"><span data-stu-id="95a1f-202">hello pool's resource utilization is hello aggregate database utilization for all databases in hello pool.</span></span> <span data-ttu-id="95a1f-203">Wykres bazy danych Hello pokazuje hello pięć najnowszych baz danych:</span><span class="sxs-lookup"><span data-stu-id="95a1f-203">hello database chart shows hello five hottest databases:</span></span>

![](./media/sql-database-saas-tutorial-performance-monitoring/pool1.png)

<span data-ttu-id="95a1f-204">Ponieważ istnieją dodatkowych baz danych w puli hello poza hello pięciu top, wykorzystania puli hello zawiera działanie, które nie zostanie uwzględniony w hello top pięć baz danych wykresu.</span><span class="sxs-lookup"><span data-stu-id="95a1f-204">Because there are additional databases in hello pool beyond hello top five, hello pool utilization shows activity that is not reflected in hello top five databases chart.</span></span> <span data-ttu-id="95a1f-205">Aby uzyskać więcej informacji, kliknij przycisk **wykorzystania zasobów bazy danych**:</span><span class="sxs-lookup"><span data-stu-id="95a1f-205">For additional details, click **Database Resource Utilization**:</span></span>

![](./media/sql-database-saas-tutorial-performance-monitoring/database-utilization.png)


## <a name="set-performance-alerts-on-hello-pool"></a><span data-ttu-id="95a1f-206">Ustawianie alertów wydajności na powitania puli</span><span class="sxs-lookup"><span data-stu-id="95a1f-206">Set performance alerts on hello pool</span></span>

<span data-ttu-id="95a1f-207">Ustawić alert puli hello, które wyzwala na \>75% wykorzystania w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="95a1f-207">Set an alert on hello pool that triggers on \>75% utilization as follows:</span></span>

1. <span data-ttu-id="95a1f-208">Otwórz *Pool1* (na powitania *tenants1 -\<użytkownika\>*  serwera) w hello [portalu Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="95a1f-208">Open *Pool1* (on hello *tenants1-\<user\>* server) in hello [Azure portal](https://portal.azure.com).</span></span>
1. <span data-ttu-id="95a1f-209">Kliknij pozycję **Reguły alertów**, a następnie kliknij przycisk **+ Dodaj alert**:</span><span class="sxs-lookup"><span data-stu-id="95a1f-209">Click **Alert Rules**, and then click **+ Add alert**:</span></span>

   ![dodawanie alertu](media/sql-database-saas-tutorial-performance-monitoring/add-alert.png)

1. <span data-ttu-id="95a1f-211">Podaj nazwę, taką jak **Wysoki poziom jednostek DTU**,</span><span class="sxs-lookup"><span data-stu-id="95a1f-211">Provide a name, such as **High DTU**,</span></span>
1. <span data-ttu-id="95a1f-212">Ustaw hello następujące wartości:</span><span class="sxs-lookup"><span data-stu-id="95a1f-212">Set hello following values:</span></span>
   * <span data-ttu-id="95a1f-213">**Metryka = Procent eDTU**</span><span class="sxs-lookup"><span data-stu-id="95a1f-213">**Metric = eDTU percentage**</span></span>
   * <span data-ttu-id="95a1f-214">**Warunek = większa niż**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-214">**Condition = greater than**.</span></span>
   * <span data-ttu-id="95a1f-215">**Próg = 75**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-215">**Threshold = 75**.</span></span>
   * <span data-ttu-id="95a1f-216">**Okres = za pośrednictwem hello ostatnich 30 minut**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-216">**Period = Over hello last 30 minutes**.</span></span>
1. <span data-ttu-id="95a1f-217">Dodaj toohello adres e-mail *email(s) dodatkowe administratora* polu i kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-217">Add an email address toohello *Additional administrator email(s)* box and click **OK**.</span></span>

   ![ustawianie alertu](media/sql-database-saas-tutorial-performance-monitoring/alert-rule.png)


## <a name="scale-up-a-busy-pool"></a><span data-ttu-id="95a1f-219">Skalowanie mocno obciążonej puli w górę</span><span class="sxs-lookup"><span data-stu-id="95a1f-219">Scale up a busy pool</span></span>

<span data-ttu-id="95a1f-220">Jeśli poziom agregacji obciążenia hello zwiększa się w punkcie toohello puli maxes limit puli hello i osiągnie użycie w jednostkach eDTU 100%, wydajność jedna baza danych ma wpływ i potencjalnie spowalniając czas odpowiedzi na zapytania dla wszystkich baz danych w puli hello.</span><span class="sxs-lookup"><span data-stu-id="95a1f-220">If hello aggregate load level increases on a pool toohello point that it maxes out hello pool and reaches 100% eDTU usage, then individual database performance is affected, potentially slowing query response times for all databases in hello pool.</span></span>

<span data-ttu-id="95a1f-221">**Krótka termin**, należy wziąć pod uwagę skalowaniu hello puli tooprovide dodatkowe zasoby lub usuwanie baz danych z puli hello (przenoszenia ich pule tooother lub poza hello puli tooa autonomicznej usługi warstwy).</span><span class="sxs-lookup"><span data-stu-id="95a1f-221">**Short term**, consider scaling up hello pool tooprovide additional resources, or removing databases from hello pool (moving them tooother pools, or out of hello pool tooa stand-alone service tier).</span></span>

<span data-ttu-id="95a1f-222">**Dłuższym okresie**, należy wziąć pod uwagę optymalizacji zapytań lub indeksu użycia tooimprove bazy danych wydajności.</span><span class="sxs-lookup"><span data-stu-id="95a1f-222">**Longer term**, consider optimizing queries or index usage tooimprove database performance.</span></span> <span data-ttu-id="95a1f-223">W zależności od hello aplikacji czułości tooperformance problemy z jego najlepszych praktyk tooscale puli się przed jego użycie w jednostkach eDTU 100%.</span><span class="sxs-lookup"><span data-stu-id="95a1f-223">Depending on hello application's sensitivity tooperformance issues its best practice tooscale a pool up before it reaches 100% eDTU usage.</span></span> <span data-ttu-id="95a1f-224">Użyj toowarn alertu należy wcześniej.</span><span class="sxs-lookup"><span data-stu-id="95a1f-224">Use an alert toowarn you in advance.</span></span>

<span data-ttu-id="95a1f-225">Można symulować puli zajęty przez zwiększania obciążenia hello utworzonego przez hello generator.</span><span class="sxs-lookup"><span data-stu-id="95a1f-225">You can simulate a busy pool by increasing hello load produced by hello generator.</span></span> <span data-ttu-id="95a1f-226">Powoduje hello tooburst baz danych częściej i hello dłużej, zwiększa obciążenie agregacji w puli hello bez zmiany wymagań hello hello pojedynczych baz danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-226">Causing hello databases tooburst more frequently, and for longer, increasing hello aggregate load on hello pool without changing hello requirements of hello individual databases.</span></span> <span data-ttu-id="95a1f-227">Skalowanie w górę puli hello łatwo odbywa się w portalu hello lub z programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="95a1f-227">Scaling up hello pool is easily done in hello portal or from PowerShell.</span></span> <span data-ttu-id="95a1f-228">Tego ćwiczenia używa hello portalu.</span><span class="sxs-lookup"><span data-stu-id="95a1f-228">This exercise uses hello portal.</span></span>

1. <span data-ttu-id="95a1f-229">Ustaw *$DemoScenario* = **3**, _obciążenia Generuj z dłużej i częstsze seria na bazę danych_ tooincrease intensywność hello hello agregacji obciążenie Pula Hello bez zmiany obciążenia szczytowego hello wymagane przez każdą bazę danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-229">Set *$DemoScenario* = **3**, _Generate load with longer and more frequent bursts per database_ tooincrease hello intensity of hello aggregate load on hello pool without changing hello peak load required by each database.</span></span>
1. <span data-ttu-id="95a1f-230">Naciśnij klawisz **F5** tooapply tooall obciążenia dzierżawcy baz danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-230">Press **F5** tooapply a load tooall your tenant databases.</span></span>

1. <span data-ttu-id="95a1f-231">Przejdź za**Pool1** w hello portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="95a1f-231">Go too**Pool1** in hello Azure portal.</span></span>

<span data-ttu-id="95a1f-232">Monitor hello zwiększone użycie w jednostkach eDTU puli na wykresie górny hello.</span><span class="sxs-lookup"><span data-stu-id="95a1f-232">Monitor hello increased pool eDTU usage on hello upper chart.</span></span> <span data-ttu-id="95a1f-233">Zajmuje kilka minut, aż hello nowe wyższe obciążenie tookick, ale powinny pojawić szybko rozpocząć toohit maksymalnego wykorzystania puli hello, a jako obciążenia hello steadies do hello nowy wzorzec, szybko overloads hello puli.</span><span class="sxs-lookup"><span data-stu-id="95a1f-233">It takes a few minutes for hello new higher load tookick in, but you should quickly see hello pool start toohit max utilization, and as hello load steadies into hello new pattern, it rapidly overloads hello pool.</span></span>

1. <span data-ttu-id="95a1f-234">tooscale się puli powitania kliknij **Konfigurowanie puli** u góry hello hello **Pool1** strony.</span><span class="sxs-lookup"><span data-stu-id="95a1f-234">tooscale up hello pool, click **Configure pool** at hello top of hello **Pool1** page.</span></span>
1. <span data-ttu-id="95a1f-235">Dostosuj hello **eDTU puli** ustawienie zbyt**100**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-235">Adjust hello **Pool eDTU** setting too**100**.</span></span> <span data-ttu-id="95a1f-236">Zmiana liczby jednostek eDTU puli hello nie ustawień hello na bazę danych (co jest nadal 50 eDTU max na bazę danych).</span><span class="sxs-lookup"><span data-stu-id="95a1f-236">Changing hello pool eDTU does not change hello per-database settings (which is still 50 eDTU max per database).</span></span> <span data-ttu-id="95a1f-237">Można wyświetlić ustawienia na bazę danych hello na powitania po prawej stronie powitania **Konfigurowanie puli** strony.</span><span class="sxs-lookup"><span data-stu-id="95a1f-237">You can see hello per-database settings on hello right side of hello **Configure pool** page.</span></span>
1. <span data-ttu-id="95a1f-238">Kliknij przycisk **zapisać** toosubmit hello żądania tooscale hello puli.</span><span class="sxs-lookup"><span data-stu-id="95a1f-238">Click **Save** toosubmit hello request tooscale hello pool.</span></span>

<span data-ttu-id="95a1f-239">Wróć za**Pool1** > **omówienie** hello tooview monitorowania wykresy.</span><span class="sxs-lookup"><span data-stu-id="95a1f-239">Go back too**Pool1** > **Overview** tooview hello monitoring charts.</span></span> <span data-ttu-id="95a1f-240">Monitorowanie efektu hello zapewnienia puli hello więcej zasobów (chociaż z kilku baz danych i losowego obciążenia nie zawsze jest łatwe toosee ostatecznie dopóki nie zostanie uruchomione przez pewien czas).</span><span class="sxs-lookup"><span data-stu-id="95a1f-240">Monitor hello effect of providing hello pool with more resources (although with few databases and a randomized load it’s not always easy toosee conclusively until you run for some time).</span></span> <span data-ttu-id="95a1f-241">Podczas poszukujesz opatrzone wykresy hello pamiętać niż 100% na powitania górny teraz wykresu reprezentuje 100 jednostek Edtu, na powitania niższe wykresu 100% jest nadal jako hello 50 jednostek Edtu na bazę danych max jest nadal Edtu 50.</span><span class="sxs-lookup"><span data-stu-id="95a1f-241">While you are looking at hello charts bear in mind that 100% on hello upper chart now represents 100 eDTUs, while on hello lower chart 100% is still 50 eDTUs as hello per-database max is still 50 eDTUs.</span></span>

<span data-ttu-id="95a1f-242">Bazy danych nadal online i w pełni dostępne w trakcie procesu hello.</span><span class="sxs-lookup"><span data-stu-id="95a1f-242">Databases remain online and fully available throughout hello process.</span></span> <span data-ttu-id="95a1f-243">W hello moment ostatniego każda baza danych jest gotowy toobe włączyć hello nowych jednostek eDTU puli, wszystkie aktywne połączenia są uszkodzone.</span><span class="sxs-lookup"><span data-stu-id="95a1f-243">At hello last moment as each database is ready toobe enabled with hello new pool eDTU, any active connections are broken.</span></span> <span data-ttu-id="95a1f-244">Kod aplikacji zawsze powinna być zapisana połączeń tooretry porzucony i nawiąże toohello hello skalowanych puli bazy danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-244">Application code should always be written tooretry dropped connections, and so will reconnect toohello database in hello scaled-up pool.</span></span>

## <a name="load-balance-between-pools"></a><span data-ttu-id="95a1f-245">Równoważenie obciążenia między zestawami</span><span class="sxs-lookup"><span data-stu-id="95a1f-245">Load balance between pools</span></span>

<span data-ttu-id="95a1f-246">Jako alternatywne tooscaling zapasowej puli hello. Utwórz pulę drugi i przenoszenia baz danych do niego toobalance hello obciążenia między Witaj dwie pule.</span><span class="sxs-lookup"><span data-stu-id="95a1f-246">As an alternative tooscaling up hello pool, create a second pool and move databases into it toobalance hello load between hello two pools.</span></span> <span data-ttu-id="95a1f-247">toodo hello nowej puli muszą być utworzone na tym samym serwerze co hello hello najpierw..</span><span class="sxs-lookup"><span data-stu-id="95a1f-247">toodo this hello new pool must be created on hello same server as hello first.</span></span>

1. <span data-ttu-id="95a1f-248">W hello [portalu Azure](https://portal.azure.com), otwórz hello **tenants1 -&lt;użytkownika&gt;**  serwera.</span><span class="sxs-lookup"><span data-stu-id="95a1f-248">In hello [Azure portal](https://portal.azure.com), open hello **tenants1-&lt;USER&gt;** server.</span></span>
1. <span data-ttu-id="95a1f-249">Kliknij przycisk **+ nowej puli** toocreate puli na powitania bieżącego serwera.</span><span class="sxs-lookup"><span data-stu-id="95a1f-249">Click **+ New pool** toocreate a pool on hello current server.</span></span>
1. <span data-ttu-id="95a1f-250">Na powitania **elastycznej puli baz danych** szablonu:</span><span class="sxs-lookup"><span data-stu-id="95a1f-250">On hello **Elastic database pool** template:</span></span>

    1. <span data-ttu-id="95a1f-251">Ustaw **nazwa** za*Pool2*.</span><span class="sxs-lookup"><span data-stu-id="95a1f-251">Set **Name** too*Pool2*.</span></span>
    1. <span data-ttu-id="95a1f-252">Pozostaw hello cenowym jako **puli standardowej**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-252">Leave hello pricing tier as **Standard Pool**.</span></span>
    1. <span data-ttu-id="95a1f-253">Kliknij przycisk **Konfiguruj pulę**,</span><span class="sxs-lookup"><span data-stu-id="95a1f-253">Click **Configure pool**,</span></span>
    1. <span data-ttu-id="95a1f-254">Ustaw **eDTU puli** za*50 eDTU*.</span><span class="sxs-lookup"><span data-stu-id="95a1f-254">Set **Pool eDTU** too*50 eDTU*.</span></span>
    1. <span data-ttu-id="95a1f-255">Kliknij przycisk **dodać bazy danych** toosee listy baz danych na serwerze hello, w którym można dodać zbyt*Pool2*.</span><span class="sxs-lookup"><span data-stu-id="95a1f-255">Click **Add databases** toosee a list of databases on hello server that can be added too*Pool2*.</span></span>
    1. <span data-ttu-id="95a1f-256">Wybierz wszystkie toomove 10 bazach danych tych toohello nowej puli, a następnie kliknij przycisk **wybierz**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-256">Select any 10 databases toomove these toohello new pool, and then click **Select**.</span></span> <span data-ttu-id="95a1f-257">Jeśli działała generator obciążenia hello, usługa hello już wie, że profilu wydajności wymaga puli większy niż rozmiar 50 eDTU domyślne hello i zaleca się, począwszy od 100 ustawienia liczby jednostek eDTU.</span><span class="sxs-lookup"><span data-stu-id="95a1f-257">If you've been running hello load generator, hello service already knows that your performance profile requires a larger pool than hello default 50 eDTU size and recommends starting with a 100 eDTU setting.</span></span>

    ![Zalecenia](media/sql-database-saas-tutorial-performance-monitoring/configure-pool.png)

    1. <span data-ttu-id="95a1f-259">W tym samouczku, pozostaw domyślne hello Edtu 50, a następnie kliknij przycisk **wybierz** ponownie.</span><span class="sxs-lookup"><span data-stu-id="95a1f-259">For this tutorial, leave hello default at 50 eDTUs, and click **Select** again.</span></span>
    1. <span data-ttu-id="95a1f-260">Wybierz **OK** toocreate hello nowej puli i toomove hello wybrane baz danych do niego.</span><span class="sxs-lookup"><span data-stu-id="95a1f-260">Select **OK** toocreate hello new pool and toomove hello selected databases into it.</span></span>

<span data-ttu-id="95a1f-261">Tworzenie puli hello i przenoszenie baz danych hello zajmuje kilka minut.</span><span class="sxs-lookup"><span data-stu-id="95a1f-261">Creating hello pool and moving hello databases takes a few minutes.</span></span> <span data-ttu-id="95a1f-262">Jak przenoszeniu baz danych pozostają online i jest całkowicie dostępny do hello ostatnio moment, w którym wszystkie otwarte połączenia są zamykane.</span><span class="sxs-lookup"><span data-stu-id="95a1f-262">As databases are moved they remain online and fully accessible until hello very last moment, at which point any open connections are closed.</span></span> <span data-ttu-id="95a1f-263">Tak długo, jak długo mają niektóre logika ponowień, klienci będą następnie łączyć bazy danych toohello w nowej puli hello.</span><span class="sxs-lookup"><span data-stu-id="95a1f-263">As long as you have some retry logic, clients will then connect toohello database in hello new pool.</span></span>

<span data-ttu-id="95a1f-264">Przeglądaj zbyt**Pool2** (na powitania *tenants1* serwera) tooopen hello puli i monitorować jego wydajność.</span><span class="sxs-lookup"><span data-stu-id="95a1f-264">Browse too**Pool2** (on hello *tenants1* server) tooopen hello pool and monitor its performance.</span></span> <span data-ttu-id="95a1f-265">Jeśli nie widzisz, poczekaj, aż Inicjowanie obsługi administracyjnej nowych toocomplete puli hello.</span><span class="sxs-lookup"><span data-stu-id="95a1f-265">If you don't see it, wait for provisioning of hello new pool toocomplete.</span></span>

<span data-ttu-id="95a1f-266">Pojawi się że użycie zasobów na *Pool1* spadła oraz że *Pool2* podobnie jest załadowane.</span><span class="sxs-lookup"><span data-stu-id="95a1f-266">You now see that resource usage on *Pool1* has dropped and that *Pool2* is now similarly loaded.</span></span>

## <a name="manage-performance-of-a-single-database"></a><span data-ttu-id="95a1f-267">Zarządzanie wydajności pojedynczej bazy danych</span><span class="sxs-lookup"><span data-stu-id="95a1f-267">Manage performance of a single database</span></span>

<span data-ttu-id="95a1f-268">Jeśli długoterminowa wysokie obciążenie, w zależności od konfiguracji puli hello, napotyka pojedynczej bazy danych w puli może często toodominate hello zasobów w puli hello i mieć wpływ na inne bazy danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-268">If a single database in a pool experiences a sustained high load, depending on hello pool configuration, it may tend toodominate hello resources in hello pool and impact other databases.</span></span> <span data-ttu-id="95a1f-269">Działanie hello jest prawdopodobnie toocontinue przez pewien czas, hello bazy danych można tymczasowo przeniesiony poza hello puli.</span><span class="sxs-lookup"><span data-stu-id="95a1f-269">If hello activity is likely toocontinue for some time, hello database can be temporarily moved out of hello pool.</span></span> <span data-ttu-id="95a1f-270">Dzięki temu hello bazy danych toohave hello dodatkowe zasoby musi i izoluje go z hello innych baz danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-270">This allows hello database toohave hello extra resources it needs, and isolates it from hello other databases.</span></span>

<span data-ttu-id="95a1f-271">Tego ćwiczenia symuluje efekt hello Hall porozumieniu firmy Contoso, u których występują znaczne obciążenie biletów Przejdź w sprzedaży dla popularnych uzgodnieniu.</span><span class="sxs-lookup"><span data-stu-id="95a1f-271">This exercise simulates hello effect of Contoso Concert Hall experiencing a high load when tickets go on sale for a popular concert.</span></span>

1. <span data-ttu-id="95a1f-272">Otwórz hello... \\ *PerformanceMonitoringAndManagement.ps1 pokaz* skryptu.</span><span class="sxs-lookup"><span data-stu-id="95a1f-272">Open hello …\\*Demo-PerformanceMonitoringAndManagement.ps1* script.</span></span>
1. <span data-ttu-id="95a1f-273">Ustaw wartość zmiennej **$DemoScenario = 5, Generate a normal load plus a high load on a single tenant (approx. 95 DTU)** (Generowanie normalnego obciążenia oraz wysokiego obciążenia dla jednej dzierżawy (ok. 95 jednostek DTU)).</span><span class="sxs-lookup"><span data-stu-id="95a1f-273">Set **$DemoScenario = 5, Generate a normal load plus a high load on a single tenant (approx. 95 DTU).**</span></span>
1. <span data-ttu-id="95a1f-274">Ustaw wartość zmiennej **$SingleTenantDatabaseName = contosoconcerthall**</span><span class="sxs-lookup"><span data-stu-id="95a1f-274">Set **$SingleTenantDatabaseName = contosoconcerthall**</span></span>
1. <span data-ttu-id="95a1f-275">Wykonywanie za pomocą skryptu hello **F5**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-275">Execute hello script using **F5**.</span></span>


1. <span data-ttu-id="95a1f-276">W hello [portalu Azure](https://portal.azure.com) Otwórz **Pool1**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-276">In hello [Azure portal](https://portal.azure.com) open **Pool1**.</span></span>
1. <span data-ttu-id="95a1f-277">Sprawdź hello **monitorowania puli elastycznej** wykresu i poszukaj hello zwiększone użycie w jednostkach eDTU puli.</span><span class="sxs-lookup"><span data-stu-id="95a1f-277">Inspect hello **Elastic pool monitoring** chart and look for hello increased pool eDTU usage.</span></span> <span data-ttu-id="95a1f-278">Po minucie lub dwóch większych obciążeń hello powinien rozpocząć tookick w i powinny zostać wyświetlone trafienia w puli hello 100% wykorzystania.</span><span class="sxs-lookup"><span data-stu-id="95a1f-278">After a minute or two, hello higher load should start tookick in, and you should quickly see that hello pool hits 100% utilization.</span></span>
1. <span data-ttu-id="95a1f-279">Sprawdź hello **elastycznej bazy danych monitorowania** wyświetlania, który pokazuje hello najnowszych baz danych w hello ostatniej godziny.</span><span class="sxs-lookup"><span data-stu-id="95a1f-279">Inspect hello **Elastic database monitoring** display which shows hello hottest databases in hello past hour.</span></span> <span data-ttu-id="95a1f-280">Witaj *contosoconcerthall* bazy danych wkrótce powinny się wyświetlać jako jedną z hello pięć najnowszych baz danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-280">hello *contosoconcerthall* database should soon appear as one of hello five hottest databases.</span></span>
1. <span data-ttu-id="95a1f-281">**Kliknij pozycję Monitorowanie elastycznej bazy danych hello** **wykresu** i otwiera hello **wykorzystania zasobów bazy danych** strony, których można monitorować żadnej z hello baz danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-281">**Click on hello Elastic database monitoring** **chart** and it opens hello **Database Resource Utilization** page where you can monitor any of hello databases.</span></span> <span data-ttu-id="95a1f-282">W ten sposób można odizolować hello wyświetlanej hello *contosoconcerthall* bazy danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-282">This lets you isolate hello display for hello *contosoconcerthall* database.</span></span>
1. <span data-ttu-id="95a1f-283">Z listy hello baz danych, kliknij przycisk **contosoconcerthall**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-283">From hello list of databases, click **contosoconcerthall**.</span></span>
1. <span data-ttu-id="95a1f-284">Kliknij przycisk **warstwy cenowej (skala Dtu)** tooopen hello **skonfigurować wydajności** strony, w którym można ustawić poziomu wydajności autonomiczne hello bazy danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-284">Click **Pricing Tier (scale DTUs)** tooopen hello **Configure performance** page where you can set a stand-alone performance level for hello database.</span></span>
1. <span data-ttu-id="95a1f-285">Polecenie hello **standardowe** karcie Opcje skali hello tooopen w warstwie standardowa hello.</span><span class="sxs-lookup"><span data-stu-id="95a1f-285">Click on hello **Standard** tab tooopen hello scale options in hello Standard tier.</span></span>
1. <span data-ttu-id="95a1f-286">Slajd hello **jednostek dtu w warstwie suwaka** tooright tooselect **100** Dtu.</span><span class="sxs-lookup"><span data-stu-id="95a1f-286">Slide hello **DTU slider** tooright tooselect **100** DTUs.</span></span> <span data-ttu-id="95a1f-287">Uwaga odpowiada cel usługi toohello, **S3**.</span><span class="sxs-lookup"><span data-stu-id="95a1f-287">Note this corresponds toohello service objective, **S3**.</span></span>
1. <span data-ttu-id="95a1f-288">Kliknij przycisk **Zastosuj** toomove hello bazy danych z puli hello i zapewnić ich *standardowa S3* bazy danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-288">Click **Apply** toomove hello database out of hello pool and make it a *Standard S3* database.</span></span>
1. <span data-ttu-id="95a1f-289">Po zakończeniu skalowanie jest Ukończ, monitor hello wprowadzone w bazie danych contosoconcerthall hello i Pool1 na powitania elastycznej bloków puli i bazy danych.</span><span class="sxs-lookup"><span data-stu-id="95a1f-289">Once scaling is complete, monitor hello effect on hello contosoconcerthall database and Pool1 on hello elastic pool and database blades.</span></span>

<span data-ttu-id="95a1f-290">Po zaspokojenie hello wysokie obciążenie bazy danych contosoconcerthall hello należy niezwłocznie powraca tooreduce puli toohello kosztów.</span><span class="sxs-lookup"><span data-stu-id="95a1f-290">Once hello high load on hello contosoconcerthall database subsides you should promptly return it toohello pool tooreduce its cost.</span></span> <span data-ttu-id="95a1f-291">Jeśli nie jest jasne podczas którego nastąpi można ustawić alert w bazie danych hello który zostanie wyzwolone w momencie jego użycie jednostek DTU spadnie poniżej hello na bazę danych max na powitania puli.</span><span class="sxs-lookup"><span data-stu-id="95a1f-291">If it’s unclear when that will happen you could set an alert on hello database that will trigger when its DTU usage drops below hello per-database max on hello pool.</span></span> <span data-ttu-id="95a1f-292">Przenoszenie bazy danych do puli opisano w ćwiczeniu 5.</span><span class="sxs-lookup"><span data-stu-id="95a1f-292">Moving a database into a pool is described in exercise 5.</span></span>

## <a name="other-performance-management-patterns"></a><span data-ttu-id="95a1f-293">Inne wzorce zarządzania wydajnością</span><span class="sxs-lookup"><span data-stu-id="95a1f-293">Other Performance Management Patterns</span></span>

<span data-ttu-id="95a1f-294">**Skalowanie uprzedzające** w według powyższego ćwiczenia hello, gdzie zostały przedstawione w sposób tooscale izolowanej bazy danych, możesz wiedziały toolook bazy danych, które dla.</span><span class="sxs-lookup"><span data-stu-id="95a1f-294">**Pre-emptive scaling** In hello exercise above where you explored how tooscale an isolated database, you knew which database toolook for.</span></span> <span data-ttu-id="95a1f-295">Jeśli zarządzanie hello Hall porozumieniu Contoso poinformowała Wingtips hello zbliżającym się sprzedaży biletów, hello bazy danych może zostały usunięte z puli hello pre-emptively.</span><span class="sxs-lookup"><span data-stu-id="95a1f-295">If hello management of Contoso Concert Hall had informed Wingtips of hello impending ticket sale, hello database could have been moved out of hello pool pre-emptively.</span></span> <span data-ttu-id="95a1f-296">W przeciwnym razie go prawdopodobnie wymagałoby alert w puli hello lub hello toospot bazy danych została co dzieje.</span><span class="sxs-lookup"><span data-stu-id="95a1f-296">Otherwise, it would likely have required an alert on hello pool or hello database toospot what was happening.</span></span> <span data-ttu-id="95a1f-297">Nie ma toolearn na ten temat z hello innych dzierżaw w hello puli strona skarżąca obniżeniem wydajności.</span><span class="sxs-lookup"><span data-stu-id="95a1f-297">You wouldn’t want toolearn about this from hello other tenants in hello pool complaining of degraded performance.</span></span> <span data-ttu-id="95a1f-298">A jeśli dzierżawy hello można przewidzieć, jak długo będą potrzebne dodatkowe zasoby Konfigurowanie usługi Automatyzacja Azure runbook toomove hello bazy danych z puli hello i następnie z powrotem w zdefiniowanym harmonogramem.</span><span class="sxs-lookup"><span data-stu-id="95a1f-298">And if hello tenant can predict how long they will need additional resources you can set up an Azure Automation runbook toomove hello database out of hello pool and then back in again on a defined schedule.</span></span>

<span data-ttu-id="95a1f-299">**Skalowanie samoobsługi dzierżawy** ponieważ skalowanie jest łatwo wywoływana za pośrednictwem interfejsu API zarządzania hello zadania, można łatwo wbudowanie możliwości hello tooscale dzierżawcy z bazy danych w aplikacji uwzględniającym dzierżawy i użyć funkcji usługi SaaS.</span><span class="sxs-lookup"><span data-stu-id="95a1f-299">**Tenant self-service scaling** Because scaling is a task easily called via hello management API, you can easily build hello ability tooscale tenant databases into your tenant-facing application, and offer it as a feature of your SaaS service.</span></span> <span data-ttu-id="95a1f-300">Na przykład zezwolić dzierżaw self-administer skalowanie w górę i w dół, prawdopodobnie połączone bezpośrednio rozliczeń tootheir!</span><span class="sxs-lookup"><span data-stu-id="95a1f-300">For example, let tenants self-administer scaling up and down, perhaps linked directly tootheir billing!</span></span>

<span data-ttu-id="95a1f-301">**Skalowanie puli w górę i w dół wzorce użycia toomatch harmonogramu**</span><span class="sxs-lookup"><span data-stu-id="95a1f-301">**Scaling a pool up and down on a schedule toomatch usage patterns**</span></span>

<span data-ttu-id="95a1f-302">W przypadku, gdy użycie agregacji dzierżawy następuje wzorców użycia przewidywalne, można tooscale usługi Automatyzacja Azure puli górę i w dół zgodnie z harmonogramem.</span><span class="sxs-lookup"><span data-stu-id="95a1f-302">Where aggregate tenant usage follows predictable usage patterns, you can use Azure Automation tooscale a pool up and down on a schedule.</span></span> <span data-ttu-id="95a1f-303">Na przykład pulę można skalować w dół po godzinie 18:00 i ponownie w górę przed godziną 6:00 w dni robocze, jeśli wiadomo, że pomiędzy tymi godzinami występuje spadek wymagań dotyczących zasobów.</span><span class="sxs-lookup"><span data-stu-id="95a1f-303">For example, scale a pool down after 6pm and up again before 6am on weekdays when you know there is a drop in resource requirements.</span></span>



## <a name="next-steps"></a><span data-ttu-id="95a1f-304">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="95a1f-304">Next steps</span></span>

<span data-ttu-id="95a1f-305">Ten samouczek zawiera informacje na temat wykonywania następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="95a1f-305">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="95a1f-306">Symulowanie użycia baz danych dzierżawy hello uruchamiając generator podana obciążenia</span><span class="sxs-lookup"><span data-stu-id="95a1f-306">Simulate usage on hello tenant databases by running a provided load generator</span></span>
> * <span data-ttu-id="95a1f-307">Monitor hello dzierżawy baz danych, ponieważ one odpowiadać toohello wzrost obciążenia</span><span class="sxs-lookup"><span data-stu-id="95a1f-307">Monitor hello tenant databases as they respond toohello increase in load</span></span>
> * <span data-ttu-id="95a1f-308">Skalowanie w górę hello elastycznej puli w odpowiedzi toohello zwiększona bazy danych obciążenia</span><span class="sxs-lookup"><span data-stu-id="95a1f-308">Scale up hello Elastic pool in response toohello increased database load</span></span>
> * <span data-ttu-id="95a1f-309">Obsługi administracyjnej drugiego puli elastycznej tooload saldo hello działania bazy danych</span><span class="sxs-lookup"><span data-stu-id="95a1f-309">Provision a second Elastic pool tooload balance hello database activity</span></span>

[<span data-ttu-id="95a1f-310">Samouczek przywracania pojedynczej dzierżawy</span><span class="sxs-lookup"><span data-stu-id="95a1f-310">Restore a single tenant tutorial</span></span>](sql-database-saas-tutorial-restore-single-tenant.md)


## <a name="additional-resources"></a><span data-ttu-id="95a1f-311">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="95a1f-311">Additional resources</span></span>

* <span data-ttu-id="95a1f-312">Dodatkowe [samouczki, które zależą od hello wdrażanie aplikacji Wingtip SaaS](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="95a1f-312">Additional [tutorials that build upon hello Wingtip SaaS application deployment](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="95a1f-313">Pule elastyczne SQL</span><span class="sxs-lookup"><span data-stu-id="95a1f-313">SQL Elastic pools</span></span>](sql-database-elastic-pool.md)
* [<span data-ttu-id="95a1f-314">Azure Automation</span><span class="sxs-lookup"><span data-stu-id="95a1f-314">Azure automation</span></span>](../automation/automation-intro.md)
* <span data-ttu-id="95a1f-315">[Log Analytics](sql-database-saas-tutorial-log-analytics.md) — samouczek konfigurowania usługi Log Analytics i korzystania z niej</span><span class="sxs-lookup"><span data-stu-id="95a1f-315">[Log Analytics](sql-database-saas-tutorial-log-analytics.md) - Setting up and using Log Analytics tutorial</span></span>
