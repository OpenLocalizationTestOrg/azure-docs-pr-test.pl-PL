---
title: "Uwierzytelnianie w usłudze Azure Active Directory aaaConfigure — SQL | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak tooconnect tooSQL bazy danych i usługi SQL Data Warehouse przy użyciu uwierzytelniania usługi Azure Active Directory."
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 7e2508a1-347e-4f15-b060-d46602c5ce7e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/10/2017
ms.author: rickbyh
ms.openlocfilehash: d6222da0b840f96d4bcfbc02964dc7c54d5ea1ee
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="configure-and-manage-azure-active-directory-authentication-with-sql-database-or-sql-data-warehouse"></a><span data-ttu-id="16f7a-103">Konfigurowanie i zarządzanie nimi uwierzytelniania usługi Azure Active Directory z bazą danych SQL lub SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="16f7a-103">Configure and manage Azure Active Directory authentication with SQL Database or SQL Data Warehouse</span></span>

<span data-ttu-id="16f7a-104">W tym artykule opisano sposób toocreate i wypełnić usługi Azure AD, a następnie użyć usługi Azure AD z bazy danych SQL Azure i SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="16f7a-104">This article shows you how toocreate and populate Azure AD, and then use Azure AD with Azure SQL Database and SQL Data Warehouse.</span></span> <span data-ttu-id="16f7a-105">Aby uzyskać ogólne informacje, zobacz [uwierzytelniania usługi Azure Active Directory](sql-database-aad-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="16f7a-105">For an overview, see [Azure Active Directory Authentication](sql-database-aad-authentication.md).</span></span>

>  [!NOTE]  
>  <span data-ttu-id="16f7a-106">Łączenie tooSQL na serwerze działa na maszynie Wirtualnej platformy Azure nie jest obsługiwany przy użyciu konta usługi Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="16f7a-106">Connecting tooSQL Server running on an Azure VM is not supported using an Azure Active Directory account.</span></span> <span data-ttu-id="16f7a-107">Zamiast tego użyj domeny konta usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="16f7a-107">Use a domain Active Directory account instead.</span></span>

## <a name="create-and-populate-an-azure-ad"></a><span data-ttu-id="16f7a-108">Utworzyć i wypełnić usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="16f7a-108">Create and populate an Azure AD</span></span>
<span data-ttu-id="16f7a-109">Tworzenie usługi Azure AD i wypełnić ją użytkowników i grup.</span><span class="sxs-lookup"><span data-stu-id="16f7a-109">Create an Azure AD and populate it with users and groups.</span></span> <span data-ttu-id="16f7a-110">Usługi Azure AD można domeny zarządzanej hello domeny początkowej usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="16f7a-110">Azure AD can be hello initial domain Azure AD managed domain.</span></span> <span data-ttu-id="16f7a-111">Usługi Azure AD można także lokalnych usług domenowych Active Directory, który jest Sfederowane przy użyciu hello Azure AD.</span><span class="sxs-lookup"><span data-stu-id="16f7a-111">Azure AD can also be an on-premises Active Directory Domain Services that is federated with hello Azure AD.</span></span>

<span data-ttu-id="16f7a-112">Aby uzyskać więcej informacji, zobacz [integrowanie tożsamości lokalnych z usługą Azure Active Directory](../active-directory/active-directory-aadconnect.md), [dodać własne tooAzure nazwy domeny AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure obsługuje teraz federacji z Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [administrowanie katalogiem usługi Azure AD](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Zarządzanie usługą Azure AD przy użyciu programu Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0), i [tożsamość hybrydowa Wymagane porty i protokoły](../active-directory/active-directory-aadconnect-ports.md).</span><span class="sxs-lookup"><span data-stu-id="16f7a-112">For more information, see [Integrating your on-premises identities with Azure Active Directory](../active-directory/active-directory-aadconnect.md), [Add your own domain name tooAzure AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [Administering your Azure AD directory](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Manage Azure AD using Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0), and [Hybrid Identity Required Ports and Protocols](../active-directory/active-directory-aadconnect-ports.md).</span></span>

## <a name="optional-associate-or-change-hello-active-directory-that-is-currently-associated-with-your-azure-subscription"></a><span data-ttu-id="16f7a-113">Opcjonalnie: Skojarz lub zmienić usługi active directory hello aktualnie skojarzony z subskrypcją platformy Azure</span><span class="sxs-lookup"><span data-stu-id="16f7a-113">Optional: Associate or change hello active directory that is currently associated with your Azure Subscription</span></span>
<span data-ttu-id="16f7a-114">tooassociate bazy danych za pomocą katalogu hello Azure AD dla organizacji, Utwórz katalog hello zaufanego katalogu subskrypcji platformy Azure hostingu hello hello w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="16f7a-114">tooassociate your database with hello Azure AD directory for your organization, make hello directory a trusted directory for hello Azure subscription hosting hello database.</span></span> <span data-ttu-id="16f7a-115">Aby uzyskać więcej informacji, zobacz [Jak subskrypcje platformy Azure są kojarzone z usługą Azure Active Directory](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span><span class="sxs-lookup"><span data-stu-id="16f7a-115">For more information, see [How Azure subscriptions are associated with Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span></span>

<span data-ttu-id="16f7a-116">**Informacje dodatkowe:** subskrypcji Azure co ma relację zaufania z wystąpieniem usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="16f7a-116">**Additional information:** Every Azure subscription has a trust relationship with an Azure AD instance.</span></span> <span data-ttu-id="16f7a-117">Oznacza to, że subskrypcja ufa tooauthenticate tego katalogu użytkowników, usług i urządzeń.</span><span class="sxs-lookup"><span data-stu-id="16f7a-117">This means that it trusts that directory tooauthenticate users, services, and devices.</span></span> <span data-ttu-id="16f7a-118">Wiele subskrypcji może ufać hello tym samym katalogu, ale subskrypcji ufać tylko jednemu katalogowi.</span><span class="sxs-lookup"><span data-stu-id="16f7a-118">Multiple subscriptions can trust hello same directory, but a subscription trusts only one directory.</span></span> <span data-ttu-id="16f7a-119">Widać, katalog jest uważany za zaufany przez subskrypcję w obszarze hello **ustawienia** tab na [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span><span class="sxs-lookup"><span data-stu-id="16f7a-119">You can see which directory is trusted by your subscription under hello **Settings** tab at [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span></span> <span data-ttu-id="16f7a-120">Relacja zaufania między subskrypcją z katalogiem różni się od relacji hello, która ma subskrypcji z wszystkimi innymi zasobami na platformie Azure (witrynami sieci Web, baz danych i tak dalej), które przypominają bardziej podrzędne zasoby subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="16f7a-120">This trust relationship that a subscription has with a directory is unlike hello relationship that a subscription has with all other resources in Azure (websites, databases, and so on), which are more like child resources of a subscription.</span></span> <span data-ttu-id="16f7a-121">Jeśli subskrypcja wygaśnie, dostęp do innych zasobów skojarzonych z subskrypcją hello toothose również nie będzie możliwy.</span><span class="sxs-lookup"><span data-stu-id="16f7a-121">If a subscription expires, then access toothose other resources associated with hello subscription also stops.</span></span> <span data-ttu-id="16f7a-122">Jednak hello katalog pozostanie na platformie Azure i można skojarzyć z nim inną subskrypcję i kontynuować toomanage hello katalogu użytkowników.</span><span class="sxs-lookup"><span data-stu-id="16f7a-122">But hello directory remains in Azure, and you can associate another subscription with that directory and continue toomanage hello directory users.</span></span> <span data-ttu-id="16f7a-123">Aby uzyskać więcej informacji o zasobach, zobacz [opis dostęp do zasobów na platformie Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span><span class="sxs-lookup"><span data-stu-id="16f7a-123">For more information about resources, see [Understanding resource access in Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span></span>

<span data-ttu-id="16f7a-124">Witaj poniższe procedury pokazują, jak toochange hello skojarzone katalogu w ramach danej subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="16f7a-124">hello following procedures show you how toochange hello associated directory for a given subscription.</span></span>
1. <span data-ttu-id="16f7a-125">Połącz tooyour [klasycznego portalu Azure](https://manage.windowsazure.com/) za pomocą administratora subskrypcji platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="16f7a-125">Connect tooyour [Azure Classic Portal](https://manage.windowsazure.com/) by using an Azure subscription administrator.</span></span>
2. <span data-ttu-id="16f7a-126">Na transparencie po lewej stronie powitania, wybierz **ustawienia**.</span><span class="sxs-lookup"><span data-stu-id="16f7a-126">On hello left banner, select **SETTINGS**.</span></span>
3. <span data-ttu-id="16f7a-127">Subskrypcji są wyświetlane na ekranie Ustawienia hello.</span><span class="sxs-lookup"><span data-stu-id="16f7a-127">Your subscriptions appear in hello settings screen.</span></span> <span data-ttu-id="16f7a-128">W razie potrzeby hello nie ma subskrypcji kliknij **subskrypcje** u góry hello listy rozwijanej hello **filtru przez katalog** i wybierz katalog hello, który zawiera subskrypcji, a następnie kliknij przycisk **Zastosuj**.</span><span class="sxs-lookup"><span data-stu-id="16f7a-128">If hello desired subscription does not appear, click **Subscriptions** at hello top, drop down hello **FILTER BY DIRECTORY** box and select hello directory that contains your subscriptions, and then click **APPLY**.</span></span>
   
    ![Wybierz subskrypcję][4]
4. <span data-ttu-id="16f7a-130">W hello **ustawienia** obszaru, kliknij subskrypcję, a następnie kliknij **Edytuj katalog** u dołu hello hello strony.</span><span class="sxs-lookup"><span data-stu-id="16f7a-130">In hello **settings** area, click your subscription, and then click  **EDIT DIRECTORY** at hello bottom of hello page.</span></span>
   
    ![AD ustawień portalu][5]
5. <span data-ttu-id="16f7a-132">W hello **Edytuj katalog** polu, wybierz hello Azure Active Directory, który jest skojarzony z programu SQL Server lub SQL Data Warehouse, a następnie kliknij strzałkę hello następny.</span><span class="sxs-lookup"><span data-stu-id="16f7a-132">In hello **EDIT DIRECTORY** box, select hello Azure Active Directory that is associated with your SQL Server or SQL Data Warehouse, and then click hello arrow for next.</span></span>
   
    ![Edytuj katalog wyboru][6]
6. <span data-ttu-id="16f7a-134">W hello **POTWIERDŹ** katalogu okno dialogowe Mapping, upewnij się, że "**zostaną usunięte wszystkie współadministratorów.**"</span><span class="sxs-lookup"><span data-stu-id="16f7a-134">In hello **CONFIRM** directory Mapping dialog box, confirm that "**All co-administrators will be removed.**"</span></span>
   
    ![Potwierdź katalogu edycji][7]
7. <span data-ttu-id="16f7a-136">Kliknij przycisk hello wyboru tooreload hello portalu.</span><span class="sxs-lookup"><span data-stu-id="16f7a-136">Click hello check tooreload hello portal.</span></span>

   > [!NOTE]
   > <span data-ttu-id="16f7a-137">Podczas zmiany katalogu hello, współadministratorów tooall dostępu, usługi Azure AD użytkownicy i grupy i katalog kopii zasobu użytkownicy zostaną usunięci i mają już dostęp toothis subskrypcji lub jej zasobów.</span><span class="sxs-lookup"><span data-stu-id="16f7a-137">When you change hello directory, access tooall co-administrators, Azure AD users and groups, and directory-backed resource users are removed and they no longer have access toothis subscription or its resources.</span></span> <span data-ttu-id="16f7a-138">Tylko, administrator usługi, można skonfigurować dostęp dla podmiotów zabezpieczeń oparte na powitania nowego katalogu.</span><span class="sxs-lookup"><span data-stu-id="16f7a-138">Only you, as a service administrator, can configure access for principals based on hello new directory.</span></span> <span data-ttu-id="16f7a-139">Ta zmiana może trwać dość czasu toopropagate tooall zasobów.</span><span class="sxs-lookup"><span data-stu-id="16f7a-139">This change might take a substantial amount of time toopropagate tooall resources.</span></span> <span data-ttu-id="16f7a-140">Zmienianie katalogu hello, również zmiany hello administratora usługi Azure AD dla bazy danych SQL i magazyn danych SQL i nie zezwalaj na dostęp do bazy danych dla wszystkich istniejących użytkowników usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="16f7a-140">Changing hello directory, also changes hello Azure AD administrator for SQL Database and SQL Data Warehouse and disallow database access for any existing Azure AD users.</span></span> <span data-ttu-id="16f7a-141">usługi Azure AD Witaj, Administratorze musi być resetowania (zgodnie z poniższym opisem) i nowej usługi Azure AD, użytkownicy muszą zostać utworzone.</span><span class="sxs-lookup"><span data-stu-id="16f7a-141">hello Azure AD admin must be reset (as described below) and new Azure AD users must be created.</span></span>
   >  

## <a name="create-an-azure-ad-administrator-for-azure-sql-server"></a><span data-ttu-id="16f7a-142">Utwórz administrator usługi Azure AD dla serwera Azure SQL</span><span class="sxs-lookup"><span data-stu-id="16f7a-142">Create an Azure AD administrator for Azure SQL server</span></span>
<span data-ttu-id="16f7a-143">Każdy serwer Azure SQL, (który jest hostem bazy danych SQL lub SQL Data Warehouse) rozpoczyna się od jednego serwera konta administratora, administratora hello hello całego serwera Azure SQL.</span><span class="sxs-lookup"><span data-stu-id="16f7a-143">Each Azure SQL server (which hosts a SQL Database or SQL Data Warehouse) starts with a single server administrator account that is hello administrator of hello entire Azure SQL server.</span></span> <span data-ttu-id="16f7a-144">Drugi administratora programu SQL Server musi zostać utworzony, który jest konto usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="16f7a-144">A second SQL Server administrator must be created, that is an Azure AD account.</span></span> <span data-ttu-id="16f7a-145">Tego podmiotu zabezpieczeń jest tworzony jako użytkownik zawartej bazy danych w bazie danych master hello.</span><span class="sxs-lookup"><span data-stu-id="16f7a-145">This principal is created as a contained database user in hello master database.</span></span> <span data-ttu-id="16f7a-146">Jako administratorów, kont administratora serwera hello są członkami hello **db_owner** roli w każdej użytkownika bazy danych, a następnie wprowadź każda baza danych użytkownika jako hello **dbo** użytkownika.</span><span class="sxs-lookup"><span data-stu-id="16f7a-146">As administrators, hello server administrator accounts are members of hello **db_owner** role in every user database, and enter each user database as hello **dbo** user.</span></span> <span data-ttu-id="16f7a-147">Aby uzyskać więcej informacji na temat kont administratora serwera hello, zobacz [Zarządzanie bazami danych i Logowaniami w bazie danych SQL Azure](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="16f7a-147">For more information about hello server administrator accounts, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="16f7a-148">Podczas korzystania z usługi Azure Active Directory z replikacja geograficzna, administrator usługi Azure Active Directory hello musi być skonfigurowany zarówno hello podstawowego, jak i serwerów pomocniczych hello.</span><span class="sxs-lookup"><span data-stu-id="16f7a-148">When using Azure Active Directory with geo-replication, hello Azure Active Directory administrator must be configured for both hello primary and hello secondary servers.</span></span> <span data-ttu-id="16f7a-149">Jeśli serwer nie ma administrator usługi Azure Active Directory, logowania do usługi Azure Active Directory, aby użytkownicy otrzymają komunikat o błędzie "Nie można połączyć z" tooserver.</span><span class="sxs-lookup"><span data-stu-id="16f7a-149">If a server does not have an Azure Active Directory administrator, then Azure Active Directory logins and users receive a "Cannot connect" tooserver error.</span></span>

> [!NOTE]
> <span data-ttu-id="16f7a-150">Użytkowników, którzy nie są oparte na koncie usługi Azure AD (łącznie z konta administratora serwera Azure SQL hello), nie można utworzyć usługi Azure AD użytkownicy, ponieważ nie mają uprawnień toovalidate proponowane bazy danych użytkowników z hello Azure AD.</span><span class="sxs-lookup"><span data-stu-id="16f7a-150">Users that are not based on an Azure AD account (including hello Azure SQL server administrator account), cannot create Azure AD-based users, because they do not have permission toovalidate proposed database users with hello Azure AD.</span></span>
> 

## <a name="provision-an-azure-active-directory-administrator-for-your-azure-sql-server"></a><span data-ttu-id="16f7a-151">Zapewnij administrator usługi Azure Active Directory dla serwera Azure SQL</span><span class="sxs-lookup"><span data-stu-id="16f7a-151">Provision an Azure Active Directory administrator for your Azure SQL server</span></span>

<span data-ttu-id="16f7a-152">Witaj dwóch procedur przedstawionych przedstawia sposób tooprovision administratorem serwera Azure SQL w hello portalu Azure i przy użyciu programu PowerShell usługi Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="16f7a-152">hello following two procedures show you how tooprovision an Azure Active Directory administrator for your Azure SQL server in hello Azure portal and by using PowerShell.</span></span>

### <a name="azure-portal"></a><span data-ttu-id="16f7a-153">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="16f7a-153">Azure portal</span></span>
1. <span data-ttu-id="16f7a-154">W hello [portalu Azure](https://portal.azure.com/), w prawym górnym rogu Witaj, kliknij przycisk toodrop Twojego połączenia w dół listę możliwych usług Active Directory.</span><span class="sxs-lookup"><span data-stu-id="16f7a-154">In hello [Azure portal](https://portal.azure.com/), in hello upper-right corner, click your connection toodrop down a list of possible Active Directories.</span></span> <span data-ttu-id="16f7a-155">Wybierz hello Popraw usługi Active Directory jako domyślny hello Azure AD.</span><span class="sxs-lookup"><span data-stu-id="16f7a-155">Choose hello correct Active Directory as hello default Azure AD.</span></span> <span data-ttu-id="16f7a-156">Ten krok łącza hello subskrypcji skojarzenia z usługą Active Directory z serwerem Azure SQL, upewniając się, że hello tej samej subskrypcji jest używana zarówno dla usługi Azure AD i programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="16f7a-156">This step links hello subscription association with Active Directory with Azure SQL server making sure that hello same subscription is used for both Azure AD and SQL Server.</span></span> <span data-ttu-id="16f7a-157">(hello Azure SQL server może obsługiwać, baza danych SQL Azure lub usługi Azure SQL Data Warehouse.)</span><span class="sxs-lookup"><span data-stu-id="16f7a-157">(hello Azure SQL server can be hosting either Azure SQL Database or Azure SQL Data Warehouse.)</span></span>   
    <span data-ttu-id="16f7a-158">![Wybierz ad][8]</span><span class="sxs-lookup"><span data-stu-id="16f7a-158">![choose-ad][8]</span></span>   
    
2. <span data-ttu-id="16f7a-159">W hello pozostałych wybierz Transparent **serwerów SQL**, wybierz pozycję z **programu SQL server**i następnie w hello **programu SQL Server** bloku, kliknij przycisk **administratora usługi Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="16f7a-159">In hello left banner select **SQL servers**, select your **SQL server**, and then in hello **SQL Server** blade, click **Active Directory admin**.</span></span>   
3. <span data-ttu-id="16f7a-160">W hello **administratora usługi Active Directory** bloku, kliknij przycisk **ustawić administratora**.</span><span class="sxs-lookup"><span data-stu-id="16f7a-160">In hello **Active Directory admin** blade, click **Set admin**.</span></span>   
    <span data-ttu-id="16f7a-161">![Wybierz usługi active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span><span class="sxs-lookup"><span data-stu-id="16f7a-161">![select active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span></span>  
    
4. <span data-ttu-id="16f7a-162">W hello **dodać administratora** bloku, Wyszukaj użytkownika, wybierz hello użytkownika lub grupy toobe administrator, a następnie kliknij przycisk **wybierz**.</span><span class="sxs-lookup"><span data-stu-id="16f7a-162">In hello **Add admin** blade, search for a user, select hello user or group toobe an administrator, and then click **Select**.</span></span> <span data-ttu-id="16f7a-163">(bloku administratora usługi Active Directory hello zawiera wszystkie elementy członkowskie i grup usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="16f7a-163">(hello Active Directory admin blade shows all members and groups of your Active Directory.</span></span> <span data-ttu-id="16f7a-164">Nie można wybrać użytkowników lub grup, które są wygaszone, ponieważ nie są obsługiwane jako administratorów usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="16f7a-164">Users or groups that are grayed out cannot be selected because they are not supported as Azure AD administrators.</span></span> <span data-ttu-id="16f7a-165">(Zobacz listę obsługiwanych Administratorzy w hello hello **funkcje usługi Azure AD i ograniczenia** sekcji [Użyj Azure uwierzytelnianie usługi Active Directory do uwierzytelniania przy użyciu bazy danych SQL lub SQL Data Warehouse](sql-database-aad-authentication.md).) Kontrola dostępu oparta na rolach (RBAC) dotyczy tylko portal toohello i nie jest propagowany tooSQL serwera.</span><span class="sxs-lookup"><span data-stu-id="16f7a-165">(See hello list of supported admins in hello **Azure AD Features and Limitations** section of [Use Azure Active Directory Authentication for authentication with SQL Database or SQL Data Warehouse](sql-database-aad-authentication.md).) Role-based access control (RBAC) applies only toohello portal and is not propagated tooSQL Server.</span></span>   
    <span data-ttu-id="16f7a-166">![Wybierz administratora](./media/sql-database-aad-authentication/select-admin.png)</span><span class="sxs-lookup"><span data-stu-id="16f7a-166">![select admin](./media/sql-database-aad-authentication/select-admin.png)</span></span>  
    
5. <span data-ttu-id="16f7a-167">U góry hello hello **administratora usługi Active Directory** bloku, kliknij przycisk **ZAPISAĆ**.</span><span class="sxs-lookup"><span data-stu-id="16f7a-167">At hello top of hello **Active Directory admin** blade, click **SAVE**.</span></span>   
    <span data-ttu-id="16f7a-168">![Zapisz administratora](./media/sql-database-aad-authentication/save-admin.png)</span><span class="sxs-lookup"><span data-stu-id="16f7a-168">![save admin](./media/sql-database-aad-authentication/save-admin.png)</span></span>   

<span data-ttu-id="16f7a-169">Witaj zmiany hello administrator może potrwać kilka minut.</span><span class="sxs-lookup"><span data-stu-id="16f7a-169">hello process of changing hello administrator may take several minutes.</span></span> <span data-ttu-id="16f7a-170">Następnie hello nowego administratora jest wyświetlana w hello **administratora usługi Active Directory** pole.</span><span class="sxs-lookup"><span data-stu-id="16f7a-170">Then hello new administrator appears in hello **Active Directory admin** box.</span></span>

   > [!NOTE]
   > <span data-ttu-id="16f7a-171">Podczas konfigurowania usługi Azure AD Witaj, Administratorze, hello nową nazwę administratora (użytkownik lub grupa) nie może być już dostępne w bazie danych master wirtualnego hello jako użytkownik uwierzytelniania programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="16f7a-171">When setting up hello Azure AD admin, hello new admin name (user or group) cannot already be present in hello virtual master database as a SQL Server authentication user.</span></span> <span data-ttu-id="16f7a-172">Jeśli jest obecny, hello Azure AD administratora instalacja nie powiedzie się; Wycofywanie jej tworzenia i wskazujący tego takie jak administrator (nazwa) już istnieje.</span><span class="sxs-lookup"><span data-stu-id="16f7a-172">If present, hello Azure AD admin setup will fail; rolling back its creation and indicating that such an admin (name) already exists.</span></span> <span data-ttu-id="16f7a-173">Ponieważ taki użytkownik uwierzytelniania programu SQL Server nie jest częścią hello Azure AD, dowolnego serwera toohello tooconnect nakładu pracy przy użyciu uwierzytelniania usługi Azure AD nie powiedzie się.</span><span class="sxs-lookup"><span data-stu-id="16f7a-173">Since such a SQL Server authentication user is not part of hello Azure AD, any effort tooconnect toohello server using Azure AD authentication fails.</span></span>
   > 


<span data-ttu-id="16f7a-174">toolater usunąć administratora, u góry hello hello **administratora usługi Active Directory** bloku, kliknij przycisk **usunąć administratora**, a następnie kliknij przycisk **zapisać**.</span><span class="sxs-lookup"><span data-stu-id="16f7a-174">toolater remove an Admin, at hello top of hello **Active Directory admin** blade, click **Remove admin**, and then click **Save**.</span></span>

### <a name="powershell"></a><span data-ttu-id="16f7a-175">PowerShell</span><span class="sxs-lookup"><span data-stu-id="16f7a-175">PowerShell</span></span>
<span data-ttu-id="16f7a-176">toorun poleceń cmdlet programu PowerShell, należy toohave programu Azure PowerShell zainstalowany i uruchomiony.</span><span class="sxs-lookup"><span data-stu-id="16f7a-176">toorun PowerShell cmdlets, you need toohave Azure PowerShell installed and running.</span></span> <span data-ttu-id="16f7a-177">Aby uzyskać szczegółowe informacje, zobacz [jak tooinstall i konfigurowanie programu Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="16f7a-177">For detailed information, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>

<span data-ttu-id="16f7a-178">tooprovision administratora usługi Azure AD, wykonaj hello następującego polecenia programu PowerShell systemu Azure:</span><span class="sxs-lookup"><span data-stu-id="16f7a-178">tooprovision an Azure AD admin, execute hello following Azure PowerShell commands:</span></span>

* <span data-ttu-id="16f7a-179">Add-AzureRmAccount</span><span class="sxs-lookup"><span data-stu-id="16f7a-179">Add-AzureRmAccount</span></span>
* <span data-ttu-id="16f7a-180">SELECT-AzureRmSubscription</span><span class="sxs-lookup"><span data-stu-id="16f7a-180">Select-AzureRmSubscription</span></span>

<span data-ttu-id="16f7a-181">Polecenia cmdlet używane tooprovision oraz zarządzać nimi administratora usługi Azure AD:</span><span class="sxs-lookup"><span data-stu-id="16f7a-181">Cmdlets used tooprovision and manage Azure AD admin:</span></span>

| <span data-ttu-id="16f7a-182">Nazwa polecenia cmdlet</span><span class="sxs-lookup"><span data-stu-id="16f7a-182">Cmdlet name</span></span> | <span data-ttu-id="16f7a-183">Opis</span><span class="sxs-lookup"><span data-stu-id="16f7a-183">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="16f7a-184">Zestaw AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="16f7a-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/set-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="16f7a-185">Inicjuje administrator usługi Azure Active Directory dla serwera Azure SQL lub usługi Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="16f7a-185">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="16f7a-186">(Musi być z bieżącej subskrypcji hello).</span><span class="sxs-lookup"><span data-stu-id="16f7a-186">(Must be from hello current subscription.)</span></span> |
| [<span data-ttu-id="16f7a-187">Usuń AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="16f7a-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/remove-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="16f7a-188">Usuwa administratora usługi Azure Active Directory dla serwera Azure SQL lub usługi Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="16f7a-188">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
| [<span data-ttu-id="16f7a-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="16f7a-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/get-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="16f7a-190">Zwraca informacje o administrator usługi Azure Active Directory aktualnie skonfigurowanych dla serwera Azure SQL hello lub magazyn danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="16f7a-190">Returns information about an Azure Active Directory administrator currently configured for hello Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="16f7a-191">Za pomocą polecenia get-help toosee więcej szczegółowych informacji dla każdego z tych poleceń, na przykład programu PowerShell ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span><span class="sxs-lookup"><span data-stu-id="16f7a-191">Use PowerShell command get-help toosee more details for each of these commands, for example ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span></span>

<span data-ttu-id="16f7a-192">Witaj następujące postanowienia skryptu o nazwie grupy administratorów usługi Azure AD **DBA_Group** (identyfikator obiektu `40b79501-b343-44ed-9ce7-da4c8cc7353f`) dla hello **demo_server** serwera w grupie zasobów o nazwie **grupy-23** :</span><span class="sxs-lookup"><span data-stu-id="16f7a-192">hello following script provisions an Azure AD administrator group named **DBA_Group** (object id `40b79501-b343-44ed-9ce7-da4c8cc7353f`) for hello **demo_server** server in a resource group named **Group-23**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group"
```

<span data-ttu-id="16f7a-193">Witaj **DisplayName** akceptuje parametr wejściowy, nazwa wyświetlana hello Azure AD lub hello główna nazwa użytkownika.</span><span class="sxs-lookup"><span data-stu-id="16f7a-193">hello **DisplayName** input parameter accepts either hello Azure AD display name or hello User Principal Name.</span></span> <span data-ttu-id="16f7a-194">Na przykład ``DisplayName="John Smith"`` i ``DisplayName="johns@contoso.com"``.</span><span class="sxs-lookup"><span data-stu-id="16f7a-194">For example, ``DisplayName="John Smith"`` and ``DisplayName="johns@contoso.com"``.</span></span> <span data-ttu-id="16f7a-195">Dla usługi Azure AD grup tylko hello Azure AD Nazwa wyświetlana jest obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="16f7a-195">For Azure AD groups only hello Azure AD display name is supported.</span></span>

> [!NOTE]
> <span data-ttu-id="16f7a-196">Witaj polecenia programu PowerShell Azure ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` nie uniemożliwiają inicjowania obsługi administracyjnej administratorów usługi Azure AD dla użytkowników nieobsługiwany.</span><span class="sxs-lookup"><span data-stu-id="16f7a-196">hello Azure PowerShell  command ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` does not prevent you from provisioning Azure AD admins for unsupported users.</span></span> <span data-ttu-id="16f7a-197">Nieobsługiwany użytkownika można udostępnić, ale nie można połączyć z tooa bazy danych.</span><span class="sxs-lookup"><span data-stu-id="16f7a-197">An unsupported user can be provisioned, but can not connect tooa database.</span></span> 
> 

<span data-ttu-id="16f7a-198">Witaj poniższym przykładzie użyto hello opcjonalne **ObjectID**:</span><span class="sxs-lookup"><span data-stu-id="16f7a-198">hello following example uses hello optional **ObjectID**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group" -ObjectId "40b79501-b343-44ed-9ce7-da4c8cc7353f"
```

> [!NOTE]
> <span data-ttu-id="16f7a-199">Witaj w usłudze Azure AD **ObjectID** jest wymagany w przypadku hello **DisplayName** nie jest unikatowa.</span><span class="sxs-lookup"><span data-stu-id="16f7a-199">hello Azure AD **ObjectID** is required when hello **DisplayName** is not unique.</span></span> <span data-ttu-id="16f7a-200">Witaj tooretrieve **ObjectID** i **DisplayName** wartości, za pomocą usługi Active Directory sekcji hello klasycznego portalu Azure i wyświetlić właściwości hello użytkownika lub grupy.</span><span class="sxs-lookup"><span data-stu-id="16f7a-200">tooretrieve hello **ObjectID** and **DisplayName** values, use hello Active Directory section of Azure Classic Portal, and view hello properties of a user or group.</span></span>
> 

<span data-ttu-id="16f7a-201">Witaj poniższy przykład zwraca informacje na temat hello bieżącej usługi Azure AD administratora serwera Azure SQL:</span><span class="sxs-lookup"><span data-stu-id="16f7a-201">hello following example returns information about hello current Azure AD admin for Azure SQL server:</span></span>

```
Get-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server" | Format-List
```

<span data-ttu-id="16f7a-202">Poniższy przykład Hello usuwa administrator usługi Azure AD:</span><span class="sxs-lookup"><span data-stu-id="16f7a-202">hello following example removes an Azure AD administrator:</span></span>

```
Remove-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server"
```

<span data-ttu-id="16f7a-203">Administrator usługi Azure Active Directory można również udostępniać za pomocą hello interfejsów API REST.</span><span class="sxs-lookup"><span data-stu-id="16f7a-203">You can also provision an Azure Active Directory Administrator by using hello REST APIs.</span></span> <span data-ttu-id="16f7a-204">Aby uzyskać więcej informacji, zobacz [operacje dla operacji bazy danych SQL Azure dla baz danych SQL Azure i dokumentacja interfejsu API REST usługi zarządzania](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span><span class="sxs-lookup"><span data-stu-id="16f7a-204">For more information, see [Service Management REST API Reference and Operations for Azure SQL Databases Operations for Azure SQL Databases](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span></span>

### <a name="cli"></a><span data-ttu-id="16f7a-205">Interfejs wiersza polecenia</span><span class="sxs-lookup"><span data-stu-id="16f7a-205">CLI</span></span>  
<span data-ttu-id="16f7a-206">Administrator usługi Azure AD można również udostępniać przez wywołanie hello następujące polecenia interfejsu wiersza polecenia:</span><span class="sxs-lookup"><span data-stu-id="16f7a-206">You can also provision an Azure AD admin by calling hello following CLI commands:</span></span>
| <span data-ttu-id="16f7a-207">Polecenie</span><span class="sxs-lookup"><span data-stu-id="16f7a-207">Command</span></span> | <span data-ttu-id="16f7a-208">Opis</span><span class="sxs-lookup"><span data-stu-id="16f7a-208">Description</span></span> |
| --- | --- |
|[<span data-ttu-id="16f7a-209">Tworzenie serwera sql az ad — administrator</span><span class="sxs-lookup"><span data-stu-id="16f7a-209">az sql server ad-admin create</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#create) |<span data-ttu-id="16f7a-210">Inicjuje administrator usługi Azure Active Directory dla serwera Azure SQL lub usługi Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="16f7a-210">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="16f7a-211">(Musi być z bieżącej subskrypcji hello).</span><span class="sxs-lookup"><span data-stu-id="16f7a-211">(Must be from hello current subscription.)</span></span> |
|[<span data-ttu-id="16f7a-212">Usuń ad administratora serwera sql az</span><span class="sxs-lookup"><span data-stu-id="16f7a-212">az sql server ad-admin delete</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#delete) |<span data-ttu-id="16f7a-213">Usuwa administratora usługi Azure Active Directory dla serwera Azure SQL lub usługi Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="16f7a-213">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="16f7a-214">Lista ad administratora serwera sql az</span><span class="sxs-lookup"><span data-stu-id="16f7a-214">az sql server ad-admin list</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#list) |<span data-ttu-id="16f7a-215">Zwraca informacje o administrator usługi Azure Active Directory aktualnie skonfigurowanych dla serwera Azure SQL hello lub magazyn danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="16f7a-215">Returns information about an Azure Active Directory administrator currently configured for hello Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="16f7a-216">Aktualizacja ad administratora programu sql server az</span><span class="sxs-lookup"><span data-stu-id="16f7a-216">az sql server ad-admin update</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#update) |<span data-ttu-id="16f7a-217">Aktualizuje hello administratora usługi Active Directory dla serwera Azure SQL lub usługi Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="16f7a-217">Updates hello Active Directory administrator for an Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="16f7a-218">Aby uzyskać więcej informacji na temat poleceń interfejsu wiersza polecenia, zobacz [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span><span class="sxs-lookup"><span data-stu-id="16f7a-218">For more information about CLI commands, see [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span></span>  


## <a name="configure-your-client-computers"></a><span data-ttu-id="16f7a-219">Konfigurowanie komputerów klienckich</span><span class="sxs-lookup"><span data-stu-id="16f7a-219">Configure your client computers</span></span>
<span data-ttu-id="16f7a-220">Na wszystkich komputerach klienckich, z których aplikacje lub użytkowników połączenie tooAzure bazy danych SQL lub magazyn danych SQL Azure przy użyciu tożsamości usługi Azure AD, należy zainstalować hello następującego oprogramowania:</span><span class="sxs-lookup"><span data-stu-id="16f7a-220">On all client machines, from which your applications or users connect tooAzure SQL Database or Azure SQL Data Warehouse using Azure AD identities, you must install hello following software:</span></span>

* <span data-ttu-id="16f7a-221">.NET framework 4.6 lub nowszy z [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span><span class="sxs-lookup"><span data-stu-id="16f7a-221">.NET Framework 4.6 or later from [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span></span>
* <span data-ttu-id="16f7a-222">Azure Active Directory Authentication Library dla programu SQL Server (**ADALSQL. Biblioteki DLL**) są dostępne w wielu językach (x x86 i amd64) z Centrum pobierania hello [Microsoft Active Directory Authentication Library dla programu Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span><span class="sxs-lookup"><span data-stu-id="16f7a-222">Azure Active Directory Authentication Library for SQL Server (**ADALSQL.DLL**) is available in multiple languages (both x86 and amd64) from hello download center at [Microsoft Active Directory Authentication Library for Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span></span>

<span data-ttu-id="16f7a-223">Można spełnienia tych wymagań:</span><span class="sxs-lookup"><span data-stu-id="16f7a-223">You can meet these requirements by:</span></span>

* <span data-ttu-id="16f7a-224">Zainstalowanie dowolnej [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) lub [programu SQL Server Data Tools dla programu Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) spełnia hello wymaganie programu .NET Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="16f7a-224">Installing either [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) or [SQL Server Data Tools for Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) meets hello .NET Framework 4.6 requirement.</span></span>
* <span data-ttu-id="16f7a-225">SSMS instaluje wersję hello x86 **ADALSQL. Biblioteki DLL**.</span><span class="sxs-lookup"><span data-stu-id="16f7a-225">SSMS installs hello x86 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="16f7a-226">Program SSDT instaluje wersję amd64 hello **ADALSQL. Biblioteki DLL**.</span><span class="sxs-lookup"><span data-stu-id="16f7a-226">SSDT installs hello amd64 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="16f7a-227">Witaj najnowsze Visual Studio z [Visual Studio pobiera](https://www.visualstudio.com/downloads/download-visual-studio-vs) spełnia wymagania hello .NET Framework 4.6, ale nie instaluje wersję wymagane amd64 hello **ADALSQL. Biblioteki DLL**.</span><span class="sxs-lookup"><span data-stu-id="16f7a-227">hello latest Visual Studio from [Visual Studio Downloads](https://www.visualstudio.com/downloads/download-visual-studio-vs) meets hello .NET Framework 4.6 requirement, but does not install hello required amd64 version of **ADALSQL.DLL**.</span></span>

## <a name="create-contained-database-users-in-your-database-mapped-tooazure-ad-identities"></a><span data-ttu-id="16f7a-228">Utwórz użytkowników zawartej bazy danych w sieci tooAzure zamapować bazy danych tożsamości usługi AD</span><span class="sxs-lookup"><span data-stu-id="16f7a-228">Create contained database users in your database mapped tooAzure AD identities</span></span>

<span data-ttu-id="16f7a-229">Uwierzytelnianie usługi Active Directory systemu Azure wymaga bazy danych użytkowników toobe utworzony jako użytkowników zawartej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="16f7a-229">Azure Active Directory authentication requires database users toobe created as contained database users.</span></span> <span data-ttu-id="16f7a-230">Użytkownik zawartej bazy danych na podstawie tożsamości usługi Azure AD jest użytkownika bazy danych, która nie ma nazwy logowania w bazie danych master hello i tożsamość tooan mapy w hello katalogu usługi Azure AD, który jest skojarzony z hello bazy danych.</span><span class="sxs-lookup"><span data-stu-id="16f7a-230">A contained database user based on an Azure AD identity, is a database user that does not have a login in hello master database, and which maps tooan identity in hello Azure AD directory that is associated with hello database.</span></span> <span data-ttu-id="16f7a-231">Witaj tożsamości usługi Azure AD może być indywidualne konto użytkownika lub grupę.</span><span class="sxs-lookup"><span data-stu-id="16f7a-231">hello Azure AD identity can be either an individual user account or a group.</span></span> <span data-ttu-id="16f7a-232">Aby uzyskać więcej informacji dotyczących użytkowników zawartej bazy danych, zobacz [zawartych użytkowników bazy danych — wprowadzanie Your przenośne bazy danych](https://msdn.microsoft.com/library/ff929188.aspx).</span><span class="sxs-lookup"><span data-stu-id="16f7a-232">For more information about contained database users, see [Contained Database Users- Making Your Database Portable](https://msdn.microsoft.com/library/ff929188.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="16f7a-233">Nie można utworzyć bazy danych użytkowników (z wyjątkiem hello administratorów) za pomocą portalu.</span><span class="sxs-lookup"><span data-stu-id="16f7a-233">Database users (with hello exception of administrators) cannot be created using portal.</span></span> <span data-ttu-id="16f7a-234">Role RBAC nie są propagowany tooSQL serwera, SQL Database lub SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="16f7a-234">RBAC roles are not propagated tooSQL Server, SQL Database, or SQL Data Warehouse.</span></span> <span data-ttu-id="16f7a-235">Role RBAC Azure są używane do zarządzania zasobami Azure i nie stosuj uprawnień toodatabase.</span><span class="sxs-lookup"><span data-stu-id="16f7a-235">Azure RBAC roles are used for managing Azure Resources, and do not apply toodatabase permissions.</span></span> <span data-ttu-id="16f7a-236">Na przykład Witaj **programu SQL Server współautora** roli nie powoduje przyznania dostępu tooconnect toohello SQL Database lub SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="16f7a-236">For example, hello **SQL Server Contributor** role does not grant access tooconnect toohello SQL Database or SQL Data Warehouse.</span></span> <span data-ttu-id="16f7a-237">uprawnienia dostępu Hello musi otrzymać bezpośrednio w hello bazy danych przy użyciu instrukcji języka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="16f7a-237">hello access permission must be granted directly in hello database using Transact-SQL statements.</span></span>
>

<span data-ttu-id="16f7a-238">co najmniej hello Azure AD na podstawie zawarte bazy danych użytkownika (inne niż hello administrator serwera, który jest właścicielem hello bazy danych), połączenie toohello bazy danych przy użyciu tożsamości usługi Azure AD jako użytkownik z toocreate **ALTER dowolny użytkownik** uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="16f7a-238">toocreate an Azure AD-based contained database user (other than hello server administrator that owns hello database), connect toohello database with an Azure AD identity, as a user with at least hello **ALTER ANY USER** permission.</span></span> <span data-ttu-id="16f7a-239">Następnie użyj hello składni języka Transact-SQL:</span><span class="sxs-lookup"><span data-stu-id="16f7a-239">Then use hello following Transact-SQL syntax:</span></span>

```
CREATE USER <Azure_AD_principal_name> FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="16f7a-240">*Azure_AD_principal_name* może być hello nazwy głównej użytkownika usługi Azure AD użytkownika lub hello nazwę wyświetlaną grupy usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="16f7a-240">*Azure_AD_principal_name* can be hello user principal name of an Azure AD user or hello display name for an Azure AD group.</span></span>

<span data-ttu-id="16f7a-241">**Przykłady:** toocreate użytkownika zawartej bazy danych usługi Azure AD reprezentująca federacyjni lub zarządzani użytkownika domeny:</span><span class="sxs-lookup"><span data-stu-id="16f7a-241">**Examples:** toocreate a contained database user representing an Azure AD federated or managed domain user:</span></span>
```
CREATE USER [bob@contoso.com] FROM EXTERNAL PROVIDER;
CREATE USER [alice@fabrikam.onmicrosoft.com] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="16f7a-242">toocreate reprezentujący usługi Azure AD lub grupy domeny federacyjnej użytkownika zawartej bazy danych Podaj nazwę wyświetlaną hello grupy zabezpieczeń:</span><span class="sxs-lookup"><span data-stu-id="16f7a-242">toocreate a contained database user representing an Azure AD or federated domain group, provide hello display name of a security group:</span></span>
```
CREATE USER [ICU Nurses] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="16f7a-243">toocreate użytkowników zawartej bazy danych, reprezentujący aplikacji, która łączy się przy użyciu tokenu usługi Azure AD:</span><span class="sxs-lookup"><span data-stu-id="16f7a-243">toocreate a contained database user representing an application that connects using an Azure AD token:</span></span>

```
CREATE USER [appName] FROM EXTERNAL PROVIDER;
```

>  [!TIP]
>  <span data-ttu-id="16f7a-244">Nie można bezpośrednio utworzyć użytkownika z usługi Azure Active Directory niż hello Azure Active Directory, który jest skojarzony z subskrypcją platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="16f7a-244">You cannot directly create a user from an Azure Active Directory other than hello Azure Active Directory that is associated with your Azure subscription.</span></span> <span data-ttu-id="16f7a-245">Jednak członkami innych katalogów Active, które są importowane użytkowników w hello skojarzone usługi Active Directory (nazywane użytkowników zewnętrznych) można dodać grupy usługi Active Directory tooan w dzierżawie powitalnych usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="16f7a-245">However, members of other Active Directories that are imported users in hello associated Active Directory (known as external users) can be added tooan Active Directory group in hello tenant Active Directory.</span></span> <span data-ttu-id="16f7a-246">Tworząc użytkownika zawartej bazy danych dla tej grupy AD hello użytkownikom hello zewnętrznej usługi Active Directory mogą uzyskać tooSQL dostępu do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="16f7a-246">By creating a contained database user for that AD group, hello users from hello external Active Directory can gain access tooSQL Database.</span></span>   

<span data-ttu-id="16f7a-247">Aby uzyskać więcej informacji o tworzeniu zawarte bazy danych użytkowników na podstawie tożsamości usługi Azure Active Directory, zobacz [Tworzenie użytkownika (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span><span class="sxs-lookup"><span data-stu-id="16f7a-247">For more information about creating contained database users based on Azure Active Directory identities, see [CREATE USER (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="16f7a-248">Usuwania hello administratora usługi Azure Active Directory dla usługi Azure SQL server zapobiega łączenia serwera toohello każdy użytkownik uwierzytelniania usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="16f7a-248">Removing hello Azure Active Directory administrator for Azure SQL server prevents any Azure AD authentication user from connecting toohello server.</span></span> <span data-ttu-id="16f7a-249">Jeśli to konieczne, korzystanie z niej użytkowników usługi Azure AD można usunąć ręcznie przez administratora bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="16f7a-249">If necessary, unusable Azure AD users can be dropped manually by a SQL Database administrator.</span></span>   

>  [!NOTE]
>  <span data-ttu-id="16f7a-250">Jeśli zostanie wyświetlony **upłynął limit czasu połączenia**, może być konieczne tooset hello `TransparentNetworkIPResolution` parametru toofalse ciąg połączenia hello.</span><span class="sxs-lookup"><span data-stu-id="16f7a-250">If you receive a **Connection Timeout Expired**, you may need tooset hello `TransparentNetworkIPResolution` parameter of hello connection string toofalse.</span></span> <span data-ttu-id="16f7a-251">Aby uzyskać więcej informacji, zobacz [problem limitu czasu połączenia z platformy .NET Framework 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span><span class="sxs-lookup"><span data-stu-id="16f7a-251">For more information, see [Connection timeout issue with .NET Framework 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span></span>   

   
<span data-ttu-id="16f7a-252">Podczas tworzenia użytkownika bazy danych, użytkownik otrzymuje hello **CONNECT** uprawnień i mogą łączyć się toothat bazy danych będące członkiem hello **publicznego** roli.</span><span class="sxs-lookup"><span data-stu-id="16f7a-252">When you create a database user, that user receives hello **CONNECT** permission and can connect toothat database as a member of hello **PUBLIC** role.</span></span> <span data-ttu-id="16f7a-253">Początkowo hello tylko uprawnienia użytkownika toohello dostępne są wszystkie uprawnienia przyznane toohello **publicznego** roli lub uprawnienia przyznane tooany grup systemu Windows są członkami.</span><span class="sxs-lookup"><span data-stu-id="16f7a-253">Initially hello only permissions available toohello user are any permissions granted toohello **PUBLIC** role, or any permissions granted tooany Windows groups that they are a member of.</span></span> <span data-ttu-id="16f7a-254">Po zainicjowaniu obsługi administracyjnej usługi Azure AD na podstawie zawarte bazy danych użytkownika, hello użytkownika dodatkowe uprawnienia można przyznać hello sam sposób, jak można przyznać uprawnień tooany innego typu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="16f7a-254">Once you provision an Azure AD-based contained database user, you can grant hello user additional permissions, hello same way as you grant permission tooany other type of user.</span></span> <span data-ttu-id="16f7a-255">Zazwyczaj uprawnienia toodatabase ról, a następnie dodaj tooroles użytkowników.</span><span class="sxs-lookup"><span data-stu-id="16f7a-255">Typically grant permissions toodatabase roles, and add users tooroles.</span></span> <span data-ttu-id="16f7a-256">Aby uzyskać więcej informacji, zobacz [podstawy uprawnień aparatu bazy danych](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span><span class="sxs-lookup"><span data-stu-id="16f7a-256">For more information, see [Database Engine Permission Basics](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span></span> <span data-ttu-id="16f7a-257">Aby uzyskać więcej informacji na temat specjalne role bazy danych SQL, zobacz [Zarządzanie bazami danych i Logowaniami w bazie danych SQL Azure](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="16f7a-257">For more information about special SQL Database roles, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>
<span data-ttu-id="16f7a-258">Użytkownik domeny federacyjnej, który jest importowany do domeny zarządzania, musi używać tożsamości domeny hello zarządzane.</span><span class="sxs-lookup"><span data-stu-id="16f7a-258">A federated domain user that is imported into a manage domain, must use hello managed domain identity.</span></span>

> [!NOTE]
> <span data-ttu-id="16f7a-259">Użytkownicy usługi Azure AD są oznaczone w metadanych bazy danych hello z typem E (EXTERNAL_USER) i grupy typu X (EXTERNAL_GROUPS).</span><span class="sxs-lookup"><span data-stu-id="16f7a-259">Azure AD users are marked in hello database metadata with type E (EXTERNAL_USER) and for groups with type X (EXTERNAL_GROUPS).</span></span> <span data-ttu-id="16f7a-260">Aby uzyskać więcej informacji, zobacz [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span><span class="sxs-lookup"><span data-stu-id="16f7a-260">For more information, see [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span></span> 
>

## <a name="connect-toohello-user-database-or-data-warehouse-by-using-ssms-or-ssdt"></a><span data-ttu-id="16f7a-261">Połącz przy użyciu narzędzia SSMS lub program SSDT toohello użytkownika bazy danych lub dane magazynu</span><span class="sxs-lookup"><span data-stu-id="16f7a-261">Connect toohello user database or data warehouse by using SSMS or SSDT</span></span>  
<span data-ttu-id="16f7a-262">tooconfirm hello Azure AD administratora jest poprawnie skonfigurowana, Połącz toohello **wzorca** bazy danych przy użyciu konta administratora hello Azure AD.</span><span class="sxs-lookup"><span data-stu-id="16f7a-262">tooconfirm hello Azure AD administrator is properly set up, connect toohello **master** database using hello Azure AD administrator account.</span></span>
<span data-ttu-id="16f7a-263">tooprovision Azure AD na podstawie zawarte bazy danych użytkownika (inne niż hello administrator serwera, który jest właścicielem hello bazy danych), połączenie toohello bazy danych przy użyciu tożsamości usługi Azure AD, który ma toohello dostępu do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="16f7a-263">tooprovision an Azure AD-based contained database user (other than hello server administrator that owns hello database), connect toohello database with an Azure AD identity that has access toohello database.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="16f7a-264">Obsługa uwierzytelniania usługi Azure Active Directory jest dostępny z [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) i [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) w programie Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="16f7a-264">Support for Azure Active Directory authentication is available with [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) and [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) in Visual Studio 2015.</span></span> <span data-ttu-id="16f7a-265">Witaj sierpnia 2016 wersji programu SSMS obejmuje również obsługę uniwersalnych uwierzytelnianie usługi Active Directory, dzięki czemu administratorzy toorequire za pomocą rozmowy telefonicznej, wiadomości tekstowej, karty inteligentne z numeru pin lub powiadomienie aplikacji mobilnej usługi Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="16f7a-265">hello August 2016 release of SSMS also includes support for Active Directory Universal Authentication, which allows administrators toorequire Multi-Factor Authentication using a phone call, text message, smart cards with pin, or mobile app notification.</span></span>
 
## <a name="using-an-azure-ad-identity-tooconnect-using-ssms-or-ssdt"></a><span data-ttu-id="16f7a-266">Przy użyciu tooconnect tożsamości usługi Azure AD przy użyciu narzędzia SSMS lub program SSDT</span><span class="sxs-lookup"><span data-stu-id="16f7a-266">Using an Azure AD identity tooconnect using SSMS or SSDT</span></span>  

<span data-ttu-id="16f7a-267">Hello zgodnie z procedurami pokazują, jak tooconnect tooa SQL bazy danych przy użyciu tożsamości usługi Azure AD przy użyciu programu SQL Server Management Studio lub narzędzia bazy danych programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="16f7a-267">hello following procedures show you how tooconnect tooa SQL database with an Azure AD identity using SQL Server Management Studio or SQL Server Database Tools.</span></span>

### <a name="active-directory-integrated-authentication"></a><span data-ttu-id="16f7a-268">Zintegrowane uwierzytelnianie usługi Active Directory</span><span class="sxs-lookup"><span data-stu-id="16f7a-268">Active Directory integrated authentication</span></span>

<span data-ttu-id="16f7a-269">Użyj tej metody, jeśli użytkownik jest zalogowany w tooWindows z domeny federacyjnej przy użyciu poświadczeń usługi Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="16f7a-269">Use this method if you are logged in tooWindows using your Azure Active Directory credentials from a federated domain.</span></span>

1. <span data-ttu-id="16f7a-270">Uruchom Management Studio lub narzędzia danych w hello **połączyć tooServer** (lub **połączyć tooDatabase aparat**) okno dialogowe, w hello **uwierzytelniania** wybierz **Usługi active Directory — zintegrowane**.</span><span class="sxs-lookup"><span data-stu-id="16f7a-270">Start Management Studio or Data Tools and in hello **Connect tooServer** (or **Connect tooDatabase Engine**) dialog box, in hello **Authentication** box, select **Active Directory - Integrated**.</span></span> <span data-ttu-id="16f7a-271">Hasło nie jest potrzebne lub można wprowadzić, ponieważ istniejących poświadczeń zostanie wyświetlone powitalne połączenia.</span><span class="sxs-lookup"><span data-stu-id="16f7a-271">No password is needed or can be entered because your existing credentials will be presented for hello connection.</span></span>   

    ![Wybierz opcję zintegrowanego uwierzytelniania AD][11]
2. <span data-ttu-id="16f7a-273">Kliknij hello **opcje** przycisku i na powitania **właściwości połączenia** strony w hello **połączyć toodatabase** okno, nazwa typu hello hello bazy danych użytkowników ma tooconnect Aby.</span><span class="sxs-lookup"><span data-stu-id="16f7a-273">Click hello **Options** button, and on hello **Connection Properties** page, in hello **Connect toodatabase** box, type hello name of hello user database you want tooconnect to.</span></span> <span data-ttu-id="16f7a-274">(hello **Identyfikatora nazwy lub dzierżawy domeny AD**"opcja jest obsługiwana tylko dla **uniwersalnych z połączeniem MFA** opcje, w przeciwnym razie on jest nieaktywna.)</span><span class="sxs-lookup"><span data-stu-id="16f7a-274">(hello **AD domain name or tenant ID**” option is only supported for **Universal with MFA connection** options, otherwise it is greyed out.)</span></span>  

    ![Wybierz nazwę bazy danych hello][13]

## <a name="active-directory-password-authentication"></a><span data-ttu-id="16f7a-276">Uwierzytelnianie hasłem usługi Active Directory</span><span class="sxs-lookup"><span data-stu-id="16f7a-276">Active Directory password authentication</span></span>

<span data-ttu-id="16f7a-277">Użyj tej metody, podczas nawiązywania połączenia z głównej nazwy usługi Azure AD przy użyciu usługi Azure AD hello zarządzanych domeny.</span><span class="sxs-lookup"><span data-stu-id="16f7a-277">Use this method when connecting with an Azure AD principal name using hello Azure AD managed domain.</span></span> <span data-ttu-id="16f7a-278">Można również użyć do kontem federacyjnym bez dostępu toohello domeny, na przykład podczas pracy zdalnej.</span><span class="sxs-lookup"><span data-stu-id="16f7a-278">You can also use it for federated account without access toohello domain, for example when working remotely.</span></span>

<span data-ttu-id="16f7a-279">Użyj tej metody, jeśli użytkownik jest zalogowany przy użyciu poświadczeń z domeny, która nie jest zintegrowany z platformy Azure, tooWindows lub korzystając z usługi Azure AD uwierzytelnianie przy użyciu usługi Azure AD oparte na powitania początkowej lub hello domeny klienta.</span><span class="sxs-lookup"><span data-stu-id="16f7a-279">Use this method if you are logged in tooWindows using credentials from a domain that is not federated with Azure, or when using Azure AD authentication using Azure AD based on hello initial or hello client domain.</span></span>

1. <span data-ttu-id="16f7a-280">Uruchom Management Studio lub narzędzia danych w hello **połączyć tooServer** (lub **połączyć tooDatabase aparat**) okno dialogowe, w hello **uwierzytelniania** wybierz **Usługi active Directory — hasło**.</span><span class="sxs-lookup"><span data-stu-id="16f7a-280">Start Management Studio or Data Tools and in hello **Connect tooServer** (or **Connect tooDatabase Engine**) dialog box, in hello **Authentication** box, select **Active Directory - Password**.</span></span>
2. <span data-ttu-id="16f7a-281">W hello **nazwy użytkownika** wpisz nazwę użytkownika usługi Azure Active Directory w formacie hello  **username@domain.com** . Musi to być konto z hello Azure Active Directory lub konta z domeny wykonana Federacja z hello Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="16f7a-281">In hello **User name** box, type your Azure Active Directory user name in hello format **username@domain.com**. This must be an account from hello Azure Active Directory or an account from a domain federate with hello Azure Active Directory.</span></span>
3. <span data-ttu-id="16f7a-282">W hello **hasło** wpisz hasło użytkownika dla konta usługi Azure Active Directory hello lub konta domeny federacyjnej.</span><span class="sxs-lookup"><span data-stu-id="16f7a-282">In hello **Password** box, type your user password for hello Azure Active Directory account or federated domain account.</span></span>

    ![Wybierz uwierzytelnianie hasłem usługi AD][12]
4. <span data-ttu-id="16f7a-284">Kliknij hello **opcje** przycisku i na powitania **właściwości połączenia** strony w hello **połączyć toodatabase** okno, nazwa typu hello hello bazy danych użytkowników ma tooconnect Aby.</span><span class="sxs-lookup"><span data-stu-id="16f7a-284">Click hello **Options** button, and on hello **Connection Properties** page, in hello **Connect toodatabase** box, type hello name of hello user database you want tooconnect to.</span></span> <span data-ttu-id="16f7a-285">(Zobacz hello grafiki w poprzedniej opcji hello).</span><span class="sxs-lookup"><span data-stu-id="16f7a-285">(See hello graphic in hello previous option.)</span></span>

## <a name="using-an-azure-ad-identity-tooconnect-from-a-client-application"></a><span data-ttu-id="16f7a-286">Za pomocą usługi Azure AD tooconnect tożsamości od aplikacji klienta</span><span class="sxs-lookup"><span data-stu-id="16f7a-286">Using an Azure AD identity tooconnect from a client application</span></span>

<span data-ttu-id="16f7a-287">Hello zgodnie z procedurami pokazują, jak tooconnect tooa SQL bazy danych przy użyciu tożsamości usługi Azure AD z aplikacji klienta.</span><span class="sxs-lookup"><span data-stu-id="16f7a-287">hello following procedures show you how tooconnect tooa SQL database with an Azure AD identity from a client application.</span></span>

###  <a name="active-directory-integrated-authentication"></a><span data-ttu-id="16f7a-288">Zintegrowane uwierzytelnianie usługi Active Directory</span><span class="sxs-lookup"><span data-stu-id="16f7a-288">Active Directory integrated authentication</span></span>

<span data-ttu-id="16f7a-289">toouse zintegrowane uwierzytelnianie systemu Windows, Twojej domeny usługi Active Directory musi Sfederowanych z usługą Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="16f7a-289">toouse integrated Windows authentication, your domain’s Active Directory must be federated with Azure Active Directory.</span></span> <span data-ttu-id="16f7a-290">Aplikacja kliencka (lub usługi), połączenie toohello bazy danych musi działać na komputerze przyłączonym do domeny z poświadczeniami użytkownika domeny.</span><span class="sxs-lookup"><span data-stu-id="16f7a-290">Your client application (or a service) connecting toohello database must be running on a domain-joined machine under a user’s domain credentials.</span></span>

<span data-ttu-id="16f7a-291">przy użyciu bazy danych tooa tooconnect zintegrowane uwierzytelnianie i tożsamość usługi Azure AD, należy ustawić hello uwierzytelniania — słowo kluczowe w ciągu połączenia bazy danych hello tooActive Directory Integrated.</span><span class="sxs-lookup"><span data-stu-id="16f7a-291">tooconnect tooa database using integrated authentication and an Azure AD identity, hello Authentication keyword in hello database connection string must be set tooActive Directory Integrated.</span></span> <span data-ttu-id="16f7a-292">Witaj poniższy przykład kodu C# używa ADO .NET.</span><span class="sxs-lookup"><span data-stu-id="16f7a-292">hello following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Integrated; Initial Catalog=testdb;";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="16f7a-293">Witaj słowo kluczowe parametrów połączenia ``Integrated Security=True`` nie jest obsługiwana dla łączenia tooAzure bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="16f7a-293">hello connection string keyword ``Integrated Security=True`` is not supported for connecting tooAzure SQL Database.</span></span> <span data-ttu-id="16f7a-294">Podczas tworzenia połączenia ODBC, będzie konieczne tooremove spacji i ustaw too'ActiveDirectoryIntegrated uwierzytelniania ".</span><span class="sxs-lookup"><span data-stu-id="16f7a-294">When making an ODBC connection, you will need tooremove spaces and set Authentication too'ActiveDirectoryIntegrated'.</span></span>

### <a name="active-directory-password-authentication"></a><span data-ttu-id="16f7a-295">Uwierzytelnianie hasłem usługi Active Directory</span><span class="sxs-lookup"><span data-stu-id="16f7a-295">Active Directory password authentication</span></span>

<span data-ttu-id="16f7a-296">przy użyciu bazy danych tooa tooconnect zintegrowane uwierzytelnianie i tożsamość usługi Azure AD, hello uwierzytelniania — słowo kluczowe musi być ustawiona tooActive hasła katalogu.</span><span class="sxs-lookup"><span data-stu-id="16f7a-296">tooconnect tooa database using integrated authentication and an Azure AD identity, hello Authentication keyword must be set tooActive Directory Password.</span></span> <span data-ttu-id="16f7a-297">Parametry połączenia Hello musi zawierać identyfikator/UID użytkownika i hasło/PWD słowa kluczowe i wartości.</span><span class="sxs-lookup"><span data-stu-id="16f7a-297">hello connection string must contain User ID/UID and Password/PWD keywords and values.</span></span> <span data-ttu-id="16f7a-298">Witaj poniższy przykład kodu C# używa ADO .NET.</span><span class="sxs-lookup"><span data-stu-id="16f7a-298">hello following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Password; Initial Catalog=testdb;  UID=bob@contoso.onmicrosoft.com; PWD=MyPassWord!";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="16f7a-299">Dowiedz się więcej na temat metod uwierzytelniania usługi Azure AD przy użyciu przykłady kodu pokaz hello dostępne pod adresem [pokaz GitHub uwierzytelniania w usłudze Azure AD](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span><span class="sxs-lookup"><span data-stu-id="16f7a-299">Learn more about Azure AD authentication methods using hello demo code samples available at [Azure AD Authentication GitHub Demo](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span></span>

## <a name="azure-ad-token"></a><span data-ttu-id="16f7a-300">Token usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="16f7a-300">Azure AD token</span></span>
<span data-ttu-id="16f7a-301">Ta metoda uwierzytelniania umożliwia tooAzure tooconnect warstwy środkowej usługi SQL Database lub magazyn danych SQL Azure, uzyskując tokenu z usługi Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="16f7a-301">This authentication method allows middle-tier services tooconnect tooAzure SQL Database or Azure SQL Data Warehouse by obtaining a token from Azure Active Directory (AAD).</span></span> <span data-ttu-id="16f7a-302">Umożliwia zaawansowane scenariusze, w tym uwierzytelniania opartego na certyfikatach.</span><span class="sxs-lookup"><span data-stu-id="16f7a-302">It enables sophisticated scenarios including certificate-based authentication.</span></span> <span data-ttu-id="16f7a-303">Należy wykonać cztery podstawowe kroki toouse usługi Azure AD token uwierzytelniania:</span><span class="sxs-lookup"><span data-stu-id="16f7a-303">You must complete four basic steps toouse Azure AD token authentication:</span></span>

1. <span data-ttu-id="16f7a-304">Zarejestrować aplikację w usłudze Azure Active Directory i uzyskać identyfikator klienta hello na kodzie.</span><span class="sxs-lookup"><span data-stu-id="16f7a-304">Register your application with Azure Active Directory and get hello client id for your code.</span></span> 
2. <span data-ttu-id="16f7a-305">Tworzenie bazy danych użytkownika reprezentujące hello aplikacji.</span><span class="sxs-lookup"><span data-stu-id="16f7a-305">Create a database user representing hello application.</span></span> <span data-ttu-id="16f7a-306">(Ukończono wcześniej w kroku 6).</span><span class="sxs-lookup"><span data-stu-id="16f7a-306">(Completed earlier in step 6.)</span></span>
3. <span data-ttu-id="16f7a-307">Utwórz certyfikat na powitania klienta komputer działa aplikacja hello.</span><span class="sxs-lookup"><span data-stu-id="16f7a-307">Create a certificate on hello client computer runs hello application.</span></span>
4. <span data-ttu-id="16f7a-308">Aby dodać certyfikat hello jako klucz dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="16f7a-308">Add hello certificate as a key for your application.</span></span>

<span data-ttu-id="16f7a-309">Przykładowy ciąg połączenia:</span><span class="sxs-lookup"><span data-stu-id="16f7a-309">Sample connection string:</span></span>

```
string ConnectionString =@"Data Source=n9lxnyuzhv.database.windows.net; Initial Catalog=testdb;"
SqlConnection conn = new SqlConnection(ConnectionString);
connection.AccessToken = "Your JWT token"
conn.Open();
```

<span data-ttu-id="16f7a-310">Aby uzyskać więcej informacji, zobacz [Blog zabezpieczeń programu SQL Server](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span><span class="sxs-lookup"><span data-stu-id="16f7a-310">For more information, see [SQL Server Security Blog](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span></span>

### <a name="sqlcmd"></a><span data-ttu-id="16f7a-311">sqlcmd</span><span class="sxs-lookup"><span data-stu-id="16f7a-311">sqlcmd</span></span>

<span data-ttu-id="16f7a-312">Witaj następujące instrukcje, Połącz przy użyciu narzędzia sqlcmd, który jest dostępny z hello wersji 13.1 [Centrum pobierania](http://go.microsoft.com/fwlink/?LinkID=825643).</span><span class="sxs-lookup"><span data-stu-id="16f7a-312">hello following statements, connect using version 13.1 of sqlcmd, which is available from hello [Download Center](http://go.microsoft.com/fwlink/?LinkID=825643).</span></span>

```
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net  -G  
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net -U bob@contoso.com -P MyAADPassword -G -l 30
```

## <a name="next-steps"></a><span data-ttu-id="16f7a-313">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="16f7a-313">Next steps</span></span>
- <span data-ttu-id="16f7a-314">Dostęp i kontrola w usłudze SQL Database zostały omówione w temacie [Kontrola dostępu w usłudze SQL Database](sql-database-control-access.md).</span><span class="sxs-lookup"><span data-stu-id="16f7a-314">For an overview of access and control in SQL Database, see [SQL Database access and control](sql-database-control-access.md).</span></span>
- <span data-ttu-id="16f7a-315">Dane logowania, użytkownicy i role bazy danych w usłudze SQL Database zostały omówione w temacie [Logins, users, and database roles](sql-database-manage-logins.md) (Dane logowania, użytkownicy i role bazy danych).</span><span class="sxs-lookup"><span data-stu-id="16f7a-315">For an overview of logins, users, and database roles in SQL Database, see [Logins, users, and database roles](sql-database-manage-logins.md).</span></span>
- <span data-ttu-id="16f7a-316">Aby uzyskać więcej informacji na temat podmiotów zabezpieczeń bazy danych, zobacz [Principals](https://msdn.microsoft.com/library/ms181127.aspx) (Podmioty zabezpieczeń).</span><span class="sxs-lookup"><span data-stu-id="16f7a-316">For more information about database principals, see [Principals](https://msdn.microsoft.com/library/ms181127.aspx).</span></span>
- <span data-ttu-id="16f7a-317">Aby uzyskać więcej informacji na temat ról bazy danych, zobacz [Database roles](https://msdn.microsoft.com/library/ms189121.aspx) (Role bazy danych).</span><span class="sxs-lookup"><span data-stu-id="16f7a-317">For more information about database roles, see [Database roles](https://msdn.microsoft.com/library/ms189121.aspx).</span></span>
- <span data-ttu-id="16f7a-318">Aby uzyskać więcej informacji na temat reguł zapory w usłudze SQL Database, zobacz [Omówienie reguł zapory usługi SQL Database](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="16f7a-318">For more information about firewall rules in SQL Database, see [SQL Database firewall rules](sql-database-firewall-configure.md).</span></span>

<!--Image references-->

[1]: ./media/sql-database-aad-authentication/1aad-auth-diagram.png
[2]: ./media/sql-database-aad-authentication/2subscription-relationship.png
[3]: ./media/sql-database-aad-authentication/3admin-structure.png
[4]: ./media/sql-database-aad-authentication/4select-subscription.png
[5]: ./media/sql-database-aad-authentication/5ad-settings-portal.png
[6]: ./media/sql-database-aad-authentication/6edit-directory-select.png
[7]: ./media/sql-database-aad-authentication/7edit-directory-confirm.png
[8]: ./media/sql-database-aad-authentication/8choose-ad.png
[10]: ./media/sql-database-aad-authentication/10choose-admin.png
[11]: ./media/sql-database-aad-authentication/active-directory-integrated.png
[12]: ./media/sql-database-aad-authentication/12connect-using-pw-auth2.png
[13]: ./media/sql-database-aad-authentication/13connect-to-db2.png

