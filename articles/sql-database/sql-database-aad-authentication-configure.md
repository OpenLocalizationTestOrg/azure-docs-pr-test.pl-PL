---
title: "Konfigurowanie uwierzytelniania usługi Azure Active Directory - SQL | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak łączyć się z bazą danych SQL i usługi SQL Data Warehouse przy użyciu uwierzytelniania usługi Azure Active Directory."
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 7e2508a1-347e-4f15-b060-d46602c5ce7e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/10/2017
ms.author: rickbyh
ms.openlocfilehash: 61a52813769891aa63373437e9300d4f8f47fab2
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/18/2017
---
# <a name="configure-and-manage-azure-active-directory-authentication-with-sql-database-or-sql-data-warehouse"></a><span data-ttu-id="b9b29-103">Konfigurowanie i zarządzanie nimi uwierzytelniania usługi Azure Active Directory z bazą danych SQL lub SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="b9b29-103">Configure and manage Azure Active Directory authentication with SQL Database or SQL Data Warehouse</span></span>

<span data-ttu-id="b9b29-104">W tym artykule przedstawiono sposób tworzenia i wypełniania usługi Azure AD, a następnie użyj usługi Azure AD z bazy danych SQL Azure i SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="b9b29-104">This article shows you how to create and populate Azure AD, and then use Azure AD with Azure SQL Database and SQL Data Warehouse.</span></span> <span data-ttu-id="b9b29-105">Aby uzyskać ogólne informacje, zobacz [uwierzytelniania usługi Azure Active Directory](sql-database-aad-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="b9b29-105">For an overview, see [Azure Active Directory Authentication](sql-database-aad-authentication.md).</span></span>

>  [!NOTE]  
>  <span data-ttu-id="b9b29-106">Dołączanie do programu SQL Server uruchomionego na maszynie Wirtualnej platformy Azure nie jest obsługiwane przy użyciu konta usługi Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b9b29-106">Connecting to SQL Server running on an Azure VM is not supported using an Azure Active Directory account.</span></span> <span data-ttu-id="b9b29-107">Zamiast tego użyj domeny konta usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b9b29-107">Use a domain Active Directory account instead.</span></span>

## <a name="create-and-populate-an-azure-ad"></a><span data-ttu-id="b9b29-108">Utworzyć i wypełnić usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="b9b29-108">Create and populate an Azure AD</span></span>
<span data-ttu-id="b9b29-109">Tworzenie usługi Azure AD i wypełnić ją użytkowników i grup.</span><span class="sxs-lookup"><span data-stu-id="b9b29-109">Create an Azure AD and populate it with users and groups.</span></span> <span data-ttu-id="b9b29-110">Usługi Azure AD można domeny zarządzanej domeny początkowej usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b9b29-110">Azure AD can be the initial domain Azure AD managed domain.</span></span> <span data-ttu-id="b9b29-111">Usługi Azure AD można także lokalnych usług domenowych Active Directory, który jest Sfederowane z usługą Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b9b29-111">Azure AD can also be an on-premises Active Directory Domain Services that is federated with the Azure AD.</span></span>

<span data-ttu-id="b9b29-112">Aby uzyskać więcej informacji, zobacz tematy [Integrating your on-premises identities with Azure Active Directory](../active-directory/active-directory-aadconnect.md) (Integrowanie tożsamości lokalnych z usługą Azure Active Directory), [Dodawanie niestandardowej nazwy domeny do usługi Azure AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/) (Platforma Microsoft Azure obsługuje teraz federację z usługą Windows Servder Active Directory), [Administering your Azure AD directory](https://msdn.microsoft.com/library/azure/hh967611.aspx) (Administrowanie katalogiem usługi Azure AD), [Manage Azure AD using Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0) (Zarządzanie usługą Azure AD przy użyciu programu Windows PowerShell) i [Hybrid Identity Required Ports and Protocols](../active-directory/active-directory-aadconnect-ports.md) (Wymagane porty i protokoły tożsamości hybrydowych).</span><span class="sxs-lookup"><span data-stu-id="b9b29-112">For more information, see [Integrating your on-premises identities with Azure Active Directory](../active-directory/active-directory-aadconnect.md), [Add your own domain name to Azure AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [Administering your Azure AD directory](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Manage Azure AD using Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0), and [Hybrid Identity Required Ports and Protocols](../active-directory/active-directory-aadconnect-ports.md).</span></span>

## <a name="optional-associate-or-change-the-active-directory-that-is-currently-associated-with-your-azure-subscription"></a><span data-ttu-id="b9b29-113">Opcjonalnie: Skojarz lub zmienić usługi active directory, który jest aktualnie powiązany z subskrypcją platformy Azure</span><span class="sxs-lookup"><span data-stu-id="b9b29-113">Optional: Associate or change the active directory that is currently associated with your Azure Subscription</span></span>
<span data-ttu-id="b9b29-114">Aby skojarzyć bazy danych z katalogu usługi Azure AD dla Twojej organizacji, należy katalogu zaufanego katalogu subskrypcji platformy Azure obsługującym bazę danych.</span><span class="sxs-lookup"><span data-stu-id="b9b29-114">To associate your database with the Azure AD directory for your organization, make the directory a trusted directory for the Azure subscription hosting the database.</span></span> <span data-ttu-id="b9b29-115">Aby uzyskać więcej informacji, zobacz [Jak subskrypcje platformy Azure są kojarzone z usługą Azure Active Directory](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span><span class="sxs-lookup"><span data-stu-id="b9b29-115">For more information, see [How Azure subscriptions are associated with Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span></span>

<span data-ttu-id="b9b29-116">**Informacje dodatkowe:** subskrypcji Azure co ma relację zaufania z wystąpieniem usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b9b29-116">**Additional information:** Every Azure subscription has a trust relationship with an Azure AD instance.</span></span> <span data-ttu-id="b9b29-117">Oznacza to, że subskrypcja ufa katalogowi na potrzeby uwierzytelniania użytkowników, usług i urządzeń.</span><span class="sxs-lookup"><span data-stu-id="b9b29-117">This means that it trusts that directory to authenticate users, services, and devices.</span></span> <span data-ttu-id="b9b29-118">Wiele subskrypcji może ufać temu samemu katalogowi, ale dana subskrypcja może ufać tylko jednemu katalogowi.</span><span class="sxs-lookup"><span data-stu-id="b9b29-118">Multiple subscriptions can trust the same directory, but a subscription trusts only one directory.</span></span> <span data-ttu-id="b9b29-119">Widać, katalog jest uważany za zaufany przez subskrypcję w obszarze **ustawienia** tab na [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span><span class="sxs-lookup"><span data-stu-id="b9b29-119">You can see which directory is trusted by your subscription under the **Settings** tab at [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span></span> <span data-ttu-id="b9b29-120">Relacja zaufania między subskrypcją a katalogiem różni się od relacji subskrypcji z wszystkimi innymi zasobami na platformie Azure (witrynami sieci Web, bazami danych itd.), które przypominają bardziej podrzędne zasoby subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="b9b29-120">This trust relationship that a subscription has with a directory is unlike the relationship that a subscription has with all other resources in Azure (websites, databases, and so on), which are more like child resources of a subscription.</span></span> <span data-ttu-id="b9b29-121">Jeśli subskrypcja wygaśnie, dostęp do innych zasobów skojarzonych z subskrypcją również nie będzie możliwy.</span><span class="sxs-lookup"><span data-stu-id="b9b29-121">If a subscription expires, then access to those other resources associated with the subscription also stops.</span></span> <span data-ttu-id="b9b29-122">Lecz katalog pozostanie na platformie Azure i będzie można skojarzyć z nim inną subskrypcję oraz kontynuować zarządzanie użytkownikami w katalogu.</span><span class="sxs-lookup"><span data-stu-id="b9b29-122">But the directory remains in Azure, and you can associate another subscription with that directory and continue to manage the directory users.</span></span> <span data-ttu-id="b9b29-123">Aby uzyskać więcej informacji o zasobach, zobacz [opis dostęp do zasobów na platformie Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span><span class="sxs-lookup"><span data-stu-id="b9b29-123">For more information about resources, see [Understanding resource access in Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span></span>

<span data-ttu-id="b9b29-124">Poniższe procedury pokazują, jak zmiany skojarzone katalogu dla danej subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="b9b29-124">The following procedures show you how to change the associated directory for a given subscription.</span></span>
1. <span data-ttu-id="b9b29-125">Nawiązać połączenie z [klasycznego portalu Azure](https://manage.windowsazure.com/) za pomocą administratora subskrypcji platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="b9b29-125">Connect to your [Azure Classic Portal](https://manage.windowsazure.com/) by using an Azure subscription administrator.</span></span>
2. <span data-ttu-id="b9b29-126">Na banerze po lewej stronie wybierz **ustawienia**.</span><span class="sxs-lookup"><span data-stu-id="b9b29-126">On the left banner, select **SETTINGS**.</span></span>
3. <span data-ttu-id="b9b29-127">Subskrypcji są wyświetlane na ekranie ustawień.</span><span class="sxs-lookup"><span data-stu-id="b9b29-127">Your subscriptions appear in the settings screen.</span></span> <span data-ttu-id="b9b29-128">Jeśli nie ma żądanego subskrypcji, kliknij przycisk **subskrypcje** na początku listy rozwijanej **filtru przez katalog** i wybierz katalog, który zawiera subskrypcji, a następnie kliknij przycisk **Zastosuj**.</span><span class="sxs-lookup"><span data-stu-id="b9b29-128">If the desired subscription does not appear, click **Subscriptions** at the top, drop down the **FILTER BY DIRECTORY** box and select the directory that contains your subscriptions, and then click **APPLY**.</span></span>
   
    ![Wybierz subskrypcję][4]
4. <span data-ttu-id="b9b29-130">W **ustawienia** obszaru, kliknij subskrypcję, a następnie kliknij **Edytuj katalog** w dolnej części strony.</span><span class="sxs-lookup"><span data-stu-id="b9b29-130">In the **settings** area, click your subscription, and then click  **EDIT DIRECTORY** at the bottom of the page.</span></span>
   
    ![AD ustawień portalu][5]
5. <span data-ttu-id="b9b29-132">W **Edytuj katalog** , wybierz Azure Active Directory, który jest skojarzony z programu SQL Server lub SQL Data Warehouse, a następnie kliknij strzałkę dalej.</span><span class="sxs-lookup"><span data-stu-id="b9b29-132">In the **EDIT DIRECTORY** box, select the Azure Active Directory that is associated with your SQL Server or SQL Data Warehouse, and then click the arrow for next.</span></span>
   
    ![Edytuj katalog wyboru][6]
6. <span data-ttu-id="b9b29-134">W **POTWIERDŹ** katalogu okno dialogowe Mapping, upewnij się, że "**zostaną usunięte wszystkie współadministratorów.**"</span><span class="sxs-lookup"><span data-stu-id="b9b29-134">In the **CONFIRM** directory Mapping dialog box, confirm that "**All co-administrators will be removed.**"</span></span>
   
    ![Potwierdź katalogu edycji][7]
7. <span data-ttu-id="b9b29-136">Kliknij przycisk wyboru, aby ponownie załadować portalu.</span><span class="sxs-lookup"><span data-stu-id="b9b29-136">Click the check to reload the portal.</span></span>

   > [!NOTE]
   > <span data-ttu-id="b9b29-137">Podczas zmiany katalogu, dostęp do wszystkich współadministratorów, grup i użytkowników usługi Azure AD i katalog kopii zasobu użytkownicy zostaną usunięci i mają już dostęp do tej subskrypcji lub jej zasobów.</span><span class="sxs-lookup"><span data-stu-id="b9b29-137">When you change the directory, access to all co-administrators, Azure AD users and groups, and directory-backed resource users are removed and they no longer have access to this subscription or its resources.</span></span> <span data-ttu-id="b9b29-138">Tylko, administrator usługi, można skonfigurować dostęp dla podmiotów zabezpieczeń oparte na nowy katalog.</span><span class="sxs-lookup"><span data-stu-id="b9b29-138">Only you, as a service administrator, can configure access for principals based on the new directory.</span></span> <span data-ttu-id="b9b29-139">Ta zmiana może trwać dość czasu obejmie wszystkie zasoby.</span><span class="sxs-lookup"><span data-stu-id="b9b29-139">This change might take a substantial amount of time to propagate to all resources.</span></span> <span data-ttu-id="b9b29-140">Zmienianie katalogu, również zmiany administratora usługi Azure AD dla bazy danych SQL i magazyn danych SQL i nie zezwalaj na dostęp do bazy danych dla wszystkich istniejących użytkowników usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b9b29-140">Changing the directory, also changes the Azure AD administrator for SQL Database and SQL Data Warehouse and disallow database access for any existing Azure AD users.</span></span> <span data-ttu-id="b9b29-141">Administrator usługi Azure AD musi być resetowania (zgodnie z poniższym opisem) i nowej usługi Azure AD, użytkownicy muszą zostać utworzone.</span><span class="sxs-lookup"><span data-stu-id="b9b29-141">The Azure AD admin must be reset (as described below) and new Azure AD users must be created.</span></span>
   >  

## <a name="create-an-azure-ad-administrator-for-azure-sql-server"></a><span data-ttu-id="b9b29-142">Utwórz administrator usługi Azure AD dla serwera Azure SQL</span><span class="sxs-lookup"><span data-stu-id="b9b29-142">Create an Azure AD administrator for Azure SQL server</span></span>
<span data-ttu-id="b9b29-143">Każdy serwer Azure SQL, (który jest hostem bazy danych SQL lub SQL Data Warehouse) rozpoczyna się przy użyciu konta administratora pojedynczego serwera, który jest administratorem całego serwera Azure SQL.</span><span class="sxs-lookup"><span data-stu-id="b9b29-143">Each Azure SQL server (which hosts a SQL Database or SQL Data Warehouse) starts with a single server administrator account that is the administrator of the entire Azure SQL server.</span></span> <span data-ttu-id="b9b29-144">Drugi administratora programu SQL Server musi zostać utworzony, który jest konto usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b9b29-144">A second SQL Server administrator must be created, that is an Azure AD account.</span></span> <span data-ttu-id="b9b29-145">Tego podmiotu zabezpieczeń jest tworzony jako użytkownik zawartej bazy danych w bazie danych master.</span><span class="sxs-lookup"><span data-stu-id="b9b29-145">This principal is created as a contained database user in the master database.</span></span> <span data-ttu-id="b9b29-146">Jako administratorów, kont administratora serwera są elementami członkowskimi **db_owner** roli w każdej użytkownika bazy danych, a następnie wprowadź każdej bazy danych użytkownika w postaci **dbo** użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b9b29-146">As administrators, the server administrator accounts are members of the **db_owner** role in every user database, and enter each user database as the **dbo** user.</span></span> <span data-ttu-id="b9b29-147">Aby uzyskać więcej informacji na temat kont administratora serwera, zobacz [Zarządzanie bazami danych i Logowaniami w bazie danych SQL Azure](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="b9b29-147">For more information about the server administrator accounts, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="b9b29-148">Jeśli używasz usługi Azure Active Directory z replikacja geograficzna, administrator usługi Azure Active Directory musi być skonfigurowany dla serwera podstawowego i serwerów pomocniczych.</span><span class="sxs-lookup"><span data-stu-id="b9b29-148">When using Azure Active Directory with geo-replication, the Azure Active Directory administrator must be configured for both the primary and the secondary servers.</span></span> <span data-ttu-id="b9b29-149">Jeśli serwer nie ma administrator usługi Azure Active Directory, logowania do usługi Azure Active Directory, aby użytkownicy otrzymają "nie można nawiązać połączenia" Błąd serwera.</span><span class="sxs-lookup"><span data-stu-id="b9b29-149">If a server does not have an Azure Active Directory administrator, then Azure Active Directory logins and users receive a "Cannot connect" to server error.</span></span>

> [!NOTE]
> <span data-ttu-id="b9b29-150">Użytkownicy, którzy nie są oparte na koncie usługi Azure AD (łącznie z konta administratora serwera Azure SQL), nie można utworzyć usługi Azure AD użytkownicy, ponieważ nie mają uprawnień do weryfikowania użytkowników bazą danych z usługą Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b9b29-150">Users that are not based on an Azure AD account (including the Azure SQL server administrator account), cannot create Azure AD-based users, because they do not have permission to validate proposed database users with the Azure AD.</span></span>
> 

## <a name="provision-an-azure-active-directory-administrator-for-your-azure-sql-server"></a><span data-ttu-id="b9b29-151">Zapewnij administrator usługi Azure Active Directory dla serwera Azure SQL</span><span class="sxs-lookup"><span data-stu-id="b9b29-151">Provision an Azure Active Directory administrator for your Azure SQL server</span></span>

<span data-ttu-id="b9b29-152">Poniższe dwie procedury pokazują, jak udostępnić administratorem serwera Azure SQL w portalu Azure i przy użyciu programu PowerShell usługi Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b9b29-152">The following two procedures show you how to provision an Azure Active Directory administrator for your Azure SQL server in the Azure portal and by using PowerShell.</span></span>

### <a name="azure-portal"></a><span data-ttu-id="b9b29-153">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="b9b29-153">Azure portal</span></span>
1. <span data-ttu-id="b9b29-154">W [portalu Azure](https://portal.azure.com/), w prawym górnym rogu kliknij połączenie na liście rozwijanej listę możliwych usług Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b9b29-154">In the [Azure portal](https://portal.azure.com/), in the upper-right corner, click your connection to drop down a list of possible Active Directories.</span></span> <span data-ttu-id="b9b29-155">Wybierz prawidłowe usługi Active Directory jako domyślnej usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b9b29-155">Choose the correct Active Directory as the default Azure AD.</span></span> <span data-ttu-id="b9b29-156">Ten krok łącza skojarzenia subskrypcji z usługi Active Directory z serwerem Azure SQL, upewniając się, że tej samej subskrypcji jest używana zarówno dla usługi Azure AD i programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b9b29-156">This step links the subscription association with Active Directory with Azure SQL server making sure that the same subscription is used for both Azure AD and SQL Server.</span></span> <span data-ttu-id="b9b29-157">(Serwer Azure SQL można obsługiwać, baza danych SQL Azure lub usługi Azure SQL Data Warehouse.)</span><span class="sxs-lookup"><span data-stu-id="b9b29-157">(The Azure SQL server can be hosting either Azure SQL Database or Azure SQL Data Warehouse.)</span></span>   
    <span data-ttu-id="b9b29-158">![Wybierz ad][8]</span><span class="sxs-lookup"><span data-stu-id="b9b29-158">![choose-ad][8]</span></span>   
    
2. <span data-ttu-id="b9b29-159">Na transparencie po lewej stronie wybierz **serwerów SQL**, wybierz pozycję z **programu SQL server**, a następnie w **programu SQL Server** bloku, kliknij przycisk **administratora usługi Active Directory** .</span><span class="sxs-lookup"><span data-stu-id="b9b29-159">In the left banner select **SQL servers**, select your **SQL server**, and then in the **SQL Server** blade, click **Active Directory admin**.</span></span>   
3. <span data-ttu-id="b9b29-160">W **administratora usługi Active Directory** bloku, kliknij przycisk **ustawić administratora**.</span><span class="sxs-lookup"><span data-stu-id="b9b29-160">In the **Active Directory admin** blade, click **Set admin**.</span></span>   
    <span data-ttu-id="b9b29-161">![Wybierz usługi active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span><span class="sxs-lookup"><span data-stu-id="b9b29-161">![select active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span></span>  
    
4. <span data-ttu-id="b9b29-162">W **dodać administratora** bloku, Wyszukaj użytkownika, wybierz użytkownika lub grupę, aby administrator, a następnie kliknij przycisk **wybierz**.</span><span class="sxs-lookup"><span data-stu-id="b9b29-162">In the **Add admin** blade, search for a user, select the user or group to be an administrator, and then click **Select**.</span></span> <span data-ttu-id="b9b29-163">(Bloku administratora usługi Active Directory zawiera wszystkie elementy członkowskie i grup usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b9b29-163">(The Active Directory admin blade shows all members and groups of your Active Directory.</span></span> <span data-ttu-id="b9b29-164">Nie można wybrać użytkowników lub grup, które są wygaszone, ponieważ nie są obsługiwane jako administratorów usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b9b29-164">Users or groups that are grayed out cannot be selected because they are not supported as Azure AD administrators.</span></span> <span data-ttu-id="b9b29-165">(Zobacz listę obsługiwanych Administratorzy w **funkcje usługi Azure AD i ograniczenia** sekcji [Użyj Azure uwierzytelnianie usługi Active Directory do uwierzytelniania przy użyciu bazy danych SQL lub SQL Data Warehouse](sql-database-aad-authentication.md).) Kontrola dostępu oparta na rolach (RBAC) ma zastosowanie tylko do portalu i nie są propagowane do programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b9b29-165">(See the list of supported admins in the **Azure AD Features and Limitations** section of [Use Azure Active Directory Authentication for authentication with SQL Database or SQL Data Warehouse](sql-database-aad-authentication.md).) Role-based access control (RBAC) applies only to the portal and is not propagated to SQL Server.</span></span>   
    <span data-ttu-id="b9b29-166">![Wybierz administratora](./media/sql-database-aad-authentication/select-admin.png)</span><span class="sxs-lookup"><span data-stu-id="b9b29-166">![select admin](./media/sql-database-aad-authentication/select-admin.png)</span></span>  
    
5. <span data-ttu-id="b9b29-167">W górnej części **administratora usługi Active Directory** bloku, kliknij przycisk **ZAPISAĆ**.</span><span class="sxs-lookup"><span data-stu-id="b9b29-167">At the top of the **Active Directory admin** blade, click **SAVE**.</span></span>   
    <span data-ttu-id="b9b29-168">![Zapisz administratora](./media/sql-database-aad-authentication/save-admin.png)</span><span class="sxs-lookup"><span data-stu-id="b9b29-168">![save admin](./media/sql-database-aad-authentication/save-admin.png)</span></span>   

<span data-ttu-id="b9b29-169">Proces zmiany administrator może potrwać kilka minut.</span><span class="sxs-lookup"><span data-stu-id="b9b29-169">The process of changing the administrator may take several minutes.</span></span> <span data-ttu-id="b9b29-170">Następnie nowego administratora jest wyświetlana w **administratora usługi Active Directory** pole.</span><span class="sxs-lookup"><span data-stu-id="b9b29-170">Then the new administrator appears in the **Active Directory admin** box.</span></span>

   > [!NOTE]
   > <span data-ttu-id="b9b29-171">Podczas konfigurowania usługi Azure AD administratora, Nowa nazwa administratora (użytkownik lub grupa) nie może być już dostępne w bazie danych master wirtualnego jako użytkownik uwierzytelniania programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b9b29-171">When setting up the Azure AD admin, the new admin name (user or group) cannot already be present in the virtual master database as a SQL Server authentication user.</span></span> <span data-ttu-id="b9b29-172">Jeśli jest obecny, instalacja administratora usługi Azure AD nie powiedzie się; Wycofywanie jej tworzenia i wskazujący tego takie jak administrator (nazwa) już istnieje.</span><span class="sxs-lookup"><span data-stu-id="b9b29-172">If present, the Azure AD admin setup will fail; rolling back its creation and indicating that such an admin (name) already exists.</span></span> <span data-ttu-id="b9b29-173">Ponieważ taki użytkownik uwierzytelniania programu SQL Server nie jest częścią usługi Azure AD, próbuje połączyć się z serwerem przy użyciu uwierzytelniania usługi Azure AD nie powiedzie się.</span><span class="sxs-lookup"><span data-stu-id="b9b29-173">Since such a SQL Server authentication user is not part of the Azure AD, any effort to connect to the server using Azure AD authentication fails.</span></span>
   > 


<span data-ttu-id="b9b29-174">Aby później usunąć administratora, w górnej części **administratora usługi Active Directory** bloku, kliknij przycisk **usunąć administratora**, a następnie kliknij przycisk **zapisać**.</span><span class="sxs-lookup"><span data-stu-id="b9b29-174">To later remove an Admin, at the top of the **Active Directory admin** blade, click **Remove admin**, and then click **Save**.</span></span>

### <a name="powershell"></a><span data-ttu-id="b9b29-175">PowerShell</span><span class="sxs-lookup"><span data-stu-id="b9b29-175">PowerShell</span></span>
<span data-ttu-id="b9b29-176">Do uruchamiania poleceń cmdlet programu PowerShell, należy mieć programu Azure PowerShell zainstalowany i uruchomiony.</span><span class="sxs-lookup"><span data-stu-id="b9b29-176">To run PowerShell cmdlets, you need to have Azure PowerShell installed and running.</span></span> <span data-ttu-id="b9b29-177">Aby uzyskać szczegółowe informacje, zobacz artykuł [How to install and configure Azure PowerShell](/powershell/azure/overview) (Instalowanie i konfigurowanie programu Azure PowerShell).</span><span class="sxs-lookup"><span data-stu-id="b9b29-177">For detailed information, see [How to install and configure Azure PowerShell](/powershell/azure/overview).</span></span>

<span data-ttu-id="b9b29-178">Aby udostępnić administrator usługi Azure AD, wykonaj następujące polecenia programu PowerShell systemu Azure:</span><span class="sxs-lookup"><span data-stu-id="b9b29-178">To provision an Azure AD admin, execute the following Azure PowerShell commands:</span></span>

* <span data-ttu-id="b9b29-179">Add-AzureRmAccount</span><span class="sxs-lookup"><span data-stu-id="b9b29-179">Add-AzureRmAccount</span></span>
* <span data-ttu-id="b9b29-180">SELECT-AzureRmSubscription</span><span class="sxs-lookup"><span data-stu-id="b9b29-180">Select-AzureRmSubscription</span></span>

<span data-ttu-id="b9b29-181">Polecenia cmdlet używane do udostępniania i zarządzania nimi administratora usługi Azure AD:</span><span class="sxs-lookup"><span data-stu-id="b9b29-181">Cmdlets used to provision and manage Azure AD admin:</span></span>

| <span data-ttu-id="b9b29-182">Nazwa polecenia cmdlet</span><span class="sxs-lookup"><span data-stu-id="b9b29-182">Cmdlet name</span></span> | <span data-ttu-id="b9b29-183">Opis</span><span class="sxs-lookup"><span data-stu-id="b9b29-183">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="b9b29-184">Zestaw AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="b9b29-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/set-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="b9b29-185">Inicjuje administrator usługi Azure Active Directory dla serwera Azure SQL lub usługi Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="b9b29-185">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="b9b29-186">(Musi być z bieżącej subskrypcji).</span><span class="sxs-lookup"><span data-stu-id="b9b29-186">(Must be from the current subscription.)</span></span> |
| [<span data-ttu-id="b9b29-187">Usuń AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="b9b29-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/remove-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="b9b29-188">Usuwa administratora usługi Azure Active Directory dla serwera Azure SQL lub usługi Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="b9b29-188">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
| [<span data-ttu-id="b9b29-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="b9b29-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/get-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="b9b29-190">Zwraca informacje o obecnie skonfigurowane dla serwera Azure SQL lub usługi Azure SQL Data Warehouse administratora usługi Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b9b29-190">Returns information about an Azure Active Directory administrator currently configured for the Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="b9b29-191">Użyj polecenia PowerShell get-help, aby zobaczyć więcej szczegółów dla każdego z tych poleceń, na przykład ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span><span class="sxs-lookup"><span data-stu-id="b9b29-191">Use PowerShell command get-help to see more details for each of these commands, for example ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span></span>

<span data-ttu-id="b9b29-192">Poniższy skrypt postanowienia o nazwie grupy administratorów usługi Azure AD **DBA_Group** (identyfikator obiektu `40b79501-b343-44ed-9ce7-da4c8cc7353f`) dla **demo_server** serwera w grupie zasobów o nazwie **grupy-23**:</span><span class="sxs-lookup"><span data-stu-id="b9b29-192">The following script provisions an Azure AD administrator group named **DBA_Group** (object id `40b79501-b343-44ed-9ce7-da4c8cc7353f`) for the **demo_server** server in a resource group named **Group-23**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group"
```

<span data-ttu-id="b9b29-193">**DisplayName** akceptuje parametr wejściowy, nazwa wyświetlana usługi Azure AD lub główną nazwę użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b9b29-193">The **DisplayName** input parameter accepts either the Azure AD display name or the User Principal Name.</span></span> <span data-ttu-id="b9b29-194">Na przykład ``DisplayName="John Smith"`` i ``DisplayName="johns@contoso.com"``.</span><span class="sxs-lookup"><span data-stu-id="b9b29-194">For example, ``DisplayName="John Smith"`` and ``DisplayName="johns@contoso.com"``.</span></span> <span data-ttu-id="b9b29-195">Dla grup usługi Azure AD tylko usługi Azure AD Nazwa wyświetlana jest obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="b9b29-195">For Azure AD groups only the Azure AD display name is supported.</span></span>

> [!NOTE]
> <span data-ttu-id="b9b29-196">Polecenie programu Azure PowerShell ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` nie uniemożliwiają inicjowania obsługi administracyjnej administratorów usługi Azure AD dla użytkowników nieobsługiwany.</span><span class="sxs-lookup"><span data-stu-id="b9b29-196">The Azure PowerShell  command ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` does not prevent you from provisioning Azure AD admins for unsupported users.</span></span> <span data-ttu-id="b9b29-197">Nieobsługiwany użytkownika można udostępnić, ale nie można nawiązać połączenia z bazą danych.</span><span class="sxs-lookup"><span data-stu-id="b9b29-197">An unsupported user can be provisioned, but can not connect to a database.</span></span> 
> 

<span data-ttu-id="b9b29-198">W poniższym przykładzie użyto opcjonalnego **ObjectID**:</span><span class="sxs-lookup"><span data-stu-id="b9b29-198">The following example uses the optional **ObjectID**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group" -ObjectId "40b79501-b343-44ed-9ce7-da4c8cc7353f"
```

> [!NOTE]
> <span data-ttu-id="b9b29-199">Azure AD **ObjectID** jest wymagany, gdy **DisplayName** nie jest unikatowa.</span><span class="sxs-lookup"><span data-stu-id="b9b29-199">The Azure AD **ObjectID** is required when the **DisplayName** is not unique.</span></span> <span data-ttu-id="b9b29-200">Aby pobrać **ObjectID** i **DisplayName** wartości, przy użyciu sekcji usługi Active Directory w klasycznym portalu Azure, a następnie wyświetlić właściwości użytkownika lub grupy.</span><span class="sxs-lookup"><span data-stu-id="b9b29-200">To retrieve the **ObjectID** and **DisplayName** values, use the Active Directory section of Azure Classic Portal, and view the properties of a user or group.</span></span>
> 

<span data-ttu-id="b9b29-201">Poniższy przykład zwraca informacje o bieżącej usługi Azure AD administratora serwera Azure SQL:</span><span class="sxs-lookup"><span data-stu-id="b9b29-201">The following example returns information about the current Azure AD admin for Azure SQL server:</span></span>

```
Get-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server" | Format-List
```

<span data-ttu-id="b9b29-202">Poniższy przykład umożliwia usunięcie administrator usługi Azure AD:</span><span class="sxs-lookup"><span data-stu-id="b9b29-202">The following example removes an Azure AD administrator:</span></span>

```
Remove-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server"
```

<span data-ttu-id="b9b29-203">Administrator usługi Azure Active Directory można również udostępniać za pomocą interfejsów API REST.</span><span class="sxs-lookup"><span data-stu-id="b9b29-203">You can also provision an Azure Active Directory Administrator by using the REST APIs.</span></span> <span data-ttu-id="b9b29-204">Aby uzyskać więcej informacji, zobacz [operacje dla operacji bazy danych SQL Azure dla baz danych SQL Azure i dokumentacja interfejsu API REST usługi zarządzania](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span><span class="sxs-lookup"><span data-stu-id="b9b29-204">For more information, see [Service Management REST API Reference and Operations for Azure SQL Databases Operations for Azure SQL Databases](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span></span>

### <a name="cli"></a><span data-ttu-id="b9b29-205">Interfejs wiersza polecenia</span><span class="sxs-lookup"><span data-stu-id="b9b29-205">CLI</span></span>  
<span data-ttu-id="b9b29-206">Administrator usługi Azure AD można również udostępniać, wywołując interfejs wiersza polecenia następujące polecenia:</span><span class="sxs-lookup"><span data-stu-id="b9b29-206">You can also provision an Azure AD admin by calling the following CLI commands:</span></span>
| <span data-ttu-id="b9b29-207">Polecenie</span><span class="sxs-lookup"><span data-stu-id="b9b29-207">Command</span></span> | <span data-ttu-id="b9b29-208">Opis</span><span class="sxs-lookup"><span data-stu-id="b9b29-208">Description</span></span> |
| --- | --- |
|[<span data-ttu-id="b9b29-209">Tworzenie serwera sql az ad — administrator</span><span class="sxs-lookup"><span data-stu-id="b9b29-209">az sql server ad-admin create</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#create) |<span data-ttu-id="b9b29-210">Inicjuje administrator usługi Azure Active Directory dla serwera Azure SQL lub usługi Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="b9b29-210">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="b9b29-211">(Musi być z bieżącej subskrypcji).</span><span class="sxs-lookup"><span data-stu-id="b9b29-211">(Must be from the current subscription.)</span></span> |
|[<span data-ttu-id="b9b29-212">Usuń ad administratora serwera sql az</span><span class="sxs-lookup"><span data-stu-id="b9b29-212">az sql server ad-admin delete</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#delete) |<span data-ttu-id="b9b29-213">Usuwa administratora usługi Azure Active Directory dla serwera Azure SQL lub usługi Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="b9b29-213">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="b9b29-214">Lista ad administratora serwera sql az</span><span class="sxs-lookup"><span data-stu-id="b9b29-214">az sql server ad-admin list</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#list) |<span data-ttu-id="b9b29-215">Zwraca informacje o obecnie skonfigurowane dla serwera Azure SQL lub usługi Azure SQL Data Warehouse administratora usługi Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b9b29-215">Returns information about an Azure Active Directory administrator currently configured for the Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="b9b29-216">Aktualizacja ad administratora programu sql server az</span><span class="sxs-lookup"><span data-stu-id="b9b29-216">az sql server ad-admin update</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#update) |<span data-ttu-id="b9b29-217">Aktualizuje administratora usługi Active Directory dla serwera Azure SQL lub usługi Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="b9b29-217">Updates the Active Directory administrator for an Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="b9b29-218">Aby uzyskać więcej informacji na temat poleceń interfejsu wiersza polecenia, zobacz [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span><span class="sxs-lookup"><span data-stu-id="b9b29-218">For more information about CLI commands, see [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span></span>  


## <a name="configure-your-client-computers"></a><span data-ttu-id="b9b29-219">Konfigurowanie komputerów klienckich</span><span class="sxs-lookup"><span data-stu-id="b9b29-219">Configure your client computers</span></span>
<span data-ttu-id="b9b29-220">Na wszystkich komputerach klienckich, z których aplikacje lub użytkowników połączyć się z bazą danych SQL Azure lub usługi Azure SQL Data Warehouse przy użyciu tożsamości usługi Azure AD, należy zainstalować następujące oprogramowanie:</span><span class="sxs-lookup"><span data-stu-id="b9b29-220">On all client machines, from which your applications or users connect to Azure SQL Database or Azure SQL Data Warehouse using Azure AD identities, you must install the following software:</span></span>

* <span data-ttu-id="b9b29-221">.NET framework 4.6 lub nowszy z [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span><span class="sxs-lookup"><span data-stu-id="b9b29-221">.NET Framework 4.6 or later from [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span></span>
* <span data-ttu-id="b9b29-222">Azure Active Directory Authentication Library dla programu SQL Server (**ADALSQL. Biblioteki DLL**) są dostępne w wielu językach (x x86 i amd64) z Centrum pobierania [Microsoft Active Directory Authentication Library dla programu Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span><span class="sxs-lookup"><span data-stu-id="b9b29-222">Azure Active Directory Authentication Library for SQL Server (**ADALSQL.DLL**) is available in multiple languages (both x86 and amd64) from the download center at [Microsoft Active Directory Authentication Library for Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span></span>

<span data-ttu-id="b9b29-223">Można spełnienia tych wymagań:</span><span class="sxs-lookup"><span data-stu-id="b9b29-223">You can meet these requirements by:</span></span>

* <span data-ttu-id="b9b29-224">Zainstalowanie dowolnej [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) lub [programu SQL Server Data Tools dla programu Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) spełnia wymaganie, .NET Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="b9b29-224">Installing either [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) or [SQL Server Data Tools for Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) meets the .NET Framework 4.6 requirement.</span></span>
* <span data-ttu-id="b9b29-225">Wersja programu SSMS instaluje x86 **ADALSQL. Biblioteki DLL**.</span><span class="sxs-lookup"><span data-stu-id="b9b29-225">SSMS installs the x86 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="b9b29-226">Program SSDT instaluje wersję amd64 **ADALSQL. Biblioteki DLL**.</span><span class="sxs-lookup"><span data-stu-id="b9b29-226">SSDT installs the amd64 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="b9b29-227">Najnowsze Visual Studio z [programu Visual Studio pobiera](https://www.visualstudio.com/downloads/download-visual-studio-vs) spełnia wymaganie, .NET Framework 4.6, ale nie instaluje wersję wymagane amd64 **ADALSQL. Biblioteki DLL**.</span><span class="sxs-lookup"><span data-stu-id="b9b29-227">The latest Visual Studio from [Visual Studio Downloads](https://www.visualstudio.com/downloads/download-visual-studio-vs) meets the .NET Framework 4.6 requirement, but does not install the required amd64 version of **ADALSQL.DLL**.</span></span>

## <a name="create-contained-database-users-in-your-database-mapped-to-azure-ad-identities"></a><span data-ttu-id="b9b29-228">Utwórz użytkowników zawartej bazy danych w bazie danych mapowany na tożsamość usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="b9b29-228">Create contained database users in your database mapped to Azure AD identities</span></span>

<span data-ttu-id="b9b29-229">Uwierzytelnianie usługi Active Directory systemu Azure wymaga od użytkowników bazy danych zostanie utworzony jako użytkowników zawartej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b9b29-229">Azure Active Directory authentication requires database users to be created as contained database users.</span></span> <span data-ttu-id="b9b29-230">Użytkownik zawartej bazy danych na podstawie tożsamości usługi Azure AD jest użytkownika bazy danych, która nie ma nazwy logowania w bazie danych master, i który jest mapowany na tożsamość w katalogu usługi Azure AD, która jest skojarzona z bazą danych.</span><span class="sxs-lookup"><span data-stu-id="b9b29-230">A contained database user based on an Azure AD identity, is a database user that does not have a login in the master database, and which maps to an identity in the Azure AD directory that is associated with the database.</span></span> <span data-ttu-id="b9b29-231">Tożsamość usługi Azure AD może być indywidualne konto użytkownika lub grupę.</span><span class="sxs-lookup"><span data-stu-id="b9b29-231">The Azure AD identity can be either an individual user account or a group.</span></span> <span data-ttu-id="b9b29-232">Aby uzyskać więcej informacji dotyczących użytkowników zawartej bazy danych, zobacz [zawartych użytkowników bazy danych — wprowadzanie Your przenośne bazy danych](https://msdn.microsoft.com/library/ff929188.aspx).</span><span class="sxs-lookup"><span data-stu-id="b9b29-232">For more information about contained database users, see [Contained Database Users- Making Your Database Portable](https://msdn.microsoft.com/library/ff929188.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="b9b29-233">Nie można utworzyć bazy danych użytkowników (z wyjątkiem administratorów) za pomocą portalu.</span><span class="sxs-lookup"><span data-stu-id="b9b29-233">Database users (with the exception of administrators) cannot be created using portal.</span></span> <span data-ttu-id="b9b29-234">Role RBAC nie są propagowane do programu SQL Server, SQL Database lub SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="b9b29-234">RBAC roles are not propagated to SQL Server, SQL Database, or SQL Data Warehouse.</span></span> <span data-ttu-id="b9b29-235">Role RBAC Azure są używane do zarządzania zasobami Azure i nie dotyczą uprawnień do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b9b29-235">Azure RBAC roles are used for managing Azure Resources, and do not apply to database permissions.</span></span> <span data-ttu-id="b9b29-236">Na przykład **programu SQL Server współautora** roli nie powoduje przyznania dostępu do nawiązania połączenia z bazą danych SQL lub SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="b9b29-236">For example, the **SQL Server Contributor** role does not grant access to connect to the SQL Database or SQL Data Warehouse.</span></span> <span data-ttu-id="b9b29-237">Bezpośrednio w bazie danych przy użyciu instrukcji języka Transact-SQL, należy udzielić uprawnień dostępu.</span><span class="sxs-lookup"><span data-stu-id="b9b29-237">The access permission must be granted directly in the database using Transact-SQL statements.</span></span>
>

<span data-ttu-id="b9b29-238">Aby utworzyć użytkowników platformy Azure AD na podstawie zawarte bazy danych (innego niż administrator serwera, który jest właścicielem bazy danych), połączenie z bazą danych przy użyciu tożsamości usługi Azure AD jako użytkownik z co najmniej **ALTER dowolny użytkownik** uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="b9b29-238">To create an Azure AD-based contained database user (other than the server administrator that owns the database), connect to the database with an Azure AD identity, as a user with at least the **ALTER ANY USER** permission.</span></span> <span data-ttu-id="b9b29-239">Następnie należy użyć następującej składni języka Transact-SQL:</span><span class="sxs-lookup"><span data-stu-id="b9b29-239">Then use the following Transact-SQL syntax:</span></span>

```
CREATE USER <Azure_AD_principal_name> FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="b9b29-240">*Azure_AD_principal_name* może być główną nazwę użytkownika usługi Azure AD lub nazwę wyświetlaną grupy usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b9b29-240">*Azure_AD_principal_name* can be the user principal name of an Azure AD user or the display name for an Azure AD group.</span></span>

<span data-ttu-id="b9b29-241">**Przykłady:** można utworzyć zawartej bazy danych użytkowników usługi Azure AD reprezentująca federacyjni lub zarządzani użytkownika domeny:</span><span class="sxs-lookup"><span data-stu-id="b9b29-241">**Examples:** To create a contained database user representing an Azure AD federated or managed domain user:</span></span>
```
CREATE USER [bob@contoso.com] FROM EXTERNAL PROVIDER;
CREATE USER [alice@fabrikam.onmicrosoft.com] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="b9b29-242">Aby utworzyć zawartej bazy danych użytkownika reprezentujący usługi Azure AD lub Sfederowanych grupy domeny, należy podać nazwę wyświetlaną grupy zabezpieczeń:</span><span class="sxs-lookup"><span data-stu-id="b9b29-242">To create a contained database user representing an Azure AD or federated domain group, provide the display name of a security group:</span></span>
```
CREATE USER [ICU Nurses] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="b9b29-243">Aby utworzyć aplikację, która łączy się przy użyciu usługi Azure AD token reprezentujący użytkownika zawartej bazy danych:</span><span class="sxs-lookup"><span data-stu-id="b9b29-243">To create a contained database user representing an application that connects using an Azure AD token:</span></span>

```
CREATE USER [appName] FROM EXTERNAL PROVIDER;
```

>  [!TIP]
>  <span data-ttu-id="b9b29-244">Nie można bezpośrednio utworzyć użytkownika z usługi Azure Active Directory innego niż Azure Active Directory, który jest skojarzony z subskrypcją platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="b9b29-244">You cannot directly create a user from an Azure Active Directory other than the Azure Active Directory that is associated with your Azure subscription.</span></span> <span data-ttu-id="b9b29-245">Jednak członkami innych katalogów Active, które są importowanych użytkowników w usłudze Active Directory skojarzony (znany jako użytkownicy zewnętrzni) można dodać do grupy usługi Active Directory w dzierżawie usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b9b29-245">However, members of other Active Directories that are imported users in the associated Active Directory (known as external users) can be added to an Active Directory group in the tenant Active Directory.</span></span> <span data-ttu-id="b9b29-246">Tworząc użytkownika zawartej bazy danych dla tej grupy usługi Active Directory, użytkowników zewnętrznych usługi Active Directory mogą uzyskać dostęp do bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="b9b29-246">By creating a contained database user for that AD group, the users from the external Active Directory can gain access to SQL Database.</span></span>   

<span data-ttu-id="b9b29-247">Aby uzyskać więcej informacji o tworzeniu zawarte bazy danych użytkowników na podstawie tożsamości usługi Azure Active Directory, zobacz [Tworzenie użytkownika (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span><span class="sxs-lookup"><span data-stu-id="b9b29-247">For more information about creating contained database users based on Azure Active Directory identities, see [CREATE USER (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="b9b29-248">Usuwanie administratora usługi Azure Active Directory dla usługi Azure SQL server zapobiega każdy użytkownik uwierzytelniania usługi Azure AD połączenia z serwerem.</span><span class="sxs-lookup"><span data-stu-id="b9b29-248">Removing the Azure Active Directory administrator for Azure SQL server prevents any Azure AD authentication user from connecting to the server.</span></span> <span data-ttu-id="b9b29-249">Jeśli to konieczne, korzystanie z niej użytkowników usługi Azure AD można usunąć ręcznie przez administratora bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="b9b29-249">If necessary, unusable Azure AD users can be dropped manually by a SQL Database administrator.</span></span>   

>  [!NOTE]
>  <span data-ttu-id="b9b29-250">Jeśli zostanie wyświetlony **upłynął limit czasu połączenia**, musisz ustawić `TransparentNetworkIPResolution` parametr ciągu połączenia na wartość false.</span><span class="sxs-lookup"><span data-stu-id="b9b29-250">If you receive a **Connection Timeout Expired**, you may need to set the `TransparentNetworkIPResolution` parameter of the connection string to false.</span></span> <span data-ttu-id="b9b29-251">Aby uzyskać więcej informacji, zobacz [problem limitu czasu połączenia z platformy .NET Framework 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span><span class="sxs-lookup"><span data-stu-id="b9b29-251">For more information, see [Connection timeout issue with .NET Framework 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span></span>   

   
<span data-ttu-id="b9b29-252">Podczas tworzenia użytkownika bazy danych, użytkownik otrzymuje **CONNECT** uprawnień i mogą łączyć się z bazą danych jako element członkowski **publicznego** roli.</span><span class="sxs-lookup"><span data-stu-id="b9b29-252">When you create a database user, that user receives the **CONNECT** permission and can connect to that database as a member of the **PUBLIC** role.</span></span> <span data-ttu-id="b9b29-253">Początkowo tylko uprawnienia dostępne dla użytkownika są uprawnienia do **publicznego** roli lub uprawnienia przyznane do żadnych grup systemu Windows są członkami.</span><span class="sxs-lookup"><span data-stu-id="b9b29-253">Initially the only permissions available to the user are any permissions granted to the **PUBLIC** role, or any permissions granted to any Windows groups that they are a member of.</span></span> <span data-ttu-id="b9b29-254">Po zainicjowanie obsługi usługi Azure AD na podstawie zawarte bazy danych użytkownika, można przyznać użytkownika dodatkowe uprawnienia, tak samo jak Przyznaj uprawnienie do żadnego innego typu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b9b29-254">Once you provision an Azure AD-based contained database user, you can grant the user additional permissions, the same way as you grant permission to any other type of user.</span></span> <span data-ttu-id="b9b29-255">Zwykle przyznaj uprawnienia do ról bazy danych, a następnie dodać użytkowników do ról.</span><span class="sxs-lookup"><span data-stu-id="b9b29-255">Typically grant permissions to database roles, and add users to roles.</span></span> <span data-ttu-id="b9b29-256">Aby uzyskać więcej informacji, zobacz [podstawy uprawnień aparatu bazy danych](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span><span class="sxs-lookup"><span data-stu-id="b9b29-256">For more information, see [Database Engine Permission Basics](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span></span> <span data-ttu-id="b9b29-257">Aby uzyskać więcej informacji na temat specjalne role bazy danych SQL, zobacz [Zarządzanie bazami danych i Logowaniami w bazie danych SQL Azure](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="b9b29-257">For more information about special SQL Database roles, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>
<span data-ttu-id="b9b29-258">Użytkownik domeny federacyjnej, który jest importowany do domeny zarządzania, musi używać tożsamości domeny zarządzanej.</span><span class="sxs-lookup"><span data-stu-id="b9b29-258">A federated domain user that is imported into a manage domain, must use the managed domain identity.</span></span>

> [!NOTE]
> <span data-ttu-id="b9b29-259">Użytkownicy usługi Azure AD są oznaczone w metadanych bazy danych o typie E (EXTERNAL_USER) i grupy z typem X (EXTERNAL_GROUPS).</span><span class="sxs-lookup"><span data-stu-id="b9b29-259">Azure AD users are marked in the database metadata with type E (EXTERNAL_USER) and for groups with type X (EXTERNAL_GROUPS).</span></span> <span data-ttu-id="b9b29-260">Aby uzyskać więcej informacji, zobacz [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span><span class="sxs-lookup"><span data-stu-id="b9b29-260">For more information, see [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span></span> 
>

## <a name="connect-to-the-user-database-or-data-warehouse-by-using-ssms-or-ssdt"></a><span data-ttu-id="b9b29-261">Połącz do magazynu bazy danych lub dane użytkownika przy użyciu narzędzia SSMS lub program SSDT</span><span class="sxs-lookup"><span data-stu-id="b9b29-261">Connect to the user database or data warehouse by using SSMS or SSDT</span></span>  
<span data-ttu-id="b9b29-262">Aby upewnić się, administrator usługi Azure AD jest poprawnie skonfigurowana, połącz się z **wzorca** bazy danych przy użyciu konta administratora usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b9b29-262">To confirm the Azure AD administrator is properly set up, connect to the **master** database using the Azure AD administrator account.</span></span>
<span data-ttu-id="b9b29-263">Aby zainicjować obsługę usługi Azure AD na podstawie zawarte bazy danych użytkownika (innego niż administrator serwera, który jest właścicielem bazy danych), połączenia z bazą danych przy użyciu tożsamości usługi Azure AD, który ma dostęp do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b9b29-263">To provision an Azure AD-based contained database user (other than the server administrator that owns the database), connect to the database with an Azure AD identity that has access to the database.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b9b29-264">Obsługa uwierzytelniania usługi Azure Active Directory jest dostępny z [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) i [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) w programie Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="b9b29-264">Support for Azure Active Directory authentication is available with [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) and [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) in Visual Studio 2015.</span></span> <span data-ttu-id="b9b29-265">Wersja sierpnia 2016 SSMS obejmuje również obsługę uniwersalnych uwierzytelnianie usługi Active Directory, dzięki czemu administratorzy będą musieli przy użyciu połączenia telefonicznego, wiadomości tekstowej, karty inteligentne z numeru pin lub powiadomienie aplikacji mobilnej usługi Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="b9b29-265">The August 2016 release of SSMS also includes support for Active Directory Universal Authentication, which allows administrators to require Multi-Factor Authentication using a phone call, text message, smart cards with pin, or mobile app notification.</span></span>
 
## <a name="using-an-azure-ad-identity-to-connect-using-ssms-or-ssdt"></a><span data-ttu-id="b9b29-266">Nawiązywanie połączenia przy użyciu narzędzia SSMS lub program SSDT przy użyciu tożsamości usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="b9b29-266">Using an Azure AD identity to connect using SSMS or SSDT</span></span>  

<span data-ttu-id="b9b29-267">Poniższe procedury zawierają sposób nawiązywania połączenia z bazą danych SQL przy użyciu tożsamości usługi Azure AD przy użyciu programu SQL Server Management Studio lub narzędzia bazy danych programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b9b29-267">The following procedures show you how to connect to a SQL database with an Azure AD identity using SQL Server Management Studio or SQL Server Database Tools.</span></span>

### <a name="active-directory-integrated-authentication"></a><span data-ttu-id="b9b29-268">Zintegrowane uwierzytelnianie usługi Active Directory</span><span class="sxs-lookup"><span data-stu-id="b9b29-268">Active Directory integrated authentication</span></span>

<span data-ttu-id="b9b29-269">Użyj tej metody, jeśli użytkownik jest zalogowany do systemu Windows przy użyciu poświadczeń usługi Azure Active Directory z domeny federacyjnej.</span><span class="sxs-lookup"><span data-stu-id="b9b29-269">Use this method if you are logged in to Windows using your Azure Active Directory credentials from a federated domain.</span></span>

1. <span data-ttu-id="b9b29-270">Uruchom Management Studio lub narzędzia danych i w **Połącz z serwerem** (lub **nawiązywanie połączenia z aparatem bazy danych**) okna dialogowego, **uwierzytelniania** wybierz opcję  **Zintegrowana usługa Active Directory -**.</span><span class="sxs-lookup"><span data-stu-id="b9b29-270">Start Management Studio or Data Tools and in the **Connect to Server** (or **Connect to Database Engine**) dialog box, in the **Authentication** box, select **Active Directory - Integrated**.</span></span> <span data-ttu-id="b9b29-271">Hasło nie jest potrzebne lub można wprowadzić, ponieważ zobaczy istniejących poświadczeń dla połączenia.</span><span class="sxs-lookup"><span data-stu-id="b9b29-271">No password is needed or can be entered because your existing credentials will be presented for the connection.</span></span>   

    ![Wybierz opcję zintegrowanego uwierzytelniania AD][11]
2. <span data-ttu-id="b9b29-273">Kliknij przycisk **opcje** przycisku i na **właściwości połączenia** strony w **Połącz z bazą danych** wpisz nazwę bazy danych chcesz nawiązać połączenie.</span><span class="sxs-lookup"><span data-stu-id="b9b29-273">Click the **Options** button, and on the **Connection Properties** page, in the **Connect to database** box, type the name of the user database you want to connect to.</span></span> <span data-ttu-id="b9b29-274">( **Identyfikatora nazwy lub dzierżawy domeny AD**"opcja jest obsługiwana tylko dla **uniwersalnych z połączeniem MFA** opcje, w przeciwnym razie on jest nieaktywna.)</span><span class="sxs-lookup"><span data-stu-id="b9b29-274">(The **AD domain name or tenant ID**” option is only supported for **Universal with MFA connection** options, otherwise it is greyed out.)</span></span>  

    ![Wybierz nazwę bazy danych][13]

## <a name="active-directory-password-authentication"></a><span data-ttu-id="b9b29-276">Uwierzytelnianie hasłem usługi Active Directory</span><span class="sxs-lookup"><span data-stu-id="b9b29-276">Active Directory password authentication</span></span>

<span data-ttu-id="b9b29-277">Użyj tej metody, podczas nawiązywania połączenia z głównej nazwy usługi Azure AD przy użyciu usługi Azure AD zarządzanych domeny.</span><span class="sxs-lookup"><span data-stu-id="b9b29-277">Use this method when connecting with an Azure AD principal name using the Azure AD managed domain.</span></span> <span data-ttu-id="b9b29-278">Można również użyć do kontem federacyjnym bez dostępu do domeny, na przykład podczas pracy zdalnej.</span><span class="sxs-lookup"><span data-stu-id="b9b29-278">You can also use it for federated account without access to the domain, for example when working remotely.</span></span>

<span data-ttu-id="b9b29-279">Użyj tej metody, jeśli użytkownik jest zalogowany do systemu Windows przy użyciu poświadczeń z domeny, która nie jest zintegrowany z platformy Azure lub przy użyciu uwierzytelniania usługi Azure AD za pomocą usługi Azure AD na podstawie początkowej lub domeny klienta.</span><span class="sxs-lookup"><span data-stu-id="b9b29-279">Use this method if you are logged in to Windows using credentials from a domain that is not federated with Azure, or when using Azure AD authentication using Azure AD based on the initial or the client domain.</span></span>

1. <span data-ttu-id="b9b29-280">Uruchom Management Studio lub narzędzia danych i w **Połącz z serwerem** (lub **nawiązywanie połączenia z aparatem bazy danych**) okna dialogowego, **uwierzytelniania** wybierz opcję  **Usługi Active Directory — hasło**.</span><span class="sxs-lookup"><span data-stu-id="b9b29-280">Start Management Studio or Data Tools and in the **Connect to Server** (or **Connect to Database Engine**) dialog box, in the **Authentication** box, select **Active Directory - Password**.</span></span>
2. <span data-ttu-id="b9b29-281">W **nazwy użytkownika** wpisz nazwę użytkownika usługi Azure Active Directory w formacie  **username@domain.com** . Musi to być konto w usłudze Azure Active Directory lub konta z domeny utworzenia federacji z usługą Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b9b29-281">In the **User name** box, type your Azure Active Directory user name in the format **username@domain.com**. This must be an account from the Azure Active Directory or an account from a domain federate with the Azure Active Directory.</span></span>
3. <span data-ttu-id="b9b29-282">W **hasło** wpisz hasło użytkownika dla konta usługi Azure Active Directory lub konta domeny federacyjnej.</span><span class="sxs-lookup"><span data-stu-id="b9b29-282">In the **Password** box, type your user password for the Azure Active Directory account or federated domain account.</span></span>

    ![Wybierz uwierzytelnianie hasłem usługi AD][12]
4. <span data-ttu-id="b9b29-284">Kliknij przycisk **opcje** przycisku i na **właściwości połączenia** strony w **Połącz z bazą danych** wpisz nazwę bazy danych chcesz nawiązać połączenie.</span><span class="sxs-lookup"><span data-stu-id="b9b29-284">Click the **Options** button, and on the **Connection Properties** page, in the **Connect to database** box, type the name of the user database you want to connect to.</span></span> <span data-ttu-id="b9b29-285">(Zobacz grafiki w poprzedniej opcji).</span><span class="sxs-lookup"><span data-stu-id="b9b29-285">(See the graphic in the previous option.)</span></span>

## <a name="using-an-azure-ad-identity-to-connect-from-a-client-application"></a><span data-ttu-id="b9b29-286">Do łączenia z aplikacji klienta przy użyciu tożsamości usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="b9b29-286">Using an Azure AD identity to connect from a client application</span></span>

<span data-ttu-id="b9b29-287">Poniższe procedury zawierają sposób nawiązywania połączenia z bazą danych SQL przy użyciu tożsamości usługi Azure AD z aplikacji klienta.</span><span class="sxs-lookup"><span data-stu-id="b9b29-287">The following procedures show you how to connect to a SQL database with an Azure AD identity from a client application.</span></span>

###  <a name="active-directory-integrated-authentication"></a><span data-ttu-id="b9b29-288">Zintegrowane uwierzytelnianie usługi Active Directory</span><span class="sxs-lookup"><span data-stu-id="b9b29-288">Active Directory integrated authentication</span></span>

<span data-ttu-id="b9b29-289">Do korzystania ze zintegrowanego uwierzytelniania systemu Windows, należy federacyjną Twojej domeny usługi Active Directory z usługą Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b9b29-289">To use integrated Windows authentication, your domain’s Active Directory must be federated with Azure Active Directory.</span></span> <span data-ttu-id="b9b29-290">Aplikacja kliencka (lub usługą) łączenia z bazą danych musi działać na komputerze przyłączonym do domeny z poświadczeniami użytkownika domeny.</span><span class="sxs-lookup"><span data-stu-id="b9b29-290">Your client application (or a service) connecting to the database must be running on a domain-joined machine under a user’s domain credentials.</span></span>

<span data-ttu-id="b9b29-291">Aby połączyć się z bazą danych przy użyciu zintegrowanego uwierzytelnianie i tożsamość usługi Azure AD, słowo kluczowe uwierzytelniania w parametrach połączenia bazy danych musi mieć ustawioną Active Directory Integrated.</span><span class="sxs-lookup"><span data-stu-id="b9b29-291">To connect to a database using integrated authentication and an Azure AD identity, the Authentication keyword in the database connection string must be set to Active Directory Integrated.</span></span> <span data-ttu-id="b9b29-292">Poniższy przykład kodu C# używa ADO .NET.</span><span class="sxs-lookup"><span data-stu-id="b9b29-292">The following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Integrated; Initial Catalog=testdb;";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="b9b29-293">Słowo kluczowe parametrów połączenia ``Integrated Security=True`` nie jest obsługiwana dla łączenia z bazą danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="b9b29-293">The connection string keyword ``Integrated Security=True`` is not supported for connecting to Azure SQL Database.</span></span> <span data-ttu-id="b9b29-294">Podczas tworzenia połączenia ODBC, należy usunąć spacje i ustawić uwierzytelniania "ActiveDirectoryIntegrated".</span><span class="sxs-lookup"><span data-stu-id="b9b29-294">When making an ODBC connection, you will need to remove spaces and set Authentication to 'ActiveDirectoryIntegrated'.</span></span>

### <a name="active-directory-password-authentication"></a><span data-ttu-id="b9b29-295">Uwierzytelnianie hasłem usługi Active Directory</span><span class="sxs-lookup"><span data-stu-id="b9b29-295">Active Directory password authentication</span></span>

<span data-ttu-id="b9b29-296">Aby połączyć się z bazą danych przy użyciu zintegrowanego uwierzytelnianie i tożsamość usługi Azure AD, słowo kluczowe uwierzytelniania musi mieć ustawioną hasła usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b9b29-296">To connect to a database using integrated authentication and an Azure AD identity, the Authentication keyword must be set to Active Directory Password.</span></span> <span data-ttu-id="b9b29-297">Ciąg połączenia musi zawierać identyfikator/UID użytkownika i hasło/PWD słowa kluczowe i wartości.</span><span class="sxs-lookup"><span data-stu-id="b9b29-297">The connection string must contain User ID/UID and Password/PWD keywords and values.</span></span> <span data-ttu-id="b9b29-298">Poniższy przykład kodu C# używa ADO .NET.</span><span class="sxs-lookup"><span data-stu-id="b9b29-298">The following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Password; Initial Catalog=testdb;  UID=bob@contoso.onmicrosoft.com; PWD=MyPassWord!";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="b9b29-299">Dowiedz się więcej na temat metod uwierzytelniania usługi Azure AD przy użyciu przykłady kodu pokaz dostępne pod adresem [pokaz GitHub uwierzytelniania w usłudze Azure AD](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span><span class="sxs-lookup"><span data-stu-id="b9b29-299">Learn more about Azure AD authentication methods using the demo code samples available at [Azure AD Authentication GitHub Demo](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span></span>

## <a name="azure-ad-token"></a><span data-ttu-id="b9b29-300">Token usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="b9b29-300">Azure AD token</span></span>
<span data-ttu-id="b9b29-301">Ta metoda uwierzytelniania umożliwia usługi warstwy środkowej, aby nawiązać połączenie bazy danych SQL Azure lub usługi Azure SQL Data Warehouse, uzyskując tokenu z usługi Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="b9b29-301">This authentication method allows middle-tier services to connect to Azure SQL Database or Azure SQL Data Warehouse by obtaining a token from Azure Active Directory (AAD).</span></span> <span data-ttu-id="b9b29-302">Umożliwia zaawansowane scenariusze, w tym uwierzytelniania opartego na certyfikatach.</span><span class="sxs-lookup"><span data-stu-id="b9b29-302">It enables sophisticated scenarios including certificate-based authentication.</span></span> <span data-ttu-id="b9b29-303">Należy wykonać cztery podstawowe kroki, aby użyć tokenu uwierzytelniania usługi Azure AD:</span><span class="sxs-lookup"><span data-stu-id="b9b29-303">You must complete four basic steps to use Azure AD token authentication:</span></span>

1. <span data-ttu-id="b9b29-304">Zarejestrować aplikację w usłudze Azure Active Directory i pobieranie identyfikatora klienta dla kodu.</span><span class="sxs-lookup"><span data-stu-id="b9b29-304">Register your application with Azure Active Directory and get the client id for your code.</span></span> 
2. <span data-ttu-id="b9b29-305">Utwórz użytkownika bazy danych reprezentujący aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b9b29-305">Create a database user representing the application.</span></span> <span data-ttu-id="b9b29-306">(Ukończono wcześniej w kroku 6).</span><span class="sxs-lookup"><span data-stu-id="b9b29-306">(Completed earlier in step 6.)</span></span>
3. <span data-ttu-id="b9b29-307">Utwórz certyfikat na uruchamia komputer klienta aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b9b29-307">Create a certificate on the client computer runs the application.</span></span>
4. <span data-ttu-id="b9b29-308">Dodaj certyfikat jako klucz dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b9b29-308">Add the certificate as a key for your application.</span></span>

<span data-ttu-id="b9b29-309">Przykładowy ciąg połączenia:</span><span class="sxs-lookup"><span data-stu-id="b9b29-309">Sample connection string:</span></span>

```
string ConnectionString =@"Data Source=n9lxnyuzhv.database.windows.net; Initial Catalog=testdb;"
SqlConnection conn = new SqlConnection(ConnectionString);
connection.AccessToken = "Your JWT token"
conn.Open();
```

<span data-ttu-id="b9b29-310">Aby uzyskać więcej informacji, zobacz [Blog zabezpieczeń programu SQL Server](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span><span class="sxs-lookup"><span data-stu-id="b9b29-310">For more information, see [SQL Server Security Blog](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span></span>

### <a name="sqlcmd"></a><span data-ttu-id="b9b29-311">sqlcmd</span><span class="sxs-lookup"><span data-stu-id="b9b29-311">sqlcmd</span></span>

<span data-ttu-id="b9b29-312">Poniższe instrukcje łączyć się przy użyciu wersji 13.1 programu sqlcmd, który jest dostępny z [Centrum pobierania](http://go.microsoft.com/fwlink/?LinkID=825643).</span><span class="sxs-lookup"><span data-stu-id="b9b29-312">The following statements, connect using version 13.1 of sqlcmd, which is available from the [Download Center](http://go.microsoft.com/fwlink/?LinkID=825643).</span></span>

```
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net  -G  
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net -U bob@contoso.com -P MyAADPassword -G -l 30
```

## <a name="next-steps"></a><span data-ttu-id="b9b29-313">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="b9b29-313">Next steps</span></span>
- <span data-ttu-id="b9b29-314">Dostęp i kontrola w usłudze SQL Database zostały omówione w temacie [Kontrola dostępu w usłudze SQL Database](sql-database-control-access.md).</span><span class="sxs-lookup"><span data-stu-id="b9b29-314">For an overview of access and control in SQL Database, see [SQL Database access and control](sql-database-control-access.md).</span></span>
- <span data-ttu-id="b9b29-315">Dane logowania, użytkownicy i role bazy danych w usłudze SQL Database zostały omówione w temacie [Logins, users, and database roles](sql-database-manage-logins.md) (Dane logowania, użytkownicy i role bazy danych).</span><span class="sxs-lookup"><span data-stu-id="b9b29-315">For an overview of logins, users, and database roles in SQL Database, see [Logins, users, and database roles](sql-database-manage-logins.md).</span></span>
- <span data-ttu-id="b9b29-316">Aby uzyskać więcej informacji na temat podmiotów zabezpieczeń bazy danych, zobacz [Principals](https://msdn.microsoft.com/library/ms181127.aspx) (Podmioty zabezpieczeń).</span><span class="sxs-lookup"><span data-stu-id="b9b29-316">For more information about database principals, see [Principals](https://msdn.microsoft.com/library/ms181127.aspx).</span></span>
- <span data-ttu-id="b9b29-317">Aby uzyskać więcej informacji na temat ról bazy danych, zobacz [Database roles](https://msdn.microsoft.com/library/ms189121.aspx) (Role bazy danych).</span><span class="sxs-lookup"><span data-stu-id="b9b29-317">For more information about database roles, see [Database roles](https://msdn.microsoft.com/library/ms189121.aspx).</span></span>
- <span data-ttu-id="b9b29-318">Aby uzyskać więcej informacji na temat reguł zapory w usłudze SQL Database, zobacz [Omówienie reguł zapory usługi SQL Database](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="b9b29-318">For more information about firewall rules in SQL Database, see [SQL Database firewall rules](sql-database-firewall-configure.md).</span></span>

<!--Image references-->

[1]: ./media/sql-database-aad-authentication/1aad-auth-diagram.png
[2]: ./media/sql-database-aad-authentication/2subscription-relationship.png
[3]: ./media/sql-database-aad-authentication/3admin-structure.png
[4]: ./media/sql-database-aad-authentication/4select-subscription.png
[5]: ./media/sql-database-aad-authentication/5ad-settings-portal.png
[6]: ./media/sql-database-aad-authentication/6edit-directory-select.png
[7]: ./media/sql-database-aad-authentication/7edit-directory-confirm.png
[8]: ./media/sql-database-aad-authentication/8choose-ad.png
[10]: ./media/sql-database-aad-authentication/10choose-admin.png
[11]: ./media/sql-database-aad-authentication/active-directory-integrated.png
[12]: ./media/sql-database-aad-authentication/12connect-using-pw-auth2.png
[13]: ./media/sql-database-aad-authentication/13connect-to-db2.png

