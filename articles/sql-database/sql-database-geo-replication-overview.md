---
title: "aaaFailover grup i aktywna replikacja geograficzna — baza danych SQL Azure | Dokumentacja firmy Microsoft"
description: "Grupy pracy awaryjnej automatycznie z aktywna replikacja geograficzna umożliwia toosetup 4 replik bazy danych w żadnym hello centrach danych platformy Azure i pracy awaryjnej autoomatically w zdarzeniu hello awarii."
services: sql-database
documentationcenter: na
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2a29f657-82fb-4283-9a83-e14a144bfd93
ms.service: sql-database
ms.custom: business continuity
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: NA
ms.date: 07/10/2017
ms.author: sashan
ms.openlocfilehash: 7a39af8505624c0f19c5abccff051af836b1f9bc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="overview-failover-groups-and-active-geo-replication"></a><span data-ttu-id="97c7e-103">Omówienie: Grup trybu Failover i aktywna replikacja geograficzna</span><span class="sxs-lookup"><span data-stu-id="97c7e-103">Overview: Failover groups and active geo-replication</span></span>
<span data-ttu-id="97c7e-104">Aktywna replikacja geograficzna umożliwia tooconfigure zapasowe toofour czytelny pomocniczych baz danych w hello centrum danych tych samych lub różnych lokalizacji (regiony).</span><span class="sxs-lookup"><span data-stu-id="97c7e-104">Active geo-replication enables you tooconfigure up toofour readable secondary databases in hello same or different data center locations (regions).</span></span> <span data-ttu-id="97c7e-105">Dodatkowej bazy danych są dostępne na potrzeby zapytań i pracy awaryjnej w przypadku hello data center awarii lub hello brakiem tooconnect toohello głównej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-105">Secondary databases are available for querying and for failover in hello case of a data center outage or hello inability tooconnect toohello primary database.</span></span> <span data-ttu-id="97c7e-106">Witaj pracy awaryjnej musi być inicjowana ręcznie przez aplikację hello hello użytkownika.</span><span class="sxs-lookup"><span data-stu-id="97c7e-106">hello failover must be initiated manually by hello application of hello user.</span></span> <span data-ttu-id="97c7e-107">Po przejściu w tryb failover hello nową podstawową ma końcowego innego połączenia.</span><span class="sxs-lookup"><span data-stu-id="97c7e-107">After failover, hello new primary has a different connection end-point.</span></span> 

> [!NOTE]
> <span data-ttu-id="97c7e-108">Aktywna replikacja geograficzna jest dostępna dla wszystkich baz danych w warstwach usług z wszystkich we wszystkich regionach.</span><span class="sxs-lookup"><span data-stu-id="97c7e-108">Active geo-replication is available for all databases in all service tiers in all regions.</span></span>
>  

<span data-ttu-id="97c7e-109">Grupy pracy awaryjnej automatycznie w usłudze Azure bazy danych SQL (w — wersja zapoznawcza) jest tooautomatically funkcja zaprojektowana bazy danych SQL Zarządzanie relacji — replikacja geograficzna, łączności i pracy awaryjnej na dużą skalę.</span><span class="sxs-lookup"><span data-stu-id="97c7e-109">Azure SQL Database auto-failover groups (in-preview) is a SQL Database feature designed tooautomatically manage geo-replication relationship, connectivity, and failover at scale.</span></span> <span data-ttu-id="97c7e-110">Hello klientów korzyści hello możliwości tooautomatically odzyskać wielu powiązanych baz danych w regionie pomocniczym powitania po poważnej awarii regionalnych lub inne nieplanowanego zdarzenia, które powoduje utratę pełnej lub częściowej hello usługi baza danych SQL dostępność w regionie podstawowym hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-110">With it, hello customers gain hello ability tooautomatically recover multiple related databases in hello secondary region after catastrophic regional failures or other unplanned events that result in full or partial loss of hello SQL Database service’s availability in hello primary region.</span></span> <span data-ttu-id="97c7e-111">Ponadto użyciem hello do odczytu bazy danych w dodatkowej toooffload tylko do odczytu obciążeń.</span><span class="sxs-lookup"><span data-stu-id="97c7e-111">Additionally, they can use hello readable secondary databases toooffload read-only workloads.</span></span>  <span data-ttu-id="97c7e-112">Ponieważ grupy pracy awaryjnej automatycznie wymagają wielu baz danych, które muszą zostać skonfigurowane na serwerze podstawowym hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-112">Because auto-failover groups involve multiple databases they must be configured on hello primary server.</span></span> <span data-ttu-id="97c7e-113">Podstawowe i dodatkowe serwery muszą być w hello tej samej subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="97c7e-113">Both primary and secondary servers must be in hello same subscription.</span></span> <span data-ttu-id="97c7e-114">Grupy pracy awaryjnej automatycznie obsługują replikacji wszystkich baz danych w hello grupy tooonly jednego serwera pomocniczego w innym regionie.</span><span class="sxs-lookup"><span data-stu-id="97c7e-114">Auto-failover groups support replication of all databases in hello group tooonly one secondary server in a different region.</span></span> <span data-ttu-id="97c7e-115">Aktywna replikacja geograficzna, bez trybu failover automatycznie grup, umożliwia się too4 pomocnicze bazy danych w dowolnym regionie.</span><span class="sxs-lookup"><span data-stu-id="97c7e-115">Active geo-replication, without auto-failover groups, allows up too4 secondaries in any region.</span></span>

<span data-ttu-id="97c7e-116">Jeśli używasz aktywna replikacja geograficzna i przyczyny głównej bazy danych nie powiedzie się, lub po prostu toobe potrzeb przełączony w tryb offline, można zainicjować tooany trybu failover z dodatkowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-116">If you are using active geo-replication and for any reason your primary database fails, or simply needs toobe taken offline, you can initiate failover tooany of your secondary databases.</span></span> <span data-ttu-id="97c7e-117">Podczas pracy awaryjnej jest aktywowane tooone hello pomocniczych baz danych, wszystkie inne pomocnicze bazy danych są automatycznie dołączane toohello nową podstawową.</span><span class="sxs-lookup"><span data-stu-id="97c7e-117">When failover is activated tooone of hello secondary databases, all other secondaries are automatically linked toohello new primary.</span></span> <span data-ttu-id="97c7e-118">Jeśli używasz trybu failover automatyczne odzyskiwanie bazy danych (w podglądzie) toomanage i wszelkie awarii, który ma wpływ na jednego lub kilku baz danych hello w hello grupy powoduje automatyczną pracę awaryjną grup.</span><span class="sxs-lookup"><span data-stu-id="97c7e-118">If you are using auto-failover groups (in-preview) toomanage database recovery and any outage that impacts one or several of hello databases in hello group results in automatic failover.</span></span> <span data-ttu-id="97c7e-119">Zasady trybu failover automatycznie hello, która najlepiej odpowiada Twoim potrzebom aplikacji można skonfigurować, lub można zrezygnować i korzystać z aktywacji ręczne.</span><span class="sxs-lookup"><span data-stu-id="97c7e-119">You can configure hello auto-failover policy that best meets your application needs, or you can opt out and use manual activation.</span></span> <span data-ttu-id="97c7e-120">Ponadto pracy awaryjnej automatycznie grupy (w podglądzie) podaj odczytu i zapisu, a punkty końcowe odbiornika tylko do odczytu, które pozostają bez zmian podczas pracy w trybie Failover.</span><span class="sxs-lookup"><span data-stu-id="97c7e-120">In addition, auto-failover groups (in-preview) provide read-write and read-only listener end-points that remain unchanged during failovers.</span></span> <span data-ttu-id="97c7e-121">Czy używać aktywacji ręczne lub automatyczne trybu failover, pracy awaryjnej zmienia wszystkie pomocnicze bazy danych w hello tooprimary grupy.</span><span class="sxs-lookup"><span data-stu-id="97c7e-121">Whether you use manual or automatic failover activation, failover switches all secondary databases in hello group tooprimary.</span></span> <span data-ttu-id="97c7e-122">Po zakończeniu pracy awaryjnej bazy danych hello rekord DNS hello jest aktualizowane automatycznie tooredirect hello punkty końcowe toohello nowy region.</span><span class="sxs-lookup"><span data-stu-id="97c7e-122">After hello database failover is completed, hello DNS record is automatically updated tooredirect hello end-points toohello new region.</span></span>

<span data-ttu-id="97c7e-123">Możesz zarządzać replikacji i trybu failover poszczególne bazy danych lub zestaw baz danych na serwerze lub w puli elastycznej za pomocą aktywna replikacja geograficzna.</span><span class="sxs-lookup"><span data-stu-id="97c7e-123">You can manage replication and failover of an individual database or a set of databases on a server or in an elastic pool using active geo-replication.</span></span> <span data-ttu-id="97c7e-124">Możesz zrobić tego za pomocą hello [portalu Azure](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [języka Transact-SQL](sql-database-geo-replication-transact-sql.md), lub hello [interfejsu API REST](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span><span class="sxs-lookup"><span data-stu-id="97c7e-124">You can do that using hello [Azure portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), or hello [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span></span> <span data-ttu-id="97c7e-125">Po przejściu w tryb failover upewnij się, że hello wymagania dotyczące uwierzytelniania dla serwera i bazy danych są skonfigurowane na powitania nową podstawową.</span><span class="sxs-lookup"><span data-stu-id="97c7e-125">After failover, ensure hello authentication requirements for your server and database are configured on hello new primary.</span></span> <span data-ttu-id="97c7e-126">Aby uzyskać więcej informacji, zobacz [zabezpieczeń bazy danych SQL po awarii](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="97c7e-126">For details, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span> <span data-ttu-id="97c7e-127">Dotyczy to zarówno tooactive — replikacja geograficzna i pracy awaryjnej automatycznie grupy (w — wersja zapoznawcza).</span><span class="sxs-lookup"><span data-stu-id="97c7e-127">This applies both tooactive geo-replication and auto-failover groups (in-preview).</span></span>

<span data-ttu-id="97c7e-128">Aktywna replikacja geograficzna wykorzystanie hello [zawsze na](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technologii tooasynchronously programu SQL Server to zreplikowanie zatwierdzonych transakcji w hello podstawowej bazy danych tooa pomocniczej bazie danych przy użyciu izolacji migawce zatwierdzonego odczytu (RCSI).</span><span class="sxs-lookup"><span data-stu-id="97c7e-128">Active geo-replication leverages hello [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technology of SQL Server tooasynchronously replicate committed transactions on hello primary database tooa secondary database using read committed snapshot isolation (RCSI).</span></span> <span data-ttu-id="97c7e-129">Grupy pracy awaryjnej automatycznie stanowią semantyki grupy hello na górze aktywna replikacja geograficzna, ale hello sam mechanizm replikacji asynchronicznej jest używana.</span><span class="sxs-lookup"><span data-stu-id="97c7e-129">Auto-failover groups provide hello group semantics on top of active geo-replication but hello same asynchronous replication mechanism is used.</span></span> <span data-ttu-id="97c7e-130">Gdy na dowolnym etapie, hello dodatkowej bazy danych może być nieco za hello podstawowej bazy danych, danych pomocniczych hello jest gwarantowana toonever ma częściowe transakcji.</span><span class="sxs-lookup"><span data-stu-id="97c7e-130">While at any given point, hello secondary database might be slightly behind hello primary database, hello secondary data is guaranteed toonever have partial transactions.</span></span> <span data-ttu-id="97c7e-131">Nadmiarowość między region umożliwia odzyskiwanie tooquickly aplikacji z trwałą utratę całe centrum danych lub części spowodowane klęski żywiołowej, krytycznego błędów ludzkich lub złośliwych działań Centrum danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-131">Cross-region redundancy enables applications tooquickly recover from a permanent loss of an entire datacenter or parts of a datacenter caused by natural disasters, catastrophic human errors, or malicious acts.</span></span> <span data-ttu-id="97c7e-132">Hello danych specyficznych dla celu punktu odzyskiwania można znaleźć w folderze [omówienie ciągłości działalności biznesowej](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="97c7e-132">hello specific RPO data can be found at [Overview of Business Continuity](sql-database-business-continuity.md).</span></span>

<span data-ttu-id="97c7e-133">Witaj poniższej ilustracji przedstawiono przykład aktywna replikacja geograficzna skonfigurowany z użyciem hello północno-środkowe stany regionu podstawowego i pomocniczego w hello południowo-środkowe stany regionu.</span><span class="sxs-lookup"><span data-stu-id="97c7e-133">hello following figure shows an example of active geo-replication configured with a primary in hello North Central US region and secondary in hello South Central US region.</span></span>

![Replikacja geograficzna relacji](./media/sql-database-active-geo-replication/geo-replication-relationship.png)

<span data-ttu-id="97c7e-135">Ponieważ hello pomocniczej bazy danych można odczytać, mogą być używane toooffload obciążeń tylko do odczytu, takich jak zadania raportowania.</span><span class="sxs-lookup"><span data-stu-id="97c7e-135">Because hello secondary databases are readable, they can be used toooffload read-only workloads such as reporting jobs.</span></span> <span data-ttu-id="97c7e-136">Jeśli używasz aktywna replikacja geograficzna jest możliwe toocreate hello dodatkowej bazy danych w hello tego samego regionu podstawowego hello, ale nie zwiększa aplikacji hello odporności toocatastrophic błędów.</span><span class="sxs-lookup"><span data-stu-id="97c7e-136">If you are using active geo-replication, it is possible toocreate hello secondary database in hello same region with hello primary, but it does not increase hello application's resilience toocatastrophic failures.</span></span> <span data-ttu-id="97c7e-137">Jeśli używasz trybu failover automatycznie grupy (w podglądzie) z dodatkowej bazy danych zawsze jest tworzony w innym regionie.</span><span class="sxs-lookup"><span data-stu-id="97c7e-137">If you are using auto-failover groups (in-preview), your secondary database is always created in a different region.</span></span>

<span data-ttu-id="97c7e-138">Ponadto toodisaster odzyskiwania aktywna replikacja geograficzna, mogą być używane w hello następujące scenariusze:</span><span class="sxs-lookup"><span data-stu-id="97c7e-138">In addition toodisaster recovery active geo-replication can be used in hello following scenarios:</span></span>

* <span data-ttu-id="97c7e-139">**Baza danych migracji**: toomigrate aktywna replikacja geograficzna bazę danych z jednego serwera tooanother w trybie online można używać z minimalną przestoju.</span><span class="sxs-lookup"><span data-stu-id="97c7e-139">**Database migration**: You can use active geo-replication toomigrate a database from one server tooanother online with minimum downtime.</span></span>
* <span data-ttu-id="97c7e-140">**Uaktualnianie aplikacji**: można utworzyć dodatkowe pomocniczy jako kopia tyłu podczas uaktualniania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="97c7e-140">**Application upgrades**: You can create an extra secondary as a fail back copy during application upgrades.</span></span>

<span data-ttu-id="97c7e-141">tooachieve rzeczywistych ciągłość prowadzenia działalności biznesowej, dodawanie nadmiarowość bazy danych między centrami danych jest tylko część hello rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="97c7e-141">tooachieve real business continuity, adding database redundancy between datacenters is only part of hello solution.</span></span> <span data-ttu-id="97c7e-142">Odzyskiwanie aplikacji (usługa) end-to-end po poważnej awarii wymaga odzyskiwania wszystkich składników, które stanowią hello usługi i usług zależnych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-142">Recovering an application (service) end-to-end after a catastrophic failure requires recovery of all components that constitute hello service and any dependent services.</span></span> <span data-ttu-id="97c7e-143">Przykładami tych składników oprogramowania klienckiego hello (na przykład przeglądarki z niestandardowych skryptów JavaScript), sieci Web, magazynu i DNS.</span><span class="sxs-lookup"><span data-stu-id="97c7e-143">Examples of these components include hello client software (for example, a browser with a custom JavaScript), web front ends, storage, and DNS.</span></span> <span data-ttu-id="97c7e-144">Bardzo ważne, czy wszystkie składniki są odporne toohello tego samego błędów i staną się dostępne w celu czasu odzyskiwania hello (RTO) aplikacji jest.</span><span class="sxs-lookup"><span data-stu-id="97c7e-144">It is critical that all components are resilient toohello same failures and become available within hello recovery time objective (RTO) of your application.</span></span> <span data-ttu-id="97c7e-145">W związku z tym należy tooidentify wszystkich zależnych usług i zrozumienie hello gwarancje i możliwości, które zapewniają.</span><span class="sxs-lookup"><span data-stu-id="97c7e-145">Therefore, you need tooidentify all dependent services and understand hello guarantees and capabilities they provide.</span></span> <span data-ttu-id="97c7e-146">Następnie należy przełączyć tooensure odpowiednie kroki, które funkcje usługi podczas hello trybu failover hello usług, od których zależy.</span><span class="sxs-lookup"><span data-stu-id="97c7e-146">Then, you must take adequate steps tooensure that your service functions during hello failover of hello services on which it depends.</span></span> <span data-ttu-id="97c7e-147">Aby uzyskać więcej informacji na temat projektowania rozwiązań do odzyskiwania po awarii, zobacz [projektowania rozwiązań chmury za pomocą odzyskiwania po awarii aktywna replikacja geograficzna](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="97c7e-147">For more information about designing solutions for disaster recovery, see [Designing Cloud Solutions for Disaster Recovery Using active geo-replication](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>

## <a name="active-geo-replication-capabilities"></a><span data-ttu-id="97c7e-148">Aktywna replikacja geograficzna możliwości</span><span class="sxs-lookup"><span data-stu-id="97c7e-148">Active geo-replication capabilities</span></span>
<span data-ttu-id="97c7e-149">Funkcja aktywna replikacja geograficzna Hello zapewnia hello następujące podstawowe możliwości:</span><span class="sxs-lookup"><span data-stu-id="97c7e-149">hello active geo-replication feature provides hello following essential capabilities:</span></span>
* <span data-ttu-id="97c7e-150">**Automatyczne asynchroniczną replikację**: pomocniczej bazy danych można utworzyć tylko przez dodanie tooan istniejącej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-150">**Automatic Asynchronous Replication**: You can only create a secondary database by adding tooan existing database.</span></span> <span data-ttu-id="97c7e-151">Witaj dodatkowej mogą być tworzone w dowolnym serwerze bazy danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="97c7e-151">hello secondary can be created in any Azure SQL Database server.</span></span> <span data-ttu-id="97c7e-152">Po utworzeniu hello dodatkowej bazy danych jest wypełniana hello dane skopiowane z hello podstawowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-152">Once created, hello secondary database is populated with hello data copied from hello primary database.</span></span> <span data-ttu-id="97c7e-153">Ten proces jest nazywany wstępnego wypełniania.</span><span class="sxs-lookup"><span data-stu-id="97c7e-153">This process is known as seeding.</span></span> <span data-ttu-id="97c7e-154">Po utworzeniu pomocniczej bazy danych i rozpoczęta, aktualizacje toohello podstawowej bazy danych są asynchroniczne automatycznie replikowane toohello dodatkowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-154">After secondary database has been created and seeded, updates toohello primary database are asynchronously replicated toohello secondary database automatically.</span></span> <span data-ttu-id="97c7e-155">Asynchroniczną replikację oznacza, że transakcje są zostało zatwierdzone na poziomie hello podstawowej bazy danych, przed ich replikowanych toohello dodatkowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-155">Asynchronous replication means that transactions are committed on hello primary database before they are replicated toohello secondary database.</span></span> 
* <span data-ttu-id="97c7e-156">**Do odczytu bazy danych w dodatkowej**: aplikacja może uzyskać dostęp do pomocniczej bazy danych dla operacji tylko do odczytu za pomocą hello takie same lub podmiotów zabezpieczeń używane do uzyskiwania dostępu do hello podstawowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-156">**Readable secondary databases**: An application can access a secondary database for read-only operations using hello same or different security principals used for accessing hello primary database.</span></span> <span data-ttu-id="97c7e-157">Witaj pomocniczej bazy danych działanie w ramach izolacji migawki tryb tooensure replikacji aktualizacje hello hello głównej (dziennika powtarzania) nie jest opóźnione przez zapytania są wykonywane na powitania dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-157">hello secondary databases operate in snapshot isolation mode tooensure replication of hello updates of hello primary (log replay) is not delayed by queries executed on hello secondary.</span></span>

   > [!NOTE]
   > <span data-ttu-id="97c7e-158">powtarzania dziennika Hello jest opóźnione na powitania dodatkowej bazy danych, jeśli istnieją aktualizacje schematu odbiera z hello podstawowy wymagające blokady schematu na powitania dodatkowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-158">hello log replay is delayed on hello secondary database if there are schema updates that it is receiving from hello Primary that require a schema lock on hello secondary database.</span></span> 
   > 

* <span data-ttu-id="97c7e-159">**Wiele elementów dodatkowych do odczytu**: dwa lub więcej pomocniczych baz danych zwiększenia nadmiarowości i poziom ochrony hello podstawowej bazy danych i aplikacji.</span><span class="sxs-lookup"><span data-stu-id="97c7e-159">**Multiple readable secondaries**: Two or more secondary databases increase redundancy and level of protection for hello primary database and application.</span></span> <span data-ttu-id="97c7e-160">Jeśli istnieje wiele pomocniczych baz danych, aplikacji hello pozostaje chroniony nawet w przypadku awarii jednego z dodatkowej bazy danych hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-160">If multiple secondary databases exist, hello application remains protected even if one of hello secondary databases fails.</span></span> <span data-ttu-id="97c7e-161">Jeśli nie powiedzie się istnieje tylko jeden z dodatkowej bazy danych, aplikacji hello jest uwidaczniany toohigher ryzyka, dopóki nie zostanie utworzony nowy pomocniczej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-161">If there is only one secondary database, and it fails, hello application is exposed toohigher risk until a new secondary database is created.</span></span>

   > [!NOTE]
   > <span data-ttu-id="97c7e-162">Jeśli używasz aktywna replikacja geograficzna toobuild globalnie rozproszone aplikacji i wymagają tooprovide tylko do odczytu do toodata w regionach więcej niż 4, możesz utworzyć dodatkowej pomocniczej (proces znany jako łańcucha).</span><span class="sxs-lookup"><span data-stu-id="97c7e-162">If you are using active geo-replication toobuild a globally distributed application and need tooprovide read-only access toodata in more than 4 regions, you can create secondary of a secondary (a process known as chaining).</span></span> <span data-ttu-id="97c7e-163">W ten sposób można osiągnąć nieograniczoną skali replikacji bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-163">This way you can achieve virtually unlimited scale of database replication.</span></span> <span data-ttu-id="97c7e-164">Ponadto łańcucha zmniejsza obciążenie związane z hello replikacji z hello podstawowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-164">In addition, chaining reduces hello overhead of replication from hello primary database.</span></span> <span data-ttu-id="97c7e-165">rozwiązanie Hello jest opóźnienie replikacji zwiększona hello na powitania większość liścia dodatkowej w bazach danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-165">hello trade-off is hello increased replication lag on hello leaf-most secondary databases.</span></span> <span data-ttu-id="97c7e-166">.</span><span class="sxs-lookup"><span data-stu-id="97c7e-166">.</span></span> 
   >

* <span data-ttu-id="97c7e-167">**Obsługa elastycznej puli baz danych**: aktywna replikacja geograficzna można skonfigurować dla dowolnej bazy danych w każdej puli elastycznej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-167">**Support of elastic pool databases**: Active geo-replication can be configured for any database in any elastic pool.</span></span> <span data-ttu-id="97c7e-168">Witaj dodatkowej bazy danych może być w innej puli elastycznej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-168">hello secondary database can be in another elastic pool.</span></span> <span data-ttu-id="97c7e-169">W przypadku regularnego baz danych hello dodatkowej można puli elastycznej i odwrotnie tak długo, jak są warstwy usług hello hello takie same.</span><span class="sxs-lookup"><span data-stu-id="97c7e-169">For regular databases, hello secondary can be an elastic pool and vice versa as long as hello service tiers are hello same.</span></span> 
* <span data-ttu-id="97c7e-170">**Poziom wydajności można skonfigurować z dodatkowej bazy danych hello**: pomocniczej bazy danych można tworzyć za pomocą niższego poziomu wydajności niż hello podstawowego.</span><span class="sxs-lookup"><span data-stu-id="97c7e-170">**Configurable performance level of hello secondary database**: A secondary database can be created with lower performance level than hello primary.</span></span> <span data-ttu-id="97c7e-171">Podstawowe i pomocnicze bazy danych są wymagane toohave hello tej samej warstwie usługi.</span><span class="sxs-lookup"><span data-stu-id="97c7e-171">Both primary and secondary databases are required toohave hello same service tier.</span></span> <span data-ttu-id="97c7e-172">Ta opcja nie jest zalecana dla aplikacji z działania zapisu bazy danych wysokiej ponieważ opóźnienie replikacji zwiększona hello zwiększa hello ryzyko utraty danych znacznej po przejściu w tryb failover.</span><span class="sxs-lookup"><span data-stu-id="97c7e-172">This option is not recommended for applications with high database write activity because hello increased replication lag increases hello risk of substantial data loss after a failover.</span></span> <span data-ttu-id="97c7e-173">Ponadto po pogarsza wydajność aplikacji hello trybu failover do hello nowego podstawowego jest uaktualniony tooa większą wydajność poziomu.</span><span class="sxs-lookup"><span data-stu-id="97c7e-173">In addition, after failover hello application’s performance is impacted until hello new primary is upgraded tooa higher performance level.</span></span> <span data-ttu-id="97c7e-174">Witaj dziennika we/wy wartość procentową wykresu w portalu Azure udostępnia tooestimate dobrze hello poziomu wydajności minimalnej hello dodatkowej, która jest wymagana toosustain hello replikacji obciążenia.</span><span class="sxs-lookup"><span data-stu-id="97c7e-174">hello log IO percentage chart on Azure portal provides a good way tooestimate hello minimal performance level of hello secondary that is required toosustain hello replication load.</span></span> <span data-ttu-id="97c7e-175">Na przykład, jeśli P6 jest podstawową bazą danych (1000 DTU) i jego dziennikiem procent we/wy jest dodatkowej hello 50% wymaga co najmniej toobe P4 (500 DTU).</span><span class="sxs-lookup"><span data-stu-id="97c7e-175">For example, if your Primary database is P6 (1000 DTU) and its log IO percent is 50% hello secondary needs toobe at least P4 (500 DTU).</span></span> <span data-ttu-id="97c7e-176">Można również pobrać hello dziennika we/wy danych przy użyciu [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) lub [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) bazy danych widoków.</span><span class="sxs-lookup"><span data-stu-id="97c7e-176">You can also retrieve hello log IO data using [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) or [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) database views.</span></span>  <span data-ttu-id="97c7e-177">Aby uzyskać więcej informacji dotyczących poziomów wydajności baz danych SQL hello, zobacz [opcje bazy danych SQL i wydajność](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="97c7e-177">For more information on hello SQL Database performance levels, see [SQL Database options and performance](sql-database-service-tiers.md).</span></span> 
* <span data-ttu-id="97c7e-178">**Kontrolowane przez użytkownika trybu failover i powrotu po awarii**: pomocniczej bazy danych w dowolnym momencie w aplikacji hello lub hello użytkownika może być jawnie wyłączone toohello podstawową rolą.</span><span class="sxs-lookup"><span data-stu-id="97c7e-178">**User-controlled failover and failback**: A secondary database can explicitly be switched toohello primary role at any time by hello application or hello user.</span></span> <span data-ttu-id="97c7e-179">Podczas hello rzeczywista awaria "nieplanowane" opcja powinna być używana, która wspiera natychmiast podstawowego hello toobe dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-179">During a real outage hello “unplanned” option should be used, which immediately promotes a secondary toobe hello primary.</span></span> <span data-ttu-id="97c7e-180">Gdy podstawowego nie powiodło się hello odzyskuje i jest dostępny ponownie, hello system automatycznie hello znaczniki odzyskać głównej jako dodatkowej i przełączyć go instalując nową podstawową hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-180">When hello failed primary recovers and is available again, hello system automatically marks hello recovered primary as a secondary and bring it up-to-date with hello new primary.</span></span> <span data-ttu-id="97c7e-181">Powodu toohello asynchroniczne rodzaj replikacji niewielką ilość danych mogą zostać utracone podczas niezaplanowanych operacji Failover Jeśli podstawowy ulegnie awarii, przed rozpoczęciem replikacji hello najnowszych zmian toohello dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-181">Due toohello asynchronous nature of replication, a small amount of data can be lost during unplanned failovers if a primary fails before it replicates hello most recent changes toohello secondary.</span></span> <span data-ttu-id="97c7e-182">W przypadku awarii podstawowego przy użyciu wielu pomocnicze bazy danych za pośrednictwem systemu hello automatycznie skonfiguruje hello relacji replikacji i hello łącza nowo pozostałych toohello pomocniczych podwyższenia poziomu podstawowego bez interwencji użytkownika.</span><span class="sxs-lookup"><span data-stu-id="97c7e-182">When a primary with multiple secondaries fails over, hello system automatically reconfigures hello replication relationships and links hello remaining secondaries toohello newly promoted primary without requiring any user intervention.</span></span> <span data-ttu-id="97c7e-183">Po awarii hello, który spowodował hello pracy awaryjnej jest niewielkie, może być regionu podstawowego toohello aplikacji hello tooreturn pożądane.</span><span class="sxs-lookup"><span data-stu-id="97c7e-183">After hello outage that caused hello failover is mitigated, it may be desirable tooreturn hello application toohello primary region.</span></span> <span data-ttu-id="97c7e-184">toodo, że polecenie pracy awaryjnej hello powinna być wywoływana z hello "planowane" opcji.</span><span class="sxs-lookup"><span data-stu-id="97c7e-184">toodo that, hello failover command should be invoked with hello “planned” option.</span></span> 
* <span data-ttu-id="97c7e-185">**Synchronizacja poświadczeń i jego reguły zapory**: Firma Microsoft zaleca używanie [bazy danych reguły zapory](sql-database-firewall-configure.md) dla baz danych z replikacją geograficzną, reguły te mogą być replikowane z tooensure bazy danych hello wszystkie pomocnicze bazy danych ma Witaj tej samej reguły zapory jako głównej hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-185">**Keeping credentials and firewall rules in sync**: We recommend using [database firewall rules](sql-database-firewall-configure.md) for geo-replicated databases so these rules can be replicated with hello database tooensure all secondary databases have hello same firewall rules as hello primary.</span></span> <span data-ttu-id="97c7e-186">Takie podejście eliminuje potrzebę hello klientów toomanually konfigurowania i konserwacji reguły zapory na serwerach hostujących zarówno hello podstawowych i pomocniczych baz danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-186">This approach eliminates hello need for customers toomanually configure and maintain firewall rules on servers hosting both hello primary and secondary databases.</span></span> <span data-ttu-id="97c7e-187">Podobnie za pomocą [zawarte bazy danych użytkowników](sql-database-manage-logins.md) danych dostęp zapewnia podstawowe i pomocnicze bazy danych zawsze hello poświadczenia tego samego użytkownika, dlatego podczas pracy w trybie failover nie przerwom termin toomismatches z nazwy logowania i hasła.</span><span class="sxs-lookup"><span data-stu-id="97c7e-187">Similarly, using [contained database users](sql-database-manage-logins.md) for data access ensures both primary and secondary databases always have hello same user credentials so during a failover, there is no disruptions due toomismatches with logins and passwords.</span></span> <span data-ttu-id="97c7e-188">O dodanie hello [usługi Azure Active Directory](../active-directory/active-directory-whatis.md)wyeliminowanie hello należy całkowicie zarządzania poświadczeniami w bazach danych i klientów można zarządzać użytkownika tooboth podstawowych i pomocniczych baz danych programu access.</span><span class="sxs-lookup"><span data-stu-id="97c7e-188">With hello addition of [Azure Active Directory](../active-directory/active-directory-whatis.md), customers can manage user access tooboth primary and secondary databases and eliminating hello need for managing credentials in databases altogether.</span></span>

## <a name="auto-failover-group-capabilities"></a><span data-ttu-id="97c7e-189">Funkcje grupy pracy awaryjnej automatycznie</span><span class="sxs-lookup"><span data-stu-id="97c7e-189">Auto-failover group capabilities</span></span>

<span data-ttu-id="97c7e-190">Funkcja grup pracy awaryjnej automatycznie zapewnia zaawansowane Abstrakcja aktywna replikacja geograficzna dzięki obsłudze replikacji poziomu grupy i automatycznej pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-190">Auto-failover groups feature provides a powerful abstraction of active geo-replication by supporting group level replication and automatic failover.</span></span> <span data-ttu-id="97c7e-191">Ponadto spowoduje usunięcie parametrów połączenia SQL hello hello konieczność toochange po pracy awaryjnej zapewniając punkty końcowe dodatkowe odbiornika hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-191">In addition, it removes hello necessity toochange hello SQL connection string after failover by providing hello additional listener end-points.</span></span> 

* <span data-ttu-id="97c7e-192">**Praca awaryjna grupy**: można utworzyć jedną lub wiele grup trybu failover między dwoma serwerami w różnych regionach (podstawowych i pomocniczych serwerów).</span><span class="sxs-lookup"><span data-stu-id="97c7e-192">**Failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="97c7e-193">Każda grupa może zawierać co najmniej jednej bazy danych, które są odzyskiwane jako jednostki, w przypadku, gdy wszystkie lub niektóre bazy danych podstawowego stają się niedostępny z powodu awarii tooan w regionie podstawowym hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-193">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span>  
* <span data-ttu-id="97c7e-194">**Podstawowy serwer**: serwera obsługującego hello głównej bazy danych w hello trybu failover grupie.</span><span class="sxs-lookup"><span data-stu-id="97c7e-194">**Primary server**: A server that hosts hello primary databases in hello failover group.</span></span>
* <span data-ttu-id="97c7e-195">**Serwer pomocniczy**: serwera obsługującego hello dodatkowej bazy danych w grupie pracy awaryjnej hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-195">**Secondary server**: A server that hosts hello secondary databases in hello failover group.</span></span> <span data-ttu-id="97c7e-196">serwer pomocniczy Hello nie może być w hello tego samego regionu powitania serwera podstawowego.</span><span class="sxs-lookup"><span data-stu-id="97c7e-196">hello secondary server cannot be in hello same region as hello primary server.</span></span>
* <span data-ttu-id="97c7e-197">**Dodawanie grupy toofailover baz danych**: można umieścić szereg baz danych w ramach serwera lub w ramach elastyczna pula do hello same grupy pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-197">**Adding databases toofailover group**: You can put several databases within a server or within an elastic pool into hello same failover group.</span></span> <span data-ttu-id="97c7e-198">Jeśli dodasz grupie toohello autonomicznej bazy danych, automatycznie tworzy pomocniczej bazy danych przy użyciu hello tej samej wersji i poziom wydajności.</span><span class="sxs-lookup"><span data-stu-id="97c7e-198">If you add a standalone database toohello group, it automatically creates a secondary database using hello same edition and performance level.</span></span> <span data-ttu-id="97c7e-199">W przypadku hello podstawowej bazy danych w puli elastycznej, dodatkowej hello jest tworzony automatycznie w puli elastycznej hello z hello takie same nazwy.</span><span class="sxs-lookup"><span data-stu-id="97c7e-199">If hello primary database is in an elastic pool, hello secondary is automatically created in hello elastic pool with hello same name.</span></span> <span data-ttu-id="97c7e-200">Po dodaniu bazy danych, która ma już pomocniczej bazy danych serwera pomocniczego hello, że replikacja geograficzna jest dziedziczona przez hello grupy.</span><span class="sxs-lookup"><span data-stu-id="97c7e-200">If you add a database that already has a secondary database in hello secondary server, that geo-replication is inherited by hello group.</span></span>

   > [!NOTE]
   > <span data-ttu-id="97c7e-201">Dodając bazy danych, która ma już pomocniczej bazy danych na serwerze, który nie jest częścią grupy pracy awaryjnej hello w nowym serwerem pomocniczym jest tworzony w powitania serwera pomocniczego.</span><span class="sxs-lookup"><span data-stu-id="97c7e-201">When adding a database that already has a secondary database in a server that is not part of hello failover group, a new secondary is created in hello secondary server.</span></span> 
   >

* <span data-ttu-id="97c7e-202">**Odbiornik odczytu i zapisu grupy pracy awaryjnej**: Rekord DNS CNAME jest sformatowany jako  **&lt;nazwę grupy pracy awaryjnej&gt;. database.windows.net** wskazującego toohello bieżący adres URL serwera podstawowego.</span><span class="sxs-lookup"><span data-stu-id="97c7e-202">**Failover group read-write listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.database.windows.net** that points toohello current primary server URL.</span></span> <span data-ttu-id="97c7e-203">Umożliwia aplikacji SQL odczytu i zapisu hello tootransparently ponownie toohello podstawowej bazy danych zmiany podstawowego powitania po pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-203">It allows hello read-write SQL applications tootransparently reconnect toohello primary database when hello primary changes after failover.</span></span> 
* <span data-ttu-id="97c7e-204">**Praca awaryjna grupy tylko do odczytu odbiornika**: Rekord DNS CNAME jest sformatowany jako  **&lt;nazwę grupy pracy awaryjnej&gt;. secondary.database.windows.net** wskazującego adres URL serwera pomocniczego toohello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-204">**Failover group read-only listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.secondary.database.windows.net** that points toohello secondary server’s URL.</span></span> <span data-ttu-id="97c7e-205">Umożliwia aplikacji SQL tylko do odczytu, Połącz tootransparently hello pomocniczej bazy danych toohello przy użyciu hello określone reguły równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="97c7e-205">It allows hello read-only SQL applications tootransparently connect toohello secondary database using hello specified load-balancing rules.</span></span> <span data-ttu-id="97c7e-206">Opcjonalnie można określić, jeśli chcesz hello tylko do odczytu toobe ruchu automatycznie przekierowane toohello podstawowego serwera podczas hello serwer pomocniczy jest niedostępny.</span><span class="sxs-lookup"><span data-stu-id="97c7e-206">Optionally you can specify if you want hello read-only traffic toobe automatically re-directed toohello primary server when hello secondary server is not available.</span></span>
* <span data-ttu-id="97c7e-207">**Zasady automatycznej pracy awaryjnej**: Domyślnie grupa pracy awaryjnej hello jest skonfigurowana przy użyciu zasad automatycznej pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-207">**Automatic failover policy**: By default, hello failover group is configured with an automatic failover policy.</span></span> <span data-ttu-id="97c7e-208">Hello system wyzwala trybu failover, jak zostaje wykryta awaria hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-208">hello system triggers failover as soon as hello failure is detected.</span></span> <span data-ttu-id="97c7e-209">Jeśli chcesz, aby przepływ pracy trybu failover hello toocontrol z aplikacji hello, można wyłączyć automatycznej pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-209">If you want toocontrol hello failover workflow from hello application, you can turn off automatic failover.</span></span> 
* <span data-ttu-id="97c7e-210">**Ręcznego przełączania trybu failover**: Inicjuj tryb failover ręcznie w dowolnym momencie, niezależnie od hello konfiguracji automatycznej pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-210">**Manual failover**: You can initiate failover manually at any time regardless of hello automatic failover configuration.</span></span> <span data-ttu-id="97c7e-211">Jeśli zasady automatycznej pracy awaryjnej nie jest skonfigurowany ręcznego przełączania trybu failover jest baz danych wymagane toorecover hello trybu failover grupy.</span><span class="sxs-lookup"><span data-stu-id="97c7e-211">If automatic failover policy is not configured manual failover is required toorecover databases in hello failover group.</span></span> <span data-ttu-id="97c7e-212">Możesz zainicjować wymuszonym lub przyjazną trybu failover (z pełnej synchronizacji danych).</span><span class="sxs-lookup"><span data-stu-id="97c7e-212">You can initiate forced or friendly failover (with full data synchronization).</span></span> <span data-ttu-id="97c7e-213">ostatnie Hello można regionu podstawowego toohello toorelocate używane hello aktywnego serwera.</span><span class="sxs-lookup"><span data-stu-id="97c7e-213">hello latter could be used toorelocate hello active server toohello primary region.</span></span> <span data-ttu-id="97c7e-214">Po zakończeniu pracy awaryjnej hello rekordy DNS są automatycznie aktualizowane tooensure łączności toohello właściwym serwerem.</span><span class="sxs-lookup"><span data-stu-id="97c7e-214">When failover is completed hello DNS records are automatically updated tooensure connectivity toohello correct server.</span></span>
* <span data-ttu-id="97c7e-215">**Okres prolongaty utraty danych**: ponieważ hello podstawowe i pomocnicze bazy danych są synchronizowane przy użyciu replikacji asynchronicznej hello w tryb failover może spowodować utratę danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-215">**Grace period with data loss**: Because hello primary and secondary databases are synchronized using asynchronous replication hello failover may result in data loss.</span></span> <span data-ttu-id="97c7e-216">Można dostosować tooreflect zasady automatycznej pracy awaryjnej hello utraty toodata uszkodzenia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="97c7e-216">You can customize hello automatic failover policy tooreflect your application’s tolerance toodata loss.</span></span> <span data-ttu-id="97c7e-217">Konfigurując **GracePeriodWithDataLossHours**, można kontrolować czas oczekiwania hello systemu przed rozpoczęciem pracy awaryjnej hello, który jest tooresult prawdopodobieństwo utraty danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-217">By configuring **GracePeriodWithDataLossHours**, you can control how long hello system waits before initiating hello failover that is likely tooresult data loss.</span></span> 

   > [!NOTE]
   > <span data-ttu-id="97c7e-218">Jeśli system wykryje, że bazy danych hello w grupie hello są nadal w trybie online (na przykład awaria hello tylko wpływ na płaszczyźnie kontroli usługi hello), natychmiast aktywuje tryb failover hello z pełnej synchronizacji danych (przyjazna trybu failover) niezależnie od wartości hello ustawione przez **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="97c7e-218">When system detects that hello databases in hello group are still online (for example, hello outage only impacted hello service control plane), it immediately activates hello failover with full data synchronization (friendly failover) regardless of hello value set by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="97c7e-219">Takie zachowanie gwarantuje, że istnieje nie powoduje utraty danych podczas odzyskiwania hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-219">This behavior ensures that there is no data loss during hello recovery.</span></span> <span data-ttu-id="97c7e-220">okres prolongaty Hello obowiązuje tylko wtedy, gdy jest to przyjazna trybu failover nie jest możliwe.</span><span class="sxs-lookup"><span data-stu-id="97c7e-220">hello grace period takes effect only when a friendly failover is not possible.</span></span> <span data-ttu-id="97c7e-221">Jeśli awaria hello jest skorygowane przed upływem okresu prolongaty hello, hello trybu failover nie został aktywowany.</span><span class="sxs-lookup"><span data-stu-id="97c7e-221">If hello outage is mitigated before hello grace period expires, hello failover is not activated.</span></span>
   >

* <span data-ttu-id="97c7e-222">**Wiele grup pracy awaryjnej**: można skonfigurować wiele grup pracy awaryjnej dla hello samej pary serwerów toocontrol hello skali przechodzenia w tryb failover.</span><span class="sxs-lookup"><span data-stu-id="97c7e-222">**Multiple failover groups**: You can configure multiple failover groups for hello same pair of servers toocontrol hello scale of failovers.</span></span> <span data-ttu-id="97c7e-223">Każda grupa nie powiedzie się za pośrednictwem niezależnie.</span><span class="sxs-lookup"><span data-stu-id="97c7e-223">Each group fails over independently.</span></span> <span data-ttu-id="97c7e-224">Jeśli aplikacja wielodostępne używa pule elastyczne, można użyć tej możliwości toomix podstawowych i pomocniczych baz danych w każdej puli.</span><span class="sxs-lookup"><span data-stu-id="97c7e-224">If your multi-tenant application uses elastic pools, you can use this capability toomix primary and secondary databases in each pool.</span></span> <span data-ttu-id="97c7e-225">W ten sposób można zmniejszyć wpływ awarii tooonly hello połowy hello dzierżaw.</span><span class="sxs-lookup"><span data-stu-id="97c7e-225">This way you can reduce hello impact of an outage tooonly half of hello tenants.</span></span>

## <a name="best-practices-of-building-highly-available-service"></a><span data-ttu-id="97c7e-226">Najlepsze rozwiązania w zakresie tworzenia usługi wysokiej dostępności</span><span class="sxs-lookup"><span data-stu-id="97c7e-226">Best practices of building highly available service</span></span>

<span data-ttu-id="97c7e-227">toobuild wysokiej dostępności usługi, który używa klientom Witaj bazy danych Azure SQL należy przestrzegać następujących wytycznych:</span><span class="sxs-lookup"><span data-stu-id="97c7e-227">toobuild a highly available service that uses Azure SQL database hello customers should follow these guidelines:</span></span>
- <span data-ttu-id="97c7e-228">**Użyj grupy trybu failover**: można utworzyć jedną lub wiele grup trybu failover między dwoma serwerami w różnych regionach (podstawowych i pomocniczych serwerów).</span><span class="sxs-lookup"><span data-stu-id="97c7e-228">**Use failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="97c7e-229">Każda grupa może zawierać co najmniej jednej bazy danych, które są odzyskiwane jako jednostki, w przypadku, gdy wszystkie lub niektóre bazy danych podstawowego stają się niedostępny z powodu awarii tooan w regionie podstawowym hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-229">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span> <span data-ttu-id="97c7e-230">grupy pracy awaryjnej Hello tworzy geograficznie pomocnicze bazy danych z hello sama usługa cel jako hello podstawowego.</span><span class="sxs-lookup"><span data-stu-id="97c7e-230">hello failover group creates geo-secondary database with hello same service objective as hello primary.</span></span> <span data-ttu-id="97c7e-231">Podczas dodawania istniejącego — replikacja geograficzna relacji toohello trybu failover grupy upewnij się, że hello geograficznie / pomocniczych skonfigurowano hello sama usługa cel poziomu jako hello podstawowego.</span><span class="sxs-lookup"><span data-stu-id="97c7e-231">If you add an existing geo-replication relationship toohello failover group make sure hello geo-secondary is configured with hello same service level objective as hello primary.</span></span>
- <span data-ttu-id="97c7e-232">**Użyj odbiornika odczytu i zapisu dla obciążenia OLTP**: podczas wykonywania OLTP, użyj operacji  **&lt;nazwę grupy pracy awaryjnej&gt;. database.windows.net** jako adres URL serwera hello i hello połączenia będą automatycznie ukierunkowanej toohello podstawowej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-232">**Use read-write listener for OLTP workload**: When performing OLTP operations use **&lt;failover-group-name&gt;.database.windows.net** as hello server URL and hello connections will be automatically directed toohello primary.</span></span> <span data-ttu-id="97c7e-233">Ten adres URL nie zmieni się po hello w tryb failover.</span><span class="sxs-lookup"><span data-stu-id="97c7e-233">This URL will not change after hello failover.</span></span>  
<span data-ttu-id="97c7e-234">Tryb failover hello Uwaga polega na aktualizowanie powitalne rekordu DNS tak powitania klienta połączenia będą przekierowane toohello nowego podstawowego tylko po powitania klienta DNS odświeżania pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-234">Note hello failover involves updating hello DNS record so hello client connections will be redirected toohello new primary only after hello client DNS cache is refreshed.</span></span>
- <span data-ttu-id="97c7e-235">**Użyj tylko do odczytu odbiornika dla obciążenia tylko do odczytu**: jeśli obciążenie logicznie odizolowane tylko do odczytu, które jest nieaktualności toocertain na uszkodzenia danych, można użyć hello dodatkowej bazy danych w aplikacji hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-235">**Use read-only listener for read-only workload**: If you have a logically isolated read-only workload that is tolerant toocertain staleness of data, you can use hello secondary database in hello application.</span></span> <span data-ttu-id="97c7e-236">Dla sesji tylko do odczytu  **&lt;nazwę grupy pracy awaryjnej&gt;. secondary.database.windows.net** jako adres URL serwera hello i hello połączenia będą automatycznie ukierunkowanej toohello dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-236">For read-only sessions use **&lt;failover-group-name&gt;.secondary.database.windows.net** as hello server URL and hello connection will be automatically directed toohello secondary.</span></span> <span data-ttu-id="97c7e-237">Zalecane jest również, wskazanej w parametrach połączenia do odczytu próba przy użyciu **ApplicationIntent = ReadOnly**.</span><span class="sxs-lookup"><span data-stu-id="97c7e-237">It is also recommended that you indicate in connection string read intent by using **ApplicationIntent=ReadOnly**.</span></span> 
- <span data-ttu-id="97c7e-238">**Przygotowanie do pogorszenia się wydajności**: decyzja pracy awaryjnej programu SQL jest niezależna od reszty hello aplikacji hello lub innych usług używanych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-238">**Be prepared for perf degradation**: SQL failover decision is independent from hello rest of hello application or other services used.</span></span> <span data-ttu-id="97c7e-239">Aplikacja Hello może mieć wartość "mixed" z niektórymi składnikami w jeden region, a niektóre w innym.</span><span class="sxs-lookup"><span data-stu-id="97c7e-239">hello application may be “mixed” with some components in one region and some in another.</span></span> <span data-ttu-id="97c7e-240">tooavoid hello degradacji, upewnij się, wdrożenie nadmiarowego aplikacji hello w regionie hello odzyskiwania po awarii i postępuj zgodnie z wytycznymi hello w tym artykule.</span><span class="sxs-lookup"><span data-stu-id="97c7e-240">tooavoid hello degradation, ensure hello redundant application deployment in hello DR region and follow hello guidelines in this article.</span></span>  
<span data-ttu-id="97c7e-241">Aplikacja hello Uwaga w regionie DR hello nie ma toouse ciąg innego połączenia.</span><span class="sxs-lookup"><span data-stu-id="97c7e-241">Note hello application in hello DR region does not have toouse a different connection string.</span></span>  
- <span data-ttu-id="97c7e-242">**Przygotowanie do utraty danych**: wykrycie awarii SQL automatyczne wyzwolenie pracy awaryjnej odczytu i zapisu, jeśli najlepiej naszych wiedzy jest zerowy toohello utraty danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-242">**Prepare for data loss**: If an outage is detected, SQL automatically triggers read-write failover if there is zero data loss toohello best of our knowledge.</span></span> <span data-ttu-id="97c7e-243">W przeciwnym razie oczekuje na powitania okres określony przez **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="97c7e-243">Otherwise, it waits for hello period you specified by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="97c7e-244">Jeśli określono **GracePeriodWithDataLossHours**, można przygotować do utraty danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-244">If you specified **GracePeriodWithDataLossHours**, be prepared for data loss.</span></span> <span data-ttu-id="97c7e-245">Ogólnie rzecz biorąc podczas awarii, Azure objawach dostępności.</span><span class="sxs-lookup"><span data-stu-id="97c7e-245">In general, during outages, Azure favors availability.</span></span> <span data-ttu-id="97c7e-246">Jeśli niedopuszczalna utraty danych, upewnij się, że tooset **GracePeriodWithDataLossHours** wystarczająco dużą liczbę tooa, takich jak 24 godziny.</span><span class="sxs-lookup"><span data-stu-id="97c7e-246">If you cannot afford data loss, make sure tooset **GracePeriodWithDataLossHours** tooa sufficiently large number, such as 24 hours.</span></span> 


## <a name="upgrading-or-downgrading-a-primary-database"></a><span data-ttu-id="97c7e-247">Uaktualnianie lub zmiany na starszą wersję podstawowej bazy danych</span><span class="sxs-lookup"><span data-stu-id="97c7e-247">Upgrading or downgrading a primary database</span></span>
<span data-ttu-id="97c7e-248">Możesz uaktualnić lub starszą wersję poziomu wydajności różnych tooa podstawowej bazy danych (w ramach hello sam warstwę usługi) bez odłączania wszystkie pomocnicze bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-248">You can upgrade or downgrade a primary database tooa different performance level (within hello same service tier) without disconnecting any secondary databases.</span></span> <span data-ttu-id="97c7e-249">Podczas uaktualniania, zalecamy najpierw uaktualnić hello dodatkowej bazy danych, a następnie uaktualnić podstawowy hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-249">When upgrading, we recommend that you upgrade hello secondary database first, and then upgrade hello primary.</span></span> <span data-ttu-id="97c7e-250">Podczas zmiany na starszą wersję, odwrócić kolejność hello: najpierw obniżyć hello podstawowej i starszą wersję hello pomocniczej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-250">When downgrading, reverse hello order: downgrade hello primary first, and then downgrade hello secondary.</span></span> <span data-ttu-id="97c7e-251">Po uaktualnieniu lub starszą wersję warstwy innej usługi tooa bazy danych hello jest wymuszana tego zalecenia.</span><span class="sxs-lookup"><span data-stu-id="97c7e-251">When you upgrade or downgrade hello database tooa different service tier this recommendation is enforced.</span></span> 

> [!NOTE]
> <span data-ttu-id="97c7e-252">Jeśli zostały utworzone jako część konfiguracji grupy pracy awaryjnej hello dodatkowej bazy danych nie jest zalecane toodowngrade hello dodatkowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-252">If you created secondary database as part of hello failover group configuration it is not recommended toodowngrade hello secondary database.</span></span> <span data-ttu-id="97c7e-253">Jest to tooensure warstwę danych ma wystarczającą pojemność tooprocess Twojego zwykłe obciążenie po aktywowaniu trybu failover.</span><span class="sxs-lookup"><span data-stu-id="97c7e-253">This is tooensure your data tier has sufficient capacity tooprocess your regular workload after failover is activated.</span></span> 
>

## <a name="preventing-hello-loss-of-critical-data"></a><span data-ttu-id="97c7e-254">Zapobieganie hello utratę krytycznych danych</span><span class="sxs-lookup"><span data-stu-id="97c7e-254">Preventing hello loss of critical data</span></span>
<span data-ttu-id="97c7e-255">Powodu toohello duże opóźnienie sieci rozległej ciągła kopia używa mechanizmu replikacji asynchronicznej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-255">Due toohello high latency of wide area networks, continuous copy uses an asynchronous replication mechanism.</span></span> <span data-ttu-id="97c7e-256">Asynchroniczną replikację powoduje utratę danych nieuniknione Jeśli wystąpi błąd.</span><span class="sxs-lookup"><span data-stu-id="97c7e-256">Asynchronous replication makes some data loss unavoidable if a failure occurs.</span></span> <span data-ttu-id="97c7e-257">Jednak niektóre aplikacje mogą wymagać bez utraty danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-257">However, some applications may require no data loss.</span></span> <span data-ttu-id="97c7e-258">tooprotect te aktualizacje krytyczne, Deweloper aplikacji może wywołać hello [operacja sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) procedury systemu natychmiast po zatwierdzania transakcji hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-258">tooprotect these critical updates, an application developer can call hello [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) system procedure immediately after committing hello transaction.</span></span> <span data-ttu-id="97c7e-259">Wywoływanie **operacja sp_wait_for_database_copy_sync** hello bloki wywoływania wątku czasu ostatniej zatwierdzić transakcji hello przesyłane toohello dodatkowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-259">Calling **sp_wait_for_database_copy_sync** blocks hello calling thread until hello last committed transaction has been transmitted toohello secondary database.</span></span> <span data-ttu-id="97c7e-260">Jednak nie oczekiwania dla hello przekazane transakcje toobe odtwarzany i zatwierdzona na powitania dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-260">However, it does not wait for hello transmitted transactions toobe replayed and committed on hello secondary.</span></span> <span data-ttu-id="97c7e-261">**Operacja sp_wait_for_database_copy_sync** tooa zakresie określonych ciągła kopia łącza.</span><span class="sxs-lookup"><span data-stu-id="97c7e-261">**sp_wait_for_database_copy_sync** is scoped tooa specific continuous copy link.</span></span> <span data-ttu-id="97c7e-262">Każdy użytkownik z hello połączenia prawa toohello podstawowej bazy danych można wywołać tej procedury.</span><span class="sxs-lookup"><span data-stu-id="97c7e-262">Any user with hello connection rights toohello primary database can call this procedure.</span></span>

> [!NOTE]
> <span data-ttu-id="97c7e-263">**Operacja sp_wait_for_database_copy_sync** przed utratą danych po pracy awaryjnej, ale nie zagwarantuje pełną synchronizację, aby uzyskać dostęp do odczytu.</span><span class="sxs-lookup"><span data-stu-id="97c7e-263">**sp_wait_for_database_copy_sync** will prevent data loss after failover, but it will not guarantee full synchronization for read access.</span></span> <span data-ttu-id="97c7e-264">Witaj opóźnienia spowodowane przez **operacja sp_wait_for_database_copy_sync** wywołania procedury może być znaczny i zależy od rozmiaru hello hello dziennika transakcji w czasie hello hello wywołania.</span><span class="sxs-lookup"><span data-stu-id="97c7e-264">hello delay caused by a **sp_wait_for_database_copy_sync** procedure call can be significant and depends on hello size of hello transaction log at hello time of hello call.</span></span> 
> 

## <a name="programmatically-managing-failover-groups-and-active-geo-replication"></a><span data-ttu-id="97c7e-265">Programowe zarządzanie grupami trybu failover i aktywna replikacja geograficzna</span><span class="sxs-lookup"><span data-stu-id="97c7e-265">Programmatically managing failover groups and active geo-replication</span></span>
<span data-ttu-id="97c7e-266">Zgodnie z opisem wcześniej, pracy awaryjnej automatycznie grupy (w — wersja zapoznawcza) i aktywne — replikacja geograficzna może być także zarządzane programowo przy użyciu programu Azure PowerShell i hello interfejsu API REST.</span><span class="sxs-lookup"><span data-stu-id="97c7e-266">As discussed previously, auto-failover groups (in-preview) and active geo-replication can also be managed programmatically using Azure PowerShell and hello REST API.</span></span> <span data-ttu-id="97c7e-267">następujące tabele Hello opisano hello zestaw poleceń, które są dostępne.</span><span class="sxs-lookup"><span data-stu-id="97c7e-267">hello following tables describe hello set of commands available.</span></span>

<span data-ttu-id="97c7e-268">**Interfejs API Menedżera zasobów Azure i zabezpieczenia oparte na rolach**: aktywna replikacja geograficzna zawiera zestaw interfejsów API usługi Azure Resource Manager do zarządzania tym hello [interfejsu API REST bazy danych SQL Azure](https://docs.microsoft.com/rest/api/sql/) i [Azure Polecenia cmdlet programu PowerShell](https://docs.microsoft.com/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="97c7e-268">**Azure Resource Manager API and role-based security**: Active geo-replication includes a set of Azure Resource Manager APIs for management, including hello [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) and [Azure PowerShell cmdlets](https://docs.microsoft.com/powershell/azure/overview).</span></span> <span data-ttu-id="97c7e-269">Te interfejsy API wymagają hello korzystania z grup zasobów i obsługują zabezpieczeń opartych na rolach (RBAC).</span><span class="sxs-lookup"><span data-stu-id="97c7e-269">These APIs require hello use of resource groups and support role-based security (RBAC).</span></span> <span data-ttu-id="97c7e-270">Aby uzyskać więcej informacji dotyczących sposobu tooimplement dostęp do ról, zobacz [kontroli dostępu](../active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="97c7e-270">For more information on how tooimplement access roles, see [Azure Role-Based Access Control](../active-directory/role-based-access-control-what-is.md).</span></span>

> [!NOTE]
> <span data-ttu-id="97c7e-271">Wiele nowych funkcji aktywna replikacja geograficzna są obsługiwane tylko przy użyciu [usługi Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) na podstawie [interfejsu API REST SQL Azure](https://msdn.microsoft.com/library/azure/mt163571.aspx) i [poleceń cmdlet programu PowerShell bazy danych SQL Azure](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span><span class="sxs-lookup"><span data-stu-id="97c7e-271">Many new features of active geo-replication are only supported using [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) based [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) and [Azure SQL Database PowerShell cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span></span> <span data-ttu-id="97c7e-272">Witaj [(klasyczne) interfejsu API REST](https://msdn.microsoft.com/library/azure/dn505719.aspx) i [bazy danych SQL Azure (klasyczne) polecenia cmdlet](https://msdn.microsoft.com/library/azure/dn546723.aspx) są obsługiwane przy użyciu hello zaleca się API usługi Azure Resource Manager na podstawie zgodności z poprzednimi wersjami.</span><span class="sxs-lookup"><span data-stu-id="97c7e-272">hello [(classic) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) and [Azure SQL Database (classic) cmdlets](https://msdn.microsoft.com/library/azure/dn546723.aspx) are supported for backward compatibility so using hello Azure Resource Manager-based APIs are recommended.</span></span> 
> 

## <a name="manage-sql-database-failover-using-using-transact-sql"></a><span data-ttu-id="97c7e-273">Zarządzanie SQL bazy danych trybu failover przy użyciu języka Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="97c7e-273">Manage SQL database failover using using Transact-SQL</span></span>

| <span data-ttu-id="97c7e-274">Polecenie</span><span class="sxs-lookup"><span data-stu-id="97c7e-274">Command</span></span> | <span data-ttu-id="97c7e-275">Opis</span><span class="sxs-lookup"><span data-stu-id="97c7e-275">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="97c7e-276">ALTER DATABASE (baza danych Azure SQL)</span><span class="sxs-lookup"><span data-stu-id="97c7e-276">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="97c7e-277">Użyj istniejącej bazy danych Dodaj serwer POMOCNICZY ON argument toocreate pomocniczej bazy danych i rozpoczyna się replikacja danych</span><span class="sxs-lookup"><span data-stu-id="97c7e-277">Use ADD SECONDARY ON SERVER argument toocreate a secondary database for an existing database and starts data replication</span></span> |
| [<span data-ttu-id="97c7e-278">ALTER DATABASE (baza danych Azure SQL)</span><span class="sxs-lookup"><span data-stu-id="97c7e-278">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="97c7e-279">Użyj trybu FAILOVER lub FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch awarię podstawowej tooinitiate toobe dodatkowej bazy danych</span><span class="sxs-lookup"><span data-stu-id="97c7e-279">Use FAILOVER or FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch a secondary database toobe primary tooinitiate failover</span></span> |
| [<span data-ttu-id="97c7e-280">ALTER DATABASE (baza danych Azure SQL)</span><span class="sxs-lookup"><span data-stu-id="97c7e-280">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="97c7e-281">Użyj Usuń serwer POMOCNICZY ON tooterminate replikacji danych między bazą danych SQL i hello określony dodatkowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-281">Use REMOVE SECONDARY ON SERVER tooterminate a data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="97c7e-282">sys.geo_replication_links (baza danych SQL Azure)</span><span class="sxs-lookup"><span data-stu-id="97c7e-282">sys.geo_replication_links (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575501.aspx) |<span data-ttu-id="97c7e-283">Zwraca informacje o wszystkich istniejących łączy replikacji dla każdej bazy danych na serwerze logicznym hello bazy danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="97c7e-283">Returns information about all existing replication links for each database on hello Azure SQL Database logical server.</span></span> |
| [<span data-ttu-id="97c7e-284">sys.dm_geo_replication_link_status (baza danych SQL Azure)</span><span class="sxs-lookup"><span data-stu-id="97c7e-284">sys.dm_geo_replication_link_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575504.aspx) |<span data-ttu-id="97c7e-285">Pobiera hello czas ostatniej replikacji, ostatni opóźnienie replikacji i inne informacje o łącza replikacji hello określonej bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="97c7e-285">Gets hello last replication time, last replication lag, and other information about hello replication link for a given SQL database.</span></span> |
| [<span data-ttu-id="97c7e-286">sys.dm_operation_status (baza danych SQL Azure)</span><span class="sxs-lookup"><span data-stu-id="97c7e-286">sys.dm_operation_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn270022.aspx) |<span data-ttu-id="97c7e-287">Wyświetla stan powitania dla wszystkich operacji bazy danych, takich jak stan hello hello łączy replikacji.</span><span class="sxs-lookup"><span data-stu-id="97c7e-287">Shows hello status for all database operations including hello status of hello replication links.</span></span> |
| [<span data-ttu-id="97c7e-288">Operacja sp_wait_for_database_copy_sync (baza danych SQL Azure)</span><span class="sxs-lookup"><span data-stu-id="97c7e-288">sp_wait_for_database_copy_sync (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn467644.aspx) |<span data-ttu-id="97c7e-289">powoduje toowait aplikacji hello, dopóki wszystkie zatwierdzone transakcje są replikowane i potwierdzone przez hello aktywnej pomocniczej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-289">causes hello application toowait until all committed transactions are replicated and acknowledged by hello active secondary database.</span></span> |
|  | |

## <a name="manage-sql-database-failover-using-using-powershell"></a><span data-ttu-id="97c7e-290">Zarządzanie SQL bazy danych trybu failover przy użyciu programu PowerShell</span><span class="sxs-lookup"><span data-stu-id="97c7e-290">Manage SQL database failover using using PowerShell</span></span>

| <span data-ttu-id="97c7e-291">Polecenie cmdlet</span><span class="sxs-lookup"><span data-stu-id="97c7e-291">Cmdlet</span></span> | <span data-ttu-id="97c7e-292">Opis</span><span class="sxs-lookup"><span data-stu-id="97c7e-292">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="97c7e-293">Get-AzureRmSqlDatabase</span><span class="sxs-lookup"><span data-stu-id="97c7e-293">Get-AzureRmSqlDatabase</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabase) |<span data-ttu-id="97c7e-294">Pobiera jeden lub więcej baz danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-294">Gets one or more databases.</span></span> |
| [<span data-ttu-id="97c7e-295">Nowe AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="97c7e-295">New-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/new-azurermsqldatabasesecondary) |<span data-ttu-id="97c7e-296">Tworzy pomocniczej bazy danych dla istniejącej bazy danych i rozpoczyna się replikacja danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-296">Creates a secondary database for an existing database and starts data replication.</span></span> |
| [<span data-ttu-id="97c7e-297">Zestaw AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="97c7e-297">Set-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasesecondary) |<span data-ttu-id="97c7e-298">Zmienia awarię podstawowej tooinitiate toobe dodatkowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-298">Switches a secondary database toobe primary tooinitiate failover.</span></span> |
| [<span data-ttu-id="97c7e-299">Usuń AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="97c7e-299">Remove-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasesecondary) |<span data-ttu-id="97c7e-300">Kończy replikacji danych między bazą danych SQL i hello określonego dodatkowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-300">Terminates data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="97c7e-301">Get-AzureRmSqlDatabaseReplicationLink</span><span class="sxs-lookup"><span data-stu-id="97c7e-301">Get-AzureRmSqlDatabaseReplicationLink</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasereplicationlink) |<span data-ttu-id="97c7e-302">Pobiera hello — replikacja geograficzna łącza między bazą danych SQL Azure i grupy zasobów lub SQL Server.</span><span class="sxs-lookup"><span data-stu-id="97c7e-302">Gets hello geo-replication links between an Azure SQL Database and a resource group or SQL Server.</span></span> |
| [<span data-ttu-id="97c7e-303">Nowe AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="97c7e-303">New-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="97c7e-304">To polecenie tworzy grupę trybu failover i rejestruje go na serwerach głównych i dodatkowych</span><span class="sxs-lookup"><span data-stu-id="97c7e-304">This command creates a failover group and registers it on both primary and secondary servers</span></span>|
| [<span data-ttu-id="97c7e-305">Usuń AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="97c7e-305">Remove-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasefailovergroup) | <span data-ttu-id="97c7e-306">Usuwa hello trybu failover grupy z serwera hello i wszystkie pomocnicze bazy danych uwzględnione hello grupy</span><span class="sxs-lookup"><span data-stu-id="97c7e-306">Removes hello failover group from hello server and deletes all secondary databases included hello group</span></span> |
| [<span data-ttu-id="97c7e-307">Get-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="97c7e-307">Get-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasefailovergroup) | <span data-ttu-id="97c7e-308">Pobiera konfigurację grupy hello trybu failover</span><span class="sxs-lookup"><span data-stu-id="97c7e-308">Retrieves hello failover group configuration</span></span> |
| [<span data-ttu-id="97c7e-309">Zestaw AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="97c7e-309">Set-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="97c7e-310">Modyfikuje konfigurację hello hello trybu failover grupy</span><span class="sxs-lookup"><span data-stu-id="97c7e-310">Modifies hello configuration of hello failover group</span></span> |
| [<span data-ttu-id="97c7e-311">Przełącznika AzureRMSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="97c7e-311">Switch-AzureRMSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/switch-azurermsqldatabasefailovergroup) | <span data-ttu-id="97c7e-312">Wyzwalacze pracy w trybie failover serwer pomocniczy toohello hello trybu failover grupy</span><span class="sxs-lookup"><span data-stu-id="97c7e-312">Triggers failover of hello failover group toohello secondary server</span></span> |
|  | |

> [!IMPORTANT]
> <span data-ttu-id="97c7e-313">Przykładowe skrypty dla [Konfigurowanie i pracy awaryjnej pojedynczej bazy danych przy użyciu aktywna replikacja geograficzna](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Konfigurowanie i pracy awaryjnej puli bazy danych przy użyciu aktywna replikacja geograficzna](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), i [Konfiguruj i pracy awaryjnej grupę trybu failover dla pojedynczej bazy danych (wersja zapoznawcza)] (skrypty/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span><span class="sxs-lookup"><span data-stu-id="97c7e-313">For sample scripts, see [Configure and failover a single database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configure and failover a pooled database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), and  [Configure and failover a failover group for a single database (preview)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span></span>
>

## <a name="manage-sql-database-failover-using-hello-rest-api"></a><span data-ttu-id="97c7e-314">Zarządzanie za pomocą interfejsu API REST hello bazy danych SQL w tryb failover</span><span class="sxs-lookup"><span data-stu-id="97c7e-314">Manage SQL database failover using hello REST API</span></span>
| <span data-ttu-id="97c7e-315">Interfejs API</span><span class="sxs-lookup"><span data-stu-id="97c7e-315">API</span></span> | <span data-ttu-id="97c7e-316">Opis</span><span class="sxs-lookup"><span data-stu-id="97c7e-316">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="97c7e-317">Tworzenie lub aktualizacja bazy danych (createMode = przywracanie)</span><span class="sxs-lookup"><span data-stu-id="97c7e-317">Create or Update Database (createMode=Restore)</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="97c7e-318">Tworzy, aktualizuje lub przywraca podstawowej lub pomocniczej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-318">Creates, updates, or restores a primary or a secondary database.</span></span> |
| [<span data-ttu-id="97c7e-319">GET, Utwórz lub zaktualizuj stan bazy danych</span><span class="sxs-lookup"><span data-stu-id="97c7e-319">Get Create or Update Database Status</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="97c7e-320">Zwraca stan hello podczas operacji tworzenia.</span><span class="sxs-lookup"><span data-stu-id="97c7e-320">Returns hello status during a create operation.</span></span> |
| [<span data-ttu-id="97c7e-321">Ustaw dodatkowej bazy danych jako podstawowy (planowany tryb Failover)</span><span class="sxs-lookup"><span data-stu-id="97c7e-321">Set Secondary Database as Primary (Planned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinkss#ReplicationLinks_Failover) |<span data-ttu-id="97c7e-322">Ustawia repliki bazy danych jest kluczem podstawowym przez awarii z hello bieżącej podstawowej repliki w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-322">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> |
| [<span data-ttu-id="97c7e-323">Ustaw dodatkowej bazy danych jako podstawowy (nieplanowanego trybu Failover)</span><span class="sxs-lookup"><span data-stu-id="97c7e-323">Set Secondary Database as Primary (Unplanned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinks#ReplicationLinks_FailoverAllowDataLoss) |<span data-ttu-id="97c7e-324">Ustawia repliki bazy danych jest kluczem podstawowym przez awarii z hello bieżącej podstawowej repliki w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-324">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> <span data-ttu-id="97c7e-325">Ta operacja może spowodować utratę danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-325">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="97c7e-326">Pobierz łącza replikacji</span><span class="sxs-lookup"><span data-stu-id="97c7e-326">Get Replication Link</span></span>](/rest/api/sql/replicationlinks/get) |<span data-ttu-id="97c7e-327">Pobiera łącze replikacji określonych określonej bazy danych SQL w partnerstwie — replikacja geograficzna.</span><span class="sxs-lookup"><span data-stu-id="97c7e-327">Gets a specific replication link for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="97c7e-328">Pobiera on hello informacji widocznych w widoku wykazu sys.geo_replication_links hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-328">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="97c7e-329">Łącza replikacji — lista przez bazę danych</span><span class="sxs-lookup"><span data-stu-id="97c7e-329">Replication Links - List By Database</span></span>](/rest/api/sql/replicationlinks/listbydatabase) | <span data-ttu-id="97c7e-330">Pobiera wszystkie linki replikacji określonej bazy danych SQL w partnerstwie — replikacja geograficzna.</span><span class="sxs-lookup"><span data-stu-id="97c7e-330">Gets all replication links for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="97c7e-331">Pobiera on hello informacji widocznych w widoku wykazu sys.geo_replication_links hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-331">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="97c7e-332">Usuń łącza replikacji</span><span class="sxs-lookup"><span data-stu-id="97c7e-332">Delete Replication Link</span></span>](/rest/api/sql/databases/delete) | <span data-ttu-id="97c7e-333">Usuwa łącze replikacji bazy danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-333">Deletes a database replication link.</span></span> <span data-ttu-id="97c7e-334">Nie można wykonać w trybie failover.</span><span class="sxs-lookup"><span data-stu-id="97c7e-334">Cannot be done during failover.</span></span> |
| <span data-ttu-id="97c7e-335">[Tworzenie lub aktualizacja trybu Failover grupy] / rest/api/sql/failovergroups/createorupdate)</span><span class="sxs-lookup"><span data-stu-id="97c7e-335">[Create or Update Failover Group]/rest/api/sql/failovergroups/createorupdate)</span></span> | <span data-ttu-id="97c7e-336">Tworzy lub aktualizuje grupę trybu failover</span><span class="sxs-lookup"><span data-stu-id="97c7e-336">Creates or updates a failover group</span></span> |
| [<span data-ttu-id="97c7e-337">Usuń grupę trybu Failover</span><span class="sxs-lookup"><span data-stu-id="97c7e-337">Delete Failover Group</span></span>](/rest/api/sql/failovergroups/delete) | <span data-ttu-id="97c7e-338">Usuwa grupę trybu failover hello z powitania serwera</span><span class="sxs-lookup"><span data-stu-id="97c7e-338">Removes hello failover group from hello server</span></span> |
| [<span data-ttu-id="97c7e-339">Tryb failover (zaplanowana)</span><span class="sxs-lookup"><span data-stu-id="97c7e-339">Failover (Planned)</span></span>](/rest/api/sql/failovergroups/failover) | <span data-ttu-id="97c7e-340">Awaryjnie z bieżącego serwera podstawowego serwera toothis hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-340">Fails over from hello current primary server toothis server.</span></span> |
| [<span data-ttu-id="97c7e-341">Zezwalaj na wymuszenie trybu Failover utrata danych</span><span class="sxs-lookup"><span data-stu-id="97c7e-341">Force Failover Allow Data Loss</span></span>](/rest/api/sql/failovergroups/forcefailoverallowdataloss) |<span data-ttu-id="97c7e-342">ails za pośrednictwem z bieżącego serwera podstawowego serwera toothis hello.</span><span class="sxs-lookup"><span data-stu-id="97c7e-342">ails over from hello current primary server toothis server.</span></span> <span data-ttu-id="97c7e-343">Ta operacja może spowodować utratę danych.</span><span class="sxs-lookup"><span data-stu-id="97c7e-343">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="97c7e-344">Grupy pracy awaryjnej Get</span><span class="sxs-lookup"><span data-stu-id="97c7e-344">Get Failover Group</span></span>](/rest/api/sql/failovergroups/get) | <span data-ttu-id="97c7e-345">Pobiera grupy pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-345">Gets a failover group.</span></span> |
| [<span data-ttu-id="97c7e-346">Wyświetlanie listy grup trybu Failover przez serwer</span><span class="sxs-lookup"><span data-stu-id="97c7e-346">List Failover Groups By Server</span></span>](/rest/api/sql/failovergroups/listbyserver) | <span data-ttu-id="97c7e-347">Wyświetla listę grup pracy awaryjnej hello na serwerze.</span><span class="sxs-lookup"><span data-stu-id="97c7e-347">Lists hello failover groups in a server.</span></span> |
| [<span data-ttu-id="97c7e-348">Aktualizacja trybu Failover grupy</span><span class="sxs-lookup"><span data-stu-id="97c7e-348">Update Failover Group</span></span>](/rest/api/sql/failovergroups/update) | <span data-ttu-id="97c7e-349">Aktualizuje grupy pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="97c7e-349">Updates a failover group.</span></span> |
|  | |

## <a name="next-steps"></a><span data-ttu-id="97c7e-350">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="97c7e-350">Next steps</span></span>
* <span data-ttu-id="97c7e-351">Aby uzyskać przykładowe skrypty Zobacz:</span><span class="sxs-lookup"><span data-stu-id="97c7e-351">For sample scripts, see:</span></span>
   - [<span data-ttu-id="97c7e-352">Konfigurowanie i pracy awaryjnej pojedynczej bazy danych przy użyciu aktywna replikacja geograficzna</span><span class="sxs-lookup"><span data-stu-id="97c7e-352">Configure and failover a single database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-database-powershell.md)
   - [<span data-ttu-id="97c7e-353">Konfigurowanie i pracy awaryjnej puli bazy danych przy użyciu aktywna replikacja geograficzna</span><span class="sxs-lookup"><span data-stu-id="97c7e-353">Configure and failover a pooled database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md)
   - [<span data-ttu-id="97c7e-354">Konfigurowanie i trybu failover, a praca awaryjna grupy dla pojedynczej bazy danych (wersja zapoznawcza)</span><span class="sxs-lookup"><span data-stu-id="97c7e-354">Configure and failover a failover group for a single database (preview)</span></span>](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md)
* <span data-ttu-id="97c7e-355">Omówienie ciągłości działalności biznesowej i scenariuszy, zobacz [omówienie ciągłości działalności biznesowej](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="97c7e-355">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="97c7e-356">toolearn o bazy danych SQL Azure automatycznego tworzenia kopii zapasowych, zobacz [bazy danych SQL automatycznego tworzenia kopii zapasowych](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="97c7e-356">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="97c7e-357">toolearn o za pomocą kopie zapasowe automatycznego odzyskiwania, zobacz [przywrócić bazę danych z kopii zapasowych hello inicjowane przez usługę](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="97c7e-357">toolearn about using automated backups for recovery, see [Restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="97c7e-358">toolearn o wymaganiach dotyczących uwierzytelniania nowym serwerem podstawowym i bazy danych, zobacz [zabezpieczeń bazy danych SQL po awarii](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="97c7e-358">toolearn about authentication requirements for a new primary server and database, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span>

