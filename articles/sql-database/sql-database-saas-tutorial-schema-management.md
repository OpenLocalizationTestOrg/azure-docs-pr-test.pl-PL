---
title: "schemat bazy danych SQL Azure aaaManage w aplikacji wielodostępnych | Dokumentacja firmy Microsoft"
description: "Zarządzanie schematami wielu dzierżaw w aplikacji z wieloma dzierżawami, która korzysta z usługi Azure SQL Database"
keywords: "samouczek usługi sql database"
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/28/2017
ms.author: billgib; sstein
ms.openlocfilehash: ea946e556808dabd60dd39cb8173d0512d4bddec
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="manage-schema-for-multiple-tenants-in-hello-wingtip-saas-application"></a><span data-ttu-id="ab39a-104">Zarządzanie schematu dla wielu dzierżawców w hello aplikacji Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="ab39a-104">Manage schema for multiple tenants in hello Wingtip SaaS application</span></span>

<span data-ttu-id="ab39a-105">Witaj [pierwszy samouczek Wingtip SaaS](sql-database-saas-tutorial.md) pokazuje, jak udostępnić bazę danych dzierżawy i zarejestruj go w katalogu hello aplikacji hello.</span><span class="sxs-lookup"><span data-stu-id="ab39a-105">hello [first Wingtip SaaS tutorial](sql-database-saas-tutorial.md) shows how hello app can provision a tenant database and register it in hello catalog.</span></span> <span data-ttu-id="ab39a-106">Podobnie jak wszelkie aplikacje powitalne aplikacji Wingtip SaaS rozpoczyna się wraz z upływem czasu, a czasem wymaga toohello zmian w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="ab39a-106">Like any application, hello Wingtip SaaS app will evolve over time, and at times will require changes toohello database.</span></span> <span data-ttu-id="ab39a-107">Zmiany mogą obejmować schematu nowe lub zostały zmienione, dane referencyjne nowe lub zostały zmienione i bazy danych procedury obsługi zadań tooensure optymalną wydajność aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ab39a-107">Changes may include new or changed schema, new or changed reference data, and routine database maintenance tasks tooensure optimal app performance.</span></span> <span data-ttu-id="ab39a-108">Przy użyciu aplikacji SaaS te zmiany należy toobe wdrożonego w skoordynowany sposób na potencjalnie ogromną floty dzierżawy baz danych.</span><span class="sxs-lookup"><span data-stu-id="ab39a-108">With a SaaS application, these changes need toobe deployed in a coordinated manner across a potentially massive fleet of tenant databases.</span></span> <span data-ttu-id="ab39a-109">Toobe te zmiany w przyszłości dzierżawy baz danych, muszą one mieć toobe włączyć do procesu udostępniania hello.</span><span class="sxs-lookup"><span data-stu-id="ab39a-109">For these changes toobe in future tenant databases, they need toobe incorporated into hello provisioning process.</span></span>

<span data-ttu-id="ab39a-110">W tym samouczku Eksploruje dwa scenariusze - wdrażania aktualizacji danych odwołania dla wszystkich dzierżawców i retuning indeksu na powitania tabeli zawierającej dane referencyjne hello.</span><span class="sxs-lookup"><span data-stu-id="ab39a-110">This tutorial explores two scenarios - deploying reference data updates for all tenants, and retuning an index on hello table containing hello reference data.</span></span> <span data-ttu-id="ab39a-111">Witaj [zadania elastyczne](sql-database-elastic-jobs-overview.md) funkcji jest używane tooexecute te operacje we wszystkich dzierżaw i hello *złotego* bazy danych dzierżawy, który służy jako szablon dla nowych baz danych.</span><span class="sxs-lookup"><span data-stu-id="ab39a-111">hello [Elastic jobs](sql-database-elastic-jobs-overview.md) feature is used tooexecute these operations across all tenants, and hello *golden* tenant database that is used as a template for new databases.</span></span>

<span data-ttu-id="ab39a-112">Ten samouczek zawiera informacje na temat wykonywania następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="ab39a-112">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="ab39a-113">Tworzenie zadania konta</span><span class="sxs-lookup"><span data-stu-id="ab39a-113">Create a job account</span></span>
> * <span data-ttu-id="ab39a-114">Wysyłanie zapytań na wielu dzierżawców</span><span class="sxs-lookup"><span data-stu-id="ab39a-114">Query across multiple tenants</span></span>
> * <span data-ttu-id="ab39a-115">Aktualizowanie danych we wszystkich bazach danych dzierżaw</span><span class="sxs-lookup"><span data-stu-id="ab39a-115">Update data in all tenant databases</span></span>
> * <span data-ttu-id="ab39a-116">Tworzenie indeksu tabeli we wszystkich bazach danych dzierżaw</span><span class="sxs-lookup"><span data-stu-id="ab39a-116">Create an index on a table in all tenant databases</span></span>


<span data-ttu-id="ab39a-117">toocomplete tego samouczka, Utwórz hello się, że następujące wymagania wstępne są spełnione:</span><span class="sxs-lookup"><span data-stu-id="ab39a-117">toocomplete this tutorial, make sure hello following prerequisites are met:</span></span>

* <span data-ttu-id="ab39a-118">Aplikacja Wingtip SaaS Hello jest wdrażana.</span><span class="sxs-lookup"><span data-stu-id="ab39a-118">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="ab39a-119">Zobacz toodeploy w mniej niż pięć minut [wdrażania i aplikacji Wingtip SaaS hello](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="ab39a-119">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="ab39a-120">Zainstalowany jest program Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ab39a-120">Azure PowerShell is installed.</span></span> <span data-ttu-id="ab39a-121">Aby uzyskać szczegółowe informacje, zobacz [Rozpoczynanie pracy z programem Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="ab39a-121">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>
* <span data-ttu-id="ab39a-122">zainstalowana jest najnowsza wersja Hello programu SQL Server Management Studio (SSMS).</span><span class="sxs-lookup"><span data-stu-id="ab39a-122">hello latest version of SQL Server Management Studio (SSMS) is installed.</span></span> [<span data-ttu-id="ab39a-123">Pobieranie i instalowanie programu SSMS</span><span class="sxs-lookup"><span data-stu-id="ab39a-123">Download and Install SSMS</span></span>](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms)

<span data-ttu-id="ab39a-124">*Ten samouczek używa funkcji hello usługi baza danych SQL, które są w ograniczonym wersji zapoznawczej (zadania elastycznej bazy danych). Jeśli chcesz toodo w tym samouczku, podaj identyfikator subskrypcji tooSaaSFeedback@microsoft.com podmiotu = elastycznej Podgląd zadania. Po otrzymaniu potwierdzenia, że subskrypcja została włączona, [Pobierz i zainstaluj polecenia cmdlet hello najnowszej wersji wstępnej zadania](https://github.com/jaredmoo/azure-powershell/releases). Ta wersja zapoznawcza jest ograniczony, więc skontaktuj się z SaaSFeedback@microsoft.com pytania związane z lub pomocy technicznej.*</span><span class="sxs-lookup"><span data-stu-id="ab39a-124">*This tutorial uses features of hello SQL Database service that are in a limited preview (Elastic Database jobs). If you wish toodo this tutorial, provide your subscription id tooSaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install hello latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>


## <a name="introduction-toosaas-schema-management-patterns"></a><span data-ttu-id="ab39a-125">Wprowadzenie tooSaaS wzorców Zarządzanie schematami</span><span class="sxs-lookup"><span data-stu-id="ab39a-125">Introduction tooSaaS Schema Management patterns</span></span>

<span data-ttu-id="ab39a-126">Witaj pojedynczej dzierżawy na bazę danych SaaS wzorca korzyści na wiele sposobów z hello danych izolacji, co powoduje, ale na powitania jednocześnie wprowadza hello dodatkową złożoność obsługi i zarządzania nimi wielu baz danych.</span><span class="sxs-lookup"><span data-stu-id="ab39a-126">hello single tenant per database SaaS pattern benefits in many ways from hello data isolation that results, but at hello same time introduces hello additional complexity of maintaining and managing many databases.</span></span> <span data-ttu-id="ab39a-127">[Zadania elastyczne](sql-database-elastic-jobs-overview.md) ułatwia administrowanie i zarządzanie warstwy danych programu SQL hello.</span><span class="sxs-lookup"><span data-stu-id="ab39a-127">[Elastic Jobs](sql-database-elastic-jobs-overview.md) facilitates administration and management of hello SQL data tier.</span></span> <span data-ttu-id="ab39a-128">Zadania umożliwiają toosecurely a niezawodnie, uruchom zadania (skryptów T-SQL) niezależne od działań użytkownika lub danych wejściowych, na grupę baz danych.</span><span class="sxs-lookup"><span data-stu-id="ab39a-128">Jobs enable you toosecurely and reliably, run tasks (T-SQL scripts) independent of user interaction or input, against a group of databases.</span></span> <span data-ttu-id="ab39a-129">Ta metoda może być używane toodeploy schematu i wspólne zmiany danych odwołania dla wszystkich dzierżawców w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ab39a-129">This method can be used toodeploy schema and common reference data changes across all tenants in an application.</span></span> <span data-ttu-id="ab39a-130">Zadania elastyczne mogą być również używane toomaintain *złotego* toocreate nowi dzierżawcy, zapewniając zawsze zawiera najnowsze dane schematu i odwołanie hello używana kopia hello bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ab39a-130">Elastic Jobs can also be used toomaintain a *golden* copy of hello database used toocreate new tenants, ensuring it always has hello latest schema and reference data.</span></span>

![ekran](media/sql-database-saas-tutorial-schema-management/schema-management.png)


## <a name="elastic-jobs-limited-preview"></a><span data-ttu-id="ab39a-132">Ograniczona wersja zapoznawcza Zadań elastycznych</span><span class="sxs-lookup"><span data-stu-id="ab39a-132">Elastic Jobs limited preview</span></span>

<span data-ttu-id="ab39a-133">Istnieje nowa wersja Zadań elastycznych, która jest teraz zintegrowaną funkcją usługi Azure SQL Database (nie wymaga żadnych dodatkowych usług ani składników).</span><span class="sxs-lookup"><span data-stu-id="ab39a-133">There is a new version of Elastic Jobs that is now an integrated feature of Azure SQL Database (that requires no additional services or components).</span></span> <span data-ttu-id="ab39a-134">Nowa wersja Zadań elastycznych jest obecnie dostępna w ograniczonej wersji zapoznawczej.</span><span class="sxs-lookup"><span data-stu-id="ab39a-134">This new version of Elastic Jobs is currently in limited preview.</span></span> <span data-ttu-id="ab39a-135">Ta ograniczona wersja zapoznawcza obecnie obsługuje PowerShell toocreate zadania konta i toocreate T-SQL zadania i zarządzać nimi.</span><span class="sxs-lookup"><span data-stu-id="ab39a-135">This limited preview currently supports PowerShell toocreate job accounts, and T-SQL toocreate and manage jobs.</span></span>

> [!NOTE]
> <span data-ttu-id="ab39a-136">*Ten samouczek używa funkcji hello usługi baza danych SQL, które są w ograniczonym wersji zapoznawczej (zadania elastycznej bazy danych). Jeśli chcesz toodo w tym samouczku, podaj identyfikator subskrypcji tooSaaSFeedback@microsoft.com podmiotu = elastycznej Podgląd zadania. Po otrzymaniu potwierdzenia, że subskrypcja została włączona, [Pobierz i zainstaluj polecenia cmdlet hello najnowszej wersji wstępnej zadania](https://github.com/jaredmoo/azure-powershell/releases). Ta wersja zapoznawcza jest ograniczony, więc skontaktuj się z SaaSFeedback@microsoft.com pytania związane z lub pomocy technicznej.*</span><span class="sxs-lookup"><span data-stu-id="ab39a-136">*This tutorial uses features of hello SQL Database service that are in a limited preview (Elastic Database jobs). If you wish toodo this tutorial, provide your subscription id tooSaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install hello latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="ab39a-137">Pobierz skrypty aplikacji hello Wingtip</span><span class="sxs-lookup"><span data-stu-id="ab39a-137">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="ab39a-138">Witaj Wingtip SaaS skrypty i kod źródłowy aplikacji są dostępne w hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) repozytorium github.</span><span class="sxs-lookup"><span data-stu-id="ab39a-138">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="ab39a-139">[Kroki skrypty Wingtip SaaS hello toodownload](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="ab39a-139">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="create-a-job-account-database-and-new-job-account"></a><span data-ttu-id="ab39a-140">Tworzenie bazy danych konta zadania oraz nowego konta zadania</span><span class="sxs-lookup"><span data-stu-id="ab39a-140">Create a job account database and new job account</span></span>

<span data-ttu-id="ab39a-141">Ten samouczek wymaga użycia programu PowerShell toocreate hello zadania konta bazy danych i zadania konta.</span><span class="sxs-lookup"><span data-stu-id="ab39a-141">This tutorial requires you use PowerShell toocreate hello job account database and job account.</span></span> <span data-ttu-id="ab39a-142">Podobnie jak MSDB i agenta SQL korzysta zadania elastyczne Azure SQL z bazy danych definicje zadań toostore, stan zadania i historii.</span><span class="sxs-lookup"><span data-stu-id="ab39a-142">Like MSDB and SQL Agent, Elastic Jobs uses an Azure SQL database toostore job definitions, job status, and history.</span></span> <span data-ttu-id="ab39a-143">Po utworzeniu hello zadania konta można tworzyć i natychmiast monitorowania zadań.</span><span class="sxs-lookup"><span data-stu-id="ab39a-143">Once hello job account is created, you can create and monitor jobs immediately.</span></span>

1. <span data-ttu-id="ab39a-144">Otwórz... \\Modułów uczenia\\Zarządzanie schematami\\*SchemaManagement.ps1 pokaz* w hello **PowerShell ISE**.</span><span class="sxs-lookup"><span data-stu-id="ab39a-144">Open …\\Learning Modules\\Schema Management\\*Demo-SchemaManagement.ps1* in hello **PowerShell ISE**.</span></span>
1. <span data-ttu-id="ab39a-145">Naciśnij klawisz **F5** toorun hello skryptu.</span><span class="sxs-lookup"><span data-stu-id="ab39a-145">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="ab39a-146">Hello *SchemaManagement.ps1 pokaz* hello wywołania skryptu *SchemaManagement.ps1 Wdróż* skryptu toocreate *S2* bazy danych o nazwie **jobaccount** na powitania serwera wykazu.</span><span class="sxs-lookup"><span data-stu-id="ab39a-146">hello *Demo-SchemaManagement.ps1* script calls hello *Deploy-SchemaManagement.ps1* script toocreate an *S2* database named **jobaccount** on hello catalog server.</span></span> <span data-ttu-id="ab39a-147">Następnie tworzy hello zadania konta, przekazywanie jako parametru toohello zadania konta tworzenia wywołanie hello jobaccount w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="ab39a-147">It then creates hello job account, passing hello jobaccount database as a parameter toohello job account creation call.</span></span>

## <a name="create-a-job-toodeploy-new-reference-data-tooall-tenants"></a><span data-ttu-id="ab39a-148">Utwórz zadanie toodeploy nowe odwołanie danych tooall dzierżawcy</span><span class="sxs-lookup"><span data-stu-id="ab39a-148">Create a job toodeploy new reference data tooall tenants</span></span>

<span data-ttu-id="ab39a-149">Każda baza danych dzierżawy zawiera zestaw miejscową typów, które definiują hello rodzaju zdarzenia, które znajdują się w miejscu.</span><span class="sxs-lookup"><span data-stu-id="ab39a-149">Each tenant database includes a set of venue types that define hello kind of events that are hosted at a venue.</span></span> <span data-ttu-id="ab39a-150">W tym ćwiczeniu można wdrożyć aktualizacji tooall hello dzierżawy baz danych tooadd dwa dodatkowe miejsce typów: *Racing motocykla* i *klub pływackich*.</span><span class="sxs-lookup"><span data-stu-id="ab39a-150">In this exercise, you deploy an update tooall hello tenant databases tooadd two additional venue types: *Motorcycle Racing* and *Swimming Club*.</span></span> <span data-ttu-id="ab39a-151">Te typy miejscową odpowiada obraz tła toohello widocznych hello dzierżawy zdarzeń aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ab39a-151">These venue types correspond toohello background image you see in hello tenant events app.</span></span>

<span data-ttu-id="ab39a-152">Kliknij menu rozwijane typu miejscową hello, a następnie sprawdź, czy tylko 10 miejscową typu opcje są dostępne, a w szczególności tej "Motocykla Racing" i "Pływackich klub" nie znajdują się na liście hello.</span><span class="sxs-lookup"><span data-stu-id="ab39a-152">Click hello Venue Type drop down menu and validate that only 10 venue type options are available, and specifically that ‘Motorcycle Racing’ and ‘Swimming Club’ are not included in hello list.</span></span>

<span data-ttu-id="ab39a-153">Teraz Utwórzmy hello tooupdate zadania *VenueTypes* tabeli w wszystkich baz danych dzierżawy hello i dodawanie nowych typów miejscową hello.</span><span class="sxs-lookup"><span data-stu-id="ab39a-153">Now let’s create a job tooupdate hello *VenueTypes* table in all hello tenant databases and add hello new venue types.</span></span>

<span data-ttu-id="ab39a-154">toocreate nowe zadanie używamy zestawu zadań systemu przechowywane procedury utworzone w bazie danych jobaccount hello podczas tworzenia hello zadania konta.</span><span class="sxs-lookup"><span data-stu-id="ab39a-154">toocreate a new job, we use a set of jobs system stored procedures created in hello jobaccount database when hello job account was created.</span></span>

1. <span data-ttu-id="ab39a-155">Otwórz SSMS i Połącz z serwerem wykazu toohello: katalogu -\<użytkownika\>. database.windows.net serwera</span><span class="sxs-lookup"><span data-stu-id="ab39a-155">Open SSMS and connect toohello catalog server: catalog-\<user\>.database.windows.net server</span></span>
1. <span data-ttu-id="ab39a-156">Także podłączyć serwer dzierżawy toohello: tenants1 -\<użytkownika\>. database.windows.net</span><span class="sxs-lookup"><span data-stu-id="ab39a-156">Also connect toohello tenant server: tenants1-\<user\>.database.windows.net</span></span>
1. <span data-ttu-id="ab39a-157">Przeglądaj toohello *contosoconcerthall* bazy danych na powitania *tenants1* powitania serwera i zapytań *VenueTypes* tooconfirm tabeli który *Racing motocykla*  i *klub pływackich* **nie są** hello listy wyników.</span><span class="sxs-lookup"><span data-stu-id="ab39a-157">Browse toohello *contosoconcerthall* database on hello *tenants1* server and query hello *VenueTypes* table tooconfirm that *Motorcycle Racing* and *Swimming Club* **are not** in hello results list.</span></span>
1. <span data-ttu-id="ab39a-158">Otwórz hello pliku... \\Modułów szkoleniowych\\Zarządzanie schematami\\DeployReferenceData.sql</span><span class="sxs-lookup"><span data-stu-id="ab39a-158">Open hello file …\\Learning Modules\\Schema Management\\DeployReferenceData.sql</span></span>
1. <span data-ttu-id="ab39a-159">Modyfikowanie instrukcji hello: Ustaw @wtpUser = &lt;użytkownika&gt; i zastąp wartość użytkownika hello używane po wdrożeniu aplikacji Wingtip hello</span><span class="sxs-lookup"><span data-stu-id="ab39a-159">Modify hello statement: SET @wtpUser = &lt;user&gt; and substitute hello User value used when you deployed hello Wingtip app</span></span>
1. <span data-ttu-id="ab39a-160">Upewnij się, są połączone toohello jobaccount w bazie danych i naciśnij klawisz **F5** do uruchamiania skryptu hello</span><span class="sxs-lookup"><span data-stu-id="ab39a-160">Ensure you are connected toohello jobaccount database and press **F5** to run hello script</span></span>

* <span data-ttu-id="ab39a-161">**SP\_dodać\_docelowej\_grupy** tworzy Nazwa grupy docelowej hello DemoServerGroup, teraz potrzebujemy tooadd członków docelowych.</span><span class="sxs-lookup"><span data-stu-id="ab39a-161">**sp\_add\_target\_group** creates hello target group name DemoServerGroup, now we need tooadd target members.</span></span>
* <span data-ttu-id="ab39a-162">**SP\_dodać\_docelowej\_grupy\_elementu członkowskiego** dodaje *serwera* docelowy typ elementu członkowskiego, które uzna za wszystkie bazy danych w ramach tego serwera (Uwaga to hello tenants1-&lt; Użytkownik&gt; serwer zawierający hello dzierżawcy z bazy danych) w czasie zadania wykonywania powinny być uwzględnione w zadania hello hello drugi polega na dodaniu *bazy danych* docelowy typ elementu członkowskiego, w szczególności hello ("złotego" bazy danych basetenantdb) który znajduje się w katalogu -&lt;użytkownika&gt; serwera, a na koniec innego *bazy danych* docelowego elementu członkowskiego typu tooinclude hello adhocanalytics bazy danych grupy używany w samouczku nowsze.</span><span class="sxs-lookup"><span data-stu-id="ab39a-162">**sp\_add\_target\_group\_member** adds a *server* target member type, which deems all databases within that server (note this is hello tenants1-&lt;User&gt; server containing hello tenant databases) at time of job execution should be included in hello job, hello second is adding a *database* target member type, specifically hello ‘golden’ database (basetenantdb) that resides on catalog-&lt;User&gt; server, and lastly another *database* target group member type tooinclude hello adhocanalytics database that is used in a later tutorial.</span></span>
* <span data-ttu-id="ab39a-163">**sp\_add\_job** tworzy zadanie o nazwie „Reference Data Deployment”.</span><span class="sxs-lookup"><span data-stu-id="ab39a-163">**sp\_add\_job** creates a job called “Reference Data Deployment”</span></span>
* <span data-ttu-id="ab39a-164">**SP\_dodać\_etap zadania** tworzy hello etap zadania zawierające T-SQL polecenia tekst tooupdate hello odwołanie do tabeli, VenueTypes</span><span class="sxs-lookup"><span data-stu-id="ab39a-164">**sp\_add\_jobstep** creates hello job step containing T-SQL command text tooupdate hello reference table, VenueTypes</span></span>
* <span data-ttu-id="ab39a-165">Widoki pozostałych Hello w skrypcie hello wyświetlanie istnienie hello hello obiektów i wykonywania zadania monitorowania.</span><span class="sxs-lookup"><span data-stu-id="ab39a-165">hello remaining views in hello script display hello existence of hello objects and monitor job execution.</span></span> <span data-ttu-id="ab39a-166">Użyj tych wartości stanu hello tooreview zapytań w hello **cyklu życia** toodetermine kolumny, gdy zadania hello zakończy się pomyślnie na wszystkie dzierżawy i bazy danych Witaj dwie dodatkowe zawierające hello tabeli referencyjnej.</span><span class="sxs-lookup"><span data-stu-id="ab39a-166">Use these queries tooreview hello status value in hello **lifecycle** column toodetermine when hello job has successfully finished on all tenant databases and hello two additional databases containing hello reference table.</span></span>

1. <span data-ttu-id="ab39a-167">W programie SSMS, Przeglądaj toohello *contosoconcerthall* bazy danych na powitania *tenants1* powitania serwera i zapytań *VenueTypes* tooconfirm tabeli który *motocykla Racing* i *klub pływackich* **są** teraz na liście wyników hello.</span><span class="sxs-lookup"><span data-stu-id="ab39a-167">In SSMS, browse toohello *contosoconcerthall* database on hello *tenants1* server and query hello *VenueTypes* table tooconfirm that *Motorcycle Racing* and *Swimming Club* **are** now in hello results list.</span></span>


## <a name="create-a-job-toomanage-hello-reference-table-index"></a><span data-ttu-id="ab39a-168">Tworzenie indeksu tabeli zadania toomanage hello odwołania</span><span class="sxs-lookup"><span data-stu-id="ab39a-168">Create a job toomanage hello reference table index</span></span>

<span data-ttu-id="ab39a-169">Podobne toohello poprzednim ćwiczeniu, tym ćwiczeniu tworzy indeks hello toorebuild zadania hello klucza podstawowego tabeli odwołania, operacji zarządzania typowe bazy danych administrator może wykonać po załadowaniu dużej ilości danych do tabeli.</span><span class="sxs-lookup"><span data-stu-id="ab39a-169">Similar toohello previous exercise, this exercise creates a job toorebuild hello index on hello reference table primary key, a typical database management operation an administrator might perform after a large data load into a table.</span></span>

<span data-ttu-id="ab39a-170">Utwórz zadanie, używając hello tego samego zadania "system" procedur składowanych.</span><span class="sxs-lookup"><span data-stu-id="ab39a-170">Create a job using hello same jobs 'system' stored procedures.</span></span>

1. <span data-ttu-id="ab39a-171">Otwórz program SSMS i połącz toohello katalogu -&lt;użytkownika&gt;. database.windows.net serwera</span><span class="sxs-lookup"><span data-stu-id="ab39a-171">Open SSMS and connect toohello catalog-&lt;User&gt;.database.windows.net server</span></span>
1. <span data-ttu-id="ab39a-172">Otwórz hello pliku... \\Modułów szkoleniowych\\Zarządzanie schematami\\OnlineReindex.sql</span><span class="sxs-lookup"><span data-stu-id="ab39a-172">Open hello file …\\Learning Modules\\Schema Management\\OnlineReindex.sql</span></span>
1. <span data-ttu-id="ab39a-173">Kliknij prawym przyciskiem myszy, wybierz połączenie i połącz toohello katalogu -&lt;użytkownika&gt;. database.windows.net serwera, jeśli nie został jeszcze połączony</span><span class="sxs-lookup"><span data-stu-id="ab39a-173">Right click, select Connection, and connect toohello catalog-&lt;User&gt;.database.windows.net server, if not already connected</span></span>
1. <span data-ttu-id="ab39a-174">Upewnij się, są połączone toohello jobaccount w bazie danych i naciśnij klawisz F5 toorun hello skryptu</span><span class="sxs-lookup"><span data-stu-id="ab39a-174">Ensure you are connected toohello jobaccount database and press F5 toorun hello script</span></span>

* <span data-ttu-id="ab39a-175">sp\_add\_job tworzy nowe zadanie o nazwie „Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885”.</span><span class="sxs-lookup"><span data-stu-id="ab39a-175">sp\_add\_job creates a new job called “Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885”</span></span>
* <span data-ttu-id="ab39a-176">SP\_dodać\_etap zadania tworzy hello etap zadania zawierające T-SQL polecenia tekst tooupdate hello indeksu</span><span class="sxs-lookup"><span data-stu-id="ab39a-176">sp\_add\_jobstep creates hello job step containing T-SQL command text tooupdate hello index</span></span>




## <a name="next-steps"></a><span data-ttu-id="ab39a-177">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="ab39a-177">Next steps</span></span>

<span data-ttu-id="ab39a-178">W tym samouczku zawarto informacje na temat wykonywania następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="ab39a-178">In this tutorial you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="ab39a-179">Utwórz zadania konta tooquery między wieloma dzierżawcami</span><span class="sxs-lookup"><span data-stu-id="ab39a-179">Create a job account tooquery across multiple tenants</span></span>
> * <span data-ttu-id="ab39a-180">Aktualizowanie danych we wszystkich bazach danych dzierżaw</span><span class="sxs-lookup"><span data-stu-id="ab39a-180">Update data in all tenant databases</span></span>
> * <span data-ttu-id="ab39a-181">Tworzenie indeksu tabeli we wszystkich bazach danych dzierżaw</span><span class="sxs-lookup"><span data-stu-id="ab39a-181">Create an index on a table in all tenant databases</span></span>

[<span data-ttu-id="ab39a-182">Samouczek analitycznych zapytań ad-hoc</span><span class="sxs-lookup"><span data-stu-id="ab39a-182">Ad-hoc analytics tutorial</span></span>](sql-database-saas-tutorial-adhoc-analytics.md)


## <a name="additional-resources"></a><span data-ttu-id="ab39a-183">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="ab39a-183">Additional resources</span></span>

* [<span data-ttu-id="ab39a-184">Dodatkowe samouczki, które zależą od hello wdrażanie aplikacji Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="ab39a-184">Additional tutorials that build upon hello Wingtip SaaS application deployment</span></span>](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)
* [<span data-ttu-id="ab39a-185">Zarządzanie skalowaną w poziomie bazą danych w chmurze</span><span class="sxs-lookup"><span data-stu-id="ab39a-185">Managing scaled-out cloud databases</span></span>](sql-database-elastic-jobs-overview.md)
* [<span data-ttu-id="ab39a-186">Tworzenie baz danych skalowanych w poziomie i zarządzanie nimi</span><span class="sxs-lookup"><span data-stu-id="ab39a-186">Create and manage scaled-out cloud databases</span></span>](sql-database-elastic-jobs-create-and-manage.md)
