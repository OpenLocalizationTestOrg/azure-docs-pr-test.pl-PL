---
title: "Projektowanie rozwiązania w zakresie odzyskiwania po awarii — baza danych SQL Azure | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak zaprojektować rozwiązanie chmury odzyskiwania po awarii, wybierając wzorzec prawo trybu failover."
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2db99057-0c79-4fb0-a7f1-d1c057ec787f
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/07/2017
ms.author: sashan;carlrab
ms.openlocfilehash: 4f5131fdd2ca83e7a0a2f986a2fa1e3551814c6e
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="disaster-recovery-strategies-for-applications-using-sql-database-elastic-pools"></a><span data-ttu-id="2d993-103">Strategie odzyskiwania po awarii dla aplikacji wykorzystujących pule elastyczne bazy danych SQL</span><span class="sxs-lookup"><span data-stu-id="2d993-103">Disaster recovery strategies for applications using SQL Database elastic pools</span></span>
<span data-ttu-id="2d993-104">Całościowo ma dowiedzieliśmy się, że usługi w chmurze nie są niezawodne i stanie krytycznego zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="2d993-104">Over the years we have learned that cloud services are not foolproof and catastrophic incidents happen.</span></span> <span data-ttu-id="2d993-105">Baza danych SQL oferuje kilka możliwości do zapewnienia ciągłości biznesowej aplikacji, gdy zdarzenia te występują.</span><span class="sxs-lookup"><span data-stu-id="2d993-105">SQL Database provides several capabilities to provide for the business continuity of your application when these incidents occur.</span></span> <span data-ttu-id="2d993-106">[Pule elastyczne](sql-database-elastic-pool.md) i pojedynczych baz danych obsługują tego samego rodzaju możliwości odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2d993-106">[Elastic pools](sql-database-elastic-pool.md) and single databases support the same kind of disaster recovery capabilities.</span></span> <span data-ttu-id="2d993-107">W tym artykule opisano kilka strategii odzyskiwania po awarii dla pul elastyczna korzystać z tych funkcjach ciągłości biznesowej bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="2d993-107">This article describes several DR strategies for elastic pools that leverage these SQL Database business continuity features.</span></span>

<span data-ttu-id="2d993-108">W tym artykule korzysta ze wzorca następujących aplikacji SaaS niezależnego dostawcy oprogramowania kanoniczny:</span><span class="sxs-lookup"><span data-stu-id="2d993-108">This article uses the following canonical SaaS ISV application pattern:</span></span>

<span data-ttu-id="2d993-109"><i>Aplikacja sieci web opartej na chmurze nowoczesnych inicjuje jednej bazy danych SQL dla każdego użytkownika końcowego. Niezależny dostawca oprogramowania ma wielu klientów i w związku z tym używa wielu baz danych, nazywane dzierżawy baz danych. Ponieważ baz danych dzierżawy mają zwykle działania nieprzewidywalnych wzorców, niezależnego dostawcy oprogramowania używa puli elastycznej, aby baza danych, kosztów bardzo przewidywalną przez dłuższy czas. Puli elastycznej także upraszcza zarządzanie wydajności, gdy wzrósł aktywności użytkownika. Oprócz baz danych dzierżawy aplikacja używa wielu baz danych do zarządzania profilami użytkowników, zabezpieczeń, zbieranie wzorców użycia itd. Dostępność poszczególnych dzierżawców nie wpływa na dostępność aplikacji jako całość. Jednak dostępności i wydajności bazy danych zarządzania jest szczególnie ważne dla funkcji aplikacji i jeśli bazy danych zarządzania znajdują się w trybie offline całej aplikacji jest w trybie offline.</i></span><span class="sxs-lookup"><span data-stu-id="2d993-109"><i>A modern cloud-based web application provisions one SQL database for each end user. The ISV has many customers and therefore uses many databases, known as tenant databases. Because the tenant databases typically have unpredictable activity patterns, the ISV uses an elastic pool to make the database cost very predictable over extended periods of time. The elastic pool also simplifies the performance management when the user activity spikes. In addition to the tenant databases the application also uses several databases to manage user profiles, security, collect usage patterns etc. Availability of the individual tenants does not impact the application’s availability as whole. However, the availability and performance of management databases is critical for the application’s function and if the management databases are offline the entire application is offline.</i></span></span>  

<span data-ttu-id="2d993-110">W tym artykule omówiono strategii odzyskiwania po awarii, obejmujących szereg scenariuszy z koszt poufnych uruchamiania aplikacji, aby te wymagania rygorystyczne dostępności.</span><span class="sxs-lookup"><span data-stu-id="2d993-110">This article discusses DR strategies covering a range of scenarios from cost sensitive startup applications to ones with stringent availability requirements.</span></span>

## <a name="scenario-1-cost-sensitive-startup"></a><span data-ttu-id="2d993-111">Scenariusz 1.</span><span class="sxs-lookup"><span data-stu-id="2d993-111">Scenario 1.</span></span> <span data-ttu-id="2d993-112">Koszt poufnych uruchamiania</span><span class="sxs-lookup"><span data-stu-id="2d993-112">Cost sensitive startup</span></span>
<span data-ttu-id="2d993-113"><i>I am firm uruchamiania i bardzo jestem koszt poufnych.  Chcę, aby uprościć wdrażanie i zarządzanie aplikacji i I ma ograniczone umowy SLA dla poszczególnych odbiorców. Ale chcę upewnić się, aplikacja jako całość nigdy nie jest w trybie offline.</i></span><span class="sxs-lookup"><span data-stu-id="2d993-113"><i>I am a startup business and am extremely cost sensitive.  I want to simplify deployment and management of the application and I can have a limited SLA for individual customers. But I want to ensure the application as a whole is never offline.</i></span></span>

<span data-ttu-id="2d993-114">Do zaspokojenia wymogu prostotę, wdrażanie wszystkich dzierżawy baz danych w jednej elastycznej puli w regionie Azure wybranym i wdrażanie baz danych zarządzania jako replikacją geograficzną pojedynczych baz danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-114">To satisfy the simplicity requirement, deploy all tenant databases into one elastic pool in the Azure region of your choice and deploy management databases as geo-replicated single databases.</span></span> <span data-ttu-id="2d993-115">W przypadku odzyskiwania po awarii dzierżawcy Użyj przywracaniem geograficznym, które pojawia się bez ponoszenia dodatkowych kosztów.</span><span class="sxs-lookup"><span data-stu-id="2d993-115">For the disaster recovery of tenants, use geo-restore, which comes at no additional cost.</span></span> <span data-ttu-id="2d993-116">Aby zapewnić dostępność bazy danych zarządzania, replikacja geograficzna je do innego regionu przy użyciu automatycznej pracy awaryjnej grupy (w — wersja zapoznawcza) (krok 1).</span><span class="sxs-lookup"><span data-stu-id="2d993-116">To ensure the availability of the management databases, geo-replicate them to another region using an auto-failover group (in-preview) (step 1).</span></span> <span data-ttu-id="2d993-117">Koszt trwającej konfiguracji odzyskiwania po awarii, w tym scenariuszu jest równa całkowity koszt dodatkowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-117">The ongoing cost of the disaster recovery configuration in this scenario is equal to the total cost of the secondary databases.</span></span> <span data-ttu-id="2d993-118">Ta konfiguracja została przedstawiona na diagramie dalej.</span><span class="sxs-lookup"><span data-stu-id="2d993-118">This configuration is illustrated on the next diagram.</span></span>

![Rysunek 1.](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-1.png)

<span data-ttu-id="2d993-120">W przypadku wystąpienia awarii w regionie podstawowym, kroki odzyskiwania, aby przełączyć aplikację w trybie online są zilustrowane dalej diagramu.</span><span class="sxs-lookup"><span data-stu-id="2d993-120">If an outage occurs in the primary region, the recovery steps to bring your application online are illustrated by the next diagram.</span></span>

* <span data-ttu-id="2d993-121">Grupa trybu failover inicjuje automatycznej pracy awaryjnej bazy danych zarządzania w regionie odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2d993-121">The failover group initiates automatic failover of the management database to the DR region.</span></span> <span data-ttu-id="2d993-122">Aplikacja jest automatycznie ponownie podłączane do nowych kont głównych i wszystkich nowych i baz danych dzierżawy są tworzone w regionie odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2d993-122">The application is automatically reconnected to the new primary and all new accounts and tenant databases are created in the DR region.</span></span> <span data-ttu-id="2d993-123">Istniejących klientów, zobacz swoje dane, które są tymczasowo niedostępne.</span><span class="sxs-lookup"><span data-stu-id="2d993-123">The existing customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="2d993-124">Tworzenie puli elastycznej z taką samą konfigurację jak oryginalny puli (2).</span><span class="sxs-lookup"><span data-stu-id="2d993-124">Create the elastic pool with the same configuration as the original pool (2).</span></span>
* <span data-ttu-id="2d993-125">Geograficzne umożliwia utworzenie kopii dzierżawcy baz danych [3].</span><span class="sxs-lookup"><span data-stu-id="2d993-125">Use geo-restore to create copies of the tenant databases (3).</span></span> <span data-ttu-id="2d993-126">Można wziąć pod uwagę wyzwalania poszczególnych przywraca przez użytkownika końcowego połączenia lub użyj innego schematu priorytet specyficzne dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2d993-126">You can consider triggering the individual restores by the end-user connections or use some other application-specific priority scheme.</span></span>


<span data-ttu-id="2d993-127">W tym momencie w regionie odzyskiwania po awarii aplikacji jest znowu w trybie online, ale niektórzy klienci opóźnienie podczas uzyskiwania dostępu do swoich danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-127">At this point your application is back online in the DR region, but some customers experience delay when accessing their data.</span></span>

![Rysunek 2](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-2.png)

<span data-ttu-id="2d993-129">Jeśli awarii tymczasowe, jest możliwe, że regionu podstawowego zostaną odzyskane przy Azure przed przywracania bazy danych zostaną ukończone w regionie odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2d993-129">If the outage was temporary, it is possible that the primary region is recovered by Azure before all the database restores are complete in the DR region.</span></span> <span data-ttu-id="2d993-130">W takim przypadku organizowania przenoszenie aplikacji do regionu podstawowego.</span><span class="sxs-lookup"><span data-stu-id="2d993-130">In this case, orchestrate moving the application back to the primary region.</span></span> <span data-ttu-id="2d993-131">Ten proces trwa czynności przedstawione na diagramie dalej.</span><span class="sxs-lookup"><span data-stu-id="2d993-131">The process takes the steps illustrated on the next diagram.</span></span>

* <span data-ttu-id="2d993-132">Anulowanie wszystkich żądań oczekujących przywracaniem geograficznym.</span><span class="sxs-lookup"><span data-stu-id="2d993-132">Cancel all outstanding geo-restore requests.</span></span>   
* <span data-ttu-id="2d993-133">Tryb failover baz danych zarządzania w regionie podstawowym (5).</span><span class="sxs-lookup"><span data-stu-id="2d993-133">Fail over the management databases to the primary region (5).</span></span> <span data-ttu-id="2d993-134">Po odzyskaniu regionu starego kolory podstawowe automatycznie stały się pomocnicze bazy danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-134">After the region’s recovery, the old primaries have automatically become secondaries.</span></span> <span data-ttu-id="2d993-135">Teraz one ponownie przełączyć się ról.</span><span class="sxs-lookup"><span data-stu-id="2d993-135">Now they switch roles again.</span></span> 
* <span data-ttu-id="2d993-136">Zmień parametry połączenia aplikacji, aby wskazywały regionu podstawowego.</span><span class="sxs-lookup"><span data-stu-id="2d993-136">Change the application's connection string to point back to the primary region.</span></span> <span data-ttu-id="2d993-137">Teraz wszystkich nowych kont i baz danych dzierżawy są tworzone w regionie podstawowym.</span><span class="sxs-lookup"><span data-stu-id="2d993-137">Now all new accounts and tenant databases are created in the primary region.</span></span> <span data-ttu-id="2d993-138">Niektóre istniejących klientów, zobacz swoje dane, które są tymczasowo niedostępne.</span><span class="sxs-lookup"><span data-stu-id="2d993-138">Some existing customers see their data temporarily unavailable.</span></span>   
* <span data-ttu-id="2d993-139">Ustaw wszystkie bazy danych w puli DR tylko do odczytu do upewnij się, że nie można zmodyfikować w regionie DR (6).</span><span class="sxs-lookup"><span data-stu-id="2d993-139">Set all databases in the DR pool to read-only to ensure they cannot be modified in the DR region (6).</span></span> 
* <span data-ttu-id="2d993-140">Dla każdej bazy danych w puli DR, które uległy zmianie od czasu odzyskiwania Zmień lub usuń odpowiednie baz danych w puli głównej (7).</span><span class="sxs-lookup"><span data-stu-id="2d993-140">For each database in the DR pool that has changed since the recovery, rename or delete the corresponding databases in the primary pool (7).</span></span> 
* <span data-ttu-id="2d993-141">Skopiuj zaktualizowany baz danych z puli odzyskiwania po awarii do głównej puli (8).</span><span class="sxs-lookup"><span data-stu-id="2d993-141">Copy the updated databases from the DR pool to the primary pool (8).</span></span> 
* <span data-ttu-id="2d993-142">Usuwanie puli DR (9)</span><span class="sxs-lookup"><span data-stu-id="2d993-142">Delete the DR pool (9)</span></span>

<span data-ttu-id="2d993-143">W tym momencie aplikacji jest w trybie online w regionie podstawowym z wszystkich dzierżawy baz danych dostępnych w puli głównej.</span><span class="sxs-lookup"><span data-stu-id="2d993-143">At this point your application is online in the primary region with all tenant databases available in the primary pool.</span></span>

![Rysunek 3](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-3.png)

<span data-ttu-id="2d993-145">Klucz **korzystać** ta strategia jest niski koszt trwającą nadmiarowości warstwy danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-145">The key **benefit** of this strategy is low ongoing cost for data tier redundancy.</span></span> <span data-ttu-id="2d993-146">Kopie zapasowe są pobierane automatycznie przez usługę SQL Database z nie aplikacji ponownego zapisywania i bez ponoszenia dodatkowych kosztów.</span><span class="sxs-lookup"><span data-stu-id="2d993-146">Backups are taken automatically by the SQL Database service with no application rewrite and at no additional cost.</span></span>  <span data-ttu-id="2d993-147">Koszt poniesienia tylko wtedy, gdy zostaną przywrócone elastycznych baz danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-147">The cost is incurred only when the elastic databases are restored.</span></span> <span data-ttu-id="2d993-148">**Zależność** jest, że pełne odzyskiwania wszystkich baz danych dzierżawy ma długiego czasu.</span><span class="sxs-lookup"><span data-stu-id="2d993-148">The **trade-off** is that the complete recovery of all tenant databases takes significant time.</span></span> <span data-ttu-id="2d993-149">Czas zależy od całkowitej liczby operacji przywracania inicjowania w regionie odzyskiwania po awarii i całkowity rozmiar baz danych dzierżawy.</span><span class="sxs-lookup"><span data-stu-id="2d993-149">The length of time depends on the total number of restores you initiate in the DR region and overall size of the tenant databases.</span></span> <span data-ttu-id="2d993-150">Nawet jeśli niektórzy dzierżawcy przywraca priorytetem przez innych użytkowników, możesz konkurencyjnych wszystkich pozycji, które są inicjowane w tym samym regionie, jak usługa rozstrzyga o kolejności przetwarzania i ogranicza, aby zminimalizować ogólnego wpływu na istniejących klientów baz danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-150">Even if you prioritize some tenants' restores over others, you are competing with all the other restores that are initiated in the same region as the service arbitrates and throttles to minimize the overall impact on the existing customers' databases.</span></span> <span data-ttu-id="2d993-151">Ponadto odzyskiwania baz danych dzierżawy nie można uruchomić, dopóki nie zostanie utworzona nowa pula elastyczna w regionie odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2d993-151">In addition, the recovery of the tenant databases cannot start until the new elastic pool in the DR region is created.</span></span>

## <a name="scenario-2-mature-application-with-tiered-service"></a><span data-ttu-id="2d993-152">Scenariusz 2.</span><span class="sxs-lookup"><span data-stu-id="2d993-152">Scenario 2.</span></span> <span data-ttu-id="2d993-153">Dojrzała aplikacji z usługą warstwowych</span><span class="sxs-lookup"><span data-stu-id="2d993-153">Mature application with tiered service</span></span>
<span data-ttu-id="2d993-154"><i>Jestem dojrzałe aplikacji SaaS oferty usługi warstwowych i innej umowy SLA dla klientów z wersji próbnej i płatności klientów. W przypadku wersji próbnej klientów muszę możliwie kosztów. Klienci wersji próbnej może zająć Przestój, ale chcę, aby zmniejszyć prawdopodobieństwo jej. Płatniczych klientom przestój stanowi zagrożenie transmitowane. Tak, chcę upewnić się, że płatności klienci zawsze będą mogli uzyskiwać dostępu do danych.</i></span><span class="sxs-lookup"><span data-stu-id="2d993-154"><i>I am a mature SaaS application with tiered service offers and different SLAs for trial customers and for paying customers. For the trial customers, I have to reduce the cost as much as possible. Trial customers can take downtime but I want to reduce its likelihood. For the paying customers, any downtime is a flight risk. So I want to make sure that paying customers are always able to access their data.</i></span></span> 

<span data-ttu-id="2d993-155">Do obsługi tego scenariusza, należy oddzielić próbne z dzierżawcami płatnych przez umieszczenie ich w osobnych pulach elastycznej.</span><span class="sxs-lookup"><span data-stu-id="2d993-155">To support this scenario, separate the trial tenants from paid tenants by putting them into separate elastic pools.</span></span> <span data-ttu-id="2d993-156">Wersja próbna klienci mają niższe eDTU na dzierżawy i dolnym SLA dłuższego czasu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="2d993-156">The trial customers have lower eDTU per tenant and lower SLA with a longer recovery time.</span></span> <span data-ttu-id="2d993-157">Płatniczych klienci znajdują się w puli z wyższej eDTU na dzierżawę i wyższe umowy SLA.</span><span class="sxs-lookup"><span data-stu-id="2d993-157">The paying customers are in a pool with higher eDTU per tenant and a higher SLA.</span></span> <span data-ttu-id="2d993-158">Zagwarantowanie najniższy czasu odzyskiwania baz danych dzierżawy rzeczywistych klientów są replikacją geograficzną.</span><span class="sxs-lookup"><span data-stu-id="2d993-158">To guarantee the lowest recovery time, the paying customers' tenant databases are geo-replicated.</span></span> <span data-ttu-id="2d993-159">Ta konfiguracja została przedstawiona na diagramie dalej.</span><span class="sxs-lookup"><span data-stu-id="2d993-159">This configuration is illustrated on the next diagram.</span></span> 

![Rysunek 4](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-4.png)

<span data-ttu-id="2d993-161">Jak pierwszego scenariusza bazy danych zarządzania są bardzo aktywny, aby używać jednego replikacją geograficzną bazy danych dla niego (1).</span><span class="sxs-lookup"><span data-stu-id="2d993-161">As in the first scenario, the management databases are quite active so you use a single geo-replicated database for it (1).</span></span> <span data-ttu-id="2d993-162">Dzięki temu przewidywalną wydajność nowe subskrypcje klienta, aktualizacji profilu i innych operacji zarządzania.</span><span class="sxs-lookup"><span data-stu-id="2d993-162">This ensures the predictable performance for new customer subscriptions, profile updates, and other management operations.</span></span> <span data-ttu-id="2d993-163">Region, w którym znajdują się kolory podstawowe baz danych zarządzania jest regionie podstawowym i regionu, w którym znajdują się serwery baz danych zarządzania to region odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2d993-163">The region in which the primaries of the management databases reside is the primary region and the region in which the secondaries of the management databases reside is the DR region.</span></span>

<span data-ttu-id="2d993-164">Rzeczywistych klientów dzierżawcy z bazy danych ma aktywne baz danych w puli "płatną" udostępniane w regionie podstawowym.</span><span class="sxs-lookup"><span data-stu-id="2d993-164">The paying customers’ tenant databases have active databases in the “paid” pool provisioned in the primary region.</span></span> <span data-ttu-id="2d993-165">Udostępnić dodatkowej puli o takiej samej nazwie w regionie odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2d993-165">Provision a secondary pool with the same name in the DR region.</span></span> <span data-ttu-id="2d993-166">Poszczególni dzierżawcy jest replikacją geograficzną do dodatkowej puli (2).</span><span class="sxs-lookup"><span data-stu-id="2d993-166">Each tenant is geo-replicated to the secondary pool (2).</span></span> <span data-ttu-id="2d993-167">Umożliwia to szybkie odzyskiwanie wszystkie dzierżawy bazy danych przy użyciu trybu failover.</span><span class="sxs-lookup"><span data-stu-id="2d993-167">This enables quick recovery of all tenant databases using failover.</span></span> 

<span data-ttu-id="2d993-168">W przypadku wystąpienia awarii w regionie podstawowym, na dalej diagram przedstawiono kroki odzyskiwania można wyświetlić aplikacji w tryb online:</span><span class="sxs-lookup"><span data-stu-id="2d993-168">If an outage occurs in the primary region, the recovery steps to bring your application online are illustrated in the next diagram:</span></span>

![Rysunek 5](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-5.png)

* <span data-ttu-id="2d993-170">Natychmiast przełączyć bazy danych zarządzania do regionu DR (3).</span><span class="sxs-lookup"><span data-stu-id="2d993-170">Immediately fail over the management databases to the DR region (3).</span></span>
* <span data-ttu-id="2d993-171">Zmień parametry połączenia aplikacji wskaż region odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2d993-171">Change the application’s connection string to point to the DR region.</span></span> <span data-ttu-id="2d993-172">Teraz wszystkich nowych kont i baz danych dzierżawy są tworzone w regionie odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2d993-172">Now all new accounts and tenant databases are created in the DR region.</span></span> <span data-ttu-id="2d993-173">Istniejących klientów wersji próbnej, zobacz swoje dane, które są tymczasowo niedostępne.</span><span class="sxs-lookup"><span data-stu-id="2d993-173">The existing trial customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="2d993-174">Tryb failover płatną dzierżawy baz danych w puli w regionie odzyskiwania po awarii do przywrócenia natychmiast ich dostępności (4).</span><span class="sxs-lookup"><span data-stu-id="2d993-174">Fail over the paid tenant's databases to the pool in the DR region to immediately restore their availability (4).</span></span> <span data-ttu-id="2d993-175">Ponieważ przejście w tryb failover jest szybkie metadanych zmiany poziomu, należy wziąć pod uwagę optymalizacji, gdzie poszczególne pracy w trybie Failover są wyzwalane na żądanie przez użytkownika końcowego połączenia.</span><span class="sxs-lookup"><span data-stu-id="2d993-175">Since the failover is a quick metadata level change, consider an optimization where the individual failovers are triggered on demand by the end-user connections.</span></span> 
* <span data-ttu-id="2d993-176">Jeśli rozmiar eDTU puli dodatkowej został niższa niż podstawowy, ponieważ pomocniczej bazy danych tylko wymagane możliwości przetwarzania dzienniki zmian podczas były pomocnicze bazy danych, natychmiast zwiększyć pojemność puli teraz do uwzględnienia pełnego obciążenia wszystkich dzierżawców (5).</span><span class="sxs-lookup"><span data-stu-id="2d993-176">If your secondary pool eDTU size was lower than the primary because the secondary databases only required the capacity to process the change logs while they were secondaries, immediately increase the pool capacity now to accommodate the full workload of all tenants (5).</span></span> 
* <span data-ttu-id="2d993-177">Utwórz nową pulę elastyczną z tej samej nazwie i taką samą konfigurację w regionie odzyskiwania po awarii dla baz danych klientów wersji próbnej (6).</span><span class="sxs-lookup"><span data-stu-id="2d993-177">Create the new elastic pool with the same name and the same configuration in the DR region for the trial customers' databases (6).</span></span> 
* <span data-ttu-id="2d993-178">Po utworzeniu puli klientów wersji próbnej umożliwia geograficzne Przywróć poszczególne dzierżawy w wersji próbnej bazy danych do nowej puli (7).</span><span class="sxs-lookup"><span data-stu-id="2d993-178">Once the trial customers’ pool is created, use geo-restore to restore the individual trial tenant databases into the new pool (7).</span></span> <span data-ttu-id="2d993-179">Należy wziąć pod uwagę wyzwalania poszczególnych przywraca przez użytkownika końcowego połączenia lub użyj innego schematu priorytet specyficzne dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2d993-179">Consider triggering the individual restores by the end-user connections or use some other application-specific priority scheme.</span></span>

<span data-ttu-id="2d993-180">W tym momencie aplikacja jest znowu w trybie online w regionie odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2d993-180">At this point your application is back online in the DR region.</span></span> <span data-ttu-id="2d993-181">Wszyscy klienci płatniczych mają dostęp do ich danych, gdy klienci wersji próbnej opóźnienie podczas uzyskiwania dostępu do swoich danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-181">All paying customers have access to their data while the trial customers experience delay when accessing their data.</span></span>

<span data-ttu-id="2d993-182">Gdy regionu podstawowego zostaną odzyskane przy Azure *po* została przywrócona do aplikacji w regionie odzyskiwania po awarii, można kontynuować działania aplikacji w tym regionie lub można wybrać powrót po awarii do regionu podstawowego.</span><span class="sxs-lookup"><span data-stu-id="2d993-182">When the primary region is recovered by Azure *after* you have restored the application in the DR region you can continue running the application in that region or you can decide to fail back to the primary region.</span></span> <span data-ttu-id="2d993-183">Jeśli jest odzyskiwana regionu podstawowego *przed* zakończenie procesu pracy awaryjnej, należy wziąć pod uwagę w przypadku braku wstecz od razu.</span><span class="sxs-lookup"><span data-stu-id="2d993-183">If the primary region is recovered *before* the failover process is completed, consider failing back right away.</span></span> <span data-ttu-id="2d993-184">Powrót po awarii wykonuje czynności przedstawione na diagramie dalej:</span><span class="sxs-lookup"><span data-stu-id="2d993-184">The failback takes the steps illustrated in the next diagram:</span></span> 

![Rysunek 6.](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-6.png)

* <span data-ttu-id="2d993-186">Anulowanie wszystkich żądań oczekujących przywracaniem geograficznym.</span><span class="sxs-lookup"><span data-stu-id="2d993-186">Cancel all outstanding geo-restore requests.</span></span>   
* <span data-ttu-id="2d993-187">Tryb failover baz danych zarządzania (8).</span><span class="sxs-lookup"><span data-stu-id="2d993-187">Fail over the management databases (8).</span></span> <span data-ttu-id="2d993-188">Po odzyskaniu regionu stary serwer podstawowy automatycznie stanie się pomocniczej.</span><span class="sxs-lookup"><span data-stu-id="2d993-188">After the region’s recovery, the old primary automatically become the secondary.</span></span> <span data-ttu-id="2d993-189">Teraz ponownie staje się serwerem podstawowym.</span><span class="sxs-lookup"><span data-stu-id="2d993-189">Now it becomes the primary again.</span></span>  
* <span data-ttu-id="2d993-190">Tryb failover płatną dzierżawy baz danych (9).</span><span class="sxs-lookup"><span data-stu-id="2d993-190">Fail over the paid tenant databases (9).</span></span> <span data-ttu-id="2d993-191">Podobnie po odzyskaniu regionu starego kolory podstawowe automatycznie stanie się pomocnicze bazy danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-191">Similarly, after the region’s recovery, the old primaries automatically become the secondaries.</span></span> <span data-ttu-id="2d993-192">Teraz stają się one kolory podstawowe ponownie.</span><span class="sxs-lookup"><span data-stu-id="2d993-192">Now they become the primaries again.</span></span> 
* <span data-ttu-id="2d993-193">Ustaw przywróconej wersji próbnej baz danych, które zostały zmienione w regionie DR tylko do odczytu (10).</span><span class="sxs-lookup"><span data-stu-id="2d993-193">Set the restored trial databases that have changed in the DR region to read-only (10).</span></span>
* <span data-ttu-id="2d993-194">Dla każdej bazy danych z puli klientów wersji próbnej DR zmienione od czasu odzyskiwania Zmień lub Usuń odpowiednią bazę danych w puli głównej wersji próbnej klientów (11).</span><span class="sxs-lookup"><span data-stu-id="2d993-194">For each database in the trial customers DR pool that changed since the recovery, rename or delete the corresponding database in the trial customers primary pool (11).</span></span> 
* <span data-ttu-id="2d993-195">Skopiuj zaktualizowany baz danych z puli odzyskiwania po awarii do głównej puli (12).</span><span class="sxs-lookup"><span data-stu-id="2d993-195">Copy the updated databases from the DR pool to the primary pool (12).</span></span> 
* <span data-ttu-id="2d993-196">Usuwanie puli DR [13]</span><span class="sxs-lookup"><span data-stu-id="2d993-196">Delete the DR pool (13)</span></span> 

> [!NOTE]
> <span data-ttu-id="2d993-197">Operacja trybu failover jest asynchroniczne.</span><span class="sxs-lookup"><span data-stu-id="2d993-197">The failover operation is asynchronous.</span></span> <span data-ttu-id="2d993-198">Aby zminimalizować czas odzyskiwania należy wykonać polecenie pracy awaryjnej bazy dzierżawy w partiach co najmniej 20 baz danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-198">To minimize the recovery time it is important that you execute the tenant databases' failover command in batches of at least 20 databases.</span></span> 
> 
> 

<span data-ttu-id="2d993-199">Klucz **korzystać** tej strategii jest najwyższym umowy SLA dla klientów płatniczych.</span><span class="sxs-lookup"><span data-stu-id="2d993-199">The key **benefit** of this strategy is that it provides the highest SLA for the paying customers.</span></span> <span data-ttu-id="2d993-200">Gwarantuje również to nowe wersje próbne są odblokowane, natychmiast po utworzeniu puli DR wersji próbnej.</span><span class="sxs-lookup"><span data-stu-id="2d993-200">It also guarantees that the new trials are unblocked as soon as the trial DR pool is created.</span></span> <span data-ttu-id="2d993-201">**Zależność** otrzymuje czy taka konfiguracja zwiększa całkowity koszt baz danych dzierżawy przez koszt dodatkowej puli odzyskiwania po awarii dla klientów.</span><span class="sxs-lookup"><span data-stu-id="2d993-201">The **trade-off** is that this setup increases the total cost of the tenant databases by the cost of the secondary DR pool for paid customers.</span></span> <span data-ttu-id="2d993-202">Ponadto jeśli pula dodatkowej ma inny rozmiar, rzeczywistych klientów wydajność niższe po w tryb failover do czasu ukończenia uaktualniania puli w regionie odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2d993-202">In addition, if the secondary pool has a different size, the paying customers experience lower performance after failover until the pool upgrade in the DR region is completed.</span></span> 

## <a name="scenario-3-geographically-distributed-application-with-tiered-service"></a><span data-ttu-id="2d993-203">Scenariusz 3.</span><span class="sxs-lookup"><span data-stu-id="2d993-203">Scenario 3.</span></span> <span data-ttu-id="2d993-204">Geograficznie rozproszonych aplikacji przy użyciu usługi warstwowej</span><span class="sxs-lookup"><span data-stu-id="2d993-204">Geographically distributed application with tiered service</span></span>
<span data-ttu-id="2d993-205"><i>Masz dojrzałe aplikacji SaaS z ofertami warstwowych usługi. Chcę, aby oferować bardzo agresywnie SLA płatną klientów i ograniczyć ryzyko wpływ w przypadku wystąpienia awarii, ponieważ nawet krótki przerwania może spowodować niezadowolenie klienta. Bardzo ważne, czy płatniczych klienci mają zawsze dostęp do swoich danych jest. Wersje próbne są wolne i umowa SLA nie jest oferowany podczas okresu próbnego.</i></span><span class="sxs-lookup"><span data-stu-id="2d993-205"><i>I have a mature SaaS application with tiered service offers. I want to offer a very aggressive SLA to my paid customers and minimize the risk of impact when outages occur because even brief interruption can cause customer dissatisfaction. It is critical that the paying customers can always access their data. The trials are free and an SLA is not offered during the trial period. </i></span></span> 

<span data-ttu-id="2d993-206">Do obsługi tego scenariusza, należy użyć trzech oddzielnych elastyczne pule.</span><span class="sxs-lookup"><span data-stu-id="2d993-206">To support this scenario, use three separate elastic pools.</span></span> <span data-ttu-id="2d993-207">Udostępnić dwie pule taki sam rozmiar o wysokiej Edtu na bazę danych w dwóch różnych regionach zawiera klientów płatną dzierżawcy z bazy danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-207">Provision two equal size pools with high eDTUs per database in two different regions to contain the paid customers' tenant databases.</span></span> <span data-ttu-id="2d993-208">Trzeci puli zawierającej próbne może mieć niższy jednostek Edtu na bazę danych i udostępniane w jednym z dwóch regionach.</span><span class="sxs-lookup"><span data-stu-id="2d993-208">The third pool containing the trial tenants can have lower eDTUs per database and be provisioned in one of the two regions.</span></span>

<span data-ttu-id="2d993-209">W celu zagwarantowania najniższy czasu odzyskiwania podczas awarii, są bazy danych dzierżawy płacących odbiorców replikacją geograficzną z głównej bazy danych w dwóch regionach 50%.</span><span class="sxs-lookup"><span data-stu-id="2d993-209">To guarantee the lowest recovery time during outages, the paying customers' tenant databases are geo-replicated with 50% of the primary databases in each of the two regions.</span></span> <span data-ttu-id="2d993-210">Podobnie każdy region ma 50% dodatkowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-210">Similarly, each region has 50% of the secondary databases.</span></span> <span data-ttu-id="2d993-211">W ten sposób Jeśli region jest w trybie offline, tylko 50% klientów płatną bazy danych ma wpływ i mieć do pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="2d993-211">This way, if a region is offline, only 50% of the paid customers' databases are impacted and have to fail over.</span></span> <span data-ttu-id="2d993-212">Innych baz danych pozostaną nienaruszone.</span><span class="sxs-lookup"><span data-stu-id="2d993-212">The other databases remain intact.</span></span> <span data-ttu-id="2d993-213">Na poniższym diagramie przedstawiono tę konfigurację:</span><span class="sxs-lookup"><span data-stu-id="2d993-213">This configuration is illustrated in the following diagram:</span></span>

![Rysunek 4](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-7.png)

<span data-ttu-id="2d993-215">Jak w poprzednich scenariuszach bazy danych zarządzania są dość active tak skonfigurowane jako pojedyncze replikacją geograficzną bazy danych (1).</span><span class="sxs-lookup"><span data-stu-id="2d993-215">As in the previous scenarios, the management databases are quite active so configure them as single geo-replicated databases (1).</span></span> <span data-ttu-id="2d993-216">Zapewnia przewidywalną wydajność nowego klienta, subskrypcje, aktualizacji profilu i innych operacji zarządzania.</span><span class="sxs-lookup"><span data-stu-id="2d993-216">This ensures the predictable performance of the new customer subscriptions, profile updates and other management operations.</span></span> <span data-ttu-id="2d993-217">Region A jest regionu podstawowego dla baz danych zarządzania, a region B służy do odzyskiwania bazy danych zarządzania.</span><span class="sxs-lookup"><span data-stu-id="2d993-217">Region A is the primary region for the management databases and the region B is used for recovery of the management databases.</span></span>

<span data-ttu-id="2d993-218">Bazy danych dzierżawy rzeczywistych klientów są również replikacją geograficzną, ale z kolory podstawowe i pomocnicze podzielony między region A i region B (2).</span><span class="sxs-lookup"><span data-stu-id="2d993-218">The paying customers’ tenant databases are also geo-replicated but with primaries and secondaries split between region A and region B (2).</span></span> <span data-ttu-id="2d993-219">Bazy danych podstawowego dzierżawy wpływ awarii w ten sposób można przełączyć do innego regionu i stają się dostępne.</span><span class="sxs-lookup"><span data-stu-id="2d993-219">This way, the tenant primary databases impacted by the outage can fail over to the other region and become available.</span></span> <span data-ttu-id="2d993-220">Druga połowa dzierżawy baz danych nie można wpływ na cały.</span><span class="sxs-lookup"><span data-stu-id="2d993-220">The other half of the tenant databases are not be impacted at all.</span></span> 

<span data-ttu-id="2d993-221">Następny diagramie przedstawiono kroki odzyskiwania, aby podjąć w przypadku wystąpienia awarii w regionie A.</span><span class="sxs-lookup"><span data-stu-id="2d993-221">The next diagram illustrates the recovery steps to take if  an outage occurs in region A.</span></span>

![Rysunek 5](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-8.png)

* <span data-ttu-id="2d993-223">Bezpośrednio w trybie Failover zarządzania bazy danych do regionu B (3).</span><span class="sxs-lookup"><span data-stu-id="2d993-223">Immediately fail over the management databases to region B (3).</span></span>
* <span data-ttu-id="2d993-224">Zmień parametry połączenia aplikacji do punktu z bazami danych zarządzania w regionie B. zmodyfikować bazy danych zarządzania, aby upewnić się, że nowe konta i baz danych dzierżawy są tworzone w regionie B i istniejących baz danych dzierżawy znajdują się tam również.</span><span class="sxs-lookup"><span data-stu-id="2d993-224">Change the application’s connection string to point to the management databases in region B. Modify the management databases to make sure the new accounts and tenant databases are created in region B and the existing tenant databases are found there as well.</span></span> <span data-ttu-id="2d993-225">Istniejących klientów wersji próbnej, zobacz swoje dane, które są tymczasowo niedostępne.</span><span class="sxs-lookup"><span data-stu-id="2d993-225">The existing trial customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="2d993-226">Tryb failover płatną dzierżawy baz danych, do puli 2 w regionie B natychmiast przywrócić ich dostępności (4).</span><span class="sxs-lookup"><span data-stu-id="2d993-226">Fail over the paid tenant's databases to pool 2 in region B to immediately restore their availability (4).</span></span> <span data-ttu-id="2d993-227">Ponieważ przejście w tryb failover jest szybkie metadanych zmiany poziomu, można rozważyć optymalizacji, gdzie poszczególne pracy w trybie Failover są wyzwalane na żądanie przez użytkownika końcowego połączenia.</span><span class="sxs-lookup"><span data-stu-id="2d993-227">Since the failover is a quick metadata level change, you may consider an optimization where the individual failovers are triggered on demand by the end-user connections.</span></span> 
* <span data-ttu-id="2d993-228">Od teraz puli 2 zawiera tylko głównej bazy danych, całkowita obciążenie wzrost puli i natychmiast może zwiększyć rozmiaru eDTU (5).</span><span class="sxs-lookup"><span data-stu-id="2d993-228">Since now pool 2 contains only primary databases, the total workload in the pool increases and can immediately increase its eDTU size (5).</span></span> 
* <span data-ttu-id="2d993-229">Utwórz nową pulę elastyczną z tej samej nazwie i taką samą konfigurację w regionie B dla baz danych klientów wersji próbnej (6).</span><span class="sxs-lookup"><span data-stu-id="2d993-229">Create the new elastic pool with the same name and the same configuration in the region B for the trial customers' databases (6).</span></span> 
* <span data-ttu-id="2d993-230">Po utworzeniu puli umożliwia geograficzne przywrócenia poszczególne dzierżawy w wersji próbnej w puli (7).</span><span class="sxs-lookup"><span data-stu-id="2d993-230">Once the pool is created use geo-restore to restore the individual trial tenant database into the pool (7).</span></span> <span data-ttu-id="2d993-231">Można wziąć pod uwagę wyzwalania poszczególnych przywraca przez użytkownika końcowego połączenia lub użyj innego schematu priorytet specyficzne dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2d993-231">You can consider triggering the individual restores by the end-user connections or use some other application-specific priority scheme.</span></span>

> [!NOTE]
> <span data-ttu-id="2d993-232">Operacja trybu failover jest asynchroniczne.</span><span class="sxs-lookup"><span data-stu-id="2d993-232">The failover operation is asynchronous.</span></span> <span data-ttu-id="2d993-233">Aby zminimalizować czas odzyskiwania, należy wykonać polecenie pracy awaryjnej bazy dzierżawy w partiach co najmniej 20 baz danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-233">To minimize the recovery time, it is important that you execute the tenant databases' failover command in batches of at least 20 databases.</span></span> 
> 

<span data-ttu-id="2d993-234">W tym momencie aplikacja jest znowu w trybie online w regionie B. Wszyscy klienci płatniczych mają dostęp do ich danych, gdy klienci wersji próbnej opóźnienie podczas uzyskiwania dostępu do swoich danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-234">At this point your application is back online in region B. All paying customers have access to their data while the trial customers experience delay when accessing their data.</span></span>

<span data-ttu-id="2d993-235">Po odzyskaniu region A należy zdecydować, jeśli chcesz użyć region B dla klientów z wersji próbnej lub powrotu po awarii przy użyciu puli klientów wersji próbnej w regionie A. Jedno kryterium można % baz danych dzierżawy w wersji próbnej modyfikowany od czasu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="2d993-235">When region A is recovered you need to decide if you want to use region B for trial customers or failback to using the trial customers pool in region A. One criteria could be the % of trial tenant databases modified since the recovery.</span></span> <span data-ttu-id="2d993-236">Niezależnie od tej decyzji musisz ponownie zrównoważyć płatną dzierżawcy między dwoma zestawami.</span><span class="sxs-lookup"><span data-stu-id="2d993-236">Regardless of that decision, you need to re-balance the paid tenants between two pools.</span></span> <span data-ttu-id="2d993-237">Następny diagramie został pokazany proces w przypadku baz danych dzierżawy w wersji próbnej powrót po awarii do regionu A.</span><span class="sxs-lookup"><span data-stu-id="2d993-237">the next diagram illustrates the process when the trial tenant databases fail back to region A.</span></span>  

![Rysunek 6.](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-9.png)

* <span data-ttu-id="2d993-239">Anulowanie wszystkich żądań oczekujących przywracaniem geograficznym do wersji próbnej puli odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2d993-239">Cancel all outstanding geo-restore requests to trial DR pool.</span></span>   
* <span data-ttu-id="2d993-240">Tryb failover bazie danych zarządzania (8).</span><span class="sxs-lookup"><span data-stu-id="2d993-240">Fail over the management database (8).</span></span> <span data-ttu-id="2d993-241">Po odzyskaniu regionu stary serwer podstawowy automatycznie aktywowano pomocniczej.</span><span class="sxs-lookup"><span data-stu-id="2d993-241">After the region’s recovery, the old primary automatically became the secondary.</span></span> <span data-ttu-id="2d993-242">Teraz ponownie staje się serwerem podstawowym.</span><span class="sxs-lookup"><span data-stu-id="2d993-242">Now it becomes the primary again.</span></span>  
* <span data-ttu-id="2d993-243">Wybierz, które płatną dzierżawy baz danych powrót po awarii do puli 1 i zainicjuj tryb failover ich pomocnicze bazy danych (9).</span><span class="sxs-lookup"><span data-stu-id="2d993-243">Select which paid tenant databases fail back to pool 1 and initiate failover to their secondaries (9).</span></span> <span data-ttu-id="2d993-244">Po odzyskaniu regionu wszystkie bazy danych w puli 1 została automatycznie pomocnicze bazy danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-244">After the region’s recovery, all databases in pool 1 automatically became secondaries.</span></span> <span data-ttu-id="2d993-245">Teraz 50% ich stają się ponownie kolory podstawowe.</span><span class="sxs-lookup"><span data-stu-id="2d993-245">Now 50% of them become primaries again.</span></span> 
* <span data-ttu-id="2d993-246">Zmniejsz rozmiar puli 2 do oryginalnego eDTU (10).</span><span class="sxs-lookup"><span data-stu-id="2d993-246">Reduce the size of pool 2 to the original eDTU (10).</span></span>
* <span data-ttu-id="2d993-247">Ustaw wszystkie przywrócone wersji próbnej baz danych w regionie B tylko do odczytu (11).</span><span class="sxs-lookup"><span data-stu-id="2d993-247">Set all restored trial databases in the region B to read-only (11).</span></span>
* <span data-ttu-id="2d993-248">Dla każdej bazy danych w wersji próbnej puli odzyskiwania po awarii, który zmienił się od czasu odzyskiwania Zmień lub Usuń odpowiednią bazę danych w puli głównej wersji próbnej (12).</span><span class="sxs-lookup"><span data-stu-id="2d993-248">For each database in the trial DR pool that has changed since the recovery, rename or delete the corresponding database in the trial primary pool (12).</span></span> 
* <span data-ttu-id="2d993-249">Skopiuj zaktualizowany baz danych z puli odzyskiwania po awarii do głównej puli [13].</span><span class="sxs-lookup"><span data-stu-id="2d993-249">Copy the updated databases from the DR pool to the primary pool (13).</span></span> 
* <span data-ttu-id="2d993-250">Usuwanie puli DR (14)</span><span class="sxs-lookup"><span data-stu-id="2d993-250">Delete the DR pool (14)</span></span> 

<span data-ttu-id="2d993-251">Klucz **korzyści** tej strategii są:</span><span class="sxs-lookup"><span data-stu-id="2d993-251">The key **benefits** of this strategy are:</span></span>

* <span data-ttu-id="2d993-252">Obsługuje ona najbardziej agresywne SLA płatniczych klientom ponieważ zapewnia, że awarii nie może mieć wpływ na więcej niż 50% dzierżawy baz danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-252">It supports the most aggressive SLA for the paying customers because it ensures that an outage cannot impact more than 50% of the tenant databases.</span></span> 
* <span data-ttu-id="2d993-253">Gwarantuje on, nowe wersje próbne są odblokowane, jak dziennik DR puli jest tworzona podczas odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="2d993-253">It guarantees that the new trials are unblocked as soon as the trail DR pool is created during the recovery.</span></span> 
* <span data-ttu-id="2d993-254">Umożliwia efektywniejsze wykorzystanie pojemności puli 50% dodatkowej bazy danych w puli 1 i 2 puli zapewniona jest mniej aktywne niż głównej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="2d993-254">It allows more efficient use of the pool capacity as 50% of secondary databases in pool 1 and pool 2 are guaranteed to be less active than the primary databases.</span></span>

<span data-ttu-id="2d993-255">Głównym **kompromisy** są:</span><span class="sxs-lookup"><span data-stu-id="2d993-255">The main **trade-offs** are:</span></span>

* <span data-ttu-id="2d993-256">Operacje CRUD baz danych zarządzania mają mniejsze opóźnienia dla użytkowników końcowych podłączone do regionu A niż dla użytkowników końcowych podłączone do regionu B, ponieważ są one wykonywane względem podstawowej bazy danych zarządzania.</span><span class="sxs-lookup"><span data-stu-id="2d993-256">The CRUD operations against the management databases have lower latency for the end users connected to region A than for the end users connected to region B as they are executed against the primary of the management databases.</span></span>
* <span data-ttu-id="2d993-257">Wymaga to bardziej złożonych projektu bazy danych zarządzania.</span><span class="sxs-lookup"><span data-stu-id="2d993-257">It requires more complex design of the management database.</span></span> <span data-ttu-id="2d993-258">Na przykład każdy rekord dzierżawy ma tag lokalizacji, która musi zostać zmienione w tryb failover i powrotu po awarii.</span><span class="sxs-lookup"><span data-stu-id="2d993-258">For example, each tenant record has a location tag that needs to be changed during failover and failback.</span></span>  
* <span data-ttu-id="2d993-259">Płatniczych klientów może zgłaszać obniżenia wydajności niż zwykle, aż do zakończenia uaktualnienia puli w regionie B.</span><span class="sxs-lookup"><span data-stu-id="2d993-259">The paying customers may experience lower performance than usual until the pool upgrade in region B is completed.</span></span> 

## <a name="summary"></a><span data-ttu-id="2d993-260">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="2d993-260">Summary</span></span>
<span data-ttu-id="2d993-261">Ten artykuł skupia się na strategii odzyskiwania po awarii dla warstwy bazy danych używana przez aplikację wielodostępne SaaS niezależnego dostawcy oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="2d993-261">This article focuses on the disaster recovery strategies for the database tier used by a SaaS ISV multi-tenant application.</span></span> <span data-ttu-id="2d993-262">Strategia wybrane opiera się na potrzeby aplikacji, takich jak model biznesowy, umowy dotyczącej poziomu usług, aby oferować klientom, budżetu ograniczenia itp. Każdej strategii opisane przedstawiono zalety i zależność, można podjąć świadomej decyzji.</span><span class="sxs-lookup"><span data-stu-id="2d993-262">The strategy you choose is based on the needs of the application, such as the business model, the SLA you want to offer to your customers, budget constraint etc. Each described strategy outlines the benefits and trade-off so you could make an informed decision.</span></span> <span data-ttu-id="2d993-263">Określonych aplikacji może także inne składniki platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="2d993-263">Also, your specific application likely includes other Azure components.</span></span> <span data-ttu-id="2d993-264">Aby przejrzeć ich wskazówki ciągłości biznesowej i organizowania odzyskiwania warstwy bazy danych z nimi.</span><span class="sxs-lookup"><span data-stu-id="2d993-264">So you review their business continuity guidance and orchestrate the recovery of the database tier with them.</span></span> <span data-ttu-id="2d993-265">Aby dowiedzieć się więcej o zarządzaniu odzyskiwania bazy danych aplikacji na platformie Azure, zobacz [projektowania rozwiązań chmury odzyskiwania po awarii](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="2d993-265">To learn more about managing recovery of database applications in Azure, refer to [Designing cloud solutions for disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>  

## <a name="next-steps"></a><span data-ttu-id="2d993-266">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="2d993-266">Next steps</span></span>
* <span data-ttu-id="2d993-267">Aby dowiedzieć się więcej na temat usługi Azure SQL bazy danych automatycznego tworzenia kopii zapasowych, zobacz [bazy danych SQL automatycznego tworzenia kopii zapasowych](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="2d993-267">To learn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="2d993-268">Omówienie ciągłości działalności biznesowej i scenariuszy, zobacz [omówienie ciągłości działalności biznesowej](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="2d993-268">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md).</span></span>
* <span data-ttu-id="2d993-269">Aby dowiedzieć się więcej o używaniu kopie zapasowe automatycznego odzyskiwania, zobacz [przywrócić bazę danych z kopii zapasowych inicjowane przez usługę](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="2d993-269">To learn about using automated backups for recovery, see [restore a database from the service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="2d993-270">Informacje na temat opcji odzyskiwania szybsze, zobacz [aktywna replikacja geograficzna](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2d993-270">To learn about faster recovery options, see [active geo-replication](sql-database-geo-replication-overview.md).</span></span>
* <span data-ttu-id="2d993-271">Aby dowiedzieć się, za pomocą automatycznych kopii zapasowej do archiwizacji, zobacz [kopiowanie bazy danych](sql-database-copy.md).</span><span class="sxs-lookup"><span data-stu-id="2d993-271">To learn about using automated backups for archiving, see [database copy](sql-database-copy.md).</span></span>

