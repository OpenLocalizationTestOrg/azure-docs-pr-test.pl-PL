---
title: "rozwiązania w zakresie odzyskiwania po awarii aaaDesign — baza danych SQL Azure | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak toodesign rozwiązania chmury odzyskiwania po awarii, wybierając hello wzorzec prawo trybu failover."
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2db99057-0c79-4fb0-a7f1-d1c057ec787f
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/07/2017
ms.author: sashan;carlrab
ms.openlocfilehash: 9d9eca7570c7a01c992d0b33d449721709b471c3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="disaster-recovery-strategies-for-applications-using-sql-database-elastic-pools"></a><span data-ttu-id="85eb7-103">Strategie odzyskiwania po awarii dla aplikacji wykorzystujących pule elastyczne bazy danych SQL</span><span class="sxs-lookup"><span data-stu-id="85eb7-103">Disaster recovery strategies for applications using SQL Database elastic pools</span></span>
<span data-ttu-id="85eb7-104">Latach hello ma dowiedzieliśmy się, że usługi w chmurze nie są niezawodne i stanie krytycznego zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="85eb7-104">Over hello years we have learned that cloud services are not foolproof and catastrophic incidents happen.</span></span> <span data-ttu-id="85eb7-105">Baza danych SQL udostępnia kilka możliwości tooprovide dla hello ciągłości działalności biznesowej aplikacji, gdy zdarzenia te występują.</span><span class="sxs-lookup"><span data-stu-id="85eb7-105">SQL Database provides several capabilities tooprovide for hello business continuity of your application when these incidents occur.</span></span> <span data-ttu-id="85eb7-106">[Pule elastyczne](sql-database-elastic-pool.md) i pojedynczych baz danych obsługują hello tego samego rodzaju możliwości odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="85eb7-106">[Elastic pools](sql-database-elastic-pool.md) and single databases support hello same kind of disaster recovery capabilities.</span></span> <span data-ttu-id="85eb7-107">W tym artykule opisano kilka strategii odzyskiwania po awarii dla pul elastyczna korzystać z tych funkcjach ciągłości biznesowej bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="85eb7-107">This article describes several DR strategies for elastic pools that leverage these SQL Database business continuity features.</span></span>

<span data-ttu-id="85eb7-108">W tym artykule wykorzystano powitania po canonical wzorzec aplikacji SaaS niezależnego dostawcy oprogramowania:</span><span class="sxs-lookup"><span data-stu-id="85eb7-108">This article uses hello following canonical SaaS ISV application pattern:</span></span>

<span data-ttu-id="85eb7-109"><i>Aplikacja sieci web opartej na chmurze nowoczesnych inicjuje jednej bazy danych SQL dla każdego użytkownika końcowego. Witaj niezależnego dostawcy oprogramowania ma wielu klientów i w związku z tym używa wielu baz danych, nazywane dzierżawy baz danych. Ponieważ hello dzierżawcy z bazy danych mają zwykle działania nieprzewidywalnych wzorców, hello niezależnego dostawcy oprogramowania puli elastycznej toomake hello bazy danych koszt używany bardzo przewidywalną przez dłuższy czas. puli elastycznej Hello także upraszcza zarządzanie wydajności hello, gdy wzrósł hello aktywności użytkownika. Ponadto aplikacji hello baz danych dzierżawy toohello używa wielu baz danych profilów użytkowników toomanage, zabezpieczeń, zbieranie wzorców użycia itd. Dostępność hello poszczególnych dzierżawców nie wpływa na dostępność aplikacji hello jako całość. Jednak hello dostępność i wydajność bazy danych zarządzania ma kluczowe znaczenie dla funkcji aplikacji hello i jeśli bazy danych zarządzania hello są w trybie offline hello całej aplikacji jest w trybie offline.</i></span><span class="sxs-lookup"><span data-stu-id="85eb7-109"><i>A modern cloud-based web application provisions one SQL database for each end user. hello ISV has many customers and therefore uses many databases, known as tenant databases. Because hello tenant databases typically have unpredictable activity patterns, hello ISV uses an elastic pool toomake hello database cost very predictable over extended periods of time. hello elastic pool also simplifies hello performance management when hello user activity spikes. In addition toohello tenant databases hello application also uses several databases toomanage user profiles, security, collect usage patterns etc. Availability of hello individual tenants does not impact hello application’s availability as whole. However, hello availability and performance of management databases is critical for hello application’s function and if hello management databases are offline hello entire application is offline.</i></span></span>  

<span data-ttu-id="85eb7-110">W tym artykule omówiono strategii odzyskiwania po awarii, obejmujących szereg scenariuszy z koszt poufnych uruchamiania aplikacji tooones wymagania rygorystyczne dostępności.</span><span class="sxs-lookup"><span data-stu-id="85eb7-110">This article discusses DR strategies covering a range of scenarios from cost sensitive startup applications tooones with stringent availability requirements.</span></span>

## <a name="scenario-1-cost-sensitive-startup"></a><span data-ttu-id="85eb7-111">Scenariusz 1.</span><span class="sxs-lookup"><span data-stu-id="85eb7-111">Scenario 1.</span></span> <span data-ttu-id="85eb7-112">Koszt poufnych uruchamiania</span><span class="sxs-lookup"><span data-stu-id="85eb7-112">Cost sensitive startup</span></span>
<span data-ttu-id="85eb7-113"><i>I am firm uruchamiania i bardzo jestem koszt poufnych.  Chcę toosimplify wdrażania i zarządzania aplikacji hello i I ma ograniczone umowy SLA dla poszczególnych odbiorców. Ale chcę aplikacji hello tooensure jako całość nigdy nie jest w trybie offline.</i></span><span class="sxs-lookup"><span data-stu-id="85eb7-113"><i>I am a startup business and am extremely cost sensitive.  I want toosimplify deployment and management of hello application and I can have a limited SLA for individual customers. But I want tooensure hello application as a whole is never offline.</i></span></span>

<span data-ttu-id="85eb7-114">wymaganie prostota hello toosatisfy, wdrażanie wszystkich dzierżawy baz danych w jednej puli elastycznej w hello region platformy Azure w wybranym i wdrażanie baz danych zarządzania jako replikacją geograficzną pojedynczych baz danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-114">toosatisfy hello simplicity requirement, deploy all tenant databases into one elastic pool in hello Azure region of your choice and deploy management databases as geo-replicated single databases.</span></span> <span data-ttu-id="85eb7-115">W przypadku odzyskiwania po awarii hello dzierżawców Użyj przywracaniem geograficznym, które pojawia się bez ponoszenia dodatkowych kosztów.</span><span class="sxs-lookup"><span data-stu-id="85eb7-115">For hello disaster recovery of tenants, use geo-restore, which comes at no additional cost.</span></span> <span data-ttu-id="85eb7-116">dostępność hello tooensure hello zarządzania bazami danych, replikacja geograficzna, ich region tooanother za pomocą trybu failover automatycznie grupy (w — wersja zapoznawcza) (krok 1).</span><span class="sxs-lookup"><span data-stu-id="85eb7-116">tooensure hello availability of hello management databases, geo-replicate them tooanother region using an auto-failover group (in-preview) (step 1).</span></span> <span data-ttu-id="85eb7-117">Koszt trwającą Hello hello konfiguracji odzyskiwania po awarii w tym scenariuszu jest równy toohello całkowity koszt hello pomocniczej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-117">hello ongoing cost of hello disaster recovery configuration in this scenario is equal toohello total cost of hello secondary databases.</span></span> <span data-ttu-id="85eb7-118">Ta konfiguracja została przedstawiona na diagramie dalej hello.</span><span class="sxs-lookup"><span data-stu-id="85eb7-118">This configuration is illustrated on hello next diagram.</span></span>

![Rysunek 1.](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-1.png)

<span data-ttu-id="85eb7-120">W przypadku wystąpienia awarii w regionie podstawowym hello, toobring kroki odzyskiwania hello aplikacji w trybie online są zilustrowane hello dalej diagramu.</span><span class="sxs-lookup"><span data-stu-id="85eb7-120">If an outage occurs in hello primary region, hello recovery steps toobring your application online are illustrated by hello next diagram.</span></span>

* <span data-ttu-id="85eb7-121">grupy pracy awaryjnej Hello inicjuje automatycznej pracy awaryjnej hello zarządzania bazy danych toohello DR regionu.</span><span class="sxs-lookup"><span data-stu-id="85eb7-121">hello failover group initiates automatic failover of hello management database toohello DR region.</span></span> <span data-ttu-id="85eb7-122">Aplikacja Hello jest automatycznie ponownie połączony toohello nowych kont głównych i wszystkich nowych i baz danych dzierżawy są tworzone w regionie DR hello.</span><span class="sxs-lookup"><span data-stu-id="85eb7-122">hello application is automatically reconnected toohello new primary and all new accounts and tenant databases are created in hello DR region.</span></span> <span data-ttu-id="85eb7-123">Witaj istniejących klientów, zobacz swoje dane, które są tymczasowo niedostępne.</span><span class="sxs-lookup"><span data-stu-id="85eb7-123">hello existing customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="85eb7-124">Tworzenie puli elastycznej hello przy użyciu hello samej konfiguracji jak hello oryginalnego puli (2).</span><span class="sxs-lookup"><span data-stu-id="85eb7-124">Create hello elastic pool with hello same configuration as hello original pool (2).</span></span>
* <span data-ttu-id="85eb7-125">Użyj geograficzne toocreate kopii baz danych, hello dzierżawy (3).</span><span class="sxs-lookup"><span data-stu-id="85eb7-125">Use geo-restore toocreate copies of hello tenant databases (3).</span></span> <span data-ttu-id="85eb7-126">Można wziąć pod uwagę wyzwalania przywraca poszczególnych hello przez połączenia przez użytkownika końcowego hello lub użyć innego systemu priorytet specyficzne dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="85eb7-126">You can consider triggering hello individual restores by hello end-user connections or use some other application-specific priority scheme.</span></span>


<span data-ttu-id="85eb7-127">W tym momencie w regionie DR hello aplikacji jest znowu w trybie online, ale niektórzy klienci opóźnienie podczas uzyskiwania dostępu do swoich danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-127">At this point your application is back online in hello DR region, but some customers experience delay when accessing their data.</span></span>

![Rysunek 2](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-2.png)

<span data-ttu-id="85eb7-129">Jeśli awaria hello tymczasowe, istnieje możliwość tego regionu podstawowego hello zostaną odzyskane przy Azure, zanim wszystkie przywracania bazy danych hello są kompletne w regionie hello odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="85eb7-129">If hello outage was temporary, it is possible that hello primary region is recovered by Azure before all hello database restores are complete in hello DR region.</span></span> <span data-ttu-id="85eb7-130">W takim przypadku organizowania przenoszenie hello aplikacji wstecz toohello regionu podstawowego.</span><span class="sxs-lookup"><span data-stu-id="85eb7-130">In this case, orchestrate moving hello application back toohello primary region.</span></span> <span data-ttu-id="85eb7-131">proces Hello trwa hello czynności przedstawione na diagramie dalej hello.</span><span class="sxs-lookup"><span data-stu-id="85eb7-131">hello process takes hello steps illustrated on hello next diagram.</span></span>

* <span data-ttu-id="85eb7-132">Anulowanie wszystkich żądań oczekujących przywracaniem geograficznym.</span><span class="sxs-lookup"><span data-stu-id="85eb7-132">Cancel all outstanding geo-restore requests.</span></span>   
* <span data-ttu-id="85eb7-133">Tryb failover hello zarządzania bazami danych toohello regionu podstawowego (5).</span><span class="sxs-lookup"><span data-stu-id="85eb7-133">Fail over hello management databases toohello primary region (5).</span></span> <span data-ttu-id="85eb7-134">Po odzyskaniu hello region starego kolory podstawowe hello automatycznie stały się pomocnicze bazy danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-134">After hello region’s recovery, hello old primaries have automatically become secondaries.</span></span> <span data-ttu-id="85eb7-135">Teraz one ponownie przełączyć się ról.</span><span class="sxs-lookup"><span data-stu-id="85eb7-135">Now they switch roles again.</span></span> 
* <span data-ttu-id="85eb7-136">Zmienianie aplikacji hello połączenia ciąg toopoint wstecz toohello głównej regionu.</span><span class="sxs-lookup"><span data-stu-id="85eb7-136">Change hello application's connection string toopoint back toohello primary region.</span></span> <span data-ttu-id="85eb7-137">Teraz wszystkich nowych kont i baz danych dzierżawy są tworzone w regionie podstawowym hello.</span><span class="sxs-lookup"><span data-stu-id="85eb7-137">Now all new accounts and tenant databases are created in hello primary region.</span></span> <span data-ttu-id="85eb7-138">Niektóre istniejących klientów, zobacz swoje dane, które są tymczasowo niedostępne.</span><span class="sxs-lookup"><span data-stu-id="85eb7-138">Some existing customers see their data temporarily unavailable.</span></span>   
* <span data-ttu-id="85eb7-139">Ustaw wszystkie bazy danych w hello DR puli tylko tooread tooensure nie można modyfikować w regionie DR hello (6).</span><span class="sxs-lookup"><span data-stu-id="85eb7-139">Set all databases in hello DR pool tooread-only tooensure they cannot be modified in hello DR region (6).</span></span> 
* <span data-ttu-id="85eb7-140">Dla każdej bazy danych w hello DR puli, która została zmieniona od czasu odzyskiwania hello Zmień lub usuń hello odpowiednie baz danych w puli głównej hello (7).</span><span class="sxs-lookup"><span data-stu-id="85eb7-140">For each database in hello DR pool that has changed since hello recovery, rename or delete hello corresponding databases in hello primary pool (7).</span></span> 
* <span data-ttu-id="85eb7-141">Kopia hello zaktualizować bazy danych z hello DR toohello głównej puli (8).</span><span class="sxs-lookup"><span data-stu-id="85eb7-141">Copy hello updated databases from hello DR pool toohello primary pool (8).</span></span> 
* <span data-ttu-id="85eb7-142">Usuwanie puli DR hello (9)</span><span class="sxs-lookup"><span data-stu-id="85eb7-142">Delete hello DR pool (9)</span></span>

<span data-ttu-id="85eb7-143">W tym momencie aplikacji jest w trybie online w regionie podstawowym hello z wszystkich dzierżawy baz danych dostępnych w puli głównej hello.</span><span class="sxs-lookup"><span data-stu-id="85eb7-143">At this point your application is online in hello primary region with all tenant databases available in hello primary pool.</span></span>

![Rysunek 3](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-3.png)

<span data-ttu-id="85eb7-145">klucz Hello **korzystać** ta strategia jest niski koszt trwającą nadmiarowości warstwy danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-145">hello key **benefit** of this strategy is low ongoing cost for data tier redundancy.</span></span> <span data-ttu-id="85eb7-146">Kopie zapasowe są pobierane automatycznie przez hello usługi baza danych SQL z nie aplikacji ponownego zapisywania i bez ponoszenia dodatkowych kosztów.</span><span class="sxs-lookup"><span data-stu-id="85eb7-146">Backups are taken automatically by hello SQL Database service with no application rewrite and at no additional cost.</span></span>  <span data-ttu-id="85eb7-147">Koszt Hello poniesienia tylko wtedy, gdy zostaną przywrócone hello elastycznych baz danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-147">hello cost is incurred only when hello elastic databases are restored.</span></span> <span data-ttu-id="85eb7-148">Witaj **zależność** jest, że hello ukończenia odzyskiwania wszystkich baz danych dzierżawy ma długiego czasu.</span><span class="sxs-lookup"><span data-stu-id="85eb7-148">hello **trade-off** is that hello complete recovery of all tenant databases takes significant time.</span></span> <span data-ttu-id="85eb7-149">Witaj czas zależy od hello całkowitej liczby operacji przywracania inicjowania w hello DR regionu i całkowitego rozmiaru hello dzierżawy baz danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-149">hello length of time depends on hello total number of restores you initiate in hello DR region and overall size of hello tenant databases.</span></span> <span data-ttu-id="85eb7-150">Nawet w przypadku przywracania niektórzy dzierżawcy jest priorytety przez innych użytkowników, rywalizuje o hello wszystkich innych operacji przywracania, które są inicjowane w hello tego samego regionu jako usługa hello rozstrzyga o kolejności przetwarzania i ogranicza toominimize hello ogólnego wpływu na powitania klientów istniejących baz danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-150">Even if you prioritize some tenants' restores over others, you are competing with all hello other restores that are initiated in hello same region as hello service arbitrates and throttles toominimize hello overall impact on hello existing customers' databases.</span></span> <span data-ttu-id="85eb7-151">Ponadto hello odzyskiwania baz danych dzierżawy hello nie można uruchomić, dopóki nie zostanie utworzona nowa pula elastyczna hello w regionie DR hello.</span><span class="sxs-lookup"><span data-stu-id="85eb7-151">In addition, hello recovery of hello tenant databases cannot start until hello new elastic pool in hello DR region is created.</span></span>

## <a name="scenario-2-mature-application-with-tiered-service"></a><span data-ttu-id="85eb7-152">Scenariusz 2.</span><span class="sxs-lookup"><span data-stu-id="85eb7-152">Scenario 2.</span></span> <span data-ttu-id="85eb7-153">Dojrzała aplikacji z usługą warstwowych</span><span class="sxs-lookup"><span data-stu-id="85eb7-153">Mature application with tiered service</span></span>
<span data-ttu-id="85eb7-154"><i>Jestem dojrzałe aplikacji SaaS oferty usługi warstwowych i innej umowy SLA dla klientów z wersji próbnej i płatności klientów. W przypadku wersji próbnej klientów hello masz hello tooreduce koszt możliwie. Klienci wersji próbnej może zająć Przestój, ale chcę tooreduce jego prawdopodobieństwo. W przypadku płatności klientom Witaj przestój jest ryzyko transmitowane. Tak, chcę toomake się, że klienci płatniczych są zawsze tooaccess stanie ich danych.</i></span><span class="sxs-lookup"><span data-stu-id="85eb7-154"><i>I am a mature SaaS application with tiered service offers and different SLAs for trial customers and for paying customers. For hello trial customers, I have tooreduce hello cost as much as possible. Trial customers can take downtime but I want tooreduce its likelihood. For hello paying customers, any downtime is a flight risk. So I want toomake sure that paying customers are always able tooaccess their data.</i></span></span> 

<span data-ttu-id="85eb7-155">toosupport, w tym scenariuszu oddzielne hello próbne z płatnej dzierżawcy przez umieszczenie ich w osobnych pulach elastycznej.</span><span class="sxs-lookup"><span data-stu-id="85eb7-155">toosupport this scenario, separate hello trial tenants from paid tenants by putting them into separate elastic pools.</span></span> <span data-ttu-id="85eb7-156">Klienci wersji próbnej Hello mają niższe eDTU na dzierżawy i dolnym SLA dłuższego czasu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="85eb7-156">hello trial customers have lower eDTU per tenant and lower SLA with a longer recovery time.</span></span> <span data-ttu-id="85eb7-157">płatniczych klientom Witaj znajdują się w puli z wyższej eDTU na dzierżawę i wyższe umowy SLA.</span><span class="sxs-lookup"><span data-stu-id="85eb7-157">hello paying customers are in a pool with higher eDTU per tenant and a higher SLA.</span></span> <span data-ttu-id="85eb7-158">tooguarantee hello najniższy czas odzyskiwania, baz danych dzierżawy hello płatniczych klientów są replikacją geograficzną.</span><span class="sxs-lookup"><span data-stu-id="85eb7-158">tooguarantee hello lowest recovery time, hello paying customers' tenant databases are geo-replicated.</span></span> <span data-ttu-id="85eb7-159">Ta konfiguracja została przedstawiona na diagramie dalej hello.</span><span class="sxs-lookup"><span data-stu-id="85eb7-159">This configuration is illustrated on hello next diagram.</span></span> 

![Rysunek 4](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-4.png)

<span data-ttu-id="85eb7-161">Jak hello pierwszego scenariusza baz danych zarządzania hello jest dość aktywnych, aby używać jednego replikacją geograficzną bazy danych dla niego (1).</span><span class="sxs-lookup"><span data-stu-id="85eb7-161">As in hello first scenario, hello management databases are quite active so you use a single geo-replicated database for it (1).</span></span> <span data-ttu-id="85eb7-162">Dzięki temu hello przewidywalną wydajność nowe subskrypcje klienta, aktualizacji profilu i innych operacji zarządzania.</span><span class="sxs-lookup"><span data-stu-id="85eb7-162">This ensures hello predictable performance for new customer subscriptions, profile updates, and other management operations.</span></span> <span data-ttu-id="85eb7-163">Witaj regionu, w którym znajdują się kolory podstawowe hello baz danych zarządzania hello jest hello regionu podstawowego i hello regionu, w którym znajdują się hello pomocniczych baz danych zarządzania hello jest region hello odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="85eb7-163">hello region in which hello primaries of hello management databases reside is hello primary region and hello region in which hello secondaries of hello management databases reside is hello DR region.</span></span>

<span data-ttu-id="85eb7-164">Witaj płacących odbiorców dzierżawcy z bazy danych ma active baz danych w puli udostępniane w regionie podstawowym hello "płatnej" hello.</span><span class="sxs-lookup"><span data-stu-id="85eb7-164">hello paying customers’ tenant databases have active databases in hello “paid” pool provisioned in hello primary region.</span></span> <span data-ttu-id="85eb7-165">Udostępnić dodatkowej puli z hello takie same nazwy w regionie hello odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="85eb7-165">Provision a secondary pool with hello same name in hello DR region.</span></span> <span data-ttu-id="85eb7-166">Poszczególni dzierżawcy jest puli dodatkowej toohello replikacją geograficzną (2).</span><span class="sxs-lookup"><span data-stu-id="85eb7-166">Each tenant is geo-replicated toohello secondary pool (2).</span></span> <span data-ttu-id="85eb7-167">Umożliwia to szybkie odzyskiwanie wszystkie dzierżawy bazy danych przy użyciu trybu failover.</span><span class="sxs-lookup"><span data-stu-id="85eb7-167">This enables quick recovery of all tenant databases using failover.</span></span> 

<span data-ttu-id="85eb7-168">W przypadku wystąpienia awarii w regionie podstawowym hello, toobring kroki odzyskiwania hello aplikacji w trybie online są przedstawione na diagramie dalej hello:</span><span class="sxs-lookup"><span data-stu-id="85eb7-168">If an outage occurs in hello primary region, hello recovery steps toobring your application online are illustrated in hello next diagram:</span></span>

![Rysunek 5](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-5.png)

* <span data-ttu-id="85eb7-170">Bezpośrednio w trybie Failover hello zarządzania bazami danych toohello DR region (3).</span><span class="sxs-lookup"><span data-stu-id="85eb7-170">Immediately fail over hello management databases toohello DR region (3).</span></span>
* <span data-ttu-id="85eb7-171">Zmień aplikacji hello połączenia ciąg toopoint toohello DR regionu.</span><span class="sxs-lookup"><span data-stu-id="85eb7-171">Change hello application’s connection string toopoint toohello DR region.</span></span> <span data-ttu-id="85eb7-172">Teraz wszystkich nowych kont i baz danych dzierżawy są tworzone w regionie DR hello.</span><span class="sxs-lookup"><span data-stu-id="85eb7-172">Now all new accounts and tenant databases are created in hello DR region.</span></span> <span data-ttu-id="85eb7-173">Hello istniejących klientów wersji próbnej, zobacz swoje dane, które są tymczasowo niedostępne.</span><span class="sxs-lookup"><span data-stu-id="85eb7-173">hello existing trial customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="85eb7-174">Tryb failover hello płatnej puli toohello baz danych dzierżawcy w hello DR region tooimmediately przywrócić ich dostępności (4).</span><span class="sxs-lookup"><span data-stu-id="85eb7-174">Fail over hello paid tenant's databases toohello pool in hello DR region tooimmediately restore their availability (4).</span></span> <span data-ttu-id="85eb7-175">Ponieważ trybu failover hello jest szybkie metadanych zmiany poziomu, należy wziąć pod uwagę optymalizacji, gdzie poszczególne praca awaryjna hello są wyzwalane na żądanie przez hello połączenia przez użytkownika końcowego.</span><span class="sxs-lookup"><span data-stu-id="85eb7-175">Since hello failover is a quick metadata level change, consider an optimization where hello individual failovers are triggered on demand by hello end-user connections.</span></span> 
* <span data-ttu-id="85eb7-176">Jeśli rozmiar eDTU puli dodatkowej został niższa niż hello podstawowego, ponieważ tylko wymagane hello tooprocess hello Zmiana wydajności rejestruje podczas ich zostały pomocnicze bazy danych, bazy danych dodatkowej hello natychmiast zwiększyć pojemność puli hello teraz tooaccommodate hello pełnej Obciążenie wszystkich dzierżaw (5).</span><span class="sxs-lookup"><span data-stu-id="85eb7-176">If your secondary pool eDTU size was lower than hello primary because hello secondary databases only required hello capacity tooprocess hello change logs while they were secondaries, immediately increase hello pool capacity now tooaccommodate hello full workload of all tenants (5).</span></span> 
* <span data-ttu-id="85eb7-177">Utwórz nową pulę elastyczną hello z hello takie same nazwy i hello sam konfiguracji w regionie hello odzyskiwania po awarii dla klientów wersji próbnej hello baz danych (6).</span><span class="sxs-lookup"><span data-stu-id="85eb7-177">Create hello new elastic pool with hello same name and hello same configuration in hello DR region for hello trial customers' databases (6).</span></span> 
* <span data-ttu-id="85eb7-178">Po utworzeniu puli hello wersji próbnej klientów za pomocą geograficzne toorestore hello poszczególne dzierżawy w wersji próbnej z bazy danych do nowej puli hello (7).</span><span class="sxs-lookup"><span data-stu-id="85eb7-178">Once hello trial customers’ pool is created, use geo-restore toorestore hello individual trial tenant databases into hello new pool (7).</span></span> <span data-ttu-id="85eb7-179">Należy wziąć pod uwagę wyzwalania przywraca poszczególnych hello przez połączenia przez użytkownika końcowego hello, lub użyj innego systemu priorytet specyficzne dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="85eb7-179">Consider triggering hello individual restores by hello end-user connections or use some other application-specific priority scheme.</span></span>

<span data-ttu-id="85eb7-180">W tym momencie aplikacja jest znowu w trybie online w regionie DR hello.</span><span class="sxs-lookup"><span data-stu-id="85eb7-180">At this point your application is back online in hello DR region.</span></span> <span data-ttu-id="85eb7-181">Wszystkie płatniczych klienci mają dostęp do danych tootheir podczas wersji próbnej klientom Witaj opóźnienie podczas uzyskiwania dostępu do swoich danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-181">All paying customers have access tootheir data while hello trial customers experience delay when accessing their data.</span></span>

<span data-ttu-id="85eb7-182">Gdy regionu podstawowego hello zostaną odzyskane przy Azure *po* została przywrócona aplikacji hello w regionie hello odzyskiwania po awarii można kontynuować używanie aplikacji hello w tym regionie lub można określić regionu podstawowego toofail toohello Wstecz.</span><span class="sxs-lookup"><span data-stu-id="85eb7-182">When hello primary region is recovered by Azure *after* you have restored hello application in hello DR region you can continue running hello application in that region or you can decide toofail back toohello primary region.</span></span> <span data-ttu-id="85eb7-183">Jeśli jest odzyskiwana regionu podstawowego hello *przed* hello trybu failover proces jest zakończony, należy wziąć pod uwagę w przypadku braku wstecz od razu.</span><span class="sxs-lookup"><span data-stu-id="85eb7-183">If hello primary region is recovered *before* hello failover process is completed, consider failing back right away.</span></span> <span data-ttu-id="85eb7-184">Powrót po awarii Hello przyjmuje hello czynności przedstawione na diagramie dalej hello:</span><span class="sxs-lookup"><span data-stu-id="85eb7-184">hello failback takes hello steps illustrated in hello next diagram:</span></span> 

![Rysunek 6.](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-6.png)

* <span data-ttu-id="85eb7-186">Anulowanie wszystkich żądań oczekujących przywracaniem geograficznym.</span><span class="sxs-lookup"><span data-stu-id="85eb7-186">Cancel all outstanding geo-restore requests.</span></span>   
* <span data-ttu-id="85eb7-187">Tryb failover hello zarządzania z bazy danych (8).</span><span class="sxs-lookup"><span data-stu-id="85eb7-187">Fail over hello management databases (8).</span></span> <span data-ttu-id="85eb7-188">Po odzyskaniu hello region hello stary serwer podstawowy automatycznie stanie się hello dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="85eb7-188">After hello region’s recovery, hello old primary automatically become hello secondary.</span></span> <span data-ttu-id="85eb7-189">Teraz, staje się on Witaj ponownie podstawowego.</span><span class="sxs-lookup"><span data-stu-id="85eb7-189">Now it becomes hello primary again.</span></span>  
* <span data-ttu-id="85eb7-190">Tryb failover hello płatnej dzierżawy baz danych (9).</span><span class="sxs-lookup"><span data-stu-id="85eb7-190">Fail over hello paid tenant databases (9).</span></span> <span data-ttu-id="85eb7-191">Podobnie po odzyskaniu hello region starego kolory podstawowe hello automatycznie stanie się hello pomocnicze bazy danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-191">Similarly, after hello region’s recovery, hello old primaries automatically become hello secondaries.</span></span> <span data-ttu-id="85eb7-192">Teraz stają się one kolory podstawowe hello ponownie.</span><span class="sxs-lookup"><span data-stu-id="85eb7-192">Now they become hello primaries again.</span></span> 
* <span data-ttu-id="85eb7-193">Zestaw hello przywrócona wersji próbnej baz danych, które zostały zmienione w regionie DR hello tylko tooread (10).</span><span class="sxs-lookup"><span data-stu-id="85eb7-193">Set hello restored trial databases that have changed in hello DR region tooread-only (10).</span></span>
* <span data-ttu-id="85eb7-194">Dla każdej bazy danych w puli odzyskiwania po awarii klientom wersji próbnej hello, która zmienione od czasu odzyskiwania hello Zmień lub usuń hello odpowiednią bazę danych w puli głównej hello klientów wersji próbnej (11).</span><span class="sxs-lookup"><span data-stu-id="85eb7-194">For each database in hello trial customers DR pool that changed since hello recovery, rename or delete hello corresponding database in hello trial customers primary pool (11).</span></span> 
* <span data-ttu-id="85eb7-195">Kopiuj hello zaktualizować baz danych z hello DR toohello głównej puli (12).</span><span class="sxs-lookup"><span data-stu-id="85eb7-195">Copy hello updated databases from hello DR pool toohello primary pool (12).</span></span> 
* <span data-ttu-id="85eb7-196">Usuwanie puli DR hello [13]</span><span class="sxs-lookup"><span data-stu-id="85eb7-196">Delete hello DR pool (13)</span></span> 

> [!NOTE]
> <span data-ttu-id="85eb7-197">Operacja trybu failover Hello jest asynchroniczne.</span><span class="sxs-lookup"><span data-stu-id="85eb7-197">hello failover operation is asynchronous.</span></span> <span data-ttu-id="85eb7-198">czas odzyskiwania hello toominimize, jest ważne, wykonaj polecenie pracy awaryjnej hello dzierżawy baz danych w partiach co najmniej 20 baz danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-198">toominimize hello recovery time it is important that you execute hello tenant databases' failover command in batches of at least 20 databases.</span></span> 
> 
> 

<span data-ttu-id="85eb7-199">klucz Hello **korzystać** tej strategii jest hello najwyższy umowy SLA dla hello płatności klientów.</span><span class="sxs-lookup"><span data-stu-id="85eb7-199">hello key **benefit** of this strategy is that it provides hello highest SLA for hello paying customers.</span></span> <span data-ttu-id="85eb7-200">Gwarantuje również to hello nowe wersje próbne są odblokowane, natychmiast po utworzeniu hello wersji próbnej DR puli.</span><span class="sxs-lookup"><span data-stu-id="85eb7-200">It also guarantees that hello new trials are unblocked as soon as hello trial DR pool is created.</span></span> <span data-ttu-id="85eb7-201">Witaj **zależność** otrzymuje że taka konfiguracja zwiększa hello całkowity koszt hello dzierżawcy z bazy danych przez koszt hello hello dodatkowej puli odzyskiwania po awarii dla klientów.</span><span class="sxs-lookup"><span data-stu-id="85eb7-201">hello **trade-off** is that this setup increases hello total cost of hello tenant databases by hello cost of hello secondary DR pool for paid customers.</span></span> <span data-ttu-id="85eb7-202">Dodatkowo Jeśli pula dodatkowej hello ma inny rozmiar, płatniczych klientom Witaj wydajność niższe po pracy awaryjnej zakończenia hello uaktualnienia puli w regionie hello odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="85eb7-202">In addition, if hello secondary pool has a different size, hello paying customers experience lower performance after failover until hello pool upgrade in hello DR region is completed.</span></span> 

## <a name="scenario-3-geographically-distributed-application-with-tiered-service"></a><span data-ttu-id="85eb7-203">Scenariusz 3.</span><span class="sxs-lookup"><span data-stu-id="85eb7-203">Scenario 3.</span></span> <span data-ttu-id="85eb7-204">Geograficznie rozproszonych aplikacji przy użyciu usługi warstwowej</span><span class="sxs-lookup"><span data-stu-id="85eb7-204">Geographically distributed application with tiered service</span></span>
<span data-ttu-id="85eb7-205"><i>Masz dojrzałe aplikacji SaaS z ofertami warstwowych usługi. Chcę toooffer bardzo agresywnie toomy SLA płatnej klientów, zminimalizować ryzyko hello znaczenie w przypadku wystąpienia awarii, ponieważ nawet krótki przerwania może spowodować niezadowolenie klienta. Jest krytyczne w tym hello płatności klienci zawsze mogą mieć dostęp do swoich danych. próby Hello są bezpłatne i umowa SLA nie jest oferowany podczas okresu próbnego hello.</i></span><span class="sxs-lookup"><span data-stu-id="85eb7-205"><i>I have a mature SaaS application with tiered service offers. I want toooffer a very aggressive SLA toomy paid customers and minimize hello risk of impact when outages occur because even brief interruption can cause customer dissatisfaction. It is critical that hello paying customers can always access their data. hello trials are free and an SLA is not offered during hello trial period. </i></span></span> 

<span data-ttu-id="85eb7-206">toosupport tego scenariusza, użyj trzech oddzielnych elastyczne pule.</span><span class="sxs-lookup"><span data-stu-id="85eb7-206">toosupport this scenario, use three separate elastic pools.</span></span> <span data-ttu-id="85eb7-207">Dwie pule taki sam rozmiar świadczenia z wysoką jednostek Edtu na bazę danych w dwóch różnych regionach toocontain hello płatnej klientów dzierżawcy z bazy danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-207">Provision two equal size pools with high eDTUs per database in two different regions toocontain hello paid customers' tenant databases.</span></span> <span data-ttu-id="85eb7-208">Pula trzeci Hello zawierająca próbne hello może być niższe jednostek Edtu na bazę danych i udostępniane w jednym z dwóch regionach hello.</span><span class="sxs-lookup"><span data-stu-id="85eb7-208">hello third pool containing hello trial tenants can have lower eDTUs per database and be provisioned in one of hello two regions.</span></span>

<span data-ttu-id="85eb7-209">tooguarantee hello najniższy czas odzyskiwania podczas awarii, bazy danych dzierżawy hello płatniczych klientów są, replikacją geograficzną z 50% hello głównej bazy danych w hello dwóch regionach.</span><span class="sxs-lookup"><span data-stu-id="85eb7-209">tooguarantee hello lowest recovery time during outages, hello paying customers' tenant databases are geo-replicated with 50% of hello primary databases in each of hello two regions.</span></span> <span data-ttu-id="85eb7-210">Podobnie każdy region ma 50% hello pomocniczej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-210">Similarly, each region has 50% of hello secondary databases.</span></span> <span data-ttu-id="85eb7-211">Dzięki temu, jeśli region jest w trybie offline, tylko 50% hello płatnej baz danych klientów wpływ na i mieć toofail za pośrednictwem.</span><span class="sxs-lookup"><span data-stu-id="85eb7-211">This way, if a region is offline, only 50% of hello paid customers' databases are impacted and have toofail over.</span></span> <span data-ttu-id="85eb7-212">Witaj pozostaną nienaruszone innych baz danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-212">hello other databases remain intact.</span></span> <span data-ttu-id="85eb7-213">Ta konfiguracja została przedstawiona w powitania po diagramu:</span><span class="sxs-lookup"><span data-stu-id="85eb7-213">This configuration is illustrated in hello following diagram:</span></span>

![Rysunek 4](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-7.png)

<span data-ttu-id="85eb7-215">Jak w poprzednich scenariuszach hello są dość aktywnej bazy danych zarządzania hello tak skonfigurowane jako pojedyncze replikacją geograficzną bazy danych (1).</span><span class="sxs-lookup"><span data-stu-id="85eb7-215">As in hello previous scenarios, hello management databases are quite active so configure them as single geo-replicated databases (1).</span></span> <span data-ttu-id="85eb7-216">Dzięki temu hello przewidywalną wydajność hello nowe subskrypcje klienta, aktualizacji profilu i innych operacji zarządzania.</span><span class="sxs-lookup"><span data-stu-id="85eb7-216">This ensures hello predictable performance of hello new customer subscriptions, profile updates and other management operations.</span></span> <span data-ttu-id="85eb7-217">Region A jest hello regionu podstawowego dla baz danych zarządzania hello i hello region B służy do odzyskiwania bazy danych zarządzania hello.</span><span class="sxs-lookup"><span data-stu-id="85eb7-217">Region A is hello primary region for hello management databases and hello region B is used for recovery of hello management databases.</span></span>

<span data-ttu-id="85eb7-218">bazy danych dzierżawy Hello płatniczych klientów są również replikacją geograficzną, ale z kolory podstawowe i pomocnicze podzielony między region A i region B (2).</span><span class="sxs-lookup"><span data-stu-id="85eb7-218">hello paying customers’ tenant databases are also geo-replicated but with primaries and secondaries split between region A and region B (2).</span></span> <span data-ttu-id="85eb7-219">W ten sposób hello dzierżawy głównej bazy danych wpływ awarii hello może przełączyć się toohello innego regionu i stają się dostępne.</span><span class="sxs-lookup"><span data-stu-id="85eb7-219">This way, hello tenant primary databases impacted by hello outage can fail over toohello other region and become available.</span></span> <span data-ttu-id="85eb7-220">Witaj, druga połowa hello dzierżawcy z bazy danych nie można wpływ na cały.</span><span class="sxs-lookup"><span data-stu-id="85eb7-220">hello other half of hello tenant databases are not be impacted at all.</span></span> 

<span data-ttu-id="85eb7-221">Witaj dalej diagramie przedstawiono tootake kroki odzyskiwania hello, w przypadku wystąpienia awarii w regionie A.</span><span class="sxs-lookup"><span data-stu-id="85eb7-221">hello next diagram illustrates hello recovery steps tootake if  an outage occurs in region A.</span></span>

![Rysunek 5](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-8.png)

* <span data-ttu-id="85eb7-223">Bezpośrednio w trybie Failover hello zarządzania bazami danych tooregion B (3).</span><span class="sxs-lookup"><span data-stu-id="85eb7-223">Immediately fail over hello management databases tooregion B (3).</span></span>
* <span data-ttu-id="85eb7-224">Zmień aplikacji hello połączenia ciąg toopoint toohello zarządzania baz danych w regionie zmodyfikować B. hello zarządzania baz danych toomake się, że hello nowych kont i baz danych dzierżawy są tworzone w regionie B i brak znaleziono hello istniejących baz danych dzierżawy jako źródło.</span><span class="sxs-lookup"><span data-stu-id="85eb7-224">Change hello application’s connection string toopoint toohello management databases in region B. Modify hello management databases toomake sure hello new accounts and tenant databases are created in region B and hello existing tenant databases are found there as well.</span></span> <span data-ttu-id="85eb7-225">Hello istniejących klientów wersji próbnej, zobacz swoje dane, które są tymczasowo niedostępne.</span><span class="sxs-lookup"><span data-stu-id="85eb7-225">hello existing trial customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="85eb7-226">Tryb failover hello płatnej dzierżawcy baz danych toopool 2 w regionie B tooimmediately przywrócić ich dostępności (4).</span><span class="sxs-lookup"><span data-stu-id="85eb7-226">Fail over hello paid tenant's databases toopool 2 in region B tooimmediately restore their availability (4).</span></span> <span data-ttu-id="85eb7-227">Ponieważ trybu failover hello jest szybkie metadanych zmiany poziomu, można rozważyć optymalizacji, gdzie poszczególne praca awaryjna hello są wyzwalane na żądanie przez hello połączenia przez użytkownika końcowego.</span><span class="sxs-lookup"><span data-stu-id="85eb7-227">Since hello failover is a quick metadata level change, you may consider an optimization where hello individual failovers are triggered on demand by hello end-user connections.</span></span> 
* <span data-ttu-id="85eb7-228">Od teraz puli 2 zawiera tylko głównej bazy danych, hello całkowita obciążenia wzrost puli hello i natychmiast może zwiększyć rozmiaru eDTU (5).</span><span class="sxs-lookup"><span data-stu-id="85eb7-228">Since now pool 2 contains only primary databases, hello total workload in hello pool increases and can immediately increase its eDTU size (5).</span></span> 
* <span data-ttu-id="85eb7-229">Utwórz nową pulę elastyczną hello z hello takie same nazwy i hello sam konfiguracji w regionie hello B dla klientów wersji próbnej hello baz danych (6).</span><span class="sxs-lookup"><span data-stu-id="85eb7-229">Create hello new elastic pool with hello same name and hello same configuration in hello region B for hello trial customers' databases (6).</span></span> 
* <span data-ttu-id="85eb7-230">Po hello tworzona jest pula Użyj geograficzne toorestore hello poszczególne dzierżawy w wersji próbnej bazy danych w puli hello (7).</span><span class="sxs-lookup"><span data-stu-id="85eb7-230">Once hello pool is created use geo-restore toorestore hello individual trial tenant database into hello pool (7).</span></span> <span data-ttu-id="85eb7-231">Można wziąć pod uwagę wyzwalania przywraca poszczególnych hello przez połączenia przez użytkownika końcowego hello lub użyć innego systemu priorytet specyficzne dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="85eb7-231">You can consider triggering hello individual restores by hello end-user connections or use some other application-specific priority scheme.</span></span>

> [!NOTE]
> <span data-ttu-id="85eb7-232">Operacja trybu failover Hello jest asynchroniczne.</span><span class="sxs-lookup"><span data-stu-id="85eb7-232">hello failover operation is asynchronous.</span></span> <span data-ttu-id="85eb7-233">czas odzyskiwania hello toominimize, ważne jest wykonanie polecenia pracy awaryjnej hello dzierżawy baz danych w partiach co najmniej 20 baz danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-233">toominimize hello recovery time, it is important that you execute hello tenant databases' failover command in batches of at least 20 databases.</span></span> 
> 

<span data-ttu-id="85eb7-234">W tym momencie aplikacja jest znowu w trybie online w regionie B. Wszystkie płatniczych klienci mają dostęp do danych tootheir podczas wersji próbnej klientom Witaj opóźnienie podczas uzyskiwania dostępu do swoich danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-234">At this point your application is back online in region B. All paying customers have access tootheir data while hello trial customers experience delay when accessing their data.</span></span>

<span data-ttu-id="85eb7-235">Po odzyskaniu region, A musi toodecide, jeśli chcesz toouse region B dla klientów z wersji próbnej lub powrotu po awarii toousing hello wersji próbnej klientów puli w regionie A. Jedno kryterium można % hello baz danych dzierżawy w wersji próbnej zmodyfikowane hello odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="85eb7-235">When region A is recovered you need toodecide if you want toouse region B for trial customers or failback toousing hello trial customers pool in region A. One criteria could be hello % of trial tenant databases modified since hello recovery.</span></span> <span data-ttu-id="85eb7-236">Niezależnie od tej decyzji należy dzierżaw hello płatnej toore równowagi między dwoma zestawami.</span><span class="sxs-lookup"><span data-stu-id="85eb7-236">Regardless of that decision, you need toore-balance hello paid tenants between two pools.</span></span> <span data-ttu-id="85eb7-237">Witaj dalej diagram przedstawia proces hello, gdy hello dzierżawy w wersji próbnej z bazy danych nie powiedzie się wstecz tooregion A.</span><span class="sxs-lookup"><span data-stu-id="85eb7-237">hello next diagram illustrates hello process when hello trial tenant databases fail back tooregion A.</span></span>  

![Rysunek 6.](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-9.png)

* <span data-ttu-id="85eb7-239">Anulowanie wszystkich oczekujących przywracaniem geograficznym żądań tootrial DR puli.</span><span class="sxs-lookup"><span data-stu-id="85eb7-239">Cancel all outstanding geo-restore requests tootrial DR pool.</span></span>   
* <span data-ttu-id="85eb7-240">Tryb failover baza danych zarządzania hello (8).</span><span class="sxs-lookup"><span data-stu-id="85eb7-240">Fail over hello management database (8).</span></span> <span data-ttu-id="85eb7-241">Po odzyskaniu hello region hello stary serwer podstawowy automatycznie aktywowano hello dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="85eb7-241">After hello region’s recovery, hello old primary automatically became hello secondary.</span></span> <span data-ttu-id="85eb7-242">Teraz, staje się on Witaj ponownie podstawowego.</span><span class="sxs-lookup"><span data-stu-id="85eb7-242">Now it becomes hello primary again.</span></span>  
* <span data-ttu-id="85eb7-243">Wybierz, które płatną dzierżawy bazy danych niepowodzenie wstecz toopool 1 i zainicjuj tryb failover tootheir pomocnicze bazy danych (9).</span><span class="sxs-lookup"><span data-stu-id="85eb7-243">Select which paid tenant databases fail back toopool 1 and initiate failover tootheir secondaries (9).</span></span> <span data-ttu-id="85eb7-244">Po odzyskaniu hello regionu wszystkie bazy danych w puli 1 została automatycznie pomocnicze bazy danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-244">After hello region’s recovery, all databases in pool 1 automatically became secondaries.</span></span> <span data-ttu-id="85eb7-245">Teraz 50% ich stają się ponownie kolory podstawowe.</span><span class="sxs-lookup"><span data-stu-id="85eb7-245">Now 50% of them become primaries again.</span></span> 
* <span data-ttu-id="85eb7-246">Zmniejszyć rozmiar hello eDTU oryginalnego puli 2 toohello (10).</span><span class="sxs-lookup"><span data-stu-id="85eb7-246">Reduce hello size of pool 2 toohello original eDTU (10).</span></span>
* <span data-ttu-id="85eb7-247">Ustaw wszystkie przywrócone wersji próbnej baz danych w regionie hello B tylko tooread (11).</span><span class="sxs-lookup"><span data-stu-id="85eb7-247">Set all restored trial databases in hello region B tooread-only (11).</span></span>
* <span data-ttu-id="85eb7-248">Dla każdej bazy danych w hello wersji próbnej DR puli, która została zmieniona od czasu odzyskiwania hello Zmień lub usuń hello odpowiednią bazę danych w wersji próbnej puli głównej hello (12).</span><span class="sxs-lookup"><span data-stu-id="85eb7-248">For each database in hello trial DR pool that has changed since hello recovery, rename or delete hello corresponding database in hello trial primary pool (12).</span></span> 
* <span data-ttu-id="85eb7-249">Kopiuj hello zaktualizować bazy danych z hello DR toohello głównej puli [13].</span><span class="sxs-lookup"><span data-stu-id="85eb7-249">Copy hello updated databases from hello DR pool toohello primary pool (13).</span></span> 
* <span data-ttu-id="85eb7-250">Usuwanie puli DR hello (14)</span><span class="sxs-lookup"><span data-stu-id="85eb7-250">Delete hello DR pool (14)</span></span> 

<span data-ttu-id="85eb7-251">klucz Hello **korzyści** tej strategii są:</span><span class="sxs-lookup"><span data-stu-id="85eb7-251">hello key **benefits** of this strategy are:</span></span>

* <span data-ttu-id="85eb7-252">Obsługuje ona hello najbardziej agresywne umowy SLA dla hello płatności klientów, ponieważ zapewnia, że awarii nie może mieć wpływ na więcej niż 50% hello dzierżawcy z bazy danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-252">It supports hello most aggressive SLA for hello paying customers because it ensures that an outage cannot impact more than 50% of hello tenant databases.</span></span> 
* <span data-ttu-id="85eb7-253">Gwarantuje hello nowe wersje próbne są odblokowane, jak dziennik hello DR puli jest tworzona podczas odzyskiwania hello.</span><span class="sxs-lookup"><span data-stu-id="85eb7-253">It guarantees that hello new trials are unblocked as soon as hello trail DR pool is created during hello recovery.</span></span> 
* <span data-ttu-id="85eb7-254">Umożliwia efektywniejsze wykorzystanie pojemności puli hello 50% dodatkowej bazy danych w puli 1 i 2 puli dotrą toobe mniej aktywne niż hello głównej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-254">It allows more efficient use of hello pool capacity as 50% of secondary databases in pool 1 and pool 2 are guaranteed toobe less active than hello primary databases.</span></span>

<span data-ttu-id="85eb7-255">Witaj głównego **kompromisy** są:</span><span class="sxs-lookup"><span data-stu-id="85eb7-255">hello main **trade-offs** are:</span></span>

* <span data-ttu-id="85eb7-256">operacji CRUD Hello bazach danych zarządzania hello mieć mniejsze opóźnienia dla hello użytkownicy końcowi połączone tooregion A niż dla tooregion użytkownicy końcowi połączone hello B są wykonywane przed hello podstawowy hello zarządzania z bazy danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-256">hello CRUD operations against hello management databases have lower latency for hello end users connected tooregion A than for hello end users connected tooregion B as they are executed against hello primary of hello management databases.</span></span>
* <span data-ttu-id="85eb7-257">Wymaga to bardziej złożonych projektu hello zarządzania z bazy danych.</span><span class="sxs-lookup"><span data-stu-id="85eb7-257">It requires more complex design of hello management database.</span></span> <span data-ttu-id="85eb7-258">Na przykład każdy rekord dzierżawy ma tag lokalizacji wymagające toobe została zmieniona w trakcie pracy awaryjnej i powrotu po awarii.</span><span class="sxs-lookup"><span data-stu-id="85eb7-258">For example, each tenant record has a location tag that needs toobe changed during failover and failback.</span></span>  
* <span data-ttu-id="85eb7-259">Hello płatności klientów może zgłaszać obniżenia wydajności niż zwykle hello uaktualnienia puli w regionie B ukończenie.</span><span class="sxs-lookup"><span data-stu-id="85eb7-259">hello paying customers may experience lower performance than usual until hello pool upgrade in region B is completed.</span></span> 

## <a name="summary"></a><span data-ttu-id="85eb7-260">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="85eb7-260">Summary</span></span>
<span data-ttu-id="85eb7-261">Ten artykuł skupia się na strategii odzyskiwania po awarii hello hello warstwy bazy danych używana przez aplikację wielodostępne SaaS niezależnego dostawcy oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="85eb7-261">This article focuses on hello disaster recovery strategies for hello database tier used by a SaaS ISV multi-tenant application.</span></span> <span data-ttu-id="85eb7-262">Hello strategii wybierzesz opiera się na potrzeby hello aplikacji hello, takie jak hello modelu biznesowego, hello SLA mają toooffer tooyour klientów, budżetu ograniczenia itp. Każdy opisano strategii opisanych hello korzyści i zależność, można podjąć świadomej decyzji.</span><span class="sxs-lookup"><span data-stu-id="85eb7-262">hello strategy you choose is based on hello needs of hello application, such as hello business model, hello SLA you want toooffer tooyour customers, budget constraint etc. Each described strategy outlines hello benefits and trade-off so you could make an informed decision.</span></span> <span data-ttu-id="85eb7-263">Określonych aplikacji może także inne składniki platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="85eb7-263">Also, your specific application likely includes other Azure components.</span></span> <span data-ttu-id="85eb7-264">Aby przejrzeć ich wskazówki ciągłości biznesowej i organizowania odzyskiwania hello hello warstwy bazy danych z nimi.</span><span class="sxs-lookup"><span data-stu-id="85eb7-264">So you review their business continuity guidance and orchestrate hello recovery of hello database tier with them.</span></span> <span data-ttu-id="85eb7-265">toolearn więcej informacji o zarządzaniu odzyskiwania bazy danych aplikacji na platformie Azure, zobacz zbyt[projektowania rozwiązań chmury odzyskiwania po awarii](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="85eb7-265">toolearn more about managing recovery of database applications in Azure, refer too[Designing cloud solutions for disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>  

## <a name="next-steps"></a><span data-ttu-id="85eb7-266">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="85eb7-266">Next steps</span></span>
* <span data-ttu-id="85eb7-267">toolearn o bazy danych SQL Azure automatycznego tworzenia kopii zapasowych, zobacz [bazy danych SQL automatycznego tworzenia kopii zapasowych](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="85eb7-267">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="85eb7-268">Omówienie ciągłości działalności biznesowej i scenariuszy, zobacz [omówienie ciągłości działalności biznesowej](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="85eb7-268">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md).</span></span>
* <span data-ttu-id="85eb7-269">toolearn o za pomocą kopie zapasowe automatycznego odzyskiwania, zobacz [przywrócić bazę danych z kopii zapasowych hello inicjowane przez usługę](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="85eb7-269">toolearn about using automated backups for recovery, see [restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="85eb7-270">toolearn o szybsze opcje odzyskiwania, zobacz [aktywna replikacja geograficzna](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="85eb7-270">toolearn about faster recovery options, see [active geo-replication](sql-database-geo-replication-overview.md).</span></span>
* <span data-ttu-id="85eb7-271">toolearn o za pomocą automatycznych kopii zapasowej do archiwizacji, zobacz [kopiowanie bazy danych](sql-database-copy.md).</span><span class="sxs-lookup"><span data-stu-id="85eb7-271">toolearn about using automated backups for archiving, see [database copy](sql-database-copy.md).</span></span>

