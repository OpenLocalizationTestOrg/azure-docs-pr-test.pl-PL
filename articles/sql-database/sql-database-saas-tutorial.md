---
title: "Wdrażanie i Eksploruj wielodostępnych aplikacji Wingtip SaaS, która używa bazy danych SQL Azure | Dokumentacja firmy Microsoft"
description: "Wdrażanie i Eksploruj aplikacji wielodostępne Wingtip SaaS, który demonstruje wzorce SaaS przy użyciu bazy danych SQL Azure."
keywords: "samouczek usługi sql database"
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: sstein
ms.openlocfilehash: b09bfa8a5bc22a092e963f351e99c16d0e9a57ba
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/03/2017
---
# <a name="deploy-and-explore-a-multi-tenant-application-that-uses-azure-sql-database---wingtip-saas"></a><span data-ttu-id="03824-104">Wdrażanie i Eksploruj aplikacji wielodostępnych, która używa bazy danych SQL Azure - Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="03824-104">Deploy and explore a multi-tenant application that uses Azure SQL Database - Wingtip SaaS</span></span>

<span data-ttu-id="03824-105">W tym samouczku wdrażanie i Eksploruj aplikacji Wingtip SaaS.</span><span class="sxs-lookup"><span data-stu-id="03824-105">In this tutorial, you deploy and explore the Wingtip SaaS application.</span></span> <span data-ttu-id="03824-106">Aplikacja używa wzorca aplikacji SaaS database-per-tenant (baza danych na dzierżawę) do obsługi wielu dzierżaw.</span><span class="sxs-lookup"><span data-stu-id="03824-106">The application uses a database-per-tenant, SaaS application pattern, to service multiple tenants.</span></span> <span data-ttu-id="03824-107">Aplikacja jest przeznaczona do pokazują funkcje bazy danych SQL Azure, upraszczające włączania scenariusze SaaS.</span><span class="sxs-lookup"><span data-stu-id="03824-107">The application is designed to showcase features of Azure SQL Database that simplify enabling SaaS scenarios.</span></span>

<span data-ttu-id="03824-108">Pięć minut po kliknięciu znajdującego się poniżej przycisku *Wdróż na platformie Azure* uzyskasz wielodostępną aplikację SaaS, korzystającą z usługi SQL Database i uruchomioną w chmurze.</span><span class="sxs-lookup"><span data-stu-id="03824-108">Five minutes after clicking the *Deploy to Azure* button below, you have a multi-tenant SaaS application, using SQL Database, up and running in the cloud.</span></span> <span data-ttu-id="03824-109">Aplikacja jest wdrażana z trzech dzierżawami próbki, każda z własną bazę danych, wszystkie wdrożone w puli elastycznej SQL.</span><span class="sxs-lookup"><span data-stu-id="03824-109">The application is deployed with three sample tenants, each with its own database, all deployed into a SQL elastic pool.</span></span> <span data-ttu-id="03824-110">Aplikacja jest wdrażana na Twojej subskrypcji platformy Azure, umożliwiając dostęp do eksplorowania i pracować z poszczególnych składników aplikacji.</span><span class="sxs-lookup"><span data-stu-id="03824-110">The app is deployed to your Azure subscription, giving you full access to explore and work with the individual application components.</span></span> <span data-ttu-id="03824-111">Skrypty zarządzania i kodu źródłowego aplikacji są dostępne w repozytorium WingtipSaaS GitHub.</span><span class="sxs-lookup"><span data-stu-id="03824-111">The application source code and management scripts are available in the WingtipSaaS GitHub repo.</span></span>


<span data-ttu-id="03824-112">Ten samouczek zawiera informacje na temat wykonywania następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="03824-112">In this tutorial you learn:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="03824-113">Wdrażanie aplikacji Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="03824-113">How to deploy the Wingtip SaaS application</span></span>
> * <span data-ttu-id="03824-114">Skąd uzyskać kodu źródłowego aplikacji i skrypty zarządzania</span><span class="sxs-lookup"><span data-stu-id="03824-114">Where to get the application source code, and management scripts</span></span>
> * <span data-ttu-id="03824-115">Informacje o serwerach, pulach i bazach danych składających się na aplikację</span><span class="sxs-lookup"><span data-stu-id="03824-115">About the servers, pools, and databases that make up the app</span></span>
> * <span data-ttu-id="03824-116">Jak dzierżawcy są mapowane do swoich danych z *katalogu*</span><span class="sxs-lookup"><span data-stu-id="03824-116">How tenants are mapped to their data with the *catalog*</span></span>
> * <span data-ttu-id="03824-117">Udostępnianie nowej dzierżawy</span><span class="sxs-lookup"><span data-stu-id="03824-117">How to provision a new tenant</span></span>
> * <span data-ttu-id="03824-118">Jak monitorować działania dzierżawy w aplikacji</span><span class="sxs-lookup"><span data-stu-id="03824-118">How to monitor tenant activity in the app</span></span>

<span data-ttu-id="03824-119">Dostępna jest [seria powiązanych samouczków](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials) umożliwiających zbadanie rozmaitych wzorców projektów i zarządzania używanych w rozwiązaniach SaaS, które są rozbudowaną wersją tego wstępnego wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="03824-119">To explore various SaaS design and management patterns, a [series of related tutorials](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials) is available that build upon this initial deployment.</span></span> <span data-ttu-id="03824-120">Zapoznając się z samouczkami, prześledź uważnie przedstawione skrypty i zbadaj, jak zostały zaimplementowane poszczególne wzorce SaaS.</span><span class="sxs-lookup"><span data-stu-id="03824-120">While going through the tutorials, dive into the provided scripts, and examine how the different SaaS patterns are implemented.</span></span> <span data-ttu-id="03824-121">Prześledź krok po kroku skrypty zawarte w każdym samouczku, aby dobrze zrozumieć, jak zaimplementować wiele funkcji usługi SQL Database, które ułatwiają tworzenie aplikacji SaaS.</span><span class="sxs-lookup"><span data-stu-id="03824-121">Step through the scripts in each tutorial to gain a deeper understanding how to implement the many SQL Database features that simplify developing SaaS applications.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="03824-122">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="03824-122">Prerequisites</span></span>

<span data-ttu-id="03824-123">Do wykonania zadań opisanych w tym samouczku niezbędne jest spełnienie następujących wymagań wstępnych:</span><span class="sxs-lookup"><span data-stu-id="03824-123">To complete this tutorial, make sure the following prerequisites are completed:</span></span>

* <span data-ttu-id="03824-124">Zainstalowany jest program Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="03824-124">Azure PowerShell is installed.</span></span> <span data-ttu-id="03824-125">Aby uzyskać szczegółowe informacje, zobacz [Rozpoczynanie pracy z programem Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="03824-125">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="deploy-the-wingtip-saas-application"></a><span data-ttu-id="03824-126">Wdrażanie aplikacji Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="03824-126">Deploy the Wingtip SaaS application</span></span>

<span data-ttu-id="03824-127">Wdrażanie Wingtip aplikacji SaaS:</span><span class="sxs-lookup"><span data-stu-id="03824-127">Deploy the Wingtip SaaS app:</span></span>

1. <span data-ttu-id="03824-128">Kliknięcie przycisku **wdrażanie na platformie Azure** przycisk otwiera portalu Azure, aby szablon wdrożenia Wingtip SaaS.</span><span class="sxs-lookup"><span data-stu-id="03824-128">Clicking the **Deploy to Azure** button opens the Azure portal to the Wingtip SaaS deployment template.</span></span> <span data-ttu-id="03824-129">Szablon wymaga dwóch wartości parametru; Nazwa nowej grupy zasobów i nazwę użytkownika, która odróżnia to wdrożenie od innych wdrożeń aplikacji Wingtip SaaS.</span><span class="sxs-lookup"><span data-stu-id="03824-129">The template requires two parameter values; a name for a new resource group, and a user name that distinguishes this deployment from other deployments of the Wingtip SaaS app.</span></span> <span data-ttu-id="03824-130">Następnym krokiem szczegółowe informacje dotyczące ustawiania tych wartości.</span><span class="sxs-lookup"><span data-stu-id="03824-130">The next step provides details for setting these values.</span></span>

   <span data-ttu-id="03824-131">Należy zwrócić uwagę dokładne wartości, których używasz, ponieważ trzeba będzie wprowadzić je później w pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="03824-131">Make sure to note the exact values that you use, because you will need to enter them into a configuration file later.</span></span>

   <a href="http://aka.ms/deploywtpapp" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>

1. <span data-ttu-id="03824-132">Wprowadź wymagane wartości parametrów wdrożenia:</span><span class="sxs-lookup"><span data-stu-id="03824-132">Enter required parameter values for the deployment:</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="03824-133">Niektóre uwierzytelnienia i zapory serwera są celowo niezabezpieczone w celach demonstracyjnych.</span><span class="sxs-lookup"><span data-stu-id="03824-133">Some authentication, and server firewalls are intentionally unsecured for demonstration purposes.</span></span> <span data-ttu-id="03824-134">**Utwórz nową grupę zasobów**i nie należy używać istniejącej grupy zasobów, serwerami lub pul.</span><span class="sxs-lookup"><span data-stu-id="03824-134">**Create a new resource group**, and do not use existing resource groups, servers, or pools.</span></span> <span data-ttu-id="03824-135">Nie należy używać tej aplikacji lub wszystkie zasoby, które tworzy, w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="03824-135">Do not use this application, or any resources it creates, for production.</span></span> <span data-ttu-id="03824-136">Po zakończeniu pracy z aplikacją usuń tę grupę zasobów, aby zatrzymać ich rozliczanie.</span><span class="sxs-lookup"><span data-stu-id="03824-136">Delete this resource group when you are finished with the application to stop related billing.</span></span>

    * <span data-ttu-id="03824-137">**Grupa zasobów** — wybierz tę opcję **Utwórz nowy** i podaj **nazwa** dla grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="03824-137">**Resource group** - Select **Create new** and provide a **Name** for the resource group.</span></span> <span data-ttu-id="03824-138">Wybierz **lokalizacji** z listy rozwijanej.</span><span class="sxs-lookup"><span data-stu-id="03824-138">Select a **Location** from the drop-down list.</span></span>
    * <span data-ttu-id="03824-139">**Użytkownik** -niektórych zasobów wymagają nazw, które są globalnie unikatowe.</span><span class="sxs-lookup"><span data-stu-id="03824-139">**User** - Some resources require names that are globally unique.</span></span> <span data-ttu-id="03824-140">W celu zapewnienia unikatowości, zawsze, gdy wdrażasz aplikację Podaj wartość do odróżniania zasobów tworzonych z zasobów tworzone przez inne wdrożenie aplikacji Wingtip.</span><span class="sxs-lookup"><span data-stu-id="03824-140">To ensure uniqueness, each time you deploy the application provide a value to differentiate resources you create, from resources created by any other deployment of the Wingtip application.</span></span> <span data-ttu-id="03824-141">Zalecane jest użycie krótkiej nazwy **Użytkownik**, takiej jak inicjały i liczba (na przykład *bg1*) i użycie jej jako nazwy grupy zasobów (na przykład *wingtip-bg1*).</span><span class="sxs-lookup"><span data-stu-id="03824-141">It’s recommended to use a short **User** name, such as your initials plus a number (for example, *bg1*), and then use that in the resource group name (for example, *wingtip-bg1*).</span></span> <span data-ttu-id="03824-142">**Użytkownika** parametr może zawierać tylko litery, cyfry i łączniki (bez spacji).</span><span class="sxs-lookup"><span data-stu-id="03824-142">The **User** parameter can only contain letters, numbers, and hyphens (no spaces).</span></span> <span data-ttu-id="03824-143">Pierwszy i ostatni znak musi być literą lub cyfrą (zalecane jest stosowanie wyłącznie małych liter).</span><span class="sxs-lookup"><span data-stu-id="03824-143">The first and last character must be a letter or a number (all lowercase is recommended).</span></span>


1. <span data-ttu-id="03824-144">**Wdróż aplikację**.</span><span class="sxs-lookup"><span data-stu-id="03824-144">**Deploy the application**.</span></span>

    * <span data-ttu-id="03824-145">Kliknij, aby zaakceptować warunki i postanowienia.</span><span class="sxs-lookup"><span data-stu-id="03824-145">Click to agree to the terms and conditions.</span></span>
    * <span data-ttu-id="03824-146">Kliknij pozycję **Kup**.</span><span class="sxs-lookup"><span data-stu-id="03824-146">Click **Purchase**.</span></span>

1. <span data-ttu-id="03824-147">Monitoruj stan wdrożenia, klikając opcję **Powiadomienia** (ikona dzwonka z prawej strony pola wyszukiwania).</span><span class="sxs-lookup"><span data-stu-id="03824-147">Monitor deployment status by clicking **Notifications** (the bell icon right of the search box).</span></span> <span data-ttu-id="03824-148">Wdrażanie aplikacji Wingtip SaaS trwa około pięciu minut.</span><span class="sxs-lookup"><span data-stu-id="03824-148">Deploying the Wingtip SaaS app takes approximately five minutes.</span></span>

   ![wdrażanie zakończyło się pomyślnie](media/sql-database-saas-tutorial/succeeded.png)

## <a name="download-and-unblock-the-wingtip-saas-scripts"></a><span data-ttu-id="03824-150">Pobierz i odblokować skrypty Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="03824-150">Download and unblock the Wingtip SaaS scripts</span></span>

<span data-ttu-id="03824-151">Gdy aplikacja jest wdrażana, Pobierz skrypty kodu i zarządzania źródła.</span><span class="sxs-lookup"><span data-stu-id="03824-151">While the application is deploying, download the source code and management scripts.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="03824-152">Zawartość pliku wykonywalnego (skrypty, biblioteki dll) mogą być blokowane przez system Windows, gdy pliki zip są pobierane z zewnętrznego źródła i wyodrębnione.</span><span class="sxs-lookup"><span data-stu-id="03824-152">Executable contents (scripts, dlls) may be blocked by Windows when zip files are downloaded from an external source and extracted.</span></span> <span data-ttu-id="03824-153">Podczas wyodrębniania skryptów z pliku zip, wykonaj poniższe kroki, aby odblokować przed wyodrębniania pliku zip.</span><span class="sxs-lookup"><span data-stu-id="03824-153">When extracting the scripts from a zip file, follow the steps below to unblock the .zip file before extracting.</span></span> <span data-ttu-id="03824-154">Dzięki temu można uruchamiać skrypty.</span><span class="sxs-lookup"><span data-stu-id="03824-154">This ensures the scripts are allowed to run.</span></span>

1. <span data-ttu-id="03824-155">Przejdź do [repozytorium github Wingtip SaaS](https://github.com/Microsoft/WingtipSaaS).</span><span class="sxs-lookup"><span data-stu-id="03824-155">Browse to [the Wingtip SaaS github repo](https://github.com/Microsoft/WingtipSaaS).</span></span>
1. <span data-ttu-id="03824-156">Kliknij przycisk **klonowania lub pobierania**.</span><span class="sxs-lookup"><span data-stu-id="03824-156">Click **Clone or download**.</span></span>
1. <span data-ttu-id="03824-157">Kliknij przycisk **Pobierz ZIP** i Zapisz plik.</span><span class="sxs-lookup"><span data-stu-id="03824-157">Click **Download ZIP** and save the file.</span></span>
1. <span data-ttu-id="03824-158">Kliknij prawym przyciskiem myszy **WingtipSaaS master.zip** pliku, a następnie wybierz **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="03824-158">Right-click the **WingtipSaaS-master.zip** file, and select **Properties**.</span></span>
1. <span data-ttu-id="03824-159">Na **ogólne** wybierz opcję **Odblokuj**i kliknij przycisk **Zastosuj**.</span><span class="sxs-lookup"><span data-stu-id="03824-159">On the **General** tab, select **Unblock**, and click **Apply**.</span></span>
1. <span data-ttu-id="03824-160">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="03824-160">Click **OK**.</span></span>
1. <span data-ttu-id="03824-161">Wyodrębnij pliki.</span><span class="sxs-lookup"><span data-stu-id="03824-161">Extract the files.</span></span>

<span data-ttu-id="03824-162">Skrypty znajdują się w *... \\Wzorca WingtipSaaS\\modułów uczenia* folderu.</span><span class="sxs-lookup"><span data-stu-id="03824-162">Scripts are located in the *..\\WingtipSaaS-master\\Learning Modules* folder.</span></span>

## <a name="update-the-configuration-file-for-this-deployment"></a><span data-ttu-id="03824-163">Aktualizowanie pliku konfiguracji dla tego wdrożenia</span><span class="sxs-lookup"><span data-stu-id="03824-163">Update the configuration file for this deployment</span></span>

<span data-ttu-id="03824-164">Przed uruchomieniem skrypty należy ustawić *grupy zasobów* i *użytkownika* wartości w **UserConfig.psm1**.</span><span class="sxs-lookup"><span data-stu-id="03824-164">Before running any scripts, set the *resource group* and *user* values in **UserConfig.psm1**.</span></span> <span data-ttu-id="03824-165">Ustaw zmienne ustawione podczas wdrażania.</span><span class="sxs-lookup"><span data-stu-id="03824-165">Set these variables to the values you set during deployment.</span></span>

1. <span data-ttu-id="03824-166">Otwórz plik ... \\Learning Modules\\*UserConfig.psm1* w aplikacji *PowerShell ISE*</span><span class="sxs-lookup"><span data-stu-id="03824-166">Open ...\\Learning Modules\\*UserConfig.psm1* in the *PowerShell ISE*</span></span>
1. <span data-ttu-id="03824-167">Aktualizacja *ResourceGroupName* i *nazwa* z określonymi wartościami dla danego wdrożenia (wierszach 10 i 11 tylko).</span><span class="sxs-lookup"><span data-stu-id="03824-167">Update *ResourceGroupName* and *Name* with the specific values for your deployment (on lines 10 and 11 only).</span></span>
1. <span data-ttu-id="03824-168">Zapisać zmiany!</span><span class="sxs-lookup"><span data-stu-id="03824-168">Save the changes!</span></span>

<span data-ttu-id="03824-169">W tym miejscu to ustawienie po prostu zapewnia trzeba zaktualizować te wartości specyficzne dla wdrażania wszystkie skrypty.</span><span class="sxs-lookup"><span data-stu-id="03824-169">Setting this here simply keeps you from having to update these deployment-specific values in every script.</span></span>

## <a name="run-the-application"></a><span data-ttu-id="03824-170">Uruchamianie aplikacji</span><span class="sxs-lookup"><span data-stu-id="03824-170">Run the application</span></span>

<span data-ttu-id="03824-171">Aplikacja prezentuje miejsca, takie jak sale koncertowe, kluby jazzowe i kluby sportowe, w których odbywają się imprezy.</span><span class="sxs-lookup"><span data-stu-id="03824-171">The app showcases venues, such as concert halls, jazz clubs, sports clubs, that host events.</span></span> <span data-ttu-id="03824-172">Jako klientów (lub dzierżawcy) platformy Wingtip zarejestrować miejsc w prosty sposób sprzedawać bilety i Wyświetl listę zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="03824-172">Venues register as customers (or tenants) of the Wingtip platform, for an easy way to list events and sell tickets.</span></span> <span data-ttu-id="03824-173">Każde miejsce otrzymuje spersonalizowaną aplikację sieci Web służącą do zarządzania i wyświetlania imprez na liście oraz sprzedawania biletów, w izolacji od pozostałych dzierżaw.</span><span class="sxs-lookup"><span data-stu-id="03824-173">Each venue gets a personalized web app to manage and list their events and sell tickets, independent and isolated from other tenants.</span></span> <span data-ttu-id="03824-174">W obszarze obejmuje każdy dzierżawca pobiera wdrożonych w puli elastycznej SQL bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="03824-174">Under the covers, each tenant gets a SQL database deployed into a SQL elastic pool.</span></span>

<span data-ttu-id="03824-175">Główne **Centrum zdarzeń** zawiera listę adresów URL dzierżaw odpowiednią do danego wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="03824-175">A central **Events Hub** provides a list of tenant URLs specific to your deployment.</span></span>

1. <span data-ttu-id="03824-176">Otwórz _Centrum zdarzeń_ w przeglądarce sieci web: http://events.wtp.&lt; Użytkownik&gt;. trafficmanager.net (Zastąp nazwą użytkownika danego wdrożenia):</span><span class="sxs-lookup"><span data-stu-id="03824-176">Open the _Events Hub_ in your web browser: http://events.wtp.&lt;USER&gt;.trafficmanager.net (replace with your deployment's user name):</span></span>

    ![centrum zdarzeń](media/sql-database-saas-tutorial/events-hub.png)

1. <span data-ttu-id="03824-178">Kliknij przycisk **Fabrikam Jazz Club** w *Centrum zdarzeń*.</span><span class="sxs-lookup"><span data-stu-id="03824-178">Click **Fabrikam Jazz Club** in the *Events Hub*.</span></span>

   ![Zdarzenia](./media/sql-database-saas-tutorial/fabrikam.png)


<span data-ttu-id="03824-180">Aby kontrolować dystrybucję żądań przychodzących, aplikacja używa [ *usługi Azure Traffic Manager*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview).</span><span class="sxs-lookup"><span data-stu-id="03824-180">To control the distribution of incoming requests, the app uses [*Azure Traffic Manager*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview).</span></span> <span data-ttu-id="03824-181">W przypadku stron zdarzeń, które są specyficzne dla dzierżawy, nazwa dzierżawy musi występować w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="03824-181">The events pages, which are tenant-specific, require that tenant names are included in the URLs.</span></span> <span data-ttu-id="03824-182">Wszystkie adresy URL dzierżaw zawierają podaną przez Ciebie wartość *Użytkownik* i mają następujący format: http://events.wtp.&lt;UŻYTKOWNIK&gt;.trafficmanager.net/*fabrikamjazzclub*.</span><span class="sxs-lookup"><span data-stu-id="03824-182">All the tenant URLs include your specific *User* value and follow this format: http://events.wtp.&lt;USER&gt;.trafficmanager.net/*fabrikamjazzclub*.</span></span> <span data-ttu-id="03824-183">Aplikacja zdarzeń analizuje nazwę dzierżawy zawartą w adresie URL i używa jej do utworzenia klucza dostępu do wykazu przy użyciu [ *zarządzania dzieleniem map na fragmenty*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-shard-map-management).</span><span class="sxs-lookup"><span data-stu-id="03824-183">The events app parses the tenant name from the URL and uses it to create a key to access a catalog using [*shard map management*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-shard-map-management).</span></span> <span data-ttu-id="03824-184">Katalog mapuje klucz dzierżawcy lokalizacji bazy danych.</span><span class="sxs-lookup"><span data-stu-id="03824-184">The catalog maps the key to the tenant's database location.</span></span> <span data-ttu-id="03824-185">**Centrum zdarzeń** używa rozszerzonych metadanych w katalogu pobrać nazwy dzierżawcy skojarzone z każdą bazę danych, aby utworzyć listę adresów URL.</span><span class="sxs-lookup"><span data-stu-id="03824-185">The **Events Hub** uses extended metadata in the catalog to retrieve the tenant’s name associated with each database to provide the list of URLs.</span></span>

<span data-ttu-id="03824-186">W środowisku produkcyjnym zazwyczaj jest konieczne utworzenie rekordu CNAME DNS służącego do [*wskazywania domeny internetowej firmy*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) w profilu menedżera ruchu.</span><span class="sxs-lookup"><span data-stu-id="03824-186">In a production environment, you would typically create a CNAME DNS record to [*point a company internet domain*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) to the traffic manager profile.</span></span>

## <a name="start-generating-load-on-the-tenant-databases"></a><span data-ttu-id="03824-187">Rozpoczęcie generowanie obciążenia baz danych dzierżawy</span><span class="sxs-lookup"><span data-stu-id="03824-187">Start generating load on the tenant databases</span></span>

<span data-ttu-id="03824-188">Teraz, gdy aplikacja jest wdrożona umieśćmy go do pracy!</span><span class="sxs-lookup"><span data-stu-id="03824-188">Now that the app is deployed, let’s put it to work!</span></span> <span data-ttu-id="03824-189">*LoadGenerator pokaz* pracą dzierżawy w przypadku wszystkich baz danych uruchamia skrypt programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="03824-189">The *Demo-LoadGenerator* PowerShell script starts a workload running against all tenant databases.</span></span> <span data-ttu-id="03824-190">Rzeczywiste obciążenie wiele aplikacji SaaS jest zwykle sporadyczne i nieprzewidywalny.</span><span class="sxs-lookup"><span data-stu-id="03824-190">The real-world load on many SaaS apps is typically sporadic and unpredictable.</span></span> <span data-ttu-id="03824-191">Aby symulować tego rodzaju obciążenia, generator tworzy dystrybuowana do wszystkich dzierżawców z losowego seria każdego dzierżawcy występujących w odstępach czasu losowego obciążenia.</span><span class="sxs-lookup"><span data-stu-id="03824-191">To simulate this type of load, the generator produces a load distributed across all tenants, with randomized bursts on each tenant occurring at randomized intervals.</span></span> <span data-ttu-id="03824-192">W związku z tym, jaki zajmuje kilka minut dla wzorca obciążenia wyłaniać się dlatego jest najlepszym rozwiązaniem generator uruchamiania na co najmniej trzech lub czterech minut przed monitorowania obciążenia.</span><span class="sxs-lookup"><span data-stu-id="03824-192">Because of this it takes several minutes for the load pattern to emerge, so it’s best to let the generator run for at least three or four minutes before monitoring the load.</span></span>

1. <span data-ttu-id="03824-193">W *PowerShell ISE*, Otwórz... \\Modułów uczenia\\narzędzia\\*LoadGenerator.ps1 pokaz* skryptu.</span><span class="sxs-lookup"><span data-stu-id="03824-193">In the *PowerShell ISE*, open the ...\\Learning Modules\\Utilities\\*Demo-LoadGenerator.ps1* script.</span></span>
1. <span data-ttu-id="03824-194">Naciśnij klawisz **F5**, aby uruchomić skrypt i generator obciążenia (na razie pozostaw bez zmian wartości domyślne parametrów).</span><span class="sxs-lookup"><span data-stu-id="03824-194">Press **F5** to run the script and start the load generator (leave the default parameter values for now).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="03824-195">Aby uruchomić inne skrypty, Otwórz nowe okno programu PowerShell ISE.</span><span class="sxs-lookup"><span data-stu-id="03824-195">To run other scripts, open a new PowerShell ISE window.</span></span> <span data-ttu-id="03824-196">Generator obciążenia działa jako seria zadań w lokalnej sesji programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="03824-196">The load generator is running as a series of jobs in your local PowerShell session.</span></span> <span data-ttu-id="03824-197">*LoadGenerator.ps1 pokaz* skryptu dotyczącego skryptu generator rzeczywiste obciążenie, który jest uruchamiany jako zadanie pierwszego planu oraz szereg zadań generacji obciążenia w tle.</span><span class="sxs-lookup"><span data-stu-id="03824-197">The *Demo-LoadGenerator.ps1* script kicks off the actual load generator script, which runs as a foreground task plus a series of background load-generation jobs.</span></span> <span data-ttu-id="03824-198">Zadanie generator obciążenia jest wywoływana dla każdej bazy danych zarejestrowane w wykazie.</span><span class="sxs-lookup"><span data-stu-id="03824-198">A load-generator job is invoked for each database registered in the catalog.</span></span> <span data-ttu-id="03824-199">Zadania działają w lokalnej sesji programu PowerShell, zamykanie sesji programu PowerShell zatrzymuje wszystkie zadania.</span><span class="sxs-lookup"><span data-stu-id="03824-199">The jobs are running in your local PowerShell session, so closing the PowerShell session stops all jobs.</span></span> <span data-ttu-id="03824-200">Jeśli zawiesić komputera, generowanie obciążenia został wstrzymany i zostanie wznowiona po wznowieniu komputera.</span><span class="sxs-lookup"><span data-stu-id="03824-200">If you suspend your machine, load generation is paused and will resume when you wake up your machine.</span></span>

<span data-ttu-id="03824-201">Po generator obciążenia wywołuje obciążenia generacji zadań dla każdego dzierżawcy, zadanie pierwszego planu pozostaje w stanie wywoływania zadania, których uruchamia dodatkowe zadania dla nowi dzierżawcy, które są następnie udostępniane.</span><span class="sxs-lookup"><span data-stu-id="03824-201">Once the load generator invokes load-generation jobs for each tenant, the foreground task remains in a job-invoking state, where it starts additional background jobs for any new tenants that are subsequently provisioned.</span></span> <span data-ttu-id="03824-202">Można użyć *Ctrl-C* lub naciśnij klawisz *zatrzymać* przycisk, aby zatrzymać zadanie pierwszego planu, ale istniejące zadań w tle będzie nadal generowania obciążenia w każdej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="03824-202">You can use *Ctrl-C* or press the *Stop* button to stop the foreground task, but existing background jobs will continue generating load on each database.</span></span> <span data-ttu-id="03824-203">Jeśli chcesz monitorować i kontrolować zadań w tle, użyj *Get-Job*, *Receive-Job* i *zadanie zatrzymania*.</span><span class="sxs-lookup"><span data-stu-id="03824-203">If you need to monitor and control the background jobs, use *Get-Job*, *Receive-Job* and *Stop-Job*.</span></span> <span data-ttu-id="03824-204">Podczas wykonywania zadania pierwszego planu nie można użyć tej samej sesji programu PowerShell do wykonywania innych skryptów.</span><span class="sxs-lookup"><span data-stu-id="03824-204">While the foreground task is running you cannot use the same PowerShell session to execute other scripts.</span></span> <span data-ttu-id="03824-205">Aby uruchomić inne skrypty, Otwórz nowe okno programu PowerShell ISE.</span><span class="sxs-lookup"><span data-stu-id="03824-205">To run other scripts, open a new PowerShell ISE window.</span></span>

<span data-ttu-id="03824-206">Jeśli chcesz uruchomić ponownie sesję generator obciążenia, na przykład o innych parametrach, można zatrzymać zadania pierwszego planu i uruchom ponownie *LoadGenerator.ps1 pokaz* skryptu.</span><span class="sxs-lookup"><span data-stu-id="03824-206">If you want to restart the load generator session, for example with different parameters, you can stop the foreground task and then re-run the *Demo-LoadGenerator.ps1* script.</span></span> <span data-ttu-id="03824-207">Ponowne uruchomienie *LoadGenerator.ps1 pokaz* pierwszy zatrzymuje aktualnie uruchomione zadania i ponownie uruchamia generator dotyczącego nowy zestaw zadań przy użyciu bieżących parametrów.</span><span class="sxs-lookup"><span data-stu-id="03824-207">Re-running *Demo-LoadGenerator.ps1* first stops any currently running jobs, and then restarts the generator, which kicks off a new set of jobs using the current parameters.</span></span>

<span data-ttu-id="03824-208">Na razie pozostaw generator obciążenia uruchomione w stanie wywoływania zadania.</span><span class="sxs-lookup"><span data-stu-id="03824-208">For now, leave the load generator running in the job-invoking state.</span></span>


## <a name="provision-a-new-tenant"></a><span data-ttu-id="03824-209">Aprowizacja nowej dzierżawy</span><span class="sxs-lookup"><span data-stu-id="03824-209">Provision a new tenant</span></span>

<span data-ttu-id="03824-210">Początkowe wdrożenie tworzy trzy dzierżaw przykładowe, ale Utwórzmy innego dzierżawcę, aby zobaczyć, jak ma to wpływ wdrożonej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="03824-210">The initial deployment creates three sample tenants, but let’s create another tenant to see how this impacts the deployed application.</span></span> <span data-ttu-id="03824-211">Przepływu pracy obsługi dzierżawców Wingtip SaaS została szczegółowo opisana w [samouczek udostępniania i wykaz](sql-database-saas-tutorial-provision-and-catalog.md).</span><span class="sxs-lookup"><span data-stu-id="03824-211">The Wingtip SaaS provisioning-tenants workflow is detailed in the [Provision and catalog tutorial](sql-database-saas-tutorial-provision-and-catalog.md).</span></span> <span data-ttu-id="03824-212">W tym kroku możesz szybko utworzyć nową dzierżawę.</span><span class="sxs-lookup"><span data-stu-id="03824-212">In this step, you quickly create a new tenant.</span></span>

1. <span data-ttu-id="03824-213">Otwórz plik ...\\Learning Modules\Provision and Catalog\\*Demo-ProvisionAndCatalog.ps1* w aplikacji *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="03824-213">Open ...\\Learning Modules\Provision and Catalog\\*Demo-ProvisionAndCatalog.ps1* in the *PowerShell ISE*.</span></span>
1. <span data-ttu-id="03824-214">Naciśnij klawisz **F5** do uruchomienia skryptu (pozostaw wartości domyślne dla teraz).</span><span class="sxs-lookup"><span data-stu-id="03824-214">Press **F5** to run the script (leave the default values for now).</span></span>

   > [!NOTE]
   > <span data-ttu-id="03824-215">Użyj wielu skryptów Wingtip SaaS *$PSScriptRoot* umożliwia nawigowanie po folderów do wywołania funkcji w innych skryptów.</span><span class="sxs-lookup"><span data-stu-id="03824-215">Many Wingtip SaaS scripts use *$PSScriptRoot* to allow navigating folders to call functions in other scripts.</span></span> <span data-ttu-id="03824-216">Ta zmienna jest oceniana tylko wtedy, gdy skrypt zostanie wykonany przez naciśnięcie przycisku **F5**.</span><span class="sxs-lookup"><span data-stu-id="03824-216">This variable is only evaluated when the script is executed by pressing **F5**.</span></span>  <span data-ttu-id="03824-217">Wyróżnianie i uruchamianie zaznaczenia (**F8**) może powodować błędy, więc naciśnij **F5** podczas uruchamiania skryptów.</span><span class="sxs-lookup"><span data-stu-id="03824-217">Highlighting and running a selection (**F8**) can result in errors, so press **F5** when running scripts.</span></span>

<span data-ttu-id="03824-218">Nowej dzierżawy bazy danych jest utworzony w puli elastycznej SQL, zainicjować i zarejestrowane w wykazie.</span><span class="sxs-lookup"><span data-stu-id="03824-218">The new tenant database is created in a SQL elastic pool, initialized and registered in the catalog.</span></span> <span data-ttu-id="03824-219">Po pomyślnym zainicjowaniu obsługi administracyjnej, jego sprzedaży biletów nowej dzierżawy *zdarzenia* lokacji zostanie wyświetlona w przeglądarce:</span><span class="sxs-lookup"><span data-stu-id="03824-219">After successful provisioning, the new tenant's ticket-selling *Events* site appears in your browser:</span></span>

![Nowa dzierżawa](./media/sql-database-saas-tutorial/red-maple-racing.png)

<span data-ttu-id="03824-221">Odśwież *Centrum zdarzeń* i pojawi się na liście nowym dzierżawcą.</span><span class="sxs-lookup"><span data-stu-id="03824-221">Refresh the *Events Hub* and the new tenant now appears in the list.</span></span>


## <a name="explore-the-servers-pools-and-tenant-databases"></a><span data-ttu-id="03824-222">Sprawdzanie działania serwerów, pul i baz danych dzierżaw</span><span class="sxs-lookup"><span data-stu-id="03824-222">Explore the servers, pools, and tenant databases</span></span>

<span data-ttu-id="03824-223">Teraz, gdy rozpoczęciu uruchamiania obciążenia kolekcję dzierżawców przyjrzymy zasobów, które zostały wdrożone:</span><span class="sxs-lookup"><span data-stu-id="03824-223">Now that you've started running a load against the collection of tenants, let’s look at some of the resources that were deployed:</span></span>

1. <span data-ttu-id="03824-224">W [portalu Azure](http://portal.azure.com), przejdź do listy serwerów SQL i Otwórz **katalogu -&lt;użytkownika&gt;**  serwera.</span><span class="sxs-lookup"><span data-stu-id="03824-224">In the [Azure portal](http://portal.azure.com), browse to your list of SQL servers and open the **catalog-&lt;USER&gt;** server.</span></span> <span data-ttu-id="03824-225">Serwer wykazu zawiera dwie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="03824-225">The catalog server contains two databases.</span></span> <span data-ttu-id="03824-226">**Tenantcatalog**i **basetenantdb** (pusta *złotego* lub szablonu bazy danych, który jest kopiowany do utworzenia nowego dzierżawcy).</span><span class="sxs-lookup"><span data-stu-id="03824-226">The **tenantcatalog**, and the **basetenantdb** (an empty *golden* or template database that is copied to create new tenants).</span></span>

   ![bazy danych](./media/sql-database-saas-tutorial/databases.png)

1. <span data-ttu-id="03824-228">Wróć do listy serwerów SQL i otworzyć **tenants1 -&lt;użytkownika&gt;**  serwera baz danych dzierżawy.</span><span class="sxs-lookup"><span data-stu-id="03824-228">Go back to your list of SQL servers and open the **tenants1-&lt;USER&gt;** server that holds the tenant databases.</span></span> <span data-ttu-id="03824-229">Każda baza danych dzierżawy jest _elastycznej standardowe_ bazy danych w puli standardowej 50 eDTU.</span><span class="sxs-lookup"><span data-stu-id="03824-229">Each tenant database is an _Elastic Standard_ database in a 50 eDTU standard pool.</span></span> <span data-ttu-id="03824-230">Ponadto istnieje _Racing klon czerwony_ bazy danych, bazy danych dzierżawy aprowizowanej wcześniej.</span><span class="sxs-lookup"><span data-stu-id="03824-230">Also notice there is a _Red Maple Racing_ database, the tenant database you provisioned previously.</span></span>

   ![serwer](./media/sql-database-saas-tutorial/server.png)

## <a name="monitor-the-pool"></a><span data-ttu-id="03824-232">Monitorowanie puli</span><span class="sxs-lookup"><span data-stu-id="03824-232">Monitor the pool</span></span>

<span data-ttu-id="03824-233">Generator obciążenia działający przez kilka minut powinien dostarczyć wystarczającej ilości danych, aby można było rozpocząć zapoznawanie się z niektórymi możliwościami monitorowania wbudowanymi w pule i bazy danych.</span><span class="sxs-lookup"><span data-stu-id="03824-233">If the load generator has been running for several minutes, enough data should be available to start looking at some of the monitoring capabilities built into pools and databases.</span></span>

1. <span data-ttu-id="03824-234">Przejdź do serwera **tenants1 -&lt;użytkownika&gt;**i kliknij przycisk **Pool1** do wyświetlania wykorzystania zasobów dla puli (generator obciążenia uruchomione na godzinę na poniższych wykresach):</span><span class="sxs-lookup"><span data-stu-id="03824-234">Browse to the server **tenants1-&lt;USER&gt;**, and click **Pool1** to view resource utilization for the pool (the load generator ran for an hour in the following charts):</span></span>

   ![monitorowanie puli](./media/sql-database-saas-tutorial/monitor-pool.png)

<span data-ttu-id="03824-236">Oba wykresy pokazują, jak dobrze elastyczne pule i usługa SQL Database są dostosowane do pracy przy obciążeniu przez aplikacje SaaS.</span><span class="sxs-lookup"><span data-stu-id="03824-236">What these two charts nicely illustrate, is how well suited elastic pools and SQL Database are for SaaS application workloads.</span></span> <span data-ttu-id="03824-237">Cztery bazy danych, które są obciążane chwilowym obciążeniem o maksymalnej wartości 40 jednostek eDTU, są z łatwością obsługiwane przez pulę 50 jednostek eDTU.</span><span class="sxs-lookup"><span data-stu-id="03824-237">Four databases that are each bursting to as much as 40 eDTUs are easily being supported in a 50 eDTU pool.</span></span> <span data-ttu-id="03824-238">Jeśli zostały one udostępniane jako autonomiczny baz danych, jak każdy muszą być S2 (50 DTU) do obsługi seria.</span><span class="sxs-lookup"><span data-stu-id="03824-238">If they were provisioned as standalone databases, they would each need to be an S2 (50 DTU) to support the bursts.</span></span> <span data-ttu-id="03824-239">Koszt 4 bazy danych S2 autonomiczny są prawie 3 razy cen puli i puli nadal ma szerokie możliwości rozbudowy dużo więcej baz danych.</span><span class="sxs-lookup"><span data-stu-id="03824-239">The cost of 4 standalone S2 databases would be nearly 3 times the price of the pool, and the pool still has plenty of headroom for many more databases.</span></span> <span data-ttu-id="03824-240">W sytuacjach rzeczywistych klientów bazy danych SQL są aktualnie uruchomione maksymalnie 500 baz danych w 200 liczbę jednostek eDTU puli.</span><span class="sxs-lookup"><span data-stu-id="03824-240">In real-world situations, SQL Database customers are currently running up to 500 databases in 200 eDTU pools.</span></span> <span data-ttu-id="03824-241">Aby uzyskać więcej informacji, zobacz [samouczek monitorowania wydajności](sql-database-saas-tutorial-performance-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="03824-241">For more information, see the [performance monitoring tutorial](sql-database-saas-tutorial-performance-monitoring.md).</span></span>


## <a name="next-steps"></a><span data-ttu-id="03824-242">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="03824-242">Next steps</span></span>

<span data-ttu-id="03824-243">Ten samouczek zawiera informacje na temat wykonywania następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="03824-243">In this tutorial you learned:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="03824-244">Wdrażanie aplikacji Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="03824-244">How to deploy the Wingtip SaaS application</span></span>
> * <span data-ttu-id="03824-245">Informacje o serwerach, pulach i bazach danych składających się na aplikację</span><span class="sxs-lookup"><span data-stu-id="03824-245">About the servers, pools, and databases that make up the app</span></span>
> * <span data-ttu-id="03824-246">Mapowanie dzierżaw na ich dane przy użyciu *wykazu*</span><span class="sxs-lookup"><span data-stu-id="03824-246">Tenants are mapped to their data with the *catalog*</span></span>
> * <span data-ttu-id="03824-247">Aprowizacja nowych dzierżaw</span><span class="sxs-lookup"><span data-stu-id="03824-247">How to provision new tenants</span></span>
> * <span data-ttu-id="03824-248">Wyświetlanie wykorzystania puli w celu monitorowania aktywności dzierżawy</span><span class="sxs-lookup"><span data-stu-id="03824-248">How to view pool utilization to monitor tenant activity</span></span>
> * <span data-ttu-id="03824-249">Usuwanie przykładowych zasobów w celu zakończenia ich rozliczania</span><span class="sxs-lookup"><span data-stu-id="03824-249">How to delete sample resources to stop related billing</span></span>

<span data-ttu-id="03824-250">Przejdź teraz do [samouczka dotyczącego aprowizacji i wykazu](sql-database-saas-tutorial-provision-and-catalog.md)</span><span class="sxs-lookup"><span data-stu-id="03824-250">Now try the [Provision and catalog tutorial](sql-database-saas-tutorial-provision-and-catalog.md)</span></span>



## <a name="additional-resources"></a><span data-ttu-id="03824-251">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="03824-251">Additional resources</span></span>

* <span data-ttu-id="03824-252">Dodatkowe [samouczków, z którymi kompilacji dla aplikacji Wingtip SaaS](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="03824-252">Additional [tutorials that build on the Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* <span data-ttu-id="03824-253">Aby dowiedzieć się więcej o elastycznych pulach, zobacz [ *Co to jest pula elastyczna Azure*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool)</span><span class="sxs-lookup"><span data-stu-id="03824-253">To learn about elastic pools, see [*What is an Azure SQL elastic pool*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool)</span></span>
* <span data-ttu-id="03824-254">Aby dowiedzieć się więcej o zadaniach elastycznych, zobacz [ *Managing scaled-out cloud databases*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview) (Zarządzanie skalowalnymi bazami danych w chmurze)</span><span class="sxs-lookup"><span data-stu-id="03824-254">To learn about elastic jobs, see [*Managing scaled-out cloud databases*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview)</span></span>
* <span data-ttu-id="03824-255">Aby dowiedzieć się więcej o wielodostępnych aplikacjach SaaS, zobacz [ *Design patterns for multi-tenant SaaS applications*](https://docs.microsoft.com/azure/sql-database/sql-database-design-patterns-multi-tenancy-saas-applications) (Wzorce projektu dla wielodostępnej aplikacji SaaS)</span><span class="sxs-lookup"><span data-stu-id="03824-255">To learn about multi-tenant SaaS applications, see [*Design patterns for multi-tenant SaaS applications*](https://docs.microsoft.com/azure/sql-database/sql-database-design-patterns-multi-tenancy-saas-applications)</span></span>
