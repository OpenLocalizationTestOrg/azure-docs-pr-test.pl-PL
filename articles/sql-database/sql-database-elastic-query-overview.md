---
title: "Omówienie zapytania elastycznej bazy danych SQL aaaAzure | Dokumentacja firmy Microsoft"
description: "Omówienie funkcji elastycznej zapytania hello"
services: sql-database
documentationcenter: 
manager: jhubbard
author: MladjoA
ms.assetid: a8bf0e2c-bc74-44d0-9b1e-bcc9a6aa2e33
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/27/2016
ms.author: mlandzic
ms.openlocfilehash: db17f551882cfcae0da67fdda12708baeb6db81c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-elastic-query-overview-preview"></a><span data-ttu-id="f625c-103">Omówienie usługi Azure zapytania elastycznej bazy danych SQL (wersja zapoznawcza)</span><span class="sxs-lookup"><span data-stu-id="f625c-103">Azure SQL Database elastic query overview (preview)</span></span>
<span data-ttu-id="f625c-104">Hello funkcji elastycznej zapytania (w wersji zapoznawczej) umożliwia toorun zapytania języka Transact-SQL, obejmującej wiele baz danych w bazie danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="f625c-104">hello elastic query feature (in preview) enables you toorun a Transact-SQL query that spans multiple databases in Azure SQL Database.</span></span> <span data-ttu-id="f625c-105">Pozwala ona tooperform zapytań bazy danych między tooaccess zdalnych tabel i tooquery narzędzia (programu Excel, usługa Power BI, Tableau itp.) firmy Microsoft i innych firm tooconnect między warstwami danych z wielu baz danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-105">It allows you tooperform cross-database queries tooaccess remote tables, and tooconnect Microsoft and third party tools (Excel, PowerBI, Tableau, etc.) tooquery across data tiers with multiple databases.</span></span> <span data-ttu-id="f625c-106">Za pomocą tej funkcji, można skalować w poziomie warstwy danych toolarge kwerendy w bazie danych SQL i wizualizacja wyników hello business intelligence (BI) raportów.</span><span class="sxs-lookup"><span data-stu-id="f625c-106">Using this feature, you can scale out queries toolarge data tiers in SQL Database and visualize hello results in business intelligence (BI) reports.</span></span>


## <a name="why-use-elastic-queries"></a><span data-ttu-id="f625c-107">Dlaczego warto używać elastycznej zapytania?</span><span class="sxs-lookup"><span data-stu-id="f625c-107">Why use elastic queries?</span></span>

<span data-ttu-id="f625c-108">**Azure SQL Database**</span><span class="sxs-lookup"><span data-stu-id="f625c-108">**Azure SQL Database**</span></span>

<span data-ttu-id="f625c-109">Zapytanie dla baz danych Azure SQL całkowicie w T-SQL.</span><span class="sxs-lookup"><span data-stu-id="f625c-109">Query across Azure SQL databases completely in T-SQL.</span></span> <span data-ttu-id="f625c-110">Dzięki temu tylko do odczytu wysyłania zapytań do zdalnej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-110">This allows for read-only querying of remote databases.</span></span> <span data-ttu-id="f625c-111">Zapewnia to opcja dla bieżącej lokalnej aplikacji toomigrate klientów programu SQL Server przy użyciu trzech i czterech niepełnym nazw lub tooSQL połączonego serwera bazy danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-111">This provides an option for current on-premises SQL Server customers toomigrate applications using three- and four-part names or linked server tooSQL DB.</span></span>

<span data-ttu-id="f625c-112">**Dostępne w warstwie standardowa**</span><span class="sxs-lookup"><span data-stu-id="f625c-112">**Available on standard tier**</span></span>

<span data-ttu-id="f625c-113">Elastyczne zapytania jest obsługiwana w warstwie standardowa wydajności hello w warstwę wydajności Premium toohello dodanie.</span><span class="sxs-lookup"><span data-stu-id="f625c-113">Elastic query is supported on hello Standard performance tier in addition toohello Premium performance tier.</span></span> <span data-ttu-id="f625c-114">Zobacz sekcję hello na ograniczenia wersji zapoznawczej poniżej na ograniczeń wydajności niższe poziomy wydajności.</span><span class="sxs-lookup"><span data-stu-id="f625c-114">See hello section on Preview Limitations below on performance limitations for lower performance tiers.</span></span>

<span data-ttu-id="f625c-115">**Wypychanie tooremote baz danych**</span><span class="sxs-lookup"><span data-stu-id="f625c-115">**Push tooremote databases**</span></span>

<span data-ttu-id="f625c-116">Elastyczne zapytania można teraz push parametry toohello zdalnej bazy danych SQL do wykonania.</span><span class="sxs-lookup"><span data-stu-id="f625c-116">Elastic queries can now push SQL parameters toohello remote databases for execution.</span></span>

<span data-ttu-id="f625c-117">**Wykonywanie procedury składowanej**</span><span class="sxs-lookup"><span data-stu-id="f625c-117">**Stored procedure execution**</span></span>

<span data-ttu-id="f625c-118">Wykonywanie wywołań zdalnej procedury składowanej lub funkcji zdalnego przy użyciu [sp\_wykonania \_zdalnego](https://msdn.microsoft.com/library/mt703714).</span><span class="sxs-lookup"><span data-stu-id="f625c-118">Execute remote stored procedure calls or remote functions using [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span></span>

<span data-ttu-id="f625c-119">**Elastyczność**</span><span class="sxs-lookup"><span data-stu-id="f625c-119">**Flexibility**</span></span>

<span data-ttu-id="f625c-120">Tabele zewnętrzne z zapytaniem elastycznej teraz mogą odwoływać się tooremote tabel z innym schematem lub nazwę tabeli.</span><span class="sxs-lookup"><span data-stu-id="f625c-120">External tables with elastic query can now refer tooremote tables with a different schema or table name.</span></span>

## <a name="elastic-query-scenarios"></a><span data-ttu-id="f625c-121">Scenariusze elastycznej zapytania</span><span class="sxs-lookup"><span data-stu-id="f625c-121">Elastic query scenarios</span></span>

<span data-ttu-id="f625c-122">Celem Hello jest toofacilitate zapytań scenariuszy, w którym wielu baz danych współtworzenia wierszy w jeden wynik ogólny.</span><span class="sxs-lookup"><span data-stu-id="f625c-122">hello goal is toofacilitate querying scenarios where multiple databases contribute rows into a single overall result.</span></span> <span data-ttu-id="f625c-123">Zapytanie Hello może albo składać się przez użytkownika hello lub aplikacji bezpośrednio lub pośrednio za pomocą narzędzia, które są połączone toohello bazy danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-123">hello query can either be composed by hello user or application directly, or indirectly through tools that are connected toohello database.</span></span> <span data-ttu-id="f625c-124">Jest to szczególnie przydatne podczas tworzenia raportów, za pomocą narzędzia integracji komercyjnego BI lub dane — lub dowolnej aplikacji, nie można jej zmienić.</span><span class="sxs-lookup"><span data-stu-id="f625c-124">This is especially useful when creating reports, using commercial BI or data integration tools—or any application that cannot be changed.</span></span> <span data-ttu-id="f625c-125">Zapytania o elastyczne umożliwia wysyłanie zapytań przez wiele baz danych, za pomocą hello znane rozwiązanie łączności serwera SQL w narzędzi, takich jak program Excel, usługa Power BI, Tableau lub Cognos.</span><span class="sxs-lookup"><span data-stu-id="f625c-125">With an elastic query, you can query across several databases using hello familiar SQL Server connectivity experience in tools such as Excel, PowerBI, Tableau, or Cognos.</span></span>
<span data-ttu-id="f625c-126">Elastyczne zapytanie umożliwia łatwy dostęp tooan całą kolekcję baz danych za pomocą zapytań wystawiony przez program SQL Server Management Studio lub Visual Studio i ułatwia badanie między bazami danych z programu Entity Framework lub innych środowisk ORM.</span><span class="sxs-lookup"><span data-stu-id="f625c-126">An elastic query allows easy access tooan entire collection of databases through queries issued by SQL Server Management Studio or Visual Studio, and facilitates cross-database querying from Entity Framework or other ORM environments.</span></span> <span data-ttu-id="f625c-127">Rysunek 1 pokazuje scenariusz, w którym istniejące chmury aplikacji (hello, który używa [biblioteki klienta elastycznej bazy danych](sql-database-elastic-database-client-library.md)) warstwy oparte na danych skalowalnych w poziomie i elastyczny zapytania jest używana do raportowania między bazami danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-127">Figure 1 shows a scenario where an existing cloud application (which uses hello [elastic database client library](sql-database-elastic-database-client-library.md)) builds on a scaled-out data tier, and an elastic query is used for cross-database reporting.</span></span>

<span data-ttu-id="f625c-128">**Rysunek 1** elastycznej Zapytanie używane w warstwie danych skalowalnych w poziomie</span><span class="sxs-lookup"><span data-stu-id="f625c-128">**Figure 1** Elastic query used on scaled-out data tier</span></span>

![Elastyczne Zapytanie używane w warstwie danych skalowalnych w poziomie][1]

<span data-ttu-id="f625c-130">Scenariusze klienta dla elastycznej zapytania charakteryzują się hello następujących topologii:</span><span class="sxs-lookup"><span data-stu-id="f625c-130">Customer scenarios for elastic query are characterized by hello following topologies:</span></span>

* <span data-ttu-id="f625c-131">**Partycjonowanie pionowe - zapytań bazy danych między** (topologia 1): hello danych jest podzielona na partycje w pionie między wiele baz danych w warstwie danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-131">**Vertical partitioning - Cross-database queries** (Topology 1): hello data is partitioned vertically between a number of databases in a data tier.</span></span> <span data-ttu-id="f625c-132">Zazwyczaj różne zestawy tabel znajdują się na różnych baz danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-132">Typically, different sets of tables reside on different databases.</span></span> <span data-ttu-id="f625c-133">Oznacza to, że schemat hello różni się w różnych baz danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-133">That means that hello schema is different on different databases.</span></span> <span data-ttu-id="f625c-134">Na przykład wszystkie tabele spisu są na jedną bazę danych, gdy wszystkie tabele powiązane ewidencjonowania aktywności znajdują się w drugiej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-134">For instance, all tables for inventory are on one database while all accounting-related tables are on a second database.</span></span> <span data-ttu-id="f625c-135">Typowe przypadki użycia z tą topologią wymagają jednego tooquery między lub raporty toocompile między tabelami w kilku baz danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-135">Common use cases with this topology require one tooquery across or toocompile reports across tables in several databases.</span></span>
* <span data-ttu-id="f625c-136">**Partycjonowanie poziome - dzielenia na fragmenty** (topologia 2): danych jest podzielona na partycje w poziomie warstwy wierszy toodistribute przez skalowany danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-136">**Horizontal Partitioning - Sharding** (Topology 2): Data is partitioned horizontally toodistribute rows across a scaled out data tier.</span></span> <span data-ttu-id="f625c-137">Z tej metody schemat hello jest takie same na wszystkich uczestniczących baz danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-137">With this approach, hello schema is identical on all participating databases.</span></span> <span data-ttu-id="f625c-138">Takie podejście jest również nazywany "dzielenia na fragmenty".</span><span class="sxs-lookup"><span data-stu-id="f625c-138">This approach is also called “sharding”.</span></span> <span data-ttu-id="f625c-139">Dzielenia na fragmenty mogą być wykonywane i zarządzane przy użyciu bibliotek narzędzi elastycznej bazy danych (1) hello lub (2) samoobsługowego-dzielenia na fragmenty.</span><span class="sxs-lookup"><span data-stu-id="f625c-139">Sharding can be performed and managed using (1) hello elastic database tools libraries or (2) self-sharding.</span></span> <span data-ttu-id="f625c-140">Elastyczne zapytanie jest używane raporty tooquery lub kompilacji w wielu fragmentów.</span><span class="sxs-lookup"><span data-stu-id="f625c-140">An elastic query is used tooquery or compile reports across many shards.</span></span>

> [!NOTE]
> <span data-ttu-id="f625c-141">Elastyczne zapytania najlepiej pasuje do okazjonalne scenariuszy raportowania, gdzie można wykonać większość przetwarzania hello na powitania warstwy danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-141">Elastic query works best for occasional reporting scenarios where most of hello processing can be performed on hello data tier.</span></span> <span data-ttu-id="f625c-142">Obciążenia wymagające raportowania lub magazynowania scenariuszy z bardziej złożonych kwerend danych, również należy rozważyć użycie [magazyn danych SQL Azure](https://azure.microsoft.com/services/sql-data-warehouse/).</span><span class="sxs-lookup"><span data-stu-id="f625c-142">For heavy reporting workloads or data warehousing scenarios with more complex queries, also consider using [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span></span>
>  

## <a name="vertical-partitioning---cross-database-queries"></a><span data-ttu-id="f625c-143">Partycjonowanie pionowe - między bazami danych zapytań</span><span class="sxs-lookup"><span data-stu-id="f625c-143">Vertical partitioning - cross-database queries</span></span>

<span data-ttu-id="f625c-144">toobegin kodowania, zobacz [wprowadzenie do korzystania z bazy danych między kwerendy (partycjonowanie pionowe)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="f625c-144">toobegin coding, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>

<span data-ttu-id="f625c-145">Elastycznej zapytania mogą być używane toomake danych znajdujących się w bazy danych SQL tooother dostępne bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="f625c-145">An elastic query can be used toomake data located in a SQL database available tooother SQL databases.</span></span> <span data-ttu-id="f625c-146">Dzięki temu zapytania z jednej bazy danych toorefer tootables żadnych innych zdalnej bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="f625c-146">This allows queries from one database toorefer tootables in any other remote SQL database.</span></span> <span data-ttu-id="f625c-147">pierwszym krokiem Hello jest toodefine zewnętrznego źródła danych dla każdej zdalnej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-147">hello first step is toodefine an external data source for each remote database.</span></span> <span data-ttu-id="f625c-148">Witaj zewnętrzne źródło danych jest zdefiniowany w lokalnej bazie danych hello z którego mają zostać tootables dostępu toogain znajdujących się na powitania zdalnej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-148">hello external data source is defined in hello local database from which you want toogain access tootables located on hello remote database.</span></span> <span data-ttu-id="f625c-149">Żadne zmiany nie jest niezbędna w hello zdalnej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-149">No changes are necessary on hello remote database.</span></span> <span data-ttu-id="f625c-150">Dla typowy pionowy partycjonowania scenariusz, w której różnych baz danych mają różne schematów elastyczne zapytania można tooimplement używane typowe przypadki użycia, takich jak dane tooreference dostępu i między bazami danych zapytań.</span><span class="sxs-lookup"><span data-stu-id="f625c-150">For typical vertical partitioning scenarios where different databases have different schemas, elastic queries can be used tooimplement common use cases such as access tooreference data and cross-database querying.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f625c-151">Musi mieć uprawnienie ALTER ANY zewnętrznego źródła danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-151">You must possess ALTER ANY EXTERNAL DATA SOURCE permission.</span></span> <span data-ttu-id="f625c-152">To uprawnienie jest dołączany hello uprawnienie ALTER DATABASE.</span><span class="sxs-lookup"><span data-stu-id="f625c-152">This permission is included with hello ALTER DATABASE permission.</span></span> <span data-ttu-id="f625c-153">Uprawnienia ALTER ANY zewnętrznego źródła danych są wymagane toorefer toohello podstawowego źródła danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-153">ALTER ANY EXTERNAL DATA SOURCE permissions are needed toorefer toohello underlying data source.</span></span>
>

<span data-ttu-id="f625c-154">**Danych referencyjnych**: topologii hello jest używany w celu zarządzania danymi odwołania.</span><span class="sxs-lookup"><span data-stu-id="f625c-154">**Reference data**: hello topology is used for reference data management.</span></span> <span data-ttu-id="f625c-155">W poniższym rysunku hello dwie tabele (T1 a T2) w przypadku danych referencyjnych są przechowywane na dedykowany bazy danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-155">In hello figure below, two tables (T1 and T2) with reference data are kept on a dedicated database.</span></span> <span data-ttu-id="f625c-156">Przy użyciu elastycznej kwerendy, teraz są dostępne tabele T1 a T2 zdalnie innych baz danych, jak pokazano na rysunku hello.</span><span class="sxs-lookup"><span data-stu-id="f625c-156">Using an elastic query, you can now access tables T1 and T2 remotely from other databases, as shown in hello figure.</span></span> <span data-ttu-id="f625c-157">Użyj topologii 1 w przypadku tabel odwołań małych lub zdalnego zapytań do tabeli referencyjnej ma selektywnego predykatów.</span><span class="sxs-lookup"><span data-stu-id="f625c-157">Use topology 1 if reference tables are small or remote queries into reference table have selective predicates.</span></span>

<span data-ttu-id="f625c-158">**Rysunek 2** partycjonowanie pionowe — przy użyciu danych referencyjnych tooquery elastycznej zapytania</span><span class="sxs-lookup"><span data-stu-id="f625c-158">**Figure 2** Vertical partitioning - Using elastic query tooquery reference data</span></span>

![Partycjonowanie pionowe — przy użyciu danych referencyjnych tooquery elastycznej zapytania][3]

<span data-ttu-id="f625c-160">**Zapytanie bazy danych między**: elastyczna odpytuje przypadki użycia Włącz wymagających wykonywanie zapytań w kilku baz danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-160">**Cross-database querying**: Elastic queries enable use cases that require querying across several SQL databases.</span></span> <span data-ttu-id="f625c-161">Rysunek 3 przedstawia czterech różnych baz danych: CRM, spisu i HR produktów.</span><span class="sxs-lookup"><span data-stu-id="f625c-161">Figure 3 shows four different databases: CRM, Inventory, HR and Products.</span></span> <span data-ttu-id="f625c-162">Zapytania wykonywane w jednej z baz danych hello również muszą mieć dostęp do tooone lub hello wszystkich innych baz danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-162">Queries performed in one of hello databases also need access tooone or all hello other databases.</span></span> <span data-ttu-id="f625c-163">Przy użyciu elastycznej kwerendy, można skonfigurować bazy danych dla tego przypadku uruchamiając kilka prostych instrukcji DDL w każdym hello cztery bazy danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-163">Using an elastic query, you can configure your database for this case by running a few simple DDL statements on each of hello four databases.</span></span> <span data-ttu-id="f625c-164">Po tym jednorazowej konfiguracji tabeli zdalnej tooa dostępu jest tak proste, jak przywołuje tooa lokalnej tabeli z zapytania T-SQL lub narzędzi do analizy Biznesowej.</span><span class="sxs-lookup"><span data-stu-id="f625c-164">After this one-time configuration, access tooa remote table is as simple as referring tooa local table from your T-SQL queries or from your BI tools.</span></span> <span data-ttu-id="f625c-165">Takie podejście jest zalecane, jeśli hello zapytań zdalnych nie zwracają dużych wyników.</span><span class="sxs-lookup"><span data-stu-id="f625c-165">This approach is recommended if hello remote queries do not return large results.</span></span>

<span data-ttu-id="f625c-166">**Rysunek 3** partycjonowanie pionowe — przy użyciu elastycznej zapytania tooquery między różnymi bazami danych</span><span class="sxs-lookup"><span data-stu-id="f625c-166">**Figure 3** Vertical partitioning - Using elastic query tooquery across various databases</span></span>

![Partycjonowanie pionowe — przy użyciu elastycznej zapytania tooquery między różnymi bazami danych][4]

<span data-ttu-id="f625c-168">Hello następujące kroki konfigurowania zapytania elastycznej bazy danych dla pionowego partycjonowania scenariuszy, które wymagają dostępu do tabeli tooa znajduje się na zdalnej bazy danych SQL z hello sam schemat:</span><span class="sxs-lookup"><span data-stu-id="f625c-168">hello following steps configure elastic database queries for vertical partitioning scenarios that require access tooa table located on remote SQL databases with hello same schema:</span></span>

* <span data-ttu-id="f625c-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="f625c-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="f625c-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="f625c-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="f625c-171">[Utwórz i UPUŚĆ zewnętrzne źródło danych](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource typu **RDBMS**</span><span class="sxs-lookup"><span data-stu-id="f625c-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **RDBMS**</span></span>
* <span data-ttu-id="f625c-172">[Utwórz i UPUŚĆ tabeli zewnętrznej](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="f625c-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="f625c-173">Po uruchomieniu instrukcji DDL hello, tak, jakby była lokalnej tabeli można uzyskać dostępu do tabeli zdalnej hello "mytable".</span><span class="sxs-lookup"><span data-stu-id="f625c-173">After running hello DDL statements, you can access hello remote table “mytable” as though it were a local table.</span></span> <span data-ttu-id="f625c-174">Baza danych SQL Azure automatycznie otwiera połączenia toohello zdalnej bazy danych, przetwarza żądania na powitania zdalnej bazy danych i zwraca wyniki hello.</span><span class="sxs-lookup"><span data-stu-id="f625c-174">Azure SQL Database automatically opens a connection toohello remote database, processes your request on hello remote database, and returns hello results.</span></span>

## <a name="horizontal-partitioning---sharding"></a><span data-ttu-id="f625c-175">Poziomy partycjonowania - dzielenia na fragmenty</span><span class="sxs-lookup"><span data-stu-id="f625c-175">Horizontal partitioning - sharding</span></span>
<span data-ttu-id="f625c-176">Przy użyciu elastycznej zapytania tooperform zadania raportowania za pośrednictwem podzielonej, tj., poziomo podzielona na partycje, wymaga warstwy danych [mapy niezależnego fragmentu elastycznej bazy danych](sql-database-elastic-scale-shard-map-management.md) baz danych hello toorepresent hello warstwy danych.</span><span class="sxs-lookup"><span data-stu-id="f625c-176">Using elastic query tooperform reporting tasks over a sharded, i.e., horizontally partitioned, data tier requires an [elastic database shard map](sql-database-elastic-scale-shard-map-management.md) toorepresent hello databases of hello data tier .</span></span> <span data-ttu-id="f625c-177">Zazwyczaj mapy jednego niezależnego fragmentu jest używany w tym scenariuszu, a dedykowany bazy danych z zapytania elastyczne możliwości (węzła głównego) służy jako punkt wejścia hello raportowania zapytań.</span><span class="sxs-lookup"><span data-stu-id="f625c-177">Typically, only a single shard map is used in this scenario and a dedicated database with elastic query capabilities (head node) serves as hello entry point for reporting queries.</span></span> <span data-ttu-id="f625c-178">Tylko ten dedykowany bazy danych musi Mapa niezależnego fragmentu toohello dostępu.</span><span class="sxs-lookup"><span data-stu-id="f625c-178">Only this dedicated database needs access toohello shard map.</span></span> <span data-ttu-id="f625c-179">Rysunek 4 przedstawia tej topologii i jego konfiguracja z hello zapytania elastycznej bazy danych i niezależnych mapy.</span><span class="sxs-lookup"><span data-stu-id="f625c-179">Figure 4 illustrates this topology and its configuration with hello elastic query database and shard map.</span></span> <span data-ttu-id="f625c-180">bazy danych Hello w warstwie danych hello może mieć wersji lub wersji bazy danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="f625c-180">hello databases in hello data tier can be of any Azure SQL Database version or edition.</span></span> <span data-ttu-id="f625c-181">Aby uzyskać więcej informacji na temat biblioteki klienta elastycznej bazy danych hello i tworzenie map niezależnego fragmentu, zobacz [zarządzania mapy niezależnego fragmentu](sql-database-elastic-scale-shard-map-management.md).</span><span class="sxs-lookup"><span data-stu-id="f625c-181">For more information about hello elastic database client library and creating shard maps, see [Shard map management](sql-database-elastic-scale-shard-map-management.md).</span></span>

<span data-ttu-id="f625c-182">**Rysunek 4** poziome partycjonowania — przy użyciu elastycznej zapytania dla raportowania za pośrednictwem warstw podzielonej danych</span><span class="sxs-lookup"><span data-stu-id="f625c-182">**Figure 4** Horizontal partitioning - Using elastic query for reporting over sharded data tiers</span></span>

![Poziomy partycjonowania — przy użyciu elastycznej zapytania dla raportowania za pośrednictwem warstw podzielonej danych][5]

> [!NOTE]
> <span data-ttu-id="f625c-184">Elastyczne zapytanie do bazy danych (węzła głównego) może być oddzielnej bazy danych lub może być hello sama baza danych tej mapy niezależnego fragmentu hello hostów.</span><span class="sxs-lookup"><span data-stu-id="f625c-184">Elastic Query Database (head node) can be separate database, or it can be hello same database that hosts hello shard map.</span></span> <span data-ttu-id="f625c-185">Upewnij się, że niezależnie od konfiguracji, możesz wybrać tej warstwy usług i wydajności tej bazy danych jest wystarczająco duża toohandle hello oczekiwana ilość żądań logowania/zapytań.</span><span class="sxs-lookup"><span data-stu-id="f625c-185">Whatever configuration you choose, make sure that service and performance tier of that database is high enough toohandle hello expected  amount of login/query requests.</span></span>

<span data-ttu-id="f625c-186">Hello poniższe kroki należy skonfigurować elastycznej bazy danych zapytań dotyczących poziome partycjonowania scenariusze, które wymagają dostępu do zestawu tooa tabeli znajdujące się na (zwykle) kilka zdalnej bazy danych SQL:</span><span class="sxs-lookup"><span data-stu-id="f625c-186">hello following steps configure elastic database queries for horizontal partitioning scenarios that require access tooa set of table that are located on (typically) several remote SQL databases:</span></span>

* <span data-ttu-id="f625c-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="f625c-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="f625c-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="f625c-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="f625c-189">Utwórz [mapy niezależnego fragmentu](sql-database-elastic-scale-shard-map-management.md) reprezentujące warstwę danych przy użyciu biblioteki klienta elastycznej bazy danych hello.</span><span class="sxs-lookup"><span data-stu-id="f625c-189">Create a [shard map](sql-database-elastic-scale-shard-map-management.md) representing your data tier using hello elastic database client library.</span></span>   
* <span data-ttu-id="f625c-190">[Utwórz i UPUŚĆ zewnętrzne źródło danych](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource typu **SHARD_MAP_MANAGER**</span><span class="sxs-lookup"><span data-stu-id="f625c-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **SHARD_MAP_MANAGER**</span></span>
* <span data-ttu-id="f625c-191">[Utwórz i UPUŚĆ tabeli zewnętrznej](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="f625c-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="f625c-192">Po wykonaniu tych czynności możesz uzyskać dostęp hello poziomie partycjonowanej tabeli "mytable" tak, jakby była lokalnej tabeli.</span><span class="sxs-lookup"><span data-stu-id="f625c-192">Once you have performed these steps, you can access hello horizontally partitioned table “mytable” as though it were a local table.</span></span> <span data-ttu-id="f625c-193">Baza danych SQL Azure automatycznie otwiera wielu równoległych połączeń toohello zdalnymi bazami danych fizycznie przechowywania hello tabel, przetwarza żądania hello na powitania zdalnych baz danych i zwraca wyniki hello.</span><span class="sxs-lookup"><span data-stu-id="f625c-193">Azure SQL Database automatically opens multiple parallel connections toohello remote databases where hello tables are physically stored, processes hello requests on hello remote databases, and returns hello results.</span></span>
<span data-ttu-id="f625c-194">Więcej informacji na temat kroków hello wymagane dla hello poziome partycjonowania scenariusza można znaleźć w [elastycznej zapytania poziome partycjonowania](sql-database-elastic-query-horizontal-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="f625c-194">More information on hello steps required for hello horizontal partitioning scenario can be found in [elastic query for horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md).</span></span>

<span data-ttu-id="f625c-195">toobegin kodowania, zobacz [wprowadzenie elastycznej zapytania poziome partycjonowania (dzielenia na fragmenty)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="f625c-195">toobegin coding, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>

## <a name="t-sql-querying"></a><span data-ttu-id="f625c-196">Wykonywanie zapytania T-SQL</span><span class="sxs-lookup"><span data-stu-id="f625c-196">T-SQL querying</span></span>
<span data-ttu-id="f625c-197">Po zdefiniowaniu z zewnętrznych źródeł danych i tabel zewnętrznych można użyć regularne połączenia ciągów tooconnect toohello baz danych serwera SQL gdzie są zdefiniowane z tabel zewnętrznych.</span><span class="sxs-lookup"><span data-stu-id="f625c-197">Once you have defined your external data sources and your external tables, you can use regular SQL Server connection strings tooconnect toohello databases where you defined your external tables.</span></span> <span data-ttu-id="f625c-198">Następnie możesz uruchomić instrukcje T-SQL w tabelach zewnętrznych dla tego połączenia z ograniczeniami hello opisane poniżej.</span><span class="sxs-lookup"><span data-stu-id="f625c-198">You can then run T-SQL statements over your external tables on that connection with hello limitations outlined below.</span></span> <span data-ttu-id="f625c-199">Dodatkowe informacje i przykłady zapytania T-SQL można znaleźć w tematach dokumentacji hello dla [poziomych partycji](sql-database-elastic-query-horizontal-partitioning.md) i [partycjonowanie pionowe](sql-database-elastic-query-vertical-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="f625c-199">You can find more information and examples of T-SQL queries in hello documentation topics for [horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md) and [vertical partitioning](sql-database-elastic-query-vertical-partitioning.md).</span></span>

## <a name="connectivity-for-tools"></a><span data-ttu-id="f625c-200">Połączenie narzędzi</span><span class="sxs-lookup"><span data-stu-id="f625c-200">Connectivity for tools</span></span>
<span data-ttu-id="f625c-201">Regularne tooconnect ciągów połączenia programu SQL Server można użyć aplikacji i danych lub BI toodatabases narzędzi integracji, mające tabel zewnętrznych.</span><span class="sxs-lookup"><span data-stu-id="f625c-201">You can use regular SQL Server connection strings tooconnect your applications and BI or data integration tools toodatabases that have external tables.</span></span> <span data-ttu-id="f625c-202">Upewnij się, czy program SQL Server jest obsługiwana jako źródło danych dla własnych narzędzi.</span><span class="sxs-lookup"><span data-stu-id="f625c-202">Make sure that SQL Server is supported as a data source for your tool.</span></span> <span data-ttu-id="f625c-203">Po nawiązaniu połączenia można znaleźć toohello zapytania elastycznej bazy danych i hello tabel zewnętrznych w tej bazie danych, tak samo, jak należy z przykładowej bazy danych programu SQL Server połączyć toowith własnych narzędzi.</span><span class="sxs-lookup"><span data-stu-id="f625c-203">Once connected, refer toohello elastic query database and hello external tables in that database just like you would do with any other SQL Server database that you connect toowith your tool.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f625c-204">Uwierzytelnianie przy użyciu usługi Azure Active Directory z zapytaniami elastyczne nie jest obecnie obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="f625c-204">Authentication using Azure Active Directory with elastic queries is not currently supported.</span></span>
> 
> 

## <a name="cost"></a><span data-ttu-id="f625c-205">Koszty</span><span class="sxs-lookup"><span data-stu-id="f625c-205">Cost</span></span>
<span data-ttu-id="f625c-206">Elastyczne zapytania jest uwzględniony w koszt hello baz danych, baza danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="f625c-206">Elastic query is included into hello cost of Azure SQL Database databases.</span></span> <span data-ttu-id="f625c-207">Należy pamiętać, że są obsługiwane topologie, gdzie zdalnej bazy danych znajdują się w centrum danych niż hello elastycznej zapytania punktu końcowego, ale wyjście danych ze zdalnych baz danych są naliczane regular [Azure stawki](https://azure.microsoft.com/pricing/details/data-transfers/).</span><span class="sxs-lookup"><span data-stu-id="f625c-207">Note that topologies where your remote databases are in a different data center than hello elastic query endpoint are supported, but data egress from remote databases are charged regular [Azure rates](https://azure.microsoft.com/pricing/details/data-transfers/).</span></span>

## <a name="preview-limitations"></a><span data-ttu-id="f625c-208">Ograniczenia wersji zapoznawczej</span><span class="sxs-lookup"><span data-stu-id="f625c-208">Preview limitations</span></span>
* <span data-ttu-id="f625c-209">Uruchamianie pierwszej kwerendy elastycznej może potrwać nawet tooa kilka minut w warstwie standardowa wydajności hello.</span><span class="sxs-lookup"><span data-stu-id="f625c-209">Running your first elastic query can take up tooa few minutes on hello Standard performance tier.</span></span> <span data-ttu-id="f625c-210">Ten czas jest niezbędne tooload hello elastycznej zapytania funkcjonalności. Ładowanie wydajności poprawia z warstwy wyższej wydajności.</span><span class="sxs-lookup"><span data-stu-id="f625c-210">This time is necessary tooload hello elastic query functionality; loading performance improves with higher performance tiers.</span></span>
* <span data-ttu-id="f625c-211">Obsługa skryptów z zewnętrznych źródeł danych lub tabel zewnętrznych z SSMS lub program SSDT nie jest jeszcze obsługiwana.</span><span class="sxs-lookup"><span data-stu-id="f625c-211">Scripting of external data sources or external tables from SSMS or SSDT is not yet supported.</span></span>
* <span data-ttu-id="f625c-212">Narzędzie importu/eksportu dla bazy danych serwera SQL nie obsługuje jeszcze zewnętrznych źródeł danych i tabel zewnętrznych.</span><span class="sxs-lookup"><span data-stu-id="f625c-212">Import/Export for SQL DB does not yet support external data sources and external tables.</span></span> <span data-ttu-id="f625c-213">Toouse importu/eksportu, należy usunąć przed wyeksportowaniem te obiekty, a następnie ponownie utwórz je po zaimportowaniu.</span><span class="sxs-lookup"><span data-stu-id="f625c-213">If you need toouse Import/Export, drop these objects before exporting and then re-create them after importing.</span></span>
* <span data-ttu-id="f625c-214">Elastyczne zapytania aktualnie obsługuje tylko tabele tooexternal dostęp tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="f625c-214">Elastic query currently only supports read-only access tooexternal tables.</span></span> <span data-ttu-id="f625c-215">Jednak można używać pełnej funkcjonalności T-SQL w bazie danych hello której zdefiniowano hello tabeli zewnętrznej.</span><span class="sxs-lookup"><span data-stu-id="f625c-215">You can, however, use full T-SQL functionality on hello database where hello external table is defined.</span></span> <span data-ttu-id="f625c-216">Może to być przydatne do, np. utrwalenia tymczasowych wyników za pomocą, np. Wybierz < column_list > w < local_table > lub toodefine procedur składowanych na powitania elastycznej zapytanie do bazy danych, który można znaleźć tooexternal tabel.</span><span class="sxs-lookup"><span data-stu-id="f625c-216">This can be useful to, e.g., persist temporary results using, e.g., SELECT <column_list> INTO <local_table>, or toodefine stored procedures on hello elastic query database which refer tooexternal tables.</span></span>
* <span data-ttu-id="f625c-217">Z wyjątkiem nvarchar(max) typy obiektów LOB nie są obsługiwane w definicji tabeli zewnętrznej.</span><span class="sxs-lookup"><span data-stu-id="f625c-217">Except for nvarchar(max), LOB types are not supported in external table definitions.</span></span> <span data-ttu-id="f625c-218">Jako obejście można utworzyć widoku na powitania zdalnej bazy danych, który rzutuje typu LOB hello do nvarchar(max), zdefiniuj tabeli zewnętrznej za pośrednictwem widoku hello zamiast hello tabeli podstawowej i rzutować go wrócić do oryginalnego typu LOB hello zapytania.</span><span class="sxs-lookup"><span data-stu-id="f625c-218">As a workaround, you can create a view on hello remote database that casts hello LOB type into nvarchar(max), define your external table over hello view instead of hello base table and then cast it back into hello original LOB type in your queries.</span></span>
* <span data-ttu-id="f625c-219">Kolumna statystyki dotyczące tabel zewnętrznych nie są obecnie obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="f625c-219">Column statistics over external tables are currently not supported.</span></span> <span data-ttu-id="f625c-220">Tabele statystyki są obsługiwane, ale należy toobe utworzone ręcznie.</span><span class="sxs-lookup"><span data-stu-id="f625c-220">Tables statistics are supported, but need toobe created manually.</span></span>

## <a name="feedback"></a><span data-ttu-id="f625c-221">Opinia</span><span class="sxs-lookup"><span data-stu-id="f625c-221">Feedback</span></span>
<span data-ttu-id="f625c-222">Udostępnij opinii na temat korzystania z zapytaniami elastycznej z nami Disqus poniżej, fora MSDN hello, lub w witrynie Stackoverflow.</span><span class="sxs-lookup"><span data-stu-id="f625c-222">Please share feedback on your experience with elastic queries with us on Disqus below, hello MSDN forums, or on Stackoverflow.</span></span> <span data-ttu-id="f625c-223">Firma Microsoft interesuje wszelkiego rodzaju opinię na temat usługi hello (wady, niedociągnięcia luki funkcji).</span><span class="sxs-lookup"><span data-stu-id="f625c-223">We are interested in all kinds of feedback about hello service (defects, rough edges, feature gaps).</span></span>

## <a name="next-steps"></a><span data-ttu-id="f625c-224">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="f625c-224">Next steps</span></span>

* <span data-ttu-id="f625c-225">Samouczek partycjonowania pionowego, zobacz [wprowadzenie do korzystania z bazy danych między kwerendy (partycjonowanie pionowe)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="f625c-225">For a vertical partitioning tutorial, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>
* <span data-ttu-id="f625c-226">Dla zapytań dotyczących danych pionowo podzielonym na partycje i składnię i przykład, zobacz [zapytań w pionie na partycje danych)](sql-database-elastic-query-vertical-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="f625c-226">For syntax and sample queries for vertically partitioned data, see [Querying vertically partitioned data)](sql-database-elastic-query-vertical-partitioning.md)</span></span>
* <span data-ttu-id="f625c-227">Samouczek poziomych partycji (dzielenia na fragmenty), zobacz [wprowadzenie elastycznej zapytania poziome partycjonowania (dzielenia na fragmenty)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="f625c-227">For a horizontal partitioning (sharding) tutorial, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>
* <span data-ttu-id="f625c-228">Dla zapytań dotyczących danych poziomie podzielonym na partycje i składnię i przykład, zobacz [zapytań w poziomie na partycje danych)](sql-database-elastic-query-horizontal-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="f625c-228">For syntax and sample queries for horizontally partitioned data, see [Querying horizontally partitioned data)](sql-database-elastic-query-horizontal-partitioning.md)</span></span>
* <span data-ttu-id="f625c-229">Zobacz [sp\_wykonania \_zdalnego](https://msdn.microsoft.com/library/mt703714) dla procedury składowanej, która wykonuje instrukcję Transact-SQL w jednym zdalnej bazy danych SQL Azure lub zestaw baz danych, służąc jako odłamków w poziomie schemat partycjonowania.</span><span class="sxs-lookup"><span data-stu-id="f625c-229">See [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) for a stored procedure that executes a Transact-SQL statement on a single remote Azure SQL Database or set of databases serving as shards in a horizontal partitioning scheme.</span></span>

<!--Image references-->
[1]: ./media/sql-database-elastic-query-overview/overview.png
[2]: ./media/sql-database-elastic-query-overview/topology1.png
[3]: ./media/sql-database-elastic-query-overview/vertpartrrefdata.png
[4]: ./media/sql-database-elastic-query-overview/verticalpartitioning.png
[5]: ./media/sql-database-elastic-query-overview/horizontalpartitioning.png

<!--anchors-->
