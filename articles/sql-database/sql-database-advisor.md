---
title: "Zalecenia dotyczące wydajności — baza danych SQL Azure | Dokumentacja firmy Microsoft"
description: "Baza danych SQL Azure zawiera zalecenia dotyczące bazy danych SQL, które może poprawić wydajność kwerend bieżącej."
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: monicar
ms.assetid: 1db441ff-58f5-45da-8d38-b54dc2aa6145
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/05/2017
ms.author: sstein
ms.openlocfilehash: 357a25a665894c86ddb0f93beeb4dd59d8837489
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="performance-recommendations"></a><span data-ttu-id="65148-103">Zalecenia dotyczące wydajności</span><span class="sxs-lookup"><span data-stu-id="65148-103">Performance recommendations</span></span>

<span data-ttu-id="65148-104">Baza danych SQL Azure uzyskuje informacje o dostosowuje się z aplikacją i zawiera dostosowany zalecenia co pozwala zmaksymalizować wydajność bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="65148-104">Azure SQL Database learns and adapts with your application and provides customized recommendations enabling you to maximize the performance of your SQL databases.</span></span> <span data-ttu-id="65148-105">Wydajność jest ciągle oceniane analizując Twojej historii użycia bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="65148-105">Your performance is continuously assessed by analyzing your SQL Database usage history.</span></span> <span data-ttu-id="65148-106">Zalecenia, które są dostarczane są oparte na wzorzec obciążenia unikatowy bazy danych i zwiększyć jej wydajność.</span><span class="sxs-lookup"><span data-stu-id="65148-106">The recommendations that are provided are based on a database unique workload pattern and help improve its performance.</span></span>

> [!NOTE]
> <span data-ttu-id="65148-107">Zalecanym sposobem stosowania zaleceń jest przez włączenie "Automatycznego dostrajania" w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="65148-107">Recommended way of using recommendations is by enabling ‘Automatic tuning’ on your database.</span></span> <span data-ttu-id="65148-108">Aby uzyskać więcej informacji, zobacz [automatycznego dostrajania](sql-database-automatic-tuning.md).</span><span class="sxs-lookup"><span data-stu-id="65148-108">For details, see [Automatic tuning](sql-database-automatic-tuning.md).</span></span>
>

## <a name="create-index-recommendations"></a><span data-ttu-id="65148-109">Utwórz zalecenia dotyczące indeksu</span><span class="sxs-lookup"><span data-stu-id="65148-109">Create index recommendations</span></span>
<span data-ttu-id="65148-110">Baza danych SQL Azure stale monitoruje zapytań, które było wykonywane i identyfikuje indeksów, które może poprawić wydajność.</span><span class="sxs-lookup"><span data-stu-id="65148-110">Azure SQL Database continuously monitors the queries being executed and identifies the indexes that could improve the performance.</span></span> <span data-ttu-id="65148-111">Po utworzeniu za mało pewność, że indeks niektórych brakuje, nowy **Utwórz indeks** zalecenie zostanie utworzony.</span><span class="sxs-lookup"><span data-stu-id="65148-111">Once enough confidence is built that a certain index is missing, a new **Create index** recommendation will be created.</span></span> <span data-ttu-id="65148-112">Baza danych SQL Azure tworzy zaufania szacowaną bardziej wydajne, który indeks doprowadzi do czasu.</span><span class="sxs-lookup"><span data-stu-id="65148-112">Azure SQL Database builds confidence by estimating performance gain the index would bring through time.</span></span> <span data-ttu-id="65148-113">W zależności od szacunkowego wzrostu wydajności zalecenia są sklasyfikowane jako wysoki, średni lub niski.</span><span class="sxs-lookup"><span data-stu-id="65148-113">Depending on the estimated performance gain, recommendations are categorized as High, Medium,  or Low.</span></span> 

<span data-ttu-id="65148-114">Utworzone za pomocą zalecenia dotyczące indeksów są zawsze oznaczonej jako auto_created indeksów.</span><span class="sxs-lookup"><span data-stu-id="65148-114">Indexes created using recommendations are always flagged as auto_created indexes.</span></span> <span data-ttu-id="65148-115">Można sprawdzić, które indeksy są auto_created analizując sys.indexes widoku.</span><span class="sxs-lookup"><span data-stu-id="65148-115">You can see which indexes are auto_created by looking at sys.indexes view.</span></span> <span data-ttu-id="65148-116">Automatycznie utworzone indeksy nie blokować polecenia ALTER/Zmień nazwę.</span><span class="sxs-lookup"><span data-stu-id="65148-116">Auto created indexes don’t block ALTER/RENAME commands.</span></span> <span data-ttu-id="65148-117">Jeśli spróbujesz porzucić tę kolumnę, który został automatycznie utworzony indeks nad nim przekazuje polecenia i automatycznie utworzony indeks zostało porzucone z poleceniem również.</span><span class="sxs-lookup"><span data-stu-id="65148-117">If you try to drop the column that has an auto created index over it, the command passes and the auto created index is dropped with the command as well.</span></span> <span data-ttu-id="65148-118">Zwykłych indeksów uniemożliwiają polecenia ALTER/Zmień nazwę kolumny, które są indeksowane.</span><span class="sxs-lookup"><span data-stu-id="65148-118">Regular indexes would block the ALTER/RENAME command on columns that are indexed.</span></span>

<span data-ttu-id="65148-119">Po zastosowaniu zalecenie dotyczące indeksu tworzenie bazy danych SQL Azure zostanie porównany wydajność kwerend linię bazową wydajności.</span><span class="sxs-lookup"><span data-stu-id="65148-119">Once the create index recommendation is applied, Azure SQL Database will compare performance of the queries with the baseline performance.</span></span> <span data-ttu-id="65148-120">Jeśli nowy indeks, sprowadzonych ulepszenia wydajności, zalecenie zostanie oznaczone jako pomyślnie i wpływ raport będzie dostępny.</span><span class="sxs-lookup"><span data-stu-id="65148-120">If new index brought improvements in the performance, recommendation will be flagged as successful and impact report will be available.</span></span> <span data-ttu-id="65148-121">W przypadku, gdy indeks nie Przełącz korzyści, zostanie automatycznie przywrócony.</span><span class="sxs-lookup"><span data-stu-id="65148-121">In case the index didn’t bring the benefits, it will be automatically reverted.</span></span> <span data-ttu-id="65148-122">Dzięki temu bazy danych SQL Azure zapewnia, że za pomocą zalecenia tylko zwiększy wydajność bazy danych.</span><span class="sxs-lookup"><span data-stu-id="65148-122">This way Azure SQL Database ensures that using recommendations will only improve the database performance.</span></span>

<span data-ttu-id="65148-123">Wszelkie **Utwórz indeks** zalecenie ma wycofywania zasad, które nie pozwalają na stosowanie zalecenie, jeśli użycie jednostek dtu w warstwie bazy danych lub puli nie przekracza 80% w ostatnich 20 minut lub jeśli magazyn jest ponad 90% użycia.</span><span class="sxs-lookup"><span data-stu-id="65148-123">Any **Create index** recommendation has a back off policy that won’t allow applying the recommendation if the database or pool DTU usage was above 80% in last 20 minutes or if the storage is above 90% of usage.</span></span> <span data-ttu-id="65148-124">W takim przypadku zostanie przełożone zalecenia.</span><span class="sxs-lookup"><span data-stu-id="65148-124">In this case, the recommendation will be postponed.</span></span>

## <a name="drop-index-recommendations"></a><span data-ttu-id="65148-125">Zalecenia dotyczące usuwania indeksów</span><span class="sxs-lookup"><span data-stu-id="65148-125">Drop index recommendations</span></span>
<span data-ttu-id="65148-126">Oprócz wykrywania brakuje indeksu, bazy danych SQL Azure stale analizuje wydajność istniejące indeksy.</span><span class="sxs-lookup"><span data-stu-id="65148-126">In addition to detecting a missing index, Azure SQL Database continuously analyzes the performance of existing indexes.</span></span> <span data-ttu-id="65148-127">Jeśli indeks nie jest używany, baza danych SQL Azure zaleci usunięcie go.</span><span class="sxs-lookup"><span data-stu-id="65148-127">If index is not used, Azure SQL Database will recommend dropping it.</span></span> <span data-ttu-id="65148-128">W obu przypadkach zaleca się porzucenie indeksu:</span><span class="sxs-lookup"><span data-stu-id="65148-128">Dropping an index is recommended in two cases:</span></span>
* <span data-ttu-id="65148-129">Indeks jest duplikat nazwy innego indeksu (sama indeksowane i zawiera kolumny, schemat partycji i filtrów)</span><span class="sxs-lookup"><span data-stu-id="65148-129">Index is a duplicate of another index (same indexed and included column, partition schema, and filters)</span></span>
* <span data-ttu-id="65148-130">Indeks nie jest używana przez dłuższy okres (93 dni)</span><span class="sxs-lookup"><span data-stu-id="65148-130">Index is unused for a prolonged period (93 days)</span></span>

<span data-ttu-id="65148-131">Zalecenia dotyczące usuwania indeksów także przejść do weryfikacji po implementacji.</span><span class="sxs-lookup"><span data-stu-id="65148-131">Drop index recommendations also go through the verification after implementation.</span></span> <span data-ttu-id="65148-132">Jeśli wydajność jest zwiększona raport wpływ będą dostępne.</span><span class="sxs-lookup"><span data-stu-id="65148-132">If the performance is improved the impact report will be available.</span></span> <span data-ttu-id="65148-133">W przypadku wykrycia obniżenia wydajności zalecenie zostaną cofnięte.</span><span class="sxs-lookup"><span data-stu-id="65148-133">In case performance degradation is detected, recommendation will be reverted.</span></span>


## <a name="parameterize-queries-recommendations"></a><span data-ttu-id="65148-134">Parametryzacja zapytań zalecenia</span><span class="sxs-lookup"><span data-stu-id="65148-134">Parameterize queries recommendations</span></span>
<span data-ttu-id="65148-135">**Parametryzacja zapytań** zalecenia są wyświetlane, jeśli masz co najmniej jednego zapytania, które są stale jest ponownie kompilowana ale zakończenia się z tego samego planu wykonania zapytania.</span><span class="sxs-lookup"><span data-stu-id="65148-135">**Parameterize queries** recommendations appear when you have one or more queries that are constantly being recompiled but end up with the same query execution plan.</span></span> <span data-ttu-id="65148-136">Ten warunek otwiera możliwość zastosowania parametryzacja wymuszone, co pozwoli plany zapytań w pamięci podręcznej i użyć ponownie w przyszłości poprawy wydajności i zmniejsza zużycie zasobów.</span><span class="sxs-lookup"><span data-stu-id="65148-136">This condition opens up an opportunity to apply forced parameterization, which will allow query plans to be cached and reused in the future improving performance and reducing resource usage.</span></span> 

<span data-ttu-id="65148-137">Każdej kwerendy początkowo wystawiony na podstawie programu SQL Server musi być skompilowany do wygenerowania planu wykonywania.</span><span class="sxs-lookup"><span data-stu-id="65148-137">Every query issued against SQL Server initially needs to be compiled to generate an execution plan.</span></span> <span data-ttu-id="65148-138">Każdy plan wygenerowany jest dodawana do pamięci podręcznej planu, a podczas kolejnych wykonań kodu tego samego zapytania można ponownie użyć tego planu z pamięci podręcznej, eliminując konieczność dodatkowe kompilacji.</span><span class="sxs-lookup"><span data-stu-id="65148-138">Each generated plan is added to the plan cache and subsequent executions of the same query can reuse this plan from the cache, eliminating the need for additional compilation.</span></span> 

<span data-ttu-id="65148-139">Aplikacje wysyłające zapytania, które obejmują wartości bez parametrów, może spowodować zmniejszenie wydajności, którym dla każdego takie zapytanie z innym parametrem wartości planu wykonania jest skompilowane ponownie.</span><span class="sxs-lookup"><span data-stu-id="65148-139">Applications that send queries, which include non-parameterized values, can lead to a performance overhead, where for every such query with different parameter values the execution plan is compiled again.</span></span> <span data-ttu-id="65148-140">W wielu przypadkach tego samego zapytania z innym parametrem wartości Generowanie tego samego planu wykonywania, ale te plany nadal oddzielnie są dodawane do pamięci podręcznej planu.</span><span class="sxs-lookup"><span data-stu-id="65148-140">In many cases the same queries with different parameter values generate the same execution plans, but these plans are still separately added to the plan cache.</span></span> <span data-ttu-id="65148-141">Planów wykonania ponownej kompilacji korzystanie z zasobów bazy danych, zwiększyć czas trwania zapytania i przepełnienie pamięci podręcznej planu powoduje planuje można wykluczyć z pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="65148-141">Recompiling execution plans use database resources, increase the query duration time and overflow the plan cache causing plans to be evicted from the cache.</span></span> <span data-ttu-id="65148-142">Może się zmienić to zachowanie programu SQL Server przez ustawienie opcji parametryzacja wymuszone w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="65148-142">This behavior of SQL Server can be altered by setting the forced parameterization option on the database.</span></span> 

<span data-ttu-id="65148-143">Ułatwić oszacowanie wpływu tego zalecenia, można uzyskać z porównanie rzeczywistego użycia procesora CPU i projektowane użycie Procesora (tak, jakby zalecenie została zastosowana).</span><span class="sxs-lookup"><span data-stu-id="65148-143">To help you estimate the impact of this recommendation, you are provided with a comparison between the actual CPU usage and the projected CPU usage (as if the recommendation was applied).</span></span> <span data-ttu-id="65148-144">Oprócz zużycie procesora CPU czasu trwania kwerendy zmniejsza czas spędzony w kompilacji.</span><span class="sxs-lookup"><span data-stu-id="65148-144">In addition to CPU savings, your query duration decreases for the time spent in compilation.</span></span> <span data-ttu-id="65148-145">Również będzie znacznie mniejszy narzut na pamięci podręcznej planu, dzięki czemu większość planów pozostanie w pamięci podręcznej i można użyć ponownie.</span><span class="sxs-lookup"><span data-stu-id="65148-145">There will also be much less overhead on plan cache, allowing majority of the plans to stay in cache and be reused.</span></span> <span data-ttu-id="65148-146">Można zastosować zalecenie to szybkie i łatwe, klikając **Zastosuj** polecenia.</span><span class="sxs-lookup"><span data-stu-id="65148-146">You can apply this recommendation quickly and easily by clicking on the **Apply** command.</span></span> 

<span data-ttu-id="65148-147">Gdy zastosujesz zalecenie spowoduje włączenie parametryzacja wymuszone w ciągu minut bazy danych i rozpoczyna proces monitorowania, które trwa około 24 godzin.</span><span class="sxs-lookup"><span data-stu-id="65148-147">Once you apply this recommendation, it will enable forced parameterization within minutes on your database and it starts the monitoring process which approximately lasts for 24 hours.</span></span> <span data-ttu-id="65148-148">Po upływie tego czasu można wyświetlić raportu weryfikacji, który pokazuje użycie procesora CPU bazy danych, 24 godzin przed i po zastosowaniu zalecenia.</span><span class="sxs-lookup"><span data-stu-id="65148-148">After this period, you will be able to see the validation report that shows CPU usage of your database 24 hours before and after the recommendation has been applied.</span></span> <span data-ttu-id="65148-149">Doradca bazy danych programu SQL ma mechanizm bezpieczeństwa, który automatycznie przywrócona zalecenie zastosowane w przypadku, gdy wykryto regresji wydajności.</span><span class="sxs-lookup"><span data-stu-id="65148-149">SQL Database Advisor has a safety mechanism that automatically reverts the applied recommendation in case a performance regression has been detected.</span></span>

## <a name="fix-schema-issues-recommendations"></a><span data-ttu-id="65148-150">Usuń zalecenia dotyczące problemów schematu</span><span class="sxs-lookup"><span data-stu-id="65148-150">Fix schema issues recommendations</span></span>
<span data-ttu-id="65148-151">**Rozwiązywanie problemów schematu** zalecenia są wyświetlane po usługi SQL Database powiadomienia anomalii w liczba błędów SQL dotyczące schematu wykonywanych na bazie danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="65148-151">**Fix schema issues** recommendations appear when the SQL Database service notices an anomaly in the number of schema-related SQL errors happening on your Azure SQL Database.</span></span> <span data-ttu-id="65148-152">To zalecenie jest zwykle wyświetlany, gdy bazy danych wystąpi wiele błędów związanych z schematu (Nieprawidłowa nazwa kolumny, nieprawidłowa nazwa obiektu itp.) w ciągu godziny.</span><span class="sxs-lookup"><span data-stu-id="65148-152">This recommendation typically appears when your database encounters multiple schema-related errors (invalid column name, invalid object name, etc.) within an hour.</span></span>

<span data-ttu-id="65148-153">"Problemy z schematu" jest klasą błędy składniowe w programie SQL Server, które się zdarzyć, gdy nie są wyrównane definicji zapytania SQL, jak i definicja schematu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="65148-153">“Schema issues” are a class of syntax errors in SQL Server that happen when the definition of the SQL query and the definition of the database schema are not aligned.</span></span> <span data-ttu-id="65148-154">Na przykład jedna z kolumn oczekiwany przez zapytanie może brakować w tabeli docelowej lub na odwrót.</span><span class="sxs-lookup"><span data-stu-id="65148-154">For example, one of the columns expected by the query may be missing in the target table, or vice versa.</span></span> 

<span data-ttu-id="65148-155">"Napraw problem schematu" zalecenie jest wyświetlany, gdy usługi baza danych SQL Azure powiadomienia anomalii w liczba błędów SQL dotyczące schematu wykonywanych na bazie danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="65148-155">“Fix schema issue” recommendation appears when Azure SQL Database service notices an anomaly in the number of schema-related SQL errors happening on your Azure SQL Database.</span></span> <span data-ttu-id="65148-156">W poniższej tabeli przedstawiono błędów, które dotyczą problemów schematu:</span><span class="sxs-lookup"><span data-stu-id="65148-156">The following table shows the errors that are related to schema issues:</span></span>

| <span data-ttu-id="65148-157">Kod błędu SQL</span><span class="sxs-lookup"><span data-stu-id="65148-157">SQL Error Code</span></span> | <span data-ttu-id="65148-158">Komunikat</span><span class="sxs-lookup"><span data-stu-id="65148-158">Message</span></span> |
| --- | --- |
| <span data-ttu-id="65148-159">201</span><span class="sxs-lookup"><span data-stu-id="65148-159">201</span></span> |<span data-ttu-id="65148-160">Procedura lub funkcja "*"oczekuje parametru"*", który nie został dostarczony.</span><span class="sxs-lookup"><span data-stu-id="65148-160">Procedure or function '*' expects parameter '*', which was not supplied.</span></span> |
| <span data-ttu-id="65148-161">207</span><span class="sxs-lookup"><span data-stu-id="65148-161">207</span></span> |<span data-ttu-id="65148-162">Nieprawidłowa nazwa kolumny ' *'.</span><span class="sxs-lookup"><span data-stu-id="65148-162">Invalid column name '*'.</span></span> |
| <span data-ttu-id="65148-163">208</span><span class="sxs-lookup"><span data-stu-id="65148-163">208</span></span> |<span data-ttu-id="65148-164">Nieprawidłowa nazwa obiektu "*".</span><span class="sxs-lookup"><span data-stu-id="65148-164">Invalid object name '*'.</span></span> |
| <span data-ttu-id="65148-165">213</span><span class="sxs-lookup"><span data-stu-id="65148-165">213</span></span> |<span data-ttu-id="65148-166">Nazwa kolumny lub liczba podanych wartości nie odpowiada definicji tabeli.</span><span class="sxs-lookup"><span data-stu-id="65148-166">Column name or number of supplied values does not match table definition.</span></span> |
| <span data-ttu-id="65148-167">2812</span><span class="sxs-lookup"><span data-stu-id="65148-167">2812</span></span> |<span data-ttu-id="65148-168">Nie można odnaleźć procedury składowanej "*".</span><span class="sxs-lookup"><span data-stu-id="65148-168">Could not find stored procedure '*'.</span></span> |
| <span data-ttu-id="65148-169">8144</span><span class="sxs-lookup"><span data-stu-id="65148-169">8144</span></span> |<span data-ttu-id="65148-170">Procedura lub funkcja * ma określono zbyt wiele argumentów.</span><span class="sxs-lookup"><span data-stu-id="65148-170">Procedure or function * has too many arguments specified.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="65148-171">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="65148-171">Next steps</span></span>
<span data-ttu-id="65148-172">Monitorowanie zalecenia i zastosować je do ograniczania wydajności w dalszym ciągu.</span><span class="sxs-lookup"><span data-stu-id="65148-172">Monitor your recommendations and continue to apply them to refine performance.</span></span> <span data-ttu-id="65148-173">Obciążeń bazy danych są dynamiczne i zmienianie w sposób ciągły.</span><span class="sxs-lookup"><span data-stu-id="65148-173">Database workloads are dynamic and change continuously.</span></span> <span data-ttu-id="65148-174">Doradca bazy danych SQL kontynuuje monitorowanie i podano zalecenia, które może potencjalnie podnieść wydajność bazy danych.</span><span class="sxs-lookup"><span data-stu-id="65148-174">SQL Database advisor continues to monitor and provide recommendations that can potentially improve your database's performance.</span></span> 

* <span data-ttu-id="65148-175">Zobacz [zalecenia dotyczące wydajności w portalu Azure](sql-database-advisor-portal.md) instrukcje dotyczące sposobu używania zalecenia dotyczące wydajności w portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="65148-175">See [Performance recommendations in the Azure portal](sql-database-advisor-portal.md) for steps on how to use performance recommendations in the Azure portal.</span></span>
* <span data-ttu-id="65148-176">Zobacz [szczegółowe informacje o wydajności zapytań](sql-database-query-performance.md) poznać i wyświetlić jego wpływ na wydajność kwerend top.</span><span class="sxs-lookup"><span data-stu-id="65148-176">See [Query Performance Insights](sql-database-query-performance.md) to learn about and view the performance impact of your top queries.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="65148-177">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="65148-177">Additional resources</span></span>
* [<span data-ttu-id="65148-178">Magazyn zapytań</span><span class="sxs-lookup"><span data-stu-id="65148-178">Query Store</span></span>](https://msdn.microsoft.com/library/dn817826.aspx)
* [<span data-ttu-id="65148-179">TWORZENIE INDEKSU</span><span class="sxs-lookup"><span data-stu-id="65148-179">CREATE INDEX</span></span>](https://msdn.microsoft.com/library/ms188783.aspx)
* [<span data-ttu-id="65148-180">Kontrola dostępu oparta na rolach</span><span class="sxs-lookup"><span data-stu-id="65148-180">Role-based access control</span></span>](../active-directory/role-based-access-control-what-is.md)

