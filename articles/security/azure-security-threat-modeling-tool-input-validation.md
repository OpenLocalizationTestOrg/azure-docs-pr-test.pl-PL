---
title: "aaaInput weryfikacji - narzędzie modelowania zagrożeń Microsoft - Azure | Dokumentacja firmy Microsoft"
description: "środki zaradcze w przypadku zagrożeń w hello narzędzie modelowania zagrożeń"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: 823503881f4bae292ef021834d5e64acf2a0f54a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="security-frame-input-validation--mitigations"></a><span data-ttu-id="50d93-103">Ramka zabezpieczeń: Sprawdzanie poprawności danych wejściowych | Środki zaradcze</span><span class="sxs-lookup"><span data-stu-id="50d93-103">Security Frame: Input Validation | Mitigations</span></span> 
| <span data-ttu-id="50d93-104">Produktów i usług</span><span class="sxs-lookup"><span data-stu-id="50d93-104">Product/Service</span></span> | <span data-ttu-id="50d93-105">Artykuł</span><span class="sxs-lookup"><span data-stu-id="50d93-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="50d93-106">**Aplikacja sieci Web**</span><span class="sxs-lookup"><span data-stu-id="50d93-106">**Web Application**</span></span> | <ul><li>[<span data-ttu-id="50d93-107">Wyłącz XSLT skryptów dla wszystkich przekształceń przy użyciu arkuszy stylów niezaufanych</span><span class="sxs-lookup"><span data-stu-id="50d93-107">Disable XSLT scripting for all transforms using untrusted style sheets</span></span>](#disable-xslt)</li><li>[<span data-ttu-id="50d93-108">Upewnij się, że każdej strony, która może zawierać zawartość sterowane użytkownika zdecyduje się poza automatyczne wykrywanie MIME</span><span class="sxs-lookup"><span data-stu-id="50d93-108">Ensure that each page that could contain user controllable content opts out of automatic MIME sniffing</span></span>](#out-sniffing)</li><li>[<span data-ttu-id="50d93-109">Ograniczenia funkcjonalności lub wyłączyć rozpoznawanie jednostek XML</span><span class="sxs-lookup"><span data-stu-id="50d93-109">Harden or Disable XML Entity Resolution</span></span>](#xml-resolution)</li><li>[<span data-ttu-id="50d93-110">Aplikacje przy użyciu pliku http.sys przeprowadzenia weryfikacji zapewniania kanoniczności adresu URL</span><span class="sxs-lookup"><span data-stu-id="50d93-110">Applications utilizing http.sys perform URL canonicalization verification</span></span>](#app-verification)</li><li>[<span data-ttu-id="50d93-111">Upewnij się, że odpowiednie formanty są stosowane podczas akceptowania plików od użytkowników</span><span class="sxs-lookup"><span data-stu-id="50d93-111">Ensure appropriate controls are in place when accepting files from users</span></span>](#controls-users)</li><li>[<span data-ttu-id="50d93-112">Upewnij się, że bezpieczny parametry są używane w aplikacji sieci Web dla dostępu do danych</span><span class="sxs-lookup"><span data-stu-id="50d93-112">Ensure that type-safe parameters are used in Web Application for data access</span></span>](#typesafe)</li><li>[<span data-ttu-id="50d93-113">Użyj modelu oddzielne powiązanie klasy lub filtr powiązania wymieniono tooprevent MVC masowej przypisania luki w zabezpieczeniach</span><span class="sxs-lookup"><span data-stu-id="50d93-113">Use separate model binding classes or binding filter lists tooprevent MVC mass assignment vulnerability</span></span>](#binding-mvc)</li><li>[<span data-ttu-id="50d93-114">Kodowanie toorendering uprzedniego wyjścia niezaufanych sieci web</span><span class="sxs-lookup"><span data-stu-id="50d93-114">Encode untrusted web output prior toorendering</span></span>](#rendering)</li><li>[<span data-ttu-id="50d93-115">Sprawdzania poprawności danych wejściowych i filtrowanie na typ ciągu wszystkie właściwości modelu</span><span class="sxs-lookup"><span data-stu-id="50d93-115">Perform input validation and filtering on all string type Model properties</span></span>](#typemodel)</li><li>[<span data-ttu-id="50d93-116">Ich oczyszczania powinny być stosowane na pola formularza, które akceptują znaków, np., Edytor tekstu sformatowanego</span><span class="sxs-lookup"><span data-stu-id="50d93-116">Sanitization should be applied on form fields that accept all characters, e.g, rich text editor</span></span>](#richtext)</li><li>[<span data-ttu-id="50d93-117">Nie należy przypisywać toosinks elementy modelu DOM, które nie mają wbudowane kodowania</span><span class="sxs-lookup"><span data-stu-id="50d93-117">Do not assign DOM elements toosinks that do not have inbuilt encoding</span></span>](#inbuilt-encode)</li><li>[<span data-ttu-id="50d93-118">Sprawdź poprawność wszystkich przekierowania aplikacji hello zostały zamknięte lub wykonywane w sposób bezpieczny</span><span class="sxs-lookup"><span data-stu-id="50d93-118">Validate all redirects within hello application are closed or done safely</span></span>](#redirect-safe)</li><li>[<span data-ttu-id="50d93-119">Implementowanie sprawdzania poprawności danych wejściowych na wszystkie parametry typu ciąg zaakceptowane przez metody kontrolera</span><span class="sxs-lookup"><span data-stu-id="50d93-119">Implement input validation on all string type parameters accepted by Controller methods</span></span>](#string-method)</li><li>[<span data-ttu-id="50d93-120">Ustawić limitu górnego limitu czasu dla wyrażenia regularnego przetwarzania DoS tooprevent powodu toobad wyrażeń regularnych</span><span class="sxs-lookup"><span data-stu-id="50d93-120">Set upper limit timeout for regular expression processing tooprevent DoS due toobad regular expressions</span></span>](#dos-expression)</li><li>[<span data-ttu-id="50d93-121">Należy unikać używania Html.Raw w widokami Razor</span><span class="sxs-lookup"><span data-stu-id="50d93-121">Avoid using Html.Raw in Razor views</span></span>](#html-razor)</li></ul> | 
| <span data-ttu-id="50d93-122">**Baza danych**</span><span class="sxs-lookup"><span data-stu-id="50d93-122">**Database**</span></span> | <ul><li>[<span data-ttu-id="50d93-123">Nie używaj zapytań dynamicznych procedury składowane</span><span class="sxs-lookup"><span data-stu-id="50d93-123">Do not use dynamic queries in stored procedures</span></span>](#stored-proc)</li></ul> |
| <span data-ttu-id="50d93-124">**Interfejs API sieci Web**</span><span class="sxs-lookup"><span data-stu-id="50d93-124">**Web API**</span></span> | <ul><li>[<span data-ttu-id="50d93-125">Upewnij się, że weryfikacja modelu jest wykonywana na metody interfejsu API sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-125">Ensure that model validation is done on Web API methods</span></span>](#validation-api)</li><li>[<span data-ttu-id="50d93-126">Implementowanie sprawdzania poprawności danych wejściowych na wszystkie parametry typu ciąg zaakceptowane przez metody interfejsu API sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-126">Implement input validation on all string type parameters accepted by Web API methods</span></span>](#string-api)</li><li>[<span data-ttu-id="50d93-127">Upewnij się, czy bezpieczny parametry są używane w interfejsie API sieci Web dla dostępu do danych</span><span class="sxs-lookup"><span data-stu-id="50d93-127">Ensure that type-safe parameters are used in Web API for data access</span></span>](#typesafe-api)</li></ul> | 
| <span data-ttu-id="50d93-128">**Dokumentów w usłudze Azure DB**</span><span class="sxs-lookup"><span data-stu-id="50d93-128">**Azure Document DB**</span></span> | <ul><li>[<span data-ttu-id="50d93-129">Użyj sparametryzowanego zapytania SQL usługi documentdb</span><span class="sxs-lookup"><span data-stu-id="50d93-129">Use parametrized SQL queries for DocumentDB</span></span>](#sql-docdb)</li></ul> | 
| <span data-ttu-id="50d93-130">**WCF**</span><span class="sxs-lookup"><span data-stu-id="50d93-130">**WCF**</span></span> | <ul><li>[<span data-ttu-id="50d93-131">Sprawdzanie poprawności danych wejściowych WCF przez powiązanie ze schematem</span><span class="sxs-lookup"><span data-stu-id="50d93-131">WCF Input validation through Schema binding</span></span>](#schema-binding)</li><li>[<span data-ttu-id="50d93-132">Sprawdzanie poprawności wejściowy WCF za pomocą parametru inspektorzy</span><span class="sxs-lookup"><span data-stu-id="50d93-132">WCF- Input validation through Parameter Inspectors</span></span>](#parameters)</li></ul> |

## <span data-ttu-id="50d93-133"><a id="disable-xslt"></a>Wyłącz XSLT skryptów dla wszystkich przekształceń przy użyciu arkuszy stylów niezaufanych</span><span class="sxs-lookup"><span data-stu-id="50d93-133"><a id="disable-xslt"></a>Disable XSLT scripting for all transforms using untrusted style sheets</span></span>

| <span data-ttu-id="50d93-134">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-134">Title</span></span>                   | <span data-ttu-id="50d93-135">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-135">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-136">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-136">**Component**</span></span>               | <span data-ttu-id="50d93-137">Aplikacja sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-137">Web Application</span></span> | 
| <span data-ttu-id="50d93-138">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-138">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-139">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-139">Build</span></span> |  
| <span data-ttu-id="50d93-140">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-140">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-141">Ogólny</span><span class="sxs-lookup"><span data-stu-id="50d93-141">Generic</span></span> |
| <span data-ttu-id="50d93-142">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-142">**Attributes**</span></span>              | <span data-ttu-id="50d93-143">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-143">N/A</span></span>  |
| <span data-ttu-id="50d93-144">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-144">**References**</span></span>              | <span data-ttu-id="50d93-145">[Zabezpieczenia XSLT](https://msdn.microsoft.com/library/ms763800(v=vs.85).aspx), [właściwości XsltSettings.EnableScript](http://msdn.microsoft.com/library/system.xml.xsl.xsltsettings.enablescript.aspx)</span><span class="sxs-lookup"><span data-stu-id="50d93-145">[XSLT Security](https://msdn.microsoft.com/library/ms763800(v=vs.85).aspx), [XsltSettings.EnableScript Property](http://msdn.microsoft.com/library/system.xml.xsl.xsltsettings.enablescript.aspx)</span></span> |
| <span data-ttu-id="50d93-146">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-146">**Steps**</span></span> | <span data-ttu-id="50d93-147">Obsługuje XSLT skryptów wewnątrz arkusze stylów przy użyciu hello `<msxml:script>` elementu.</span><span class="sxs-lookup"><span data-stu-id="50d93-147">XSLT supports scripting inside style sheets using hello `<msxml:script>` element.</span></span> <span data-ttu-id="50d93-148">Dzięki temu używany podczas przekształcania XSLT toobe funkcji niestandardowych.</span><span class="sxs-lookup"><span data-stu-id="50d93-148">This allows custom functions toobe used in an XSLT transformation.</span></span> <span data-ttu-id="50d93-149">Witaj skrypt jest wykonywany w kontekście hello hello procesu wykonywania hello transformacji.</span><span class="sxs-lookup"><span data-stu-id="50d93-149">hello script is executed under hello context of hello process performing hello transform.</span></span> <span data-ttu-id="50d93-150">Skrypt XSLT musi zostać wyłączona w przypadku wykonywania tooprevent niezaufanych środowiska kodzie niezaufanym.</span><span class="sxs-lookup"><span data-stu-id="50d93-150">XSLT script must be disabled when in an untrusted environment tooprevent execution of untrusted code.</span></span> <span data-ttu-id="50d93-151">*Jeśli przy użyciu platformy .NET:* XSLT skryptów jest domyślnie wyłączona; jednak pamiętaj, że go nie została jawnie włączona przy użyciu hello `XsltSettings.EnableScript` właściwości.</span><span class="sxs-lookup"><span data-stu-id="50d93-151">*If using .NET:* XSLT scripting is disabled by default; however, you must ensure that it has not been explicitly enabled through hello `XsltSettings.EnableScript` property.</span></span>|

### <a name="example"></a><span data-ttu-id="50d93-152">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-152">Example</span></span> 

```C#
XsltSettings settings = new XsltSettings();
settings.EnableScript = true; // WRONG: THIS SHOULD BE SET toofalse
```

### <a name="example"></a><span data-ttu-id="50d93-153">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-153">Example</span></span>
<span data-ttu-id="50d93-154">Jeśli używasz przy użyciu programu MSXML 6.0 XSLT skryptów jest domyślnie wyłączona; należy jednak upewnić się, czy go nie została jawnie włączona przy użyciu właściwości obiektu XML DOM hello AllowXsltScript.</span><span class="sxs-lookup"><span data-stu-id="50d93-154">If you are using using MSXML 6.0, XSLT scripting is disabled by default; however, you must ensure that it has not been explicitly enabled through hello XML DOM object property AllowXsltScript.</span></span> 

```C#
doc.setProperty("AllowXsltScript", true); // WRONG: THIS SHOULD BE SET toofalse
```

### <a name="example"></a><span data-ttu-id="50d93-155">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-155">Example</span></span>
<span data-ttu-id="50d93-156">Jeśli używasz MSXML 5 lub poniżej, skryptów XSLT jest domyślnie włączona, więc użytkownik musi jawnie należy ją wyłączyć.</span><span class="sxs-lookup"><span data-stu-id="50d93-156">If you are using MSXML 5 or below, XSLT scripting is enabled by default and you must explicitly disable it.</span></span> <span data-ttu-id="50d93-157">Ustaw hello XML DOM obiektu właściwości AllowXsltScript toofalse.</span><span class="sxs-lookup"><span data-stu-id="50d93-157">Set hello XML DOM object property AllowXsltScript toofalse.</span></span> 

```C#
doc.setProperty("AllowXsltScript", false); // CORRECT. Setting toofalse disables XSLT scripting.
```

## <span data-ttu-id="50d93-158"><a id="out-sniffing"></a>Upewnij się, że każdej strony, która może zawierać zawartość sterowane użytkownika zdecyduje się poza automatyczne wykrywanie MIME</span><span class="sxs-lookup"><span data-stu-id="50d93-158"><a id="out-sniffing"></a>Ensure that each page that could contain user controllable content opts out of automatic MIME sniffing</span></span>

| <span data-ttu-id="50d93-159">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-159">Title</span></span>                   | <span data-ttu-id="50d93-160">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-160">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-161">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-161">**Component**</span></span>               | <span data-ttu-id="50d93-162">Aplikacja sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-162">Web Application</span></span> | 
| <span data-ttu-id="50d93-163">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-163">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-164">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-164">Build</span></span> |  
| <span data-ttu-id="50d93-165">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-165">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-166">Ogólny</span><span class="sxs-lookup"><span data-stu-id="50d93-166">Generic</span></span> |
| <span data-ttu-id="50d93-167">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-167">**Attributes**</span></span>              | <span data-ttu-id="50d93-168">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-168">N/A</span></span>  |
| <span data-ttu-id="50d93-169">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-169">**References**</span></span>              | [<span data-ttu-id="50d93-170">Programu IE 8 V części zabezpieczeń - kompleksową ochronę</span><span class="sxs-lookup"><span data-stu-id="50d93-170">IE8 Security Part V - Comprehensive Protection</span></span>](http://blogs.msdn.com/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx)  |
| <span data-ttu-id="50d93-171">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-171">**Steps**</span></span> | <p><span data-ttu-id="50d93-172">Dla każdej strony zawierających zawartość sterowane użytkownika, należy użyć hello nagłówka HTTP `X-Content-Type-Options:nosniff`.</span><span class="sxs-lookup"><span data-stu-id="50d93-172">For each page that could contain user controllable content, you must use hello HTTP Header `X-Content-Type-Options:nosniff`.</span></span> <span data-ttu-id="50d93-173">toocomply z tym wymaganiem, możesz albo zestaw hello wymaganego nagłówka przez strony dla tych stron, które mogą zawierać zawartość kontroli użytkownika, lub możesz ustawić globalnie do wszystkich stron w aplikacji hello.</span><span class="sxs-lookup"><span data-stu-id="50d93-173">toocomply with this requirement, you can either set hello required header page by page for only those pages that might contain user-controllable content, or you can set it globally for all pages in hello application.</span></span></p><p><span data-ttu-id="50d93-174">Każdy typ pliku dostarczonych przez serwer sieci web ma skojarzoną [typ MIME](http://en.wikipedia.org/wiki/Mime_type) (skrót *typu zawartości*), który opisuje rodzaj hello hello zawartości (czyli obraz, tekst, aplikacji, itp.)</span><span class="sxs-lookup"><span data-stu-id="50d93-174">Each type of file delivered from a web server has an associated [MIME type](http://en.wikipedia.org/wiki/Mime_type) (also called a *content-type*) that describes hello nature of hello content (that is, image, text, application, etc.)</span></span></p><p><span data-ttu-id="50d93-175">Nagłówek X-Content-typu-Options Hello jest nagłówka HTTP, która umożliwia deweloperom stosowanie toospecify, że jego zawartość nie powinny być ten sposób MIME.</span><span class="sxs-lookup"><span data-stu-id="50d93-175">hello X-Content-Type-Options header is an HTTP header that allows developers toospecify that their content should not be MIME-sniffed.</span></span> <span data-ttu-id="50d93-176">Ten nagłówek jest zaprojektowana toomitigate wykrywanie MIME ataków.</span><span class="sxs-lookup"><span data-stu-id="50d93-176">This header is designed toomitigate MIME-Sniffing attacks.</span></span> <span data-ttu-id="50d93-177">Dodano obsługę dla tego nagłówka w programie Internet Explorer 8 (programu IE 8)</span><span class="sxs-lookup"><span data-stu-id="50d93-177">Support for this header was added in Internet Explorer 8 (IE8)</span></span></p><p><span data-ttu-id="50d93-178">Tylko użytkownicy programu Internet Explorer 8 (programu IE 8) będą korzystać z X-Content-typu-Options.</span><span class="sxs-lookup"><span data-stu-id="50d93-178">Only users of Internet Explorer 8 (IE8) will benefit from X-Content-Type-Options.</span></span> <span data-ttu-id="50d93-179">Poprzednie wersje programu Internet Explorer aktualnie nie przestrzega nagłówek X-Content-typu-Options powitania</span><span class="sxs-lookup"><span data-stu-id="50d93-179">Previous versions of Internet Explorer do not currently respect hello X-Content-Type-Options header</span></span></p><p><span data-ttu-id="50d93-180">Program Internet Explorer 8 (lub nowszy) są hello tylko główne przeglądarki funkcji Wypisz tooimplement wykrywanie MIME.</span><span class="sxs-lookup"><span data-stu-id="50d93-180">Internet Explorer 8 (and later) are hello only major browsers tooimplement a MIME-sniffing opt-out feature.</span></span> <span data-ttu-id="50d93-181">Jeśli inne główne przeglądarki (Firefox, Safari, Chrome) zaimplementować podobne funkcje, to zalecenie będzie składni tooinclude zaktualizowane dla tych przeglądarek, jak również</span><span class="sxs-lookup"><span data-stu-id="50d93-181">If and when other major browsers (Firefox, Safari, Chrome) implement similar features, this recommendation will be updated tooinclude syntax for those browsers as well</span></span></p>|

### <a name="example"></a><span data-ttu-id="50d93-182">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-182">Example</span></span>
<span data-ttu-id="50d93-183">tooenable hello wymaganego nagłówka globalnie do wszystkich stron w aplikacji hello, możesz wybrać jedną z następujących hello:</span><span class="sxs-lookup"><span data-stu-id="50d93-183">tooenable hello required header globally for all pages in hello application, you can do one of hello following:</span></span> 

* <span data-ttu-id="50d93-184">Dodaj nagłówek hello w pliku web.config hello, jeśli aplikacja hello jest obsługiwana przez Internet Information Services (IIS) 7</span><span class="sxs-lookup"><span data-stu-id="50d93-184">Add hello header in hello web.config file if hello application is hosted by Internet Information Services (IIS) 7</span></span> 

```
<system.webServer> 
  <httpProtocol> 
    <customHeaders> 
      <add name=""X-Content-Type-Options"" value=""nosniff""/>
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

* <span data-ttu-id="50d93-185">Dodaj nagłówek hello za pośrednictwem hello globalnego aplikacji\_powstaniem zdarzenia BeginRequest</span><span class="sxs-lookup"><span data-stu-id="50d93-185">Add hello header through hello global Application\_BeginRequest</span></span> 

``` 
void Application_BeginRequest(object sender, EventArgs e)
{
  this.Response.Headers[""X-Content-Type-Options""] = ""nosniff"";
} 
```

* <span data-ttu-id="50d93-186">Implementowanie niestandardowego modułu HTTP</span><span class="sxs-lookup"><span data-stu-id="50d93-186">Implement custom HTTP module</span></span> 

``` 
public class XContentTypeOptionsModule : IHttpModule 
  {
    #region IHttpModule Members 
    public void Dispose() 
    { 

    } 
    public void Init(HttpApplication context)
    { 
      context.PreSendRequestHeaders += newEventHandler(context_PreSendRequestHeaders); 
    } 
    #endregion 
    void context_PreSendRequestHeaders(object sender, EventArgs e) 
      { 
        HttpApplication application = sender as HttpApplication; 
        if (application == null) 
          return; 
        if (application.Response.Headers[""X-Content-Type-Options ""] != null) 
          return; 
        application.Response.Headers.Add(""X-Content-Type-Options "", ""nosniff""); 
      } 
  } 

``` 

* <span data-ttu-id="50d93-187">Można włączyć wymaganego nagłówka hello tylko dla określonych stron, dodając tooindividual odpowiedzi:</span><span class="sxs-lookup"><span data-stu-id="50d93-187">You can enable hello required header only for specific pages by adding it tooindividual responses:</span></span> 

```
this.Response.Headers[""X-Content-Type-Options""] = ""nosniff""; 
``` 

## <span data-ttu-id="50d93-188"><a id="xml-resolution"></a>Ograniczenia funkcjonalności lub wyłączyć rozpoznawanie jednostek XML</span><span class="sxs-lookup"><span data-stu-id="50d93-188"><a id="xml-resolution"></a>Harden or Disable XML Entity Resolution</span></span>

| <span data-ttu-id="50d93-189">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-189">Title</span></span>                   | <span data-ttu-id="50d93-190">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-190">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-191">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-191">**Component**</span></span>               | <span data-ttu-id="50d93-192">Aplikacja sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-192">Web Application</span></span> | 
| <span data-ttu-id="50d93-193">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-193">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-194">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-194">Build</span></span> |  
| <span data-ttu-id="50d93-195">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-195">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-196">Ogólny</span><span class="sxs-lookup"><span data-stu-id="50d93-196">Generic</span></span> |
| <span data-ttu-id="50d93-197">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-197">**Attributes**</span></span>              | <span data-ttu-id="50d93-198">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-198">N/A</span></span>  |
| <span data-ttu-id="50d93-199">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-199">**References**</span></span>              | <span data-ttu-id="50d93-200">[Rozszerzenia jednostki XML](http://capec.mitre.org/data/definitions/197.html), [ataki odmowy usługi XML i zabezpieczenia](http://msdn.microsoft.com/magazine/ee335713.aspx), [Omówienie zabezpieczeń MSXML](http://msdn.microsoft.com/library/ms754611(v=VS.85).aspx), [najlepsze rozwiązania dotyczące zabezpieczania kodu MSXML](http://msdn.microsoft.com/library/ms759188(VS.85).aspx), [referencyjne protokołu NSXMLParserDelegate](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html), [rozpoznawania odwołań zewnętrznych](https://msdn.microsoft.com/library/5fcwybb2.aspx)</span><span class="sxs-lookup"><span data-stu-id="50d93-200">[XML Entity Expansion](http://capec.mitre.org/data/definitions/197.html), [XML Denial of Service Attacks and Defenses](http://msdn.microsoft.com/magazine/ee335713.aspx), [MSXML Security Overview](http://msdn.microsoft.com/library/ms754611(v=VS.85).aspx), [Best Practices for Securing MSXML Code](http://msdn.microsoft.com/library/ms759188(VS.85).aspx), [NSXMLParserDelegate Protocol Reference](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html), [Resolving External References](https://msdn.microsoft.com/library/5fcwybb2.aspx)</span></span> |
| <span data-ttu-id="50d93-201">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-201">**Steps**</span></span>| <p><span data-ttu-id="50d93-202">Chociaż nie jest powszechnie używane, jest funkcją XML, który umożliwia tooexpand analizatora składni XML hello jednostek makro z wartości zdefiniowanych w obrębie samego dokumentu hello lub ze źródeł zewnętrznych.</span><span class="sxs-lookup"><span data-stu-id="50d93-202">Although it is not widely used, there is a feature of XML that allows hello XML parser tooexpand macro entities with values defined either within hello document itself or from external sources.</span></span> <span data-ttu-id="50d93-203">Na przykład dokument hello zdefiniować jednostki "NazwaFirmy" o wartości hello "Microsoft", tak, aby zawsze hello tekst "&companyname;" pojawia się w dokumencie hello, automatycznie zostaje zastąpiony tekst hello firmy Microsoft.</span><span class="sxs-lookup"><span data-stu-id="50d93-203">For example, hello document might define an entity "companyname" with hello value "Microsoft," so that every time hello text "&companyname;" appears in hello document, it is automatically replaced with hello text Microsoft.</span></span> <span data-ttu-id="50d93-204">Lub dokument hello zdefiniować jednostki "MSFTStock", który odwołuje się do zewnętrznych sieci web usługi toofetch hello bieżącej wartości zasobu firmy Microsoft.</span><span class="sxs-lookup"><span data-stu-id="50d93-204">Or, hello document might define an entity "MSFTStock" that references an external web service toofetch hello current value of Microsoft stock.</span></span></p><p><span data-ttu-id="50d93-205">Następnie w dowolnym momencie "&MSFTStock;" pojawia się w dokumencie hello, automatycznie zostaje zastąpiony bieżącego giełdowy hello.</span><span class="sxs-lookup"><span data-stu-id="50d93-205">Then any time "&MSFTStock;" appears in hello document, it is automatically replaced with hello current stock price.</span></span> <span data-ttu-id="50d93-206">Jednak ta funkcja może być użyte toocreate odmowa warunki usługi (DoS).</span><span class="sxs-lookup"><span data-stu-id="50d93-206">However, this functionality can be abused toocreate denial of service (DoS) conditions.</span></span> <span data-ttu-id="50d93-207">Osoba atakująca można zagnieżdżać wiele jednostek toocreate wykładniczej rozszerzenia bomba XML, który wykorzystuje wszystkie dostępnej pamięci w systemie hello.</span><span class="sxs-lookup"><span data-stu-id="50d93-207">An attacker can nest multiple entities toocreate an exponential expansion XML bomb that consumes all available memory on hello system.</span></span> </p><p><span data-ttu-id="50d93-208">Alternatywnie on można tworzyć odwołania zewnętrznego, który strumieni wstecz nieskończoną ilość danych lub która po prostu zawiesza się hello wątku.</span><span class="sxs-lookup"><span data-stu-id="50d93-208">Alternatively, he can create an external reference that streams back an infinite amount of data or that simply hangs hello thread.</span></span> <span data-ttu-id="50d93-209">W związku z tym wszystkie zespoły należy wyłączyć wewnętrznych lub zewnętrznych rozpoznawania jednostki XML, jeśli ich stosowania nie używać jej lub ręcznie ograniczyć hello ilość pamięci i czasu, który aplikacji hello może używać do rozpoznawania jednostek, jeśli jest to bezwzględnie konieczne.</span><span class="sxs-lookup"><span data-stu-id="50d93-209">As a result, all teams must disable internal and/or external XML entity resolution entirely if their application does not use it, or manually limit hello amount of memory and time that hello application can consume for entity resolution if this functionality is absolutely necessary.</span></span> <span data-ttu-id="50d93-210">Jeśli jednostka rozpoznawania nie jest wymagane przez aplikację, należy go wyłączyć.</span><span class="sxs-lookup"><span data-stu-id="50d93-210">If entity resolution is not required by your application, then disable it.</span></span> </p>|

### <a name="example"></a><span data-ttu-id="50d93-211">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-211">Example</span></span>
<span data-ttu-id="50d93-212">Dla kodu platformy .NET Framework można użyć hello następujących metod:</span><span class="sxs-lookup"><span data-stu-id="50d93-212">For .NET Framework code, you can use hello following approaches:</span></span>

```C#
XmlTextReader reader = new XmlTextReader(stream);
reader.ProhibitDtd = true;

XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = true;
XmlReader reader = XmlReader.Create(stream, settings);

// for .NET 4
XmlReaderSettings settings = new XmlReaderSettings();
settings.DtdProcessing = DtdProcessing.Prohibit;
XmlReader reader = XmlReader.Create(stream, settings);
```
<span data-ttu-id="50d93-213">Należy pamiętać, że wartość domyślna hello `ProhibitDtd` w `XmlReaderSettings` ma wartość true, ale w `XmlTextReader` ma wartość false.</span><span class="sxs-lookup"><span data-stu-id="50d93-213">Note that hello default value of `ProhibitDtd` in `XmlReaderSettings` is true, but in `XmlTextReader` it is false.</span></span> <span data-ttu-id="50d93-214">Jeśli używasz XmlReaderSettings tootrue ProhibitDtd dla elementu tooset nie ma potrzeby jawnie, ale jest zalecane dla bezpieczeństwa sake wykonanie.</span><span class="sxs-lookup"><span data-stu-id="50d93-214">If you are using XmlReaderSettings, you do not need tooset ProhibitDtd tootrue explicitly, but it is recommended for safety sake that you do.</span></span> <span data-ttu-id="50d93-215">Należy również zauważyć, że domyślnie klasy XmlDocument hello zezwala na rozpoznawanie jednostek.</span><span class="sxs-lookup"><span data-stu-id="50d93-215">Also note that hello XmlDocument class allows entity resolution by default.</span></span> 

### <a name="example"></a><span data-ttu-id="50d93-216">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-216">Example</span></span>
<span data-ttu-id="50d93-217">rozpoznawanie jednostek toodisable XmlDocuments, użyj hello `XmlDocument.Load(XmlReader)` przeciążenia hello Load — metoda i ustaw odpowiednie właściwości hello hello XmlReader argument toodisable rozdzielczość zgodnie z opisami w hello następującego kodu:</span><span class="sxs-lookup"><span data-stu-id="50d93-217">toodisable entity resolution for XmlDocuments, use hello `XmlDocument.Load(XmlReader)` overload of hello Load method and set hello appropriate properties in hello XmlReader argument toodisable resolution, as illustrated in hello following code:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = true;
XmlReader reader = XmlReader.Create(stream, settings);
XmlDocument doc = new XmlDocument();
doc.Load(reader);
```

### <a name="example"></a><span data-ttu-id="50d93-218">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-218">Example</span></span>
<span data-ttu-id="50d93-219">Jeśli wyłączenie rozpoznawania jednostki nie jest możliwe w dla aplikacji, należy ustawić hello XmlReaderSettings.MaxCharactersFromEntities tooa rozsądne wartości właściwości zgodnie z potrzebami tooyour aplikacji.</span><span class="sxs-lookup"><span data-stu-id="50d93-219">If disabling entity resolution is not possible for your application, set hello XmlReaderSettings.MaxCharactersFromEntities property tooa reasonable value according tooyour application's needs.</span></span> <span data-ttu-id="50d93-220">Ograniczy hello skutków potencjalnych ataków DoS wykładniczej rozszerzenia.</span><span class="sxs-lookup"><span data-stu-id="50d93-220">This will limit hello impact of potential exponential expansion DoS attacks.</span></span> <span data-ttu-id="50d93-221">Witaj następującego kodu zawiera przykład tej metody:</span><span class="sxs-lookup"><span data-stu-id="50d93-221">hello following code provides an example of this approach:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.MaxCharactersFromEntities = 1000;
XmlReader reader = XmlReader.Create(stream, settings);
```

### <a name="example"></a><span data-ttu-id="50d93-222">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-222">Example</span></span>
<span data-ttu-id="50d93-223">Jeśli potrzebna tooresolve wbudowanego jednostek, ale nie ma potrzeby tooresolve podmioty zewnętrzne, należy ustawić hello XmlReaderSettings.XmlResolver właściwości toonull.</span><span class="sxs-lookup"><span data-stu-id="50d93-223">If you need tooresolve inline entities but do not need tooresolve external entities, set hello XmlReaderSettings.XmlResolver property toonull.</span></span> <span data-ttu-id="50d93-224">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="50d93-224">For example:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.MaxCharactersFromEntities = 1000;
settings.XmlResolver = null;
XmlReader reader = XmlReader.Create(stream, settings);
```
<span data-ttu-id="50d93-225">Należy zauważyć, że w MSXML6, ProhibitDtd dla elementu jest tootrue (wyłączenie przetwarzanie elementu DTD) domyślnie.</span><span class="sxs-lookup"><span data-stu-id="50d93-225">Note that in MSXML6, ProhibitDTD is set tootrue (disabling DTD processing) by default.</span></span> <span data-ttu-id="50d93-226">Kod, OS x firmy Apple dla systemu iOS, istnieją dwie analizatorów składni XML można użyć: NSXMLParser i libXML2.</span><span class="sxs-lookup"><span data-stu-id="50d93-226">For Apple OSX/iOS code, there are two XML parsers you can use: NSXMLParser and libXML2.</span></span> 

## <span data-ttu-id="50d93-227"><a id="app-verification"></a>Aplikacje przy użyciu pliku http.sys przeprowadzenia weryfikacji zapewniania kanoniczności adresu URL</span><span class="sxs-lookup"><span data-stu-id="50d93-227"><a id="app-verification"></a>Applications utilizing http.sys perform URL canonicalization verification</span></span>

| <span data-ttu-id="50d93-228">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-228">Title</span></span>                   | <span data-ttu-id="50d93-229">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-229">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-230">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-230">**Component**</span></span>               | <span data-ttu-id="50d93-231">Aplikacja sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-231">Web Application</span></span> | 
| <span data-ttu-id="50d93-232">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-232">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-233">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-233">Build</span></span> |  
| <span data-ttu-id="50d93-234">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-234">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-235">Ogólny</span><span class="sxs-lookup"><span data-stu-id="50d93-235">Generic</span></span> |
| <span data-ttu-id="50d93-236">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-236">**Attributes**</span></span>              | <span data-ttu-id="50d93-237">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-237">N/A</span></span>  |
| <span data-ttu-id="50d93-238">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-238">**References**</span></span>              | <span data-ttu-id="50d93-239">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-239">N/A</span></span>  |
| <span data-ttu-id="50d93-240">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-240">**Steps**</span></span> | <p><span data-ttu-id="50d93-241">Dowolnej aplikacji, która korzysta z pliku http.sys należy przestrzegać następujących wytycznych:</span><span class="sxs-lookup"><span data-stu-id="50d93-241">Any application that uses http.sys should follow these guidelines:</span></span></p><ul><li><span data-ttu-id="50d93-242">Ogranicz toono długość adresu URL hello więcej niż 16 384 znaków (ASCII lub Unicode).</span><span class="sxs-lookup"><span data-stu-id="50d93-242">Limit hello URL length toono more than 16,384 characters (ASCII or Unicode).</span></span> <span data-ttu-id="50d93-243">Jest to hello bezwzględną maksymalna długość adresu URL na podstawie ustawienia usług Internet Information Services (IIS) 6 domyślne hello.</span><span class="sxs-lookup"><span data-stu-id="50d93-243">This is hello absolute maximum URL length based on hello default Internet Information Services (IIS) 6 setting.</span></span> <span data-ttu-id="50d93-244">Witryn sieci Web należy dążyć do krótszego niż to, jeśli to możliwe</span><span class="sxs-lookup"><span data-stu-id="50d93-244">Websites should strive for a length shorter than this if possible</span></span></li><li><span data-ttu-id="50d93-245">Używać hello standardowe .NET Framework we/wy pliku klas (na przykład FileStream), jak te skorzystają z hello zasady zapewniania kanoniczności w hello .NET FX</span><span class="sxs-lookup"><span data-stu-id="50d93-245">Use hello standard .NET Framework file I/O classes (such as FileStream) as these will take advantage of hello canonicalization rules in hello .NET FX</span></span></li><li><span data-ttu-id="50d93-246">Jawne tworzenie listy dozwolonych, znane nazw plików</span><span class="sxs-lookup"><span data-stu-id="50d93-246">Explicitly build an allow-list of known filenames</span></span></li><li><span data-ttu-id="50d93-247">Jawnie Odrzuć znane typy plików, nie będzie obsługiwać odrzuca UrlScan: exe, bat, cmd, com, htw, ida, idq, htr, idc, shtm [l], stm, drukarki, ini, pol, pliki dat</span><span class="sxs-lookup"><span data-stu-id="50d93-247">Explicitly reject known filetypes you will not serve UrlScan rejects: exe, bat, cmd, com, htw, ida, idq, htr, idc, shtm[l], stm, printer, ini, pol, dat files</span></span></li><li><span data-ttu-id="50d93-248">CATCH hello następujące wyjątki:</span><span class="sxs-lookup"><span data-stu-id="50d93-248">Catch hello following exceptions:</span></span><ul><li><span data-ttu-id="50d93-249">System.ArgumentException (dla nazwy urządzenia)</span><span class="sxs-lookup"><span data-stu-id="50d93-249">System.ArgumentException (for device names)</span></span></li><li><span data-ttu-id="50d93-250">System.NotSupportedException (dla strumieni danych)</span><span class="sxs-lookup"><span data-stu-id="50d93-250">System.NotSupportedException (for data streams)</span></span></li><li><span data-ttu-id="50d93-251">System.IO.FileNotFoundException (dla nieprawidłowy zmienionym nazwy plików)</span><span class="sxs-lookup"><span data-stu-id="50d93-251">System.IO.FileNotFoundException (for invalid escaped filenames)</span></span></li><li><span data-ttu-id="50d93-252">System.IO.DirectoryNotFoundException (dla nieprawidłowy katalogi zmienionym)</span><span class="sxs-lookup"><span data-stu-id="50d93-252">System.IO.DirectoryNotFoundException (for invalid escaped dirs)</span></span></li></ul></li><li><span data-ttu-id="50d93-253">*Nie* wyróżnienia pliku tooWin32 interfejsów API we/wy.</span><span class="sxs-lookup"><span data-stu-id="50d93-253">*Do not* call out tooWin32 file I/O APIs.</span></span> <span data-ttu-id="50d93-254">Na nieprawidłowy adres URL bezpiecznie zwróci błąd 400 toohello użytkownika i hello rzeczywistych błąd logowania.</span><span class="sxs-lookup"><span data-stu-id="50d93-254">On an invalid URL gracefully return a 400 error toohello user, and log hello real error.</span></span></li></ul>|

## <span data-ttu-id="50d93-255"><a id="controls-users"></a>Upewnij się, że odpowiednie formanty są stosowane podczas akceptowania plików od użytkowników</span><span class="sxs-lookup"><span data-stu-id="50d93-255"><a id="controls-users"></a>Ensure appropriate controls are in place when accepting files from users</span></span>

| <span data-ttu-id="50d93-256">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-256">Title</span></span>                   | <span data-ttu-id="50d93-257">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-257">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-258">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-258">**Component**</span></span>               | <span data-ttu-id="50d93-259">Aplikacja sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-259">Web Application</span></span> | 
| <span data-ttu-id="50d93-260">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-260">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-261">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-261">Build</span></span> |  
| <span data-ttu-id="50d93-262">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-262">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-263">Ogólny</span><span class="sxs-lookup"><span data-stu-id="50d93-263">Generic</span></span> |
| <span data-ttu-id="50d93-264">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-264">**Attributes**</span></span>              | <span data-ttu-id="50d93-265">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-265">N/A</span></span>  |
| <span data-ttu-id="50d93-266">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-266">**References**</span></span>              | <span data-ttu-id="50d93-267">[Nieograniczonych przekazywania pliku](https://www.owasp.org/index.php/Unrestricted_File_Upload), [tabeli podpisu pliku](http://www.garykessler.net/library/file_sigs.html)</span><span class="sxs-lookup"><span data-stu-id="50d93-267">[Unrestricted File Upload](https://www.owasp.org/index.php/Unrestricted_File_Upload), [File Signature Table](http://www.garykessler.net/library/file_sigs.html)</span></span> |
| <span data-ttu-id="50d93-268">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-268">**Steps**</span></span> | <p><span data-ttu-id="50d93-269">Przekazano pliki reprezentują tooapplications znaczące zagrożenie.</span><span class="sxs-lookup"><span data-stu-id="50d93-269">Uploaded files represent a significant risk tooapplications.</span></span></p><p><span data-ttu-id="50d93-270">pierwszym etapem wiele ataków w Hello jest tooget ataku niektórych toobe systemu toohello kodu.</span><span class="sxs-lookup"><span data-stu-id="50d93-270">hello first step in many attacks is tooget some code toohello system toobe attacked.</span></span> <span data-ttu-id="50d93-271">Następnie atak powitania musi wykonać kod hello tooget sposób toofind.</span><span class="sxs-lookup"><span data-stu-id="50d93-271">Then hello attack only needs toofind a way tooget hello code executed.</span></span> <span data-ttu-id="50d93-272">Przy użyciu przekazywania pliku pomaga atakująca hello osiągnąć hello pierwszym krokiem.</span><span class="sxs-lookup"><span data-stu-id="50d93-272">Using a file upload helps hello attacker accomplish hello first step.</span></span> <span data-ttu-id="50d93-273">Hello skutków przekazywania pliku nieograniczony może różnić się w tym przejęcia całego systemu, system plików przeciążone lub bazy danych, przekazywanie systemami ataków tooback i proste atak skutkujący zmianą zawartości.</span><span class="sxs-lookup"><span data-stu-id="50d93-273">hello consequences of unrestricted file upload can vary, including complete system takeover, an overloaded file system or database, forwarding attacks tooback-end systems, and simple defacement.</span></span></p><p><span data-ttu-id="50d93-274">To zależy jakie aplikacji hello nie hello przekazać pliku, a szczególnie, gdzie są przechowywane.</span><span class="sxs-lookup"><span data-stu-id="50d93-274">It depends on what hello application does with hello uploaded file and especially where it is stored.</span></span> <span data-ttu-id="50d93-275">Brak sprawdzania poprawności po stronie serwera przekazywania plików.</span><span class="sxs-lookup"><span data-stu-id="50d93-275">Server side validation of file uploads is missing.</span></span> <span data-ttu-id="50d93-276">Następujące opcje zabezpieczeń powinny być implementowane przekazywanie plików funkcji:</span><span class="sxs-lookup"><span data-stu-id="50d93-276">Following security controls should be implemented for File Upload functionality:</span></span></p><ul><li><span data-ttu-id="50d93-277">Sprawdź rozszerzenia plików (powinna być akceptowana prawidłowy zbiór dozwolonego typu plików)</span><span class="sxs-lookup"><span data-stu-id="50d93-277">File Extension check (only a valid set of allowed file type should be accepted)</span></span></li><li><span data-ttu-id="50d93-278">Maksymalny limit rozmiaru</span><span class="sxs-lookup"><span data-stu-id="50d93-278">Maximum file size limit</span></span></li><li><span data-ttu-id="50d93-279">Plik nie powinien być przekazanym toowebroot; Lokalizacja Hello powinna być katalogu na dysku niesystemowym</span><span class="sxs-lookup"><span data-stu-id="50d93-279">File should not be uploaded toowebroot; hello location should be a directory on non-system drive</span></span></li><li><span data-ttu-id="50d93-280">Konwencja nazewnictwa, należy wykonać, tak, aby hello przekazana nazwa pliku ma niektórych losowości, tak jak tooprevent spowoduje zastąpienie pliku</span><span class="sxs-lookup"><span data-stu-id="50d93-280">Naming convention should be followed, such that hello uploaded file name have some randomness, so as tooprevent file overwrites</span></span></li><li><span data-ttu-id="50d93-281">Pliki powinny zostać przeskanowane pod kątem oprogramowania antywirusowego przed zapisaniem toohello dysku</span><span class="sxs-lookup"><span data-stu-id="50d93-281">Files should be scanned for anti-virus before writing toohello disk</span></span></li><li><span data-ttu-id="50d93-282">Upewnij się, sprawdzania poprawności dla złośliwego znaków hello nazwę pliku i wszystkie inne metadane (np. ścieżka pliku)</span><span class="sxs-lookup"><span data-stu-id="50d93-282">Ensure that hello file name and any other metadata (e.g., file path) are validated for malicious characters</span></span></li><li><span data-ttu-id="50d93-283">Podpis format pliku powinna być sprawdzana, tooprevent użytkownika z przekazywania masqueraded pliku (np. przekazywanie pliku exe, zmieniając rozszerzenie tootxt)</span><span class="sxs-lookup"><span data-stu-id="50d93-283">File format signature should be checked, tooprevent a user from uploading a masqueraded file (e.g., uploading an exe file by changing extension tootxt)</span></span></li></ul>| 

### <a name="example"></a><span data-ttu-id="50d93-284">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-284">Example</span></span>
<span data-ttu-id="50d93-285">Hello ostatniego punktu dotyczące sprawdzania poprawności podpisu format pliku można znaleźć klasy toohello poniżej, aby uzyskać szczegółowe informacje:</span><span class="sxs-lookup"><span data-stu-id="50d93-285">For hello last point regarding file format signature validation, refer toohello class below for details:</span></span> 

```C#
        private static Dictionary<string, List<byte[]>> fileSignature = new Dictionary<string, List<byte[]>>
                    {
                    { ".DOC", new List<byte[]> { new byte[] { 0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1 } } },
                    { ".DOCX", new List<byte[]> { new byte[] { 0x50, 0x4B, 0x03, 0x04 } } },
                    { ".PDF", new List<byte[]> { new byte[] { 0x25, 0x50, 0x44, 0x46 } } },
                    { ".ZIP", new List<byte[]> 
                                            {
                                              new byte[] { 0x50, 0x4B, 0x03, 0x04 },
                                              new byte[] { 0x50, 0x4B, 0x4C, 0x49, 0x54, 0x55 },
                                              new byte[] { 0x50, 0x4B, 0x53, 0x70, 0x58 },
                                              new byte[] { 0x50, 0x4B, 0x05, 0x06 },
                                              new byte[] { 0x50, 0x4B, 0x07, 0x08 },
                                              new byte[] { 0x57, 0x69, 0x6E, 0x5A, 0x69, 0x70 }
                                                }
                                            },
                    { ".PNG", new List<byte[]> { new byte[] { 0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A } } },
                    { ".JPG", new List<byte[]>
                                    {
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE0 },
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE1 },
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE8 }
                                    }
                                    },
                    { ".JPEG", new List<byte[]>
                                        { 
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE0 },
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE2 },
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE3 }
                                        }
                                        },
                    { ".XLS", new List<byte[]>
                                            {
                                              new byte[] { 0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1 },
                                              new byte[] { 0x09, 0x08, 0x10, 0x00, 0x00, 0x06, 0x05, 0x00 },
                                              new byte[] { 0xFD, 0xFF, 0xFF, 0xFF }
                                            }
                                            },
                    { ".XLSX", new List<byte[]> { new byte[] { 0x50, 0x4B, 0x03, 0x04 } } },
                    { ".GIF", new List<byte[]> { new byte[] { 0x47, 0x49, 0x46, 0x38 } } }
                };

        public static bool IsValidFileExtension(string fileName, byte[] fileData, byte[] allowedChars)
        {
            if (string.IsNullOrEmpty(fileName) || fileData == null || fileData.Length == 0)
            {
                return false;
            }

            bool flag = false;
            string ext = Path.GetExtension(fileName);
            if (string.IsNullOrEmpty(ext))
            {
                return false;
            }

            ext = ext.ToUpperInvariant();

            if (ext.Equals(".TXT") || ext.Equals(".CSV") || ext.Equals(".PRN"))
            {
                foreach (byte b in fileData)
                {
                    if (b > 0x7F)
                    {
                        if (allowedChars != null)
                        {
                            if (!allowedChars.Contains(b))
                            {
                                return false;
                            }
                        }
                        else
                        {
                            return false;
                        }
                    }
                }

                return true;
            }

            if (!fileSignature.ContainsKey(ext))
            {
                return true;
            }

            List<byte[]> sig = fileSignature[ext];
            foreach (byte[] b in sig)
            {
                var curFileSig = new byte[b.Length];
                Array.Copy(fileData, curFileSig, b.Length);
                if (curFileSig.SequenceEqual(b))
                {
                    flag = true;
                    break;
                }
            }

            return flag;
        }
```

## <span data-ttu-id="50d93-286"><a id="typesafe"></a>Upewnij się, że bezpieczny parametry są używane w aplikacji sieci Web dla dostępu do danych</span><span class="sxs-lookup"><span data-stu-id="50d93-286"><a id="typesafe"></a>Ensure that type-safe parameters are used in Web Application for data access</span></span>

| <span data-ttu-id="50d93-287">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-287">Title</span></span>                   | <span data-ttu-id="50d93-288">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-288">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-289">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-289">**Component**</span></span>               | <span data-ttu-id="50d93-290">Aplikacja sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-290">Web Application</span></span> | 
| <span data-ttu-id="50d93-291">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-291">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-292">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-292">Build</span></span> |  
| <span data-ttu-id="50d93-293">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-293">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-294">Ogólny</span><span class="sxs-lookup"><span data-stu-id="50d93-294">Generic</span></span> |
| <span data-ttu-id="50d93-295">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-295">**Attributes**</span></span>              | <span data-ttu-id="50d93-296">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-296">N/A</span></span>  |
| <span data-ttu-id="50d93-297">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-297">**References**</span></span>              | <span data-ttu-id="50d93-298">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-298">N/A</span></span>  |
| <span data-ttu-id="50d93-299">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-299">**Steps**</span></span> | <p><span data-ttu-id="50d93-300">Jeśli używasz hello kolekcji parametrów, SQL traktuje hello w danych wejściowych jest jako wartość literału, a nie jako kod wykonywalny.</span><span class="sxs-lookup"><span data-stu-id="50d93-300">If you use hello Parameters collection, SQL treats hello input is as a literal value rather then as executable code.</span></span> <span data-ttu-id="50d93-301">Witaj kolekcji parametrów można ograniczenia typu i długości tooenforce używane w danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="50d93-301">hello Parameters collection can be used tooenforce type and length constraints on input data.</span></span> <span data-ttu-id="50d93-302">Wartości spoza zakresu hello wyzwolenia Wystąpił wyjątek.</span><span class="sxs-lookup"><span data-stu-id="50d93-302">Values outside of hello range trigger an exception.</span></span> <span data-ttu-id="50d93-303">Jeśli nie są używane parametry SQL bezpieczny, osoby atakujące może być możliwe tooexecute iniekcji atakom, które są osadzone w danych wejściowych hello niefiltrowane.</span><span class="sxs-lookup"><span data-stu-id="50d93-303">If type-safe SQL parameters are not used, attackers might be able tooexecute injection attacks that are embedded in hello unfiltered input.</span></span></p><p><span data-ttu-id="50d93-304">Parametry typu bezpieczne podczas konstruowania SQL zapytań tooavoid możliwe ataki które mogą wystąpić przy użyciu niefiltrowane danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="50d93-304">Use type safe parameters when constructing SQL queries tooavoid possible SQL injection attacks that can occur with unfiltered input.</span></span> <span data-ttu-id="50d93-305">Umożliwia bezpieczne parametry typu z procedur składowanych i dynamicznych instrukcji SQL.</span><span class="sxs-lookup"><span data-stu-id="50d93-305">You can use type safe parameters with stored procedures and with dynamic SQL statements.</span></span> <span data-ttu-id="50d93-306">Parametry są traktowane jako wartości literałów przez hello bazę danych, a nie kodu wykonywalnego.</span><span class="sxs-lookup"><span data-stu-id="50d93-306">Parameters are treated as literal values by hello database and not as executable code.</span></span> <span data-ttu-id="50d93-307">Parametry są również sprawdzane pod kątem typu i długości.</span><span class="sxs-lookup"><span data-stu-id="50d93-307">Parameters are also checked for type and length.</span></span></p>|

### <a name="example"></a><span data-ttu-id="50d93-308">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-308">Example</span></span> 
<span data-ttu-id="50d93-309">Witaj poniższy kod przedstawia sposób toouse bezpieczne parametry typu z hello SqlParameterCollection podczas wywoływania procedury składowanej.</span><span class="sxs-lookup"><span data-stu-id="50d93-309">hello following code shows how toouse type safe parameters with hello SqlParameterCollection when calling a stored procedure.</span></span> 

```C#
using System.Data;
using System.Data.SqlClient;

using (SqlConnection connection = new SqlConnection(connectionString))
{ 
DataSet userDataset = new DataSet(); 
SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure", connection); 
myCommand.SelectCommand.CommandType = CommandType.StoredProcedure; 
myCommand.SelectCommand.Parameters.Add("@au_id", SqlDbType.VarChar, 11); 
myCommand.SelectCommand.Parameters["@au_id"].Value = SSN.Text; 
myCommand.Fill(userDataset);
}  
```
<span data-ttu-id="50d93-310">W hello poprzedzających przykładowego kodu hello wartość wejściowa nie może być dłuższa niż 11 znaków.</span><span class="sxs-lookup"><span data-stu-id="50d93-310">In hello preceding code example, hello input value cannot be longer than 11 characters.</span></span> <span data-ttu-id="50d93-311">Jeśli dane hello niezgodny typ toohello lub długość zdefiniowaną przez parametr hello, hello klasy SqlParameter zgłasza wyjątek.</span><span class="sxs-lookup"><span data-stu-id="50d93-311">If hello data does not conform toohello type or length defined by hello parameter, hello SqlParameter class throws an exception.</span></span> 

## <span data-ttu-id="50d93-312"><a id="binding-mvc"></a>Użyj modelu oddzielne powiązanie klasy lub filtr powiązania wymieniono tooprevent MVC masowej przypisania luki w zabezpieczeniach</span><span class="sxs-lookup"><span data-stu-id="50d93-312"><a id="binding-mvc"></a>Use separate model binding classes or binding filter lists tooprevent MVC mass assignment vulnerability</span></span>

| <span data-ttu-id="50d93-313">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-313">Title</span></span>                   | <span data-ttu-id="50d93-314">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-314">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-315">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-315">**Component**</span></span>               | <span data-ttu-id="50d93-316">Aplikacja sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-316">Web Application</span></span> | 
| <span data-ttu-id="50d93-317">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-317">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-318">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-318">Build</span></span> |  
| <span data-ttu-id="50d93-319">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-319">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-320">MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="50d93-320">MVC5, MVC6</span></span> |
| <span data-ttu-id="50d93-321">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-321">**Attributes**</span></span>              | <span data-ttu-id="50d93-322">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-322">N/A</span></span>  |
| <span data-ttu-id="50d93-323">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-323">**References**</span></span>              | <span data-ttu-id="50d93-324">[Atrybuty metadanych](http://msdn.microsoft.com/library/system.componentmodel.dataannotations.metadatatypeattribute), [publiczny klucz zabezpieczeń luki w zabezpieczeniach i środki zaradcze](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation), [tooMass kompletny przewodnik po przydziału na platformie ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx), [wprowadzenie EF przy użyciu MVC](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)</span><span class="sxs-lookup"><span data-stu-id="50d93-324">[Metadata Attributes](http://msdn.microsoft.com/library/system.componentmodel.dataannotations.metadatatypeattribute), [Public Key Security Vulnerability And Mitigation](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation), [Complete Guide tooMass Assignment in ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx), [Getting Started with EF using MVC](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)</span></span> |
| <span data-ttu-id="50d93-325">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-325">**Steps**</span></span> | <ul><li><span data-ttu-id="50d93-326">**Gdy powinna wyglądać dla zbyt księgowej luk w zabezpieczeniach? -** Zbyt księgowej luk w zabezpieczeniach, może wystąpić miejsce wiązania klasy modeli z danych wprowadzonych przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="50d93-326">**When should I look for over-posting vulnerabilities? -** Over-posting vulnerabilities can occur any place you bind model classes from user input.</span></span> <span data-ttu-id="50d93-327">Struktury, takich jak MVC może reprezentować danych użytkownika w niestandardowej klasy .NET, w tym zwykły stare obiekty CLR (POCOs).</span><span class="sxs-lookup"><span data-stu-id="50d93-327">Frameworks like MVC can represent user data in custom .NET classes, including Plain Old CLR Objects (POCOs).</span></span> <span data-ttu-id="50d93-328">MVC automatycznie wypełni te klasy modelu danych z żądaniem hello, zapewniając wygodny reprezentacja zajmujących się dane wejściowe użytkownika.</span><span class="sxs-lookup"><span data-stu-id="50d93-328">MVC automatically populates these model classes with data from hello request, providing a convenient representation for dealing with user input.</span></span> <span data-ttu-id="50d93-329">Te klasy zawierają właściwości, które nie powinny być ustawiane przez użytkownika hello, aplikacji hello mogą być narażone ataków tooover publikowanie, umożliwiających kontrolki użytkownika danych, które nigdy nie aplikacji hello przeznaczone.</span><span class="sxs-lookup"><span data-stu-id="50d93-329">When these classes include properties that should not be set by hello user, hello application can be vulnerable tooover-posting attacks, which allow user control of data that hello application never intended.</span></span> <span data-ttu-id="50d93-330">Podobnie jak wiązania modelu MVC, technologii dostępu do bazy danych, takich jak mapowań obiektu/relacyjnych jak Entity Framework często również obsługiwać przy użyciu POCO obiektów toorepresent bazy danych.</span><span class="sxs-lookup"><span data-stu-id="50d93-330">Like MVC model binding, database access technologies such as object/relational mappers like Entity Framework often also support using POCO objects toorepresent database data.</span></span> <span data-ttu-id="50d93-331">Te klasy modelu danych Podaj hello funkcję w dotyczących danych z bazy danych, tak jak w przypadku MVC przy danych wejściowych użytkownika.</span><span class="sxs-lookup"><span data-stu-id="50d93-331">These data model classes provide hello same convenience in dealing with database data as MVC does in dealing with user input.</span></span> <span data-ttu-id="50d93-332">Ponieważ baza danych zarówno MVC i hello obsługuje podobnych modeli, jak w przypadku obiektów POCO wydaje się hello łatwe tooreuse sam klasy zarówno w celach.</span><span class="sxs-lookup"><span data-stu-id="50d93-332">Because both MVC and hello database support similar models, like POCO objects, it seems easy tooreuse hello same classes for both purposes.</span></span> <span data-ttu-id="50d93-333">To kończy się niepowodzeniem rozwiązaniem, rozdzielenie toopreserve problemy, a jest jednego obszaru wspólnego, gdzie niezamierzone właściwości są widoczne powiązanie toomodel, umożliwiające publikowanie uwierzytelniając ataków.</span><span class="sxs-lookup"><span data-stu-id="50d93-333">This practice fails toopreserve separation of concerns, and it is one common area where unintended properties are exposed toomodel binding, enabling over-posting attacks.</span></span></li><li><span data-ttu-id="50d93-334">**Dlaczego nie należy używać zajęć niefiltrowane bazy danych modelu jako parametry toomy MVC akcje? -** Wiązania modelu MVC ponieważ powiąże niczego w tej klasie.</span><span class="sxs-lookup"><span data-stu-id="50d93-334">**Why shouldn't I use my unfiltered database model classes as parameters toomy MVC actions? -** Because MVC model binding will bind anything in that class.</span></span> <span data-ttu-id="50d93-335">Nawet jeśli dane wyświetlane w widoku, złośliwy użytkownik może wysyłać żądań HTTP przy użyciu tych danych uwzględnione powitalne i MVC zostanie gladly powiązać ponieważ akcję tym, że baza danych klasy hello kształt danych powinien akceptować dla danych wejściowych użytkownika.</span><span class="sxs-lookup"><span data-stu-id="50d93-335">Even if hello data does not appear in your view, a malicious user can send an HTTP request with this data included, and MVC will gladly bind it because your action says that database class is hello shape of data it should accept for user input.</span></span></li><li><span data-ttu-id="50d93-336">**Dlaczego należy interesujących kształtu hello używane do wiązania modelu? -** Wiązania modelu przy użyciu platformy ASP.NET MVC przy użyciu modeli nadmiernych przedstawia ataków tooover publikowanie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="50d93-336">**Why should I care about hello shape used for model binding? -** Using ASP.NET MVC model binding with overly broad models exposes an application tooover-posting attacks.</span></span> <span data-ttu-id="50d93-337">Publikowanie uwierzytelniając można włączyć danych aplikacji toochange osoby atakujące poza jakiego developer hello przeznaczone, takie jak zastępowanie hello cen dla elementu lub hello uprawnień zabezpieczeń dla konta.</span><span class="sxs-lookup"><span data-stu-id="50d93-337">Over-posting could enable attackers toochange application data beyond what hello developer intended, such as overriding hello price for an item or hello security privileges for an account.</span></span> <span data-ttu-id="50d93-338">Aplikacje powinny używać określonych akcji wiązanie modeli (lub listy filtrów określoną właściwość dozwolone) tooprovide jawne kontraktu dla jakie niezaufanych tooallow wejściowych za pośrednictwem wiązania modelu.</span><span class="sxs-lookup"><span data-stu-id="50d93-338">Applications should use action-specific binding models (or specific allowed property filter lists) tooprovide an explicit contract for what untrusted input tooallow via model binding.</span></span></li><li><span data-ttu-id="50d93-339">**Występują modeli oddzielne powiązania właśnie duplikowania kod? -** Nie jest to kwestia separacji.</span><span class="sxs-lookup"><span data-stu-id="50d93-339">**Is having separate binding models just duplicating code? -** No, it is a matter of separation of concerns.</span></span> <span data-ttu-id="50d93-340">Ponowne użycie bazy danych modeli w metod akcji, są opinie żadnych właściwość (lub podrzędnego), w tej klasy można ustawić przez użytkownika hello w żądaniu HTTP.</span><span class="sxs-lookup"><span data-stu-id="50d93-340">If you reuse database models in action methods, you are saying any property (or sub-property) in that class can be set by hello user in an HTTP request.</span></span> <span data-ttu-id="50d93-341">Jeśli nie chcesz MVC toodo, potrzebujesz listę filtrów lub tooshow kształtu osobnej klasy MVC, jakie dane mogą pochodzić z danych wejściowych zamiast tego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="50d93-341">If that is not what you want MVC toodo, you need a filter list or a separate class shape tooshow MVC what data can come from user input instead.</span></span></li><li><span data-ttu-id="50d93-342">**Jeśli modele oddzielne powiązania dla danych wejściowych użytkownika, należy tooduplicate wszystkie moje atrybuty adnotacji danych? -** Niekoniecznie.</span><span class="sxs-lookup"><span data-stu-id="50d93-342">**If I have separate binding models for user input, do I have tooduplicate all my data annotation attributes? -** Not necessarily.</span></span> <span data-ttu-id="50d93-343">Można użyć MetadataTypeAttribute na powitania metadanych bazy danych modelu klasy toolink toohello na klasy wiązania modelu.</span><span class="sxs-lookup"><span data-stu-id="50d93-343">You can use MetadataTypeAttribute on hello database model class toolink toohello metadata on a model binding class.</span></span> <span data-ttu-id="50d93-344">Po prostu pamiętać, że hello typu odwołuje się hello MetadataTypeAttribute musi być podzbiorem hello odwołanie do typu (może mieć mniej właściwości, ale nie więcej).</span><span class="sxs-lookup"><span data-stu-id="50d93-344">Just note that hello type referenced by hello MetadataTypeAttribute must be a subset of hello referencing type (it can have fewer properties, but not more).</span></span></li><li><span data-ttu-id="50d93-345">**Przenoszenie danych i z powrotem między modelami wejściowych użytkownika i modele bazy danych jest niewygodny. Wystarczy skopiować na wszystkie właściwości, za pomocą odbicia? -** Tak.</span><span class="sxs-lookup"><span data-stu-id="50d93-345">**Moving data back and forth between user input models and database models is tedious. Can I just copy over all properties using reflection? -** Yes.</span></span> <span data-ttu-id="50d93-346">Witaj tylko właściwości, które są wyświetlane w modelach powiązanie hello są hello widocznych zostały uznane toobe bezpiecznych danych wejściowych użytkownika.</span><span class="sxs-lookup"><span data-stu-id="50d93-346">hello only properties that appear in hello binding models are hello ones you have determined toobe safe for user input.</span></span> <span data-ttu-id="50d93-347">To nie ma powodu zabezpieczeń, co uniemożliwia ich przy użyciu odbicia toocopy przez wszystkie właściwości, które istnieją wspólne między te dwa modele.</span><span class="sxs-lookup"><span data-stu-id="50d93-347">There is no security reason that prevents using reflection toocopy over all properties that exist in common between these two models.</span></span></li><li><span data-ttu-id="50d93-348">**Jak [Bind (Wyklucz = "â €¦")]. Czy za pomocą którego zamiast modeli oddzielne powiązania? -** Tej metody nie jest zalecane.</span><span class="sxs-lookup"><span data-stu-id="50d93-348">**What about [Bind(Exclude ="â€¦")]. Can I use that instead of having separate binding models? -** This approach is not recommended.</span></span> <span data-ttu-id="50d93-349">Przy użyciu [Bind (Wyklucz = "â €¦")] oznacza, że wszystkie nowe właściwości powiązania domyślnie.</span><span class="sxs-lookup"><span data-stu-id="50d93-349">Using [Bind(Exclude ="â€¦")] means that any new property is bindable by default.</span></span> <span data-ttu-id="50d93-350">Po dodaniu nowej właściwości rzeczy tookeep tooremember dodatkowego kroku jest bezpieczne, a nie o hello projektu można domyślnie zabezpieczone.</span><span class="sxs-lookup"><span data-stu-id="50d93-350">When a new property is added, there is an extra step tooremember tookeep things secure, rather than having hello design be secure by default.</span></span> <span data-ttu-id="50d93-351">W zależności od dewelopera hello ryzykowne jest sprawdzanie tej listy za każdym razem, gdy właściwość została dodana.</span><span class="sxs-lookup"><span data-stu-id="50d93-351">Depending on hello developer checking this list every time a property is added is risky.</span></span></li><li><span data-ttu-id="50d93-352">**Jest [Bind (Dołącz = "â €¦")] przydatne w przypadku operacji edycji? -** Nie.</span><span class="sxs-lookup"><span data-stu-id="50d93-352">**Is [Bind(Include ="â€¦")] useful for Edit operations? -** No.</span></span> <span data-ttu-id="50d93-353">[Powiązanie (Dołącz = "â €¦")] nadaje się tylko do operacji INSERT stylu (Dodawanie nowych danych).</span><span class="sxs-lookup"><span data-stu-id="50d93-353">[Bind(Include ="â€¦")] is only suitable for INSERT-style operations (adding new data).</span></span> <span data-ttu-id="50d93-354">Dla operacji aktualizacji stylu (zmiana istniejących danych) Użyj innego podejścia, takie jak mających oddzielne powiązania modele lub przekazywanie jawną listę dozwolonych właściwości tooUpdateModel lub TryUpdateModel.</span><span class="sxs-lookup"><span data-stu-id="50d93-354">For UPDATE-style operations (revising existing data), use another approach, like having separate binding models or passing an explicit list of allowed properties tooUpdateModel or TryUpdateModel.</span></span> <span data-ttu-id="50d93-355">Dodawanie [Bind (Dołącz = "â €¦")] atrybutu na operację edycji oznacza, że MVC zostanie utworzenie wystąpienia obiektu ustawione jako tylko hello na liście właściwości, pozostawiając pozostałe wartości domyślne.</span><span class="sxs-lookup"><span data-stu-id="50d93-355">Adding a [Bind(Include ="â€¦")] attribute on an Edit operation means that MVC will create an object instance and set only hello listed properties, leaving all others at their default values.</span></span> <span data-ttu-id="50d93-356">W przypadku danych hello jest trwały, całkowicie zastąpi hello istniejącej jednostki, resetowanie wartości hello tootheir właściwości pominięte wartości domyślne.</span><span class="sxs-lookup"><span data-stu-id="50d93-356">When hello data is persisted, it will entirely replace hello existing entity, resetting hello values for any omitted properties tootheir defaults.</span></span> <span data-ttu-id="50d93-357">Na przykład, jeśli został pominięty IsAdmin [Bind (Dołącz = "â €¦")] atrybutu na operację edycji, każdy użytkownik, którego nazwa została edytować za pomocą tej akcji będą tooIsAdmin resetowania = false (każdy użytkownik edytowanych spowoduje utratę stan administratora).</span><span class="sxs-lookup"><span data-stu-id="50d93-357">For example, if IsAdmin was omitted from a [Bind(Include ="â€¦")] attribute on an Edit operation, any user whose name was edited via this action would be reset tooIsAdmin = false (any edited user would lose administrator status).</span></span> <span data-ttu-id="50d93-358">Jeśli chcesz tooprevent aktualizacji właściwości toocertain, użyj jednej z hello inne podejścia powyżej.</span><span class="sxs-lookup"><span data-stu-id="50d93-358">If you want tooprevent updates toocertain properties, use one of hello other approaches above.</span></span> <span data-ttu-id="50d93-359">Należy pamiętać, że niektóre wersje narzędzi MVC wygenerowane klasy kontrolera z [Bind (Dołącz = "â €¦")] edytowanie akcji i oznacza, że usunięcie właściwości z tej listy będą zapobiegać atakom uwierzytelniając publikowanie.</span><span class="sxs-lookup"><span data-stu-id="50d93-359">Note that some versions of MVC tooling generate controller classes with [Bind(Include ="â€¦")] on Edit actions and imply that removing a property from that list will prevent over-posting attacks.</span></span> <span data-ttu-id="50d93-360">Jednak zgodnie z powyższym opisem tego podejścia nie działać zgodnie z oczekiwaniami i zamiast tego zostaną zresetowane wszystkie dane w hello pominięcia właściwości tootheir domyślne wartości.</span><span class="sxs-lookup"><span data-stu-id="50d93-360">However, as described above, that approach does not work as intended and instead will reset any data in hello omitted properties tootheir default values.</span></span></li><li><span data-ttu-id="50d93-361">**Dla operacji Create, czy istnieją wszystkie ostrzeżenia przy użyciu [Bind (Dołącz = "â €¦")] zamiast modeli oddzielne powiązania? -** Tak.</span><span class="sxs-lookup"><span data-stu-id="50d93-361">**For Create operations, are there any caveats using [Bind(Include ="â€¦")] rather than separate binding models? -** Yes.</span></span> <span data-ttu-id="50d93-362">Takie podejście najpierw nie działa w przypadku scenariuszy edycji konieczności utrzymania dwa podejścia oddzielne łagodzenia wszystkie luki w zabezpieczeniach publikowanie nadmierne.</span><span class="sxs-lookup"><span data-stu-id="50d93-362">First this approach does not work for Edit scenarios, requiring maintaining two separate approaches for mitigating all over-posting vulnerabilities.</span></span> <span data-ttu-id="50d93-363">Modele powiązanie drugiej, oddzielnej wymuszania separacji między kształtu hello używany dla kształtu danych wejściowych i hello użytkownika używane do trwałości, coś [Bind (Dołącz = "â €¦")] nie działa.</span><span class="sxs-lookup"><span data-stu-id="50d93-363">Second, separate binding models enforce separation of concerns between hello shape used for user input and hello shape used for persistence, something [Bind(Include ="â€¦")] does not do.</span></span> <span data-ttu-id="50d93-364">Trzecie, należy pamiętać, że [Bind (Dołącz = "â €¦")] może obsługiwać tylko właściwości najwyższego poziomu; Nie można zezwolić tylko części właściwości podrzędnych (na przykład "Details.Name") w atrybucie hello.</span><span class="sxs-lookup"><span data-stu-id="50d93-364">Third, note that [Bind(Include ="â€¦")] can only handle top-level properties; you cannot allow only portions of sub-properties (such as "Details.Name") in hello attribute.</span></span> <span data-ttu-id="50d93-365">Na koniec i prawdopodobnie przede wszystkim za pomocą [powiązania (Dołącz = "â €¦")] dodaje dodatkowy krok, który należy pamiętać, każda klasa hello czasu jest używany do wiązania modelu.</span><span class="sxs-lookup"><span data-stu-id="50d93-365">Finally, and perhaps most importantly, using [Bind(Include ="â€¦")] adds an extra step that must be remembered any time hello class is used for model binding.</span></span> <span data-ttu-id="50d93-366">Jeśli nowej metody akcji wiąże toohello klasy danych bezpośrednio i zapomni tooinclude [powiązania (Dołącz = "â €¦")] atrybutu, może być narażony tekst hello ataków tooover publikowanie [powiązania (Dołącz = "â €¦")] podejście jest domyślnie nieco mniej bezpieczne.</span><span class="sxs-lookup"><span data-stu-id="50d93-366">If a new action method binds toohello data class directly and forgets tooinclude a [Bind(Include ="â€¦")] attribute, it can be vulnerable tooover-posting attacks, so hello [Bind(Include ="â€¦")] approach is somewhat less secure by default.</span></span> <span data-ttu-id="50d93-367">Jeśli używasz [Bind (Dołącz = "â €¦")], zajmie się zawsze tooremember toospecify go za każdym razem, gdy klas danych są wyświetlane jako parametry metody akcji.</span><span class="sxs-lookup"><span data-stu-id="50d93-367">If you use [Bind(Include ="â€¦")], take care always tooremember toospecify it every time your data classes appear as action method parameters.</span></span></li><li><span data-ttu-id="50d93-368">**Dla operacji Create, co o wprowadzenie hello [Bind (Dołącz = "â €¦")] atrybutu w samej klasy modelu hello? Nie takie podejście uniknąć hello potrzeby tooremember odkładanie hello atrybutu w każdej metody akcji? -** Ta metoda działa w niektórych przypadkach.</span><span class="sxs-lookup"><span data-stu-id="50d93-368">**For Create operations, what about putting hello [Bind(Include ="â€¦")] attribute on hello model class itself? Does not this approach avoid hello need tooremember putting hello attribute on every action method? -** This approach works in some cases.</span></span> <span data-ttu-id="50d93-369">Przy użyciu [powiązać (Dołącz = "â €¦")] na typ modelu hello sam (a nie na parametry akcji za pomocą tej klasy), należy unikać hello potrzeby tooremember tooinclude hello [powiązania (Dołącz = "â €¦")] atrybutu w każdej metody akcji.</span><span class="sxs-lookup"><span data-stu-id="50d93-369">Using [Bind(Include ="â€¦")] on hello model type itself (rather than on action parameters using this class), does avoid hello need tooremember tooinclude hello [Bind(Include ="â€¦")] attribute on every action method.</span></span> <span data-ttu-id="50d93-370">Przy użyciu atrybutu hello bezpośrednio w klasie hello skutecznie tworzy oddzielne powierzchni tej klasy w celach powiązania modelu.</span><span class="sxs-lookup"><span data-stu-id="50d93-370">Using hello attribute directly on hello class effectively creates a separate surface area of this class for model binding purposes.</span></span> <span data-ttu-id="50d93-371">Jednak takie podejście umożliwia tylko na jeden kształt powiązanie modelu na model klasy.</span><span class="sxs-lookup"><span data-stu-id="50d93-371">However, this approach only allows for one model binding shape per model class.</span></span> <span data-ttu-id="50d93-372">Jeśli jedna metoda akcji musi wiązania modelu tooallow pola (na przykład tylko administrator akcję, która aktualizuje role użytkowników), a inne akcje muszą wiązania modelu tooprevent tego pola, ta metoda nie będzie działać.</span><span class="sxs-lookup"><span data-stu-id="50d93-372">If one action method needs tooallow model binding of a field (for example, an administrator-only action that updates user roles) and other actions need tooprevent model binding of this field, this approach will not work.</span></span> <span data-ttu-id="50d93-373">Każda klasa może mieć tylko jeden kształt powiązanie modelu; Jeżeli różne akcje muszą kształtów powiązania innego modelu, muszą toorepresent je rozdzielić kształtów za pomocą klasy powiązanie albo oddzielnym modelu lub różnych [powiązania (Dołącz = "â €¦")] atrybuty hello metody akcji.</span><span class="sxs-lookup"><span data-stu-id="50d93-373">Each class can only have one model binding shape; if different actions need different model binding shapes, they need toorepresent these separate shapes using either separate model binding classes or separate [Bind(Include ="â€¦")] attributes on hello action methods.</span></span></li><li><span data-ttu-id="50d93-374">**Co to są wiązanie modeli? Czy na pewno one hello odpowiednikiem modeli widok? -** Są dwa pojęcia pokrewne.</span><span class="sxs-lookup"><span data-stu-id="50d93-374">**What are binding models? Are they hello same thing as view models? -** These are two related concepts.</span></span> <span data-ttu-id="50d93-375">termin Hello klasy modelu tooa używany w akcja odwołuje się powiązanie modelu jest lista parametrów (kształtu hello przekazywane z metody akcji toohello powiązanie modelu MVC).</span><span class="sxs-lookup"><span data-stu-id="50d93-375">hello term binding model refers tooa model class used in an action is parameter list (hello shape passed from MVC model binding toohello action method).</span></span> <span data-ttu-id="50d93-376">model widoku termin Hello odwołuje się tooa klasy modelu przekazywane z widoku tooa metody akcji.</span><span class="sxs-lookup"><span data-stu-id="50d93-376">hello term view model refers tooa model class passed from an action method tooa view.</span></span> <span data-ttu-id="50d93-377">Przy użyciu modelu specyficzne dla widoku jest typowym podejściem przekazywania danych z widoku tooa metody akcji.</span><span class="sxs-lookup"><span data-stu-id="50d93-377">Using a view-specific model is a common approach for passing data from an action method tooa view.</span></span> <span data-ttu-id="50d93-378">Często ten kształt jest również odpowiedniego do wiązania modelu i model widoku termin hello mogą być używane toorefer hello samego modelu używane w obu miejscach.</span><span class="sxs-lookup"><span data-stu-id="50d93-378">Often, this shape is also suitable for model binding, and hello term view model can be used toorefer hello same model used in both places.</span></span> <span data-ttu-id="50d93-379">toobe dokładne, ta procedura wspomniana specjalnie wiązanie modeli koncentrujących się na kształt hello przekazany toohello akcji, która jest, co jest ważne dla celów masowej przypisania.</span><span class="sxs-lookup"><span data-stu-id="50d93-379">toobe precise, this procedure talks specifically about binding models, focusing on hello shape passed toohello action, which is what matters for mass assignment purposes.</span></span></li></ul>| 

## <span data-ttu-id="50d93-380"><a id="rendering"></a>Kodowanie toorendering uprzedniego wyjścia niezaufanych sieci web</span><span class="sxs-lookup"><span data-stu-id="50d93-380"><a id="rendering"></a>Encode untrusted web output prior toorendering</span></span>

| <span data-ttu-id="50d93-381">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-381">Title</span></span>                   | <span data-ttu-id="50d93-382">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-382">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-383">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-383">**Component**</span></span>               | <span data-ttu-id="50d93-384">Aplikacja sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-384">Web Application</span></span> | 
| <span data-ttu-id="50d93-385">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-385">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-386">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-386">Build</span></span> |  
| <span data-ttu-id="50d93-387">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-387">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-388">Ogólny, MVC6 MVC5, formularzy sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-388">Generic, Web Forms, MVC5, MVC6</span></span> |
| <span data-ttu-id="50d93-389">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-389">**Attributes**</span></span>              | <span data-ttu-id="50d93-390">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-390">N/A</span></span>  |
| <span data-ttu-id="50d93-391">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-391">**References**</span></span>              | <span data-ttu-id="50d93-392">[Jak tooprevent Cross-site skryptów w programie ASP.NET](http://msdn.microsoft.com/library/ms998274.aspx), [skryptów krzyżowych](http://cwe.mitre.org/data/definitions/79.html), [arkusza Cheat zapobiegania XSS (skryptów krzyżowych)](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)</span><span class="sxs-lookup"><span data-stu-id="50d93-392">[How tooprevent Cross-site scripting in ASP.NET](http://msdn.microsoft.com/library/ms998274.aspx), [Cross-site Scripting](http://cwe.mitre.org/data/definitions/79.html), [XSS (Cross Site Scripting) Prevention Cheat Sheet](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)</span></span> |
| <span data-ttu-id="50d93-393">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-393">**Steps**</span></span> | <span data-ttu-id="50d93-394">Skryptów między witrynami (zwykle skrót XSS) jest celem ataków usług online lub dowolnej aplikacji/składnik, który zużywa dane wejściowe z hello sieci web.</span><span class="sxs-lookup"><span data-stu-id="50d93-394">Cross-site scripting (commonly abbreviated as XSS) is an attack vector for online services or any application/component that consumes input from hello web.</span></span> <span data-ttu-id="50d93-395">Luki w zabezpieczeniach XSS może umożliwić atakującemu skryptu tooexecute komputera innego użytkownika przy użyciu aplikacji sieci web narażone.</span><span class="sxs-lookup"><span data-stu-id="50d93-395">XSS vulnerabilities may allow an attacker tooexecute script on another user's machine through a vulnerable web application.</span></span> <span data-ttu-id="50d93-396">Złośliwych skryptów można toosteal używanych plików cookie i inaczej manipulowanie ofiara komputera przy użyciu języka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="50d93-396">Malicious scripts can be used toosteal cookies and otherwise tamper with a victim's machine through JavaScript.</span></span> <span data-ttu-id="50d93-397">Walidacja danych wejściowych użytkownika, zapewnienie, że jest poprawnie sformułowany i kodowanie, zanim zostanie wyświetlony na stronie sieci web nie będzie mógł XSS.</span><span class="sxs-lookup"><span data-stu-id="50d93-397">XSS is prevented by validating user input, ensuring it is well formed and encoding before it is rendered in a web page.</span></span> <span data-ttu-id="50d93-398">Sprawdzania poprawności danych wejściowych i wyjściowych kodowanie może odbywać się przy użyciu biblioteki ochrony sieci Web.</span><span class="sxs-lookup"><span data-stu-id="50d93-398">Input validation and output encoding can be done by using Web Protection Library.</span></span> <span data-ttu-id="50d93-399">Dla kodu zarządzanego (C\#, VB.net, itp.), użyj jednej lub więcej odpowiednich metod kodowania z hello Biblioteka ochrony sieci Web (Anti-XSS), w zależności od kontekstu hello, gdy dane wejściowe użytkownika hello pobiera dyskowe wyświetlane:</span><span class="sxs-lookup"><span data-stu-id="50d93-399">For Managed code (C\#, VB.net, etc.), use one or more appropriate encoding methods from hello Web Protection (Anti-XSS) Library, depending on hello context where hello user input gets manifested:</span></span>| 

### <a name="example"></a><span data-ttu-id="50d93-400">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-400">Example</span></span>

```C#
* Encoder.HtmlEncode 
* Encoder.HtmlAttributeEncode 
* Encoder.JavaScriptEncode 
* Encoder.UrlEncode
* Encoder.VisualBasicScriptEncode 
* Encoder.XmlEncode 
* Encoder.XmlAttributeEncode 
* Encoder.CssEncode 
* Encoder.LdapEncode 
```

## <span data-ttu-id="50d93-401"><a id="typemodel"></a>Sprawdzania poprawności danych wejściowych i filtrowanie na typ ciągu wszystkie właściwości modelu</span><span class="sxs-lookup"><span data-stu-id="50d93-401"><a id="typemodel"></a>Perform input validation and filtering on all string type Model properties</span></span>

| <span data-ttu-id="50d93-402">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-402">Title</span></span>                   | <span data-ttu-id="50d93-403">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-403">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-404">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-404">**Component**</span></span>               | <span data-ttu-id="50d93-405">Aplikacja sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-405">Web Application</span></span> | 
| <span data-ttu-id="50d93-406">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-406">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-407">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-407">Build</span></span> |  
| <span data-ttu-id="50d93-408">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-408">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-409">Ogólny, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="50d93-409">Generic, MVC5, MVC6</span></span> |
| <span data-ttu-id="50d93-410">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-410">**Attributes**</span></span>              | <span data-ttu-id="50d93-411">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-411">N/A</span></span>  |
| <span data-ttu-id="50d93-412">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-412">**References**</span></span>              | <span data-ttu-id="50d93-413">[Dodawanie walidacji](http://www.asp.net/mvc/overview/getting-started/introduction/adding-validation), [sprawdzanie poprawności modelu danych w aplikacji MVC](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [wytyczne dla aplikacji ASP.NET MVC](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="50d93-413">[Adding Validation](http://www.asp.net/mvc/overview/getting-started/introduction/adding-validation), [Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="50d93-414">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-414">**Steps**</span></span> | <p><span data-ttu-id="50d93-415">Wszystkie parametry wejściowe hello musi zostać zweryfikowany, zanim zostaną użyte w tooensure aplikacji hello czy aplikacji hello jest chronione przed danych wprowadzonych przez złośliwego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="50d93-415">All hello input parameters must be validated before they are used in hello application tooensure that hello application is safeguarded against malicious user inputs.</span></span> <span data-ttu-id="50d93-416">Sprawdź poprawność wartości wejściowe hello za pomocą wyrażeń regularnych operacji sprawdzania poprawności po stronie serwera ze strategią sprawdzania poprawności listy dozwolonych adresów IP.</span><span class="sxs-lookup"><span data-stu-id="50d93-416">Validate hello input values using regular expression validations on server side with a whitelist validation strategy.</span></span> <span data-ttu-id="50d93-417">Unsanitized danych wprowadzonych przez użytkownika / parametry przekazywane do metody toohello może spowodować kodu iniekcji luk w zabezpieczeniach.</span><span class="sxs-lookup"><span data-stu-id="50d93-417">Unsanitized user inputs / parameters passed toohello methods can cause code injection vulnerabilities.</span></span></p><p><span data-ttu-id="50d93-418">Punkty wejścia można także dla aplikacji sieci web, pól formularza, QueryStrings plików cookie, nagłówków HTTP i parametry usługi sieci web.</span><span class="sxs-lookup"><span data-stu-id="50d93-418">For web applications, entry points can also include form fields, QueryStrings, cookies, HTTP headers, and web service parameters.</span></span></p><p><span data-ttu-id="50d93-419">Witaj następujące testy sprawdzania poprawności danych wejściowych należy wykonać podczas wiązania modelu:</span><span class="sxs-lookup"><span data-stu-id="50d93-419">hello following input validation checks must be performed upon model binding:</span></span></p><ul><li><span data-ttu-id="50d93-420">właściwości modelu Hello powinny być adnotowany przy adnotacji wyrażenia regularnego, Zaakceptuj dozwolonych znaków, a maksymalna dopuszczalna długość</span><span class="sxs-lookup"><span data-stu-id="50d93-420">hello model properties should be annotated with RegularExpression annotation, for accepting allowed characters and maximum permissible length</span></span></li><li><span data-ttu-id="50d93-421">metody kontrolera Hello należy wykonać ModelState ważności</span><span class="sxs-lookup"><span data-stu-id="50d93-421">hello controller methods should perform ModelState validity</span></span></li></ul>|

## <span data-ttu-id="50d93-422"><a id="richtext"></a>Ich oczyszczania powinny być stosowane na pola formularza, które akceptują znaków, np., Edytor tekstu sformatowanego</span><span class="sxs-lookup"><span data-stu-id="50d93-422"><a id="richtext"></a>Sanitization should be applied on form fields that accept all characters, e.g, rich text editor</span></span>

| <span data-ttu-id="50d93-423">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-423">Title</span></span>                   | <span data-ttu-id="50d93-424">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-424">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-425">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-425">**Component**</span></span>               | <span data-ttu-id="50d93-426">Aplikacja sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-426">Web Application</span></span> | 
| <span data-ttu-id="50d93-427">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-427">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-428">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-428">Build</span></span> |  
| <span data-ttu-id="50d93-429">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-429">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-430">Ogólny</span><span class="sxs-lookup"><span data-stu-id="50d93-430">Generic</span></span> |
| <span data-ttu-id="50d93-431">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-431">**Attributes**</span></span>              | <span data-ttu-id="50d93-432">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-432">N/A</span></span>  |
| <span data-ttu-id="50d93-433">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-433">**References**</span></span>              | <span data-ttu-id="50d93-434">[Kodowanie niebezpiecznych danych wejściowych](https://msdn.microsoft.com/library/ff647397.aspx#paght000003_step3), [moduł czyszczący HTML](https://github.com/mganss/HtmlSanitizer)</span><span class="sxs-lookup"><span data-stu-id="50d93-434">[Encode Unsafe Input](https://msdn.microsoft.com/library/ff647397.aspx#paght000003_step3), [HTML Sanitizer](https://github.com/mganss/HtmlSanitizer)</span></span> |
| <span data-ttu-id="50d93-435">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-435">**Steps**</span></span> | <p><span data-ttu-id="50d93-436">Znajdź wszystkie tagi znaczników statycznych, które mają toouse.</span><span class="sxs-lookup"><span data-stu-id="50d93-436">Identify all static markup tags that you want toouse.</span></span> <span data-ttu-id="50d93-437">Popularną praktyką jest toorestrict formatowania toosafe HTML elementów, takich jak `<b>` (pogrubienie) i `<i>` (kursywą).</span><span class="sxs-lookup"><span data-stu-id="50d93-437">A common practice is toorestrict formatting toosafe HTML elements, such as `<b>` (bold) and `<i>` (italic).</span></span></p><p><span data-ttu-id="50d93-438">Przed zapisaniem danych hello, kodowanie HTML go.</span><span class="sxs-lookup"><span data-stu-id="50d93-438">Before writing hello data, HTML-encode it.</span></span> <span data-ttu-id="50d93-439">To sprawia, że wszystkie złośliwy skrypt bezpieczne powodując toobe obsługiwane jako tekst, a nie jako kod wykonywalny.</span><span class="sxs-lookup"><span data-stu-id="50d93-439">This makes any malicious script safe by causing it toobe handled as text, not as executable code.</span></span></p><ol><li><span data-ttu-id="50d93-440">Wyłącz sprawdzanie poprawności, dodając hello hello parametr ValidateRequest żądania programu ASP.NET = "false" atrybutu toohello @ Page — dyrektywa</span><span class="sxs-lookup"><span data-stu-id="50d93-440">Disable ASP.NET request validation by hello adding hello ValidateRequest="false" attribute toohello @ Page directive</span></span></li><li><span data-ttu-id="50d93-441">Kodowanie hello ciąg na wejściu metodą HtmlEncode hello</span><span class="sxs-lookup"><span data-stu-id="50d93-441">Encode hello string input with hello HtmlEncode method</span></span></li><li><span data-ttu-id="50d93-442">Używanie StringBuilder i wywołanie hello kodowanie na powitania HTML elementy, które mają toopermit usunąć jego Zamień tooselectively — metoda</span><span class="sxs-lookup"><span data-stu-id="50d93-442">Use a StringBuilder and call its Replace method tooselectively remove hello encoding on hello HTML elements that you want toopermit</span></span></li></ol><p><span data-ttu-id="50d93-443">Hello odwołuje się do strony w hello wyłącza sprawdzanie poprawności żądań ASP.NET przez ustawienie `ValidateRequest="false"`.</span><span class="sxs-lookup"><span data-stu-id="50d93-443">hello page-in hello references disables ASP.NET request validation by setting `ValidateRequest="false"`.</span></span> <span data-ttu-id="50d93-444">Go koduje HTML hello argument wejściowy i umożliwia selektywne hello `<b>` i `<i>` Alternatywnie można również użyć biblioteki .NET dla ich oczyszczania HTML.</span><span class="sxs-lookup"><span data-stu-id="50d93-444">It HTML-encodes hello input and selectively allows hello `<b>` and `<i>` Alternatively, a .NET library for HTML sanitization may also be used.</span></span></p><p><span data-ttu-id="50d93-445">HtmlSanitizer to biblioteka .NET do czyszczenia fragmentów kodu HTML i dokumentów z konstrukcji, które mogą prowadzić tooXSS ataków.</span><span class="sxs-lookup"><span data-stu-id="50d93-445">HtmlSanitizer is a .NET library for cleaning HTML fragments and documents from constructs that can lead tooXSS attacks.</span></span> <span data-ttu-id="50d93-446">Używa AngleSharp tooparse, manipulowanie nimi oraz renderowania kodu HTML i CSS.</span><span class="sxs-lookup"><span data-stu-id="50d93-446">It uses AngleSharp tooparse, manipulate, and render HTML and CSS.</span></span> <span data-ttu-id="50d93-447">HtmlSanitizer można zainstalować jako pakietu NuGet, a dane wejściowe użytkownika hello mogą zostać przekazane za pomocą odpowiednich HTML i CSS ich oczyszczania metod, zgodnie z wymaganiami na powitania po stronie serwera.</span><span class="sxs-lookup"><span data-stu-id="50d93-447">HtmlSanitizer can be installed as a NuGet package, and hello user input can be passed through relevant HTML or CSS sanitization methods, as applicable, on hello server side.</span></span> <span data-ttu-id="50d93-448">Należy pamiętać, że ich oczyszczania jako kontrolę zabezpieczeń należy traktować wyłącznie jako ostatnia opcja.</span><span class="sxs-lookup"><span data-stu-id="50d93-448">Please note that Sanitization as a security control should be considered only as a last option.</span></span></p><p><span data-ttu-id="50d93-449">Sprawdzania poprawności danych wejściowych i wyjściowych kodowanie są traktowane jako lepszą kontrolę zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="50d93-449">Input validation and Output Encoding are considered better security controls.</span></span></p> |

## <span data-ttu-id="50d93-450"><a id="inbuilt-encode"></a>Nie należy przypisywać toosinks elementy modelu DOM, które nie mają wbudowane kodowania</span><span class="sxs-lookup"><span data-stu-id="50d93-450"><a id="inbuilt-encode"></a>Do not assign DOM elements toosinks that do not have inbuilt encoding</span></span>

| <span data-ttu-id="50d93-451">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-451">Title</span></span>                   | <span data-ttu-id="50d93-452">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-452">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-453">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-453">**Component**</span></span>               | <span data-ttu-id="50d93-454">Aplikacja sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-454">Web Application</span></span> | 
| <span data-ttu-id="50d93-455">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-455">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-456">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-456">Build</span></span> |  
| <span data-ttu-id="50d93-457">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-457">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-458">Ogólny</span><span class="sxs-lookup"><span data-stu-id="50d93-458">Generic</span></span> |
| <span data-ttu-id="50d93-459">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-459">**Attributes**</span></span>              | <span data-ttu-id="50d93-460">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-460">N/A</span></span>  |
| <span data-ttu-id="50d93-461">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-461">**References**</span></span>              | <span data-ttu-id="50d93-462">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-462">N/A</span></span>  |
| <span data-ttu-id="50d93-463">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-463">**Steps**</span></span> | <span data-ttu-id="50d93-464">Wiele funkcji javascript nie wykonuj kodowaniu.</span><span class="sxs-lookup"><span data-stu-id="50d93-464">Many javascript functions don't do encoding by default.</span></span> <span data-ttu-id="50d93-465">Podczas przypisywania niezaufanych tooDOM wprowadzania elementów za pomocą takich funkcji, może spowodować między wykonaniami skryptu (XSS) w lokacji.</span><span class="sxs-lookup"><span data-stu-id="50d93-465">When assigning untrusted input tooDOM elements via such functions, may result in cross site script (XSS) executions.</span></span>| 

### <a name="example"></a><span data-ttu-id="50d93-466">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-466">Example</span></span>
<span data-ttu-id="50d93-467">Poniżej przedstawiono przykłady niezabezpieczone:</span><span class="sxs-lookup"><span data-stu-id="50d93-467">Following are insecure examples:</span></span> 

```
document.getElementByID("div1").innerHtml = value;
$("#userName").html(res.Name);
return $('<div/>').html(value)
$('body').append(resHTML);   
```
<span data-ttu-id="50d93-468">Nie używaj `innerHtml`; zamiast tego użyć `innerText`.</span><span class="sxs-lookup"><span data-stu-id="50d93-468">Don't use `innerHtml`; instead use `innerText`.</span></span> <span data-ttu-id="50d93-469">Podobnie, a nie z `$("#elm").html()`, użyj`$("#elm").text()`</span><span class="sxs-lookup"><span data-stu-id="50d93-469">Similarly, instead of `$("#elm").html()`, use `$("#elm").text()`</span></span> 

## <span data-ttu-id="50d93-470"><a id="redirect-safe"></a>Sprawdź poprawność wszystkich przekierowania aplikacji hello zostały zamknięte lub wykonywane w sposób bezpieczny</span><span class="sxs-lookup"><span data-stu-id="50d93-470"><a id="redirect-safe"></a>Validate all redirects within hello application are closed or done safely</span></span>

| <span data-ttu-id="50d93-471">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-471">Title</span></span>                   | <span data-ttu-id="50d93-472">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-472">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-473">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-473">**Component**</span></span>               | <span data-ttu-id="50d93-474">Aplikacja sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-474">Web Application</span></span> | 
| <span data-ttu-id="50d93-475">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-475">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-476">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-476">Build</span></span> |  
| <span data-ttu-id="50d93-477">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-477">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-478">Ogólny</span><span class="sxs-lookup"><span data-stu-id="50d93-478">Generic</span></span> |
| <span data-ttu-id="50d93-479">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-479">**Attributes**</span></span>              | <span data-ttu-id="50d93-480">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-480">N/A</span></span>  |
| <span data-ttu-id="50d93-481">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-481">**References**</span></span>              | [<span data-ttu-id="50d93-482">Witaj OAuth 2.0 autoryzacji Framework - readresatory otwarte</span><span class="sxs-lookup"><span data-stu-id="50d93-482">hello OAuth 2.0 Authorization Framework - Open Redirectors</span></span>](http://tools.ietf.org/html/rfc6749#section-10.15) |
| <span data-ttu-id="50d93-483">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-483">**Steps**</span></span> | <p><span data-ttu-id="50d93-484">Projekt aplikacji wymagających lokalizacji dostarczone przez użytkownika tooa przekierowania należy ograniczyć hello przekierowania możliwe cele tooa wstępnie zdefiniowanych "bezpiecznej" Lista Lokacje lub domeny.</span><span class="sxs-lookup"><span data-stu-id="50d93-484">Application design requiring redirection tooa user-supplied location must constrain hello possible redirection targets tooa predefined "safe" list of sites or domains.</span></span> <span data-ttu-id="50d93-485">Wszystkie przekierowania w aplikacji hello musi być zamknięty bezpieczne.</span><span class="sxs-lookup"><span data-stu-id="50d93-485">All redirects in hello application must be closed/safe.</span></span></p><p><span data-ttu-id="50d93-486">toodo to:</span><span class="sxs-lookup"><span data-stu-id="50d93-486">toodo this:</span></span></p><ul><li><span data-ttu-id="50d93-487">Zidentyfikuj wszystkie przekierowania</span><span class="sxs-lookup"><span data-stu-id="50d93-487">Identify all redirects</span></span></li><li><span data-ttu-id="50d93-488">Implementuje odpowiednie środki zaradcze dla każdego przekierowania.</span><span class="sxs-lookup"><span data-stu-id="50d93-488">Implement an appropriate mitigation for each redirect.</span></span> <span data-ttu-id="50d93-489">Odpowiednie środki zaradcze zawierają potwierdzenie przekierowania listy dozwolonych lub użytkownika.</span><span class="sxs-lookup"><span data-stu-id="50d93-489">Appropriate mitigations include redirect whitelist or user confirmation.</span></span> <span data-ttu-id="50d93-490">Jeśli do witryny sieci web lub usługi z usterki Otwórz przekierowania używa dostawcy tożsamości usługi Facebook/OAuth/OpenID, osoba atakująca może wykradać tokenu logowania użytkownika i personifikacji tego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="50d93-490">If a web site or service with an open redirect vulnerability uses Facebook/OAuth/OpenID identity providers, an attacker can steal a user's logon token and impersonate that user.</span></span> <span data-ttu-id="50d93-491">Jest to ryzykiem w przypadku w trybie OAuth, które opisano w dokumencie RFC 6749 "hello Framework autoryzacji OAuth 2.0", podobnie sekcji 10.15 "otworzyć przekierowuje", poświadczeń użytkowników mogą zostać złamane przez ukierunkowanego wyłudzania przy użyciu przekierowania Otwórz</span><span class="sxs-lookup"><span data-stu-id="50d93-491">This is an inherent risk when using OAuth, which is documented in RFC 6749 "hello OAuth 2.0 Authorization Framework", Section 10.15 "Open Redirects" Similarly, users' credentials can be compromised by spear phishing attacks using open redirects</span></span></li></ul>|

## <span data-ttu-id="50d93-492"><a id="string-method"></a>Implementowanie sprawdzania poprawności danych wejściowych na wszystkie parametry typu ciąg zaakceptowane przez metody kontrolera</span><span class="sxs-lookup"><span data-stu-id="50d93-492"><a id="string-method"></a>Implement input validation on all string type parameters accepted by Controller methods</span></span>

| <span data-ttu-id="50d93-493">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-493">Title</span></span>                   | <span data-ttu-id="50d93-494">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-494">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-495">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-495">**Component**</span></span>               | <span data-ttu-id="50d93-496">Aplikacja sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-496">Web Application</span></span> | 
| <span data-ttu-id="50d93-497">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-497">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-498">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-498">Build</span></span> |  
| <span data-ttu-id="50d93-499">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-499">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-500">Ogólny, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="50d93-500">Generic, MVC5, MVC6</span></span> |
| <span data-ttu-id="50d93-501">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-501">**Attributes**</span></span>              | <span data-ttu-id="50d93-502">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-502">N/A</span></span>  |
| <span data-ttu-id="50d93-503">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-503">**References**</span></span>              | <span data-ttu-id="50d93-504">[Sprawdzanie poprawności modelu danych w aplikacji MVC](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [wytyczne dla aplikacji ASP.NET MVC](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="50d93-504">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="50d93-505">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-505">**Steps**</span></span> | <span data-ttu-id="50d93-506">Dla metod, które wystarczy zaakceptować jako argument typu danych pierwotnych, a nie modeli można wykonać sprawdzania poprawności danych wejściowych przy użyciu wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="50d93-506">For methods that just accept primitive data type, and not models as argument,input validation using Regular Expression should be done.</span></span> <span data-ttu-id="50d93-507">W tym miejscu Regex.IsMatch powinien być używany z wzorcem prawidłowe wyrażenie regularne.</span><span class="sxs-lookup"><span data-stu-id="50d93-507">Here Regex.IsMatch should be used with a valid regex pattern.</span></span> <span data-ttu-id="50d93-508">Hello danych wejściowych nie odpowiada hello określonego wyrażenia regularnego, formantu nie powinien kontynuować i powinna być wyświetlana odpowiedniego ostrzeżenia dotyczące niepowodzenia weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="50d93-508">If hello input doesn't match hello specified Regular Expression, control should not proceed further, and an adequate warning regarding validation failure should be displayed.</span></span>| 

## <span data-ttu-id="50d93-509"><a id="dos-expression"></a>Ustawić limitu górnego limitu czasu dla wyrażenia regularnego przetwarzania DoS tooprevent powodu toobad wyrażeń regularnych</span><span class="sxs-lookup"><span data-stu-id="50d93-509"><a id="dos-expression"></a>Set upper limit timeout for regular expression processing tooprevent DoS due toobad regular expressions</span></span>

| <span data-ttu-id="50d93-510">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-510">Title</span></span>                   | <span data-ttu-id="50d93-511">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-511">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-512">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-512">**Component**</span></span>               | <span data-ttu-id="50d93-513">Aplikacja sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-513">Web Application</span></span> | 
| <span data-ttu-id="50d93-514">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-514">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-515">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-515">Build</span></span> |  
| <span data-ttu-id="50d93-516">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-516">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-517">Ogólny, MVC6 MVC5, formularzy sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-517">Generic, Web Forms, MVC5, MVC6</span></span>  |
| <span data-ttu-id="50d93-518">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-518">**Attributes**</span></span>              | <span data-ttu-id="50d93-519">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-519">N/A</span></span>  |
| <span data-ttu-id="50d93-520">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-520">**References**</span></span>              | [<span data-ttu-id="50d93-521">Właściwość DefaultRegexMatchTimeout</span><span class="sxs-lookup"><span data-stu-id="50d93-521">DefaultRegexMatchTimeout Property </span></span>](https://msdn.microsoft.com/library/system.web.configuration.httpruntimesection.defaultregexmatchtimeout.aspx) |
| <span data-ttu-id="50d93-522">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-522">**Steps**</span></span> | <span data-ttu-id="50d93-523">tooensure "odmowa usługi" przeciwko nieprawidłowo tworzone wyrażenia regularne, powodujących dużo śledzenie wsteczne ustawić hello globalne domyślny limit czasu operacji.</span><span class="sxs-lookup"><span data-stu-id="50d93-523">tooensure denial of service attacks against badly created regular expressions, that cause a lot of backtracking, set hello global default timeout.</span></span> <span data-ttu-id="50d93-524">Jeśli czas przetwarzania hello trwa dłużej, niż górny limit zdefiniowany hello, go spowoduje zgłoszenie wyjątku limitu czasu.</span><span class="sxs-lookup"><span data-stu-id="50d93-524">If hello processing time takes longer than hello defined upper limit, it would throw a Timeout exception.</span></span> <span data-ttu-id="50d93-525">Jeśli niczego nie skonfigurowano hello limitu czasu może być nieskończona.</span><span class="sxs-lookup"><span data-stu-id="50d93-525">If nothing is configured, hello timeout would be infinite.</span></span>| 

### <a name="example"></a><span data-ttu-id="50d93-526">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-526">Example</span></span>
<span data-ttu-id="50d93-527">Na przykład hello następującej konfiguracji zgłosi RegexMatchTimeoutException, jeśli przetwarzanie hello ma więcej niż 5 sekund:</span><span class="sxs-lookup"><span data-stu-id="50d93-527">For example, hello following configuration will throw a RegexMatchTimeoutException, if hello processing takes more than 5 seconds:</span></span> 

```C#
<httpRuntime targetFramework="4.5" defaultRegexMatchTimeout="00:00:05" />
```

## <span data-ttu-id="50d93-528"><a id="html-razor"></a>Należy unikać używania Html.Raw w widokami Razor</span><span class="sxs-lookup"><span data-stu-id="50d93-528"><a id="html-razor"></a>Avoid using Html.Raw in Razor views</span></span>

| <span data-ttu-id="50d93-529">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-529">Title</span></span>                   | <span data-ttu-id="50d93-530">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-530">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-531">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-531">**Component**</span></span>               | <span data-ttu-id="50d93-532">Aplikacja sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-532">Web Application</span></span> | 
| <span data-ttu-id="50d93-533">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-533">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-534">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-534">Build</span></span> |  
| <span data-ttu-id="50d93-535">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-535">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-536">MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="50d93-536">MVC5, MVC6</span></span> |
| <span data-ttu-id="50d93-537">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-537">**Attributes**</span></span>              | <span data-ttu-id="50d93-538">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-538">N/A</span></span>  |
| <span data-ttu-id="50d93-539">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-539">**References**</span></span>              | <span data-ttu-id="50d93-540">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-540">N/A</span></span>  |
| <span data-ttu-id="50d93-541">Krok</span><span class="sxs-lookup"><span data-stu-id="50d93-541">Step</span></span> | <span data-ttu-id="50d93-542">Stron sieci Web ASP.Net (Razor) wykonaj automatyczne kodowania HTML.</span><span class="sxs-lookup"><span data-stu-id="50d93-542">ASP.Net WebPages (Razor) perform automatic HTML encoding.</span></span> <span data-ttu-id="50d93-543">Wszystkie ciągi drukowanymi przez nuggets osadzonego kodu (@ bloki) są automatycznie kodowany w formacie HTML.</span><span class="sxs-lookup"><span data-stu-id="50d93-543">All strings printed by embedded code nuggets (@ blocks) are automatically HTML-encoded.</span></span> <span data-ttu-id="50d93-544">Jednakże, gdy `HtmlHelper.Raw` wywołania metody, zwraca kod znaczników, który nie ma kodowania HTML.</span><span class="sxs-lookup"><span data-stu-id="50d93-544">However, when `HtmlHelper.Raw` Method is invoked, it returns markup that is not HTML encoded.</span></span> <span data-ttu-id="50d93-545">Jeśli `Html.Raw()` używana jest metoda pomocnika, pomijany hello automatyczne kodowania ochrony, która zapewnia Razor.</span><span class="sxs-lookup"><span data-stu-id="50d93-545">If `Html.Raw()` helper method is used, it bypasses hello automatic encoding protection that Razor provides.</span></span>|

### <a name="example"></a><span data-ttu-id="50d93-546">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-546">Example</span></span>
<span data-ttu-id="50d93-547">Poniżej przedstawiono przykładowy niezabezpieczonych:</span><span class="sxs-lookup"><span data-stu-id="50d93-547">Following is an insecure example:</span></span> 

```C#
<div class="form-group">
            @Html.Raw(Model.AccountConfirmText)
        </div>
        <div class="form-group">
            @Html.Raw(Model.PaymentConfirmText)
        </div>
</div>
```
<span data-ttu-id="50d93-548">Nie używaj `Html.Raw()` chyba, że należy toodisplay znaczników.</span><span class="sxs-lookup"><span data-stu-id="50d93-548">Do not use `Html.Raw()` unless you need toodisplay markup.</span></span> <span data-ttu-id="50d93-549">Ta metoda nie przeprowadza kodowania niejawnie danych wyjściowych.</span><span class="sxs-lookup"><span data-stu-id="50d93-549">This method does not perform output encoding implicitly.</span></span> <span data-ttu-id="50d93-550">Użyj innych pomocników platformy ASP.NET, np.`@Html.DisplayFor()`</span><span class="sxs-lookup"><span data-stu-id="50d93-550">Use other ASP.NET helpers e.g., `@Html.DisplayFor()`</span></span> 

## <span data-ttu-id="50d93-551"><a id="stored-proc"></a>Nie używaj zapytań dynamicznych procedury składowane</span><span class="sxs-lookup"><span data-stu-id="50d93-551"><a id="stored-proc"></a>Do not use dynamic queries in stored procedures</span></span>

| <span data-ttu-id="50d93-552">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-552">Title</span></span>                   | <span data-ttu-id="50d93-553">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-553">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-554">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-554">**Component**</span></span>               | <span data-ttu-id="50d93-555">Database (Baza danych)</span><span class="sxs-lookup"><span data-stu-id="50d93-555">Database</span></span> | 
| <span data-ttu-id="50d93-556">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-556">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-557">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-557">Build</span></span> |  
| <span data-ttu-id="50d93-558">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-558">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-559">Ogólny</span><span class="sxs-lookup"><span data-stu-id="50d93-559">Generic</span></span> |
| <span data-ttu-id="50d93-560">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-560">**Attributes**</span></span>              | <span data-ttu-id="50d93-561">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-561">N/A</span></span>  |
| <span data-ttu-id="50d93-562">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-562">**References**</span></span>              | <span data-ttu-id="50d93-563">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-563">N/A</span></span>  |
| <span data-ttu-id="50d93-564">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-564">**Steps**</span></span> | <p><span data-ttu-id="50d93-565">Ataku polegającego na iniekcji SQL wykorzystuje luki w zabezpieczeniach w sprawdzania poprawności danych wejściowych polecenia dowolnego toorun hello bazy danych.</span><span class="sxs-lookup"><span data-stu-id="50d93-565">A SQL injection attack exploits vulnerabilities in input validation toorun arbitrary commands in hello database.</span></span> <span data-ttu-id="50d93-566">Go może wystąpić, gdy aplikacja używa wejściowych tooconstruct dynamiczne się, że tooaccess instrukcji SQL hello bazy danych.</span><span class="sxs-lookup"><span data-stu-id="50d93-566">It can occur when your application uses input tooconstruct dynamic SQL statements tooaccess hello database.</span></span> <span data-ttu-id="50d93-567">Może również wystąpić, jeśli procedury składowane przekazywane ciągi zawierające dane wejściowe użytkownika raw używa Twój kod.</span><span class="sxs-lookup"><span data-stu-id="50d93-567">It can also occur if your code uses stored procedures that are passed strings that contain raw user input.</span></span> <span data-ttu-id="50d93-568">Przy użyciu hello ataku polegającego na iniekcji SQL, osoba atakująca hello polecenia można wykonywać dowolne hello bazy danych.</span><span class="sxs-lookup"><span data-stu-id="50d93-568">Using hello SQL injection attack, hello attacker can execute arbitrary commands in hello database.</span></span> <span data-ttu-id="50d93-569">Wszystkie instrukcje SQL (w tym instrukcje SQL hello w procedur składowanych) musi sparametryzowana.</span><span class="sxs-lookup"><span data-stu-id="50d93-569">All SQL statements (including hello SQL statements in stored procedures) must be parameterized.</span></span> <span data-ttu-id="50d93-570">Sparametryzowanych instrukcji SQL akceptuje znaków, które mają specjalne znaczenie tooSQL (na przykład pojedynczy cudzysłów) bez problemów, ponieważ są one silnie typizowane.</span><span class="sxs-lookup"><span data-stu-id="50d93-570">Parameterized SQL statements will accept characters that have special meaning tooSQL (like single quote) without problems because they are strongly typed.</span></span> |

### <a name="example"></a><span data-ttu-id="50d93-571">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-571">Example</span></span>
<span data-ttu-id="50d93-572">Poniżej przedstawiono przykład niezabezpieczonych dynamiczne procedury składowanej:</span><span class="sxs-lookup"><span data-stu-id="50d93-572">Following is an example of insecure dynamic Stored Procedure:</span></span> 

```C#
CREATE PROCEDURE [dbo].[uspGetProductsByCriteria]
(
  @productName nvarchar(200) = NULL,
  @startPrice float = NULL,
  @endPrice float = NULL
)
AS
 BEGIN
  DECLARE @sql nvarchar(max)
  SELECT @sql = ' SELECT ProductID, ProductName, Description, UnitPrice, ImagePath' +
       ' FROM dbo.Products WHERE 1 = 1 '
       PRINT @sql
  IF @productName IS NOT NULL
     SELECT @sql = @sql + ' AND ProductName LIKE ''%' + @productName + '%'''
  IF @startPrice IS NOT NULL
     SELECT @sql = @sql + ' AND UnitPrice > ''' + CONVERT(VARCHAR(10),@startPrice) + ''''
  IF @endPrice IS NOT NULL
     SELECT @sql = @sql + ' AND UnitPrice < ''' + CONVERT(VARCHAR(10),@endPrice) + ''''

  PRINT @sql
  EXEC(@sql)
 END
```

### <a name="example"></a><span data-ttu-id="50d93-573">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-573">Example</span></span>
<span data-ttu-id="50d93-574">Tej samej procedury składowanej zaimplementowana bezpiecznie hello jest następujący:</span><span class="sxs-lookup"><span data-stu-id="50d93-574">Following is hello same stored procedure implemented securely:</span></span> 
```C#
CREATE PROCEDURE [dbo].[uspGetProductsByCriteriaSecure]
(
             @productName nvarchar(200) = NULL,
             @startPrice float = NULL,
             @endPrice float = NULL
)
AS
       BEGIN
             SELECT ProductID, ProductName, Description, UnitPrice, ImagePath
             FROM dbo.Products where
             (@productName IS NULL or ProductName like '%'+ @productName +'%')
             AND
             (@startPrice IS NULL or UnitPrice > @startPrice)
             AND
             (@endPrice IS NULL or UnitPrice < @endPrice)         
       END
```

## <span data-ttu-id="50d93-575"><a id="validation-api"></a>Upewnij się, że weryfikacja modelu jest wykonywana na metody interfejsu API sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-575"><a id="validation-api"></a>Ensure that model validation is done on Web API methods</span></span>

| <span data-ttu-id="50d93-576">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-576">Title</span></span>                   | <span data-ttu-id="50d93-577">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-577">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-578">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-578">**Component**</span></span>               | <span data-ttu-id="50d93-579">Interfejs API sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-579">Web API</span></span> | 
| <span data-ttu-id="50d93-580">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-580">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-581">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-581">Build</span></span> |  
| <span data-ttu-id="50d93-582">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-582">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-583">MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="50d93-583">MVC5, MVC6</span></span> |
| <span data-ttu-id="50d93-584">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-584">**Attributes**</span></span>              | <span data-ttu-id="50d93-585">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-585">N/A</span></span>  |
| <span data-ttu-id="50d93-586">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-586">**References**</span></span>              | [<span data-ttu-id="50d93-587">Weryfikacja modelu w składniku ASP.NET Web API</span><span class="sxs-lookup"><span data-stu-id="50d93-587">Model Validation in ASP.NET Web API </span></span>](http://www.asp.net/web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api) |
| <span data-ttu-id="50d93-588">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-588">**Steps**</span></span> | <span data-ttu-id="50d93-589">Gdy klient wysyła dane interfejsu API sieci web tooa, jest obowiązkowy toovalidate hello danych przed wykonaniem jakiegokolwiek przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="50d93-589">When a client sends data tooa web API, it is mandatory toovalidate hello data before doing any processing.</span></span> <span data-ttu-id="50d93-590">Dla interfejsów API sieci Web ASP.NET, która akceptuje modeli jako dane wejściowe, użyj adnotacji danych na reguł sprawdzania poprawności tooset modeli na powitania właściwości hello modelu.</span><span class="sxs-lookup"><span data-stu-id="50d93-590">For ASP.NET Web APIs which accept models as input, use data annotations on models tooset validation rules on hello properties of hello model.</span></span>|

### <a name="example"></a><span data-ttu-id="50d93-591">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-591">Example</span></span>
<span data-ttu-id="50d93-592">Witaj następującego kodu pokazano hello na tym samym:</span><span class="sxs-lookup"><span data-stu-id="50d93-592">hello following code demonstrates hello same:</span></span> 

```C#
using System.ComponentModel.DataAnnotations;

namespace MyApi.Models
{
    public class Product
    {
        public int Id { get; set; }
        [Required]
        [RegularExpression(@"^[a-zA-Z0-9]*$", ErrorMessage="Only alphanumeric characters are allowed.")]
        public string Name { get; set; }
        public decimal Price { get; set; }
        [Range(0, 999)]
        public double Weight { get; set; }
    }
}
```

### <a name="example"></a><span data-ttu-id="50d93-593">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-593">Example</span></span>
<span data-ttu-id="50d93-594">W metodzie akcji hello hello kontrolerów interfejsu API ważność hello modelu ma toobe jawnie zaznaczone, jak pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="50d93-594">In hello action method of hello API controllers, validity of hello model has toobe explicitly checked as shown below:</span></span> 

```C#
namespace MyApi.Controllers
{
    public class ProductsController : ApiController
    {
        public HttpResponseMessage Post(Product product)
        {
            if (ModelState.IsValid)
            {
                // Do something with hello product (not shown).

                return new HttpResponseMessage(HttpStatusCode.OK);
            }
            else
            {
                return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
            }
        }
    }
}
```

## <span data-ttu-id="50d93-595"><a id="string-api"></a>Implementowanie sprawdzania poprawności danych wejściowych na wszystkie parametry typu ciąg zaakceptowane przez metody interfejsu API sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-595"><a id="string-api"></a>Implement input validation on all string type parameters accepted by Web API methods</span></span>

| <span data-ttu-id="50d93-596">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-596">Title</span></span>                   | <span data-ttu-id="50d93-597">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-597">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-598">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-598">**Component**</span></span>               | <span data-ttu-id="50d93-599">Interfejs API sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-599">Web API</span></span> | 
| <span data-ttu-id="50d93-600">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-600">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-601">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-601">Build</span></span> |  
| <span data-ttu-id="50d93-602">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-602">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-603">Ogólny, MVC 5, 6 MVC</span><span class="sxs-lookup"><span data-stu-id="50d93-603">Generic, MVC 5, MVC 6</span></span> |
| <span data-ttu-id="50d93-604">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-604">**Attributes**</span></span>              | <span data-ttu-id="50d93-605">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-605">N/A</span></span>  |
| <span data-ttu-id="50d93-606">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-606">**References**</span></span>              | <span data-ttu-id="50d93-607">[Sprawdzanie poprawności modelu danych w aplikacji MVC](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [wytyczne dla aplikacji ASP.NET MVC](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="50d93-607">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="50d93-608">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-608">**Steps**</span></span> | <span data-ttu-id="50d93-609">Dla metod, które wystarczy zaakceptować jako argument typu danych pierwotnych, a nie modeli można wykonać sprawdzania poprawności danych wejściowych przy użyciu wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="50d93-609">For methods that just accept primitive data type, and not models as argument,input validation using Regular Expression should be done.</span></span> <span data-ttu-id="50d93-610">W tym miejscu Regex.IsMatch powinien być używany z wzorcem prawidłowe wyrażenie regularne.</span><span class="sxs-lookup"><span data-stu-id="50d93-610">Here Regex.IsMatch should be used with a valid regex pattern.</span></span> <span data-ttu-id="50d93-611">Hello danych wejściowych nie odpowiada hello określonego wyrażenia regularnego, formantu nie powinien kontynuować i powinna być wyświetlana odpowiedniego ostrzeżenia dotyczące niepowodzenia weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="50d93-611">If hello input doesn't match hello specified Regular Expression, control should not proceed further, and an adequate warning regarding validation failure should be displayed.</span></span>|

## <span data-ttu-id="50d93-612"><a id="typesafe-api"></a>Upewnij się, czy bezpieczny parametry są używane w interfejsie API sieci Web dla dostępu do danych</span><span class="sxs-lookup"><span data-stu-id="50d93-612"><a id="typesafe-api"></a>Ensure that type-safe parameters are used in Web API for data access</span></span>

| <span data-ttu-id="50d93-613">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-613">Title</span></span>                   | <span data-ttu-id="50d93-614">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-614">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-615">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-615">**Component**</span></span>               | <span data-ttu-id="50d93-616">Interfejs API sieci Web</span><span class="sxs-lookup"><span data-stu-id="50d93-616">Web API</span></span> | 
| <span data-ttu-id="50d93-617">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-617">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-618">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-618">Build</span></span> |  
| <span data-ttu-id="50d93-619">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-619">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-620">Ogólny</span><span class="sxs-lookup"><span data-stu-id="50d93-620">Generic</span></span> |
| <span data-ttu-id="50d93-621">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-621">**Attributes**</span></span>              | <span data-ttu-id="50d93-622">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-622">N/A</span></span>  |
| <span data-ttu-id="50d93-623">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-623">**References**</span></span>              | <span data-ttu-id="50d93-624">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-624">N/A</span></span>  |
| <span data-ttu-id="50d93-625">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-625">**Steps**</span></span> | <p><span data-ttu-id="50d93-626">Jeśli używasz hello kolekcji parametrów, SQL traktuje hello w danych wejściowych jest jako wartość literału, a nie jako kod wykonywalny.</span><span class="sxs-lookup"><span data-stu-id="50d93-626">If you use hello Parameters collection, SQL treats hello input is as a literal value rather then as executable code.</span></span> <span data-ttu-id="50d93-627">Witaj kolekcji parametrów można ograniczenia typu i długości tooenforce używane w danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="50d93-627">hello Parameters collection can be used tooenforce type and length constraints on input data.</span></span> <span data-ttu-id="50d93-628">Wartości spoza zakresu hello wyzwolenia Wystąpił wyjątek.</span><span class="sxs-lookup"><span data-stu-id="50d93-628">Values outside of hello range trigger an exception.</span></span> <span data-ttu-id="50d93-629">Jeśli nie są używane parametry SQL bezpieczny, osoby atakujące może być możliwe tooexecute iniekcji atakom, które są osadzone w danych wejściowych hello niefiltrowane.</span><span class="sxs-lookup"><span data-stu-id="50d93-629">If type-safe SQL parameters are not used, attackers might be able tooexecute injection attacks that are embedded in hello unfiltered input.</span></span></p><p><span data-ttu-id="50d93-630">Parametry typu bezpieczne podczas konstruowania SQL zapytań tooavoid możliwe ataki które mogą wystąpić przy użyciu niefiltrowane danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="50d93-630">Use type safe parameters when constructing SQL queries tooavoid possible SQL injection attacks that can occur with unfiltered input.</span></span> <span data-ttu-id="50d93-631">Umożliwia bezpieczne parametry typu z procedur składowanych i dynamicznych instrukcji SQL.</span><span class="sxs-lookup"><span data-stu-id="50d93-631">You can use type safe parameters with stored procedures and with dynamic SQL statements.</span></span> <span data-ttu-id="50d93-632">Parametry są traktowane jako wartości literałów przez hello bazę danych, a nie kodu wykonywalnego.</span><span class="sxs-lookup"><span data-stu-id="50d93-632">Parameters are treated as literal values by hello database and not as executable code.</span></span> <span data-ttu-id="50d93-633">Parametry są również sprawdzane pod kątem typu i długości.</span><span class="sxs-lookup"><span data-stu-id="50d93-633">Parameters are also checked for type and length.</span></span></p>|

### <a name="example"></a><span data-ttu-id="50d93-634">Przykład</span><span class="sxs-lookup"><span data-stu-id="50d93-634">Example</span></span>
<span data-ttu-id="50d93-635">Witaj poniższy kod przedstawia sposób toouse bezpieczne parametry typu z hello SqlParameterCollection podczas wywoływania procedury składowanej.</span><span class="sxs-lookup"><span data-stu-id="50d93-635">hello following code shows how toouse type safe parameters with hello SqlParameterCollection when calling a stored procedure.</span></span> 

```C#
using System.Data;
using System.Data.SqlClient;

using (SqlConnection connection = new SqlConnection(connectionString))
{ 
DataSet userDataset = new DataSet(); 
SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure", connection); 
myCommand.SelectCommand.CommandType = CommandType.StoredProcedure; 
myCommand.SelectCommand.Parameters.Add("@au_id", SqlDbType.VarChar, 11); 
myCommand.SelectCommand.Parameters["@au_id"].Value = SSN.Text; 
myCommand.Fill(userDataset);
}  
```
<span data-ttu-id="50d93-636">W hello poprzedzających przykładowego kodu hello wartość wejściowa nie może być dłuższa niż 11 znaków.</span><span class="sxs-lookup"><span data-stu-id="50d93-636">In hello preceding code example, hello input value cannot be longer than 11 characters.</span></span> <span data-ttu-id="50d93-637">Jeśli dane hello niezgodny typ toohello lub długość zdefiniowaną przez parametr hello, hello klasy SqlParameter zgłasza wyjątek.</span><span class="sxs-lookup"><span data-stu-id="50d93-637">If hello data does not conform toohello type or length defined by hello parameter, hello SqlParameter class throws an exception.</span></span> 

## <span data-ttu-id="50d93-638"><a id="sql-docdb"></a>Użyj sparametryzowanego zapytania SQL dla bazy danych rozwiązania Cosmos</span><span class="sxs-lookup"><span data-stu-id="50d93-638"><a id="sql-docdb"></a>Use parametrized SQL queries for Cosmos DB</span></span>

| <span data-ttu-id="50d93-639">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-639">Title</span></span>                   | <span data-ttu-id="50d93-640">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-640">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-641">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-641">**Component**</span></span>               | <span data-ttu-id="50d93-642">Dokumentów w usłudze Azure DB</span><span class="sxs-lookup"><span data-stu-id="50d93-642">Azure Document DB</span></span> | 
| <span data-ttu-id="50d93-643">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-643">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-644">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-644">Build</span></span> |  
| <span data-ttu-id="50d93-645">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-645">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-646">Ogólny</span><span class="sxs-lookup"><span data-stu-id="50d93-646">Generic</span></span> |
| <span data-ttu-id="50d93-647">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-647">**Attributes**</span></span>              | <span data-ttu-id="50d93-648">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-648">N/A</span></span>  |
| <span data-ttu-id="50d93-649">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-649">**References**</span></span>              | [<span data-ttu-id="50d93-650">Anonsowanie parametryzacja SQL w usłudze DocumentDB</span><span class="sxs-lookup"><span data-stu-id="50d93-650">Announcing SQL Parameterization in DocumentDB</span></span>](https://azure.microsoft.com/blog/announcing-sql-parameterization-in-documentdb/) |
| <span data-ttu-id="50d93-651">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-651">**Steps**</span></span> | <span data-ttu-id="50d93-652">Chociaż usługa DocumentDB obsługuje tylko zapytania tylko do odczytu, iniekcja kodu SQL jest nadal możliwe, jeśli zapytania zostały utworzone przez łączenie z danych wejściowych użytkownika.</span><span class="sxs-lookup"><span data-stu-id="50d93-652">Although DocumentDB only supports read-only queries, SQL injection is still possible if queries are constructed by concatenating with user input.</span></span> <span data-ttu-id="50d93-653">Może się zdarzyć toodata dostępu toogain użytkownika nie należy korzystać w ramach hello tej samej kolekcji przez obsługuje tworzenie złośliwego zapytania SQL.</span><span class="sxs-lookup"><span data-stu-id="50d93-653">It might be possible for a user toogain access toodata they shouldn’t be accessing within hello same collection by crafting malicious SQL queries.</span></span> <span data-ttu-id="50d93-654">Użyj sparametryzowane zapytania SQL Jeśli zbudowanych zapytania oparte na danych wejściowych użytkownika.</span><span class="sxs-lookup"><span data-stu-id="50d93-654">Use parameterized SQL queries if queries are constructed based on user input.</span></span> |

## <span data-ttu-id="50d93-655"><a id="schema-binding"></a>Sprawdzanie poprawności danych wejściowych WCF przez powiązanie ze schematem</span><span class="sxs-lookup"><span data-stu-id="50d93-655"><a id="schema-binding"></a>WCF Input validation through Schema binding</span></span>

| <span data-ttu-id="50d93-656">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-656">Title</span></span>                   | <span data-ttu-id="50d93-657">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-657">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-658">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-658">**Component**</span></span>               | <span data-ttu-id="50d93-659">WCF</span><span class="sxs-lookup"><span data-stu-id="50d93-659">WCF</span></span> | 
| <span data-ttu-id="50d93-660">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-660">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-661">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-661">Build</span></span> |  
| <span data-ttu-id="50d93-662">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-662">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-663">Ogólny, NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="50d93-663">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="50d93-664">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-664">**Attributes**</span></span>              | <span data-ttu-id="50d93-665">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-665">N/A</span></span>  |
| <span data-ttu-id="50d93-666">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-666">**References**</span></span>              | [<span data-ttu-id="50d93-667">MSDN</span><span class="sxs-lookup"><span data-stu-id="50d93-667">MSDN</span></span>](https://msdn.microsoft.com/library/ff647820.aspx) |
| <span data-ttu-id="50d93-668">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-668">**Steps**</span></span> | <p><span data-ttu-id="50d93-669">Brak weryfikacji prowadzi toodifferent iniekcji ataków.</span><span class="sxs-lookup"><span data-stu-id="50d93-669">Lack of validation leads toodifferent type injection attacks.</span></span></p><p><span data-ttu-id="50d93-670">Sprawdzanie poprawności komunikatu reprezentuje jedną linię obrony w przypadku ochrony hello aplikacji WCF.</span><span class="sxs-lookup"><span data-stu-id="50d93-670">Message validation represents one line of defense in hello protection of your WCF application.</span></span> <span data-ttu-id="50d93-671">Z tej metody Sprawdź poprawność wiadomości przy użyciu operacji usługi WCF tooprotect schematy przed atakami złośliwego klienta.</span><span class="sxs-lookup"><span data-stu-id="50d93-671">With this approach, you validate messages using schemas tooprotect WCF service operations from attack by a malicious client.</span></span> <span data-ttu-id="50d93-672">Sprawdź poprawność wszystkich komunikatów odebranych przez powitania klienta tooprotect powitania klienta przed atakiem przez złośliwe usługi.</span><span class="sxs-lookup"><span data-stu-id="50d93-672">Validate all messages received by hello client tooprotect hello client from attack by a malicious service.</span></span> <span data-ttu-id="50d93-673">Sprawdzanie poprawności komunikatu ułatwia wiadomości możliwych toovalidate podczas operacji korzystać kontraktów komunikatu lub kontraktów danych, których nie można wykonać przy użyciu sprawdzanie poprawności parametru.</span><span class="sxs-lookup"><span data-stu-id="50d93-673">Message validation makes it possible toovalidate messages when operations consume message contracts or data contracts, which cannot be done using parameter validation.</span></span> <span data-ttu-id="50d93-674">Sprawdzanie poprawności komunikatu umożliwia logikę weryfikacji toocreate wewnątrz schematów, a tym samym zapewniając większą elastyczność i zmniejsza czas programowania.</span><span class="sxs-lookup"><span data-stu-id="50d93-674">Message validation allows you toocreate validation logic inside schemas, thereby providing more flexibility and reducing development time.</span></span> <span data-ttu-id="50d93-675">Schematy mogą być ponownie używane w różnych aplikacjach wewnątrz organizacji hello, standardów dotyczących reprezentację danych.</span><span class="sxs-lookup"><span data-stu-id="50d93-675">Schemas can be reused across different applications inside hello organization, creating standards for data representation.</span></span> <span data-ttu-id="50d93-676">Ponadto sprawdzanie poprawności komunikatu pozwala operacji tooprotect jeśli używają oni bardziej złożone typy danych obejmujących reprezentującej logiki biznesowej.</span><span class="sxs-lookup"><span data-stu-id="50d93-676">Additionally, message validation allows you tooprotect operations when they consume more complex data types involving contracts representing business logic.</span></span></p><p><span data-ttu-id="50d93-677">Sprawdzanie poprawności komunikatu tooperform, najpierw utworzyć schemat, który reprezentuje hello operacji usługi i hello typów danych używanych przez te operacje.</span><span class="sxs-lookup"><span data-stu-id="50d93-677">tooperform message validation, you first build a schema that represents hello operations of your service and hello data types consumed by those operations.</span></span> <span data-ttu-id="50d93-678">Następnie można utworzyć klasy .NET, która implementuje inspektora komunikat niestandardowego klienta i wiadomości powitania od niestandardowych dyspozytora komunikatów Inspektor toovalidate wysłać/odebrać z hello usługi.</span><span class="sxs-lookup"><span data-stu-id="50d93-678">You then create a .NET class that implements a custom client message inspector and custom dispatcher message inspector toovalidate hello messages sent/received to/from hello service.</span></span> <span data-ttu-id="50d93-679">Następnie implementuje weryfikacji wiadomości tooenable zachowania punktu końcowego niestandardowe na powitania klienta i hello usługi.</span><span class="sxs-lookup"><span data-stu-id="50d93-679">Next, you implement a custom endpoint behavior tooenable message validation on both hello client and hello service.</span></span> <span data-ttu-id="50d93-680">Na koniec wdrożenia elementu konfiguracji niestandardowej klasy hello, które umożliwia tooexpose hello rozszerzony zachowania niestandardowe punktu końcowego w pliku konfiguracyjnym hello hello usługi lub klienta hello"</span><span class="sxs-lookup"><span data-stu-id="50d93-680">Finally, you implement a custom configuration element on hello class that allows you tooexpose hello extended custom endpoint behavior in hello configuration file of hello service or hello client"</span></span></p>|

## <span data-ttu-id="50d93-681"><a id="parameters"></a>Sprawdzanie poprawności wejściowy WCF za pomocą parametru inspektorzy</span><span class="sxs-lookup"><span data-stu-id="50d93-681"><a id="parameters"></a>WCF- Input validation through Parameter Inspectors</span></span>

| <span data-ttu-id="50d93-682">Tytuł</span><span class="sxs-lookup"><span data-stu-id="50d93-682">Title</span></span>                   | <span data-ttu-id="50d93-683">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="50d93-683">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="50d93-684">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="50d93-684">**Component**</span></span>               | <span data-ttu-id="50d93-685">WCF</span><span class="sxs-lookup"><span data-stu-id="50d93-685">WCF</span></span> | 
| <span data-ttu-id="50d93-686">**Faza SDL**</span><span class="sxs-lookup"><span data-stu-id="50d93-686">**SDL Phase**</span></span>               | <span data-ttu-id="50d93-687">Kompilacja</span><span class="sxs-lookup"><span data-stu-id="50d93-687">Build</span></span> |  
| <span data-ttu-id="50d93-688">**Zastosowanie technologii**</span><span class="sxs-lookup"><span data-stu-id="50d93-688">**Applicable Technologies**</span></span> | <span data-ttu-id="50d93-689">Ogólny, NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="50d93-689">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="50d93-690">**Atrybuty**</span><span class="sxs-lookup"><span data-stu-id="50d93-690">**Attributes**</span></span>              | <span data-ttu-id="50d93-691">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="50d93-691">N/A</span></span>  |
| <span data-ttu-id="50d93-692">**Odwołania**</span><span class="sxs-lookup"><span data-stu-id="50d93-692">**References**</span></span>              | [<span data-ttu-id="50d93-693">MSDN</span><span class="sxs-lookup"><span data-stu-id="50d93-693">MSDN</span></span>](https://msdn.microsoft.com/library/ff647875.aspx) |
| <span data-ttu-id="50d93-694">**Kroki**</span><span class="sxs-lookup"><span data-stu-id="50d93-694">**Steps**</span></span> | <p><span data-ttu-id="50d93-695">Sprawdzanie poprawności danych wejściowych i danych reprezentuje jeden ważne linię obrony w przypadku ochrony hello aplikacji WCF.</span><span class="sxs-lookup"><span data-stu-id="50d93-695">Input and data validation represents one important line of defense in hello protection of your WCF application.</span></span> <span data-ttu-id="50d93-696">Należy sprawdzić, czy wszystkie parametry ujawnione podczas obsługi operacji usługi WCF hello tooprotect przed atakiem przez złośliwego klienta.</span><span class="sxs-lookup"><span data-stu-id="50d93-696">You should validate all parameters exposed in WCF service operations tooprotect hello service from attack by a malicious client.</span></span> <span data-ttu-id="50d93-697">Z drugiej strony należy także sprawdzić, czy wszystkie wartości zwracanych odebranych przez powitania klienta tooprotect powitania klienta przed atakiem przez złośliwe usługi</span><span class="sxs-lookup"><span data-stu-id="50d93-697">Conversely, you should also validate all return values received by hello client tooprotect hello client from attack by a malicious service</span></span></p><p><span data-ttu-id="50d93-698">Usługi WCF udostępniają punkty rozszerzeń różnych, umożliwiających zachowanie środowiska uruchomieniowego WCF hello toocustomize tworząc niestandardowe rozszerzenia.</span><span class="sxs-lookup"><span data-stu-id="50d93-698">WCF provides different extensibility points that allow you toocustomize hello WCF runtime behavior by creating custom extensions.</span></span> <span data-ttu-id="50d93-699">Wiadomości są dwa mechanizmy rozszerzania inspektorzy i inspektorzy parametr używany toogain większą kontrolę nad danymi hello przekazywanie między klientem a usługą.</span><span class="sxs-lookup"><span data-stu-id="50d93-699">Message Inspectors and Parameter Inspectors are two extensibility mechanisms used toogain greater control over hello data passing between a client and a service.</span></span> <span data-ttu-id="50d93-700">Należy użyć parametru inspektorzy do sprawdzania poprawności danych wejściowych i użyć inspektorzy komunikatów tylko wtedy, gdy potrzebujesz wiadomości powitania tooinspect całego przepływu i usługi.</span><span class="sxs-lookup"><span data-stu-id="50d93-700">You should use parameter inspectors for input validation and use message inspectors only when you need tooinspect hello entire message flowing in and out of a service.</span></span></p><p><span data-ttu-id="50d93-701">Sprawdzanie poprawności danych wejściowych tooperform, zostanie Tworzenie klasy .NET i zaimplementować inspektora parametru niestandardowego w kolejności toovalidate parametrów operacji w usłudze.</span><span class="sxs-lookup"><span data-stu-id="50d93-701">tooperform input validation, you will build a .NET class and implement a custom parameter inspector in order toovalidate parameters on operations in your service.</span></span> <span data-ttu-id="50d93-702">Następnie zostaną zaimplementowane weryfikacji tooenable zachowania punktu końcowego niestandardowe na powitania klienta i hello usługi.</span><span class="sxs-lookup"><span data-stu-id="50d93-702">You will then implement a custom endpoint behavior tooenable validation on both hello client and hello service.</span></span> <span data-ttu-id="50d93-703">Na koniec zostaną zaimplementowane element konfiguracji niestandardowej klasy hello, które umożliwia tooexpose hello rozszerzony zachowanie punktu końcowego niestandardowych w pliku konfiguracyjnym hello usługi hello lub powitania klienta</span><span class="sxs-lookup"><span data-stu-id="50d93-703">Finally, you will implement a custom configuration element on hello class that allows you tooexpose hello extended custom endpoint behavior in hello configuration file of hello service or hello client</span></span></p>|
