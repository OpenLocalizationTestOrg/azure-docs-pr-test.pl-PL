---
title: "Uwierzytelnianie usługi Azure AD na dostęp do interfejsu API usługi multimediów Azure za pomocą REST | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak dostęp do interfejsu API usługi Azure Media Services przy użyciu uwierzytelniania usługi Azure Active Directory przy użyciu REST."
services: media-services
documentationcenter: 
author: willzhan
manager: cfowler
editor: 
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: willzhan;juliako
ms.openlocfilehash: 1c62857699fb29b3583363e1c6f2dc7874635f40
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/29/2017
---
# <a name="use-azure-ad-authentication-to-access-the-azure-media-services-api-with-rest"></a><span data-ttu-id="9e3ac-103">Azure Media Services API z POZOSTAŁĄ dostęp za pomocą uwierzytelniania usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="9e3ac-103">Use Azure AD authentication to access the Azure Media Services API with REST</span></span>

<span data-ttu-id="9e3ac-104">Zespół usługi Azure Media Services wydała obsługę uwierzytelniania usługi Azure Active Directory (Azure AD) dla dostępu do usługi Azure Media Services.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-104">The Azure Media Services team has released Azure Active Directory (Azure AD) authentication support for Azure Media Services access.</span></span> <span data-ttu-id="9e3ac-105">On również ogłosiła planów można zastąpić uwierzytelniania usługi kontroli dostępu w usłudze Azure Media Services dostępu.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-105">It also announced plans to deprecate Azure Access Control service authentication for Media Services access.</span></span> <span data-ttu-id="9e3ac-106">Ponieważ każda subskrypcja platformy Azure i co konto usługi Media Services jest dołączony do dzierżawy usługi Azure AD, obsługę uwierzytelniania usługi Azure AD oferuje wiele korzyści w zakresie zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-106">Because every Azure subscription, and every Media Services account, is attached to an Azure AD tenant, Azure AD authentication support brings many security benefits.</span></span> <span data-ttu-id="9e3ac-107">Aby uzyskać szczegółowe informacje dotyczące tej zmiany i migracji (Jeśli używasz SDK .NET usługi Media Services dla aplikacji) zobacz następujące wpisy na blogu i artykuły:</span><span class="sxs-lookup"><span data-stu-id="9e3ac-107">For details about this change and migration (if you use the Media Services .NET SDK for your app), see the following blog posts and articles:</span></span>

- [<span data-ttu-id="9e3ac-108">Usługa Azure Media Services ogłasza pomocy technicznej dla usługi Azure AD i amortyzacja uwierzytelniania kontroli dostępu</span><span class="sxs-lookup"><span data-stu-id="9e3ac-108">Azure Media Services announces support for Azure AD and deprecation of Access Control authentication</span></span>](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation)
- [<span data-ttu-id="9e3ac-109">Interfejs API usług Media Azure dostępu przy użyciu uwierzytelniania usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="9e3ac-109">Access Azure Media Services API by using Azure AD authentication</span></span>](media-services-use-aad-auth-to-access-ams-api.md)
- [<span data-ttu-id="9e3ac-110">Użyj uwierzytelniania usługi Azure AD dostęp do interfejsu API usługi Azure Media Services przy użyciu programu Microsoft .NET</span><span class="sxs-lookup"><span data-stu-id="9e3ac-110">Use Azure AD authentication to access Azure Media Services API by using Microsoft .NET</span></span>](media-services-dotnet-get-started-with-aad.md)
- [<span data-ttu-id="9e3ac-111">Wprowadzenie do uwierzytelniania usługi Azure AD przy użyciu portalu Azure</span><span class="sxs-lookup"><span data-stu-id="9e3ac-111">Getting started with Azure AD authentication by using the Azure portal</span></span>](media-services-portal-get-started-with-aad.md)

<span data-ttu-id="9e3ac-112">Niektórzy klienci konieczne również opracowanie ich rozwiązań Media Services, w obszarze następujące ograniczenia:</span><span class="sxs-lookup"><span data-stu-id="9e3ac-112">Some customers need to develop their Media Services solutions under the following constraints:</span></span>

*   <span data-ttu-id="9e3ac-113">Korzystają z języka programowania, który nie jest program Microsoft .NET lub C# lub środowisko uruchomieniowe nie jest częścią systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-113">They use a programming language that is not Microsoft .NET or C#, or the runtime environment is not Windows.</span></span>
*   <span data-ttu-id="9e3ac-114">Bibliotek platformy Azure AD, takich jak biblioteki uwierzytelniania usługi Active Directory są niedostępne dla języka programowania lub nie może służyć do ich środowiska uruchomieniowego.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-114">Azure AD libraries such as Active Directory Authentication Libraries are not available for the programming language or can't be used for their runtime environment.</span></span>

<span data-ttu-id="9e3ac-115">Niektórzy klienci mają opracowanych aplikacji przy użyciu interfejsu API REST dla uwierzytelniania kontroli dostępu i dostępu do usługi Azure Media Services.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-115">Some customers have developed applications by using REST API for both Access Control authentication and Azure Media Services access.</span></span> <span data-ttu-id="9e3ac-116">Dla tych klientów należy tylko interfejsu API REST na potrzeby uwierzytelniania usługi Azure AD i dostęp do usługi Azure Media Services.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-116">For these customers, you need a way to use only the REST API for Azure AD authentication and subsequent Azure Media Services access.</span></span> <span data-ttu-id="9e3ac-117">Należy nie należy polegać na żadnym z bibliotek usługi Azure AD lub SDK .NET usługi Media Services.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-117">You need to not rely on any of the Azure AD libraries or on the Media Services .NET SDK.</span></span> <span data-ttu-id="9e3ac-118">W tym artykule firma Microsoft opisano rozwiązania i podaj przykładowy kod dla tego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-118">In this article, we describe a solution and provide sample code for this scenario.</span></span> <span data-ttu-id="9e3ac-119">Ponieważ kod jest wszystkie wywołania interfejsu API REST, z nie zależność od usługi Azure AD lub biblioteki usługi Azure Media Services kodu można łatwo tłumaczyć innych językach programowania.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-119">Because the code is all REST API calls, with no dependency on any Azure AD or Azure Media Services library, the code can easily be translated to any other programming language.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9e3ac-120">Obecnie usługa Media Services obsługuje model uwierzytelniania usługi kontroli dostępu platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-120">Currently, Media Services supports the Azure Access Control services authentication model.</span></span> <span data-ttu-id="9e3ac-121">Jednak kontroli dostępu uwierzytelniania zostaną wycofane 1 czerwca 2018.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-121">However, Access Control authentication will be deprecated June 1, 2018.</span></span> <span data-ttu-id="9e3ac-122">Zaleca się, jak najszybszą migrację do model uwierzytelniania usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-122">We recommend that you migrate to the Azure AD authentication model as soon as possible.</span></span>


## <a name="design"></a><span data-ttu-id="9e3ac-123">Projektowanie</span><span class="sxs-lookup"><span data-stu-id="9e3ac-123">Design</span></span>

<span data-ttu-id="9e3ac-124">W tym artykule używamy następujący projekt uwierzytelniania i autoryzacji:</span><span class="sxs-lookup"><span data-stu-id="9e3ac-124">In this article, we use the following authentication and authorization design:</span></span>

*  <span data-ttu-id="9e3ac-125">Protokół HCAP: OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-125">Authorization protocol: OAuth 2.0.</span></span> <span data-ttu-id="9e3ac-126">OAuth 2.0 to standard zabezpieczeń sieci web, który obejmuje zarówno uwierzytelniania i autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-126">OAuth 2.0 is a web security standard that covers both authentication and authorization.</span></span> <span data-ttu-id="9e3ac-127">Jest on obsługiwany przez Google, Microsoft, Facebook i PayPal.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-127">It is supported by Google, Microsoft, Facebook, and PayPal.</span></span> <span data-ttu-id="9e3ac-128">Został on ratyfikacji października 2012.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-128">It was ratified October 2012.</span></span> <span data-ttu-id="9e3ac-129">Firma Microsoft obsługuje mocno OAuth 2.0 i OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-129">Microsoft firmly supports OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="9e3ac-130">Obsługiwane są zarówno z tymi standardami w wielu usługach i bibliotek klienckich, włącznie z usługi Azure Active Directory, Otwórz interfejs sieci Web dla platformy .NET (OWIN) Katana i bibliotek usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-130">Both of these standards are supported in multiple services and client libraries, including Azure Active Directory, Open Web Interface for .NET (OWIN) Katana, and Azure AD libraries.</span></span>
*  <span data-ttu-id="9e3ac-131">Przyznaj typu: typ przyznania poświadczeń klienta.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-131">Grant type: Client credentials grant type.</span></span> <span data-ttu-id="9e3ac-132">Poświadczenia klienta jest jednym grant cztery typy w OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-132">Client credentials is one of the four grant types in OAuth 2.0.</span></span> <span data-ttu-id="9e3ac-133">Często jest używane dla dostępu do usługi Azure AD Microsoft Graph API.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-133">It's often used for Azure AD Microsoft Graph API access.</span></span>
*  <span data-ttu-id="9e3ac-134">Tryb uwierzytelniania: nazwy głównej usługi.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-134">Authentication mode: Service principal.</span></span> <span data-ttu-id="9e3ac-135">Tryb uwierzytelniania jest użytkownika lub uwierzytelnianie interakcyjne.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-135">The other authentication mode is user or interactive authentication.</span></span>

<span data-ttu-id="9e3ac-136">Łącznie cztery aplikacje lub usługi są zaangażowane w usłudze Azure AD uwierzytelniania i autoryzacji przepływu dotyczące korzystania z usługi Media Services.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-136">A total of four applications or services are involved in the Azure AD authentication and authorization flow for using Media Services.</span></span> <span data-ttu-id="9e3ac-137">Aplikacje i usługi oraz przepływu, zostały opisane w poniższej tabeli:</span><span class="sxs-lookup"><span data-stu-id="9e3ac-137">The applications and services, and the flow, are described in the following table:</span></span>

|<span data-ttu-id="9e3ac-138">Typ aplikacji</span><span class="sxs-lookup"><span data-stu-id="9e3ac-138">Application type</span></span> |<span data-ttu-id="9e3ac-139">Aplikacja</span><span class="sxs-lookup"><span data-stu-id="9e3ac-139">Application</span></span> |<span data-ttu-id="9e3ac-140">Ruch</span><span class="sxs-lookup"><span data-stu-id="9e3ac-140">Flow</span></span>|
|---|---|---|
|<span data-ttu-id="9e3ac-141">Klient</span><span class="sxs-lookup"><span data-stu-id="9e3ac-141">Client</span></span> | <span data-ttu-id="9e3ac-142">Klient aplikacji lub rozwiązania</span><span class="sxs-lookup"><span data-stu-id="9e3ac-142">Customer app or solution</span></span> | <span data-ttu-id="9e3ac-143">Tej aplikacji (w rzeczywistości jego agent proxy) jest zarejestrowana w dzierżawie usługi Azure AD, w którym znajdują się subskrypcji platformy Azure i konto usługi media.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-143">This app (actually, its proxy) is registered in the Azure AD tenant in which the Azure subscription and the media service account reside.</span></span> <span data-ttu-id="9e3ac-144">Nazwy głównej usługi zarejestrowanych aplikacji otrzymuje się następnie z rolą właściciela lub współautora w dostępu do formantu (IAM) konta usługi media.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-144">The service principal of the registered app is then granted with Owner or Contributor role in the Access Control (IAM) of the media service account.</span></span> <span data-ttu-id="9e3ac-145">Nazwy głównej usługi jest reprezentowana przez klienta, a identyfikator klienta klucz tajny aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-145">The service principal is represented by the app client ID and client secret.</span></span> |
|<span data-ttu-id="9e3ac-146">Dostawcy tożsamości (IDP)</span><span class="sxs-lookup"><span data-stu-id="9e3ac-146">Identity Provider (IDP)</span></span> | <span data-ttu-id="9e3ac-147">Azure AD jako dostawca tożsamości</span><span class="sxs-lookup"><span data-stu-id="9e3ac-147">Azure AD as IDP</span></span> | <span data-ttu-id="9e3ac-148">Nazwy głównej usługi zarejestrowanych aplikacji (identyfikator klienta i klucz tajny klienta) jest uwierzytelniony przez usługę Azure AD jako dostawca tożsamości.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-148">The registered app service principal (client ID and client secret) is authenticated by Azure AD as the IDP.</span></span> <span data-ttu-id="9e3ac-149">To uwierzytelnianie jest wykonywane wewnętrznie i niejawnie.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-149">This authentication is performed internally and implicitly.</span></span> <span data-ttu-id="9e3ac-150">Jak przepływ poświadczeń klienta klient jest uwierzytelniany zamiast użytkownika.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-150">As in client credentials flow, the client is authenticated instead of the user.</span></span> |
|<span data-ttu-id="9e3ac-151">Secure Token Service (STS) / serwera OAuth</span><span class="sxs-lookup"><span data-stu-id="9e3ac-151">Secure Token Service (STS)/OAuth server</span></span> | <span data-ttu-id="9e3ac-152">Azure AD jako Usługa STS</span><span class="sxs-lookup"><span data-stu-id="9e3ac-152">Azure AD as STS</span></span> | <span data-ttu-id="9e3ac-153">Po uwierzytelnieniu przez IDP (lub serwera OAuth względem OAuth 2.0) tokenu dostępu lub tokenu Web JSON (JWT) jest wystawiony przez usługę Azure AD jako serwera STS/OAuth dla dostępu do zasobu warstwy środkowej: w tym przypadku punkt końcowy interfejsu API REST usługi multimediów.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-153">After authentication by the IDP (or OAuth Server in OAuth 2.0 terms), an access token or JSON Web Token (JWT) is issued by Azure AD as STS/OAuth Server for access to the middle-tier resource: in our case, the Media Services REST API endpoint.</span></span> |
|<span data-ttu-id="9e3ac-154">Zasób</span><span class="sxs-lookup"><span data-stu-id="9e3ac-154">Resource</span></span> | <span data-ttu-id="9e3ac-155">Interfejs API REST usługi Media Services</span><span class="sxs-lookup"><span data-stu-id="9e3ac-155">Media Services REST API</span></span> | <span data-ttu-id="9e3ac-156">Każdego wywołania interfejsu API REST usług Media jest upoważniony przez tokenu dostępu, który został wystawiony przez usługę Azure AD jako STS lub serwera uwierzytelniania OAuth.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-156">Every Media Services REST API call is authorized by an access token that is issued by Azure AD as STS or the OAuth server.</span></span> |

<span data-ttu-id="9e3ac-157">Jeżeli uruchomi się przykładowy kod i przechwycić token JWT lub tokenu dostępu, tokenu JWT ma następujące atrybuty:</span><span class="sxs-lookup"><span data-stu-id="9e3ac-157">If you run the sample code and capture a JWT or an access token, the JWT has the following attributes:</span></span>

    aud: "https://rest.media.azure.net",

    iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    iat: 1497146280,

    nbf: 1497146280,
    exp: 1497150180,

    aio: "Y2ZgYDjuy7SptPzO/muf+uRu1B+ZDQA=",

    appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6",

    appidacr: "1",

    idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    oid: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    sub: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    tid: "72f988bf-86f1-41af-91ab-2d7cd011db47",

<span data-ttu-id="9e3ac-158">Poniżej przedstawiono mapowania między atrybutów w token JWT i cztery aplikacje lub usługi w powyższej tabeli:</span><span class="sxs-lookup"><span data-stu-id="9e3ac-158">Here are the mappings between the attributes in the JWT and the four applications or services in the preceding table:</span></span>

|<span data-ttu-id="9e3ac-159">Typ aplikacji</span><span class="sxs-lookup"><span data-stu-id="9e3ac-159">Application type</span></span> |<span data-ttu-id="9e3ac-160">Aplikacja</span><span class="sxs-lookup"><span data-stu-id="9e3ac-160">Application</span></span> |<span data-ttu-id="9e3ac-161">Atrybut JWT</span><span class="sxs-lookup"><span data-stu-id="9e3ac-161">JWT attribute</span></span> |
|---|---|---|
|<span data-ttu-id="9e3ac-162">Klient</span><span class="sxs-lookup"><span data-stu-id="9e3ac-162">Client</span></span> |<span data-ttu-id="9e3ac-163">Klient aplikacji lub rozwiązania</span><span class="sxs-lookup"><span data-stu-id="9e3ac-163">Customer app or solution</span></span> |<span data-ttu-id="9e3ac-164">AppID: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span><span class="sxs-lookup"><span data-stu-id="9e3ac-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span></span> <span data-ttu-id="9e3ac-165">Identyfikator klienta aplikacji zostanie zarejestrowana do usługi Azure AD w następnej sekcji.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-165">The client ID of an application you will register to Azure AD in the next section.</span></span> |
|<span data-ttu-id="9e3ac-166">Dostawcy tożsamości (IDP)</span><span class="sxs-lookup"><span data-stu-id="9e3ac-166">Identity Provider (IDP)</span></span> | <span data-ttu-id="9e3ac-167">Azure AD jako dostawca tożsamości</span><span class="sxs-lookup"><span data-stu-id="9e3ac-167">Azure AD as IDP</span></span> |<span data-ttu-id="9e3ac-168">IDP: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="9e3ac-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span>  <span data-ttu-id="9e3ac-169">Identyfikator GUID to identyfikator Microsoft dzierżawy (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="9e3ac-169">The GUID is the ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="9e3ac-170">Każdy dzierżawca ma własną, unikatowy identyfikator.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-170">Each tenant has its own, unique ID.</span></span> |
|<span data-ttu-id="9e3ac-171">Secure Token Service (STS) / serwera OAuth</span><span class="sxs-lookup"><span data-stu-id="9e3ac-171">Secure Token Service (STS)/OAuth server</span></span> |<span data-ttu-id="9e3ac-172">Azure AD jako Usługa STS</span><span class="sxs-lookup"><span data-stu-id="9e3ac-172">Azure AD as STS</span></span> | <span data-ttu-id="9e3ac-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="9e3ac-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span> <span data-ttu-id="9e3ac-174">Identyfikator GUID to identyfikator Microsoft dzierżawy (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="9e3ac-174">The GUID is the ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> |
|<span data-ttu-id="9e3ac-175">Zasób</span><span class="sxs-lookup"><span data-stu-id="9e3ac-175">Resource</span></span> | <span data-ttu-id="9e3ac-176">Interfejs API REST usługi Media Services</span><span class="sxs-lookup"><span data-stu-id="9e3ac-176">Media Services REST API</span></span> |<span data-ttu-id="9e3ac-177">lub: "https://rest.media.azure.net".</span><span class="sxs-lookup"><span data-stu-id="9e3ac-177">aud: "https://rest.media.azure.net".</span></span> <span data-ttu-id="9e3ac-178">Odbiorca lub odbiorcy tokenu dostępu.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-178">The recipient or audience of the access token.</span></span> |

## <a name="steps-for-setup"></a><span data-ttu-id="9e3ac-179">Kroki instalacji</span><span class="sxs-lookup"><span data-stu-id="9e3ac-179">Steps for setup</span></span>

<span data-ttu-id="9e3ac-180">Do rejestrowania i konfigurowanie aplikacji usługi Azure AD do uwierzytelniania usługi Azure AD i uzyskać token dostępu dla wywołaniem punktu końcowego interfejsu API REST Azure Media Services, wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="9e3ac-180">To register and set up an Azure AD application for Azure AD authentication, and to obtain an access token for calling the Azure Media Services REST API endpoint, complete the following steps:</span></span>

1.  <span data-ttu-id="9e3ac-181">W [klasycznego portalu Azure](http://go.microsoft.com/fwlink/?LinkID=213885), zarejestrować aplikację usługi Azure AD (na przykład wzmediaservice) do dzierżawy usługi Azure AD (na przykład microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="9e3ac-181">In the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), register an Azure AD application (for example, wzmediaservice) to the Azure AD tenant (for example, microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="9e3ac-182">Nie ma znaczenia, czy zarejestrowany jako aplikacji sieci web lub aplikacji natywnej.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-182">It doesn't matter whether you registered as web app or native app.</span></span> <span data-ttu-id="9e3ac-183">Ponadto można wybrać adres URL logowania, a adres URL odpowiedzi (na przykład http://wzmediaservice.com dla obu).</span><span class="sxs-lookup"><span data-stu-id="9e3ac-183">Also, you can choose any sign-on URL and reply URL (for example, http://wzmediaservice.com for both).</span></span>
2. <span data-ttu-id="9e3ac-184">W [klasycznego portalu Azure](http://go.microsoft.com/fwlink/?LinkID=213885), przejdź do **Konfiguruj** kartę aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-184">In the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), go to the **Configure** tab of your application.</span></span> <span data-ttu-id="9e3ac-185">Uwaga **identyfikator klienta**.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-185">Note the **client ID**.</span></span> <span data-ttu-id="9e3ac-186">Następnie w obszarze **klucze**, generowanie **klucz klienta** (klucz tajny klienta).</span><span class="sxs-lookup"><span data-stu-id="9e3ac-186">Then, under **Keys**, generate a **client key** (client secret).</span></span> 

    > [!NOTE] 
    > <span data-ttu-id="9e3ac-187">Zanotuj klucz tajny klienta.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-187">Take note of the client secret.</span></span> <span data-ttu-id="9e3ac-188">Nie można wyświetlić ponownie.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-188">It won't be shown again.</span></span>
    
3.  <span data-ttu-id="9e3ac-189">W [portalu Azure](http://ms.portal.azure.com), przejdź do konta usługi Media Services.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-189">In the [Azure portal](http://ms.portal.azure.com), go to the Media Services account.</span></span> <span data-ttu-id="9e3ac-190">Wybierz **kontroli dostępu** okienka (IAM).</span><span class="sxs-lookup"><span data-stu-id="9e3ac-190">Select the **Access Control** (IAM) pane.</span></span> <span data-ttu-id="9e3ac-191">Dodaj nowy element członkowski ma właściciela lub roli współautora.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-191">Add a new member that has either the Owner or the Contributor role.</span></span> <span data-ttu-id="9e3ac-192">Dla podmiotu zabezpieczeń Wyszukaj nazwę aplikacji, które zarejestrowaną w kroku 1 (w tym przykładzie wzmediaservice).</span><span class="sxs-lookup"><span data-stu-id="9e3ac-192">For the principal, search for the application name you registered in step 1 (in this example, wzmediaservice).</span></span>

## <a name="info-to-collect"></a><span data-ttu-id="9e3ac-193">Informacje do zbierania</span><span class="sxs-lookup"><span data-stu-id="9e3ac-193">Info to collect</span></span>

<span data-ttu-id="9e3ac-194">Aby przygotować REST kodowania, Zbierz następujących punktów danych w celu uwzględnienia w kodzie:</span><span class="sxs-lookup"><span data-stu-id="9e3ac-194">To prepare REST coding, collect the following data points to include in the code:</span></span>

*   <span data-ttu-id="9e3ac-195">Azure AD jako punkt końcowy usługi STS: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-195">Azure AD as an STS endpoint: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span></span> <span data-ttu-id="9e3ac-196">Z tego punktu końcowego tokenu JWT dostępu jest wymagany.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-196">From this endpoint, a JWT access token is requested.</span></span> <span data-ttu-id="9e3ac-197">Oprócz służąc jako dostawca tożsamości, usługi Azure AD służy również jako tokenu Zabezpieczającego.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-197">In addition to serving as an IDP, Azure AD also serves as an STS.</span></span> <span data-ttu-id="9e3ac-198">Usługa Azure AD wystawia token JWT uzyskać dostęp do zasobów (token dostępu).</span><span class="sxs-lookup"><span data-stu-id="9e3ac-198">Azure AD issues a JWT for resource access (an access token).</span></span> <span data-ttu-id="9e3ac-199">JWT token ma różne oświadczenia.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-199">A JWT token has various claims.</span></span>
*   <span data-ttu-id="9e3ac-200">Azure Media interfejsu API REST usług jako zasób lub odbiorców: https://rest.media.azure.net.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-200">Azure Media Services REST API as resource or audience: https://rest.media.azure.net.</span></span>
*   <span data-ttu-id="9e3ac-201">Identyfikator klienta: Zobacz krok 2 w [kroki instalacji](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="9e3ac-201">Client ID: See step 2 in [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="9e3ac-202">Klucz tajny klienta: zobacz krok 2 w [kroki instalacji](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="9e3ac-202">Client secret: See step 2 in  [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="9e3ac-203">Usługi multimediów konto punkt końcowy interfejsu API REST w następującym formacie:</span><span class="sxs-lookup"><span data-stu-id="9e3ac-203">Your Media Services account REST API endpoint in the following format:</span></span>

    <span data-ttu-id="9e3ac-204">https://[media_service_account_name].restv2. [data_center].media.azure.net/API</span><span class="sxs-lookup"><span data-stu-id="9e3ac-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span></span> 

    <span data-ttu-id="9e3ac-205">To jest punkt końcowy, z których wszystkie API REST usługi Media w aplikacji wywołań.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-205">This is the endpoint against which all Media Services REST API calls in your application are made.</span></span> <span data-ttu-id="9e3ac-206">Na przykład https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-206">For example, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span></span>

<span data-ttu-id="9e3ac-207">Następnie możesz umieścić te pięć parametrów w pliku web.config lub app.config do użycia w kodzie.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-207">You can then put these five parameters in your web.config or app.config file, to use in your code.</span></span>

## <a name="sample-code"></a><span data-ttu-id="9e3ac-208">Przykładowy kod</span><span class="sxs-lookup"><span data-stu-id="9e3ac-208">Sample code</span></span>

<span data-ttu-id="9e3ac-209">Można znaleźć w przykładowym kodzie w [Azure AD Authentication Azure Media Services dostępu: zarówno za pośrednictwem interfejsu API REST](https://github.com/willzhan/WAMSRESTSoln).</span><span class="sxs-lookup"><span data-stu-id="9e3ac-209">You can find the sample code in [Azure AD Authentication for Azure Media Services Access: Both via REST API](https://github.com/willzhan/WAMSRESTSoln).</span></span>

<span data-ttu-id="9e3ac-210">Przykładowy kod ma dwie części:</span><span class="sxs-lookup"><span data-stu-id="9e3ac-210">The sample code has two parts:</span></span>

*   <span data-ttu-id="9e3ac-211">Projekt biblioteki DLL, który ma taki kod interfejsu API REST usługi Azure AD uwierzytelniania i autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-211">A DLL library project that has all the REST API code for Azure AD authentication and authorization.</span></span> <span data-ttu-id="9e3ac-212">Ma metodę wywołania interfejsu API REST z punktem końcowym interfejsu API REST usług nośnika przy użyciu tokenu dostępu.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-212">It also has a method for making REST API calls to the Media Services REST API endpoint, with the access token.</span></span>
*   <span data-ttu-id="9e3ac-213">Klient testu konsoli, która inicjuje uwierzytelniania usługi Azure AD i wywołuje innego interfejsu API REST usługi Media.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-213">A console test client, which initiates Azure AD authentication and calls different Media Services REST API.</span></span>

<span data-ttu-id="9e3ac-214">Przykładowy projekt ma trzy funkcje:</span><span class="sxs-lookup"><span data-stu-id="9e3ac-214">The sample project has three features:</span></span>

*   <span data-ttu-id="9e3ac-215">Azure AD uwierzytelnienia za pomocą poświadczeń klienta przyznać za pośrednictwem tylko interfejsu API REST.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-215">Azure AD authentications via the client credentials grant by using only the REST API.</span></span>
*   <span data-ttu-id="9e3ac-216">Azure Media Services dostęp przy użyciu tylko interfejsu API REST.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-216">Azure Media Services access by using only the REST API.</span></span>
*   <span data-ttu-id="9e3ac-217">Azure dostępu do magazynu przy użyciu tylko interfejsu API REST (tak jak utworzyć konto usługi Media Services przy użyciu interfejsu API REST).</span><span class="sxs-lookup"><span data-stu-id="9e3ac-217">Azure Storage access by using only the REST API (as used to create a Media Services account, by using REST API).</span></span>


## <a name="where-is-the-refresh-token"></a><span data-ttu-id="9e3ac-218">Gdzie znajduje się token odświeżania?</span><span class="sxs-lookup"><span data-stu-id="9e3ac-218">Where is the refresh token?</span></span>

<span data-ttu-id="9e3ac-219">Niektóre czytniki może poprosić o: gdzie jest token odświeżania?</span><span class="sxs-lookup"><span data-stu-id="9e3ac-219">Some readers might ask: Where is the refresh token?</span></span> <span data-ttu-id="9e3ac-220">Dlaczego nie używać tokenu odświeżania w tym miejscu?</span><span class="sxs-lookup"><span data-stu-id="9e3ac-220">Why not use a refresh token here?</span></span>

<span data-ttu-id="9e3ac-221">Token odświeżania ma na celu nie Odśwież tokenu dostępu.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-221">The purpose of a refresh token is not to refresh an access token.</span></span> <span data-ttu-id="9e3ac-222">Zamiast tego zaprojektowano go do obejścia interwencji użytkownika końcowego uwierzytelniania lub użytkownika i wciąż uzyskać token prawidłowy dostępu po wygaśnięciu wcześniej tokenu.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-222">Instead, it is designed to bypass end-user authentication or user intervention and still get a valid access token when an earlier token expires.</span></span> <span data-ttu-id="9e3ac-223">Lepsze nazwę token odświeżania może być następująca: "obejścia ponownie-konta w tokenu".</span><span class="sxs-lookup"><span data-stu-id="9e3ac-223">A better name for a refresh token might be something like "bypass user re-sign-in token."</span></span>

<span data-ttu-id="9e3ac-224">Jeśli używasz protokołu OAuth 2.0 autoryzacji przyznać przepływu (nazwa użytkownika i hasło, działając w imieniu użytkownika), token odświeżania pomaga Uzyskaj token dostępu odnowionego bez interwencji użytkownika żądania.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-224">If you use the OAuth 2.0 authorization grant flow (username and password, acting on behalf of a user), a refresh token helps you get a renewed access token without requesting user intervention.</span></span> <span data-ttu-id="9e3ac-225">Jednak OAuth 2.0 poświadczenia klienta umożliwiają przepływ, które opisano w tym artykule, klient działa w swoim imieniu.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-225">However, for the OAuth 2.0 client credentials grant flow that we describe in this article, the client acts on its own behalf.</span></span> <span data-ttu-id="9e3ac-226">Nie wymagają interwencji użytkownika na wszystkich, a serwer autoryzacji nie musi i nie będzie zapewniają token odświeżania.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-226">You don't need user intervention at all, and the authorization server doesn't need to (and won't) give you a refresh token.</span></span> <span data-ttu-id="9e3ac-227">Jeśli debugowania **GetUrlEncodedJWT** metody, można zauważyć, że odpowiedź z punktu końcowego tokena ma tokenu dostępu, ale nie token odświeżania.</span><span class="sxs-lookup"><span data-stu-id="9e3ac-227">If you debug the **GetUrlEncodedJWT** method, you notice that the response from the token endpoint has an access token, but no refresh token.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9e3ac-228">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="9e3ac-228">Next steps</span></span>

<span data-ttu-id="9e3ac-229">Rozpoczynanie pracy z [przekazywanie plików do konta](media-services-dotnet-upload-files.md).</span><span class="sxs-lookup"><span data-stu-id="9e3ac-229">Get started with [uploading files to your account](media-services-dotnet-upload-files.md).</span></span>
