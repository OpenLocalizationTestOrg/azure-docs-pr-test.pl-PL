---
title: "aaaUse tooaccess uwierzytelniania usługi Azure AD Azure Media Services API z POZOSTAŁĄ | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak tooaccess interfejsu API usługi Azure Media Services przy użyciu uwierzytelniania usługi Azure Active Directory przy użyciu REST."
services: media-services
documentationcenter: 
author: willzhan
manager: cfowler
editor: 
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: willzhan;juliako
ms.openlocfilehash: 114f7bdde3a8f5fe6189d712e05b6afdc8a8787a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="use-azure-ad-authentication-tooaccess-hello-azure-media-services-api-with-rest"></a><span data-ttu-id="f3603-103">Użyj usługi Azure AD authentication tooaccess hello Azure Media Services API z POZOSTAŁĄ</span><span class="sxs-lookup"><span data-stu-id="f3603-103">Use Azure AD authentication tooaccess hello Azure Media Services API with REST</span></span>

<span data-ttu-id="f3603-104">Zespół usługi Azure Media Services Hello wydała obsługę uwierzytelniania usługi Azure Active Directory (Azure AD) dla dostępu do usługi Azure Media Services.</span><span class="sxs-lookup"><span data-stu-id="f3603-104">hello Azure Media Services team has released Azure Active Directory (Azure AD) authentication support for Azure Media Services access.</span></span> <span data-ttu-id="f3603-105">On również ogłosiła uwierzytelniania usługi kontroli dostępu platformy Azure toodeprecate planów dla dostępu usługi Media Services.</span><span class="sxs-lookup"><span data-stu-id="f3603-105">It also announced plans toodeprecate Azure Access Control service authentication for Media Services access.</span></span> <span data-ttu-id="f3603-106">Ponieważ każda subskrypcja platformy Azure i co konto usługi Media Services dzierżawy dołączonych tooan usługi Azure AD, obsługę uwierzytelniania usługi Azure AD oferuje wiele korzyści w zakresie zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="f3603-106">Because every Azure subscription, and every Media Services account, is attached tooan Azure AD tenant, Azure AD authentication support brings many security benefits.</span></span> <span data-ttu-id="f3603-107">Szczegółowe informacje dotyczące tej zmiany i migracji (Jeśli używasz hello .NET SDK usługi Media Services dla aplikacji), można znaleźć w następujących hello blogu ogłoszeń i artykuły:</span><span class="sxs-lookup"><span data-stu-id="f3603-107">For details about this change and migration (if you use hello Media Services .NET SDK for your app), see hello following blog posts and articles:</span></span>

- [<span data-ttu-id="f3603-108">Usługa Azure Media Services ogłasza pomocy technicznej dla usługi Azure AD i amortyzacja uwierzytelniania kontroli dostępu</span><span class="sxs-lookup"><span data-stu-id="f3603-108">Azure Media Services announces support for Azure AD and deprecation of Access Control authentication</span></span>](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation)
- [<span data-ttu-id="f3603-109">Interfejs API usług Media Azure dostępu przy użyciu uwierzytelniania usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="f3603-109">Access Azure Media Services API by using Azure AD authentication</span></span>](media-services-use-aad-auth-to-access-ams-api.md)
- [<span data-ttu-id="f3603-110">Korzystanie z usługi Azure AD authentication tooaccess interfejsu API usługi Azure Media Services za pomocą programu Microsoft .NET</span><span class="sxs-lookup"><span data-stu-id="f3603-110">Use Azure AD authentication tooaccess Azure Media Services API by using Microsoft .NET</span></span>](media-services-dotnet-get-started-with-aad.md)
- [<span data-ttu-id="f3603-111">Wprowadzenie do uwierzytelniania usługi Azure AD przy użyciu hello portalu Azure</span><span class="sxs-lookup"><span data-stu-id="f3603-111">Getting started with Azure AD authentication by using hello Azure portal</span></span>](media-services-portal-get-started-with-aad.md)

<span data-ttu-id="f3603-112">Niektórzy klienci muszą toodevelop ich rozwiązań Media Services, w obszarze hello następujące ograniczenia:</span><span class="sxs-lookup"><span data-stu-id="f3603-112">Some customers need toodevelop their Media Services solutions under hello following constraints:</span></span>

*   <span data-ttu-id="f3603-113">Korzystają z języka programowania, który nie jest program Microsoft .NET lub C# lub nie jest hello środowiska uruchomieniowego systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="f3603-113">They use a programming language that is not Microsoft .NET or C#, or hello runtime environment is not Windows.</span></span>
*   <span data-ttu-id="f3603-114">Bibliotek platformy Azure AD, takich jak biblioteki uwierzytelniania usługi Active Directory są niedostępne dla hello język programowania lub nie może służyć do ich środowiska uruchomieniowego.</span><span class="sxs-lookup"><span data-stu-id="f3603-114">Azure AD libraries such as Active Directory Authentication Libraries are not available for hello programming language or can't be used for their runtime environment.</span></span>

<span data-ttu-id="f3603-115">Niektórzy klienci mają opracowanych aplikacji przy użyciu interfejsu API REST dla uwierzytelniania kontroli dostępu i dostępu do usługi Azure Media Services.</span><span class="sxs-lookup"><span data-stu-id="f3603-115">Some customers have developed applications by using REST API for both Access Control authentication and Azure Media Services access.</span></span> <span data-ttu-id="f3603-116">Dla tych klientów należy sposób toouse tylko hello interfejsu API REST dla uwierzytelniania usługi Azure AD i dostęp do kolejnych usługi Azure Media Services.</span><span class="sxs-lookup"><span data-stu-id="f3603-116">For these customers, you need a way toouse only hello REST API for Azure AD authentication and subsequent Azure Media Services access.</span></span> <span data-ttu-id="f3603-117">Należy toonot polegać na żadnym z bibliotek usługi Azure AD hello lub na powitania .NET SDK usługi Media Services.</span><span class="sxs-lookup"><span data-stu-id="f3603-117">You need toonot rely on any of hello Azure AD libraries or on hello Media Services .NET SDK.</span></span> <span data-ttu-id="f3603-118">W tym artykule firma Microsoft opisano rozwiązania i podaj przykładowy kod dla tego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="f3603-118">In this article, we describe a solution and provide sample code for this scenario.</span></span> <span data-ttu-id="f3603-119">Ponieważ wszystkie wywołania interfejsu API REST, z nie zależność od usługi Azure AD jest kod hello lub biblioteki usługi Azure Media Services hello kodu można łatwo zostać przetłumaczone tooany inny język programowania.</span><span class="sxs-lookup"><span data-stu-id="f3603-119">Because hello code is all REST API calls, with no dependency on any Azure AD or Azure Media Services library, hello code can easily be translated tooany other programming language.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f3603-120">Obecnie usługa Media Services obsługuje hello Azure kontroli dostępu usług uwierzytelniania modelu.</span><span class="sxs-lookup"><span data-stu-id="f3603-120">Currently, Media Services supports hello Azure Access Control services authentication model.</span></span> <span data-ttu-id="f3603-121">Jednak kontroli dostępu uwierzytelniania zostaną wycofane 1 czerwca 2018.</span><span class="sxs-lookup"><span data-stu-id="f3603-121">However, Access Control authentication will be deprecated June 1, 2018.</span></span> <span data-ttu-id="f3603-122">Zaleca się, jak najszybciej migracji model uwierzytelniania toohello usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f3603-122">We recommend that you migrate toohello Azure AD authentication model as soon as possible.</span></span>


## <a name="design"></a><span data-ttu-id="f3603-123">Projektowanie</span><span class="sxs-lookup"><span data-stu-id="f3603-123">Design</span></span>

<span data-ttu-id="f3603-124">W tym artykule używamy hello następującego projektu uwierzytelniania i autoryzacji:</span><span class="sxs-lookup"><span data-stu-id="f3603-124">In this article, we use hello following authentication and authorization design:</span></span>

*  <span data-ttu-id="f3603-125">Protokół HCAP: OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="f3603-125">Authorization protocol: OAuth 2.0.</span></span> <span data-ttu-id="f3603-126">OAuth 2.0 to standard zabezpieczeń sieci web, który obejmuje zarówno uwierzytelniania i autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="f3603-126">OAuth 2.0 is a web security standard that covers both authentication and authorization.</span></span> <span data-ttu-id="f3603-127">Jest on obsługiwany przez Google, Microsoft, Facebook i PayPal.</span><span class="sxs-lookup"><span data-stu-id="f3603-127">It is supported by Google, Microsoft, Facebook, and PayPal.</span></span> <span data-ttu-id="f3603-128">Został on ratyfikacji października 2012.</span><span class="sxs-lookup"><span data-stu-id="f3603-128">It was ratified October 2012.</span></span> <span data-ttu-id="f3603-129">Firma Microsoft obsługuje mocno OAuth 2.0 i OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="f3603-129">Microsoft firmly supports OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="f3603-130">Obsługiwane są zarówno z tymi standardami w wielu usługach i bibliotek klienckich, włącznie z usługi Azure Active Directory, Otwórz interfejs sieci Web dla platformy .NET (OWIN) Katana i bibliotek usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f3603-130">Both of these standards are supported in multiple services and client libraries, including Azure Active Directory, Open Web Interface for .NET (OWIN) Katana, and Azure AD libraries.</span></span>
*  <span data-ttu-id="f3603-131">Przyznaj typu: typ przyznania poświadczeń klienta.</span><span class="sxs-lookup"><span data-stu-id="f3603-131">Grant type: Client credentials grant type.</span></span> <span data-ttu-id="f3603-132">Poświadczenia klienta jest jednym z typów przydziałów cztery hello w OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="f3603-132">Client credentials is one of hello four grant types in OAuth 2.0.</span></span> <span data-ttu-id="f3603-133">Często jest używane dla dostępu do usługi Azure AD Microsoft Graph API.</span><span class="sxs-lookup"><span data-stu-id="f3603-133">It's often used for Azure AD Microsoft Graph API access.</span></span>
*  <span data-ttu-id="f3603-134">Tryb uwierzytelniania: nazwy głównej usługi.</span><span class="sxs-lookup"><span data-stu-id="f3603-134">Authentication mode: Service principal.</span></span> <span data-ttu-id="f3603-135">Witaj innych tryb uwierzytelniania jest użytkownika lub uwierzytelnianie interakcyjne.</span><span class="sxs-lookup"><span data-stu-id="f3603-135">hello other authentication mode is user or interactive authentication.</span></span>

<span data-ttu-id="f3603-136">Łącznie cztery aplikacje lub usługi są zaangażowane w przepływ uwierzytelniania i autoryzacji hello Azure AD dla usługi Media Services.</span><span class="sxs-lookup"><span data-stu-id="f3603-136">A total of four applications or services are involved in hello Azure AD authentication and authorization flow for using Media Services.</span></span> <span data-ttu-id="f3603-137">w hello w poniższej tabeli opisano Hello aplikacji i usług oraz przepływu hello:</span><span class="sxs-lookup"><span data-stu-id="f3603-137">hello applications and services, and hello flow, are described in hello following table:</span></span>

|<span data-ttu-id="f3603-138">Typ aplikacji</span><span class="sxs-lookup"><span data-stu-id="f3603-138">Application type</span></span> |<span data-ttu-id="f3603-139">Aplikacja</span><span class="sxs-lookup"><span data-stu-id="f3603-139">Application</span></span> |<span data-ttu-id="f3603-140">Ruch</span><span class="sxs-lookup"><span data-stu-id="f3603-140">Flow</span></span>|
|---|---|---|
|<span data-ttu-id="f3603-141">Klient</span><span class="sxs-lookup"><span data-stu-id="f3603-141">Client</span></span> | <span data-ttu-id="f3603-142">Klient aplikacji lub rozwiązania</span><span class="sxs-lookup"><span data-stu-id="f3603-142">Customer app or solution</span></span> | <span data-ttu-id="f3603-143">Ta aplikacja (w rzeczywistości jego agent proxy) jest zarejestrowana w hello dzierżawy usługi Azure AD, w których hello Azure media subskrypcji i hello znajdują się konta usługi.</span><span class="sxs-lookup"><span data-stu-id="f3603-143">This app (actually, its proxy) is registered in hello Azure AD tenant in which hello Azure subscription and hello media service account reside.</span></span> <span data-ttu-id="f3603-144">Witaj nazwy głównej usługi aplikacji hello zarejestrowany następnie udzielany jest właścicielem lub współautorem roli w hello kontroli dostępu (IAM) konta usługi media hello.</span><span class="sxs-lookup"><span data-stu-id="f3603-144">hello service principal of hello registered app is then granted with Owner or Contributor role in hello Access Control (IAM) of hello media service account.</span></span> <span data-ttu-id="f3603-145">nazwy głównej usługi Hello jest reprezentowana przez powitania klienta identyfikator i klienta klucz tajny aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f3603-145">hello service principal is represented by hello app client ID and client secret.</span></span> |
|<span data-ttu-id="f3603-146">Dostawcy tożsamości (IDP)</span><span class="sxs-lookup"><span data-stu-id="f3603-146">Identity Provider (IDP)</span></span> | <span data-ttu-id="f3603-147">Azure AD jako dostawca tożsamości</span><span class="sxs-lookup"><span data-stu-id="f3603-147">Azure AD as IDP</span></span> | <span data-ttu-id="f3603-148">jednostki usługi zarejestrowanych aplikacji Hello (identyfikator klienta i klucz tajny klienta) jest uwierzytelniony przez usługę Azure AD jako dostawca tożsamości hello.</span><span class="sxs-lookup"><span data-stu-id="f3603-148">hello registered app service principal (client ID and client secret) is authenticated by Azure AD as hello IDP.</span></span> <span data-ttu-id="f3603-149">To uwierzytelnianie jest wykonywane wewnętrznie i niejawnie.</span><span class="sxs-lookup"><span data-stu-id="f3603-149">This authentication is performed internally and implicitly.</span></span> <span data-ttu-id="f3603-150">Jak przepływ poświadczeń klienta powitania klienta jest uwierzytelniany zamiast hello użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f3603-150">As in client credentials flow, hello client is authenticated instead of hello user.</span></span> |
|<span data-ttu-id="f3603-151">Secure Token Service (STS) / serwera OAuth</span><span class="sxs-lookup"><span data-stu-id="f3603-151">Secure Token Service (STS)/OAuth server</span></span> | <span data-ttu-id="f3603-152">Azure AD jako Usługa STS</span><span class="sxs-lookup"><span data-stu-id="f3603-152">Azure AD as STS</span></span> | <span data-ttu-id="f3603-153">Po uwierzytelnieniu przez hello IDP (lub serwera OAuth względem OAuth 2.0) tokenu dostępu lub tokenu Web JSON (JWT) jest wystawiony przez usługę Azure AD jako serwera STS/OAuth dla zasobu warstwy środkowej toohello dostępu: w tym przypadku hello punkt końcowy interfejsu API REST usługi multimediów.</span><span class="sxs-lookup"><span data-stu-id="f3603-153">After authentication by hello IDP (or OAuth Server in OAuth 2.0 terms), an access token or JSON Web Token (JWT) is issued by Azure AD as STS/OAuth Server for access toohello middle-tier resource: in our case, hello Media Services REST API endpoint.</span></span> |
|<span data-ttu-id="f3603-154">Zasób</span><span class="sxs-lookup"><span data-stu-id="f3603-154">Resource</span></span> | <span data-ttu-id="f3603-155">Interfejs API REST usługi Media Services</span><span class="sxs-lookup"><span data-stu-id="f3603-155">Media Services REST API</span></span> | <span data-ttu-id="f3603-156">Każdego wywołania interfejsu API REST usług Media jest upoważniony przez tokenu dostępu, który został wystawiony przez usługę Azure AD jako STS lub powitania serwera OAuth.</span><span class="sxs-lookup"><span data-stu-id="f3603-156">Every Media Services REST API call is authorized by an access token that is issued by Azure AD as STS or hello OAuth server.</span></span> |

<span data-ttu-id="f3603-157">Uruchom hello przykładowy kod i przechwycić token JWT lub tokenu dostępu, hello JWT zawiera hello następujące atrybuty:</span><span class="sxs-lookup"><span data-stu-id="f3603-157">If you run hello sample code and capture a JWT or an access token, hello JWT has hello following attributes:</span></span>

    aud: "https://rest.media.azure.net",

    iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    iat: 1497146280,

    nbf: 1497146280,
    exp: 1497150180,

    aio: "Y2ZgYDjuy7SptPzO/muf+uRu1B+ZDQA=",

    appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6",

    appidacr: "1",

    idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    oid: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    sub: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    tid: "72f988bf-86f1-41af-91ab-2d7cd011db47",

<span data-ttu-id="f3603-158">Poniżej przedstawiono hello mapowania między hello atrybutów w hello JWT i hello cztery aplikacje lub usługi w powyższej tabeli hello:</span><span class="sxs-lookup"><span data-stu-id="f3603-158">Here are hello mappings between hello attributes in hello JWT and hello four applications or services in hello preceding table:</span></span>

|<span data-ttu-id="f3603-159">Typ aplikacji</span><span class="sxs-lookup"><span data-stu-id="f3603-159">Application type</span></span> |<span data-ttu-id="f3603-160">Aplikacja</span><span class="sxs-lookup"><span data-stu-id="f3603-160">Application</span></span> |<span data-ttu-id="f3603-161">Atrybut JWT</span><span class="sxs-lookup"><span data-stu-id="f3603-161">JWT attribute</span></span> |
|---|---|---|
|<span data-ttu-id="f3603-162">Klient</span><span class="sxs-lookup"><span data-stu-id="f3603-162">Client</span></span> |<span data-ttu-id="f3603-163">Klient aplikacji lub rozwiązania</span><span class="sxs-lookup"><span data-stu-id="f3603-163">Customer app or solution</span></span> |<span data-ttu-id="f3603-164">AppID: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span><span class="sxs-lookup"><span data-stu-id="f3603-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span></span> <span data-ttu-id="f3603-165">Identyfikator klienta Hello aplikacji zostanie zarejestrowana tooAzure AD w następnej sekcji hello.</span><span class="sxs-lookup"><span data-stu-id="f3603-165">hello client ID of an application you will register tooAzure AD in hello next section.</span></span> |
|<span data-ttu-id="f3603-166">Dostawcy tożsamości (IDP)</span><span class="sxs-lookup"><span data-stu-id="f3603-166">Identity Provider (IDP)</span></span> | <span data-ttu-id="f3603-167">Azure AD jako dostawca tożsamości</span><span class="sxs-lookup"><span data-stu-id="f3603-167">Azure AD as IDP</span></span> |<span data-ttu-id="f3603-168">IDP: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="f3603-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span>  <span data-ttu-id="f3603-169">Witaj identyfikator GUID jest dzierżawy identyfikator Microsoft hello (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="f3603-169">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="f3603-170">Każdy dzierżawca ma własną, unikatowy identyfikator.</span><span class="sxs-lookup"><span data-stu-id="f3603-170">Each tenant has its own, unique ID.</span></span> |
|<span data-ttu-id="f3603-171">Secure Token Service (STS) / serwera OAuth</span><span class="sxs-lookup"><span data-stu-id="f3603-171">Secure Token Service (STS)/OAuth server</span></span> |<span data-ttu-id="f3603-172">Azure AD jako Usługa STS</span><span class="sxs-lookup"><span data-stu-id="f3603-172">Azure AD as STS</span></span> | <span data-ttu-id="f3603-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="f3603-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span> <span data-ttu-id="f3603-174">Witaj identyfikator GUID jest dzierżawy identyfikator Microsoft hello (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="f3603-174">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> |
|<span data-ttu-id="f3603-175">Zasób</span><span class="sxs-lookup"><span data-stu-id="f3603-175">Resource</span></span> | <span data-ttu-id="f3603-176">Interfejs API REST usługi Media Services</span><span class="sxs-lookup"><span data-stu-id="f3603-176">Media Services REST API</span></span> |<span data-ttu-id="f3603-177">lub: "https://rest.media.azure.net".</span><span class="sxs-lookup"><span data-stu-id="f3603-177">aud: "https://rest.media.azure.net".</span></span> <span data-ttu-id="f3603-178">Adresat Hello lub odbiorców hello tokenu dostępu.</span><span class="sxs-lookup"><span data-stu-id="f3603-178">hello recipient or audience of hello access token.</span></span> |

## <a name="steps-for-setup"></a><span data-ttu-id="f3603-179">Kroki instalacji</span><span class="sxs-lookup"><span data-stu-id="f3603-179">Steps for setup</span></span>

<span data-ttu-id="f3603-180">tooregister i konfigurowanie aplikacji usługi Azure AD do uwierzytelniania usługi Azure AD i tooobtain token dostępu dla wywołaniem punktu końcowego z interfejsu API REST usługi Azure Media hello, pełną hello następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="f3603-180">tooregister and set up an Azure AD application for Azure AD authentication, and tooobtain an access token for calling hello Azure Media Services REST API endpoint, complete hello following steps:</span></span>

1.  <span data-ttu-id="f3603-181">W hello [klasycznego portalu Azure](http://go.microsoft.com/fwlink/?LinkID=213885), zarejestruj dzierżawy usługi Azure AD toohello aplikacji (na przykład wzmediaservice) usługi Azure AD (na przykład microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="f3603-181">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), register an Azure AD application (for example, wzmediaservice) toohello Azure AD tenant (for example, microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="f3603-182">Nie ma znaczenia, czy zarejestrowany jako aplikacji sieci web lub aplikacji natywnej.</span><span class="sxs-lookup"><span data-stu-id="f3603-182">It doesn't matter whether you registered as web app or native app.</span></span> <span data-ttu-id="f3603-183">Ponadto można wybrać adres URL logowania, a adres URL odpowiedzi (na przykład http://wzmediaservice.com dla obu).</span><span class="sxs-lookup"><span data-stu-id="f3603-183">Also, you can choose any sign-on URL and reply URL (for example, http://wzmediaservice.com for both).</span></span>
2. <span data-ttu-id="f3603-184">W hello [klasycznego portalu Azure](http://go.microsoft.com/fwlink/?LinkID=213885), przejdź toohello **Konfiguruj** kartę aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f3603-184">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), go toohello **Configure** tab of your application.</span></span> <span data-ttu-id="f3603-185">Uwaga hello **identyfikator klienta**.</span><span class="sxs-lookup"><span data-stu-id="f3603-185">Note hello **client ID**.</span></span> <span data-ttu-id="f3603-186">Następnie w obszarze **klucze**, generowanie **klucz klienta** (klucz tajny klienta).</span><span class="sxs-lookup"><span data-stu-id="f3603-186">Then, under **Keys**, generate a **client key** (client secret).</span></span> 

    > [!NOTE] 
    > <span data-ttu-id="f3603-187">Zanotuj klucz tajny powitania klienta.</span><span class="sxs-lookup"><span data-stu-id="f3603-187">Take note of hello client secret.</span></span> <span data-ttu-id="f3603-188">Nie można wyświetlić ponownie.</span><span class="sxs-lookup"><span data-stu-id="f3603-188">It won't be shown again.</span></span>
    
3.  <span data-ttu-id="f3603-189">W hello [portalu Azure](http://ms.portal.azure.com), przejdź do konta usługi Media Services toohello.</span><span class="sxs-lookup"><span data-stu-id="f3603-189">In hello [Azure portal](http://ms.portal.azure.com), go toohello Media Services account.</span></span> <span data-ttu-id="f3603-190">Wybierz hello **kontroli dostępu** okienka (IAM).</span><span class="sxs-lookup"><span data-stu-id="f3603-190">Select hello **Access Control** (IAM) pane.</span></span> <span data-ttu-id="f3603-191">Dodaj nowy element członkowski ma hello właściciela lub Rola współautora hello.</span><span class="sxs-lookup"><span data-stu-id="f3603-191">Add a new member that has either hello Owner or hello Contributor role.</span></span> <span data-ttu-id="f3603-192">Dla podmiotu hello wyszukiwania dla nazwy aplikacji hello zarejestrowaną w kroku 1 (w tym przykładzie wzmediaservice).</span><span class="sxs-lookup"><span data-stu-id="f3603-192">For hello principal, search for hello application name you registered in step 1 (in this example, wzmediaservice).</span></span>

## <a name="info-toocollect"></a><span data-ttu-id="f3603-193">Informacje o toocollect</span><span class="sxs-lookup"><span data-stu-id="f3603-193">Info toocollect</span></span>

<span data-ttu-id="f3603-194">tooprepare REST kodowania, zbieranie powitania po tooinclude punktów danych w kodzie hello:</span><span class="sxs-lookup"><span data-stu-id="f3603-194">tooprepare REST coding, collect hello following data points tooinclude in hello code:</span></span>

*   <span data-ttu-id="f3603-195">Azure AD jako punkt końcowy usługi STS: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span><span class="sxs-lookup"><span data-stu-id="f3603-195">Azure AD as an STS endpoint: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span></span> <span data-ttu-id="f3603-196">Z tego punktu końcowego tokenu JWT dostępu jest wymagany.</span><span class="sxs-lookup"><span data-stu-id="f3603-196">From this endpoint, a JWT access token is requested.</span></span> <span data-ttu-id="f3603-197">Ponadto tooserving jako dostawca tożsamości, usługi Azure AD służy również jako tokenu Zabezpieczającego.</span><span class="sxs-lookup"><span data-stu-id="f3603-197">In addition tooserving as an IDP, Azure AD also serves as an STS.</span></span> <span data-ttu-id="f3603-198">Usługa Azure AD wystawia token JWT uzyskać dostęp do zasobów (token dostępu).</span><span class="sxs-lookup"><span data-stu-id="f3603-198">Azure AD issues a JWT for resource access (an access token).</span></span> <span data-ttu-id="f3603-199">JWT token ma różne oświadczenia.</span><span class="sxs-lookup"><span data-stu-id="f3603-199">A JWT token has various claims.</span></span>
*   <span data-ttu-id="f3603-200">Azure Media interfejsu API REST usług jako zasób lub odbiorców: https://rest.media.azure.net.</span><span class="sxs-lookup"><span data-stu-id="f3603-200">Azure Media Services REST API as resource or audience: https://rest.media.azure.net.</span></span>
*   <span data-ttu-id="f3603-201">Identyfikator klienta: Zobacz krok 2 w [kroki instalacji](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="f3603-201">Client ID: See step 2 in [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="f3603-202">Klucz tajny klienta: zobacz krok 2 w [kroki instalacji](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="f3603-202">Client secret: See step 2 in  [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="f3603-203">Usługa Media Services konto interfejsu API REST punktu końcowego w hello następującego formatu:</span><span class="sxs-lookup"><span data-stu-id="f3603-203">Your Media Services account REST API endpoint in hello following format:</span></span>

    <span data-ttu-id="f3603-204">https://[media_service_account_name].restv2. [data_center].media.azure.net/API</span><span class="sxs-lookup"><span data-stu-id="f3603-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span></span> 

    <span data-ttu-id="f3603-205">Jest to hello punktu końcowego, z których wszystkie API REST usługi Media w aplikacji wywołań.</span><span class="sxs-lookup"><span data-stu-id="f3603-205">This is hello endpoint against which all Media Services REST API calls in your application are made.</span></span> <span data-ttu-id="f3603-206">Na przykład https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span><span class="sxs-lookup"><span data-stu-id="f3603-206">For example, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span></span>

<span data-ttu-id="f3603-207">Następnie możesz umieścić te pięć parametrów w pliku web.config lub app.config toouse w kodzie.</span><span class="sxs-lookup"><span data-stu-id="f3603-207">You can then put these five parameters in your web.config or app.config file, toouse in your code.</span></span>

## <a name="sample-code"></a><span data-ttu-id="f3603-208">Przykładowy kod</span><span class="sxs-lookup"><span data-stu-id="f3603-208">Sample code</span></span>

<span data-ttu-id="f3603-209">Można znaleźć hello przykładowy kod w [Azure AD Authentication Azure Media Services dostępu: zarówno za pośrednictwem interfejsu API REST](https://github.com/willzhan/WAMSRESTSoln).</span><span class="sxs-lookup"><span data-stu-id="f3603-209">You can find hello sample code in [Azure AD Authentication for Azure Media Services Access: Both via REST API](https://github.com/willzhan/WAMSRESTSoln).</span></span>

<span data-ttu-id="f3603-210">Witaj przykładowy kod ma dwie części:</span><span class="sxs-lookup"><span data-stu-id="f3603-210">hello sample code has two parts:</span></span>

*   <span data-ttu-id="f3603-211">Projekt biblioteki DLL, który ma wszystkie hello kodu interfejsu API REST usługi Azure AD uwierzytelniania i autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="f3603-211">A DLL library project that has all hello REST API code for Azure AD authentication and authorization.</span></span> <span data-ttu-id="f3603-212">Ma również metody do tworzenia interfejsu API REST wywołania toohello interfejsu API REST usług Media punktu końcowego, przy hello tokenu dostępu.</span><span class="sxs-lookup"><span data-stu-id="f3603-212">It also has a method for making REST API calls toohello Media Services REST API endpoint, with hello access token.</span></span>
*   <span data-ttu-id="f3603-213">Klient testu konsoli, która inicjuje uwierzytelniania usługi Azure AD i wywołuje innego interfejsu API REST usługi Media.</span><span class="sxs-lookup"><span data-stu-id="f3603-213">A console test client, which initiates Azure AD authentication and calls different Media Services REST API.</span></span>

<span data-ttu-id="f3603-214">Witaj przykładowy projekt ma trzy funkcje:</span><span class="sxs-lookup"><span data-stu-id="f3603-214">hello sample project has three features:</span></span>

*   <span data-ttu-id="f3603-215">Azure AD uwierzytelnienia za pomocą poświadczeń klienta hello przyznać za pośrednictwem hello interfejsu API REST.</span><span class="sxs-lookup"><span data-stu-id="f3603-215">Azure AD authentications via hello client credentials grant by using only hello REST API.</span></span>
*   <span data-ttu-id="f3603-216">Azure Media Services dostęp przy użyciu hello interfejsu API REST.</span><span class="sxs-lookup"><span data-stu-id="f3603-216">Azure Media Services access by using only hello REST API.</span></span>
*   <span data-ttu-id="f3603-217">Dostępu do magazynu Azure za pomocą tylko hello interfejsu API REST (jako toocreate używane konto usługi Media Services przy użyciu interfejsu API REST).</span><span class="sxs-lookup"><span data-stu-id="f3603-217">Azure Storage access by using only hello REST API (as used toocreate a Media Services account, by using REST API).</span></span>


## <a name="where-is-hello-refresh-token"></a><span data-ttu-id="f3603-218">Gdzie znajduje się token odświeżania hello?</span><span class="sxs-lookup"><span data-stu-id="f3603-218">Where is hello refresh token?</span></span>

<span data-ttu-id="f3603-219">Niektóre czytniki może poprosić o: gdzie jest token odświeżania hello?</span><span class="sxs-lookup"><span data-stu-id="f3603-219">Some readers might ask: Where is hello refresh token?</span></span> <span data-ttu-id="f3603-220">Dlaczego nie używać tokenu odświeżania w tym miejscu?</span><span class="sxs-lookup"><span data-stu-id="f3603-220">Why not use a refresh token here?</span></span>

<span data-ttu-id="f3603-221">Celem Hello token odświeżania nie jest toorefresh tokenu dostępu.</span><span class="sxs-lookup"><span data-stu-id="f3603-221">hello purpose of a refresh token is not toorefresh an access token.</span></span> <span data-ttu-id="f3603-222">Zamiast tego jest zaprojektowana toobypass interwencji użytkownika końcowego uwierzytelniania lub użytkownika i nadal uzyskać token prawidłowy dostępu po wygaśnięciu tokenu wcześniej.</span><span class="sxs-lookup"><span data-stu-id="f3603-222">Instead, it is designed toobypass end-user authentication or user intervention and still get a valid access token when an earlier token expires.</span></span> <span data-ttu-id="f3603-223">Lepsze nazwę token odświeżania może być następująca: "obejścia ponownie-konta w tokenu".</span><span class="sxs-lookup"><span data-stu-id="f3603-223">A better name for a refresh token might be something like "bypass user re-sign-in token."</span></span>

<span data-ttu-id="f3603-224">Jeśli używasz hello OAuth 2.0 autoryzacji przyznać przepływu (nazwa użytkownika i hasło, działając w imieniu użytkownika), token odświeżania pomaga Uzyskaj token dostępu odnowionego bez interwencji użytkownika żądania.</span><span class="sxs-lookup"><span data-stu-id="f3603-224">If you use hello OAuth 2.0 authorization grant flow (username and password, acting on behalf of a user), a refresh token helps you get a renewed access token without requesting user intervention.</span></span> <span data-ttu-id="f3603-225">Jednak hello OAuth 2.0 poświadczenia klienta umożliwiają przepływ, które opisano w tym artykule, powitania klienta działa w swoim imieniu.</span><span class="sxs-lookup"><span data-stu-id="f3603-225">However, for hello OAuth 2.0 client credentials grant flow that we describe in this article, hello client acts on its own behalf.</span></span> <span data-ttu-id="f3603-226">Nie wymagają interwencji użytkownika na wszystkich i powitania serwera autoryzacji nie wymaga zbyt i nie będzie zapewniają token odświeżania.</span><span class="sxs-lookup"><span data-stu-id="f3603-226">You don't need user intervention at all, and hello authorization server doesn't need too(and won't) give you a refresh token.</span></span> <span data-ttu-id="f3603-227">Jeśli debugowanie hello **GetUrlEncodedJWT** metody, można zauważyć, że hello odpowiedź z punktu końcowego tokena hello ma tokenu dostępu, ale nie token odświeżania.</span><span class="sxs-lookup"><span data-stu-id="f3603-227">If you debug hello **GetUrlEncodedJWT** method, you notice that hello response from hello token endpoint has an access token, but no refresh token.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f3603-228">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="f3603-228">Next steps</span></span>

<span data-ttu-id="f3603-229">Rozpoczynanie pracy z [przekazywania plików konta tooyour](media-services-dotnet-upload-files.md).</span><span class="sxs-lookup"><span data-stu-id="f3603-229">Get started with [uploading files tooyour account](media-services-dotnet-upload-files.md).</span></span>
