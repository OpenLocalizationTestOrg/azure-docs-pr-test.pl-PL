---
title: "przy użyciu zasad autoryzacji klucza zawartości aaaConfigure hello portalu Azure | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak tooconfigure zasady autoryzacji klucza zawartości."
services: media-services
documentationcenter: 
author: juliako
manager: cfowler
editor: 
ms.assetid: ee82a3fa-c34b-48f2-a108-8ba321f1691e
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/09/2017
ms.author: juliako
ms.openlocfilehash: 157fb691b7f71f4889228817e1dc64555e327d48
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="configure-content-key-authorization-policy"></a><span data-ttu-id="a1106-103">Skonfiguruj zasady autoryzacji klucza zawartości</span><span class="sxs-lookup"><span data-stu-id="a1106-103">Configure Content Key Authorization Policy</span></span>
[!INCLUDE [media-services-selector-content-key-auth-policy](../../includes/media-services-selector-content-key-auth-policy.md)]

## <a name="overview"></a><span data-ttu-id="a1106-104">Omówienie</span><span class="sxs-lookup"><span data-stu-id="a1106-104">Overview</span></span>
<span data-ttu-id="a1106-105">Microsoft Azure Media Services umożliwia toodeliver MPEG-DASH, Smooth Streaming i strumieni HTTP-Live-Streaming (HLS) chronionych przy Standard AES (Advanced Encryption) (przy użyciu kluczy szyfrowania 128-bitowego) lub [Microsoft PlayReady DRM](https://www.microsoft.com/playready/overview/).</span><span class="sxs-lookup"><span data-stu-id="a1106-105">Microsoft Azure Media Services enables you toodeliver MPEG-DASH, Smooth Streaming, and HTTP-Live-Streaming (HLS) streams protected with Advanced Encryption Standard (AES) (using 128-bit encryption keys) or [Microsoft PlayReady DRM](https://www.microsoft.com/playready/overview/).</span></span> <span data-ttu-id="a1106-106">AMS umożliwia również należy toodeliver strumienie DASH korzystających zaszyfrowane za pomocą Widevine DRM.</span><span class="sxs-lookup"><span data-stu-id="a1106-106">AMS also enables you toodeliver DASH streams encrypted with Widevine DRM.</span></span> <span data-ttu-id="a1106-107">Zarówno PlayReady i Widevine są szyfrowane na powitania specyfikacją Common Encryption (ISO/IEC CENC 23001-7).</span><span class="sxs-lookup"><span data-stu-id="a1106-107">Both PlayReady and Widevine are encrypted per hello Common Encryption (ISO/IEC 23001-7 CENC) specification.</span></span>

<span data-ttu-id="a1106-108">Media Services udostępnia również **usługi dostarczania licencji/klucz** z których klienci mogą uzyskać kluczy AES lub tooplay licencji PlayReady/Widevine hello zaszyfrowaną zawartość.</span><span class="sxs-lookup"><span data-stu-id="a1106-108">Media Services also provides a **Key/License Delivery Service** from which clients can obtain AES keys or PlayReady/Widevine licenses tooplay hello encrypted content.</span></span>

<span data-ttu-id="a1106-109">W tym temacie przedstawiono sposób toouse hello zasady autoryzacji klucza zawartości hello tooconfigure portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="a1106-109">This topic shows how toouse hello Azure portal tooconfigure hello content key authorization policy.</span></span> <span data-ttu-id="a1106-110">później można użyć klucza Hello toodynamically szyfrowania zawartości.</span><span class="sxs-lookup"><span data-stu-id="a1106-110">hello key can later be used toodynamically encrypt your content.</span></span> <span data-ttu-id="a1106-111">Należy pamiętać, że obecnie można zaszyfrować hello następujących formatów przesyłania strumieniowego: HLS, MPEG DASH i Smooth Streaming.</span><span class="sxs-lookup"><span data-stu-id="a1106-111">Note that currently you can encrypt hello following streaming formats: HLS, MPEG DASH, and Smooth Streaming.</span></span> <span data-ttu-id="a1106-112">Nie można zaszyfrować pobierania progresywnego.</span><span class="sxs-lookup"><span data-stu-id="a1106-112">You cannot encrypt progressive downloads.</span></span>

<span data-ttu-id="a1106-113">Gdy odtwarzacza zażąda strumienia, który jest ustawiony toobe dynamicznie zaszyfrowany, Media Services używa hello skonfigurowane klucza toodynamically szyfrowania zawartości przy użyciu szyfrowania AES lub DRM.</span><span class="sxs-lookup"><span data-stu-id="a1106-113">When a player requests a stream that is set toobe dynamically encrypted, Media Services uses hello configured key toodynamically encrypt your content using AES or DRM encryption.</span></span> <span data-ttu-id="a1106-114">toodecrypt hello strumienia, hello odtwarzacza zażąda hello klucza z usługi dostarczania klucza hello.</span><span class="sxs-lookup"><span data-stu-id="a1106-114">toodecrypt hello stream, hello player will request hello key from hello key delivery service.</span></span> <span data-ttu-id="a1106-115">toodecide czy hello użytkownik jest autoryzowany tooget hello klucza, usługi hello ocenia zasady autoryzacji hello określonych hello klucza.</span><span class="sxs-lookup"><span data-stu-id="a1106-115">toodecide whether or not hello user is authorized tooget hello key, hello service evaluates hello authorization policies that you specified for hello key.</span></span>

<span data-ttu-id="a1106-116">Jeśli plan toohave wiele kluczy zawartości lub mają toospecify **usługi dostarczania licencji/klucz** adres URL innych niż hello usługi dostarczania klucza usługi Media Services, użyj .NET SDK usługi Media Services lub interfejsów API REST.</span><span class="sxs-lookup"><span data-stu-id="a1106-116">If you plan toohave multiple content keys or want toospecify a **Key/License Delivery Service** URL other than hello Media Services key delivery service, use Media Services .NET SDK or REST APIs.</span></span>

[<span data-ttu-id="a1106-117">Skonfiguruj zasady autoryzacji klucza zawartości przy użyciu zestawu .NET SDK usługi multimediów</span><span class="sxs-lookup"><span data-stu-id="a1106-117">Configure Content Key Authorization Policy using Media Services .NET SDK</span></span>](media-services-dotnet-configure-content-key-auth-policy.md)

[<span data-ttu-id="a1106-118">Skonfiguruj zasady autoryzacji klucza zawartości przy użyciu interfejsu API REST usługi multimediów</span><span class="sxs-lookup"><span data-stu-id="a1106-118">Configure Content Key Authorization Policy using Media Services REST API</span></span>](media-services-rest-configure-content-key-auth-policy.md)

### <a name="some-considerations-apply"></a><span data-ttu-id="a1106-119">Zagadnienia do rozważenia:</span><span class="sxs-lookup"><span data-stu-id="a1106-119">Some considerations apply:</span></span>
* <span data-ttu-id="a1106-120">Po utworzeniu konta usługi AMS **domyślne** punktu końcowego przesyłania strumieniowego w brzmieniu konta tooyour hello **zatrzymane** stanu.</span><span class="sxs-lookup"><span data-stu-id="a1106-120">When your AMS account is created a **default** streaming endpoint is added  tooyour account in hello **Stopped** state.</span></span> <span data-ttu-id="a1106-121">toostart przesyłania strumieniowego zawartości i podejmij korzyści z dynamicznego tworzenia pakietów i dynamicznego szyfrowania, punkt końcowy przesyłania strumieniowego ma toobe w hello **systemem** stanu.</span><span class="sxs-lookup"><span data-stu-id="a1106-121">toostart streaming your content and take advantage of dynamic packaging and dynamic encryption, your streaming endpoint has toobe in hello **Running** state.</span></span> 
* <span data-ttu-id="a1106-122">Zawartości musi zawierać zestaw o adaptacyjnej szybkości bitowej MP4s lub pliki Smooth Streaming adaptacyjną szybkością transmisji bitów.</span><span class="sxs-lookup"><span data-stu-id="a1106-122">Your asset must contain a set of adaptive bitrate MP4s or adaptive bitrate Smooth Streaming files.</span></span> <span data-ttu-id="a1106-123">Aby uzyskać więcej informacji, zobacz [kodowanie elementu zawartości](media-services-encode-asset.md).</span><span class="sxs-lookup"><span data-stu-id="a1106-123">For more information, see [Encode an asset](media-services-encode-asset.md).</span></span>
* <span data-ttu-id="a1106-124">Hello usługi dostarczania klucza buforuje ContentKeyAuthorizationPolicy i jego obiektów pokrewnych (opcje zasad i ograniczeń) przez 15 minut.</span><span class="sxs-lookup"><span data-stu-id="a1106-124">hello Key Delivery service caches ContentKeyAuthorizationPolicy and its related objects (policy options and restrictions) for 15 minutes.</span></span>  <span data-ttu-id="a1106-125">Jeśli tworzenie ContentKeyAuthorizationPolicy i określ toouse ograniczenie 'Token', a następnie ją przetestować, a następnie zaktualizuj zasad hello zbyt "Otwórz" ograniczeń, potrwa około 15 minut przed hello przełączniki toohello "Otwórz" Wersja zasad hello zasad.</span><span class="sxs-lookup"><span data-stu-id="a1106-125">If you create a ContentKeyAuthorizationPolicy and specify toouse a “Token” restriction, then test it, and then update hello policy too“Open” restriction, it will take roughly 15 minutes before hello policy switches toohello “Open” version of hello policy.</span></span>

## <a name="how-to-configure-hello-key-authorization-policy"></a><span data-ttu-id="a1106-126">Porady: Konfigurowanie zasad autoryzacji klucza hello</span><span class="sxs-lookup"><span data-stu-id="a1106-126">How to: configure hello key authorization policy</span></span>
<span data-ttu-id="a1106-127">zasady autoryzacji klucza hello tooconfigure, wybierz opcję hello **ochrony zawartości** strony.</span><span class="sxs-lookup"><span data-stu-id="a1106-127">tooconfigure hello key authorization policy, select hello **CONTENT PROTECTION** page.</span></span>

<span data-ttu-id="a1106-128">Usługa Media Services obsługuje wiele sposobów uwierzytelniania użytkowników, którzy tworzą żądania klucza.</span><span class="sxs-lookup"><span data-stu-id="a1106-128">Media Services supports multiple ways of authenticating users who make key requests.</span></span> <span data-ttu-id="a1106-129">zasady autoryzacji klucza zawartości Hello może mieć **Otwórz**, **tokenu**, lub **IP** ograniczenia autoryzacji (**IP** można skonfigurować za pomocą REST lub zestawu .NET SDK).</span><span class="sxs-lookup"><span data-stu-id="a1106-129">hello content key authorization policy can have **open**, **token**, or **IP** authorization restrictions (**IP** can be configured with REST or .NET SDK).</span></span>

### <a name="open-restriction"></a><span data-ttu-id="a1106-130">Ograniczenie otwarte</span><span class="sxs-lookup"><span data-stu-id="a1106-130">Open restriction</span></span>
<span data-ttu-id="a1106-131">Witaj **Otwórz** ograniczeń oznacza hello system będzie dostarczać hello tooanyone klucza, który wysyła żądanie klucza.</span><span class="sxs-lookup"><span data-stu-id="a1106-131">hello **open** restriction means hello system will deliver hello key tooanyone who makes a key request.</span></span> <span data-ttu-id="a1106-132">To ograniczenie może być przydatna do celów testowych.</span><span class="sxs-lookup"><span data-stu-id="a1106-132">This restriction might be useful for testing purposes.</span></span>

![OpenPolicy][open_policy]

### <a name="token-restriction"></a><span data-ttu-id="a1106-134">Ograniczenia tokenu</span><span class="sxs-lookup"><span data-stu-id="a1106-134">Token restriction</span></span>
<span data-ttu-id="a1106-135">toochoose hello token ograniczone zasad, naciśnij klawisz hello **TOKENU** przycisku.</span><span class="sxs-lookup"><span data-stu-id="a1106-135">toochoose hello token restricted policy, press hello **TOKEN** button.</span></span>

<span data-ttu-id="a1106-136">Witaj **tokenu** zasady ograniczające musi towarzyszyć token wystawiony przez **Secure Token Service** (STS).</span><span class="sxs-lookup"><span data-stu-id="a1106-136">hello **token** restricted policy must be accompanied by a token issued by a **Secure Token Service** (STS).</span></span> <span data-ttu-id="a1106-137">Usługa Media Services obsługuje tokenów w hello **proste tokenów sieci Web** ([SWT](https://msdn.microsoft.com/library/gg185950.aspx#BKMK_2)) format i **JSON Web Token** formatu (JWT).</span><span class="sxs-lookup"><span data-stu-id="a1106-137">Media Services supports tokens in hello **Simple Web Tokens** ([SWT](https://msdn.microsoft.com/library/gg185950.aspx#BKMK_2)) format and **JSON Web Token** (JWT) format.</span></span> <span data-ttu-id="a1106-138">Aby uzyskać informacje, zobacz [uwierzytelniania tokenu JWT](http://www.gtrifonov.com/2015/01/03/jwt-token-authentication-in-azure-media-services-and-dynamic-encryption/).</span><span class="sxs-lookup"><span data-stu-id="a1106-138">For information, see [JWT token authentication](http://www.gtrifonov.com/2015/01/03/jwt-token-authentication-in-azure-media-services-and-dynamic-encryption/).</span></span>

<span data-ttu-id="a1106-139">Usługa Media Services dostarcza **Secure Token usługi**.</span><span class="sxs-lookup"><span data-stu-id="a1106-139">Media Services does not provide **Secure Token Services**.</span></span> <span data-ttu-id="a1106-140">Można utworzyć niestandardowy STS lub korzystać z usługi Microsoft Azure ACS tooissue tokenów.</span><span class="sxs-lookup"><span data-stu-id="a1106-140">You can create a custom STS or leverage Microsoft Azure ACS tooissue tokens.</span></span> <span data-ttu-id="a1106-141">Witaj STS musi być skonfigurowany toocreate podpisany token hello określony klucz i wystawianie oświadczeń, określonych w konfiguracji ograniczenia tokenu hello.</span><span class="sxs-lookup"><span data-stu-id="a1106-141">hello STS must be configured toocreate a token signed with hello specified key and issue claims that you specified in hello token restriction configuration.</span></span> <span data-ttu-id="a1106-142">Witaj usługa Media Services klucza dostawy zwróci klienta toohello klucza szyfrowania hello Jeśli hello token jest prawidłowy i hello oświadczenia w tokenie hello pasują hello klucza zawartości.</span><span class="sxs-lookup"><span data-stu-id="a1106-142">hello Media Services key delivery service will return hello encryption key toohello client if hello token is valid and hello claims in hello token match those configured for hello content key.</span></span> <span data-ttu-id="a1106-143">Aby uzyskać więcej informacji, zobacz [tokenów tooissue ACS Azure użyj](http://mingfeiy.com/acs-with-key-services).</span><span class="sxs-lookup"><span data-stu-id="a1106-143">For more information, see [Use Azure ACS tooissue tokens](http://mingfeiy.com/acs-with-key-services).</span></span>

<span data-ttu-id="a1106-144">Podczas konfigurowania hello **TOKENU** zasady ograniczające, należy ustawić wartości dla **klucza weryfikacji**, **wystawcy** i **odbiorców**.</span><span class="sxs-lookup"><span data-stu-id="a1106-144">When configuring hello **TOKEN** restricted policy, you must set values for **verification key**, **issuer** and **audience**.</span></span> <span data-ttu-id="a1106-145">klucz podstawowy weryfikacji Hello zawiera hello klucza, że hello token została podpisana z, wystawcy hello bezpiecznego tokenu usługi, która wystawia hello token.</span><span class="sxs-lookup"><span data-stu-id="a1106-145">hello primary verification key contains hello key that hello token was signed with, issuer is hello secure token service that issues hello token.</span></span> <span data-ttu-id="a1106-146">odbiorców Hello (nazywane również zakres) opisano hello celem hello token lub hello zasobów hello tokenu zezwala na dostęp do.</span><span class="sxs-lookup"><span data-stu-id="a1106-146">hello audience (sometimes called scope) describes hello intent of hello token or hello resource hello token authorizes access to.</span></span> <span data-ttu-id="a1106-147">Hello usługa Media Services klucza dostawy weryfikuje, czy te wartości w tokenie hello są takie same wartości hello hello szablonu.</span><span class="sxs-lookup"><span data-stu-id="a1106-147">hello Media Services key delivery service validates that these values in hello token match hello values in hello template.</span></span>

### <a name="playready"></a><span data-ttu-id="a1106-148">PlayReady</span><span class="sxs-lookup"><span data-stu-id="a1106-148">PlayReady</span></span>
<span data-ttu-id="a1106-149">Podczas ochrony zawartości przy użyciu **PlayReady**, jednego z elementów hello potrzebnych toospecify w zasadach autoryzacji jest ciąg XML, który definiuje szablon licencji PlayReady hello.</span><span class="sxs-lookup"><span data-stu-id="a1106-149">When protecting your content with **PlayReady**, one of hello things you need toospecify in your authorization policy is an XML string that defines hello PlayReady license template.</span></span> <span data-ttu-id="a1106-150">Domyślnie jest ustawiona hello następujące zasady:</span><span class="sxs-lookup"><span data-stu-id="a1106-150">By default, hello following policy is set:</span></span>

<span data-ttu-id="a1106-151"><PlayReadyLicenseResponseTemplate xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/Azure/MediaServices/KeyDelivery/PlayReadyTemplate/v1"><LicenseTemplates> <PlayReadyLicenseTemplate> <AllowTestDevices>true</AllowTestDevices> <ContentKey i:type="ContentEncryptionKeyFromHeader" /> <LicenseType>Nonpersistent</LicenseType> <PlayRight> <AllowPassingVideoContentToUnknownOutput>dozwolone</AllowPassingVideoContentToUnknownOutput> </PlayRight> </PlayReadyLicenseTemplate> </LicenseTemplates></PlayReadyLicenseResponseTemplate></span><span class="sxs-lookup"><span data-stu-id="a1106-151"><PlayReadyLicenseResponseTemplate xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/Azure/MediaServices/KeyDelivery/PlayReadyTemplate/v1"> <LicenseTemplates> <PlayReadyLicenseTemplate><AllowTestDevices>true</AllowTestDevices> <ContentKey i:type="ContentEncryptionKeyFromHeader" /> <LicenseType>Nonpersistent</LicenseType> <PlayRight> <AllowPassingVideoContentToUnknownOutput>Allowed</AllowPassingVideoContentToUnknownOutput> </PlayRight> </PlayReadyLicenseTemplate> </LicenseTemplates> </PlayReadyLicenseResponseTemplate></span></span>

<span data-ttu-id="a1106-152">Możesz kliknąć hello **zaimportować pliku xml zasady** przycisk i podaj inny kod XML, który odpowiada toohello definicja schematu XML [tutaj](media-services-playready-license-template-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a1106-152">You can click hello **import policy xml** button and provide a different XML which conforms toohello  XML Schema defined [here](media-services-playready-license-template-overview.md).</span></span>

## <a name="next-step"></a><span data-ttu-id="a1106-153">Następny krok</span><span class="sxs-lookup"><span data-stu-id="a1106-153">Next step</span></span>
<span data-ttu-id="a1106-154">Przejrzyj ścieżki szkoleniowe dotyczące usługi Media Services.</span><span class="sxs-lookup"><span data-stu-id="a1106-154">Review Media Services learning paths.</span></span>

[!INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

## <a name="provide-feedback"></a><span data-ttu-id="a1106-155">Przekazywanie opinii</span><span class="sxs-lookup"><span data-stu-id="a1106-155">Provide feedback</span></span>
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

[open_policy]: ./media/media-services-portal-configure-content-key-auth-policy/media-services-protect-content-with-open-restriction.png
[token_policy]: ./media/media-services-key-authorization-policy/media-services-protect-content-with-token-restriction.png

