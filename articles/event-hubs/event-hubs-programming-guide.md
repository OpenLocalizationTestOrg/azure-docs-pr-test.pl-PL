---
title: "Przewodnik aaaProgramming dla usługi Azure Event Hubs | Dokumentacja firmy Microsoft"
description: "Pisanie kodu dla usługi Azure Event Hubs przy użyciu hello Azure .NET SDK."
services: event-hubs
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 64cbfd3d-4a0e-4455-a90a-7f3d4f080323
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: tbd
ms.date: 08/17/2017
ms.author: sethm
ms.openlocfilehash: 43bebd126c2311af9e3daeb52324132b66cf0884
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="event-hubs-programming-guide"></a><span data-ttu-id="12f4d-103">Przewodnik programowania w usłudze Event Hubs</span><span class="sxs-lookup"><span data-stu-id="12f4d-103">Event Hubs programming guide</span></span>

<span data-ttu-id="12f4d-104">W tym artykule opisano kilka typowych scenariuszy w pisanie kodu przy użyciu usługi Azure Event Hubs i hello Azure .NET SDK.</span><span class="sxs-lookup"><span data-stu-id="12f4d-104">This article discusses some common scenarios in writing code using Azure Event Hubs and hello Azure .NET SDK.</span></span> <span data-ttu-id="12f4d-105">Przyjęto założenie, że wstępnie znasz i rozumiesz usługę Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="12f4d-105">It assumes a preliminary understanding of Event Hubs.</span></span> <span data-ttu-id="12f4d-106">Omówienie koncepcji usługi Event hubs, zobacz hello [Przegląd usługi Event Hubs](event-hubs-what-is-event-hubs.md).</span><span class="sxs-lookup"><span data-stu-id="12f4d-106">For a conceptual overview of Event Hubs, see hello [Event Hubs overview](event-hubs-what-is-event-hubs.md).</span></span>

## <a name="event-publishers"></a><span data-ttu-id="12f4d-107">Wydawcy zdarzeń</span><span class="sxs-lookup"><span data-stu-id="12f4d-107">Event publishers</span></span>

<span data-ttu-id="12f4d-108">Możesz wysłać Centrum zdarzeń tooan zdarzeń za pomocą protokołu HTTP POST lub za pośrednictwem połączenia protokołu AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="12f4d-108">You send events tooan event hub either using HTTP POST or via an AMQP 1.0 connection.</span></span> <span data-ttu-id="12f4d-109">Witaj wybór które toouse, gdy jest zależna od hello konkretnego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="12f4d-109">hello choice of which toouse and when depends on hello specific scenario being addressed.</span></span> <span data-ttu-id="12f4d-110">Połączenia protokołu AMQP 1.0 są mierzone jako połączenia obsługiwane przez brokera w Service Bus i są bardziej odpowiednie w scenariuszach z częstymi większymi ilościami wiadomości oraz wymaganiami dotyczącymi krótszych opóźnień, ponieważ zapewniają trwały kanał obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="12f4d-110">AMQP 1.0 connections are metered as brokered connections in Service Bus and are more appropriate in scenarios with frequent higher message volumes and lower latency requirements, as they provide a persistent messaging channel.</span></span>

<span data-ttu-id="12f4d-111">Tworzenie i zarządzanie nimi Event Hubs przy użyciu hello [NamespaceManager][] klasy.</span><span class="sxs-lookup"><span data-stu-id="12f4d-111">You create and manage Event Hubs using hello [NamespaceManager][] class.</span></span> <span data-ttu-id="12f4d-112">Gdy przy użyciu platformy .NET hello zarządzanych interfejsów API, hello głównej konstruuje publikowania danych tooEvent koncentratory są hello [EventHubClient](/dotnet/api/microsoft.servicebus.messaging.eventhubclient) i [EventData][] klasy.</span><span class="sxs-lookup"><span data-stu-id="12f4d-112">When using hello .NET managed APIs, hello primary constructs for publishing data tooEvent Hubs are hello [EventHubClient](/dotnet/api/microsoft.servicebus.messaging.eventhubclient) and [EventData][] classes.</span></span> <span data-ttu-id="12f4d-113">[EventHubClient][] udostępnia kanał komunikacji protokołu AMQP hello przez który zdarzenia są wysyłane toohello Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="12f4d-113">[EventHubClient][] provides hello AMQP communication channel over which events are sent toohello event hub.</span></span> <span data-ttu-id="12f4d-114">Witaj [EventData][] klasa reprezentuje zdarzenie i jest Centrum zdarzeń tooan toopublish używanych w wiadomości.</span><span class="sxs-lookup"><span data-stu-id="12f4d-114">hello [EventData][] class represents an event, and is used toopublish messages tooan event hub.</span></span> <span data-ttu-id="12f4d-115">Ta klasa zawiera treść hello, niektóre metadane i informacje nagłówka zdarzenia hello.</span><span class="sxs-lookup"><span data-stu-id="12f4d-115">This class includes hello body, some metadata, and header information about hello event.</span></span> <span data-ttu-id="12f4d-116">Inne właściwości są dodawane toohello [EventData][] obiektów, kiedy przechodzi on przez Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="12f4d-116">Other properties are added toohello [EventData][] object as it passes through an event hub.</span></span>

## <a name="get-started"></a><span data-ttu-id="12f4d-117">Rozpoczęcie pracy</span><span class="sxs-lookup"><span data-stu-id="12f4d-117">Get started</span></span>

<span data-ttu-id="12f4d-118">Hello .NET klas, które obsługują usługi Event Hubs są zawarte w zestawie Microsoft.ServiceBus.dll hello.</span><span class="sxs-lookup"><span data-stu-id="12f4d-118">hello .NET classes that support Event Hubs are provided in hello Microsoft.ServiceBus.dll assembly.</span></span> <span data-ttu-id="12f4d-119">Witaj Najprostszym sposobem tooreference hello interfejsu API usługi Service Bus i tooconfigure aplikacji ze wszystkimi zależnościami usługi Service Bus hello jest toodownload hello [pakietu NuGet usługi Service Bus](https://www.nuget.org/packages/WindowsAzure.ServiceBus).</span><span class="sxs-lookup"><span data-stu-id="12f4d-119">hello easiest way tooreference hello Service Bus API and tooconfigure your application with all of hello Service Bus dependencies is toodownload hello [Service Bus NuGet package](https://www.nuget.org/packages/WindowsAzure.ServiceBus).</span></span> <span data-ttu-id="12f4d-120">Alternatywnie można użyć hello [Konsola Menedżera pakietów](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) w programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="12f4d-120">Alternatively, you can use hello [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) in Visual Studio.</span></span> <span data-ttu-id="12f4d-121">toodo tak, wydać następujące polecenie w hello hello [Konsola Menedżera pakietów](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) okno:</span><span class="sxs-lookup"><span data-stu-id="12f4d-121">toodo so, issue hello following command in hello [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) window:</span></span>

```
Install-Package WindowsAzure.ServiceBus
```

## <a name="create-an-event-hub"></a><span data-ttu-id="12f4d-122">Tworzenie centrum zdarzeń</span><span class="sxs-lookup"><span data-stu-id="12f4d-122">Create an event hub</span></span>
<span data-ttu-id="12f4d-123">Można użyć hello [NamespaceManager][] klasy toocreate Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="12f4d-123">You can use hello [NamespaceManager][] class toocreate Event Hubs.</span></span> <span data-ttu-id="12f4d-124">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="12f4d-124">For example:</span></span>

```csharp
var manager = new Microsoft.ServiceBus.NamespaceManager("mynamespace.servicebus.windows.net");
var description = manager.CreateEventHub("MyEventHub");
```

<span data-ttu-id="12f4d-125">W większości przypadków zaleca się, że używasz hello [CreateEventHubIfNotExists][] tooavoid metody generowania wyjątków, jeśli usługa hello jest uruchamiana ponownie.</span><span class="sxs-lookup"><span data-stu-id="12f4d-125">In most cases, it is recommended that you use hello [CreateEventHubIfNotExists][] methods tooavoid generating exceptions if hello service restarts.</span></span> <span data-ttu-id="12f4d-126">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="12f4d-126">For example:</span></span>

```csharp
var description = manager.CreateEventHubIfNotExists("MyEventHub");
```

<span data-ttu-id="12f4d-127">Wszystkie operacje tworzenia usługi Event Hubs, w tym [CreateEventHubIfNotExists][], wymagają **Zarządzaj** uprawnień w przestrzeni nazw hello zagrożona.</span><span class="sxs-lookup"><span data-stu-id="12f4d-127">All Event Hubs creation operations, including [CreateEventHubIfNotExists][], require **Manage** permissions on hello namespace in question.</span></span> <span data-ttu-id="12f4d-128">Jeśli chcesz toolimit hello uprawnienia aplikacji wydawcy lub odbiorcy, możesz uniknąć tych utworzyć wywołania operacji w kodzie produkcyjnym, korzystając z poświadczeń z ograniczonymi uprawnieniami.</span><span class="sxs-lookup"><span data-stu-id="12f4d-128">If you want toolimit hello permissions of your publisher or consumer applications, you can avoid these create operation calls in production code when you use credentials with limited permissions.</span></span>

<span data-ttu-id="12f4d-129">Witaj [EventHubDescription](/dotnet/api/microsoft.servicebus.messaging.eventhubdescription) klasa zawiera szczegółowe informacje o Centrum zdarzeń, w tym hello reguł autoryzacji, interwał przechowywania wiadomości powitania identyfikatory partycji, stan i ścieżkę.</span><span class="sxs-lookup"><span data-stu-id="12f4d-129">hello [EventHubDescription](/dotnet/api/microsoft.servicebus.messaging.eventhubdescription) class contains details about an event hub, including hello authorization rules, hello message retention interval, partition IDs, status, and path.</span></span> <span data-ttu-id="12f4d-130">Możesz użyć tej klasy tooupdate hello metadanych w Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="12f4d-130">You can use this class tooupdate hello metadata on an event hub.</span></span>

## <a name="create-an-event-hubs-client"></a><span data-ttu-id="12f4d-131">Tworzenie klienta usługi Event Hubs</span><span class="sxs-lookup"><span data-stu-id="12f4d-131">Create an Event Hubs client</span></span>
<span data-ttu-id="12f4d-132">Hello podstawowe klasy do interakcji z usługą Event Hubs jest [Microsoft.ServiceBus.Messaging.EventHubClient][EventHubClient].</span><span class="sxs-lookup"><span data-stu-id="12f4d-132">hello primary class for interacting with Event Hubs is [Microsoft.ServiceBus.Messaging.EventHubClient][EventHubClient].</span></span> <span data-ttu-id="12f4d-133">Ta klasa udostępnia zarówno funkcje nadawcy, jak i odbiornika.</span><span class="sxs-lookup"><span data-stu-id="12f4d-133">This class provides both sender and receiver capabilities.</span></span> <span data-ttu-id="12f4d-134">Można utworzyć wystąpienia tej klasy przy użyciu hello [Utwórz](/dotnet/api/microsoft.servicebus.messaging.eventhubclient.create) metody, jak pokazano w hello poniższy przykład.</span><span class="sxs-lookup"><span data-stu-id="12f4d-134">You can instantiate this class using hello [Create](/dotnet/api/microsoft.servicebus.messaging.eventhubclient.create) method, as shown in hello following example.</span></span>

```csharp
var client = EventHubClient.Create(description.Path);
```

<span data-ttu-id="12f4d-135">Ta metoda używa informacji o połączeniu usługi Service Bus hello w pliku App.config hello, hello `appSettings` sekcji.</span><span class="sxs-lookup"><span data-stu-id="12f4d-135">This method uses hello Service Bus connection information in hello App.config file, in hello `appSettings` section.</span></span> <span data-ttu-id="12f4d-136">Przykład Witaj `appSettings` XML używane informacje o połączeniu usługi Service Bus hello toostore, zobacz dokumentację hello hello [Microsoft.ServiceBus.Messaging.EventHubClient.Create(System.String)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) metody.</span><span class="sxs-lookup"><span data-stu-id="12f4d-136">For an example of hello `appSettings` XML used toostore hello Service Bus connection information, see hello documentation for hello [Microsoft.ServiceBus.Messaging.EventHubClient.Create(System.String)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) method.</span></span>

<span data-ttu-id="12f4d-137">Innym rozwiązaniem jest toocreate powitania klienta z parametrów połączenia.</span><span class="sxs-lookup"><span data-stu-id="12f4d-137">Another option is toocreate hello client from a connection string.</span></span> <span data-ttu-id="12f4d-138">Ta opcja działa dobrze w przypadku, gdy przy użyciu ról procesu roboczego platformy Azure, ponieważ ciąg hello można przechowywać w hello właściwości konfiguracji dla procesu roboczego hello.</span><span class="sxs-lookup"><span data-stu-id="12f4d-138">This option works well when using Azure worker roles, because you can store hello string in hello configuration properties for hello worker.</span></span> <span data-ttu-id="12f4d-139">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="12f4d-139">For example:</span></span>

```csharp
EventHubClient.CreateFromConnectionString("your_connection_string");
```

<span data-ttu-id="12f4d-140">Parametry połączenia Hello będą hello takiego samego formatu wyświetlaną w pliku App.config hello hello wcześniejszych metod:</span><span class="sxs-lookup"><span data-stu-id="12f4d-140">hello connection string will be in hello same format as it appears in hello App.config file for hello previous methods:</span></span>

```
Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[key]
```

<span data-ttu-id="12f4d-141">Na koniec jest również możliwe toocreate [EventHubClient][] obiekt z [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) wystąpienie, jak pokazano w hello poniższy przykład.</span><span class="sxs-lookup"><span data-stu-id="12f4d-141">Finally, it is also possible toocreate an [EventHubClient][] object from a [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance, as shown in hello following example.</span></span>

```csharp
var factory = MessagingFactory.CreateFromConnectionString("your_connection_string");
var client = factory.CreateEventHubClient("MyEventHub");
```

<span data-ttu-id="12f4d-142">Jest to dodatkowe ważne toonote [EventHubClient][] obiekty utworzone na podstawie wystąpienia fabryki obsługi komunikatów będą ponownie wykorzystać hello samego podstawowego połączenia TCP.</span><span class="sxs-lookup"><span data-stu-id="12f4d-142">It is important toonote that additional [EventHubClient][] objects created from a messaging factory instance will reuse hello same underlying TCP connection.</span></span> <span data-ttu-id="12f4d-143">Z tego względu te obiekty mają limit przepływności po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="12f4d-143">Therefore, these objects have a client-side limit on throughput.</span></span> <span data-ttu-id="12f4d-144">Witaj [Utwórz](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) metody ponownie używa pojedynczej fabryki obsługi wiadomości.</span><span class="sxs-lookup"><span data-stu-id="12f4d-144">hello [Create](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) method reuses a single messaging factory.</span></span> <span data-ttu-id="12f4d-145">Jeśli potrzebujesz bardzo wysokiej przepływności od jednego nadawcy, możesz utworzyć wiele fabryk komunikatów i jeden obiekt [EventHubClient][] z każdej fabryki obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="12f4d-145">If you need very high throughput from a single sender, then you can create multiple message factories and one [EventHubClient][] object from each messaging factory.</span></span>

## <a name="send-events-tooan-event-hub"></a><span data-ttu-id="12f4d-146">Wyślij Centrum zdarzeń tooan zdarzeń</span><span class="sxs-lookup"><span data-stu-id="12f4d-146">Send events tooan event hub</span></span>
<span data-ttu-id="12f4d-147">Wyślij Centrum zdarzeń tooan zdarzeń przez utworzenie [EventData][] wystąpienia i wysłanie go za pośrednictwem hello [wysyłania](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) metody.</span><span class="sxs-lookup"><span data-stu-id="12f4d-147">You send events tooan event hub by creating an [EventData][] instance and sending it via hello [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) method.</span></span> <span data-ttu-id="12f4d-148">Ta metoda przyjmuje jeden [EventData][] parametru wystąpienia i synchronicznie wysyła go tooan Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="12f4d-148">This method takes a single [EventData][] instance parameter and synchronously sends it tooan event hub.</span></span>

## <a name="event-serialization"></a><span data-ttu-id="12f4d-149">Serializacja zdarzeń</span><span class="sxs-lookup"><span data-stu-id="12f4d-149">Event serialization</span></span>
<span data-ttu-id="12f4d-150">Witaj [EventData][] klasa ma [cztery przeciążone konstruktory](/dotnet/api/microsoft.servicebus.messaging.eventdata#constructors_) , które wymagają różnych parametrów, takich jak obiekt i serializator, tablica bajtów lub strumień.</span><span class="sxs-lookup"><span data-stu-id="12f4d-150">hello [EventData][] class has [four overloaded constructors](/dotnet/api/microsoft.servicebus.messaging.eventdata#constructors_) that take a variety of parameters, such as an object and serializer, a byte array, or a stream.</span></span> <span data-ttu-id="12f4d-151">Możliwe jest również możliwe tooinstantiate hello [EventData][] klasy i ustaw strumień treści hello później.</span><span class="sxs-lookup"><span data-stu-id="12f4d-151">It is also possible tooinstantiate hello [EventData][] class and set hello body stream afterwards.</span></span> <span data-ttu-id="12f4d-152">Korzystając z formatu JSON z [EventData][], można użyć **Encoding.UTF8.GetBytes()** tablicy bajtowej hello tooretrieve dla ciąg zakodowany w formacie JSON.</span><span class="sxs-lookup"><span data-stu-id="12f4d-152">When using JSON with [EventData][], you can use **Encoding.UTF8.GetBytes()** tooretrieve hello byte array for a JSON-encoded string.</span></span>

## <a name="partition-key"></a><span data-ttu-id="12f4d-153">Klucz partycji</span><span class="sxs-lookup"><span data-stu-id="12f4d-153">Partition key</span></span>
<span data-ttu-id="12f4d-154">Witaj [EventData][] klasa ma [PartitionKey][] właściwość, która umożliwia toospecify nadawcy hello wartość skrótu tooproduce przypisania partycji.</span><span class="sxs-lookup"><span data-stu-id="12f4d-154">hello [EventData][] class has a [PartitionKey][] property that enables hello sender toospecify a value that is hashed tooproduce a partition assignment.</span></span> <span data-ttu-id="12f4d-155">Użycie klucza partycji gwarantuje wszystkie hello zdarzenia z tym samym kluczem są wysyłane hello toohello sam partycji w Centrum zdarzeń hello.</span><span class="sxs-lookup"><span data-stu-id="12f4d-155">Using a partition key ensures that all hello events with hello same key are sent toohello same partition in hello event hub.</span></span> <span data-ttu-id="12f4d-156">Wspólne klucze partycji zawierają identyfikatory sesji użytkownika i unikatowe identyfikatory nadawcy.</span><span class="sxs-lookup"><span data-stu-id="12f4d-156">Common partition keys include user session IDs and unique sender IDs.</span></span> <span data-ttu-id="12f4d-157">Witaj [PartitionKey][] właściwość jest opcjonalna i może zostać dostarczona przy użyciu hello [Microsoft.ServiceBus.Messaging.EventHubClient.Send(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) lub [Microsoft.ServiceBus.Messaging.EventHubClient.SendAsync(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendAsync_Microsoft_ServiceBus_Messaging_EventData_) metody.</span><span class="sxs-lookup"><span data-stu-id="12f4d-157">hello [PartitionKey][] property is optional and can be provided when using hello [Microsoft.ServiceBus.Messaging.EventHubClient.Send(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) or [Microsoft.ServiceBus.Messaging.EventHubClient.SendAsync(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendAsync_Microsoft_ServiceBus_Messaging_EventData_) methods.</span></span> <span data-ttu-id="12f4d-158">Jeśli nie zostanie określona wartość [PartitionKey][], wysyłane zdarzenia są rozproszone toopartitions przy użyciu modelu okrężnego.</span><span class="sxs-lookup"><span data-stu-id="12f4d-158">If you do not provide a value for [PartitionKey][], sent events are distributed toopartitions using a round-robin model.</span></span>

### <a name="availability-considerations"></a><span data-ttu-id="12f4d-159">Zagadnienia dotyczące dostępności</span><span class="sxs-lookup"><span data-stu-id="12f4d-159">Availability considerations</span></span>

<span data-ttu-id="12f4d-160">Użycie klucza partycji jest opcjonalna i należy starannie rozważyć czy toouse jeden.</span><span class="sxs-lookup"><span data-stu-id="12f4d-160">Using a partition key is optional, and you should consider carefully whether or not toouse one.</span></span> <span data-ttu-id="12f4d-161">W wielu przypadkach przy użyciu klucza partycji jest dobrym rozwiązaniem, jeśli zdarzenie kolejność jest ważna.</span><span class="sxs-lookup"><span data-stu-id="12f4d-161">In many cases, using a partition key is a good choice if event ordering is important.</span></span> <span data-ttu-id="12f4d-162">Użycie klucza partycji, partycje wymagają dostępności w jednym węźle, a awarii wraz z upływem czasu; na przykład podczas obliczania ponownego uruchomienia węzłów i poprawki.</span><span class="sxs-lookup"><span data-stu-id="12f4d-162">When you use a partition key, these partitions require availability on a single node, and outages can occur over time; for example, when compute nodes reboot and patch.</span></span> <span data-ttu-id="12f4d-163">W efekcie ustawiony identyfikator partycji i tej partycji przestanie być dostępny dla jakiegoś powodu, próba tooaccess hello danych w tej partycji zakończy się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="12f4d-163">As such, if you set a partition ID and that partition becomes unavailable for some reason, an attempt tooaccess hello data in that partition will fail.</span></span> <span data-ttu-id="12f4d-164">Jeśli najważniejszych jest wysoka dostępność, nie należy określać klucz partycji. w takim przypadku zdarzenia będą wysyłane toopartitions przy użyciu modelu okrężnego hello opisanych powyżej.</span><span class="sxs-lookup"><span data-stu-id="12f4d-164">If high availability is most important, do not specify a partition key; in that case events will be sent toopartitions using hello round-robin model described previously.</span></span> <span data-ttu-id="12f4d-165">W tym scenariuszu utworzysz jawną wyboru między dostępności (Brak Identyfikatora partycji) i spójności (identyfikator partycji: zdarzenia tooa przypinanie).</span><span class="sxs-lookup"><span data-stu-id="12f4d-165">In this scenario, you are making an explicit choice between availability (no partition ID) and consistency (pinning events tooa partition ID).</span></span>

<span data-ttu-id="12f4d-166">Kolejnym zagadnieniem jest obsługa opóźnienia w przetwarzaniu zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="12f4d-166">Another consideration is handling delays in processing events.</span></span> <span data-ttu-id="12f4d-167">W niektórych przypadkach go może być lepiej toodrop danych i ponów niż tootry i nadąża z przetwarzaniem, który może powodować opóźnienia dalszego przetwarzania podrzędnego.</span><span class="sxs-lookup"><span data-stu-id="12f4d-167">In some cases it might be better toodrop data and retry than tootry and keep up with processing, which can potentially cause further downstream processing delays.</span></span> <span data-ttu-id="12f4d-168">Na przykład z giełdowych jest lepsze toowait pełną aktualne dane, ale w czatu na żywo lub scenariusza VOIP raczej trzeba danych hello szybkie, nawet jeśli nie jest ukończone.</span><span class="sxs-lookup"><span data-stu-id="12f4d-168">For example, with a stock ticker it's better toowait for complete up-to-date data, but in a live chat or VOIP scenario you'd rather have hello data quickly, even if it isn't complete.</span></span>

<span data-ttu-id="12f4d-169">Biorąc pod uwagę następujące zagadnienia dotyczące dostępności w tych scenariuszach użytkownik może wybrać jedną z powitania po strategii obsługi błędów:</span><span class="sxs-lookup"><span data-stu-id="12f4d-169">Given these availability considerations, in these scenarios you might choose one of hello following error handling strategies:</span></span>

- <span data-ttu-id="12f4d-170">Stop (Zatrzymaj odczytywania z usługi Event Hubs, dopóki elementy zostały usunięte)</span><span class="sxs-lookup"><span data-stu-id="12f4d-170">Stop (stop reading from Event Hubs until things are fixed)</span></span>
- <span data-ttu-id="12f4d-171">Upuść (komunikaty nie są ważne, upuść je)</span><span class="sxs-lookup"><span data-stu-id="12f4d-171">Drop (messages aren’t important, drop them)</span></span>
- <span data-ttu-id="12f4d-172">Spróbuj ponownie (ponawiania powitalne wiadomości, jak widać dopasowania)</span><span class="sxs-lookup"><span data-stu-id="12f4d-172">Retry (retry hello messages as you see fit)</span></span>
- <span data-ttu-id="12f4d-173">[Utraconych](../service-bus-messaging/service-bus-dead-letter-queues.md) (Użyj innego toodead Centrum zdarzeń lub kolejki utraconych tylko wiadomości powitania nie może przetworzyć)</span><span class="sxs-lookup"><span data-stu-id="12f4d-173">[Dead letter](../service-bus-messaging/service-bus-dead-letter-queues.md) (use a queue or another event hub toodead letter only hello messages you couldn’t process)</span></span>

<span data-ttu-id="12f4d-174">Więcej informacji oraz omówienie kompromisy powitania od dostępności i spójności, zobacz [dostępności i spójności w usłudze Event Hubs](event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="12f4d-174">For more information and a discussion about hello trade-offs between availability and consistency, see [Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md).</span></span> 

## <a name="batch-event-send-operations"></a><span data-ttu-id="12f4d-175">Operacje wysyłania partii zdarzeń</span><span class="sxs-lookup"><span data-stu-id="12f4d-175">Batch event send operations</span></span>
<span data-ttu-id="12f4d-176">Wysyłanie zdarzeń w partiach może znacznie zwiększyć przepływność.</span><span class="sxs-lookup"><span data-stu-id="12f4d-176">Sending events in batches can dramatically increase throughput.</span></span> <span data-ttu-id="12f4d-177">Witaj [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) ma metodę **IEnumerable** parametr typu [EventData][] i wysyła hello całą partię jako Centrum zdarzeń toohello niepodzielną operację.</span><span class="sxs-lookup"><span data-stu-id="12f4d-177">hello [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) method takes an **IEnumerable** parameter of type [EventData][] and sends hello entire batch as an atomic operation toohello event hub.</span></span>

```csharp
public void SendBatch(IEnumerable<EventData> eventDataList);
```

<span data-ttu-id="12f4d-178">Należy pamiętać, że pojedyncza partia nie może przekraczać limitu 256 KB hello zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="12f4d-178">Note that a single batch must not exceed hello 256 KB limit of an event.</span></span> <span data-ttu-id="12f4d-179">Ponadto każdy komunikat w partii hello używa hello tej samej tożsamości wydawcy.</span><span class="sxs-lookup"><span data-stu-id="12f4d-179">Additionally, each message in hello batch uses hello same publisher identity.</span></span> <span data-ttu-id="12f4d-180">Jest to hello odpowiedzialność hello tooensure nadawcy, który hello partii nie przekracza hello maksymalnego rozmiaru zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="12f4d-180">It is hello responsibility of hello sender tooensure that hello batch does not exceed hello maximum event size.</span></span> <span data-ttu-id="12f4d-181">Jeśli go przekroczy, zostanie wygenerowany błąd metody **Send** klienta.</span><span class="sxs-lookup"><span data-stu-id="12f4d-181">If it does, a client **Send** error is generated.</span></span>

## <a name="send-asynchronously-and-send-at-scale"></a><span data-ttu-id="12f4d-182">Wysyłanie asynchroniczne i wysyłanie na dużą skalę</span><span class="sxs-lookup"><span data-stu-id="12f4d-182">Send asynchronously and send at scale</span></span>
<span data-ttu-id="12f4d-183">Możesz również wysłać Centrum zdarzeń tooan zdarzeń asynchronicznie.</span><span class="sxs-lookup"><span data-stu-id="12f4d-183">You can also send events tooan event hub asynchronously.</span></span> <span data-ttu-id="12f4d-184">Wysyłanie asynchroniczne może zwiększyć szybkość hello jaką klient jest w stanie toosend zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="12f4d-184">Sending asynchronously can increase hello rate at which a client is able toosend events.</span></span> <span data-ttu-id="12f4d-185">Zarówno hello [wysyłania](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) i [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) metody są dostępne w wersjach asynchronicznych, które zwracają [zadań](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) obiektu.</span><span class="sxs-lookup"><span data-stu-id="12f4d-185">Both hello [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) and [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) methods are available in asynchronous versions that return a [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) object.</span></span> <span data-ttu-id="12f4d-186">Gdy ta technika może zwiększyć przepływność, jego przyczyną może być również powitania klienta toocontinue toosend zdarzeń nawet wtedy, gdy jest ograniczany przez hello usługi Event Hubs i może skutkować błędami powitania klienta lub utratą komunikatów Jeśli nie została poprawnie zaimplementowana.</span><span class="sxs-lookup"><span data-stu-id="12f4d-186">While this technique can increase throughput, it can also cause hello client toocontinue toosend events even while it is being throttled by hello Event Hubs service and can result in hello client experiencing failures or lost messages if not properly implemented.</span></span> <span data-ttu-id="12f4d-187">Ponadto można użyć hello [RetryPolicy](/dotnet/api/microsoft.servicebus.messaging.cliententity#Microsoft_ServiceBus_Messaging_ClientEntity_RetryPolicy) właściwość opcjami ponawiania prób powitania klienta toocontrol klienta.</span><span class="sxs-lookup"><span data-stu-id="12f4d-187">In addition, you can use hello [RetryPolicy](/dotnet/api/microsoft.servicebus.messaging.cliententity#Microsoft_ServiceBus_Messaging_ClientEntity_RetryPolicy) property on hello client toocontrol client retry options.</span></span>

## <a name="create-a-partition-sender"></a><span data-ttu-id="12f4d-188">Tworzenie nadawcy dla partycji</span><span class="sxs-lookup"><span data-stu-id="12f4d-188">Create a partition sender</span></span>
<span data-ttu-id="12f4d-189">Najbardziej typowe toosend zdarzenia tooan Centrum zdarzeń bez klucza partycji, ale w niektórych przypadkach może być zdarzeń toosend bezpośrednio tooa podane partycji.</span><span class="sxs-lookup"><span data-stu-id="12f4d-189">Although it is most common toosend events tooan event hub without a partition key, in some cases you might want toosend events directly tooa given partition.</span></span> <span data-ttu-id="12f4d-190">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="12f4d-190">For example:</span></span>

```csharp
var partitionedSender = client.CreatePartitionedSender(description.PartitionIds[0]);
```

<span data-ttu-id="12f4d-191">[CreatePartitionedSender](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_CreatePartitionedSender_System_String_) zwraca [EventHubSender](/dotnet/api/microsoft.servicebus.messaging.eventhubsender) obiektów służy partycji Centrum toopublish zdarzenia tooa konkretnego zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="12f4d-191">[CreatePartitionedSender](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_CreatePartitionedSender_System_String_) returns an [EventHubSender](/dotnet/api/microsoft.servicebus.messaging.eventhubsender) object that you can use toopublish events tooa specific event hub partition.</span></span>

## <a name="event-consumers"></a><span data-ttu-id="12f4d-192">Odbiorcy zdarzeń</span><span class="sxs-lookup"><span data-stu-id="12f4d-192">Event consumers</span></span>
<span data-ttu-id="12f4d-193">Usługa Event Hubs ma dwa podstawowe modele użycia zdarzeń: odbiorniki bezpośrednie i abstrakcje wyższego poziomu, takie jak klasa [EventProcessorHost][].</span><span class="sxs-lookup"><span data-stu-id="12f4d-193">Event Hubs has two primary models for event consumption: direct receivers and higher-level abstractions, such as [EventProcessorHost][].</span></span> <span data-ttu-id="12f4d-194">Odbiorniki bezpośrednie są odpowiedzialne za własną koordynację dostępu toopartitions w obrębie grupy odbiorców.</span><span class="sxs-lookup"><span data-stu-id="12f4d-194">Direct receivers are responsible for their own coordination of access toopartitions within a consumer group.</span></span>

### <a name="direct-consumer"></a><span data-ttu-id="12f4d-195">Bezpośredni odbiorca</span><span class="sxs-lookup"><span data-stu-id="12f4d-195">Direct consumer</span></span>
<span data-ttu-id="12f4d-196">najbardziej bezpośrednim tooread sposób Hello z partycji w obrębie grupy odbiorców jest toouse hello [EventHubReceiver](/dotnet/apie/microsoft.servicebus.messaging.eventhubreceiver) klasy.</span><span class="sxs-lookup"><span data-stu-id="12f4d-196">hello most direct way tooread from a partition within a consumer group is toouse hello [EventHubReceiver](/dotnet/apie/microsoft.servicebus.messaging.eventhubreceiver) class.</span></span> <span data-ttu-id="12f4d-197">toocreate jako wystąpienie tej klasy, należy użyć wystąpienia hello [EventHubConsumerGroup](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup) klasy.</span><span class="sxs-lookup"><span data-stu-id="12f4d-197">toocreate an instance of this class, you must use an instance of hello [EventHubConsumerGroup](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup) class.</span></span> <span data-ttu-id="12f4d-198">W hello poniższy przykład należy określić identyfikator partycji: hello podczas tworzenia hello odbiornika dla grupy odbiorców hello.</span><span class="sxs-lookup"><span data-stu-id="12f4d-198">In hello following example, hello partition ID must be specified when creating hello receiver for hello consumer group.</span></span>

```csharp
EventHubConsumerGroup group = client.GetDefaultConsumerGroup();
var receiver = group.CreateReceiver(client.GetRuntimeInformation().PartitionIds[0]);
```

<span data-ttu-id="12f4d-199">Witaj [CreateReceiver](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup#methods_summary) metoda ma kilka przeciążeń, które ułatwiają kontrolę nad tworzonym czytnikiem hello.</span><span class="sxs-lookup"><span data-stu-id="12f4d-199">hello [CreateReceiver](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup#methods_summary) method has several overloads that facilitate control over hello reader being created.</span></span> <span data-ttu-id="12f4d-200">Te metody obejmują Określanie przesunięcia jako ciągu lub sygnatury czasowej, a hello możliwości toospecify czy tooinclude to określone przesunięcie w hello zwrócił strumienia lub rozpocząć po nim.</span><span class="sxs-lookup"><span data-stu-id="12f4d-200">These methods include specifying an offset as either a string or timestamp, and hello ability toospecify whether tooinclude this specified offset in hello returned stream, or start after it.</span></span> <span data-ttu-id="12f4d-201">Po utworzeniu odbiornika hello, można uruchomić odbieranie zdarzeń na powitania zwrócił obiekt.</span><span class="sxs-lookup"><span data-stu-id="12f4d-201">After you create hello receiver, you can start receiving events on hello returned object.</span></span> <span data-ttu-id="12f4d-202">Witaj [Receive](/dotnet/api/microsoft.servicebus.messaging.eventhubreceiver#methods_summary) metoda ma cztery przeciążenia hello tego formantu otrzymywać parametrów operacji, takich jak rozmiar partii i czas oczekiwania.</span><span class="sxs-lookup"><span data-stu-id="12f4d-202">hello [Receive](/dotnet/api/microsoft.servicebus.messaging.eventhubreceiver#methods_summary) method has four overloads that control hello receive operation parameters, such as batch size and wait time.</span></span> <span data-ttu-id="12f4d-203">Używając asynchronicznych wersji tych metod tooincrease hello przepływności konsumenta hello.</span><span class="sxs-lookup"><span data-stu-id="12f4d-203">You can use hello asynchronous versions of these methods tooincrease hello throughput of a consumer.</span></span> <span data-ttu-id="12f4d-204">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="12f4d-204">For example:</span></span>

```csharp
bool receive = true;
string myOffset;
while(receive)
{
    var message = receiver.Receive();
    myOffset = message.Offset;
    string body = Encoding.UTF8.GetString(message.GetBytes());
    Console.WriteLine(String.Format("Received message offset: {0} \nbody: {1}", myOffset, body));
}
```

<span data-ttu-id="12f4d-205">Z zakresie tooa określonej partycji wiadomości powitania są odbierane w kolejności hello, w którym zostały wysłane toohello Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="12f4d-205">With respect tooa specific partition, hello messages are received in hello order in which they were sent toohello event hub.</span></span> <span data-ttu-id="12f4d-206">Przesunięcie Hello jest ciąg tokenu tooidentify używanych komunikatów w partycji.</span><span class="sxs-lookup"><span data-stu-id="12f4d-206">hello offset is a string token used tooidentify a message in a partition.</span></span>

<span data-ttu-id="12f4d-207">Należy zauważyć, że pojedyncza partycja w obrębie grupy odbiorców w żadnym momencie nie może mieć połączonych więcej niż 5 współbieżnych czytników.</span><span class="sxs-lookup"><span data-stu-id="12f4d-207">Note that a single partition within a consumer group cannot have more than 5 concurrent readers connected at any time.</span></span> <span data-ttu-id="12f4d-208">Jak czytniki nawiązują połączenie lub rozłączają, ich sesje mogą pozostać aktywne przez kilka minut, zanim usługa hello rozpozna, że zostały odłączone.</span><span class="sxs-lookup"><span data-stu-id="12f4d-208">As readers connect or become disconnected, their sessions might stay active for several minutes before hello service recognizes that they have disconnected.</span></span> <span data-ttu-id="12f4d-209">W tym czasie ponowne łączenie tooa partycji może zakończyć się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="12f4d-209">During this time, reconnecting tooa partition may fail.</span></span> <span data-ttu-id="12f4d-210">Aby uzyskać kompletny przykład pisania aplikacji bezpośredniego odbiornika usługi Event hubs, zobacz hello [odbiorniki bezpośrednie centra zdarzeń](https://code.msdn.microsoft.com/Event-Hub-Direct-Receivers-13fa95c6) próbki.</span><span class="sxs-lookup"><span data-stu-id="12f4d-210">For a complete example of writing a direct receiver for Event Hubs, see hello [Event Hubs Direct Receivers](https://code.msdn.microsoft.com/Event-Hub-Direct-Receivers-13fa95c6) sample.</span></span>

### <a name="event-processor-host"></a><span data-ttu-id="12f4d-211">Host procesora zdarzeń</span><span class="sxs-lookup"><span data-stu-id="12f4d-211">Event processor host</span></span>
<span data-ttu-id="12f4d-212">Witaj [EventProcessorHost][] klasy przetwarza dane z usługi Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="12f4d-212">hello [EventProcessorHost][] class processes data from Event Hubs.</span></span> <span data-ttu-id="12f4d-213">Podczas tworzenia czytników zdarzeń na platformie .NET hello należy używać tej implementacji.</span><span class="sxs-lookup"><span data-stu-id="12f4d-213">You should use this implementation when building event readers on hello .NET platform.</span></span> <span data-ttu-id="12f4d-214">Klasa [EventProcessorHost][] udostępnia bezpieczne wątkowo, wieloprocesowe, bezpieczne środowisko uruchomieniowe dla implementacji procesora zdarzeń, które umożliwia także tworzenie punktów kontrolnych i zarządzanie dzierżawą partycji.</span><span class="sxs-lookup"><span data-stu-id="12f4d-214">[EventProcessorHost][] provides a thread-safe, multi-process, safe runtime environment for event processor implementations that also provides checkpointing and partition lease management.</span></span>

<span data-ttu-id="12f4d-215">Witaj toouse [EventProcessorHost][] klasy, można zaimplementować [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor).</span><span class="sxs-lookup"><span data-stu-id="12f4d-215">toouse hello [EventProcessorHost][] class, you can implement [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor).</span></span> <span data-ttu-id="12f4d-216">Ten interfejs zawiera trzy metody:</span><span class="sxs-lookup"><span data-stu-id="12f4d-216">This interface contains three methods:</span></span>

* [<span data-ttu-id="12f4d-217">OpenAsync</span><span class="sxs-lookup"><span data-stu-id="12f4d-217">OpenAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_OpenAsync_Microsoft_ServiceBus_Messaging_PartitionContext_)
* [<span data-ttu-id="12f4d-218">CloseAsync</span><span class="sxs-lookup"><span data-stu-id="12f4d-218">CloseAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_CloseAsync_Microsoft_ServiceBus_Messaging_PartitionContext_Microsoft_ServiceBus_Messaging_CloseReason_)
* [<span data-ttu-id="12f4d-219">ProcessEventsAsync</span><span class="sxs-lookup"><span data-stu-id="12f4d-219">ProcessEventsAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_ProcessEventsAsync_Microsoft_ServiceBus_Messaging_PartitionContext_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__)

<span data-ttu-id="12f4d-220">przetwarzanie zdarzeń toostart wystąpienia [EventProcessorHost][], zapewniając hello odpowiednie parametry Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="12f4d-220">toostart event processing, instantiate [EventProcessorHost][], providing hello appropriate parameters for your event hub.</span></span> <span data-ttu-id="12f4d-221">Następnie wywołaj metodę [RegisterEventProcessorAsync](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost#Microsoft_ServiceBus_Messaging_EventProcessorHost_RegisterEventProcessorAsync__1) tooregister Twojego [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor) implementacji ze środowiskiem uruchomieniowym hello.</span><span class="sxs-lookup"><span data-stu-id="12f4d-221">Then, call [RegisterEventProcessorAsync](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost#Microsoft_ServiceBus_Messaging_EventProcessorHost_RegisterEventProcessorAsync__1) tooregister your [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor) implementation with hello runtime.</span></span> <span data-ttu-id="12f4d-222">W tym momencie hello host będzie podejmować tooacquire dzierżawy na każdej partycji w Centrum zdarzeń hello za pomocą "zachłannego" algorytmu.</span><span class="sxs-lookup"><span data-stu-id="12f4d-222">At this point, hello host will attempt tooacquire a lease on every partition in hello event hub using a "greedy" algorithm.</span></span> <span data-ttu-id="12f4d-223">Te dzierżawy będą trwać przez dany przedział czasu, a następnie muszą być odnowione.</span><span class="sxs-lookup"><span data-stu-id="12f4d-223">These leases will last for a given timeframe and must then be renewed.</span></span> <span data-ttu-id="12f4d-224">Jak nowe węzły wystąpień procesów roboczych w takim przypadku przejdzie w tryb online, ich rezerwacje dzierżawy i w czasie ładowania hello przewiduje między węzłami jako każdej próby tooacquire więcej dzierżaw.</span><span class="sxs-lookup"><span data-stu-id="12f4d-224">As new nodes, worker instances in this case, come online, they place lease reservations and over time hello load shifts between nodes as each attempts tooacquire more leases.</span></span>

![Host procesora zdarzeń](./media/event-hubs-programming-guide/IC759863.png)

<span data-ttu-id="12f4d-226">W miarę upływu czasu zostaje ustalona równowaga.</span><span class="sxs-lookup"><span data-stu-id="12f4d-226">Over time, an equilibrium is established.</span></span> <span data-ttu-id="12f4d-227">Ta dynamiczna funkcja umożliwia skalowania automatycznego na podstawie procesora CPU tooconsumers toobe stosowane do skalowania w górę i w dół.</span><span class="sxs-lookup"><span data-stu-id="12f4d-227">This dynamic capability enables CPU-based autoscaling toobe applied tooconsumers for both scale-up and scale-down.</span></span> <span data-ttu-id="12f4d-228">Ponieważ usługa Event Hubs nie ma bezpośredniej koncepcji liczby komunikatów, średnie wykorzystanie procesora CPU jest często hello najlepszym mechanizmem toomeasure wstecz skali zaplecza lub odbiorcy.</span><span class="sxs-lookup"><span data-stu-id="12f4d-228">Because Event Hubs do not have a direct concept of message counts, average CPU utilization is often hello best mechanism toomeasure back end or consumer scale.</span></span> <span data-ttu-id="12f4d-229">Jeśli wydawcy zaczną toopublish, który może przetwarzać więcej zdarzeń niż konsumentów, hello zwiększenie użycia procesora CPU przez odbiorców może być używane toocause automatyczne skalowanie liczby wystąpień procesu roboczego.</span><span class="sxs-lookup"><span data-stu-id="12f4d-229">If publishers begin toopublish more events than consumers can process, hello CPU increase on consumers can be used toocause an auto-scale on worker instance count.</span></span>

<span data-ttu-id="12f4d-230">Witaj [EventProcessorHost][] klasa implementuje również mechanizm Azure opartej na magazynie punkty kontrolne.</span><span class="sxs-lookup"><span data-stu-id="12f4d-230">hello [EventProcessorHost][] class also implements an Azure storage-based checkpointing mechanism.</span></span> <span data-ttu-id="12f4d-231">Jest to hello magazynów mechanizmu przesunięcie na podstawie partycji, dzięki czemu każdy odbiorca może określić, jakie hello ostatni punkt kontrolny od poprzedniego odbiorcy hello.</span><span class="sxs-lookup"><span data-stu-id="12f4d-231">This mechanism stores hello offset on a per partition basis, so that each consumer can determine what hello last checkpoint from hello previous consumer was.</span></span> <span data-ttu-id="12f4d-232">Ponieważ partycje przechodzą między węzłami za pośrednictwem dzierżaw, jest to mechanizm synchronizacji hello, który ułatwia przesunięcie obciążenia.</span><span class="sxs-lookup"><span data-stu-id="12f4d-232">As partitions transition between nodes via leases, this is hello synchronization mechanism that facilitates load shifting.</span></span>

## <a name="publisher-revocation"></a><span data-ttu-id="12f4d-233">Odwołanie wydawcy</span><span class="sxs-lookup"><span data-stu-id="12f4d-233">Publisher revocation</span></span>
<span data-ttu-id="12f4d-234">Ponadto toohello zaawansowane funkcje środowiska wykonawczego [EventProcessorHost][], usługa Event Hubs umożliwia odwołanie wydawcy w kolejności tooblock dostępu określonych wydawców do wysyłania zdarzeń tooan zdarzenia koncentratora.</span><span class="sxs-lookup"><span data-stu-id="12f4d-234">In addition toohello advanced run-time features of [EventProcessorHost][], Event Hubs enables publisher revocation in order tooblock specific publishers from sending event tooan event hub.</span></span> <span data-ttu-id="12f4d-235">Te funkcje są szczególnie przydatne, jeśli naruszono bezpieczeństwo tokenu wydawcy lub aktualizacja oprogramowania powoduje nieuprawnione toobehave niewłaściwie.</span><span class="sxs-lookup"><span data-stu-id="12f4d-235">These features are particularly useful if a publisher token has been compromised, or a software update is causing them toobehave inappropriately.</span></span> <span data-ttu-id="12f4d-236">W takich przypadkach tożsamości wydawcy hello, która jest częścią jego tokenu sygnatury dostępu Współdzielonego, można zablokować publikowania zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="12f4d-236">In these situations, hello publisher's identity, which is part of their SAS token, can be blocked from publishing events.</span></span>

<span data-ttu-id="12f4d-237">Aby uzyskać więcej informacji o odwołaniu wydawcy i toosend tooEvent Hubs jako wydawca, zobacz temat hello [zdarzeń koncentratory dużej skali bezpieczne publikowanie](https://code.msdn.microsoft.com/Service-Bus-Event-Hub-99ce67ab) próbki.</span><span class="sxs-lookup"><span data-stu-id="12f4d-237">For more information about publisher revocation and how toosend tooEvent Hubs as a publisher, see hello [Event Hubs Large Scale Secure Publishing](https://code.msdn.microsoft.com/Service-Bus-Event-Hub-99ce67ab) sample.</span></span>

## <a name="next-steps"></a><span data-ttu-id="12f4d-238">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="12f4d-238">Next steps</span></span>
<span data-ttu-id="12f4d-239">toolearn więcej informacji o scenariuszach usługi Event Hubs, odwiedź te linki:</span><span class="sxs-lookup"><span data-stu-id="12f4d-239">toolearn more about Event Hubs scenarios, visit these links:</span></span>

* [<span data-ttu-id="12f4d-240">Omówienie interfejsu API usługi Event Hubs</span><span class="sxs-lookup"><span data-stu-id="12f4d-240">Event Hubs API overview</span></span>](event-hubs-api-overview.md)
* [<span data-ttu-id="12f4d-241">Co to jest usługa Event Hubs</span><span class="sxs-lookup"><span data-stu-id="12f4d-241">What is Event Hubs</span></span>](event-hubs-what-is-event-hubs.md)
* <span data-ttu-id="12f4d-242">[Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md) (Dostępność i spójność w usłudze Event Hubs)</span><span class="sxs-lookup"><span data-stu-id="12f4d-242">[Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md)</span></span>
* [<span data-ttu-id="12f4d-243">Dokumentacja interfejsu API hosta procesora zdarzeń</span><span class="sxs-lookup"><span data-stu-id="12f4d-243">Event processor host API reference</span></span>](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost)

[NamespaceManager]: /dotnet/api/microsoft.servicebus.namespacemanager
[EventHubClient]: /dotnet/api/microsoft.servicebus.messaging.eventhubclient
[EventData]: /dotnet/api/microsoft.servicebus.messaging.eventdata
[CreateEventHubIfNotExists]: /dotnet/api/microsoft.servicebus.namespacemanager.createeventhubifnotexists
[PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.eventdata#Microsoft_ServiceBus_Messaging_EventData_PartitionKey
[EventProcessorHost]: /dotnet/api/microsoft.servicebus.messaging.eventprocessorhost
