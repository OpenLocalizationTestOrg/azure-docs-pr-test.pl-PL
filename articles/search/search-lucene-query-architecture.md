---
title: "Architektura aparatu (Lucene) aaaFull tekst wyszukiwania w usłudze Azure Search | Dokumentacja firmy Microsoft"
description: "Wyjaśnienie Lucene zapytań i przetwarzania dokumentów pobierania koncepcji wyszukiwanie pełnotekstowe jako powiązane tooAzure wyszukiwania."
services: search
manager: jhubbard
author: yahnoosh
documentationcenter: 
ms.service: search
ms.devlang: NA
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 04/06/2017
ms.author: jlembicz
ms.openlocfilehash: c6d1bea8d40154fd9237b9e44584cdfcd193cbd9
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="how-full-text-search-works-in-azure-search"></a><span data-ttu-id="80ff5-103">Ile wyszukiwanie pełnotekstowe działa w usłudze Azure Search</span><span class="sxs-lookup"><span data-stu-id="80ff5-103">How full text search works in Azure Search</span></span>

<span data-ttu-id="80ff5-104">Ten artykuł jest dla deweloperów, którzy potrzebują lepiej zrozumieć, jak działa wyszukiwanie pełnotekstowe Lucene w usłudze Azure Search.</span><span class="sxs-lookup"><span data-stu-id="80ff5-104">This article is for developers who need a deeper understanding of how Lucene full text search works in Azure Search.</span></span> <span data-ttu-id="80ff5-105">Tekst zapytania usługi Azure Search w większości przypadków będzie dostarczać bezproblemowo oczekiwanych rezultatów, ale niekiedy może otrzymać wynik, który wydaje się jakiś sposób "off".</span><span class="sxs-lookup"><span data-stu-id="80ff5-105">For text queries, Azure Search will seamlessly deliver expected results in most scenarios, but occasionally you might get a result that seems "off" somehow.</span></span> <span data-ttu-id="80ff5-106">W takich przypadkach posiadanie tło hello cztery etapy wykonywania zapytań Lucene (zapytania analizy, leksykalne analizy, dokumentów dopasowania, oceniania) mogą pomóc w identyfikacji parametrów tooquery określonej zmiany lub indeksu konfiguracji, które będzie dostarczać hello żądany wynik.</span><span class="sxs-lookup"><span data-stu-id="80ff5-106">In these situations, having a background in hello four stages of Lucene query execution (query parsing, lexical analysis, document matching, scoring) can help you identify specific changes tooquery parameters or index configuration that will deliver hello desired outcome.</span></span> 

> [!Note] 
> <span data-ttu-id="80ff5-107">Wyszukiwanie Azure używana Lucene wyszukiwania pełnotekstowego, ale nie jest wyczerpująca Lucene integracji.</span><span class="sxs-lookup"><span data-stu-id="80ff5-107">Azure Search uses Lucene for full text search, but Lucene integration is not exhaustive.</span></span> <span data-ttu-id="80ff5-108">Selektywnie możemy ujawniać i rozszerzyć Lucene funkcji tooenable hello scenariusze ważne tooAzure wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-108">We selectively expose and extend Lucene functionality tooenable hello scenarios important tooAzure Search.</span></span> 

## <a name="architecture-overview-and-diagram"></a><span data-ttu-id="80ff5-109">Przegląd architektury i diagramu</span><span class="sxs-lookup"><span data-stu-id="80ff5-109">Architecture overview and diagram</span></span>

<span data-ttu-id="80ff5-110">Przetwarzania zapytania wyszukiwania pełnotekstowego rozpoczyna się od analizy terminy wyszukiwania tooextract hello zapytania tekstu.</span><span class="sxs-lookup"><span data-stu-id="80ff5-110">Processing a full text search query starts with parsing hello query text tooextract search terms.</span></span> <span data-ttu-id="80ff5-111">Aparat wyszukiwania Hello używa indeksować dokumenty tooretrieve z pasujących terminów.</span><span class="sxs-lookup"><span data-stu-id="80ff5-111">hello search engine uses an index tooretrieve documents with matching terms.</span></span> <span data-ttu-id="80ff5-112">Warunki określone zapytanie czasami podziale i odtworzenia do nowego toocast formularze szerszych net za pośrednictwem co może być uznana za potencjalne dopasowania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-112">Individual query terms are sometimes broken down and reconstituted into new forms toocast a broader net over what could be considered as a potential match.</span></span> <span data-ttu-id="80ff5-113">Zestaw wyników jest posortowane według przydatności wynik przypisanej tooeach poszczególnych pasującego dokumentu.</span><span class="sxs-lookup"><span data-stu-id="80ff5-113">A result set is then sorted by a relevance score assigned tooeach individual matching document.</span></span> <span data-ttu-id="80ff5-114">Te u góry hello hello uszeregowane listy są zwracane aplikacja wywołująca toohello.</span><span class="sxs-lookup"><span data-stu-id="80ff5-114">Those at hello top of hello ranked list are returned toohello calling application.</span></span>

<span data-ttu-id="80ff5-115">Przekształcone, wykonywania zapytania składa się z czterech etapów:</span><span class="sxs-lookup"><span data-stu-id="80ff5-115">Restated, query execution has four stages:</span></span> 

1. <span data-ttu-id="80ff5-116">Podczas analizowania zapytania</span><span class="sxs-lookup"><span data-stu-id="80ff5-116">Query parsing</span></span> 
2. <span data-ttu-id="80ff5-117">Analiza leksykalne</span><span class="sxs-lookup"><span data-stu-id="80ff5-117">Lexical analysis</span></span> 
3. <span data-ttu-id="80ff5-118">Pobieranie dokumentu</span><span class="sxs-lookup"><span data-stu-id="80ff5-118">Document retrieval</span></span> 
4. <span data-ttu-id="80ff5-119">Oceniania</span><span class="sxs-lookup"><span data-stu-id="80ff5-119">Scoring</span></span> 

<span data-ttu-id="80ff5-120">przedstawiono na poniższym wykresie Hello hello składniki używane tooprocess żądania wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-120">hello diagram below illustrates hello components used tooprocess a search request.</span></span> 

 ![Diagram architektury zapytań Lucene w usłudze Azure Search][1]


| <span data-ttu-id="80ff5-122">Główne składniki</span><span class="sxs-lookup"><span data-stu-id="80ff5-122">Key components</span></span> | <span data-ttu-id="80ff5-123">Opis funkcjonalności</span><span class="sxs-lookup"><span data-stu-id="80ff5-123">Functional description</span></span> | 
|----------------|------------------------|
|<span data-ttu-id="80ff5-124">**Analizatory składni zapytania**</span><span class="sxs-lookup"><span data-stu-id="80ff5-124">**Query parsers**</span></span> | <span data-ttu-id="80ff5-125">Oddziel terminów zapytania z operatorów zapytań i Utwórz aparat wyszukiwania toohello toobe wysyłane hello zapytania struktury (drzewo kwerendy).</span><span class="sxs-lookup"><span data-stu-id="80ff5-125">Separate query terms from query operators and create hello query structure (a query tree) toobe sent toohello search engine.</span></span> |
|<span data-ttu-id="80ff5-126">**Analizatory**</span><span class="sxs-lookup"><span data-stu-id="80ff5-126">**Analyzers**</span></span> | <span data-ttu-id="80ff5-127">Analiza leksykalne na warunki zapytania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-127">Perform lexical analysis on query terms.</span></span> <span data-ttu-id="80ff5-128">Ten proces może obejmować Przekształcanie, usunięcie lub rozszerzania terminów zapytania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-128">This process can involve transforming, removing, or expanding of query terms.</span></span> |
|<span data-ttu-id="80ff5-129">**Indeks**</span><span class="sxs-lookup"><span data-stu-id="80ff5-129">**Index**</span></span> | <span data-ttu-id="80ff5-130">Struktura danych wydajne używane toostore i organizowanie warunki wyszukiwania wyodrębnione ze indeksowanych dokumentów.</span><span class="sxs-lookup"><span data-stu-id="80ff5-130">An efficient data structure used toostore and organize searchable terms extracted from indexed documents.</span></span> |
|<span data-ttu-id="80ff5-131">**Aparat wyszukiwania**</span><span class="sxs-lookup"><span data-stu-id="80ff5-131">**Search engine**</span></span> | <span data-ttu-id="80ff5-132">Pobiera i wyników pasujących dokumentów na podstawie zawartości hello hello odwrócony indeksu.</span><span class="sxs-lookup"><span data-stu-id="80ff5-132">Retrieves and scores matching documents based on hello contents of hello inverted index.</span></span> |

## <a name="anatomy-of-a-search-request"></a><span data-ttu-id="80ff5-133">Anatomia żądania wyszukiwania</span><span class="sxs-lookup"><span data-stu-id="80ff5-133">Anatomy of a search request</span></span>

<span data-ttu-id="80ff5-134">Żądania wyszukiwania jest pełna Specyfikacja powinny być zwracane w zestawie wyników.</span><span class="sxs-lookup"><span data-stu-id="80ff5-134">A search request is a complete specification of what should be returned in a result set.</span></span> <span data-ttu-id="80ff5-135">W najprostszej postaci jest pusty zapytania z kryteriów dowolnego rodzaju.</span><span class="sxs-lookup"><span data-stu-id="80ff5-135">In simplest form, it is an empty query with no criteria of any kind.</span></span> <span data-ttu-id="80ff5-136">Przykład bardziej realistyczne zawiera parametry, dolny limit kwerendy kilka warunków, prawdopodobnie zakresie toocertain pola, prawdopodobnie wyrażenie filtru i uporządkowanie reguł.</span><span class="sxs-lookup"><span data-stu-id="80ff5-136">A more realistic example includes parameters, several query terms, perhaps scoped toocertain fields, with possibly a filter expression and ordering rules.</span></span>  

<span data-ttu-id="80ff5-137">Witaj poniższym przykładzie jest tooAzure wyszukiwania może wysyłać żądania wyszukiwania przy użyciu hello [interfejsu API REST](https://docs.microsoft.com/rest/api/searchservice/search-documents).</span><span class="sxs-lookup"><span data-stu-id="80ff5-137">hello following example is a search request you might send tooAzure Search using hello [REST API](https://docs.microsoft.com/rest/api/searchservice/search-documents).</span></span>  

~~~~
POST /indexes/hotels/docs/search?api-version=2016-09-01 
{  
    "search": "Spacious, air-condition* +\"Ocean view\"",  
    "searchFields": "description, title",  
    "searchMode": "any",
    "filter": "price ge 60 and price lt 300",  
    "orderby": "geo.distance(location, geography'POINT(-159.476235 22.227659)')", 
    "queryType": "full" 
 } 
~~~~

<span data-ttu-id="80ff5-138">Dla tego żądania aparatu wyszukiwania hello hello następujące:</span><span class="sxs-lookup"><span data-stu-id="80ff5-138">For this request, hello search engine does hello following:</span></span>

1. <span data-ttu-id="80ff5-139">Odfiltrowuje dokumentów, których ceny hello jest co najmniej 60 $ i mniejsza niż 300.</span><span class="sxs-lookup"><span data-stu-id="80ff5-139">Filters out documents where hello price is at least $60 and less than $300.</span></span>
2. <span data-ttu-id="80ff5-140">Wykonuje zapytanie hello.</span><span class="sxs-lookup"><span data-stu-id="80ff5-140">Executes hello query.</span></span> <span data-ttu-id="80ff5-141">W tym przykładzie zapytanie wyszukiwania hello składa się z wyrażenia oraz postanowienia: `"Spacious, air-condition* +\"Ocean view\""` (użytkownicy zwykle nie wprowadzaj znaki interpunkcyjne, ale tym go w przykładzie hello pozwala nam tooexplain jak analizatorów jego obsługa).</span><span class="sxs-lookup"><span data-stu-id="80ff5-141">In this example, hello search query consists of phrases and terms: `"Spacious, air-condition* +\"Ocean view\""` (users typically don't enter punctuation, but including it in hello example allows us tooexplain how analyzers handle it).</span></span> <span data-ttu-id="80ff5-142">Dla tego zapytania, aparat wyszukiwania hello skanuje hello opis i tytuł pola określone w `searchFields` dokumentów zawierających "Oceanu widok" i dodatkowo na powitania termin "obszerne" lub na warunkach rozpoczynających się od prefiksu powitania "air-condition".</span><span class="sxs-lookup"><span data-stu-id="80ff5-142">For this query, hello search engine scans hello description and title fields specified in `searchFields` for documents that contain "Ocean view", and additionally on hello term "spacious", or on terms that start with hello prefix "air-condition".</span></span> <span data-ttu-id="80ff5-143">Witaj `searchMode` parametr jest używany toomatch na wszystkie wyrażenia (ustawienie domyślne) lub wszystkie z nich w przypadkach, gdy warunek nie jest jawnie wymagane (`+`).</span><span class="sxs-lookup"><span data-stu-id="80ff5-143">hello `searchMode` parameter is used toomatch on any term (default) or all of them, for cases where a term is not explicitly required (`+`).</span></span>
3. <span data-ttu-id="80ff5-144">Zamówienia hello Wynikowy zestaw hoteli przez tooa zbliżeniowe podanej lokalizacji geograficznych, a następnie zwracany aplikacja wywołująca toohello.</span><span class="sxs-lookup"><span data-stu-id="80ff5-144">Orders hello resulting set of hotels by proximity tooa given geography location, and then returned toohello calling application.</span></span> 

<span data-ttu-id="80ff5-145">Hello większość ten artykuł dotyczy przetwarzania hello *zapytania wyszukiwania*: `"Spacious, air-condition* +\"Ocean view\""`.</span><span class="sxs-lookup"><span data-stu-id="80ff5-145">hello majority of this article is about processing of hello *search query*: `"Spacious, air-condition* +\"Ocean view\""`.</span></span> <span data-ttu-id="80ff5-146">Filtrowanie i kolejność są poza zakresem.</span><span class="sxs-lookup"><span data-stu-id="80ff5-146">Filtering and ordering are out of scope.</span></span> <span data-ttu-id="80ff5-147">Aby uzyskać więcej informacji, zobacz hello [dokumentacji interfejsu API wyszukiwania](https://docs.microsoft.com/rest/api/searchservice/search-documents).</span><span class="sxs-lookup"><span data-stu-id="80ff5-147">For more information, see hello [Search API reference documentation](https://docs.microsoft.com/rest/api/searchservice/search-documents).</span></span>

<a name="stage1"></a>
## <a name="stage-1-query-parsing"></a><span data-ttu-id="80ff5-148">Etap 1: Podczas analizowania zapytania</span><span class="sxs-lookup"><span data-stu-id="80ff5-148">Stage 1: Query parsing</span></span> 

<span data-ttu-id="80ff5-149">Jak wspomniano, ciąg zapytania hello jest hello pierwszego wiersza żądania hello:</span><span class="sxs-lookup"><span data-stu-id="80ff5-149">As noted, hello query string is hello first line of hello request:</span></span> 

~~~~
 "search": "Spacious, air-condition* +\"Ocean view\"", 
~~~~

<span data-ttu-id="80ff5-150">Analizator oddziela operatory zapytań Hello (takich jak `*` i `+` w przykładzie hello) z wyszukiwania definicje terminów i deconstructs hello zapytania wyszukiwania w *podzapytania* obsługiwanego typu:</span><span class="sxs-lookup"><span data-stu-id="80ff5-150">hello query parser separates operators (such as `*` and `+` in hello example) from search terms, and deconstructs hello search query into *subqueries* of a supported type:</span></span> 

+ <span data-ttu-id="80ff5-151">*Termin kwerendy* terminów autonomiczne (takich jak obszerne)</span><span class="sxs-lookup"><span data-stu-id="80ff5-151">*term query* for standalone terms (like spacious)</span></span>
+ <span data-ttu-id="80ff5-152">*Wyrażenie kwerendy* terminów ujętego w cudzysłów (na przykład Oceanu widoku)</span><span class="sxs-lookup"><span data-stu-id="80ff5-152">*phrase query* for quoted terms (like ocean view)</span></span>
+ <span data-ttu-id="80ff5-153">*Prefiks zapytania* warunków, a następnie operatora prefiksu `*` (np. air-condition)</span><span class="sxs-lookup"><span data-stu-id="80ff5-153">*prefix query* for terms followed by a prefix operator `*` (like air-condition)</span></span>

<span data-ttu-id="80ff5-154">Pełna lista zapytań obsługiwanych typów [sytnax zapytań Lucene](https://docs.microsoft.com/rest/api/searchservice/lucene-query-syntax-in-azure-search)</span><span class="sxs-lookup"><span data-stu-id="80ff5-154">For a full list of supported query types see [Lucene query sytnax](https://docs.microsoft.com/rest/api/searchservice/lucene-query-syntax-in-azure-search)</span></span>

<span data-ttu-id="80ff5-155">Operatory skojarzone z podzapytania sprawdzenia, czy zapytanie hello "musi być" "powinien być" spełniony w kolejności dla dokumentu toobe uznane za pasujące.</span><span class="sxs-lookup"><span data-stu-id="80ff5-155">Operators associated with a subquery determine whether hello query "must be" or "should be" satisfied in order for a document toobe considered a match.</span></span> <span data-ttu-id="80ff5-156">Na przykład `+"Ocean view"` "muszą" z powodu toohello `+` operatora.</span><span class="sxs-lookup"><span data-stu-id="80ff5-156">For example, `+"Ocean view"` is "must" due toohello `+` operator.</span></span> 

<span data-ttu-id="80ff5-157">Analizator składni zapytań Hello restrukturyzuje podzapytania hello do *zapytania drzewa* (wewnętrznej struktury reprezentujący zapytania hello) przekazuje na toohello wyszukiwarki.</span><span class="sxs-lookup"><span data-stu-id="80ff5-157">hello query parser restructures hello subqueries into a *query tree* (an internal structure representing hello query) it passes on toohello search engine.</span></span> <span data-ttu-id="80ff5-158">Na powitania pierwszego etapu zapytania podczas analizowania drzewa zapytania hello wygląda następująco.</span><span class="sxs-lookup"><span data-stu-id="80ff5-158">In hello first stage of query parsing, hello query tree looks like this.</span></span>  

 ![Wartość logiczna zapytania searchmode any][2]

### <a name="supported-parsers-simple-and-full-lucene"></a><span data-ttu-id="80ff5-160">Obsługiwane analizatory składni: proste i Pełna Lucene</span><span class="sxs-lookup"><span data-stu-id="80ff5-160">Supported parsers: Simple and Full Lucene</span></span> 

 <span data-ttu-id="80ff5-161">Usługa Azure Search udostępnia dwa języki inne zapytanie, `simple` (ustawienie domyślne) i `full`.</span><span class="sxs-lookup"><span data-stu-id="80ff5-161">Azure Search exposes two different query languages, `simple` (default) and `full`.</span></span> <span data-ttu-id="80ff5-162">Przez ustawienie hello `queryType` parametru do żądania wyszukiwania, można sprawdzić analizator składni zapytań hello język zapytań, które można wybrać co wiadomo jak toointerpret hello operatory i składni.</span><span class="sxs-lookup"><span data-stu-id="80ff5-162">By setting hello `queryType` parameter with your search request, you tell hello query parser which query language you choose so that it knows how toointerpret hello operators and syntax.</span></span> <span data-ttu-id="80ff5-163">Witaj [langauge prostego zapytania](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search) intuicyjne i niezawodne, toointerpret często odpowiednie dane wejściowe użytkownika jako — bez przetwarzania po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="80ff5-163">hello [Simple query langauge](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search) is intuitive and robust, often suitable toointerpret user input as-is without client-side processing.</span></span> <span data-ttu-id="80ff5-164">Obsługuje ona operatorów zapytań zapoznać się z wyszukiwarek sieci web.</span><span class="sxs-lookup"><span data-stu-id="80ff5-164">It supports query operators familiar from web search engines.</span></span> <span data-ttu-id="80ff5-165">Hello [język zapytań Lucene pełne](https://docs.microsoft.com/rest/api/searchservice/lucene-query-syntax-in-azure-search), który można uzyskać za pomocą ustawienia `queryType=full`, rozszerza hello domyślnym językiem zapytań proste, dodając obsługę więcej operatory i typy zapytań, takich jak symbolu wieloznacznego rozmytego, wyrażenie regularne i zapytania należące do zakresu pola.</span><span class="sxs-lookup"><span data-stu-id="80ff5-165">hello [Full Lucene query language](https://docs.microsoft.com/rest/api/searchservice/lucene-query-syntax-in-azure-search), which you get by setting `queryType=full`, extends hello default Simple query language by adding support for more operators and query types like wildcard, fuzzy, regex, and field-scoped queries.</span></span> <span data-ttu-id="80ff5-166">Na przykład wyrażenia regularnego wysyłany w prosta składnia zapytań zostanie zinterpretowany jako ciąg zapytania i nie wyrażenie.</span><span class="sxs-lookup"><span data-stu-id="80ff5-166">For example, a regular expression sent in Simple query syntax would be interpreted as a query string and not an expression.</span></span> <span data-ttu-id="80ff5-167">Witaj przykładowe żądanie, w tym artykule używa język zapytań Lucene pełne hello.</span><span class="sxs-lookup"><span data-stu-id="80ff5-167">hello example request in this article uses hello Full Lucene query language.</span></span>

### <a name="impact-of-searchmode-on-hello-parser"></a><span data-ttu-id="80ff5-168">Wpływ searchMode parsera hello</span><span class="sxs-lookup"><span data-stu-id="80ff5-168">Impact of searchMode on hello parser</span></span> 

<span data-ttu-id="80ff5-169">Inny parametr żądania wyszukiwania wpływającym na analizowanie jest hello `searchMode` parametru.</span><span class="sxs-lookup"><span data-stu-id="80ff5-169">Another search request parameter that affects parsing is hello `searchMode` parameter.</span></span> <span data-ttu-id="80ff5-170">Kontroluje hello domyślnego operatora logiczna zapytań: wszelkie (ustawienie domyślne) lub wszystkie.</span><span class="sxs-lookup"><span data-stu-id="80ff5-170">It controls hello default operator for Boolean queries: any (default) or all.</span></span>  

<span data-ttu-id="80ff5-171">Gdy `searchMode=any`, który jest domyślnym hello, hello miejsca separator obszerne i air-condition jest lub (`||`), co odpowiednikiem hello przykładowy tekst zapytania:</span><span class="sxs-lookup"><span data-stu-id="80ff5-171">When `searchMode=any`, which is hello default, hello space delimiter between spacious and air-condition is OR (`||`), making hello sample query text equivalent to:</span></span> 

~~~~
Spacious,||air-condition*+"Ocean view" 
~~~~

<span data-ttu-id="80ff5-172">Operatory jawnej, takich jak `+` w `+"Ocean view"`, są jednoznaczne konstrukcji Zapytanie logiczne (termin hello *musi* zgodne).</span><span class="sxs-lookup"><span data-stu-id="80ff5-172">Explicit operators, such as `+` in `+"Ocean view"`, are unambiguous in boolean query construction (hello term *must* match).</span></span> <span data-ttu-id="80ff5-173">Jest mniej oczywista, jak warunki hello toointerpret pozostałych: obszerne i air-condition.</span><span class="sxs-lookup"><span data-stu-id="80ff5-173">Less obvious is how toointerpret hello remaining terms: spacious and air-condition.</span></span> <span data-ttu-id="80ff5-174">Aparat wyszukiwania hello stwierdzi, że dopasowań w widoku Oceanu *i* obszerne *i* air-condition?</span><span class="sxs-lookup"><span data-stu-id="80ff5-174">Should hello search engine find matches on ocean view *and* spacious *and* air-condition?</span></span> <span data-ttu-id="80ff5-175">Lub należy znaleźć widoku Oceanu plus *jedną* z hello pozostałe postanowienia?</span><span class="sxs-lookup"><span data-stu-id="80ff5-175">Or should it find ocean view plus *either one* of hello remaining terms?</span></span> 

<span data-ttu-id="80ff5-176">Domyślnie (`searchMode=any`), aparat wyszukiwania hello zakłada interpretacji szerszych hello.</span><span class="sxs-lookup"><span data-stu-id="80ff5-176">By default (`searchMode=any`), hello search engine assumes hello broader interpretation.</span></span> <span data-ttu-id="80ff5-177">Pole albo *powinien* można dopasować, odzwierciedlający semantyki "lub".</span><span class="sxs-lookup"><span data-stu-id="80ff5-177">Either field *should* be matched, reflecting "or" semantics.</span></span> <span data-ttu-id="80ff5-178">Hello początkowego zapytania drzewa wcześniej, zilustrować na przykładzie Witaj dwie "powinien" operacje, pokazuje hello domyślne.</span><span class="sxs-lookup"><span data-stu-id="80ff5-178">hello initial query tree illustrated previously, with hello two "should" operations, shows hello default.</span></span>  

<span data-ttu-id="80ff5-179">Załóżmy, że mamy teraz ustawić `searchMode=all`.</span><span class="sxs-lookup"><span data-stu-id="80ff5-179">Suppose that we now set `searchMode=all`.</span></span> <span data-ttu-id="80ff5-180">W takim przypadku miejsca hello jest interpretowany jako operacji "i".</span><span class="sxs-lookup"><span data-stu-id="80ff5-180">In this case, hello space is interpreted as an "and" operation.</span></span> <span data-ttu-id="80ff5-181">Każdej z pozostałych warunków hello musi jednocześnie występować w hello tooqualify dokumentu jako dopasowanie.</span><span class="sxs-lookup"><span data-stu-id="80ff5-181">Each of hello remaining terms must both be present in hello document tooqualify as a match.</span></span> <span data-ttu-id="80ff5-182">Witaj wynikowy przykładowe zapytanie zostanie zinterpretowany w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="80ff5-182">hello resulting sample query would be interpreted as follows:</span></span> 

~~~~
+Spacious,+air-condition*+"Ocean view"  
~~~~

<span data-ttu-id="80ff5-183">Drzewo zmodyfikowane zapytanie dla tego zapytania zostaną wyświetlone następujące, gdzie pasującego dokumentu jest hello przecięcia wszystkie trzy podzapytania:</span><span class="sxs-lookup"><span data-stu-id="80ff5-183">A modified query tree for this query would be as follows, where a matching document is hello intersection of all three subqueries:</span></span> 

 ![Wszystkie searchmode Zapytanie logiczne][3]

> [!Note] 
> <span data-ttu-id="80ff5-185">Wybieranie `searchMode=any` za pośrednictwem `searchMode=all` jest najlepszych decyzji dotarły uruchamiając reprezentatywny zapytania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-185">Choosing `searchMode=any` over `searchMode=all` is a decision best arrived at by running representative queries.</span></span> <span data-ttu-id="80ff5-186">Użytkownicy, którzy są prawdopodobnie tooinclude operatory (wspólna podczas wyszukiwania dokumentu przechowuje) stało się wyniki bardziej intuicyjne `searchMode=all` informuje konstrukcje Zapytanie logiczne.</span><span class="sxs-lookup"><span data-stu-id="80ff5-186">Users who are likely tooinclude operators (common when searching document stores) might find results more intuitive if `searchMode=all` informs boolean query constructs.</span></span> <span data-ttu-id="80ff5-187">Aby uzyskać więcej informacji na temat oddziaływanie hello wzajemne między `searchMode` i operatorów, zobacz [prosta składnia zapytań](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search).</span><span class="sxs-lookup"><span data-stu-id="80ff5-187">For more about hello interplay between `searchMode` and operators, see [Simple query syntax](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search).</span></span>

<a name="stage2"></a>
## <a name="stage-2-lexical-analysis"></a><span data-ttu-id="80ff5-188">Etapu 2: Analiza leksykalne</span><span class="sxs-lookup"><span data-stu-id="80ff5-188">Stage 2: Lexical analysis</span></span> 

<span data-ttu-id="80ff5-189">Proces leksykalne analizatorów *termin zapytania* i *frazę zapytania* po hello zapytania drzewa mają strukturę.</span><span class="sxs-lookup"><span data-stu-id="80ff5-189">Lexical analyzers process *term queries* and *phrase queries* after hello query tree is structured.</span></span> <span data-ttu-id="80ff5-190">Analizator akceptuje hello tooit podane dane wejściowe tekstu przez hello parser, procesy hello tekstu i następnie wysyła ponownie podzielić na tokeny postanowienia, które toobe włączona do hello zapytania drzewa.</span><span class="sxs-lookup"><span data-stu-id="80ff5-190">An analyzer accepts hello text inputs given tooit by hello parser, processes hello text, and then sends back tokenized terms toobe incorporated into hello query tree.</span></span> 

<span data-ttu-id="80ff5-191">Formularz najczęściej Hello leksykalne analizy *językową analiza* który przekształca terminów zapytania oparte na tooa określone zasady danego języka:</span><span class="sxs-lookup"><span data-stu-id="80ff5-191">hello most common form of lexical analysis is *linguistic analysis* which transforms query terms based on rules specific tooa given language:</span></span> 

* <span data-ttu-id="80ff5-192">Zmniejszenie formularza głównego zapytania termin toohello słowa</span><span class="sxs-lookup"><span data-stu-id="80ff5-192">Reducing a query term toohello root form of a word</span></span> 
* <span data-ttu-id="80ff5-193">Usuwanie nieistotne wyrazów (odrzucanych, takie jak "" lub "i" w języku angielskim)</span><span class="sxs-lookup"><span data-stu-id="80ff5-193">Removing non-essential words (stopwords, such as "the" or "and" in English)</span></span> 
* <span data-ttu-id="80ff5-194">Fundamentalne wyraz złożony na części składnika</span><span class="sxs-lookup"><span data-stu-id="80ff5-194">Breaking a composite word into component parts</span></span> 
* <span data-ttu-id="80ff5-195">Małą wielkość liter word wielkimi literami</span><span class="sxs-lookup"><span data-stu-id="80ff5-195">Lower casing an upper case word</span></span> 

<span data-ttu-id="80ff5-196">Wszystkie te operacje zwykle tooerase różnice między hello tekst wejściowych przez postanowienia użytkownika i hello hello przechowywane w indeksie hello.</span><span class="sxs-lookup"><span data-stu-id="80ff5-196">All of these operations tend tooerase differences between hello text input provided by hello user and hello terms stored in hello index.</span></span> <span data-ttu-id="80ff5-197">Takie operacje wykracza poza przetwarzania tekstu i wymaga dogłębnej wiedzy języka hello, sama.</span><span class="sxs-lookup"><span data-stu-id="80ff5-197">Such operations go beyond text processing and require in-depth knowledge of hello language itself.</span></span> <span data-ttu-id="80ff5-198">tooadd tej warstwy w przypadku świadomości, usługi Azure Search obsługuje długą listę [analizatorów języka](https://docs.microsoft.com/rest/api/searchservice/language-support) z Lucene i firmy Microsoft.</span><span class="sxs-lookup"><span data-stu-id="80ff5-198">tooadd this layer of linguistic awareness, Azure Search supports a long list of [language analyzers](https://docs.microsoft.com/rest/api/searchservice/language-support) from both Lucene and Microsoft.</span></span>

> [!Note]
> <span data-ttu-id="80ff5-199">Wymagania dotyczące analizy może należeć do zakresu od minimalnej tooelaborate w zależności od danego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="80ff5-199">Analysis requirements can range from minimal tooelaborate depending on your scenario.</span></span> <span data-ttu-id="80ff5-200">Można kontrolować złożoności leksykalne analizy hello, wybierając jedną z analizatorów hello wstępnie zdefiniowanych lub tworząc własne [analizatora niestandardowego](https://docs.microsoft.com/rest/api/searchservice/Custom-analyzers-in-Azure-Search).</span><span class="sxs-lookup"><span data-stu-id="80ff5-200">You can control complexity of lexical analysis by hello selecting one of hello predefined analyzers or by creating your own [custom analyzer](https://docs.microsoft.com/rest/api/searchservice/Custom-analyzers-in-Azure-Search).</span></span> <span data-ttu-id="80ff5-201">Analizatory są zakresami toosearchable i są określone jako część definicji pola.</span><span class="sxs-lookup"><span data-stu-id="80ff5-201">Analyzers are scoped toosearchable fields and are specified as part of a field definition.</span></span> <span data-ttu-id="80ff5-202">Dzięki temu można toovary leksykalne analizy na podstawie na pola.</span><span class="sxs-lookup"><span data-stu-id="80ff5-202">This allows you toovary lexical analysis on a per-field basis.</span></span> <span data-ttu-id="80ff5-203">Nieokreślona, hello *standardowe* Lucene Analizator jest używany.</span><span class="sxs-lookup"><span data-stu-id="80ff5-203">Unspecified, hello *standard* Lucene analyzer is used.</span></span>

<span data-ttu-id="80ff5-204">W naszym przykładzie wcześniejsze tooanalysis hello początkowego zapytania drzewa ma hello termin "Spacious" z wielkimi literami "S" i przecinek hello analizator składni zapytań interpretowane jako część hello wyszukiwanego terminu (przecinek nie jest uznawany za operatora język kwerendy).</span><span class="sxs-lookup"><span data-stu-id="80ff5-204">In our example, prior tooanalysis, hello initial query tree has hello term "Spacious," with an uppercase "S" and a comma that hello query parser interprets as a part of hello query term (a comma is not considered a query language operator).</span></span>  

<span data-ttu-id="80ff5-205">Kiedy hello domyślnego analizatora przetwarza hello termin, zostanie małe litery "Oceanu widok" i "obszerne" i Usuń znak przecinkami hello.</span><span class="sxs-lookup"><span data-stu-id="80ff5-205">When hello default analyzer processes hello term, it will lowercase "ocean view" and "spacious", and remove hello comma character.</span></span> <span data-ttu-id="80ff5-206">Witaj zmodyfikowane zapytanie drzewa będzie wyglądać w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="80ff5-206">hello modified query tree will look as follows:</span></span> 

 ![Wartość logiczna zapytania z warunkami przeanalizowane][4]

### <a name="testing-analyzer-behaviors"></a><span data-ttu-id="80ff5-208">Testowanie zachowania analizatora</span><span class="sxs-lookup"><span data-stu-id="80ff5-208">Testing analyzer behaviors</span></span> 

<span data-ttu-id="80ff5-209">zachowanie Hello analizatora można przetestować przy użyciu hello [analizowanie interfejsu API](https://docs.microsoft.com/rest/api/searchservice/test-analyzer).</span><span class="sxs-lookup"><span data-stu-id="80ff5-209">hello behavior of an analyzer can be tested using hello [Analyze API](https://docs.microsoft.com/rest/api/searchservice/test-analyzer).</span></span> <span data-ttu-id="80ff5-210">Podaj hello tekst, który chcesz tooanalyze toosee wygeneruje jakie pojęcia analizatora.</span><span class="sxs-lookup"><span data-stu-id="80ff5-210">Provide hello text you want tooanalyze toosee what terms given analyzer will generate.</span></span> <span data-ttu-id="80ff5-211">Na przykład jak standardowe analizatora hello może przetwarzać toosee hello tekst "air-condition", możesz wykonywać następujące żądania hello:</span><span class="sxs-lookup"><span data-stu-id="80ff5-211">For example, toosee how hello standard analyzer would process hello text "air-condition", you can issue hello following request:</span></span>

~~~~
{ 
    "text": "air-condition",
    "analyzer": "standard"
}
~~~~

<span data-ttu-id="80ff5-212">Analizator standardowe Hello dzieli tekstu wejściowego hello na powitania po dwa tokeny, dodawanie adnotacji do nich z atrybutów, takich jak rozpoczęcia i zakończenia przesunięcia (używanych do wyróżnianie trafień), a także ich pozycji (używane na potrzeby uzgadniania frazy):</span><span class="sxs-lookup"><span data-stu-id="80ff5-212">hello standard analyzer breaks hello input text into hello following two tokens, annotating them with attributes like start and end offsets (used for hit highlighting) as well as their position (used for phrase matching):</span></span>

~~~~
{  
  "tokens": [
    {
      "token": "air",
      "startOffset": 0,
      "endOffset": 3,
      "position": 0
    },
    {
      "token": "condition",
      "startOffset": 4,
      "endOffset": 13,
      "position": 1
    }
  ]
}
~~~~

### <a name="exceptions-toolexical-analysis"></a><span data-ttu-id="80ff5-213">Analiza toolexical wyjątków</span><span class="sxs-lookup"><span data-stu-id="80ff5-213">Exceptions toolexical analysis</span></span> 

<span data-ttu-id="80ff5-214">Analiza leksykalne stosuje tooquery tylko te typy, które wymagają pełną warunki — zapytania termin lub frazę zapytania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-214">Lexical analysis applies only tooquery types that require complete terms – either a term query or a phrase query.</span></span> <span data-ttu-id="80ff5-215">Nie dotyczy typów tooquery z warunkami niekompletne — prefiks zapytania, wieloznaczne, zapytania regex — lub tooa rozmytego zapytania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-215">It doesn’t apply tooquery types with incomplete terms – prefix query, wildcard query, regex query – or tooa fuzzy query.</span></span> <span data-ttu-id="80ff5-216">Te typy, tym query prefiks hello terminem zapytań *air-condition\**  w naszym przykładzie zostaną dodane bezpośrednio toohello zapytania drzewa, pomijanie hello analizy etapu.</span><span class="sxs-lookup"><span data-stu-id="80ff5-216">Those query types, including hello prefix query with term *air-condition\** in our example, are added directly toohello query tree, bypassing hello analysis stage.</span></span> <span data-ttu-id="80ff5-217">Witaj tylko przekształcania wykonywane na terminów zapytania tych typów jest lowercasing.</span><span class="sxs-lookup"><span data-stu-id="80ff5-217">hello only transformation performed on query terms of those types is lowercasing.</span></span>

<a name="stage3"></a>
## <a name="stage-3-document-retrieval"></a><span data-ttu-id="80ff5-218">Etapu 3: Pobieranie dokumentu</span><span class="sxs-lookup"><span data-stu-id="80ff5-218">Stage 3: Document retrieval</span></span> 

<span data-ttu-id="80ff5-219">Pobieranie dokumentu odwołuje się toofinding dokumenty z pasujących terminów hello indeksu.</span><span class="sxs-lookup"><span data-stu-id="80ff5-219">Document retrieval refers toofinding documents with matching terms in hello index.</span></span> <span data-ttu-id="80ff5-220">Ten etap jest rozpoznawany najlepiej za pośrednictwem przykładem.</span><span class="sxs-lookup"><span data-stu-id="80ff5-220">This stage is understood best through an example.</span></span> <span data-ttu-id="80ff5-221">Zacznijmy od indeksu hotels o powitania od prostego schematu:</span><span class="sxs-lookup"><span data-stu-id="80ff5-221">Let's start with a hotels index having hello following simple schema:</span></span> 

~~~~
{   
    "name": "hotels",     
    "fields": [     
        { "name": "id", "type": "Edm.String", "key": true, "searchable": false },     
        { "name": "title", "type": "Edm.String", "searchable": true },     
        { "name": "description", "type": "Edm.String", "searchable": true }
    ] 
} 
~~~~

<span data-ttu-id="80ff5-222">Dodatkowo założono, że ten indeks zawiera następujące cztery dokumenty hello:</span><span class="sxs-lookup"><span data-stu-id="80ff5-222">Further assume that this index contains hello following four documents:</span></span> 

~~~~
{ 
    "value": [
        {         
            "id": "1",         
            "title": "Hotel Atman",         
            "description": "Spacious rooms, ocean view, walking distance toohello beach."   
        },       
        {         
            "id": "2",         
            "title": "Beach Resort",        
            "description": "Located on hello north shore of hello island of Kauaʻi. Ocean view."     
        },       
        {         
            "id": "3",         
            "title": "Playa Hotel",         
            "description": "Comfortable, air-conditioned rooms with ocean view."
        },       
        {         
            "id": "4",         
            "title": "Ocean Retreat",         
            "description": "Quiet and secluded"
        }    
    ]
}
~~~~

<span data-ttu-id="80ff5-223">**Jak są indeksowane warunków**</span><span class="sxs-lookup"><span data-stu-id="80ff5-223">**How terms are indexed**</span></span>

<span data-ttu-id="80ff5-224">Pobieranie toounderstand pomaga tooknow podstaw indeksowania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-224">toounderstand retrieval, it helps tooknow a few basics about indexing.</span></span> <span data-ttu-id="80ff5-225">Jednostka Hello magazynu jest odwrócony indeksu, po jednej dla każdego pola wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-225">hello unit of storage is an inverted index, one for each searchable field.</span></span> <span data-ttu-id="80ff5-226">W ramach odwrócony indeksu jest posortowana lista wszystkie warunki z wszystkie dokumenty.</span><span class="sxs-lookup"><span data-stu-id="80ff5-226">Within an inverted index is a sorted list of all terms from all documents.</span></span> <span data-ttu-id="80ff5-227">Każdego terminu mapuje toohello listy dokumentów, w których występuje, jak widoczne w poniższym przykładzie hello.</span><span class="sxs-lookup"><span data-stu-id="80ff5-227">Each term maps toohello list of documents in which it occurs, as evident in hello example below.</span></span>

<span data-ttu-id="80ff5-228">warunki hello tooproduce odwrócony indeksu hello wyszukiwarki wykonuje leksykalne analizy za pośrednictwem hello zawartość dokumentów, podobne toowhat odbywa się podczas przetwarzania zapytania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-228">tooproduce hello terms in an inverted index, hello search engine performs lexical analysis over hello content of documents, similar toowhat happens during query processing.</span></span> <span data-ttu-id="80ff5-229">Tekst dane wejściowe są przekazywane analizator tooan, małych liter, pozbawione znaki interpunkcyjne i tak dalej, w zależności od konfiguracji analizatora hello.</span><span class="sxs-lookup"><span data-stu-id="80ff5-229">Text inputs are passed tooan analyzer, lower-cased, stripped of punctuation, and so forth, depending on hello analyzer configuration.</span></span> <span data-ttu-id="80ff5-230">Wspólne, ale nie są wymagane, toouse hello tego samego analizatorów dla wyszukiwanie i indeksowanie operacje, dzięki czemu terminów zapytania wyglądu warunków wewnątrz hello indeksu.</span><span class="sxs-lookup"><span data-stu-id="80ff5-230">It's common, but not required, toouse hello same analyzers for search and indexing operations so that query terms look more like terms inside hello index.</span></span>

> [!Note]
> <span data-ttu-id="80ff5-231">Wyszukiwanie Azure pozwala określić różne analizatorów do indeksowania i wyszukiwania za pomocą dodatkowych `indexAnalyzer` i `searchAnalyzer` pól parametrów.</span><span class="sxs-lookup"><span data-stu-id="80ff5-231">Azure Search lets you specify different analyzers for indexing and search via additional `indexAnalyzer` and `searchAnalyzer` field parameters.</span></span> <span data-ttu-id="80ff5-232">Jeśli nie zostanie podany, hello analizatora ustawiony za pomocą hello `analyzer` właściwość jest używana zarówno indeksowania i wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-232">If unspecified, hello analyzer set with hello `analyzer` property is used for both indexing and searching.</span></span>  

<span data-ttu-id="80ff5-233">**Odwrócony indeksu dla dokumentów przykład**</span><span class="sxs-lookup"><span data-stu-id="80ff5-233">**Inverted index for example documents**</span></span>

<span data-ttu-id="80ff5-234">Zwracanie tooour przykład w przypadku hello **tytuł** pola indeksu hello odwrócony wygląda jak to:</span><span class="sxs-lookup"><span data-stu-id="80ff5-234">Returning tooour example, for hello **title** field, hello inverted index looks like this:</span></span>

| <span data-ttu-id="80ff5-235">Termin</span><span class="sxs-lookup"><span data-stu-id="80ff5-235">Term</span></span> | <span data-ttu-id="80ff5-236">Listy dokumentów</span><span class="sxs-lookup"><span data-stu-id="80ff5-236">Document list</span></span> |
|------|---------------|
| <span data-ttu-id="80ff5-237">atman</span><span class="sxs-lookup"><span data-stu-id="80ff5-237">atman</span></span> | <span data-ttu-id="80ff5-238">1</span><span class="sxs-lookup"><span data-stu-id="80ff5-238">1</span></span> |
| <span data-ttu-id="80ff5-239">Nieznane</span><span class="sxs-lookup"><span data-stu-id="80ff5-239">beach</span></span> | <span data-ttu-id="80ff5-240">2</span><span class="sxs-lookup"><span data-stu-id="80ff5-240">2</span></span> |
| <span data-ttu-id="80ff5-241">hoteli</span><span class="sxs-lookup"><span data-stu-id="80ff5-241">hotel</span></span> | <span data-ttu-id="80ff5-242">1, 3</span><span class="sxs-lookup"><span data-stu-id="80ff5-242">1, 3</span></span> |
| <span data-ttu-id="80ff5-243">Oceanu</span><span class="sxs-lookup"><span data-stu-id="80ff5-243">ocean</span></span> | <span data-ttu-id="80ff5-244">4</span><span class="sxs-lookup"><span data-stu-id="80ff5-244">4</span></span>  |
| <span data-ttu-id="80ff5-245">playa</span><span class="sxs-lookup"><span data-stu-id="80ff5-245">playa</span></span> | <span data-ttu-id="80ff5-246">3</span><span class="sxs-lookup"><span data-stu-id="80ff5-246">3</span></span> |
| <span data-ttu-id="80ff5-247">możliwości</span><span class="sxs-lookup"><span data-stu-id="80ff5-247">resort</span></span> | <span data-ttu-id="80ff5-248">3</span><span class="sxs-lookup"><span data-stu-id="80ff5-248">3</span></span> |
| <span data-ttu-id="80ff5-249">Retreat</span><span class="sxs-lookup"><span data-stu-id="80ff5-249">retreat</span></span> | <span data-ttu-id="80ff5-250">4</span><span class="sxs-lookup"><span data-stu-id="80ff5-250">4</span></span> |

<span data-ttu-id="80ff5-251">W polu Tytuł hello, tylko *hoteli* zostaną wyświetlone w dwa dokumenty: 1, 3.</span><span class="sxs-lookup"><span data-stu-id="80ff5-251">In hello title field, only *hotel* shows up in two documents: 1, 3.</span></span>

<span data-ttu-id="80ff5-252">Dla hello **opis** pola indeksu hello jest następujący:</span><span class="sxs-lookup"><span data-stu-id="80ff5-252">For hello **description** field, hello index is as follows:</span></span>

| <span data-ttu-id="80ff5-253">Termin</span><span class="sxs-lookup"><span data-stu-id="80ff5-253">Term</span></span> | <span data-ttu-id="80ff5-254">Listy dokumentów</span><span class="sxs-lookup"><span data-stu-id="80ff5-254">Document list</span></span> |
|------|---------------|
| <span data-ttu-id="80ff5-255">lotniczego</span><span class="sxs-lookup"><span data-stu-id="80ff5-255">air</span></span> | <span data-ttu-id="80ff5-256">3</span><span class="sxs-lookup"><span data-stu-id="80ff5-256">3</span></span>
| <span data-ttu-id="80ff5-257">i</span><span class="sxs-lookup"><span data-stu-id="80ff5-257">and</span></span> | <span data-ttu-id="80ff5-258">4</span><span class="sxs-lookup"><span data-stu-id="80ff5-258">4</span></span>
| <span data-ttu-id="80ff5-259">Nieznane</span><span class="sxs-lookup"><span data-stu-id="80ff5-259">beach</span></span> | <span data-ttu-id="80ff5-260">1</span><span class="sxs-lookup"><span data-stu-id="80ff5-260">1</span></span>
| <span data-ttu-id="80ff5-261">przygotować</span><span class="sxs-lookup"><span data-stu-id="80ff5-261">conditioned</span></span> | <span data-ttu-id="80ff5-262">3</span><span class="sxs-lookup"><span data-stu-id="80ff5-262">3</span></span>
| <span data-ttu-id="80ff5-263">doświadczenia</span><span class="sxs-lookup"><span data-stu-id="80ff5-263">comfortable</span></span> | <span data-ttu-id="80ff5-264">3</span><span class="sxs-lookup"><span data-stu-id="80ff5-264">3</span></span>
| <span data-ttu-id="80ff5-265">odległość</span><span class="sxs-lookup"><span data-stu-id="80ff5-265">distance</span></span> | <span data-ttu-id="80ff5-266">1</span><span class="sxs-lookup"><span data-stu-id="80ff5-266">1</span></span>
| <span data-ttu-id="80ff5-267">Wyspy</span><span class="sxs-lookup"><span data-stu-id="80ff5-267">island</span></span> | <span data-ttu-id="80ff5-268">2</span><span class="sxs-lookup"><span data-stu-id="80ff5-268">2</span></span>
| <span data-ttu-id="80ff5-269">kauaʻi</span><span class="sxs-lookup"><span data-stu-id="80ff5-269">kauaʻi</span></span> | <span data-ttu-id="80ff5-270">2</span><span class="sxs-lookup"><span data-stu-id="80ff5-270">2</span></span>
| <span data-ttu-id="80ff5-271">znajduje się</span><span class="sxs-lookup"><span data-stu-id="80ff5-271">located</span></span> | <span data-ttu-id="80ff5-272">2</span><span class="sxs-lookup"><span data-stu-id="80ff5-272">2</span></span>
| <span data-ttu-id="80ff5-273">Północna</span><span class="sxs-lookup"><span data-stu-id="80ff5-273">north</span></span> | <span data-ttu-id="80ff5-274">2</span><span class="sxs-lookup"><span data-stu-id="80ff5-274">2</span></span>
| <span data-ttu-id="80ff5-275">Oceanu</span><span class="sxs-lookup"><span data-stu-id="80ff5-275">ocean</span></span> | <span data-ttu-id="80ff5-276">1, 2, 3</span><span class="sxs-lookup"><span data-stu-id="80ff5-276">1, 2, 3</span></span>
| <span data-ttu-id="80ff5-277">z</span><span class="sxs-lookup"><span data-stu-id="80ff5-277">of</span></span> | <span data-ttu-id="80ff5-278">2</span><span class="sxs-lookup"><span data-stu-id="80ff5-278">2</span></span>
| <span data-ttu-id="80ff5-279">na</span><span class="sxs-lookup"><span data-stu-id="80ff5-279">on</span></span> |<span data-ttu-id="80ff5-280">2</span><span class="sxs-lookup"><span data-stu-id="80ff5-280">2</span></span>
| <span data-ttu-id="80ff5-281">quiet</span><span class="sxs-lookup"><span data-stu-id="80ff5-281">quiet</span></span> | <span data-ttu-id="80ff5-282">4</span><span class="sxs-lookup"><span data-stu-id="80ff5-282">4</span></span>
| <span data-ttu-id="80ff5-283">pokoje</span><span class="sxs-lookup"><span data-stu-id="80ff5-283">rooms</span></span>  | <span data-ttu-id="80ff5-284">1, 3</span><span class="sxs-lookup"><span data-stu-id="80ff5-284">1, 3</span></span>
| <span data-ttu-id="80ff5-285">secluded</span><span class="sxs-lookup"><span data-stu-id="80ff5-285">secluded</span></span> | <span data-ttu-id="80ff5-286">4</span><span class="sxs-lookup"><span data-stu-id="80ff5-286">4</span></span>
| <span data-ttu-id="80ff5-287">brzegu</span><span class="sxs-lookup"><span data-stu-id="80ff5-287">shore</span></span> | <span data-ttu-id="80ff5-288">2</span><span class="sxs-lookup"><span data-stu-id="80ff5-288">2</span></span>
| <span data-ttu-id="80ff5-289">obszerne</span><span class="sxs-lookup"><span data-stu-id="80ff5-289">spacious</span></span> | <span data-ttu-id="80ff5-290">1</span><span class="sxs-lookup"><span data-stu-id="80ff5-290">1</span></span>
| <span data-ttu-id="80ff5-291">Cześć</span><span class="sxs-lookup"><span data-stu-id="80ff5-291">hello</span></span> | <span data-ttu-id="80ff5-292">1, 2</span><span class="sxs-lookup"><span data-stu-id="80ff5-292">1, 2</span></span>
| <span data-ttu-id="80ff5-293">zbyt</span><span class="sxs-lookup"><span data-stu-id="80ff5-293">too</span></span>| <span data-ttu-id="80ff5-294">1</span><span class="sxs-lookup"><span data-stu-id="80ff5-294">1</span></span>
| <span data-ttu-id="80ff5-295">wyświetl</span><span class="sxs-lookup"><span data-stu-id="80ff5-295">view</span></span> | <span data-ttu-id="80ff5-296">1, 2, 3</span><span class="sxs-lookup"><span data-stu-id="80ff5-296">1, 2, 3</span></span>
| <span data-ttu-id="80ff5-297">Przejście</span><span class="sxs-lookup"><span data-stu-id="80ff5-297">walking</span></span> | <span data-ttu-id="80ff5-298">1</span><span class="sxs-lookup"><span data-stu-id="80ff5-298">1</span></span>
| <span data-ttu-id="80ff5-299">Z</span><span class="sxs-lookup"><span data-stu-id="80ff5-299">with</span></span> | <span data-ttu-id="80ff5-300">3</span><span class="sxs-lookup"><span data-stu-id="80ff5-300">3</span></span>


<span data-ttu-id="80ff5-301">**Dopasowywanie terminów zapytania względem indeksowanego warunków**</span><span class="sxs-lookup"><span data-stu-id="80ff5-301">**Matching query terms against indexed terms**</span></span>

<span data-ttu-id="80ff5-302">Podane powyżej indeksów hello odwrócony, teraz wróć toohello przykładowe zapytanie i zobacz jak pasujących dokumentów zostały znalezione dla nasze przykładowe zapytanie.</span><span class="sxs-lookup"><span data-stu-id="80ff5-302">Given hello inverted indices above, let’s return toohello sample query and see how matching documents are found for our example query.</span></span> <span data-ttu-id="80ff5-303">Odwołaj się, że tego drzewa końcowego zapytania hello wygląda następująco:</span><span class="sxs-lookup"><span data-stu-id="80ff5-303">Recall that hello final query tree looks like this:</span></span> 

 ![Wartość logiczna zapytania z warunkami przeanalizowane][4]

<span data-ttu-id="80ff5-305">Podczas wykonywania zapytania poszczególnych kwerend są wykonywane względem pola z możliwością przeszukiwania hello niezależnie.</span><span class="sxs-lookup"><span data-stu-id="80ff5-305">During query execution, individual queries are executed against hello searchable fields independently.</span></span> 

+ <span data-ttu-id="80ff5-306">TermQuery Witaj "obszerne" odpowiada dokumentu 1 (hoteli Atman).</span><span class="sxs-lookup"><span data-stu-id="80ff5-306">hello TermQuery, "spacious", matches document 1 (Hotel Atman).</span></span> 

+ <span data-ttu-id="80ff5-307">Witaj PrefixQuery, "air-condition *", nie pasuje do żadnych dokumentów.</span><span class="sxs-lookup"><span data-stu-id="80ff5-307">hello PrefixQuery, "air-condition*", doesn't match any documents.</span></span> 

  <span data-ttu-id="80ff5-308">Jest to zachowanie, która czasami confuses deweloperów.</span><span class="sxs-lookup"><span data-stu-id="80ff5-308">This is a behavior that sometimes confuses developers.</span></span> <span data-ttu-id="80ff5-309">Mimo że termin hello air-conditioned istnieje w dokumencie hello, są one podzielone na dwa wyrazy przez hello domyślnego analizatora.</span><span class="sxs-lookup"><span data-stu-id="80ff5-309">Although hello term air-conditioned exists in hello document, it is split into two terms by hello default analyzer.</span></span> <span data-ttu-id="80ff5-310">Odwołaj czy kwerendy prefiksu, zawierających częściowe warunki, nie są analizowane.</span><span class="sxs-lookup"><span data-stu-id="80ff5-310">Recall that prefix queries, which contain partial terms, are not analyzed.</span></span> <span data-ttu-id="80ff5-311">W związku z tym terminy prefiks "air-condition" są wyszukiwane w hello odwrócony indeksu i nie można odnaleźć.</span><span class="sxs-lookup"><span data-stu-id="80ff5-311">Therefore terms with prefix "air-condition" are looked up in hello inverted index and not found.</span></span>

+ <span data-ttu-id="80ff5-312">PhraseQuery Witaj "Oceanu widok", wyszukuje warunki hello "Oceanu" i "Widok" i sprawdza zbliżeniowe hello terminów w oryginalnym dokumencie hello.</span><span class="sxs-lookup"><span data-stu-id="80ff5-312">hello PhraseQuery, "ocean view", looks up hello terms "ocean" and "view" and checks hello proximity of terms in hello original document.</span></span> <span data-ttu-id="80ff5-313">Dokumenty, 1, 2 i 3 odpowiada to zapytanie w polu Opis hello.</span><span class="sxs-lookup"><span data-stu-id="80ff5-313">Documents 1, 2 and 3 match this query in hello description field.</span></span> <span data-ttu-id="80ff5-314">Powiadomienie dokumentu 4 ma Oceanu termin hello w tytule hello, ale nie jest uznawane za zgodne, ponieważ szukamy frazy "Oceanu widok" hello, a nie poszczególnych wyrazów.</span><span class="sxs-lookup"><span data-stu-id="80ff5-314">Notice document 4 has hello term ocean in hello title but isn’t considered a match, as we're looking for hello "ocean view" phrase rather than individual words.</span></span> 

> [!Note]
> <span data-ttu-id="80ff5-315">Zapytania wyszukiwania jest wykonywane niezależnie względem wszystkich pól z możliwością wyszukiwania w hello indeksu usługi Azure Search, chyba że ograniczyć zestaw z hello pola hello `searchFields` parametru, zgodnie z opisami w hello przykład żądania wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-315">A search query is executed independently against all searchable fields in hello Azure Search index unless you limit hello fields set with hello `searchFields` parameter, as illustrated in hello example search request.</span></span> <span data-ttu-id="80ff5-316">Dokumenty, które odpowiadają w polach hello wybrane są zwracane.</span><span class="sxs-lookup"><span data-stu-id="80ff5-316">Documents that match in any of hello selected fields are returned.</span></span> 

<span data-ttu-id="80ff5-317">Na powitania całego dla zapytania hello zagrożona hello dokumenty, które odpowiadają są 1, 2, 3.</span><span class="sxs-lookup"><span data-stu-id="80ff5-317">On hello whole, for hello query in question, hello documents that match are 1, 2, 3.</span></span> 

## <a name="stage-4-scoring"></a><span data-ttu-id="80ff5-318">Etap 4: oceniania</span><span class="sxs-lookup"><span data-stu-id="80ff5-318">Stage 4: Scoring</span></span>  

<span data-ttu-id="80ff5-319">Każdy dokument w zestawie wyników wyszukiwania jest przypisany wynik istotności.</span><span class="sxs-lookup"><span data-stu-id="80ff5-319">Every document in a search result set is assigned a relevance score.</span></span> <span data-ttu-id="80ff5-320">funkcją Hello oceny przydatności hello jest toorank wyższe tych dokumentów, że najlepiej odpowiedzieć użytkownik pytanie, wyrażonych w hello zapytania wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-320">hello function of hello relevance score is toorank higher those documents that best answer a user question as expressed by hello search query.</span></span> <span data-ttu-id="80ff5-321">wynik Hello jest obliczana na warunki, które pasują do właściwości statystyczne podstawie.</span><span class="sxs-lookup"><span data-stu-id="80ff5-321">hello score is computed based on statistical properties of terms that matched.</span></span> <span data-ttu-id="80ff5-322">Na powitania core hello oceniania formuła jest [(częstotliwość dokumentu odwrotność częstotliwość termin) TF/IDF](https://en.wikipedia.org/wiki/Tf%E2%80%93idf).</span><span class="sxs-lookup"><span data-stu-id="80ff5-322">At hello core of hello scoring formula is [TF/IDF (term frequency-inverse document frequency)](https://en.wikipedia.org/wiki/Tf%E2%80%93idf).</span></span> <span data-ttu-id="80ff5-323">W zapytaniach zawierający rzadkie i wspólne warunki TF/IDF zamienia wyniki zawierające hello rzadkich terminu.</span><span class="sxs-lookup"><span data-stu-id="80ff5-323">In queries containing rare and common terms, TF/IDF promotes results containing hello rare term.</span></span> <span data-ttu-id="80ff5-324">Na przykład w indeks hipotetyczny z wszystkie artykuły Wikipedia z dokumentów zapytania dopasowane hello *prezesa hello*, dokumentów na *prezesa* są uznawane za istotne więcej niż dokumenty na **.</span><span class="sxs-lookup"><span data-stu-id="80ff5-324">For example, in a hypothetical index with all Wikipedia articles, from documents that matched hello query *hello president*, documents matching on *president* are considered more relevant than documents matching on *the*.</span></span>


### <a name="scoring-example"></a><span data-ttu-id="80ff5-325">Przykład oceniania</span><span class="sxs-lookup"><span data-stu-id="80ff5-325">Scoring example</span></span>

<span data-ttu-id="80ff5-326">Odwołaj hello trzy dokumenty, zgodnych nasze przykładowe zapytanie:</span><span class="sxs-lookup"><span data-stu-id="80ff5-326">Recall hello three documents that matched our example query:</span></span>
~~~~
search=Spacious, air-condition* +"Ocean view"  
~~~~
~~~~
{  
  "value": [
    {
      "@search.score": 0.25610128,
      "id": "1",
      "title": "Hotel Atman",
      "description": "Spacious rooms, ocean view, walking distance toohello beach."
    },
    {
      "@search.score": 0.08951007,
      "id": "3",
      "title": "Playa Hotel",
      "description": "Comfortable, air-conditioned rooms with ocean view."
    },
    {
      "@search.score": 0.05967338,
      "id": "2",
      "title": "Ocean Resort",
      "description": "Located on a cliff on hello north shore of hello island of Kauai. Ocean view."
    }
  ]
}
~~~~

<span data-ttu-id="80ff5-327">Najlepiej dokumentu 1 kwerendy dopasowane hello ponieważ oba hello termin *obszerne* i hello wymagane *widoku Oceanu* występują w polu Opis hello.</span><span class="sxs-lookup"><span data-stu-id="80ff5-327">Document 1 matched hello query best because both hello term *spacious* and hello required phrase *ocean view* occur in hello description field.</span></span> <span data-ttu-id="80ff5-328">następne dwa dokumenty Hello zgodny tylko hello frazy *widoku Oceanu*.</span><span class="sxs-lookup"><span data-stu-id="80ff5-328">hello next two documents match only hello phrase *ocean view*.</span></span> <span data-ttu-id="80ff5-329">Go może być zaskoczysz tej oceny przydatności powitania dla dokumentu, 2 i 3 jest inny, nawet jeśli ich dopasowane hello zapytania w hello tak samo.</span><span class="sxs-lookup"><span data-stu-id="80ff5-329">It might be surprising that hello relevance score for document 2 and 3 is different even though they matched hello query in hello same way.</span></span> <span data-ttu-id="80ff5-330">Jest to spowodowane hello oceniania formuła zawiera składniki więcej niż tylko TF/IDF.</span><span class="sxs-lookup"><span data-stu-id="80ff5-330">It's because hello scoring formula has more components than just TF/IDF.</span></span> <span data-ttu-id="80ff5-331">W takim przypadku dokumentu 3 zostało przydzielone nieco więcej punktów, ponieważ jego opis jest krótszy.</span><span class="sxs-lookup"><span data-stu-id="80ff5-331">In this case, document 3 was assigned a slightly higher score because its description is shorter.</span></span> <span data-ttu-id="80ff5-332">Dowiedz się więcej o [Lucene jego praktycznych oceniania formuła](https://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/similarities/TFIDFSimilarity.html) toounderstand jak długość pola i inne czynniki mogą mieć wpływ hello oceny przydatności.</span><span class="sxs-lookup"><span data-stu-id="80ff5-332">Learn about [Lucene's Practical Scoring Formula](https://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/similarities/TFIDFSimilarity.html) toounderstand how field length and other factors can influence hello relevance score.</span></span>

<span data-ttu-id="80ff5-333">Niektóre typy (symbol wieloznaczny, prefiksu, wyrażenie regularne) zapytań zawsze współtworzenia stałej wynik toohello ogólną dokumentu wynik.</span><span class="sxs-lookup"><span data-stu-id="80ff5-333">Some query types (wildcard, prefix, regex) always contribute a constant score toohello overall document score.</span></span> <span data-ttu-id="80ff5-334">Dzięki temu dopasowań za pośrednictwem uwzględnione w wynikach hello, ale bez wpływu na powitania klasyfikacji toobe rozszerzenia zapytania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-334">This allows matches found through query expansion toobe included in hello results, but without affecting hello ranking.</span></span> 

<span data-ttu-id="80ff5-335">Dlaczego to ma znaczenie pokazano w przykładzie.</span><span class="sxs-lookup"><span data-stu-id="80ff5-335">An example illustrates why this matters.</span></span> <span data-ttu-id="80ff5-336">Wyszukiwanie symboli wieloznacznych, tym wyszukiwania prefiksów są niejednoznaczne zgodnie z definicją, ponieważ dane wejściowe hello jest częściowe ciągiem o potencjalnych dopasowań na bardzo dużą liczbę różnych warunków (rozważ danych wejściowych "samouczek *" dopasowań na "przewodniki", "tourettes", a " tourmaline").</span><span class="sxs-lookup"><span data-stu-id="80ff5-336">Wildcard searches, including prefix searches, are ambiguous by definition because hello input is a partial string with potential matches on a very large number of disparate terms (consider an input of "tour*", with matches found on “tours”, “tourettes”, and “tourmaline”).</span></span> <span data-ttu-id="80ff5-337">Biorąc pod uwagę rodzaj hello tych wyników, nie istnieje sposób wnioskować tooreasonably terminów są większej wartości niż inne.</span><span class="sxs-lookup"><span data-stu-id="80ff5-337">Given hello nature of these results, there is no way tooreasonably infer which terms are more valuable than others.</span></span> <span data-ttu-id="80ff5-338">Z tego powodu możemy Ignoruj określenie częstotliwości podczas oceniania wyników w kwerendach typów symboli wieloznacznych, prefiksu i wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="80ff5-338">For this reason, we ignore term frequencies when scoring results in queries of types wildcard, prefix and regex.</span></span> <span data-ttu-id="80ff5-339">W żądaniu wieloczęściowych wyszukiwania zawierającego częściowymi lub całkowitymi warunki, wyniki z częściowa wejścia hello są włączone ze stałą tooavoid odchylenia do dopasowania potencjalnie nieoczekiwany wynik.</span><span class="sxs-lookup"><span data-stu-id="80ff5-339">In a multi-part search request that includes partial and complete terms, results from hello partial input are incorporated with a constant score tooavoid bias towards potentially unexpected matches.</span></span>

### <a name="score-tuning"></a><span data-ttu-id="80ff5-340">Wynik dostrajania</span><span class="sxs-lookup"><span data-stu-id="80ff5-340">Score tuning</span></span>

<span data-ttu-id="80ff5-341">Istnieją dwa sposoby oceny przydatności tootune w usłudze Azure Search:</span><span class="sxs-lookup"><span data-stu-id="80ff5-341">There are two ways tootune relevance scores in Azure Search:</span></span>

1. <span data-ttu-id="80ff5-342">**Ocenianie profile** promowania dokumentów hello uszeregowane liście wyników na podstawie zestawu reguł.</span><span class="sxs-lookup"><span data-stu-id="80ff5-342">**Scoring profiles** promote documents in hello ranked list of results based on a set of rules.</span></span> <span data-ttu-id="80ff5-343">W tym przykładzie firma Microsoft może wziąć pod uwagę dokumentów, których dopasowano w polu Tytuł hello jest większe niż dokumenty zgodnych w polu Opis hello.</span><span class="sxs-lookup"><span data-stu-id="80ff5-343">In our example, we could consider documents that matched in hello title field more relevant than documents that matched in hello description field.</span></span> <span data-ttu-id="80ff5-344">Ponadto indeksu, gdyby pola ceny dla każdej hoteli, możemy wspierania dokumentów za pomocą dolnej ceny.</span><span class="sxs-lookup"><span data-stu-id="80ff5-344">Additionally, if our index had a price field for each hotel, we could promote documents with lower price.</span></span> <span data-ttu-id="80ff5-345">Dowiedz się, jak za[Dodawanie indeksu wyszukiwania tooa oceniania profilów.](https://docs.microsoft.com/rest/api/searchservice/add-scoring-profiles-to-a-search-index)</span><span class="sxs-lookup"><span data-stu-id="80ff5-345">Learn more how too[add Scoring Profiles tooa search index.](https://docs.microsoft.com/rest/api/searchservice/add-scoring-profiles-to-a-search-index)</span></span>
2. <span data-ttu-id="80ff5-346">**Promowanie** (dostępne tylko w składnia zapytań Lucene pełne hello) zapewnia operatora zwiększania wyniku `^` które może być stosowane tooany części hello zapytania drzewa.</span><span class="sxs-lookup"><span data-stu-id="80ff5-346">**Term boosting** (available only in hello Full Lucene query syntax) provides a boosting operator `^` that can be applied tooany part of hello query tree.</span></span> <span data-ttu-id="80ff5-347">W naszym przykładzie zamiast wyszukiwanie na prefiksie hello *air-condition*\*, co może wyszukać termin dokładne albo hello *air-condition* lub prefiks hello, ale dokumenty, które odpowiadają na powitania dokładne termin są wyżej stosując zwiększanie wyniku toohello termin zapytania: *warunku lotniczego ^ 2 || AIR-Condition**.</span><span class="sxs-lookup"><span data-stu-id="80ff5-347">In our example, instead of searching on hello prefix *air-condition*\*, one could search for either hello exact term *air-condition* or hello prefix, but documents that match on hello exact term are ranked higher by applying boost toohello term query: *air-condition^2||air-condition**.</span></span> <span data-ttu-id="80ff5-348">Dowiedz się więcej o [promowanie](https://docs.microsoft.com/rest/api/searchservice/lucene-query-syntax-in-azure-search#bkmk_termboost).</span><span class="sxs-lookup"><span data-stu-id="80ff5-348">Learn more about [term boosting](https://docs.microsoft.com/rest/api/searchservice/lucene-query-syntax-in-azure-search#bkmk_termboost).</span></span>


### <a name="scoring-in-a-distributed-index"></a><span data-ttu-id="80ff5-349">Ocenianie rozproszonej indeksu</span><span class="sxs-lookup"><span data-stu-id="80ff5-349">Scoring in a distributed index</span></span>

<span data-ttu-id="80ff5-350">Wszystkie indeksy w usłudze Azure Search są automatycznie podzielone na kilka fragmentów, co pozwala nam tooquickly dystrybucji indeksu hello wiele węzłów podczas skalowania usługi górę lub w dół.</span><span class="sxs-lookup"><span data-stu-id="80ff5-350">All indexes in Azure Search are automatically split into multiple shards, allowing us tooquickly distribute hello index among multiple nodes during service scale up or scale down.</span></span> <span data-ttu-id="80ff5-351">Podczas generowania żądania wyszukiwania wystawienia go przed każdym niezależnych niezależnie.</span><span class="sxs-lookup"><span data-stu-id="80ff5-351">When a search request is issued, it’s issued against each shard independently.</span></span> <span data-ttu-id="80ff5-352">Hello wyniki z każdym niezależnego fragmentu są następnie scalić i uporządkowanych według wyników (jeśli inne kolejność nie jest określona).</span><span class="sxs-lookup"><span data-stu-id="80ff5-352">hello results from each shard are then merged and ordered by score (if no other ordering is defined).</span></span> <span data-ttu-id="80ff5-353">Jest ważne tooknow, który hello oceniania funkcja wag zapytania termin częstotliwość przed jego częstotliwość odwrotny dokumentu w wszystkich dokumentów w niezależnych hello nie we wszystkich odłamków!</span><span class="sxs-lookup"><span data-stu-id="80ff5-353">It is important tooknow that hello scoring function weights query term frequency against its inverse document frequency in all documents within hello shard, not across all shards!</span></span>

<span data-ttu-id="80ff5-354">Oznacza to, że oceny przydatności *można* mogą różnić się w dokumentach identyczne znajdują się na różnych fragmentów.</span><span class="sxs-lookup"><span data-stu-id="80ff5-354">This means a relevance score *could* be different for identical documents if they reside on different shards.</span></span> <span data-ttu-id="80ff5-355">Na szczęście różnice te zwykle toodisappear wraz z rozwojem hello liczby dokumentów w indeksie hello powodu toomore nawet termin dystrybucji.</span><span class="sxs-lookup"><span data-stu-id="80ff5-355">Fortunately, such differences tend toodisappear as hello number of documents in hello index grows due toomore even term distribution.</span></span> <span data-ttu-id="80ff5-356">Nie jest możliwe tooassume, na które niezależnych zostaną umieszczone wszystkie danego dokumentu.</span><span class="sxs-lookup"><span data-stu-id="80ff5-356">It’s not possible tooassume on which shard any given document will be placed.</span></span> <span data-ttu-id="80ff5-357">Jednak zakładając, że klucz dokumentu nie powoduje zmiany, zostanie zawsze do niej przypisany toohello sam identyfikator niezależnego fragmentu.</span><span class="sxs-lookup"><span data-stu-id="80ff5-357">However, assuming a document key doesn't change, it will always be assigned toohello same shard.</span></span>

<span data-ttu-id="80ff5-358">Ogólnie rzecz biorąc wynik dokumentu, nie jest atrybutem najlepsze hello porządkowania dokumentów, jeśli stabilność kolejność jest ważna.</span><span class="sxs-lookup"><span data-stu-id="80ff5-358">In general, document score is not hello best attribute for ordering documents if order stability is important.</span></span> <span data-ttu-id="80ff5-359">Na przykład, mając dwa dokument z identycznymi wynik, nie ma żadnej gwarancji, które z nich znajduje się w kolejnych uruchomieniach hello tego samego zapytania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-359">For example, given two document with an identical score, there is no guarantee which one appears first in subsequent runs of hello same query.</span></span> <span data-ttu-id="80ff5-360">Wynik dokumentu tylko nadać zobaczyć znaczenie dokumentu względną tooother dokumentów w zestawie wyników hello.</span><span class="sxs-lookup"><span data-stu-id="80ff5-360">Document score should only give a general sense of document relevance relative tooother documents in hello results set.</span></span>

## <a name="conclusion"></a><span data-ttu-id="80ff5-361">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="80ff5-361">Conclusion</span></span>

<span data-ttu-id="80ff5-362">Powodzenie Hello aparaty wyszukiwania w Internecie spowodował oczekiwania dotyczące wyszukiwania pełnotekstowego w dane prywatne.</span><span class="sxs-lookup"><span data-stu-id="80ff5-362">hello success of internet search engines has raised expectations for full text search over private data.</span></span> <span data-ttu-id="80ff5-363">Dla niemal każdego rodzaju środowiska wyszukiwania teraz oczekujemy toounderstand aparat hello naszym celem, nawet jeśli warunki są zawiera błąd pisowni lub są one niepełne.</span><span class="sxs-lookup"><span data-stu-id="80ff5-363">For almost any kind of search experience, we now expect hello engine toounderstand our intent, even when terms are misspelled or incomplete.</span></span> <span data-ttu-id="80ff5-364">Oczekujemy może nawet dopasowań w oparciu równoważnego lub synonimy, które nigdy określone w pobliżu.</span><span class="sxs-lookup"><span data-stu-id="80ff5-364">We might even expect matches based on near equivalent terms or synonyms that we never actually specified.</span></span>

<span data-ttu-id="80ff5-365">Z technicznego punktu widzenia wyszukiwanie pełnotekstowe jest wysoce złożone, zaawansowane analizy językowe i tooprocessing systematyczne podejście, w sposób przetwarzania, rozwiń i przekształcanie toodeliver warunki zapytania odpowiednich wyników.</span><span class="sxs-lookup"><span data-stu-id="80ff5-365">From a technical standpoint, full text search is highly complex, requiring sophisticated linguistic analysis and a systematic approach tooprocessing in ways that distill, expand, and transform query terms toodeliver a relevant result.</span></span> <span data-ttu-id="80ff5-366">Podana hello związanego z używaniem skomplikowane, istnieje wiele czynników, które mogą wpłynąć na powitania wyniku zapytania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-366">Given hello inherent complexities, there are a lot of factors that can affect hello outcome of a query.</span></span> <span data-ttu-id="80ff5-367">Z tego powodu inwestycją hello czasu toounderstand hello mechanika wyszukiwanie pełnotekstowe oferuje wymierne korzyści podczas próby toowork za pośrednictwem nieoczekiwane wyniki.</span><span class="sxs-lookup"><span data-stu-id="80ff5-367">For this reason, investing hello time toounderstand hello mechanics of full text search offers tangible benefits when trying toowork through unexpected results.</span></span>  

<span data-ttu-id="80ff5-368">W tym artykule przedstawione wyszukiwania pełnotekstowego w kontekście hello Azure Search.</span><span class="sxs-lookup"><span data-stu-id="80ff5-368">This article explored full text search in hello context of Azure Search.</span></span> <span data-ttu-id="80ff5-369">Mamy nadzieję, że daje wystarczające tła toorecognize możliwe przyczyny i rozwiązania dotyczące typowych problemów z zapytania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-369">We hope it gives you sufficient background toorecognize potential causes and resolutions for addressing common query problems.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="80ff5-370">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="80ff5-370">Next steps</span></span>

+ <span data-ttu-id="80ff5-371">Tworzenie indeksu próbki hello, wypróbować różne zapytania i przejrzyj wyniki.</span><span class="sxs-lookup"><span data-stu-id="80ff5-371">Build hello sample index, try out different queries and review results.</span></span> <span data-ttu-id="80ff5-372">Aby uzyskać instrukcje, zobacz [kompilacji i tworzenie zapytań względem indeksu w portalu hello](search-get-started-portal.md#query-index).</span><span class="sxs-lookup"><span data-stu-id="80ff5-372">For instructions, see [Build and query an index in hello portal](search-get-started-portal.md#query-index).</span></span>

+ <span data-ttu-id="80ff5-373">Spróbuj składni zapytania dodatkowe hello [dokumenty wyszukiwania](https://docs.microsoft.com/rest/api/searchservice/search-documents#examples) sekcji przykład lub [prosta składnia zapytań](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search) w Eksploratorze wyszukiwania w portalu hello.</span><span class="sxs-lookup"><span data-stu-id="80ff5-373">Try additional query syntax from hello [Search Documents](https://docs.microsoft.com/rest/api/searchservice/search-documents#examples) example section or from [Simple query syntax](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search) in Search explorer in hello portal.</span></span>

+ <span data-ttu-id="80ff5-374">Przegląd [oceniania profile](https://docs.microsoft.com/rest/api/searchservice/add-scoring-profiles-to-a-search-index) Jeśli chcesz tootune klasyfikacji w aplikacji wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="80ff5-374">Review [scoring profiles](https://docs.microsoft.com/rest/api/searchservice/add-scoring-profiles-to-a-search-index) if you want tootune ranking in your search application.</span></span>

+ <span data-ttu-id="80ff5-375">Dowiedz się, jak tooapply [analizatorów leksykalne specyficzny dla języka](https://docs.microsoft.com/rest/api/searchservice/language-support).</span><span class="sxs-lookup"><span data-stu-id="80ff5-375">Learn how tooapply [language-specific lexical analyzers](https://docs.microsoft.com/rest/api/searchservice/language-support).</span></span>

+ <span data-ttu-id="80ff5-376">[Konfigurowanie niestandardowych analizatorów](https://docs.microsoft.com/rest/api/searchservice/custom-analyzers-in-azure-search) minimalnego przetwarzania lub specjalne przetwarzania określonych pól.</span><span class="sxs-lookup"><span data-stu-id="80ff5-376">[Configure custom analyzers](https://docs.microsoft.com/rest/api/searchservice/custom-analyzers-in-azure-search) for either minimal processing or specialized processing on specific fields.</span></span>

+ <span data-ttu-id="80ff5-377">[Porównanie analizatorów standard i angielskiej wersji językowej](http://alice.unearth.ai/)) side-by-side w tej witrynie sieci web demonstracyjnej.</span><span class="sxs-lookup"><span data-stu-id="80ff5-377">[Compare standard and English analyzers](http://alice.unearth.ai/)) side-by-side on this demo web site.</span></span> 

## <a name="see-also"></a><span data-ttu-id="80ff5-378">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="80ff5-378">See also</span></span>

[<span data-ttu-id="80ff5-379">Wyszukiwanie w dokumentach interfejsu API REST</span><span class="sxs-lookup"><span data-stu-id="80ff5-379">Search Documents REST API</span></span>](https://docs.microsoft.com/rest/api/searchservice/search-documents)

[<span data-ttu-id="80ff5-380">Prosta składnia zapytań</span><span class="sxs-lookup"><span data-stu-id="80ff5-380">Simple query syntax</span></span>](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search)

[<span data-ttu-id="80ff5-381">Pełna składnia zapytań Lucene</span><span class="sxs-lookup"><span data-stu-id="80ff5-381">Full Lucene query syntax</span></span>](https://docs.microsoft.com/rest/api/searchservice/lucene-query-syntax-in-azure-search)

[<span data-ttu-id="80ff5-382">Obsługa wyników wyszukiwania</span><span class="sxs-lookup"><span data-stu-id="80ff5-382">Handle search results</span></span>](https://docs.microsoft.com/azure/search/search-pagination-page-layout)

<!--Image references-->
[1]: ./media/search-lucene-query-architecture/architecture-diagram2.png
[2]: ./media/search-lucene-query-architecture/azSearch-queryparsing-should2.png
[3]: ./media/search-lucene-query-architecture/azSearch-queryparsing-must2.png
[4]: ./media/search-lucene-query-architecture/azSearch-queryparsing-spacious2.png
