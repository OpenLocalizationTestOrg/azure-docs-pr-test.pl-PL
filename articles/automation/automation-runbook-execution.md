---
title: Wykonanie elementu Runbook automatyzacji Azure | Dokumentacja firmy Microsoft
description: "W tym artykule opisano szczegółowe informacje o przetwarzaniu elementu runbook automatyzacji Azure."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: d10c8ce2-2c0b-4ea7-ba3c-d20e09b2c9ca
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/17/2017
ms.author: bwren
ms.openlocfilehash: 14f923e3f08dd3b286218ae56012ce14edcc4058
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/29/2017
---
# <a name="runbook-execution-in-azure-automation"></a><span data-ttu-id="c193a-103">Wykonanie elementu Runbook automatyzacji Azure</span><span class="sxs-lookup"><span data-stu-id="c193a-103">Runbook execution in Azure Automation</span></span>
<span data-ttu-id="c193a-104">Po uruchomieniu elementu runbook w automatyzacji Azure tworzone jest zadanie.</span><span class="sxs-lookup"><span data-stu-id="c193a-104">When you start a runbook in Azure Automation, a job is created.</span></span> <span data-ttu-id="c193a-105">Zadanie jest pojedynczym wystąpieniem wykonania elementu runbook.</span><span class="sxs-lookup"><span data-stu-id="c193a-105">A job is a single execution instance of a runbook.</span></span> <span data-ttu-id="c193a-106">Pracownik usługi Automatyzacja Azure jest przypisany do każdego zadania.</span><span class="sxs-lookup"><span data-stu-id="c193a-106">An Azure Automation worker is assigned to run each job.</span></span> <span data-ttu-id="c193a-107">Pracownicy są współużytkowane przez wiele kont platformy Azure, są odizolowane od siebie zadań z różnych kont automatyzacji.</span><span class="sxs-lookup"><span data-stu-id="c193a-107">While workers are shared by multiple Azure accounts, jobs from different Automation accounts are isolated from one another.</span></span> <span data-ttu-id="c193a-108">Możesz nie mieć kontroli za pośrednictwem których procesu roboczego obsługującym żądanie dla zadania.</span><span class="sxs-lookup"><span data-stu-id="c193a-108">You do not have control over which worker services the request for your job.</span></span>  <span data-ttu-id="c193a-109">Pojedynczy element runbook może mieć wiele zadań została uruchomiona w tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="c193a-109">A single runbook can have multiple jobs running at one time.</span></span> <span data-ttu-id="c193a-110">Podczas wyświetlania listy elementów runbook w portalu Azure, wyświetla stan wszystkich zadań, które zostały uruchomione dla każdego elementu runbook.</span><span class="sxs-lookup"><span data-stu-id="c193a-110">When you view the list of runbooks in the Azure portal, it lists the status of all jobs that were started for each runbook.</span></span> <span data-ttu-id="c193a-111">Aby śledzić stan każdego z nich, można wyświetlić listę zadań dla każdego elementu runbook.</span><span class="sxs-lookup"><span data-stu-id="c193a-111">You can view the list of jobs for each runbook in order to track the status of each.</span></span> <span data-ttu-id="c193a-112">Opis stany różne zadania, zobacz [stany zadania](#job-statuses).</span><span class="sxs-lookup"><span data-stu-id="c193a-112">For a description of the different job statuses, see [Job Statuses](#job-statuses).</span></span>

<span data-ttu-id="c193a-113">Na poniższym diagramie przedstawiono cykl życia zadania elementu runbook dla [graficznych elementów runbook](automation-runbook-types.md#graphical-runbooks) i [elementach runbook przepływu pracy programu PowerShell](automation-runbook-types.md#powershell-workflow-runbooks).</span><span class="sxs-lookup"><span data-stu-id="c193a-113">The following diagram shows the lifecycle of a runbook job for [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) and [PowerShell Workflow runbooks](automation-runbook-types.md#powershell-workflow-runbooks).</span></span>

![Stany zadania — przepływ pracy programu PowerShell](./media/automation-runbook-execution/job-statuses.png)

<span data-ttu-id="c193a-115">Na poniższym diagramie przedstawiono cykl życia zadania elementu runbook dla [elementy runbook programu PowerShell](automation-runbook-types.md#powershell-runbooks).</span><span class="sxs-lookup"><span data-stu-id="c193a-115">The following diagram shows the lifecycle of a runbook job for [PowerShell runbooks](automation-runbook-types.md#powershell-runbooks).</span></span>

![Stany zadania — skrypt programu PowerShell](./media/automation-runbook-execution/job-statuses-script.png)

<span data-ttu-id="c193a-117">Twoje zadania mają dostęp do zasobów na platformie Azure przez utworzenie połączenia z subskrypcją platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="c193a-117">Your jobs have access to your Azure resources by making a connection to your Azure subscription.</span></span> <span data-ttu-id="c193a-118">Tylko mają dostęp do zasobów w centrum danych, jeśli te zasoby są dostępne z chmury publicznej.</span><span class="sxs-lookup"><span data-stu-id="c193a-118">They only have access to resources in your data center if those resources are accessible from the public cloud.</span></span>

## <a name="job-statuses"></a><span data-ttu-id="c193a-119">Stany zadania</span><span class="sxs-lookup"><span data-stu-id="c193a-119">Job statuses</span></span>
<span data-ttu-id="c193a-120">W poniższej tabeli opisano różne stany, które są możliwe w dla zadania.</span><span class="sxs-lookup"><span data-stu-id="c193a-120">The following table describes the different statuses that are possible for a job.</span></span>

| <span data-ttu-id="c193a-121">Stan</span><span class="sxs-lookup"><span data-stu-id="c193a-121">Status</span></span> | <span data-ttu-id="c193a-122">Opis</span><span class="sxs-lookup"><span data-stu-id="c193a-122">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="c193a-123">ukończone</span><span class="sxs-lookup"><span data-stu-id="c193a-123">Completed</span></span> |<span data-ttu-id="c193a-124">Zadanie zostało ukończone pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="c193a-124">The job completed successfully.</span></span> |
| <span data-ttu-id="c193a-125">Nie powiodło się</span><span class="sxs-lookup"><span data-stu-id="c193a-125">Failed</span></span> |<span data-ttu-id="c193a-126">Dla [graficzny i przepływ pracy programu PowerShell elementów runbook](automation-runbook-types.md), element runbook kompilacja nie powiodła się.</span><span class="sxs-lookup"><span data-stu-id="c193a-126">For [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md), the runbook failed to compile.</span></span>  <span data-ttu-id="c193a-127">Aby uzyskać [elementów runbook skrypt programu PowerShell](automation-runbook-types.md), nie można uruchomić elementu runbook lub zadania wystąpił wyjątek.</span><span class="sxs-lookup"><span data-stu-id="c193a-127">For [PowerShell Script runbooks](automation-runbook-types.md), the runbook failed to start or the job encountered an exception.</span></span> |
| <span data-ttu-id="c193a-128">Nie powiodło się, oczekiwania dla zasobów</span><span class="sxs-lookup"><span data-stu-id="c193a-128">Failed, waiting for resources</span></span> |<span data-ttu-id="c193a-129">Zadanie nie powiodło się, ponieważ osiągnął [odpowiedni udział](#fairshare) ograniczyć trzy razy i z tego samego punktu kontrolnego lub od początku elementu runbook każdej godzina rozpoczęcia.</span><span class="sxs-lookup"><span data-stu-id="c193a-129">The job failed because it reached the [fair share](#fairshare) limit three times and started from the same checkpoint or from the start of the runbook each time.</span></span> |
| <span data-ttu-id="c193a-130">W kolejce</span><span class="sxs-lookup"><span data-stu-id="c193a-130">Queued</span></span> |<span data-ttu-id="c193a-131">Zadanie oczekuje dla zasobów procesu roboczego automatyzacji dostępny, aby można było go uruchomić.</span><span class="sxs-lookup"><span data-stu-id="c193a-131">The job is waiting for resources on an Automation worker to come available so that it can be started.</span></span> |
| <span data-ttu-id="c193a-132">Uruchamianie</span><span class="sxs-lookup"><span data-stu-id="c193a-132">Starting</span></span> |<span data-ttu-id="c193a-133">Zadanie zostało przypisane do procesu roboczego, a system jest w trakcie jego uruchomienie.</span><span class="sxs-lookup"><span data-stu-id="c193a-133">The job has been assigned to a worker, and the system is in the process of starting it.</span></span> |
| <span data-ttu-id="c193a-134">Wznawianie pracy</span><span class="sxs-lookup"><span data-stu-id="c193a-134">Resuming</span></span> |<span data-ttu-id="c193a-135">System jest w trakcie wznawiania zadania po został wstrzymany.</span><span class="sxs-lookup"><span data-stu-id="c193a-135">The system is in the process of resuming the job after it was suspended.</span></span> |
| <span data-ttu-id="c193a-136">Działanie</span><span class="sxs-lookup"><span data-stu-id="c193a-136">Running</span></span> |<span data-ttu-id="c193a-137">Zadanie zostało uruchomione.</span><span class="sxs-lookup"><span data-stu-id="c193a-137">The job is running.</span></span> |
| <span data-ttu-id="c193a-138">Uruchomiona, oczekiwania dla zasobów</span><span class="sxs-lookup"><span data-stu-id="c193a-138">Running, waiting for resources</span></span> |<span data-ttu-id="c193a-139">Zadanie zostało zwolnione, ponieważ osiągnął [odpowiedni udział](#fairshare) limit.</span><span class="sxs-lookup"><span data-stu-id="c193a-139">The job has been unloaded because it reached the [fair share](#fairshare) limit.</span></span> <span data-ttu-id="c193a-140">Jest wznawiana wkrótce z ostatniego punktu kontrolnego.</span><span class="sxs-lookup"><span data-stu-id="c193a-140">It resumes shortly from its last checkpoint.</span></span> |
| <span data-ttu-id="c193a-141">Zatrzymane</span><span class="sxs-lookup"><span data-stu-id="c193a-141">Stopped</span></span> |<span data-ttu-id="c193a-142">Zadanie zostało zatrzymane przez użytkownika przed jej ukończeniem.</span><span class="sxs-lookup"><span data-stu-id="c193a-142">The job was stopped by the user before it was completed.</span></span> |
| <span data-ttu-id="c193a-143">Zatrzymywanie</span><span class="sxs-lookup"><span data-stu-id="c193a-143">Stopping</span></span> |<span data-ttu-id="c193a-144">System jest w trakcie zatrzymywania zadania.</span><span class="sxs-lookup"><span data-stu-id="c193a-144">The system is in the process of stopping the job.</span></span> |
| <span data-ttu-id="c193a-145">Zawieszone</span><span class="sxs-lookup"><span data-stu-id="c193a-145">Suspended</span></span> |<span data-ttu-id="c193a-146">Zadanie zostało zawieszone przez użytkownika przez system lub za pomocą polecenia w elemencie runbook.</span><span class="sxs-lookup"><span data-stu-id="c193a-146">The job was suspended by the user, by the system, or by a command in the runbook.</span></span> <span data-ttu-id="c193a-147">Zawieszone zadanie można uruchomić ponownie i wznowić z ostatniego punktu kontrolnego lub od początku elementu runbook, jeśli nie ma on punkty kontrolne.</span><span class="sxs-lookup"><span data-stu-id="c193a-147">A job that is suspended can be started again and resume from its last checkpoint or from the beginning of the runbook if it doesn't have checkpoints.</span></span> <span data-ttu-id="c193a-148">Element runbook zostanie zawieszony przez system tylko, po wystąpieniu wyjątku.</span><span class="sxs-lookup"><span data-stu-id="c193a-148">The runbook will only be suspended by the system when an exception occurs.</span></span> <span data-ttu-id="c193a-149">Domyślnie jest równa ErrorActionPreference **Kontynuuj**, co oznacza, że zadanie będzie uruchomione w przypadku wystąpienia błędu.</span><span class="sxs-lookup"><span data-stu-id="c193a-149">By default, ErrorActionPreference is set to **Continue**, meaning that the job keeps running on an error.</span></span> <span data-ttu-id="c193a-150">Jeśli ustawiono tę zmienną preferencji **zatrzymać**, a następnie wstrzymuje zadanie w przypadku wystąpienia błędu.</span><span class="sxs-lookup"><span data-stu-id="c193a-150">If this preference variable is set to **Stop**, then the job suspends on an error.</span></span>  <span data-ttu-id="c193a-151">Dotyczy [graficzny i przepływ pracy programu PowerShell elementów runbook](automation-runbook-types.md) tylko.</span><span class="sxs-lookup"><span data-stu-id="c193a-151">Applies to [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |
| <span data-ttu-id="c193a-152">Zawieszanie</span><span class="sxs-lookup"><span data-stu-id="c193a-152">Suspending</span></span> |<span data-ttu-id="c193a-153">System próbuje zawiesić zadanie na żądanie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="c193a-153">The system is attempting to suspend the job at the request of the user.</span></span> <span data-ttu-id="c193a-154">Element runbook musi dotrzeć do swojego następnego punktu kontrolnego, zanim może zostać zawieszone.</span><span class="sxs-lookup"><span data-stu-id="c193a-154">The runbook must reach its next checkpoint before it can be suspended.</span></span> <span data-ttu-id="c193a-155">Jeśli przekazany już ostatni punkt kontrolny, a następnie jego zakończenie przed może zostać zawieszone.</span><span class="sxs-lookup"><span data-stu-id="c193a-155">If it already passed its last checkpoint, then it completes before it can be suspended.</span></span>  <span data-ttu-id="c193a-156">Dotyczy [graficzny i przepływ pracy programu PowerShell elementów runbook](automation-runbook-types.md) tylko.</span><span class="sxs-lookup"><span data-stu-id="c193a-156">Applies to [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |

## <a name="viewing-job-status-from-the-azure-portal"></a><span data-ttu-id="c193a-157">Wyświetlanie stanu zadań z portalu Azure</span><span class="sxs-lookup"><span data-stu-id="c193a-157">Viewing job status from the Azure portal</span></span>
<span data-ttu-id="c193a-158">Możesz wyświetlić podsumowanie stanu wszystkich zadań elementu runbook lub przejście do szczegółów określonego zadania elementu runbook w portalu Azure lub konfigurowania integracji z obszaru roboczego analizy dzienników programu Microsoft Operations Management Suite (OMS) do przekazywania strumienia zadania stanu i zadania elementu runbook.</span><span class="sxs-lookup"><span data-stu-id="c193a-158">You can view a summarized status of all runbook jobs or drill into details of a specific runbook job in the Azure portal or by configuring integration with your Microsoft Operations Management Suite (OMS) Log Analytics workspace to forward runbook job status and job streams.</span></span>  <span data-ttu-id="c193a-159">Aby uzyskać więcej informacji na temat integracji z analizy dzienników OMS, zobacz [przekazuj strumienie zadania i stan zadania z automatyzacji analizy dzienników (OMS)](automation-manage-send-joblogs-log-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="c193a-159">For more information about integrating with OMS Log Analytics, see [Forward job status and job streams from Automation to Log Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>  

### <a name="automation-runbook-jobs-summary"></a><span data-ttu-id="c193a-160">Podsumowanie zadań elementu runbook automatyzacji</span><span class="sxs-lookup"><span data-stu-id="c193a-160">Automation runbook jobs summary</span></span>
<span data-ttu-id="c193a-161">Po prawej stronie wybrane konto automatyzacji wyświetlane podsumowanie wszystkich zadań elementu runbook do wybranego konta automatyzacji w ramach **statystyki zadania** kafelka.</span><span class="sxs-lookup"><span data-stu-id="c193a-161">On the right of your selected Automation account, you can see a summary of all of the runbook jobs for a selected Automation account under **Job Statistics** tile.</span></span><br><br> <span data-ttu-id="c193a-162">![Kafelek statystyki zadania](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span><span class="sxs-lookup"><span data-stu-id="c193a-162">![Job Statistics tile](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span></span><br> <span data-ttu-id="c193a-163">Ten Kafelek Wyświetla graficzną reprezentację stanu zadania dla wszystkich zadań wykonywanych i liczba.</span><span class="sxs-lookup"><span data-stu-id="c193a-163">This tile displays a count and graphical representation of the job status for all jobs executed.</span></span>  

<span data-ttu-id="c193a-164">Kliknięcie kafelka przedstawia **zadania** bloku, który zawiera listę podsumowania wszystkie zadania wykonywane, stan, wykonywania zadania oraz czas rozpoczęcia i zakończenia.</span><span class="sxs-lookup"><span data-stu-id="c193a-164">Clicking on the tile presents the **Jobs** blade, which includes a summarized list of all jobs executed, with status, job execution, and start and completion times.</span></span><br><br> <span data-ttu-id="c193a-165">![Bloku zadania konta automatyzacji](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span><span class="sxs-lookup"><span data-stu-id="c193a-165">![Automation account Jobs blade](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span></span><br><br>  <span data-ttu-id="c193a-166">Lista zadań można filtrować, wybierając **filtrowania zadań** i filtru określonego elementu runbook, stan zadania, lub z listy rozwijanej, zakres daty i godziny do przeszukania.</span><span class="sxs-lookup"><span data-stu-id="c193a-166">You can filter the list of jobs by selecting **Filter jobs**  and filter on a specific runbook, job status, or from the drop-down list, the date/time range to search within.</span></span><br><br> <span data-ttu-id="c193a-167">![Stan zadania filtru](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span><span class="sxs-lookup"><span data-stu-id="c193a-167">![Filter Job status](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span></span>

<span data-ttu-id="c193a-168">Alternatywnie można wyświetlić szczegóły podsumowania zadania dla określonego elementu runbook przez wybranie tego elementu runbook z **Runbook** bloku w konta automatyzacji, a następnie wybierz **zadania** kafelka.</span><span class="sxs-lookup"><span data-stu-id="c193a-168">Alternatively, you can view job summary details for a specific runbook by selecting that runbook from the **Runbooks** blade in your Automation account, and then select the **Jobs** tile.</span></span>  <span data-ttu-id="c193a-169">Stwarza **zadania** bloku i z tego miejsca można kliknąć rekord zadania, aby wyświetlić jego szczegóły i danych wyjściowych.</span><span class="sxs-lookup"><span data-stu-id="c193a-169">This presents the **Jobs** blade, and from there you can click on the job record to view its detail and output.</span></span><br><br> <span data-ttu-id="c193a-170">![Bloku zadania konta automatyzacji](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span><span class="sxs-lookup"><span data-stu-id="c193a-170">![Automation account Jobs blade](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span></span><br> 

### <a name="job-summary"></a><span data-ttu-id="c193a-171">Podsumowanie zadania</span><span class="sxs-lookup"><span data-stu-id="c193a-171">Job Summary</span></span>
<span data-ttu-id="c193a-172">Można wyświetlić listę wszystkich zadań, które zostały utworzone dla określonego elementu runbook i ich najnowszy stan.</span><span class="sxs-lookup"><span data-stu-id="c193a-172">You can view a list of all of the jobs that have been created for a particular runbook and their most recent status.</span></span> <span data-ttu-id="c193a-173">Można filtrować tej listy według stanu zadania i zakresu dat dla ostatniej zmiany zadania.</span><span class="sxs-lookup"><span data-stu-id="c193a-173">You can filter this list by job status and the range of dates for the last change to the job.</span></span> <span data-ttu-id="c193a-174">Aby wyświetlić jego szczegółowe informacje i dane wyjściowe, kliknij nazwę zadania.</span><span class="sxs-lookup"><span data-stu-id="c193a-174">To view its detailed information and output, click on the name of a job.</span></span> <span data-ttu-id="c193a-175">Widok szczegółowy zadania zawiera wartości parametrów elementu runbook udostępnione danemu zadaniu.</span><span class="sxs-lookup"><span data-stu-id="c193a-175">The detailed view of the job includes the values for the runbook parameters that were provided to that job.</span></span>

<span data-ttu-id="c193a-176">Poniższe kroki służy do wyświetlania zadań elementu runbook.</span><span class="sxs-lookup"><span data-stu-id="c193a-176">You can use the following steps to view the jobs for a runbook.</span></span>

1. <span data-ttu-id="c193a-177">W portalu Azure wybierz **automatyzacji** , a następnie wybierz nazwę konta automatyzacji.</span><span class="sxs-lookup"><span data-stu-id="c193a-177">In the Azure portal, select **Automation** and then select the name of an Automation account.</span></span>
2. <span data-ttu-id="c193a-178">Koncentrator, zaznacz **elementów Runbook** , a następnie na **elementów Runbook** bloku wybierz element z listy.</span><span class="sxs-lookup"><span data-stu-id="c193a-178">From the hub, select **Runbooks** and then on the **Runbooks** blade select a runbook from the list.</span></span>
3. <span data-ttu-id="c193a-179">W bloku dla wybranego elementu runbook, kliknij **zadania** kafelka.</span><span class="sxs-lookup"><span data-stu-id="c193a-179">On the blade for the selected runbook, click the **Jobs** tile.</span></span>
4. <span data-ttu-id="c193a-180">Kliknij jedno z zadań na liście, a następnie w bloku szczegóły zadania elementu runbook można wyświetlić jego szczegóły i danych wyjściowych.</span><span class="sxs-lookup"><span data-stu-id="c193a-180">Click on one of the jobs in the list and on the runbook job details blade you can view its detail and output.</span></span>

## <a name="retrieving-job-status-using-windows-powershell"></a><span data-ttu-id="c193a-181">Trwa pobieranie stanu zadania za pomocą środowiska Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="c193a-181">Retrieving job status using Windows PowerShell</span></span>
<span data-ttu-id="c193a-182">Można użyć [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) do pobrania zadań utworzonych dla elementu runbook i szczegółów dotyczących określonego zadania.</span><span class="sxs-lookup"><span data-stu-id="c193a-182">You can use the [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) to retrieve the jobs created for a runbook and the details of a particular job.</span></span> <span data-ttu-id="c193a-183">Po uruchomieniu elementu runbook przy użyciu programu Windows PowerShell [Start AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), a następnie zwraca zadania wynikowe.</span><span class="sxs-lookup"><span data-stu-id="c193a-183">If you start a runbook with Windows PowerShell using [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), then it returns the resulting job.</span></span> <span data-ttu-id="c193a-184">Użyj [Get AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)danych wyjściowych danych wyjściowych, aby uzyskać zadanie.</span><span class="sxs-lookup"><span data-stu-id="c193a-184">Use [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)Output to get a job’s output.</span></span>

<span data-ttu-id="c193a-185">Następujące przykładowe polecenia Pobierz ostatnie zadanie przykładowego elementu runbook i wyświetla jego stan, wartości parametrów elementu runbook oraz dane wyjściowe z zadania.</span><span class="sxs-lookup"><span data-stu-id="c193a-185">The following sample commands retrieve the last job for a sample runbook and displays its status, the values provided for the runbook parameters, and the output from the job.</span></span>

    $job = (Get-AzureRmAutomationJob –AutomationAccountName "MyAutomationAccount" `
    –RunbookName "Test-Runbook" -ResourceGroupName "ResourceGroup01" | sort LastModifiedDate –desc)[0]
    $job.Status
    $job.JobParameters
    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAcct" -Id $job.JobId –Stream Output

## <a name="fair-share"></a><span data-ttu-id="c193a-186">Odpowiedni udział</span><span class="sxs-lookup"><span data-stu-id="c193a-186">Fair share</span></span>
<span data-ttu-id="c193a-187">Aby udostępnianie zasobów między wszystkich elementów runbook w chmurze, usługi Automatyzacja Azure tymczasowo spowoduje zwolnienie wszystkie zadania po działaniu na trzy godziny.</span><span class="sxs-lookup"><span data-stu-id="c193a-187">In order to share resources among all runbooks in the cloud, Azure Automation will temporarily unload any job after it has been running for three hours.</span></span>  <span data-ttu-id="c193a-188">W tym czasie zadania dla [opartych na środowisku PowerShell elementów runbook](automation-runbook-types.md#powershell-runbooks) zostały zatrzymane i nie zostanie uruchomiona ponownie.</span><span class="sxs-lookup"><span data-stu-id="c193a-188">During this time, jobs for [PowerShell-based runbooks](automation-runbook-types.md#powershell-runbooks) are stopped and will not be restarted.</span></span>  <span data-ttu-id="c193a-189">Pokazuje stan zadania **zatrzymane**.</span><span class="sxs-lookup"><span data-stu-id="c193a-189">The job status shows **Stopped**.</span></span>  <span data-ttu-id="c193a-190">Ten typ elementu runbook zawsze zostanie ponownie od samego początku, ponieważ nie obsługują punkty kontrolne.</span><span class="sxs-lookup"><span data-stu-id="c193a-190">This type of runbook is always restarted from the beginning since they don't support checkpoints.</span></span>  

<span data-ttu-id="c193a-191">[Na podstawie przepływu pracy programu PowerShell elementów runbook](automation-runbook-types.md#powershell-workflow-runbooks) zostanie wznowione z ostatnią [punktu kontrolnego](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span><span class="sxs-lookup"><span data-stu-id="c193a-191">[PowerShell-Workflow-based runbooks](automation-runbook-types.md#powershell-workflow-runbooks) will be resumed from their last [checkpoint](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span></span>  <span data-ttu-id="c193a-192">Po uruchomieniu trzy godziny, zadanie elementu runbook zostanie zawieszony przez usługę i jego stan pokazuje **uruchomiony, oczekiwanie na zasoby**.</span><span class="sxs-lookup"><span data-stu-id="c193a-192">After running three hours, the runbook job will be suspended by the service and its status shows **Running, waiting for resources**.</span></span>  <span data-ttu-id="c193a-193">Po udostępnieniu piaskownicy, element runbook zostanie automatycznie ponownie, usługa Automatyzacja i przywraca z ostatniego punktu kontrolnego.</span><span class="sxs-lookup"><span data-stu-id="c193a-193">When a sandbox becomes available, the runbook will be automatically restarted by the Automation service and resumes from the last checkpoint.</span></span>  <span data-ttu-id="c193a-194">Jest to normalne zachowanie przepływu pracy programu PowerShell dla zawiesić/restart.</span><span class="sxs-lookup"><span data-stu-id="c193a-194">This is normal PowerShell-Workflow behavior for suspend/restart.</span></span>  <span data-ttu-id="c193a-195">Jeśli element runbook ponownie przekracza trzy godziny środowiska uruchomieniowego, proces jest powtarzany, maksymalnie trzy razy.</span><span class="sxs-lookup"><span data-stu-id="c193a-195">If the runbook again exceeds three hours of runtime, the process repeats, up to three times.</span></span>  <span data-ttu-id="c193a-196">Po uruchomieniu trzecich, jeśli element runbook jeszcze nie zostało ukończone w ciągu trzech godzin, a następnie zadania elementu runbook nie powiodło się i pokazuje stan zadania **nie powiodło się oczekiwanie na zasoby**.</span><span class="sxs-lookup"><span data-stu-id="c193a-196">After the third restart, if the runbook still has not completed in three hours, then the runbook job is failed, and the job status shows **Failed, waiting for resources**.</span></span>  <span data-ttu-id="c193a-197">W takim przypadku zostanie wyświetlony następujący wyjątek z awarią.</span><span class="sxs-lookup"><span data-stu-id="c193a-197">In this case, you receive the following exception with the failure.</span></span>

<span data-ttu-id="c193a-198">*Zadanie nie może kontynuować z powodu wielokrotnie został wykluczony z tego samego punktu kontrolnego. Upewnij się, że element Runbook nie wykona operacji długich bez utrwalanie stanu.*</span><span class="sxs-lookup"><span data-stu-id="c193a-198">*The job cannot continue running because it was repeatedly evicted from the same checkpoint. Please make sure your Runbook does not perform lengthy operations without persisting its state.*</span></span>

<span data-ttu-id="c193a-199">To jest ochrona usługi z elementów runbook uruchomionych w nieskończoność nie kończą działania, ponieważ nie są oni wprowadzać go do następnego punktu kontrolnego bez zwalnianie ponownie.</span><span class="sxs-lookup"><span data-stu-id="c193a-199">This is to protect the service from runbooks running indefinitely without completing, as they are not able to make it to the next checkpoint without being unloaded again.</span></span>

<span data-ttu-id="c193a-200">Jeśli element runbook ma punktów kontrolnych lub zadanie nie osiągnęła pierwszy punkt kontrolny przed zwalnianie, następnie jest uruchamiany ponownie od samego początku.</span><span class="sxs-lookup"><span data-stu-id="c193a-200">If the runbook has no checkpoints or the job had not reached the first checkpoint before being unloaded, then it restarts from the beginning.</span></span>  

<span data-ttu-id="c193a-201">Podczas tworzenia elementu runbook, należy upewnić się, że czas do uruchomienia żadnych działań między dwoma punktami kontrolnymi nie przekracza trzy godziny.</span><span class="sxs-lookup"><span data-stu-id="c193a-201">When you create a runbook, you should ensure that the time to run any activities between two checkpoints does not exceed three hours.</span></span> <span data-ttu-id="c193a-202">Należy dodać punkty kontrolne do elementu runbook, aby upewnić się, że nie osiągnięciu tego limitu trzy godziny lub podzielić long długotrwałych operacji.</span><span class="sxs-lookup"><span data-stu-id="c193a-202">You may need to add checkpoints to your runbook to ensure that it does not reach this three hour limit or break up long running operations.</span></span> <span data-ttu-id="c193a-203">Na przykład element runbook może wykonywać indeksowanie na duże bazy danych SQL.</span><span class="sxs-lookup"><span data-stu-id="c193a-203">For example, your runbook might perform a reindex on a large SQL database.</span></span> <span data-ttu-id="c193a-204">Jeśli operacja jednego nie zostanie ukończone przed upływem limitu odpowiedni udział, zadania są zwolnione i ponownego uruchomienia od początku.</span><span class="sxs-lookup"><span data-stu-id="c193a-204">If this single operation does not complete within the fair share limit, then the job are unloaded and restarted from the beginning.</span></span> <span data-ttu-id="c193a-205">W takim przypadku należy podzielić operacji indeksowanie w wielu kroków, takich jak indeksowanie jedna tabela w czasie i następnie Wstaw punkt kontrolny po zakończeniu każdej operacji, dzięki czemu można wznowić zadanie, po ostatniej operacji, aby zakończyć.</span><span class="sxs-lookup"><span data-stu-id="c193a-205">In this case, you should break up the reindex operation into multiple steps, such as reindexing one table at a time, and then insert a checkpoint after each operation so that the job could resume after the last operation to complete.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c193a-206">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="c193a-206">Next steps</span></span>
* <span data-ttu-id="c193a-207">Aby dowiedzieć się więcej na temat różnych metod, które mogą służyć do uruchamiania elementu runbook automatyzacji Azure, zobacz [uruchamianie elementu runbook automatyzacji Azure](automation-starting-a-runbook.md)</span><span class="sxs-lookup"><span data-stu-id="c193a-207">To learn more about the different methods that can be used to start a runbook in Azure Automation, see [Starting a runbook in Azure Automation](automation-starting-a-runbook.md)</span></span>

