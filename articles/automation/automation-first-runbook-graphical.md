---
title: "Mój pierwszy graficzny element Runbook w usłudze Azure Automation | Microsoft Docs"
description: "Samouczek, który przeprowadzi Cię przez procesy tworzenia, testowania i publikowania prostego graficznego elementu Runbook."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: 
keywords: runbook, szablon runbook, automatyzacja runbook, azure runbook
ms.assetid: dcb88f19-ed2b-4372-9724-6625cd287c8a
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 05/17/2017
ms.author: magoedte;bwren
ms.openlocfilehash: 9d4b28416376482247127698bec7c99b83308885
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="my-first-graphical-runbook"></a><span data-ttu-id="22323-104">Mój pierwszy graficzny element Runbook</span><span class="sxs-lookup"><span data-stu-id="22323-104">My first graphical runbook</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="22323-105">Element graficzny</span><span class="sxs-lookup"><span data-stu-id="22323-105">Graphical</span></span>](automation-first-runbook-graphical.md)
> * [<span data-ttu-id="22323-106">Program PowerShell</span><span class="sxs-lookup"><span data-stu-id="22323-106">PowerShell</span></span>](automation-first-runbook-textual-powershell.md)
> * [<span data-ttu-id="22323-107">Przepływ pracy programu PowerShell</span><span class="sxs-lookup"><span data-stu-id="22323-107">PowerShell Workflow</span></span>](automation-first-runbook-textual.md)
> 
> 

<span data-ttu-id="22323-108">Ten samouczek przeprowadzi Cię przez proces tworzenia [graficznego elementu Runbook](automation-runbook-types.md#graphical-runbooks) w usłudze Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="22323-108">This tutorial walks you through the creation of a [graphical runbook](automation-runbook-types.md#graphical-runbooks) in Azure Automation.</span></span>  <span data-ttu-id="22323-109">Rozpoczniemy pracę od użycia prostego elementu runbook służącego do testowania i publikowania, objaśniając równocześnie, jak śledzić stan zadania elementu runbook.</span><span class="sxs-lookup"><span data-stu-id="22323-109">We start with a simple runbook that tests and publishes while we explain how to track the status of the runbook job.</span></span>  <span data-ttu-id="22323-110">Następnie zmodyfikujemy element Runbook, aby faktycznie zarządzać zasobami platformy Azure (w tym przypadku uruchomić maszynę wirtualną platformy Azure).</span><span class="sxs-lookup"><span data-stu-id="22323-110">Then we modify the runbook to actually manage Azure resources, in this case starting an Azure virtual machine.</span></span>  <span data-ttu-id="22323-111">Następnie zakończymy samouczek, udoskonalając element runbook przez dodanie jego parametrów i połączeń warunkowych.</span><span class="sxs-lookup"><span data-stu-id="22323-111">Then we complete the tutorial by making the runbook more robust by adding runbook parameters and conditional links.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="22323-112">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="22323-112">Prerequisites</span></span>
<span data-ttu-id="22323-113">Do wykonania kroków tego samouczka niezbędne są następujące elementy:</span><span class="sxs-lookup"><span data-stu-id="22323-113">To complete this tutorial, you will need the following.</span></span>

* <span data-ttu-id="22323-114">Subskrypcja platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="22323-114">Azure subscription.</span></span>  <span data-ttu-id="22323-115">Jeśli nie masz subskrypcji, możesz [aktywować korzyści dla subskrybentów MSDN](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) lub <a href="/pricing/free-account/" target="_blank">[utworzyć bezpłatne konto](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="22323-115">If you don't have one yet, you can [activate your MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) or <a href="/pricing/free-account/" target="_blank">[sign up for a free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="22323-116">[Konto usługi Azure Automation](automation-sec-configure-azure-runas-account.md) do przechowywania elementu runbook i uwierzytelniania w zasobach platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="22323-116">[Azure Automation account](automation-sec-configure-azure-runas-account.md) to hold the runbook and authenticate to Azure resources.</span></span>  <span data-ttu-id="22323-117">To konto musi mieć uprawnienia do uruchamiania i zatrzymywania maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="22323-117">This account must have permission to start and stop the virtual machine.</span></span>
* <span data-ttu-id="22323-118">Maszyna wirtualna platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="22323-118">An Azure virtual machine.</span></span>  <span data-ttu-id="22323-119">Będziemy uruchamiać i zatrzymywać tę maszynę, dlatego należy użyć maszyny innej niż produkcyjna.</span><span class="sxs-lookup"><span data-stu-id="22323-119">We will stop and start this machine so it should not be production.</span></span>

## <a name="step-1---create-runbook"></a><span data-ttu-id="22323-120">Krok 1. Tworzenie elementu runbook</span><span class="sxs-lookup"><span data-stu-id="22323-120">Step 1 - Create runbook</span></span>
<span data-ttu-id="22323-121">Rozpoczniemy od utworzenia prostego elementu runbook służącego do wyświetlania tekstu *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="22323-121">We start by creating a simple runbook that outputs the text *Hello World*.</span></span>

1. <span data-ttu-id="22323-122">W witrynie Azure Portal otwórz konto usługi Automation.</span><span class="sxs-lookup"><span data-stu-id="22323-122">In the Azure portal, open your Automation account.</span></span>  
   <span data-ttu-id="22323-123">Strona konta usługi Automation umożliwia szybki przegląd zasobów na tym koncie.</span><span class="sxs-lookup"><span data-stu-id="22323-123">The Automation account page gives you a quick view of the resources in this account.</span></span>  <span data-ttu-id="22323-124">Konto powinno mieć już pewne elementy zawartości.</span><span class="sxs-lookup"><span data-stu-id="22323-124">You should already have some Assets.</span></span>  <span data-ttu-id="22323-125">Większość z nich to moduły, które są automatycznie uwzględniane na nowym koncie usługi Automation.</span><span class="sxs-lookup"><span data-stu-id="22323-125">Most of those are the modules that are automatically included in a new Automation account.</span></span>  <span data-ttu-id="22323-126">Powinien istnieć również element zawartości Poświadczenie wymieniony w części dotyczącej [wymagań wstępnych](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="22323-126">You should also have the Credential asset that's mentioned in the [prerequisites](#prerequisites).</span></span>
2. <span data-ttu-id="22323-127">Kliknij kafelek **Elementy runbook**, aby otworzyć listę elementów runbook.</span><span class="sxs-lookup"><span data-stu-id="22323-127">Click the **Runbooks** tile to open the list of runbooks.</span></span><br> <span data-ttu-id="22323-128">![Kontrolka Elementy Runbook](media/automation-first-runbook-graphical/runbooks-resources-tile.png)</span><span class="sxs-lookup"><span data-stu-id="22323-128">![Runbooks control](media/automation-first-runbook-graphical/runbooks-resources-tile.png)</span></span>
3. <span data-ttu-id="22323-129">Utwórz nowy element Runbook, klikając przycisk **Dodaj element Runbook**, a następnie pozycję **Utwórz nowy element Runbook**.</span><span class="sxs-lookup"><span data-stu-id="22323-129">Create a new runbook by clicking on the **Add a runbook** button and then **Create a new runbook**.</span></span>
4. <span data-ttu-id="22323-130">Nadaj elementowi Runbook nazwę *MyFirstRunbook-Graphical*.</span><span class="sxs-lookup"><span data-stu-id="22323-130">Give the runbook the name *MyFirstRunbook-Graphical*.</span></span>
5. <span data-ttu-id="22323-131">W tym przypadku będziemy tworzyć [graficzny element Runbook](automation-graphical-authoring-intro.md), dlatego wybierz wartość **Element graficzny** parametru **Typ elementu Runbook**.</span><span class="sxs-lookup"><span data-stu-id="22323-131">In this case, we're going to create a [graphical runbook](automation-graphical-authoring-intro.md) so select **Graphical** for **Runbook type**.</span></span><br> <span data-ttu-id="22323-132">![Nowy element Runbook](media/automation-first-runbook-graphical/create-new-runbook.png)</span><span class="sxs-lookup"><span data-stu-id="22323-132">![New runbook](media/automation-first-runbook-graphical/create-new-runbook.png)</span></span><br>
6. <span data-ttu-id="22323-133">Kliknij pozycję **Utwórz**, aby utworzyć element Runbook i otworzyć edytor graficzny.</span><span class="sxs-lookup"><span data-stu-id="22323-133">Click **Create** to create the runbook and open the graphical editor.</span></span>

## <a name="step-2---add-activities-to-the-runbook"></a><span data-ttu-id="22323-134">Krok 2. Dodawanie działań do elementu Runbook</span><span class="sxs-lookup"><span data-stu-id="22323-134">Step 2 - Add activities to the runbook</span></span>
<span data-ttu-id="22323-135">Kontrolka Biblioteka po lewej stronie edytora umożliwia wybranie działań do dodania do elementu Runbook.</span><span class="sxs-lookup"><span data-stu-id="22323-135">The Library control on the left side of the editor allows you to select activities to add to your runbook.</span></span>  <span data-ttu-id="22323-136">Dodamy polecenie cmdlet **Write-Output** do tekstu wyjściowego elementu Runbook.</span><span class="sxs-lookup"><span data-stu-id="22323-136">We're going to add a **Write-Output** cmdlet to output text from the runbook.</span></span>

1. <span data-ttu-id="22323-137">W kontrolce Biblioteka kliknij pole tekstowe wyszukiwania i wpisz **Write-Output**.</span><span class="sxs-lookup"><span data-stu-id="22323-137">In the Library control, click in the search textbox and type **Write-Output**.</span></span>  <span data-ttu-id="22323-138">Wyniki wyszukiwania zostaną wyświetlone poniżej.</span><span class="sxs-lookup"><span data-stu-id="22323-138">The search results will be displayed below.</span></span> <br> <span data-ttu-id="22323-139">![Microsoft.PowerShell.Utility](media/automation-first-runbook-graphical/search-powershell-cmdlet-writeoutput.png)</span><span class="sxs-lookup"><span data-stu-id="22323-139">![Microsoft.PowerShell.Utility](media/automation-first-runbook-graphical/search-powershell-cmdlet-writeoutput.png)</span></span>
2. <span data-ttu-id="22323-140">Przewiń listę w dół.</span><span class="sxs-lookup"><span data-stu-id="22323-140">Scroll down to the bottom of the list.</span></span>  <span data-ttu-id="22323-141">Kliknij prawym przyciskiem myszy pozycję **Write-Output** i wybierz polecenie **Dodaj do kanwy** lub kliknij wielokropek obok polecenia cmdlet, a następnie wybierz pozycję **Dodaj do kanwy**.</span><span class="sxs-lookup"><span data-stu-id="22323-141">You can either right-click **Write-Output** and select **Add to canvas** or click the ellipse next to the cmdlet and then select **Add to canvas**.</span></span>
3. <span data-ttu-id="22323-142">Kliknij pozycję **Write-Output** na kanwie.</span><span class="sxs-lookup"><span data-stu-id="22323-142">Click the **Write-Output** activity on the canvas.</span></span>  <span data-ttu-id="22323-143">Spowoduje to otwarcie bloku kontrolki Konfiguracja, który umożliwia skonfigurowanie działania.</span><span class="sxs-lookup"><span data-stu-id="22323-143">This opens the Configuration control blade, which allows you to configure the activity.</span></span>
4. <span data-ttu-id="22323-144">Wartość pola **Etykieta** jest domyślnie ustawiana na nazwę polecenia cmdlet, ale możemy zmienić ją na bardziej opisową.</span><span class="sxs-lookup"><span data-stu-id="22323-144">The **Label** defaults to the name of the cmdlet, but we can change it to something more friendly.</span></span> <span data-ttu-id="22323-145">Zmień nazwę na *Zapisz ciąg Witaj, świecie w danych wyjściowych*.</span><span class="sxs-lookup"><span data-stu-id="22323-145">Change it to *Write Hello World to output*.</span></span>
5. <span data-ttu-id="22323-146">Kliknij pozycję **Parametry**, aby podać wartości parametrów polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="22323-146">Click **Parameters** to provide values for the cmdlet's parameters.</span></span>  
   <span data-ttu-id="22323-147">Niektóre polecenia cmdlet mają wiele zestawów parametrów i konieczne jest wybranie zestawu do użycia.</span><span class="sxs-lookup"><span data-stu-id="22323-147">Some cmdlets have multiple parameter sets, and you need to select which you one to use.</span></span> <span data-ttu-id="22323-148">W tym przypadku polecenie **Write-Output** ma tylko jeden zestaw parametrów, więc nie musisz go wybierać.</span><span class="sxs-lookup"><span data-stu-id="22323-148">In this case, **Write-Output** has only one parameter set, so you don't need to select one.</span></span> <br> <span data-ttu-id="22323-149">![Właściwości polecenia Write-Output](media/automation-first-runbook-graphical/write-output-properties-b.png)</span><span class="sxs-lookup"><span data-stu-id="22323-149">![Write-Output properties](media/automation-first-runbook-graphical/write-output-properties-b.png)</span></span>
6. <span data-ttu-id="22323-150">Wybierz parametr **InputObject**.</span><span class="sxs-lookup"><span data-stu-id="22323-150">Select the **InputObject** parameter.</span></span>  <span data-ttu-id="22323-151">Jest to parametr służący do określania tekstu, który zostanie wysłany do strumienia wyjściowego.</span><span class="sxs-lookup"><span data-stu-id="22323-151">This is the parameter where we specify the text to send to the output stream.</span></span>
7. <span data-ttu-id="22323-152">Z listy rozwijanej **Źródło danych** wybierz pozycję **Wyrażenie programu PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="22323-152">In the **Data source** dropdown, select **PowerShell expression**.</span></span>  <span data-ttu-id="22323-153">Lista rozwijana **Źródło danych** zawiera różne źródła używane do wypełniania wartości parametrów.</span><span class="sxs-lookup"><span data-stu-id="22323-153">The **Data source** dropdown provides different sources that you use to populate a parameter value.</span></span>  
   <span data-ttu-id="22323-154">Możesz używać danych wyjściowych ze źródeł, takich jak inne działanie, element zawartości usługi Automation lub wyrażenie programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="22323-154">You can use output from such sources such as another activity, an Automation asset, or a PowerShell expression.</span></span>  <span data-ttu-id="22323-155">W tym przypadku chcemy tylko uzyskać tekst wyjściowy *Witaj, świecie*.</span><span class="sxs-lookup"><span data-stu-id="22323-155">In this case, we just want to output the text *Hello World*.</span></span> <span data-ttu-id="22323-156">Możemy użyć wyrażenia programu PowerShell i wprowadzić ciąg.</span><span class="sxs-lookup"><span data-stu-id="22323-156">We can use a PowerShell expression and specify a string.</span></span>
8. <span data-ttu-id="22323-157">W polu **Wyrażenie** wpisz *„Witaj, świecie”* i kliknij dwukrotnie przycisk **OK**, aby wrócić do kanwy.</span><span class="sxs-lookup"><span data-stu-id="22323-157">In the **Expression** box, type *"Hello World"* and then click **OK** twice to return to the canvas.</span></span><br> <span data-ttu-id="22323-158">![Wyrażenie programu PowerShell](media/automation-first-runbook-graphical/expression-hello-world.png)</span><span class="sxs-lookup"><span data-stu-id="22323-158">![PowerShell Expression](media/automation-first-runbook-graphical/expression-hello-world.png)</span></span>
9. <span data-ttu-id="22323-159">Zapisz element Runbook, klikając przycisk **Zapisz**.</span><span class="sxs-lookup"><span data-stu-id="22323-159">Save the runbook by clicking **Save**.</span></span><br> <span data-ttu-id="22323-160">![Zapisywanie elementu Runbook](media/automation-first-runbook-graphical/runbook-toolbar-save-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="22323-160">![Save runbook](media/automation-first-runbook-graphical/runbook-toolbar-save-revised20165.png)</span></span>

## <a name="step-3---test-the-runbook"></a><span data-ttu-id="22323-161">Krok 3. Testowanie elementu Runbook</span><span class="sxs-lookup"><span data-stu-id="22323-161">Step 3 - Test the runbook</span></span>
<span data-ttu-id="22323-162">Przed opublikowaniem elementu Runbook w celu udostępnienia go w środowisku produkcyjnym chcemy go przetestować, aby upewnić się, że działa prawidłowo.</span><span class="sxs-lookup"><span data-stu-id="22323-162">Before we publish the runbook to make it available in production, we want to test it to make sure that it works properly.</span></span>  <span data-ttu-id="22323-163">Testowanie elementu Runbook polega na uruchomieniu jego **wersji roboczej** i interaktywnym przejrzeniu danych wyjściowych.</span><span class="sxs-lookup"><span data-stu-id="22323-163">When you test a runbook, you run its **Draft** version and view its output interactively.</span></span>

1. <span data-ttu-id="22323-164">Kliknij pozycję **Okienko testowania**, aby otworzyć blok testowania.</span><span class="sxs-lookup"><span data-stu-id="22323-164">Click **Test pane** to open the Test blade.</span></span><br> <span data-ttu-id="22323-165">![Okienko testowania](media/automation-first-runbook-graphical/runbook-toolbar-test-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="22323-165">![Test pane](media/automation-first-runbook-graphical/runbook-toolbar-test-revised20165.png)</span></span>
2. <span data-ttu-id="22323-166">Kliknij opcję **Uruchom**, aby rozpocząć test.</span><span class="sxs-lookup"><span data-stu-id="22323-166">Click **Start** to start the test.</span></span>  <span data-ttu-id="22323-167">Powinna to być jedyna włączona opcja.</span><span class="sxs-lookup"><span data-stu-id="22323-167">This should be the only enabled option.</span></span>
3. <span data-ttu-id="22323-168">Zostanie utworzone [zadanie elementu Runbook](automation-runbook-execution.md) i w okienku pojawi się jego stan.</span><span class="sxs-lookup"><span data-stu-id="22323-168">A [runbook job](automation-runbook-execution.md) is created and its status displayed in the pane.</span></span>  
   <span data-ttu-id="22323-169">Początkowy stan zadania to *W kolejce*, który wskazuje, że trwa oczekiwanie na udostępnienie procesu roboczego elementu runbook w chmurze.</span><span class="sxs-lookup"><span data-stu-id="22323-169">The job status starts as *Queued* indicating that it is waiting for a runbook worker in the cloud to become available.</span></span>  <span data-ttu-id="22323-170">Następnym stanem jest *Uruchamianie*, gdy proces roboczy pobiera zadanie, a następnie *Uruchomiono*, gdy element runbook faktycznie zacznie działać.</span><span class="sxs-lookup"><span data-stu-id="22323-170">It then moves to *Starting* when a worker claims the job, and then *Running* when the runbook actually starts running.</span></span>  
4. <span data-ttu-id="22323-171">Po zakończeniu zadania elementu Runbook zostaną wyświetlone jego dane wyjściowe.</span><span class="sxs-lookup"><span data-stu-id="22323-171">When the runbook job completes, its output is displayed.</span></span> <span data-ttu-id="22323-172">W naszym przypadku powinien być widoczny ciąg *Witaj, świecie*.</span><span class="sxs-lookup"><span data-stu-id="22323-172">In our case, we should see *Hello World*.</span></span><br> <span data-ttu-id="22323-173">![Witaj, świecie](media/automation-first-runbook-graphical/runbook-test-results.png)</span><span class="sxs-lookup"><span data-stu-id="22323-173">![Hello World](media/automation-first-runbook-graphical/runbook-test-results.png)</span></span>
5. <span data-ttu-id="22323-174">Zamknij blok testowania, aby wrócić do kanwy.</span><span class="sxs-lookup"><span data-stu-id="22323-174">Close the Test blade to return to the canvas.</span></span>

## <a name="step-4---publish-and-start-the-runbook"></a><span data-ttu-id="22323-175">Krok 4. Publikowanie i uruchamianie elementu Runbook</span><span class="sxs-lookup"><span data-stu-id="22323-175">Step 4 - Publish and start the runbook</span></span>
<span data-ttu-id="22323-176">Nowo utworzony element Runbook nadal działa w trybie roboczym.</span><span class="sxs-lookup"><span data-stu-id="22323-176">The runbook that we created is still in Draft mode.</span></span> <span data-ttu-id="22323-177">Przed uruchomieniem elementu w środowisku produkcyjnym musimy go opublikować.</span><span class="sxs-lookup"><span data-stu-id="22323-177">We need to publish it before we can run it in production.</span></span>  <span data-ttu-id="22323-178">Podczas publikowania elementu Runbook można zastąpić istniejącą wersję opublikowaną wersją roboczą.</span><span class="sxs-lookup"><span data-stu-id="22323-178">When you publish a runbook, you overwrite the existing Published version with the Draft version.</span></span>  <span data-ttu-id="22323-179">W naszym przypadku nie mamy jeszcze wersji opublikowanej, ponieważ element Runbook został dopiero utworzony.</span><span class="sxs-lookup"><span data-stu-id="22323-179">In our case, we don't have a Published version yet because we just created the runbook.</span></span>

1. <span data-ttu-id="22323-180">Kliknij pozycję **Opublikuj**, aby opublikować element Runbook, a następnie kliknij pozycję **Tak** po wyświetleniu monitu.</span><span class="sxs-lookup"><span data-stu-id="22323-180">Click **Publish** to publish the runbook and then **Yes** when prompted.</span></span><br> <span data-ttu-id="22323-181">![Publikowanie](media/automation-first-runbook-graphical/runbook-toolbar-publish-revised20166.png)</span><span class="sxs-lookup"><span data-stu-id="22323-181">![Publish](media/automation-first-runbook-graphical/runbook-toolbar-publish-revised20166.png)</span></span>
2. <span data-ttu-id="22323-182">Jeśli przewiniesz w lewo, aby wyświetlić element runbook w bloku **Elementy runbook**, element **Stan tworzenia** będzie mieć wartość **Opublikowano**.</span><span class="sxs-lookup"><span data-stu-id="22323-182">If you scroll left to view the runbook in the **Runbooks** blade, it shows an **Authoring Status** of **Published**.</span></span>
3. <span data-ttu-id="22323-183">Przewiń w prawo, aby wyświetlić blok elementu **MyFirstRunbook**.</span><span class="sxs-lookup"><span data-stu-id="22323-183">Scroll back to the right to view the blade for **MyFirstRunbook**.</span></span>  
   <span data-ttu-id="22323-184">Opcje w górnej części umożliwiają nam uruchamianie elementu Runbook, planowanie jego uruchomienia w przyszłości lub utworzenie [elementu webhook](automation-webhooks.md) w celu umożliwienia uruchamiania za pośrednictwem wywołania HTTP.</span><span class="sxs-lookup"><span data-stu-id="22323-184">The options across the top allow us to start the runbook, schedule it to start at some time in the future, or create a [webhook](automation-webhooks.md) so it can be started through an HTTP call.</span></span>
4. <span data-ttu-id="22323-185">Chcemy tylko uruchomić element Runbook, dlatego kliknij pozycję **Uruchom**, a następnie pozycję **Tak** po wyświetleniu monitu.</span><span class="sxs-lookup"><span data-stu-id="22323-185">We just want to start the runbook so click **Start** and then **Yes** when prompted.</span></span><br> <span data-ttu-id="22323-186">![Uruchamianie elementu Runbook](media/automation-first-runbook-graphical/runbook-controls-start-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="22323-186">![Start runbook](media/automation-first-runbook-graphical/runbook-controls-start-revised20165.png)</span></span>
5. <span data-ttu-id="22323-187">Zostanie otwarty blok zadania elementu runbook, który został właśnie utworzony.</span><span class="sxs-lookup"><span data-stu-id="22323-187">A job blade is opened for the runbook job that we created.</span></span>  <span data-ttu-id="22323-188">Możemy zamknąć ten blok, ale w tym przypadku pozostanie on otwarty, aby można było obserwować postęp zadania.</span><span class="sxs-lookup"><span data-stu-id="22323-188">We can close this blade, but in this case we leave it open so we can watch the job's progress.</span></span>
6. <span data-ttu-id="22323-189">Stan zadania jest wyświetlany w oknie **Podsumowanie zadania** i odpowiada stanom obserwowanym podczas testowania elementu Runbook.</span><span class="sxs-lookup"><span data-stu-id="22323-189">The job status is shown in **Job Summary** and matches the statuses that we saw when we tested the runbook.</span></span><br> <span data-ttu-id="22323-190">![Podsumowanie zadania](media/automation-first-runbook-graphical/runbook-job-summary.png)</span><span class="sxs-lookup"><span data-stu-id="22323-190">![Job Summary](media/automation-first-runbook-graphical/runbook-job-summary.png)</span></span>
7. <span data-ttu-id="22323-191">Gdy stanem elementu Runbook będzie *Ukończono*, kliknij pozycję **Dane wyjściowe**.</span><span class="sxs-lookup"><span data-stu-id="22323-191">Once the runbook status shows *Completed*, click **Output**.</span></span> <span data-ttu-id="22323-192">Zostanie otwarty blok **Dane wyjściowe** z naszym ciągiem *Witaj, świecie*.</span><span class="sxs-lookup"><span data-stu-id="22323-192">The **Output** blade is opened, and we can see our *Hello World* in the pane.</span></span><br> <span data-ttu-id="22323-193">![Podsumowanie zadania](media/automation-first-runbook-graphical/runbook-job-output.png)</span><span class="sxs-lookup"><span data-stu-id="22323-193">![Job Summary](media/automation-first-runbook-graphical/runbook-job-output.png)</span></span>  
8. <span data-ttu-id="22323-194">Zamknij blok danych wyjściowych.</span><span class="sxs-lookup"><span data-stu-id="22323-194">Close the Output blade.</span></span>
9. <span data-ttu-id="22323-195">Kliknij pozycję **Wszystkie dzienniki**, aby otworzyć blok strumieni dla zadania elementu Runbook.</span><span class="sxs-lookup"><span data-stu-id="22323-195">Click **All Logs** to open the Streams blade for the runbook job.</span></span>  <span data-ttu-id="22323-196">W strumieniu danych wyjściowych powinien być widoczny tylko ciąg *Witaj, świecie*, ale mogą zostać wyświetlone inne strumienie zadania elementu Runbook, takie jak Pełne informacje i Błąd, jeśli element Runbook wykonuje w nich operacje zapisywania.</span><span class="sxs-lookup"><span data-stu-id="22323-196">We should only see *Hello World* in the output stream, but this can show other streams for a runbook job such as Verbose and Error if the runbook writes to them.</span></span><br> <span data-ttu-id="22323-197">![Podsumowanie zadania](media/automation-first-runbook-graphical/runbook-job-AllLogs.png)</span><span class="sxs-lookup"><span data-stu-id="22323-197">![Job Summary](media/automation-first-runbook-graphical/runbook-job-AllLogs.png)</span></span>
10. <span data-ttu-id="22323-198">Zamknij blok Wszystkie dzienniki oraz blok zadania, aby wrócić do bloku MyFirstRunbook.</span><span class="sxs-lookup"><span data-stu-id="22323-198">Close the All Logs blade and the Job blade to return to the MyFirstRunbook blade.</span></span>
11. <span data-ttu-id="22323-199">Kliknij pozycję **Zadania**, aby otworzyć blok zadań dla tego elementu Runbook.</span><span class="sxs-lookup"><span data-stu-id="22323-199">Click **Jobs** to open the Jobs blade for this runbook.</span></span>  <span data-ttu-id="22323-200">Zawiera on listę wszystkich zadań utworzonych przez ten element runbook.</span><span class="sxs-lookup"><span data-stu-id="22323-200">This lists all the jobs created by this runbook.</span></span> <span data-ttu-id="22323-201">Ponieważ uruchomiliśmy zadanie tylko raz, powinniśmy zobaczyć tylko jedno zadanie.</span><span class="sxs-lookup"><span data-stu-id="22323-201">We should only see one job listed since we only ran the job once.</span></span><br> <span data-ttu-id="22323-202">![Zadania](media/automation-first-runbook-graphical/runbook-control-jobs.png)</span><span class="sxs-lookup"><span data-stu-id="22323-202">![Jobs](media/automation-first-runbook-graphical/runbook-control-jobs.png)</span></span>
12. <span data-ttu-id="22323-203">Możesz kliknąć to zadanie, aby otworzyć okienko zadania wyświetlone przez nas wcześniej po uruchomieniu elementu Runbook.</span><span class="sxs-lookup"><span data-stu-id="22323-203">You can click this job to open the same Job pane that we viewed when we started the runbook.</span></span>  <span data-ttu-id="22323-204">Dzięki temu możesz cofnąć się w czasie i wyświetlić szczegóły dowolnego zadania, które zostało utworzone dla określonego elementu Runbook.</span><span class="sxs-lookup"><span data-stu-id="22323-204">This allows you to go back in time and view the details of any job that was created for a particular runbook.</span></span>

## <a name="step-5---create-variable-assets"></a><span data-ttu-id="22323-205">Krok 5. Tworzenie zmiennych elementów zawartości</span><span class="sxs-lookup"><span data-stu-id="22323-205">Step 5 - Create variable assets</span></span>
<span data-ttu-id="22323-206">Nasz element Runbook został przetestowany i opublikowany, ale jak do tej pory nie wykonuje on żadnych użytecznych czynności.</span><span class="sxs-lookup"><span data-stu-id="22323-206">We've tested and published our runbook, but so far it doesn't do anything useful.</span></span> <span data-ttu-id="22323-207">Chcemy, aby zarządzał zasobami platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="22323-207">We want to have it manage Azure resources.</span></span>  <span data-ttu-id="22323-208">Przed skonfigurowaniem elementu runbook do uwierzytelniania utworzymy zmienną do przechowywania identyfikatora subskrypcji i odwoływania się do niego po skonfigurowania działania do uwierzytelniania w poniższym kroku 6.</span><span class="sxs-lookup"><span data-stu-id="22323-208">Before we configure the runbook to authenticate, we  create a variable to hold the subscription ID and reference it after we set up the activity to authenticate in step 6 below.</span></span>  <span data-ttu-id="22323-209">Uwzględnienie odwołania do kontekstu subskrypcji ułatwia pracę z wieloma subskrypcjami.</span><span class="sxs-lookup"><span data-stu-id="22323-209">Including a reference to the subscription context allows you to easily work between multiple subscriptions.</span></span>  <span data-ttu-id="22323-210">Przed kontynuowaniem skopiuj identyfikator subskrypcji z opcji Subskrypcje w okienku Nawigacja.</span><span class="sxs-lookup"><span data-stu-id="22323-210">Before proceeding, copy your subscription ID from the Subscriptions option off the Navigation pane.</span></span>  

1. <span data-ttu-id="22323-211">W bloku Konta usługi Automation kliknij kafelek **Elementy zawartości**. Zostanie otwarty blok **Elementy zawartości**.</span><span class="sxs-lookup"><span data-stu-id="22323-211">In the Automation Accounts blade, click the **Assets** tile and the **Assets** blade is opened.</span></span>
2. <span data-ttu-id="22323-212">W bloku Elementy zawartości kliknij kafelek **Zmienne**.</span><span class="sxs-lookup"><span data-stu-id="22323-212">In the Assets blade, click the **Variables** tile.</span></span>
3. <span data-ttu-id="22323-213">W bloku zmiennych kliknij pozycję **Dodaj zmienną**.</span><span class="sxs-lookup"><span data-stu-id="22323-213">On the Variables blade, click **Add a variable**.</span></span><br><span data-ttu-id="22323-214">![Zmienna usługi Automation](media/automation-first-runbook-graphical/create-new-subscriptionid-variable.png)</span><span class="sxs-lookup"><span data-stu-id="22323-214">![Automation Variable](media/automation-first-runbook-graphical/create-new-subscriptionid-variable.png)</span></span>
4. <span data-ttu-id="22323-215">W bloku Nowa zmienna w polu **Nazwa** wprowadź ciąg **AzureSubscriptionId**, a w polu **Wartość** wprowadź identyfikator subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="22323-215">In the New variable blade, in the **Name** box, enter **AzureSubscriptionId** and in the **Value** box enter your Subscription ID.</span></span>  <span data-ttu-id="22323-216">Zachowaj *ciąg* jako wartość pola **Typ** i wartość domyślną pola **Szyfrowanie**.</span><span class="sxs-lookup"><span data-stu-id="22323-216">Keep *string* for the **Type** and the default value for **Encryption**.</span></span>  
5. <span data-ttu-id="22323-217">Kliknij pozycję **Utwórz**, aby utworzyć zmienną.</span><span class="sxs-lookup"><span data-stu-id="22323-217">Click **Create** to create the variable.</span></span>  

## <a name="step-6---add-authentication-to-manage-azure-resources"></a><span data-ttu-id="22323-218">Krok 6. Dodawanie uwierzytelniania w celu zarządzania zasobami platformy Azure</span><span class="sxs-lookup"><span data-stu-id="22323-218">Step 6 - Add authentication to manage Azure resources</span></span>
<span data-ttu-id="22323-219">Teraz mamy zmienną służącą do przechowywania identyfikatora subskrypcji i możemy skonfigurować nasz element Runbook do uwierzytelniania przy użyciu poświadczeń Uruchom jako, które określono w części dotyczącej [wymagań wstępnych](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="22323-219">Now that we have a variable to hold our subscription ID, we can configure our runbook to authenticate with the Run As credentials that are referred to in the [prerequisites](#prerequisites).</span></span>  <span data-ttu-id="22323-220">W tym celu możemy dodać do kanwy połączenie platformy Azure Uruchom jako **Element zawartości** i polecenie cmdlet **Add-AzureRMAccount**.</span><span class="sxs-lookup"><span data-stu-id="22323-220">We do that by adding the Azure Run As connection **Asset** and **Add-AzureRMAccount** cmdlet to the canvas.</span></span>  

1. <span data-ttu-id="22323-221">Otwórz edytor graficzny, klikając pozycję **Edytuj** w bloku MyFirstRunbook.</span><span class="sxs-lookup"><span data-stu-id="22323-221">Open the graphical editor by clicking **Edit** on the MyFirstRunbook blade.</span></span><br> <span data-ttu-id="22323-222">![Edytowanie elementu Runbook](media/automation-first-runbook-graphical/runbook-controls-edit-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="22323-222">![Edit runbook](media/automation-first-runbook-graphical/runbook-controls-edit-revised20165.png)</span></span>
2. <span data-ttu-id="22323-223">Nie potrzebujemy już pozycji **Zapisz ciąg Hello World w danych wyjściowych**, więc kliknij ją prawym przyciskiem myszy i wybierz pozycję **Usuń**.</span><span class="sxs-lookup"><span data-stu-id="22323-223">We don't need the **Write Hello World to output** anymore, so right-click it and select **Delete**.</span></span>
3. <span data-ttu-id="22323-224">W kontrolce Biblioteka rozwiń pozycję **Połączenia** i dodaj pozycję **AzureRunAsConnection** do kanwy, wybierając pozycję **Dodaj do kanwy**.</span><span class="sxs-lookup"><span data-stu-id="22323-224">In the Library control, expand **Connections** and add **AzureRunAsConnection** to the canvas by selecting **Add to canvas**.</span></span>
4. <span data-ttu-id="22323-225">W kanwie wybierz pozycję **AzureRunAsConnection** i w okienku kontrolki Konfiguracja wpisz **Uzyskaj połączenie Uruchom jako** w polu tekstowym **Etykieta**.</span><span class="sxs-lookup"><span data-stu-id="22323-225">On the canvas, select **AzureRunAsConnection** and in the Configuration control pane, type **Get Run As Connection** in the **Label** textbox.</span></span>  <span data-ttu-id="22323-226">To jest połączenie</span><span class="sxs-lookup"><span data-stu-id="22323-226">This is the connection</span></span>
5. <span data-ttu-id="22323-227">W kontrolce Biblioteka wpisz ciąg **Add-AzureRmAccount** w polu tekstowym wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="22323-227">In the Library control, type **Add-AzureRmAccount** in the search textbox.</span></span>
6. <span data-ttu-id="22323-228">Dodaj polecenie **Add-AzureRmAccount** do kanwy.</span><span class="sxs-lookup"><span data-stu-id="22323-228">Add **Add-AzureRmAccount** to the canvas.</span></span><br> <span data-ttu-id="22323-229">![Add-AzureRMAccount](media/automation-first-runbook-graphical/search-powershell-cmdlet-addazurermaccount.png)</span><span class="sxs-lookup"><span data-stu-id="22323-229">![Add-AzureRMAccount](media/automation-first-runbook-graphical/search-powershell-cmdlet-addazurermaccount.png)</span></span>
7. <span data-ttu-id="22323-230">Umieść kursor nad pozycją **Uzyskaj połączenie Uruchom jako** i zaczekaj, aż w dolnej części kształtu pojawi się okrąg.</span><span class="sxs-lookup"><span data-stu-id="22323-230">Hover over **Get Run As Connection** until a circle appears on the bottom of the shape.</span></span> <span data-ttu-id="22323-231">Kliknij okrąg i przeciągnij strzałkę do pozycji **Add-AzureRmAccount**.</span><span class="sxs-lookup"><span data-stu-id="22323-231">Click the circle and drag the arrow to **Add-AzureRmAccount**.</span></span>  <span data-ttu-id="22323-232">Utworzona strzałka to *link*.</span><span class="sxs-lookup"><span data-stu-id="22323-232">The arrow that you created is a *link*.</span></span>  <span data-ttu-id="22323-233">Element runbook rozpocznie pracę od pozycji **Uzyskaj połączenie Uruchom jako**, a następnie uruchomi polecenie **Add-AzureRmAccount**.</span><span class="sxs-lookup"><span data-stu-id="22323-233">The runbook starts with **Get Run As Connection** and then run **Add-AzureRmAccount**.</span></span><br> <span data-ttu-id="22323-234">![Tworzenie połączenia między działaniami](media/automation-first-runbook-graphical/runbook-link-auth-activities.png)</span><span class="sxs-lookup"><span data-stu-id="22323-234">![Create link between activities](media/automation-first-runbook-graphical/runbook-link-auth-activities.png)</span></span>
8. <span data-ttu-id="22323-235">W kanwie wybierz pozycję **Add-AzureRmAccount** i w okienku kontrolki Konfiguracja wpisz ciąg **Zaloguj się do platformy Azure** w polu tekstowym **Etykieta**.</span><span class="sxs-lookup"><span data-stu-id="22323-235">On the canvas, select **Add-AzureRmAccount** and in the Configuration control pane type **Login to Azure** in the **Label** textbox.</span></span>
9. <span data-ttu-id="22323-236">Kliknij pozycję **Parametry**. Zostanie wyświetlony blok Konfiguracja parametru działania.</span><span class="sxs-lookup"><span data-stu-id="22323-236">Click **Parameters** and the Activity Parameter Configuration blade appears.</span></span>
10. <span data-ttu-id="22323-237">Polecenie **Add-AzureRmAccount** ma wiele zestawów parametrów, dlatego musimy wybrać jeden przed podaniem wartości parametrów.</span><span class="sxs-lookup"><span data-stu-id="22323-237">**Add-AzureRmAccount** has multiple parameter sets, so we need to select one before we can provide parameter values.</span></span>  <span data-ttu-id="22323-238">Kliknij pozycję **Zestaw parametrów**, a następnie wybierz zestaw parametrów **ServicePrincipalCertificatewithSubscriptionId**.</span><span class="sxs-lookup"><span data-stu-id="22323-238">Click **Parameter Set** and then select the **ServicePrincipalCertificatewithSubscriptionId** parameter set.</span></span>
11. <span data-ttu-id="22323-239">Po wybraniu zestawu parametrów parametry zostaną wyświetlone w bloku Działanie parametru konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="22323-239">Once you select the parameter set, the parameters are displayed in the Activity Parameter Configuration blade.</span></span>  <span data-ttu-id="22323-240">Kliknij pozycję **APPLICATIONID**.</span><span class="sxs-lookup"><span data-stu-id="22323-240">Click **APPLICATIONID**.</span></span><br> <span data-ttu-id="22323-241">![Dodawanie parametrów konta usługi Azure RM](media/automation-first-runbook-graphical/add-azurermaccount-params.png)</span><span class="sxs-lookup"><span data-stu-id="22323-241">![Add Azure RM account parameters](media/automation-first-runbook-graphical/add-azurermaccount-params.png)</span></span>
12. <span data-ttu-id="22323-242">W bloku Wartość parametru wybierz pozycję **Wyjście działania** jako **źródła danych** i wybierz pozycję **Uzyskaj połączenie Uruchom jako** z listy, w polu tekstowym **Ścieżka pola** wpisz ciąg **ApplicationId**, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="22323-242">In the Parameter Value blade, select **Activity output** for the **Data source** and select **Get Run As Connection** from the list, in the **Field path** textbox type **ApplicationId**, and then click **OK**.</span></span>  <span data-ttu-id="22323-243">Określamy nazwę właściwości ścieżki pola, ponieważ wyjściem działania jest obiekt z wieloma właściwościami.</span><span class="sxs-lookup"><span data-stu-id="22323-243">We are specifying the name of the property for the Field path because the activity outputs an object with multiple properties.</span></span>
13. <span data-ttu-id="22323-244">Kliknij pozycję **CERTIFICATETHUMBPRINT** i w bloku Wartość parametru wybierz **Wyjście działania** jako **źródło danych**.</span><span class="sxs-lookup"><span data-stu-id="22323-244">Click **CERTIFICATETHUMBPRINT**, and in the Parameter Value blade, select **Activity output** for the **Data source**.</span></span>  <span data-ttu-id="22323-245">Wybierz z listy pozycję **Uzyskaj połączenie Uruchom jako**, w polu tekstowym **Ścieżka pola** wpisz ciąg **CertificateThumbprint**, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="22323-245">Select **Get Run As Connection** from the list, in the **Field path** textbox type **CertificateThumbprint**, and then click **OK**.</span></span>
14. <span data-ttu-id="22323-246">Kliknij pozycję **SERVICEPRINCIPAL** i w bloku Wartość parametru wybierz **ConstantValue** jako **źródło danych**, kliknij opcję **True**, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="22323-246">Click **SERVICEPRINCIPAL**, and in the Parameter Value blade, select **ConstantValue** for the **Data source**, click the option **True**, and then click **OK**.</span></span>
15. <span data-ttu-id="22323-247">Kliknij pozycję **TENANTID** i w bloku Wartość parametru wybierz **Wyjście działania** jako **źródło danych**.</span><span class="sxs-lookup"><span data-stu-id="22323-247">Click **TENANTID**, and in the Parameter Value blade, select **Activity output** for the **Data source**.</span></span>  <span data-ttu-id="22323-248">Wybierz pozycję **Uzyskaj połączenie Uruchom jako** z listy, w polu tekstowym **Ścieżka pola** wpisz ciąg **TenantId**, a następnie dwukrotnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="22323-248">Select **Get Run As Connection** from the list, in the **Field path** textbox type **TenantId**, and then click **OK** twice.</span></span>  
16. <span data-ttu-id="22323-249">W kontrolce Biblioteka wpisz ciąg **Set-AzureRmContext** w polu tekstowym wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="22323-249">In the Library control, type **Set-AzureRmContext** in the search textbox.</span></span>
17. <span data-ttu-id="22323-250">Dodaj pozycję **Set-AzureRmContext** do kanwy.</span><span class="sxs-lookup"><span data-stu-id="22323-250">Add **Set-AzureRmContext** to the canvas.</span></span>
18. <span data-ttu-id="22323-251">W kanwie wybierz pozycję **Set-AzureRmContext** i w okienku kontrolki Konfiguracja wpisz ciąg **Określ identyfikator subskrypcji** w polu tekstowym **Etykieta**.</span><span class="sxs-lookup"><span data-stu-id="22323-251">On the canvas, select **Set-AzureRmContext** and in the Configuration control pane type **Specify Subscription Id** in the **Label** textbox.</span></span>
19. <span data-ttu-id="22323-252">Kliknij pozycję **Parametry**. Zostanie wyświetlony blok Konfiguracja parametru działania.</span><span class="sxs-lookup"><span data-stu-id="22323-252">Click **Parameters** and the Activity Parameter Configuration blade appears.</span></span>
20. <span data-ttu-id="22323-253">Polecenie **Set-AzureRmContext** ma wiele zestawów parametrów, dlatego musimy wybrać jeden przed podaniem wartości parametrów.</span><span class="sxs-lookup"><span data-stu-id="22323-253">**Set-AzureRmContext** has multiple parameter sets, so we need to select one before we can provide parameter values.</span></span>  <span data-ttu-id="22323-254">Kliknij pozycję **Zestaw parametrów**, a następnie wybierz zestaw parametrów **SubscriptionId**.</span><span class="sxs-lookup"><span data-stu-id="22323-254">Click **Parameter Set** and then select the **SubscriptionId** parameter set.</span></span>  
21. <span data-ttu-id="22323-255">Po wybraniu zestawu parametrów parametry zostaną wyświetlone w bloku Działanie parametru konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="22323-255">Once you select the parameter set, the parameters are displayed in the Activity Parameter Configuration blade.</span></span>  <span data-ttu-id="22323-256">Kliknij pozycję **SubscriptionID**.</span><span class="sxs-lookup"><span data-stu-id="22323-256">Click **SubscriptionID**</span></span>
22. <span data-ttu-id="22323-257">W bloku Wartość parametru wybierz pozycję **Element zawartości zmiennej** jako **źródło danych**, wybierz pozycję **AzureSubscriptionId** z listy, a następnie dwukrotnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="22323-257">In the Parameter Value blade, select **Variable Asset** for the **Data source** and select **AzureSubscriptionId** from the list and then click **OK** twice.</span></span>   
23. <span data-ttu-id="22323-258">Umieść kursor nad pozycją **Zaloguj się do platformy Azure** i zaczekaj, aż w dolnej części kształtu pojawi się okrąg.</span><span class="sxs-lookup"><span data-stu-id="22323-258">Hover over **Login to Azure** until a circle appears on the bottom of the shape.</span></span> <span data-ttu-id="22323-259">Kliknij okrąg i przeciągnij strzałkę do pozycji **Określ identyfikator subskrypcji**.</span><span class="sxs-lookup"><span data-stu-id="22323-259">Click the circle and drag the arrow to **Specify Subscription Id**.</span></span>

<span data-ttu-id="22323-260">Element Runbook powinien na tym etapie wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="22323-260">Your runbook should look like the following at this point:</span></span> <br>![Konfiguracja uwierzytelniania elementu Runbook](media/automation-first-runbook-graphical/runbook-auth-config.png)

## <a name="step-7---add-activity-to-start-a-virtual-machine"></a><span data-ttu-id="22323-262">Krok 7. Dodawanie działania w celu uruchomienia maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="22323-262">Step 7 - Add activity to start a virtual machine</span></span>
<span data-ttu-id="22323-263">Teraz dodamy działanie **Start-AzureRmVM** w celu uruchomienia maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="22323-263">Here we add a **Start-AzureRmVM** activity to start a virtual machine.</span></span>  <span data-ttu-id="22323-264">Możesz wybrać dowolną maszynę wirtualną w ramach subskrypcji Azure. Wybrana nazwa zostanie na razie umieszczona w kodzie polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="22323-264">You can pick any virtual machine in your Azure subscription, and for now you hardcode that name into the cmdlet.</span></span>

1. <span data-ttu-id="22323-265">W kontrolce Biblioteka wpisz ciąg **Start-AzureRm** w polu tekstowym wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="22323-265">In the Library control, type **Start-AzureRm** in the search textbox.</span></span>
2. <span data-ttu-id="22323-266">Dodaj polecenie **Start-AzureRmVM** do kanwy, a następnie kliknij i przeciągnij go poniżej obszaru **Określ identyfikator subskrypcji**.</span><span class="sxs-lookup"><span data-stu-id="22323-266">Add **Start-AzureRmVM** to the canvas and then click and drag it underneath **Specify Subscription Id**.</span></span>
3. <span data-ttu-id="22323-267">Umieść kursor nad pozycją **Określ identyfikator subskrypcji** i zaczekaj, aż w dolnej części kształtu pojawi się okrąg.</span><span class="sxs-lookup"><span data-stu-id="22323-267">Hover over **Specify Subscription Id** until a circle appears on the bottom of the shape.</span></span>  <span data-ttu-id="22323-268">Kliknij okrąg i przeciągnij strzałkę do pozycji **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="22323-268">Click the circle and drag the arrow to **Start-AzureRmVM**.</span></span>
4. <span data-ttu-id="22323-269">Wybierz pozycję **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="22323-269">Select **Start-AzureRmVM**.</span></span>  <span data-ttu-id="22323-270">Kliknij pozycję **Parametry**, a następnie pozycję **Zestaw parametrów**, aby wyświetlić zestawy dla pozycji **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="22323-270">Click **Parameters** and then **Parameter Set** to view the sets for **Start-AzureRmVM**.</span></span>  <span data-ttu-id="22323-271">Wybierz zestaw parametrów **ResourceGroupNameParameterSetName**.</span><span class="sxs-lookup"><span data-stu-id="22323-271">Select the **ResourceGroupNameParameterSetName** parameter set.</span></span> <span data-ttu-id="22323-272">Zwróć uwagę, że obok parametrów **ResourceGroupName** i **Name** znajdują się wykrzykniki.</span><span class="sxs-lookup"><span data-stu-id="22323-272">Note that **ResourceGroupName** and **Name** have exclamation points next them.</span></span>  <span data-ttu-id="22323-273">Oznacza to, że te parametry są wymagane.</span><span class="sxs-lookup"><span data-stu-id="22323-273">This indicates that they are required parameters.</span></span>  <span data-ttu-id="22323-274">Oczekiwane wartości obu parametrów to ciągi.</span><span class="sxs-lookup"><span data-stu-id="22323-274">Also note both expect string values.</span></span>
5. <span data-ttu-id="22323-275">Wybierz pozycję **Nazwa**.</span><span class="sxs-lookup"><span data-stu-id="22323-275">Select **Name**.</span></span>  <span data-ttu-id="22323-276">Wybierz pozycję **Wyrażenie programu PowerShell** jako **Źródło danych**, a następnie wpisz ujętą w cudzysłów nazwę maszyny wirtualnej, która zostanie uruchomiona przy użyciu tego elementu runbook.</span><span class="sxs-lookup"><span data-stu-id="22323-276">Select **PowerShell expression** for the **Data source** and type in the name of the virtual machine surrounded with double quotes that we start with this runbook.</span></span>  <span data-ttu-id="22323-277">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="22323-277">Click **OK**.</span></span><br><span data-ttu-id="22323-278">![Wartość parametru Name pozycji Start-AzureRmVM](media/automation-first-runbook-graphical/runbook-startvm-nameparameter.png)</span><span class="sxs-lookup"><span data-stu-id="22323-278">![Start-AzureRmVM Name Parameter Value](media/automation-first-runbook-graphical/runbook-startvm-nameparameter.png)</span></span>
6. <span data-ttu-id="22323-279">Wybierz pozycję **ResourceGroupName**.</span><span class="sxs-lookup"><span data-stu-id="22323-279">Select **ResourceGroupName**.</span></span> <span data-ttu-id="22323-280">Użyj pozycji **Wyrażenie programu PowerShell** jako **źródła danych** i wpisz nazwę grupy zasobów ujętą w podwójne cudzysłowy.</span><span class="sxs-lookup"><span data-stu-id="22323-280">Use **PowerShell expression** for the **Data source** and type in the name of the resource group surrounded with double quotes.</span></span>  <span data-ttu-id="22323-281">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="22323-281">Click **OK**.</span></span><br> <span data-ttu-id="22323-282">![Parametry polecenia Start-AzureRmVM](media/automation-first-runbook-graphical/startazurermvm-params.png)</span><span class="sxs-lookup"><span data-stu-id="22323-282">![Start-AzureRmVM Parameters](media/automation-first-runbook-graphical/startazurermvm-params.png)</span></span>
7. <span data-ttu-id="22323-283">Kliknij pozycję Okienko testowania, aby umożliwić przetestowanie elementu Runbook.</span><span class="sxs-lookup"><span data-stu-id="22323-283">Click Test pane so that we can test the runbook.</span></span>
8. <span data-ttu-id="22323-284">Kliknij opcję **Uruchom**, aby rozpocząć test.</span><span class="sxs-lookup"><span data-stu-id="22323-284">Click **Start** to start the test.</span></span>  <span data-ttu-id="22323-285">Po zakończeniu sprawdź, czy maszyna wirtualna została uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="22323-285">Once it completes, check that the virtual machine was started.</span></span>

<span data-ttu-id="22323-286">Element Runbook powinien na tym etapie wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="22323-286">Your runbook should look like the following at this point:</span></span> <br>![Konfiguracja uwierzytelniania elementu Runbook](media/automation-first-runbook-graphical/runbook-startvm.png)

## <a name="step-8---add-additional-input-parameters-to-the-runbook"></a><span data-ttu-id="22323-288">Krok 8. Dodawanie dodatkowych parametrów wejściowych do elementu Runbook</span><span class="sxs-lookup"><span data-stu-id="22323-288">Step 8 - Add additional input parameters to the runbook</span></span>
<span data-ttu-id="22323-289">Nasz element runbook aktualnie umożliwia uruchomienie maszyny wirtualnej w grupie zasobów określonej w poleceniu cmdlet **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="22323-289">Our runbook currently starts the virtual machine in the resource group that we specified in the **Start-AzureRmVM** cmdlet.</span></span>  <span data-ttu-id="22323-290">Ten element runbook byłby jednak bardziej użyteczny, gdybyśmy mogli podać obydwie wartości podczas jego uruchamiania.</span><span class="sxs-lookup"><span data-stu-id="22323-290">Our runbook would be more useful if we could specify both when the runbook is started.</span></span>  <span data-ttu-id="22323-291">Aby to zrobić, dodamy teraz do elementu runbook parametry wejściowe.</span><span class="sxs-lookup"><span data-stu-id="22323-291">We now add input parameters to the runbook to provide that functionality.</span></span>

1. <span data-ttu-id="22323-292">Otwórz edytor graficzny, klikając pozycję **Edytuj** w okienku **MyFirstRunbook**.</span><span class="sxs-lookup"><span data-stu-id="22323-292">Open the graphical editor by clicking **Edit** on the **MyFirstRunbook** pane.</span></span>
2. <span data-ttu-id="22323-293">Kliknij pozycję **Wejście i wyjście**, a następnie pozycję **Dodaj wejście**, aby otworzyć okienko parametru wejściowego elementu Runbook.</span><span class="sxs-lookup"><span data-stu-id="22323-293">Click **Input and output** and then **Add input** to open the Runbook Input Parameter pane.</span></span><br> <span data-ttu-id="22323-294">![Wejście i wyjście elementu Runbook](media/automation-first-runbook-graphical/runbook-toolbar-InputandOutput-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="22323-294">![Runbook Input and Output](media/automation-first-runbook-graphical/runbook-toolbar-InputandOutput-revised20165.png)</span></span>
3. <span data-ttu-id="22323-295">Wprowadź wartość *VMName* parametru **Name**.</span><span class="sxs-lookup"><span data-stu-id="22323-295">Specify *VMName* for the **Name**.</span></span>  <span data-ttu-id="22323-296">Zachowaj *ciąg* jak wartość pola **Typ**, ale zmień ustawienie pozycji **Obowiązkowy** na *Tak*.</span><span class="sxs-lookup"><span data-stu-id="22323-296">Keep *string* for the **Type**, but change **Mandatory** to *Yes*.</span></span>  <span data-ttu-id="22323-297">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="22323-297">Click **OK**.</span></span>
4. <span data-ttu-id="22323-298">Utwórz drugi obowiązkowy parametr wejściowy o nazwie *ResourceGroupName*, a następnie kliknij przycisk **OK**, aby zamknąć okienko **Wejście i wyjście**.</span><span class="sxs-lookup"><span data-stu-id="22323-298">Create a second mandatory input parameter called *ResourceGroupName* and then click **OK** to close the **Input and Output** pane.</span></span><br> <span data-ttu-id="22323-299">![Parametry wejściowe elementu Runbook](media/automation-first-runbook-graphical/start-azurermvm-params-outputs.png)</span><span class="sxs-lookup"><span data-stu-id="22323-299">![Runbook Input Parameters](media/automation-first-runbook-graphical/start-azurermvm-params-outputs.png)</span></span>
5. <span data-ttu-id="22323-300">Wybierz działanie **Start-AzureRmVM**, a następnie kliknij pozycję **Parametry**.</span><span class="sxs-lookup"><span data-stu-id="22323-300">Select the **Start-AzureRmVM** activity and then click **Parameters**.</span></span>
6. <span data-ttu-id="22323-301">Zmień **źródło danych** dla pozycji **Name** na **Wejście elementu Runbook**, a następnie wybierz pozycję **VMName**.</span><span class="sxs-lookup"><span data-stu-id="22323-301">Change the **Data source** for **Name** to **Runbook input** and then select **VMName**.</span></span><br>
7. <span data-ttu-id="22323-302">Zmień **źródło danych** dla pozycji **ResourceGroupName** na **Wejście elementu Runbook**, a następnie wybierz pozycję **ResourceGroupName**.</span><span class="sxs-lookup"><span data-stu-id="22323-302">Change the **Data source** for **ResourceGroupName** to **Runbook input** and then select **ResourceGroupName**.</span></span><br> <span data-ttu-id="22323-303">![Parametry polecenia Start-AzureVM](media/automation-first-runbook-graphical/start-azurermvm-params-runbookinput.png)</span><span class="sxs-lookup"><span data-stu-id="22323-303">![Start-AzureVM Parameters](media/automation-first-runbook-graphical/start-azurermvm-params-runbookinput.png)</span></span>
8. <span data-ttu-id="22323-304">Zapisz element Runbook, a następnie otwórz okienko testowania.</span><span class="sxs-lookup"><span data-stu-id="22323-304">Save the runbook and open the Test pane.</span></span>  <span data-ttu-id="22323-305">Zauważ, że teraz możesz podać wartości dwóch zmiennych wejściowych, które zostaną użyte w teście.</span><span class="sxs-lookup"><span data-stu-id="22323-305">Note that you can now provide values for the two input variables that you use in the test.</span></span>
9. <span data-ttu-id="22323-306">Zamknij okienko testowania.</span><span class="sxs-lookup"><span data-stu-id="22323-306">Close the Test pane.</span></span>
10. <span data-ttu-id="22323-307">Kliknij pozycję **Opublikuj**, aby opublikować nową wersję elementu Runbook.</span><span class="sxs-lookup"><span data-stu-id="22323-307">Click **Publish** to publish the new version of the runbook.</span></span>
11. <span data-ttu-id="22323-308">Zatrzymaj maszynę wirtualną uruchomioną w poprzednim kroku.</span><span class="sxs-lookup"><span data-stu-id="22323-308">Stop the virtual machine that you started in the previous step.</span></span>
12. <span data-ttu-id="22323-309">Kliknij pozycję **Uruchom**, aby uruchomić element Runbook.</span><span class="sxs-lookup"><span data-stu-id="22323-309">Click **Start** to start the runbook.</span></span>  <span data-ttu-id="22323-310">Wpisz wartości parametrów **VMName** i **ResourceGroupName** dla maszyny wirtualnej do uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="22323-310">Type in the **VMName** and **ResourceGroupName** for the virtual machine that you're going to start.</span></span><br> <span data-ttu-id="22323-311">![Uruchamianie elementu Runbook](media/automation-first-runbook-graphical/runbook-start-inputparams.png)</span><span class="sxs-lookup"><span data-stu-id="22323-311">![Start Runbook](media/automation-first-runbook-graphical/runbook-start-inputparams.png)</span></span>
13. <span data-ttu-id="22323-312">Po zakończeniu działania elementu Runbook sprawdź, czy maszyna wirtualna została uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="22323-312">When the runbook completes, check that the virtual machine was started.</span></span>

## <a name="step-9---create-a-conditional-link"></a><span data-ttu-id="22323-313">Krok 9. Tworzenie połączenia warunkowego</span><span class="sxs-lookup"><span data-stu-id="22323-313">Step 9 - Create a conditional link</span></span>
<span data-ttu-id="22323-314">Teraz zmodyfikujemy element runbook w taki sposób, aby podejmował próbę uruchomienia maszyny wirtualnej tylko wtedy, gdy nie została jeszcze uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="22323-314">We now modify the runbook so that it only attempts to start the virtual machine if it is not already started.</span></span>  <span data-ttu-id="22323-315">W tym celu do elementu runbook dodamy polecenie cmdlet **Get-AzureRmVM** służące do pobrania stanu poziomu wystąpienia maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="22323-315">You do this by adding a **Get-AzureRmVM** cmdlet to the runbook that gets the instance level status of the virtual machine.</span></span> <span data-ttu-id="22323-316">Następnie dodamy moduł kodu przepływu pracy programu PowerShell o nazwie **Pobieranie stanu** przy użyciu fragmentu kodu programu PowerShell, aby określić, czy stan maszyny wirtualnej wskazuje na jej uruchomienie, czy też na jej zatrzymanie.</span><span class="sxs-lookup"><span data-stu-id="22323-316">Then you add a PowerShell Workflow code module called **Get Status** with a snippet of PowerShell code to determine if the virtual machine state is running or stopped.</span></span>  <span data-ttu-id="22323-317">Połączenie warunkowe z modułu **Pobieranie stanu** będzie powodować uruchomienie polecenia **Start-AzureRmVM** tylko w sytuacji, gdy bieżący stan działania wskazuje na zatrzymanie.</span><span class="sxs-lookup"><span data-stu-id="22323-317">A conditional link from the **Get Status** module only runs **Start-AzureRmVM** if the current running state is stopped.</span></span>  <span data-ttu-id="22323-318">Na koniec utworzymy wiadomość wyjściową, aby za pomocą polecenia cmdlet programu PowerShell Write-Output poinformować Cię o tym, czy maszyna wirtualna została pomyślnie uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="22323-318">Finally, we output a message to inform you if the VM was successfully started or not using the PowerShell Write-Output cmdlet.</span></span>

1. <span data-ttu-id="22323-319">Otwórz element **MyFirstRunbook** w edytorze graficznym.</span><span class="sxs-lookup"><span data-stu-id="22323-319">Open **MyFirstRunbook** in the graphical editor.</span></span>
2. <span data-ttu-id="22323-320">Usuń połączenie między elementami **Określ identyfikator subskrypcji** i **Start -AzureRmVM**, klikając je i naciskając klawisz *Delete*.</span><span class="sxs-lookup"><span data-stu-id="22323-320">Remove the link between **Specify Subscription Id** and **Start-AzureRmVM** by clicking on it and then pressing the *Delete* key.</span></span>
3. <span data-ttu-id="22323-321">W kontrolce Biblioteka wpisz ciąg **Get-AzureRm** w polu tekstowym wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="22323-321">In the Library control, type **Get-AzureRm** in the search textbox.</span></span>
4. <span data-ttu-id="22323-322">Dodaj pozycję **Get-AzureRmVM** do kanwy.</span><span class="sxs-lookup"><span data-stu-id="22323-322">Add **Get-AzureRmVM** to the canvas.</span></span>
5. <span data-ttu-id="22323-323">Wybierz polecenie **Get-AzureRmVM**, a następnie pozycję **Zestaw parametrów**, aby wyświetlić zestawy polecenia **Get-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="22323-323">Select **Get-AzureRmVM** and then **Parameter Set** to view the sets for **Get-AzureRmVM**.</span></span>  <span data-ttu-id="22323-324">Wybierz zestaw parametrów **GetVirtualMachineInResourceGroupNameParamSet**.</span><span class="sxs-lookup"><span data-stu-id="22323-324">Select the **GetVirtualMachineInResourceGroupNameParamSet** parameter set.</span></span>  <span data-ttu-id="22323-325">Zwróć uwagę, że obok parametrów **ResourceGroupName** i **Name** znajdują się wykrzykniki.</span><span class="sxs-lookup"><span data-stu-id="22323-325">Note that **ResourceGroupName** and **Name** have exclamation points next them.</span></span>  <span data-ttu-id="22323-326">Oznacza to, że te parametry są wymagane.</span><span class="sxs-lookup"><span data-stu-id="22323-326">This indicates that they are required parameters.</span></span>  <span data-ttu-id="22323-327">Oczekiwane wartości obu parametrów to ciągi.</span><span class="sxs-lookup"><span data-stu-id="22323-327">Also note both expect string values.</span></span>
6. <span data-ttu-id="22323-328">W obszarze **Źródło danych** dla pozycji **Name** wybierz pozycję **Wejście elementu Runbook**, a następnie wybierz pozycję **VMName**.</span><span class="sxs-lookup"><span data-stu-id="22323-328">Under **Data source** for **Name**, select **Runbook input** and then select **VMName**.</span></span>  <span data-ttu-id="22323-329">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="22323-329">Click **OK**.</span></span>
7. <span data-ttu-id="22323-330">W obszarze **Źródło danych** dla pozycji **ResourceGroupName** wybierz pozycję **Wejście elementu Runbook**, a następnie wybierz pozycję **ResourceGroupName**.</span><span class="sxs-lookup"><span data-stu-id="22323-330">Under **Data source** for **ResourceGroupName**, select **Runbook input** and then select **ResourceGroupName**.</span></span>  <span data-ttu-id="22323-331">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="22323-331">Click **OK**.</span></span>
8. <span data-ttu-id="22323-332">W obszarze **Źródło danych** dla pozycji **Stan** wybierz opcję **Stała wartość**, a następnie kliknij pozycję **Prawda**.</span><span class="sxs-lookup"><span data-stu-id="22323-332">Under **Data source** for **Status**, select **Constant value** and then click  **True**.</span></span>  <span data-ttu-id="22323-333">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="22323-333">Click **OK**.</span></span>  
9. <span data-ttu-id="22323-334">Utwórz połączenie pozycji **Określ identyfikator subskrypcji** z poleceniem **Get-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="22323-334">Create a link from **Specify Subscription Id** to **Get-AzureRmVM**.</span></span>
10. <span data-ttu-id="22323-335">W kontrolce biblioteki rozwiń pozycję **Kontrola elementu Runbook** i dodaj pozycję **Kod** do kanwy.</span><span class="sxs-lookup"><span data-stu-id="22323-335">In the library control, expand **Runbook Control** and add **Code** to the canvas.</span></span>  
11. <span data-ttu-id="22323-336">Utwórz połączenie między poleceniem **Get-AzureRmVM** i elementem **Kod**.</span><span class="sxs-lookup"><span data-stu-id="22323-336">Create a link from **Get-AzureRmVM** to **Code**.</span></span>  
12. <span data-ttu-id="22323-337">Kliknij pozycję **Kod** i w okienku Konfiguracja zmień etykietę na **Pobieranie stanu**.</span><span class="sxs-lookup"><span data-stu-id="22323-337">Click **Code** and in the Configuration pane, change label to **Get Status**.</span></span>
13. <span data-ttu-id="22323-338">Wybierz parametr **Kod**. Zostanie wyświetlony blok **Edytor kodu**.</span><span class="sxs-lookup"><span data-stu-id="22323-338">Select **Code** parameter, and the **Code Editor** blade appears.</span></span>  
14. <span data-ttu-id="22323-339">W edytorze kodu wklej poniższy fragment kodu:</span><span class="sxs-lookup"><span data-stu-id="22323-339">In the code editor, paste the following snippet of code:</span></span>
    
     ```
     $StatusesJson = $ActivityOutput['Get-AzureRmVM'].StatusesText
     $Statuses = ConvertFrom-Json $StatusesJson
     $StatusOut =""
     foreach ($Status in $Statuses){
     if($Status.Code -eq "Powerstate/running"){$StatusOut = "running"}
     elseif ($Status.Code -eq "Powerstate/deallocated") {$StatusOut = "stopped"}
     }
     $StatusOut
     ```
15. <span data-ttu-id="22323-340">Utwórz połączenie elementu **Pobieranie stanu** z poleceniem **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="22323-340">Create a link from **Get Status** to **Start-AzureRmVM**.</span></span><br> <span data-ttu-id="22323-341">![Element Runbook z modułem kodu](media/automation-first-runbook-graphical/runbook-startvm-get-status.png)</span><span class="sxs-lookup"><span data-stu-id="22323-341">![Runbook with Code Module](media/automation-first-runbook-graphical/runbook-startvm-get-status.png)</span></span>  
16. <span data-ttu-id="22323-342">Wybierz połączenie, a następnie w okienku Konfiguracja zmień ustawienie pozycji **Zastosuj warunek** na **Tak**.</span><span class="sxs-lookup"><span data-stu-id="22323-342">Select the link and in the Configuration pane, change **Apply condition** to **Yes**.</span></span>   <span data-ttu-id="22323-343">Zauważ, że połączenie zmieni się w linię przerywaną, co oznacza, że działanie docelowe będzie uruchamiane tylko w sytuacji, gdy warunek będzie spełniony.</span><span class="sxs-lookup"><span data-stu-id="22323-343">Note the link turns to a dashed line indicating that the target activity only runs if the condition resolves to true.</span></span>  
17. <span data-ttu-id="22323-344">Dla **warunku wyrażenia** wpisz *$ActivityOutput [’Pobieranie stanu’] - eq "Zatrzymano"*.</span><span class="sxs-lookup"><span data-stu-id="22323-344">For the **Condition expression**, type *$ActivityOutput['Get Status'] -eq "Stopped"*.</span></span>  <span data-ttu-id="22323-345">Polecenie **Start-AzureRmVM** będzie teraz uruchamiane tylko wtedy, gdy maszyna wirtualna jest zatrzymana.</span><span class="sxs-lookup"><span data-stu-id="22323-345">**Start-AzureRmVM** now only runs if the virtual machine is stopped.</span></span>
18. <span data-ttu-id="22323-346">W kontrolce Biblioteka rozwiń pozycję **Polecenia cmdlet**, a następnie pozycję **Microsoft.PowerShell.Utility**.</span><span class="sxs-lookup"><span data-stu-id="22323-346">In the Library control, expand **Cmdlets** and then **Microsoft.PowerShell.Utility**.</span></span>
19. <span data-ttu-id="22323-347">Dwukrotnie dodaj pozycję **Write-Output** do kanwy.</span><span class="sxs-lookup"><span data-stu-id="22323-347">Add **Write-Output** to the canvas twice.</span></span><br> <span data-ttu-id="22323-348">![Element Runbook z pozycją Write-Output](media/automation-first-runbook-graphical/runbook-startazurermvm-complete.png)</span><span class="sxs-lookup"><span data-stu-id="22323-348">![Runbook with Write-Output](media/automation-first-runbook-graphical/runbook-startazurermvm-complete.png)</span></span>
20. <span data-ttu-id="22323-349">W pierwszej kontrolce **Write-Output** kliknij pozycję **Parametry** i zmień wartość pola **Etykieta** na *Powiadamianie o uruchomieniu maszyny wirtualnej*.</span><span class="sxs-lookup"><span data-stu-id="22323-349">On the first **Write-Output** control, click **Parameters** and change the **Label** value to *Notify VM Started*.</span></span>
21. <span data-ttu-id="22323-350">Dla pozycji **InputObject** zmień **źródło danych** na **Wyrażenie programu PowerShell** i wpisz wyrażenie *„Maszyna wirtualna $VMName została pomyślnie uruchomiona”*.</span><span class="sxs-lookup"><span data-stu-id="22323-350">For **InputObject**, change **Data source** to **PowerShell expression** and type in the expression *"$VMName successfully started."*.</span></span>
22. <span data-ttu-id="22323-351">W drugiej kontrolce **Write-Output** kliknij pozycję **Parametry** i zmień wartość pola **Etykieta** na *Powiadamianie o błędzie uruchomienia maszyny wirtualnej*.</span><span class="sxs-lookup"><span data-stu-id="22323-351">On the second **Write-Output** control, click **Parameters** and change the **Label** value to *Notify VM Start Failed*</span></span>
23. <span data-ttu-id="22323-352">Dla pozycji **InputObject** zmień **źródło danych** na **Wyrażenie programu PowerShell** i wpisz wyrażenie *„Nie można uruchomić maszyny wirtualnej $VMName”*.</span><span class="sxs-lookup"><span data-stu-id="22323-352">For **InputObject**, change **Data source** to **PowerShell expression** and type in the expression *"$VMName could not start."*.</span></span>
24. <span data-ttu-id="22323-353">Utwórz połączenie między poleceniem **Start-AzureRmVM** z wartościami **Powiadamianie o uruchomieniu maszyny wirtualnej** i **Powiadamianie o nieudanym uruchomieniu maszyny wirtualnej**.</span><span class="sxs-lookup"><span data-stu-id="22323-353">Create a link from **Start-AzureRmVM** to **Notify VM Started** and **Notify VM Start Failed**.</span></span>
25. <span data-ttu-id="22323-354">Wybierz połączenie z wartością **Powiadamianie o uruchomieniu maszyny wirtualnej** i zmień ustawienie pozycji **Zastosuj warunek** na **True**.</span><span class="sxs-lookup"><span data-stu-id="22323-354">Select the link to **Notify VM Started** and change **Apply condition** to **True**.</span></span>
26. <span data-ttu-id="22323-355">W polu **Warunek wyrażenia** wpisz ciąg *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true*.</span><span class="sxs-lookup"><span data-stu-id="22323-355">For the **Condition expression**, type *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true*.</span></span>  <span data-ttu-id="22323-356">Ta kontrolka Write-Output będzie teraz uruchamiana tylko w sytuacji, gdy maszyna wirtualna zostanie pomyślnie uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="22323-356">This Write-Output control now only runs if the virtual machine is successfully started.</span></span>
27. <span data-ttu-id="22323-357">Wybierz połączenie z wartością **Powiadamianie o nieudanym uruchomieniu maszyny wirtualnej** i zmień ustawienie pozycji **Zastosuj warunek** na **True**.</span><span class="sxs-lookup"><span data-stu-id="22323-357">Select the link to **Notify VM Start Failed** and change **Apply condition** to **True**.</span></span>
28. <span data-ttu-id="22323-358">W polu **Warunek wyrażenia** wpisz ciąg *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true*.</span><span class="sxs-lookup"><span data-stu-id="22323-358">For the **Condition expression**, type *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true*.</span></span>  <span data-ttu-id="22323-359">Ta kontrolka Write-Output będzie teraz uruchamiana tylko w sytuacji, gdy maszyna wirtualna nie zostanie pomyślnie uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="22323-359">This Write-Output control now only runs if the virtual machine is not successfully started.</span></span>
29. <span data-ttu-id="22323-360">Zapisz element Runbook, a następnie otwórz okienko testowania.</span><span class="sxs-lookup"><span data-stu-id="22323-360">Save the runbook and open the Test pane.</span></span>
30. <span data-ttu-id="22323-361">Uruchom element Runbook przy zatrzymanej maszynie wirtualnej. Powinno to spowodować jej uruchomienie.</span><span class="sxs-lookup"><span data-stu-id="22323-361">Start the runbook with the virtual machine stopped, and it should start.</span></span>

## <a name="next-steps"></a><span data-ttu-id="22323-362">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="22323-362">Next steps</span></span>
* <span data-ttu-id="22323-363">Aby dowiedzieć się więcej na temat tworzenia elementów graficznych, zobacz [Graphical authoring in Azure Automation](automation-graphical-authoring-intro.md) (Tworzenie elementów graficznych w usłudze Azure Automation).</span><span class="sxs-lookup"><span data-stu-id="22323-363">To learn more about Graphical Authoring, see [Graphical authoring in Azure Automation](automation-graphical-authoring-intro.md)</span></span>
* <span data-ttu-id="22323-364">Aby rozpocząć pracę z elementami Runbook programu PowerShell, zobacz artykuł [My first PowerShell runbook](automation-first-runbook-textual-powershell.md) (Mój pierwszy element Runbook programu PowerShell).</span><span class="sxs-lookup"><span data-stu-id="22323-364">To get started with PowerShell runbooks, see [My first PowerShell runbook](automation-first-runbook-textual-powershell.md)</span></span>
* <span data-ttu-id="22323-365">Aby rozpocząć pracę z elementami Runbook przepływu pracy programu PowerShell, zobacz artykuł [My first PowerShell workflow runbook](automation-first-runbook-textual.md) (Mój pierwszy element Runbook przepływu pracy programu PowerShell).</span><span class="sxs-lookup"><span data-stu-id="22323-365">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span>

