---
title: "Tworzenie konta użytkownika usługi Azure AD | Microsoft Docs"
description: "W tym artykule opisano sposób tworzenia poświadczeń konta użytkownika usługi Azure AD dla elementów Runbook w usłudze Azure Automation do uwierzytelniania na platformie Azure i klasycznej platformie Azure."
services: automation
documentationcenter: 
author: MGoedtel
manager: jwhit
editor: tysonn
keywords: "konto użytkownika usługi Azure Active Directory, azure service management, konto użytkownika usługi Azure AD"
ms.assetid: fcfe266d-b22e-4dfb-8272-adcab09fc0cf
ms.service: automation
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/13/2017
ms.author: magoedte
ms.openlocfilehash: 4eaa3e36ededddeb5268ec4f49b9daee2f824cee
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/18/2017
---
# <a name="authenticate-runbooks-with-azure-classic-deployment-and-resource-manager"></a><span data-ttu-id="5d264-104">Uwierzytelnianie elementów Runbook za pomocą klasycznego wdrożenia platformy Azure i usługi Resource Manager</span><span class="sxs-lookup"><span data-stu-id="5d264-104">Authenticate Runbooks with Azure classic deployment and Resource Manager</span></span>
<span data-ttu-id="5d264-105">W tym artykule opisano kroki, które należy wykonać, aby skonfigurować konto użytkownika usługi Azure AD dla elementów Runbook usługi Azure Automation działających w odniesieniu do klasycznego modelu wdrażania platformy Azure lub zasobów usługi Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="5d264-105">This article describes the steps you must perform to configure an Azure AD User account for Azure Automation runbooks running against Azure classic deployment model or Azure Resource Manager resources.</span></span>  <span data-ttu-id="5d264-106">To konto nadal jest obsługiwaną tożsamością uwierzytelniania dla elementów Runbook w ramach usługi Azure Resource Manager, jednak zalecane jest używanie konta Uruchom jako platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="5d264-106">While this continues to be a supported authentication identity for your Azure Resource Manager based runbooks, the recommended method is using an Azure Run As account.</span></span>       

## <a name="create-a-new-azure-active-directory-user"></a><span data-ttu-id="5d264-107">Tworzenie nowego użytkownika usługi Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="5d264-107">Create a new Azure Active Directory user</span></span>
1. <span data-ttu-id="5d264-108">Zaloguj się do klasycznej witryny Azure Portal jako administrator usługi dla subskrypcji platformy Azure, którą chcesz zarządzać.</span><span class="sxs-lookup"><span data-stu-id="5d264-108">Log in to the Azure Classic portal as a service administrator for the Azure subscription you want to manage.</span></span>
2. <span data-ttu-id="5d264-109">Wybierz usługę **Active Directory**, a następnie wybierz nazwę katalogu organizacji.</span><span class="sxs-lookup"><span data-stu-id="5d264-109">Select **Active Directory**, and then select the name of your organization directory.</span></span>
3. <span data-ttu-id="5d264-110">Wybierz kartę **Użytkownicy**, a następnie w obszarze poleceń wybierz polecenie **Dodaj użytkownika**.</span><span class="sxs-lookup"><span data-stu-id="5d264-110">Select the **Users** tab, and then, in the command area, select **Add User**.</span></span>
4. <span data-ttu-id="5d264-111">Na stronie **Poinformuj nas o tym użytkowniku** w obszarze **Typ użytkownika** wybierz opcję **Nowy użytkownik w organizacji**.</span><span class="sxs-lookup"><span data-stu-id="5d264-111">On the **Tell us about this user** page, under **Type of user**, select **New user in your organization**.</span></span>
5. <span data-ttu-id="5d264-112">Wprowadź nazwę użytkownika.</span><span class="sxs-lookup"><span data-stu-id="5d264-112">Enter a user name.</span></span>  
6. <span data-ttu-id="5d264-113">Wybierz nazwę katalogu, który jest skojarzony z subskrypcją platformy Azure na stronie usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5d264-113">Select the directory name that is associated with your Azure subscription on the Active Directory page.</span></span>
7. <span data-ttu-id="5d264-114">Na stronie **profilu użytkownika** podaj imię i nazwisko, nazwę przyjazną dla użytkownika i rolę Użytkownik z listy **Role**.</span><span class="sxs-lookup"><span data-stu-id="5d264-114">On the **user profile** page, provide a first and last name, a user-friendly name, and User from the **Roles** list.</span></span>  <span data-ttu-id="5d264-115">Nie wybieraj opcji **Włącz uwierzytelnianie wieloskładnikowe**.</span><span class="sxs-lookup"><span data-stu-id="5d264-115">Do not **Enable Multi-Factor Authentication**.</span></span>
8. <span data-ttu-id="5d264-116">Zapamiętaj pełną nazwę użytkownika i hasło tymczasowe.</span><span class="sxs-lookup"><span data-stu-id="5d264-116">Note the user’s full name and temporary password.</span></span>
9. <span data-ttu-id="5d264-117">Wybierz opcje **Ustawienia > Administratorzy > Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="5d264-117">Select **Settings > Administrators > Add**.</span></span>
10. <span data-ttu-id="5d264-118">Wpisz pełną nazwę utworzonego przed chwilą użytkownika.</span><span class="sxs-lookup"><span data-stu-id="5d264-118">Type the full user name of the user that you created.</span></span>
11. <span data-ttu-id="5d264-119">Wybierz subskrypcję, którą ma zarządzać ten użytkownik.</span><span class="sxs-lookup"><span data-stu-id="5d264-119">Select the subscription that you want the user to manage.</span></span>
12. <span data-ttu-id="5d264-120">Wyloguj się z platformy Azure, a następnie zaloguj się ponownie przy użyciu właśnie utworzonego konta.</span><span class="sxs-lookup"><span data-stu-id="5d264-120">Log out of Azure and then log back in with the account you just created.</span></span> <span data-ttu-id="5d264-121">Zostanie wyświetlony monit informujący o konieczności zmiany hasła użytkownika.</span><span class="sxs-lookup"><span data-stu-id="5d264-121">You will be prompted to change the user’s password.</span></span>

## <a name="create-an-automation-account-in-azure-classic-portal"></a><span data-ttu-id="5d264-122">Tworzenie konta usługi Automation w klasycznej witrynie Azure Portal</span><span class="sxs-lookup"><span data-stu-id="5d264-122">Create an Automation account in Azure Classic portal</span></span>
<span data-ttu-id="5d264-123">W tej części należy wykonać poniższe kroki, aby utworzyć nowe konto usługi Azure Automation w witrynie Azure Portal. Będzie ono używane z elementami Runbook zarządzającymi zasobami w klasycznym wdrożeniu platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="5d264-123">In this section, you perform the following steps to create an Azure Automation account in the Azure portal for use with your runbooks managing resources in Azure classic deployment.</span></span>  

> [!NOTE]
> <span data-ttu-id="5d264-124">Kontami usługi Automation utworzonymi za pomocą klasycznej witryny Azure Portal można zarządzać zarówno za pomocą klasycznej witryny Azure Portal, jak i witryny Azure Portal oraz zestawu poleceń cmdlet.</span><span class="sxs-lookup"><span data-stu-id="5d264-124">Automation accounts created with the Azure Classic portal can be managed by both the Azure Classic and Azure portal and either set of cmdlets.</span></span> <span data-ttu-id="5d264-125">Po utworzeniu konta nie ma znaczenia, jak są tworzone zasoby w ramach konta ani jak się nimi zarządza.</span><span class="sxs-lookup"><span data-stu-id="5d264-125">Once the account is created, it makes no difference how you create and manage resources within the account.</span></span> <span data-ttu-id="5d264-126">Jeśli planujesz dalsze używanie klasycznej witryny Azure Portal, użyj jej zamiast witryny Azure Portal do tworzenia kont usługi Automation.</span><span class="sxs-lookup"><span data-stu-id="5d264-126">If you are planning to continue to use the Azure Classic portal, then you should use it instead of the Azure portal to create any Automation accounts.</span></span>
> 
> 

1. <span data-ttu-id="5d264-127">Zaloguj się do klasycznej witryny Azure Portal jako administrator usługi dla subskrypcji platformy Azure, którą chcesz zarządzać.</span><span class="sxs-lookup"><span data-stu-id="5d264-127">Log in to the Azure Classic portal as a service administrator for the Azure subscription you want to manage.</span></span>
2. <span data-ttu-id="5d264-128">Wybierz opcję **Automatyzacja**.</span><span class="sxs-lookup"><span data-stu-id="5d264-128">Select **Automation**.</span></span>
3. <span data-ttu-id="5d264-129">Na stronie **Automatyzacja** wybierz opcję **Utwórz konto automatyzacji**.</span><span class="sxs-lookup"><span data-stu-id="5d264-129">On the **Automation** page, select **Create an Automation Account**.</span></span>
4. <span data-ttu-id="5d264-130">W polu **Utwórz konto automatyzacji** wpisz nazwę nowego konta w usłudze Automation i wybierz opcję **Region** z listy rozwijanej.</span><span class="sxs-lookup"><span data-stu-id="5d264-130">In the **Create an Automation Account** box, type in a name for your new Automation account and select a **Region** from the drop-down list.</span></span>  
5. <span data-ttu-id="5d264-131">Kliknij przycisk **OK**, aby zaakceptować ustawienia i utworzyć konto.</span><span class="sxs-lookup"><span data-stu-id="5d264-131">Click **OK** to accept your settings and create the account.</span></span>
6. <span data-ttu-id="5d264-132">Po utworzeniu zostanie ono wyświetlone na stronie **Automatyzacja**.</span><span class="sxs-lookup"><span data-stu-id="5d264-132">After it is created it will be listed on the **Automation** page.</span></span>
7. <span data-ttu-id="5d264-133">Kliknięcie konta spowoduje wyświetlenie strony Pulpit nawigacyjny.</span><span class="sxs-lookup"><span data-stu-id="5d264-133">Click on the account and it will bring you to the Dashboard page.</span></span>  
8. <span data-ttu-id="5d264-134">Na stronie pulpitu nawigacyjnego usługi Automation wybierz opcję **Zasoby**.</span><span class="sxs-lookup"><span data-stu-id="5d264-134">On the Automation Dashboard page, select **Assets**.</span></span>
9. <span data-ttu-id="5d264-135">Na stronie **Zasoby** wybierz opcję **Dodaj ustawienia** znajdującą się na dole strony.</span><span class="sxs-lookup"><span data-stu-id="5d264-135">On the **Assets** page, select **Add Settings** located at the bottom of the page.</span></span>
10. <span data-ttu-id="5d264-136">Na stronie **Dodawanie ustawień** wybierz opcję **Dodaj poświadczenie**.</span><span class="sxs-lookup"><span data-stu-id="5d264-136">On the **Add Settings** page, select **Add Credential**.</span></span>
11. <span data-ttu-id="5d264-137">Na stronie **Definiowanie poświadczenia** wybierz opcję **Poświadczenie programu Windows PowerShell** z listy rozwijanej **Typ poświadczenia** i podaj nazwę dla poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="5d264-137">On the **Define Credential** page, select **Windows PowerShell Credential** from the **Credential Type** drop-down list and provide a name for the credential.</span></span>
12. <span data-ttu-id="5d264-138">Na następnej stronie **Definiowanie poświadczenia** wpisz nazwę użytkownika utworzonego wcześniej konta użytkownika usługi AD w polu **Nazwa użytkownika** oraz hasło w polach **Hasło** i **Potwierdź hasło**.</span><span class="sxs-lookup"><span data-stu-id="5d264-138">On the following **Define Credential** page type in the username of the AD user account created earlier in the **User Name** field and the password in the **Password** and **Confirm Password** fields.</span></span> <span data-ttu-id="5d264-139">Kliknij przycisk **OK**, aby zapisać zmiany.</span><span class="sxs-lookup"><span data-stu-id="5d264-139">Click **OK** to save your changes.</span></span>

## <a name="create-an-automation-account-in-the-azure-portal"></a><span data-ttu-id="5d264-140">Tworzenie konta usługi Automation w witrynie Azure Portal</span><span class="sxs-lookup"><span data-stu-id="5d264-140">Create an Automation account in the Azure portal</span></span>
<span data-ttu-id="5d264-141">W tej części należy wykonać poniższe kroki, aby utworzyć konto usługi Azure Automation w witrynie Azure Portal. Będzie ono używane z elementami Runbook zarządzającymi zasobami w trybie usługi Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="5d264-141">In this section, perform the following steps to create an Azure Automation account in the Azure portal for use with your runbooks managing resources in Azure Resource Manager mode.</span></span>  

1. <span data-ttu-id="5d264-142">Zaloguj się do portalu Azure jako administrator usługi dla subskrypcji platformy Azure, którą chcesz zarządzać.</span><span class="sxs-lookup"><span data-stu-id="5d264-142">Log in to the Azure portal as a service administrator for the Azure subscription you want to manage.</span></span>
2. <span data-ttu-id="5d264-143">Wybierz opcję **Konta automatyzacji**.</span><span class="sxs-lookup"><span data-stu-id="5d264-143">Select **Automation Accounts**.</span></span>
3. <span data-ttu-id="5d264-144">W bloku Konta automatyzacji kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="5d264-144">In the Automation Accounts blade, click **Add**.</span></span><br><br><span data-ttu-id="5d264-145">![Dodawanie konta usługi Automation](media/automation-create-aduser-account/add-automation-acct-properties.png)</span><span class="sxs-lookup"><span data-stu-id="5d264-145">![Add Automation Account](media/automation-create-aduser-account/add-automation-acct-properties.png)</span></span>
4. <span data-ttu-id="5d264-146">W bloku **Dodaj konto automatyzacji** w polu **Nazwa** wpisz nazwę nowego konta usługi Automation.</span><span class="sxs-lookup"><span data-stu-id="5d264-146">In the **Add Automation Account** blade, in the **Name** box type in a name for your new Automation account.</span></span>
5. <span data-ttu-id="5d264-147">Jeśli masz więcej niż jedną subskrypcję, jedną z nich określ dla nowego konta, podaj także nową lub istniejącą **grupę zasobów** i **lokalizację** centrum danych Azure.</span><span class="sxs-lookup"><span data-stu-id="5d264-147">If you have more than one subscription, specify the one for the new account, as well as a new or existing **Resource group** and an Azure datacenter **Location**.</span></span>
6. <span data-ttu-id="5d264-148">Wybierz wartość **Tak** dla opcji **Utwórz konto Uruchom jako platformy Azure**, a następnie kliknij przycisk **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="5d264-148">Select the value **Yes** for the **Create Azure Run As account** option, and click the **Create** button.</span></span>  
   
    > [!NOTE]
    > <span data-ttu-id="5d264-149">Jeśli wybrano opcję **Nie**, aby nie tworzyć konta Uruchom jako, w bloku **Dodaj konto automatyzacji** zostanie wyświetlony komunikat ostrzegawczy.</span><span class="sxs-lookup"><span data-stu-id="5d264-149">If you choose to not create the Run As account by selecting the option **No**, you will be presented with a warning message in the **Add Automation Account** blade.</span></span>  <span data-ttu-id="5d264-150">Gdy konto zostanie utworzone i przypisane do roli **Współautor** w subskrypcji, nie będzie ono miało odpowiedniej tożsamości uwierzytelniania w usłudze katalogowej subskrypcji i dlatego nie będzie miało dostępu do zasobów w ramach subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="5d264-150">While the account is created and assigned to the **Contributor** role in the subscription, it will not have a corresponding authentication identity within your subscriptions directory service and therefore, no access resources in your subscription.</span></span>  <span data-ttu-id="5d264-151">Pozwoli to zapobiec sytuacji, w której wszelkie elementy Runbook odwołujące się do tego konta miałyby możliwość uwierzytelniania i wykonywania zadań w odniesieniu do zasobów usługi Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="5d264-151">This will prevent any runbooks referencing this account from being able to authenticate and perform tasks against Azure Resource Manager resources.</span></span>
    > 
    >

    <br>![Ostrzeżenie podczas dodawania konta usługi Automation](media/automation-create-aduser-account/add-automation-acct-properties-error.png)<br>  
7. <span data-ttu-id="5d264-153">W trakcie tworzenia konta usługi Automation na platformie Azure postęp można śledzić po wybraniu z menu opcji **Powiadomienia**.</span><span class="sxs-lookup"><span data-stu-id="5d264-153">While Azure creates the Automation account, you can track the progress under **Notifications** from the menu.</span></span>

<span data-ttu-id="5d264-154">Po zakończeniu tworzenia poświadczenia musisz utworzyć zasób poświadczenia, aby skojarzyć konto usługi Automation z utworzonym wcześniej kontem użytkownika usługi AD.</span><span class="sxs-lookup"><span data-stu-id="5d264-154">When the creation of the credential is completed, you need to create a Credential Asset to associate the Automation Account with the AD User account created earlier.</span></span>  <span data-ttu-id="5d264-155">Należy pamiętać, że utworzone zostało tylko konto usługi Automation i nie jest ono skojarzone z tożsamością uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="5d264-155">Remember, we only created the Automation account and it is not associated with an authentication identity.</span></span>  <span data-ttu-id="5d264-156">Wykonaj czynności opisane w artykule [Credential assets in Azure Automation](automation-credentials.md#creating-a-new-credential-asset) (Zasoby poświadczeń w usłudze Azure Automation) i wprowadź wartość dla zmiennej **username** w formacie **domena\użytkownik**.</span><span class="sxs-lookup"><span data-stu-id="5d264-156">Perform the steps outlined in the [Credential assets in Azure Automation article](automation-credentials.md#creating-a-new-credential-asset) and enter the value for **username** in the format **domain\user**.</span></span>

## <a name="use-the-credential-in-a-runbook"></a><span data-ttu-id="5d264-157">Użycie poświadczeń w elemencie Runbook</span><span class="sxs-lookup"><span data-stu-id="5d264-157">Use the credential in a runbook</span></span>
<span data-ttu-id="5d264-158">Można pobrać poświadczenie w elemencie Runbook za pomocą działania [Get-AutomationPSCredential](http://msdn.microsoft.com/library/dn940015.aspx), a następnie można go użyć za pomocą działania [Add-AzureAccount](http://msdn.microsoft.com/library/azure/dn722528.aspx) w celu nawiązania połączenia z subskrypcją platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="5d264-158">You can retrieve the credential in a runbook using the [Get-AutomationPSCredential](http://msdn.microsoft.com/library/dn940015.aspx) activity and then use it with [Add-AzureAccount](http://msdn.microsoft.com/library/azure/dn722528.aspx) to connect to your Azure subscription.</span></span> <span data-ttu-id="5d264-159">Jeśli poświadczenie odnosi się do administratora wielu subskrypcji Azure, należy też użyć polecenia [Select-AzureSubscription](http://msdn.microsoft.com/library/dn495203.aspx), aby wskazać odpowiednią subskrypcję.</span><span class="sxs-lookup"><span data-stu-id="5d264-159">If the credential is an administrator of multiple Azure subscriptions, then you should also use [Select-AzureSubscription](http://msdn.microsoft.com/library/dn495203.aspx) to specify the correct one.</span></span> <span data-ttu-id="5d264-160">Zostało to pokazane w poniższym przykładzie kodu programu Windows PowerShell, który występuje na początku większości elementów Runbook usługi Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="5d264-160">This is shown in the sample Windows PowerShell below that will typically appear at the top of most Azure Automation runbooks.</span></span>

    $cred = Get-AutomationPSCredential –Name "myuseraccount.onmicrosoft.com"
    Add-AzureAccount –Credential $cred
    Select-AzureSubscription –SubscriptionName "My Subscription"

<span data-ttu-id="5d264-161">Te wiersze należy powtórzyć po każdym [punkcie kontrolnym](http://technet.microsoft.com/library/dn469257.aspx#bk_Checkpoints) w elemencie Runbook.</span><span class="sxs-lookup"><span data-stu-id="5d264-161">You should repeat these lines after any [checkpoints](http://technet.microsoft.com/library/dn469257.aspx#bk_Checkpoints) in your runbook.</span></span> <span data-ttu-id="5d264-162">Jeśli element Runbook został zawieszony, a następnie jego działanie zostało wznowione w ramach innego procesu roboczego, konieczne jest ponowienie uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="5d264-162">If the runbook is suspended and then resumes on another worker, then it will need to perform the authentication again.</span></span>

## <a name="next-steps"></a><span data-ttu-id="5d264-163">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="5d264-163">Next Steps</span></span>
* <span data-ttu-id="5d264-164">Informacje o różnych typach elementów Runbook i krokach prowadzących do tworzenia własnych elementów Runbook można znaleźć w artykule [Azure Automation runbook types](automation-runbook-types.md) (Typy elementów Runbook usługi Azure Automation).</span><span class="sxs-lookup"><span data-stu-id="5d264-164">Review the different runbook types and steps for creating your own runbooks from the following article [Azure Automation runbook types](automation-runbook-types.md)</span></span>

