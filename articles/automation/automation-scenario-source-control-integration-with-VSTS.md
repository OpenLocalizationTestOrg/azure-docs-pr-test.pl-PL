---
title: "Integracja usługi Automatyzacja Azure z kontroli źródła Visual Stuido Team Services | Dokumentacja firmy Microsoft"
description: "Scenariusz przeprowadzi Cię przez proces konfigurowania integracji z kontroli źródła Visual Stuido Team Services i konto usługi Automatyzacja Azure."
services: automation
documentationcenter: 
author: eamono
manager: 
editor: 
keywords: "Program Azure powershell, VSTS, kontroli źródła, automatyzacji"
ms.assetid: a43b395a-e740-41a3-ae62-40eac9d0ec00
ms.service: automation
ms.workload: infrastructure-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/24/2017
ms.openlocfilehash: 01f9c01c9e04e02dbb548b68cf99684ba6ddd57e
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="azure-automation-scenario---automation-source-control-integration-with-visual-studio-team-services"></a><span data-ttu-id="a02cf-104">Scenariusz automatyzacji Azure - automatyzacji integracji kontroli źródła z Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="a02cf-104">Azure Automation scenario - Automation source control integration with Visual Studio Team Services</span></span>

<span data-ttu-id="a02cf-105">W tym scenariuszu masz projektu Visual Studio Team Services, używanej do zarządzania elementami runbook usługi Automatyzacja Azure lub konfiguracji DSC pod kontrolą źródła.</span><span class="sxs-lookup"><span data-stu-id="a02cf-105">In this scenario, you have a Visual Studio Team Services project that you are using to manage Azure Automation runbooks or DSC configurations under source control.</span></span>
<span data-ttu-id="a02cf-106">W tym artykule opisano sposób integrowania programu VSTS ze środowiskiem usługi Automatyzacja Azure dzięki temu ciągłej integracji odbywa się dla każdego wyboru.</span><span class="sxs-lookup"><span data-stu-id="a02cf-106">This article describes how to integrate VSTS with your Azure Automation environment so that continuous integration happens for each check-in.</span></span>

## <a name="getting-the-scenario"></a><span data-ttu-id="a02cf-107">Uzyskiwanie scenariusza</span><span class="sxs-lookup"><span data-stu-id="a02cf-107">Getting the scenario</span></span>

<span data-ttu-id="a02cf-108">W tym scenariuszu składa się z dwóch elementów runbook programu PowerShell, które można importować bezpośrednio z [galerię elementów Runbook](automation-runbook-gallery.md) w portalu Azure lub pobrać z [galerii programu PowerShell](https://www.powershellgallery.com).</span><span class="sxs-lookup"><span data-stu-id="a02cf-108">This scenario consists of two PowerShell runbooks that you can import directly from the [Runbook Gallery](automation-runbook-gallery.md) in the Azure portal or download from the [PowerShell Gallery](https://www.powershellgallery.com).</span></span>

### <a name="runbooks"></a><span data-ttu-id="a02cf-109">Elementy Runbook</span><span class="sxs-lookup"><span data-stu-id="a02cf-109">Runbooks</span></span>

<span data-ttu-id="a02cf-110">Element Runbook</span><span class="sxs-lookup"><span data-stu-id="a02cf-110">Runbook</span></span> | <span data-ttu-id="a02cf-111">Opis</span><span class="sxs-lookup"><span data-stu-id="a02cf-111">Description</span></span>| 
--------|------------|
<span data-ttu-id="a02cf-112">VSTS synchronizacji</span><span class="sxs-lookup"><span data-stu-id="a02cf-112">Sync-VSTS</span></span> | <span data-ttu-id="a02cf-113">Importowanie elementów runbook lub konfiguracje z kontroli źródła programu VSTS podczas ewidencjonowania.</span><span class="sxs-lookup"><span data-stu-id="a02cf-113">Import runbooks or configurations from VSTS source control when a check-in is done.</span></span> <span data-ttu-id="a02cf-114">Jeśli ręcznie uruchom zaimportuje i opublikować wszystkie elementy runbook lub konfiguracje do konta automatyzacji.</span><span class="sxs-lookup"><span data-stu-id="a02cf-114">If run manually, it will import and publish all runbooks or configurations into the Automation account.</span></span>| 
<span data-ttu-id="a02cf-115">VSTSGit synchronizacji</span><span class="sxs-lookup"><span data-stu-id="a02cf-115">Sync-VSTSGit</span></span> | <span data-ttu-id="a02cf-116">Importowanie elementów runbook lub konfiguracji z programu VSTS pod kontrolą źródła Git podczas ewidencjonowania.</span><span class="sxs-lookup"><span data-stu-id="a02cf-116">Import runbooks or configurations from VSTS under Git source control when a check-in is done.</span></span> <span data-ttu-id="a02cf-117">Jeśli ręcznie uruchom zaimportuje i opublikować wszystkie elementy runbook lub konfiguracje do konta automatyzacji.</span><span class="sxs-lookup"><span data-stu-id="a02cf-117">If run manually, it will import and publish all runbooks or configurations into the Automation account.</span></span>|

### <a name="variables"></a><span data-ttu-id="a02cf-118">Zmienne</span><span class="sxs-lookup"><span data-stu-id="a02cf-118">Variables</span></span>

<span data-ttu-id="a02cf-119">Zmienna</span><span class="sxs-lookup"><span data-stu-id="a02cf-119">Variable</span></span> | <span data-ttu-id="a02cf-120">Opis</span><span class="sxs-lookup"><span data-stu-id="a02cf-120">Description</span></span>|
-----------|------------|
<span data-ttu-id="a02cf-121">VSToken</span><span class="sxs-lookup"><span data-stu-id="a02cf-121">VSToken</span></span> | <span data-ttu-id="a02cf-122">Bezpieczne zasób zmiennej utworzysz zawierający VSTS osobisty token dostępu.</span><span class="sxs-lookup"><span data-stu-id="a02cf-122">Secure variable asset you will create that contains the VSTS personal access token.</span></span> <span data-ttu-id="a02cf-123">Znajdują się informacje dotyczące tworzenia VSTS osobisty token dostępu na [strony uwierzytelniania programu VSTS](https://www.visualstudio.com/en-us/docs/integrate/get-started/auth/overview).</span><span class="sxs-lookup"><span data-stu-id="a02cf-123">You can learn how to create a VSTS personal access token on the [VSTS authentication page](https://www.visualstudio.com/en-us/docs/integrate/get-started/auth/overview).</span></span> 
## <a name="installing-and-configuring-this-scenario"></a><span data-ttu-id="a02cf-124">Instalowanie i konfigurowanie scenariusza</span><span class="sxs-lookup"><span data-stu-id="a02cf-124">Installing and configuring this scenario</span></span>

<span data-ttu-id="a02cf-125">Utwórz [osobisty token dostępu](https://www.visualstudio.com/en-us/docs/integrate/get-started/auth/overview) w VSTS, który będzie używany do synchronizacji elementów runbook lub konfiguracje na koncie automatyzacji.</span><span class="sxs-lookup"><span data-stu-id="a02cf-125">Create a [personal access token](https://www.visualstudio.com/en-us/docs/integrate/get-started/auth/overview) in VSTS that you will use to sync the runbooks or configurations into your automation account.</span></span>

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSPersonalToken.png) 

<span data-ttu-id="a02cf-126">Utwórz [bezpiecznego zmiennej](automation-variables.md) na Twoim koncie automatyzacji do przechowywania osobisty token dostępu, aby element runbook mógł uwierzytelniania programu VSTS i synchronizacji elementów runbook i konfiguracji do konta automatyzacji.</span><span class="sxs-lookup"><span data-stu-id="a02cf-126">Create a [secure variable](automation-variables.md) in your automation account to hold the personal access token so that the runbook can authenticate to VSTS and sync the runbooks or configurations into the Automation account.</span></span> <span data-ttu-id="a02cf-127">Można określić nazwę tego VSToken.</span><span class="sxs-lookup"><span data-stu-id="a02cf-127">You can name this VSToken.</span></span> 

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSTokenVariable.png)

<span data-ttu-id="a02cf-128">Zaimportuj element runbook, która zsynchronizuje się z elementów runbook lub konfiguracje do konta automatyzacji.</span><span class="sxs-lookup"><span data-stu-id="a02cf-128">Import the runbook that will sync your runbooks or configurations into the automation account.</span></span> <span data-ttu-id="a02cf-129">Można użyć [VSTS przykładowego elementu runbook](https://www.powershellgallery.com/packages/Sync-VSTS/1.0/DisplayScript) lub [programu VSTS z Git przykładowego elementu runbook] (https://www.powershellgallery.com/packages/Sync-VSTSGit/1.0/DisplayScript) z PowerShellGallery.com w zależności od tego, jeśli do kontroli źródła programu VSTS lub VSTS za pomocą narzędzia Git i wdrożyć na koncie automatyzacji.</span><span class="sxs-lookup"><span data-stu-id="a02cf-129">You can use the [VSTS sample runbook](https://www.powershellgallery.com/packages/Sync-VSTS/1.0/DisplayScript) or the [VSTS with Git sample runbook] (https://www.powershellgallery.com/packages/Sync-VSTSGit/1.0/DisplayScript) from the PowerShellGallery.com depending on if you use VSTS source control or VSTS with Git and deploy to your automation account.</span></span>

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSPowerShellGallery.png)

<span data-ttu-id="a02cf-130">Możesz teraz [publikowania](automation-creating-importing-runbook.md#publishing-a-runbook) ten element runbook, dzięki czemu można tworzyć elementu webhook.</span><span class="sxs-lookup"><span data-stu-id="a02cf-130">You can now [publish](automation-creating-importing-runbook.md#publishing-a-runbook) this runbook so you can create a webhook.</span></span> 
![](media/automation-scenario-source-control-integration-with-VSTS/VSTSPublishRunbook.png)

<span data-ttu-id="a02cf-131">Utwórz [webhook](automation-webhooks.md) dla tego elementu runbook programu VSTS synchronizacji i wypełnij parametrów, jak pokazano poniżej.</span><span class="sxs-lookup"><span data-stu-id="a02cf-131">Create a [webhook](automation-webhooks.md) for this Sync-VSTS runbook and fill in the parameters as shown below.</span></span> <span data-ttu-id="a02cf-132">Upewnij się, że skopiuj adres url elementu webhook, ponieważ będzie potrzebny dla usługi haka w VSTS.</span><span class="sxs-lookup"><span data-stu-id="a02cf-132">Make sure you copy the webhook url as you will need it for a service hook in VSTS.</span></span> <span data-ttu-id="a02cf-133">VSAccessTokenVariableName jest nazwą (VSToken) bezpiecznego zmiennej utworzoną wcześniej do przechowywania osobisty token dostępu.</span><span class="sxs-lookup"><span data-stu-id="a02cf-133">The VSAccessTokenVariableName is the name (VSToken) of the secure variable that you created earlier to hold the personal access token.</span></span> 

<span data-ttu-id="a02cf-134">Integrowanie z programu VSTS (synchronizacji VSTS.ps1) potrwa następujące parametry.</span><span class="sxs-lookup"><span data-stu-id="a02cf-134">Integrating with VSTS (Sync-VSTS.ps1) will take the following parameters.</span></span>
### <a name="sync-vsts-parameters"></a><span data-ttu-id="a02cf-135">Parametry programu VSTS synchronizacji</span><span class="sxs-lookup"><span data-stu-id="a02cf-135">Sync-VSTS Parameters</span></span>

<span data-ttu-id="a02cf-136">Parametr</span><span class="sxs-lookup"><span data-stu-id="a02cf-136">Parameter</span></span> | <span data-ttu-id="a02cf-137">Opis</span><span class="sxs-lookup"><span data-stu-id="a02cf-137">Description</span></span>| 
--------|------------|
<span data-ttu-id="a02cf-138">WebhookData</span><span class="sxs-lookup"><span data-stu-id="a02cf-138">WebhookData</span></span> | <span data-ttu-id="a02cf-139">To będzie zawierać informacje zaewidencjonowania wysyłane z haku usługi VSTS.</span><span class="sxs-lookup"><span data-stu-id="a02cf-139">This will contain the checkin information sent from the VSTS service hook.</span></span> <span data-ttu-id="a02cf-140">Ten parametr należy pozostawić pusty.</span><span class="sxs-lookup"><span data-stu-id="a02cf-140">You should leave this parameter blank.</span></span>| 
<span data-ttu-id="a02cf-141">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="a02cf-141">ResourceGroup</span></span> | <span data-ttu-id="a02cf-142">Jest to nazwa grupy zasobów jest konta automatyzacji.</span><span class="sxs-lookup"><span data-stu-id="a02cf-142">This is the name of the resource group that the automation account is in.</span></span>|
<span data-ttu-id="a02cf-143">AutomationAccountName</span><span class="sxs-lookup"><span data-stu-id="a02cf-143">AutomationAccountName</span></span> | <span data-ttu-id="a02cf-144">Nazwa konta automatyzacji, która zsynchronizuje się z usługi VSTS.</span><span class="sxs-lookup"><span data-stu-id="a02cf-144">The name of the automation account that will sync with VSTS.</span></span>|
<span data-ttu-id="a02cf-145">VSFolder</span><span class="sxs-lookup"><span data-stu-id="a02cf-145">VSFolder</span></span> | <span data-ttu-id="a02cf-146">Nazwa folderu w VSTS, jeśli istnieją elementy runbook i konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a02cf-146">The name of the folder in VSTS where the runbooks and configurations exist.</span></span>|
<span data-ttu-id="a02cf-147">VSAccount</span><span class="sxs-lookup"><span data-stu-id="a02cf-147">VSAccount</span></span> | <span data-ttu-id="a02cf-148">Nazwa konta usługi Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="a02cf-148">The name of the Visual Studio Team Services account.</span></span>| 
<span data-ttu-id="a02cf-149">VSAccessTokenVariableName</span><span class="sxs-lookup"><span data-stu-id="a02cf-149">VSAccessTokenVariableName</span></span> | <span data-ttu-id="a02cf-150">Nazwa zmiennej bezpiecznego (VSToken), która przechowuje VSTS osobisty token dostępu.</span><span class="sxs-lookup"><span data-stu-id="a02cf-150">The name of the secure variable (VSToken) that holds the VSTS personal access token.</span></span>| 


![](media/automation-scenario-source-control-integration-with-VSTS/VSTSWebhook.png)

<span data-ttu-id="a02cf-151">Jeśli używasz programu VSTS z usługą GIT (synchronizacji VSTSGit.ps1) potrwa następujące parametry.</span><span class="sxs-lookup"><span data-stu-id="a02cf-151">If you are using VSTS with GIT (Sync-VSTSGit.ps1) it will take the following parameters.</span></span>

<span data-ttu-id="a02cf-152">Parametr</span><span class="sxs-lookup"><span data-stu-id="a02cf-152">Parameter</span></span> | <span data-ttu-id="a02cf-153">Opis</span><span class="sxs-lookup"><span data-stu-id="a02cf-153">Description</span></span>|
--------|------------|
<span data-ttu-id="a02cf-154">WebhookData</span><span class="sxs-lookup"><span data-stu-id="a02cf-154">WebhookData</span></span> | <span data-ttu-id="a02cf-155">To będzie zawierać informacje zaewidencjonowania wysyłane z haku usługi VSTS.</span><span class="sxs-lookup"><span data-stu-id="a02cf-155">This will contain the checkin information sent from the VSTS service hook.</span></span> <span data-ttu-id="a02cf-156">Ten parametr należy pozostawić pusty.</span><span class="sxs-lookup"><span data-stu-id="a02cf-156">You should leave this parameter blank.</span></span>| <span data-ttu-id="a02cf-157">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="a02cf-157">ResourceGroup</span></span> | <span data-ttu-id="a02cf-158">Ta nazwa grupy zasobów jest konto automatyzacji.</span><span class="sxs-lookup"><span data-stu-id="a02cf-158">This the name of the resource group that the automation account is in.</span></span>|
<span data-ttu-id="a02cf-159">AutomationAccountName</span><span class="sxs-lookup"><span data-stu-id="a02cf-159">AutomationAccountName</span></span> | <span data-ttu-id="a02cf-160">Nazwa konta automatyzacji, która zsynchronizuje się z usługi VSTS.</span><span class="sxs-lookup"><span data-stu-id="a02cf-160">The name of the automation account that will sync with VSTS.</span></span>|
<span data-ttu-id="a02cf-161">VSAccount</span><span class="sxs-lookup"><span data-stu-id="a02cf-161">VSAccount</span></span> | <span data-ttu-id="a02cf-162">Nazwa konta usługi Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="a02cf-162">The name of the Visual Studio Team Services account.</span></span>|
<span data-ttu-id="a02cf-163">VSProject</span><span class="sxs-lookup"><span data-stu-id="a02cf-163">VSProject</span></span> | <span data-ttu-id="a02cf-164">Nazwa projektu w VSTS, jeśli istnieją elementy runbook i konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a02cf-164">The name of the project in VSTS where the runbooks and configurations exist.</span></span>|
<span data-ttu-id="a02cf-165">GitRepo</span><span class="sxs-lookup"><span data-stu-id="a02cf-165">GitRepo</span></span> | <span data-ttu-id="a02cf-166">Nazwa repozytorium Git.</span><span class="sxs-lookup"><span data-stu-id="a02cf-166">The name of the Git repository.</span></span>|
<span data-ttu-id="a02cf-167">GitBranch</span><span class="sxs-lookup"><span data-stu-id="a02cf-167">GitBranch</span></span> | <span data-ttu-id="a02cf-168">Nazwa gałęzi w repozytorium Git programu VSTS.</span><span class="sxs-lookup"><span data-stu-id="a02cf-168">The name of the branch in VSTS Git repository.</span></span>|
<span data-ttu-id="a02cf-169">Folder</span><span class="sxs-lookup"><span data-stu-id="a02cf-169">Folder</span></span> | <span data-ttu-id="a02cf-170">Nazwa folderu w gałęzi VSTS Git.</span><span class="sxs-lookup"><span data-stu-id="a02cf-170">The name of the folder in VSTS Git branch.</span></span>|
<span data-ttu-id="a02cf-171">VSAccessTokenVariableName</span><span class="sxs-lookup"><span data-stu-id="a02cf-171">VSAccessTokenVariableName</span></span> | <span data-ttu-id="a02cf-172">Nazwa zmiennej bezpiecznego (VSToken), która przechowuje VSTS osobisty token dostępu.</span><span class="sxs-lookup"><span data-stu-id="a02cf-172">The name of the secure variable (VSToken) that holds the VSTS personal access token.</span></span>|

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSGitWebhook.png)

<span data-ttu-id="a02cf-173">Utworzyć haka usługi w VSTS do zaewidencjonowania do folderu, który wyzwala ten element webhook na ewidencjonowania kodu.</span><span class="sxs-lookup"><span data-stu-id="a02cf-173">Create a service hook in VSTS for check-ins to the folder that triggers this webhook on code check-in.</span></span> <span data-ttu-id="a02cf-174">Wybierz techniki Web Hooks jako usługa integracji z podczas tworzenia nowej subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="a02cf-174">Select Web Hooks as the service to integrate with when you create a new subscription.</span></span> <span data-ttu-id="a02cf-175">Możesz dowiedzieć się więcej o punktach wpięcia usług na [punkty zaczepienia usługi VSTS dokumentacji](https://www.visualstudio.com/en-us/docs/marketplace/integrate/service-hooks/get-started).</span><span class="sxs-lookup"><span data-stu-id="a02cf-175">You can learn more about service hooks on [VSTS Service Hooks documentation](https://www.visualstudio.com/en-us/docs/marketplace/integrate/service-hooks/get-started).</span></span>
![](media/automation-scenario-source-control-integration-with-VSTS/VSTSServiceHook.png)

<span data-ttu-id="a02cf-176">Teraz powinno być możliwe zaewidencjonowania wszystkich elementów runbook i konfiguracji do programu VSTS i są automatycznie d synchronizacji na koncie automatyzacji.</span><span class="sxs-lookup"><span data-stu-id="a02cf-176">You should now be able to do all check-ins of your runbooks and configurations into VSTS and have these automatically sync’d into your automation account.</span></span>

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSSyncRunbookOutput.png)

<span data-ttu-id="a02cf-177">Jeśli ten element runbook zostanie uruchomiony ręcznie bez inicjowane przez VSTS, można pozostawić pusty parametr webhookdata i wykona pełną synchronizację z folderu programu VSTS określony.</span><span class="sxs-lookup"><span data-stu-id="a02cf-177">If you run this runbook manually without being triggered by VSTS, you can leave the webhookdata parameter empty and it will do a full sync from the VSTS folder specified.</span></span>

<span data-ttu-id="a02cf-178">Jeśli chcesz odinstalować scenariusz, Usuń haku usługi z programu VSTS, Usuń element runbook, a zmienna VSToken.</span><span class="sxs-lookup"><span data-stu-id="a02cf-178">If you wish to uninstall the scenario, remove the service hook from VSTS, delete the runbook, and the VSToken variable.</span></span>
