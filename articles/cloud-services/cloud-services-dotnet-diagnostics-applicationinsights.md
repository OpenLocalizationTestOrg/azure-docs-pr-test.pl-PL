---
title: "Usługi w chmurze przy użyciu usługi Application Insights aaaTroubleshoot | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak usługa w chmurze tootroubleshoot problemy przy użyciu usługi Application Insights tooprocess danych z diagnostyki Azure."
services: cloud-services
documentationcenter: .net
author: sbtron
manager: timlt
editor: tysonn
ms.assetid: e93f387b-ef29-4731-ae41-0676722accb6
ms.service: cloud-services
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/23/2017
ms.author: saurabh
ms.openlocfilehash: 972924d9e6d1fe33d5c19b006d482de52ffb0ef7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-cloud-services-using-application-insights"></a><span data-ttu-id="4d4f7-103">Rozwiązywanie problemów z usługi w chmurze przy użyciu usługi Application Insights</span><span class="sxs-lookup"><span data-stu-id="4d4f7-103">Troubleshoot Cloud Services using Application Insights</span></span>
<span data-ttu-id="4d4f7-104">Z [Azure SDK 2.8](https://azure.microsoft.com/downloads/) i rozszerzenie diagnostycznych platformy Azure w wersji 1.5, może wysyłać dane diagnostyczne platformy Azure dla usługi w chmurze bezpośrednio tooApplication szczegółowych informacji.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-104">With [Azure SDK 2.8](https://azure.microsoft.com/downloads/) and Azure diagnostics extension 1.5, you can send Azure Diagnostics data for your Cloud Service directly tooApplication Insights.</span></span> <span data-ttu-id="4d4f7-105">Witaj dzienników zebranych przez diagnostyki Azure&mdash;w tym dzienniki aplikacji, dzienniki zdarzeń systemu Windows, dzienniki zdarzeń systemu Windows i liczniki wydajności&mdash;mogą być wysyłane tooApplication szczegółowych informacji.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-105">hello logs collected by Azure Diagnostics&mdash;including application logs, Windows Event Logs, ETW Logs, and performance counters&mdash;can be sent tooApplication Insights.</span></span> <span data-ttu-id="4d4f7-106">Następnie można zwizualizować te informacje w portalu usługi Application Insights hello interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-106">You can then visualize this information in hello Application Insights portal UI.</span></span> <span data-ttu-id="4d4f7-107">Następnie można użyć hello zestaw SDK usługi Application Insights tooget wgląd w dzienniki, które pochodzą z aplikacji, a także hello systemu i danych na poziomie infrastruktury, która pochodzi z diagnostyki Azure i metryki.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-107">You can then use hello Application Insights SDK tooget insights into metrics and logs that come from your application, as well as hello system and infrastructure-level data that comes from Azure Diagnostics.</span></span>

## <a name="configure-azure-diagnostics-toosend-data-tooapplication-insights"></a><span data-ttu-id="4d4f7-108">Skonfiguruj diagnostyki Azure toosend danych tooApplication Insights</span><span class="sxs-lookup"><span data-stu-id="4d4f7-108">Configure Azure Diagnostics toosend data tooApplication Insights</span></span>
<span data-ttu-id="4d4f7-109">Wykonaj te kroki tooset się z chmury usługi projektu toosend diagnostyki Azure danych tooApplication szczegółowych informacji.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-109">Follow these steps tooset up your cloud service project toosend Azure Diagnostics data tooApplication Insights.</span></span>

1. <span data-ttu-id="4d4f7-110">W Eksploratorze rozwiązań programu Visual Studio, kliknij prawym przyciskiem myszy rolę i wybierz **właściwości** tooopen hello roli projektanta.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-110">In Visual Studio Solution Explorer, right-click a role and select **Properties** tooopen hello Role designer.</span></span>

    ![Właściwości roli Eksploratora rozwiązań][1]

2. <span data-ttu-id="4d4f7-112">W hello **diagnostyki** sekcji hello roli projektanta, wybierz hello **wysyłania tooApplication danych diagnostycznych Insights** opcji.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-112">In hello **Diagnostics** section of hello Role designer, select hello **Send diagnostics data tooApplication Insights** option.</span></span>

    ![Projektant roli wysyłanie danych diagnostycznych wgląd tooapplication danych][2]

3. <span data-ttu-id="4d4f7-114">W hello okno dialogowe, które pojawia się wybierz zasób usługi Application Insights hello, który ma toosend hello Azure diagnostyki danych.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-114">In hello dialog box that pops up, select hello Application Insights resource that you want toosend hello Azure diagnostics data to.</span></span> <span data-ttu-id="4d4f7-115">okno dialogowe Hello umożliwia tooselect istniejący zasób usługi Application Insights z subskrypcji lub toomanually określ klucz instrumentacji dla zasobu usługi Application Insights.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-115">hello dialog box allows you tooselect an existing Application Insights resource from your subscription or toomanually specify an instrumentation key for an Application Insights resource.</span></span> <span data-ttu-id="4d4f7-116">Aby uzyskać więcej informacji na temat tworzenia zasobu usługi Application Insights, zobacz [utworzyć nowy zasób usługi Application Insights](../application-insights/app-insights-create-new-resource.md).</span><span class="sxs-lookup"><span data-stu-id="4d4f7-116">For more information on creating an Application Insights resource, see [Create a new Application Insights resource](../application-insights/app-insights-create-new-resource.md).</span></span>

    ![Wybierz zasób usługi application insights][3]

    <span data-ttu-id="4d4f7-118">Po dodaniu zasobu usługi Application Insights hello hello klucza instrumentacji dla tego zasobu jest przechowywana jako ustawienia konfiguracji usługi o nazwie hello **APPINSIGHTS_INSTRUMENTATIONKEY**.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-118">Once you have added hello Application Insights resource, hello instrumentation key for that resource is stored as a service configuration setting with hello name **APPINSIGHTS_INSTRUMENTATIONKEY**.</span></span> <span data-ttu-id="4d4f7-119">Można zmienić tego ustawienia konfiguracji dla każdej konfiguracji usługi lub środowiska.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-119">You can change this configuration setting for each service configuration or environment.</span></span> <span data-ttu-id="4d4f7-120">toodo tak, wybierz inną konfigurację z hello **konfiguracji usługi** listę i określenie nowego klucza Instrumentacji w takiej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-120">toodo so, select a different configuration from hello **Service Configuration** list and specify a new instrumentation key for that configuration.</span></span>

    ![Wybierz konfigurację usługi][4]

    <span data-ttu-id="4d4f7-122">Witaj **APPINSIGHTS_INSTRUMENTATIONKEY** ustawienie konfiguracji jest używany przez rozszerzenie Diagnostyka programu Visual Studio tooconfigure hello hello odpowiednie usługi Application Insights informacje o zasobach podczas publikowania.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-122">hello **APPINSIGHTS_INSTRUMENTATIONKEY** configuration setting is used by Visual Studio tooconfigure hello diagnostics extension with hello appropriate Application Insights resource information during publishing.</span></span> <span data-ttu-id="4d4f7-123">Ustawienie konfiguracji Hello to wygodny sposób definiowania różnych Instrumentacji kluczy w przypadku konfiguracji z innej usługi.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-123">hello configuration setting is a convenient way of defining different instrumentation keys for different service configurations.</span></span> <span data-ttu-id="4d4f7-124">Visual Studio będzie tłumaczenie tego ustawienia i wstawić go w publiczna Konfiguracja rozszerzenia diagnostyki hello podczas hello procesu publikowania.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-124">Visual Studio will translate that setting and insert it into hello diagnostics extension public configuration during hello publish process.</span></span> <span data-ttu-id="4d4f7-125">proces hello toosimplify konfigurowania rozszerzenia diagnostyki hello przy użyciu programu PowerShell, hello pakietu wyjście z programu Visual Studio zawiera także hello publicznej konfiguracji XML z hello odpowiedni klucz Instrumentacji usługi Application Insights.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-125">toosimplify hello process of configuring hello diagnostics extension with PowerShell, hello package output from Visual Studio also contains hello public configuration XML with hello appropriate Application Insights instrumentation key.</span></span> <span data-ttu-id="4d4f7-126">pliki konfiguracji publicznego Hello są tworzone w folderze rozszerzenia hello i wykonaj wzorzec hello *PaaSDiagnostics.&lt; RoleName&gt;. PubConfig.xml*.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-126">hello public config files are created in hello Extensions folder and follow hello pattern *PaaSDiagnostics.&lt;RoleName&gt;.PubConfig.xml*.</span></span> <span data-ttu-id="4d4f7-127">Wszystkie wdrożenia oparte na środowisku PowerShell można użyć tego wzorca toomap każdej roli tooa konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-127">Any PowerShell-based deployments can use this pattern toomap each configuration tooa role.</span></span>

4) <span data-ttu-id="4d4f7-128">toosend diagnostyki Azure tooconfigure wszystkie dzienniki poziom błędów i liczniki wydajności zebrane przez hello Azure diagnostics agenta tooApplication szczegółowych informacji, Włącz hello **wysyłania tooApplication danych diagnostycznych Insights** opcji.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-128">tooconfigure Azure diagnostics toosend all performance counters and error-level logs collected by hello Azure diagnostics agent tooApplication Insights, enable hello **Send diagnostics data tooApplication Insights** option.</span></span> 

    <span data-ttu-id="4d4f7-129">Jeśli chcesz toofurther skonfigurować, jakie dane są wysyłane tooApplication szczegółowe informacje, należy ręcznie zmienić hello *diagnostics.wadcfgx* plik dla każdej roli.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-129">If you want toofurther configure what data is sent tooApplication Insights, you must manually edit hello *diagnostics.wadcfgx* file for each role.</span></span> <span data-ttu-id="4d4f7-130">Zobacz [skonfigurować diagnostyki Azure toosend danych tooApplication Insights](#configure-azure-diagnostics-to-send-data-to-application-insights) toolearn więcej informacji na temat ręcznego aktualizowania konfiguracji hello.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-130">See [Configure Azure Diagnostics toosend data tooApplication Insights](#configure-azure-diagnostics-to-send-data-to-application-insights) toolearn more about manually updating hello configuration.</span></span>

<span data-ttu-id="4d4f7-131">Gdy usługa w chmurze hello jest wgląd tooapplication danych diagnostycznych platformy Azure toosend skonfigurowany, można ją wdrożyć tooAzure normalnie, sprawdzając, czy hello rozszerzenie Azure diagnostics jest włączona.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-131">When hello cloud service is configured toosend Azure diagnostics data tooapplication insights, you can deploy it tooAzure normally, making sure hello Azure diagnostics extension is enabled.</span></span> <span data-ttu-id="4d4f7-132">Aby uzyskać więcej informacji, zobacz [publikowania usługi w chmurze przy użyciu programu Visual Studio](../vs-azure-tools-publishing-a-cloud-service.md).</span><span class="sxs-lookup"><span data-stu-id="4d4f7-132">For more information, see  [Publishing a Cloud Service using Visual Studio](../vs-azure-tools-publishing-a-cloud-service.md).</span></span>  

## <a name="viewing-azure-diagnostics-data-in-application-insights"></a><span data-ttu-id="4d4f7-133">Wyświetlanie danych diagnostycznych platformy Azure w usłudze Application Insights</span><span class="sxs-lookup"><span data-stu-id="4d4f7-133">Viewing Azure diagnostics data in Application Insights</span></span>
<span data-ttu-id="4d4f7-134">Hello Azure telemetrii diagnostycznych zostaną wyświetlone w hello zasób skonfigurowany dla usługi w chmurze usługi Application Insights.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-134">hello Azure diagnostic telemetry shows up in hello Application Insights resource configured for your cloud service.</span></span>

<span data-ttu-id="4d4f7-135">Typy dziennika diagnostyki Azure mapy tooApplication pojęcia wgląd w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="4d4f7-135">Azure diagnostics log types map tooApplication Insights concepts in these ways:</span></span>

* <span data-ttu-id="4d4f7-136">Liczniki wydajności są wyświetlane jako metryki niestandardowe w usłudze Application Insights.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-136">Performance counters are displayed as Custom Metrics in Application Insights.</span></span>
* <span data-ttu-id="4d4f7-137">Dzienniki zdarzeń systemu Windows są wyświetlane jako śladów i zdarzeń niestandardowych w usłudze Application Insights.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-137">Windows Event Logs are shown as Traces and Custom Events in Application Insights.</span></span>
* <span data-ttu-id="4d4f7-138">Dzienniki aplikacji, dzienniki zdarzeń systemu Windows i żadnych dzienników diagnostycznych infrastruktury są wyświetlane jako dane śledzenia w usłudze Application Insights.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-138">Application logs, ETW logs, and any Diagnostics Infrastructure logs are shown as Traces in Application Insights.</span></span>

<span data-ttu-id="4d4f7-139">tooview dane diagnostyczne platformy Azure w usłudze Application Insights, wykonaj jedną z następujących hello:</span><span class="sxs-lookup"><span data-stu-id="4d4f7-139">tooview Azure diagnostics data in Application Insights, do one of hello following:</span></span>

* <span data-ttu-id="4d4f7-140">Użyj [Eksploratora metryk](../application-insights/app-insights-metrics-explorer.md) toovisualize liczniki wszelkie niestandardowe wydajności lub liczby różnych rodzajów zdarzeń w dzienniku zdarzeń systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-140">Use [Metrics explorer](../application-insights/app-insights-metrics-explorer.md) toovisualize any custom performance counters or counts of different types of Windows Event Log events.</span></span>

    ![Metryki niestandardowe w Eksploratorze metryk][5]

* <span data-ttu-id="4d4f7-142">Użyj [wyszukiwania](../application-insights/app-insights-diagnostic-search.md) toosearch między dzienniki śledzenia hello wysyłane przez diagnostyki Azure.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-142">Use [Search](../application-insights/app-insights-diagnostic-search.md) toosearch across hello  trace logs sent by Azure Diagnostics.</span></span> <span data-ttu-id="4d4f7-143">Na przykład, jeśli wystąpił nieobsługiwany wyjątek spowodował hello roli toocrash i odtworzenia, informacje o wyjątku hello zostaną wyświetlone w hello *aplikacji* kanału *dziennika zdarzeń systemu Windows*.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-143">For example, if an unhandled exception has caused hello role toocrash and recycle, information about hello exception shows up in hello *Application* channel of *Windows Event Log*.</span></span> <span data-ttu-id="4d4f7-144">Można użyć wyszukiwania toolook na powitania błędu dziennika zdarzeń systemu Windows i uzyskać ślad stosu pełne hello hello wyjątek toohelp Znajdź hello przyczyna problemu hello.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-144">You can use search toolook at hello Windows Event Log error and get hello full stack trace for hello exception toohelp find hello cause of hello issue.</span></span>

    ![Ślady wyszukiwania][6]

## <a name="next-steps"></a><span data-ttu-id="4d4f7-146">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="4d4f7-146">Next Steps</span></span>
* <span data-ttu-id="4d4f7-147">[Dodawanie usługi w chmurze tooyour zestaw SDK usługi Application Insights hello](../application-insights/app-insights-cloudservices.md) toosend dane dotyczące żądań, wyjątków, zależności i wszelkie niestandardowe dane telemetryczne z aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-147">[Add hello Application Insights SDK tooyour cloud service](../application-insights/app-insights-cloudservices.md) toosend data about requests, exceptions, dependencies, and any custom telemetry from your application.</span></span> <span data-ttu-id="4d4f7-148">W połączeniu z danymi diagnostyki Azure hello, te informacje można uzyskać pełny widok aplikacji i systemu, w hello tego samego zasobu szczegółowe informacje o aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4d4f7-148">When combined with hello Azure Diagnostics data, this information you can get a complete view of your application and system, all in hello same Application Insight resource.</span></span>  

<!--Image references-->
[1]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/solution-explorer-properties.png
[2]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/role-designer-sendtoappinsights.png
[3]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/select-appinsights-resource.png
[4]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/role-designer-appinsights-serviceconfig.png
[5]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/metrics-explorer-custom-metrics.png
[6]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/search-windowseventlog-error.png
