---
title: "tooupdate aaaHow usługi w chmurze | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak usług w chmurze tooupdate na platformie Azure. Dowiedz się, jak tooensure dostępności będzie kontynuowana, aktualizacja usługi w chmurze."
services: cloud-services
documentationcenter: 
author: Thraka
manager: timlt
editor: 
ms.assetid: c6a8b5e6-5c99-454c-9911-5c7ae8d1af63
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/19/2017
ms.author: adegeo
ms.openlocfilehash: 7e4c8bd46e51a555b4309ea8927d120e8efcf0ea
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooupdate-a-cloud-service"></a><span data-ttu-id="5d492-104">Jak tooupdate usługi w chmurze</span><span class="sxs-lookup"><span data-stu-id="5d492-104">How tooupdate a cloud service</span></span>

<span data-ttu-id="5d492-105">Aktualizowanie usługi w chmurze, tym zarówno role i system operacyjny, gościa jest procesem trzech fazach.</span><span class="sxs-lookup"><span data-stu-id="5d492-105">Updating a cloud service, including both its roles and guest OS, is a three step process.</span></span> <span data-ttu-id="5d492-106">Po pierwsze hello pliki binarne i pliki konfiguracji hello nowej usługi w chmurze lub wersja systemu operacyjnego, należy przekazać.</span><span class="sxs-lookup"><span data-stu-id="5d492-106">First, hello binaries and configuration files for hello new cloud service or OS version must be uploaded.</span></span> <span data-ttu-id="5d492-107">Następnie Azure rezerwuje zasobów obliczeniowych i sieci dla usługi w chmurze hello na podstawie wymagań hello hello nowej wersji usługi chmury.</span><span class="sxs-lookup"><span data-stu-id="5d492-107">Next, Azure reserves compute and network resources for hello cloud service based on hello requirements of hello new cloud service version.</span></span> <span data-ttu-id="5d492-108">Na koniec Azure wykonuje stopniowego uaktualnienia tooincrementally aktualizacji hello dzierżawy toohello nowej wersji lub Gość systemu operacyjnego, przy zachowaniu dostępności sieci.</span><span class="sxs-lookup"><span data-stu-id="5d492-108">Finally, Azure performs a rolling upgrade tooincrementally update hello tenant toohello new version or guest OS, while preserving your availability.</span></span> <span data-ttu-id="5d492-109">W tym artykule omówiono szczegóły hello ten ostatni krok — Witaj uaktualnienia stopniowego.</span><span class="sxs-lookup"><span data-stu-id="5d492-109">This article discusses hello details of this last step – hello rolling upgrade.</span></span>

## <a name="update-an-azure-service"></a><span data-ttu-id="5d492-110">Aktualizacja usługi Azure</span><span class="sxs-lookup"><span data-stu-id="5d492-110">Update an Azure Service</span></span>
<span data-ttu-id="5d492-111">Azure organizuje wystąpienia roli w logiczne grupy o nazwie domen uaktualnienia (UD).</span><span class="sxs-lookup"><span data-stu-id="5d492-111">Azure organizes your role instances into logical groupings called upgrade domains (UD).</span></span> <span data-ttu-id="5d492-112">Domen uaktualnienia (UD) to logiczne zestawy wystąpień roli, które zostały zaktualizowane w grupie.</span><span class="sxs-lookup"><span data-stu-id="5d492-112">Upgrade domains (UD) are logical sets of role instances that are updated as a group.</span></span>  <span data-ttu-id="5d492-113">Aktualizacje platformy Azure w chmurze usługi UD jeden jednocześnie, dzięki czemu wystąpień w innych toocontinue UDs obsługujące ruch.</span><span class="sxs-lookup"><span data-stu-id="5d492-113">Azure updates a cloud service one UD at a time, which allows instances in other UDs toocontinue serving traffic.</span></span>

<span data-ttu-id="5d492-114">Witaj domyślna liczba domen uaktualnienia wynosi 5.</span><span class="sxs-lookup"><span data-stu-id="5d492-114">hello default number of upgrade domains is 5.</span></span> <span data-ttu-id="5d492-115">Dodając atrybut upgradeDomainCount hello w pliku definicji hello usługi (csdef), można określić różne liczby domen uaktualnienia.</span><span class="sxs-lookup"><span data-stu-id="5d492-115">You can specify a different number of upgrade domains by including hello upgradeDomainCount attribute in hello service’s definition file (.csdef).</span></span> <span data-ttu-id="5d492-116">Aby uzyskać więcej informacji na temat atrybutu upgradeDomainCount hello zobacz [schematu sieć Web](https://msdn.microsoft.com/library/azure/gg557553.aspx) lub [schematu proces roboczy](https://msdn.microsoft.com/library/azure/gg557552.aspx).</span><span class="sxs-lookup"><span data-stu-id="5d492-116">For more information about hello upgradeDomainCount attribute, see [WebRole Schema](https://msdn.microsoft.com/library/azure/gg557553.aspx) or [WorkerRole Schema](https://msdn.microsoft.com/library/azure/gg557552.aspx).</span></span>

<span data-ttu-id="5d492-117">Po wykonaniu aktualizacji w miejscu z jednego lub większej liczby ról w usłudze Azure aktualizuje zestawy wystąpień roli, zgodnie z toowhich domeny uaktualnienia toohello, do których należą.</span><span class="sxs-lookup"><span data-stu-id="5d492-117">When you perform an in-place update of one or more roles in your service, Azure updates sets of role instances according toohello upgrade domain toowhich they belong.</span></span> <span data-ttu-id="5d492-118">Aktualizacje platformy Azure, wszystkich wystąpień hello w danej domenie uaktualnienia — zatrzymywanie, aktualizowanie, przełącza je w tryb online — powrotem przenosi hello dalej domeny.</span><span class="sxs-lookup"><span data-stu-id="5d492-118">Azure updates all of hello instances in a given upgrade domain – stopping them, updating them, bringing them back on-line – then moves onto hello next domain.</span></span> <span data-ttu-id="5d492-119">Zatrzymując tylko wystąpień hello w bieżącym hello domena uaktualnienia, Azure upewnia się, że nastąpi aktualizacja z hello najniższe możliwe toohello wpływ usługi.</span><span class="sxs-lookup"><span data-stu-id="5d492-119">By stopping only hello instances running in hello current upgrade domain, Azure makes sure that an update occurs with hello least possible impact toohello running service.</span></span> <span data-ttu-id="5d492-120">Aby uzyskać więcej informacji, zobacz [jak przebieg aktualizacji hello](#howanupgradeproceeds) dalszej części tego artykułu.</span><span class="sxs-lookup"><span data-stu-id="5d492-120">For more information, see [How hello update proceeds](#howanupgradeproceeds) later in this article.</span></span>

> [!NOTE]
> <span data-ttu-id="5d492-121">Podczas terminy hello **aktualizacji** i **uaktualnienia** ma nieco inne znaczenie w kontekście hello Azure, używane zamiennie hello procesów oraz opisy funkcji hello w tym dokumencie.</span><span class="sxs-lookup"><span data-stu-id="5d492-121">While hello terms **update** and **upgrade** have slightly different meaning in hello context Azure, they can be used interchangeably for hello processes and descriptions of hello features in this document.</span></span>
>
>

<span data-ttu-id="5d492-122">Usługi należy zdefiniować co najmniej dwóch wystąpień roli dla tej roli toobe aktualizacji w miejscu bez przestoju.</span><span class="sxs-lookup"><span data-stu-id="5d492-122">Your service must define at least two instances of a role for that role toobe updated in-place without downtime.</span></span> <span data-ttu-id="5d492-123">Jeśli usługa hello składa się tylko jedno wystąpienie jedną rolę, usługi będą niedostępne, dopóki hello w miejscu aktualizacji zostało zakończone.</span><span class="sxs-lookup"><span data-stu-id="5d492-123">If hello service consists of only one instance of one role, your service will be unavailable until hello in-place update has finished.</span></span>

<span data-ttu-id="5d492-124">W tym temacie omówiono hello następujących informacji o aktualizacji platformy Azure:</span><span class="sxs-lookup"><span data-stu-id="5d492-124">This topic covers hello following information about Azure updates:</span></span>

* [<span data-ttu-id="5d492-125">Dozwolone zmiany usługi podczas aktualizacji</span><span class="sxs-lookup"><span data-stu-id="5d492-125">Allowed service changes during an update</span></span>](#AllowedChanges)
* [<span data-ttu-id="5d492-126">Jak będzie kontynuowana uaktualnienia</span><span class="sxs-lookup"><span data-stu-id="5d492-126">How an upgrade proceeds</span></span>](#howanupgradeproceeds)
* [<span data-ttu-id="5d492-127">Wycofywanie aktualizacji</span><span class="sxs-lookup"><span data-stu-id="5d492-127">Rollback of an update</span></span>](#RollbackofanUpdate)
* [<span data-ttu-id="5d492-128">Inicjowanie wielu operacji mutating na bieżące wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="5d492-128">Initiating multiple mutating operations on an ongoing deployment</span></span>](#multiplemutatingoperations)
* [<span data-ttu-id="5d492-129">Rozkład ról domen uaktualnienia</span><span class="sxs-lookup"><span data-stu-id="5d492-129">Distribution of roles across upgrade domains</span></span>](#distributiondfroles)

<a name="AllowedChanges"></a>

## <a name="allowed-service-changes-during-an-update"></a><span data-ttu-id="5d492-130">Dozwolone zmiany usługi podczas aktualizacji</span><span class="sxs-lookup"><span data-stu-id="5d492-130">Allowed service changes during an update</span></span>
<span data-ttu-id="5d492-131">Witaj poniższej tabeli przedstawiono hello dozwolone zmiany usługi tooa podczas aktualizacji:</span><span class="sxs-lookup"><span data-stu-id="5d492-131">hello following table shows hello allowed changes tooa service during an update:</span></span>

| <span data-ttu-id="5d492-132">Zmiany dozwolone toohosting, usług i ról</span><span class="sxs-lookup"><span data-stu-id="5d492-132">Changes permitted toohosting, services, and roles</span></span> | <span data-ttu-id="5d492-133">Aktualizacja w miejscu</span><span class="sxs-lookup"><span data-stu-id="5d492-133">In-place update</span></span> | <span data-ttu-id="5d492-134">Przemieszczanego (wymiany wirtualnych adresów IP)</span><span class="sxs-lookup"><span data-stu-id="5d492-134">Staged (VIP swap)</span></span> | <span data-ttu-id="5d492-135">Usuń i ponownie wdróż</span><span class="sxs-lookup"><span data-stu-id="5d492-135">Delete and re-deploy</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="5d492-136">Wersja systemu operacyjnego</span><span class="sxs-lookup"><span data-stu-id="5d492-136">Operating system version</span></span> |<span data-ttu-id="5d492-137">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-137">Yes</span></span> |<span data-ttu-id="5d492-138">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-138">Yes</span></span> |<span data-ttu-id="5d492-139">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-139">Yes</span></span> |
| <span data-ttu-id="5d492-140">Poziom zaufania platformy .NET</span><span class="sxs-lookup"><span data-stu-id="5d492-140">.NET trust level</span></span> |<span data-ttu-id="5d492-141">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-141">Yes</span></span> |<span data-ttu-id="5d492-142">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-142">Yes</span></span> |<span data-ttu-id="5d492-143">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-143">Yes</span></span> |
| <span data-ttu-id="5d492-144">Rozmiar maszyny wirtualnej<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="5d492-144">Virtual machine size<sup>1</sup></span></span> |<span data-ttu-id="5d492-145">Tak<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="5d492-145">Yes<sup>2</sup></span></span> |<span data-ttu-id="5d492-146">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-146">Yes</span></span> |<span data-ttu-id="5d492-147">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-147">Yes</span></span> |
| <span data-ttu-id="5d492-148">Ustawienia magazynu lokalnego</span><span class="sxs-lookup"><span data-stu-id="5d492-148">Local storage settings</span></span> |<span data-ttu-id="5d492-149">Zwiększ tylko<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="5d492-149">Increase only<sup>2</sup></span></span> |<span data-ttu-id="5d492-150">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-150">Yes</span></span> |<span data-ttu-id="5d492-151">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-151">Yes</span></span> |
| <span data-ttu-id="5d492-152">Dodawanie lub usuwanie ról w usłudze</span><span class="sxs-lookup"><span data-stu-id="5d492-152">Add or remove roles in a service</span></span> |<span data-ttu-id="5d492-153">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-153">Yes</span></span> |<span data-ttu-id="5d492-154">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-154">Yes</span></span> |<span data-ttu-id="5d492-155">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-155">Yes</span></span> |
| <span data-ttu-id="5d492-156">Liczba wystąpień określonej roli</span><span class="sxs-lookup"><span data-stu-id="5d492-156">Number of instances of a particular role</span></span> |<span data-ttu-id="5d492-157">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-157">Yes</span></span> |<span data-ttu-id="5d492-158">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-158">Yes</span></span> |<span data-ttu-id="5d492-159">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-159">Yes</span></span> |
| <span data-ttu-id="5d492-160">Liczba lub typ punktów końcowych dla usługi</span><span class="sxs-lookup"><span data-stu-id="5d492-160">Number or type of endpoints for a service</span></span> |<span data-ttu-id="5d492-161">Tak<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="5d492-161">Yes<sup>2</sup></span></span> |<span data-ttu-id="5d492-162">Nie</span><span class="sxs-lookup"><span data-stu-id="5d492-162">No</span></span> |<span data-ttu-id="5d492-163">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-163">Yes</span></span> |
| <span data-ttu-id="5d492-164">Nazwy i wartości ustawień konfiguracji</span><span class="sxs-lookup"><span data-stu-id="5d492-164">Names and values of configuration settings</span></span> |<span data-ttu-id="5d492-165">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-165">Yes</span></span> |<span data-ttu-id="5d492-166">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-166">Yes</span></span> |<span data-ttu-id="5d492-167">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-167">Yes</span></span> |
| <span data-ttu-id="5d492-168">Wartości (ale nie nazwy) ustawień konfiguracji</span><span class="sxs-lookup"><span data-stu-id="5d492-168">Values (but not names) of configuration settings</span></span> |<span data-ttu-id="5d492-169">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-169">Yes</span></span> |<span data-ttu-id="5d492-170">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-170">Yes</span></span> |<span data-ttu-id="5d492-171">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-171">Yes</span></span> |
| <span data-ttu-id="5d492-172">Dodaj nowe certyfikaty</span><span class="sxs-lookup"><span data-stu-id="5d492-172">Add new certificates</span></span> |<span data-ttu-id="5d492-173">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-173">Yes</span></span> |<span data-ttu-id="5d492-174">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-174">Yes</span></span> |<span data-ttu-id="5d492-175">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-175">Yes</span></span> |
| <span data-ttu-id="5d492-176">Zmiana istniejących certyfikatów</span><span class="sxs-lookup"><span data-stu-id="5d492-176">Change existing certificates</span></span> |<span data-ttu-id="5d492-177">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-177">Yes</span></span> |<span data-ttu-id="5d492-178">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-178">Yes</span></span> |<span data-ttu-id="5d492-179">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-179">Yes</span></span> |
| <span data-ttu-id="5d492-180">Wdrażanie nowego kodu</span><span class="sxs-lookup"><span data-stu-id="5d492-180">Deploy new code</span></span> |<span data-ttu-id="5d492-181">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-181">Yes</span></span> |<span data-ttu-id="5d492-182">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-182">Yes</span></span> |<span data-ttu-id="5d492-183">Tak</span><span class="sxs-lookup"><span data-stu-id="5d492-183">Yes</span></span> |

<span data-ttu-id="5d492-184"><sup>1</sup> toohello podzbiór dostępne dla usługi w chmurze hello ograniczone zmiany rozmiaru.</span><span class="sxs-lookup"><span data-stu-id="5d492-184"><sup>1</sup> Size change limited toohello subset of sizes available for hello cloud service.</span></span>

<span data-ttu-id="5d492-185"><sup>2</sup> wymaga zestawu SDK platformy Azure w wersji 1.5 lub nowszego.</span><span class="sxs-lookup"><span data-stu-id="5d492-185"><sup>2</sup> Requires Azure SDK 1.5 or later versions.</span></span>

> [!WARNING]
> <span data-ttu-id="5d492-186">Zmiana rozmiaru maszyny wirtualnej hello zniszczy danych lokalnych.</span><span class="sxs-lookup"><span data-stu-id="5d492-186">Changing hello virtual machine size will destroy local data.</span></span>
>
>

<span data-ttu-id="5d492-187">Witaj, następujące elementy nie są obsługiwane podczas aktualizacji:</span><span class="sxs-lookup"><span data-stu-id="5d492-187">hello following items are not supported during an update:</span></span>

* <span data-ttu-id="5d492-188">Zmiana nazwy hello roli.</span><span class="sxs-lookup"><span data-stu-id="5d492-188">Changing hello name of a role.</span></span> <span data-ttu-id="5d492-189">Usuń, a następnie dodaj rolę hello hello nową nazwę.</span><span class="sxs-lookup"><span data-stu-id="5d492-189">Remove and then add hello role with hello new name.</span></span>
* <span data-ttu-id="5d492-190">Zmiana hello liczba domen uaktualnienia.</span><span class="sxs-lookup"><span data-stu-id="5d492-190">Changing of hello Upgrade Domain count.</span></span>
* <span data-ttu-id="5d492-191">Zmniejszenie rozmiaru hello hello zasobów lokalnych.</span><span class="sxs-lookup"><span data-stu-id="5d492-191">Decreasing hello size of hello local resources.</span></span>

<span data-ttu-id="5d492-192">W przypadku wprowadzania inne aktualizacje definicji tooyour usługi, takie jak zmniejszenie hello rozmiar zasobu lokalnego zamiast tego należy wykonać aktualizację wymiany adresów VIP.</span><span class="sxs-lookup"><span data-stu-id="5d492-192">If you are making other updates tooyour service's definition, such as decreasing hello size of local resource, you must perform a VIP swap update instead.</span></span> <span data-ttu-id="5d492-193">Aby uzyskać więcej informacji, zobacz [wymiany wdrożenia](https://msdn.microsoft.com/library/azure/ee460814.aspx).</span><span class="sxs-lookup"><span data-stu-id="5d492-193">For more information, see [Swap Deployment](https://msdn.microsoft.com/library/azure/ee460814.aspx).</span></span>

<a name="howanupgradeproceeds"></a>

## <a name="how-an-upgrade-proceeds"></a><span data-ttu-id="5d492-194">Jak będzie kontynuowana uaktualnienia</span><span class="sxs-lookup"><span data-stu-id="5d492-194">How an upgrade proceeds</span></span>
<span data-ttu-id="5d492-195">Można zdecydować, czy ma tooupdate wszystkie role hello w usłudze lub jedną rolę w usłudze hello.</span><span class="sxs-lookup"><span data-stu-id="5d492-195">You can decide whether you want tooupdate all of hello roles in your service or a single role in hello service.</span></span> <span data-ttu-id="5d492-196">W obu przypadkach wszystkie wystąpienia każdej roli, który jest uaktualniany i toohello pierwszej domeny uaktualnienia należy są zatrzymane, uaktualnione i przywrócony do trybu online.</span><span class="sxs-lookup"><span data-stu-id="5d492-196">In either case, all instances of each role that is being upgraded and belong toohello first upgrade domain are stopped, upgraded, and brought back online.</span></span> <span data-ttu-id="5d492-197">Po ich przywróceniu online, hello wystąpień w drugiej domenie uaktualnienia hello są zatrzymane, uaktualnione i przywrócony do trybu online.</span><span class="sxs-lookup"><span data-stu-id="5d492-197">Once they are back online, hello instances in hello second upgrade domain are stopped, upgraded, and brought back online.</span></span> <span data-ttu-id="5d492-198">Usługi w chmurze może mieć co najwyżej jedno uaktualnienie active naraz.</span><span class="sxs-lookup"><span data-stu-id="5d492-198">A cloud service can have at most one upgrade active at a time.</span></span> <span data-ttu-id="5d492-199">uaktualnienie Hello jest zawsze przeprowadzane przy użyciu najnowszej wersji hello hello usługi w chmurze.</span><span class="sxs-lookup"><span data-stu-id="5d492-199">hello upgrade is always performed against hello latest version of hello cloud service.</span></span>

<span data-ttu-id="5d492-200">Witaj poniższym diagramie przedstawiono sposób uaktualniania hello będzie kontynuowane w przypadku uaktualniania wszystkich ról hello w usłudze hello:</span><span class="sxs-lookup"><span data-stu-id="5d492-200">hello following diagram illustrates how hello upgrade proceeds if you are upgrading all of hello roles in hello service:</span></span>

<span data-ttu-id="5d492-201">![Uaktualnij usługę](media/cloud-services-update-azure-service/IC345879.png "uaktualnianie usługi")</span><span class="sxs-lookup"><span data-stu-id="5d492-201">![Upgrade service](media/cloud-services-update-azure-service/IC345879.png "Upgrade service")</span></span>

<span data-ttu-id="5d492-202">Ten dalej diagramie przedstawiono, jak hello aktualizacji będzie kontynuowana, Jeśli uaktualniasz tylko jedną rolę.</span><span class="sxs-lookup"><span data-stu-id="5d492-202">This next diagram illustrates how hello update proceeds if you are upgrading only a single role:</span></span>

<span data-ttu-id="5d492-203">![Uaktualnienie roli](media/cloud-services-update-azure-service/IC345880.png "uaktualnienia roli")</span><span class="sxs-lookup"><span data-stu-id="5d492-203">![Upgrade role](media/cloud-services-update-azure-service/IC345880.png "Upgrade role")</span></span>  

<span data-ttu-id="5d492-204">Podczas aktualizacji automatycznych hello Kontroler sieci szkieletowej Azure okresowo ocenia kondycję hello toodetermine usługi chmury hello podczas jego bezpieczne toowalk hello UD dalej.</span><span class="sxs-lookup"><span data-stu-id="5d492-204">During an automatic update, hello Azure Fabric Controller periodically evaluates hello health of hello cloud service toodetermine when it’s safe toowalk hello next UD.</span></span> <span data-ttu-id="5d492-205">Tej oceny kondycji jest wykonywane na podstawie-role i uwzględnia tylko wystąpienia w najnowszej wersji hello (tj. wystąpień z UDs, które już zostały udał).</span><span class="sxs-lookup"><span data-stu-id="5d492-205">This health evaluation is performed on a per-role basis and considers only instances in hello latest version (i.e. instances from UDs that have already been walked).</span></span> <span data-ttu-id="5d492-206">Sprawdza, czy minimalna liczba wystąpień roli dla każdej roli, zostały osiągnięte zadowalające stanu terminala.</span><span class="sxs-lookup"><span data-stu-id="5d492-206">It verifies that a minimum number of role instances, for each role, have achieved a satisfactory terminal state.</span></span>

### <a name="role-instance-start-timeout"></a><span data-ttu-id="5d492-207">Limit czasu uruchomienia wystąpienia roli</span><span class="sxs-lookup"><span data-stu-id="5d492-207">Role Instance Start Timeout</span></span>
<span data-ttu-id="5d492-208">Witaj kontrolera sieci szkieletowej będzie czekać tooreach wystąpienia każdej roli stanu uruchomiono na 30 minut.</span><span class="sxs-lookup"><span data-stu-id="5d492-208">hello Fabric Controller will wait 30 minutes for each role instance tooreach a Started state.</span></span> <span data-ttu-id="5d492-209">Jeśli upływem limitu czasu hello, hello kontrolera sieci szkieletowej będą nadal przejście toohello następne wystąpienie roli.</span><span class="sxs-lookup"><span data-stu-id="5d492-209">If hello timeout duration elapses, hello Fabric Controller will continue walking toohello next role instance.</span></span>

### <a name="impact-toodrive-data-during-cloud-service-upgrades"></a><span data-ttu-id="5d492-210">Wpływ toodrive danych podczas uaktualniania usługi w chmurze</span><span class="sxs-lookup"><span data-stu-id="5d492-210">Impact toodrive data during Cloud Service upgrades</span></span>

<span data-ttu-id="5d492-211">Podczas uaktualniania usługi z wystąpień toomultiple pojedyncze wystąpienie usługi zostanie przeniesiony w dół podczas uaktualniania hello odbywa się ze względu na sposób toohello Azure uaktualnienia usługi.</span><span class="sxs-lookup"><span data-stu-id="5d492-211">When upgrading a service from a single instance toomultiple instances your service will be brought down while hello upgrade is performed due toohello way Azure upgrades services.</span></span> <span data-ttu-id="5d492-212">Hello umowę dotyczącą poziomu gwarantujących usługi dostępności usługi ma zastosowanie tylko tooservices, które zostały wdrożone za pomocą więcej niż jedno wystąpienie.</span><span class="sxs-lookup"><span data-stu-id="5d492-212">hello service level agreement guaranteeing service availability only applies tooservices that are deployed with more than one instance.</span></span> <span data-ttu-id="5d492-213">Witaj Poniższa lista zawiera opis wpływu każdego scenariusza uaktualniania usługi Azure hello danych na każdym dysku:</span><span class="sxs-lookup"><span data-stu-id="5d492-213">hello following list describes how hello data on each drive is affected by each Azure service upgrade scenario:</span></span>

|<span data-ttu-id="5d492-214">Scenariusz</span><span class="sxs-lookup"><span data-stu-id="5d492-214">Scenario</span></span>|<span data-ttu-id="5d492-215">Dysku c.</span><span class="sxs-lookup"><span data-stu-id="5d492-215">C Drive</span></span>|<span data-ttu-id="5d492-216">Dysk D</span><span class="sxs-lookup"><span data-stu-id="5d492-216">D Drive</span></span>|<span data-ttu-id="5d492-217">Dysk E</span><span class="sxs-lookup"><span data-stu-id="5d492-217">E Drive</span></span>|
|--------|-------|-------|-------|
|<span data-ttu-id="5d492-218">Ponowne uruchomienie maszyny Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="5d492-218">VM reboot</span></span>|<span data-ttu-id="5d492-219">Zachowane</span><span class="sxs-lookup"><span data-stu-id="5d492-219">Preserved</span></span>|<span data-ttu-id="5d492-220">Zachowane</span><span class="sxs-lookup"><span data-stu-id="5d492-220">Preserved</span></span>|<span data-ttu-id="5d492-221">Zachowane</span><span class="sxs-lookup"><span data-stu-id="5d492-221">Preserved</span></span>|
|<span data-ttu-id="5d492-222">Ponowne uruchomienie portalu</span><span class="sxs-lookup"><span data-stu-id="5d492-222">Portal reboot</span></span>|<span data-ttu-id="5d492-223">Zachowane</span><span class="sxs-lookup"><span data-stu-id="5d492-223">Preserved</span></span>|<span data-ttu-id="5d492-224">Zachowane</span><span class="sxs-lookup"><span data-stu-id="5d492-224">Preserved</span></span>|<span data-ttu-id="5d492-225">Zniszczone</span><span class="sxs-lookup"><span data-stu-id="5d492-225">Destroyed</span></span>|
|<span data-ttu-id="5d492-226">Portal odtworzenia z obrazu</span><span class="sxs-lookup"><span data-stu-id="5d492-226">Portal reimage</span></span>|<span data-ttu-id="5d492-227">Zachowane</span><span class="sxs-lookup"><span data-stu-id="5d492-227">Preserved</span></span>|<span data-ttu-id="5d492-228">Zniszczone</span><span class="sxs-lookup"><span data-stu-id="5d492-228">Destroyed</span></span>|<span data-ttu-id="5d492-229">Zniszczone</span><span class="sxs-lookup"><span data-stu-id="5d492-229">Destroyed</span></span>|
|<span data-ttu-id="5d492-230">Uaktualnienie w miejscu</span><span class="sxs-lookup"><span data-stu-id="5d492-230">In-Place Upgrade</span></span>|<span data-ttu-id="5d492-231">Zachowane</span><span class="sxs-lookup"><span data-stu-id="5d492-231">Preserved</span></span>|<span data-ttu-id="5d492-232">Zachowane</span><span class="sxs-lookup"><span data-stu-id="5d492-232">Preserved</span></span>|<span data-ttu-id="5d492-233">Zniszczone</span><span class="sxs-lookup"><span data-stu-id="5d492-233">Destroyed</span></span>|
|<span data-ttu-id="5d492-234">Węzeł migracji</span><span class="sxs-lookup"><span data-stu-id="5d492-234">Node migration</span></span>|<span data-ttu-id="5d492-235">Zniszczone</span><span class="sxs-lookup"><span data-stu-id="5d492-235">Destroyed</span></span>|<span data-ttu-id="5d492-236">Zniszczone</span><span class="sxs-lookup"><span data-stu-id="5d492-236">Destroyed</span></span>|<span data-ttu-id="5d492-237">Zniszczone</span><span class="sxs-lookup"><span data-stu-id="5d492-237">Destroyed</span></span>|

<span data-ttu-id="5d492-238">Należy pamiętać, że w hello powyżej listy, hello dysku E: reprezentuje hello roli katalogu głównym dysku, nie powinien być ustalony.</span><span class="sxs-lookup"><span data-stu-id="5d492-238">Note that, in hello above list, hello E: drive represents hello role’s root drive, and should not be hard-coded.</span></span> <span data-ttu-id="5d492-239">Zamiast tego należy użyć hello **RoleRoot %** dysku hello toorepresent zmiennej środowiska.</span><span class="sxs-lookup"><span data-stu-id="5d492-239">Instead, use hello **%RoleRoot%** environment variable toorepresent hello drive.</span></span>

<span data-ttu-id="5d492-240">toominimize hello przestoju podczas uaktualniania do jednego wystąpienia usługi, wdrażanie wielu wystąpień usługi toohello przemieszczania serwer i przeprowadzić wymiany wirtualnych adresów IP.</span><span class="sxs-lookup"><span data-stu-id="5d492-240">toominimize hello downtime when upgrading a single-instance service, deploy a new multi-instance service toohello staging server and perform a VIP swap.</span></span>

<a name="RollbackofanUpdate"></a>

## <a name="rollback-of-an-update"></a><span data-ttu-id="5d492-241">Wycofywanie aktualizacji</span><span class="sxs-lookup"><span data-stu-id="5d492-241">Rollback of an update</span></span>
<span data-ttu-id="5d492-242">Azure zapewnia elastyczność w zarządzaniu usług podczas aktualizacji, co pozwala na zainicjowanie dodatkowe operacje w usłudze, po zaakceptowaniu żądania początkowego aktualizacji hello przez kontroler sieci szkieletowej Azure hello.</span><span class="sxs-lookup"><span data-stu-id="5d492-242">Azure provides flexibility in managing services during an update by letting you initiate additional operations on a service, after hello initial update request is accepted by hello Azure Fabric Controller.</span></span> <span data-ttu-id="5d492-243">Wycofywania można wykonać tylko w przypadku aktualizacji (zmiana konfiguracji) lub Trwa uaktualnianie hello **w toku** stanu na powitania wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="5d492-243">A rollback can only be performed when an update (configuration change) or upgrade is in hello **in progress** state on hello deployment.</span></span> <span data-ttu-id="5d492-244">Aktualizacji lub uaktualnieniu jest uważany za toobe trwa tak długo, jak istnieje co najmniej jedno wystąpienie usługi hello, który nie został jeszcze zaktualizowany toohello nowej wersji.</span><span class="sxs-lookup"><span data-stu-id="5d492-244">An update or upgrade is considered toobe in-progress as long as there is at least one instance of hello service which has not yet been updated toohello new version.</span></span> <span data-ttu-id="5d492-245">tootest zezwolić na wycofanie, sprawdź wartość hello hello RollbackAllowed flagi, zwracane przez [uzyskać wdrożenia](https://msdn.microsoft.com/library/azure/ee460804.aspx) i [pobrać właściwości usługi chmury](https://msdn.microsoft.com/library/azure/ee460806.aspx) operacje, ustawiono tootrue.</span><span class="sxs-lookup"><span data-stu-id="5d492-245">tootest whether a rollback is allowed, check hello value of hello RollbackAllowed flag, returned by [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx) operations, is set tootrue.</span></span>

> [!NOTE]
> <span data-ttu-id="5d492-246">Tylko ułatwia wykrywanie toocall wycofywania na **w miejscu** aktualizacji lub uaktualnienia, ponieważ wymagają uaktualnienia wymiany adresów VIP zastępowanie jeden cały działającego wystąpienia usługi z inną.</span><span class="sxs-lookup"><span data-stu-id="5d492-246">It only makes sense toocall Rollback on an **in-place** update or upgrade because VIP swap upgrades involve replacing one entire running instance of your service with another.</span></span>
>
>

<span data-ttu-id="5d492-247">Wycofywanie aktualizacji w toku ma powitania po wpływ na wdrożenie hello:</span><span class="sxs-lookup"><span data-stu-id="5d492-247">Rollback of an in-progress update has hello following effects on hello deployment:</span></span>

* <span data-ttu-id="5d492-248">Wszystkie wystąpienia roli, które nie zostało jeszcze zaktualizowane lub uaktualnione toohello nowej wersji nie są zaktualizowane lub uaktualnione, ponieważ już uruchomionych wystąpień tych wersji docelowej hello hello usługi.</span><span class="sxs-lookup"><span data-stu-id="5d492-248">Any role instances which had not yet been updated or upgraded toohello new version are not updated or upgraded, because those instances are already running hello target version of hello service.</span></span>
* <span data-ttu-id="5d492-249">Dowolnej roli wystąpienia, który ma już zaktualizowany lub uaktualnionych toohello nowej wersji pakietu usługi hello (\*cspkg) pliku lub hello konfiguracji usługi (\*.cscfg) mają przywróconego toohello wersji sprzed uaktualnienia z pliku (lub oba pliki) te pliki.</span><span class="sxs-lookup"><span data-stu-id="5d492-249">Any role instances which had already been updated or upgraded toohello new version of hello service package (\*.cspkg) file or hello service configuration (\*.cscfg) file (or both files) are reverted toohello pre-upgrade version of these files.</span></span>

<span data-ttu-id="5d492-250">Funkcjonalnie odbywa się przez hello następujące funkcje:</span><span class="sxs-lookup"><span data-stu-id="5d492-250">This functionally is provided by hello following features:</span></span>

* <span data-ttu-id="5d492-251">Witaj [wycofywania aktualizacji lub uaktualnienia](https://msdn.microsoft.com/library/azure/hh403977.aspx) operacja, która może być wywoływana dla aktualizacji konfiguracji (wyzwalane przez wywołanie metody [zmiana konfiguracji wdrożenia](https://msdn.microsoft.com/library/azure/ee460809.aspx)) lub uaktualnienia (wyzwalane przez wywołanie metody [ Uaktualnienia wdrożenia](https://msdn.microsoft.com/library/azure/ee460793.aspx)) tak długo, jak istnieje co najmniej jedno wystąpienie usługi hello który nie został jeszcze zaktualizowany toohello nowej wersji.</span><span class="sxs-lookup"><span data-stu-id="5d492-251">hello [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation, which can be called on a configuration update (triggered by calling [Change Deployment Configuration](https://msdn.microsoft.com/library/azure/ee460809.aspx)) or an upgrade (triggered by calling [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx)) as long as there is at least one instance in hello service which has not yet been updated toohello new version.</span></span>
* <span data-ttu-id="5d492-252">Witaj zablokowany element i elementu RollbackAllowed hello, które są zwracane jako część treści odpowiedzi hello hello [uzyskać wdrożenia](https://msdn.microsoft.com/library/azure/ee460804.aspx) i [pobrać właściwości usługi chmury](https://msdn.microsoft.com/library/azure/ee460806.aspx) operacje:</span><span class="sxs-lookup"><span data-stu-id="5d492-252">hello Locked element and hello RollbackAllowed element, which are returned as part of hello response body of hello [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx) operations:</span></span>

  1. <span data-ttu-id="5d492-253">element zablokowany Hello umożliwia toodetect mutating operację można wywołać w ramach danego wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="5d492-253">hello Locked element allows you toodetect when a mutating operation can be invoked on a given deployment.</span></span>
  2. <span data-ttu-id="5d492-254">Witaj RollbackAllowed element pozwala toodetect podczas hello [wycofywania aktualizacji lub uaktualnienia](https://msdn.microsoft.com/library/azure/hh403977.aspx) operację można wywołać w danym wdrożeniu.</span><span class="sxs-lookup"><span data-stu-id="5d492-254">hello RollbackAllowed element allows you toodetect when hello [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation can be called on a given deployment.</span></span>

  <span data-ttu-id="5d492-255">W kolejności tooperform wycofanie nie masz toocheck hello zablokowany, a także hello RollbackAllowed elementów.</span><span class="sxs-lookup"><span data-stu-id="5d492-255">In order tooperform a rollback, you do not have toocheck both hello Locked and hello RollbackAllowed elements.</span></span> <span data-ttu-id="5d492-256">Wystarczy tooconfirm czy RollbackAllowed ustawiono tootrue.</span><span class="sxs-lookup"><span data-stu-id="5d492-256">It suffices tooconfirm that RollbackAllowed is set tootrue.</span></span> <span data-ttu-id="5d492-257">Te elementy są zwracane tylko, jeśli te metody są wywoływane przy użyciu hello nagłówek żądania, ustaw za "x-ms-version: 2011-10-01" lub nowszej wersji.</span><span class="sxs-lookup"><span data-stu-id="5d492-257">These elements are only returned if these methods are invoked by using hello request header set too“x-ms-version: 2011-10-01” or a later version.</span></span> <span data-ttu-id="5d492-258">Aby uzyskać więcej informacji o nagłówkach przechowywania wersji, zobacz [przechowywanie wersji usługi zarządzania](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span><span class="sxs-lookup"><span data-stu-id="5d492-258">For more information about versioning headers, see [Service Management Versioning](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span></span>

<span data-ttu-id="5d492-259">Istnieje kilka sytuacji, gdy wycofywania aktualizacji lub uaktualnienie nie jest obsługiwane, są to następujące dane:</span><span class="sxs-lookup"><span data-stu-id="5d492-259">There are some situations where a rollback of an update or upgrade is not supported, these are as follows:</span></span>

* <span data-ttu-id="5d492-260">Spadek zużycia zasobów lokalnych — Jeśli hello aktualizacji zwiększa hello zasobów lokalnych roli hello platformy Azure nie zezwala na wycofanie.</span><span class="sxs-lookup"><span data-stu-id="5d492-260">Reduction in local resources - If hello update increases hello local resources for a role hello Azure platform does not allow rolling back.</span></span>
* <span data-ttu-id="5d492-261">Limity przydziału — Jeśli hello aktualizacja została skali w dół operację, którą użytkownik może już nie mieć wystarczające operacji wycofywania hello toocomplete obliczeniowe przydziału.</span><span class="sxs-lookup"><span data-stu-id="5d492-261">Quota limitations - If hello update was a scale down operation you may no longer have sufficient compute quota toocomplete hello rollback operation.</span></span> <span data-ttu-id="5d492-262">Każda subskrypcja platformy Azure ma limit przydziału skojarzonych z nim określający hello maksymalna liczba rdzeni, które mogą być używane przez wszystkie usługi hostowanej, które należy toothat subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="5d492-262">Each Azure subscription has a quota associated with it that specifies hello maximum number of cores which can be consumed by all hosted services that belong toothat subscription.</span></span> <span data-ttu-id="5d492-263">Jeśli wykonania operacji wycofywania aktualizacji danego spowodowałaby subskrypcję za pośrednictwem przydziału, a następnie który wycofanie nie zostaną włączone.</span><span class="sxs-lookup"><span data-stu-id="5d492-263">If performing a rollback of a given update would put your subscription over quota then that a rollback will not be enabled.</span></span>
* <span data-ttu-id="5d492-264">Sytuacja wyścigu — Jeśli ukończono aktualizowanie początkowej hello, wycofanie nie jest możliwe.</span><span class="sxs-lookup"><span data-stu-id="5d492-264">Race condition - If hello initial update has completed, a rollback is not possible.</span></span>

<span data-ttu-id="5d492-265">Jest przykładem podczas wycofywania hello aktualizacji mogą być przydatne, jeśli używasz hello [uaktualniania wdrożenia](https://msdn.microsoft.com/library/azure/ee460793.aspx) operacji ręczny tryb toocontrol hello szybkości, jaką usługa hostowana główna tooyour uaktualnienia w miejscu Azure jest wdrażana.</span><span class="sxs-lookup"><span data-stu-id="5d492-265">An example of when hello rollback of an update might be useful is if you are using hello [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx) operation in manual mode toocontrol hello rate at which a major in-place upgrade tooyour Azure hosted service is rolled out.</span></span>

<span data-ttu-id="5d492-266">Podczas fazy hello hello uaktualnienia należy wywołać [uaktualniania wdrożenia](https://msdn.microsoft.com/library/azure/ee460793.aspx) w trybie ręcznym i rozpocząć toowalk domen uaktualnienia.</span><span class="sxs-lookup"><span data-stu-id="5d492-266">During hello rollout of hello upgrade you call [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx) in manual mode and begin toowalk upgrade domains.</span></span> <span data-ttu-id="5d492-267">Jeśli w pewnym momencie podczas monitorowania hello uaktualnienia, możesz zaznaczyć niektórych wystąpień roli w hello pierwszych uaktualnienia domen, które należy zbadać ma przestać odpowiadać, można wywołać hello [wycofywania aktualizacji lub uaktualnienia](https://msdn.microsoft.com/library/azure/hh403977.aspx) operacji na powitania wdrożenia, które spowoduje pozostawienie niezmienionej hello wystąpienia, które nie ma jeszcze uaktualniona i wycofywania wystąpień, które zostały uaktualnione toohello poprzedniego pakiet usługi i konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="5d492-267">If at some point, as you monitor hello upgrade, you note some role instances in hello first upgrade domains that you examine have become unresponsive, you can call hello [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation on hello deployment, which will leave untouched hello instances which had not yet been upgraded and rollback instances which had been upgraded toohello previous service package and configuration.</span></span>

<a name="multiplemutatingoperations"></a>

## <a name="initiating-multiple-mutating-operations-on-an-ongoing-deployment"></a><span data-ttu-id="5d492-268">Inicjowanie wielu operacji mutating na bieżące wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="5d492-268">Initiating multiple mutating operations on an ongoing deployment</span></span>
<span data-ttu-id="5d492-269">W niektórych przypadkach może być tooinitiate wiele równoczesnych operacji mutating na bieżące wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="5d492-269">In some cases you may want tooinitiate multiple simultaneous mutating operations on an ongoing deployment.</span></span> <span data-ttu-id="5d492-270">Na przykład może wykonywać aktualizacji usługi i, gdy aktualizacja jest rozwijane w usłudze, ma toomake niektóre zmiany, np. tooroll Witaj ponownie aktualizacji, zastosuj inną aktualizację lub nawet usuwać hello wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="5d492-270">For example, you may perform a service update and, while that update is being rolled out across your service, you want toomake some change, e.g. tooroll hello update back, apply a different update, or even delete hello deployment.</span></span> <span data-ttu-id="5d492-271">Przypadek, w którym może to być konieczne jest, czy uaktualnianie usługi zawiera buggy kodu, co powoduje, że rola uaktualnionego wystąpienia toorepeatedly awarii.</span><span class="sxs-lookup"><span data-stu-id="5d492-271">A case in which this might be necessary is if a service upgrade contains buggy code which causes an upgraded role instance toorepeatedly crash.</span></span> <span data-ttu-id="5d492-272">W takim przypadku hello Azure kontrolera sieci szkieletowej nie będą mogli toomake postęp stosowania uaktualnić, ponieważ określono za małą liczbę wystąpień w domenie uaktualnionego hello są w dobrej kondycji.</span><span class="sxs-lookup"><span data-stu-id="5d492-272">In this case, hello Azure Fabric Controller will not be able toomake progress in applying that upgrade because an insufficient number of instances in hello upgraded domain are healthy.</span></span> <span data-ttu-id="5d492-273">Ten stan jest określony tooas *zatrzymane wdrożenia*.</span><span class="sxs-lookup"><span data-stu-id="5d492-273">This state is referred tooas a *stuck deployment*.</span></span> <span data-ttu-id="5d492-274">Witaj wdrożenia można przylegał wycofywanie hello aktualizacji lub stosowania aktualizacji świeże w górnej części hello awarii jednego.</span><span class="sxs-lookup"><span data-stu-id="5d492-274">You can unstick hello deployment by rolling back hello update or applying a fresh update over top of hello failing one.</span></span>

<span data-ttu-id="5d492-275">Po otrzymaniu przez kontroler sieci szkieletowej Azure hello hello żądania początkowego tooupdate lub Uaktualnij program hello usługi można uruchomić kolejnych operacji mutacja.</span><span class="sxs-lookup"><span data-stu-id="5d492-275">Once hello initial request tooupdate or upgrade hello service has been received by hello Azure Fabric Controller, you can start subsequent mutating operations.</span></span> <span data-ttu-id="5d492-276">Oznacza to, że nie masz toowait dla toocomplete początkowej operacji hello przed rozpoczęciem inna operacja mutating.</span><span class="sxs-lookup"><span data-stu-id="5d492-276">That is, you do not have toowait for hello initial operation toocomplete before you can start another mutating operation.</span></span>

<span data-ttu-id="5d492-277">Inicjowanie drugiej operacji aktualizacji, podczas pierwszej aktualizacji hello jest wykonywana będzie wykonywać operacji wycofywania toohello podobne.</span><span class="sxs-lookup"><span data-stu-id="5d492-277">Initiating a second update operation while hello first update is ongoing will perform similar toohello rollback operation.</span></span> <span data-ttu-id="5d492-278">Jeśli aktualizacja drugi hello jest w trybie automatycznym, pierwsza domena uaktualnienia hello zostaną uaktualnione natychmiast, prawdopodobnie wiodące tooinstances z wielu domen uaktualnienia w trybie offline na powitania sam punkt w czasie.</span><span class="sxs-lookup"><span data-stu-id="5d492-278">If hello second update is in automatic mode, hello first upgrade domain will be upgraded immediately, possibly leading tooinstances from multiple upgrade domains being offline at hello same point in time.</span></span>

<span data-ttu-id="5d492-279">Witaj mutacja operacje są następujące: [zmiany konfiguracji wdrożenia](https://msdn.microsoft.com/library/azure/ee460809.aspx), [uaktualniania wdrożenia](https://msdn.microsoft.com/library/azure/ee460793.aspx), [stan wdrożenia aktualizacji](https://msdn.microsoft.com/library/azure/ee460808.aspx), [usunąć Wdrożenie](https://msdn.microsoft.com/library/azure/ee460815.aspx), i [wycofywania aktualizacji lub uaktualnieniu](https://msdn.microsoft.com/library/azure/hh403977.aspx).</span><span class="sxs-lookup"><span data-stu-id="5d492-279">hello mutating operations are as follows: [Change Deployment Configuration](https://msdn.microsoft.com/library/azure/ee460809.aspx), [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx), [Update Deployment Status](https://msdn.microsoft.com/library/azure/ee460808.aspx), [Delete Deployment](https://msdn.microsoft.com/library/azure/ee460815.aspx), and [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx).</span></span>

<span data-ttu-id="5d492-280">Dwie operacje [uzyskać wdrożenia](https://msdn.microsoft.com/library/azure/ee460804.aspx) i [pobrać właściwości usługi chmury](https://msdn.microsoft.com/library/azure/ee460806.aspx), zwróć hello zablokowany Flaga, która może być toodetermine zbadane, czy mutating operację można wywołać w ramach danego wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="5d492-280">Two operations, [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx), return hello Locked flag which can be examined toodetermine whether a mutating operation can be invoked on a given deployment.</span></span>

<span data-ttu-id="5d492-281">W kolejności toocall hello wersji tych metod, która zwraca flagę zablokowany hello, musisz ustawić nagłówek żądania za "x-ms-version: 2011-10-01" lub nowszego.</span><span class="sxs-lookup"><span data-stu-id="5d492-281">In order toocall hello version of these methods which returns hello Locked flag, you must set request header too“x-ms-version: 2011-10-01” or a later.</span></span> <span data-ttu-id="5d492-282">Aby uzyskać więcej informacji o nagłówkach przechowywania wersji, zobacz [przechowywanie wersji usługi zarządzania](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span><span class="sxs-lookup"><span data-stu-id="5d492-282">For more information about versioning headers, see [Service Management Versioning](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span></span>

<a name="distributiondfroles"></a>

## <a name="distribution-of-roles-across-upgrade-domains"></a><span data-ttu-id="5d492-283">Rozkład ról domen uaktualnienia</span><span class="sxs-lookup"><span data-stu-id="5d492-283">Distribution of roles across upgrade domains</span></span>
<span data-ttu-id="5d492-284">Azure równomiernie rozdziela wystąpień roli dla pewnej liczby domen uaktualnienia, które można skonfigurować jako część pliku definicji (csdef) hello usługi.</span><span class="sxs-lookup"><span data-stu-id="5d492-284">Azure distributes instances of a role evenly across a set number of upgrade domains, which can be configured as part of hello service definition (.csdef) file.</span></span> <span data-ttu-id="5d492-285">Maksymalna liczba domen uaktualnienia Hello jest 20 i hello domyślna to 5.</span><span class="sxs-lookup"><span data-stu-id="5d492-285">hello max number of upgrade domains is 20 and hello default is 5.</span></span> <span data-ttu-id="5d492-286">Aby uzyskać więcej informacji o sposobie toomodify hello pliku definicji usługi, zobacz [schematu definicji usługi Azure (pliki csdef pliku)](cloud-services-model-and-package.md#csdef).</span><span class="sxs-lookup"><span data-stu-id="5d492-286">For more information about how toomodify hello service definition file, see [Azure Service Definition Schema (.csdef File)](cloud-services-model-and-package.md#csdef).</span></span>

<span data-ttu-id="5d492-287">Na przykład jeśli rola użytkownika ma dziesięć wystąpień, domyślnie każdej z domen zawiera dwa wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="5d492-287">For example, if your role has ten instances, by default each upgrade domain contains two instances.</span></span> <span data-ttu-id="5d492-288">Jeśli rola użytkownika ma 14 wystąpień cztery hello domen uaktualnienia zawiera trzy wystąpienia i piątej domeny zawiera dwa.</span><span class="sxs-lookup"><span data-stu-id="5d492-288">If your role has 14 instances, then four of hello upgrade domains contain three instances, and a fifth domain contains two.</span></span>

<span data-ttu-id="5d492-289">Domen uaktualnienia są oznaczone symbolem liczony od zera indeks: hello pierwszej domeny uaktualnienia ma identyfikator równy 0, a druga domena uaktualnienia hello ma identyfikator równy 1 i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="5d492-289">Upgrade domains are identified with a zero-based index: hello first upgrade domain has an ID of 0, and hello second upgrade domain has an ID of 1, and so on.</span></span>

<span data-ttu-id="5d492-290">Witaj Poniższy diagram przedstawia rozkład usługi niż zawiera dwie role po usługi hello definiuje dwie domeny uaktualnienia.</span><span class="sxs-lookup"><span data-stu-id="5d492-290">hello following diagram illustrates how a service than contains two roles are distributed when hello service defines two upgrade domains.</span></span> <span data-ttu-id="5d492-291">Hello jest uruchomiona osiem wystąpień roli sieci web hello i dziewięć wystąpienia hello roli procesu roboczego.</span><span class="sxs-lookup"><span data-stu-id="5d492-291">hello service is running eight instances of hello web role and nine instances of hello worker role.</span></span>

<span data-ttu-id="5d492-292">![Dystrybucji domen uaktualnienia](media/cloud-services-update-azure-service/IC345533.png "dystrybucji domen uaktualnienia")</span><span class="sxs-lookup"><span data-stu-id="5d492-292">![Distribution of Upgrade Domains](media/cloud-services-update-azure-service/IC345533.png "Distribution of Upgrade Domains")</span></span>

> [!NOTE]
> <span data-ttu-id="5d492-293">Należy pamiętać, że Azure kontroluje sposób przydzielania wystąpień domen uaktualnienia.</span><span class="sxs-lookup"><span data-stu-id="5d492-293">Note that Azure controls how instances are allocated across upgrade domains.</span></span> <span data-ttu-id="5d492-294">Nie jest możliwe toospecify, które wystąpienia są przydzielane toowhich domeny.</span><span class="sxs-lookup"><span data-stu-id="5d492-294">It's not possible toospecify which instances are allocated toowhich domain.</span></span>
>
>

## <a name="next-steps"></a><span data-ttu-id="5d492-295">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="5d492-295">Next steps</span></span>
[<span data-ttu-id="5d492-296">W jaki sposób tooManage usług w chmurze</span><span class="sxs-lookup"><span data-stu-id="5d492-296">How tooManage Cloud Services</span></span>](cloud-services-how-to-manage.md)  
[<span data-ttu-id="5d492-297">W jaki sposób tooMonitor usług w chmurze</span><span class="sxs-lookup"><span data-stu-id="5d492-297">How tooMonitor Cloud Services</span></span>](cloud-services-how-to-monitor.md)  
[<span data-ttu-id="5d492-298">W jaki sposób tooConfigure usług w chmurze</span><span class="sxs-lookup"><span data-stu-id="5d492-298">How tooConfigure Cloud Services</span></span>](cloud-services-how-to-configure.md)  
