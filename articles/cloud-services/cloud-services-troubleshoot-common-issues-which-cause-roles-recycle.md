---
title: "Typowe przyczyny odtwarzanie ról usługi w chmurze | Dokumentacja firmy Microsoft"
description: "Rola usługi chmury, która nagle odtwarzana może spowodować znaczne przestoju. Poniżej przedstawiono niektóre typowe problemy, powodujące ról do odtwarzania, które mogą pomóc w zmniejszeniu przestoju."
services: cloud-services
documentationcenter: 
author: simonxjx
manager: felixwu
editor: 
tags: top-support-issue
ms.assetid: 533930d1-8035-4402-b16a-cf887b2c4f85
ms.service: cloud-services
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: tbd
ms.date: 7/26/2017
ms.author: v-six
ms.openlocfilehash: e55009c72b977ee4a30f6c71043bde483849f78f
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/29/2017
---
# <a name="common-issues-that-cause-roles-to-recycle"></a><span data-ttu-id="d41a9-104">Typowe problemy, które powodują odtwarzanie ról</span><span class="sxs-lookup"><span data-stu-id="d41a9-104">Common issues that cause roles to recycle</span></span>
<span data-ttu-id="d41a9-105">W tym artykule omówiono niektóre typowe przyczyny problemów z wdrażaniem i wskazówki dotyczące rozwiązywania problemów, aby pomóc w rozwiązaniu tych problemów.</span><span class="sxs-lookup"><span data-stu-id="d41a9-105">This article discusses some of the common causes of deployment problems and provides troubleshooting tips to help you resolve these problems.</span></span> <span data-ttu-id="d41a9-106">Wskazanie, że istnieje problem z aplikacją jest, gdy wystąpienie roli nie można uruchomić lub jego przełączanie między Stanami inicjowania zajęty i zatrzymywanie.</span><span class="sxs-lookup"><span data-stu-id="d41a9-106">An indication that a problem exists with an application is when the role instance fails to start, or it cycles between the initializing, busy, and stopping states.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="missing-runtime-dependencies"></a><span data-ttu-id="d41a9-107">Brak zależności środowiska uruchomieniowego</span><span class="sxs-lookup"><span data-stu-id="d41a9-107">Missing runtime dependencies</span></span>
<span data-ttu-id="d41a9-108">Jeśli rola w aplikacji opiera się na dowolnym biblioteki zarządzanej zestawu, który nie jest częścią programu .NET Framework lub platformy Azure, należy jawnie przypisać tego zestawu w pakiecie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d41a9-108">If a role in your application relies on any assembly that is not part of the .NET Framework or the Azure managed library, you must explicitly include that assembly in the application package.</span></span> <span data-ttu-id="d41a9-109">Należy pamiętać, że innych platform firmy Microsoft, nie są dostępne na platformie Azure domyślnie.</span><span class="sxs-lookup"><span data-stu-id="d41a9-109">Keep in mind that other Microsoft frameworks are not available on Azure by default.</span></span> <span data-ttu-id="d41a9-110">Jeśli rola użytkownika opiera się na takie struktury, należy dodać te zestawy do pakietu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d41a9-110">If your role relies on such a framework, you must add those assemblies to the application package.</span></span>

<span data-ttu-id="d41a9-111">Przed kompilacji i pakiet aplikacji należy sprawdzić następujące kwestie:</span><span class="sxs-lookup"><span data-stu-id="d41a9-111">Before you build and package your application, verify the following:</span></span>

* <span data-ttu-id="d41a9-112">Jeśli używasz programu Visual studio, upewnij się, **Kopiuj lokalnie** właściwość jest ustawiona na **True** dla każdego przywoływanego zestawu w projekcie, który nie jest częścią zestawu SDK platformy Azure lub programu .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d41a9-112">If using Visual studio, make sure the **Copy Local** property is set to **True** for each referenced assembly in your project that is not part of the Azure SDK or the .NET Framework.</span></span>
* <span data-ttu-id="d41a9-113">Upewnij się, że plik web.config nie odwołuje się do żadnych zestawów nieużywane w elemencie kompilacji.</span><span class="sxs-lookup"><span data-stu-id="d41a9-113">Make sure the web.config file does not reference any unused assemblies in the compilation element.</span></span>
* <span data-ttu-id="d41a9-114">**Akcja kompilacji** co .cshtml pliku jest ustawiony na wartość **zawartości**.</span><span class="sxs-lookup"><span data-stu-id="d41a9-114">The **Build Action** of every .cshtml file is set to **Content**.</span></span> <span data-ttu-id="d41a9-115">Dzięki temu, że pliki będą wyświetlane poprawnie w pakiecie i umożliwia innych plików mają być widoczne w pakiecie.</span><span class="sxs-lookup"><span data-stu-id="d41a9-115">This ensures that the files will appear correctly in the package and enables other referenced files to appear in the package.</span></span>

## <a name="assembly-targets-wrong-platform"></a><span data-ttu-id="d41a9-116">Zestaw obiektów docelowych nieprawidłowej platformie</span><span class="sxs-lookup"><span data-stu-id="d41a9-116">Assembly targets wrong platform</span></span>
<span data-ttu-id="d41a9-117">Platforma Azure jest 64-bitowego środowiska.</span><span class="sxs-lookup"><span data-stu-id="d41a9-117">Azure is a 64-bit environment.</span></span> <span data-ttu-id="d41a9-118">W związku z tym skompilowany dla elementu docelowego 32-bitowych zestawów platformy .NET nie będzie działać na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="d41a9-118">Therefore, .NET assemblies compiled for a 32-bit target won't work on Azure.</span></span>

## <a name="role-throws-unhandled-exceptions-while-initializing-or-stopping"></a><span data-ttu-id="d41a9-119">Rola zgłasza nieobsługiwanych wyjątków podczas inicjowania lub zatrzymywanie</span><span class="sxs-lookup"><span data-stu-id="d41a9-119">Role throws unhandled exceptions while initializing or stopping</span></span>
<span data-ttu-id="d41a9-120">Wszelkie wyjątki, które są generowane przez metody [RoleEntryPoint] klasy, która obejmuje [OnStart], [OnStop], i [Uruchom] metody, są nieobsługiwane wyjątki.</span><span class="sxs-lookup"><span data-stu-id="d41a9-120">Any exceptions that are thrown by the methods of the [RoleEntryPoint] class, which includes the [OnStart], [OnStop], and [Run] methods, are unhandled exceptions.</span></span> <span data-ttu-id="d41a9-121">Jeśli wystąpi nieobsługiwany wyjątek w jednej z tych metod, odtwarzana w roli.</span><span class="sxs-lookup"><span data-stu-id="d41a9-121">If an unhandled exception occurs in one of these methods, the role will recycle.</span></span> <span data-ttu-id="d41a9-122">Jeśli rola jest odtwarzanie wielokrotnie, może być zgłaszanie Wystąpił nieobsługiwany wyjątek w każdym razem, gdy próbuje uruchomić.</span><span class="sxs-lookup"><span data-stu-id="d41a9-122">If the role is recycling repeatedly, it may be throwing an unhandled exception each time it tries to start.</span></span>

## <a name="role-returns-from-run-method"></a><span data-ttu-id="d41a9-123">Zwraca roli z metoda Run</span><span class="sxs-lookup"><span data-stu-id="d41a9-123">Role returns from Run method</span></span>
<span data-ttu-id="d41a9-124">[Uruchom] metoda jest przeznaczona do działają przez nieograniczony czas.</span><span class="sxs-lookup"><span data-stu-id="d41a9-124">The [Run] method is intended to run indefinitely.</span></span> <span data-ttu-id="d41a9-125">Jeśli kod zastępuje [Uruchom] metody go uśpienia przez nieograniczony czas.</span><span class="sxs-lookup"><span data-stu-id="d41a9-125">If your code overrides the [Run] method, it should sleep indefinitely.</span></span> <span data-ttu-id="d41a9-126">Jeśli [Uruchom] metoda zwróci wartość, odtwarzana roli.</span><span class="sxs-lookup"><span data-stu-id="d41a9-126">If the [Run] method returns, the role recycles.</span></span>

## <a name="incorrect-diagnosticsconnectionstring-setting"></a><span data-ttu-id="d41a9-127">Nieprawidłowe ustawienie DiagnosticsConnectionString</span><span class="sxs-lookup"><span data-stu-id="d41a9-127">Incorrect DiagnosticsConnectionString setting</span></span>
<span data-ttu-id="d41a9-128">Jeśli aplikacja używa diagnostyki Azure, musisz określić plik konfiguracji usługi `DiagnosticsConnectionString` ustawienia konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="d41a9-128">If application uses Azure Diagnostics, your service configuration file must specify the `DiagnosticsConnectionString` configuration setting.</span></span> <span data-ttu-id="d41a9-129">To ustawienie należy określić połączenia HTTPS z kontem magazynu platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="d41a9-129">This setting should specify an HTTPS connection to your storage account in Azure.</span></span>

<span data-ttu-id="d41a9-130">Aby upewnić się, że Twoje `DiagnosticsConnectionString` ustawienia są poprawne, przed wdrożeniem pakietu aplikacji na platformie Azure, sprawdź następujące kwestie:</span><span class="sxs-lookup"><span data-stu-id="d41a9-130">To ensure that your `DiagnosticsConnectionString` setting is correct before you deploy your application package to Azure, verify the following:</span></span>  

* <span data-ttu-id="d41a9-131">`DiagnosticsConnectionString` Ustawienie punktów na prawidłowe konto magazynu na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="d41a9-131">The `DiagnosticsConnectionString` setting points to a valid storage account in Azure.</span></span>  
  <span data-ttu-id="d41a9-132">Domyślnie to ustawienie wskazuje konta magazynu emulowanej, należy jawnie zmienić to ustawienie przed wdrożeniem pakietu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d41a9-132">By default, this setting points to the emulated storage account, so you must explicitly change this setting before you deploy your application package.</span></span> <span data-ttu-id="d41a9-133">Jeśli nie należy zmieniać tego ustawienia, jest wyjątek podczas próby uruchomienia Monitora diagnostycznego wystąpienia roli.</span><span class="sxs-lookup"><span data-stu-id="d41a9-133">If you do not change this setting, an exception is thrown when the role instance attempts to start the diagnostic monitor.</span></span> <span data-ttu-id="d41a9-134">Może to spowodować wystąpienie roli do odtworzenia w nieskończoność.</span><span class="sxs-lookup"><span data-stu-id="d41a9-134">This may cause the role instance to recycle indefinitely.</span></span>
* <span data-ttu-id="d41a9-135">Ciąg połączenia jest określona w następujących [format](../storage/common/storage-configure-connection-string.md).</span><span class="sxs-lookup"><span data-stu-id="d41a9-135">The connection string is specified in the following [format](../storage/common/storage-configure-connection-string.md).</span></span> <span data-ttu-id="d41a9-136">(Protokołu, muszą być określone jako HTTPS). Zastąp *MyAccountName* z nazwą konta magazynu i *MyAccountKey* kluczem dostępu:</span><span class="sxs-lookup"><span data-stu-id="d41a9-136">(The protocol must be specified as HTTPS.) Replace *MyAccountName* with the name of your storage account, and *MyAccountKey* with your access key:</span></span>    

        DefaultEndpointsProtocol=https;AccountName=MyAccountName;AccountKey=MyAccountKey

  <span data-ttu-id="d41a9-137">Jeśli tworzysz aplikację za pomocą narzędzia Azure dla programu Microsoft Visual Studio, można użyć strony właściwości można ustawić tej wartości.</span><span class="sxs-lookup"><span data-stu-id="d41a9-137">If you are developing your application by using Azure Tools for Microsoft Visual Studio, you can use the property pages to set this value.</span></span>

## <a name="exported-certificate-does-not-include-private-key"></a><span data-ttu-id="d41a9-138">Wyeksportowany certyfikat nie zawiera klucza prywatnego</span><span class="sxs-lookup"><span data-stu-id="d41a9-138">Exported certificate does not include private key</span></span>
<span data-ttu-id="d41a9-139">Aby uruchomić rolę sieci web w ramach protokołu SSL, pamiętaj, że zarządzania wyeksportowany certyfikat zawiera klucz prywatny.</span><span class="sxs-lookup"><span data-stu-id="d41a9-139">To run a web role under SSL, you must ensure that your exported management certificate includes the private key.</span></span> <span data-ttu-id="d41a9-140">Jeśli używasz *Menedżera certyfikatów systemu Windows* można wyeksportować certyfikat, pamiętaj o wybraniu **tak** dla **Eksportuj klucz prywatny** opcji.</span><span class="sxs-lookup"><span data-stu-id="d41a9-140">If you use the *Windows Certificate Manager* to export the certificate, be sure to select **Yes** for the **Export the private key** option.</span></span> <span data-ttu-id="d41a9-141">Certyfikat musi być eksportowany w formacie PFX, który jest tylko format obecnie obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="d41a9-141">The certificate must be exported in the PFX format, which is the only format currently supported.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d41a9-142">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="d41a9-142">Next steps</span></span>
<span data-ttu-id="d41a9-143">Wyświetl więcej [Rozwiązywanie problemów z artykułów](https://azure.microsoft.com/documentation/articles/?tag=top-support-issue&product=cloud-services) dla usług w chmurze.</span><span class="sxs-lookup"><span data-stu-id="d41a9-143">View more [troubleshooting articles](https://azure.microsoft.com/documentation/articles/?tag=top-support-issue&product=cloud-services) for cloud services.</span></span>

<span data-ttu-id="d41a9-144">Wyświetl więcej roli odtwarzania scenariusze, w [serii blogu Kevina Williamson](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span><span class="sxs-lookup"><span data-stu-id="d41a9-144">View more role recycling scenarios at [Kevin Williamson's blog series](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span></span>

[RoleEntryPoint]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.aspx
[OnStart]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstart.aspx
[OnStop]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx
[Uruchom]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.run.aspx
