---
title: "aaaCreate odbiornika grupy dostępności programu SQL Server na maszynach wirtualnych platformy Azure | Dokumentacja firmy Microsoft"
description: "Instrukcje krok po kroku dotyczące tworzenia odbiornika dla grupy dostępności AlwaysOn dla programu SQL Server na maszynach wirtualnych Azure"
services: virtual-machines
documentationcenter: na
author: MikeRayMSFT
manager: jhubbard
editor: monicar
ms.assetid: d1f291e9-9af2-41ba-9d29-9541e3adcfcf
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 05/01/2017
ms.author: mikeray
ms.openlocfilehash: c6a44dc5c7c18b572c2bf5772b4651b7210aacbd
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="configure-a-load-balancer-for-an-always-on-availability-group-in-azure"></a><span data-ttu-id="e0ea9-103">Konfigurowanie usługi równoważenia obciążenia zawsze włączonej grupy dostępności na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="e0ea9-103">Configure a load balancer for an Always On availability group in Azure</span></span>
<span data-ttu-id="e0ea9-104">W tym artykule opisano, jak toocreate modułu równoważenia obciążenia dla programu SQL Server zawsze włączone grupy dostępności na platformie Azure wirtualnego maszynami, na których działają z usługą Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-104">This article explains how toocreate a load balancer for a SQL Server Always On availability group in Azure virtual machines that are running with Azure Resource Manager.</span></span> <span data-ttu-id="e0ea9-105">Grupy dostępności wymaga usługi równoważenia obciążenia w przypadku hello wystąpień programu SQL Server na maszynach wirtualnych Azure.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-105">An availability group requires a load balancer when hello SQL Server instances are on Azure virtual machines.</span></span> <span data-ttu-id="e0ea9-106">Moduł równoważenia obciążenia Hello przechowuje hello adresu IP dla odbiornika grupy dostępności hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-106">hello load balancer stores hello IP address for hello availability group listener.</span></span> <span data-ttu-id="e0ea9-107">Jeśli grupy dostępności obejmuje wielu regionach, każdy region musi modułu równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-107">If an availability group spans multiple regions, each region needs a load balancer.</span></span>

<span data-ttu-id="e0ea9-108">toocomplete to zadanie należy toohave wdrożone grupy dostępności programu SQL Server na maszynach wirtualnych Azure, których są uruchomione za pomocą Menedżera zasobów.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-108">toocomplete this task, you need toohave a SQL Server availability group deployed on Azure virtual machines that are running with Resource Manager.</span></span> <span data-ttu-id="e0ea9-109">Maszyny wirtualne zarówno programu SQL Server, trzeba należeć toohello tego samego zestawu dostępności.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-109">Both SQL Server virtual machines must belong toohello same availability set.</span></span> <span data-ttu-id="e0ea9-110">Można użyć hello [szablonów Microsoft](virtual-machines-windows-portal-sql-alwayson-availability-groups.md) tooautomatically utworzyć grupy dostępności hello w Menedżerze zasobów.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-110">You can use hello [Microsoft template](virtual-machines-windows-portal-sql-alwayson-availability-groups.md) tooautomatically create hello availability group in Resource Manager.</span></span> <span data-ttu-id="e0ea9-111">Ten szablon automatycznie utworzy wewnętrznego modułu równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-111">This template automatically creates an internal load balancer for you.</span></span> 

<span data-ttu-id="e0ea9-112">Jeśli wolisz, możesz [ręcznie skonfigurować grupę dostępności](virtual-machines-windows-portal-sql-alwayson-availability-groups-manual.md).</span><span class="sxs-lookup"><span data-stu-id="e0ea9-112">If you prefer, you can [manually configure an availability group](virtual-machines-windows-portal-sql-alwayson-availability-groups-manual.md).</span></span>

<span data-ttu-id="e0ea9-113">W tym artykule wymaga już skonfigurowania grup dostępności.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-113">This article requires that your availability groups are already configured.</span></span>  

<span data-ttu-id="e0ea9-114">Tematy pokrewne obejmują:</span><span class="sxs-lookup"><span data-stu-id="e0ea9-114">Related topics include:</span></span>

* [<span data-ttu-id="e0ea9-115">Konfigurowanie zawsze włączonych grup dostępności maszyny Wirtualnej Azure (GUI)</span><span class="sxs-lookup"><span data-stu-id="e0ea9-115">Configure Always On availability groups in Azure VM (GUI)</span></span>](virtual-machines-windows-portal-sql-alwayson-availability-groups-manual.md)   
* [<span data-ttu-id="e0ea9-116">Konfigurowanie połączenia do wirtualnymi przy użyciu usługi Azure Resource Manager i programu PowerShell</span><span class="sxs-lookup"><span data-stu-id="e0ea9-116">Configure a VNet-to-VNet connection by using Azure Resource Manager and PowerShell</span></span>](../../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md)

<span data-ttu-id="e0ea9-117">Instruktaż w tym artykule, możesz utworzyć i skonfigurowania funkcji równoważenia obciążenia w hello portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-117">By walking through this article, you create and configure a load balancer in hello Azure portal.</span></span> <span data-ttu-id="e0ea9-118">Po ukończeniu procesu hello skonfigurujesz hello adres IP hello toouse klastra z hello modułu równoważenia obciążenia dla odbiornika grupy dostępności hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-118">After hello process is complete, you configure hello cluster toouse hello IP address from hello load balancer for hello availability group listener.</span></span>

## <a name="create-and-configure-hello-load-balancer-in-hello-azure-portal"></a><span data-ttu-id="e0ea9-119">Tworzenie i konfigurowanie usługi równoważenia obciążenia hello w hello portalu Azure</span><span class="sxs-lookup"><span data-stu-id="e0ea9-119">Create and configure hello load balancer in hello Azure portal</span></span>
<span data-ttu-id="e0ea9-120">W tej części zadań hello hello następujące:</span><span class="sxs-lookup"><span data-stu-id="e0ea9-120">In this portion of hello task, do hello following:</span></span>

1. <span data-ttu-id="e0ea9-121">W portalu Azure hello Utwórz hello modułu równoważenia obciążenia i skonfiguruj hello adres IP.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-121">In hello Azure portal, create hello load balancer and configure hello IP address.</span></span>
2. <span data-ttu-id="e0ea9-122">Skonfiguruj pulę zaplecza hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-122">Configure hello back-end pool.</span></span>
3. <span data-ttu-id="e0ea9-123">Utwórz hello sondowania.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-123">Create hello probe.</span></span> 
4. <span data-ttu-id="e0ea9-124">Ustaw reguły równoważenia obciążenia hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-124">Set hello load balancing rules.</span></span>

> [!NOTE]
> <span data-ttu-id="e0ea9-125">Jeśli hello wystąpień programu SQL Server znajdują się w wielu grup zasobów i regionów, wykonać każdy krok dwa razy, raz w każdej grupie zasobów.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-125">If hello SQL Server instances are in multiple resource groups and regions, perform each step twice, once in each resource group.</span></span>
> 
> 

### <a name="step-1-create-hello-load-balancer-and-configure-hello-ip-address"></a><span data-ttu-id="e0ea9-126">Krok 1: Tworzenie usługi równoważenia obciążenia hello i skonfiguruj hello adres IP</span><span class="sxs-lookup"><span data-stu-id="e0ea9-126">Step 1: Create hello load balancer and configure hello IP address</span></span>
<span data-ttu-id="e0ea9-127">Najpierw utwórz hello modułu równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-127">First, create hello load balancer.</span></span> 

1. <span data-ttu-id="e0ea9-128">Hello portalu Azure Otwórz hello grupę zasobów, która zawiera maszyny wirtualne hello programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-128">In hello Azure portal, open hello resource group that contains hello SQL Server virtual machines.</span></span> 

2. <span data-ttu-id="e0ea9-129">Witaj w grupie zasobów, kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-129">In hello resource group, click **Add**.</span></span>

3. <span data-ttu-id="e0ea9-130">Wyszukaj **modułu równoważenia obciążenia** , a następnie w wynikach wyszukiwania hello, wybierz **moduł równoważenia obciążenia**, opublikowana przez **Microsoft**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-130">Search for **load balancer** and then, in hello search results, select **Load Balancer**, which is published by **Microsoft**.</span></span>

4. <span data-ttu-id="e0ea9-131">Na powitania **modułu równoważenia obciążenia** bloku, kliknij przycisk **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-131">On hello **Load Balancer** blade, click **Create**.</span></span>

5. <span data-ttu-id="e0ea9-132">W hello **modułu równoważenia obciążenia Utwórz** okna dialogowego Skonfiguruj hello modułu równoważenia obciążenia w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="e0ea9-132">In hello **Create load balancer** dialog box, configure hello load balancer as follows:</span></span>

   | <span data-ttu-id="e0ea9-133">Ustawienie</span><span class="sxs-lookup"><span data-stu-id="e0ea9-133">Setting</span></span> | <span data-ttu-id="e0ea9-134">Wartość</span><span class="sxs-lookup"><span data-stu-id="e0ea9-134">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="e0ea9-135">**Nazwa**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-135">**Name**</span></span> |<span data-ttu-id="e0ea9-136">Nazwa tekst reprezentujący hello modułu równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-136">A text name representing hello load balancer.</span></span> <span data-ttu-id="e0ea9-137">Na przykład **sqlLB**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-137">For example, **sqlLB**.</span></span> |
   | <span data-ttu-id="e0ea9-138">**Typ**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-138">**Type**</span></span> |<span data-ttu-id="e0ea9-139">**Wewnętrzny**: większości wdrożeń używać wewnętrznego modułu równoważenia obciążenia, dzięki czemu aplikacji w obrębie hello tej samej sieci wirtualnej tooconnect toohello grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-139">**Internal**: Most implementations use an internal load balancer, which allows applications within hello same virtual network tooconnect toohello availability group.</span></span>  </br> <span data-ttu-id="e0ea9-140">**Zewnętrzne**: umożliwia aplikacji tooconnect toohello dostępności grupy za pośrednictwem publicznego połączenia internetowego.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-140">**External**: Allows applications tooconnect toohello availability group through a public Internet connection.</span></span> |
   | <span data-ttu-id="e0ea9-141">**Sieć wirtualna**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-141">**Virtual network**</span></span> |<span data-ttu-id="e0ea9-142">Wybierz hello sieci wirtualnej hello intances programu SQL Server znajdują się w.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-142">Select hello virtual network that hello SQL Server intances are in.</span></span> |
   | <span data-ttu-id="e0ea9-143">**Podsieć**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-143">**Subnet**</span></span> |<span data-ttu-id="e0ea9-144">Wybierz podsieć hello hello wystąpień programu SQL Server znajdują się w.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-144">Select hello subnet that hello SQL Server instances are in.</span></span> |
   | <span data-ttu-id="e0ea9-145">**Przypisywanie adresów IP**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-145">**IP address assignment**</span></span> |<span data-ttu-id="e0ea9-146">**Statyczne**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-146">**Static**</span></span> |
   | <span data-ttu-id="e0ea9-147">**Prywatny adres IP**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-147">**Private IP address**</span></span> |<span data-ttu-id="e0ea9-148">Podaj dostępny adres IP z podsieci hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-148">Specify an available IP address from hello subnet.</span></span> <span data-ttu-id="e0ea9-149">Podczas tworzenia klastra hello odbiornik, należy użyć tego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-149">Use this IP address when you create a listener on hello cluster.</span></span> <span data-ttu-id="e0ea9-150">W skrypcie programu PowerShell w dalszej części tego artykułu, użyj tego samego adresu dla hello `$ILBIP` zmiennej.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-150">In a PowerShell script, later in this article, use this address for hello `$ILBIP` variable.</span></span> |
   | <span data-ttu-id="e0ea9-151">**Subskrypcja**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-151">**Subscription**</span></span> |<span data-ttu-id="e0ea9-152">Jeśli masz wiele subskrypcji, w tym polu może być wyświetlany.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-152">If you have multiple subscriptions, this field might appear.</span></span> <span data-ttu-id="e0ea9-153">Wybierz subskrypcję hello, które mają tooassociate z tego zasobu.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-153">Select hello subscription that you want tooassociate with this resource.</span></span> <span data-ttu-id="e0ea9-154">Jego jest zwykle hello tej samej subskrypcji wszystkich zasobów hello hello grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-154">It is normally hello same subscription as all hello resources for hello availability group.</span></span> |
   | <span data-ttu-id="e0ea9-155">**Grupa zasobów**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-155">**Resource group**</span></span> |<span data-ttu-id="e0ea9-156">Wybierz grupę zasobów hello hello wystąpień programu SQL Server znajdują się w.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-156">Select hello resource group that hello SQL Server instances are in.</span></span> |
   | <span data-ttu-id="e0ea9-157">**Lokalizacja**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-157">**Location**</span></span> |<span data-ttu-id="e0ea9-158">Wybierz hello Azure hello wystąpień programu SQL Server znajdują się w lokalizacji.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-158">Select hello Azure location that hello SQL Server instances are in.</span></span> |

6. <span data-ttu-id="e0ea9-159">Kliknij przycisk **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-159">Click **Create**.</span></span> 

<span data-ttu-id="e0ea9-160">Platforma Azure tworzy hello modułu równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-160">Azure creates hello load balancer.</span></span> <span data-ttu-id="e0ea9-161">Moduł równoważenia obciążenia Hello należy tooa określoną sieć, podsieci, lokalizacji i grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-161">hello load balancer belongs tooa specific network, subnet, resource group, and location.</span></span> <span data-ttu-id="e0ea9-162">Po zakończeniu zadania hello Azure Sprawdź ustawienia usługi równoważenia obciążenia hello na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-162">After Azure completes hello task, verify hello load balancer settings in Azure.</span></span> 

### <a name="step-2-configure-hello-back-end-pool"></a><span data-ttu-id="e0ea9-163">Krok 2: Konfigurowanie puli zaplecza hello</span><span class="sxs-lookup"><span data-stu-id="e0ea9-163">Step 2: Configure hello back-end pool</span></span>
<span data-ttu-id="e0ea9-164">Pula adresów zaplecza hello Azure wywołania *puli zaplecza*.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-164">Azure calls hello back-end address pool *backend pool*.</span></span> <span data-ttu-id="e0ea9-165">W takim przypadku pula zaplecza hello jest adresy hello hello dwóch wystąpień programu SQL Server w grupie dostępności.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-165">In this case, hello back-end pool is hello addresses of hello two SQL Server instances in your availability group.</span></span> 

1. <span data-ttu-id="e0ea9-166">W grupie zasobów kliknij przycisk hello równoważenia obciążenia, który został utworzony.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-166">In your resource group, click hello load balancer that you created.</span></span> 

2. <span data-ttu-id="e0ea9-167">Na **ustawienia**, kliknij przycisk **pul zaplecza**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-167">On **Settings**, click **Backend pools**.</span></span>

3. <span data-ttu-id="e0ea9-168">Na **pul zaplecza**, kliknij przycisk **Dodaj** toocreate puli adresów zaplecza.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-168">On **Backend pools**, click **Add** toocreate a back-end address pool.</span></span> 

4. <span data-ttu-id="e0ea9-169">Na **Dodaj pulę zaplecza**w obszarze **nazwa**, wpisz nazwę puli zaplecza hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-169">On **Add backend pool**, under **Name**, type a name for hello back-end pool.</span></span>

5. <span data-ttu-id="e0ea9-170">W obszarze **maszyn wirtualnych**, kliknij przycisk **Dodaj maszynę wirtualną**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-170">Under **Virtual machines**, click **Add a virtual machine**.</span></span> 

6. <span data-ttu-id="e0ea9-171">W obszarze **wybierz maszyny wirtualne**, kliknij przycisk **wybierz zestaw dostępności**, a następnie określ, że maszyny wirtualne hello programu SQL Server należy do zestawu danych o dostępności hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-171">Under **Choose virtual machines**, click **Choose an availability set**, and then specify hello availability set that hello SQL Server virtual machines belong to.</span></span>

7. <span data-ttu-id="e0ea9-172">Po wybraniu zestawu dostępności powitania kliknij **wybierz maszyny wirtualne hello**, wybierz Witaj dwie maszyny wirtualne, które hello wystąpień programu SQL Server w grupie dostępności hello hosta, a następnie kliknij przycisk **wybierz**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-172">After you have chosen hello availability set, click **Choose hello virtual machines**, select hello two virtual machines that host hello SQL Server instances in hello availability group, and then click **Select**.</span></span> 

8. <span data-ttu-id="e0ea9-173">Kliknij przycisk **OK** tooclose hello bloków dla **wybierz maszyny wirtualne**, i **Dodaj pulę zaplecza**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-173">Click **OK** tooclose hello blades for **Choose virtual machines**, and **Add backend pool**.</span></span> 

<span data-ttu-id="e0ea9-174">Azure aktualizuje ustawienia hello hello puli adresów zaplecza.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-174">Azure updates hello settings for hello back-end address pool.</span></span> <span data-ttu-id="e0ea9-175">Zestaw dostępności ma teraz puli dwa wystąpienia programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-175">Now your availability set has a pool of two SQL Server instances.</span></span>

### <a name="step-3-create-a-probe"></a><span data-ttu-id="e0ea9-176">Krok 3: Tworzenie sondę</span><span class="sxs-lookup"><span data-stu-id="e0ea9-176">Step 3: Create a probe</span></span>
<span data-ttu-id="e0ea9-177">Sonda Hello definiuje sposób Azure sprawdza, które hello wystąpień programu SQL Server jest bieżącym właścicielem odbiornika grupy dostępności hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-177">hello probe defines how Azure verifies which of hello SQL Server instances currently owns hello availability group listener.</span></span> <span data-ttu-id="e0ea9-178">Azure sondy hello usługi na podstawie adresu IP hello na porcie definiowany podczas tworzenia hello sondowania.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-178">Azure probes hello service based on hello IP address on a port that you define when you create hello probe.</span></span>

1. <span data-ttu-id="e0ea9-179">Moduł równoważenia obciążenia na powitania **ustawienia** bloku, kliknij przycisk **sondy kondycji**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-179">On hello load balancer **Settings** blade, click **Health probes**.</span></span> 

2. <span data-ttu-id="e0ea9-180">Na powitania **sondy kondycji** bloku, kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-180">On hello **Health probes** blade, click **Add**.</span></span>

3. <span data-ttu-id="e0ea9-181">Skonfiguruj sondowania hello na powitania **sondowania Dodaj** bloku.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-181">Configure hello probe on hello **Add probe** blade.</span></span> <span data-ttu-id="e0ea9-182">Użyj hello następujące wartości tooconfigure hello sondowania:</span><span class="sxs-lookup"><span data-stu-id="e0ea9-182">Use hello following values tooconfigure hello probe:</span></span>

   | <span data-ttu-id="e0ea9-183">Ustawienie</span><span class="sxs-lookup"><span data-stu-id="e0ea9-183">Setting</span></span> | <span data-ttu-id="e0ea9-184">Wartość</span><span class="sxs-lookup"><span data-stu-id="e0ea9-184">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="e0ea9-185">**Nazwa**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-185">**Name**</span></span> |<span data-ttu-id="e0ea9-186">Nazwa tekst reprezentujący hello sondowania.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-186">A text name representing hello probe.</span></span> <span data-ttu-id="e0ea9-187">Na przykład **SQLAlwaysOnEndPointProbe**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-187">For example, **SQLAlwaysOnEndPointProbe**.</span></span> |
   | <span data-ttu-id="e0ea9-188">**Protokół**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-188">**Protocol**</span></span> |<span data-ttu-id="e0ea9-189">**TCP**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-189">**TCP**</span></span> |
   | <span data-ttu-id="e0ea9-190">**Port**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-190">**Port**</span></span> |<span data-ttu-id="e0ea9-191">Umożliwia dowolny dostępny port.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-191">You can use any available port.</span></span> <span data-ttu-id="e0ea9-192">Na przykład *59999*.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-192">For example, *59999*.</span></span> |
   | <span data-ttu-id="e0ea9-193">**Interwał**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-193">**Interval**</span></span> |<span data-ttu-id="e0ea9-194">*5*</span><span class="sxs-lookup"><span data-stu-id="e0ea9-194">*5*</span></span> |
   | <span data-ttu-id="e0ea9-195">**Próg złej kondycji**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-195">**Unhealthy threshold**</span></span> |<span data-ttu-id="e0ea9-196">*2*</span><span class="sxs-lookup"><span data-stu-id="e0ea9-196">*2*</span></span> |

4.  <span data-ttu-id="e0ea9-197">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-197">Click **OK**.</span></span> 

> [!NOTE]
> <span data-ttu-id="e0ea9-198">Upewnij się, że port hello określony jest otwarty na zaporze hello obu wystąpień programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-198">Make sure that hello port you specify is open on hello firewall of both SQL Server instances.</span></span> <span data-ttu-id="e0ea9-199">Oba wystąpienia wymagają regułę ruchu przychodzącego dla portu TCP, którego używasz hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-199">Both instances require an inbound rule for hello TCP port that you use.</span></span> <span data-ttu-id="e0ea9-200">Aby uzyskać więcej informacji, zobacz [Dodawanie lub edytowanie reguły zapory](http://technet.microsoft.com/library/cc753558.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0ea9-200">For more information, see [Add or Edit Firewall Rule](http://technet.microsoft.com/library/cc753558.aspx).</span></span> 
> 
> 

<span data-ttu-id="e0ea9-201">Azure tworzy badanie hello i używa go po wystąpieniu programu SQL Server, z którym ma hello odbiornika dla grupy dostępności hello tootest.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-201">Azure creates hello probe and then uses it tootest which SQL Server instance has hello listener for hello availability group.</span></span>

### <a name="step-4-set-hello-load-balancing-rules"></a><span data-ttu-id="e0ea9-202">Krok 4: Ustaw reguły równoważenia obciążenia hello</span><span class="sxs-lookup"><span data-stu-id="e0ea9-202">Step 4: Set hello load balancing rules</span></span>
<span data-ttu-id="e0ea9-203">reguły równoważenia obciążenia Hello skonfigurować sposób hello load balancer kieruje wystąpień programu SQL Server toohello ruchu.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-203">hello load balancing rules configure how hello load balancer routes traffic toohello SQL Server instances.</span></span> <span data-ttu-id="e0ea9-204">Ten moduł równoważenia obciążenia istnieje, włączyć bezpośredni zwrot serwera ponieważ tylko jeden z dwóch wystąpień programu SQL Server hello jest właścicielem zasobu odbiornika grupy dostępności hello naraz.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-204">For this load balancer, you enable direct server return because only one of hello two SQL Server instances owns hello availability group listener resource at a time.</span></span>

1. <span data-ttu-id="e0ea9-205">Moduł równoważenia obciążenia na powitania **ustawienia** bloku, kliknij przycisk **reguły równoważenia obciążenia**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-205">On hello load balancer **Settings** blade, click **Load balancing rules**.</span></span> 

2. <span data-ttu-id="e0ea9-206">Na powitania **reguły równoważenia obciążenia** bloku, kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-206">On hello **Load balancing rules** blade, click **Add**.</span></span>

3. <span data-ttu-id="e0ea9-207">Na powitania **reguły równoważenia obciążenia Dodaj** bloku, skonfiguruj regułę równoważenia obciążenia hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-207">On hello **Add load balancing rules** blade, configure hello load balancing rule.</span></span> <span data-ttu-id="e0ea9-208">Użyj hello następujące ustawienia:</span><span class="sxs-lookup"><span data-stu-id="e0ea9-208">Use hello following settings:</span></span> 

   | <span data-ttu-id="e0ea9-209">Ustawienie</span><span class="sxs-lookup"><span data-stu-id="e0ea9-209">Setting</span></span> | <span data-ttu-id="e0ea9-210">Wartość</span><span class="sxs-lookup"><span data-stu-id="e0ea9-210">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="e0ea9-211">**Nazwa**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-211">**Name**</span></span> |<span data-ttu-id="e0ea9-212">Nazwa tekst reprezentujący reguły równoważenia obciążenia hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-212">A text name representing hello load balancing rules.</span></span> <span data-ttu-id="e0ea9-213">Na przykład **SQLAlwaysOnEndPointListener**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-213">For example, **SQLAlwaysOnEndPointListener**.</span></span> |
   | <span data-ttu-id="e0ea9-214">**Protokół**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-214">**Protocol**</span></span> |<span data-ttu-id="e0ea9-215">**TCP**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-215">**TCP**</span></span> |
   | <span data-ttu-id="e0ea9-216">**Port**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-216">**Port**</span></span> |<span data-ttu-id="e0ea9-217">*1433*</span><span class="sxs-lookup"><span data-stu-id="e0ea9-217">*1433*</span></span> |
   | <span data-ttu-id="e0ea9-218">**Port zaplecza**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-218">**Backend Port**</span></span> |<span data-ttu-id="e0ea9-219">*1433*. Ta wartość jest ignorowana, ponieważ ta zasada używa **pływającego adresu IP (bezpośredni zwrot serwera)**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-219">*1433*. This value is ignored because this rule uses **Floating IP (direct server return)**.</span></span> |
   | <span data-ttu-id="e0ea9-220">**Sondy**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-220">**Probe**</span></span> |<span data-ttu-id="e0ea9-221">Użyj nazwy hello hello sondy utworzonego dla tej usługi równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-221">Use hello name of hello probe that you created for this load balancer.</span></span> |
   | <span data-ttu-id="e0ea9-222">**Trwałość sesji**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-222">**Session persistence**</span></span> |<span data-ttu-id="e0ea9-223">**Brak**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-223">**None**</span></span> |
   | <span data-ttu-id="e0ea9-224">**Limit czasu bezczynności (w minutach)**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-224">**Idle timeout (minutes)**</span></span> |<span data-ttu-id="e0ea9-225">*4*</span><span class="sxs-lookup"><span data-stu-id="e0ea9-225">*4*</span></span> |
   | <span data-ttu-id="e0ea9-226">**Zmienny adres IP (bezpośredni zwrot serwera)**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-226">**Floating IP (direct server return)**</span></span> |<span data-ttu-id="e0ea9-227">**Włączone**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-227">**Enabled**</span></span> |

   > [!NOTE]
   > <span data-ttu-id="e0ea9-228">Konieczne może być wszystkie ustawienia hello tooscroll dół hello tooview bloku.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-228">You might have tooscroll down hello blade tooview all hello settings.</span></span>
   > 

4. <span data-ttu-id="e0ea9-229">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-229">Click **OK**.</span></span> 
5. <span data-ttu-id="e0ea9-230">Azure konfiguruje reguły równoważenia obciążenia hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-230">Azure configures hello load balancing rule.</span></span> <span data-ttu-id="e0ea9-231">Teraz hello modułu równoważenia obciążenia jest wystąpienie programu SQL Server toohello ruchu tooroute skonfigurowany, obsługującym hello odbiornika dla grupy dostępności hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-231">Now hello load balancer is configured tooroute traffic toohello SQL Server instance that hosts hello listener for hello availability group.</span></span> 

<span data-ttu-id="e0ea9-232">W tym momencie hello grupa zasobów ma równoważenia obciążenia, który łączy tooboth maszyny programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-232">At this point, hello resource group has a load balancer that connects tooboth SQL Server machines.</span></span> <span data-ttu-id="e0ea9-233">usługi równoważenia obciążenia Hello zawiera także adresu IP hello programu SQL Server AlwaysOn odbiornika grupy dostępności, dzięki czemu maszyna może odpowiadać toorequests dla grup dostępności hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-233">hello load balancer also contains an IP address for hello SQL Server Always On availability group listener, so that either machine can respond toorequests for hello availability groups.</span></span>

> [!NOTE]
> <span data-ttu-id="e0ea9-234">W przypadku wystąpienia programu SQL Server w dwóch oddzielnych regionach, powtórz kroki hello w hello inny region.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-234">If your SQL Server instances are in two separate regions, repeat hello steps in hello other region.</span></span> <span data-ttu-id="e0ea9-235">Każdy region wymaga usługi równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-235">Each region requires a load balancer.</span></span> 
> 
> 

## <a name="configure-hello-cluster-toouse-hello-load-balancer-ip-address"></a><span data-ttu-id="e0ea9-236">Skonfiguruj adres IP usługi równoważenia obciążenia hello hello klastra toouse</span><span class="sxs-lookup"><span data-stu-id="e0ea9-236">Configure hello cluster toouse hello load balancer IP address</span></span>
<span data-ttu-id="e0ea9-237">następnym krokiem Hello odbiornik hello tooconfigure w klastrze hello, a następnie przełącz odbiornika hello w trybie online.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-237">hello next step is tooconfigure hello listener on hello cluster, and bring hello listener online.</span></span> <span data-ttu-id="e0ea9-238">Witaj, po:</span><span class="sxs-lookup"><span data-stu-id="e0ea9-238">Do hello following:</span></span> 

1. <span data-ttu-id="e0ea9-239">Tworzenie odbiornika grupy dostępności hello na powitania klastra pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-239">Create hello availability group listener on hello failover cluster.</span></span> 

2. <span data-ttu-id="e0ea9-240">Przełącz odbiornika hello w trybie online.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-240">Bring hello listener online.</span></span>

### <a name="step-5-create-hello-availability-group-listener-on-hello-failover-cluster"></a><span data-ttu-id="e0ea9-241">Krok 5: Tworzenie odbiornika grupy dostępności hello w klastrze trybu failover hello</span><span class="sxs-lookup"><span data-stu-id="e0ea9-241">Step 5: Create hello availability group listener on hello failover cluster</span></span>
<span data-ttu-id="e0ea9-242">W tym kroku ręcznie utworzyć hello odbiornika grupy dostępności w Menedżerze klastra trybu Failover i SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-242">In this step, you manually create hello availability group listener in Failover Cluster Manager and SQL Server Management Studio.</span></span>

[!INCLUDE [ag-listener-configure](../../../../includes/virtual-machines-ag-listener-configure.md)]

### <a name="verify-hello-configuration-of-hello-listener"></a><span data-ttu-id="e0ea9-243">Sprawdź konfigurację hello hello odbiornika</span><span class="sxs-lookup"><span data-stu-id="e0ea9-243">Verify hello configuration of hello listener</span></span>

<span data-ttu-id="e0ea9-244">Zasoby klastra hello i zależności są poprawnie skonfigurowane, należy tooview stanie hello odbiornika w programie SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-244">If hello cluster resources and dependencies are correctly configured, you should be able tooview hello listener in SQL Server Management Studio.</span></span> <span data-ttu-id="e0ea9-245">tooset hello port odbiornika, hello następujące:</span><span class="sxs-lookup"><span data-stu-id="e0ea9-245">tooset hello listener port, do hello following:</span></span>

1. <span data-ttu-id="e0ea9-246">Uruchom program SQL Server Management Studio, a następnie połącz toohello repliki podstawowej.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-246">Start SQL Server Management Studio, and then connect toohello primary replica.</span></span>

2. <span data-ttu-id="e0ea9-247">Przejdź za**wysokiej dostępności funkcji AlwaysOn** > **grup dostępności** > **odbiorniki grupy dostępności**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-247">Go too**AlwaysOn High Availability** > **Availability Groups** > **Availability Group Listeners**.</span></span>  
    <span data-ttu-id="e0ea9-248">Powinna zostać wyświetlona nazwa odbiornika hello utworzonego w Menedżerze klastra trybu Failover.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-248">You should now see hello listener name that you created in Failover Cluster Manager.</span></span> 

3. <span data-ttu-id="e0ea9-249">Kliknij prawym przyciskiem myszy nazwę odbiornika hello, a następnie kliknij przycisk **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-249">Right-click hello listener name, and then click **Properties**.</span></span>

4. <span data-ttu-id="e0ea9-250">W hello **portu** Określ numer portu odbiornika grupy dostępności hello hello przy użyciu hello $EndpointPort używany w starszych (1433 była hello domyślna), a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-250">In hello **Port** box, specify hello port number for hello availability group listener by using hello $EndpointPort you used earlier (1433 was hello default), and then click **OK**.</span></span>

<span data-ttu-id="e0ea9-251">Masz teraz grupy dostępności na maszynach wirtualnych Azure działających w trybie Menedżera zasobów.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-251">You now have an availability group in Azure virtual machines running in Resource Manager mode.</span></span> 

## <a name="test-hello-connection-toohello-listener"></a><span data-ttu-id="e0ea9-252">Odbiornik toohello połączenia hello testu</span><span class="sxs-lookup"><span data-stu-id="e0ea9-252">Test hello connection toohello listener</span></span>
<span data-ttu-id="e0ea9-253">Testuj połączenie hello hello następujący:</span><span class="sxs-lookup"><span data-stu-id="e0ea9-253">Test hello connection by doing hello following:</span></span>

1. <span data-ttu-id="e0ea9-254">Wystąpienie programu SQL Server tooa RDP, który znajduje się w hello sam wirtualnych sieci, ale nie nie własnych hello repliki.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-254">RDP tooa SQL Server instance that is in hello same virtual network, but does not own hello replica.</span></span> <span data-ttu-id="e0ea9-255">Ten serwer może hello inne wystąpienie programu SQL Server w klastrze hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-255">This server can be hello other SQL Server instance in hello cluster.</span></span>

2. <span data-ttu-id="e0ea9-256">Użyj **sqlcmd** narzędzie tootest hello połączenia.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-256">Use **sqlcmd** utility tootest hello connection.</span></span> <span data-ttu-id="e0ea9-257">Na przykład ustanawia hello następującego skryptu **sqlcmd** repliki podstawowej toohello połączenia za pośrednictwem hello odbiornika z uwierzytelnianiem systemu Windows:</span><span class="sxs-lookup"><span data-stu-id="e0ea9-257">For example, hello following script establishes a **sqlcmd** connection toohello primary replica through hello listener with Windows authentication:</span></span>
   
        sqlcmd -S <listenerName> -E

<span data-ttu-id="e0ea9-258">Witaj połączenia SQLCMD automatycznie łączy toohello wystąpienia programu SQL Server, który obsługuje replikę podstawową hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-258">hello SQLCMD connection automatically connects toohello SQL Server instance that hosts hello primary replica.</span></span> 

## <a name="create-an-ip-address-for-an-additional-availability-group"></a><span data-ttu-id="e0ea9-259">Utwórz adres IP dla grupy dostępności dodatkowe</span><span class="sxs-lookup"><span data-stu-id="e0ea9-259">Create an IP address for an additional availability group</span></span>

<span data-ttu-id="e0ea9-260">Każda grupa dostępności używa oddzielnych odbiornika.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-260">Each availability group uses a separate listener.</span></span> <span data-ttu-id="e0ea9-261">Każdy odbiornika ma swój własny adres IP.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-261">Each listener has its own IP address.</span></span> <span data-ttu-id="e0ea9-262">Użyj hello sam załadować adres IP hello toohold równoważenia dla dodatkowych odbiorników.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-262">Use hello same load balancer toohold hello IP address for additional listeners.</span></span> <span data-ttu-id="e0ea9-263">Po utworzeniu grupy dostępności, Dodaj usługi równoważenia obciążenia toohello adres IP hello, a następnie skonfiguruj hello odbiornika.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-263">After you create an availability group, add hello IP address toohello load balancer, and then configure hello listener.</span></span>

<span data-ttu-id="e0ea9-264">tooadd IP address tooa modułu równoważenia obciążenia z hello portalu Azure, hello następujące:</span><span class="sxs-lookup"><span data-stu-id="e0ea9-264">tooadd an IP address tooa load balancer with hello Azure portal, do hello following:</span></span>

1. <span data-ttu-id="e0ea9-265">W portalu Azure hello Otwórz hello grupę zasobów, która zawiera hello modułu równoważenia obciążenia, a następnie kliknij hello modułu równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-265">In hello Azure portal, open hello resource group that contains hello load balancer, and then click hello load balancer.</span></span> 

2. <span data-ttu-id="e0ea9-266">W obszarze **ustawienia**, kliknij przycisk **puli adresów IP frontonu**, a następnie kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-266">Under **SETTINGS**, click **Frontend IP pool**, and then click **Add**.</span></span> 

3. <span data-ttu-id="e0ea9-267">W obszarze **Dodaj adres IP frontonu**, Przypisz nazwę hello frontonu.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-267">Under **Add frontend IP address**, assign a name for hello front end.</span></span> 

4. <span data-ttu-id="e0ea9-268">Sprawdź, że hello **sieci wirtualnej** i hello **podsieci** są hello tak samo jak hello wystąpień programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-268">Verify that hello **Virtual network** and hello **Subnet** are hello same as hello SQL Server instances.</span></span>

5. <span data-ttu-id="e0ea9-269">Ustawienie hello adresu IP dla odbiornika hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-269">Set hello IP address for hello listener.</span></span> 
   
   >[!TIP]
   ><span data-ttu-id="e0ea9-270">Można ustawić toostatic adres IP hello i wpisz adres, który nie jest obecnie używana w hello podsieci.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-270">You can set hello IP address toostatic and type an address that is not currently used in hello subnet.</span></span> <span data-ttu-id="e0ea9-271">Alternatywnie można ustawić toodynamic adres IP hello i zapisać puli nowego adresu IP frontonu hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-271">Alternatively, you can set hello IP address toodynamic and save hello new front-end IP pool.</span></span> <span data-ttu-id="e0ea9-272">Po wykonaniu tej hello portalu Azure automatycznie przypisuje dostępną pulę toohello adresów IP.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-272">When you do so, hello Azure portal automatically assigns an available IP address toohello pool.</span></span> <span data-ttu-id="e0ea9-273">Następnie można ponownie otworzyć puli adresów IP frontonu hello i zmienić hello toostatic przypisania.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-273">You can then reopen hello front-end IP pool and change hello assignment toostatic.</span></span> 

6. <span data-ttu-id="e0ea9-274">Zapisz hello adresu IP dla odbiornika hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-274">Save hello IP address for hello listener.</span></span> 

7. <span data-ttu-id="e0ea9-275">Dodaj sondy kondycji za pomocą hello następujące ustawienia:</span><span class="sxs-lookup"><span data-stu-id="e0ea9-275">Add a health probe by using hello following settings:</span></span>

   |<span data-ttu-id="e0ea9-276">Ustawienie</span><span class="sxs-lookup"><span data-stu-id="e0ea9-276">Setting</span></span> |<span data-ttu-id="e0ea9-277">Wartość</span><span class="sxs-lookup"><span data-stu-id="e0ea9-277">Value</span></span>
   |:-----|:----
   |<span data-ttu-id="e0ea9-278">**Nazwa**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-278">**Name**</span></span> |<span data-ttu-id="e0ea9-279">Badanie hello tooidentify nazwy.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-279">A name tooidentify hello probe.</span></span>
   |<span data-ttu-id="e0ea9-280">**Protokół**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-280">**Protocol**</span></span> |<span data-ttu-id="e0ea9-281">TCP</span><span class="sxs-lookup"><span data-stu-id="e0ea9-281">TCP</span></span>
   |<span data-ttu-id="e0ea9-282">**Port**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-282">**Port**</span></span> |<span data-ttu-id="e0ea9-283">Nieużywany port TCP, które muszą być dostępne na wszystkich maszynach wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-283">An unused TCP port, which must be available on all virtual machines.</span></span> <span data-ttu-id="e0ea9-284">Nie można używać do innych celów.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-284">It cannot be used for any other purpose.</span></span> <span data-ttu-id="e0ea9-285">Nie dwa odbiorniki służy hello sam sondowania portu.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-285">No two listeners can use hello same probe port.</span></span> 
   |<span data-ttu-id="e0ea9-286">**Interwał**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-286">**Interval**</span></span> |<span data-ttu-id="e0ea9-287">próbuje Hello ilość czasu między sondowania.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-287">hello amount of time between probe attempts.</span></span> <span data-ttu-id="e0ea9-288">Użyj domyślnej hello [5].</span><span class="sxs-lookup"><span data-stu-id="e0ea9-288">Use hello default (5).</span></span>
   |<span data-ttu-id="e0ea9-289">**Próg złej kondycji**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-289">**Unhealthy threshold**</span></span> |<span data-ttu-id="e0ea9-290">Liczba Hello kolejnych progów, które powinno zakończyć się niepowodzeniem przed maszyny wirtualnej jest określana jako zła.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-290">hello number of consecutive thresholds that should fail before a virtual machine is considered unhealthy.</span></span>

8. <span data-ttu-id="e0ea9-291">Kliknij przycisk **OK** toosave hello sondowania.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-291">Click **OK** toosave hello probe.</span></span> 

9. <span data-ttu-id="e0ea9-292">Utwórz regułę równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-292">Create a load balancing rule.</span></span> <span data-ttu-id="e0ea9-293">Kliknij przycisk **reguły równoważenia obciążenia**, a następnie kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-293">Click **Load balancing rules**, and then click **Add**.</span></span>

10. <span data-ttu-id="e0ea9-294">Skonfiguruj hello nowe równoważenia obciążenia reguły za pomocą hello następujące ustawienia:</span><span class="sxs-lookup"><span data-stu-id="e0ea9-294">Configure hello new load balancing rule by using hello following settings:</span></span>

   |<span data-ttu-id="e0ea9-295">Ustawienie</span><span class="sxs-lookup"><span data-stu-id="e0ea9-295">Setting</span></span> |<span data-ttu-id="e0ea9-296">Wartość</span><span class="sxs-lookup"><span data-stu-id="e0ea9-296">Value</span></span>
   |:-----|:----
   |<span data-ttu-id="e0ea9-297">**Nazwa**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-297">**Name**</span></span> |<span data-ttu-id="e0ea9-298">Witaj tooidentify nazwa załadować reguły równoważenia.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-298">A name tooidentify hello load balancing rule.</span></span> 
   |<span data-ttu-id="e0ea9-299">**Adres IP frontonu**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-299">**Frontend IP address**</span></span> |<span data-ttu-id="e0ea9-300">Wybierz hello adresu IP, który został utworzony.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-300">Select hello IP address you created.</span></span> 
   |<span data-ttu-id="e0ea9-301">**Protokół**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-301">**Protocol**</span></span> |<span data-ttu-id="e0ea9-302">TCP</span><span class="sxs-lookup"><span data-stu-id="e0ea9-302">TCP</span></span>
   |<span data-ttu-id="e0ea9-303">**Port**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-303">**Port**</span></span> |<span data-ttu-id="e0ea9-304">Użyj wystąpienia programu SQL Server hello jest używany port hello.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-304">Use hello port that hello SQL Server instances are using.</span></span> <span data-ttu-id="e0ea9-305">Domyślne wystąpienie korzysta z portu 1433, chyba że zostało zmienione.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-305">A default instance uses port 1433, unless you changed it.</span></span> 
   |<span data-ttu-id="e0ea9-306">**Port zaplecza**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-306">**Backend port**</span></span> |<span data-ttu-id="e0ea9-307">Użyj hello samą wartość jak **portu**.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-307">Use hello same value as **Port**.</span></span>
   |<span data-ttu-id="e0ea9-308">**Puli wewnętrznej bazy danych**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-308">**Backend pool**</span></span> |<span data-ttu-id="e0ea9-309">Pula Hello zawierający hello maszyn wirtualnych z hello wystąpień programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-309">hello pool that contains hello virtual machines with hello SQL Server instances.</span></span> 
   |<span data-ttu-id="e0ea9-310">**Badania kondycji**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-310">**Health probe**</span></span> |<span data-ttu-id="e0ea9-311">Wybierz sondowania hello, który został utworzony.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-311">Choose hello probe you created.</span></span>
   |<span data-ttu-id="e0ea9-312">**Trwałość sesji**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-312">**Session persistence**</span></span> |<span data-ttu-id="e0ea9-313">Brak</span><span class="sxs-lookup"><span data-stu-id="e0ea9-313">None</span></span>
   |<span data-ttu-id="e0ea9-314">**Limit czasu bezczynności (w minutach)**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-314">**Idle timeout (minutes)**</span></span> |<span data-ttu-id="e0ea9-315">Domyślne (4)</span><span class="sxs-lookup"><span data-stu-id="e0ea9-315">Default (4)</span></span>
   |<span data-ttu-id="e0ea9-316">**Zmienny adres IP (bezpośredni zwrot serwera)**</span><span class="sxs-lookup"><span data-stu-id="e0ea9-316">**Floating IP (direct server return)**</span></span> | <span data-ttu-id="e0ea9-317">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="e0ea9-317">Enabled</span></span>

### <a name="configure-hello-availability-group-toouse-hello-new-ip-address"></a><span data-ttu-id="e0ea9-318">Skonfiguruj hello dostępności grupy toouse hello nowego adresu IP</span><span class="sxs-lookup"><span data-stu-id="e0ea9-318">Configure hello availability group toouse hello new IP address</span></span>

<span data-ttu-id="e0ea9-319">toofinish Konfigurowanie klastra hello hello powtarzania czynności, które należy przestrzegać podczas wprowadzone hello pierwszej grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-319">toofinish configuring hello cluster, repeat hello steps that you followed when you made hello first availability group.</span></span> <span data-ttu-id="e0ea9-320">Oznacza to, skonfiguruj hello [toouse hello nowy adres IP klastra](#configure-the-cluster-to-use-the-load-balancer-ip-address).</span><span class="sxs-lookup"><span data-stu-id="e0ea9-320">That is, configure hello [cluster toouse hello new IP address](#configure-the-cluster-to-use-the-load-balancer-ip-address).</span></span> 

<span data-ttu-id="e0ea9-321">Po dodaniu adresu IP dla odbiornika hello, należy skonfigurować grupę dostępności dodatkowe hello hello następujący:</span><span class="sxs-lookup"><span data-stu-id="e0ea9-321">After you have added an IP address for hello listener, configure hello additional availability group by doing hello following:</span></span> 

1. <span data-ttu-id="e0ea9-322">Sprawdź, czy port sondy hello hello nowy adres IP jest otwarty na obu maszynach wirtualnych programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-322">Verify that hello probe port for hello new IP address is open on both SQL Server virtual machines.</span></span> 

2. <span data-ttu-id="e0ea9-323">[W Menedżerze klastra Dodaj punkt dostępu klienta hello](#addcap).</span><span class="sxs-lookup"><span data-stu-id="e0ea9-323">[In Cluster Manager, add hello client access point](#addcap).</span></span>

3. <span data-ttu-id="e0ea9-324">[Skonfiguruj hello IP zasobu dla grupy dostępności hello](#congroup).</span><span class="sxs-lookup"><span data-stu-id="e0ea9-324">[Configure hello IP resource for hello availability group](#congroup).</span></span>

   >[!IMPORTANT]
   ><span data-ttu-id="e0ea9-325">Podczas tworzenia hello adresu IP, należy użyć adresu IP hello dodania toohello modułu równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-325">When you create hello IP address, use hello IP address that you added toohello load balancer.</span></span>  

4. <span data-ttu-id="e0ea9-326">[Skonfiguruj zasób grupy dostępności programu SQL Server hello zależał od punktu dostępu klienta hello](#dependencyGroup).</span><span class="sxs-lookup"><span data-stu-id="e0ea9-326">[Make hello SQL Server availability group resource dependent on hello client access point](#dependencyGroup).</span></span>

5. <span data-ttu-id="e0ea9-327">[Dostępu powitania klienta do punktu zasobów zależnych od adresu IP hello](#listname).</span><span class="sxs-lookup"><span data-stu-id="e0ea9-327">[Make hello client access point resource dependent on hello IP address](#listname).</span></span>
 
6. <span data-ttu-id="e0ea9-328">[Ustaw parametry klastra hello w programie PowerShell](#setparam).</span><span class="sxs-lookup"><span data-stu-id="e0ea9-328">[Set hello cluster parameters in PowerShell](#setparam).</span></span>

<span data-ttu-id="e0ea9-329">Po skonfigurowaniu hello dostępności grupy toouse hello nowego adresu IP, należy skonfigurować hello połączenia toohello odbiornika.</span><span class="sxs-lookup"><span data-stu-id="e0ea9-329">After you configure hello availability group toouse hello new IP address, configure hello connection toohello listener.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="e0ea9-330">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="e0ea9-330">Next steps</span></span>

- [<span data-ttu-id="e0ea9-331">Konfigurowanie programu SQL Server zawsze włączonej grupy dostępności na maszynach wirtualnych Azure w różnych regionach</span><span class="sxs-lookup"><span data-stu-id="e0ea9-331">Configure a SQL Server Always On availability group on Azure virtual machines in different regions</span></span>](virtual-machines-windows-portal-sql-availability-group-dr.md)
