---
title: "grupuje aaaSQL dostępność serwera - maszyn wirtualnych platformy Azure — wymagania wstępne | Dokumentacja firmy Microsoft"
description: "Ten samouczek pokazuje, jak tooconfigure hello wymagania wstępne dotyczące tworzenia dostępności programu SQL Server zawsze włączone grupy na maszynach wirtualnych Azure."
services: virtual-machines
documentationCenter: na
authors: MikeRayMSFT
manager: jhubbard
editor: monicar
tags: azure-service-management
ms.assetid: c492db4c-3faa-4645-849f-5a1a663be55a
ms.service: virtual-machines-sql
ms.devlang: na
ms.custom: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 05/09/2017
ms.author: mikeray
ms.openlocfilehash: eed0729ead25c7793bb17a04cd7fd996c7dc8c9d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="complete-hello-prerequisites-for-creating-always-on-availability-groups-on-azure-virtual-machines"></a><span data-ttu-id="af415-103">Wymagania wstępne pełną hello do tworzenia zawsze włączonych grup dostępności na maszynach wirtualnych Azure</span><span class="sxs-lookup"><span data-stu-id="af415-103">Complete hello prerequisites for creating Always On availability groups on Azure virtual machines</span></span>

<span data-ttu-id="af415-104">Ten samouczek pokazuje, jak toocomplete hello wymagania wstępne dotyczące tworzenia [programu SQL Server zawsze włączone grupy dostępności na maszynach wirtualnych platformy Azure (VM)](virtual-machines-windows-portal-sql-availability-group-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="af415-104">This tutorial shows how toocomplete hello prerequisites for creating a [SQL Server Always On availability group on Azure virtual machines (VMs)](virtual-machines-windows-portal-sql-availability-group-tutorial.md).</span></span> <span data-ttu-id="af415-105">Po zakończeniu hello wymagania wstępne są kontrolera domeny, dwóch maszyn wirtualnych programu SQL Server i serwera monitora w pojedynczej grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="af415-105">When you've finished hello prerequisites, you have a domain controller, two SQL Server VMs, and a witness server in a single resource group.</span></span>

<span data-ttu-id="af415-106">**Szacowanie czasu**: może potrwać kilka godzin toocomplete hello wstępnie wymagane składniki.</span><span class="sxs-lookup"><span data-stu-id="af415-106">**Time estimate**: It might take a couple of hours toocomplete hello prerequisites.</span></span> <span data-ttu-id="af415-107">Większość tego czasu jest spędzana na tworzenie maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="af415-107">Much of this time is spent creating virtual machines.</span></span>

<span data-ttu-id="af415-108">Witaj poniższym diagramie przedstawiono kompilacji w samouczku hello.</span><span class="sxs-lookup"><span data-stu-id="af415-108">hello following diagram illustrates what you build in hello tutorial.</span></span>

![Grupy dostępności](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/00-EndstateSampleNoELB.png)

## <a name="review-availability-group-documentation"></a><span data-ttu-id="af415-110">Przejrzyj dokumentację grupy dostępności</span><span class="sxs-lookup"><span data-stu-id="af415-110">Review availability group documentation</span></span>

<span data-ttu-id="af415-111">Ten samouczek zakłada, że masz podstawową wiedzę na temat programu SQL Server zawsze włączonych grup dostępności.</span><span class="sxs-lookup"><span data-stu-id="af415-111">This tutorial assumes that you have a basic understanding of SQL Server Always On availability groups.</span></span> <span data-ttu-id="af415-112">Jeśli nie masz doświadczenia w obsłudze tej technologii, zobacz [Omówienie programu zawsze włączonych grup dostępności (SQL Server)](http://msdn.microsoft.com/library/ff877884.aspx).</span><span class="sxs-lookup"><span data-stu-id="af415-112">If you're not familiar with this technology, see [Overview of Always On Availability Groups (SQL Server)](http://msdn.microsoft.com/library/ff877884.aspx).</span></span>


## <a name="create-an-azure-account"></a><span data-ttu-id="af415-113">Utwórz konto systemu Azure</span><span class="sxs-lookup"><span data-stu-id="af415-113">Create an Azure account</span></span>
<span data-ttu-id="af415-114">Musisz mieć konto platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="af415-114">You need an Azure account.</span></span> <span data-ttu-id="af415-115">Możesz [Załóż bezpłatne konto platformy Azure](/pricing/free-trial/?WT.mc_id=A261C142F) lub [aktywować korzyści dla subskrybentów programu Visual Studio](/pricing/member-offers/msdn-benefits-details/?WT.mc_id=A261C142F).</span><span class="sxs-lookup"><span data-stu-id="af415-115">You can [open a free Azure account](/pricing/free-trial/?WT.mc_id=A261C142F) or [activate Visual Studio subscriber benefits](/pricing/member-offers/msdn-benefits-details/?WT.mc_id=A261C142F).</span></span>

## <a name="create-a-resource-group"></a><span data-ttu-id="af415-116">Tworzenie grupy zasobów</span><span class="sxs-lookup"><span data-stu-id="af415-116">Create a resource group</span></span>
1. <span data-ttu-id="af415-117">Zaloguj się toohello [portalu Azure](http://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="af415-117">Sign in toohello [Azure portal](http://portal.azure.com).</span></span>
2. <span data-ttu-id="af415-118">Kliknij przycisk  **+**  toocreate nowy obiekt w portalu hello.</span><span class="sxs-lookup"><span data-stu-id="af415-118">Click **+** toocreate a new object in hello portal.</span></span>

   ![Nowy obiekt](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/01-portalplus.png)

3. <span data-ttu-id="af415-120">Typ **grupy zasobów** w hello **Marketplace** okno wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="af415-120">Type **resource group** in hello **Marketplace** search window.</span></span>

   ![Grupa zasobów](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/01-resourcegroupsymbol.png)
4. <span data-ttu-id="af415-122">Kliknij przycisk **grupy zasobów**.</span><span class="sxs-lookup"><span data-stu-id="af415-122">Click **Resource group**.</span></span>
5. <span data-ttu-id="af415-123">Kliknij przycisk **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="af415-123">Click **Create**.</span></span>
6. <span data-ttu-id="af415-124">Na powitania **grupy zasobów** bloku, w obszarze **Nazwa grupy zasobów**, wpisz nazwę grupy zasobów hello.</span><span class="sxs-lookup"><span data-stu-id="af415-124">On hello **Resource group** blade, under **Resource group name**, type a name for hello resource group.</span></span> <span data-ttu-id="af415-125">Na przykład wpisz **sql-ha-zarządcy zasobów**.</span><span class="sxs-lookup"><span data-stu-id="af415-125">For example, type **sql-ha-rg**.</span></span>
7. <span data-ttu-id="af415-126">Jeśli masz wiele subskrypcji Azure, sprawdź subskrypcji hello hello subskrypcji platformy Azure, który ma być toocreate hello dostępności grupy.</span><span class="sxs-lookup"><span data-stu-id="af415-126">If you have multiple Azure subscriptions, verify that hello subscription is hello Azure subscription that you want toocreate hello availability group in.</span></span>
8. <span data-ttu-id="af415-127">Wybierz lokalizację.</span><span class="sxs-lookup"><span data-stu-id="af415-127">Select a location.</span></span> <span data-ttu-id="af415-128">Lokalizacja Hello jest hello Azure region, w którym ma być toocreate hello dostępności grupy.</span><span class="sxs-lookup"><span data-stu-id="af415-128">hello location is hello Azure region where you want toocreate hello availability group.</span></span> <span data-ttu-id="af415-129">W tym samouczku chcemy toobuild wszystkie zasoby w jednej lokalizacji platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="af415-129">For this tutorial, we're going toobuild all resources in one Azure location.</span></span>
9. <span data-ttu-id="af415-130">Sprawdź, czy **toodashboard numeru Pin** jest zaznaczony.</span><span class="sxs-lookup"><span data-stu-id="af415-130">Verify that **Pin toodashboard** is checked.</span></span> <span data-ttu-id="af415-131">To ustawienie opcjonalne umieszcza skrót dla grupy zasobów hello na powitania pulpitu nawigacyjnego portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="af415-131">This optional setting places a shortcut for hello resource group on hello Azure portal dashboard.</span></span>

   ![Grupa zasobów](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/01-resourcegroup.png)

10. <span data-ttu-id="af415-133">Kliknij przycisk **Utwórz** grupy zasobów hello toocreate.</span><span class="sxs-lookup"><span data-stu-id="af415-133">Click **Create** toocreate hello resource group.</span></span>

<span data-ttu-id="af415-134">Azure tworzy hello grupy zasobów i numerów PIN skrótów toohello grupę zasobów w portalu hello.</span><span class="sxs-lookup"><span data-stu-id="af415-134">Azure creates hello resource group and pins a shortcut toohello resource group in hello portal.</span></span>

## <a name="create-hello-network-and-subnets"></a><span data-ttu-id="af415-135">Utwórz hello sieci i podsieci</span><span class="sxs-lookup"><span data-stu-id="af415-135">Create hello network and subnets</span></span>
<span data-ttu-id="af415-136">Witaj następnym krokiem jest toocreate hello sieci i podsieci w hello grupy zasobów platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="af415-136">hello next step is toocreate hello networks and subnets in hello Azure resource group.</span></span>

<span data-ttu-id="af415-137">rozwiązanie Hello używa jedną sieć wirtualną z dwiema podsieciami.</span><span class="sxs-lookup"><span data-stu-id="af415-137">hello solution uses one virtual network with two subnets.</span></span> <span data-ttu-id="af415-138">Witaj [omówienie sieci wirtualnej](../../../virtual-network/virtual-networks-overview.md) zawiera więcej informacji dotyczących sieci na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="af415-138">hello [Virtual network overview](../../../virtual-network/virtual-networks-overview.md) provides more information about networks in Azure.</span></span>

<span data-ttu-id="af415-139">sieć wirtualna hello toocreate:</span><span class="sxs-lookup"><span data-stu-id="af415-139">toocreate hello virtual network:</span></span>

1. <span data-ttu-id="af415-140">W portalu Azure, w grupie zasobów, hello kliknij **+ Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="af415-140">In hello Azure portal, in your resource group, click **+ Add**.</span></span> <span data-ttu-id="af415-141">Otwiera Azure hello **wszystko** bloku.</span><span class="sxs-lookup"><span data-stu-id="af415-141">Azure opens hello **Everything** blade.</span></span>

   ![Nowy element](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/02-newiteminrg.png)
2. <span data-ttu-id="af415-143">Wyszukaj **sieci wirtualnej**.</span><span class="sxs-lookup"><span data-stu-id="af415-143">Search for **virtual network**.</span></span>

     ![Sieć wirtualna wyszukiwania](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/04-findvirtualnetwork.png)
3. <span data-ttu-id="af415-145">Kliknij przycisk **sieci wirtualnej**.</span><span class="sxs-lookup"><span data-stu-id="af415-145">Click **Virtual network**.</span></span>
4. <span data-ttu-id="af415-146">Na powitania **sieci wirtualnej** bloku, kliknij przycisk hello **Menedżera zasobów** model wdrażania, a następnie kliknij **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="af415-146">On hello **Virtual network** blade, click hello **Resource Manager** deployment model, and then click **Create**.</span></span>

    <span data-ttu-id="af415-147">Witaj poniższej tabeli przedstawiono ustawienia hello hello sieci wirtualnej:</span><span class="sxs-lookup"><span data-stu-id="af415-147">hello following table shows hello settings for hello virtual network:</span></span>

   | <span data-ttu-id="af415-148">**Pole**</span><span class="sxs-lookup"><span data-stu-id="af415-148">**Field**</span></span> | <span data-ttu-id="af415-149">Wartość</span><span class="sxs-lookup"><span data-stu-id="af415-149">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="af415-150">**Nazwa**</span><span class="sxs-lookup"><span data-stu-id="af415-150">**Name**</span></span> |<span data-ttu-id="af415-151">autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="af415-151">autoHAVNET</span></span> |
   | <span data-ttu-id="af415-152">**Przestrzeń adresowa**</span><span class="sxs-lookup"><span data-stu-id="af415-152">**Address space**</span></span> |<span data-ttu-id="af415-153">10.33.0.0/24</span><span class="sxs-lookup"><span data-stu-id="af415-153">10.33.0.0/24</span></span> |
   | <span data-ttu-id="af415-154">**Nazwa podsieci**</span><span class="sxs-lookup"><span data-stu-id="af415-154">**Subnet name**</span></span> |<span data-ttu-id="af415-155">Administrator</span><span class="sxs-lookup"><span data-stu-id="af415-155">Admin</span></span> |
   | <span data-ttu-id="af415-156">**Zakres adresów podsieci**</span><span class="sxs-lookup"><span data-stu-id="af415-156">**Subnet address range**</span></span> |<span data-ttu-id="af415-157">10.33.0.0/29</span><span class="sxs-lookup"><span data-stu-id="af415-157">10.33.0.0/29</span></span> |
   | <span data-ttu-id="af415-158">**Subskrypcja**</span><span class="sxs-lookup"><span data-stu-id="af415-158">**Subscription**</span></span> |<span data-ttu-id="af415-159">Określ, czy zamierzasz toouse subskrypcji hello.</span><span class="sxs-lookup"><span data-stu-id="af415-159">Specify hello subscription that you intend toouse.</span></span> <span data-ttu-id="af415-160">**Subskrypcja** jest puste, jeśli masz tylko jedną subskrypcję.</span><span class="sxs-lookup"><span data-stu-id="af415-160">**Subscription** is blank if you only have one subscription.</span></span> |
   | <span data-ttu-id="af415-161">**Grupa zasobów**</span><span class="sxs-lookup"><span data-stu-id="af415-161">**Resource group**</span></span> |<span data-ttu-id="af415-162">Wybierz **Użyj istniejącego** i wybierz nazwę hello hello grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="af415-162">Choose **Use existing** and pick hello name of hello resource group.</span></span> |
   | <span data-ttu-id="af415-163">**Lokalizacja**</span><span class="sxs-lookup"><span data-stu-id="af415-163">**Location**</span></span> |<span data-ttu-id="af415-164">Określ hello lokalizacji platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="af415-164">Specify hello Azure location.</span></span> |

   <span data-ttu-id="af415-165">Zakres adresów miejsca i podsieć adresu mogą się różnić od hello tabeli.</span><span class="sxs-lookup"><span data-stu-id="af415-165">Your address space and subnet address range might be different from hello table.</span></span> <span data-ttu-id="af415-166">W zależności od subskrypcji hello portal sugeruje przestrzeni adresów dostępne i odpowiedni zakres adresów podsieci.</span><span class="sxs-lookup"><span data-stu-id="af415-166">Depending on your subscription, hello portal suggests an available address space and corresponding subnet address range.</span></span> <span data-ttu-id="af415-167">Jeśli nie ma wystarczającej przestrzeni adresów dostępne, użyj innej subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="af415-167">If no sufficient address space is available, use a different subscription.</span></span>

   <span data-ttu-id="af415-168">przykład Witaj używa hello nazwy podsieci **Admin**. Ta podsieć jest hello kontrolerów domeny.</span><span class="sxs-lookup"><span data-stu-id="af415-168">hello example uses hello subnet name **Admin**. This subnet is for hello domain controllers.</span></span>

5. <span data-ttu-id="af415-169">Kliknij przycisk **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="af415-169">Click **Create**.</span></span>

   ![Skonfiguruj sieć wirtualną hello](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/06-configurevirtualnetwork.png)

<span data-ttu-id="af415-171">Azure zwraca wartość toohello pulpitu nawigacyjnego portalu i informuje o utworzeniu hello nowej sieci.</span><span class="sxs-lookup"><span data-stu-id="af415-171">Azure returns you toohello portal dashboard and notifies you when hello new network is created.</span></span>

### <a name="create-a-second-subnet"></a><span data-ttu-id="af415-172">Tworzenie drugiej podsieci</span><span class="sxs-lookup"><span data-stu-id="af415-172">Create a second subnet</span></span>
<span data-ttu-id="af415-173">Witaj nowej sieci wirtualnej ma jedną podsieć o nazwie **Admin**. hello kontrolery domeny używają tej podsieci.</span><span class="sxs-lookup"><span data-stu-id="af415-173">hello new virtual network has one subnet, named **Admin**. hello domain controllers use this subnet.</span></span> <span data-ttu-id="af415-174">Witaj maszyn wirtualnych programu SQL Server użyć drugiej podsieci o nazwie **SQL**.</span><span class="sxs-lookup"><span data-stu-id="af415-174">hello SQL Server VMs use a second subnet named **SQL**.</span></span> <span data-ttu-id="af415-175">tooconfigure tej podsieci:</span><span class="sxs-lookup"><span data-stu-id="af415-175">tooconfigure this subnet:</span></span>

1. <span data-ttu-id="af415-176">Na pulpicie nawigacyjnym kliknij hello grupy zasobów, które zostały utworzone, **SQL-HA-zarządcy zasobów**.</span><span class="sxs-lookup"><span data-stu-id="af415-176">On your dashboard, click hello resource group that you created, **SQL-HA-RG**.</span></span> <span data-ttu-id="af415-177">Lokalizowanie hello sieci w grupie zasobów hello w obszarze **zasobów**.</span><span class="sxs-lookup"><span data-stu-id="af415-177">Locate hello network in hello resource group under **Resources**.</span></span>

    <span data-ttu-id="af415-178">Jeśli **SQL-HA-zarządcy zasobów** nie jest widoczny, znaleźć, klikając **grup zasobów** i filtrowanie według nazwy grupy zasobów hello.</span><span class="sxs-lookup"><span data-stu-id="af415-178">If **SQL-HA-RG** isn't visible, find it by clicking **Resource Groups** and filtering by hello resource group name.</span></span>
2. <span data-ttu-id="af415-179">Kliknij przycisk **autoHAVNET** na powitania listy zasobów.</span><span class="sxs-lookup"><span data-stu-id="af415-179">Click **autoHAVNET** on hello list of resources.</span></span> <span data-ttu-id="af415-180">Azure zostanie otwarty blok konfiguracji sieci hello.</span><span class="sxs-lookup"><span data-stu-id="af415-180">Azure opens hello network configuration blade.</span></span>
3. <span data-ttu-id="af415-181">Na powitania **autoHAVNET** bloku sieci wirtualnej, w obszarze **ustawienia** , kliknij przycisk **podsieci**.</span><span class="sxs-lookup"><span data-stu-id="af415-181">On hello **autoHAVNET** virtual network blade, under **Settings** , click **Subnets**.</span></span>

    <span data-ttu-id="af415-182">Uwaga hello podsieci, która już utworzone.</span><span class="sxs-lookup"><span data-stu-id="af415-182">Note hello subnet that you already created.</span></span>

   ![Skonfiguruj sieć wirtualną hello](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/07-addsubnet.png)
5. <span data-ttu-id="af415-184">Tworzenie drugiej podsieci.</span><span class="sxs-lookup"><span data-stu-id="af415-184">Create a second subnet.</span></span> <span data-ttu-id="af415-185">Kliknij przycisk **+ podsieci**.</span><span class="sxs-lookup"><span data-stu-id="af415-185">Click **+ Subnet**.</span></span>
6. <span data-ttu-id="af415-186">Na powitania **Dodaj podsieć** bloku, skonfiguruj hello podsieci, wpisując **sqlsubnet** w obszarze **nazwa**.</span><span class="sxs-lookup"><span data-stu-id="af415-186">On hello **Add subnet** blade, configure hello subnet by typing **sqlsubnet** under **Name**.</span></span> <span data-ttu-id="af415-187">Azure automatycznie określa prawidłową **zakres adresów**.</span><span class="sxs-lookup"><span data-stu-id="af415-187">Azure automatically specifies a valid **Address range**.</span></span> <span data-ttu-id="af415-188">Sprawdź, czy ten zakres adresów ma co najmniej 10 adresów w nim.</span><span class="sxs-lookup"><span data-stu-id="af415-188">Verify that this address range has at least 10 addresses in it.</span></span> <span data-ttu-id="af415-189">W środowisku produkcyjnym może wymagać więcej adresów.</span><span class="sxs-lookup"><span data-stu-id="af415-189">In a production environment, you might require more addresses.</span></span>
7. <span data-ttu-id="af415-190">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="af415-190">Click **OK**.</span></span>

    ![Skonfiguruj sieć wirtualną hello](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/08-configuresubnet.png)

<span data-ttu-id="af415-192">Witaj w poniższej tabeli przedstawiono ustawienia konfiguracji sieciowej hello:</span><span class="sxs-lookup"><span data-stu-id="af415-192">hello following table summarizes hello network configuration settings:</span></span>

| <span data-ttu-id="af415-193">**Pole**</span><span class="sxs-lookup"><span data-stu-id="af415-193">**Field**</span></span> | <span data-ttu-id="af415-194">Wartość</span><span class="sxs-lookup"><span data-stu-id="af415-194">Value</span></span> |
| --- | --- |
| <span data-ttu-id="af415-195">**Nazwa**</span><span class="sxs-lookup"><span data-stu-id="af415-195">**Name**</span></span> |<span data-ttu-id="af415-196">**autoHAVNET**</span><span class="sxs-lookup"><span data-stu-id="af415-196">**autoHAVNET**</span></span> |
| <span data-ttu-id="af415-197">**Przestrzeń adresowa**</span><span class="sxs-lookup"><span data-stu-id="af415-197">**Address space**</span></span> |<span data-ttu-id="af415-198">Ta wartość zależy od hello przestrzeni adresów dostępne w ramach subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="af415-198">This value depends on hello available address spaces in your subscription.</span></span> <span data-ttu-id="af415-199">Typowe wartości to 10.0.0.0/16.</span><span class="sxs-lookup"><span data-stu-id="af415-199">A typical value is 10.0.0.0/16.</span></span> |
| <span data-ttu-id="af415-200">**Nazwa podsieci**</span><span class="sxs-lookup"><span data-stu-id="af415-200">**Subnet name**</span></span> |<span data-ttu-id="af415-201">**Administrator**</span><span class="sxs-lookup"><span data-stu-id="af415-201">**admin**</span></span> |
| <span data-ttu-id="af415-202">**Zakres adresów podsieci**</span><span class="sxs-lookup"><span data-stu-id="af415-202">**Subnet address range**</span></span> |<span data-ttu-id="af415-203">Ta wartość zależy od hello dostępne zakresy adresów w ramach subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="af415-203">This value depends on hello available address ranges in your subscription.</span></span> <span data-ttu-id="af415-204">Typowe wartości to 10.0.0.0/24.</span><span class="sxs-lookup"><span data-stu-id="af415-204">A typical value is 10.0.0.0/24.</span></span> |
| <span data-ttu-id="af415-205">**Nazwa podsieci**</span><span class="sxs-lookup"><span data-stu-id="af415-205">**Subnet name**</span></span> |<span data-ttu-id="af415-206">**sqlsubnet**</span><span class="sxs-lookup"><span data-stu-id="af415-206">**sqlsubnet**</span></span> |
| <span data-ttu-id="af415-207">**Zakres adresów podsieci**</span><span class="sxs-lookup"><span data-stu-id="af415-207">**Subnet address range**</span></span> |<span data-ttu-id="af415-208">Ta wartość zależy od hello dostępne zakresy adresów w ramach subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="af415-208">This value depends on hello available address ranges in your subscription.</span></span> <span data-ttu-id="af415-209">Typowe wartości to 10.0.1.0/24.</span><span class="sxs-lookup"><span data-stu-id="af415-209">A typical value is 10.0.1.0/24.</span></span> |
| <span data-ttu-id="af415-210">**Subskrypcja**</span><span class="sxs-lookup"><span data-stu-id="af415-210">**Subscription**</span></span> |<span data-ttu-id="af415-211">Określ, czy zamierzasz toouse subskrypcji hello.</span><span class="sxs-lookup"><span data-stu-id="af415-211">Specify hello subscription that you intend toouse.</span></span> |
| <span data-ttu-id="af415-212">**Grupa zasobów**</span><span class="sxs-lookup"><span data-stu-id="af415-212">**Resource Group**</span></span> |<span data-ttu-id="af415-213">**SQL-HA-ZARZĄDCY ZASOBÓW**</span><span class="sxs-lookup"><span data-stu-id="af415-213">**SQL-HA-RG**</span></span> |
| <span data-ttu-id="af415-214">**Lokalizacja**</span><span class="sxs-lookup"><span data-stu-id="af415-214">**Location**</span></span> |<span data-ttu-id="af415-215">Określ hello samą lokalizację, która została wybrana opcja hello grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="af415-215">Specify hello same location that you chose for hello resource group.</span></span> |

## <a name="create-availability-sets"></a><span data-ttu-id="af415-216">Tworzenie zestawów dostępności</span><span class="sxs-lookup"><span data-stu-id="af415-216">Create availability sets</span></span>

<span data-ttu-id="af415-217">Przed utworzeniem maszyny wirtualnej należy toocreate zestawów dostępności.</span><span class="sxs-lookup"><span data-stu-id="af415-217">Before you create virtual machines, you need toocreate availability sets.</span></span> <span data-ttu-id="af415-218">Zestawy dostępności skrócić czas przestojów hello planowana lub nieplanowana konserwacja zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="af415-218">Availability sets reduce hello downtime for planned or unplanned maintenance events.</span></span> <span data-ttu-id="af415-219">Zestaw dostępności Azure jest logiczną grupa zasobów Azure umieszcza w fizycznych domenach awarii i Aktualizacja domeny.</span><span class="sxs-lookup"><span data-stu-id="af415-219">An Azure availability set is a logical group of resources that Azure places on physical fault domains and update domains.</span></span> <span data-ttu-id="af415-220">Domeny błędów gwarantuje, że hello członkami zestawu dostępności hello oddzielne zasilania i zasobów sieciowych.</span><span class="sxs-lookup"><span data-stu-id="af415-220">A fault domain ensures that hello members of hello availability set have separate power and network resources.</span></span> <span data-ttu-id="af415-221">Domeny aktualizacji gwarantuje, że członkowie hello zestawu dostępności nie są obniżył konserwacji na powitania sam czas.</span><span class="sxs-lookup"><span data-stu-id="af415-221">An update domain ensures that members of hello availability set aren't brought down for maintenance at hello same time.</span></span> <span data-ttu-id="af415-222">Aby uzyskać więcej informacji, zobacz [Zarządzanie hello dostępność maszyn wirtualnych](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="af415-222">For more information, see [Manage hello availability of virtual machines](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

<span data-ttu-id="af415-223">Należy dwóch zestawów dostępności.</span><span class="sxs-lookup"><span data-stu-id="af415-223">You need two availability sets.</span></span> <span data-ttu-id="af415-224">Jedna jest hello kontrolerów domeny.</span><span class="sxs-lookup"><span data-stu-id="af415-224">One is for hello domain controllers.</span></span> <span data-ttu-id="af415-225">Hello jest drugi dla maszyn wirtualnych hello programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="af415-225">hello second is for hello SQL Server VMs.</span></span>

<span data-ttu-id="af415-226">toocreate dostępności ustawić, przejdź toohello grupy zasobów i kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="af415-226">toocreate an availability set, go toohello resource group and click **Add**.</span></span> <span data-ttu-id="af415-227">Filtrowanie wyników hello wpisując **zestawu dostępności**.</span><span class="sxs-lookup"><span data-stu-id="af415-227">Filter hello results by typing **availability set**.</span></span> <span data-ttu-id="af415-228">Kliknij przycisk **zestawu dostępności** w hello wyniki, a następnie kliknij przycisk **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="af415-228">Click **Availability Set** in hello results, and then click **Create**.</span></span>

<span data-ttu-id="af415-229">Skonfiguruj dwa zestawy dostępności zgodnie z parametrami toohello w hello w poniższej tabeli:</span><span class="sxs-lookup"><span data-stu-id="af415-229">Configure two availability sets according toohello parameters in hello following table:</span></span>

| <span data-ttu-id="af415-230">**Pole**</span><span class="sxs-lookup"><span data-stu-id="af415-230">**Field**</span></span> | <span data-ttu-id="af415-231">Zestaw dostępności kontrolera domeny</span><span class="sxs-lookup"><span data-stu-id="af415-231">Domain controller availability set</span></span> | <span data-ttu-id="af415-232">Zestaw dostępności programu SQL Server</span><span class="sxs-lookup"><span data-stu-id="af415-232">SQL Server availability set</span></span> |
| --- | --- | --- |
| <span data-ttu-id="af415-233">**Nazwa**</span><span class="sxs-lookup"><span data-stu-id="af415-233">**Name**</span></span> |<span data-ttu-id="af415-234">adavailabilityset</span><span class="sxs-lookup"><span data-stu-id="af415-234">adavailabilityset</span></span> |<span data-ttu-id="af415-235">sqlavailabilityset</span><span class="sxs-lookup"><span data-stu-id="af415-235">sqlavailabilityset</span></span> |
| <span data-ttu-id="af415-236">**Grupa zasobów**</span><span class="sxs-lookup"><span data-stu-id="af415-236">**Resource group**</span></span> |<span data-ttu-id="af415-237">SQL-HA-ZARZĄDCY ZASOBÓW</span><span class="sxs-lookup"><span data-stu-id="af415-237">SQL-HA-RG</span></span> |<span data-ttu-id="af415-238">SQL-HA-ZARZĄDCY ZASOBÓW</span><span class="sxs-lookup"><span data-stu-id="af415-238">SQL-HA-RG</span></span> |
| <span data-ttu-id="af415-239">**Domen błędów**</span><span class="sxs-lookup"><span data-stu-id="af415-239">**Fault domains**</span></span> |<span data-ttu-id="af415-240">3</span><span class="sxs-lookup"><span data-stu-id="af415-240">3</span></span> |<span data-ttu-id="af415-241">3</span><span class="sxs-lookup"><span data-stu-id="af415-241">3</span></span> |
| <span data-ttu-id="af415-242">**Aktualizowanie domeny**</span><span class="sxs-lookup"><span data-stu-id="af415-242">**Update domains**</span></span> |<span data-ttu-id="af415-243">5</span><span class="sxs-lookup"><span data-stu-id="af415-243">5</span></span> |<span data-ttu-id="af415-244">3</span><span class="sxs-lookup"><span data-stu-id="af415-244">3</span></span> |

<span data-ttu-id="af415-245">Po utworzeniu zestawów dostępności hello Zwróć grupy zasobów toohello hello portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="af415-245">After you create hello availability sets, return toohello resource group in hello Azure portal.</span></span>

## <a name="create-domain-controllers"></a><span data-ttu-id="af415-246">Utworzyć kontrolerów domeny</span><span class="sxs-lookup"><span data-stu-id="af415-246">Create domain controllers</span></span>
<span data-ttu-id="af415-247">Po utworzeniu sieci hello, podsieci, zestawów dostępności i równoważenia obciążenia internetowy, wszystko gotowe toocreate maszyn wirtualnych hello hello kontrolerów domeny.</span><span class="sxs-lookup"><span data-stu-id="af415-247">After you've created hello network, subnets, availability sets, and an Internet-facing load balancer, you're ready toocreate hello virtual machines for hello domain controllers.</span></span>

### <a name="create-virtual-machines-for-hello-domain-controllers"></a><span data-ttu-id="af415-248">Tworzenie maszyn wirtualnych dla hello kontrolerów domeny</span><span class="sxs-lookup"><span data-stu-id="af415-248">Create virtual machines for hello domain controllers</span></span>
<span data-ttu-id="af415-249">toocreate i skonfigurować hello kontrolerów domeny, aby uzyskać toohello **SQL-HA-zarządcy zasobów** grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="af415-249">toocreate and configure hello domain controllers, return toohello **SQL-HA-RG** resource group.</span></span>

1. <span data-ttu-id="af415-250">Kliknij pozycję **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="af415-250">Click **Add**.</span></span> <span data-ttu-id="af415-251">Witaj **wszystko** zostanie otwarty blok.</span><span class="sxs-lookup"><span data-stu-id="af415-251">hello **Everything** blade opens.</span></span>
2. <span data-ttu-id="af415-252">Typ **systemu Windows Server 2016 Datacenter**.</span><span class="sxs-lookup"><span data-stu-id="af415-252">Type **Windows Server 2016 Datacenter**.</span></span>
3. <span data-ttu-id="af415-253">Kliknij przycisk **systemu Windows Server 2016 Datacenter**.</span><span class="sxs-lookup"><span data-stu-id="af415-253">Click **Windows Server 2016 Datacenter**.</span></span> <span data-ttu-id="af415-254">W hello **systemu Windows Server Datacenter 2016** bloku, sprawdź modelu wdrażania hello jest **Menedżera zasobów**, a następnie kliknij przycisk **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="af415-254">In hello **Windows Server 2016 Datacenter** blade, verify that hello deployment model is **Resource Manager**, and then click **Create**.</span></span> <span data-ttu-id="af415-255">Otwiera Azure hello **tworzenia maszyny wirtualnej** bloku.</span><span class="sxs-lookup"><span data-stu-id="af415-255">Azure opens hello **Create virtual machine** blade.</span></span>

<span data-ttu-id="af415-256">Powtórz hello poprzedzających kroki toocreate dwóch maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="af415-256">Repeat hello preceding steps toocreate two virtual machines.</span></span> <span data-ttu-id="af415-257">Nazwa Witaj dwie maszyny wirtualne:</span><span class="sxs-lookup"><span data-stu-id="af415-257">Name hello two virtual machines:</span></span>

* <span data-ttu-id="af415-258">kontrolerów domeny podstawowej AD</span><span class="sxs-lookup"><span data-stu-id="af415-258">ad-primary-dc</span></span>
* <span data-ttu-id="af415-259">kontrolerów domeny pomocniczy AD</span><span class="sxs-lookup"><span data-stu-id="af415-259">ad-secondary-dc</span></span>

  > [!NOTE]
  > <span data-ttu-id="af415-260">Witaj **kontrolerów domeny pomocniczy ad** maszyny wirtualnej jest opcjonalny, tooprovide wysokiej dostępności dla usług domenowych w usłudze Active Directory.</span><span class="sxs-lookup"><span data-stu-id="af415-260">hello **ad-secondary-dc** virtual machine is optional, tooprovide high availability for Active Directory Domain Services.</span></span>
  >
  >

<span data-ttu-id="af415-261">Witaj poniższej tabeli przedstawiono ustawienia powitania dla tych dwóch maszyn:</span><span class="sxs-lookup"><span data-stu-id="af415-261">hello following table shows hello settings for these two machines:</span></span>

| <span data-ttu-id="af415-262">**Pole**</span><span class="sxs-lookup"><span data-stu-id="af415-262">**Field**</span></span> | <span data-ttu-id="af415-263">Wartość</span><span class="sxs-lookup"><span data-stu-id="af415-263">Value</span></span> |
| --- | --- |
| <span data-ttu-id="af415-264">**Nazwa**</span><span class="sxs-lookup"><span data-stu-id="af415-264">**Name**</span></span> |<span data-ttu-id="af415-265">Pierwszy kontroler domeny: *kontrolerów domeny podstawowej ad*.</span><span class="sxs-lookup"><span data-stu-id="af415-265">First domain controller: *ad-primary-dc*.</span></span></br><span data-ttu-id="af415-266">Drugi kontroler domeny *kontrolerów domeny pomocniczy ad*.</span><span class="sxs-lookup"><span data-stu-id="af415-266">Second domain controller *ad-secondary-dc*.</span></span> |
| <span data-ttu-id="af415-267">**Typ dysku maszyny wirtualnej**</span><span class="sxs-lookup"><span data-stu-id="af415-267">**VM disk type**</span></span> |<span data-ttu-id="af415-268">SSD</span><span class="sxs-lookup"><span data-stu-id="af415-268">SSD</span></span> |
| <span data-ttu-id="af415-269">**Nazwa użytkownika**</span><span class="sxs-lookup"><span data-stu-id="af415-269">**User name**</span></span> |<span data-ttu-id="af415-270">Administrator domeny</span><span class="sxs-lookup"><span data-stu-id="af415-270">DomainAdmin</span></span> |
| <span data-ttu-id="af415-271">**Hasło**</span><span class="sxs-lookup"><span data-stu-id="af415-271">**Password**</span></span> |<span data-ttu-id="af415-272">Contoso! 0000</span><span class="sxs-lookup"><span data-stu-id="af415-272">Contoso!0000</span></span> |
| <span data-ttu-id="af415-273">**Subskrypcja**</span><span class="sxs-lookup"><span data-stu-id="af415-273">**Subscription**</span></span> |<span data-ttu-id="af415-274">*Twoja subskrypcja*</span><span class="sxs-lookup"><span data-stu-id="af415-274">*Your subscription*</span></span> |
| <span data-ttu-id="af415-275">**Grupa zasobów**</span><span class="sxs-lookup"><span data-stu-id="af415-275">**Resource group**</span></span> |<span data-ttu-id="af415-276">SQL-HA-ZARZĄDCY ZASOBÓW</span><span class="sxs-lookup"><span data-stu-id="af415-276">SQL-HA-RG</span></span> |
| <span data-ttu-id="af415-277">**Lokalizacja**</span><span class="sxs-lookup"><span data-stu-id="af415-277">**Location**</span></span> |<span data-ttu-id="af415-278">*Lokalizacja*</span><span class="sxs-lookup"><span data-stu-id="af415-278">*Your location*</span></span> |
| <span data-ttu-id="af415-279">**Rozmiar**</span><span class="sxs-lookup"><span data-stu-id="af415-279">**Size**</span></span> |<span data-ttu-id="af415-280">DS1_V2</span><span class="sxs-lookup"><span data-stu-id="af415-280">DS1_V2</span></span> |
| <span data-ttu-id="af415-281">**Storage**</span><span class="sxs-lookup"><span data-stu-id="af415-281">**Storage**</span></span> | <span data-ttu-id="af415-282">**Użyj zarządzanego dysków** - **tak**</span><span class="sxs-lookup"><span data-stu-id="af415-282">**Use managed disks** - **Yes**</span></span> |
| <span data-ttu-id="af415-283">**Sieć wirtualna**</span><span class="sxs-lookup"><span data-stu-id="af415-283">**Virtual network**</span></span> |<span data-ttu-id="af415-284">autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="af415-284">autoHAVNET</span></span> |
| <span data-ttu-id="af415-285">**Podsieć**</span><span class="sxs-lookup"><span data-stu-id="af415-285">**Subnet**</span></span> |<span data-ttu-id="af415-286">Administrator</span><span class="sxs-lookup"><span data-stu-id="af415-286">admin</span></span> |
| <span data-ttu-id="af415-287">**Publiczny adres IP**</span><span class="sxs-lookup"><span data-stu-id="af415-287">**Public IP address**</span></span> |<span data-ttu-id="af415-288">*Samą nazwę jak hello maszyny Wirtualnej*</span><span class="sxs-lookup"><span data-stu-id="af415-288">*Same name as hello VM*</span></span> |
| <span data-ttu-id="af415-289">**Grupy zabezpieczeń sieci**</span><span class="sxs-lookup"><span data-stu-id="af415-289">**Network security group**</span></span> |<span data-ttu-id="af415-290">*Samą nazwę jak hello maszyny Wirtualnej*</span><span class="sxs-lookup"><span data-stu-id="af415-290">*Same name as hello VM*</span></span> |
| <span data-ttu-id="af415-291">**Zestaw dostępności**</span><span class="sxs-lookup"><span data-stu-id="af415-291">**Availability set**</span></span> |<span data-ttu-id="af415-292">adavailabilityset</span><span class="sxs-lookup"><span data-stu-id="af415-292">adavailabilityset</span></span> </br><span data-ttu-id="af415-293">**Odporność domen**: 2</span><span class="sxs-lookup"><span data-stu-id="af415-293">**Fault domains**:2</span></span></br><span data-ttu-id="af415-294">**Aktualizowanie domeny**: 2</span><span class="sxs-lookup"><span data-stu-id="af415-294">**Update domains**:2</span></span>|
| <span data-ttu-id="af415-295">**Diagnostyka**</span><span class="sxs-lookup"><span data-stu-id="af415-295">**Diagnostics**</span></span> |<span data-ttu-id="af415-296">Enabled (Włączony)</span><span class="sxs-lookup"><span data-stu-id="af415-296">Enabled</span></span> |
| <span data-ttu-id="af415-297">**Konto magazynu diagnostyki**</span><span class="sxs-lookup"><span data-stu-id="af415-297">**Diagnostics storage account**</span></span> |<span data-ttu-id="af415-298">*Automatycznie utworzone*</span><span class="sxs-lookup"><span data-stu-id="af415-298">*Automatically created*</span></span> |

   >[!IMPORTANT]
   ><span data-ttu-id="af415-299">Maszyny Wirtualnej można umieścić tylko w dostępności po jego utworzeniu.</span><span class="sxs-lookup"><span data-stu-id="af415-299">You can only place a VM in an availability set when you create it.</span></span> <span data-ttu-id="af415-300">Nie można zmienić dostępności hello ustawić po utworzeniu maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="af415-300">You can't change hello availability set after a VM is created.</span></span> <span data-ttu-id="af415-301">Zobacz [Zarządzanie hello dostępność maszyn wirtualnych](../manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="af415-301">See [Manage hello availability of virtual machines](../manage-availability.md).</span></span>

<span data-ttu-id="af415-302">Platforma Azure tworzy hello maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="af415-302">Azure creates hello virtual machines.</span></span>

<span data-ttu-id="af415-303">Po utworzeniu maszyny wirtualnej hello, skonfiguruj hello kontrolera domeny.</span><span class="sxs-lookup"><span data-stu-id="af415-303">After hello virtual machines are created, configure hello domain controller.</span></span>

### <a name="configure-hello-domain-controller"></a><span data-ttu-id="af415-304">Konfiguracja kontrolera domeny hello</span><span class="sxs-lookup"><span data-stu-id="af415-304">Configure hello domain controller</span></span>
<span data-ttu-id="af415-305">W hello następujące kroki, skonfiguruj hello **kontrolerów domeny podstawowej ad** komputera jako kontroler domeny corp.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="af415-305">In hello following steps, configure hello **ad-primary-dc** machine as a domain controller for corp.contoso.com.</span></span>

1. <span data-ttu-id="af415-306">Otwórz hello portal hello **SQL-HA-zarządcy zasobów** grupy zasobów i wybierz hello **kontrolerów domeny podstawowej ad** maszyny.</span><span class="sxs-lookup"><span data-stu-id="af415-306">In hello portal, open hello **SQL-HA-RG** resource group and select hello **ad-primary-dc** machine.</span></span> <span data-ttu-id="af415-307">Na powitania **kontrolerów domeny podstawowej ad** bloku, kliknij przycisk **Connect** tooopen RDP plików do dostępu do pulpitu zdalnego.</span><span class="sxs-lookup"><span data-stu-id="af415-307">On hello **ad-primary-dc** blade, click **Connect** tooopen an RDP file for remote desktop access.</span></span>

    ![Połącz tooa maszyny wirtualnej](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/20-connectrdp.png)
2. <span data-ttu-id="af415-309">Zaloguj się przy użyciu konta administratora skonfigurowane (**\DomainAdmin**) i hasło (**Contoso! 0000**).</span><span class="sxs-lookup"><span data-stu-id="af415-309">Sign in with your configured administrator account (**\DomainAdmin**) and password (**Contoso!0000**).</span></span>
3. <span data-ttu-id="af415-310">Domyślnie program hello **Menedżera serwera** powinien zostać wyświetlony pulpit nawigacyjny.</span><span class="sxs-lookup"><span data-stu-id="af415-310">By default, hello **Server Manager** dashboard should be displayed.</span></span>
4. <span data-ttu-id="af415-311">Kliknij przycisk hello **Dodaj role i funkcje** łącze na powitania pulpitu nawigacyjnego.</span><span class="sxs-lookup"><span data-stu-id="af415-311">Click hello **Add roles and features** link on hello dashboard.</span></span>

    ![Menedżer serwera — Dodawanie ról](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/22-addfeatures.png)
5. <span data-ttu-id="af415-313">Wybierz **dalej** do momentu uzyskania toohello **ról serwera** sekcji.</span><span class="sxs-lookup"><span data-stu-id="af415-313">Select **Next** until you get toohello **Server Roles** section.</span></span>
6. <span data-ttu-id="af415-314">Wybierz hello **usług domenowych w usłudze Active Directory** i **serwera DNS** ról.</span><span class="sxs-lookup"><span data-stu-id="af415-314">Select hello **Active Directory Domain Services** and **DNS Server** roles.</span></span> <span data-ttu-id="af415-315">Po wyświetleniu monitu, Dodaj wszelkie dodatkowe funkcje, które są wymagane przez tych ról.</span><span class="sxs-lookup"><span data-stu-id="af415-315">When you're prompted, add any additional features that are required by these roles.</span></span>

   > [!NOTE]
   > <span data-ttu-id="af415-316">System Windows wyświetli ostrzeżenie, że nie istnieje żaden adres IP.</span><span class="sxs-lookup"><span data-stu-id="af415-316">Windows warns you that there is no static IP address.</span></span> <span data-ttu-id="af415-317">Jeśli testujesz konfiguracji powitania kliknij **Kontynuuj**.</span><span class="sxs-lookup"><span data-stu-id="af415-317">If you're testing hello configuration, click **Continue**.</span></span> <span data-ttu-id="af415-318">W scenariuszach produkcji, należy ustawić toostatic adres IP hello w hello portalu Azure, lub [Użyj programu PowerShell tooset hello statycznego adresu IP maszyny kontrolera domeny hello](../../../virtual-network/virtual-networks-reserved-private-ip.md).</span><span class="sxs-lookup"><span data-stu-id="af415-318">For production scenarios, set hello IP address toostatic in hello Azure portal, or [use PowerShell tooset hello static IP address of hello domain controller machine](../../../virtual-network/virtual-networks-reserved-private-ip.md).</span></span>
   >
   >

    ![Dodawanie ról okna dialogowego](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/23-addroles.png)
7. <span data-ttu-id="af415-320">Kliknij przycisk **dalej** aż hello **potwierdzenie** sekcji.</span><span class="sxs-lookup"><span data-stu-id="af415-320">Click **Next** until you reach hello **Confirmation** section.</span></span> <span data-ttu-id="af415-321">Wybierz hello **ponowne uruchomienie serwera docelowego hello automatycznie w razie potrzeby** pole wyboru.</span><span class="sxs-lookup"><span data-stu-id="af415-321">Select hello **Restart hello destination server automatically if required** check box.</span></span>
8. <span data-ttu-id="af415-322">Kliknij pozycję **Zainstaluj**.</span><span class="sxs-lookup"><span data-stu-id="af415-322">Click **Install**.</span></span>
9. <span data-ttu-id="af415-323">Po funkcji hello zakończenia instalowania, zwróć toohello **Menedżera serwera** pulpitu nawigacyjnego.</span><span class="sxs-lookup"><span data-stu-id="af415-323">After hello features finish installing, return toohello **Server Manager** dashboard.</span></span>
10. <span data-ttu-id="af415-324">Wybierz nowe hello **usług AD DS** opcji w okienku po lewej stronie powitania.</span><span class="sxs-lookup"><span data-stu-id="af415-324">Select hello new **AD DS** option on hello left-hand pane.</span></span>
11. <span data-ttu-id="af415-325">Kliknij przycisk hello **więcej** łącze na powitania żółty pasek ostrzeżenie.</span><span class="sxs-lookup"><span data-stu-id="af415-325">Click hello **More** link on hello yellow warning bar.</span></span>

    ![Usługi AD DS z okna dialogowego na powitania maszyny Wirtualnej serwera DNS](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/24-addsmore.png)
12. <span data-ttu-id="af415-327">W hello **akcji** kolumny hello **wszystkie szczegóły zadania serwera** okna dialogowego, kliknij przycisk **podwyższania poziomu kontrolera domeny tego serwera tooa**.</span><span class="sxs-lookup"><span data-stu-id="af415-327">In hello **Action** column of hello **All Server Task Details** dialog, click **Promote this server tooa domain controller**.</span></span>
13. <span data-ttu-id="af415-328">W hello **Kreator konfiguracji usług domenowych Active Directory**, użyj hello następujące wartości:</span><span class="sxs-lookup"><span data-stu-id="af415-328">In hello **Active Directory Domain Services Configuration Wizard**, use hello following values:</span></span>

    | <span data-ttu-id="af415-329">**Strona**</span><span class="sxs-lookup"><span data-stu-id="af415-329">**Page**</span></span> | <span data-ttu-id="af415-330">Ustawienie</span><span class="sxs-lookup"><span data-stu-id="af415-330">Setting</span></span> |
    | --- | --- |
    | <span data-ttu-id="af415-331">**Konfiguracja wdrażania**</span><span class="sxs-lookup"><span data-stu-id="af415-331">**Deployment Configuration**</span></span> |<span data-ttu-id="af415-332">**Dodaj nowy las**</span><span class="sxs-lookup"><span data-stu-id="af415-332">**Add a new forest**</span></span><br/> <span data-ttu-id="af415-333">**Nazwa domeny głównej** = corp.contoso.com</span><span class="sxs-lookup"><span data-stu-id="af415-333">**Root domain name** = corp.contoso.com</span></span> |
    | <span data-ttu-id="af415-334">**Opcje kontrolera domeny**</span><span class="sxs-lookup"><span data-stu-id="af415-334">**Domain Controller Options**</span></span> |<span data-ttu-id="af415-335">**Hasło trybu DSRM** = Contoso! 0000</span><span class="sxs-lookup"><span data-stu-id="af415-335">**DSRM Password** = Contoso!0000</span></span><br/><span data-ttu-id="af415-336">**Potwierdź hasło** = Contoso! 0000</span><span class="sxs-lookup"><span data-stu-id="af415-336">**Confirm Password** = Contoso!0000</span></span> |
14. <span data-ttu-id="af415-337">Kliknij przycisk **dalej** toogo za pośrednictwem hello innych stron w Kreatorze hello.</span><span class="sxs-lookup"><span data-stu-id="af415-337">Click **Next** toogo through hello other pages in hello wizard.</span></span> <span data-ttu-id="af415-338">Na powitania **Sprawdzanie wymagań wstępnych** upewnij się, że jest wyświetlany po wiadomość hello: **sprawdzanie wszystkich wymagań wstępnych zakończyło się pomyślnie**.</span><span class="sxs-lookup"><span data-stu-id="af415-338">On hello **Prerequisites Check** page, verify that you see hello following message: **All prerequisite checks passed successfully**.</span></span> <span data-ttu-id="af415-339">Możesz przejrzeć wszystkie odpowiednie komunikaty ostrzegawcze, ale jest możliwe toocontinue hello instalacji.</span><span class="sxs-lookup"><span data-stu-id="af415-339">You can review any applicable warning messages, but it's possible toocontinue with hello installation.</span></span>
15. <span data-ttu-id="af415-340">Kliknij pozycję **Zainstaluj**.</span><span class="sxs-lookup"><span data-stu-id="af415-340">Click **Install**.</span></span> <span data-ttu-id="af415-341">Witaj **kontrolerów domeny podstawowej ad** maszyny wirtualnej zostanie automatycznie uruchomiony ponownie.</span><span class="sxs-lookup"><span data-stu-id="af415-341">hello **ad-primary-dc** virtual machine automatically reboots.</span></span>

### <a name="note-hello-ip-address-of-hello-primary-domain-controller"></a><span data-ttu-id="af415-342">Należy pamiętać, adres IP hello hello podstawowego kontrolera domeny</span><span class="sxs-lookup"><span data-stu-id="af415-342">Note hello IP address of hello primary domain controller</span></span>

<span data-ttu-id="af415-343">Użyj hello podstawowego kontrolera domeny dla serwera DNS.</span><span class="sxs-lookup"><span data-stu-id="af415-343">Use hello primary domain controller for DNS.</span></span> <span data-ttu-id="af415-344">Należy pamiętać, adres IP kontrolera domeny podstawowej hello.</span><span class="sxs-lookup"><span data-stu-id="af415-344">Note hello primary domain controller IP address.</span></span>

<span data-ttu-id="af415-345">Adres IP kontrolera domeny podstawowej hello jednokierunkowej tooget odbywa się za pośrednictwem hello portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="af415-345">One way tooget hello primary domain controller IP address is through hello Azure portal.</span></span>

1. <span data-ttu-id="af415-346">Na powitania portalu Azure Otwórz hello grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="af415-346">On hello Azure portal, open hello resource group.</span></span>

2. <span data-ttu-id="af415-347">Kliknij przycisk hello podstawowego kontrolera domeny.</span><span class="sxs-lookup"><span data-stu-id="af415-347">Click hello primary domain controller.</span></span>

3. <span data-ttu-id="af415-348">W bloku kontrolera domeny podstawowej hello, kliknij **interfejsy sieciowe**.</span><span class="sxs-lookup"><span data-stu-id="af415-348">On hello primary domain controller blade, click **Network interfaces**.</span></span>

![Interfejsy sieciowe](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/25-primarydcip.png)

<span data-ttu-id="af415-350">Należy zwrócić uwagę hello prywatnego adresu IP dla tego serwera.</span><span class="sxs-lookup"><span data-stu-id="af415-350">Note hello private IP address for this server.</span></span>

### <a name="configure-hello-virtual-network-dns"></a><span data-ttu-id="af415-351">Skonfiguruj sieć wirtualną hello DNS</span><span class="sxs-lookup"><span data-stu-id="af415-351">Configure hello virtual network DNS</span></span>
<span data-ttu-id="af415-352">Po utworzeniu pierwszego kontrolera domeny hello i Włącz DNS na pierwszym serwerze hello, skonfiguruj toouse sieci wirtualnej hello tego serwera dla serwera DNS.</span><span class="sxs-lookup"><span data-stu-id="af415-352">After you create hello first domain controller and enable DNS on hello first server, configure hello virtual network toouse this server for DNS.</span></span>

1. <span data-ttu-id="af415-353">W portalu Azure hello kliknij hello sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="af415-353">In hello Azure portal, click on hello virtual network.</span></span>

2. <span data-ttu-id="af415-354">W obszarze **ustawienia**, kliknij przycisk **serwera DNS**.</span><span class="sxs-lookup"><span data-stu-id="af415-354">Under **Settings**, click **DNS Server**.</span></span>

3. <span data-ttu-id="af415-355">Kliknij przycisk **niestandardowe**i wpisz hello prywatnego adresu IP hello podstawowego kontrolera domeny.</span><span class="sxs-lookup"><span data-stu-id="af415-355">Click **Custom**, and type hello private IP address of hello primary domain controller.</span></span>

4. <span data-ttu-id="af415-356">Kliknij pozycję **Zapisz**.</span><span class="sxs-lookup"><span data-stu-id="af415-356">Click **Save**.</span></span>

### <a name="configure-hello-second-domain-controller"></a><span data-ttu-id="af415-357">Skonfiguruj hello kontrolera domeny</span><span class="sxs-lookup"><span data-stu-id="af415-357">Configure hello second domain controller</span></span>
<span data-ttu-id="af415-358">Po ponownym uruchomieniu hello podstawowego kontrolera domeny, można skonfigurować hello kontrolera domeny.</span><span class="sxs-lookup"><span data-stu-id="af415-358">After hello primary domain controller reboots, you can configure hello second domain controller.</span></span> <span data-ttu-id="af415-359">Jest to krok opcjonalny wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="af415-359">This optional step is for high availability.</span></span> <span data-ttu-id="af415-360">Wykonaj te kroki tooconfigure hello kontrolera domeny:</span><span class="sxs-lookup"><span data-stu-id="af415-360">Follow these steps tooconfigure hello second domain controller:</span></span>

1. <span data-ttu-id="af415-361">Otwórz hello portal hello **SQL-HA-zarządcy zasobów** grupy zasobów i wybierz hello **kontrolerów domeny pomocniczy ad** maszyny.</span><span class="sxs-lookup"><span data-stu-id="af415-361">In hello portal, open hello **SQL-HA-RG** resource group and select hello **ad-secondary-dc** machine.</span></span> <span data-ttu-id="af415-362">Na powitania **kontrolerów domeny pomocniczy ad** bloku, kliknij przycisk **Connect** tooopen RDP plików do dostępu do pulpitu zdalnego.</span><span class="sxs-lookup"><span data-stu-id="af415-362">On hello **ad-secondary-dc** blade, click **Connect** tooopen an RDP file for remote desktop access.</span></span>
2. <span data-ttu-id="af415-363">Zaloguj się przy użyciu konta administratora skonfigurowane toohello maszyny Wirtualnej (**BUILTIN\DomainAdmin**) i hasło (**Contoso! 0000**).</span><span class="sxs-lookup"><span data-stu-id="af415-363">Sign in toohello VM by using your configured administrator account (**BUILTIN\DomainAdmin**) and password (**Contoso!0000**).</span></span>
3. <span data-ttu-id="af415-364">Zmień hello preferowany adres serwera DNS adres toohello hello kontrolera domeny.</span><span class="sxs-lookup"><span data-stu-id="af415-364">Change hello preferred DNS server address toohello address of hello domain controller.</span></span>
4. <span data-ttu-id="af415-365">W **Centrum sieci i udostępniania**, kliknij przycisk hello interfejsu sieciowego.</span><span class="sxs-lookup"><span data-stu-id="af415-365">In **Network and Sharing Center**, click hello network interface.</span></span>
   <span data-ttu-id="af415-366">![Interfejs sieciowy](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/26-networkinterface.png)</span><span class="sxs-lookup"><span data-stu-id="af415-366">![Network interface](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/26-networkinterface.png)</span></span>

5. <span data-ttu-id="af415-367">Kliknij pozycję **Właściwości**.</span><span class="sxs-lookup"><span data-stu-id="af415-367">Click **Properties**.</span></span>
6. <span data-ttu-id="af415-368">Wybierz **protokół internetowy w wersji 4 (TCP/IPv4)** i kliknij przycisk **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="af415-368">Select **Internet Protocol Version 4 (TCP/IPv4)** and click **Properties**.</span></span>
7. <span data-ttu-id="af415-369">Wybierz **hello Użyj następujących adresów serwerów DNS** i określenie adresu hello hello podstawowego kontrolera domeny w **preferowany serwer DNS**.</span><span class="sxs-lookup"><span data-stu-id="af415-369">Select **Use hello following DNS server addresses** and specify hello address of hello primary domain controller in **Preferred DNS server**.</span></span>
8. <span data-ttu-id="af415-370">Kliknij przycisk **OK**, a następnie **Zamknij** toocommit hello zmiany.</span><span class="sxs-lookup"><span data-stu-id="af415-370">Click **OK**, and then **Close** toocommit hello changes.</span></span> <span data-ttu-id="af415-371">Jesteś teraz hello toojoin stanie maszyny Wirtualnej za**corp.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="af415-371">You are now able toojoin hello VM too**corp.contoso.com**.</span></span>

   >[!IMPORTANT]
   ><span data-ttu-id="af415-372">Jeśli utracisz hello pulpitu zdalnego tooyour połączenie po zmianie ustawienia DNS hello Przejdź toohello portalu i ponownie uruchom hello maszyny wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="af415-372">If you lose hello connection tooyour remote desktop after changing hello DNS setting, go toohello Azure portal and restart hello virtual machine.</span></span>

9. <span data-ttu-id="af415-373">Z hello toohello pulpitu zdalnego dodatkowy kontroler domeny, otwórz **pulpitu nawigacyjnego Menedżera serwera**.</span><span class="sxs-lookup"><span data-stu-id="af415-373">From hello remote desktop toohello secondary domain controller, open **Server Manager Dashboard**.</span></span>
10. <span data-ttu-id="af415-374">Kliknij przycisk hello **Dodaj role i funkcje** łącze na powitania pulpitu nawigacyjnego.</span><span class="sxs-lookup"><span data-stu-id="af415-374">Click hello **Add roles and features** link on hello dashboard.</span></span>

    ![Menedżer serwera — Dodawanie ról](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/22-addfeatures.png)
11. <span data-ttu-id="af415-376">Wybierz **dalej** do momentu uzyskania toohello **ról serwera** sekcji.</span><span class="sxs-lookup"><span data-stu-id="af415-376">Select **Next** until you get toohello **Server Roles** section.</span></span>
12. <span data-ttu-id="af415-377">Wybierz hello **usług domenowych w usłudze Active Directory** i **serwera DNS** ról.</span><span class="sxs-lookup"><span data-stu-id="af415-377">Select hello **Active Directory Domain Services** and **DNS Server** roles.</span></span> <span data-ttu-id="af415-378">Po wyświetleniu monitu, Dodaj wszelkie dodatkowe funkcje, które są wymagane przez tych ról.</span><span class="sxs-lookup"><span data-stu-id="af415-378">When you're prompted, add any additional features that are required by these roles.</span></span>
13. <span data-ttu-id="af415-379">Po funkcji hello zakończenia instalowania, zwróć toohello **Menedżera serwera** pulpitu nawigacyjnego.</span><span class="sxs-lookup"><span data-stu-id="af415-379">After hello features finish installing, return toohello **Server Manager** dashboard.</span></span>
14. <span data-ttu-id="af415-380">Wybierz nowe hello **usług AD DS** opcji w okienku po lewej stronie powitania.</span><span class="sxs-lookup"><span data-stu-id="af415-380">Select hello new **AD DS** option on hello left-hand pane.</span></span>
15. <span data-ttu-id="af415-381">Kliknij przycisk hello **więcej** łącze na powitania żółty pasek ostrzeżenie.</span><span class="sxs-lookup"><span data-stu-id="af415-381">Click hello **More** link on hello yellow warning bar.</span></span>
16. <span data-ttu-id="af415-382">W hello **akcji** kolumny hello **wszystkie szczegóły zadania serwera** okna dialogowego, kliknij przycisk **podwyższania poziomu kontrolera domeny tego serwera tooa**.</span><span class="sxs-lookup"><span data-stu-id="af415-382">In hello **Action** column of hello **All Server Task Details** dialog, click **Promote this server tooa domain controller**.</span></span>
17. <span data-ttu-id="af415-383">W obszarze **konfiguracji wdrożenia**, wybierz pozycję **Dodawanie domeny istniejących tooan kontrolera domeny**.</span><span class="sxs-lookup"><span data-stu-id="af415-383">Under **Deployment Configuration**, select **Add a domain controller tooan existing domain**.</span></span>
   <span data-ttu-id="af415-384">![Konfiguracja wdrażania](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/28-deploymentconfig.png)</span><span class="sxs-lookup"><span data-stu-id="af415-384">![Deployment configuration](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/28-deploymentconfig.png)</span></span>
18. <span data-ttu-id="af415-385">Kliknij pozycję **Wybierz**.</span><span class="sxs-lookup"><span data-stu-id="af415-385">Click **Select**.</span></span>
19. <span data-ttu-id="af415-386">Połącz przy użyciu konta administratora hello (**CORP. CONTOSO.COM\domainadmin**) i hasło (**Contoso! 0000**).</span><span class="sxs-lookup"><span data-stu-id="af415-386">Connect by using hello administrator account (**CORP.CONTOSO.COM\domainadmin**) and password (**Contoso!0000**).</span></span>
20. <span data-ttu-id="af415-387">W **wybierz domenę z lasu hello**, kliknij swoją domenę, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="af415-387">In **Select a domain from hello forest**, click your domain, and then click **OK**.</span></span>
21. <span data-ttu-id="af415-388">W **opcje kontrolera domeny**, użyj wartości domyślnych hello i ustawić hasło DSRM.</span><span class="sxs-lookup"><span data-stu-id="af415-388">In **Domain Controller Options**, use hello default values and set a DSRM password.</span></span>

   >[!NOTE]
   ><span data-ttu-id="af415-389">Witaj **opcje DNS** strony może ostrzeżenie, że nie można utworzyć delegowania dla tego serwera DNS.</span><span class="sxs-lookup"><span data-stu-id="af415-389">hello **DNS Options** page might warn you that a delegation for this DNS server can't be created.</span></span> <span data-ttu-id="af415-390">Można zignorować to ostrzeżenie w środowiskach nieprodukcyjnych.</span><span class="sxs-lookup"><span data-stu-id="af415-390">You can ignore this warning in non-production environments.</span></span>
22. <span data-ttu-id="af415-391">Kliknij przycisk **dalej** dopóki nie osiągnie okna dialogowego hello hello **wymagania wstępne** Sprawdź.</span><span class="sxs-lookup"><span data-stu-id="af415-391">Click **Next** until hello dialog reaches hello **Prerequisites** check.</span></span> <span data-ttu-id="af415-392">Następnie kliknij pozycję **Zainstaluj**.</span><span class="sxs-lookup"><span data-stu-id="af415-392">Then click **Install**.</span></span>

<span data-ttu-id="af415-393">Po zakończeniu zmiany konfiguracji hello powitania serwera należy ponownie uruchomić serwer hello.</span><span class="sxs-lookup"><span data-stu-id="af415-393">After hello server finishes hello configuration changes, restart hello server.</span></span>

### <a name="add-hello-private-ip-address-toohello-second-domain-controller-toohello-vpn-dns-server"></a><span data-ttu-id="af415-394">Dodaj hello prywatny adres IP toohello drugi toohello kontrolera domeny serwera DNS w sieci VPN</span><span class="sxs-lookup"><span data-stu-id="af415-394">Add hello Private IP Address toohello second domain controller toohello VPN DNS Server</span></span>

<span data-ttu-id="af415-395">W hello portalu Azure w sieci wirtualnej należy zmienić powitania serwera DNS tooinclude hello adres IP hello dodatkowy kontroler domeny.</span><span class="sxs-lookup"><span data-stu-id="af415-395">In hello Azure portal, under virtual network, change hello DNS Server tooinclude hello IP address of hello secondary domain controller.</span></span> <span data-ttu-id="af415-396">Dzięki temu hello DNS usługi nadmiarowości.</span><span class="sxs-lookup"><span data-stu-id="af415-396">This allows hello DNS service redundancy.</span></span>

### <span data-ttu-id="af415-397"><a name=DomainAccounts></a>Konfigurowanie kont domeny hello</span><span class="sxs-lookup"><span data-stu-id="af415-397"><a name=DomainAccounts></a> Configure hello domain accounts</span></span>

<span data-ttu-id="af415-398">W następnych krokach hello skonfigurujesz hello kont usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="af415-398">In hello next steps, you configure hello Active Directory accounts.</span></span> <span data-ttu-id="af415-399">Witaj poniższej tabeli przedstawiono hello kont:</span><span class="sxs-lookup"><span data-stu-id="af415-399">hello following table shows hello accounts:</span></span>

| |<span data-ttu-id="af415-400">Konto instalacji</span><span class="sxs-lookup"><span data-stu-id="af415-400">Installation account</span></span><br/> |<span data-ttu-id="af415-401">SQLServer 0</span><span class="sxs-lookup"><span data-stu-id="af415-401">sqlserver-0</span></span> <br/><span data-ttu-id="af415-402">Konto programu SQL Server i usługi agenta SQL</span><span class="sxs-lookup"><span data-stu-id="af415-402">SQL Server and SQL Agent Service account</span></span> |<span data-ttu-id="af415-403">SQLServer-1</span><span class="sxs-lookup"><span data-stu-id="af415-403">sqlserver-1</span></span><br/><span data-ttu-id="af415-404">Konto programu SQL Server i usługi agenta SQL</span><span class="sxs-lookup"><span data-stu-id="af415-404">SQL Server and SQL Agent Service account</span></span>
| --- | --- | --- | ---
|<span data-ttu-id="af415-405">**Imię**</span><span class="sxs-lookup"><span data-stu-id="af415-405">**First Name**</span></span> |<span data-ttu-id="af415-406">Instalowanie</span><span class="sxs-lookup"><span data-stu-id="af415-406">Install</span></span> |<span data-ttu-id="af415-407">SQLSvc1</span><span class="sxs-lookup"><span data-stu-id="af415-407">SQLSvc1</span></span> | <span data-ttu-id="af415-408">SQLSvc2</span><span class="sxs-lookup"><span data-stu-id="af415-408">SQLSvc2</span></span>
|<span data-ttu-id="af415-409">**SamAccountName użytkownika**</span><span class="sxs-lookup"><span data-stu-id="af415-409">**User SamAccountName**</span></span> |<span data-ttu-id="af415-410">Instalowanie</span><span class="sxs-lookup"><span data-stu-id="af415-410">Install</span></span> |<span data-ttu-id="af415-411">SQLSvc1</span><span class="sxs-lookup"><span data-stu-id="af415-411">SQLSvc1</span></span> | <span data-ttu-id="af415-412">SQLSvc2</span><span class="sxs-lookup"><span data-stu-id="af415-412">SQLSvc2</span></span>

<span data-ttu-id="af415-413">Użyj następujących hello kroki toocreate poszczególnych kont.</span><span class="sxs-lookup"><span data-stu-id="af415-413">Use hello following steps toocreate each account.</span></span>

1. <span data-ttu-id="af415-414">Zaloguj się toohello **kontrolerów domeny podstawowej ad** maszyny.</span><span class="sxs-lookup"><span data-stu-id="af415-414">Sign in toohello **ad-primary-dc** machine.</span></span>
2. <span data-ttu-id="af415-415">W **Menedżera serwera**, wybierz pozycję **narzędzia**, a następnie kliknij przycisk **Centrum administracyjne usługi Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="af415-415">In **Server Manager**, select **Tools**, and then click **Active Directory Administrative Center**.</span></span>   
3. <span data-ttu-id="af415-416">Wybierz **corp (lokalna)** w okienku po lewej stronie powitania.</span><span class="sxs-lookup"><span data-stu-id="af415-416">Select **corp (local)** from hello left pane.</span></span>
4. <span data-ttu-id="af415-417">Na powitania prawo **zadania** okienku wybierz **nowy**, a następnie kliknij przycisk **użytkownika**.</span><span class="sxs-lookup"><span data-stu-id="af415-417">On hello right **Tasks** pane, select **New**, and then click **User**.</span></span>
   <span data-ttu-id="af415-418">![Centrum administracyjne usługi Active Directory](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/29-addcnewuser.png)</span><span class="sxs-lookup"><span data-stu-id="af415-418">![Active Directory Administrative Center](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/29-addcnewuser.png)</span></span>

   >[!TIP]
   ><span data-ttu-id="af415-419">Ustaw złożone hasło dla poszczególnych kont.</span><span class="sxs-lookup"><span data-stu-id="af415-419">Set a complex password for each account.</span></span><br/> <span data-ttu-id="af415-420">W środowiskach nieprodukcyjnych toonever konta użytkownika hello zestaw wygaśnie.</span><span class="sxs-lookup"><span data-stu-id="af415-420">For non-production environments, set hello user account toonever expire.</span></span>

5. <span data-ttu-id="af415-421">Kliknij przycisk **OK** toocreate hello użytkownika.</span><span class="sxs-lookup"><span data-stu-id="af415-421">Click **OK** toocreate hello user.</span></span>
6. <span data-ttu-id="af415-422">Powtórz hello w poprzednich krokach dla każdego konta trzy hello.</span><span class="sxs-lookup"><span data-stu-id="af415-422">Repeat hello preceding steps for each of hello three accounts.</span></span>

### <a name="grant-hello-required-permissions-toohello-installation-account"></a><span data-ttu-id="af415-423">Udzielanie uprawnień hello wymagane konta instalacji toohello</span><span class="sxs-lookup"><span data-stu-id="af415-423">Grant hello required permissions toohello installation account</span></span>
1. <span data-ttu-id="af415-424">W hello **Centrum administracyjne usługi Active Directory**, wybierz pozycję **corp (lokalna)** w okienku po lewej stronie powitania.</span><span class="sxs-lookup"><span data-stu-id="af415-424">In hello **Active Directory Administrative Center**, select **corp (local)** in hello left pane.</span></span> <span data-ttu-id="af415-425">Następnie w prawej hello **zadania** okienku, kliknij przycisk **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="af415-425">Then in hello right-hand **Tasks** pane, click **Properties**.</span></span>

    ![Właściwości użytkownika CORP](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/31-addcproperties.png)
2. <span data-ttu-id="af415-427">Wybierz **rozszerzenia**, a następnie kliknij przycisk hello **zaawansowane** przycisk na powitania **zabezpieczeń** kartę.</span><span class="sxs-lookup"><span data-stu-id="af415-427">Select **Extensions**, and then click hello **Advanced** button on hello **Security** tab.</span></span>
3. <span data-ttu-id="af415-428">W hello **Zaawansowane ustawienia zabezpieczeń dla corp** okna dialogowego, kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="af415-428">In hello **Advanced Security Settings for corp** dialog, click **Add**.</span></span>
4. <span data-ttu-id="af415-429">Kliknij przycisk **Wybierz podmiot zabezpieczeń**, wyszukaj **CORP\Install**, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="af415-429">Click **Select a principal**, search for **CORP\Install**, and then click **OK**.</span></span>
5. <span data-ttu-id="af415-430">Wybierz hello **odczytywanie wszystkich właściwości** pole wyboru.</span><span class="sxs-lookup"><span data-stu-id="af415-430">Select hello **Read all properties** check box.</span></span>

6. <span data-ttu-id="af415-431">Wybierz hello **Tworzenie obiektów komputerów** pole wyboru.</span><span class="sxs-lookup"><span data-stu-id="af415-431">Select hello **Create Computer objects** check box.</span></span>

     ![Uprawnienia użytkownika Corp](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/33-addpermissions.png)
7. <span data-ttu-id="af415-433">Kliknij przycisk **OK**, a następnie kliknij przycisk **OK** ponownie.</span><span class="sxs-lookup"><span data-stu-id="af415-433">Click **OK**, and then click **OK** again.</span></span> <span data-ttu-id="af415-434">Zamknij hello **corp** okna właściwości.</span><span class="sxs-lookup"><span data-stu-id="af415-434">Close hello **corp** properties window.</span></span>

<span data-ttu-id="af415-435">Teraz, po zakończeniu konfigurowania usługi Active Directory i obiektów użytkowników hello, Utwórz dwie maszyny wirtualne z serwera SQL i serwera monitora maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="af415-435">Now that you've finished configuring Active Directory and hello user objects, create two SQL Server VMs and a witness server VM.</span></span> <span data-ttu-id="af415-436">Wszystkie trzy domeny toohello przyłączyć.</span><span class="sxs-lookup"><span data-stu-id="af415-436">Then join all three toohello domain.</span></span>

## <a name="create-sql-server-vms"></a><span data-ttu-id="af415-437">Tworzenie maszyn wirtualnych programu SQL Server</span><span class="sxs-lookup"><span data-stu-id="af415-437">Create SQL Server VMs</span></span>

<span data-ttu-id="af415-438">Utwórz trzy dodatkowe maszyny wirtualne.</span><span class="sxs-lookup"><span data-stu-id="af415-438">Create three additional virtual machines.</span></span> <span data-ttu-id="af415-439">rozwiązanie Hello wymaga dwóch maszyn wirtualnych z wystąpień programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="af415-439">hello solution requires two virtual machines with SQL Server instances.</span></span> <span data-ttu-id="af415-440">Trzeci maszyny wirtualnej będą działać jako monitor.</span><span class="sxs-lookup"><span data-stu-id="af415-440">A third virtual machine will function as a witness.</span></span> <span data-ttu-id="af415-441">Można użyć systemu Windows Server 2016 [chmury monitora](http://docs.microsoft.com/windows-server/failover-clustering/deploy-cloud-witness), jednak zgodności ze starszymi systemami operacyjnymi niniejszym dokumencie użyto maszyny wirtualnej dla monitora.</span><span class="sxs-lookup"><span data-stu-id="af415-441">Windows Server 2016 can use a [cloud witness](http://docs.microsoft.com/windows-server/failover-clustering/deploy-cloud-witness), however for consistency with previous operating systems this document uses a virtual machine for a witness.</span></span>  

<span data-ttu-id="af415-442">Przed kontynuowaniem należy wziąć pod uwagę następujące decyzje deisign hello.</span><span class="sxs-lookup"><span data-stu-id="af415-442">Before you proceed consider hello following deisign decisions.</span></span>

* <span data-ttu-id="af415-443">**Magazyn — dyskach zarządzanych Azure**</span><span class="sxs-lookup"><span data-stu-id="af415-443">**Storage - Azure Managed Disks**</span></span>

   <span data-ttu-id="af415-444">Do przechowywania maszyn wirtualnych hello dysków Azure zarządzanych.</span><span class="sxs-lookup"><span data-stu-id="af415-444">For hello virtual machine storage, use Azure Managed Disks.</span></span> <span data-ttu-id="af415-445">Firma Microsoft zaleca zarządzane dyski dla maszyn wirtualnych programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="af415-445">Microsoft recommends Managed Disks for SQL Server virtual machines.</span></span> <span data-ttu-id="af415-446">Zarządzane dysków dojść do magazynu w tle hello.</span><span class="sxs-lookup"><span data-stu-id="af415-446">Managed Disks handles storage behind hello scenes.</span></span> <span data-ttu-id="af415-447">Ponadto jeśli maszyny wirtualne z dyskami zarządzane są obsługiwane w hello tego samego zestawu dostępności Azure dystrybuuje nadmiarowość odpowiednie zasoby tooprovide hello magazynu.</span><span class="sxs-lookup"><span data-stu-id="af415-447">In addition, when virtual machines with Managed Disks are in hello same availability set, Azure distributes hello storage resources tooprovide appropriate redundancy.</span></span> <span data-ttu-id="af415-448">Aby uzyskać więcej informacji, zobacz [Omówienie usługi Azure Managed Disks](../managed-disks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="af415-448">For additional information, see [Azure Managed Disks Overview](../managed-disks-overview.md).</span></span> <span data-ttu-id="af415-449">Aby uzyskać szczegóły dotyczące dysków zarządzanych w zestawie dostępności, zobacz [używać dysków zarządzanych maszyn wirtualnych w zestawie dostępności](../manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="af415-449">For specifics about managed disks in an availability set, see [Use Managed Disks for VMs in an availability set](../manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span></span>

* <span data-ttu-id="af415-450">**Adresy IP prywatnej sieci — w środowisku produkcyjnym**</span><span class="sxs-lookup"><span data-stu-id="af415-450">**Network - Private IP addresses in production**</span></span>

   <span data-ttu-id="af415-451">W przypadku maszyn wirtualnych hello samouczku publicznych adresów IP.</span><span class="sxs-lookup"><span data-stu-id="af415-451">For hello virtual machines, this tutorial uses public IP addresses.</span></span> <span data-ttu-id="af415-452">Dzięki temu połączenia zdalnego bezpośrednio toohello maszyny wirtualnej za pośrednictwem hello internet — ułatwia czynności konfiguracyjne.</span><span class="sxs-lookup"><span data-stu-id="af415-452">This enables remote connection directly toohello virtual machine over hello internet - it makes configuration steps easier.</span></span> <span data-ttu-id="af415-453">W środowiskach produkcyjnych firma Microsoft zaleca tylko prywatnych adresów IP w kolejności tooreduce hello luk wystąpienia programu SQL Server hello zasobu maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="af415-453">In production environments, Microsoft recommends only private IP addresses in order tooreduce hello vulnerability footprint of hello SQL Server instance VM resource.</span></span>

### <a name="create-and-configure-hello-sql-server-vms"></a><span data-ttu-id="af415-454">Tworzenie i konfigurowanie maszyn wirtualnych hello programu SQL Server</span><span class="sxs-lookup"><span data-stu-id="af415-454">Create and configure hello SQL Server VMs</span></span>
<span data-ttu-id="af415-455">Następnie należy utworzyć trzy maszyny wirtualne — dwóch maszyn wirtualnych serwera SQL i maszyny Wirtualnej na dodatkowym węźle klastra.</span><span class="sxs-lookup"><span data-stu-id="af415-455">Next, create three VMs--two SQL Server VMs and a VM for an additional cluster node.</span></span> <span data-ttu-id="af415-456">toocreate hello maszyn wirtualnych, przejdź wstecz toohello **SQL-HA-zarządcy zasobów** grupy zasobów, kliknij przycisk **Dodaj**, Wyszukiwanie elementu galerii odpowiednie hello, kliknij przycisk **maszyny wirtualnej**, a następnie Kliknij przycisk **z galerii**.</span><span class="sxs-lookup"><span data-stu-id="af415-456">toocreate each of hello VMs, go back toohello **SQL-HA-RG** resource group, click **Add**, search for hello appropriate gallery item, click **Virtual Machine**, and then click **From Gallery**.</span></span> <span data-ttu-id="af415-457">Użyj informacji hello w powitania po toohelp tabeli tworzenia maszyn wirtualnych hello:</span><span class="sxs-lookup"><span data-stu-id="af415-457">Use hello information in hello following table toohelp you create hello VMs:</span></span>


| <span data-ttu-id="af415-458">Strona</span><span class="sxs-lookup"><span data-stu-id="af415-458">Page</span></span> | <span data-ttu-id="af415-459">VM1</span><span class="sxs-lookup"><span data-stu-id="af415-459">VM1</span></span> | <span data-ttu-id="af415-460">MASZYNY VM2</span><span class="sxs-lookup"><span data-stu-id="af415-460">VM2</span></span> | <span data-ttu-id="af415-461">VM3</span><span class="sxs-lookup"><span data-stu-id="af415-461">VM3</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="af415-462">Wybierz element galerii odpowiednie hello</span><span class="sxs-lookup"><span data-stu-id="af415-462">Select hello appropriate gallery item</span></span> |<span data-ttu-id="af415-463">**Windows Server 2016 Datacenter**</span><span class="sxs-lookup"><span data-stu-id="af415-463">**Windows Server 2016 Datacenter**</span></span> |<span data-ttu-id="af415-464">**SQL Server 2016 SP1 Enterprise w systemie Windows Server 2016**</span><span class="sxs-lookup"><span data-stu-id="af415-464">**SQL Server 2016 SP1 Enterprise on Windows Server 2016**</span></span> |<span data-ttu-id="af415-465">**SQL Server 2016 SP1 Enterprise w systemie Windows Server 2016**</span><span class="sxs-lookup"><span data-stu-id="af415-465">**SQL Server 2016 SP1 Enterprise on Windows Server 2016**</span></span> |
| <span data-ttu-id="af415-466">Konfiguracja maszyny wirtualnej **podstawy**</span><span class="sxs-lookup"><span data-stu-id="af415-466">Virtual machine configuration **Basics**</span></span> |<span data-ttu-id="af415-467">**Nazwa** = fsw klastra</span><span class="sxs-lookup"><span data-stu-id="af415-467">**Name** = cluster-fsw</span></span><br/><span data-ttu-id="af415-468">**Nazwa użytkownika** = administrator domeny</span><span class="sxs-lookup"><span data-stu-id="af415-468">**User Name** = DomainAdmin</span></span><br/><span data-ttu-id="af415-469">**Hasło** = Contoso! 0000</span><span class="sxs-lookup"><span data-stu-id="af415-469">**Password** = Contoso!0000</span></span><br/><span data-ttu-id="af415-470">**Subskrypcja** = subskrypcji</span><span class="sxs-lookup"><span data-stu-id="af415-470">**Subscription** = Your subscription</span></span><br/><span data-ttu-id="af415-471">**Grupa zasobów** = SQL-HA-zarządcy zasobów</span><span class="sxs-lookup"><span data-stu-id="af415-471">**Resource group** = SQL-HA-RG</span></span><br/><span data-ttu-id="af415-472">**Lokalizacja** = Twojej lokalizacji platformy azure</span><span class="sxs-lookup"><span data-stu-id="af415-472">**Location** = Your azure location</span></span> |<span data-ttu-id="af415-473">**Nazwa** sqlserver-0 =</span><span class="sxs-lookup"><span data-stu-id="af415-473">**Name** = sqlserver-0</span></span><br/><span data-ttu-id="af415-474">**Nazwa użytkownika** = administrator domeny</span><span class="sxs-lookup"><span data-stu-id="af415-474">**User Name** = DomainAdmin</span></span><br/><span data-ttu-id="af415-475">**Hasło** = Contoso! 0000</span><span class="sxs-lookup"><span data-stu-id="af415-475">**Password** = Contoso!0000</span></span><br/><span data-ttu-id="af415-476">**Subskrypcja** = subskrypcji</span><span class="sxs-lookup"><span data-stu-id="af415-476">**Subscription** = Your subscription</span></span><br/><span data-ttu-id="af415-477">**Grupa zasobów** = SQL-HA-zarządcy zasobów</span><span class="sxs-lookup"><span data-stu-id="af415-477">**Resource group** = SQL-HA-RG</span></span><br/><span data-ttu-id="af415-478">**Lokalizacja** = Twojej lokalizacji platformy azure</span><span class="sxs-lookup"><span data-stu-id="af415-478">**Location** = Your azure location</span></span> |<span data-ttu-id="af415-479">**Nazwa** sqlserver-1</span><span class="sxs-lookup"><span data-stu-id="af415-479">**Name** = sqlserver-1</span></span><br/><span data-ttu-id="af415-480">**Nazwa użytkownika** = administrator domeny</span><span class="sxs-lookup"><span data-stu-id="af415-480">**User Name** = DomainAdmin</span></span><br/><span data-ttu-id="af415-481">**Hasło** = Contoso! 0000</span><span class="sxs-lookup"><span data-stu-id="af415-481">**Password** = Contoso!0000</span></span><br/><span data-ttu-id="af415-482">**Subskrypcja** = subskrypcji</span><span class="sxs-lookup"><span data-stu-id="af415-482">**Subscription** = Your subscription</span></span><br/><span data-ttu-id="af415-483">**Grupa zasobów** = SQL-HA-zarządcy zasobów</span><span class="sxs-lookup"><span data-stu-id="af415-483">**Resource group** = SQL-HA-RG</span></span><br/><span data-ttu-id="af415-484">**Lokalizacja** = Twojej lokalizacji platformy azure</span><span class="sxs-lookup"><span data-stu-id="af415-484">**Location** = Your azure location</span></span> |
| <span data-ttu-id="af415-485">Konfiguracja maszyny wirtualnej **rozmiaru**</span><span class="sxs-lookup"><span data-stu-id="af415-485">Virtual machine configuration **Size**</span></span> |<span data-ttu-id="af415-486">**ROZMIAR** = DS1\_V2 (1 rdzeń, 3.5 GB)</span><span class="sxs-lookup"><span data-stu-id="af415-486">**SIZE** = DS1\_V2 (1 core, 3.5 GB)</span></span> |<span data-ttu-id="af415-487">**ROZMIAR** = DS2\_V2 (2 rdzenie, 7 GB)</span><span class="sxs-lookup"><span data-stu-id="af415-487">**SIZE** = DS2\_V2 (2 cores, 7 GB)</span></span></br><span data-ttu-id="af415-488">rozmiar Hello musi obsługiwać magazynu SSD (obsługi dysków Premium.</span><span class="sxs-lookup"><span data-stu-id="af415-488">hello size must support SSD storage (Premium disk support.</span></span> <span data-ttu-id="af415-489">))</span><span class="sxs-lookup"><span data-stu-id="af415-489">))</span></span> |<span data-ttu-id="af415-490">**ROZMIAR** = DS2\_V2 (2 rdzenie, 7 GB)</span><span class="sxs-lookup"><span data-stu-id="af415-490">**SIZE** = DS2\_V2 (2 cores, 7 GB)</span></span> |
| <span data-ttu-id="af415-491">Konfiguracja maszyny wirtualnej **ustawienia**</span><span class="sxs-lookup"><span data-stu-id="af415-491">Virtual machine configuration **Settings**</span></span> |<span data-ttu-id="af415-492">**Magazyn**: Użyj zarządzanego dysków.</span><span class="sxs-lookup"><span data-stu-id="af415-492">**Storage**: Use managed disks.</span></span><br/><span data-ttu-id="af415-493">**Sieć wirtualna** = autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="af415-493">**Virtual network** = autoHAVNET</span></span><br/><span data-ttu-id="af415-494">**Podsieci** = sqlsubnet(10.1.1.0/24)</span><span class="sxs-lookup"><span data-stu-id="af415-494">**Subnet** = sqlsubnet(10.1.1.0/24)</span></span><br/><span data-ttu-id="af415-495">**Publiczny adres IP** wygenerowanej automatycznie.</span><span class="sxs-lookup"><span data-stu-id="af415-495">**Public IP address** automatically generated.</span></span><br/><span data-ttu-id="af415-496">**Grupy zabezpieczeń sieci** = Brak</span><span class="sxs-lookup"><span data-stu-id="af415-496">**Network security group** = None</span></span><br/><span data-ttu-id="af415-497">**Monitorowanie diagnostyki** = włączone</span><span class="sxs-lookup"><span data-stu-id="af415-497">**Monitoring Diagnostics** = Enabled</span></span><br/><span data-ttu-id="af415-498">**Konto magazynu diagnostyki** = Użyj konta usługi storage automatycznie generowanych</span><span class="sxs-lookup"><span data-stu-id="af415-498">**Diagnostics storage account** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="af415-499">**Zestaw dostępności** = sqlAvailabilitySet</span><span class="sxs-lookup"><span data-stu-id="af415-499">**Availability set** = sqlAvailabilitySet</span></span><br/> |<span data-ttu-id="af415-500">**Magazyn**: Użyj zarządzanego dysków.</span><span class="sxs-lookup"><span data-stu-id="af415-500">**Storage**: Use managed disks.</span></span><br/><span data-ttu-id="af415-501">**Sieć wirtualna** = autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="af415-501">**Virtual network** = autoHAVNET</span></span><br/><span data-ttu-id="af415-502">**Podsieci** = sqlsubnet(10.1.1.0/24)</span><span class="sxs-lookup"><span data-stu-id="af415-502">**Subnet** = sqlsubnet(10.1.1.0/24)</span></span><br/><span data-ttu-id="af415-503">**Publiczny adres IP** wygenerowanej automatycznie.</span><span class="sxs-lookup"><span data-stu-id="af415-503">**Public IP address** automatically generated.</span></span><br/><span data-ttu-id="af415-504">**Grupy zabezpieczeń sieci** = Brak</span><span class="sxs-lookup"><span data-stu-id="af415-504">**Network security group** = None</span></span><br/><span data-ttu-id="af415-505">**Monitorowanie diagnostyki** = włączone</span><span class="sxs-lookup"><span data-stu-id="af415-505">**Monitoring Diagnostics** = Enabled</span></span><br/><span data-ttu-id="af415-506">**Konto magazynu diagnostyki** = Użyj konta usługi storage automatycznie generowanych</span><span class="sxs-lookup"><span data-stu-id="af415-506">**Diagnostics storage account** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="af415-507">**Zestaw dostępności** = sqlAvailabilitySet</span><span class="sxs-lookup"><span data-stu-id="af415-507">**Availability set** = sqlAvailabilitySet</span></span><br/> |<span data-ttu-id="af415-508">**Magazyn**: Użyj zarządzanego dysków.</span><span class="sxs-lookup"><span data-stu-id="af415-508">**Storage**: Use managed disks.</span></span><br/><span data-ttu-id="af415-509">**Sieć wirtualna** = autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="af415-509">**Virtual network** = autoHAVNET</span></span><br/><span data-ttu-id="af415-510">**Podsieci** = sqlsubnet(10.1.1.0/24)</span><span class="sxs-lookup"><span data-stu-id="af415-510">**Subnet** = sqlsubnet(10.1.1.0/24)</span></span><br/><span data-ttu-id="af415-511">**Publiczny adres IP** wygenerowanej automatycznie.</span><span class="sxs-lookup"><span data-stu-id="af415-511">**Public IP address** automatically generated.</span></span><br/><span data-ttu-id="af415-512">**Grupy zabezpieczeń sieci** = Brak</span><span class="sxs-lookup"><span data-stu-id="af415-512">**Network security group** = None</span></span><br/><span data-ttu-id="af415-513">**Monitorowanie diagnostyki** = włączone</span><span class="sxs-lookup"><span data-stu-id="af415-513">**Monitoring Diagnostics** = Enabled</span></span><br/><span data-ttu-id="af415-514">**Konto magazynu diagnostyki** = Użyj konta usługi storage automatycznie generowanych</span><span class="sxs-lookup"><span data-stu-id="af415-514">**Diagnostics storage account** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="af415-515">**Zestaw dostępności** = sqlAvailabilitySet</span><span class="sxs-lookup"><span data-stu-id="af415-515">**Availability set** = sqlAvailabilitySet</span></span><br/> |
| <span data-ttu-id="af415-516">Konfiguracja maszyny wirtualnej **ustawienia programu SQL Server**</span><span class="sxs-lookup"><span data-stu-id="af415-516">Virtual machine configuration **SQL Server settings**</span></span> |<span data-ttu-id="af415-517">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="af415-517">Not applicable</span></span> |<span data-ttu-id="af415-518">**Łączność z serwerem SQL** = Private (w ramach sieci wirtualnej)</span><span class="sxs-lookup"><span data-stu-id="af415-518">**SQL connectivity** = Private (within Virtual Network)</span></span><br/><span data-ttu-id="af415-519">**Port** = 1433</span><span class="sxs-lookup"><span data-stu-id="af415-519">**Port** = 1433</span></span><br/><span data-ttu-id="af415-520">**Uwierzytelnianie SQL** = wyłączone</span><span class="sxs-lookup"><span data-stu-id="af415-520">**SQL Authentication** = Disable</span></span><br/><span data-ttu-id="af415-521">**Konfiguracja magazynu** = ogólne</span><span class="sxs-lookup"><span data-stu-id="af415-521">**Storage configuration** = General</span></span><br/><span data-ttu-id="af415-522">**Automatyczne stosowanie poprawek** = niedziela, 2:00</span><span class="sxs-lookup"><span data-stu-id="af415-522">**Automated patching** = Sunday at 2:00</span></span><br/><span data-ttu-id="af415-523">**Automatyczne kopie zapasowe** = wyłączone</span><span class="sxs-lookup"><span data-stu-id="af415-523">**Automated backup** = Disabled</span></span></br><span data-ttu-id="af415-524">**Integracja magazynu kluczy Azure** = wyłączone</span><span class="sxs-lookup"><span data-stu-id="af415-524">**Azure Key Vault integration** = Disabled</span></span> |<span data-ttu-id="af415-525">**Łączność z serwerem SQL** = Private (w ramach sieci wirtualnej)</span><span class="sxs-lookup"><span data-stu-id="af415-525">**SQL connectivity** = Private (within Virtual Network)</span></span><br/><span data-ttu-id="af415-526">**Port** = 1433</span><span class="sxs-lookup"><span data-stu-id="af415-526">**Port** = 1433</span></span><br/><span data-ttu-id="af415-527">**Uwierzytelnianie SQL** = wyłączone</span><span class="sxs-lookup"><span data-stu-id="af415-527">**SQL Authentication** = Disable</span></span><br/><span data-ttu-id="af415-528">**Konfiguracja magazynu** = ogólne</span><span class="sxs-lookup"><span data-stu-id="af415-528">**Storage configuration** = General</span></span><br/><span data-ttu-id="af415-529">**Automatyczne stosowanie poprawek** = niedziela, 2:00</span><span class="sxs-lookup"><span data-stu-id="af415-529">**Automated patching** = Sunday at 2:00</span></span><br/><span data-ttu-id="af415-530">**Automatyczne kopie zapasowe** = wyłączone</span><span class="sxs-lookup"><span data-stu-id="af415-530">**Automated backup** = Disabled</span></span></br><span data-ttu-id="af415-531">**Integracja magazynu kluczy Azure** = wyłączone</span><span class="sxs-lookup"><span data-stu-id="af415-531">**Azure Key Vault integration** = Disabled</span></span> |

<br/>

> [!NOTE]
> <span data-ttu-id="af415-532">rozmiary Hello sugerowane tutaj są przeznaczone do testowania grup dostępności w maszynach wirtualnych platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="af415-532">hello machine sizes suggested here are meant for testing availability groups in Azure VMs.</span></span> <span data-ttu-id="af415-533">Witaj najlepszą wydajność obciążeń produkcyjnych, zobacz hello zalecenia dotyczące programu SQL Server rozmiary i konfiguracji [wydajności najlepsze rozwiązania dotyczące programu SQL Server na maszynach wirtualnych Azure](virtual-machines-windows-sql-performance.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="af415-533">For hello best performance on production workloads, see hello recommendations for SQL Server machine sizes and configuration in [Performance best practices for SQL Server in Azure virtual machines](virtual-machines-windows-sql-performance.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>
>
>

<span data-ttu-id="af415-534">Po hello trzy maszyny wirtualne są w pełni zaaprowizowanym, należy toojoin je toohello **corp.contoso.com** domeny i przyznać CORP\Install maszyny toohello prawa administracyjne.</span><span class="sxs-lookup"><span data-stu-id="af415-534">After hello three VMs are fully provisioned, you need toojoin them toohello **corp.contoso.com** domain and grant CORP\Install administrative rights toohello machines.</span></span>

### <span data-ttu-id="af415-535"><a name="joinDomain"></a>Dołącz do domeny toohello serwerów hello</span><span class="sxs-lookup"><span data-stu-id="af415-535"><a name="joinDomain"></a>Join hello servers toohello domain</span></span>

<span data-ttu-id="af415-536">Jesteś teraz możliwe toojoin hello maszyn wirtualnych za**corp.contoso.com**. Następujące hello zarówno hello maszynach wirtualnych serwera SQL, jak i plik hello udziału serwera monitora:</span><span class="sxs-lookup"><span data-stu-id="af415-536">You're now able toojoin hello VMs too**corp.contoso.com**. Do hello following for both hello SQL Server VMs and hello file share witness server:</span></span>

1. <span data-ttu-id="af415-537">Połączenie zdalne toohello maszynę wirtualną z **BUILTIN\DomainAdmin**.</span><span class="sxs-lookup"><span data-stu-id="af415-537">Remotely connect toohello virtual machine with **BUILTIN\DomainAdmin**.</span></span>
2. <span data-ttu-id="af415-538">W **Menedżera serwera**, kliknij przycisk **lokalnego serwera**.</span><span class="sxs-lookup"><span data-stu-id="af415-538">In **Server Manager**, click **Local Server**.</span></span>
3. <span data-ttu-id="af415-539">Kliknij przycisk hello **grupy roboczej** łącza.</span><span class="sxs-lookup"><span data-stu-id="af415-539">Click hello **WORKGROUP** link.</span></span>
4. <span data-ttu-id="af415-540">W hello **nazwy komputera** kliknij **zmiany**.</span><span class="sxs-lookup"><span data-stu-id="af415-540">In hello **Computer Name** section, click **Change**.</span></span>
5. <span data-ttu-id="af415-541">Wybierz hello **domeny** pole wyboru i wpisz **corp.contoso.com** w polu tekstowym hello.</span><span class="sxs-lookup"><span data-stu-id="af415-541">Select hello **Domain** check box and type **corp.contoso.com** in hello text box.</span></span> <span data-ttu-id="af415-542">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="af415-542">Click **OK**.</span></span>
6. <span data-ttu-id="af415-543">W hello **zabezpieczenia systemu Windows** okno podręczne, podaj poświadczenia hello hello domyślnego konta administratora domeny (**CORP\DomainAdmin**) i hasło hello (**Contoso! 0000**).</span><span class="sxs-lookup"><span data-stu-id="af415-543">In hello **Windows Security** popup dialog, specify hello credentials for hello default domain administrator account (**CORP\DomainAdmin**) and hello password (**Contoso!0000**).</span></span>
7. <span data-ttu-id="af415-544">Po wyświetleniu komunikatu "domeny corp.contoso.com toohello powitalnej" hello, kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="af415-544">When you see hello "Welcome toohello corp.contoso.com domain" message, click **OK**.</span></span>
8. <span data-ttu-id="af415-545">Kliknij przycisk **Zamknij**, a następnie kliknij przycisk **Uruchom ponownie teraz** w oknie dialogowym podręcznego hello.</span><span class="sxs-lookup"><span data-stu-id="af415-545">Click **Close**, and then click **Restart Now** in hello popup dialog.</span></span>

### <a name="add-hello-corpinstall-user-as-an-administrator-on-each-cluster-vm"></a><span data-ttu-id="af415-546">Dodaj użytkownika Corp\Install hello jako administrator na każdym klastrze maszyny Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="af415-546">Add hello Corp\Install user as an administrator on each cluster VM</span></span>

<span data-ttu-id="af415-547">Po uruchomieniu każdej maszyny wirtualnej jako członek domeny hello dodać **CORP\Install** jako członek grupy Administratorzy lokalni hello.</span><span class="sxs-lookup"><span data-stu-id="af415-547">After each virtual machine restarts as a member of hello domain, add **CORP\Install** as a member of hello local administrators group.</span></span>

1. <span data-ttu-id="af415-548">Poczekaj, aż hello maszyna wirtualna zostanie ponownie uruchomiony, a następnie uruchom plik RDP hello ponownie z toosign kontrolera domeny podstawowej hello w zbyt**sqlserver 0** przy użyciu hello **CORP\DomainAdmin** konta.</span><span class="sxs-lookup"><span data-stu-id="af415-548">Wait until hello VM is restarted, then launch hello RDP file again from hello primary domain controller toosign in too**sqlserver-0** by using hello **CORP\DomainAdmin** account.</span></span>
   >[!TIP]
   ><span data-ttu-id="af415-549">Upewnij się, że zalogujesz się przy użyciu konta administratora domeny hello.</span><span class="sxs-lookup"><span data-stu-id="af415-549">Make sure that you sign in with hello domain administrator account.</span></span> <span data-ttu-id="af415-550">W poprzednich krokach hello zostały przy użyciu konta administratora w WBUDOWANE hello.</span><span class="sxs-lookup"><span data-stu-id="af415-550">In hello previous steps, you were using hello BUILT IN administrator account.</span></span> <span data-ttu-id="af415-551">Teraz, hello serwera znajduje się w domenie hello, użyj konta domeny hello.</span><span class="sxs-lookup"><span data-stu-id="af415-551">Now that hello server is in hello domain, use hello domain account.</span></span> <span data-ttu-id="af415-552">W sesji protokołu RDP, określ *domeny*\\*username*.</span><span class="sxs-lookup"><span data-stu-id="af415-552">In your RDP session, specify *DOMAIN*\\*username*.</span></span>

2. <span data-ttu-id="af415-553">W **Menedżera serwera**, wybierz pozycję **narzędzia**, a następnie kliknij przycisk **Zarządzanie komputerem**.</span><span class="sxs-lookup"><span data-stu-id="af415-553">In **Server Manager**, select **Tools**, and then click **Computer Management**.</span></span>
3. <span data-ttu-id="af415-554">W hello **Zarządzanie komputerem** okna, rozwiń węzeł **lokalnych użytkowników i grup**, a następnie wybierz **grup**.</span><span class="sxs-lookup"><span data-stu-id="af415-554">In hello **Computer Management** window, expand **Local Users and Groups**, and then select **Groups**.</span></span>
4. <span data-ttu-id="af415-555">Kliknij dwukrotnie hello **Administratorzy** grupy.</span><span class="sxs-lookup"><span data-stu-id="af415-555">Double-click hello **Administrators** group.</span></span>
5. <span data-ttu-id="af415-556">W hello **właściwości Administratorzy** okna dialogowego, kliknij przycisk hello **Dodaj** przycisku.</span><span class="sxs-lookup"><span data-stu-id="af415-556">In hello **Administrators Properties** dialog, click hello **Add** button.</span></span>
6. <span data-ttu-id="af415-557">Wprowadź nazwę użytkownika hello **CORP\Install**, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="af415-557">Enter hello user **CORP\Install**, and then click **OK**.</span></span>
7. <span data-ttu-id="af415-558">Kliknij przycisk **OK** tooclose hello **właściwości administratora** okna dialogowego.</span><span class="sxs-lookup"><span data-stu-id="af415-558">Click **OK** tooclose hello **Administrator Properties** dialog.</span></span>
8. <span data-ttu-id="af415-559">Powtórz poprzednie kroki hello na **sqlserver 1** i **fsw klastra**.</span><span class="sxs-lookup"><span data-stu-id="af415-559">Repeat hello previous steps on **sqlserver-1** and **cluster-fsw**.</span></span>

### <span data-ttu-id="af415-560"><a name="setServiceAccount"></a>Ustawianie konta usługi programu SQL Server hello</span><span class="sxs-lookup"><span data-stu-id="af415-560"><a name="setServiceAccount"></a>Set hello SQL Server service accounts</span></span>

<span data-ttu-id="af415-561">Na każdej maszynie Wirtualnej serwera SQL Skonfiguruj konto usługi programu SQL Server hello.</span><span class="sxs-lookup"><span data-stu-id="af415-561">On each SQL Server VM, set hello SQL Server service account.</span></span> <span data-ttu-id="af415-562">Za pomocą kont hello utworzony podczas możesz [skonfigurowane konta domeny hello](#DomainAccounts).</span><span class="sxs-lookup"><span data-stu-id="af415-562">Use hello accounts that you created when you [configured hello domain accounts](#DomainAccounts).</span></span>

1. <span data-ttu-id="af415-563">Otwórz **programu SQL Server Configuration Manager**.</span><span class="sxs-lookup"><span data-stu-id="af415-563">Open **SQL Server Configuration Manager**.</span></span>
2. <span data-ttu-id="af415-564">Kliknij prawym przyciskiem myszy hello usługi SQL Server, a następnie kliknij przycisk **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="af415-564">Right-click hello SQL Server service, and then click **Properties**.</span></span>
3. <span data-ttu-id="af415-565">Ustaw hello konta i hasło.</span><span class="sxs-lookup"><span data-stu-id="af415-565">Set hello account and password.</span></span>
4. <span data-ttu-id="af415-566">Powtórz te czynności na powitania innych maszyn wirtualnych serwera SQL.</span><span class="sxs-lookup"><span data-stu-id="af415-566">Repeat these steps on hello other SQL Server VM.</span></span>  

<span data-ttu-id="af415-567">Dla grup dostępności programu SQL Server każda z maszyn wirtualnych serwera SQL musi toorun jako konto domeny.</span><span class="sxs-lookup"><span data-stu-id="af415-567">For SQL Server availability groups, each SQL Server VM needs toorun as a domain account.</span></span>

### <a name="create-a-sign-in-on-each-sql-server-vm-for-hello-installation-account"></a><span data-ttu-id="af415-568">Utwórz logowanie na każdej maszynie Wirtualnej serwera SQL dla konta instalacji hello</span><span class="sxs-lookup"><span data-stu-id="af415-568">Create a sign-in on each SQL Server VM for hello installation account</span></span>

<span data-ttu-id="af415-569">Użyj grupy dostępności hello tooconfigure hello instalacji konta (CORP\install).</span><span class="sxs-lookup"><span data-stu-id="af415-569">Use hello installation account (CORP\install) tooconfigure hello availability group.</span></span> <span data-ttu-id="af415-570">To konto wymaga toobe członkiem hello **sysadmin** stałej roli serwera na każdej maszynie Wirtualnej serwera SQL.</span><span class="sxs-lookup"><span data-stu-id="af415-570">This account needs toobe a member of hello **sysadmin** fixed server role on each SQL Server VM.</span></span> <span data-ttu-id="af415-571">Witaj następujące kroki tworzenia logowanie dla konta instalacji hello:</span><span class="sxs-lookup"><span data-stu-id="af415-571">hello following steps create a sign-in for hello installation account:</span></span>

1. <span data-ttu-id="af415-572">Łączenie się toohello serwera za pośrednictwem hello protokołu RDP (Remote Desktop) przy użyciu hello  *\<MachineName\>\DomainAdmin* konta.</span><span class="sxs-lookup"><span data-stu-id="af415-572">Connect toohello server through hello Remote Desktop Protocol (RDP) by using hello *\<MachineName\>\DomainAdmin* account.</span></span>

1. <span data-ttu-id="af415-573">Otwórz program SQL Server Management Studio i połącz toohello lokalne wystąpienie programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="af415-573">Open SQL Server Management Studio and connect toohello local instance of SQL Server.</span></span>

1. <span data-ttu-id="af415-574">W **Eksplorator obiektów**, kliknij przycisk **zabezpieczeń**.</span><span class="sxs-lookup"><span data-stu-id="af415-574">In **Object Explorer**, click **Security**.</span></span>

1. <span data-ttu-id="af415-575">Kliknij prawym przyciskiem myszy **logowania**.</span><span class="sxs-lookup"><span data-stu-id="af415-575">Right-click **Logins**.</span></span> <span data-ttu-id="af415-576">Kliknij przycisk **nowe dane logowania**.</span><span class="sxs-lookup"><span data-stu-id="af415-576">Click **New Login**.</span></span>

1. <span data-ttu-id="af415-577">W **nowe dane logowania -**, kliknij przycisk **wyszukiwania**.</span><span class="sxs-lookup"><span data-stu-id="af415-577">In **Login - New**, click **Search**.</span></span>

1. <span data-ttu-id="af415-578">Kliknij przycisk **lokalizacje**.</span><span class="sxs-lookup"><span data-stu-id="af415-578">Click **Locations**.</span></span>

1. <span data-ttu-id="af415-579">Wprowadź poświadczenia hello domeny administratora sieci.</span><span class="sxs-lookup"><span data-stu-id="af415-579">Enter hello domain administrator network credentials.</span></span>

1. <span data-ttu-id="af415-580">Użyj konta instalacji hello.</span><span class="sxs-lookup"><span data-stu-id="af415-580">Use hello installation account.</span></span>

1. <span data-ttu-id="af415-581">Ustaw hello logowania toobe członkiem hello **sysadmin** stałej roli serwera.</span><span class="sxs-lookup"><span data-stu-id="af415-581">Set hello sign-in toobe a member of hello **sysadmin** fixed server role.</span></span>

1. <span data-ttu-id="af415-582">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="af415-582">Click **OK**.</span></span>

<span data-ttu-id="af415-583">Powtórz hello w poprzednich krokach na powitania innych maszyn wirtualnych serwera SQL.</span><span class="sxs-lookup"><span data-stu-id="af415-583">Repeat hello preceding steps on hello other SQL Server VM.</span></span>

## <a name="add-failover-clustering-features-tooboth-sql-server-vms"></a><span data-ttu-id="af415-584">Dodaj tooboth funkcji Klaster pracy awaryjnej maszyn wirtualnych programu SQL Server</span><span class="sxs-lookup"><span data-stu-id="af415-584">Add Failover Clustering features tooboth SQL Server VMs</span></span>

<span data-ttu-id="af415-585">funkcji Klaster pracy awaryjnej tooadd hello na obu maszynach wirtualnych serwera SQL:</span><span class="sxs-lookup"><span data-stu-id="af415-585">tooadd Failover Clustering features, do hello following on both SQL Server VMs:</span></span>

1. <span data-ttu-id="af415-586">Łączenie maszyny wirtualnej programu SQL Server toohello za pośrednictwem hello protokołu RDP (Remote Desktop) przy użyciu hello *CORP\install* konta.</span><span class="sxs-lookup"><span data-stu-id="af415-586">Connect toohello SQL Server virtual machine through hello Remote Desktop Protocol (RDP) by using hello *CORP\install* account.</span></span> <span data-ttu-id="af415-587">Otwórz **pulpitu nawigacyjnego Menedżera serwera**.</span><span class="sxs-lookup"><span data-stu-id="af415-587">Open **Server Manager Dashboard**.</span></span>
2. <span data-ttu-id="af415-588">Kliknij przycisk hello **Dodaj role i funkcje** łącze na powitania pulpitu nawigacyjnego.</span><span class="sxs-lookup"><span data-stu-id="af415-588">Click hello **Add roles and features** link on hello dashboard.</span></span>

    ![Menedżer serwera — Dodawanie ról](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/22-addfeatures.png)
3. <span data-ttu-id="af415-590">Wybierz **dalej** do momentu uzyskania toohello **funkcji serwera** sekcji.</span><span class="sxs-lookup"><span data-stu-id="af415-590">Select **Next** until you get toohello **Server Features** section.</span></span>
4. <span data-ttu-id="af415-591">W **funkcje**, wybierz pozycję **klaster pracy awaryjnej**.</span><span class="sxs-lookup"><span data-stu-id="af415-591">In **Features**, select **Failover Clustering**.</span></span>
5. <span data-ttu-id="af415-592">Dodaj wszelkie dodatkowe funkcje wymagane.</span><span class="sxs-lookup"><span data-stu-id="af415-592">Add any additional required features.</span></span>
6. <span data-ttu-id="af415-593">Kliknij przycisk **zainstalować** tooadd hello funkcji.</span><span class="sxs-lookup"><span data-stu-id="af415-593">Click **Install** tooadd hello features.</span></span>

<span data-ttu-id="af415-594">Powtórz kroki hello na powitania od innych maszyn wirtualnych serwera SQL.</span><span class="sxs-lookup"><span data-stu-id="af415-594">Repeat hello steps on hello other SQL Server VM.</span></span>

## <a name="a-nameendpoint-firewall-configure-hello-firewall-on-each-sql-server-vm"></a><span data-ttu-id="af415-595"><a name="endpoint-firewall">Skonfiguruj zaporę hello na każdej maszynie Wirtualnej serwera SQL</span><span class="sxs-lookup"><span data-stu-id="af415-595"><a name="endpoint-firewall"> Configure hello firewall on each SQL Server VM</span></span>

<span data-ttu-id="af415-596">rozwiązanie Hello wymaga hello następujące porty TCP toobe otwarcia w zaporze hello:</span><span class="sxs-lookup"><span data-stu-id="af415-596">hello solution requires hello following TCP ports toobe open in hello firewall:</span></span>

- <span data-ttu-id="af415-597">**Program SQL Server wirtualna**:</span><span class="sxs-lookup"><span data-stu-id="af415-597">**SQL Server VM**:</span></span><br/>
   <span data-ttu-id="af415-598">Port 1433 dla domyślnego wystąpienia programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="af415-598">Port 1433 for a default instance of SQL Server.</span></span>
- <span data-ttu-id="af415-599">**Sondę modułu równoważenia obciążenia Azure:**</span><span class="sxs-lookup"><span data-stu-id="af415-599">**Azure load balancer probe:**</span></span><br/>
   <span data-ttu-id="af415-600">Dowolny dostępny port.</span><span class="sxs-lookup"><span data-stu-id="af415-600">Any available port.</span></span> <span data-ttu-id="af415-601">Przykłady często używają 59999.</span><span class="sxs-lookup"><span data-stu-id="af415-601">Examples frequently use 59999.</span></span>
- <span data-ttu-id="af415-602">**Punktu końcowego dublowania bazy danych:**</span><span class="sxs-lookup"><span data-stu-id="af415-602">**Database mirroring endpoint:**</span></span> <br/>
   <span data-ttu-id="af415-603">Dowolny dostępny port.</span><span class="sxs-lookup"><span data-stu-id="af415-603">Any available port.</span></span> <span data-ttu-id="af415-604">Przykłady często używają 5022.</span><span class="sxs-lookup"><span data-stu-id="af415-604">Examples frequently use 5022.</span></span>

<span data-ttu-id="af415-605">Witaj zapory portów należy toobe otwarty na obu maszynach wirtualnych serwera SQL.</span><span class="sxs-lookup"><span data-stu-id="af415-605">hello firewall ports need toobe open on both SQL Server VMs.</span></span>

<span data-ttu-id="af415-606">Otwieranie portów hello metody Hello zależy od hello zaporę, którego używasz.</span><span class="sxs-lookup"><span data-stu-id="af415-606">hello method of opening hello ports depends on hello firewall solution that you use.</span></span> <span data-ttu-id="af415-607">Hello następnej sekcji opisano, jak tooopen hello portów w Zaporze systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="af415-607">hello next section explains how tooopen hello ports in Windows Firewall.</span></span> <span data-ttu-id="af415-608">Otwórz porty hello wymagane dla wszystkich maszyn wirtualnych programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="af415-608">Open hello required ports on each of your SQL Server VMs.</span></span>

### <a name="open-a-tcp-port-in-hello-firewall"></a><span data-ttu-id="af415-609">Otwórz TCP port w zaporze hello</span><span class="sxs-lookup"><span data-stu-id="af415-609">Open a TCP port in hello firewall</span></span>

1. <span data-ttu-id="af415-610">Na hello pierwszy serwer SQL **Start** ekranu, uruchom **Zapora systemu Windows z zabezpieczeniami zaawansowanymi**.</span><span class="sxs-lookup"><span data-stu-id="af415-610">On hello first SQL Server **Start** screen, launch **Windows Firewall with Advanced Security**.</span></span>
2. <span data-ttu-id="af415-611">W okienku po lewej stronie powitania wybierz **reguły ruchu przychodzącego**.</span><span class="sxs-lookup"><span data-stu-id="af415-611">On hello left pane, select **Inbound Rules**.</span></span> <span data-ttu-id="af415-612">W okienku po prawej stronie powitania, kliknij polecenie **nową regułę**.</span><span class="sxs-lookup"><span data-stu-id="af415-612">On hello right pane, click **New Rule**.</span></span>
3. <span data-ttu-id="af415-613">Aby uzyskać **typ reguły**, wybierz **portu**.</span><span class="sxs-lookup"><span data-stu-id="af415-613">For **Rule Type**, choose **Port**.</span></span>
4. <span data-ttu-id="af415-614">Dla portu hello określ **TCP** i hello typu odpowiednie numery portów.</span><span class="sxs-lookup"><span data-stu-id="af415-614">For hello port, specify **TCP** and type hello appropriate port numbers.</span></span> <span data-ttu-id="af415-615">Zobacz poniższy przykład hello:</span><span class="sxs-lookup"><span data-stu-id="af415-615">See hello following example:</span></span>

   ![Zapory SQL](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/35-tcpports.png)

5. <span data-ttu-id="af415-617">Kliknij przycisk **Dalej**.</span><span class="sxs-lookup"><span data-stu-id="af415-617">Click **Next**.</span></span>
6. <span data-ttu-id="af415-618">Na powitania **akcji** Zachowaj **przyłączenia hello** zaznaczone, a następnie kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="af415-618">On hello **Action** page, keep **Allow hello connection** selected, and then click **Next**.</span></span>
7. <span data-ttu-id="af415-619">Na powitania **profilu** zaakceptować ustawienia domyślne hello, a następnie kliknij pozycję **dalej**.</span><span class="sxs-lookup"><span data-stu-id="af415-619">On hello **Profile** page, accept hello default settings, and then click **Next**.</span></span>
8. <span data-ttu-id="af415-620">Na powitania **nazwa** Określ nazwę reguły (takich jak **Azure LB sondowania**) w hello **nazwa** polu tekstowym, a następnie kliknij przycisk **Zakończ**.</span><span class="sxs-lookup"><span data-stu-id="af415-620">On hello **Name** page, specify a rule name (such as **Azure LB Probe**) in hello **Name** text box, and then click **Finish**.</span></span>

<span data-ttu-id="af415-621">Powtórz te kroki na hello drugi maszyna wirtualna programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="af415-621">Repeat these steps on hello second SQL Server VM.</span></span>

## <a name="next-steps"></a><span data-ttu-id="af415-622">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="af415-622">Next steps</span></span>

* [<span data-ttu-id="af415-623">Utwórz grupę dostępności programu SQL Server AlwaysOn na maszynach wirtualnych Azure</span><span class="sxs-lookup"><span data-stu-id="af415-623">Create a SQL Server Always On availability group on Azure virtual machines</span></span>](virtual-machines-windows-portal-sql-availability-group-tutorial.md)
