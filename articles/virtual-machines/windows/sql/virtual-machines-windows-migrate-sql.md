---
title: Migrowanie bazy danych programu SQL Server do programu SQL Server na maszynie Wirtualnej | Dokumentacja firmy Microsoft
description: "Dowiedz się więcej na temat przeprowadzania migracji bazy danych użytkowników lokalnych z programem SQL Server w maszynie wirtualnej platformy Azure."
services: virtual-machines-windows
documentationcenter: 
author: sabotta
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 00fd08c6-98fa-4d62-a3b8-ca20aa5246b1
ms.service: virtual-machines-sql
ms.workload: iaas-sql-server
ms.tgt_pltfrm: vm-windows-sql-server
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: carlasab
ms.openlocfilehash: 68767534298783083a441aa295611914d0df9db0
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/29/2017
---
# <a name="migrate-a-sql-server-database-to-sql-server-in-an-azure-vm"></a><span data-ttu-id="3cc31-103">Migrowanie bazy danych programu SQL Server do programu SQL Server na maszynie wirtualnej platformy Azure</span><span class="sxs-lookup"><span data-stu-id="3cc31-103">Migrate a SQL Server database to SQL Server in an Azure VM</span></span>

<span data-ttu-id="3cc31-104">Istnieje wiele metod, aby przeprowadzić migrację bazy danych użytkowników lokalnych programu SQL Server do programu SQL Server w maszynie Wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="3cc31-104">There are a number of methods to migrate an on-premises SQL Server user database to SQL Server in an Azure VM.</span></span> <span data-ttu-id="3cc31-105">W tym artykule krótko będzie omówienia różnych metod i zaleca najlepszej metody dla różnych scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="3cc31-105">This article will briefly discuss various methods and recommend the best method for various scenarios.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="what-are-the-primary-migration-methods"></a><span data-ttu-id="3cc31-106">Jakie są metody głównej migracji?</span><span class="sxs-lookup"><span data-stu-id="3cc31-106">What are the primary migration methods?</span></span>
<span data-ttu-id="3cc31-107">Dostępne są następujące metody głównej migracji:</span><span class="sxs-lookup"><span data-stu-id="3cc31-107">The primary migration methods are:</span></span>

* <span data-ttu-id="3cc31-108">Wykonaj kopię zapasową lokalnej za pomocą metody kompresji i ręcznie skopiować plik kopii zapasowej do maszyny wirtualnej platformy Azure</span><span class="sxs-lookup"><span data-stu-id="3cc31-108">Perform on-premises backup using compression and manually copy the backup file into the Azure virtual machine</span></span>
* <span data-ttu-id="3cc31-109">Wykonywanie kopii zapasowej do adresu URL i przywracania na maszynie wirtualnej platformy Azure z adresu URL</span><span class="sxs-lookup"><span data-stu-id="3cc31-109">Perform a backup to URL and restore into the Azure virtual machine from the URL</span></span>
* <span data-ttu-id="3cc31-110">Odłącz i następnie skopiuj pliki danych i dziennika do magazynu obiektów blob platformy Azure, a następnie dołącz do programu SQL Server w maszynie Wirtualnej platformy Azure z adresu URL</span><span class="sxs-lookup"><span data-stu-id="3cc31-110">Detach and then copy the data and log files to Azure blob storage and then attach to SQL Server in Azure VM from URL</span></span>
* <span data-ttu-id="3cc31-111">Konwertuj na lokalnej maszynie fizycznej do wirtualnego dysku twardego funkcji Hyper-V, przekazać do magazynu obiektów Blob platformy Azure, a następnie Wdróż zgodnie z nowej maszyny Wirtualnej za pomocą przekazać wirtualnego dysku twardego</span><span class="sxs-lookup"><span data-stu-id="3cc31-111">Convert on-premises physical machine to Hyper-V VHD, upload to Azure Blob storage, and then deploy as new VM using uploaded VHD</span></span>
* <span data-ttu-id="3cc31-112">Wyślij dysk twardy za pomocą usługi Import/Eksport systemu Windows</span><span class="sxs-lookup"><span data-stu-id="3cc31-112">Ship hard drive using Windows Import/Export Service</span></span>
* <span data-ttu-id="3cc31-113">Jeśli masz wdrożenie AlwaysOn lokalnie, należy użyć [Kreatora dodawania repliki Azure](../classic/sql-onprem-availability.md) do utworzenia repliki w Azure, a następnie trybu failover, wskazujący użytkowników do wystąpienia bazy danych platformy Azure</span><span class="sxs-lookup"><span data-stu-id="3cc31-113">If you have an AlwaysOn deployment on-premises, use the [Add Azure Replica Wizard](../classic/sql-onprem-availability.md) to create a replica in Azure and then failover, pointing users to the Azure database instance</span></span>
* <span data-ttu-id="3cc31-114">Użyj programu SQL Server [replikacji transakcyjnej](https://msdn.microsoft.com/library/ms151176.aspx) skonfiguruj wystąpienie serwera SQL Azure jako subskrybent i następnie wyłącz replikację, wskazujący użytkowników do wystąpienia bazy danych platformy Azure</span><span class="sxs-lookup"><span data-stu-id="3cc31-114">Use SQL Server [transactional replication](https://msdn.microsoft.com/library/ms151176.aspx) to configure the Azure SQL Server instance as a subscriber and then disable replication, pointing users to the Azure database instance</span></span>

> [!TIP]
> <span data-ttu-id="3cc31-115">Umożliwia także te same techniki przenoszenia baz danych między maszynami wirtualnymi serwera SQL na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="3cc31-115">You can also use these same techniques to move databases between SQL Server VMs in Azure.</span></span> <span data-ttu-id="3cc31-116">Na przykład jest obsługiwana można uaktualnić maszyny Wirtualnej galerii obrazu programu SQL Server z jednej wersji/wydania do innego.</span><span class="sxs-lookup"><span data-stu-id="3cc31-116">For example, there is no supported way to upgrade a SQL Server gallery-image VM from one version/edition to another.</span></span> <span data-ttu-id="3cc31-117">W takim przypadku należy utworzyć nową maszynę Wirtualną programu SQL Server z nowej wersji/wydania, a następnie użyj jednej z metod migracji w tym artykule, aby przenieść bazy danych.</span><span class="sxs-lookup"><span data-stu-id="3cc31-117">In this case, you should create a new SQL Server VM with the new version/edition, and then use one of the migration techniques in this article to move your databases.</span></span> 

## <a name="choosing-your-migration-method"></a><span data-ttu-id="3cc31-118">Wybieranie metody migracji</span><span class="sxs-lookup"><span data-stu-id="3cc31-118">Choosing your migration method</span></span>
<span data-ttu-id="3cc31-119">Dla danych optymalną wydajność transferu migracja pliki bazy danych do maszyny Wirtualnej platformy Azure przy użyciu skompresowany plik kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="3cc31-119">For optimum data transfer performance, migrate the database files into the Azure VM using a compressed backup file.</span></span>

<span data-ttu-id="3cc31-120">Aby zminimalizować czas przestoju podczas procesu migracji bazy danych, należy użyć opcji zawsze włączone albo opcji replikacji transakcyjnej.</span><span class="sxs-lookup"><span data-stu-id="3cc31-120">To minimize downtime during the database migration process, use either the AlwaysOn option or the transactional replication option.</span></span>

<span data-ttu-id="3cc31-121">Jeśli nie jest możliwe użycie metod powyżej, ręcznej migracji bazy danych.</span><span class="sxs-lookup"><span data-stu-id="3cc31-121">If it is not possible to use the above methods, manually migrate your database.</span></span> <span data-ttu-id="3cc31-122">Za pomocą tej metody, będzie zwykle zaczyna się od kopii zapasowej bazy danych, a następnie kopii zapasowej bazy danych na platformie Azure i następnie wykonaj operację przywracania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="3cc31-122">Using this method, you will generally start with a database backup followed by a copy of the database backup into Azure and then perform a database restore.</span></span> <span data-ttu-id="3cc31-123">Można także skopiować pliki bazy danych, samodzielnie na platformie Azure, a następnie dołącz je.</span><span class="sxs-lookup"><span data-stu-id="3cc31-123">You can also copy the database files themselves into Azure and then attach them.</span></span> <span data-ttu-id="3cc31-124">Istnieje kilka metod, które można wykonać ten ręczny proces migracji bazy danych do maszyny Wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="3cc31-124">There are several methods by which you can accomplish this manual process of migrating a database into an Azure VM.</span></span>

> [!NOTE]
> <span data-ttu-id="3cc31-125">Po uaktualnieniu do programu SQL Server 2014 lub SQL Server 2016 ze starszych wersji programu SQL Server, należy rozważyć, czy zmiany są potrzebne.</span><span class="sxs-lookup"><span data-stu-id="3cc31-125">When you upgrade to SQL Server 2014 or SQL Server 2016 from older versions of SQL Server, you should consider whether changes are needed.</span></span> <span data-ttu-id="3cc31-126">Zaleca się zajęcie się wszystkie zależności w funkcji nie są obsługiwane przez nową wersję programu SQL Server w ramach migracji projektu.</span><span class="sxs-lookup"><span data-stu-id="3cc31-126">We recommend that you address all dependencies on features not supported by the new version of SQL Server as part of your migration project.</span></span> <span data-ttu-id="3cc31-127">Aby uzyskać więcej informacji o obsługiwanych wersjach i scenariuszy, zobacz [uaktualnienia do programu SQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span><span class="sxs-lookup"><span data-stu-id="3cc31-127">For more information on the supported editions and scenarios, see [Upgrade to SQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span></span>

<span data-ttu-id="3cc31-128">Poniższa tabela zawiera listę metod migracji podstawowego oraz omówiono, gdy korzystanie z każdej z metod jest najbardziej odpowiednia.</span><span class="sxs-lookup"><span data-stu-id="3cc31-128">The following table lists each of the primary migration methods and discusses when the use of each method is most appropriate.</span></span>

| <span data-ttu-id="3cc31-129">Metoda</span><span class="sxs-lookup"><span data-stu-id="3cc31-129">Method</span></span> | <span data-ttu-id="3cc31-130">Wersja bazy danych źródła</span><span class="sxs-lookup"><span data-stu-id="3cc31-130">Source database version</span></span> | <span data-ttu-id="3cc31-131">Docelowej wersji bazy danych</span><span class="sxs-lookup"><span data-stu-id="3cc31-131">Destination database version</span></span> | <span data-ttu-id="3cc31-132">Ograniczenia rozmiaru kopii zapasowej bazy danych źródła</span><span class="sxs-lookup"><span data-stu-id="3cc31-132">Source database backup size constraint</span></span> | <span data-ttu-id="3cc31-133">Uwagi</span><span class="sxs-lookup"><span data-stu-id="3cc31-133">Notes</span></span> |
| --- | --- | --- | --- | --- |
| [<span data-ttu-id="3cc31-134">Wykonaj kopię zapasową lokalnej za pomocą metody kompresji i ręcznie skopiować plik kopii zapasowej do maszyny wirtualnej platformy Azure</span><span class="sxs-lookup"><span data-stu-id="3cc31-134">Perform on-premises backup using compression and manually copy the backup file into the Azure virtual machine</span></span>](#backup-and-restore) |<span data-ttu-id="3cc31-135">SQL Server 2005 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="3cc31-135">SQL Server 2005 or greater</span></span> |<span data-ttu-id="3cc31-136">SQL Server 2005 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="3cc31-136">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="3cc31-137">Limit magazynu maszyny Wirtualnej platformy Azure</span><span class="sxs-lookup"><span data-stu-id="3cc31-137">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) | <span data-ttu-id="3cc31-138">Jest to bardzo proste i dobrze przetestowane technika przenoszenia baz danych na komputerach.</span><span class="sxs-lookup"><span data-stu-id="3cc31-138">This is a very simple and well-tested technique for moving databases across machines.</span></span> |
| [<span data-ttu-id="3cc31-139">Wykonywanie kopii zapasowej do adresu URL i przywracania na maszynie wirtualnej platformy Azure z adresu URL</span><span class="sxs-lookup"><span data-stu-id="3cc31-139">Perform a backup to URL and restore into the Azure virtual machine from the URL</span></span>](#backup-to-url-and-restore) |<span data-ttu-id="3cc31-140">SQL Server 2012 z dodatkiem SP1 CU2 lub nowszej</span><span class="sxs-lookup"><span data-stu-id="3cc31-140">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="3cc31-141">SQL Server 2012 z dodatkiem SP1 CU2 lub nowszej</span><span class="sxs-lookup"><span data-stu-id="3cc31-141">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="3cc31-142">< 12,8 TB dla programu SQL Server 2016, w przeciwnym razie < 1 TB</span><span class="sxs-lookup"><span data-stu-id="3cc31-142">< 12.8 TB for SQL Server 2016, otherwise < 1 TB</span></span> | <span data-ttu-id="3cc31-143">Jest to po prostu inną sposób, aby przenieść plik kopii zapasowej maszyny Wirtualnej za pomocą usługi Azure storage.</span><span class="sxs-lookup"><span data-stu-id="3cc31-143">This method is just another way to move the backup file to the VM using Azure storage.</span></span> |
| [<span data-ttu-id="3cc31-144">Odłącz i następnie skopiuj pliki danych i dziennika do magazynu obiektów blob platformy Azure, a następnie dołącz do programu SQL Server na maszynie wirtualnej platformy Azure z adresu URL</span><span class="sxs-lookup"><span data-stu-id="3cc31-144">Detach and then copy the data and log files to Azure blob storage and then attach to SQL Server in Azure virtual machine from URL</span></span>](#detach-and-attach-from-url) |<span data-ttu-id="3cc31-145">SQL Server 2005 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="3cc31-145">SQL Server 2005 or greater</span></span> |<span data-ttu-id="3cc31-146">SQL Server 2014 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="3cc31-146">SQL Server 2014 or greater</span></span> |[<span data-ttu-id="3cc31-147">Limit magazynu maszyny Wirtualnej platformy Azure</span><span class="sxs-lookup"><span data-stu-id="3cc31-147">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="3cc31-148">Użyj tej metody, gdy planujesz [przechowywania tych plików przy użyciu usługi magazynu obiektów Blob platformy Azure](https://msdn.microsoft.com/library/dn385720.aspx) i dołącz je do programu SQL Server uruchomionego na maszynie Wirtualnej Azure, szczególnie w przypadku bardzo dużych baz danych</span><span class="sxs-lookup"><span data-stu-id="3cc31-148">Use this method when you plan to [store these files using the Azure Blob storage service](https://msdn.microsoft.com/library/dn385720.aspx) and attach them to SQL Server running in an Azure VM, particularly with very large databases</span></span> |
| [<span data-ttu-id="3cc31-149">Konwersji lokalne maszyny wirtualne dyski twarde funkcji Hyper-V, przekazać do magazynu obiektów Blob platformy Azure, a następnie wdrożyć maszynę wirtualną przy użyciu przekazywanego wirtualnego dysku twardego</span><span class="sxs-lookup"><span data-stu-id="3cc31-149">Convert on-premises machine to Hyper-V VHDs, upload to Azure Blob storage, and then deploy a new virtual machine using uploaded VHD</span></span>](#convert-to-vm-and-upload-to-url-and-deploy-as-new-vm) |<span data-ttu-id="3cc31-150">SQL Server 2005 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="3cc31-150">SQL Server 2005 or greater</span></span> |<span data-ttu-id="3cc31-151">SQL Server 2005 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="3cc31-151">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="3cc31-152">Limit magazynu maszyny Wirtualnej platformy Azure</span><span class="sxs-lookup"><span data-stu-id="3cc31-152">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="3cc31-153">Używany, gdy [dostarczają licencję programu SQL Server](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), podczas migracji bazy danych, które zostanie uruchomione na starszej wersji programu SQL Server lub podczas migrowania systemu i użytkownika bazy danych ze sobą w ramach migracji bazy danych jest zależny od innych bazy danych użytkownika i/lub systemowych bazach danych.</span><span class="sxs-lookup"><span data-stu-id="3cc31-153">Use when [bringing your own SQL Server license](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), when migrating a database that you will run on an older version of SQL Server, or when migrating system and user databases together as part of the migration of database dependent on other user databases and/or system databases.</span></span> |
| [<span data-ttu-id="3cc31-154">Wyślij dysk twardy za pomocą usługi Import/Eksport systemu Windows</span><span class="sxs-lookup"><span data-stu-id="3cc31-154">Ship hard drive using Windows Import/Export Service</span></span>](#ship-hard-drive) |<span data-ttu-id="3cc31-155">SQL Server 2005 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="3cc31-155">SQL Server 2005 or greater</span></span> |<span data-ttu-id="3cc31-156">SQL Server 2005 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="3cc31-156">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="3cc31-157">Limit magazynu maszyny Wirtualnej platformy Azure</span><span class="sxs-lookup"><span data-stu-id="3cc31-157">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="3cc31-158">Użyj [usługi Import/Eksport Windows](../../../storage/common/storage-import-export-service.md) gdy Metoda ręcznego kopiowania jest zbyt wolno, takie jak w przypadku bardzo dużych baz danych</span><span class="sxs-lookup"><span data-stu-id="3cc31-158">Use the [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) when manual copy method is too slow, such as with very large databases</span></span> |
| [<span data-ttu-id="3cc31-159">Użyj repliki Azure Kreator dodawania</span><span class="sxs-lookup"><span data-stu-id="3cc31-159">Use the Add Azure Replica Wizard</span></span>](../classic/sql-onprem-availability.md) |<span data-ttu-id="3cc31-160">SQL Server 2012 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="3cc31-160">SQL Server 2012 or greater</span></span> |<span data-ttu-id="3cc31-161">SQL Server 2012 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="3cc31-161">SQL Server 2012 or greater</span></span> |[<span data-ttu-id="3cc31-162">Limit magazynu maszyny Wirtualnej platformy Azure</span><span class="sxs-lookup"><span data-stu-id="3cc31-162">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="3cc31-163">Minimalizuje przestojów, używania wdrożenie lokalnymi (AlwaysOn)</span><span class="sxs-lookup"><span data-stu-id="3cc31-163">Minimizes downtime, use when you have an AlwaysOn on-premises deployment</span></span> |
| [<span data-ttu-id="3cc31-164">Użyj Replikacja transakcyjna programu SQL Server</span><span class="sxs-lookup"><span data-stu-id="3cc31-164">Use SQL Server transactional replication</span></span>](https://msdn.microsoft.com/library/ms151176.aspx) |<span data-ttu-id="3cc31-165">SQL Server 2005 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="3cc31-165">SQL Server 2005 or greater</span></span> |<span data-ttu-id="3cc31-166">SQL Server 2005 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="3cc31-166">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="3cc31-167">Limit magazynu maszyny Wirtualnej platformy Azure</span><span class="sxs-lookup"><span data-stu-id="3cc31-167">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="3cc31-168">Używać, gdy konieczne w celu zminimalizowania przestojów i nie mają lokalnego wdrożenia (AlwaysOn)</span><span class="sxs-lookup"><span data-stu-id="3cc31-168">Use when you need to minimize downtime and do not have an AlwaysOn on-premises deployment</span></span> |

## <a name="backup-and-restore"></a><span data-ttu-id="3cc31-169">Tworzenie kopii zapasowej i przywracanie</span><span class="sxs-lookup"><span data-stu-id="3cc31-169">Backup and restore</span></span>
<span data-ttu-id="3cc31-170">Utwórz kopię zapasową bazy danych z kompresją pliku kopii zapasowej do maszyny Wirtualnej, a następnie przywróć bazę danych.</span><span class="sxs-lookup"><span data-stu-id="3cc31-170">Back up your database with compression, copy the backup to the VM, and then restore the database.</span></span> <span data-ttu-id="3cc31-171">Jeśli w pliku kopii zapasowej jest większy niż 1 TB, musi paskowych ponieważ maksymalny rozmiar dysku maszyny Wirtualnej wynosi 1 TB.</span><span class="sxs-lookup"><span data-stu-id="3cc31-171">If your backup file is larger than 1 TB, you must stripe it because the maximum size of a VM disk is 1 TB.</span></span> <span data-ttu-id="3cc31-172">Aby przeprowadzić migrację bazy danych użytkownika za pomocą tej metody ręcznego, należy użyć następujące ogólne czynności:</span><span class="sxs-lookup"><span data-stu-id="3cc31-172">Use the following general steps to migrate a user database using this manual method:</span></span>

1. <span data-ttu-id="3cc31-173">Wykonanie kopii zapasowej pełnej bazy danych do lokalizacji lokalnej.</span><span class="sxs-lookup"><span data-stu-id="3cc31-173">Perform a full database backup to an on-premises location.</span></span>
2. <span data-ttu-id="3cc31-174">Utwórz lub Przekaż maszynę wirtualną z wersją programu SQL Server na potrzeby.</span><span class="sxs-lookup"><span data-stu-id="3cc31-174">Create or upload a virtual machine with the version of SQL Server desired.</span></span>
3. <span data-ttu-id="3cc31-175">Konfiguracja połączenia, w zależności od wymagań.</span><span class="sxs-lookup"><span data-stu-id="3cc31-175">Setup connectivity based on your requirements.</span></span> <span data-ttu-id="3cc31-176">Zobacz [połączenie z maszyną wirtualną programu SQL Server na platformie Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span><span class="sxs-lookup"><span data-stu-id="3cc31-176">See [Connect to a SQL Server Virtual Machine on Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span></span>
4. <span data-ttu-id="3cc31-177">Skopiuj pliki kopii zapasowej do maszyny Wirtualnej za pomocą pulpitu zdalnego, Eksploratora Windows lub polecenia kopiowania w wierszu polecenia.</span><span class="sxs-lookup"><span data-stu-id="3cc31-177">Copy your backup file(s) to your VM using remote desktop, Windows Explorer or the copy command from a command prompt.</span></span>

## <a name="backup-to-url-and-restore"></a><span data-ttu-id="3cc31-178">Wykonywanie kopii zapasowej na adres URL i przywracania</span><span class="sxs-lookup"><span data-stu-id="3cc31-178">Backup to URL and restore</span></span>
<span data-ttu-id="3cc31-179">Zamiast tworzenie kopii zapasowych pliku lokalnego, możesz użyć [kopii zapasowej do adresu URL](https://msdn.microsoft.com/library/dn435916.aspx) , a następnie Przywróć z adresu URL do maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="3cc31-179">Instead of backing up to a local file, you can use the [backup to URL](https://msdn.microsoft.com/library/dn435916.aspx) and then restore from URL to the VM.</span></span> <span data-ttu-id="3cc31-180">Z programem SQL Server 2016 rozłożone zestawy kopii zapasowych są obsługiwane, są zalecane w przypadku wydajności i wymaganą do przekroczenia limitów rozmiaru dla obiekt blob.</span><span class="sxs-lookup"><span data-stu-id="3cc31-180">With SQL Server 2016, striped backup sets are supported, are recommended for performance, and required to exceed the size limits per blob.</span></span> <span data-ttu-id="3cc31-181">W przypadku bardzo dużych baz danych, korzystanie z [usługi Import/Eksport Windows](../../../storage/common/storage-import-export-service.md) jest zalecane.</span><span class="sxs-lookup"><span data-stu-id="3cc31-181">For very large databases, the use of the [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) is recommended.</span></span>

## <a name="detach-and-attach-from-url"></a><span data-ttu-id="3cc31-182">Odłącz i Dołącz z adresu URL</span><span class="sxs-lookup"><span data-stu-id="3cc31-182">Detach and attach from URL</span></span>
<span data-ttu-id="3cc31-183">Odłączanie plików dziennika i bazy danych i przenieść je na [magazynu obiektów Blob Azure](https://msdn.microsoft.com/library/dn385720.aspx).</span><span class="sxs-lookup"><span data-stu-id="3cc31-183">Detach your database and log files and transfer them to [Azure Blob storage](https://msdn.microsoft.com/library/dn385720.aspx).</span></span> <span data-ttu-id="3cc31-184">Następnie można dołączyć bazy danych z adresu URL na maszynie Wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="3cc31-184">Then attach the database from the URL on your Azure VM.</span></span> <span data-ttu-id="3cc31-185">Użyj, jeśli chcesz, aby pliki fizycznej bazy danych do znajdują się w magazynie obiektów Blob.</span><span class="sxs-lookup"><span data-stu-id="3cc31-185">Use this if you want the physical database files to reside in Blob storage.</span></span> <span data-ttu-id="3cc31-186">Może to być przydatne w przypadku bardzo dużych baz danych.</span><span class="sxs-lookup"><span data-stu-id="3cc31-186">This might be useful for very large databases.</span></span> <span data-ttu-id="3cc31-187">Aby przeprowadzić migrację bazy danych użytkownika za pomocą tej metody ręcznego, należy użyć następujące ogólne czynności:</span><span class="sxs-lookup"><span data-stu-id="3cc31-187">Use the following general steps to migrate a user database using this manual method:</span></span>

1. <span data-ttu-id="3cc31-188">Odłączyć pliki bazy danych z lokalnego wystąpienia bazy danych.</span><span class="sxs-lookup"><span data-stu-id="3cc31-188">Detach the database files from the on-premises database instance.</span></span>
2. <span data-ttu-id="3cc31-189">Skopiuj pliki odłączono bazę danych do magazynu obiektów blob platformy Azure za pomocą [wiersza polecenia azcopy](../../../storage/common/storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="3cc31-189">Copy the detached database files into Azure blob storage using the [AZCopy command-line utility](../../../storage/common/storage-use-azcopy.md).</span></span>
3. <span data-ttu-id="3cc31-190">Dołącz pliki bazy danych z adresu URL platformy Azure do wystąpienia programu SQL Server w maszynie Wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="3cc31-190">Attach the database files from the Azure URL to the SQL Server instance in the Azure VM.</span></span>

## <a name="convert-to-vm-and-upload-to-url-and-deploy-as-new-vm"></a><span data-ttu-id="3cc31-191">Przeprowadź konwersję na maszynę wirtualną, przekaż ją do adresu URL i wdróż ją jako nową maszynę wirtualną</span><span class="sxs-lookup"><span data-stu-id="3cc31-191">Convert to VM and upload to URL and deploy as new VM</span></span>
<span data-ttu-id="3cc31-192">Ta metoda umożliwia migrację wszystkich baz danych systemu i użytkownika w lokalnym wystąpieniem programu SQL Server do maszyny wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="3cc31-192">Use this method to migrate all system and user databases in an on-premises SQL Server instance to Azure virtual machine.</span></span> <span data-ttu-id="3cc31-193">Umożliwia migrację całego wystąpienia programu SQL Server za pomocą tej metody ręcznego następujące ogólne czynności:</span><span class="sxs-lookup"><span data-stu-id="3cc31-193">Use the following general steps to migrate an entire SQL Server instance using this manual method:</span></span>

1. <span data-ttu-id="3cc31-194">Konwertuj maszyn fizycznych lub wirtualnych na wirtualne dyski twarde funkcji Hyper-V za pomocą [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span><span class="sxs-lookup"><span data-stu-id="3cc31-194">Convert physical or virtual machines to Hyper-V VHDs by using [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span></span>
2. <span data-ttu-id="3cc31-195">Przekazywanie plików wirtualnego dysku twardego do magazynu Azure za pomocą [polecenia cmdlet Add-AzureVHD](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span><span class="sxs-lookup"><span data-stu-id="3cc31-195">Upload VHD files to Azure Storage by using the [Add-AzureVHD cmdlet](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span></span>
3. <span data-ttu-id="3cc31-196">Wdrażanie nowej maszyny wirtualnej przy użyciu przekazywanego wirtualnego dysku twardego.</span><span class="sxs-lookup"><span data-stu-id="3cc31-196">Deploy a new virtual machine by using the uploaded VHD.</span></span>

> [!NOTE]
> <span data-ttu-id="3cc31-197">Aby przeprowadzić migrację całej aplikacji, należy rozważyć użycie [usługi Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span><span class="sxs-lookup"><span data-stu-id="3cc31-197">To migrate an entire application, consider using [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span></span>

## <a name="ship-hard-drive"></a><span data-ttu-id="3cc31-198">Wyślij dysk twardy</span><span class="sxs-lookup"><span data-stu-id="3cc31-198">Ship hard drive</span></span>
<span data-ttu-id="3cc31-199">Użyj [usługi Import/Eksport Windows metody](../../../storage/common/storage-import-export-service.md) na przesyłanie dużych ilości danych pliku do magazynu obiektów Blob platformy Azure w sytuacjach, gdy przekazywania przez sieć jest zbyt duży i nie jest możliwe.</span><span class="sxs-lookup"><span data-stu-id="3cc31-199">Use the [Windows Import/Export Service method](../../../storage/common/storage-import-export-service.md) to transfer large amounts of file data to Azure Blob storage in situations where uploading over the network is prohibitively expensive or not feasible.</span></span> <span data-ttu-id="3cc31-200">Z tą usługą możesz wysłać co najmniej jeden dyski twarde zawierające dane do centrum danych Azure, w którym dane zostaną przekazane do konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="3cc31-200">With this service, you send one or more hard drives containing that data to an Azure data center, where your data will be uploaded to your storage account.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3cc31-201">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="3cc31-201">Next Steps</span></span>
<span data-ttu-id="3cc31-202">Aby uzyskać więcej informacji na temat uruchamiania programu SQL Server na maszynach wirtualnych platformy Azure, zobacz [programu SQL Server na maszynach wirtualnych platformy Azure — omówienie](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="3cc31-202">For more information about running SQL Server on Azure Virtual Machines, see [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

<span data-ttu-id="3cc31-203">Aby uzyskać instrukcje dotyczące tworzenia maszyny wirtualnej Azure SQL Server z przechwyconego obrazu, zobacz [porady i sztuczki w klonowania maszyn wirtualnych Azure SQL z przechwyconych obrazów](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) na blogu inżynierów serwera SQL CSS.</span><span class="sxs-lookup"><span data-stu-id="3cc31-203">For instructions on creating an Azure SQL Server Virtual Machine from a captured image, see [Tips & Tricks on ‘cloning’ Azure SQL virtual machines from captured images](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) on the CSS SQL Server Engineers blog.</span></span>

