---
title: "aaaHigh dostępności i odzyskiwania po awarii dla programu SQL Server | Dokumentacja firmy Microsoft"
description: "Omówienie hello różnych typów HADR strategii dla programu SQL Server uruchomionego w maszynach wirtualnych platformy Azure."
services: virtual-machines-windows
documentationcenter: na
author: MikeRayMSFT
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 53981f7e-8370-4979-b26a-93a5988d905f
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/27/2017
ms.author: mikeray
ms.openlocfilehash: 2b62d8b30520952ba6b7da7177a2c2de95bea8ce
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="high-availability-and-disaster-recovery-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="2a3a1-103">Wysoka dostępność i odzyskiwanie awaryjne na potrzeby programu SQL Server na maszynach wirtualnych platformy Azure</span><span class="sxs-lookup"><span data-stu-id="2a3a1-103">High availability and disaster recovery for SQL Server in Azure Virtual Machines</span></span>

<span data-ttu-id="2a3a1-104">Maszyny wirtualne Microsoft Azure (maszyn wirtualnych) z programem SQL Server może ułatwić niższy koszt hello wysokiej dostępności i odzyskiwaniem po awarii (HADR) bazy danych rozwiązania służącego do odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-104">Microsoft Azure virtual machines (VMs) with SQL Server can help lower hello cost of a high availability and disaster recovery (HADR) database solution.</span></span> <span data-ttu-id="2a3a1-105">Większość rozwiązań HADR serwera SQL są obsługiwane w maszynach wirtualnych platformy Azure, tylko do platformy Azure oraz w hybrydowych rozwiązań.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-105">Most SQL Server HADR solutions are supported in Azure virtual machines, both as Azure-only and as hybrid solutions.</span></span> <span data-ttu-id="2a3a1-106">W rozwiązaniu Azure — tylko do całego systemu HADR hello działa na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-106">In an Azure-only solution, hello entire HADR system runs in Azure.</span></span> <span data-ttu-id="2a3a1-107">W konfiguracji hybrydowych część rozwiązania hello działa na platformie Azure i hello innych części przebiegów lokalnych w Twojej organizacji.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-107">In a hybrid configuration, part of hello solution runs in Azure and hello other part runs on-premises in your organization.</span></span> <span data-ttu-id="2a3a1-108">Witaj elastyczność hello środowiska platformy Azure pozwala toomove częściowo lub całkowicie tooAzure toosatisfy hello budżetu i HADR wymagania programu SQL Server bazy danych systemów.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-108">hello flexibility of hello Azure environment enables you toomove partially or completely tooAzure toosatisfy hello budget and HADR requirements of your SQL Server database systems.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="understanding-hello-need-for-an-hadr-solution"></a><span data-ttu-id="2a3a1-109">Opis hello potrzebę HADR rozwiązania</span><span class="sxs-lookup"><span data-stu-id="2a3a1-109">Understanding hello need for an HADR solution</span></span>
<span data-ttu-id="2a3a1-110">Jest zapasowej tooyou tooensure czy system bazy danych, posiada hello HADR możliwości, które wymaga hello umowy poziomu usług (SLA).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-110">It is up tooyou tooensure that your database system possesses hello HADR capabilities that hello service-level agreement (SLA) requires.</span></span> <span data-ttu-id="2a3a1-111">fakt Hello Azure zapewnia mechanizmy wysokiej dostępności, takich jak naprawą usługi dla usługi w chmurze i wykrywanie awarii odzyskiwania dla maszyn wirtualnych, sam gwarantuje, że mogą spełnić hello potrzeby umowy dotyczącej poziomu usług.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-111">hello fact that Azure provides high availability mechanisms, such as service healing for cloud services and failure recovery detection for Virtual Machines, does not itself guarantee you can meet hello desired SLA.</span></span> <span data-ttu-id="2a3a1-112">Te mechanizmy ochrony hello wysoką dostępność hello maszyn wirtualnych, ale hello wysokiej dostępności programu SQL Server uruchomiony hello maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-112">These mechanisms protect hello high availability of hello VMs but not hello high availability of SQL Server running inside hello VMs.</span></span> <span data-ttu-id="2a3a1-113">Istnieje możliwość toofail wystąpienia programu SQL Server hello, podczas gdy hello maszyna wirtualna jest online i czy działa prawidłowo.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-113">It is possible for hello SQL Server instance toofail while hello VM is online and healthy.</span></span> <span data-ttu-id="2a3a1-114">Ponadto mechanizmów wysokiej dostępności nawet hello dostarczany przez platformę Azure Zezwalaj przestoje hello maszyn wirtualnych z powodu tooevents, takich jak odzyskiwania po awarii oprogramowania lub sprzętu i uaktualnień systemu operacyjnego.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-114">Moreover, even hello high availability mechanisms provided by Azure allow for downtime of hello VMs due tooevents such as recovery from software or hardware failures and operating system upgrades.</span></span>

<span data-ttu-id="2a3a1-115">Ponadto z magazynu geograficznie nadmiarowego magazynu (GRS) na platformie Azure, która jest zaimplementowana przy użyciu funkcji o nazwie — replikacja geograficzna, nie może być rozwiązanie odzyskiwania po awarii odpowiednie dla baz danych.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-115">In addition, Geo Redundant Storage (GRS) in Azure, which is implemented with a feature called geo-replication, may not be an adequate disaster recovery solution for your databases.</span></span> <span data-ttu-id="2a3a1-116">Ponieważ replikacja geograficzna wysyła dane asynchronicznie, najnowsze aktualizacje mogą utracone w przypadku powitania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-116">Because geo-replication sends data asynchronously, recent updates can be lost in hello event of disaster.</span></span> <span data-ttu-id="2a3a1-117">Więcej informacji na temat ograniczeń — replikacja geograficzna są objęte hello [replikacja geograficzna nie jest obsługiwana dla plików danych i dziennika na oddzielnych dyskach](#geo-replication-support) sekcji.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-117">More information regarding geo-replication limitations are covered in hello [Geo-replication not supported for data and log files on separate disks](#geo-replication-support) section.</span></span>

## <a name="hadr-deployment-architectures"></a><span data-ttu-id="2a3a1-118">HADR wdrożenia architektury</span><span class="sxs-lookup"><span data-stu-id="2a3a1-118">HADR deployment architectures</span></span>
<span data-ttu-id="2a3a1-119">Technologii HADR serwera SQL, które są obsługiwane na platformie Azure, obejmują:</span><span class="sxs-lookup"><span data-stu-id="2a3a1-119">SQL Server HADR technologies that are supported in Azure include:</span></span>

* [<span data-ttu-id="2a3a1-120">Zawsze włączone grupy dostępności</span><span class="sxs-lookup"><span data-stu-id="2a3a1-120">Always On Availability Groups</span></span>](https://technet.microsoft.com/library/hh510230.aspx)
* [<span data-ttu-id="2a3a1-121">Zawsze włączone wystąpienia klastra trybu Failover</span><span class="sxs-lookup"><span data-stu-id="2a3a1-121">Always On Failover Cluster Instances</span></span>](https://technet.microsoft.com/library/ms189134.aspx)
* [<span data-ttu-id="2a3a1-122">Wysyłanie dziennika</span><span class="sxs-lookup"><span data-stu-id="2a3a1-122">Log Shipping</span></span>](https://technet.microsoft.com/library/ms187103.aspx)
* [<span data-ttu-id="2a3a1-123">Kopia zapasowa programu SQL Server i przywracania usługi magazynu obiektów Blob platformy Azure</span><span class="sxs-lookup"><span data-stu-id="2a3a1-123">SQL Server Backup and Restore with Azure Blob Storage Service</span></span>](https://msdn.microsoft.com/library/jj919148.aspx)
* <span data-ttu-id="2a3a1-124">[Funkcja dublowania baz danych](https://technet.microsoft.com/library/ms189852.aspx) — przestarzałe w programie SQL Server 2016</span><span class="sxs-lookup"><span data-stu-id="2a3a1-124">[Database Mirroring](https://technet.microsoft.com/library/ms189852.aspx) - Deprecated in SQL Server 2016</span></span>

<span data-ttu-id="2a3a1-125">Jest możliwe toocombine hello technologii razem tooimplement rozwiązania programu SQL Server, która ma wysoką dostępność i możliwości odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-125">It is possible toocombine hello technologies together tooimplement a SQL Server solution that has both high availability and disaster recovery capabilities.</span></span> <span data-ttu-id="2a3a1-126">W zależności od używanych technologii hello wdrożenia hybrydowego może wymagać tunel sieci VPN z hello sieci wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-126">Depending on hello technology you use, a hybrid deployment may require a VPN tunnel with hello Azure virtual network.</span></span> <span data-ttu-id="2a3a1-127">Poniższe rozdziały zawierają Hello pokazują hello przykład wdrożenia architektur.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-127">hello sections below show you some of hello example deployment architectures.</span></span>

## <a name="azure-only-high-availability-solutions"></a><span data-ttu-id="2a3a1-128">Tylko do platformy Azure: rozwiązania wysokiej dostępności</span><span class="sxs-lookup"><span data-stu-id="2a3a1-128">Azure-only: High availability solutions</span></span>

<span data-ttu-id="2a3a1-129">Rozwiązanie zapewniające wysoką dostępność dla programu SQL Server może być na poziomie bazy danych z zawsze włączonych grup dostępności - o nazwie grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-129">You can have a high availability solution for SQL Server at a database level with Always On Availability Groups - called availability groups.</span></span> <span data-ttu-id="2a3a1-130">Można również utworzyć rozwiązanie zapewniające wysoką dostępność na poziomie wystąpienia z zawsze na wystąpienia klastra trybu Failover — trybu failover wystąpienia klastra.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-130">You can also create a high availability solution at an instance level with Always On Failover Cluster Instances - failover cluster instances.</span></span> <span data-ttu-id="2a3a1-131">Dla dodatkowych nadmiarowość można utworzyć nadmiarowości na obu poziomach przez utworzenie grupy dostępności na trybu failover wystąpienia klastra.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-131">For additional redundancy, you can create redundancy at both levels by creating availability groups on failover cluster instances.</span></span> 

| <span data-ttu-id="2a3a1-132">Technologia</span><span class="sxs-lookup"><span data-stu-id="2a3a1-132">Technology</span></span> | <span data-ttu-id="2a3a1-133">Przykład architektury</span><span class="sxs-lookup"><span data-stu-id="2a3a1-133">Example Architectures</span></span> |
| --- | --- |
| <span data-ttu-id="2a3a1-134">**Grupy dostępności**</span><span class="sxs-lookup"><span data-stu-id="2a3a1-134">**Availability groups**</span></span> |<span data-ttu-id="2a3a1-135">Repliki dostępności uruchomionych w maszynach wirtualnych platformy Azure w hello sam region zapewnić wysoką dostępność.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-135">Availability replicas running in Azure VMs in hello same region provide high availability.</span></span> <span data-ttu-id="2a3a1-136">Należy tooconfigure kontroler domeny maszyny Wirtualnej, ponieważ klaster pracy awaryjnej systemu Windows wymaga domeny usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-136">You need tooconfigure a domain controller VM, because Windows failover clustering requires an Active Directory domain.</span></span><br/> <span data-ttu-id="2a3a1-137">![Grupy dostępności](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_ha_always_on.gif)</span><span class="sxs-lookup"><span data-stu-id="2a3a1-137">![Availability Groups](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_ha_always_on.gif)</span></span><br/><span data-ttu-id="2a3a1-138">Aby uzyskać więcej informacji, zobacz [Konfigurowanie grup dostępności Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-138">For more information, see [Configure Availability Groups in Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span></span> |
| <span data-ttu-id="2a3a1-139">**Wystąpienia klastra trybu failover**</span><span class="sxs-lookup"><span data-stu-id="2a3a1-139">**Failover cluster instances**</span></span> |<span data-ttu-id="2a3a1-140">Klastra trybu failover wystąpienia (FCI), które wymagają magazynu udostępnionego, mogą być tworzone na 3 sposoby.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-140">Failover Cluster Instances (FCI), which require shared storage, can be created in 3 different ways.</span></span><br/><br/><span data-ttu-id="2a3a1-141">1. Klaster trybu failover z dwoma węzłami uruchomionych w maszynach wirtualnych platformy Azure z dołączonym magazynem za pomocą [systemu Windows Server 2016 bezpośrednie miejsca do magazynowania \(S2D\) ](virtual-machines-windows-portal-sql-create-failover-cluster.md) tooprovide wirtualnej sieci SAN opartych na oprogramowaniu.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-141">1. A two-node failover cluster running in Azure VMs with attached storage using [Windows Server 2016 Storage Spaces Direct \(S2D\)](virtual-machines-windows-portal-sql-create-failover-cluster.md) tooprovide a software-based virtual SAN.</span></span><br/><br/><span data-ttu-id="2a3a1-142">2. Klaster trybu failover z dwoma węzłami uruchomionych w maszynach wirtualnych platformy Azure z magazynem obsługiwanego przez rozwiązanie do klastrowania innych firm.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-142">2. A two-node failover cluster running in Azure VMs with storage supported by a third-party clustering solution.</span></span> <span data-ttu-id="2a3a1-143">Na przykład określonych, który używa SIOS DataKeeper, zobacz [wysokiej dostępności udziału plików przy użyciu klastra trybu failover i 3 firmy SIOS DataKeeper](https://azure.microsoft.com/blog/high-availability-for-a-file-share-using-wsfc-ilb-and-3rd-party-software-sios-datakeeper/).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-143">For a specific example that uses SIOS DataKeeper, see [High availability for a file share using failover clustering and 3rd party software SIOS DataKeeper](https://azure.microsoft.com/blog/high-availability-for-a-file-share-using-wsfc-ilb-and-3rd-party-software-sios-datakeeper/).</span></span><br/><br/><span data-ttu-id="2a3a1-144">3. Uruchomionych w maszynach wirtualnych platformy Azure z obiektów docelowych iSCSI zdalnego klastra trybu failover z dwoma węzłami udostępnionego magazynu blokowego za pośrednictwem usługi ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-144">3. A two-node failover cluster running in Azure VMs with remote iSCSI Target shared block storage via ExpressRoute.</span></span> <span data-ttu-id="2a3a1-145">Na przykład NetApp prywatnego magazynu (NPS) udostępnia obiektu docelowego iSCSI za pośrednictwem usługi ExpressRoute z tooAzure Equinix maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-145">For example, NetApp Private Storage (NPS) exposes an iSCSI target via ExpressRoute with Equinix tooAzure VMs.</span></span><br/><br/><span data-ttu-id="2a3a1-146">Magazyn udostępniony innej firmy i rozwiązania dotyczące replikacji danych powinien skontaktuj się z dostawcą hello dla dowolnych danych powiązanych tooaccessing problemów w pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-146">For third-party shared storage and data replication solutions, you should contact hello vendor for any issues related tooaccessing data on failover.</span></span><br/><br/><span data-ttu-id="2a3a1-147">Należy pamiętać, że przy użyciu infrastruktury klasyfikacji plików nad [magazyn plików Azure](https://azure.microsoft.com/services/storage/files/) nie jest jeszcze obsługiwany, ponieważ Magazyn w warstwie Premium nie korzysta z tego rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-147">Note that using FCI on top of [Azure File storage](https://azure.microsoft.com/services/storage/files/) is not supported yet, because this solution does not utilize Premium Storage.</span></span> <span data-ttu-id="2a3a1-148">Pracujemy nad toosupport tym wkrótce.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-148">We are working toosupport this soon.</span></span> |

## <a name="azure-only-disaster-recovery-solutions"></a><span data-ttu-id="2a3a1-149">Tylko do platformy Azure: rozwiązania w zakresie odzyskiwania po awarii</span><span class="sxs-lookup"><span data-stu-id="2a3a1-149">Azure-only: Disaster recovery solutions</span></span>
<span data-ttu-id="2a3a1-150">Możesz mieć rozwiązanie odzyskiwania po awarii dla baz danych programu SQL Server na platformie Azure przy użyciu grup dostępności, dublowania bazy danych lub kopii zapasowej i przywracanie z magazynu obiektów blob.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-150">You can have a disaster recovery solution for your SQL Server databases in Azure using availability groups, database mirroring, or backup and restore with storage blobs.</span></span>

| <span data-ttu-id="2a3a1-151">Technologia</span><span class="sxs-lookup"><span data-stu-id="2a3a1-151">Technology</span></span> | <span data-ttu-id="2a3a1-152">Przykład architektury</span><span class="sxs-lookup"><span data-stu-id="2a3a1-152">Example Architectures</span></span> |
| --- | --- |
| <span data-ttu-id="2a3a1-153">**Grupy dostępności**</span><span class="sxs-lookup"><span data-stu-id="2a3a1-153">**Availability Groups**</span></span> |<span data-ttu-id="2a3a1-154">Repliki dostępności z wielu centrów w maszynach wirtualnych platformy Azure dla odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-154">Availability replicas running across multiple datacenters in Azure VMs for disaster recovery.</span></span> <span data-ttu-id="2a3a1-155">To rozwiązanie między region chroni przed awarią całej lokacji.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-155">This cross-region solution protects against complete site outage.</span></span> <br/> <span data-ttu-id="2a3a1-156">![Grupy dostępności](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_alwayson.png)</span><span class="sxs-lookup"><span data-stu-id="2a3a1-156">![Availability Groups](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_alwayson.png)</span></span><br/><span data-ttu-id="2a3a1-157">W obrębie regionu wszystkie repliki należy w ramach hello sama usługa w chmurze i hello tej samej sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-157">Within a region, all replicas should be within hello same cloud service and hello same VNet.</span></span> <span data-ttu-id="2a3a1-158">Ponieważ każdy region będzie mieć osobne sieci wirtualnej, te rozwiązania wymagają łączności tooVNet sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-158">Because each region will have a separate VNet, these solutions require VNet tooVNet connectivity.</span></span> <span data-ttu-id="2a3a1-159">Aby uzyskać więcej informacji, zobacz [Konfiguruj do wirtualnymi połączenia za pomocą hello portalu Azure](../../../vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal.md).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-159">For more information, see [Configure a VNet-to-VNet connection using hello Azure portal](../../../vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal.md).</span></span> <span data-ttu-id="2a3a1-160">Aby uzyskać szczegółowe instrukcje, zobacz [konfigurowania grupy dostępności programu SQL Server na maszynach wirtualnych Azure w różnych regionach](virtual-machines-windows-portal-sql-availability-group-dr.md).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-160">For detailed instructions, see [Configure a SQL Server Availability Group on Azure Virtual Machines in Different Regions](virtual-machines-windows-portal-sql-availability-group-dr.md).</span></span>|
| <span data-ttu-id="2a3a1-161">**Funkcja dublowania baz danych**</span><span class="sxs-lookup"><span data-stu-id="2a3a1-161">**Database Mirroring**</span></span> |<span data-ttu-id="2a3a1-162">Podmiot zabezpieczeń i dublowane i serwerów działających w różnych centrach danych, odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-162">Principal and mirror and servers running in different datacenters for disaster recovery.</span></span> <span data-ttu-id="2a3a1-163">Należy wdrożyć przy użyciu certyfikatów serwera, ponieważ domeny usługi active directory nie może obejmować wiele centrów danych.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-163">You must deploy using server certificates because an active directory domain cannot span multiple datacenters.</span></span><br/>![Funkcja dublowania baz danych](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_dbmirroring.gif) |
| <span data-ttu-id="2a3a1-165">**Kopia zapasowa i przywracanie z usługi Magazyn obiektów Blob platformy Azure**</span><span class="sxs-lookup"><span data-stu-id="2a3a1-165">**Backup and Restore with Azure Blob Storage Service**</span></span> |<span data-ttu-id="2a3a1-166">Produkcyjnych baz danych kopii zapasowej bezpośrednio tooblob magazynu w różnych centrach danych, odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-166">Production databases backed up directly tooblob storage in a different datacenter for disaster recovery.</span></span><br/><span data-ttu-id="2a3a1-167">![Tworzenie kopii zapasowej i przywracanie](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_backup_restore.gif)</span><span class="sxs-lookup"><span data-stu-id="2a3a1-167">![Backup and Restore](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_backup_restore.gif)</span></span><br/><span data-ttu-id="2a3a1-168">Aby uzyskać więcej informacji, zobacz [kopii zapasowej i przywracania dla programu SQL Server w usłudze Azure Virtual Machines](virtual-machines-windows-sql-backup-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-168">For more information, see [Backup and Restore for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-backup-recovery.md).</span></span> |

## <a name="hybrid-it-disaster-recovery-solutions"></a><span data-ttu-id="2a3a1-169">Hybrydowego IT: Rozwiązania w zakresie odzyskiwania po awarii</span><span class="sxs-lookup"><span data-stu-id="2a3a1-169">Hybrid IT: Disaster recovery solutions</span></span>
<span data-ttu-id="2a3a1-170">Możesz mieć rozwiązanie odzyskiwania po awarii dla baz danych programu SQL Server w środowisku IT hybrydowych przy użyciu grup dostępności, dublowania bazy danych wysyłania dziennika i tworzenia kopii zapasowej i przywracanie z magazynem Azure blog.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-170">You can have a disaster recovery solution for your SQL Server databases in a hybrid-IT environment using availability groups, database mirroring, log shipping, and backup and restore with Azure blog storage.</span></span>

| <span data-ttu-id="2a3a1-171">Technologia</span><span class="sxs-lookup"><span data-stu-id="2a3a1-171">Technology</span></span> | <span data-ttu-id="2a3a1-172">Przykład architektury</span><span class="sxs-lookup"><span data-stu-id="2a3a1-172">Example Architectures</span></span> |
| --- | --- |
| <span data-ttu-id="2a3a1-173">**Grupy dostępności**</span><span class="sxs-lookup"><span data-stu-id="2a3a1-173">**Availability Groups**</span></span> |<span data-ttu-id="2a3a1-174">Niektóre repliki dostępności uruchomionych w maszynach wirtualnych platformy Azure i innych replik uruchamiane lokalnie do odzyskiwania po awarii między witrynami.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-174">Some availability replicas running in Azure VMs and other replicas running on-premises for cross-site disaster recovery.</span></span> <span data-ttu-id="2a3a1-175">Witaj lokacji produkcyjnej może być lokalnie lub w centrum danych Azure.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-175">hello production site can be either on-premises or in an Azure datacenter.</span></span><br/>![Grupy dostępności](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_alwayson.gif)<br/><span data-ttu-id="2a3a1-177">Ponieważ wszystkie repliki dostępności muszą znajdować się w hello tego samego klastra pracy awaryjnej, hello klastra musi obejmować zarówno sieci (klastra trybu failover wielu podsieci).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-177">Because all availability replicas must be in hello same failover cluster, hello cluster must span both networks (a multi-subnet failover cluster).</span></span> <span data-ttu-id="2a3a1-178">Ta konfiguracja wymaga połączenia sieci VPN między Azure i hello sieci lokalnej.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-178">This configuration requires a VPN connection between Azure and hello on-premises network.</span></span><br/><br/><span data-ttu-id="2a3a1-179">Pomyślnym awarii baz danych należy również zainstalować repliki kontrolera domeny w lokacji odzyskiwania po awarii hello.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-179">For successful disaster recovery of your databases, you should also install a replica domain controller at hello disaster recovery site.</span></span><br/><br/><span data-ttu-id="2a3a1-180">Jest możliwe toouse hello Kreatora dodawania repliki w programie SSMS tooadd tooan Azure repliki istniejących zawsze włączonej grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-180">It is possible toouse hello Add Replica Wizard in SSMS tooadd an Azure replica tooan existing Always On Availability Group.</span></span> <span data-ttu-id="2a3a1-181">Aby uzyskać więcej informacji, zobacz samouczek: rozszerzenie tooAzure Twojego zawsze włączonej grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-181">For more information, see Tutorial: Extend your Always On Availability Group tooAzure.</span></span> |
| <span data-ttu-id="2a3a1-182">**Funkcja dublowania baz danych**</span><span class="sxs-lookup"><span data-stu-id="2a3a1-182">**Database Mirroring**</span></span> |<span data-ttu-id="2a3a1-183">Jednego partnera działający w maszynie Wirtualnej platformy Azure i hello inne uruchomione w siedzibie firmy do odzyskiwania awaryjnego międzylokacyjnej przy użyciu certyfikatów serwera.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-183">One partner running in an Azure VM and hello other running on-premises for cross-site disaster recovery using server certificates.</span></span> <span data-ttu-id="2a3a1-184">Partnerzy nie ma potrzeby toobe w hello tej samej domeny usługi Active Directory, a żadne połączenie sieci VPN nie jest wymagane.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-184">Partners do not need toobe in hello same Active Directory domain, and no VPN connection is required.</span></span><br/><span data-ttu-id="2a3a1-185">![Funkcja dublowania baz danych](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_dbmirroring.gif)</span><span class="sxs-lookup"><span data-stu-id="2a3a1-185">![Database Mirroring](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_dbmirroring.gif)</span></span><br/><span data-ttu-id="2a3a1-186">Innej bazy danych dublowania scenariusz obejmuje jednego partnera uruchomione w maszynie Wirtualnej platformy Azure i hello inne uruchomione lokalnie w hello sam domeny usługi Active Directory do odzyskiwania po awarii między witrynami.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-186">Another database mirroring scenario involves one partner running in an Azure VM and hello other running on-premises in hello same Active Directory domain for cross-site disaster recovery.</span></span> <span data-ttu-id="2a3a1-187">A [połączenia sieci VPN między hello Azure wirtualnych sieci i hello lokalnej sieci](../../../vpn-gateway/vpn-gateway-site-to-site-create.md) jest wymagana.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-187">A [VPN connection between hello Azure virtual network and hello on-premises network](../../../vpn-gateway/vpn-gateway-site-to-site-create.md) is required.</span></span><br/><br/><span data-ttu-id="2a3a1-188">Pomyślnym awarii baz danych należy również zainstalować repliki kontrolera domeny w lokacji odzyskiwania po awarii hello.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-188">For successful disaster recovery of your databases, you should also install a replica domain controller at hello disaster recovery site.</span></span> |
| <span data-ttu-id="2a3a1-189">**Wysyłanie dziennika**</span><span class="sxs-lookup"><span data-stu-id="2a3a1-189">**Log Shipping**</span></span> |<span data-ttu-id="2a3a1-190">Jeden serwer działający w maszynie Wirtualnej platformy Azure i hello inne uruchomione w siedzibie firmy do odzyskiwania po awarii między witrynami.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-190">One server running in an Azure VM and hello other running on-premises for cross-site disaster recovery.</span></span> <span data-ttu-id="2a3a1-191">Wysyłanie dziennika zależy od udostępnianie plików systemu Windows, więc połączenie sieci VPN między hello sieci wirtualnej platformy Azure i hello lokalnej sieci nie jest wymagane.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-191">Log shipping depends on Windows file sharing, so a VPN connection between hello Azure virtual network and hello on-premises network is required.</span></span><br/>![Wysyłanie dziennika](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_log_shipping.gif)<br/><span data-ttu-id="2a3a1-193">Pomyślnym awarii baz danych należy również zainstalować repliki kontrolera domeny w lokacji odzyskiwania po awarii hello.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-193">For successful disaster recovery of your databases, you should also install a replica domain controller at hello disaster recovery site.</span></span> |
| <span data-ttu-id="2a3a1-194">**Kopia zapasowa i przywracanie z usługi Magazyn obiektów Blob platformy Azure**</span><span class="sxs-lookup"><span data-stu-id="2a3a1-194">**Backup and Restore with Azure Blob Storage Service**</span></span> |<span data-ttu-id="2a3a1-195">Lokalne produkcyjnych baz danych kopii zapasowej bezpośrednio tooAzure magazynu obiektów blob do odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-195">On-premises production databases backed up directly tooAzure blob storage for disaster recovery.</span></span><br/><span data-ttu-id="2a3a1-196">![Tworzenie kopii zapasowej i przywracanie](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_backup_restore.gif)</span><span class="sxs-lookup"><span data-stu-id="2a3a1-196">![Backup and Restore](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_backup_restore.gif)</span></span><br/><span data-ttu-id="2a3a1-197">Aby uzyskać więcej informacji, zobacz [kopii zapasowej i przywracania dla programu SQL Server w usłudze Azure Virtual Machines](virtual-machines-windows-sql-backup-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-197">For more information, see [Backup and Restore for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-backup-recovery.md).</span></span> |

## <a name="important-considerations-for-sql-server-hadr-in-azure"></a><span data-ttu-id="2a3a1-198">Ważne uwagi dotyczące HADR serwera SQL na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="2a3a1-198">Important considerations for SQL Server HADR in Azure</span></span>
<span data-ttu-id="2a3a1-199">Maszyny wirtualne platformy Azure, magazynu i sieci charakteryzują się innymi cechami operacyjne, niż lokalne, niezwirtualizowanych infrastruktury IT.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-199">Azure VMs, storage, and networking have different operational characteristics than an on-premises, non-virtualized IT infrastructure.</span></span> <span data-ttu-id="2a3a1-200">Pomyślne zaimplementowanie rozwiązania HADR programu SQL Server na platformie Azure wymaga opis tych różnic i projektowania tooaccommodate Twojego rozwiązania ich.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-200">A successful implementation of a HADR SQL Server solution in Azure requires that you understand these differences and design your solution tooaccommodate them.</span></span>

### <a name="high-availability-nodes-in-an-availability-set"></a><span data-ttu-id="2a3a1-201">Węzły o wysokiej dostępności w zestawie dostępności</span><span class="sxs-lookup"><span data-stu-id="2a3a1-201">High availability nodes in an availability set</span></span>
<span data-ttu-id="2a3a1-202">Zestawy dostępności w systemie Azure Włącz tooplace hello wysokiej dostępności węzłów w oddzielnych domen błędów (FDs) i aktualizację domeny (UDs).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-202">Availability sets in Azure enable you tooplace hello high availability nodes into separate Fault Domains (FDs) and Update Domains (UDs).</span></span> <span data-ttu-id="2a3a1-203">Dla maszyn wirtualnych Azure toobe umieszczone w hello sam zestaw dostępności, należy je wdrożyć w hello sama usługa w chmurze.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-203">For Azure VMs toobe placed in hello same availability set, you must deploy them in hello same cloud service.</span></span> <span data-ttu-id="2a3a1-204">Tylko węzły w powitalne tej samej usługi w chmurze mogą uczestniczyć w hello tego samego zestawu dostępności.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-204">Only nodes in hello same cloud service can participate in hello same availability set.</span></span> <span data-ttu-id="2a3a1-205">Aby uzyskać więcej informacji, zobacz [hello Zarządzaj dostępność maszyn wirtualnych](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-205">For more information, see [Manage hello Availability of Virtual Machines](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

### <a name="failover-cluster-behavior-in-azure-networking"></a><span data-ttu-id="2a3a1-206">Zachowanie klastra pracy awaryjnej w sieci Azure</span><span class="sxs-lookup"><span data-stu-id="2a3a1-206">Failover cluster behavior in Azure networking</span></span>
<span data-ttu-id="2a3a1-207">Hello nie zgodne ze standardem RFC usługi DHCP w usłudze Azure może spowodować utworzenie hello niektórych trybu failover klastra konfiguracje toofail, ponieważ nazwa sieciowa klastra toohello przypisywane zduplikowanego adresu IP, takich jak hello tego samego adresu IP adresów jako jeden z węzłów klastra hello.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-207">hello non-RFC-compliant DHCP service in Azure can cause hello creation of certain failover cluster configurations toofail, due toohello cluster network name being assigned a duplicate IP address, such as hello same IP address as one of hello cluster nodes.</span></span> <span data-ttu-id="2a3a1-208">Jest to problem podczas implementowania grup dostępności, która jest zależna od funkcji klastra pracy awaryjnej systemu Windows hello.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-208">This is an issue when you implement Availability Groups, which depends on hello Windows failover cluster feature.</span></span>

<span data-ttu-id="2a3a1-209">Rozważmy scenariusz hello, podczas tworzenia klastra z dwoma węzłami i przełączony w tryb online:</span><span class="sxs-lookup"><span data-stu-id="2a3a1-209">Consider hello scenario when a two-node cluster is created and brought online:</span></span>

1. <span data-ttu-id="2a3a1-210">klaster Hello przejściu do trybu online, a następnie NODE1 żądań przypisywany dynamicznie adres IP dla nazwy sieciowej klastra hello.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-210">hello cluster comes online, then NODE1 requests a dynamically assigned IP address for hello cluster network name.</span></span>
2. <span data-ttu-id="2a3a1-211">Żaden adres IP innego niż własny NODE1 adres IP jest określany przez hello usługi DHCP, ponieważ hello usługi DHCP rozpoznaje hello żądanie pochodzi z NODE1 samej siebie.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-211">No IP address other than NODE1’s own IP address is given by hello DHCP service, since hello DHCP service recognizes that hello request comes from NODE1 itself.</span></span>
3. <span data-ttu-id="2a3a1-212">System Windows wykrywa, że zduplikowanego adresu przypisano zarówno tooNODE1 i toohello nazwy sieciowej klastra trybu failover, i hello domyślna grupa klastra toocome w trybie online nie powiodło się.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-212">Windows detects that a duplicate address is assigned both tooNODE1 and toohello failover cluster network name, and hello default cluster group fails toocome online.</span></span>
4. <span data-ttu-id="2a3a1-213">Witaj domyślna grupa klastra przenosi tooNODE2, który traktuje jako adres IP klastra hello NODE1 na adres IP i powoduje hello domyślne klastra grupy do trybu online.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-213">hello default cluster group moves tooNODE2, which treats NODE1’s IP address as hello cluster IP address and brings hello default cluster group online.</span></span>
5. <span data-ttu-id="2a3a1-214">Gdy NODE2 próbuje tooestablish łączność z Węzeł1, pakiety skierowany NODE1 nigdy nie opuszczają NODE2 ponieważ rozpoznawany tooitself adresów IP w NODE1.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-214">When NODE2 attempts tooestablish connectivity with NODE1, packets directed at NODE1 never leave NODE2 because it resolves NODE1’s IP address tooitself.</span></span> <span data-ttu-id="2a3a1-215">NODE2 nie może ustanowić połączenia z NODE1 następnie utraty kworum i zamyka hello klastra.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-215">NODE2 cannot establish connectivity with NODE1, then loses quorum and shuts down hello cluster.</span></span>
6. <span data-ttu-id="2a3a1-216">W międzyczasie hello NODE1 może wysyłać tooNODE2 pakietów, ale nie może wysłać odpowiedzi NODE2.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-216">In hello meantime, NODE1 can send packets tooNODE2, but NODE2 cannot reply.</span></span> <span data-ttu-id="2a3a1-217">Węzeł1 utraty kworum i zamyka hello klastra.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-217">NODE1 loses quorum and shuts down hello cluster.</span></span>

<span data-ttu-id="2a3a1-218">W tym scenariuszu można uniknąć, przypisując nieużywane statyczny adres IP, takie jak adres IP połączenia lokalnego, takie jak 169.254.1.1, Nazwa sieciowa klastra toohello w kolejności toobring hello Nazwa sieciowa klastra online.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-218">This scenario can be avoided by assigning an unused static IP address, such as a link-local IP address like 169.254.1.1, toohello cluster network name in order toobring hello cluster network name online.</span></span> <span data-ttu-id="2a3a1-219">toosimplify to przetwarzania, zobacz [Windows konfigurowania klastra trybu failover na platformie Azure dla grup dostępności](http://social.technet.microsoft.com/wiki/contents/articles/14776.configuring-windows-failover-cluster-in-windows-azure-for-alwayson-availability-groups.aspx).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-219">toosimplify this process, see [Configuring Windows failover cluster in Azure for availability groups](http://social.technet.microsoft.com/wiki/contents/articles/14776.configuring-windows-failover-cluster-in-windows-azure-for-alwayson-availability-groups.aspx).</span></span>

<span data-ttu-id="2a3a1-220">Aby uzyskać więcej informacji, zobacz [Konfigurowanie grup dostępności Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-220">For more information, see [Configure availability groups in Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span></span>

### <a name="availability-group-listener-support"></a><span data-ttu-id="2a3a1-221">Obsługa odbiornika grupy dostępności</span><span class="sxs-lookup"><span data-stu-id="2a3a1-221">Availability group listener support</span></span>
<span data-ttu-id="2a3a1-222">Odbiorniki grupy dostępności są obsługiwane na maszynach wirtualnych Azure systemem Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2 i Windows Server 2016.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-222">Availability group listeners are supported on Azure VMs running Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2, and Windows Server 2016.</span></span> <span data-ttu-id="2a3a1-223">Ta obsługa jest możliwe przez użycie hello punktów końcowych z równoważeniem obciążenia, włączone na maszynach wirtualnych Azure hello, które są węzłami grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-223">This support is made possible by hello use of load-balanced endpoints enabled on hello Azure VMs that are availability group nodes.</span></span> <span data-ttu-id="2a3a1-224">Należy wykonać kroki specjalnej konfiguracji dla hello toowork odbiorników dla obu aplikacji klienckich, które są uruchomione w Azure, a także systemami lokalnymi.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-224">You must follow special configuration steps for hello listeners toowork for both client applications that are running in Azure as well as those running on-premises.</span></span>

<span data-ttu-id="2a3a1-225">Istnieją dwie główne opcje dotyczące konfigurowania programu odbiornika: zewnętrznych (publicznych) lub wewnętrzny.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-225">There are two main options for setting up your listener: external (public) or internal.</span></span> <span data-ttu-id="2a3a1-226">Witaj zewnętrznych (publicznych) odbiornika używa modułu równoważenia obciążenia z Internetem oraz jest skojarzony z publicznych wirtualnych IP (VIP), który jest dostępny za pośrednictwem hello internet.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-226">hello external (public) listener uses an internet facing load balancer and is associated with a public Virtual IP (VIP) that is accessible over hello internet.</span></span> <span data-ttu-id="2a3a1-227">Odbiornik wewnętrzny używa wewnętrznego modułu równoważenia obciążenia i tylko obsługuje klientów w ramach hello tej samej sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-227">An internal listener uses an internal load balancer and only supports clients within hello same Virtual Network.</span></span> <span data-ttu-id="2a3a1-228">W obu załadować typu modułu równoważenia, należy włączyć bezpośredniego zwrotu serwera.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-228">For either load balancer type, you must enable Direct Server Return.</span></span> 

<span data-ttu-id="2a3a1-229">Jeśli grupy dostępności hello obejmujących wiele podsieci platformy Azure (na przykład wdrożenia, które przecina regiony platformy Azure), musi zawierać ciąg połączenia powitania klienta "**MultisubnetFailover = True**".</span><span class="sxs-lookup"><span data-stu-id="2a3a1-229">If hello Availability Group spans multiple Azure subnets (such as a deployment that crosses Azure regions), hello client connection string must include "**MultisubnetFailover=True**".</span></span> <span data-ttu-id="2a3a1-230">Powoduje to połączenie równoległe prób toohello replik w różnych podsieciach hello.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-230">This results in parallel connection attempts toohello replicas in hello different subnets.</span></span> <span data-ttu-id="2a3a1-231">Aby uzyskać instrukcje na temat konfigurowania odbiornik zobacz</span><span class="sxs-lookup"><span data-stu-id="2a3a1-231">For instructions on setting up a listener, see</span></span>

* <span data-ttu-id="2a3a1-232">[Skonfiguruj odbiornik ILB dla grupy dostępności na platformie Azure](virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-232">[Configure an ILB listener for availability groups in Azure](virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md).</span></span>
* <span data-ttu-id="2a3a1-233">[Skonfiguruj odbiornik zewnętrzny dla grup dostępności w systemie Azure](../classic/ps-sql-ext-listener.md).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-233">[Configure an external listener for availability groups in Azure](../classic/ps-sql-ext-listener.md).</span></span>

<span data-ttu-id="2a3a1-234">Replika dostępności tooeach można połączyć oddzielnie, bezpośrednio łącząc toohello wystąpienie usługi.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-234">You can still connect tooeach availability replica separately by connecting directly toohello service instance.</span></span> <span data-ttu-id="2a3a1-235">Ponadto ponieważ grupy dostępności są zgodne z klientów dublowania bazy danych, możesz połączyć toohello repliki dostępności, takich jak dublowania partnerów tak długo, jak skonfigurowano hello repliki bazy danych podobny dublowania toodatabase:</span><span class="sxs-lookup"><span data-stu-id="2a3a1-235">Also, since availability groups are backward compatible with database mirroring clients, you can connect toohello availability replicas like database mirroring partners as long as hello replicas are configured similar toodatabase mirroring:</span></span>

* <span data-ttu-id="2a3a1-236">Jedna replika podstawowa i jedna replika pomocnicza</span><span class="sxs-lookup"><span data-stu-id="2a3a1-236">One primary replica and one secondary replica</span></span>
* <span data-ttu-id="2a3a1-237">Witaj replika pomocnicza została skonfigurowana jako bez możliwości odczytu (**czytelny dodatkowej** ustawienie zbyt**nr**)</span><span class="sxs-lookup"><span data-stu-id="2a3a1-237">hello secondary replica is configured as non-readable (**Readable Secondary** option set too**No**)</span></span>

<span data-ttu-id="2a3a1-238">Przykład parametry połączenia klienta, które odpowiada konfiguracji podobnych funkcji dublowania bazy danych toothis za pomocą ADO.NET lub SQL Server Native Client znajduje się poniżej:</span><span class="sxs-lookup"><span data-stu-id="2a3a1-238">An example client connection string that corresponds toothis database mirroring-like configuration using ADO.NET or SQL Server Native Client is below:</span></span>

    Data Source=ReplicaServer1;Failover Partner=ReplicaServer2;Initial Catalog=AvailabilityDatabase;

<span data-ttu-id="2a3a1-239">Aby uzyskać więcej informacji dotyczących łączności klienta Zobacz:</span><span class="sxs-lookup"><span data-stu-id="2a3a1-239">For more information on client connectivity, see:</span></span>

* [<span data-ttu-id="2a3a1-240">Przy użyciu słowa kluczowe parametrów połączenia w usłudze SQL Server Native Client</span><span class="sxs-lookup"><span data-stu-id="2a3a1-240">Using Connection String Keywords with SQL Server Native Client</span></span>](https://msdn.microsoft.com/library/ms130822.aspx)
* [<span data-ttu-id="2a3a1-241">Połączenia klientów tooa sesji dublowania bazy danych (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="2a3a1-241">Connect Clients tooa Database Mirroring Session (SQL Server)</span></span>](https://technet.microsoft.com/library/ms175484.aspx)
* [<span data-ttu-id="2a3a1-242">Łączenie tooAvailability odbiornika grupy w hybrydowego</span><span class="sxs-lookup"><span data-stu-id="2a3a1-242">Connecting tooAvailability Group Listener in Hybrid IT</span></span>](http://blogs.msdn.com/b/sqlalwayson/archive/2013/02/14/connecting-to-availability-group-listener-in-hybrid-it.aspx)
* [<span data-ttu-id="2a3a1-243">Odbiorniki grupy dostępności, łączności klienta i pracy awaryjnej aplikacji (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="2a3a1-243">Availability Group Listeners, Client Connectivity, and Application Failover (SQL Server)</span></span>](https://technet.microsoft.com/library/hh213417.aspx)
* [<span data-ttu-id="2a3a1-244">Przy użyciu parametrów połączenia dublowania bazy danych z grupy dostępności</span><span class="sxs-lookup"><span data-stu-id="2a3a1-244">Using Database-Mirroring Connection Strings with Availability Groups</span></span>](https://technet.microsoft.com/library/hh213417.aspx)

### <a name="network-latency-in-hybrid-it"></a><span data-ttu-id="2a3a1-245">Opóźnienie sieci hybrydowy IT</span><span class="sxs-lookup"><span data-stu-id="2a3a1-245">Network latency in hybrid IT</span></span>
<span data-ttu-id="2a3a1-246">Należy wdrożyć rozwiązanie HADR z hello założenie, że mogą być okresów z sieci wysokiego opóźnienia między siecią lokalną a Azure.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-246">You should deploy your HADR solution with hello assumption that there may be periods of time with high network latency between your on-premises network and Azure.</span></span> <span data-ttu-id="2a3a1-247">Podczas wdrażania tooAzure repliki, należy użyć zatwierdzania asynchronicznego zamiast zatwierdzanie synchroniczne hello trybu synchronizacji.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-247">When deploying replicas tooAzure, you should use asynchronous commit instead of synchronous commit for hello synchronization mode.</span></span> <span data-ttu-id="2a3a1-248">Podczas wdrażania serwerów dublowania bazy danych zarówno lokalnie i na platformie Azure, użyj trybu wysokiej wydajności hello zamiast trybu wysokiej bezpieczeństwa hello.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-248">When deploying database mirroring servers both on-premises and in Azure, use hello high-performance mode instead of hello high-safety mode.</span></span>

### <a name="geo-replication-support"></a><span data-ttu-id="2a3a1-249">Replikacja geograficzna pomocy technicznej</span><span class="sxs-lookup"><span data-stu-id="2a3a1-249">Geo-replication support</span></span>
<span data-ttu-id="2a3a1-250">Replikacja geograficzna, w przypadku dysków Azure nie obsługuje hello plik danych i plik dziennika dotyczący tej samej bazy danych toobe przechowywane na oddzielnych dyskach hello.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-250">Geo-replication in Azure disks does not support hello data file and log file of hello same database toobe stored on separate disks.</span></span> <span data-ttu-id="2a3a1-251">GRS są replikowane zmian na każdym dysku niezależnie i asynchronicznie.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-251">GRS replicates changes on each disk independently and asynchronously.</span></span> <span data-ttu-id="2a3a1-252">Ten mechanizm gwarantuje kolejność zapisu hello w ramach jednego dysku na powitania kopiowania replikacją geograficzną, a nie na replikacją geograficzną kopie wiele dysków.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-252">This mechanism guarantees hello write order within a single disk on hello geo-replicated copy, but not across geo-replicated copies of multiple disks.</span></span> <span data-ttu-id="2a3a1-253">Jeśli konfigurujesz toostore bazy danych, jego plików danych i jego pliku dziennika na oddzielnych dyskach, hello odzyskać dyski po awarii może zawierać aktualniejszej kopii pliku danych hello niż hello pliku dziennika, jakich hello zapisu z wyprzedzeniem dziennika w programie SQL Server i hello kwasu właściwości transakcji.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-253">If you configure a database toostore its data file and its log file on separate disks, hello recovered disks after a disaster may contain a more up-to-date copy of hello data file than hello log file, which breaks hello write-ahead log in SQL Server and hello ACID properties of transactions.</span></span> <span data-ttu-id="2a3a1-254">Jeśli nie masz hello opcja toodisable — replikacja geograficzna hello konta magazynu, należy go przechowywać wszystkie dane i pliki dziennika określonej bazy danych na powitania sam dysku.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-254">If you do not have hello option toodisable geo-replication on hello storage account, you should keep all data and log files for a given database on hello same disk.</span></span> <span data-ttu-id="2a3a1-255">Należy użyć więcej niż jednego dysku powodu toohello rozmiar hello bazy danych, należy najpierw toodeploy jednego rozwiązania w zakresie odzyskiwania po awarii hello powyższej tooensure nadmiarowość danych.</span><span class="sxs-lookup"><span data-stu-id="2a3a1-255">If you must use more than one disk due toohello size of hello database, you need toodeploy one of hello disaster recovery solutions listed above tooensure data redundancy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="2a3a1-256">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="2a3a1-256">Next steps</span></span>
<span data-ttu-id="2a3a1-257">Jeśli potrzebujesz toocreate maszyny wirtualnej platformy Azure z programem SQL Server, zobacz [inicjowania obsługi maszyny wirtualnej programu SQL Server na platformie Azure](virtual-machines-windows-portal-sql-server-provision.md).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-257">If you need toocreate an Azure virtual machine with SQL Server, see [Provisioning a SQL Server Virtual Machine on Azure](virtual-machines-windows-portal-sql-server-provision.md).</span></span>

<span data-ttu-id="2a3a1-258">tooget hello najlepszą wydajność z programu SQL Server uruchomionego na maszynie Wirtualnej platformy Azure, zobacz wskazówki hello w [wydajności najlepsze rozwiązania dotyczące programu SQL Server w usłudze Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-258">tooget hello best performance from SQL Server running on an Azure VM, see hello guidance in [Performance Best Practices for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span></span>

<span data-ttu-id="2a3a1-259">Dla innych tematach dotyczących toorunning programu SQL Server na maszynach wirtualnych Azure, zobacz [programu SQL Server na maszynach wirtualnych Azure](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2a3a1-259">For other topics related toorunning SQL Server in Azure VMs, see [SQL Server on Azure Virtual Machines](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

### <a name="other-resources"></a><span data-ttu-id="2a3a1-260">Inne zasoby</span><span class="sxs-lookup"><span data-stu-id="2a3a1-260">Other resources</span></span>
* [<span data-ttu-id="2a3a1-261">Instalowanie nowego lasu usługi Active Directory na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="2a3a1-261">Install a new Active Directory forest in Azure</span></span>](../../../active-directory/active-directory-new-forest-virtual-machine.md)
* [<span data-ttu-id="2a3a1-262">Tworzenie klastra trybu Failover dla grupy dostępności w maszynie Wirtualnej platformy Azure</span><span class="sxs-lookup"><span data-stu-id="2a3a1-262">Create Failover Cluster for availability groups in Azure VM</span></span>](http://gallery.technet.microsoft.com/scriptcenter/Create-WSFC-Cluster-for-7c207d3a)

