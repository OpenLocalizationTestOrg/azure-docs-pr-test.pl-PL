---
title: "Wydajność najlepsze rozwiązania dotyczące programu SQL Server na platformie Azure | Dokumentacja firmy Microsoft"
description: "Zawiera najlepsze rozwiązania dla optymalizacji wydajności programu SQL Server na maszynach wirtualnych Microsoft Azure."
services: virtual-machines-windows
documentationcenter: na
author: rothja
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: a0c85092-2113-4982-b73a-4e80160bac36
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/27/2017
ms.author: jroth
ms.openlocfilehash: 5595ea016ab01d20cee82b75f56623bb0727a1b3
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/29/2017
---
# <a name="performance-best-practices-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="8ed8a-103">Najlepsze rozwiązania w zakresie wydajności dla programu SQL Server w usłudze Azure Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="8ed8a-103">Performance best practices for SQL Server in Azure Virtual Machines</span></span>

## <a name="overview"></a><span data-ttu-id="8ed8a-104">Omówienie</span><span class="sxs-lookup"><span data-stu-id="8ed8a-104">Overview</span></span>

<span data-ttu-id="8ed8a-105">Ten temat zawiera najlepsze rozwiązania dotyczące optymalizacji wydajności programu SQL Server w maszynie wirtualnej platformy Azure firmy Microsoft.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-105">This topic provides best practices for optimizing SQL Server performance in Microsoft Azure Virtual Machine.</span></span> <span data-ttu-id="8ed8a-106">Podczas uruchamiania programu SQL Server w maszynach wirtualnych platformy Azure, zaleca się kontynuować przy użyciu tej samej bazy danych opcje dostrajania wydajności mających zastosowanie do programu SQL Server w środowisku serwera lokalnego.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-106">While running SQL Server in Azure Virtual Machines, we recommend that you continue using the same database performance tuning options that are applicable to SQL Server in on-premises server environment.</span></span> <span data-ttu-id="8ed8a-107">Jednak wydajność relacyjnej bazy danych w chmurze publicznej zależy od wielu czynników, takich jak rozmiar maszyny wirtualnej, a konfiguracja dysków z danymi.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-107">However, the performance of a relational database in a public cloud depends on many factors such as the size of a virtual machine, and the configuration of the data disks.</span></span>

<span data-ttu-id="8ed8a-108">Podczas tworzenia obrazów programu SQL Server [należy wziąć pod uwagę inicjowania obsługi administracyjnej maszyn wirtualnych w portalu Azure](virtual-machines-windows-portal-sql-server-provision.md).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-108">When creating SQL Server images, [consider provisioning your VMs in the Azure portal](virtual-machines-windows-portal-sql-server-provision.md).</span></span> <span data-ttu-id="8ed8a-109">Udostępnione w portalu za pomocą Menedżera zasobów serwera SQL w maszynach wirtualnych implementuje wszystkie następujące najlepsze rozwiązania, w tym konfiguracji magazynu.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-109">SQL Server VMs provisioned in the Portal with Resource Manager implement all these best practices, including the storage configuration.</span></span>

<span data-ttu-id="8ed8a-110">Ten artykuł koncentruje się na pobieranie *najlepsze* wydajności programu SQL Server na maszynach wirtualnych Azure.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-110">This article is focused on getting the *best* performance for SQL Server on Azure VMs.</span></span> <span data-ttu-id="8ed8a-111">Jeżeli obciążenie jest mniej wymagająca, nie mogą wymagać co optymalizacji wymienionych poniżej.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-111">If your workload is less demanding, you might not require every optimization listed below.</span></span> <span data-ttu-id="8ed8a-112">Twoje potrzeby w zakresie wydajności i obciążenia wzorce wziąć pod uwagę oceny tych zaleceń.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-112">Consider your performance needs and workload patterns as you evaluate these recommendations.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="quick-check-list"></a><span data-ttu-id="8ed8a-113">Szybkie sprawdzenie listy</span><span class="sxs-lookup"><span data-stu-id="8ed8a-113">Quick check list</span></span>

<span data-ttu-id="8ed8a-114">Oto lista szybkie sprawdzenie do uzyskania optymalnej wydajności programu SQL Server na maszynach wirtualnych platformy Azure:</span><span class="sxs-lookup"><span data-stu-id="8ed8a-114">The following is a quick check list for optimal performance of SQL Server on Azure Virtual Machines:</span></span>

| <span data-ttu-id="8ed8a-115">Obszar</span><span class="sxs-lookup"><span data-stu-id="8ed8a-115">Area</span></span> | <span data-ttu-id="8ed8a-116">Optymalizacje</span><span class="sxs-lookup"><span data-stu-id="8ed8a-116">Optimizations</span></span> |
| --- | --- |
| [<span data-ttu-id="8ed8a-117">Rozmiar maszyny Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="8ed8a-117">VM size</span></span>](#vm-size-guidance) |<span data-ttu-id="8ed8a-118">[DS3](../../virtual-machines-windows-sizes-memory.md) lub nowszej wersji Enterprise programu SQL.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-118">[DS3](../../virtual-machines-windows-sizes-memory.md) or higher for SQL Enterprise edition.</span></span><br/><br/><span data-ttu-id="8ed8a-119">[DS2](../../virtual-machines-windows-sizes-memory.md) lub nowszej wersji Standard programu SQL i sieci Web.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-119">[DS2](../../virtual-machines-windows-sizes-memory.md) or higher for SQL Standard and Web editions.</span></span> |
| [<span data-ttu-id="8ed8a-120">Storage</span><span class="sxs-lookup"><span data-stu-id="8ed8a-120">Storage</span></span>](#storage-guidance) |<span data-ttu-id="8ed8a-121">Użyj [magazyn w warstwie Premium](../../../storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-121">Use [Premium Storage](../../../storage/common/storage-premium-storage.md).</span></span> <span data-ttu-id="8ed8a-122">Magazynu w warstwie standardowa zaleca się tylko do programowania i testowania.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-122">Standard storage is only recommended for dev/test.</span></span><br/><br/><span data-ttu-id="8ed8a-123">Zachowaj [konta magazynu](../../../storage/common/storage-create-storage-account.md) i maszyny Wirtualnej serwera SQL, w tym samym regionie.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-123">Keep the [storage account](../../../storage/common/storage-create-storage-account.md) and SQL Server VM in the same region.</span></span><br/><br/><span data-ttu-id="8ed8a-124">Wyłącz Azure [magazynu geograficznie nadmiarowego](../../../storage/common/storage-redundancy.md) (replikacja geograficzna) na koncie magazynu.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-124">Disable Azure [geo-redundant storage](../../../storage/common/storage-redundancy.md) (geo-replication) on the storage account.</span></span> |
| [<span data-ttu-id="8ed8a-125">Dyski</span><span class="sxs-lookup"><span data-stu-id="8ed8a-125">Disks</span></span>](#disks-guidance) |<span data-ttu-id="8ed8a-126">Użyj co najmniej 2 [dysków P30](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) (1 dla plików dziennika; 1 dla danych plików i TempDB).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-126">Use a minimum of 2 [P30 disks](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) (1 for log files; 1 for data files and TempDB).</span></span><br/><br/><span data-ttu-id="8ed8a-127">Unikaj używania systemu operacyjnego lub dysków tymczasowego magazynu bazy danych lub rejestrowania.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-127">Avoid using operating system or temporary disks for database storage or logging.</span></span><br/><br/><span data-ttu-id="8ed8a-128">Włącz odczytać buforowanie na dyskach hosting pliki danych i bazy danych TempDB.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-128">Enable read caching on the disk(s) hosting the data files and TempDB.</span></span><br/><br/><span data-ttu-id="8ed8a-129">Nie należy włączać buforowanie na dyskach hosting pliku dziennika.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-129">Do not enable caching on disk(s) hosting the log file.</span></span><br/><br/><span data-ttu-id="8ed8a-130">Ważne: Zatrzymaj usługę programu SQL Server, w przypadku zmiany ustawień pamięci podręcznej dysku maszyny Wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-130">Important: Stop the SQL Server service when changing the cache settings for an Azure VM disk.</span></span><br/><br/><span data-ttu-id="8ed8a-131">Paskowych wiele dysków danych Azure, aby uzyskać większą przepływność we/wy.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-131">Stripe multiple Azure data disks to get increased IO throughput.</span></span><br/><br/><span data-ttu-id="8ed8a-132">Format z opisem rozmiarów alokacji.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-132">Format with documented allocation sizes.</span></span> |
| [<span data-ttu-id="8ed8a-133">WE/WY</span><span class="sxs-lookup"><span data-stu-id="8ed8a-133">I/O</span></span>](#io-guidance) |<span data-ttu-id="8ed8a-134">Włączanie kompresji strony bazy danych.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-134">Enable database page compression.</span></span><br/><br/><span data-ttu-id="8ed8a-135">Włącz inicjowanie błyskawicznych plików dla danych plików.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-135">Enable instant file initialization for data files.</span></span><br/><br/><span data-ttu-id="8ed8a-136">Ogranicz lub wyłącz automatyczne zwiększanie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-136">Limit or disable autogrow on the database.</span></span><br/><br/><span data-ttu-id="8ed8a-137">Wyłącz autoshrink w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-137">Disable autoshrink on the database.</span></span><br/><br/><span data-ttu-id="8ed8a-138">Przenieś wszystkie bazy danych do dysków z danymi, w tym systemowych baz danych.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-138">Move all databases to data disks, including system databases.</span></span><br/><br/><span data-ttu-id="8ed8a-139">Przenieś programu SQL Server błąd dziennika śledzenia pliku katalogów i dysków z danymi.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-139">Move SQL Server error log and trace file directories to data disks.</span></span><br/><br/><span data-ttu-id="8ed8a-140">Ustawienia domyślne lokalizacje plików kopii zapasowej i bazy danych.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-140">Setup default backup and database file locations.</span></span><br/><br/><span data-ttu-id="8ed8a-141">Włącz zablokowanych stron.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-141">Enable locked pages.</span></span><br/><br/><span data-ttu-id="8ed8a-142">Zastosuj poprawki wydajności programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-142">Apply SQL Server performance fixes.</span></span> |
| [<span data-ttu-id="8ed8a-143">Funkcja unikatowe</span><span class="sxs-lookup"><span data-stu-id="8ed8a-143">Feature specific</span></span>](#feature-specific-guidance) |<span data-ttu-id="8ed8a-144">Utwórz kopię zapasową bezpośrednio do magazynu obiektów blob.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-144">Back up directly to blob storage.</span></span> |

<span data-ttu-id="8ed8a-145">Aby uzyskać więcej informacji na temat *jak* i *Dlaczego* aby te optymalizacje, zapoznaj się z tematem szczegółowe informacje i wskazówki zamieszczone w poniższych sekcjach.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-145">For more information on *how* and *why* to make these optimizations, please review the details and guidance provided in following sections.</span></span>

## <a name="vm-size-guidance"></a><span data-ttu-id="8ed8a-146">Wskazówki dotyczące rozmiaru maszyny Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="8ed8a-146">VM size guidance</span></span>

<span data-ttu-id="8ed8a-147">W przypadku aplikacji poufnych wydajności zaleca się użycie następujących [rozmiary maszyn wirtualnych](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json):</span><span class="sxs-lookup"><span data-stu-id="8ed8a-147">For performance sensitive applications, it’s recommended that you use the following [virtual machines sizes](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json):</span></span>

* <span data-ttu-id="8ed8a-148">**SQL Server Enterprise Edition**: DS3 lub nowszej</span><span class="sxs-lookup"><span data-stu-id="8ed8a-148">**SQL Server Enterprise Edition**: DS3 or higher</span></span>
* <span data-ttu-id="8ed8a-149">**SQL Server Standard i Web Edition**: DS2 lub nowszej</span><span class="sxs-lookup"><span data-stu-id="8ed8a-149">**SQL Server Standard and Web Editions**: DS2 or higher</span></span>

## <a name="storage-guidance"></a><span data-ttu-id="8ed8a-150">Wskazówki dotyczące magazynu</span><span class="sxs-lookup"><span data-stu-id="8ed8a-150">Storage guidance</span></span>

<span data-ttu-id="8ed8a-151">Obsługa maszyn wirtualnych: seria DS (wraz z serii DSv2 i GS-series) [magazyn w warstwie Premium](../../../storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-151">DS-series (along with DSv2-series and GS-series) VMs support [Premium Storage](../../../storage/common/storage-premium-storage.md).</span></span> <span data-ttu-id="8ed8a-152">Magazyn w warstwie Premium jest zalecana dla wszystkich obciążeń produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-152">Premium Storage is recommended for all production workloads.</span></span>

> [!WARNING]
> <span data-ttu-id="8ed8a-153">Standard Storage ma różnych opóźnienia i przepustowości i jest zalecane tylko dla obciążeń i testowania.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-153">Standard Storage has varying latencies and bandwidth and is only recommended for dev/test workloads.</span></span> <span data-ttu-id="8ed8a-154">Obciążeń produkcyjnych należy używać magazyn w warstwie Premium.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-154">Production workloads should use Premium Storage.</span></span>

<span data-ttu-id="8ed8a-155">Ponadto zaleca się tworzenie konta magazynu Azure w tym samym centrum danych jako maszyn wirtualnych programu SQL Server w celu zmniejszenia opóźnień transferu.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-155">In addition, we recommend that you create your Azure storage account in the same data center as your SQL Server virtual machines to reduce transfer delays.</span></span> <span data-ttu-id="8ed8a-156">Podczas tworzenia konta magazynu, należy wyłączyć — replikacja geograficzna jako kolejność spójne zapisu na wielu dyskach nie jest gwarantowana.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-156">When creating a storage account, disable geo-replication as consistent write order across multiple disks is not guaranteed.</span></span> <span data-ttu-id="8ed8a-157">Zamiast tego należy wziąć pod uwagę konfigurowania technologii odzyskiwania po awarii programu SQL Server, między dwiema danych Azure.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-157">Instead, consider configuring a SQL Server disaster recovery technology between two Azure data centers.</span></span> <span data-ttu-id="8ed8a-158">Aby uzyskać więcej informacji, zobacz [wysokiej dostępności i odzyskiwania po awarii dla programu SQL Server w usłudze Azure Virtual Machines](virtual-machines-windows-sql-high-availability-dr.md).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-158">For more information, see [High Availability and Disaster Recovery for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-high-availability-dr.md).</span></span>

## <a name="disks-guidance"></a><span data-ttu-id="8ed8a-159">Wskazówki dotyczące dysków</span><span class="sxs-lookup"><span data-stu-id="8ed8a-159">Disks guidance</span></span>

<span data-ttu-id="8ed8a-160">Istnieją trzy typy głównego dysku na maszynie Wirtualnej platformy Azure:</span><span class="sxs-lookup"><span data-stu-id="8ed8a-160">There are three main disk types on an Azure VM:</span></span>

* <span data-ttu-id="8ed8a-161">**Dysk systemu operacyjnego**: podczas tworzenia maszyny wirtualnej platformy Azure, platforma dołączą co najmniej jednego dysku (oznaczone jako **C** dysku) do maszyny Wirtualnej dla dysku systemu operacyjnego.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-161">**OS disk**: When you create an Azure Virtual Machine, the platform will attach at least one disk (labeled as the **C** drive) to the VM for your operating system disk.</span></span> <span data-ttu-id="8ed8a-162">Ten dysk jest plik VHD przechowywany jako stronicowy obiekt blob w magazynie.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-162">This disk is a VHD stored as a page blob in storage.</span></span>
* <span data-ttu-id="8ed8a-163">**Dysku tymczasowym**: maszyny wirtualne Azure zawiera inny dysk o nazwie dysku tymczasowym (oznaczone jako **D**: dysku).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-163">**Temporary disk**: Azure Virtual Machines contain another disk called the temporary disk (labeled as the **D**: drive).</span></span> <span data-ttu-id="8ed8a-164">Jest to dysk na węźle, który może służyć do miejsce na pliki tymczasowe.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-164">This is a disk on the node that can be used for scratch space.</span></span>
* <span data-ttu-id="8ed8a-165">**Dyski danych**: do maszyny wirtualnej można również dołączyć dodatkowych dysków, jako dyski danych i będą one przechowywane w magazynie jako stronicowych obiektów blob.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-165">**Data disks**: You can also attach additional disks to your virtual machine as data disks, and these will be stored in storage as page blobs.</span></span>

<span data-ttu-id="8ed8a-166">W poniższych sekcjach opisano zalecenia dotyczące używania tych dyskach.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-166">The following sections describe recommendations for using these different disks.</span></span>

### <a name="operating-system-disk"></a><span data-ttu-id="8ed8a-167">Dysk systemu operacyjnego</span><span class="sxs-lookup"><span data-stu-id="8ed8a-167">Operating system disk</span></span>

<span data-ttu-id="8ed8a-168">Dysk systemu operacyjnego jest wirtualnego dysku twardego, który można rozruchu i instalacji uruchomiona wersja systemu operacyjnego i jest oznaczony jako **C** dysku.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-168">An operating system disk is a VHD that you can boot and mount as a running version of an operating system and is labeled as **C** drive.</span></span>

<span data-ttu-id="8ed8a-169">Domyślnie buforowanie zasad na dysku systemu operacyjnego jest **odczytu/zapisu**.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-169">Default caching policy on the operating system disk is **Read/Write**.</span></span> <span data-ttu-id="8ed8a-170">W przypadku aplikacji poufnych wydajności zalecane jest użycie dysków z danymi zamiast dysku systemu operacyjnego.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-170">For performance sensitive applications, we recommend that you use data disks instead of the operating system disk.</span></span> <span data-ttu-id="8ed8a-171">Zobacz sekcję dotyczącą poniżej dysków z danymi.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-171">See the section on Data Disks below.</span></span>

### <a name="temporary-disk"></a><span data-ttu-id="8ed8a-172">Tymczasowe dysku</span><span class="sxs-lookup"><span data-stu-id="8ed8a-172">Temporary disk</span></span>

<span data-ttu-id="8ed8a-173">Dysk magazyn tymczasowy, oznaczone jako **D**: dysk, nie są utrwalane w magazynie obiektów blob platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-173">The temporary storage drive, labeled as the **D**: drive, is not persisted to Azure blob storage.</span></span> <span data-ttu-id="8ed8a-174">Nie należy przechowywać plików bazy danych użytkownika lub plików dziennika transakcji użytkownika w **D**: dysku.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-174">Do not store your user database files or user transaction log files on the **D**: drive.</span></span>

<span data-ttu-id="8ed8a-175">D-series, Dv2 serii i G serii maszyn wirtualnych jest tymczasowej stacji na tych maszynach wirtualnych na dyskach SSD.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-175">For D-series, Dv2-series, and G-series VMs, the temporary drive on these VMs is SSD-based.</span></span> <span data-ttu-id="8ed8a-176">Jeżeli obciążenie intensywnie korzysta z bazy danych TempDB (np. obiekty tymczasowe lub złożonych sprzężeń), przechowywania bazy danych TempDB na **D** dysku może spowodować wyższej przepustowości TempDB i zmniejszyć opóźnienia bazy danych TempDB.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-176">If your workload makes heavy use of TempDB (e.g. for temporary objects or complex joins), storing TempDB on the **D** drive could result in higher TempDB throughput and lower TempDB latency.</span></span>

<span data-ttu-id="8ed8a-177">Dla maszyn wirtualnych, które obsługują magazyn w warstwie Premium (serii DS, DSv2 serii i serii GS) zalecamy przechowywanie bazy danych TempDB na dysku, który obsługuje magazyn w warstwie Premium z buforowaniem odczytu włączona.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-177">For VMs that support Premium Storage (DS-series, DSv2-series, and GS-series), we recommend storing TempDB on a disk that supports Premium Storage with read caching enabled.</span></span> <span data-ttu-id="8ed8a-178">Istnieje jeden wyjątek do tego zalecenia; Jeśli użycie bazy danych TempDB jest intensywnie wykonujących operacje zapisu, można osiągnąć większą wydajność dzięki przechowywaniu bazy danych TempDB na lokalnym **D** dysk, który jest również na dyskach SSD na rozmiary maszyny.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-178">There is one exception to this recommendation; if your TempDB usage is write-intensive, you can achieve higher performance by storing TempDB on the local **D** drive, which is also SSD-based on these machine sizes.</span></span>

### <a name="data-disks"></a><span data-ttu-id="8ed8a-179">Dyski danych</span><span class="sxs-lookup"><span data-stu-id="8ed8a-179">Data disks</span></span>

* <span data-ttu-id="8ed8a-180">**Użyć dysków danych dla plików danych i dziennika**: co najmniej, użyj 2 magazyn w warstwie Premium [dysków P30](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) gdzie jeden dysk zawiera pliki dziennika, a drugi zawiera dane i pliki bazy danych TempDB.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-180">**Use data disks for data and log files**: At a minimum, use 2 Premium Storage [P30 disks](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) where one disk contains the log file(s) and the other contains the data and TempDB file(s).</span></span> <span data-ttu-id="8ed8a-181">Każdy dysk magazyn w warstwie Premium zawiera pewną liczbę IOPs i przepustowości (MB/s) w zależności od rozmiaru, zgodnie z opisem w artykule: [przy użyciu magazyn w warstwie Premium dla dysków](../../../storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-181">Each Premium Storage disk provides a number of IOPs and bandwidth (MB/s) depending on its size, as described in the following article: [Using Premium Storage for Disks](../../../storage/common/storage-premium-storage.md).</span></span>

* <span data-ttu-id="8ed8a-182">**Rozkładanie**: więcej przepustowości, można dodać dodatkowego dysku z danymi i używać rozkładanie.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-182">**Disk Striping**: For more throughput, you can add additional data disks and use Disk Striping.</span></span> <span data-ttu-id="8ed8a-183">Aby określić liczbę dysków z danymi, należy przeanalizować liczbę IOPS i przepustowość wymagana Twoje pliki dziennika i dane i pliki bazy danych TempDB.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-183">To determine the number of data disks, you need to analyze the number of IOPS and bandwidth required for your log file(s), and for your data and TempDB file(s).</span></span> <span data-ttu-id="8ed8a-184">Zwróć uwagę, że różne rozmiary maszyny Wirtualnej mają różne limity liczby IOPs, jak i przepustowość obsługiwane, zobacz tabel na IOPS na [rozmiar maszyny Wirtualnej](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-184">Notice that different VM sizes have different limits on the number of IOPs and bandwidth supported, see the tables on IOPS per [VM size](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span> <span data-ttu-id="8ed8a-185">Skorzystaj z poniższych wskazówek:</span><span class="sxs-lookup"><span data-stu-id="8ed8a-185">Use the following guidelines:</span></span>

  * <span data-ttu-id="8ed8a-186">Dla systemu Windows 8/Windows Server 2012 lub nowszym, użyj [miejsca do magazynowania](https://technet.microsoft.com/library/hh831739.aspx) z następującymi wytycznymi:</span><span class="sxs-lookup"><span data-stu-id="8ed8a-186">For Windows 8/Windows Server 2012 or later, use [Storage Spaces](https://technet.microsoft.com/library/hh831739.aspx) with the following guidelines:</span></span>

      1. <span data-ttu-id="8ed8a-187">Ustaw przeplotu (rozmiar przeplotu) do 64 KB (65536 bajtów) dla obciążeń OLTP i 256 KB (262 144 bajty) dla obciążeń magazynowania danych, aby uniknąć wpływu na wydajność ze względu na niezgodność partycji.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-187">Set the interleave (stripe size) to 64 KB (65536 bytes) for OLTP workloads and 256 KB (262144 bytes) for data warehousing workloads to avoid performance impact due to partition misalignment.</span></span> <span data-ttu-id="8ed8a-188">To musi być ustawiona przy użyciu programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-188">This must be set with PowerShell.</span></span>
      1. <span data-ttu-id="8ed8a-189">Ustaw liczbę kolumn = Liczba dysków fizycznych.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-189">Set column count = number of physical disks.</span></span> <span data-ttu-id="8ed8a-190">W przypadku konfigurowania więcej niż 8 dysków (nie interfejsu użytkownika Menedżera serwera) za pomocą programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-190">Use PowerShell when configuring more than 8 disks (not Server Manager UI).</span></span> 

    <span data-ttu-id="8ed8a-191">Na przykład następujące programu PowerShell jest tworzona nowa pula magazynu o rozmiarze przeplotu do 64 KB i liczba kolumn do 2:</span><span class="sxs-lookup"><span data-stu-id="8ed8a-191">For example, the following PowerShell creates a new storage pool with the interleave size to 64 KB and the number of columns to 2:</span></span>

    ```powershell
    $PoolCount = Get-PhysicalDisk -CanPool $True
    $PhysicalDisks = Get-PhysicalDisk | Where-Object {$_.FriendlyName -like "*2" -or $_.FriendlyName -like "*3"}

    New-StoragePool -FriendlyName "DataFiles" -StorageSubsystemFriendlyName "Storage Spaces*" -PhysicalDisks $PhysicalDisks | New-VirtualDisk -FriendlyName "DataFiles" -Interleave 65536 -NumberOfColumns 2 -ResiliencySettingName simple –UseMaximumSize |Initialize-Disk -PartitionStyle GPT -PassThru |New-Partition -AssignDriveLetter -UseMaximumSize |Format-Volume -FileSystem NTFS -NewFileSystemLabel "DataDisks" -AllocationUnitSize 65536 -Confirm:$false 
    ```

  * <span data-ttu-id="8ed8a-192">Dla systemu Windows 2008 R2 lub starszym można używać dysków dynamicznych (woluminy rozłożone systemu operacyjnego) oraz rozmiar przeplotu zawsze wynosi 64 KB.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-192">For Windows 2008 R2 or earlier, you can use dynamic disks (OS striped volumes) and the stripe size is always 64 KB.</span></span> <span data-ttu-id="8ed8a-193">Należy pamiętać, że ta opcja jest przestarzały począwszy od systemu Windows 8/Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-193">Note that this option is deprecated as of Windows 8/Windows Server 2012.</span></span> <span data-ttu-id="8ed8a-194">Aby uzyskać informacje, zobacz oświadczenie pomocy technicznej w [usługi dysków wirtualnych są przenoszone do interfejsu API zarządzania magazynami systemu Windows](https://msdn.microsoft.com/library/windows/desktop/hh848071.aspx).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-194">For information, see the support statement at [Virtual Disk Service is transitioning to Windows Storage Management API](https://msdn.microsoft.com/library/windows/desktop/hh848071.aspx).</span></span>

  * <span data-ttu-id="8ed8a-195">Jeśli obciążenie nie dziennika znacznym i nie wymaga dedykowanego IOPs, można skonfigurować tylko jedną pulę magazynu.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-195">If your workload is not log intensive and does not need dedicated IOPs, you can configure just one storage pool.</span></span> <span data-ttu-id="8ed8a-196">W przeciwnym razie utwórz dwie pule magazynu, jeden dla plików dziennika i innej puli magazynu dla danych plików i bazy danych TempDB.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-196">Otherwise, create two storage pools, one for the log file(s) and another storage pool for the data file(s) and TempDB.</span></span> <span data-ttu-id="8ed8a-197">Określ liczbę dysków skojarzone z każdym pula magazynów oparta na Twoich oczekiwań obciążenia.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-197">Determine the number of disks associated with each storage pool based on your load expectations.</span></span> <span data-ttu-id="8ed8a-198">Należy pamiętać, że różne rozmiary maszyn wirtualnych pozwala różne liczby dysków dołączonych danych.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-198">Keep in mind that different VM sizes allow different numbers of attached data disks.</span></span> <span data-ttu-id="8ed8a-199">Aby uzyskać więcej informacji, zobacz [rozmiary maszyn wirtualnych](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-199">For more information, see [Sizes for Virtual Machines](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

  * <span data-ttu-id="8ed8a-200">Jeśli nie używasz magazyn w warstwie Premium (wszystkie scenariusze tworzenia/testowania), zalecane jest dodanie maksymalna liczba dysków danych obsługiwane przez użytkownika [rozmiar maszyny Wirtualnej](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) i użyj rozkładanie.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-200">If you are not using Premium Storage (dev/test scenarios), the recommendation is to add the maximum number of data disks supported by your [VM size](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) and use Disk Striping.</span></span>

* <span data-ttu-id="8ed8a-201">**Buforowanie zasad**: dysków z danymi dla magazyn w warstwie Premium, Włącz odczytu buforowanie na dyskach danych hosting tylko danych plików i bazy danych TempDB.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-201">**Caching policy**: For Premium Storage data disks, enable read caching on the data disks hosting your data files and TempDB only.</span></span> <span data-ttu-id="8ed8a-202">Jeśli nie używasz magazyn w warstwie Premium, nie należy włączać buforowania na wszelkich dyskach danych.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-202">If you are not using Premium Storage, do not enable any caching on any data disks.</span></span> <span data-ttu-id="8ed8a-203">Aby uzyskać instrukcje dotyczące konfigurowania dysku buforowania, zobacz następujące tematy: [AzureOSDisk zestaw](https://msdn.microsoft.com/library/azure/jj152847) i [AzureDataDisk zestawu](https://msdn.microsoft.com/library/azure/jj152851.aspx).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-203">For instructions on configuring disk caching, see the following topics: [Set-AzureOSDisk](https://msdn.microsoft.com/library/azure/jj152847) and [Set-AzureDataDisk](https://msdn.microsoft.com/library/azure/jj152851.aspx).</span></span>

  > [!WARNING]
  > <span data-ttu-id="8ed8a-204">Zatrzymaj usługę programu SQL Server, zmieniając ustawienie pamięci podręcznej dysków maszyny Wirtualnej platformy Azure, aby uniknąć ewentualne uszkodzenia bazy danych.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-204">Stop the SQL Server service when changing the cache setting of Azure VM disks to avoid the possibility of any database corruption.</span></span>

* <span data-ttu-id="8ed8a-205">**Rozmiar jednostki alokacji systemu plików NTFS**: podczas formatowania dysku danych, zaleca się użyć rozmiar jednostki alokacji 64 KB danych i plików dziennika, jak również w bazie danych TempDB.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-205">**NTFS allocation unit size**: When formatting the data disk, it is recommended that you use a 64-KB allocation unit size for data and log files as well as TempDB.</span></span>

* <span data-ttu-id="8ed8a-206">**Najlepsze rozwiązania dotyczące zarządzania dysku**: podczas usuwania dysku danych lub zmianę jej typu pamięci podręcznej, Zatrzymaj usługę programu SQL Server podczas zmiany.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-206">**Disk management best practices**: When removing a data disk or changing its cache type, stop the SQL Server service during the change.</span></span> <span data-ttu-id="8ed8a-207">Po zmianie ustawienia buforowania na dysku systemu operacyjnego, Azure zatrzymuje maszynę Wirtualną, zmienia typ pamięci podręcznej i ponownym uruchomieniu maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-207">When the caching settings are changed on the OS disk, Azure stops the VM, changes the cache type, and restarts the VM.</span></span> <span data-ttu-id="8ed8a-208">Zmiana ustawień pamięci podręcznej dysku danych maszyny Wirtualnej nie został on zatrzymany, ale dysk danych jest odłączona od maszyny Wirtualnej podczas zmiany, a następnie ponownie nałożona.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-208">When the cache settings of a data disk are changed, the VM is not stopped, but the data disk is detached from the VM during the change and then reattached.</span></span>

  > [!WARNING]
  > <span data-ttu-id="8ed8a-209">Nie można zatrzymać usługi programu SQL Server podczas tych czynności może spowodować uszkodzenie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-209">Failure to stop the SQL Server service during these operations can cause database corruption.</span></span>

## <a name="io-guidance"></a><span data-ttu-id="8ed8a-210">Wskazówki dotyczące operacji We/Wy</span><span class="sxs-lookup"><span data-stu-id="8ed8a-210">I/O guidance</span></span>

* <span data-ttu-id="8ed8a-211">Najbardziej efektywne magazyn w warstwie Premium są uzyskuje, gdy parallelize żądań i aplikacji.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-211">The best results with Premium Storage are achieved when you parallelize your application and requests.</span></span> <span data-ttu-id="8ed8a-212">Magazyn w warstwie Premium jest przeznaczony do scenariuszy, których głębokość kolejki we/wy jest większa niż 1, dlatego niewielkiego lub żadnego wzrost wydajności jednowątkowe serial żądań (nawet jeśli są one znacznym magazynu).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-212">Premium Storage is designed for scenarios where the IO queue depth is greater than 1, so you will see little or no performance gains for single-threaded serial requests (even if they are storage intensive).</span></span> <span data-ttu-id="8ed8a-213">Na przykład to może mieć wpływ na wyniki testu jednowątkowe narzędzia analizy wydajności, takich jak SQLIO.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-213">For example, this could impact the single-threaded test results of performance analysis tools, such as SQLIO.</span></span>

* <span data-ttu-id="8ed8a-214">Należy rozważyć użycie [bazy danych kompresji strony](https://msdn.microsoft.com/library/cc280449.aspx) jak może pomóc zwiększyć wydajność obciążeń intensywnie korzystających z operacji We/Wy.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-214">Consider using [database page compression](https://msdn.microsoft.com/library/cc280449.aspx) as it can help improve performance of I/O intensive workloads.</span></span> <span data-ttu-id="8ed8a-215">Jednak kompresji danych może zwiększyć użycie Procesora na serwerze bazy danych.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-215">However, the data compression might increase the CPU consumption on the database server.</span></span>

* <span data-ttu-id="8ed8a-216">Rozważ włączenie inicjowanie błyskawicznych plików w celu skrócenia czasu wymaganego do przydzielenia pierwszy plik.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-216">Consider enabling instant file initialization to reduce the time that is required for initial file allocation.</span></span> <span data-ttu-id="8ed8a-217">Przeprowadzać inicjowanie błyskawicznych plików, przyznawanie kontu usługi SQL Server (MSSQLSERVER) z SE_MANAGE_VOLUME_NAME i dodaj go do **wykonywać zadania konserwacji woluminów** zasady zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-217">To take advantage of instant file initialization, you grant the SQL Server (MSSQLSERVER) service account with SE_MANAGE_VOLUME_NAME and add it to the **Perform Volume Maintenance Tasks** security policy.</span></span> <span data-ttu-id="8ed8a-218">Jeśli używasz obrazu platformy programu SQL Server na platformie Azure, domyślnego konta usługi (NT Service\MSSQLSERVER) nie jest dodawany do **wykonywać zadania konserwacji woluminów** zasady zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-218">If you are using a SQL Server platform image for Azure, the default service account (NT Service\MSSQLSERVER) isn’t added to the **Perform Volume Maintenance Tasks** security policy.</span></span> <span data-ttu-id="8ed8a-219">Innymi słowy inicjowanie błyskawicznych plików nie jest włączona w obrazie platformy Azure serwera SQL.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-219">In other words, instant file initialization is not enabled in a SQL Server Azure platform image.</span></span> <span data-ttu-id="8ed8a-220">Po dodaniu konta usługi programu SQL Server do **wykonywać zadania konserwacji woluminów** zasady zabezpieczeń, uruchom ponownie usługę SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-220">After adding the SQL Server service account to the **Perform Volume Maintenance Tasks** security policy, restart the SQL Server service.</span></span> <span data-ttu-id="8ed8a-221">Może to być zagadnienia dotyczące zabezpieczeń dla tej funkcji.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-221">There could be security considerations for using this feature.</span></span> <span data-ttu-id="8ed8a-222">Aby uzyskać więcej informacji, zobacz [Inicjowanie plików bazy danych](https://msdn.microsoft.com/library/ms175935.aspx).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-222">For more information, see [Database File Initialization](https://msdn.microsoft.com/library/ms175935.aspx).</span></span>

* <span data-ttu-id="8ed8a-223">**Automatyczne zwiększanie** uważa się jedynie awaryjnych nieoczekiwany wzrost.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-223">**autogrow** is considered to be merely a contingency for unexpected growth.</span></span> <span data-ttu-id="8ed8a-224">Nie zarządzania rozwojem danych i dziennika na podstawie bieżącego z automatycznego przyrostu.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-224">Do not manage your data and log growth on a day-to-day basis with autogrow.</span></span> <span data-ttu-id="8ed8a-225">Jeśli używane jest automatyczne zwiększanie, wstępnie rosnąć za pomocą przełącznika rozmiaru pliku.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-225">If autogrow is used, pre-grow the file using the Size switch.</span></span>

* <span data-ttu-id="8ed8a-226">Upewnij się, że **autoshrink** jest wyłączona, aby uniknąć niepotrzebnych zadań, które mogą negatywnie wpłynąć na wydajność.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-226">Make sure **autoshrink** is disabled to avoid unnecessary overhead that can negatively affect performance.</span></span>

* <span data-ttu-id="8ed8a-227">Przenieś wszystkie bazy danych do dysków z danymi, w tym systemowych baz danych.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-227">Move all databases to data disks, including system databases.</span></span> <span data-ttu-id="8ed8a-228">Aby uzyskać więcej informacji, zobacz [przenoszenia baz danych systemu](https://msdn.microsoft.com/library/ms345408.aspx).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-228">For more information, see [Move System Databases](https://msdn.microsoft.com/library/ms345408.aspx).</span></span>

* <span data-ttu-id="8ed8a-229">Przenieś programu SQL Server błąd dziennika śledzenia pliku katalogów i dysków z danymi.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-229">Move SQL Server error log and trace file directories to data disks.</span></span> <span data-ttu-id="8ed8a-230">Można to zrobić w programie SQL Server Configuration Manager przez kliknięcie prawym przyciskiem myszy wystąpienie programu SQL Server i wybierz opcję Właściwości.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-230">This can be done in SQL Server Configuration Manager by right-clicking your SQL Server instance and selecting properties.</span></span> <span data-ttu-id="8ed8a-231">Ustawienia pliku dziennika i śledzenia błędów można zmienić w **Parametry uruchamiania** kartę. Katalog zrzutu jest określona w **zaawansowane** kartę. Poniższy zrzut ekranu przedstawia miejsce wyszukiwania parametr uruchamiania dziennika błędów.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-231">The error log and trace file settings can be changed in the **Startup Parameters** tab. The Dump Directory is specified in the **Advanced** tab. The following screenshot shows where to look for the error log startup parameter.</span></span>

    ![Zrzut ekranu dziennik błędów programu SQL](./media/virtual-machines-windows-sql-performance/sql_server_error_log_location.png)

* <span data-ttu-id="8ed8a-233">Ustawienia domyślne lokalizacje plików kopii zapasowej i bazy danych.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-233">Setup default backup and database file locations.</span></span> <span data-ttu-id="8ed8a-234">Użyj zaleceń w tym temacie, a następnie wprowadź zmiany w oknie właściwości serwera.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-234">Use the recommendations in this topic, and make the changes in the Server properties window.</span></span> <span data-ttu-id="8ed8a-235">Aby uzyskać instrukcje, zobacz [wyświetlić lub zmienić domyślne lokalizacje dla danych i plików dziennika (SQL Server Management Studio)](https://msdn.microsoft.com/library/dd206993.aspx).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-235">For instructions, see [View or Change the Default Locations for Data and Log Files (SQL Server Management Studio)](https://msdn.microsoft.com/library/dd206993.aspx).</span></span> <span data-ttu-id="8ed8a-236">Poniższy zrzut ekranu pokazuje, gdzie do wprowadzenia tych zmian.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-236">The following screenshot demonstrates where to make these changes.</span></span>

    ![Pliki dziennika danych SQL i tworzenie kopii zapasowych](./media/virtual-machines-windows-sql-performance/sql_server_default_data_log_backup_locations.png)
* <span data-ttu-id="8ed8a-238">Włącz zablokowanych stron we/wy i żadnych działań stronicowania.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-238">Enable locked pages to reduce IO and any paging activities.</span></span> <span data-ttu-id="8ed8a-239">Aby uzyskać więcej informacji, zobacz [włączyć blokowania stron w pamięci (system Windows) — opcja](https://msdn.microsoft.com/library/ms190730.aspx).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-239">For more information, see [Enable the Lock Pages in Memory Option (Windows)](https://msdn.microsoft.com/library/ms190730.aspx).</span></span>

* <span data-ttu-id="8ed8a-240">Jeśli używasz programu SQL Server 2012, należy zainstalować Service Pack 1 aktualizacją zbiorczą 10.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-240">If you are running SQL Server 2012, install Service Pack 1 Cumulative Update 10.</span></span> <span data-ttu-id="8ed8a-241">Ta aktualizacja zawiera poprawkę pogorszenie wydajności na We/Wy podczas wykonywania wybierz w instrukcji tabeli tymczasowej w programie SQL Server 2012.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-241">This update contains the fix for poor performance on I/O when you execute select into temporary table statement in SQL Server 2012.</span></span> <span data-ttu-id="8ed8a-242">Aby uzyskać informacje, zobacz [artykułu bazy wiedzy](http://support.microsoft.com/kb/2958012).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-242">For information, see this [knowledge base article](http://support.microsoft.com/kb/2958012).</span></span>

* <span data-ttu-id="8ed8a-243">Należy rozważyć kompresowania wszystkie pliki danych podczas przesyłania We/Wy systemu Azure.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-243">Consider compressing any data files when transferring in/out of Azure.</span></span>

## <a name="feature-specific-guidance"></a><span data-ttu-id="8ed8a-244">Funkcja dokładne wskazówki</span><span class="sxs-lookup"><span data-stu-id="8ed8a-244">Feature specific guidance</span></span>

<span data-ttu-id="8ed8a-245">Niektóre wdrożenia może osiągnięcia korzyści dodatkowe wydajności za pomocą bardziej zaawansowanych technik konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-245">Some deployments may achieve additional performance benefits using more advanced configuration techniques.</span></span> <span data-ttu-id="8ed8a-246">Poniższa lista zawiera opis niektóre funkcje programu SQL Server, które mogą pomóc osiągnąć większą wydajność:</span><span class="sxs-lookup"><span data-stu-id="8ed8a-246">The following list highlights some SQL Server features that can help you to achieve better performance:</span></span>

* <span data-ttu-id="8ed8a-247">**Wykonywanie kopii zapasowej na magazyn Azure**: podczas wykonywania kopii zapasowych programu SQL Server uruchomionego na maszynach wirtualnych Azure, można użyć [kopii zapasowej serwera SQL do adresu URL](https://msdn.microsoft.com/library/dn435916.aspx).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-247">**Backup to Azure storage**: When performing backups for SQL Server running in Azure virtual machines, you can use [SQL Server Backup to URL](https://msdn.microsoft.com/library/dn435916.aspx).</span></span> <span data-ttu-id="8ed8a-248">Ta funkcja jest dostępnych w programie SQL Server 2012 z dodatkiem SP1 CU2 i zalecane w przypadku tworzenie kopii zapasowych na dyskach danych dołączonych.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-248">This feature is available starting with SQL Server 2012 SP1 CU2 and recommended for backing up to the attached data disks.</span></span> <span data-ttu-id="8ed8a-249">Gdy możesz wykonywania kopii zapasowej/przywracania do/z magazynu Azure, wykonaj zalecenia zawarte w [serwera kopii zapasowej SQL do adresu URL najlepsze rozwiązania i rozwiązywanie problemów i przywracanie z kopii zapasowych przechowywanych w magazynie Azure](https://msdn.microsoft.com/library/jj919149.aspx).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-249">When you backup/restore to/from Azure storage, follow the recommendations provided at [SQL Server Backup to URL Best Practices and Troubleshooting and Restoring from Backups Stored in Azure Storage](https://msdn.microsoft.com/library/jj919149.aspx).</span></span> <span data-ttu-id="8ed8a-250">Można również zautomatyzować te kopie zapasowe przy użyciu [automatyczna usługa Backup dla programu SQL Server w usłudze Azure Virtual Machines](virtual-machines-windows-sql-automated-backup.md).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-250">You can also automate these backups using [Automated Backup for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-automated-backup.md).</span></span>

    <span data-ttu-id="8ed8a-251">Starszych niż SQL Server 2012, można użyć [kopii zapasowej serwera SQL do narzędzia Azure](https://www.microsoft.com/download/details.aspx?id=40740).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-251">Prior to SQL Server 2012, you can use [SQL Server Backup to Azure Tool](https://www.microsoft.com/download/details.aspx?id=40740).</span></span> <span data-ttu-id="8ed8a-252">To narzędzie może pomóc zwiększyć przepływność kopii zapasowej za pomocą wielu cele stripe kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-252">This tool can help to increase backup throughput using multiple backup stripe targets.</span></span>

* <span data-ttu-id="8ed8a-253">**Pliki danych programu SQL Server na platformie Azure**: Ta nowa funkcja [plików danych programu SQL Server na platformie Azure](https://msdn.microsoft.com/library/dn385720.aspx), jest dostępnych w programie SQL Server 2014.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-253">**SQL Server Data Files in Azure**: This new feature, [SQL Server Data Files in Azure](https://msdn.microsoft.com/library/dn385720.aspx), is available starting with SQL Server 2014.</span></span> <span data-ttu-id="8ed8a-254">Programem SQL Server z plików danych na platformie Azure przedstawiono charakterystyki wydajności można porównywać pod względem jako za pomocą dysków danych Azure.</span><span class="sxs-lookup"><span data-stu-id="8ed8a-254">Running SQL Server with data files in Azure demonstrates comparable performance characteristics as using Azure data disks.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8ed8a-255">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="8ed8a-255">Next Steps</span></span>

<span data-ttu-id="8ed8a-256">Aby uzyskać najlepsze rozwiązania w zakresie zabezpieczeń, zobacz [zagadnienia dotyczące zabezpieczeń dla programu SQL Server w usłudze Azure Virtual Machines](virtual-machines-windows-sql-security.md).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-256">For security best practices, see [Security Considerations for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-security.md).</span></span>

<span data-ttu-id="8ed8a-257">Przejrzyj inne tematy maszyny wirtualnej programu SQL Server na [programu SQL Server na omówienia maszyn wirtualnych Azure](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8ed8a-257">Review other SQL Server Virtual Machine topics at [SQL Server on Azure Virtual Machines Overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>
