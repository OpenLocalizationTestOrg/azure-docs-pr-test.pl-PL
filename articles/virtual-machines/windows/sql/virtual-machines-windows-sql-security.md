---
title: "Zagadnienia dotyczące zabezpieczeń dla programu SQL Server na platformie Azure | Dokumentacja firmy Microsoft"
description: "Ten temat zawiera ogólne wskazówki dotyczące zabezpieczania programu SQL Server uruchomionego w maszynie wirtualnej platformy Azure."
services: virtual-machines-windows
documentationcenter: na
author: rothja
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: d710c296-e490-43e7-8ca9-8932586b71da
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/02/2017
ms.author: jroth
ms.openlocfilehash: 4ad9156e481eac0bae32bca35a2b126363e5d8b6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="security-considerations-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="6cff6-103">Zagadnienia dotyczące zabezpieczeń programu SQL Server na maszynach wirtualnych platformy Azure</span><span class="sxs-lookup"><span data-stu-id="6cff6-103">Security Considerations for SQL Server in Azure Virtual Machines</span></span>

<span data-ttu-id="6cff6-104">Ten temat zawiera ogólne wskazówki dotyczące zabezpieczeń, które pomaga ustalić bezpieczny dostęp do wystąpień programu SQL Server w maszynie wirtualnej platformy Azure (VM).</span><span class="sxs-lookup"><span data-stu-id="6cff6-104">This topic includes overall security guidelines that help establish secure access to SQL Server instances in an Azure virtual machine (VM).</span></span>

<span data-ttu-id="6cff6-105">Azure jest zgodna z kilku przepisów branżowych i standardy, które umożliwiają utworzenie rozwiązania do zgodnych z programem SQL Server działa na maszynie wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="6cff6-105">Azure complies with several industry regulations and standards that can enable you to build a compliant solution with SQL Server running in a virtual machine.</span></span> <span data-ttu-id="6cff6-106">Aby uzyskać informacje o zgodności z przepisami z platformy Azure, zobacz [Centrum zaufania Azure](https://azure.microsoft.com/support/trust-center/).</span><span class="sxs-lookup"><span data-stu-id="6cff6-106">For information about regulatory compliance with Azure, see [Azure Trust Center](https://azure.microsoft.com/support/trust-center/).</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="control-access-to-the-sql-vm"></a><span data-ttu-id="6cff6-107">Kontrola dostępu do maszyny Wirtualnej SQL</span><span class="sxs-lookup"><span data-stu-id="6cff6-107">Control access to the SQL VM</span></span>

<span data-ttu-id="6cff6-108">Podczas tworzenia maszyny wirtualnej programu SQL Server, należy wziąć pod uwagę sposób dokładnie kontrolować, kto ma dostęp do komputera i SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6cff6-108">When you create your SQL Server virtual machine, consider how to carefully control who has access to the machine and to SQL Server.</span></span> <span data-ttu-id="6cff6-109">Ogólnie rzecz biorąc należy wykonać następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="6cff6-109">In general, you should do the following:</span></span>

- <span data-ttu-id="6cff6-110">Ograniczanie dostępu do programu SQL Server tylko do aplikacji i klientów, którzy go potrzebują.</span><span class="sxs-lookup"><span data-stu-id="6cff6-110">Restrict access to SQL Server to only the applications and clients that need it.</span></span>
- <span data-ttu-id="6cff6-111">Należy stosować najlepsze rozwiązania dotyczące zarządzania konta użytkownika i hasła.</span><span class="sxs-lookup"><span data-stu-id="6cff6-111">Follow best practices for managing user accounts and passwords.</span></span>

<span data-ttu-id="6cff6-112">Poniższe sekcje zawierają sugestie dotyczące planowania przy użyciu tych punktów.</span><span class="sxs-lookup"><span data-stu-id="6cff6-112">The following sections provide suggestions on thinking through these points.</span></span>

## <a name="secure-connections"></a><span data-ttu-id="6cff6-113">Bezpieczne połączenia</span><span class="sxs-lookup"><span data-stu-id="6cff6-113">Secure connections</span></span>

<span data-ttu-id="6cff6-114">Podczas tworzenia maszyny wirtualnej programu SQL Server z obrazem galerii **łączności z serwerem SQL** opcja umożliwia wybór **lokalnego (wewnątrz maszyny Wirtualnej)**, **prywatne (wewnątrz sieci wirtualnej)**, lub **publiczne (Internet)**.</span><span class="sxs-lookup"><span data-stu-id="6cff6-114">When you create a SQL Server virtual machine with a gallery image, the **SQL Server Connectivity** option gives you the choice of **Local (inside VM)**, **Private (within Virtual Network)**, or **Public (Internet)**.</span></span>

![Łączność serwera SQL](./media/virtual-machines-windows-sql-security/sql-vm-connectivity-option.png)

<span data-ttu-id="6cff6-116">Najlepiej wybierz opcję najbardziej restrykcyjne dla danego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="6cff6-116">For the best security, choose the most restrictive option for your scenario.</span></span> <span data-ttu-id="6cff6-117">Na przykład jeśli używasz aplikacji, który uzyskuje dostęp do programu SQL Server na tej samej maszyny Wirtualnej, następnie **lokalnego** jest najbezpieczniejszy wybór.</span><span class="sxs-lookup"><span data-stu-id="6cff6-117">For example, if you are running an application that accesses SQL Server on the same VM, then **Local** is the most secure choice.</span></span> <span data-ttu-id="6cff6-118">Jeśli używasz aplikacji Azure, która wymaga dostępu do programu SQL Server, następnie **prywatnej** zabezpiecza komunikację z programem SQL Server tylko w obrębie określonego [sieci wirtualnej Azure](../../../virtual-network/virtual-networks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6cff6-118">If you are running an Azure application that requires access to the SQL Server, then **Private** secures communication to SQL Server only within the specified [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md).</span></span> <span data-ttu-id="6cff6-119">Jeśli potrzebujesz **publicznego** następnie (internest) dostęp do programu SQL Server w maszynie Wirtualnej, upewnij się, że należy stosować inne najlepsze rozwiązania w tym temacie w celu ograniczenia obszaru powierzchni ataku.</span><span class="sxs-lookup"><span data-stu-id="6cff6-119">If you require **Public** (internest) access to the SQL Server VM, then make sure to follow other best practices in this topic to reduce your attack surface area.</span></span>

<span data-ttu-id="6cff6-120">Wybrane opcje w portalu Użyj reguł zabezpieczeń dla ruchu przychodzącego na maszynach wirtualnych [sieciowej grupy zabezpieczeń](../../../virtual-network/virtual-networks-nsg.md) (NSG), aby zezwolić lub odmówić ruch sieciowy do maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="6cff6-120">The selected options in the portal use inbound security rules on the VMs [Network Security Group](../../../virtual-network/virtual-networks-nsg.md) (NSG) to allow or deny network traffic to your virtual machine.</span></span> <span data-ttu-id="6cff6-121">Można zmodyfikować lub utworzyć nowe reguły NSG dla ruchu przychodzącego zezwalająca na ruch do portu programu SQL Server (domyślnie 1433).</span><span class="sxs-lookup"><span data-stu-id="6cff6-121">You can modify or create new inbound NSG rules to allow traffic to the SQL Server port (default 1433).</span></span> <span data-ttu-id="6cff6-122">Można również określić określonych adresów IP, które mogą komunikować się za pośrednictwem tego portu.</span><span class="sxs-lookup"><span data-stu-id="6cff6-122">You can also specify specific IP addresses that are allowed to communicate over this port.</span></span>

![Reguły grupy zabezpieczeń sieci](./media/virtual-machines-windows-sql-security/sql-vm-network-security-group-rules.png)

<span data-ttu-id="6cff6-124">Oprócz reguły NSG, aby ograniczyć ruch sieciowy umożliwia także zapory systemu Windows na maszynie wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="6cff6-124">In addition to NSG rules to restrict network traffic, you can also use the Windows Firewall on the virtual machine.</span></span>

<span data-ttu-id="6cff6-125">Jeśli korzystasz z punktów końcowych z klasycznym modelu wdrażania, Usuń wszystkie punkty końcowe na maszynie wirtualnej, jeśli nie należy używać.</span><span class="sxs-lookup"><span data-stu-id="6cff6-125">If you are using endpoints with the classic deployment model, remove any endpoints on the virtual machine if you do not use them.</span></span> <span data-ttu-id="6cff6-126">Aby uzyskać instrukcje dotyczące przy użyciu list kontroli dostępu z punktami końcowymi, zobacz [Zarządzanie listy ACL punktu końcowego](../classic/setup-endpoints.md#manage-the-acl-on-an-endpoint).</span><span class="sxs-lookup"><span data-stu-id="6cff6-126">For instructions on using ACLs with endpoints, see [Manage the ACL on an endpoint](../classic/setup-endpoints.md#manage-the-acl-on-an-endpoint).</span></span> <span data-ttu-id="6cff6-127">To nie jest niezbędna dla maszyn wirtualnych, które używają Menedżera zasobów.</span><span class="sxs-lookup"><span data-stu-id="6cff6-127">This is not necessary for VMs that use the Resource Manager.</span></span>

<span data-ttu-id="6cff6-128">Zaleca się włączenie połączeń szyfrowanych wystąpienia aparatu bazy danych programu SQL Server w sieci maszyny wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="6cff6-128">Finally, consider enabling encrypted connections for the instance of the SQL Server Database Engine in your Azure virtual machine.</span></span> <span data-ttu-id="6cff6-129">Skonfiguruj wystąpienie programu SQL server przy użyciu podpisanego certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="6cff6-129">Configure SQL server instance with a signed certificate.</span></span> <span data-ttu-id="6cff6-130">Aby uzyskać więcej informacji, zobacz [włączyć szyfrowane połączeń z aparatem bazy danych](https://docs.microsoft.com/sql/database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine) i [składnia ciągu połączenia](https://msdn.microsoft.com/library/ms254500.aspx).</span><span class="sxs-lookup"><span data-stu-id="6cff6-130">For more information, see [Enable Encrypted Connections to the Database Engine](https://docs.microsoft.com/sql/database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine) and [Connection String Syntax](https://msdn.microsoft.com/library/ms254500.aspx).</span></span>

## <a name="use-a-non-default-port"></a><span data-ttu-id="6cff6-131">Korzystanie z portu inny niż domyślny</span><span class="sxs-lookup"><span data-stu-id="6cff6-131">Use a non-default port</span></span>

<span data-ttu-id="6cff6-132">Domyślnie program SQL Server nasłuchuje na dobrze znanego portu 1433.</span><span class="sxs-lookup"><span data-stu-id="6cff6-132">By default, SQL Server listens on a well-known port, 1433.</span></span> <span data-ttu-id="6cff6-133">Aby zwiększyć bezpieczeństwo należy skonfigurować serwer SQL do nasłuchiwania na porcie innych niż domyślne, takie jak 1401.</span><span class="sxs-lookup"><span data-stu-id="6cff6-133">For increased security, configure SQL Server to listen on a non-default port, such as 1401.</span></span> <span data-ttu-id="6cff6-134">Jeśli dostarczasz obraz galerii programu SQL Server w portalu Azure, można określić tego portu w **ustawienia programu SQL Server** bloku.</span><span class="sxs-lookup"><span data-stu-id="6cff6-134">If you provision a SQL Server gallery image in the Azure portal, you can specify this port in the **SQL Server settings** blade.</span></span>

<span data-ttu-id="6cff6-135">Aby skonfigurować to po zainicjowaniu obsługi administracyjnej, masz dwie opcje:</span><span class="sxs-lookup"><span data-stu-id="6cff6-135">To configure this after provisioning, you have two options:</span></span>

- <span data-ttu-id="6cff6-136">Dla maszyn wirtualnych Menedżera zasobów, można wybrać **konfigurację programu SQL Server** z bloku omówienie maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="6cff6-136">For Resource Manager VMs, you can select **SQL Server configuration** from the VM overview blade.</span></span> <span data-ttu-id="6cff6-137">Zapewnia to opcję, aby zmienić port.</span><span class="sxs-lookup"><span data-stu-id="6cff6-137">This provides an option to change the port.</span></span>

  ![Zmień TCP port w portalu](./media/virtual-machines-windows-sql-security/sql-vm-change-tcp-port.png)

- <span data-ttu-id="6cff6-139">Klasycznych maszyn wirtualnych lub maszyn wirtualnych serwera SQL, które nie zostały udostępnione przy użyciu portalu można ręcznie skonfigurować port, nawiązując połączenie zdalne z maszyną wirtualną.</span><span class="sxs-lookup"><span data-stu-id="6cff6-139">For Classic VMs or for SQL Server VMs that were not provisioned with the portal, you can manually configure the port by connecting remotely to the VM.</span></span> <span data-ttu-id="6cff6-140">Kroki konfiguracji, zobacz [Konfigurowanie serwera do nasłuchiwania na konkretnym porcie TCP](https://docs.microsoft.com/sql/database-engine/configure-windows/configure-a-server-to-listen-on-a-specific-tcp-port).</span><span class="sxs-lookup"><span data-stu-id="6cff6-140">For the configuration steps, see [Configure a Server to Listen on a Specific TCP Port](https://docs.microsoft.com/sql/database-engine/configure-windows/configure-a-server-to-listen-on-a-specific-tcp-port).</span></span> <span data-ttu-id="6cff6-141">Jeśli używasz tej techniki ręczne, należy dodać reguły zapory systemu Windows w celu zezwalania na ruch przychodzący na tym porcie TCP.</span><span class="sxs-lookup"><span data-stu-id="6cff6-141">If you use this manual technique, you also need to add a Windows Firewall rule to allow incoming traffic on that TCP port.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6cff6-142">Określenie z systemem innym niż domyślny port jest dobrym rozwiązaniem, jeśli port programu SQL Server jest otwarty do publicznego połączenia z Internetem.</span><span class="sxs-lookup"><span data-stu-id="6cff6-142">Specifying a non-default port is a good idea if your SQL Server port is open to public internet connections.</span></span>

<span data-ttu-id="6cff6-143">Gdy serwer SQL nasłuchuje na porcie innych niż domyślne, należy określić numer portu podczas nawiązywania połączenia.</span><span class="sxs-lookup"><span data-stu-id="6cff6-143">When SQL Server is listening on a non-default port, you must specify the port when you connect.</span></span> <span data-ttu-id="6cff6-144">Na przykład Rozważmy scenariusz, w którym 13.55.255.255 jest adres IP serwera i programu SQL Server nasłuchuje na porcie 1401.</span><span class="sxs-lookup"><span data-stu-id="6cff6-144">For example, consider a scenario where the server IP address is 13.55.255.255 and SQL Server is listening on port 1401.</span></span> <span data-ttu-id="6cff6-145">Aby połączyć się z programem SQL Server, należy określić `13.55.255.255,1401` w parametrach połączenia.</span><span class="sxs-lookup"><span data-stu-id="6cff6-145">To connect to SQL Server, you would specify `13.55.255.255,1401` in the connection string.</span></span>

## <a name="manage-accounts"></a><span data-ttu-id="6cff6-146">Zarządzanie kontami</span><span class="sxs-lookup"><span data-stu-id="6cff6-146">Manage accounts</span></span>

<span data-ttu-id="6cff6-147">Osoby atakujące łatwo odgadnąć nazwy kont lub haseł, które nie mają.</span><span class="sxs-lookup"><span data-stu-id="6cff6-147">You don't want attackers to easily guess account names or passwords.</span></span> <span data-ttu-id="6cff6-148">Poniższe wskazówki umożliwiają pomocy:</span><span class="sxs-lookup"><span data-stu-id="6cff6-148">Use the following tips to help:</span></span>

- <span data-ttu-id="6cff6-149">Utwórz konto administratora lokalnego unikatowy, który nie ma nazwy **administratora**.</span><span class="sxs-lookup"><span data-stu-id="6cff6-149">Create a unique local administrator account that is not named **Administrator**.</span></span>

- <span data-ttu-id="6cff6-150">Użyj złożonych silnych haseł dla wszystkich kont.</span><span class="sxs-lookup"><span data-stu-id="6cff6-150">Use complex strong passwords for all your accounts.</span></span> <span data-ttu-id="6cff6-151">Aby uzyskać więcej informacji na temat tworzenia silnych haseł, zobacz [Utwórz silne hasło](https://support.microsoft.com/instantanswers/9bd5223b-efbe-aa95-b15a-2fb37bef637d/create-a-strong-password) artykułu.</span><span class="sxs-lookup"><span data-stu-id="6cff6-151">For more information about how to create a strong password, see [Create a strong password](https://support.microsoft.com/instantanswers/9bd5223b-efbe-aa95-b15a-2fb37bef637d/create-a-strong-password) article.</span></span>

- <span data-ttu-id="6cff6-152">Domyślnie program Azure wybiera uwierzytelniania systemu Windows podczas instalacji maszyny wirtualnej programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6cff6-152">By default, Azure selects Windows Authentication during SQL Server Virtual Machine setup.</span></span> <span data-ttu-id="6cff6-153">W związku z tym **SA** logowania jest wyłączona, a hasło jest przypisywany przez Instalatora.</span><span class="sxs-lookup"><span data-stu-id="6cff6-153">Therefore, the **SA** login is disabled and a password is assigned by setup.</span></span> <span data-ttu-id="6cff6-154">Zalecamy, aby **SA** logowania nie należy używać ani włączony.</span><span class="sxs-lookup"><span data-stu-id="6cff6-154">We recommend that the **SA** login should not be used or enabled.</span></span> <span data-ttu-id="6cff6-155">Jeśli identyfikator logowania SQL, użyj jednej z następujących strategii:</span><span class="sxs-lookup"><span data-stu-id="6cff6-155">If you must have a SQL login, use one of the following strategies:</span></span>

  - <span data-ttu-id="6cff6-156">Utwórz konto SQL o unikatowej nazwie, która ma **sysadmin** członkostwa.</span><span class="sxs-lookup"><span data-stu-id="6cff6-156">Create a SQL account with a unique name that has **sysadmin** membership.</span></span> <span data-ttu-id="6cff6-157">Można to zrobić w portalu, należy włączyć **uwierzytelniania SQL** podczas inicjowania obsługi.</span><span class="sxs-lookup"><span data-stu-id="6cff6-157">You can do this from the portal by enabling **SQL Authentication** during provisioning.</span></span>

    > [!TIP] 
    > <span data-ttu-id="6cff6-158">Jeśli nie zostanie włączone uwierzytelnianie SQL podczas inicjowania obsługi, należy ręcznie zmienić tryb uwierzytelniania **programu SQL Server i tryb uwierzytelniania systemu Windows**.</span><span class="sxs-lookup"><span data-stu-id="6cff6-158">If you do not enable SQL Authentication during provisioning, you must manually change the authentication mode to **SQL Server and Windows Authentication Mode**.</span></span> <span data-ttu-id="6cff6-159">Aby uzyskać więcej informacji, zobacz [Zmień tryb uwierzytelniania serwera](https://docs.microsoft.com/sql/database-engine/configure-windows/change-server-authentication-mode).</span><span class="sxs-lookup"><span data-stu-id="6cff6-159">For more information, see [Change Server Authentication Mode](https://docs.microsoft.com/sql/database-engine/configure-windows/change-server-authentication-mode).</span></span>

  - <span data-ttu-id="6cff6-160">Jeśli musisz użyć **SA** logowania, Włącz logowanie po zainicjowaniu obsługi administracyjnej i przypisz nowe silne hasło.</span><span class="sxs-lookup"><span data-stu-id="6cff6-160">If you must use the **SA** login, enable the login after provisioning and assign a new strong password.</span></span>

## <a name="follow-on-premises-best-practices"></a><span data-ttu-id="6cff6-161">Należy stosować najlepsze rozwiązania lokalnego</span><span class="sxs-lookup"><span data-stu-id="6cff6-161">Follow on-premises best practices</span></span>

<span data-ttu-id="6cff6-162">Oprócz rozwiązania opisane w tym temacie zaleca się, możesz sprawdzić i wdrożenia rozwiązania w zakresie zabezpieczeń tradycyjnych, lokalnie, jeśli to możliwe.</span><span class="sxs-lookup"><span data-stu-id="6cff6-162">In addition to the practices described in this topic, we recommend that you review and implement the traditional on-premises security practices where applicable.</span></span> <span data-ttu-id="6cff6-163">Aby uzyskać więcej informacji, zobacz [zagadnienia dotyczące zabezpieczeń dla instalacji serwera SQL](https://docs.microsoft.com/sql/sql-server/install/security-considerations-for-a-sql-server-installation)</span><span class="sxs-lookup"><span data-stu-id="6cff6-163">For more information, see [Security Considerations for a SQL Server Installation](https://docs.microsoft.com/sql/sql-server/install/security-considerations-for-a-sql-server-installation)</span></span>

## <a name="next-steps"></a><span data-ttu-id="6cff6-164">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="6cff6-164">Next Steps</span></span>

<span data-ttu-id="6cff6-165">Jeśli interesuje Cię również najlepsze rozwiązania dotyczące wydajności, zobacz [wydajności najlepsze rozwiązania dotyczące programu SQL Server w usłudze Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span><span class="sxs-lookup"><span data-stu-id="6cff6-165">If you are also interested in best practices around performance, see [Performance Best Practices for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span></span>

<span data-ttu-id="6cff6-166">Do innych tematów związanych z programem SQL Server na maszynach wirtualnych Azure, zobacz [programu SQL Server na maszynach wirtualnych platformy Azure — omówienie](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6cff6-166">For other topics related to running SQL Server in Azure VMs, see [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

