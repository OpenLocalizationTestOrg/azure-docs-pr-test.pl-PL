---
title: "Konfigurowanie zawsze włączonej grupy dostępności w maszynach wirtualnych platformy Azure (klasyczne) | Dokumentacja firmy Microsoft"
description: "Utwórz zawsze włączonej grupy dostępności o maszynach wirtualnych platformy Azure. W tym samouczku używana głównie interfejsu użytkownika i narzędzia zamiast skryptów."
services: virtual-machines-windows
documentationcenter: na
author: MikeRayMSFT
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 8d48a3d2-79f8-4ab0-9327-2f30ee0b2ff1
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 03/17/2017
ms.author: mikeray
ms.openlocfilehash: b360fe9f28eeb9b10c82fce729165b1b572ac3c6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="configure-always-on-availability-group-in-azure-virtual-machines-classic"></a><span data-ttu-id="ae654-104">Konfigurowanie zawsze włączonej grupy dostępności w maszynach wirtualnych platformy Azure (klasyczne)</span><span class="sxs-lookup"><span data-stu-id="ae654-104">Configure Always On availability group in Azure Virtual Machines (classic)</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="ae654-105">Klasycznym: interfejsu użytkownika</span><span class="sxs-lookup"><span data-stu-id="ae654-105">Classic: UI</span></span>](../classic/portal-sql-alwayson-availability-groups.md)
> * <span data-ttu-id="ae654-106">[Klasycznym: środowiska PowerShell](../classic/ps-sql-alwayson-availability-groups.md)
</span><span class="sxs-lookup"><span data-stu-id="ae654-106">[Classic: PowerShell](../classic/ps-sql-alwayson-availability-groups.md)
</span></span><br/>

<span data-ttu-id="ae654-107">Przed rozpoczęciem należy wziąć pod uwagę może teraz ukończyć tego zadania w modelu usługi Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="ae654-107">Before you begin, consider that you can now complete this task in Azure Resource Manager model.</span></span> <span data-ttu-id="ae654-108">Firma Microsoft zaleca modelu usługi Azure Resource Manager dla nowych wdrożeń.</span><span class="sxs-lookup"><span data-stu-id="ae654-108">We recommend Azure Resource Manager model for new deployments.</span></span> <span data-ttu-id="ae654-109">Zobacz [programu SQL Server zawsze włączonych grup dostępności na maszynach wirtualnych Azure](../sql/virtual-machines-windows-portal-sql-availability-group-overview.md).</span><span class="sxs-lookup"><span data-stu-id="ae654-109">See [SQL Server Always On availability groups on Azure virtual machines](../sql/virtual-machines-windows-portal-sql-availability-group-overview.md).</span></span>

> [!IMPORTANT] 
> <span data-ttu-id="ae654-110">Firma Microsoft zaleca, aby w przypadku większości nowych wdrożeń korzystać z modelu opartego na programie Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="ae654-110">Microsoft recommends that most new deployments use the Resource Manager model.</span></span> <span data-ttu-id="ae654-111">Platforma Azure ma dwa różne modele wdrażania do tworzenia i pracy z zasobami: [Resource Manager i Model Klasyczny](../../../azure-resource-manager/resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="ae654-111">Azure has two different deployment models to create and work with resources: [Resource Manager and classic](../../../azure-resource-manager/resource-manager-deployment-model.md).</span></span> <span data-ttu-id="ae654-112">W tym artykule opisano sposób użycia klasycznym modelu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="ae654-112">This article explains how to use the classic deployment model.</span></span> 

<span data-ttu-id="ae654-113">Aby wykonać to zadanie z modelem usługi Azure Resource Manager, zobacz [programu SQL Server zawsze włączonych grup dostępności na maszynach wirtualnych Azure](../sql/virtual-machines-windows-portal-sql-availability-group-overview.md).</span><span class="sxs-lookup"><span data-stu-id="ae654-113">To complete this task with the Azure Resource Manager model, see [SQL Server Always On availability groups on Azure virtual machines](../sql/virtual-machines-windows-portal-sql-availability-group-overview.md).</span></span>

<span data-ttu-id="ae654-114">W tym samouczku end-to-end przedstawiono sposób wdrażania grup dostępności za pomocą programu SQL Server zawsze na uruchomione na maszynach wirtualnych platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="ae654-114">This end-to-end tutorial shows you how to implement availability groups by using SQL Server Always On running on Azure Virtual Machines.</span></span>

<span data-ttu-id="ae654-115">Na koniec samouczka rozwiązania programu SQL Server zawsze na platformie Azure będzie składać się z następujących elementów:</span><span class="sxs-lookup"><span data-stu-id="ae654-115">At the end of the tutorial, your SQL Server Always On solution in Azure will consist of the following elements:</span></span>

* <span data-ttu-id="ae654-116">Sieć wirtualna, która zawiera wiele podsieci i frontonu i podsieci wewnętrznej bazy danych</span><span class="sxs-lookup"><span data-stu-id="ae654-116">A virtual network that contains multiple subnets and includes a frontend and a backend subnet</span></span>
* <span data-ttu-id="ae654-117">Kontroler domeny z domeny usługi Active Directory (Azure AD)</span><span class="sxs-lookup"><span data-stu-id="ae654-117">A domain controller with an Active Directory (Azure AD) domain</span></span>
* <span data-ttu-id="ae654-118">Dwie maszyny wirtualne, które programem SQL Server wdrożony do podsieci wewnętrznej bazy danych i są przyłączone do domeny usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="ae654-118">Two virtual machines that run SQL Server and are deployed to the backend subnet and joined to the Azure AD domain</span></span>
* <span data-ttu-id="ae654-119">Klaster trybu failover węzła trzech modelu kworum Większość węzłów</span><span class="sxs-lookup"><span data-stu-id="ae654-119">A three-node failover cluster with the Node Majority quorum model</span></span>
* <span data-ttu-id="ae654-120">Grupy dostępności, która ma dwa zatwierdzania synchronicznego repliki bazy danych dostępności</span><span class="sxs-lookup"><span data-stu-id="ae654-120">An availability group that has two synchronous-commit replicas of an availability database</span></span>

<span data-ttu-id="ae654-121">Na rysunku poniżej przedstawiono graficzną reprezentację rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="ae654-121">The following illustration is a graphical representation of the solution.</span></span>

![Architektura laboratorium testowego dla grup dostępności w systemie Azure](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC791912.png)

<span data-ttu-id="ae654-123">Należy pamiętać, że jest jedną z możliwych konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ae654-123">Note that this is one possible configuration.</span></span> <span data-ttu-id="ae654-124">Na przykład można zminimalizować liczbę maszyn wirtualnych do grupy dostępności dwie repliki.</span><span class="sxs-lookup"><span data-stu-id="ae654-124">For example, you can minimize the number of virtual machines for a two-replica availability group.</span></span> <span data-ttu-id="ae654-125">Ta konfiguracja ogranicza godziny obliczeń na platformie Azure przy użyciu kontrolera domeny jako monitor udziału plików kworum w klastrze z dwoma węzłami.</span><span class="sxs-lookup"><span data-stu-id="ae654-125">This configuration saves on compute hours in Azure by using the domain controller as the quorum file share witness in a two-node cluster.</span></span> <span data-ttu-id="ae654-126">Ta metoda zmniejsza liczbę maszyn wirtualnych przez jeden z ilustrowane konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ae654-126">This method reduces the virtual machine count by one from the illustrated configuration.</span></span>

<span data-ttu-id="ae654-127">Ten samouczek zakłada następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="ae654-127">This tutorial assumes the following:</span></span>

* <span data-ttu-id="ae654-128">Masz już konto platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="ae654-128">You already have an Azure account.</span></span>
* <span data-ttu-id="ae654-129">Wiesz już, jak użyć graficznego interfejsu użytkownika w galerii maszyn wirtualnych w celu udostępnienia klasyczne maszyny wirtualnej z programem SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ae654-129">You already know how to use the GUI in the virtual machine gallery to provision a classic virtual machine that runs SQL Server.</span></span>
* <span data-ttu-id="ae654-130">Masz już pełny opis zawsze włączonych grup dostępności.</span><span class="sxs-lookup"><span data-stu-id="ae654-130">You already have a solid understanding of Always On availability groups.</span></span> <span data-ttu-id="ae654-131">Aby uzyskać więcej informacji, zobacz [zawsze włączonych grup dostępności (SQL Server)](https://msdn.microsoft.com/library/hh510230.aspx).</span><span class="sxs-lookup"><span data-stu-id="ae654-131">For more information, see [Always On Availability Groups (SQL Server)](https://msdn.microsoft.com/library/hh510230.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="ae654-132">Jeśli interesuje Cię przy użyciu zawsze włączonych grup dostępności z programu SharePoint, zobacz też [konfigurowania programu SQL Server 2012 grup dostępności Always On programu SharePoint 2013](https://technet.microsoft.com/library/jj715261.aspx).</span><span class="sxs-lookup"><span data-stu-id="ae654-132">If you are interested in using Always On availability groups with SharePoint, also see [Configure SQL Server 2012 Always On Availability Groups for SharePoint 2013](https://technet.microsoft.com/library/jj715261.aspx).</span></span>
> 
> 

## <a name="create-the-virtual-network-and-domain-controller-server"></a><span data-ttu-id="ae654-133">Utwórz serwer wirtualny Kontroler sieci i domeny</span><span class="sxs-lookup"><span data-stu-id="ae654-133">Create the virtual network and domain controller server</span></span>
<span data-ttu-id="ae654-134">Rozpocznij nowe konto wersji próbnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="ae654-134">You begin with a new Azure trial account.</span></span> <span data-ttu-id="ae654-135">Po skonfigurowaniu konta powinno być ekranu głównego z klasycznego portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="ae654-135">After you set up your account, you should be on the home screen of the Azure classic portal.</span></span>

1. <span data-ttu-id="ae654-136">Kliknij przycisk **nowy** przycisku w lewym rogu dolnej części strony, jak pokazano na poniższym zrzucie ekranu.</span><span class="sxs-lookup"><span data-stu-id="ae654-136">Click the **New** button at the left corner of the bottom of the page, as shown in the following screenshot.</span></span>
   
    ![Kliknij przycisk Nowa, w portalu](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665511.gif)
2. <span data-ttu-id="ae654-138">Kliknij przycisk **usług sieciowych** > **sieci wirtualnej** > **Utwórz niestandardowy**, jak pokazano na poniższym zrzucie ekranu.</span><span class="sxs-lookup"><span data-stu-id="ae654-138">Click **Network Services** > **Virtual Network** > **Custom Create**, as shown in the following screenshot.</span></span>
   
    ![Utwórz sieć wirtualną](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665512.gif)
3. <span data-ttu-id="ae654-140">W **Utwórz sieć WIRTUALNĄ** okna dialogowego Utwórz nową sieć wirtualną krokowe wykonywanie strony i z ustawieniami w poniższej tabeli.</span><span class="sxs-lookup"><span data-stu-id="ae654-140">In the **CREATE A VIRTUAL NETWORK** dialog box, create a new virtual network by stepping through the pages and using the settings in the following table.</span></span> 
   
   | <span data-ttu-id="ae654-141">Strona</span><span class="sxs-lookup"><span data-stu-id="ae654-141">Page</span></span> | <span data-ttu-id="ae654-142">Ustawienia</span><span class="sxs-lookup"><span data-stu-id="ae654-142">Settings</span></span> |
   | --- | --- |
   | <span data-ttu-id="ae654-143">Szczegóły sieci wirtualnej</span><span class="sxs-lookup"><span data-stu-id="ae654-143">Virtual Network Details</span></span> |<span data-ttu-id="ae654-144">**Nazwa = ContosoNET**</span><span class="sxs-lookup"><span data-stu-id="ae654-144">**NAME = ContosoNET**</span></span><br/><span data-ttu-id="ae654-145">**REGION = zachodnie stany USA**</span><span class="sxs-lookup"><span data-stu-id="ae654-145">**REGION = West US**</span></span> |
   | <span data-ttu-id="ae654-146">Serwery DNS i połączenie z siecią VPN</span><span class="sxs-lookup"><span data-stu-id="ae654-146">DNS Servers and VPN Connectivity</span></span> |<span data-ttu-id="ae654-147">Brak</span><span class="sxs-lookup"><span data-stu-id="ae654-147">None</span></span> |
   | <span data-ttu-id="ae654-148">Przestrzeniami adresów sieci wirtualnej</span><span class="sxs-lookup"><span data-stu-id="ae654-148">Virtual Network Address Spaces</span></span> |<span data-ttu-id="ae654-149">Ustawienia są przedstawione na poniższym zrzucie ekranu:</span><span class="sxs-lookup"><span data-stu-id="ae654-149">Settings are shown in the following screenshot:</span></span> ![Utwórz sieć wirtualną](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784620.png) |
4. <span data-ttu-id="ae654-151">Utwórz maszynę wirtualną, która będzie używana jako kontroler domeny (DC).</span><span class="sxs-lookup"><span data-stu-id="ae654-151">Create the virtual machine that you will use as the domain controller (DC).</span></span> <span data-ttu-id="ae654-152">Kliknij przycisk **nowy** > **obliczeniowe** > **maszyny wirtualnej** > **z galerii**, jak pokazano na poniższym zrzucie ekranu.</span><span class="sxs-lookup"><span data-stu-id="ae654-152">Click **New** > **Compute** > **Virtual Machine** > **From Gallery**, as shown in the following screenshot.</span></span>
   
    ![Tworzenie maszyny wirtualnej](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784621.png)
5. <span data-ttu-id="ae654-154">W **Utwórz MASZYNĘ WIRTUALNĄ A** okna dialogowego Skonfiguruj nową maszynę wirtualną krokowe wykonywanie strony i z ustawieniami w poniższej tabeli.</span><span class="sxs-lookup"><span data-stu-id="ae654-154">In the **CREATE A VIRTUAL MACHINE** dialog box, configure a new virtual machine by stepping through the pages and using the settings in the following table.</span></span> 
   
   | <span data-ttu-id="ae654-155">Strona</span><span class="sxs-lookup"><span data-stu-id="ae654-155">Page</span></span> | <span data-ttu-id="ae654-156">Ustawienia</span><span class="sxs-lookup"><span data-stu-id="ae654-156">Settings</span></span> |
   | --- | --- |
   | <span data-ttu-id="ae654-157">Wybierz system operacyjny maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="ae654-157">Select the virtual machine operating system</span></span> |<span data-ttu-id="ae654-158">Windows Server 2012 R2 Datacenter</span><span class="sxs-lookup"><span data-stu-id="ae654-158">Windows Server 2012 R2 Datacenter</span></span> |
   | <span data-ttu-id="ae654-159">Konfiguracja maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="ae654-159">Virtual machine configuration</span></span> |<span data-ttu-id="ae654-160">**Data wydania wersji** = (Najnowsza wersja)</span><span class="sxs-lookup"><span data-stu-id="ae654-160">**VERSION RELEASE DATE** = (latest)</span></span><br/><span data-ttu-id="ae654-161">**Nazwa maszyny WIRTUALNEJ** = ContosoDC</span><span class="sxs-lookup"><span data-stu-id="ae654-161">**VIRTUAL MACHINE NAME** = ContosoDC</span></span><br/><span data-ttu-id="ae654-162">**WARSTWA** = STANDARD</span><span class="sxs-lookup"><span data-stu-id="ae654-162">**TIER** = STANDARD</span></span><br/><span data-ttu-id="ae654-163">**ROZMIAR** = A2 (2 rdzenie)</span><span class="sxs-lookup"><span data-stu-id="ae654-163">**SIZE** = A2 (2 cores)</span></span><br/><span data-ttu-id="ae654-164">**NOWĄ nazwę użytkownika** = AzureAdmin</span><span class="sxs-lookup"><span data-stu-id="ae654-164">**NEW USER NAME** = AzureAdmin</span></span><br/><span data-ttu-id="ae654-165">**NOWE hasło** = Contoso! 000</span><span class="sxs-lookup"><span data-stu-id="ae654-165">**NEW PASSWORD** = Contoso!000</span></span><br/><span data-ttu-id="ae654-166">**POTWIERDŹ** = Contoso! 000</span><span class="sxs-lookup"><span data-stu-id="ae654-166">**CONFIRM** = Contoso!000</span></span> |
   | <span data-ttu-id="ae654-167">Konfiguracja maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="ae654-167">Virtual machine configuration</span></span> |<span data-ttu-id="ae654-168">**USŁUGI w CHMURZE** = Tworzenie nowej usługi w chmurze</span><span class="sxs-lookup"><span data-stu-id="ae654-168">**CLOUD SERVICE** = Create a new cloud service</span></span><br/><span data-ttu-id="ae654-169">**Nazwa DNS usługi w CHMURZE** = nazwa usługi w chmurze unikatowy</span><span class="sxs-lookup"><span data-stu-id="ae654-169">**CLOUD SERVICE DNS NAME** = A unique cloud service name</span></span><br/><span data-ttu-id="ae654-170">**Nazwa DNS** unikatową nazwę = (przykład: ContosoDC123)</span><span class="sxs-lookup"><span data-stu-id="ae654-170">**DNS NAME** = A unique name (ex: ContosoDC123)</span></span><br/><span data-ttu-id="ae654-171">**REGION/grupy KOLIGACJI i WIRTUALNEJ sieci** = ContosoNET</span><span class="sxs-lookup"><span data-stu-id="ae654-171">**REGION/AFFINITY GROUP/VIRTUAL NETWORK** = ContosoNET</span></span><br/><span data-ttu-id="ae654-172">**PODSIECI sieci WIRTUALNEJ** = Back(10.10.2.0/24)</span><span class="sxs-lookup"><span data-stu-id="ae654-172">**VIRTUAL NETWORK SUBNETS** = Back(10.10.2.0/24)</span></span><br/><span data-ttu-id="ae654-173">**Konto MAGAZYNU** = Użyj konta usługi storage automatycznie generowanych</span><span class="sxs-lookup"><span data-stu-id="ae654-173">**STORAGE ACCOUNT** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="ae654-174">**ZESTAW dostępności** = (Brak)</span><span class="sxs-lookup"><span data-stu-id="ae654-174">**AVAILABILITY SET** = (None)</span></span> |
   | <span data-ttu-id="ae654-175">Opcje maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="ae654-175">Virtual machine options</span></span> |<span data-ttu-id="ae654-176">Użyj wartości domyślnych</span><span class="sxs-lookup"><span data-stu-id="ae654-176">Use defaults</span></span> |

<span data-ttu-id="ae654-177">Po skonfigurowaniu nowej maszyny wirtualnej, poczekaj na maszynie wirtualnej może być provsioned.</span><span class="sxs-lookup"><span data-stu-id="ae654-177">After you configure the new virtual machine, wait for the virtual machine to be provsioned.</span></span> <span data-ttu-id="ae654-178">Ten proces trwa trochę czasu.</span><span class="sxs-lookup"><span data-stu-id="ae654-178">This process takes some time to finish.</span></span> <span data-ttu-id="ae654-179">Jeśli klikniesz przycisk **maszyny wirtualnej** kartę w klasycznym portalu Azure, można zobaczyć ContosoDC stanów następuje z **uruchamianie (inicjowania obsługi administracyjnej)** do **zatrzymane**, **uruchamianie**, **uruchomiona (inicjowania obsługi administracyjnej)**i w końcu **systemem**.</span><span class="sxs-lookup"><span data-stu-id="ae654-179">If you click the **Virtual Machine** tab in the Azure classic portal, you can see ContosoDC cycling states from **Starting (Provisioning)** to **Stopped**, **Starting**, **Running (Provisioning)**, and finally **Running**.</span></span>

<span data-ttu-id="ae654-180">Teraz pomyślnie obsługiwanej przez serwer kontrolera domeny.</span><span class="sxs-lookup"><span data-stu-id="ae654-180">The DC server is now successfully provisioned.</span></span> <span data-ttu-id="ae654-181">Następnie skonfiguruj domeny usługi Active Directory na tym serwerze kontrolera domeny.</span><span class="sxs-lookup"><span data-stu-id="ae654-181">Next, you will configure the Active Directory domain on this DC server.</span></span>

## <a name="configure-the-domain-controller"></a><span data-ttu-id="ae654-182">Konfiguracja kontrolera domeny</span><span class="sxs-lookup"><span data-stu-id="ae654-182">Configure the domain controller</span></span>
<span data-ttu-id="ae654-183">W poniższych krokach maszyny ContosoDC są konfigurowane jako kontroler domeny corp.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="ae654-183">In the following steps, you configure the ContosoDC machine as a domain controller for corp.contoso.com.</span></span>

1. <span data-ttu-id="ae654-184">W portalu, wybierz **ContosoDC** maszyny.</span><span class="sxs-lookup"><span data-stu-id="ae654-184">In the portal, select the **ContosoDC** machine.</span></span> <span data-ttu-id="ae654-185">Na **pulpitu nawigacyjnego** , kliknij pozycję **Connect** do otwarcia pulpitu zdalnego (RDP) dostęp do pulpitu zdalnego.</span><span class="sxs-lookup"><span data-stu-id="ae654-185">On the **Dashboard** tab, click **Connect** to open a remote desktop (RDP) file for remote desktop access.</span></span>
   
    ![Połączyć się z komputerem Vritual](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784622.png)
2. <span data-ttu-id="ae654-187">Zaloguj się przy użyciu konta administratora skonfigurowane (**\AzureAdmin**) i hasło (**Contoso! 000**).</span><span class="sxs-lookup"><span data-stu-id="ae654-187">Sign in with your configured administrator account (**\AzureAdmin**) and password (**Contoso!000**).</span></span>
3. <span data-ttu-id="ae654-188">Domyślnie **Menedżera serwera** powinien zostać wyświetlony pulpit nawigacyjny.</span><span class="sxs-lookup"><span data-stu-id="ae654-188">By default, the **Server Manager** dashboard should be displayed.</span></span>
4. <span data-ttu-id="ae654-189">Kliknij przycisk **Dodaj role i funkcje** łącza na pulpicie nawigacyjnym.</span><span class="sxs-lookup"><span data-stu-id="ae654-189">Click the **Add roles and features** link on the dashboard.</span></span>
   
    ![W Eksploratorze serwera Dodawanie ról](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784623.png)
5. <span data-ttu-id="ae654-191">Kliknij przycisk **dalej** aż do **ról serwera** sekcji.</span><span class="sxs-lookup"><span data-stu-id="ae654-191">Click **Next** until you get to the **Server Roles** section.</span></span>
6. <span data-ttu-id="ae654-192">Wybierz **usług domenowych w usłudze Active Directory** i **serwera DNS** ról.</span><span class="sxs-lookup"><span data-stu-id="ae654-192">Select the **Active Directory Domain Services** and **DNS Server** roles.</span></span> <span data-ttu-id="ae654-193">Po wyświetleniu monitu, Dodaj więcej funkcji, które wymagają tych ról.</span><span class="sxs-lookup"><span data-stu-id="ae654-193">When prompted, add more features that these roles require.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="ae654-194">Zostanie wyświetlone ostrzeżenie, że nie istnieje żaden adres IP weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="ae654-194">You will get a validation warning that there is no static IP address.</span></span> <span data-ttu-id="ae654-195">Jeśli testujesz konfigurację, kliknij przycisk **Kontynuuj**.</span><span class="sxs-lookup"><span data-stu-id="ae654-195">If you are testing the configuration, click **Continue**.</span></span> <span data-ttu-id="ae654-196">W scenariuszach produkcji [ustawić statyczny adres IP komputera kontrolera domeny przy użyciu programu PowerShell](../../../virtual-network/virtual-networks-reserved-private-ip.md).</span><span class="sxs-lookup"><span data-stu-id="ae654-196">For production scenarios [use PowerShell to set the static IP address of the domain controller machine](../../../virtual-network/virtual-networks-reserved-private-ip.md).</span></span>
   > 
   > 
   
    ![Dodawanie ról okna dialogowego](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784624.png)
7. <span data-ttu-id="ae654-198">Kliknij przycisk **dalej** aż **potwierdzenie** sekcji.</span><span class="sxs-lookup"><span data-stu-id="ae654-198">Click **Next** until you reach the **Confirmation** section.</span></span> <span data-ttu-id="ae654-199">Wybierz **automatycznie ponownie uruchom serwer docelowy, jeśli jest to wymagane** pole wyboru.</span><span class="sxs-lookup"><span data-stu-id="ae654-199">Select the **Restart the destination server automatically if required** check box.</span></span>
8. <span data-ttu-id="ae654-200">Kliknij pozycję **Zainstaluj**.</span><span class="sxs-lookup"><span data-stu-id="ae654-200">Click **Install**.</span></span>
9. <span data-ttu-id="ae654-201">Po zainstalowaniu funkcji, wróć do **Menedżera serwera** pulpitu nawigacyjnego.</span><span class="sxs-lookup"><span data-stu-id="ae654-201">After the features are installed, return to the **Server Manager** dashboard.</span></span>
10. <span data-ttu-id="ae654-202">Wybierz nową **usług AD DS** opcji w okienku po lewej stronie.</span><span class="sxs-lookup"><span data-stu-id="ae654-202">Select the new **AD DS** option on the left pane.</span></span>
11. <span data-ttu-id="ae654-203">Kliknij przycisk **więcej** łącze na żółty pasek ostrzeżenie.</span><span class="sxs-lookup"><span data-stu-id="ae654-203">Click the **More** link on the yellow warning bar.</span></span>
    
     ![Usługi AD DS okno dialogowe na maszynie wirtualnej serwera DNS](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784625.png)
12. <span data-ttu-id="ae654-205">W **akcji** kolumny **wszystkie szczegóły zadania serwera** okno dialogowe, kliknij przycisk **podwyższyć ten serwer do poziomu kontrolera domeny**.</span><span class="sxs-lookup"><span data-stu-id="ae654-205">In the **Action** column of the **All Server Task Details** dialog box, click **Promote this server to a domain controller**.</span></span>
13. <span data-ttu-id="ae654-206">W **Kreator konfiguracji usług domenowych Active Directory**, użyj następujących wartości:</span><span class="sxs-lookup"><span data-stu-id="ae654-206">In the **Active Directory Domain Services Configuration Wizard**, use the following values:</span></span>
    
    | <span data-ttu-id="ae654-207">Strona</span><span class="sxs-lookup"><span data-stu-id="ae654-207">Page</span></span> | <span data-ttu-id="ae654-208">Ustawienie</span><span class="sxs-lookup"><span data-stu-id="ae654-208">Setting</span></span> |
    | --- | --- |
    | <span data-ttu-id="ae654-209">Konfiguracja wdrażania</span><span class="sxs-lookup"><span data-stu-id="ae654-209">Deployment Configuration</span></span> |<span data-ttu-id="ae654-210">**Dodaj nowy las** = wybrane</span><span class="sxs-lookup"><span data-stu-id="ae654-210">**Add a new forest** = Selected</span></span><br/><span data-ttu-id="ae654-211">**Nazwa domeny głównej** = corp.contoso.com</span><span class="sxs-lookup"><span data-stu-id="ae654-211">**Root domain name** = corp.contoso.com</span></span> |
    | <span data-ttu-id="ae654-212">Opcje kontrolera domeny</span><span class="sxs-lookup"><span data-stu-id="ae654-212">Domain Controller Options</span></span> |<span data-ttu-id="ae654-213">**Hasło** = Contoso! 000</span><span class="sxs-lookup"><span data-stu-id="ae654-213">**Password** = Contoso!000</span></span><br/><span data-ttu-id="ae654-214">**Potwierdź hasło** = Contoso! 000</span><span class="sxs-lookup"><span data-stu-id="ae654-214">**Confirm Password** = Contoso!000</span></span> |
14. <span data-ttu-id="ae654-215">Kliknij przycisk **dalej** przechodzić przez innych stron w kreatorze.</span><span class="sxs-lookup"><span data-stu-id="ae654-215">Click **Next** to go through the other pages in the wizard.</span></span> <span data-ttu-id="ae654-216">Na **Sprawdzanie wymagań wstępnych** upewnij się, że zostanie wyświetlony następujący komunikat: **sprawdzanie wszystkich wymagań wstępnych zakończyło się pomyślnie**.</span><span class="sxs-lookup"><span data-stu-id="ae654-216">On the **Prerequisites Check** page, verify that you see the following message: **All prerequisite checks passed successfully**.</span></span> <span data-ttu-id="ae654-217">Należy pamiętać, że należy przejrzeć wszystkie odpowiednie komunikaty ostrzegawcze, ale można kontynuować instalację.</span><span class="sxs-lookup"><span data-stu-id="ae654-217">Note that you should review all applicable warning messages, but it is possible to continue with the installation.</span></span>
15. <span data-ttu-id="ae654-218">Kliknij pozycję **Zainstaluj**.</span><span class="sxs-lookup"><span data-stu-id="ae654-218">Click **Install**.</span></span> <span data-ttu-id="ae654-219">**ContosoDC** maszyny wirtualnej zostanie automatycznie ponownie uruchomiony.</span><span class="sxs-lookup"><span data-stu-id="ae654-219">The **ContosoDC** virtual machine will automatically reboot.</span></span>

## <a name="configure-domain-accounts"></a><span data-ttu-id="ae654-220">Konfigurowanie kont domeny</span><span class="sxs-lookup"><span data-stu-id="ae654-220">Configure domain accounts</span></span>
<span data-ttu-id="ae654-221">Następne kroki konfigurowania kont usługi Active Directory do późniejszego użycia.</span><span class="sxs-lookup"><span data-stu-id="ae654-221">The next steps configure the Active Directory accounts for later use.</span></span>

1. <span data-ttu-id="ae654-222">Zaloguj się ponownie do **ContosoDC** maszyny.</span><span class="sxs-lookup"><span data-stu-id="ae654-222">Sign back in to the **ContosoDC** machine.</span></span>
2. <span data-ttu-id="ae654-223">W **Menedżera serwera**, kliknij przycisk **narzędzia** > **Centrum administracyjne usługi Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="ae654-223">In **Server Manager**, click **Tools** > **Active Directory Administrative Center**.</span></span>
   
    ![Centrum administracyjne usługi Active Directory](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784626.png)
3. <span data-ttu-id="ae654-225">W **Centrum administracyjne usługi Active Directory**, wybierz pozycję **corp (lokalna)** w okienku po lewej stronie.</span><span class="sxs-lookup"><span data-stu-id="ae654-225">In the **Active Directory Administrative Center**, select **corp (local)** in the left pane.</span></span>
4. <span data-ttu-id="ae654-226">Po prawej stronie **zadania** okienku, kliknij przycisk **nowy** > **użytkownika**.</span><span class="sxs-lookup"><span data-stu-id="ae654-226">On the right **Tasks** pane, click **New** > **User**.</span></span> <span data-ttu-id="ae654-227">Użyj następujących ustawień:</span><span class="sxs-lookup"><span data-stu-id="ae654-227">Use the following settings:</span></span>
   
   | <span data-ttu-id="ae654-228">Ustawienie</span><span class="sxs-lookup"><span data-stu-id="ae654-228">Setting</span></span> | <span data-ttu-id="ae654-229">Wartość</span><span class="sxs-lookup"><span data-stu-id="ae654-229">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="ae654-230">**Imię**</span><span class="sxs-lookup"><span data-stu-id="ae654-230">**First Name**</span></span> |<span data-ttu-id="ae654-231">Instalowanie</span><span class="sxs-lookup"><span data-stu-id="ae654-231">Install</span></span> |
   | <span data-ttu-id="ae654-232">**SamAccountName użytkownika**</span><span class="sxs-lookup"><span data-stu-id="ae654-232">**User SamAccountName**</span></span> |<span data-ttu-id="ae654-233">Instalowanie</span><span class="sxs-lookup"><span data-stu-id="ae654-233">Install</span></span> |
   | <span data-ttu-id="ae654-234">**Hasło**</span><span class="sxs-lookup"><span data-stu-id="ae654-234">**Password**</span></span> |<span data-ttu-id="ae654-235">Contoso! 000</span><span class="sxs-lookup"><span data-stu-id="ae654-235">Contoso!000</span></span> |
   | <span data-ttu-id="ae654-236">**Potwierdź hasło**</span><span class="sxs-lookup"><span data-stu-id="ae654-236">**Confirm password**</span></span> |<span data-ttu-id="ae654-237">Contoso! 000</span><span class="sxs-lookup"><span data-stu-id="ae654-237">Contoso!000</span></span> |
   | <span data-ttu-id="ae654-238">**Inne opcje haseł**</span><span class="sxs-lookup"><span data-stu-id="ae654-238">**Other password options**</span></span> |<span data-ttu-id="ae654-239">Wybrano</span><span class="sxs-lookup"><span data-stu-id="ae654-239">Selected</span></span> |
   | <span data-ttu-id="ae654-240">**Hasło nigdy nie wygasa**</span><span class="sxs-lookup"><span data-stu-id="ae654-240">**Password never expires**</span></span> |<span data-ttu-id="ae654-241">Zaznaczone</span><span class="sxs-lookup"><span data-stu-id="ae654-241">Checked</span></span> |
5. <span data-ttu-id="ae654-242">Kliknij przycisk **OK** utworzyć **zainstalować** użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae654-242">Click **OK** to create the **Install** user.</span></span> <span data-ttu-id="ae654-243">To konto będzie używane do konfigurowania klastra trybu failover i grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="ae654-243">This account will be used to configure the failover cluster and the availability group.</span></span>
6. <span data-ttu-id="ae654-244">Tworzenie dwóch dodatkowych użytkowników, **CORP\SQLSvc1** i **CORP\SQLSvc2**, ze te same czynności.</span><span class="sxs-lookup"><span data-stu-id="ae654-244">Create two additional users, **CORP\SQLSvc1** and **CORP\SQLSvc2**, with the same steps.</span></span> <span data-ttu-id="ae654-245">Te konta będą używane dla wystąpień programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ae654-245">These accounts will be used for the SQL Server instances.</span></span> <span data-ttu-id="ae654-246">Następnie należy zapewnić **CORP\Install** wystarczających uprawnień, aby skonfigurować klaster pracy awaryjnej systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="ae654-246">Next, you need to give **CORP\Install** the necessary permissions to configure Windows failover clustering.</span></span>
7. <span data-ttu-id="ae654-247">W **Centrum administracyjne usługi Active Directory**, kliknij przycisk **corp (lokalna)** w okienku po lewej stronie.</span><span class="sxs-lookup"><span data-stu-id="ae654-247">In the **Active Directory Administrative Center**, click **corp (local)** in the left pane.</span></span> <span data-ttu-id="ae654-248">W **zadania** okienku, kliknij przycisk **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="ae654-248">In the **Tasks** pane, click **Properties**.</span></span>
   
    ![Właściwości użytkownika CORP](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784627.png)
8. <span data-ttu-id="ae654-250">Wybierz **rozszerzenia**, a następnie kliknij przycisk **zaawansowane** znajdującego się na **zabezpieczeń** kartę.</span><span class="sxs-lookup"><span data-stu-id="ae654-250">Select **Extensions**, and then click the **Advanced** button on the **Security** tab.</span></span>
9. <span data-ttu-id="ae654-251">W **Zaawansowane ustawienia zabezpieczeń dla corp** okno dialogowe, kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="ae654-251">In the **Advanced Security Settings for corp** dialog box, click **Add**.</span></span>
10. <span data-ttu-id="ae654-252">Kliknij przycisk **Wybierz podmiot zabezpieczeń**, wyszukaj **CORP\Install**, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="ae654-252">Click **Select a principal**, search for **CORP\Install**, and then click **OK**.</span></span>
11. <span data-ttu-id="ae654-253">Wybierz **odczytywanie wszystkich właściwości** i **Tworzenie obiektów komputerów** uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="ae654-253">Select the **Read all properties** and **Create Computer objects** permissions.</span></span>
    
     ![Uprawnienia użytkownika Corp](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784628.png)
12. <span data-ttu-id="ae654-255">Kliknij przycisk **OK**, a następnie kliknij przycisk **OK** ponownie.</span><span class="sxs-lookup"><span data-stu-id="ae654-255">Click **OK**, and then click **OK** again.</span></span> <span data-ttu-id="ae654-256">Zamknij okno właściwości corp.</span><span class="sxs-lookup"><span data-stu-id="ae654-256">Close the corp properties window.</span></span>

<span data-ttu-id="ae654-257">Teraz, gdy skonfigurowano usługi Active Directory i obiektów użytkowników, możesz utworzyć trzy maszyny wirtualnej programu SQL Server i dołącz je do tej domeny.</span><span class="sxs-lookup"><span data-stu-id="ae654-257">Now that you configured Active Directory and the user objects, you will create three SQL Server virtual machines and join them to this domain.</span></span>

## <a name="create-the-sql-server-virtual-machines"></a><span data-ttu-id="ae654-258">Tworzenie maszyn wirtualnych programu SQL Server</span><span class="sxs-lookup"><span data-stu-id="ae654-258">Create the SQL Server virtual machines</span></span>
<span data-ttu-id="ae654-259">Utwórz trzy maszyny wirtualne.</span><span class="sxs-lookup"><span data-stu-id="ae654-259">Create three virtual machines.</span></span> <span data-ttu-id="ae654-260">Jeden jest węzłem klastra i są dwa dla programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ae654-260">One is for a cluster node and two are for SQL Server.</span></span> <span data-ttu-id="ae654-261">Aby utworzyć poszczególnych maszyn wirtualnych, wróć do klasycznego portalu Azure, kliknij przycisk **nowy** > **obliczeniowe** > **maszyny wirtualnej** > **z galerii**.</span><span class="sxs-lookup"><span data-stu-id="ae654-261">To create each of the virtual machines, go back to the Azure classic portal, click **New** > **Compute** > **Virtual Machine** > **From Gallery**.</span></span> <span data-ttu-id="ae654-262">Następnie należy użyć szablonów w poniższej tabeli ułatwiają tworzenie maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="ae654-262">Then, use the templates in the following table to help you create the virtual machines.</span></span>

| <span data-ttu-id="ae654-263">Strona</span><span class="sxs-lookup"><span data-stu-id="ae654-263">Page</span></span> | <span data-ttu-id="ae654-264">VM1</span><span class="sxs-lookup"><span data-stu-id="ae654-264">VM1</span></span> | <span data-ttu-id="ae654-265">MASZYNY VM2</span><span class="sxs-lookup"><span data-stu-id="ae654-265">VM2</span></span> | <span data-ttu-id="ae654-266">VM3</span><span class="sxs-lookup"><span data-stu-id="ae654-266">VM3</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="ae654-267">Wybierz system operacyjny maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="ae654-267">Select the virtual machine operating system</span></span> |<span data-ttu-id="ae654-268">**Windows Server 2012 R2 Datacenter**</span><span class="sxs-lookup"><span data-stu-id="ae654-268">**Windows Server 2012 R2 Datacenter**</span></span> |<span data-ttu-id="ae654-269">**SQL Server 2014 Enterprise RTM**</span><span class="sxs-lookup"><span data-stu-id="ae654-269">**SQL Server 2014 RTM Enterprise**</span></span> |<span data-ttu-id="ae654-270">**SQL Server 2014 Enterprise RTM**</span><span class="sxs-lookup"><span data-stu-id="ae654-270">**SQL Server 2014 RTM Enterprise**</span></span> |
| <span data-ttu-id="ae654-271">Konfiguracja maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="ae654-271">Virtual machine configuration</span></span> |<span data-ttu-id="ae654-272">**Data wydania wersji** = (Najnowsza wersja)</span><span class="sxs-lookup"><span data-stu-id="ae654-272">**VERSION RELEASE DATE** = (latest)</span></span><br/><span data-ttu-id="ae654-273">**Nazwa maszyny WIRTUALNEJ** = ContosoWSFCNode</span><span class="sxs-lookup"><span data-stu-id="ae654-273">**VIRTUAL MACHINE NAME** = ContosoWSFCNode</span></span><br/><span data-ttu-id="ae654-274">**WARSTWA** = STANDARD</span><span class="sxs-lookup"><span data-stu-id="ae654-274">**TIER** = STANDARD</span></span><br/><span data-ttu-id="ae654-275">**ROZMIAR** = A2 (2 rdzenie)</span><span class="sxs-lookup"><span data-stu-id="ae654-275">**SIZE** = A2 (2 cores)</span></span><br/><span data-ttu-id="ae654-276">**NOWĄ nazwę użytkownika** = AzureAdmin</span><span class="sxs-lookup"><span data-stu-id="ae654-276">**NEW USER NAME** = AzureAdmin</span></span><br/><span data-ttu-id="ae654-277">**NOWE hasło** = Contoso! 000</span><span class="sxs-lookup"><span data-stu-id="ae654-277">**NEW PASSWORD** = Contoso!000</span></span><br/><span data-ttu-id="ae654-278">**POTWIERDŹ** = Contoso! 000</span><span class="sxs-lookup"><span data-stu-id="ae654-278">**CONFIRM** = Contoso!000</span></span> |<span data-ttu-id="ae654-279">**Data wydania wersji** = (Najnowsza wersja)</span><span class="sxs-lookup"><span data-stu-id="ae654-279">**VERSION RELEASE DATE** = (latest)</span></span><br/><span data-ttu-id="ae654-280">**Nazwa maszyny WIRTUALNEJ** = ContosoSQL1</span><span class="sxs-lookup"><span data-stu-id="ae654-280">**VIRTUAL MACHINE NAME** = ContosoSQL1</span></span><br/><span data-ttu-id="ae654-281">**WARSTWA** = STANDARD</span><span class="sxs-lookup"><span data-stu-id="ae654-281">**TIER** = STANDARD</span></span><br/><span data-ttu-id="ae654-282">**ROZMIAR** = A3 (4 rdzenie)</span><span class="sxs-lookup"><span data-stu-id="ae654-282">**SIZE** = A3 (4 cores)</span></span><br/><span data-ttu-id="ae654-283">**NOWĄ nazwę użytkownika** = AzureAdmin</span><span class="sxs-lookup"><span data-stu-id="ae654-283">**NEW USER NAME** = AzureAdmin</span></span><br/><span data-ttu-id="ae654-284">**NOWE hasło** = Contoso! 000</span><span class="sxs-lookup"><span data-stu-id="ae654-284">**NEW PASSWORD** = Contoso!000</span></span><br/><span data-ttu-id="ae654-285">**POTWIERDŹ** = Contoso! 000</span><span class="sxs-lookup"><span data-stu-id="ae654-285">**CONFIRM** = Contoso!000</span></span> |<span data-ttu-id="ae654-286">**Data wydania wersji** = (Najnowsza wersja)</span><span class="sxs-lookup"><span data-stu-id="ae654-286">**VERSION RELEASE DATE** = (latest)</span></span><br/><span data-ttu-id="ae654-287">**Nazwa maszyny WIRTUALNEJ** = ContosoSQL2</span><span class="sxs-lookup"><span data-stu-id="ae654-287">**VIRTUAL MACHINE NAME** = ContosoSQL2</span></span><br/><span data-ttu-id="ae654-288">**WARSTWA** = STANDARD</span><span class="sxs-lookup"><span data-stu-id="ae654-288">**TIER** = STANDARD</span></span><br/><span data-ttu-id="ae654-289">**ROZMIAR** = A3 (4 rdzenie)</span><span class="sxs-lookup"><span data-stu-id="ae654-289">**SIZE** = A3 (4 cores)</span></span><br/><span data-ttu-id="ae654-290">**NOWĄ nazwę użytkownika** = AzureAdmin</span><span class="sxs-lookup"><span data-stu-id="ae654-290">**NEW USER NAME** = AzureAdmin</span></span><br/><span data-ttu-id="ae654-291">**NOWE hasło** = Contoso! 000</span><span class="sxs-lookup"><span data-stu-id="ae654-291">**NEW PASSWORD** = Contoso!000</span></span><br/><span data-ttu-id="ae654-292">**POTWIERDŹ** = Contoso! 000</span><span class="sxs-lookup"><span data-stu-id="ae654-292">**CONFIRM** = Contoso!000</span></span> |
| <span data-ttu-id="ae654-293">Konfiguracja maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="ae654-293">Virtual machine configuration</span></span> |<span data-ttu-id="ae654-294">**USŁUGI w CHMURZE** = nazwa DNS usługi utworzonej wcześniej unikatowe chmury (przykład: ContosoDC123)</span><span class="sxs-lookup"><span data-stu-id="ae654-294">**CLOUD SERVICE** = Previously Created Unique Cloud Service DNS Name (ex: ContosoDC123)</span></span><br/><span data-ttu-id="ae654-295">**REGION/grupy KOLIGACJI i WIRTUALNEJ sieci** = ContosoNET</span><span class="sxs-lookup"><span data-stu-id="ae654-295">**REGION/AFFINITY GROUP/VIRTUAL NETWORK** = ContosoNET</span></span><br/><span data-ttu-id="ae654-296">**PODSIECI sieci WIRTUALNEJ** = Back(10.10.2.0/24)</span><span class="sxs-lookup"><span data-stu-id="ae654-296">**VIRTUAL NETWORK SUBNETS** = Back(10.10.2.0/24)</span></span><br/><span data-ttu-id="ae654-297">**Konto MAGAZYNU** = Użyj konta usługi storage automatycznie generowanych</span><span class="sxs-lookup"><span data-stu-id="ae654-297">**STORAGE ACCOUNT** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="ae654-298">**ZESTAWU dostępności** = Tworzenie dostępności ustawić</span><span class="sxs-lookup"><span data-stu-id="ae654-298">**AVAILABILITY SET** = Create an availability set</span></span><br/><span data-ttu-id="ae654-299">**NAZWA ZBIORU DOSTĘPNOŚCI** = SQLHADR</span><span class="sxs-lookup"><span data-stu-id="ae654-299">**AVAILABILITY SET NAME** = SQLHADR</span></span> |<span data-ttu-id="ae654-300">**USŁUGI w CHMURZE** = nazwa DNS usługi utworzonej wcześniej unikatowe chmury (przykład: ContosoDC123)</span><span class="sxs-lookup"><span data-stu-id="ae654-300">**CLOUD SERVICE** = Previously Created Unique Cloud Service DNS Name (ex: ContosoDC123)</span></span><br/><span data-ttu-id="ae654-301">**REGION/grupy KOLIGACJI i WIRTUALNEJ sieci** = ContosoNET</span><span class="sxs-lookup"><span data-stu-id="ae654-301">**REGION/AFFINITY GROUP/VIRTUAL NETWORK** = ContosoNET</span></span><br/><span data-ttu-id="ae654-302">**PODSIECI sieci WIRTUALNEJ** = Back(10.10.2.0/24)</span><span class="sxs-lookup"><span data-stu-id="ae654-302">**VIRTUAL NETWORK SUBNETS** = Back(10.10.2.0/24)</span></span><br/><span data-ttu-id="ae654-303">**Konto MAGAZYNU** = Użyj konta usługi storage automatycznie generowanych</span><span class="sxs-lookup"><span data-stu-id="ae654-303">**STORAGE ACCOUNT** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="ae654-304">**ZESTAWU dostępności** = SQLHADR (można również skonfigurować dostępność ustawić po utworzeniu maszyny.</span><span class="sxs-lookup"><span data-stu-id="ae654-304">**AVAILABILITY SET** = SQLHADR (You can also configure the availability set after the machine has been created.</span></span> <span data-ttu-id="ae654-305">Wszystkie trzy maszyny powinien być przypisany do zestawu dostępności SQLHADR.)</span><span class="sxs-lookup"><span data-stu-id="ae654-305">All three machines should be assigned to the SQLHADR availability set.)</span></span> |<span data-ttu-id="ae654-306">**USŁUGI w CHMURZE** = nazwa DNS usługi utworzonej wcześniej unikatowe chmury (przykład: ContosoDC123)</span><span class="sxs-lookup"><span data-stu-id="ae654-306">**CLOUD SERVICE** = Previously Created Unique Cloud Service DNS Name (ex: ContosoDC123)</span></span><br/><span data-ttu-id="ae654-307">**REGION/grupy KOLIGACJI i WIRTUALNEJ sieci** = ContosoNET</span><span class="sxs-lookup"><span data-stu-id="ae654-307">**REGION/AFFINITY GROUP/VIRTUAL NETWORK** = ContosoNET</span></span><br/><span data-ttu-id="ae654-308">**PODSIECI sieci WIRTUALNEJ** = Back(10.10.2.0/24)</span><span class="sxs-lookup"><span data-stu-id="ae654-308">**VIRTUAL NETWORK SUBNETS** = Back(10.10.2.0/24)</span></span><br/><span data-ttu-id="ae654-309">**Konto MAGAZYNU** = Użyj konta usługi storage automatycznie generowanych</span><span class="sxs-lookup"><span data-stu-id="ae654-309">**STORAGE ACCOUNT** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="ae654-310">**ZESTAWU dostępności** = SQLHADR (można również skonfigurować dostępność ustawić po utworzeniu maszyny.</span><span class="sxs-lookup"><span data-stu-id="ae654-310">**AVAILABILITY SET** = SQLHADR (You can also configure the availability set after the machine has been created.</span></span> <span data-ttu-id="ae654-311">Wszystkie trzy maszyny powinien być przypisany do zestawu dostępności SQLHADR.)</span><span class="sxs-lookup"><span data-stu-id="ae654-311">All three machines should be assigned to the SQLHADR availability set.)</span></span> |
| <span data-ttu-id="ae654-312">Opcje maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="ae654-312">Virtual machine options</span></span> |<span data-ttu-id="ae654-313">Użyj wartości domyślnych</span><span class="sxs-lookup"><span data-stu-id="ae654-313">Use defaults</span></span> |<span data-ttu-id="ae654-314">Użyj wartości domyślnych</span><span class="sxs-lookup"><span data-stu-id="ae654-314">Use defaults</span></span> |<span data-ttu-id="ae654-315">Użyj wartości domyślnych</span><span class="sxs-lookup"><span data-stu-id="ae654-315">Use defaults</span></span> |

<br/>

> [!NOTE]
> <span data-ttu-id="ae654-316">Poprzednią konfigurację sugeruje maszyn wirtualnych w warstwie standardowa, ponieważ maszyny warstwy BASIC nie obsługuje punktów końcowych z równoważeniem obciążenia.</span><span class="sxs-lookup"><span data-stu-id="ae654-316">The previous configuration suggests STANDARD tier virtual machines, because BASIC tier machines do not support load-balanced endpoints.</span></span> <span data-ttu-id="ae654-317">Należy równoważeniem obciążenia punkty końcowe później, aby utworzyć odbiornik grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="ae654-317">You need load-balanced endpoints later to create an availability group listener.</span></span> <span data-ttu-id="ae654-318">Ponadto rozmiary maszyny, które są zalecane w tym miejscu są przeznaczone do testowania grup dostępności w maszynach wirtualnych platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="ae654-318">Also, the machine sizes that are suggested here are meant for testing availability groups in Azure Virtual Machines.</span></span> <span data-ttu-id="ae654-319">Aby uzyskać najlepszą wydajność w przypadku obciążeń produkcyjnych, zobacz zalecenia dotyczące programu SQL Server rozmiary i konfiguracji [wydajności najlepsze rozwiązania dotyczące programu SQL Server w usłudze Azure Virtual Machines](../sql/virtual-machines-windows-sql-performance.md).</span><span class="sxs-lookup"><span data-stu-id="ae654-319">For the best performance on production workloads, see the recommendations for SQL Server machine sizes and configuration in [Performance best practices for SQL Server in Azure Virtual Machines](../sql/virtual-machines-windows-sql-performance.md).</span></span>
> 
> 

<span data-ttu-id="ae654-320">Po trzy maszyny wirtualne są w pełni zaaprowizowanym, należy połączyć je **corp.contoso.com** domeny i przyznać prawa administracyjne CORP\Install maszyn.</span><span class="sxs-lookup"><span data-stu-id="ae654-320">After the three virtual machines are fully provisioned, you need to join them to the **corp.contoso.com** domain and grant CORP\Install administrative rights to the machines.</span></span> <span data-ttu-id="ae654-321">Aby to zrobić, użyj następujących kroków dla każdego z trzech maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="ae654-321">To do this, use the following steps for each of the three virtual machines.</span></span>

1. <span data-ttu-id="ae654-322">Najpierw należy zmienić adresu preferowanego serwera DNS.</span><span class="sxs-lookup"><span data-stu-id="ae654-322">First, change the preferred DNS server address.</span></span> <span data-ttu-id="ae654-323">Pobierz plik RDP każdej maszyny wirtualnej do katalogu lokalnego, zaznaczając maszyny wirtualnej na liście i klikając przycisk **Connect** przycisku.</span><span class="sxs-lookup"><span data-stu-id="ae654-323">Download each virtual machine's RDP file to your local directory by selecting the virtual machine in the list and clicking the **Connect** button.</span></span> <span data-ttu-id="ae654-324">Aby wybrać maszynę wirtualną, kliknij w dowolnym miejscu oprócz pierwszej komórki w wierszu, jak pokazano na poniższym zrzucie ekranu.</span><span class="sxs-lookup"><span data-stu-id="ae654-324">To select a virtual machine, click anywhere but the first cell in the row, as shown in the following screenshot.</span></span>
   
    ![Pobierz plik RDP](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC664953.jpg)
2. <span data-ttu-id="ae654-326">Otwórz plik RDP, który pobrany i zaloguj się do maszyny wirtualnej przy użyciu konta administratora skonfigurowane (**BUILTIN\AzureAdmin**) i hasło (**Contoso! 000**).</span><span class="sxs-lookup"><span data-stu-id="ae654-326">Open the RDP file that you downloaded, and sign in to the virtual machine by using your configured administrator account (**BUILTIN\AzureAdmin**) and password (**Contoso!000**).</span></span>
3. <span data-ttu-id="ae654-327">Po zalogowaniu, powinien zostać wyświetlony **Menedżera serwera** pulpitu nawigacyjnego.</span><span class="sxs-lookup"><span data-stu-id="ae654-327">After you sign in, you should see the **Server Manager** dashboard.</span></span> <span data-ttu-id="ae654-328">Kliknij przycisk **lokalnego serwera** w okienku po lewej stronie.</span><span class="sxs-lookup"><span data-stu-id="ae654-328">Click **Local Server** in the left pane.</span></span>
4. <span data-ttu-id="ae654-329">Kliknij przycisk **adres IPv4 przypisany przez serwer DHCP IPv6 włączone** łącza.</span><span class="sxs-lookup"><span data-stu-id="ae654-329">Click the **IPv4 address assigned by DHCP, IPv6 enabled** link.</span></span>
5. <span data-ttu-id="ae654-330">W **połączenia sieciowe** okna dialogowego kliknij ikonę sieci.</span><span class="sxs-lookup"><span data-stu-id="ae654-330">In the **Network Connections** dialog box, click the network icon.</span></span>
   
    ![Zmień maszyny wirtualnej, preferowany serwer DNS](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784629.png)
6. <span data-ttu-id="ae654-332">Na pasku poleceń, kliknij przycisk **Zmień ustawienia tego połączenia**.</span><span class="sxs-lookup"><span data-stu-id="ae654-332">On the command bar, click **Change the settings of this connection**.</span></span> <span data-ttu-id="ae654-333">(W zależności od rozmiaru okna, może być konieczne kliknij Podwójna strzałka w prawo, aby wyświetlić to polecenie).</span><span class="sxs-lookup"><span data-stu-id="ae654-333">(Depending on the size of your window, you might have to click the double right arrow to see this command).</span></span>
7. <span data-ttu-id="ae654-334">Wybierz **protokół internetowy w wersji 4 (TCP/IPv4)**, a następnie kliknij przycisk **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="ae654-334">Select **Internet Protocol Version 4 (TCP/IPv4)**, and then click **Properties**.</span></span>
8. <span data-ttu-id="ae654-335">Wybierz **Użyj następujących adresów serwerów DNS** , a następnie określ **10.10.2.4** w **preferowany serwer DNS**.</span><span class="sxs-lookup"><span data-stu-id="ae654-335">Select **Use the following DNS server addresses** and then specify **10.10.2.4** in **Preferred DNS server**.</span></span>
9. <span data-ttu-id="ae654-336">**10.10.2.4** adres jest adresem, który jest przypisany do maszyny wirtualnej w podsieci 10.10.2.0/24 w sieci wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="ae654-336">The **10.10.2.4** address is the address that's assigned to a virtual machine in the 10.10.2.0/24 subnet in an Azure virtual network.</span></span> <span data-ttu-id="ae654-337">Czy maszyna wirtualna jest **ContosoDC**.</span><span class="sxs-lookup"><span data-stu-id="ae654-337">That virtual machine is **ContosoDC**.</span></span> <span data-ttu-id="ae654-338">Aby sprawdzić **ContosoDC**na adres IP, użyj **nslookup contosodc** w oknie wiersza polecenia, jak pokazano na poniższym zrzucie ekranu.</span><span class="sxs-lookup"><span data-stu-id="ae654-338">To verify **ContosoDC**'s IP address, use **nslookup contosodc** in the command prompt window, as shown in the following screenshot.</span></span>
   
    ![Użyj polecenia NSLOOKUP, aby znaleźć adres IP dla kontrolera domeny](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC664954.jpg)
10. <span data-ttu-id="ae654-340">Kliknij przycisk **OK** > **Zamknij** aby zatwierdzić zmiany.</span><span class="sxs-lookup"><span data-stu-id="ae654-340">Click **OK** > **Close** to commit the changes.</span></span> <span data-ttu-id="ae654-341">Teraz można dołączyć maszyny wirtualnej do **corp.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="ae654-341">You can now join the virtual machine to **corp.contoso.com**.</span></span>
11. <span data-ttu-id="ae654-342">W **lokalnego serwera** okna, kliknij przycisk **grupy roboczej** łącza.</span><span class="sxs-lookup"><span data-stu-id="ae654-342">Back in the **Local Server** window, click the **WORKGROUP** link.</span></span>
12. <span data-ttu-id="ae654-343">W **nazwy komputera** kliknij **zmiany**.</span><span class="sxs-lookup"><span data-stu-id="ae654-343">In the **Computer Name** section, click **Change**.</span></span>
13. <span data-ttu-id="ae654-344">Wybierz **domeny** pole wyboru, typ **corp.contoso.com** w polu tekstowym, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="ae654-344">Select the **Domain** check box, type **corp.contoso.com** in the text box, and then click **OK**.</span></span>
14. <span data-ttu-id="ae654-345">W **zabezpieczenia systemu Windows** okna dialogowego wprowadź poświadczenia dla konta administratora domeny domyślnej (**CORP\AzureAdmin**) i hasło (**Contoso! 000**).</span><span class="sxs-lookup"><span data-stu-id="ae654-345">In the **Windows Security** dialog box, specify the credentials for the default domain administrator account (**CORP\AzureAdmin**) and the password (**Contoso!000**).</span></span>
15. <span data-ttu-id="ae654-346">Gdy zostanie wyświetlony komunikat "Zapraszamy do domeny corp.contoso.com", kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="ae654-346">When you see the "Welcome to the corp.contoso.com domain" message, click **OK**.</span></span>
16. <span data-ttu-id="ae654-347">Kliknij przycisk **Zamknij** > **Uruchom ponownie teraz** w oknie dialogowym.</span><span class="sxs-lookup"><span data-stu-id="ae654-347">Click **Close** > **Restart Now** in the dialog box.</span></span>

### <a name="add-the-corpinstall-user-as-an-administrator-on-each-virtual-machine"></a><span data-ttu-id="ae654-348">Dodaj użytkownika Corp\Install jako administrator na każdej maszynie wirtualnej</span><span class="sxs-lookup"><span data-stu-id="ae654-348">Add the Corp\Install user as an administrator on each virtual machine</span></span>
1. <span data-ttu-id="ae654-349">Poczekaj, aż do ponownego uruchamiania maszyny wirtualnej, a następnie otwórz protokołu RDP pliku ponownie logować się do maszyny wirtualnej za pomocą **BUILTIN\AzureAdmin** konta.</span><span class="sxs-lookup"><span data-stu-id="ae654-349">Wait until the virtual machine restarts, and then open the RDP file again to sign in to the virtual machine by using the **BUILTIN\AzureAdmin** account.</span></span>
2. <span data-ttu-id="ae654-350">W **Menedżera serwera** kliknij **narzędzia** > **Zarządzanie komputerem**.</span><span class="sxs-lookup"><span data-stu-id="ae654-350">In **Server Manager** click **Tools** > **Computer Management**.</span></span>
   
    ![Zarządzanie komputerem](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784630.png)
3. <span data-ttu-id="ae654-352">W **Zarządzanie komputerem** okna dialogowego rozwiń **lokalnych użytkowników i grup**, a następnie kliknij przycisk **grup**.</span><span class="sxs-lookup"><span data-stu-id="ae654-352">In the **Computer Management** dialog box, expand **Local Users and Groups**, and then click **Groups**.</span></span>
4. <span data-ttu-id="ae654-353">Kliknij dwukrotnie **Administratorzy** grupy.</span><span class="sxs-lookup"><span data-stu-id="ae654-353">Double-click the **Administrators** group.</span></span>
5. <span data-ttu-id="ae654-354">W **właściwości Administratorzy** okno dialogowe, kliknij przycisk **Dodaj** przycisku.</span><span class="sxs-lookup"><span data-stu-id="ae654-354">In the **Administrators Properties** dialog box, click the **Add** button.</span></span>
6. <span data-ttu-id="ae654-355">Wprowadź nazwę danego użytkownika **CORP\Install**, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="ae654-355">Enter the user **CORP\Install**, and then click **OK**.</span></span> <span data-ttu-id="ae654-356">Po wyświetleniu monitu o poświadczenia, użyj **AzureAdmin** konta **Contoso! 000** hasła.</span><span class="sxs-lookup"><span data-stu-id="ae654-356">When prompted for credentials, use the **AzureAdmin** account with the **Contoso!000** password.</span></span>
7. <span data-ttu-id="ae654-357">Kliknij przycisk **OK** zamknąć **właściwości administratora** okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="ae654-357">Click **OK** to close the **Administrator Properties** dialog box.</span></span>

### <a name="add-the-failover-clustering-feature-to-each-virtual-machine"></a><span data-ttu-id="ae654-358">Dodaj funkcję Klaster trybu Failover do każdej maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="ae654-358">Add the Failover Clustering feature to each virtual machine</span></span>
1. <span data-ttu-id="ae654-359">W **Menedżera serwera** pulpitu nawigacyjnego, kliknij przycisk **Dodaj role i funkcje**.</span><span class="sxs-lookup"><span data-stu-id="ae654-359">In the **Server Manager** dashboard, click **Add roles and features**.</span></span>
2. <span data-ttu-id="ae654-360">W **Kreatora dodawania ról i funkcji**, kliknij przycisk **dalej** aż do **funkcje** strony.</span><span class="sxs-lookup"><span data-stu-id="ae654-360">In the **Add Roles and Features Wizard**, click **Next** until you get to the **Features** page.</span></span>
3. <span data-ttu-id="ae654-361">Wybierz **klaster pracy awaryjnej**.</span><span class="sxs-lookup"><span data-stu-id="ae654-361">Select **Failover Clustering**.</span></span> <span data-ttu-id="ae654-362">Po wyświetleniu monitu, Dodaj inne funkcje zależne.</span><span class="sxs-lookup"><span data-stu-id="ae654-362">When prompted, add other dependent features.</span></span>
   
    ![Dodaj funkcję Klaster trybu Failover do maszyny wirtualnej](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784631.png)
4. <span data-ttu-id="ae654-364">Kliknij przycisk **dalej**, a następnie kliknij przycisk **zainstalować** na **potwierdzenie** strony.</span><span class="sxs-lookup"><span data-stu-id="ae654-364">Click **Next**, and then click **Install** on the **Confirmation** page.</span></span>
5. <span data-ttu-id="ae654-365">Gdy **klaster pracy awaryjnej** instalacja funkcji została zakończona, kliknij przycisk **Zamknij**.</span><span class="sxs-lookup"><span data-stu-id="ae654-365">When the **Failover Clustering** feature installation is finished, click **Close**.</span></span>
6. <span data-ttu-id="ae654-366">Wyloguj się z maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="ae654-366">Sign out of the virtual machine.</span></span>
7. <span data-ttu-id="ae654-367">Powtórz kroki opisane w tej sekcji dla wszystkich trzech serwerów: **ContosoWSFCNode**, **ContosoSQL1**, i **ContosoSQL2**.</span><span class="sxs-lookup"><span data-stu-id="ae654-367">Repeat the steps in this section for all three servers: **ContosoWSFCNode**, **ContosoSQL1**, and **ContosoSQL2**.</span></span>

<span data-ttu-id="ae654-368">SQL Server, który teraz przydzielania maszyny wirtualnej i uruchomiona, ale każdy ma domyślne opcje dla programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ae654-368">The SQL Server virtual machines are now provisioned and running, but each has the default options for SQL Server.</span></span>

## <a name="create-the-failover-cluster"></a><span data-ttu-id="ae654-369">Tworzenie klastra trybu failover</span><span class="sxs-lookup"><span data-stu-id="ae654-369">Create the failover cluster</span></span>
<span data-ttu-id="ae654-370">W tej sekcji utworzysz klaster trybu failover, który będzie hostem grupy dostępności, która zostanie utworzona później.</span><span class="sxs-lookup"><span data-stu-id="ae654-370">In this section, you create the failover cluster that will host the availability group that you will create later.</span></span> <span data-ttu-id="ae654-371">Przez teraz należy wykonać następujące polecenie, aby do każdego z trzech maszyn wirtualnych, które będą używane w klastrze trybu failover:</span><span class="sxs-lookup"><span data-stu-id="ae654-371">By now, you should have done the following to each of the three virtual machines that you will use in the failover cluster:</span></span>

* <span data-ttu-id="ae654-372">W pełni zaaprowizowanym maszyny wirtualnej platformy Azure</span><span class="sxs-lookup"><span data-stu-id="ae654-372">Fully provisioned the virtual machine in Azure</span></span>
* <span data-ttu-id="ae654-373">Maszyna wirtualna należy do domeny</span><span class="sxs-lookup"><span data-stu-id="ae654-373">Joined the virtual machine to the domain</span></span>
* <span data-ttu-id="ae654-374">Dodaje **CORP\Install** do lokalnej grupy administratorów</span><span class="sxs-lookup"><span data-stu-id="ae654-374">Added **CORP\Install** to the local Administrators group</span></span>
* <span data-ttu-id="ae654-375">Dodano obsługi klastrów pracy awaryjnej</span><span class="sxs-lookup"><span data-stu-id="ae654-375">Added the failover clustering feature</span></span>

<span data-ttu-id="ae654-376">Wszystkie są wymagania wstępne na każdej maszynie wirtualnej przed dołączeniem jej do klastra trybu failover.</span><span class="sxs-lookup"><span data-stu-id="ae654-376">All these are prerequisites on each virtual machine before you can join it to the failover cluster.</span></span>

<span data-ttu-id="ae654-377">Należy również zauważyć, że sieć wirtualna platformy Azure nie zachowują się w taki sam sposób jak sieci lokalnej.</span><span class="sxs-lookup"><span data-stu-id="ae654-377">Also, note that the Azure virtual network does not behave in the same way as an on-premises network.</span></span> <span data-ttu-id="ae654-378">Należy utworzyć klaster w następującej kolejności:</span><span class="sxs-lookup"><span data-stu-id="ae654-378">You need to create the cluster in the following order:</span></span>

1. <span data-ttu-id="ae654-379">Utwórz w jednym węźle klastra z jednym węzłem (**ContosoSQL1**).</span><span class="sxs-lookup"><span data-stu-id="ae654-379">Create a single-node cluster on one node (**ContosoSQL1**).</span></span>
2. <span data-ttu-id="ae654-380">Zmodyfikuj adres IP klastra nieużywane adresu IP (**10.10.2.101**).</span><span class="sxs-lookup"><span data-stu-id="ae654-380">Modify the cluster IP address to an unused IP address (**10.10.2.101**).</span></span>
3. <span data-ttu-id="ae654-381">Przenieś nazwy klastra w tryb online.</span><span class="sxs-lookup"><span data-stu-id="ae654-381">Bring the cluster name online.</span></span>
4. <span data-ttu-id="ae654-382">Dodawanie innych węzłów (**ContosoSQL2** i **ContosoWSFCNode**).</span><span class="sxs-lookup"><span data-stu-id="ae654-382">Add the other nodes (**ContosoSQL2** and **ContosoWSFCNode**).</span></span>

<span data-ttu-id="ae654-383">Wykonaj następujące kroki, aby wykonać zadania, które pełnej konfiguracji klastra.</span><span class="sxs-lookup"><span data-stu-id="ae654-383">Use the following steps to complete the tasks that fully configure the cluster.</span></span>

1. <span data-ttu-id="ae654-384">Otwórz plik RDP dla **ContosoSQL1**i zaloguj się przy użyciu konta domeny **CORP\Install**.</span><span class="sxs-lookup"><span data-stu-id="ae654-384">Open the RDP file for **ContosoSQL1**, and sign in by using the domain account **CORP\Install**.</span></span>
2. <span data-ttu-id="ae654-385">W **Menedżera serwera** pulpitu nawigacyjnego, kliknij przycisk **narzędzia** > **Menedżera klastra trybu Failover**.</span><span class="sxs-lookup"><span data-stu-id="ae654-385">In the **Server Manager** dashboard, click **Tools** > **Failover Cluster Manager**.</span></span>
3. <span data-ttu-id="ae654-386">W lewym okienku kliknij prawym przyciskiem myszy **Menedżera klastra trybu Failover**, a następnie kliknij przycisk **utworzyć klaster**, jak pokazano na poniższym zrzucie ekranu.</span><span class="sxs-lookup"><span data-stu-id="ae654-386">In the left pane, right-click **Failover Cluster Manager**, and then click **Create a Cluster**, as shown in the following screenshot.</span></span>
   
    ![Tworzenie klastra](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784632.png)
4. <span data-ttu-id="ae654-388">W kreatorze tworzenia klastra Tworzenie klastra z jednym węzłem krokowe wykonywanie strony i z ustawieniami w poniższej tabeli:</span><span class="sxs-lookup"><span data-stu-id="ae654-388">In the Create Cluster Wizard, create a one-node cluster by stepping through the pages and using the settings in the following table:</span></span>
   
   | <span data-ttu-id="ae654-389">Strona</span><span class="sxs-lookup"><span data-stu-id="ae654-389">Page</span></span> | <span data-ttu-id="ae654-390">Ustawienia</span><span class="sxs-lookup"><span data-stu-id="ae654-390">Settings</span></span> |
   | --- | --- |
   | <span data-ttu-id="ae654-391">Przed rozpoczęciem</span><span class="sxs-lookup"><span data-stu-id="ae654-391">Before You Begin</span></span> |<span data-ttu-id="ae654-392">Użyj wartości domyślnych</span><span class="sxs-lookup"><span data-stu-id="ae654-392">Use defaults</span></span> |
   | <span data-ttu-id="ae654-393">Wybierz serwery</span><span class="sxs-lookup"><span data-stu-id="ae654-393">Select Servers</span></span> |<span data-ttu-id="ae654-394">Typ **ContosoSQL1** w **wprowadź nazwę serwera** i kliknij przycisk **Dodaj**</span><span class="sxs-lookup"><span data-stu-id="ae654-394">Type **ContosoSQL1** in **Enter server name** and click **Add**</span></span> |
   | <span data-ttu-id="ae654-395">Ostrzeżenie dotyczące sprawdzania poprawności</span><span class="sxs-lookup"><span data-stu-id="ae654-395">Validation Warning</span></span> |<span data-ttu-id="ae654-396">Wybierz **nr nie jest wymagana obsługa firmy Microsoft dla tego klastra i z tego powodu nie chcesz uruchomić testy weryfikacyjne. Po kliknięciu przycisku dalej kontynuować tworzenie klastra**.</span><span class="sxs-lookup"><span data-stu-id="ae654-396">Select **No. I do not require support from Microsoft for this cluster, and therefore do not want to run the validation tests. When I click Next, continue creating the cluster**.</span></span> |
   | <span data-ttu-id="ae654-397">Punkt dostępu do administrowania klastrem</span><span class="sxs-lookup"><span data-stu-id="ae654-397">Access Point for Administering the Cluster</span></span> |<span data-ttu-id="ae654-398">Typ **klaster_1** w **nazwa klastra**</span><span class="sxs-lookup"><span data-stu-id="ae654-398">Type **Cluster1** in **Cluster Name**</span></span> |
   | <span data-ttu-id="ae654-399">Potwierdzenie</span><span class="sxs-lookup"><span data-stu-id="ae654-399">Confirmation</span></span> |<span data-ttu-id="ae654-400">Użyj wartości domyślnych, chyba że w przypadku korzystania z funkcji miejsca do magazynowania.</span><span class="sxs-lookup"><span data-stu-id="ae654-400">Use defaults unless you are using Storage Spaces.</span></span> <span data-ttu-id="ae654-401">Zapoznaj się z ostrzeżeniem poniżej tej tabeli.</span><span class="sxs-lookup"><span data-stu-id="ae654-401">See the warning following this table.</span></span> |
   
   > [!WARNING]
   > <span data-ttu-id="ae654-402">Jeśli używasz [miejsca do magazynowania](https://technet.microsoft.com/library/hh831739), który grupuje wiele dysków w pule magazynu, należy wyczyścić **Dodaj wszystkie odpowiednie magazyny do klastra** pole wyboru na **potwierdzenie** strony.</span><span class="sxs-lookup"><span data-stu-id="ae654-402">If you are using [Storage Spaces](https://technet.microsoft.com/library/hh831739), which groups multiple disks into storage pools, you must clear the **Add all eligible storage to the cluster** check box on the **Confirmation** page.</span></span> <span data-ttu-id="ae654-403">Jeśli ta opcja nie zostanie wyczyszczone, dyski wirtualne będzie można odłączyć podczas procesu klastrowania.</span><span class="sxs-lookup"><span data-stu-id="ae654-403">If you do not clear this option, the virtual disks will be detached during the clustering process.</span></span> <span data-ttu-id="ae654-404">W związku z tym również nie pojawią się w Menedżerze dysków lub w Eksploratorze dopóki miejsca do magazynowania nie zostaną usunięte z klastra i ponownie nałożona za pomocą programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ae654-404">As a result, they will also not appear in Disk Manager or Explorer until the storage spaces are removed from the cluster and reattached by using PowerShell.</span></span>
   > 
   > 
5. <span data-ttu-id="ae654-405">W okienku po lewej stronie rozwiń **Menedżera klastra trybu Failover**, a następnie kliknij przycisk **Cluster1.corp.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="ae654-405">In the left pane, expand **Failover Cluster Manager**, and then click **Cluster1.corp.contoso.com**.</span></span>
6. <span data-ttu-id="ae654-406">W środkowym okienku, przewiń w dół do **zasoby podstawowe klastra** , a następnie rozwiń węzeł **Name: Clutser1** szczegóły.</span><span class="sxs-lookup"><span data-stu-id="ae654-406">In the center pane, scroll down to the **Cluster Core Resources** section, and expand the **Name: Clutser1** details.</span></span> <span data-ttu-id="ae654-407">Powinny pojawić się zarówno **nazwa** i **adres IP** zasobów w **** stanu.</span><span class="sxs-lookup"><span data-stu-id="ae654-407">You should see both the **Name** and the **IP Address** resources in the **Failed** state.</span></span> <span data-ttu-id="ae654-408">Nie można przełączyć zasobu adresu IP do trybu online, ponieważ klastra jest przypisany ten sam adres IP komputera, który jest zduplikowany adres.</span><span class="sxs-lookup"><span data-stu-id="ae654-408">The IP address resource cannot be brought online because the cluster is assigned the same IP address as the machine itself, which is a duplicate address.</span></span>
7. <span data-ttu-id="ae654-409">Kliknij prawym przyciskiem myszy nieudane **adres IP** zasobów, a następnie kliknij przycisk **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="ae654-409">Right-click the failed **IP Address** resource, and then click **Properties**.</span></span>
   
    ![Właściwości klastra](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784633.png)
8. <span data-ttu-id="ae654-411">Wybierz **statyczny adres IP**, określ **10.10.2.101** w **adres** polu tekstowym, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="ae654-411">Select **Static IP Address**, specify **10.10.2.101** in the **Address** text box, and then click **OK**.</span></span>
9. <span data-ttu-id="ae654-412">W **zasoby podstawowe klastra** sekcji, kliknij prawym przyciskiem myszy **Name: Klaster1**, a następnie kliknij przycisk **przejdź do trybu Online**.</span><span class="sxs-lookup"><span data-stu-id="ae654-412">In the **Cluster Core Resources** section, right-click **Name: Cluster1**, and then click **Bring Online**.</span></span> <span data-ttu-id="ae654-413">Zaczekaj, aż oba zasoby są w trybie online.</span><span class="sxs-lookup"><span data-stu-id="ae654-413">Wait until both resources are online.</span></span> <span data-ttu-id="ae654-414">Gdy zasób Nazwa klastra do trybu online, z serwerem kontrolera jest aktualizowana o nowe konto komputera usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="ae654-414">When the cluster name resource comes online, the DC server is updated with a new Active Directory computer account.</span></span> <span data-ttu-id="ae654-415">To konto usługi Active Directory będzie służyć do uruchamiania usługi w klastrze grupy dostępności później.</span><span class="sxs-lookup"><span data-stu-id="ae654-415">This Active Directory account will be used to run the availability group clustered service later.</span></span>
10. <span data-ttu-id="ae654-416">Dodaj pozostałe węzły do klastra.</span><span class="sxs-lookup"><span data-stu-id="ae654-416">Add the remaining nodes to the cluster.</span></span> <span data-ttu-id="ae654-417">W drzewie przeglądarki, kliknij prawym przyciskiem myszy **Cluster1.corp.contoso.com**, a następnie kliknij przycisk **Dodaj węzeł**, jak pokazano na poniższym zrzucie ekranu.</span><span class="sxs-lookup"><span data-stu-id="ae654-417">In the browser tree, right-click **Cluster1.corp.contoso.com**, and then click **Add Node**, as shown in the following screenshot.</span></span>
    
     ![Dodaj węzeł do klastra](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784634.png)
11. <span data-ttu-id="ae654-419">W **Kreatora dodawania węzłów**, kliknij przycisk **dalej** na **Wybieranie serwerów** Dodaj **ContosoSQL2** i **ContosoWSFCNode** do listy, wpisując nazwę serwera w **wprowadź nazwę serwera** , a następnie klikając polecenie **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="ae654-419">In the **Add Node Wizard**, click **Next** on the **Select Servers** page, add **ContosoSQL2** and **ContosoWSFCNode** to the list by typing the server name in **Enter server name** and then clicking **Add**.</span></span> <span data-ttu-id="ae654-420">Gdy wszystko będzie gotowe, kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="ae654-420">When you are done, click **Next**.</span></span>
12. <span data-ttu-id="ae654-421">Na **ostrzeżenie dotyczące sprawdzania poprawności** kliknij przycisk **nr**, mimo że w środowisku produkcyjnym, należy wykonać testy sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="ae654-421">On the **Validation Warning** page, click **No**, although in a production scenario, you should perform the validation tests.</span></span> <span data-ttu-id="ae654-422">Następnie kliknij przycisk **Dalej**.</span><span class="sxs-lookup"><span data-stu-id="ae654-422">Then, click **Next**.</span></span>
13. <span data-ttu-id="ae654-423">Na **potwierdzenie** kliknij przycisk **dalej** można dodać węzłów.</span><span class="sxs-lookup"><span data-stu-id="ae654-423">On the **Confirmation** page, click **Next** to add the nodes.</span></span>
    
    > [!WARNING]
    > <span data-ttu-id="ae654-424">Jeśli używasz [miejsca do magazynowania](https://technet.microsoft.com/library/hh831739), który grupuje wiele dysków w pule magazynu, należy wyczyścić **Dodaj wszystkie odpowiednie magazyny do klastra** pole wyboru.</span><span class="sxs-lookup"><span data-stu-id="ae654-424">If you are using [Storage Spaces](https://technet.microsoft.com/library/hh831739), which groups multiple disks into storage pools, you must clear the **Add all eligible storage to the cluster** check box.</span></span> <span data-ttu-id="ae654-425">Jeśli ta opcja nie zostanie wyczyszczone, dyski wirtualne będzie można odłączyć podczas procesu klastrowania.</span><span class="sxs-lookup"><span data-stu-id="ae654-425">If you do not clear this option, the virtual disks will be detached during the clustering process.</span></span> <span data-ttu-id="ae654-426">W związku z tym również nie będą widoczne w Menedżera dysków lub Explorer dopóki miejsca do magazynowania są usuwane z klastra i ponownie nałożona przy użyciu programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ae654-426">As a result, they will also not appear in Disk Manager or Explorer until the storage spaces are removed from cluster and reattached using PowerShell.</span></span>
    > 
    > 
14. <span data-ttu-id="ae654-427">Po dodaniu węzły do klastra, kliknij przycisk **Zakończ**.</span><span class="sxs-lookup"><span data-stu-id="ae654-427">After the nodes are added to the cluster, click **Finish**.</span></span> <span data-ttu-id="ae654-428">Czy klaster ma trzy węzły i wyświetlić je w Menedżerze klastra trybu failover powinna zostać wyświetlona **węzłów** kontenera.</span><span class="sxs-lookup"><span data-stu-id="ae654-428">Failover Cluster Manager should now show that your cluster has three nodes and list them in the **Nodes** container.</span></span>
15. <span data-ttu-id="ae654-429">Wyloguj się z sesji usług pulpitu zdalnego.</span><span class="sxs-lookup"><span data-stu-id="ae654-429">Sign out of the remote desktop session.</span></span>

## <a name="prepare-the-sql-server-instances-for-availability-groups"></a><span data-ttu-id="ae654-430">Przygotowanie wystąpień programu SQL Server do grupy dostępności</span><span class="sxs-lookup"><span data-stu-id="ae654-430">Prepare the SQL Server instances for availability groups</span></span>
<span data-ttu-id="ae654-431">W tej sekcji będzie wykonywać następujące czynności na obu **ContosoSQL1** i **contosoSQL2**:</span><span class="sxs-lookup"><span data-stu-id="ae654-431">In this section, you will do the following on both **ContosoSQL1** and **contosoSQL2**:</span></span>

* <span data-ttu-id="ae654-432">Dodaj dane logowania dla **NT AUTHORITY\System** z niezbędne uprawnienia ustawione na domyślne wystąpienie programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ae654-432">Add a login for **NT AUTHORITY\System** with necessary permissions set to the default SQL Server instance.</span></span>
* <span data-ttu-id="ae654-433">Dodaj **CORP\Install** jako rola administratora systemu do domyślnego wystąpienia programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ae654-433">Add **CORP\Install** as a sysadmin role to the default SQL Server instance.</span></span>
* <span data-ttu-id="ae654-434">Otwórz Zaporę dostępu zdalnego programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ae654-434">Open the firewall for remote access of SQL Server.</span></span>
* <span data-ttu-id="ae654-435">Włącz zawsze włączone grupy funkcji dostępności.</span><span class="sxs-lookup"><span data-stu-id="ae654-435">Enable the Always On availability groups feature.</span></span>
* <span data-ttu-id="ae654-436">Zmień konto usługi programu SQL Server, które **CORP\SQLSvc1** i **CORP\SQLSvc2**odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="ae654-436">Change the SQL Server service account to **CORP\SQLSvc1** and **CORP\SQLSvc2**, respectively.</span></span>

<span data-ttu-id="ae654-437">Te akcje można wykonać w dowolnej kolejności.</span><span class="sxs-lookup"><span data-stu-id="ae654-437">These actions can be performed in any order.</span></span> <span data-ttu-id="ae654-438">Niemniej jednak poniższe kroki przeprowadzi je w kolejności.</span><span class="sxs-lookup"><span data-stu-id="ae654-438">Nevertheless, the following steps will walk through them in order.</span></span> <span data-ttu-id="ae654-439">Postępuj zgodnie z instrukcjami dla obu **ContosoSQL1** i **ContosoSQL2**:</span><span class="sxs-lookup"><span data-stu-id="ae654-439">Follow the steps for both **ContosoSQL1** and **ContosoSQL2**:</span></span>

1. <span data-ttu-id="ae654-440">Jeśli nie nastąpiło wylogowanie sesji usług pulpitu zdalnego dla maszyny wirtualnej, należy to zrobić teraz.</span><span class="sxs-lookup"><span data-stu-id="ae654-440">If you have not signed out of the remote desktop session for the virtual machine, do so now.</span></span>
2. <span data-ttu-id="ae654-441">Otwieranie plików protokołu RDP dla **ContosoSQL1** i **ContosoSQL2**i zaloguj się jako **BUILTIN\AzureAdmin**.</span><span class="sxs-lookup"><span data-stu-id="ae654-441">Open the RDP files for **ContosoSQL1** and **ContosoSQL2**, and sign in as **BUILTIN\AzureAdmin**.</span></span>
3. <span data-ttu-id="ae654-442">Dodaj **NT AUTHORITY\System** do logowania do programu SQL Server z niezbędne uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="ae654-442">Add **NT AUTHORITY\System** to the SQL Server logins with necessary permissions.</span></span> <span data-ttu-id="ae654-443">Otwórz program **SQL Server Management Studio**.</span><span class="sxs-lookup"><span data-stu-id="ae654-443">Open **SQL Server Management Studio**.</span></span>
4. <span data-ttu-id="ae654-444">Kliknij przycisk **Connect** nawiązać połączenia z domyślnego wystąpienia programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ae654-444">Click **Connect** to connect to the default SQL Server instance.</span></span>
5. <span data-ttu-id="ae654-445">W **Eksplorator obiektów**, rozwiń węzeł **zabezpieczeń**, a następnie rozwiń węzeł **logowania**.</span><span class="sxs-lookup"><span data-stu-id="ae654-445">In **Object Explorer**, expand **Security**, and then expand **Logins**.</span></span>
6. <span data-ttu-id="ae654-446">Kliknij prawym przyciskiem myszy **NT AUTHORITY\System** logowania, a następnie kliknij przycisk **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="ae654-446">Right-click the **NT AUTHORITY\System** login, and then click **Properties**.</span></span>
7. <span data-ttu-id="ae654-447">Na **zabezpieczanych obiektów** strony dla serwera lokalnego, wybierz opcję **Grant** następujące uprawnienia, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="ae654-447">On the **Securables** page, for the local server, select **Grant** for the following permissions, and then click **OK**.</span></span>
   
   * <span data-ttu-id="ae654-448">Instrukcja ALTER żadnej grupy dostępności</span><span class="sxs-lookup"><span data-stu-id="ae654-448">Alter any availability group</span></span>
   * <span data-ttu-id="ae654-449">Połączenia SQL</span><span class="sxs-lookup"><span data-stu-id="ae654-449">Connect SQL</span></span>
   * <span data-ttu-id="ae654-450">Widok stanu serwera</span><span class="sxs-lookup"><span data-stu-id="ae654-450">View server state</span></span>
8. <span data-ttu-id="ae654-451">Dodaj **CORP\Install** jako **sysadmin** roli do domyślnego wystąpienia programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ae654-451">Add **CORP\Install** as a **sysadmin** role to the default SQL Server instance.</span></span> <span data-ttu-id="ae654-452">W **Eksplorator obiektów**, kliknij prawym przyciskiem myszy **logowania**, a następnie kliknij przycisk **nowe dane logowania**.</span><span class="sxs-lookup"><span data-stu-id="ae654-452">In **Object Explorer**, right-click **Logins**, and then click **New Login**.</span></span>
9. <span data-ttu-id="ae654-453">Typ **CORP\Install** w **nazwa logowania**.</span><span class="sxs-lookup"><span data-stu-id="ae654-453">Type **CORP\Install** in **Login name**.</span></span>
10. <span data-ttu-id="ae654-454">Na **ról serwera** wybierz pozycję **sysadmin**, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="ae654-454">On the **Server Roles** page, select **sysadmin**, and then click **OK**.</span></span> <span data-ttu-id="ae654-455">Po utworzeniu nazwy logowania, można to sprawdzić rozwijając **logowania** w **Eksplorator obiektów**.</span><span class="sxs-lookup"><span data-stu-id="ae654-455">After you create the login, you can see it by expanding **Logins** in **Object Explorer**.</span></span>
11. <span data-ttu-id="ae654-456">Aby utworzyć regułę zapory dla programu SQL Server na **Start** ekranu, otwórz **Zapora systemu Windows z zabezpieczeniami zaawansowanymi**.</span><span class="sxs-lookup"><span data-stu-id="ae654-456">To create a firewall rule for SQL Server, on the **Start** screen, open **Windows Firewall with Advanced Security**.</span></span>
12. <span data-ttu-id="ae654-457">W okienku po lewej stronie wybierz **reguły ruchu przychodzącego**.</span><span class="sxs-lookup"><span data-stu-id="ae654-457">In the left pane, select **Inbound Rules**.</span></span> <span data-ttu-id="ae654-458">W okienku po prawej stronie kliknij **nową regułę**.</span><span class="sxs-lookup"><span data-stu-id="ae654-458">In the right pane, click **New Rule**.</span></span>
13. <span data-ttu-id="ae654-459">Na **typ reguły** kliknij przycisk **Program** > **dalej**.</span><span class="sxs-lookup"><span data-stu-id="ae654-459">On the **Rule Type** page, click **Program** > **Next**.</span></span>
14. <span data-ttu-id="ae654-460">Na **Program** wybierz pozycję **ta ścieżka programu**, typ **%ProgramFiles%\Microsoft SQL Server\MSSQL12. MSSQLSERVER\MSSQL\Binn\sqlservr.exe** w polu tekstowym, a następnie kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="ae654-460">On the **Program** page, select **This program path**, type **%ProgramFiles%\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\Binn\sqlservr.exe** in the text box, and then click **Next**.</span></span> <span data-ttu-id="ae654-461">Jeśli po te kierunkach, ale przy użyciu programu SQL Server 2012, katalog programu SQL Server jest **MSSQL11. MSSQLSERVER**.</span><span class="sxs-lookup"><span data-stu-id="ae654-461">If you are following these directions but using SQL Server 2012, the SQL Server directory is **MSSQL11.MSSQLSERVER**.</span></span>
15. <span data-ttu-id="ae654-462">Na **akcji** Zachowaj **zezwalały na połączenie** zaznaczone, a następnie kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="ae654-462">On the **Action** page, keep **Allow the connection** selected, and then click **Next**.</span></span>
16. <span data-ttu-id="ae654-463">Na **profilu** Zaakceptuj ustawienia domyślne, a następnie kliknij pozycję **dalej**.</span><span class="sxs-lookup"><span data-stu-id="ae654-463">On the **Profile** page, accept the default settings, and then click **Next**.</span></span>
17. <span data-ttu-id="ae654-464">Na **nazwa** Określ nazwę reguły, takie jak **programu SQL Server (reguły programu)**w **nazwa** tekstu, a następnie kliknij przycisk **Zakończ**.</span><span class="sxs-lookup"><span data-stu-id="ae654-464">On the **Name** page, specify a rule name, such as **SQL Server (Program Rule)**, in the **Name** text box, then click **Finish**.</span></span>
18. <span data-ttu-id="ae654-465">Aby włączyć **zawsze włączonych grup dostępności** funkcji na **Start** ekranu, otwórz **SQL Server Configuration Manager**.</span><span class="sxs-lookup"><span data-stu-id="ae654-465">To enable the **Always On Availability Groups** feature, on the **Start** screen, open **SQL Server Configuration Manager**.</span></span>
19. <span data-ttu-id="ae654-466">W drzewie w przeglądarce kliknij **usług SQL Server**, kliknij prawym przyciskiem myszy **programu SQL Server (MSSQLSERVER)** usługi, a następnie kliknij przycisk **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="ae654-466">In the browser tree, click **SQL Server Services**, right-click the **SQL Server (MSSQLSERVER)** service, and then click **Properties**.</span></span>
20. <span data-ttu-id="ae654-467">Kliknij przycisk **zawsze na wysoką dostępność** wybierz opcję **Włącz zawsze włączone grupy dostępności**, jak pokazano w poniższym zrzucie ekranu, a następnie kliknij **Zastosuj**.</span><span class="sxs-lookup"><span data-stu-id="ae654-467">Click the **Always On High Availability** tab, select **Enable Always On Availability Groups**, as shown in the following screenshot, and then click **Apply**.</span></span> <span data-ttu-id="ae654-468">Kliknij przycisk **OK** w oknie dialogowym i czy nie zamykaj **właściwości** jeszcze — okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="ae654-468">Click **OK** in the dialog box, and do not close the **Properties** dialog box yet.</span></span> <span data-ttu-id="ae654-469">Po zmianie konta usługi zostanie uruchomiony ponownie usługę programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ae654-469">You will restart the SQL Server service after you change the service account.</span></span>
    
     ![Włącz zawsze na grupy dostępności](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665520.gif)
21. <span data-ttu-id="ae654-471">Aby zmienić konto usługi programu SQL Server, kliknij przycisk **logowanie** , wpisz **CORP\SQLSvc1** (dla **ContosoSQL1**) lub **CORP\SQLSvc2** (dla **ContosoSQL2**) w **nazwa konta**, wprowadź i Potwierdź hasło, a następnie kliknij **OK**.</span><span class="sxs-lookup"><span data-stu-id="ae654-471">To change the SQL Server service account, click the **Log On** tab, type **CORP\SQLSvc1** (for **ContosoSQL1**) or **CORP\SQLSvc2** (for **ContosoSQL2**) in **Account Name**, fill in and confirm the password, and then click **OK**.</span></span>
22. <span data-ttu-id="ae654-472">W wyświetlonym oknie dialogowym kliknij **tak** ponownie uruchomić usługę SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ae654-472">In the dialog box that opens, click **Yes** to restart the SQL Server service.</span></span> <span data-ttu-id="ae654-473">Po ponownym uruchomieniu usługi SQL Server, zmian tego wprowadzanych w **właściwości** obowiązują okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="ae654-473">After the SQL Server service restarts, changes that you made in the **Properties** dialog box are effective.</span></span>
23. <span data-ttu-id="ae654-474">Wyloguj się z maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="ae654-474">Sign out of the virtual machines.</span></span>

## <a name="create-the-availability-group"></a><span data-ttu-id="ae654-475">Utworzenie grupy dostępności</span><span class="sxs-lookup"><span data-stu-id="ae654-475">Create the availability group</span></span>
<span data-ttu-id="ae654-476">Teraz można przystąpić do konfigurowania grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="ae654-476">You are now ready to configure an availability group.</span></span> <span data-ttu-id="ae654-477">Poniżej znajdują się zarys będzie wykonywać:</span><span class="sxs-lookup"><span data-stu-id="ae654-477">Below is an outline of what you will do:</span></span>

* <span data-ttu-id="ae654-478">Utwórz nową bazę danych (**MyDB1**) na **ContosoSQL1**.</span><span class="sxs-lookup"><span data-stu-id="ae654-478">Create a new database (**MyDB1**) on **ContosoSQL1**.</span></span>
* <span data-ttu-id="ae654-479">Przełączyć pełnej kopii zapasowej i kopii zapasowej dziennika transakcji bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae654-479">Take both a full backup and a transaction log backup of the database.</span></span>
* <span data-ttu-id="ae654-480">Przywróć pełnego i kopii zapasowych do dziennika **ContosoSQL2** z **NORECOVERY** opcji.</span><span class="sxs-lookup"><span data-stu-id="ae654-480">Restore the full and log backups to **ContosoSQL2** with the **NORECOVERY** option.</span></span>
* <span data-ttu-id="ae654-481">Utworzenie grupy dostępności (**AG1**) z zatwierdzanie synchroniczne, automatycznej pracy awaryjnej i do odczytu replikach pomocniczych.</span><span class="sxs-lookup"><span data-stu-id="ae654-481">Create the availability group (**AG1**) with synchronous commit, automatic failover, and readable secondary replicas.</span></span>

### <a name="create-the-mydb1-database-on-contososql1"></a><span data-ttu-id="ae654-482">Utwórz bazę danych MyDB1 na ContosoSQL1</span><span class="sxs-lookup"><span data-stu-id="ae654-482">Create the MyDB1 database on ContosoSQL1</span></span>
1. <span data-ttu-id="ae654-483">Jeśli użytkownik ma już niepodpisana poza sesji pulpitu zdalnego dla **ContosoSQL1** i **ContosoSQL2**, zrób to teraz.</span><span class="sxs-lookup"><span data-stu-id="ae654-483">If you have not already signed out of the remote desktop sessions for **ContosoSQL1** and **ContosoSQL2**, do so now.</span></span>
2. <span data-ttu-id="ae654-484">Otwórz plik RDP dla **ContosoSQL1**i zaloguj się jako **CORP\Install**.</span><span class="sxs-lookup"><span data-stu-id="ae654-484">Open the RDP file for **ContosoSQL1**, and sign in as **CORP\Install**.</span></span>
3. <span data-ttu-id="ae654-485">W **Eksploratora plików**w obszarze **C:\\**, Utwórz katalog o nazwie **kopii zapasowej**.</span><span class="sxs-lookup"><span data-stu-id="ae654-485">In **File Explorer**, under **C:\\**, create a directory named **backup**.</span></span> <span data-ttu-id="ae654-486">Ten katalog użyje kopii zapasowej i przywracanie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae654-486">You will use this directory to back up and restore your database.</span></span>
4. <span data-ttu-id="ae654-487">Kliknij prawym przyciskiem myszy nowy katalog, wskaż pozycję **udostępniać**, a następnie kliknij przycisk **określone osoby**, jak pokazano na poniższym zrzucie ekranu.</span><span class="sxs-lookup"><span data-stu-id="ae654-487">Right-click the new directory, point to **Share with**, and then click **Specific people**, as shown in the following screenshot.</span></span>
   
    ![Tworzenie folderu kopii zapasowej](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665521.gif)
5. <span data-ttu-id="ae654-489">Dodaj **CORP\SQLSvc1**, a następnie nadaj **odczytu/zapisu** uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="ae654-489">Add **CORP\SQLSvc1**, and then give it the **Read/Write** permission.</span></span> <span data-ttu-id="ae654-490">Dodaj **CORP\SQLSvc2**, a następnie nadaj **odczytu** uprawnienia, jak pokazano na poniższym zrzucie ekranu, a następnie kliknij przycisk **udziału**.</span><span class="sxs-lookup"><span data-stu-id="ae654-490">Add **CORP\SQLSvc2**, and then give it the **Read** permission, as shown in the following screenshot, and then click **Share**.</span></span> <span data-ttu-id="ae654-491">Po zakończeniu procesu udostępniania plików, kliknij przycisk **gotowe**.</span><span class="sxs-lookup"><span data-stu-id="ae654-491">After the file-sharing process is finished, click **Done**.</span></span>
   
    ![Udzielanie uprawnień dla folderu kopii zapasowej](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665522.gif)
6. <span data-ttu-id="ae654-493">Utworzyć bazę danych, z **Start** menu, otwórz **programu SQL Server Management Studio**, a następnie kliknij przycisk **Connect** nawiązać połączenia z domyślnego wystąpienia programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ae654-493">To create the database, from the **Start** menu, open **SQL Server Management Studio**, and then click **Connect** to connect to the default SQL Server instance.</span></span>
7. <span data-ttu-id="ae654-494">W **Eksplorator obiektów**, kliknij prawym przyciskiem myszy **baz danych**, a następnie kliknij przycisk **nową bazę danych**.</span><span class="sxs-lookup"><span data-stu-id="ae654-494">In **Object Explorer**, right-click **Databases**, and then click **New Database**.</span></span>
8. <span data-ttu-id="ae654-495">W **Nazwa bazy danych**, typ **MyDB1**, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="ae654-495">In **Database name**, type **MyDB1**, and then click **OK**.</span></span>

### <a name="make-a-full-backup-of-mydb1-and-restore-it-on-contososql2"></a><span data-ttu-id="ae654-496">Utwórz kopię zapasową MyDB1 pełne i przywróć ją na ContosoSQL2</span><span class="sxs-lookup"><span data-stu-id="ae654-496">Make a full backup of MyDB1 and restore it on ContosoSQL2</span></span>
1. <span data-ttu-id="ae654-497">Pełnej kopii zapasowej bazy danych, aby w **Eksplorator obiektów**, rozwiń węzeł **baz danych**, kliknij prawym przyciskiem myszy **MyDB1**, wskaż **zadania**, a następnie kliknij przycisk **kopię zapasową**.</span><span class="sxs-lookup"><span data-stu-id="ae654-497">To make a full backup of the database, in **Object Explorer**, expand **Databases**, right-click **MyDB1**, point to **Tasks**, and then click **Back Up**.</span></span>
2. <span data-ttu-id="ae654-498">W **źródła** sekcji, Zachowaj **typ kopii zapasowej** ustawioną **pełne**.</span><span class="sxs-lookup"><span data-stu-id="ae654-498">In the **Source** section, keep **Backup type** set to **Full**.</span></span> <span data-ttu-id="ae654-499">W **docelowego** kliknij **Usuń** usunąć domyślna ścieżka pliku dla pliku kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="ae654-499">In the **Destination** section, click **Remove** to remove the default file path for the backup file.</span></span>
3. <span data-ttu-id="ae654-500">W **docelowego** kliknij **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="ae654-500">In the **Destination** section, click **Add**.</span></span>
4. <span data-ttu-id="ae654-501">W **nazwę pliku** polu tekstowym  **\\ContosoSQL1\backup\MyDB1.bak**, kliknij przycisk **OK**, a następnie kliknij przycisk **OK** ponownie, aby utworzyć kopię zapasową bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae654-501">In the **File name** text box, type **\\ContosoSQL1\backup\MyDB1.bak**, click **OK**, and then click **OK** again to back up the database.</span></span> <span data-ttu-id="ae654-502">Po zakończeniu operacji tworzenia kopii zapasowej, kliknij **OK** ponownie, aby zamknąć okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="ae654-502">When the backup operation finishes, click **OK** again to close the dialog box.</span></span>
5. <span data-ttu-id="ae654-503">Kopię zapasową dziennika transakcji bazy danych, aby w **Eksplorator obiektów**, rozwiń węzeł **baz danych**, kliknij prawym przyciskiem myszy **MyDB1**, wskaż **zadania**, a następnie kliknij przycisk **kopię zapasową**.</span><span class="sxs-lookup"><span data-stu-id="ae654-503">To make a transaction log backup of the database, in **Object Explorer**, expand **Databases**, right-click **MyDB1**, point to **Tasks**, and then click **Back Up**.</span></span>
6. <span data-ttu-id="ae654-504">W **typ kopii zapasowej**, wybierz pozycję **dziennika transakcji**.</span><span class="sxs-lookup"><span data-stu-id="ae654-504">In **Backup type**, select **Transaction Log**.</span></span> <span data-ttu-id="ae654-505">Zachowaj **docelowego** pliku ścieżka zestawu do jednego określone wcześniej, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="ae654-505">Keep the **Destination** file path set to the one you specified earlier, and then click **OK**.</span></span> <span data-ttu-id="ae654-506">Po zakończeniu operacji tworzenia kopii zapasowej, kliknij przycisk **OK** ponownie.</span><span class="sxs-lookup"><span data-stu-id="ae654-506">After the backup operation finishes, click **OK** again.</span></span>
7. <span data-ttu-id="ae654-507">Aby przywrócić transakcji i pełnej kopii zapasowych dziennika **ContosoSQL2**, otwórz plik RDP dla **ContosoSQL2**i zaloguj się jako **CORP\Install**.</span><span class="sxs-lookup"><span data-stu-id="ae654-507">To restore the full and transaction log backups on **ContosoSQL2**, open the RDP file for **ContosoSQL2**, and sign in as **CORP\Install**.</span></span> <span data-ttu-id="ae654-508">Pozostaw sesji usług pulpitu zdalnego dla **ContosoSQL1** otworzyć.</span><span class="sxs-lookup"><span data-stu-id="ae654-508">Leave the remote desktop session for **ContosoSQL1** open.</span></span>
8. <span data-ttu-id="ae654-509">Z **Start** menu, otwórz **programu SQL Server Management Studio**, a następnie kliknij przycisk **Connect** nawiązać połączenia z domyślnego wystąpienia programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ae654-509">From the **Start** menu, open **SQL Server Management Studio**, and then click **Connect** to connect to the default SQL Server instance.</span></span>
9. <span data-ttu-id="ae654-510">W **Eksplorator obiektów**, kliknij prawym przyciskiem myszy **baz danych**, a następnie kliknij przycisk **Restore Database**.</span><span class="sxs-lookup"><span data-stu-id="ae654-510">In **Object Explorer**, right-click **Databases**, and then click **Restore Database**.</span></span>
10. <span data-ttu-id="ae654-511">W **źródła** zaznacz **urządzenia**i kliknij przycisk wielokropka **...**</span><span class="sxs-lookup"><span data-stu-id="ae654-511">In the **Source** section, select **Device**, and click the ellipsis **…**</span></span> <span data-ttu-id="ae654-512">Dodaj...</span><span class="sxs-lookup"><span data-stu-id="ae654-512">button.</span></span>
11. <span data-ttu-id="ae654-513">W **wybierz urządzenia kopii zapasowej**, kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="ae654-513">In **Select backup devices**, click **Add**.</span></span>
12. <span data-ttu-id="ae654-514">W **lokalizacja pliku kopii zapasowej**, typ  **\\ContosoSQL1\backup**, kliknij przycisk **Odśwież**, wybierz pozycję **MyDB1.bak**, kliknij przycisk **OK**, a następnie kliknij przycisk **OK** ponownie.</span><span class="sxs-lookup"><span data-stu-id="ae654-514">In **Backup file location**, type **\\ContosoSQL1\backup**, click **Refresh**, select **MyDB1.bak**, click **OK**, and then click **OK** again.</span></span> <span data-ttu-id="ae654-515">Powinien zostać wyświetlony pełnej kopii zapasowej i kopii zapasowej dziennika w **zestawy kopii zapasowych do przywrócenia** okienka.</span><span class="sxs-lookup"><span data-stu-id="ae654-515">You should now see the full backup and the log backup in the **Backup sets to restore** pane.</span></span>
13. <span data-ttu-id="ae654-516">Przejdź do **opcje** wybierz pozycję **PRZYWRÓCIĆ WITH NORECOVERY** w **stan odzyskiwania**, a następnie kliknij przycisk **OK** przywrócenie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae654-516">Go to the **Options** page, select **RESTORE WITH NORECOVERY** in **Recovery state**, and then click **OK** to restore the database.</span></span> <span data-ttu-id="ae654-517">Po zakończeniu operacji przywracania, kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="ae654-517">After the restore operation finishes, click **OK**.</span></span>

### <a name="create-the-availability-group"></a><span data-ttu-id="ae654-518">Utworzenie grupy dostępności</span><span class="sxs-lookup"><span data-stu-id="ae654-518">Create the availability group</span></span>
1. <span data-ttu-id="ae654-519">Wróć do sesji pulpitu zdalnego dla **ContosoSQL1**.</span><span class="sxs-lookup"><span data-stu-id="ae654-519">Go back to the remote desktop session for **ContosoSQL1**.</span></span> <span data-ttu-id="ae654-520">W **Eksplorator obiektów** w programu SQL Server Management Studio, kliknij prawym przyciskiem myszy **zawsze na wysoką dostępność**, a następnie kliknij przycisk **Kreatora nowej grupy dostępności**, jak pokazano na poniższym zrzucie ekranu.</span><span class="sxs-lookup"><span data-stu-id="ae654-520">In **Object Explorer** in SQL Server Management Studio, right-click **Always On High Availability**, and then click **New Availability Group Wizard**, as shown in the following screenshot.</span></span>
   
    ![Uruchom Kreatora nowej grupy dostępności](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665523.gif)
2. <span data-ttu-id="ae654-522">Na **wprowadzenie** kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="ae654-522">On the **Introduction** page, click **Next**.</span></span> <span data-ttu-id="ae654-523">Na **Określ nazwę grupy dostępności** wpisz **AG1** w **Nazwa grupy dostępności**, następnie kliknij przycisk **dalej** ponownie.</span><span class="sxs-lookup"><span data-stu-id="ae654-523">On the **Specify Availability Group Name** page, type **AG1** in **Availability group name**, then click **Next** again.</span></span>
   
    ![Kreatora nowej grupy dostępności, nazwa grupy dostępności Określ](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665524.gif)
3. <span data-ttu-id="ae654-525">Na **wybierz baz danych** wybierz **MyDB1**, a następnie kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="ae654-525">On the **Select Databases** page, select **MyDB1**, and then click **Next**.</span></span> <span data-ttu-id="ae654-526">Bazy danych spełnia wymagania wstępne grupy dostępności, ponieważ co najmniej jedną pełną kopię zapasową wykonano w zamierzonej replice podstawowej.</span><span class="sxs-lookup"><span data-stu-id="ae654-526">The database meets the prerequisites for an availability group because you have taken at least one full backup on the intended primary replica.</span></span>
   
    ![Kreatora nowej grupy Availabilty, wybierz opcję baz danych](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665525.gif)
4. <span data-ttu-id="ae654-528">na **Określanie replik** kliknij przycisk **dodać repliki**.</span><span class="sxs-lookup"><span data-stu-id="ae654-528">on the **Specify Replicas** page, click **Add Replica**.</span></span>
   
    ![Kreatora nowej grupy Availabilty, określ repliki](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665526.gif)
5. <span data-ttu-id="ae654-530">W **Połącz z serwerem** okno dialogowe, typ **ContosoSQL2** w **nazwy serwera**, a następnie kliknij przycisk **Connect**.</span><span class="sxs-lookup"><span data-stu-id="ae654-530">In the **Connect to Server** dialog box, type **ContosoSQL2** in **Server name**, and then click **Connect**.</span></span>
   
    ![Nowa grupa Availabilty kreatora Połącz z serwerem](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665527.gif)
6. <span data-ttu-id="ae654-532">Ponownie **Określanie replik** strony, powinien zostać wyświetlony **ContosoSQL2** na liście **replik dostępności**.</span><span class="sxs-lookup"><span data-stu-id="ae654-532">Back on the **Specify Replicas** page, you should now see **ContosoSQL2** listed in **Available Replicas**.</span></span> <span data-ttu-id="ae654-533">Konfigurowanie replik, jak pokazano na poniższym zrzucie ekranu.</span><span class="sxs-lookup"><span data-stu-id="ae654-533">Configure the replicas as shown in the following screenshot.</span></span> <span data-ttu-id="ae654-534">Gdy skończysz, kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="ae654-534">When you are finished, click **Next**.</span></span>
   
    ![Kreatora nowej grupy Availabilty, określ repliki (Zakończ)](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665528.gif)
7. <span data-ttu-id="ae654-536">Na **Wybierz początkową synchronizację danych** wybierz **tylko Dołącz**, a następnie kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="ae654-536">On the **Select Initial Data Synchronization** page, select **Join only**, and then click **Next**.</span></span> <span data-ttu-id="ae654-537">Już wykonanego synchronizacji danych ręcznie wprowadzone transakcji i pełne kopie zapasowe na **ContosoSQL1** i przywrócić je na **ContosoSQL2**.</span><span class="sxs-lookup"><span data-stu-id="ae654-537">You already performed data synchronization manually when you made the full and transaction backups on **ContosoSQL1** and restored them on **ContosoSQL2**.</span></span> <span data-ttu-id="ae654-538">Użytkownik może nie kopii zapasowej i przywracanie operacji w bazie danych, a zamiast tego wybrać **pełne** możliwość przeprowadzenia synchronizacji danych można Kreatora nowej grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="ae654-538">You can choose not to perform the backup and restore operations on your database and instead select **Full** to let the New Availability Group Wizard perform data synchronization for you.</span></span> <span data-ttu-id="ae654-539">Jednak zaleca się tę opcję dla bardzo dużych baz danych, które znajdują się w niektóre przedsiębiorstwa.</span><span class="sxs-lookup"><span data-stu-id="ae654-539">However, we do not recommend this option for very large databases that are found in some enterprises.</span></span>
   
    ![Kreator nowej grupy Availabilty, wybierz początkową synchronizację danych](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665529.gif)
8. <span data-ttu-id="ae654-541">Na **weryfikacji** kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="ae654-541">On the **Validation** page, click **Next**.</span></span> <span data-ttu-id="ae654-542">Ta strona powinna wyglądać podobnie do Poniższy zrzut ekranu.</span><span class="sxs-lookup"><span data-stu-id="ae654-542">This page should look similar to the following screenshot.</span></span> <span data-ttu-id="ae654-543">Jest ostrzeżenie w konfiguracji odbiornika, ponieważ nie skonfigurowano odbiornik grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="ae654-543">There is a warning for the listener configuration because you have not configured an availability group listener.</span></span> <span data-ttu-id="ae654-544">Można zignorować to ostrzeżenie, ponieważ w tym samouczku nie konfiguruje odbiornik.</span><span class="sxs-lookup"><span data-stu-id="ae654-544">You can ignore this warning, because this tutorial does not configure a listener.</span></span> <span data-ttu-id="ae654-545">Aby skonfigurować odbiornik, po ukończeniu tego samouczka, zobacz [skonfigurować odbiornik ILB dla zawsze włączonych grup dostępności na platformie Azure](../classic/ps-sql-int-listener.md).</span><span class="sxs-lookup"><span data-stu-id="ae654-545">To configure the listener after you complete this tutorial, see [Configure an ILB listener for Always On Availability Groups in Azure](../classic/ps-sql-int-listener.md).</span></span>
   
    ![Availabilty Kreatora nowej grupy sprawdzania poprawności](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665530.gif)
9. <span data-ttu-id="ae654-547">Na **Podsumowanie** kliknij przycisk **Zakończ**, a następnie zaczekaj, aż Kreator skonfiguruje nową grupę dostępności.</span><span class="sxs-lookup"><span data-stu-id="ae654-547">On the **Summary** page, click **Finish**, and then wait while the wizard configures the new availability group.</span></span> <span data-ttu-id="ae654-548">Na **postępu** strony, możesz kliknąć **szczegółowe** Aby wyświetlić szczegółowe informacje o postępie.</span><span class="sxs-lookup"><span data-stu-id="ae654-548">On the **Progress** page, you can click **More details** to view the detailed progress.</span></span> <span data-ttu-id="ae654-549">Po zakończeniu pracy kreatora, należy sprawdzić **wyniki** Aby sprawdzić, czy grupa dostępności została pomyślnie utworzona, jak pokazano na poniższym zrzucie ekranu, a następnie kliknij przycisk **Zamknij** aby zakończyć pracę kreatora.</span><span class="sxs-lookup"><span data-stu-id="ae654-549">After the wizard finishes, inspect the **Results** page to verify that the availability group is successfully created, as shown in the following screenshot, and then click **Close** to exit the wizard.</span></span>
   
    ![Availabilty Kreatora nowej grupy wyników](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665531.gif)
10. <span data-ttu-id="ae654-551">W **Eksplorator obiektów**, rozwiń węzeł **zawsze na wysoką dostępność**, a następnie rozwiń węzeł **grup dostępności**.</span><span class="sxs-lookup"><span data-stu-id="ae654-551">In **Object Explorer**, expand **Always On High Availability**, and then expand **Availability Groups**.</span></span> <span data-ttu-id="ae654-552">Powinna zostać wyświetlona nowej grupy dostępności w tym kontenerze.</span><span class="sxs-lookup"><span data-stu-id="ae654-552">You should now see the new availability group in this container.</span></span> <span data-ttu-id="ae654-553">Kliknij prawym przyciskiem myszy **AG1 (podstawowe)**, a następnie kliknij przycisk **Pokaż pulpit nawigacyjny**.</span><span class="sxs-lookup"><span data-stu-id="ae654-553">Right-click **AG1 (Primary)**, and then click **Show Dashboard**.</span></span>
    
     ![Pokaż grupy dostępności pulpitu nawigacyjnego](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665532.gif)
11. <span data-ttu-id="ae654-555">Twoje **zawsze na pulpicie nawigacyjnym** powinien być podobny do przedstawionego na poniższym zrzucie ekranu.</span><span class="sxs-lookup"><span data-stu-id="ae654-555">Your **Always On Dashboard** should look similar to the one in the following screenshot.</span></span> <span data-ttu-id="ae654-556">Widać replik, tryb pracy awaryjnej każdej repliki i stan synchronizacji.</span><span class="sxs-lookup"><span data-stu-id="ae654-556">You can see the replicas, the failover mode of each replica, and the synchronization state.</span></span>
    
     ![Pulpit nawigacyjny grupy dostępności](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665533.gif)
12. <span data-ttu-id="ae654-558">Wróć do **Menedżera serwera**, kliknij przycisk **narzędzia**, a następnie otwórz **Menedżera klastra trybu Failover**.</span><span class="sxs-lookup"><span data-stu-id="ae654-558">Return to **Server Manager**, click **Tools**, and then open **Failover Cluster Manager**.</span></span>
13. <span data-ttu-id="ae654-559">Rozwiń węzeł **Cluster1.corp.contoso.com**, a następnie rozwiń węzeł **usługi i aplikacje**.</span><span class="sxs-lookup"><span data-stu-id="ae654-559">Expand **Cluster1.corp.contoso.com**, and then expand **Services and applications**.</span></span> <span data-ttu-id="ae654-560">Wybierz **ról** i należy pamiętać, że **AG1** rola grupy dostępności została utworzona.</span><span class="sxs-lookup"><span data-stu-id="ae654-560">Select **Roles** and note that the **AG1** availability group role has been created.</span></span> <span data-ttu-id="ae654-561">Należy pamiętać, że AG1 nie ma adresu IP przez bazę danych, która klienci mogą łączyć się z grupy dostępności, ponieważ nie może skonfigurować odbiornik.</span><span class="sxs-lookup"><span data-stu-id="ae654-561">Note that AG1 does not have an IP address by which database clients can connect to the availability group, because you did not configure a listener.</span></span> <span data-ttu-id="ae654-562">Można połączyć się bezpośrednio do węzła podstawowego dla operacji odczytu i zapisu i węzła pomocniczego dla zapytań tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="ae654-562">You can connect directly to the primary node for read-write operations and the secondary node for read-only queries.</span></span>
    
     ![W Menedżerze klastra trybu Failover grupy dostępności](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665534.gif)

> [!WARNING]
> <span data-ttu-id="ae654-564">Nie należy próbować awaryjnie grupy dostępności z Menedżera klastra pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="ae654-564">Do not try to fail over the availability group from the Failover Cluster Manager.</span></span> <span data-ttu-id="ae654-565">Należy wykonać wszystkie operacje trybu failover z poziomu **zawsze na pulpicie nawigacyjnym** w programie SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="ae654-565">All failover operations should be performed from within **Always On Dashboard** in SQL Server Management Studio.</span></span> <span data-ttu-id="ae654-566">Aby uzyskać więcej informacji, zobacz [ograniczenia na przy użyciu Menedżera klastra trybu Failover z grupami dostępności](https://msdn.microsoft.com/library/ff929171.aspx).</span><span class="sxs-lookup"><span data-stu-id="ae654-566">For more information, see [Restrictions on Using The Failover Cluster Manager with Availability Groups](https://msdn.microsoft.com/library/ff929171.aspx).</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="ae654-567">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="ae654-567">Next steps</span></span>
<span data-ttu-id="ae654-568">Możesz teraz pomyślnie wdrożono programu SQL Server AlwaysOn przez utworzenie grupy dostępności na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="ae654-568">You have now successfully implemented SQL Server Always On by creating an availability group in Azure.</span></span> <span data-ttu-id="ae654-569">Aby skonfigurować odbiornik grupy dostępności, zobacz [skonfigurować odbiornik ILB dla zawsze włączonych grup dostępności na platformie Azure](../classic/ps-sql-int-listener.md).</span><span class="sxs-lookup"><span data-stu-id="ae654-569">To configure a listener for this availability group, see [Configure an ILB listener for Always On availability groups in Azure](../classic/ps-sql-int-listener.md).</span></span>

<span data-ttu-id="ae654-570">Aby uzyskać inne informacje o korzystaniu z programu SQL Server na platformie Azure, zobacz [programu SQL Server na maszynach wirtualnych Azure](../sql/virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="ae654-570">For other information about using SQL Server in Azure, see [SQL Server on Azure Virtual Machines](../sql/virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

