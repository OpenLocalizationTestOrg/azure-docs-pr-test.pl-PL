---
title: "aaaUse FreeBSD filtr pakietów toocreate zapory na platformie Azure | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak toodeploy translatorem adresów Sieciowych zapory przy użyciu jego FreeBSD PF na platformie Azure."
services: virtual-machines-linux
documentationcenter: 
author: KylieLiang
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: virtual-machines-linux
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 02/20/2017
ms.author: kyliel
ms.openlocfilehash: 3d3a5dde2ca03ba6fc384581c786f5eb746e6d92
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="how-toouse-freebsds-packet-filter-toocreate-a-secure-firewall-in-azure"></a><span data-ttu-id="9e99a-103">Jak toouse FreeBSD filtr pakietów toocreate bezpiecznego zapory w systemie Azure</span><span class="sxs-lookup"><span data-stu-id="9e99a-103">How toouse FreeBSD's Packet Filter toocreate a secure firewall in Azure</span></span>
<span data-ttu-id="9e99a-104">W tym artykule przedstawiono sposób toodeploy zapory NAT. przy użyciu filtru pakujący FreeBSD firmy przy użyciu szablonu usługi Azure Resource Manager dla typowego scenariusza serwera sieci web.</span><span class="sxs-lookup"><span data-stu-id="9e99a-104">This article introduces how toodeploy a NAT firewall using FreeBSD’s Packer Filter through Azure Resource Manager template for common web server scenario.</span></span>

## <a name="what-is-pf"></a><span data-ttu-id="9e99a-105">Co to jest PF?</span><span class="sxs-lookup"><span data-stu-id="9e99a-105">What is PF?</span></span>
<span data-ttu-id="9e99a-106">PF (filtr pakietów równocześnie zapisywane pf) jest filtr licencjonowane pakietów BSD, centralnej części oprogramowanie zapory.</span><span class="sxs-lookup"><span data-stu-id="9e99a-106">PF (Packet Filter, also written pf) is a BSD licensed stateful packet filter, a central piece of software for firewalling.</span></span> <span data-ttu-id="9e99a-107">PF ponieważ powstał szybko, a teraz ma kilka zalet w porównaniu z innych dostępnych zapór.</span><span class="sxs-lookup"><span data-stu-id="9e99a-107">PF has since evolved quickly and now has several advantages over other available firewalls.</span></span> <span data-ttu-id="9e99a-108">Translatora adresów sieciowych (NAT) jest PF od pierwszego dnia, a następnie Harmonogram pakietów i zarządzania active kolejki są integrowane PF, integrowanie hello ALTQ i co można skonfigurować za pomocą PF w konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="9e99a-108">Network Address Translation (NAT) is in PF since day one, then packet scheduler and active queue management have been integrated into PF, by integrating hello ALTQ and making it configurable through PF's configuration.</span></span> <span data-ttu-id="9e99a-109">Funkcje, takie jak pfsync i protokołu CARP dla trybu failover i nadmiarowość, authpf dla sesji uwierzytelniania i ftp proxy tooease zapory hello trudne protokołu FTP, również rozszerzony PF.</span><span class="sxs-lookup"><span data-stu-id="9e99a-109">Features such as pfsync and CARP for failover and redundancy, authpf for session authentication, and ftp-proxy tooease firewalling hello difficult FTP protocol, have also extended PF.</span></span> <span data-ttu-id="9e99a-110">Krótko mówiąc PF jest wydajny i bogate zapory.</span><span class="sxs-lookup"><span data-stu-id="9e99a-110">In short, PF is a powerful and feature-rich firewall.</span></span> 

## <a name="get-started"></a><span data-ttu-id="9e99a-111">Rozpoczęcie pracy</span><span class="sxs-lookup"><span data-stu-id="9e99a-111">Get started</span></span>
<span data-ttu-id="9e99a-112">Jeśli planuje się skonfigurowanie bezpiecznego zapory w chmurze powitania dla serwerów sieci web, Zacznijmy od początku.</span><span class="sxs-lookup"><span data-stu-id="9e99a-112">If you are interested in setting up a secure firewall in hello cloud for your web servers, then let’s get started.</span></span> <span data-ttu-id="9e99a-113">Można także zastosować hello skryptom używanym w tym tooset szablonu usługi Azure Resource Manager zapasowej topologii sieci.</span><span class="sxs-lookup"><span data-stu-id="9e99a-113">You can also apply hello scripts used in this Azure Resource Manager template tooset up your networking topology.</span></span>
<span data-ttu-id="9e99a-114">Skonfiguruj maszynę wirtualną FreeBSD szablonu usługi Azure Resource Manager Hello wykonuje /redirection translatora adresów Sieciowych przy użyciu PF i dwie maszyny wirtualne FreeBSD z serwera sieci web Nginx hello zainstalowana i skonfigurowana.</span><span class="sxs-lookup"><span data-stu-id="9e99a-114">hello Azure Resource Manager template set up a FreeBSD virtual machine that performs NAT /redirection using PF and two FreeBSD virtual machines with hello Nginx web server installed and configured.</span></span> <span data-ttu-id="9e99a-115">Ponadto tooperforming translatora adresów Sieciowych dla dwóch serwerów sieci web hello wyjściowych ruchu, maszyny wirtualnej NAT/przekierowanie hello przechwytuje żądania HTTP i Przekierowanie toohello dwóch serwerów sieci web w okrężne.</span><span class="sxs-lookup"><span data-stu-id="9e99a-115">In addition tooperforming NAT for hello two web servers egress traffic, hello NAT/redirection virtual machine intercepts HTTP requests and redirect them toohello two web servers in round-robin fashion.</span></span> <span data-ttu-id="9e99a-116">Witaj sieci wirtualnej używa hello prywatnej bez obsługi routingu IP adres miejsca 10.0.0.2/24 i można zmodyfikować parametry hello hello szablonu.</span><span class="sxs-lookup"><span data-stu-id="9e99a-116">hello VNet uses hello private non-routable IP address space 10.0.0.2/24 and you can modify hello parameters of hello template.</span></span> <span data-ttu-id="9e99a-117">Szablon usługi Azure Resource Manager Hello definiuje również tabelę tras dla hello całej sieci wirtualnej, która jest kolekcją indywidualnych tras używane trasy domyślne Azure toooverride na podstawie hello docelowego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="9e99a-117">hello Azure Resource Manager template also defines a route table for hello whole VNet, which is a collection of individual routes used toooverride Azure default routes based on hello destination IP address.</span></span> 

![pf_topology](./media/freebsd-pf-nat/pf_topology.jpg)
    
### <a name="deploy-through-azure-cli"></a><span data-ttu-id="9e99a-119">Wdrażanie za pośrednictwem interfejsu wiersza polecenia platformy Azure</span><span class="sxs-lookup"><span data-stu-id="9e99a-119">Deploy through Azure CLI</span></span>
<span data-ttu-id="9e99a-120">Najnowsza wersja należy hello [Azure CLI 2.0](/cli/azure/install-az-cli2) zainstalowane i zarejestrowane za pomocą konta Azure tooan [logowania az](/cli/azure/#login).</span><span class="sxs-lookup"><span data-stu-id="9e99a-120">You need hello latest [Azure CLI 2.0](/cli/azure/install-az-cli2) installed and logged in tooan Azure account using [az login](/cli/azure/#login).</span></span> <span data-ttu-id="9e99a-121">Utwórz grupę zasobów za pomocą polecenia [az group create](/cli/azure/group#create).</span><span class="sxs-lookup"><span data-stu-id="9e99a-121">Create a resource group with [az group create](/cli/azure/group#create).</span></span> <span data-ttu-id="9e99a-122">Witaj poniższy przykład tworzy nazwę grupy zasobów `myResourceGroup` w hello `West US` lokalizacji.</span><span class="sxs-lookup"><span data-stu-id="9e99a-122">hello following example creates a resource group name `myResourceGroup` in hello `West US` location.</span></span>

```azurecli
az group create --name myResourceGroup --location westus
```

<span data-ttu-id="9e99a-123">Następnie należy wdrożyć szablon hello [pf freebsd Konfiguracja](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup) z [Utwórz wdrożenie grupy az](/cli/azure/group/deployment#create).</span><span class="sxs-lookup"><span data-stu-id="9e99a-123">Next, deploy hello template [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup) with [az group deployment create](/cli/azure/group/deployment#create).</span></span> <span data-ttu-id="9e99a-124">Pobierz [azuredeploy.parameters.json](https://github.com/Azure/azure-quickstart-templates/blob/master/pf-freebsd-setup/azuredeploy.parameters.json) w obszarze hello tej samej ścieżce i definiować własne wartości zasobów, takich jak `adminPassword`, `networkPrefix`, i `domainNamePrefix`.</span><span class="sxs-lookup"><span data-stu-id="9e99a-124">Download [azuredeploy.parameters.json](https://github.com/Azure/azure-quickstart-templates/blob/master/pf-freebsd-setup/azuredeploy.parameters.json) under hello same path and define your own resource values, such as `adminPassword`, `networkPrefix`, and `domainNamePrefix`.</span></span> 

```azurecli
az group deployment create --resource-group myResourceGroup --name myDeploymentName \
    --template-uri https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/pf-freebsd-setup/azuredeploy.json \
    --parameters '@azuredeploy.parameters.json' --verbose
```

<span data-ttu-id="9e99a-125">Po około pięciu minut, uzyskasz informacje hello `"provisioningState": "Succeeded"`.</span><span class="sxs-lookup"><span data-stu-id="9e99a-125">After about five minutes, you will get hello information of `"provisioningState": "Succeeded"`.</span></span> <span data-ttu-id="9e99a-126">Następnie możesz ssh frontonu toohello maszyny Wirtualnej (NAT) lub uzyskać dostępu do serwera sieci web Nginx w przeglądarce, za pomocą hello publicznego adresu IP lub nazwy FQDN usługi frontonu hello maszyny Wirtualnej (NAT).</span><span class="sxs-lookup"><span data-stu-id="9e99a-126">Then you can ssh toohello frontend VM (NAT) or access Nginx web server in a browser using hello public IP address or FQDN of hello frontend VM (NAT).</span></span> <span data-ttu-id="9e99a-127">Witaj poniższy przykład zawiera nazwy FQDN i publicznego adresu IP przypisanego toohello frontonu maszyny Wirtualnej (NAT) w hello `myResourceGroup` grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="9e99a-127">hello following example lists FQDN and public IP address that assigned toohello frontend VM (NAT) in hello `myResourceGroup` resource group.</span></span> 

```azurecli
az network public-ip list --resource-group myResourceGroup
```
    
## <a name="next-steps"></a><span data-ttu-id="9e99a-128">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="9e99a-128">Next steps</span></span>
<span data-ttu-id="9e99a-129">Czy chcesz tooset własny protokół NAT na platformie Azure?</span><span class="sxs-lookup"><span data-stu-id="9e99a-129">Do you want tooset up your own NAT in Azure?</span></span> <span data-ttu-id="9e99a-130">Open Source, bezpłatne, ale wydajne?</span><span class="sxs-lookup"><span data-stu-id="9e99a-130">Open Source, free but powerful?</span></span> <span data-ttu-id="9e99a-131">Następnie PF jest dobrym rozwiązaniem.</span><span class="sxs-lookup"><span data-stu-id="9e99a-131">Then PF is a good choice.</span></span> <span data-ttu-id="9e99a-132">Za pomocą szablonu hello [pf freebsd Konfiguracja](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup), wystarczy tooset pięć minut zapory NAT z obciążenia okrężnego równoważenia przy użyciu jego FreeBSD PF Azure typowy scenariusz serwera sieci web.</span><span class="sxs-lookup"><span data-stu-id="9e99a-132">By using hello template [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup), you only need five minutes tooset up a NAT firewall with round-robin load balancing using FreeBSD's PF in Azure for common web server scenario.</span></span> 

<span data-ttu-id="9e99a-133">Ofercie hello toolearn FreeBSD na platformie Azure, zapoznaj się zbyt[tooFreeBSD wprowadzenie na platformie Azure](freebsd-intro-on-azure.md).</span><span class="sxs-lookup"><span data-stu-id="9e99a-133">If you want toolearn hello offering of FreeBSD in Azure, refer too[introduction tooFreeBSD on Azure](freebsd-intro-on-azure.md).</span></span>

<span data-ttu-id="9e99a-134">Więcej informacji na temat PF tooknow, zapoznaj się zbyt[Podręcznik FreeBSD](https://www.freebsd.org/doc/handbook/firewalls-pf.html) lub [Podręcznik PF użytkownika](https://www.freebsd.org/doc/handbook/firewalls-pf.html).</span><span class="sxs-lookup"><span data-stu-id="9e99a-134">If you want tooknow more about PF, refer too[FreeBSD handbook](https://www.freebsd.org/doc/handbook/firewalls-pf.html) or [PF-User's Guide](https://www.freebsd.org/doc/handbook/firewalls-pf.html).</span></span>
