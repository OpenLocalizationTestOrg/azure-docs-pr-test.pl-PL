---
title: "Szczegółowe rozwiązywanie SSH dla maszyny Wirtualnej platformy Azure | Dokumentacja firmy Microsoft"
description: "Szczegółowe kroki rozwiązywania problemów dotyczących problemów nawiązywania połączenia z maszyny wirtualnej platformy Azure SSH"
keywords: "SSH połączenia zostało odrzucone, ssh błędu, platforma azure ssh, połączenia SSH nie powiodło się"
services: virtual-machines-linux
documentationcenter: 
author: iainfoulds
manager: timlt
editor: 
tags: top-support-issue,azure-service-management,azure-resource-manager
ms.assetid: b8e8be5f-e8a6-489d-9922-9df8de32e839
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: support-article
ms.date: 07/06/2017
ms.author: iainfou
ms.openlocfilehash: 9ccdb3fbca21264065eeb1c4e46314c62af4c2e8
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/03/2017
---
# <a name="detailed-ssh-troubleshooting-steps-for-issues-connecting-to-a-linux-vm-in-azure"></a><span data-ttu-id="54cc9-104">SSH szczegółowe kroki rozwiązywania problemów dotyczących problemów, połączenie z maszyną wirtualną systemu Linux na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="54cc9-104">Detailed SSH troubleshooting steps for issues connecting to a Linux VM in Azure</span></span>
<span data-ttu-id="54cc9-105">Istnieje wiele przyczyn, które klient SSH mogą nie być możliwe nawiązanie łączności usługi SSH na maszynie Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="54cc9-105">There are many possible reasons that the SSH client might not be able to reach the SSH service on the VM.</span></span> <span data-ttu-id="54cc9-106">Jeśli wykonano za pomocą bardziej [SSH ogólne kroki rozwiązywania problemów](troubleshoot-ssh-connection.md), należy rozwiązać problem z połączeniem.</span><span class="sxs-lookup"><span data-stu-id="54cc9-106">If you have followed through the more [general SSH troubleshooting steps](troubleshoot-ssh-connection.md), you need to further troubleshoot the connection issue.</span></span> <span data-ttu-id="54cc9-107">W tym artykule przedstawiono szczegółowe kroki rozwiązywania problemów, aby określić, gdzie kończy się niepowodzeniem połączenia SSH i sposobu rozwiązania go.</span><span class="sxs-lookup"><span data-stu-id="54cc9-107">This article guides you through detailed troubleshooting steps to determine where the SSH connection is failing and how to resolve it.</span></span>

## <a name="take-preliminary-steps"></a><span data-ttu-id="54cc9-108">Czynności wstępne</span><span class="sxs-lookup"><span data-stu-id="54cc9-108">Take preliminary steps</span></span>
<span data-ttu-id="54cc9-109">Na poniższym diagramie przedstawiono składniki, które nie są związane.</span><span class="sxs-lookup"><span data-stu-id="54cc9-109">The following diagram shows the components that are involved.</span></span>

![Diagram pokazujący składniki usługi SSH](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot1.png)

<span data-ttu-id="54cc9-111">Poniższe etapy ułatwiają wyizolować źródło problemu i ustalić rozwiązania lub obejścia.</span><span class="sxs-lookup"><span data-stu-id="54cc9-111">The following steps help you isolate the source of the failure and figure out solutions or workarounds.</span></span>

1. <span data-ttu-id="54cc9-112">Sprawdź stan maszyny Wirtualnej w portalu.</span><span class="sxs-lookup"><span data-stu-id="54cc9-112">Check the status of the VM in the portal.</span></span>
   <span data-ttu-id="54cc9-113">W [portalu Azure](https://portal.azure.com), wybierz pozycję **maszyn wirtualnych** > *nazwę maszyny Wirtualnej*.</span><span class="sxs-lookup"><span data-stu-id="54cc9-113">In the [Azure portal](https://portal.azure.com), select **Virtual machines** > *VM name*.</span></span>

   <span data-ttu-id="54cc9-114">Powinny być widoczne w okienku stanu dla maszyny Wirtualnej **systemem**.</span><span class="sxs-lookup"><span data-stu-id="54cc9-114">The status pane for the VM should show **Running**.</span></span> <span data-ttu-id="54cc9-115">Przewiń w dół do pokazania ostatniej aktywności dla zasobów obliczeniowych, magazynu i zasobów sieciowych.</span><span class="sxs-lookup"><span data-stu-id="54cc9-115">Scroll down to show recent activity for compute, storage, and network resources.</span></span>

2. <span data-ttu-id="54cc9-116">Wybierz **ustawienia** zbadanie punktów końcowych, adresy IP, grup zabezpieczeń sieci i innych ustawień.</span><span class="sxs-lookup"><span data-stu-id="54cc9-116">Select **Settings** to examine endpoints, IP addresses, network security groups, and other settings.</span></span>

   <span data-ttu-id="54cc9-117">Maszyna wirtualna ma punkt końcowy zdefiniowany dla ruchu protokołu SSH, który można wyświetlić w **punkty końcowe** lub  **[sieciowej grupy zabezpieczeń](../../virtual-network/virtual-networks-nsg.md)**.</span><span class="sxs-lookup"><span data-stu-id="54cc9-117">The VM should have an endpoint defined for SSH traffic that you can view in **Endpoints** or **[Network security group](../../virtual-network/virtual-networks-nsg.md)**.</span></span> <span data-ttu-id="54cc9-118">Punkty końcowe na maszynach wirtualnych, które zostały utworzone za pomocą Menedżera zasobów są przechowywane w grupie zabezpieczeń sieci.</span><span class="sxs-lookup"><span data-stu-id="54cc9-118">Endpoints in VMs that were created by using Resource Manager are stored in a network security group.</span></span> <span data-ttu-id="54cc9-119">Sprawdź także, że zasady zostały zastosowane do grupy zabezpieczeń sieci i czy jest przywoływany w podsieci.</span><span class="sxs-lookup"><span data-stu-id="54cc9-119">Also, verify that the rules have been applied to the network security group and that they're referenced in the subnet.</span></span>

<span data-ttu-id="54cc9-120">Aby sprawdzić łączność sieciową, sprawdź skonfigurowane punkty końcowe i zobacz, jeżeli można osiągnąć maszyny Wirtualnej za pomocą innego protokołu, na przykład HTTP lub innej usługi.</span><span class="sxs-lookup"><span data-stu-id="54cc9-120">To verify network connectivity, check the configured endpoints and see if you can reach the VM through another protocol, such as HTTP or another service.</span></span>

<span data-ttu-id="54cc9-121">Po wykonaniu tych kroków ponów próbę połączenia SSH.</span><span class="sxs-lookup"><span data-stu-id="54cc9-121">After these steps, try the SSH connection again.</span></span>

## <a name="find-the-source-of-the-issue"></a><span data-ttu-id="54cc9-122">Znajdowanie źródła problemu</span><span class="sxs-lookup"><span data-stu-id="54cc9-122">Find the source of the issue</span></span>
<span data-ttu-id="54cc9-123">Na komputerze klienta SSH może zakończyć się niepowodzeniem do dotarcia do usługi SSH na maszynie Wirtualnej Azure z powodu problemów lub błędy konfiguracji w następujących obszarach:</span><span class="sxs-lookup"><span data-stu-id="54cc9-123">The SSH client on your computer might fail to reach the SSH service on the Azure VM due to issues or misconfigurations in the following areas:</span></span>

* [<span data-ttu-id="54cc9-124">Komputer kliencki SSH</span><span class="sxs-lookup"><span data-stu-id="54cc9-124">SSH client computer</span></span>](#source-1-ssh-client-computer)
* [<span data-ttu-id="54cc9-125">Urządzenie brzegowe organizacji</span><span class="sxs-lookup"><span data-stu-id="54cc9-125">Organization edge device</span></span>](#source-2-organization-edge-device)
* [<span data-ttu-id="54cc9-126">Punkt końcowy usługi w chmurze i uzyskiwać dostęp do listy kontroli (ACL)</span><span class="sxs-lookup"><span data-stu-id="54cc9-126">Cloud service endpoint and access control list (ACL)</span></span>](#source-3-cloud-service-endpoint-and-acl)
* [<span data-ttu-id="54cc9-127">Sieciowe grupy zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="54cc9-127">Network security groups</span></span>](#source-4-network-security-groups)
* [<span data-ttu-id="54cc9-128">Maszyna wirtualna Azure opartej na systemie Linux</span><span class="sxs-lookup"><span data-stu-id="54cc9-128">Linux-based Azure VM</span></span>](#source-5-linux-based-azure-virtual-machine)

## <a name="source-1-ssh-client-computer"></a><span data-ttu-id="54cc9-129">Źródło 1: SSH komputera klienckiego</span><span class="sxs-lookup"><span data-stu-id="54cc9-129">Source 1: SSH client computer</span></span>
<span data-ttu-id="54cc9-130">Aby wyeliminować komputera jako źródło błędu, sprawdź, czy go połączeń SSH z innego lokalnego komputera opartego na systemie Linux.</span><span class="sxs-lookup"><span data-stu-id="54cc9-130">To eliminate your computer as the source of the failure, verify that it can make SSH connections to another on-premises, Linux-based computer.</span></span>

![Diagram, który prezentuje składniki komputera klienta SSH](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot2.png)

<span data-ttu-id="54cc9-132">Jeśli połączenie nie powiedzie się, sprawdź następujące problemy na komputerze:</span><span class="sxs-lookup"><span data-stu-id="54cc9-132">If the connection fails, check for the following issues on your computer:</span></span>

* <span data-ttu-id="54cc9-133">Ustawienie zapory lokalnej, która blokuje ruch SSH ruchu przychodzącego lub wychodzącego (TCP 22)</span><span class="sxs-lookup"><span data-stu-id="54cc9-133">A local firewall setting that is blocking inbound or outbound SSH traffic (TCP 22)</span></span>
* <span data-ttu-id="54cc9-134">Lokalnie zainstalowane oprogramowanie serwera proxy klienta, który uniemożliwia połączeń SSH</span><span class="sxs-lookup"><span data-stu-id="54cc9-134">Locally installed client proxy software that is preventing SSH connections</span></span>
* <span data-ttu-id="54cc9-135">Zainstalowanego lokalnie pakietu oprogramowania, który uniemożliwia połączeń SSH do monitorowania sieci</span><span class="sxs-lookup"><span data-stu-id="54cc9-135">Locally installed network monitoring software that is preventing SSH connections</span></span>
* <span data-ttu-id="54cc9-136">Inne rodzaje oprogramowania zabezpieczającego, które monitorowania ruchu lub Zezwalaj/nie zezwalaj na określone typy ruchu</span><span class="sxs-lookup"><span data-stu-id="54cc9-136">Other types of security software that either monitor traffic or allow/disallow specific types of traffic</span></span>

<span data-ttu-id="54cc9-137">Jeśli jeden z tych warunków, tymczasowo wyłączone i spróbuj połączenie SSH na komputerze lokalnym do ustalenie przyczyny, które połączenie jest blokowane na tym komputerze.</span><span class="sxs-lookup"><span data-stu-id="54cc9-137">If one of these conditions apply, temporarily disable the software and try an SSH connection to an on-premises computer to find out the reason the connection is being blocked on your computer.</span></span> <span data-ttu-id="54cc9-138">Następnie skontaktowanie się z administratorem sieci, aby poprawić ustawień oprogramowania, aby zezwolić na połączenia SSH.</span><span class="sxs-lookup"><span data-stu-id="54cc9-138">Then work with your network administrator to correct the software settings to allow SSH connections.</span></span>

<span data-ttu-id="54cc9-139">Jeśli korzystasz z uwierzytelniania certyfikatów, sprawdź ma te uprawnienia do folderu .ssh w katalogu macierzystego:</span><span class="sxs-lookup"><span data-stu-id="54cc9-139">If you are using certificate authentication, verify that you have these permissions to the .ssh folder in your home directory:</span></span>

* <span data-ttu-id="54cc9-140">Chmod 700 ~/.ssh</span><span class="sxs-lookup"><span data-stu-id="54cc9-140">Chmod 700 ~/.ssh</span></span>
* <span data-ttu-id="54cc9-141">Chmod 644 ~/.ssh/\*.pub</span><span class="sxs-lookup"><span data-stu-id="54cc9-141">Chmod 644 ~/.ssh/\*.pub</span></span>
* <span data-ttu-id="54cc9-142">Chmod 600 ~/.ssh/id_rsa (lub innych plików, które zostały zapisane w ich kluczy prywatnych)</span><span class="sxs-lookup"><span data-stu-id="54cc9-142">Chmod 600 ~/.ssh/id_rsa (or any other files that have your private keys stored in them)</span></span>
* <span data-ttu-id="54cc9-143">Chmod 644 ~/.ssh/known_hosts (zawiera hosty, które zostały połączone za pośrednictwem protokołu SSH)</span><span class="sxs-lookup"><span data-stu-id="54cc9-143">Chmod 644 ~/.ssh/known_hosts (contains hosts that you’ve connected to via SSH)</span></span>

## <a name="source-2-organization-edge-device"></a><span data-ttu-id="54cc9-144">Źródło 2: Urządzenie brzegowe organizacji</span><span class="sxs-lookup"><span data-stu-id="54cc9-144">Source 2: Organization edge device</span></span>
<span data-ttu-id="54cc9-145">Aby wyeliminować urządzenie brzegowe organizacji jako źródło problemu, sprawdź, czy komputera, który jest bezpośrednio połączony z Internetem mogą nawiązywać połączenia SSH do maszyny Wirtualnej Azure.</span><span class="sxs-lookup"><span data-stu-id="54cc9-145">To eliminate your organization edge device as the source of the failure, verify that a computer that's directly connected to the Internet can make SSH connections to your Azure VM.</span></span> <span data-ttu-id="54cc9-146">Jeśli uzyskują dostęp do maszyny Wirtualnej za pośrednictwem sieci VPN lokacja lokacja lub połączenia Azure ExpressRoute, przejdź do [źródła 4: sieciowej grupy zabezpieczeń](#nsg).</span><span class="sxs-lookup"><span data-stu-id="54cc9-146">If you are accessing the VM over a site-to-site VPN or an Azure ExpressRoute connection, skip to [Source 4: Network security groups](#nsg).</span></span>

![Diagram, który prezentuje urządzenie brzegowe organizacji](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot3.png)

<span data-ttu-id="54cc9-148">Jeśli nie masz komputera, który jest bezpośrednio połączony z Internetem, Utwórz nową maszynę Wirtualną platformy Azure w jego własnej grupy zasobów lub usługi w chmurze i używać go.</span><span class="sxs-lookup"><span data-stu-id="54cc9-148">If you don't have a computer that is directly connected to the Internet, create a new Azure VM in its own resource group or cloud service and use it.</span></span> <span data-ttu-id="54cc9-149">Aby uzyskać więcej informacji, zobacz [Utwórz maszynę wirtualną z systemem Linux na platformie Azure](quick-create-cli.md).</span><span class="sxs-lookup"><span data-stu-id="54cc9-149">For more information, see [Create a virtual machine running Linux in Azure](quick-create-cli.md).</span></span> <span data-ttu-id="54cc9-150">Po zakończeniu testowania Usuń grupę zasobów lub usługi maszyny Wirtualnej i w chmurze.</span><span class="sxs-lookup"><span data-stu-id="54cc9-150">Delete the resource group or VM and cloud service when you're done with your testing.</span></span>

<span data-ttu-id="54cc9-151">Jeśli tworzysz połączenie SSH z komputerem, który jest bezpośrednio połączony z Internetem, sprawdź urządzenie brzegowe organizacji dla:</span><span class="sxs-lookup"><span data-stu-id="54cc9-151">If you can create an SSH connection with a computer that's directly connected to the Internet, check your organization edge device for:</span></span>

* <span data-ttu-id="54cc9-152">Wewnętrzny zapory, która blokuje ruch SSH z Internetem</span><span class="sxs-lookup"><span data-stu-id="54cc9-152">An internal firewall that's blocking SSH traffic with the Internet</span></span>
* <span data-ttu-id="54cc9-153">Serwer proxy, który uniemożliwia połączeń SSH</span><span class="sxs-lookup"><span data-stu-id="54cc9-153">A proxy server that's preventing SSH connections</span></span>
* <span data-ttu-id="54cc9-154">Włamań lub oprogramowanie na urządzeniach w sieci krawędzi, która uniemożliwia połączeń SSH do monitorowania sieci</span><span class="sxs-lookup"><span data-stu-id="54cc9-154">Intrusion detection or network monitoring software running on devices in your edge network that's preventing SSH connections</span></span>

<span data-ttu-id="54cc9-155">Skontaktować się z administratorem sieci, aby poprawić ustawienia urządzenia brzegowe organizacji zezwalająca na ruch protokołu SSH z Internetem.</span><span class="sxs-lookup"><span data-stu-id="54cc9-155">Work with your network administrator to correct the settings of your organization edge devices to allow SSH traffic with the Internet.</span></span>

## <a name="source-3-cloud-service-endpoint-and-acl"></a><span data-ttu-id="54cc9-156">Źródło 3: Punkt końcowy usługi w chmurze i listy ACL</span><span class="sxs-lookup"><span data-stu-id="54cc9-156">Source 3: Cloud service endpoint and ACL</span></span>
> [!NOTE]
> <span data-ttu-id="54cc9-157">To źródło dotyczą tylko maszyn wirtualnych, które zostały utworzone przy użyciu klasycznego modelu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="54cc9-157">This source applies only to VMs that were created by using the classic deployment model.</span></span> <span data-ttu-id="54cc9-158">Dla maszyn wirtualnych, które zostały utworzone przy użyciu usługi Resource Manager, przejdź do [źródła 4: sieciowej grupy zabezpieczeń](#nsg).</span><span class="sxs-lookup"><span data-stu-id="54cc9-158">For VMs that were created by using Resource Manager, skip to [source 4: Network security groups](#nsg).</span></span>

<span data-ttu-id="54cc9-159">Aby usunąć punkt końcowy usługi w chmurze i listy ACL jako źródło błędu, sprawdź, czy innej maszyny Wirtualnej platformy Azure w tej samej sieci wirtualnej mogą nawiązywać połączenia SSH do maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="54cc9-159">To eliminate the cloud service endpoint and ACL as the source of the failure, verify that another Azure VM in the same virtual network can make SSH connections to your VM.</span></span>

![Diagram, który prezentuje punktu końcowego usługi w chmurze i listy kontroli dostępu](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot4.png)

<span data-ttu-id="54cc9-161">Jeśli nie masz inną maszynę Wirtualną w tej samej sieci wirtualnej można można łatwo utworzyć.</span><span class="sxs-lookup"><span data-stu-id="54cc9-161">If you don't have another VM in the same virtual network, you can easily create one.</span></span> <span data-ttu-id="54cc9-162">Aby uzyskać więcej informacji, zobacz [Utwórz Maszynę wirtualną systemu Linux na platformie Azure przy użyciu interfejsu wiersza polecenia](quick-create-cli.md).</span><span class="sxs-lookup"><span data-stu-id="54cc9-162">For more information, see [Create a Linux VM on Azure using the CLI](quick-create-cli.md).</span></span> <span data-ttu-id="54cc9-163">Jeśli po zakończeniu testowania, należy usunąć dodatkowe maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="54cc9-163">Delete the extra VM when you are done with your testing.</span></span>

<span data-ttu-id="54cc9-164">Jeśli tworzysz połączenie SSH z maszyną Wirtualną w tej samej sieci wirtualnej, sprawdź następujące obszary:</span><span class="sxs-lookup"><span data-stu-id="54cc9-164">If you can create an SSH connection with a VM in the same virtual network, check the following areas:</span></span>

* <span data-ttu-id="54cc9-165">**Konfiguracja punktu końcowego dla ruchu SSH na docelowej maszyny Wirtualnej.**</span><span class="sxs-lookup"><span data-stu-id="54cc9-165">**The endpoint configuration for SSH traffic on the target VM.**</span></span> <span data-ttu-id="54cc9-166">Port TCP prywatny punktu końcowego powinien być zgodny z portem TCP, na którym nasłuchuje usługa SSH na maszynie Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="54cc9-166">The private TCP port of the endpoint should match the TCP port on which the SSH service on the VM is listening.</span></span> <span data-ttu-id="54cc9-167">(Domyślny port to 22).</span><span class="sxs-lookup"><span data-stu-id="54cc9-167">(The default port is 22).</span></span> <span data-ttu-id="54cc9-168">Sprawdź numer portu SSH TCP w portalu Azure, wybierając **maszyn wirtualnych** > *nazwę maszyny Wirtualnej* > **ustawienia**  >   **Punkty końcowe**.</span><span class="sxs-lookup"><span data-stu-id="54cc9-168">Verify the SSH TCP port number in the Azure portal by selecting **Virtual machines** > *VM name* > **Settings** > **Endpoints**.</span></span>
* <span data-ttu-id="54cc9-169">**Listy ACL punktu końcowego ruchu SSH na docelowej maszynie wirtualnej.**</span><span class="sxs-lookup"><span data-stu-id="54cc9-169">**The ACL for the SSH traffic endpoint on the target virtual machine.**</span></span> <span data-ttu-id="54cc9-170">Listy kontroli dostępu można określić dozwolony lub niedozwolony ruch przychodzący z Internetu, na podstawie jego adresu IP źródłowego.</span><span class="sxs-lookup"><span data-stu-id="54cc9-170">An ACL enables you to specify allowed or denied incoming traffic from the Internet, based on its source IP address.</span></span> <span data-ttu-id="54cc9-171">Nieprawidłowo skonfigurowane listy kontroli dostępu może uniemożliwić ruch przychodzący SSH do punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="54cc9-171">Misconfigured ACLs can prevent incoming SSH traffic to the endpoint.</span></span> <span data-ttu-id="54cc9-172">Sprawdź z listy kontroli dostępu, aby upewnić się, że ruch przychodzący z publicznych adresów IP serwera proxy lub inny serwer krawędzi jest dozwolone.</span><span class="sxs-lookup"><span data-stu-id="54cc9-172">Check your ACLs to ensure that incoming traffic from the public IP addresses of your proxy or other edge server is allowed.</span></span> <span data-ttu-id="54cc9-173">Aby uzyskać więcej informacji, zobacz [list (kontroli dostępu ACL) o dostęp do sieci kontroli](../../virtual-network/virtual-networks-acl.md).</span><span class="sxs-lookup"><span data-stu-id="54cc9-173">For more information, see [About network access control lists (ACLs)](../../virtual-network/virtual-networks-acl.md).</span></span>

<span data-ttu-id="54cc9-174">Aby usunąć punkt końcowy jako źródło problemu, Usuń bieżący punkt końcowy, Utwórz innym punktem końcowym i określ nazwę SSH (port TCP 22 numeru portu publicznego i prywatnego).</span><span class="sxs-lookup"><span data-stu-id="54cc9-174">To eliminate the endpoint as a source of the problem, remove the current endpoint, create another endpoint, and specify the SSH name (TCP port 22 for the public and private port number).</span></span> <span data-ttu-id="54cc9-175">Aby uzyskać więcej informacji, zobacz [Konfigurowanie punktów końcowych na maszynie wirtualnej na platformie Azure](../windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="54cc9-175">For more information, see [Set up endpoints on a virtual machine in Azure](../windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span></span>

<a id="nsg"></a>

## <a name="source-4-network-security-groups"></a><span data-ttu-id="54cc9-176">Źródła 4: Grupy zabezpieczeń sieci</span><span class="sxs-lookup"><span data-stu-id="54cc9-176">Source 4: Network security groups</span></span>
<span data-ttu-id="54cc9-177">Sieciowe grupy zabezpieczeń umożliwiają mieć większą kontrolę nad dozwolonego ruchu przychodzącego i wychodzącego.</span><span class="sxs-lookup"><span data-stu-id="54cc9-177">Network security groups enable you to have more granular control of allowed inbound and outbound traffic.</span></span> <span data-ttu-id="54cc9-178">Można utworzyć reguły, które obejmują podsieci oraz usług w sieci wirtualnej platformy Azure w chmurze.</span><span class="sxs-lookup"><span data-stu-id="54cc9-178">You can create rules that span subnets and cloud services in an Azure virtual network.</span></span> <span data-ttu-id="54cc9-179">Sprawdź reguły grupy zabezpieczeń sieci, tak aby upewnić się, że może SSH ruch do i z Internetu.</span><span class="sxs-lookup"><span data-stu-id="54cc9-179">Check your network security group rules to ensure that SSH traffic to and from the Internet is allowed.</span></span>
<span data-ttu-id="54cc9-180">Aby uzyskać więcej informacji, zobacz [dotyczące grup zabezpieczeń sieci](../../virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="54cc9-180">For more information, see [About network security groups](../../virtual-network/virtual-networks-nsg.md).</span></span>

<span data-ttu-id="54cc9-181">Umożliwia także sprawdzić IP do sprawdzania poprawności konfiguracji grupy NSG.</span><span class="sxs-lookup"><span data-stu-id="54cc9-181">You can also use IP Verify to validate the NSG configuration.</span></span> <span data-ttu-id="54cc9-182">Aby uzyskać więcej informacji, zobacz [omówienie monitorowania sieci platformy Azure](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-monitoring-overview).</span><span class="sxs-lookup"><span data-stu-id="54cc9-182">For more information, see [Azure network monitoring overview](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-monitoring-overview).</span></span> 

## <a name="source-5-linux-based-azure-virtual-machine"></a><span data-ttu-id="54cc9-183">Źródło 5: Opartych na systemie Linux maszyny wirtualnej platformy Azure</span><span class="sxs-lookup"><span data-stu-id="54cc9-183">Source 5: Linux-based Azure virtual machine</span></span>
<span data-ttu-id="54cc9-184">Źródło ostatniej możliwych problemów jest samej maszyny wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="54cc9-184">The last source of possible problems is the Azure virtual machine itself.</span></span>

![Diagram, który prezentuje opartych na systemie Linux maszyny wirtualnej platformy Azure](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot5.png)

<span data-ttu-id="54cc9-186">Jeśli jeszcze tego nie zrobiono tego wcześniej, postępuj zgodnie z instrukcjami [do resetowania hasła lub SSH dla maszyn wirtualnych z systemem Linux](classic/reset-access.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="54cc9-186">If you haven't done so already, follow the instructions [to reset a password or SSH for Linux-based virtual machines](classic/reset-access.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).</span></span>

<span data-ttu-id="54cc9-187">Spróbuj ponownie nawiązać połączenie z komputera.</span><span class="sxs-lookup"><span data-stu-id="54cc9-187">Try connecting from your computer again.</span></span> <span data-ttu-id="54cc9-188">Jeśli nadal nie, poniżej przedstawiono niektóre możliwe problemy:</span><span class="sxs-lookup"><span data-stu-id="54cc9-188">If it still fails, the following are some of the possible issues:</span></span>

* <span data-ttu-id="54cc9-189">Usługa SSH nie jest uruchomiona na docelowej maszynie wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="54cc9-189">The SSH service is not running on the target virtual machine.</span></span>
* <span data-ttu-id="54cc9-190">Usługa SSH nie nasłuchuje na porcie TCP 22.</span><span class="sxs-lookup"><span data-stu-id="54cc9-190">The SSH service is not listening on TCP port 22.</span></span> <span data-ttu-id="54cc9-191">Aby przetestować, zainstalować klienta programu telnet na komputerze lokalnym i uruchom "telnet *cloudServiceName*. cloudapp.net 22".</span><span class="sxs-lookup"><span data-stu-id="54cc9-191">To test, install a telnet client on your local computer and run "telnet *cloudServiceName*.cloudapp.net 22".</span></span> <span data-ttu-id="54cc9-192">Ten krok określa, czy maszyny wirtualnej umożliwia komunikację przychodzących i wychodzących na punkt końcowy SSH.</span><span class="sxs-lookup"><span data-stu-id="54cc9-192">This step determines if the virtual machine allows inbound and outbound communication to the SSH endpoint.</span></span>
* <span data-ttu-id="54cc9-193">Zapory lokalnej na docelowej maszynie wirtualnej ma reguł, które uniemożliwiają przychodzącego i wychodzącego ruchu SSH.</span><span class="sxs-lookup"><span data-stu-id="54cc9-193">The local firewall on the target virtual machine has rules that are preventing inbound or outbound SSH traffic.</span></span>
* <span data-ttu-id="54cc9-194">Włamań lub oprogramowania, który działa na maszynie wirtualnej platformy Azure do monitorowania sieci uniemożliwia nawiązanie połączenia SSH.</span><span class="sxs-lookup"><span data-stu-id="54cc9-194">Intrusion detection or network monitoring software that's running on the Azure virtual machine is preventing SSH connections.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="54cc9-195">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="54cc9-195">Additional resources</span></span>
<span data-ttu-id="54cc9-196">Aby uzyskać więcej informacji dotyczących rozwiązywania problemów z dostęp do aplikacji, zobacz [Rozwiązywanie problemów z dostępem do aplikacji działających na maszynie wirtualnej platformy Azure](troubleshoot-app-connection.md)</span><span class="sxs-lookup"><span data-stu-id="54cc9-196">For more information about troubleshooting application access, see [Troubleshoot access to an application running on an Azure virtual machine](troubleshoot-app-connection.md)</span></span>
