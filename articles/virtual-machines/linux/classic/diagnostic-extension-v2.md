---
title: "aaaMonitoring Maszynę wirtualną z rozszerzenia maszyny Wirtualnej systemu Linux | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak toouse hello wydajności hello toomonitor Linux rozszerzenia diagnostycznych i danych diagnostycznych maszyny wirtualnej systemu Linux na platformie Azure."
services: virtual-machines-linux
author: NingKuang
manager: timlt
editor: 
tags: azure-service-management
ms.assetid: f54a11c5-5a0e-40ff-af6c-e60bd464058b
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 12/15/2015
ms.author: Ning
ms.openlocfilehash: cf7bfebca8c0367941f7a975417f60fe2e2dab25
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="use-hello-linux-diagnostic-extension-toomonitor-hello-performance-and-diagnostic-data-of-a-linux-vm"></a><span data-ttu-id="67e12-103">Użyj hello rozszerzenia diagnostycznych Linux toomonitor hello wydajności i danych diagnostycznych maszyny wirtualnej systemu Linux</span><span class="sxs-lookup"><span data-stu-id="67e12-103">Use hello Linux Diagnostic Extension toomonitor hello performance and diagnostic data of a Linux VM</span></span>

<span data-ttu-id="67e12-104">W tym dokumencie opisano wersji 2.3 hello rozszerzenia diagnostyczne systemu Linux.</span><span class="sxs-lookup"><span data-stu-id="67e12-104">This document describes version 2.3 of hello Linux Diagnostic Extension.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="67e12-105">Ta wersja jest przestarzały i może być nieopublikowane dowolnym momencie po 30 czerwca 2018.</span><span class="sxs-lookup"><span data-stu-id="67e12-105">This version is deprecated, and it may be unpublished any time after June 30, 2018.</span></span> <span data-ttu-id="67e12-106">Zastąpiono wersji 3.0 lub nowszej.</span><span class="sxs-lookup"><span data-stu-id="67e12-106">It has been replaced by version 3.0.</span></span> <span data-ttu-id="67e12-107">Aby uzyskać więcej informacji, zobacz hello [dokumentacji dla wersji 3.0 hello rozszerzenia diagnostycznych Linux](../diagnostic-extension.md).</span><span class="sxs-lookup"><span data-stu-id="67e12-107">For more information, see hello [documentation for version 3.0 of hello Linux Diagnostic Extension](../diagnostic-extension.md).</span></span>

## <a name="introduction"></a><span data-ttu-id="67e12-108">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="67e12-108">Introduction</span></span>

<span data-ttu-id="67e12-109">(**Uwaga**: hello rozszerzenia diagnostyczne systemu Linux jest open-powierzając jej ich konserwację na [GitHub](https://github.com/Azure/azure-linux-extensions/tree/master/Diagnostic) gdzie hello najnowsze informacje dotyczące rozszerzeń hello pierwszej publikacji.</span><span class="sxs-lookup"><span data-stu-id="67e12-109">(**Note**: hello Linux Diagnostic Extension is open-sourced on [GitHub](https://github.com/Azure/azure-linux-extensions/tree/master/Diagnostic) where hello most current information on hello extension is first published.</span></span> <span data-ttu-id="67e12-110">Może być toocheck hello [GitHub strony](https://github.com/Azure/azure-linux-extensions/tree/master/Diagnostic) pierwszej.)</span><span class="sxs-lookup"><span data-stu-id="67e12-110">You might want toocheck hello [GitHub page](https://github.com/Azure/azure-linux-extensions/tree/master/Diagnostic) first.)</span></span>

<span data-ttu-id="67e12-111">Hello rozszerzenia diagnostycznych Linux pomaga użytkownika monitora hello maszyn wirtualnych systemu Linux, które działają w systemie Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="67e12-111">hello Linux Diagnostic Extension helps a user monitor hello Linux VMs that are running on Microsoft Azure.</span></span> <span data-ttu-id="67e12-112">Ma hello następujące możliwości:</span><span class="sxs-lookup"><span data-stu-id="67e12-112">It has hello following capabilities:</span></span>

* <span data-ttu-id="67e12-113">Zbiera i przekazuje informacje o wydajności systemu hello z tabeli magazynu hello maszyny Wirtualnej systemu Linux toohello użytkownika, w tym informacji diagnostycznych i syslog.</span><span class="sxs-lookup"><span data-stu-id="67e12-113">Collects and uploads hello system performance information from hello Linux VM toohello user's storage table, including diagnostic and syslog information.</span></span>
* <span data-ttu-id="67e12-114">Umożliwia użytkownikom toocustomize hello danych metryki, które zostaną zebrane i przekazane.</span><span class="sxs-lookup"><span data-stu-id="67e12-114">Enables users toocustomize hello data metrics that will be collected and uploaded.</span></span>
* <span data-ttu-id="67e12-115">Umożliwia użytkownikom tooupload określony dziennik pliki tooa magazynu wyznaczonego tabeli.</span><span class="sxs-lookup"><span data-stu-id="67e12-115">Enables users tooupload specified log files tooa designated storage table.</span></span>

<span data-ttu-id="67e12-116">W bieżącej wersji hello 2.3 hello dane obejmują:</span><span class="sxs-lookup"><span data-stu-id="67e12-116">In hello current version 2.3, hello data includes:</span></span>

* <span data-ttu-id="67e12-117">Wszystkie dzienniki Linux Rsyslog, w tym system, zabezpieczenia i dzienniki aplikacji.</span><span class="sxs-lookup"><span data-stu-id="67e12-117">All Linux Rsyslog logs, including system, security, and application logs.</span></span>
* <span data-ttu-id="67e12-118">Wszystkie dane systemu, które jest określone w [lokacji rozwiązania Cross platformy w programie System Center hello](https://scx.codeplex.com/wikipage?title=xplatproviders).</span><span class="sxs-lookup"><span data-stu-id="67e12-118">All system data that's specified on [hello System Center Cross Platform Solutions site](https://scx.codeplex.com/wikipage?title=xplatproviders).</span></span>
* <span data-ttu-id="67e12-119">Pliki dziennika zdefiniowane przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="67e12-119">User-specified log files.</span></span>

<span data-ttu-id="67e12-120">To rozszerzenie działa zarówno z klasycznym hello i modeli wdrażania Menedżera zasobów.</span><span class="sxs-lookup"><span data-stu-id="67e12-120">This extension works with both hello classic and Resource Manager deployment models.</span></span>

### <a name="current-version-of-hello-extension-and-deprecation-of-old-versions"></a><span data-ttu-id="67e12-121">Bieżąca wersja rozszerzenia hello i amortyzacja stare wersje</span><span class="sxs-lookup"><span data-stu-id="67e12-121">Current version of hello extension and deprecation of old versions</span></span>

<span data-ttu-id="67e12-122">Najnowsza wersja rozszerzenia hello Hello jest **2.3**, i **wszystkie starsze wersje (2.0, 2.1 i 2.2) zostanie zastąpiona i nieopublikowane końca roku (2017)**.</span><span class="sxs-lookup"><span data-stu-id="67e12-122">hello latest version of hello extension is **2.3**, and **any old versions (2.0, 2.1, and 2.2) will be deprecated and unpublished by end of this year (2017)**.</span></span> <span data-ttu-id="67e12-123">Jeśli zainstalowano hello rozszerzenia Diagnostyka systemu Linux wraz z uaktualnieniem automatyczne wersja pomocnicza wyłączone, jest zalecane Odinstaluj hello rozszerzenie, a następnie zainstaluj go ponownie z uaktualnieniem automatyczne wersja pomocnicza włączone.</span><span class="sxs-lookup"><span data-stu-id="67e12-123">If you installed hello Linux Diagnostic extension with automatic minor version upgrade disabled, it's strongly recommended that you uninstall hello extension and reinstall it with automatic minor version upgrade enabled.</span></span> <span data-ttu-id="67e12-124">W klasycznym (ASM) maszyn wirtualnych można to osiągnąć, określając "2.*" jako wersja hello instalowania rozszerzenia hello za pośrednictwem interfejsu wiersza polecenia XPLAT platformy Azure lub programu Powershell.</span><span class="sxs-lookup"><span data-stu-id="67e12-124">On classic (ASM) VMs, you can achieve this by specifying '2.*' as hello version if you are installing hello extension through Azure XPLAT CLI or Powershell.</span></span> <span data-ttu-id="67e12-125">Na maszynach ARM można to osiągnąć poprzez włączenie ""autoUpgradeMinorVersion": true" w szablonie wdrożenia maszyny Wirtualnej hello.</span><span class="sxs-lookup"><span data-stu-id="67e12-125">On ARM VMs, you can achieve this by including '"autoUpgradeMinorVersion": true' in hello VM deployment template.</span></span> <span data-ttu-id="67e12-126">Ponadto żadnej nowej instalacji rozszerzenia hello powinien mieć wersja pomocnicza automatycznie hello uaktualnienia opcja jest włączona.</span><span class="sxs-lookup"><span data-stu-id="67e12-126">Also, any new installation of hello extension should have hello auto minor version upgrade option turned on.</span></span>

## <a name="enable-hello-extension"></a><span data-ttu-id="67e12-127">Włącz rozszerzenie hello</span><span class="sxs-lookup"><span data-stu-id="67e12-127">Enable hello extension</span></span>

<span data-ttu-id="67e12-128">To rozszerzenie można włączyć za pomocą hello [portalu Azure](https://portal.azure.com/#), programu Azure PowerShell lub skryptów wiersza polecenia platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="67e12-128">You can enable this extension by using hello [Azure portal](https://portal.azure.com/#), Azure PowerShell, or Azure CLI scripts.</span></span>

<span data-ttu-id="67e12-129">tooview i skonfiguruj hello system oraz dane wydajności bezpośrednio z hello portalu Azure, wykonaj [następujące czynności na powitania Azure blog](https://azure.microsoft.com/en-us/blog/windows-azure-virtual-machine-monitoring-with-wad-extension/).</span><span class="sxs-lookup"><span data-stu-id="67e12-129">tooview and configure hello system and performance data directly from hello Azure portal, follow [these steps on hello Azure blog](https://azure.microsoft.com/en-us/blog/windows-azure-virtual-machine-monitoring-with-wad-extension/).</span></span>

<span data-ttu-id="67e12-130">Ten artykuł skupia się na temat tooenable i skonfigurować rozszerzenia hello przy użyciu poleceń wiersza polecenia platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="67e12-130">This article focuses on how tooenable and configure hello extension by using Azure CLI commands.</span></span> <span data-ttu-id="67e12-131">Dzięki temu tooread i widok danych hello bezpośrednio z tabeli magazynu hello.</span><span class="sxs-lookup"><span data-stu-id="67e12-131">This allows you tooread and view hello data directly from hello storage table.</span></span>

<span data-ttu-id="67e12-132">Należy pamiętać, że hello metody konfiguracji, które zostały opisane w tym miejscu nie będzie działać dla hello portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="67e12-132">Note that hello configuration methods that are described here won't work for hello Azure portal.</span></span> <span data-ttu-id="67e12-133">tooview i skonfigurować hello wydajność systemu i dane bezpośrednio z hello portalu Azure, musi być włączona rozszerzenia hello za pośrednictwem portalu hello.</span><span class="sxs-lookup"><span data-stu-id="67e12-133">tooview and configure hello system and performance data directly from hello Azure portal, hello extension must be enabled through hello portal.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="67e12-134">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="67e12-134">Prerequisites</span></span>

* <span data-ttu-id="67e12-135">**Agenta systemu Linux platformy Azure w wersji 2.0.6 lub nowszym**.</span><span class="sxs-lookup"><span data-stu-id="67e12-135">**Azure Linux Agent version 2.0.6 or later**.</span></span>

  <span data-ttu-id="67e12-136">Należy pamiętać, że większość obrazów Galeria Linux maszyny Wirtualnej Azure obejmuje wersji 2.0.6 lub nowszej.</span><span class="sxs-lookup"><span data-stu-id="67e12-136">Note that most Azure VM Linux gallery images include version 2.0.6 or later.</span></span> <span data-ttu-id="67e12-137">Można uruchomić **agenta WAAgent-wersja** tooconfirm wersję zainstalowanego na powitania maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="67e12-137">You can run **WAAgent -version** tooconfirm which version is installed on hello VM.</span></span> <span data-ttu-id="67e12-138">Jeśli hello maszyny Wirtualnej jest uruchomiony w wersji starszej niż 2.0.6, można wykonać [tych instrukcji w serwisie GitHub](https://github.com/Azure/WALinuxAgent "instrukcje") tooupdate go.</span><span class="sxs-lookup"><span data-stu-id="67e12-138">If hello VM is running a version that's earlier than 2.0.6, you can follow [these instructions on GitHub](https://github.com/Azure/WALinuxAgent "instructions") tooupdate it.</span></span>
* <span data-ttu-id="67e12-139">**Interfejs wiersza polecenia platformy Azure**.</span><span class="sxs-lookup"><span data-stu-id="67e12-139">**Azure CLI**.</span></span> <span data-ttu-id="67e12-140">Postępuj zgodnie z [tym instrukcje dotyczące instalowania interfejsu wiersza polecenia](../../../cli-install-nodejs.md) tooset hello środowiska wiersza polecenia platformy Azure na tym komputerze.</span><span class="sxs-lookup"><span data-stu-id="67e12-140">Follow [this guidance for installing CLI](../../../cli-install-nodejs.md) tooset up hello Azure CLI environment on your machine.</span></span> <span data-ttu-id="67e12-141">Po zainstalowaniu interfejsu wiersza polecenia Azure, można użyć hello **azure** polecenie z interfejsu wiersza polecenia (Bash, Terminal lub wiersza polecenia) tooaccess hello Azure CLI poleceniach.</span><span class="sxs-lookup"><span data-stu-id="67e12-141">After Azure CLI is installed, you can use hello **azure** command from your command-line interface (Bash, Terminal, or command prompt) tooaccess hello Azure CLI commands.</span></span> <span data-ttu-id="67e12-142">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="67e12-142">For example:</span></span>

  * <span data-ttu-id="67e12-143">Uruchom **zestaw rozszerzenie azure maszyny wirtualnej — Pomoc** uzyskać szczegółową pomoc.</span><span class="sxs-lookup"><span data-stu-id="67e12-143">Run **azure vm extension set --help** for detailed help information.</span></span>
  * <span data-ttu-id="67e12-144">Uruchom **logowanie w usłudze azure** toosign w tooAzure.</span><span class="sxs-lookup"><span data-stu-id="67e12-144">Run **azure login** toosign in tooAzure.</span></span>
  * <span data-ttu-id="67e12-145">Uruchom **listy maszyna wirtualna platformy azure** toolist hello wszystkich maszyn wirtualnych, które masz na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="67e12-145">Run **azure vm list** toolist all hello virtual machines that you have on Azure.</span></span>
* <span data-ttu-id="67e12-146">Dane hello toostore konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="67e12-146">A storage account toostore hello data.</span></span> <span data-ttu-id="67e12-147">Konieczne będzie nazwa konta magazynu, które zostało utworzone wcześniej i dostępu do klucza tooupload hello tooyour pamięci masowej.</span><span class="sxs-lookup"><span data-stu-id="67e12-147">You will need a storage account name that was created previously and an access key tooupload hello data tooyour storage.</span></span>

## <a name="use-hello-azure-cli-command-tooenable-hello-linux-diagnostic-extension"></a><span data-ttu-id="67e12-148">Użyj hello Azure CLI polecenia tooenable hello rozszerzenia diagnostyczne systemu Linux</span><span class="sxs-lookup"><span data-stu-id="67e12-148">Use hello Azure CLI command tooenable hello Linux Diagnostic Extension</span></span>

### <a name="scenario-1-enable-hello-extension-with-hello-default-data-set"></a><span data-ttu-id="67e12-149">Scenariusz 1.</span><span class="sxs-lookup"><span data-stu-id="67e12-149">Scenario 1.</span></span> <span data-ttu-id="67e12-150">Włącz rozszerzenie hello hello domyślny zestaw danych</span><span class="sxs-lookup"><span data-stu-id="67e12-150">Enable hello extension with hello default data set</span></span>

<span data-ttu-id="67e12-151">W wersji 2.3 lub nowszej zawierają hello domyślnych danych, które będą zbierane:</span><span class="sxs-lookup"><span data-stu-id="67e12-151">In version 2.3 or later, hello default data that will be collected includes:</span></span>

* <span data-ttu-id="67e12-152">Wszystkie informacje Rsyslog (w tym system, zabezpieczenia i dzienniki aplikacji).</span><span class="sxs-lookup"><span data-stu-id="67e12-152">All Rsyslog information (including system, security, and application logs).</span></span>  
* <span data-ttu-id="67e12-153">Podstawowy zestaw danych systemowych podstawy.</span><span class="sxs-lookup"><span data-stu-id="67e12-153">A core set of basis system data.</span></span> <span data-ttu-id="67e12-154">Należy pamiętać, że hello pełny zestaw danych jest opisane na powitania [lokacji rozwiązania Cross platformy w programie System Center](https://scx.codeplex.com/wikipage?title=xplatproviders).</span><span class="sxs-lookup"><span data-stu-id="67e12-154">Note that hello full data set is described on hello [System Center Cross Platform Solutions site](https://scx.codeplex.com/wikipage?title=xplatproviders).</span></span>
  <span data-ttu-id="67e12-155">Jeśli chcesz, aby tooenable dodatkowe dane, wykonaj czynności hello w scenariuszach 2 i 3.</span><span class="sxs-lookup"><span data-stu-id="67e12-155">If you want tooenable extra data, continue with hello steps in Scenarios 2 and 3.</span></span>

<span data-ttu-id="67e12-156">Krok 1.</span><span class="sxs-lookup"><span data-stu-id="67e12-156">Step 1.</span></span> <span data-ttu-id="67e12-157">Utwórz plik o nazwie PrivateConfig.json z hello następującej zawartości:</span><span class="sxs-lookup"><span data-stu-id="67e12-157">Create a file named PrivateConfig.json with hello following content:</span></span>

    {
        "storageAccountName" : "hello storage account tooreceive data",
        "storageAccountKey" : "hello key of hello account"
    }

<span data-ttu-id="67e12-158">Krok 2.</span><span class="sxs-lookup"><span data-stu-id="67e12-158">Step 2.</span></span> <span data-ttu-id="67e12-159">Uruchom  **vm_name LinuxDiagnostic Microsoft.OSTCExtensions 2 ustawić rozszerzenia maszyny wirtualnej platformy azure.* — PrivateConfig.json prywatnego config-path**.</span><span class="sxs-lookup"><span data-stu-id="67e12-159">Run **azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions 2.* --private-config-path PrivateConfig.json**.</span></span>

### <a name="scenario-2-customize-hello-performance-monitor-metrics"></a><span data-ttu-id="67e12-160">Scenariusz 2.</span><span class="sxs-lookup"><span data-stu-id="67e12-160">Scenario 2.</span></span> <span data-ttu-id="67e12-161">Dostosowanie metryk monitora wydajności hello</span><span class="sxs-lookup"><span data-stu-id="67e12-161">Customize hello performance monitor metrics</span></span>

<span data-ttu-id="67e12-162">W tej sekcji opisano, jak toocustomize hello wydajności i tabelę danych diagnostycznych.</span><span class="sxs-lookup"><span data-stu-id="67e12-162">This section describes how toocustomize hello performance and diagnostic data table.</span></span>

<span data-ttu-id="67e12-163">Krok 1.</span><span class="sxs-lookup"><span data-stu-id="67e12-163">Step 1.</span></span> <span data-ttu-id="67e12-164">Utwórz plik o nazwie PrivateConfig.json z zawartością hello, który został opisany w scenariuszu 1.</span><span class="sxs-lookup"><span data-stu-id="67e12-164">Create a file named PrivateConfig.json with hello content that was described in Scenario 1.</span></span> <span data-ttu-id="67e12-165">Utwórz również plik o nazwie PublicConfig.json.</span><span class="sxs-lookup"><span data-stu-id="67e12-165">Also create a file named PublicConfig.json.</span></span> <span data-ttu-id="67e12-166">Umożliwia określenie hello danych ma toocollect.</span><span class="sxs-lookup"><span data-stu-id="67e12-166">Specify hello particular data you want toocollect.</span></span>

<span data-ttu-id="67e12-167">Dla wszystkich obsługiwanych dostawców i zmienne odwołania hello [lokacji rozwiązania Cross platformy w programie System Center](https://scx.codeplex.com/wikipage?title=xplatproviders).</span><span class="sxs-lookup"><span data-stu-id="67e12-167">For all supported providers and variables, reference hello [System Center Cross Platform Solutions site](https://scx.codeplex.com/wikipage?title=xplatproviders).</span></span> <span data-ttu-id="67e12-168">Możesz mieć wiele zapytań i przechowywać je w wielu tabel, dodając więcej skryptu toohello zapytania.</span><span class="sxs-lookup"><span data-stu-id="67e12-168">You can have multiple queries and store them in multiple tables by appending more queries toohello script.</span></span>

<span data-ttu-id="67e12-169">Domyślnie zbierane są zawsze hello Rsyslog danych.</span><span class="sxs-lookup"><span data-stu-id="67e12-169">By default, hello Rsyslog data is always collected.</span></span>

    {
          "perfCfg":
          [
              {
                  "query" : "SELECT PercentAvailableMemory, AvailableMemory, UsedMemory ,PercentUsedSwap FROM SCX_MemoryStatisticalInformation",
                  "table" : "LinuxMemory"
              }
          ]
    }


<span data-ttu-id="67e12-170">Krok 2.</span><span class="sxs-lookup"><span data-stu-id="67e12-170">Step 2.</span></span> <span data-ttu-id="67e12-171">Uruchom  **vm_name LinuxDiagnostic Microsoft.OSTCExtensions "2 ustawić rozszerzenia maszyny wirtualnej platformy azure.*"--prywatnego config-path PrivateConfig.json — PublicConfig.json publicznego config-path**.</span><span class="sxs-lookup"><span data-stu-id="67e12-171">Run **azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions '2.*' --private-config-path PrivateConfig.json --public-config-path PublicConfig.json**.</span></span>

### <a name="scenario-3-upload-your-own-log-files"></a><span data-ttu-id="67e12-172">Scenariusz 3.</span><span class="sxs-lookup"><span data-stu-id="67e12-172">Scenario 3.</span></span> <span data-ttu-id="67e12-173">Przekazanie plików dzienników</span><span class="sxs-lookup"><span data-stu-id="67e12-173">Upload your own log files</span></span>

<span data-ttu-id="67e12-174">W tej sekcji opisano, jak toocollect i przekazywania dziennika określone pliki tooyour konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="67e12-174">This section describes how toocollect and upload specific log files tooyour storage account.</span></span> <span data-ttu-id="67e12-175">Należy toospecify zarówno hello ścieżki tooyour dziennika plików i hello nazwy tabeli hello miejscu toostore dziennika.</span><span class="sxs-lookup"><span data-stu-id="67e12-175">You need toospecify both hello path tooyour log file and hello name of hello table where you want toostore your log.</span></span> <span data-ttu-id="67e12-176">Można utworzyć wiele plików dziennika, dodając wielu skryptu toohello wpisów tabeli/plików.</span><span class="sxs-lookup"><span data-stu-id="67e12-176">You can create multiple log files by adding multiple file/table entries toohello script.</span></span>

<span data-ttu-id="67e12-177">Krok 1.</span><span class="sxs-lookup"><span data-stu-id="67e12-177">Step 1.</span></span> <span data-ttu-id="67e12-178">Utwórz plik o nazwie PrivateConfig.json z zawartością hello, który został opisany w scenariuszu 1.</span><span class="sxs-lookup"><span data-stu-id="67e12-178">Create a file named PrivateConfig.json with hello content that was described in Scenario 1.</span></span> <span data-ttu-id="67e12-179">Następnie utwórz plik o nazwie PublicConfig.json z powitania po zawartości:</span><span class="sxs-lookup"><span data-stu-id="67e12-179">Then create another file named PublicConfig.json with hello following content:</span></span>

```json
{
    "fileCfg" :
    [
        {
            "file" : "/var/log/mysql.err",
            "table" : "mysqlerr"
            }
    ]
}
```

<span data-ttu-id="67e12-180">Krok 2.</span><span class="sxs-lookup"><span data-stu-id="67e12-180">Step 2.</span></span> <span data-ttu-id="67e12-181">Uruchom polecenie `azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions '2.*' --private-config-path PrivateConfig.json --public-config-path PublicConfig.json`.</span><span class="sxs-lookup"><span data-stu-id="67e12-181">Run `azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions '2.*' --private-config-path PrivateConfig.json --public-config-path PublicConfig.json`.</span></span>

<span data-ttu-id="67e12-182">Należy pamiętać, że to ustawienie na powitania rozszerzenie wersji wcześniejszych too2.3, wszystkie dzienniki zapisane zbyt`/var/log/mysql.err` mogą być zduplikowane zbyt`/var/log/syslog` (lub `/var/log/messages` w zależności od hello Linux distro) oraz.</span><span class="sxs-lookup"><span data-stu-id="67e12-182">Note that with this setting on hello extension versions prior too2.3, all logs written too`/var/log/mysql.err` might be duplicated too`/var/log/syslog` (or `/var/log/messages` depending on hello Linux distro) as well.</span></span> <span data-ttu-id="67e12-183">Jeśli chcesz tooavoid duplikat rejestrowania, można wykluczyć rejestrowanie `local6` zakładzie dzienniki w konfiguracji rsyslog.</span><span class="sxs-lookup"><span data-stu-id="67e12-183">If you'd like tooavoid this duplicate logging, you can exclude logging of `local6` facility logs in your rsyslog configuration.</span></span> <span data-ttu-id="67e12-184">Zależy od hello Linux distro, ale w systemie Ubuntu 14.04 toomodify pliku hello jest `/etc/rsyslog.d/50-default.conf` można zastąpić wiersza hello `*.*;auth,authpriv.none -/var/log/syslog` zbyt`*.*;auth,authpriv,local6.none -/var/log/syslog`.</span><span class="sxs-lookup"><span data-stu-id="67e12-184">It depends on hello Linux distro, but on an Ubuntu 14.04 system, hello file toomodify is `/etc/rsyslog.d/50-default.conf` and you can replace hello line `*.*;auth,authpriv.none -/var/log/syslog` too`*.*;auth,authpriv,local6.none -/var/log/syslog`.</span></span> <span data-ttu-id="67e12-185">Tego problemu w najnowszej wersji poprawki hello 2.3 (2.3.9007), więc jeśli masz rozszerzenia hello wersji 2.3, ten problem nie powinno się zdarzyć.</span><span class="sxs-lookup"><span data-stu-id="67e12-185">This issue is fixed in hello latest hotfix release of 2.3 (2.3.9007), so if you have hello extension version 2.3, this issue should not happen.</span></span> <span data-ttu-id="67e12-186">Jeśli nadal nie nawet po ponownym uruchomieniu maszyny Wirtualnej, skontaktuj się z nami i pomóc nam Rozwiązywanie problemów z powodu hello poprawka jest zainstalowana najnowsza wersja nie automatycznie.</span><span class="sxs-lookup"><span data-stu-id="67e12-186">If it still does even after restarting your VM, please contact us and help us troubleshoot why hello latest hotfix version is not installed automatically.</span></span>

### <a name="scenario-4-stop-hello-extension-from-collecting-any-logs"></a><span data-ttu-id="67e12-187">Scenariusz 4.</span><span class="sxs-lookup"><span data-stu-id="67e12-187">Scenario 4.</span></span> <span data-ttu-id="67e12-188">Zatrzymaj rozszerzenia hello ze zbierania żadnych dzienników</span><span class="sxs-lookup"><span data-stu-id="67e12-188">Stop hello extension from collecting any logs</span></span>

<span data-ttu-id="67e12-189">W tej sekcji opisano, jak rozszerzenie hello toostop ze zbierania dzienników.</span><span class="sxs-lookup"><span data-stu-id="67e12-189">This section describes how toostop hello extension from collecting logs.</span></span> <span data-ttu-id="67e12-190">Należy pamiętać, że proces agenta monitorowania hello będzie nadal uruchomione i działają prawidłowo, nawet w przypadku tego procesu ponownej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="67e12-190">Note that hello monitoring agent process will be still up and running even with this reconfiguration.</span></span> <span data-ttu-id="67e12-191">Jeśli chcesz całkowicie monitorowania procesu agenta hello toostop, możesz to zrobić przez wyłączenie hello rozszerzenia.</span><span class="sxs-lookup"><span data-stu-id="67e12-191">If you'd like toostop hello monitoring agent process completely, you can do so by disabling hello extension.</span></span> <span data-ttu-id="67e12-192">rozszerzenie hello toodisable polecenia Hello jest `azure vm extension set --disable <vm_name> LinuxDiagnostic Microsoft.OSTCExtensions '2.*'`.</span><span class="sxs-lookup"><span data-stu-id="67e12-192">hello command toodisable hello extension is `azure vm extension set --disable <vm_name> LinuxDiagnostic Microsoft.OSTCExtensions '2.*'`.</span></span>

<span data-ttu-id="67e12-193">Krok 1.</span><span class="sxs-lookup"><span data-stu-id="67e12-193">Step 1.</span></span> <span data-ttu-id="67e12-194">Utwórz plik o nazwie PrivateConfig.json z zawartością hello, który został opisany w scenariuszu 1.</span><span class="sxs-lookup"><span data-stu-id="67e12-194">Create a file named PrivateConfig.json with hello content that was described in Scenario 1.</span></span> <span data-ttu-id="67e12-195">Utwórz plik o nazwie PublicConfig.json z powitania po zawartości:</span><span class="sxs-lookup"><span data-stu-id="67e12-195">Create another file named PublicConfig.json with hello following content:</span></span>

    {
        "perfCfg" : [],
        "enableSyslog" : "false"
    }


<span data-ttu-id="67e12-196">Krok 2.</span><span class="sxs-lookup"><span data-stu-id="67e12-196">Step 2.</span></span> <span data-ttu-id="67e12-197">Uruchom  **vm_name LinuxDiagnostic Microsoft.OSTCExtensions "2 ustawić rozszerzenia maszyny wirtualnej platformy azure.*"--prywatnego config-path PrivateConfig.json — PublicConfig.json publicznego config-path**.</span><span class="sxs-lookup"><span data-stu-id="67e12-197">Run **azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions '2.*' --private-config-path PrivateConfig.json --public-config-path PublicConfig.json**.</span></span>

## <a name="review-your-data"></a><span data-ttu-id="67e12-198">Przejrzyj dane</span><span class="sxs-lookup"><span data-stu-id="67e12-198">Review your data</span></span>

<span data-ttu-id="67e12-199">Witaj wydajności i danych diagnostycznych są przechowywane w tabeli magazynu Azure.</span><span class="sxs-lookup"><span data-stu-id="67e12-199">hello performance and diagnostic data are stored in an Azure Storage table.</span></span> <span data-ttu-id="67e12-200">Przegląd [jak toouse Azure Table Storage w języku Ruby](../../../cosmos-db/table-storage-how-to-use-ruby.md) toolearn jak tooaccess hello danych w magazynie hello tabeli za pomocą skryptów wiersza polecenia platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="67e12-200">Review [How toouse Azure Table Storage from Ruby](../../../cosmos-db/table-storage-how-to-use-ruby.md) toolearn how tooaccess hello data in hello storage table by using Azure CLI scripts.</span></span>

<span data-ttu-id="67e12-201">Ponadto można użyć następujących danych hello tooaccess narzędzi interfejsu użytkownika:</span><span class="sxs-lookup"><span data-stu-id="67e12-201">In addition, you can use following UI tools tooaccess hello data:</span></span>

1. <span data-ttu-id="67e12-202">Eksplorator serwera programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="67e12-202">Visual Studio Server Explorer.</span></span> <span data-ttu-id="67e12-203">Przejdź tooyour konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="67e12-203">Go tooyour storage account.</span></span> <span data-ttu-id="67e12-204">Po uruchomieniu hello maszyny Wirtualnej dla około pięciu minut, zobaczysz hello cztery domyślne tabele: "LinuxCpu", "LinuxDisk", "LinuxMemory" i "Linuxsyslog".</span><span class="sxs-lookup"><span data-stu-id="67e12-204">After hello VM runs for about five minutes, you'll see hello four default tables: “LinuxCpu”, ”LinuxDisk”, ”LinuxMemory”, and ”Linuxsyslog”.</span></span> <span data-ttu-id="67e12-205">Kliknij dwukrotnie hello tabeli nazw tooview hello danych.</span><span class="sxs-lookup"><span data-stu-id="67e12-205">Double-click hello table names tooview hello data.</span></span>
1. <span data-ttu-id="67e12-206">[Eksplorator usługi Azure Storage](https://azurestorageexplorer.codeplex.com/ "Eksploratora usługi Azure Storage").</span><span class="sxs-lookup"><span data-stu-id="67e12-206">[Azure Storage Explorer](https://azurestorageexplorer.codeplex.com/ "Azure Storage Explorer").</span></span>

![Obraz](./media/diagnostic-extension/no1.png)

<span data-ttu-id="67e12-208">Jeśli włączono fileCfg lub perfCfg (zgodnie z opisem w scenariuszach 2 i 3), można użyć danych innych niż domyślne tooview Eksploratora serwera w usłudze Visual Studio i Eksploratora usługi Storage platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="67e12-208">If you've enabled fileCfg or perfCfg (as described in Scenarios 2 and 3), you can use Visual Studio Server Explorer and Azure Storage Explorer tooview non-default data.</span></span>

## <a name="known-issues"></a><span data-ttu-id="67e12-209">Znane problemy</span><span class="sxs-lookup"><span data-stu-id="67e12-209">Known issues</span></span>

* <span data-ttu-id="67e12-210">Witaj Rsyslog informacji i określonych przez klienta plików dziennika można uzyskać tylko za pomocą skryptów.</span><span class="sxs-lookup"><span data-stu-id="67e12-210">hello Rsyslog information and customer-specified log file can only be accessed via scripting.</span></span>
