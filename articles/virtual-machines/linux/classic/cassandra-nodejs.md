---
title: aaaRun Cassandra z systemem Linux na platformie Azure | Dokumentacja firmy Microsoft
description: Jak toorun Cassandra klastra w systemie Linux w maszynach wirtualnych platformy Azure z poziomu aplikacji Node.js
services: virtual-machines-linux
documentationcenter: nodejs
author: tomarcher
manager: routlaw
editor: 
tags: azure-service-management
ms.assetid: 30de1f29-e97d-492f-ae34-41ec83488de0
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: tarcher
ms.openlocfilehash: 381ca301bbe88d3740cf182f9c44fada5b9ba7cc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="running-cassandra-with-linux-on-azure-and-accessing-it-from-nodejs"></a><span data-ttu-id="a24f1-103">Uruchamianie rozwiązania Cassandra w systemie Linux na platformie Azure i uzyskiwanie do niej dostępu na platformie Node.js</span><span class="sxs-lookup"><span data-stu-id="a24f1-103">Running Cassandra with Linux on Azure and Accessing it from Node.js</span></span>
> [!IMPORTANT] 
> <span data-ttu-id="a24f1-104">Platforma Azure ma dwa różne modele wdrażania do tworzenia i pracy z zasobami: [Resource Manager i Model Klasyczny](../../../resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="a24f1-104">Azure has two different deployment models for creating and working with resources: [Resource Manager and Classic](../../../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="a24f1-105">W tym artykule omówiono przy użyciu klasycznego modelu wdrożenia hello.</span><span class="sxs-lookup"><span data-stu-id="a24f1-105">This article covers using hello Classic deployment model.</span></span> <span data-ttu-id="a24f1-106">Firma Microsoft zaleca, aby większości nowych wdrożeń korzystać hello modelu Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="a24f1-106">Microsoft recommends that most new deployments use hello Resource Manager model.</span></span> <span data-ttu-id="a24f1-107">Zobacz szablony Menedżera zasobów dla [Datastax Enterprise](https://azure.microsoft.com/documentation/templates/datastax) i [Spark klastra i Cassandra na CentOS](https://azure.microsoft.com/documentation/templates/spark-and-cassandra-on-centos/).</span><span class="sxs-lookup"><span data-stu-id="a24f1-107">See Resource Manager templates for [Datastax Enterprise](https://azure.microsoft.com/documentation/templates/datastax) and [Spark cluster and Cassandra on CentOS](https://azure.microsoft.com/documentation/templates/spark-and-cassandra-on-centos/).</span></span>

## <a name="overview"></a><span data-ttu-id="a24f1-108">Omówienie</span><span class="sxs-lookup"><span data-stu-id="a24f1-108">Overview</span></span>
<span data-ttu-id="a24f1-109">Microsoft Azure to platforma chmury Otwórz uruchamianego zarówno do firmy Microsoft jako oprogramowania również w innych niż Microsoft, w tym systemów operacyjnych, serwerów aplikacji, oprogramowanie pośredniczące obsługi wiadomości, a także baz danych SQL i NoSQL z obu modeli handlowych i otwórz źródła.</span><span class="sxs-lookup"><span data-stu-id="a24f1-109">Microsoft Azure is an open cloud platform that runs both Microsoft as well as non-Microsoft software which  includes operating systems, application servers, messaging middleware as well as SQL and NoSQL databases from both commercial and open source models.</span></span> <span data-ttu-id="a24f1-110">Tworzenie usług odporne na chmur publicznych, w tym na platformie Azure wymaga staranne planowanie i architektura zamierzonego dla obu serwerów aplikacji jako warstwy dobrze magazynu.</span><span class="sxs-lookup"><span data-stu-id="a24f1-110">Building resilient services on public clouds including Azure requires careful planning and deliberate architecture for both applications servers as well storage layers.</span></span> <span data-ttu-id="a24f1-111">Naturalnie Cassandra w magazynie rozproszonym architektura ułatwia tworzenie wysokiej dostępności systemów, które są odporne na uszkodzenia w przypadku awarii klastra.</span><span class="sxs-lookup"><span data-stu-id="a24f1-111">Cassandra’s distributed storage architecture naturally helps in building highly available systems that are fault tolerant for cluster failures.</span></span> <span data-ttu-id="a24f1-112">Cassandra jest skali chmury bazy danych NoSQL utrzymywana przez Foundation oprogramowania Apache cassandra.apache.org; Cassandra jest napisany w języku Java i dlatego działa zarówno na system Windows, jak i Linux platformy.</span><span class="sxs-lookup"><span data-stu-id="a24f1-112">Cassandra is a cloud scale NoSQL database maintained by Apache Software Foundation at cassandra.apache.org; Cassandra is written in Java and hence runs on both on Windows as well as Linux platforms.</span></span>

<span data-ttu-id="a24f1-113">Witaj w tym artykule koncentruje się tooshow Cassandra wdrożenia na Ubuntu jako klaster pojedynczych i wielu danych Centrum wykorzystaniu maszyny wirtualne Microsoft Azure i sieci wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="a24f1-113">hello focus of this article is tooshow Cassandra deployment on Ubuntu as a single and multi-data center cluster leveraging Microsoft Azure Virtual Machines and Virtual Networks.</span></span> <span data-ttu-id="a24f1-114">Hello wdrożenia klastra w przypadku obciążeń produkcyjnych zoptymalizowanych pod kątem wykracza poza zakres tego artykułu ponieważ wymaga konfiguracji węzła wielu dysków, potrzebne projektowania topologia pierścienia odpowiednie i modelowania toosupport hello danych replikacji, spójność danych, przepływności i wymagania dotyczące wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="a24f1-114">hello cluster deployment for production optimized workloads is out of scope of this article as it requires multi-disk node configuration, appropriate ring topology design and data modeling toosupport hello needed replication, data consistency, throughput and high availability requirements.</span></span>

<span data-ttu-id="a24f1-115">Ten ma artykułu tooshow podstawowych podejście, na czym polega w budynku hello Cassandra klastra porównaniu Docker, Chef lub Puppet, co może uniemożliwić hello wdrożenia infrastruktury dużo prostsze.</span><span class="sxs-lookup"><span data-stu-id="a24f1-115">This article takes a fundamental approach tooshow what is involved in building hello Cassandra cluster compared Docker, Chef or Puppet which can make hello infrastructure deployment a lot easier.</span></span>  

## <a name="hello-deployment-models"></a><span data-ttu-id="a24f1-116">Witaj modele wdrażania</span><span class="sxs-lookup"><span data-stu-id="a24f1-116">hello Deployment Models</span></span>
<span data-ttu-id="a24f1-117">Sieci Microsoft Azure umożliwia wdrożenie hello izolowanego prywatnej klastrów, hello dostępu, które może być ograniczone tooattain zabezpieczenia poprawnie sieci szczegółowych.</span><span class="sxs-lookup"><span data-stu-id="a24f1-117">Microsoft Azure networking allows hello deployment of isolated private clusters, hello access of which can be restricted tooattain fine grained network security.</span></span>  <span data-ttu-id="a24f1-118">Ponieważ ten artykuł dotyczy przedstawiający hello Cassandra wdrożenia na poziomie podstawowym, firma Microsoft nie koncentruje się na powitania poziomu spójności i hello projekt magazynu optymalnej przepustowości.</span><span class="sxs-lookup"><span data-stu-id="a24f1-118">Since this article is about showing hello Cassandra deployment at a fundamental level, we will not focus on hello consistency level and hello optimal storage design for throughput.</span></span> <span data-ttu-id="a24f1-119">Poniżej znajduje się lista hello wymagania sieciowe związane z naszych hipotetyczny klastra:</span><span class="sxs-lookup"><span data-stu-id="a24f1-119">Here is hello list of networking requirements for our hypothetical cluster:</span></span>

* <span data-ttu-id="a24f1-120">Systemy zewnętrzne nie może uzyskać dostępu Cassandra bazy danych z lub poza Azure</span><span class="sxs-lookup"><span data-stu-id="a24f1-120">External systems can’t access Cassandra database from within or outside Azure</span></span>
* <span data-ttu-id="a24f1-121">Cassandra klaster ma toobe za modułem równoważenia obciążenia dla ruchu thrift</span><span class="sxs-lookup"><span data-stu-id="a24f1-121">Cassandra cluster has toobe behind a load balancer for thrift traffic</span></span>
* <span data-ttu-id="a24f1-122">Wdrażanie węzłów Cassandra na dwie grupy w każdej centrum danych dostępności klastra rozszerzone</span><span class="sxs-lookup"><span data-stu-id="a24f1-122">Deploy Cassandra nodes in two groups in each data center for an enhanced cluster availability</span></span>
* <span data-ttu-id="a24f1-123">Zablokowanie klastra hello tak że tylko bezpośrednio toohello dostępu do bazy danych ma farmy serwerów aplikacji</span><span class="sxs-lookup"><span data-stu-id="a24f1-123">Lock down hello cluster so that only application server farm has access toohello database directly</span></span>
* <span data-ttu-id="a24f1-124">Brak publicznego punktów końcowych sieci innych niż SSH</span><span class="sxs-lookup"><span data-stu-id="a24f1-124">No public networking endpoints other than SSH</span></span>
* <span data-ttu-id="a24f1-125">Każdy węzeł Cassandra musi stałym wewnętrznego adresu IP</span><span class="sxs-lookup"><span data-stu-id="a24f1-125">Each Cassandra node needs a fixed internal IP address</span></span>

<span data-ttu-id="a24f1-126">Cassandra może być wdrożony tooa pojedynczy region platformy Azure lub regiony toomultiple oparte na powitania rozproszonych rodzaj obciążenia hello.</span><span class="sxs-lookup"><span data-stu-id="a24f1-126">Cassandra can be deployed tooa single Azure region or toomultiple regions based on hello distributed nature of hello workload.</span></span> <span data-ttu-id="a24f1-127">W przypadku wdrażania modelu może być wykorzystywana tooserve użytkownicy końcowi bliżej tooa określonego obiektu geograficznego za pośrednictwem hello Cassandra w tej samej infrastrukturze.</span><span class="sxs-lookup"><span data-stu-id="a24f1-127">Multi-region deployment model can be leveraged tooserve end users closer tooa particular geography through hello same Cassandra infrastructure.</span></span> <span data-ttu-id="a24f1-128">Cassandra dla wbudowanego węzła replikacji ma opieki synchronizacji hello wielu wzorca zapisuje pochodzących z wielu centrów danych i przedstawia widok spójne hello tooapplications danych.</span><span class="sxs-lookup"><span data-stu-id="a24f1-128">Cassandra’s built-in node replication takes care of hello synchronization of multi-master writes originating from multiple data centers and presents a consistent view of hello data tooapplications.</span></span> <span data-ttu-id="a24f1-129">W przypadku wdrożenia może również pomóc z hello umożliwiają ograniczenie ryzyka związanego z hello szerszych awarie usługi Azure.</span><span class="sxs-lookup"><span data-stu-id="a24f1-129">Multi-region deployment can also help with hello risk mitigation of hello broader Azure service outages.</span></span> <span data-ttu-id="a24f1-130">Topologii replikacji i spójności dostosowywalne w Cassandra pomoże spełnia zróżnicowane potrzeby RPO aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a24f1-130">Cassandra’s tunable consistency and replication topology will help in meeting diverse RPO needs of applications.</span></span>

### <a name="single-region-deployment"></a><span data-ttu-id="a24f1-131">Wdrażanie jednego regionu</span><span class="sxs-lookup"><span data-stu-id="a24f1-131">Single Region Deployment</span></span>
<span data-ttu-id="a24f1-132">Firma Microsoft rozpoczyna się od wdrożenia jednego regionu i zbiorów hello learnings modelu w przypadku tworzenia.</span><span class="sxs-lookup"><span data-stu-id="a24f1-132">We will start with a single region deployment and harvest hello learnings in creating a multi-region model.</span></span> <span data-ttu-id="a24f1-133">Sieci wirtualne platformy Azure będzie podsieci używane toocreate izolowane spełnienia wymagań zabezpieczeń sieci hello wymienionych powyżej.</span><span class="sxs-lookup"><span data-stu-id="a24f1-133">Azure virtual networking will be used toocreate isolated subnets so that hello network security requirements mentioned above can be met.</span></span>  <span data-ttu-id="a24f1-134">proces Hello opisano w temacie Tworzenie wdrożenia jednego regionu hello używa Ubuntu 14.04 LTS i Cassandra 2.08; Jednak proces hello można łatwo można przyjąć toohello innych wersji systemu Linux.</span><span class="sxs-lookup"><span data-stu-id="a24f1-134">hello process described in creating hello single region deployment uses Ubuntu 14.04 LTS and Cassandra 2.08; however, hello process can easily be adopted toohello other Linux variants.</span></span> <span data-ttu-id="a24f1-135">Witaj poniżej przedstawiono niektóre właściwości systemowych hello hello pojedynczy region wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="a24f1-135">hello following are some of hello systemic characteristics of hello single region deployment.</span></span>  

<span data-ttu-id="a24f1-136">**Wysoka dostępność:** hello węzłów Cassandra pokazano hello rysunek 1 są wdrażane dostępności tootwo ustawia tak, aby węzły hello są rozkładane między wiele domen błędów w celu zapewnienia wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="a24f1-136">**High Availability:** hello Cassandra nodes shown in hello Figure 1 are deployed tootwo availability sets so that hello nodes are spread between multiple fault domains for high availability.</span></span> <span data-ttu-id="a24f1-137">Maszyny wirtualne adnotowany przy każdym zestawie dostępności jest mapowane too2 domen błędów.</span><span class="sxs-lookup"><span data-stu-id="a24f1-137">VMs annotated with each availability set is mapped too2 fault domains.</span></span>  <span data-ttu-id="a24f1-138">Microsoft Azure używa hello koncepcji toomanage domeny błędów nieplanowane przestoje (np. awarii sprzętu lub oprogramowania) podczas hello koncepcji uaktualniania domeny (np. hosta lub gościa systemu operacyjnego stosowanie poprawek/uaktualnień, uaktualnień aplikacji) służy do zarządzania zaplanowany czas przestoju.</span><span class="sxs-lookup"><span data-stu-id="a24f1-138">Microsoft Azure uses hello concept of fault domain toomanage unplanned down time (e.g. hardware or software failures) while hello concept of upgrade domain (e.g. host or guest OS patching/upgrades, application upgrades) is used for managing scheduled down time.</span></span> <span data-ttu-id="a24f1-139">Zobacz [odzyskiwania po awarii i wysoką dostępność aplikacji Azure](http://msdn.microsoft.com/library/dn251004.aspx) dla roli hello awarii i uaktualniania domen w celu osiągnięcia wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="a24f1-139">Please see [Disaster Recovery and High Availability for Azure Applications](http://msdn.microsoft.com/library/dn251004.aspx) for hello role of fault and upgrade domains in attaining high availability.</span></span>

![Wdrażanie jednego regionu](./media/cassandra-nodejs/cassandra-linux1.png)

<span data-ttu-id="a24f1-141">Rysunek 1: Wdrożenie pojedynczy region</span><span class="sxs-lookup"><span data-stu-id="a24f1-141">Figure 1: Single region deployment</span></span>

<span data-ttu-id="a24f1-142">Zauważ, że w czasie hello pisania tego dokumentu, Azure nie zezwalają hello jawne mapowanie grupy domeny określonych błędów tooa maszyn wirtualnych. w związku z tym nawet w przypadku modelu wdrażania hello pokazany na rysunku 1, jest statystycznie prawdopodobne, że wszystkie maszyny wirtualne hello mogą być mapowane tootwo domen błędów zamiast cztery.</span><span class="sxs-lookup"><span data-stu-id="a24f1-142">Note that at hello time of this writing, Azure doesn’t allow hello explicit mapping of a group of VMs tooa specific fault domain; consequently, even with hello deployment model shown in Figure 1, it is statistically probable that all hello virtual machines may be mapped tootwo fault domains instead of four.</span></span>

<span data-ttu-id="a24f1-143">**Ruch Thrift równoważenia obciążenia:** bibliotek klienckich Thrift wewnątrz powitania serwera sieci web Połącz toohello klastra za pośrednictwem wewnętrznego modułu równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="a24f1-143">**Load Balancing Thrift Traffic:** Thrift client libraries inside hello web server connect toohello cluster through an internal load balancer.</span></span> <span data-ttu-id="a24f1-144">Wymaga to proces dodawania podsieci toohello usługi równoważenia obciążenia wewnętrznego hello "dane" hello (zobacz rysunek 1) w kontekście hello hello hosting hello Cassandra klastra usługi w chmurze.</span><span class="sxs-lookup"><span data-stu-id="a24f1-144">This requires hello process of adding hello internal load balancer toohello “data” subnet (refer Figure 1) in hello context of hello cloud service hosting hello Cassandra cluster.</span></span> <span data-ttu-id="a24f1-145">Po zdefiniowaniu hello wewnętrznego modułu równoważenia obciążenia każdy węzeł wymaga toobe punkt końcowy ze zrównoważonym obciążeniem hello dodane w adnotacji hello zestawu o zrównoważonym obciążeniu wcześniej nazwę modułu równoważenia obciążenia zdefiniowane.</span><span class="sxs-lookup"><span data-stu-id="a24f1-145">Once hello internal load balancer is defined, each node requires hello load balanced endpoint toobe added with hello annotations of a load balanced set with previously defined load balancer name.</span></span> <span data-ttu-id="a24f1-146">Zobacz [wewnętrzny równoważenia obciążenia Azure ](../../../load-balancer/load-balancer-internal-overview.md)więcej szczegółów.</span><span class="sxs-lookup"><span data-stu-id="a24f1-146">See [Azure Internal Load Balancing ](../../../load-balancer/load-balancer-internal-overview.md)for more details.</span></span>

<span data-ttu-id="a24f1-147">**Ziarna klastra:** koniecznie tooselect hello większości węzłów wysokiej dostępności dla ziarna jako hello nowe węzły będą komunikować się z inicjatora węzłów toodiscover hello topologii hello klastra.</span><span class="sxs-lookup"><span data-stu-id="a24f1-147">**Cluster Seeds:** It is important tooselect hello most highly available nodes for seeds as hello new nodes will communicate with seed nodes toodiscover hello topology of hello cluster.</span></span> <span data-ttu-id="a24f1-148">Jeden węzeł z każdym zestawie dostępności jest wyznaczony jako inicjatora węzłów tooavoid pojedynczy punkt awarii.</span><span class="sxs-lookup"><span data-stu-id="a24f1-148">One node from each availability set is designated as seed nodes tooavoid single point of failure.</span></span>

<span data-ttu-id="a24f1-149">**Współczynnik replikacji i poziomu spójności:** Cassandra w kompilacji w wysokiej dostępności i danych trwałości charakteryzuje się hello współczynnik replikacji (RF - liczby kopii każdego wiersza przechowywane na powitania klastra) i poziomu spójności (liczba repliki toobe odczytana/zapisana przed zwróceniem hello wynik toohello wywołującego).</span><span class="sxs-lookup"><span data-stu-id="a24f1-149">**Replication Factor and Consistency Level:** Cassandra’s build-in high-availability and data durability is characterized by hello Replication Factor (RF - number of copies of each row stored on hello cluster) and Consistency Level (number of replicas toobe read/written before returning hello result toohello caller).</span></span> <span data-ttu-id="a24f1-150">Współczynnik replikacji jest określana podczas hello tworzenie przestrzeni KLUCZY (podobne tooa relacyjnej bazy danych), określić poziom spójności hello podczas wystawiania hello CRUD zapytania.</span><span class="sxs-lookup"><span data-stu-id="a24f1-150">Replication factor is specified during hello KEYSPACE (similar tooa relational database) creation whereas hello consistency level is specified while issuing hello CRUD query.</span></span> <span data-ttu-id="a24f1-151">W dokumentacji Cassandra [Konfigurowanie spójności](http://www.datastax.com/documentation/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html) szczegóły spójności i wzór hello na obliczenia kworum.</span><span class="sxs-lookup"><span data-stu-id="a24f1-151">See Cassandra documentation at [Configuring for Consistency](http://www.datastax.com/documentation/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html) for consistency details and hello formula for quorum computation.</span></span>

<span data-ttu-id="a24f1-152">Cassandra obsługuje dwa typy modeli integralności danych — spójność i spójność ostateczna; Hello współczynnik replikacji i poziomu spójności ze sobą określi, jeśli hello dane są spójne natychmiast po zakończeniu operacji zapisu lub będą zgodne po pewnym czasie.</span><span class="sxs-lookup"><span data-stu-id="a24f1-152">Cassandra supports two types of data integrity models – Consistency and Eventual Consistency; hello Replication Factor and Consistency Level will together determine if hello data will be consistent as soon as a write operation is complete or it will be eventually consistent.</span></span> <span data-ttu-id="a24f1-153">Na przykład określenie KWORUM jako powitalne poziomu spójności będzie zawsze gwarantuje spójności danych dowolnego poziomu spójności poniżej hello liczby replik toobe zapisywane jako wymagane tooattain powoduje danych po pewnym czasie zgodnych KWORUM (np. jeden).</span><span class="sxs-lookup"><span data-stu-id="a24f1-153">For example, specifying QUORUM as hello Consistency Level will always ensures data Consistency while any consistency level, below hello number of replicas toobe written as needed tooattain QUORUM (e.g. ONE) results in data being eventually consistent.</span></span>

<span data-ttu-id="a24f1-154">powyższy współczynnik replikacji 3 i KWORUM klastra 8 węzłów Hello (2 węzły są odczytywane lub zapisywane spójności) poziomu spójności odczytu/zapisu, przełączniki hello teoretycznego utraty na powitania większości 1 węzła dla replikacji grupy przed uruchomieniem aplikacji hello Błąd powitania po raz pierwszy.</span><span class="sxs-lookup"><span data-stu-id="a24f1-154">hello 8-node cluster shown above, with a replication factor of 3 and QUORUM (2 nodes are read or written for consistency) read/write consistency level, can survive hello theoretical loss of at hello most 1 node per replication group before hello application start noticing hello failure.</span></span> <span data-ttu-id="a24f1-155">Przy założeniu, że wszystkie spacje klucza hello również mieć zrównoważonym żądań odczytu/zapisu.</span><span class="sxs-lookup"><span data-stu-id="a24f1-155">This assumes that all hello key spaces have well balanced read/write requests.</span></span>  <span data-ttu-id="a24f1-156">Oto Hello hello parametrów, które będą używane dla klastra hello wdrożone:</span><span class="sxs-lookup"><span data-stu-id="a24f1-156">hello following are hello parameters we will use for hello deployed cluster:</span></span>

<span data-ttu-id="a24f1-157">Konfiguracja klastra Cassandra jednego regionu:</span><span class="sxs-lookup"><span data-stu-id="a24f1-157">Single region Cassandra cluster configuration:</span></span>

| <span data-ttu-id="a24f1-158">Parametr klastra</span><span class="sxs-lookup"><span data-stu-id="a24f1-158">Cluster Parameter</span></span> | <span data-ttu-id="a24f1-159">Wartość</span><span class="sxs-lookup"><span data-stu-id="a24f1-159">Value</span></span> | <span data-ttu-id="a24f1-160">Uwagi</span><span class="sxs-lookup"><span data-stu-id="a24f1-160">Remarks</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a24f1-161">Liczba węzłów (N)</span><span class="sxs-lookup"><span data-stu-id="a24f1-161">Number of Nodes (N)</span></span> |<span data-ttu-id="a24f1-162">8</span><span class="sxs-lookup"><span data-stu-id="a24f1-162">8</span></span> |<span data-ttu-id="a24f1-163">Całkowita liczba węzłów w klastrze hello</span><span class="sxs-lookup"><span data-stu-id="a24f1-163">Total number of nodes in hello cluster</span></span> |
| <span data-ttu-id="a24f1-164">Współczynnik replikacji (RF)</span><span class="sxs-lookup"><span data-stu-id="a24f1-164">Replication Factor (RF)</span></span> |<span data-ttu-id="a24f1-165">3</span><span class="sxs-lookup"><span data-stu-id="a24f1-165">3</span></span> |<span data-ttu-id="a24f1-166">Liczba replik danego wiersza</span><span class="sxs-lookup"><span data-stu-id="a24f1-166">Number of replicas of a given row</span></span> |
| <span data-ttu-id="a24f1-167">Poziom zgodności (Zapisz)</span><span class="sxs-lookup"><span data-stu-id="a24f1-167">Consistency Level (Write)</span></span> |<span data-ttu-id="a24f1-168">QUORUM[(RF/2) +1) = 2] hello wyników z hello jest zaokrąglana formułę</span><span class="sxs-lookup"><span data-stu-id="a24f1-168">QUORUM[(RF/2) +1) = 2] hello result of hello formula is rounded down</span></span> |<span data-ttu-id="a24f1-169">Zapisuje na powitania większości 2 replik przed wysłaniem odpowiedzi hello toohello wywołującego 3 repliki są zapisywane w sposób spójny po pewnym czasie.</span><span class="sxs-lookup"><span data-stu-id="a24f1-169">Writes at hello most 2 replicas before hello response is sent toohello caller; 3rd replica is written in an eventually consistent manner.</span></span> |
| <span data-ttu-id="a24f1-170">Poziom zgodności (odczyt)</span><span class="sxs-lookup"><span data-stu-id="a24f1-170">Consistency Level (Read)</span></span> |<span data-ttu-id="a24f1-171">KWORUM [(RF/2) + 1 = 2] jest zaokrąglana hello wynik formuły hello</span><span class="sxs-lookup"><span data-stu-id="a24f1-171">QUORUM [(RF/2) +1= 2] hello result of hello formula is rounded down</span></span> |<span data-ttu-id="a24f1-172">Odczytuje 2 replik przed wysłaniem odpowiedzi toohello wywołującego.</span><span class="sxs-lookup"><span data-stu-id="a24f1-172">Reads 2 replicas before sending response toohello caller.</span></span> |
| <span data-ttu-id="a24f1-173">Strategii replikacji</span><span class="sxs-lookup"><span data-stu-id="a24f1-173">Replication Strategy</span></span> |<span data-ttu-id="a24f1-174">Zobacz NetworkTopologyStrategy [replikacji danych](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) w Cassandra dokumentacji, aby uzyskać więcej informacji</span><span class="sxs-lookup"><span data-stu-id="a24f1-174">NetworkTopologyStrategy see [Data Replication](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="a24f1-175">Rozumie hello topologii wdrożenia i umieszcza replik w węzłach, tak, aby wszystkie repliki hello nie trafiają do hello sam stojak</span><span class="sxs-lookup"><span data-stu-id="a24f1-175">Understands hello deployment topology and places replicas on nodes so that all hello replicas don’t end up on hello same rack</span></span> |
| <span data-ttu-id="a24f1-176">Snitch</span><span class="sxs-lookup"><span data-stu-id="a24f1-176">Snitch</span></span> |<span data-ttu-id="a24f1-177">Zobacz GossipingPropertyFileSnitch [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) w Cassandra dokumentacji, aby uzyskać więcej informacji</span><span class="sxs-lookup"><span data-stu-id="a24f1-177">GossipingPropertyFileSnitch see [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="a24f1-178">NetworkTopologyStrategy korzysta z koncepcji snitch toounderstand hello topologii.</span><span class="sxs-lookup"><span data-stu-id="a24f1-178">NetworkTopologyStrategy uses a concept of snitch toounderstand hello topology.</span></span> <span data-ttu-id="a24f1-179">GossipingPropertyFileSnitch zapewnia lepszą kontrolę w mapowaniu każdego węzła toodata Centrum i stojaku.</span><span class="sxs-lookup"><span data-stu-id="a24f1-179">GossipingPropertyFileSnitch gives better control in mapping each node toodata center and rack.</span></span> <span data-ttu-id="a24f1-180">Witaj klastra używa następnie toopropagate plotki tych informacji.</span><span class="sxs-lookup"><span data-stu-id="a24f1-180">hello cluster then uses gossip toopropagate this information.</span></span> <span data-ttu-id="a24f1-181">To jest znacznie prostsza w dynamicznej tooPropertyFileSnitch względną ustawienie adresu IP</span><span class="sxs-lookup"><span data-stu-id="a24f1-181">This is much simpler in dynamic IP setting relative tooPropertyFileSnitch</span></span> |

<span data-ttu-id="a24f1-182">**Azure zagadnienia dotyczące klastra Cassandra:** możliwości maszyny wirtualne Microsoft Azure korzysta z magazynu obiektów Blob platformy Azure dysku trwałości; Usługa Azure Storage zapisuje 3 replik każdego dysku, aby uzyskać wysoką trwałością.</span><span class="sxs-lookup"><span data-stu-id="a24f1-182">**Azure Considerations for Cassandra Cluster:** Microsoft Azure Virtual Machines capability uses Azure Blob storage for disk persistence; Azure Storage saves 3 replicas of each disk for high durability.</span></span> <span data-ttu-id="a24f1-183">Oznacza to, każdy wiersz danych wstawione do tabeli Cassandra jest już zapisana w 3 repliki i dlatego spójność danych jest już wykonane obsługę nawet jeśli hello współczynnik replikacji (RF) jest 1.</span><span class="sxs-lookup"><span data-stu-id="a24f1-183">That means each row of data inserted into a Cassandra table is already stored in 3 replicas and hence data consistency is already taken care of even if hello Replication Factor (RF) is 1.</span></span> <span data-ttu-id="a24f1-184">Witaj główny problem z współczynnik replikacji jest 1 jest aplikacji hello wystąpi przestój nawet w przypadku awarii jednego węzła Cassandra.</span><span class="sxs-lookup"><span data-stu-id="a24f1-184">hello main problem with Replication Factor being 1 is that hello application will experience downtime even if a single Cassandra node fails.</span></span> <span data-ttu-id="a24f1-185">Jednak jeśli węzeł nie działa dla problemów hello (np. sprzętu, błędów oprogramowania systemu) rozpoznawany przez kontroler sieci szkieletowej Azure, jego obsługa będzie inicjowana nowy węzeł w jego miejscu przy użyciu hello tego samego dysków.</span><span class="sxs-lookup"><span data-stu-id="a24f1-185">However, if a node is down for hello problems (e.g. hardware, system software failures) recognized by Azure Fabric Controller, it will provision a new node in its place using hello same storage drives.</span></span> <span data-ttu-id="a24f1-186">Inicjowanie obsługi administracyjnej nowych węzła tooreplace hello starego jedną może potrwać kilka minut.</span><span class="sxs-lookup"><span data-stu-id="a24f1-186">Provisioning a new node tooreplace hello old one may take a few minutes.</span></span>  <span data-ttu-id="a24f1-187">Podobnie czynności zaplanowanej konserwacji, jak zmiany system operacyjny gościa, uaktualnia Cassandra, a wprowadzanie uaktualnień hello węzłów w klastrze hello wykonuje Kontroler sieci szkieletowej Azure zmian w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a24f1-187">Similarly for planned maintenance activities like guest OS changes, Cassandra upgrades and application changes Azure Fabric Controller performs rolling upgrades of hello nodes in hello cluster.</span></span>  <span data-ttu-id="a24f1-188">Również uaktualnień stopniowych może potrwać kilka węzłów w dół w czasie i dlatego hello klastra może wystąpić krótki przestój w przypadku kilku partycji.</span><span class="sxs-lookup"><span data-stu-id="a24f1-188">Rolling upgrades also may take down a few nodes at a time and hence hello cluster may experience brief downtime for a few partitions.</span></span> <span data-ttu-id="a24f1-189">Jednak hello dane nie zostaną utracone powodu toohello wbudowane funkcje nadmiarowości usługi Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="a24f1-189">However, hello data will not be lost due toohello built-in Azure Storage redundancy.</span></span>  

<span data-ttu-id="a24f1-190">Dla systemów wdrożone tooAzure, która nie wymaga wysokiej dostępności (np. około 99,9 czyli równoważne too8.76 godzin na rok; zobacz [wysokiej dostępności](http://en.wikipedia.org/wiki/High_availability) szczegółowe informacje) może być możliwe toorun z RF = 1 i poziom spójności równej ONE.</span><span class="sxs-lookup"><span data-stu-id="a24f1-190">For systems deployed tooAzure that doesn’t require high availability (e.g. around 99.9 which is equivalent too8.76 hrs/year; see [High Availability](http://en.wikipedia.org/wiki/High_availability) for details) you may be able toorun with RF=1 and Consistency Level=ONE.</span></span>  <span data-ttu-id="a24f1-191">W przypadku aplikacji o wysokiej dostępności wymagania, RF = 3 i poziomu spójności = KWORUM będą tolerować hello czasu jednego z węzłów hello jeden hello replik.</span><span class="sxs-lookup"><span data-stu-id="a24f1-191">For applications with high availability requirements, RF=3 and Consistency Level=QUORUM will tolerate hello down time of one of hello nodes one of hello replicas.</span></span> <span data-ttu-id="a24f1-192">RF = 1 w przypadku tradycyjnych wdrożeń (np. lokalnego) nie można użyć powodu toohello możliwa utrata danych wynikające z problemów, takich jak awarii dysku.</span><span class="sxs-lookup"><span data-stu-id="a24f1-192">RF=1 in traditional deployments (e.g. on-premises) can’t be used due toohello possible data loss resulting from problems like disk failures.</span></span>   

## <a name="multi-region-deployment"></a><span data-ttu-id="a24f1-193">W przypadku wdrożenia</span><span class="sxs-lookup"><span data-stu-id="a24f1-193">Multi-region Deployment</span></span>
<span data-ttu-id="a24f1-194">Dla dowolnego narzędzia zewnętrznego, należy replikacji danych Centrum rozpoznają i modelu spójności opisane powyżej pomaga przy użyciu hello w przypadku wdrażania fabrycznej hello bez hello Cassandra firmy.</span><span class="sxs-lookup"><span data-stu-id="a24f1-194">Cassandra’s data-center-aware replication and consistency model described above helps with hello multi-region deployment out of hello box without hello need for any external tooling.</span></span> <span data-ttu-id="a24f1-195">Jest to całkowicie różnią się od tradycyjnych relacyjnych baz danych hello, gdzie hello instalację na potrzeby dublowania bazy danych dla wielu wzorców operacji zapisu może być dość złożone.</span><span class="sxs-lookup"><span data-stu-id="a24f1-195">This is quite different from hello traditional relational databases where hello setup for database mirroring for multi-master writes can be quite complex.</span></span> <span data-ttu-id="a24f1-196">Cassandra w regionie wielu konfigurowanie może pomóc w tym hello następujące scenariusze użycia hello:</span><span class="sxs-lookup"><span data-stu-id="a24f1-196">Cassandra in a multi-region set up can help with hello usage scenarios including hello following:</span></span>

<span data-ttu-id="a24f1-197">**Wdrożenia na podstawie bliskości:** aplikacje wielodostępne, wyczyść mapowania użytkowników dzierżawy-do-region, można korzystali przez małe opóźnienia hello w przypadku klastra.</span><span class="sxs-lookup"><span data-stu-id="a24f1-197">**Proximity based deployment:** Multi-tenant applications, with clear mapping of tenant users -to-region, can be benefited by hello multi-region cluster’s low latencies.</span></span> <span data-ttu-id="a24f1-198">Na przykład zarządzanie learning systemów dla instytucji edukacyjnych można wdrożyć klaster rozproszonych w wschodnie stany USA i zachodnie stany USA regionów tooserve hello odpowiednich szkoły wyższe dla transakcyjnego, a także analizy.</span><span class="sxs-lookup"><span data-stu-id="a24f1-198">For example a learning management systems for educational institutions can deploy a distributed cluster in East US and West US regions tooserve hello respective campuses for transactional as well as analytics.</span></span> <span data-ttu-id="a24f1-199">dane Hello można lokalnie spójne o hello czasu odczyty i zapisy i może być ostatecznie spójne w obu regionach hello.</span><span class="sxs-lookup"><span data-stu-id="a24f1-199">hello data can be locally consistent at hello time reads and writes and can be eventually consistent across both hello regions.</span></span> <span data-ttu-id="a24f1-200">Istnieją inne przykłady takich jak dystrybucji nośnika, handlu elektronicznego i niczego i wszystko, co służy geograficznie skoncentrowanego użytkownika podstawowego jest przypadek użycia dobrej dla tego modelu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="a24f1-200">There are other examples like media distribution, e-commerce and anything and everything that serves geo concentrated user base is a good use case for this deployment model.</span></span>

<span data-ttu-id="a24f1-201">**Wysoka dostępność:** nadmiarowość jest kluczowym czynnikiem w celu osiągnięcia wysokiej dostępności sprzętu i oprogramowania; więcej szczegółów, zobacz Tworzenie niezawodnej systemy chmur w systemie Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="a24f1-201">**High Availability:** Redundancy is a key factor in attaining high availability of software and hardware; see Building Reliable Cloud Systems on Microsoft Azure for details.</span></span> <span data-ttu-id="a24f1-202">W systemie Microsoft Azure hello tylko niezawodny sposób realizacji nadmiarowość wartość true, jest wdrażanie klastra w przypadku.</span><span class="sxs-lookup"><span data-stu-id="a24f1-202">On Microsoft Azure, hello only reliable way of achieving true redundancy is by deploying a multi-region cluster.</span></span> <span data-ttu-id="a24f1-203">Aplikacje można wdrożyć w trybie aktywny aktywny lub aktywny / pasywny i jeśli regionów hello jest wyłączony, usługi Azure Traffic Manager można przekierować ruch toohello aktywnego regionu.</span><span class="sxs-lookup"><span data-stu-id="a24f1-203">Applications can be deployed in an active-active or active-passive mode and if one of hello regions is down, Azure Traffic Manager can redirect traffic toohello active region.</span></span>  <span data-ttu-id="a24f1-204">Z wdrożeniem pojedynczego obszaru hello, jeśli hello dostępności 99,9, region dwa wdrożenia może osiągnąć dostępności 99.9999 obliczone przez formułę hello: (1-(1-0.999) * (1-0.999)) * 100); Zobacz hello powyżej papieru, aby uzyskać szczegółowe informacje.</span><span class="sxs-lookup"><span data-stu-id="a24f1-204">With hello single region deployment, if hello availability is 99.9, a two-region deployment can attain an availability of 99.9999 computed by hello formula: (1-(1-0.999) * (1-0.999))*100); see hello above paper for details.</span></span>

<span data-ttu-id="a24f1-205">**Odzyskiwanie po awarii:** Cassandra w przypadku klastra, jeśli przeznaczony prawidłowo, może wytrzymać przestojami centrum danych w wyniku katastrofy.</span><span class="sxs-lookup"><span data-stu-id="a24f1-205">**Disaster Recovery:** Multi-region Cassandra cluster, if properly designed, can withstand catastrophic data center outages.</span></span> <span data-ttu-id="a24f1-206">Jeśli działa jeden region, regiony tooother wdrożonych aplikacji hello można uruchomić obsługująca hello użytkowników końcowych.</span><span class="sxs-lookup"><span data-stu-id="a24f1-206">If one region is down, hello application deployed tooother regions can start serving hello end users.</span></span> <span data-ttu-id="a24f1-207">Jak żadnych innych firm ciągłości implementacji aplikacja hello ma toobe na uszkodzenia na utratę danych, na podstawie hello danych w potoku asynchroniczne hello.</span><span class="sxs-lookup"><span data-stu-id="a24f1-207">Like any other business continuity implementations, hello application has toobe tolerant for some data loss resulting from hello data in hello asynchronous pipeline.</span></span> <span data-ttu-id="a24f1-208">Jednak Cassandra sprawia, że odzyskiwania hello znacznie usprawnić niż czas hello procesów odzyskiwania tradycyjne bazy danych.</span><span class="sxs-lookup"><span data-stu-id="a24f1-208">However, Cassandra makes hello recovery much swifter than hello time taken by traditional database recovery processes.</span></span> <span data-ttu-id="a24f1-209">Rysunek 2 przedstawia hello typowe wdrożenie w przypadku modelu w ośmiu węzłów w każdym regionie.</span><span class="sxs-lookup"><span data-stu-id="a24f1-209">Figure 2 shows hello typical multi-region deployment model with eight nodes in each region.</span></span> <span data-ttu-id="a24f1-210">Zarówno regiony są dublowane obrazy wzajemnie dla hello tego samego elementu symetrycznego; projekty rzeczywistych są zależne od hello typ obciążenia (np. transakcyjnej lub analitycznych), RPO, RTO, spójności danych i wymagań dotyczących dostępności.</span><span class="sxs-lookup"><span data-stu-id="a24f1-210">Both regions are mirror images of each other for hello same of symmetry; real world designs depend on hello workload type (e.g. transactional or analytical), RPO, RTO, data consistency and availability requirements.</span></span>

![Obsługa wielu region wdrożenia](./media/cassandra-nodejs/cassandra-linux2.png)

<span data-ttu-id="a24f1-212">Rysunek 2: W przypadku Cassandra wdrożenia</span><span class="sxs-lookup"><span data-stu-id="a24f1-212">Figure 2: Multi-region Cassandra deployment</span></span>

### <a name="network-integration"></a><span data-ttu-id="a24f1-213">Integracja sieci</span><span class="sxs-lookup"><span data-stu-id="a24f1-213">Network Integration</span></span>
<span data-ttu-id="a24f1-214">Ustawia maszyn wirtualnych wdrożonych tooprivate sieci znajdujących się na dwóch regionach komunikuje się ze sobą przy użyciu tunelu VPN.</span><span class="sxs-lookup"><span data-stu-id="a24f1-214">Sets of virtual machines deployed tooprivate networks located on two regions communicates with each other using a VPN tunnel.</span></span> <span data-ttu-id="a24f1-215">tunel VPN Hello łączy dwie bramy oprogramowanie udostępniane w trakcie procesu wdrażania sieci hello.</span><span class="sxs-lookup"><span data-stu-id="a24f1-215">hello VPN tunnel connects two software gateways provisioned during hello network deployment process.</span></span> <span data-ttu-id="a24f1-216">Zarówno regiony mają podobną architekturę sieci pod względem podsieci "web" i "dane"; Sieć platformy Azure umożliwia tworzenie hello tyle podsieci zgodnie z potrzebami i stosować listy ACL, odpowiednio do potrzeb zabezpieczeń sieci.</span><span class="sxs-lookup"><span data-stu-id="a24f1-216">Both regions have similar network architecture in terms of “web” and “data” subnets; Azure networking allows hello creation of as many subnets as needed and apply ACLs as needed by network security.</span></span> <span data-ttu-id="a24f1-217">Podczas projektowania topologii klastra hello między danych Centrum komunikacji opóźnienia i hello ekonomicznego wpływu hello sieci ruchu potrzeby toobe traktowane jako.</span><span class="sxs-lookup"><span data-stu-id="a24f1-217">While designing hello cluster topology inter data center communication latency and hello economic impact of hello network traffic need toobe considered.</span></span>

### <a name="data-consistency-for-multi-data-center-deployment"></a><span data-ttu-id="a24f1-218">Spójność danych wdrożenia Centrum usługi danych</span><span class="sxs-lookup"><span data-stu-id="a24f1-218">Data Consistency for Multi-Data Center Deployment</span></span>
<span data-ttu-id="a24f1-219">Rozproszone toobe potrzeba wdrożenia świadome hello klastra topologii wpływu na przepustowość i wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="a24f1-219">Distributed deployments need toobe aware of hello cluster topology impact on throughput and high availability.</span></span> <span data-ttu-id="a24f1-220">Hello RF i poziomu spójności toobe potrzeby wybrane w taki sposób, który hello kworum nie zależy od dostępności hello wszystkich centrów danych hello.</span><span class="sxs-lookup"><span data-stu-id="a24f1-220">hello RF and Consistency Level need toobe selected in such way that hello quorum doesn’t depend on hello availability of all hello data centers.</span></span>
<span data-ttu-id="a24f1-221">Dla systemu, który wymaga wysokiej spójności, LOCAL_QUORUM dla spójności poziom (odczyty i zapisy) będzie upewnij się, że hello lokalnego odczytuje i zapisuje są spełnione z lokalne powitania węzły, podczas gdy dane są replikowane asynchronicznie toohello centrów danych zdalnych.</span><span class="sxs-lookup"><span data-stu-id="a24f1-221">For a system that needs high consistency, a LOCAL_QUORUM for consistency level (for reads and writes) will make sure that hello local reads and writes are satisfied from hello local nodes while data is replicated asynchronously toohello remote data centers.</span></span>  <span data-ttu-id="a24f1-222">Tabela 2 zawiera podsumowanie konfiguracji hello szczegóły hello w przypadku klastra opisane w dalszej części hello zwiększenia.</span><span class="sxs-lookup"><span data-stu-id="a24f1-222">Table 2 summarizes hello configuration details for hello multi-region cluster outlined later in hello write up.</span></span>

<span data-ttu-id="a24f1-223">**Konfiguracja klastra Cassandra dwa regionu**</span><span class="sxs-lookup"><span data-stu-id="a24f1-223">**Two-region Cassandra cluster configuration**</span></span>

| <span data-ttu-id="a24f1-224">Parametr klastra</span><span class="sxs-lookup"><span data-stu-id="a24f1-224">Cluster Parameter</span></span> | <span data-ttu-id="a24f1-225">Wartość</span><span class="sxs-lookup"><span data-stu-id="a24f1-225">Value</span></span> | <span data-ttu-id="a24f1-226">Uwagi</span><span class="sxs-lookup"><span data-stu-id="a24f1-226">Remarks</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a24f1-227">Liczba węzłów (N)</span><span class="sxs-lookup"><span data-stu-id="a24f1-227">Number of Nodes (N)</span></span> |<span data-ttu-id="a24f1-228">8 + 8</span><span class="sxs-lookup"><span data-stu-id="a24f1-228">8 + 8</span></span> |<span data-ttu-id="a24f1-229">Całkowita liczba węzłów w klastrze hello</span><span class="sxs-lookup"><span data-stu-id="a24f1-229">Total number of nodes in hello cluster</span></span> |
| <span data-ttu-id="a24f1-230">Współczynnik replikacji (RF)</span><span class="sxs-lookup"><span data-stu-id="a24f1-230">Replication Factor (RF)</span></span> |<span data-ttu-id="a24f1-231">3</span><span class="sxs-lookup"><span data-stu-id="a24f1-231">3</span></span> |<span data-ttu-id="a24f1-232">Liczba replik danego wiersza</span><span class="sxs-lookup"><span data-stu-id="a24f1-232">Number of replicas of a given row</span></span> |
| <span data-ttu-id="a24f1-233">Poziom zgodności (Zapisz)</span><span class="sxs-lookup"><span data-stu-id="a24f1-233">Consistency Level (Write)</span></span> |<span data-ttu-id="a24f1-234">LOCAL_QUORUM [(sum(RF)/2) +1) = 4] hello wynik formuły hello jest zaokrąglana</span><span class="sxs-lookup"><span data-stu-id="a24f1-234">LOCAL_QUORUM [(sum(RF)/2) +1) = 4] hello result of hello formula is rounded down</span></span> |<span data-ttu-id="a24f1-235">węzły 2 zostanie zapisany w centrum danych z pierwszego toohello synchronicznie; Hello dodatkowych węzłów 2 wymaganych dla kworum zostanie zapisany asynchronicznie toohello 2 centrum danych.</span><span class="sxs-lookup"><span data-stu-id="a24f1-235">2 nodes will be written toohello first data center synchronously; hello additional 2 nodes needed for quorum will be written asynchronously toohello 2nd data center.</span></span> |
| <span data-ttu-id="a24f1-236">Poziom zgodności (odczyt)</span><span class="sxs-lookup"><span data-stu-id="a24f1-236">Consistency Level (Read)</span></span> |<span data-ttu-id="a24f1-237">LOCAL_QUORUM ((RF/2) + 1) = 2 hello wynik formuły hello jest zaokrąglana</span><span class="sxs-lookup"><span data-stu-id="a24f1-237">LOCAL_QUORUM ((RF/2) +1) = 2 hello result of hello formula is rounded down</span></span> |<span data-ttu-id="a24f1-238">Żądań odczytu są spełnione przy tylko jeden region; 2 węzły są odczytywane przed wysłaniem odpowiedzi powitania klienta toohello Wstecz.</span><span class="sxs-lookup"><span data-stu-id="a24f1-238">Read requests are satisfied from only one region; 2 nodes are read before hello response is sent back toohello client.</span></span> |
| <span data-ttu-id="a24f1-239">Strategii replikacji</span><span class="sxs-lookup"><span data-stu-id="a24f1-239">Replication Strategy</span></span> |<span data-ttu-id="a24f1-240">Zobacz NetworkTopologyStrategy [replikacji danych](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) w Cassandra dokumentacji, aby uzyskać więcej informacji</span><span class="sxs-lookup"><span data-stu-id="a24f1-240">NetworkTopologyStrategy see [Data Replication](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="a24f1-241">Rozumie hello topologii wdrożenia i umieszcza replik w węzłach, tak, aby wszystkie repliki hello nie trafiają do hello sam stojak</span><span class="sxs-lookup"><span data-stu-id="a24f1-241">Understands hello deployment topology and places replicas on nodes so that all hello replicas don’t end up on hello same rack</span></span> |
| <span data-ttu-id="a24f1-242">Snitch</span><span class="sxs-lookup"><span data-stu-id="a24f1-242">Snitch</span></span> |<span data-ttu-id="a24f1-243">Zobacz GossipingPropertyFileSnitch [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) w Cassandra dokumentacji, aby uzyskać więcej informacji</span><span class="sxs-lookup"><span data-stu-id="a24f1-243">GossipingPropertyFileSnitch see [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="a24f1-244">NetworkTopologyStrategy korzysta z koncepcji snitch toounderstand hello topologii.</span><span class="sxs-lookup"><span data-stu-id="a24f1-244">NetworkTopologyStrategy uses a concept of snitch toounderstand hello topology.</span></span> <span data-ttu-id="a24f1-245">GossipingPropertyFileSnitch zapewnia lepszą kontrolę w mapowaniu każdego węzła toodata Centrum i stojaku.</span><span class="sxs-lookup"><span data-stu-id="a24f1-245">GossipingPropertyFileSnitch gives better control in mapping each node toodata center and rack.</span></span> <span data-ttu-id="a24f1-246">Witaj klastra używa następnie toopropagate plotki tych informacji.</span><span class="sxs-lookup"><span data-stu-id="a24f1-246">hello cluster then uses gossip toopropagate this information.</span></span> <span data-ttu-id="a24f1-247">To jest znacznie prostsza w dynamicznej tooPropertyFileSnitch względną ustawienie adresu IP</span><span class="sxs-lookup"><span data-stu-id="a24f1-247">This is much simpler in dynamic IP setting relative tooPropertyFileSnitch</span></span> |

## <a name="hello-software-configuration"></a><span data-ttu-id="a24f1-248">Witaj konfiguracji oprogramowania</span><span class="sxs-lookup"><span data-stu-id="a24f1-248">hello SOFTWARE CONFIGURATION</span></span>
<span data-ttu-id="a24f1-249">następujące wersje oprogramowania Hello są używane podczas wdrażania hello:</span><span class="sxs-lookup"><span data-stu-id="a24f1-249">hello following software versions are used during hello deployment:</span></span>

<table>
<tr><th><span data-ttu-id="a24f1-250">Oprogramowanie</span><span class="sxs-lookup"><span data-stu-id="a24f1-250">Software</span></span></th><th><span data-ttu-id="a24f1-251">Element źródłowy</span><span class="sxs-lookup"><span data-stu-id="a24f1-251">Source</span></span></th><th><span data-ttu-id="a24f1-252">Wersja</span><span class="sxs-lookup"><span data-stu-id="a24f1-252">Version</span></span></th></tr>
<tr><td><span data-ttu-id="a24f1-253">ŚRODOWISKA JRE</span><span class="sxs-lookup"><span data-stu-id="a24f1-253">JRE</span></span>    </td><td><span data-ttu-id="a24f1-254">[ŚRODOWISKA JRE 8](http://www.oracle.com/technetwork/java/javase/downloads/server-jre8-downloads-2133154.html) </span><span class="sxs-lookup"><span data-stu-id="a24f1-254">[JRE 8](http://www.oracle.com/technetwork/java/javase/downloads/server-jre8-downloads-2133154.html) </span></span></td><td><span data-ttu-id="a24f1-255">8U5</span><span class="sxs-lookup"><span data-stu-id="a24f1-255">8U5</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-256">JNA</span><span class="sxs-lookup"><span data-stu-id="a24f1-256">JNA</span></span>    </td><td><span data-ttu-id="a24f1-257">[JNA](https://github.com/twall/jna) </span><span class="sxs-lookup"><span data-stu-id="a24f1-257">[JNA](https://github.com/twall/jna) </span></span></td><td> <span data-ttu-id="a24f1-258">3.2.7</span><span class="sxs-lookup"><span data-stu-id="a24f1-258">3.2.7</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-259">Cassandra</span><span class="sxs-lookup"><span data-stu-id="a24f1-259">Cassandra</span></span></td><td>[<span data-ttu-id="a24f1-260">Apache Cassandra 2.0.8</span><span class="sxs-lookup"><span data-stu-id="a24f1-260">Apache Cassandra 2.0.8</span></span>](http://www.apache.org/dist/cassandra/2.0.8/apache-cassandra-2.0.8-bin.tar.gz)</td><td> <span data-ttu-id="a24f1-261">2.0.8</span><span class="sxs-lookup"><span data-stu-id="a24f1-261">2.0.8</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-262">Ubuntu</span><span class="sxs-lookup"><span data-stu-id="a24f1-262">Ubuntu</span></span>    </td><td><span data-ttu-id="a24f1-263">[Microsoft Azure](https://azure.microsoft.com/) </span><span class="sxs-lookup"><span data-stu-id="a24f1-263">[Microsoft Azure](https://azure.microsoft.com/) </span></span></td><td><span data-ttu-id="a24f1-264">14.04 LTS</span><span class="sxs-lookup"><span data-stu-id="a24f1-264">14.04 LTS</span></span></td></tr>
</table>

<span data-ttu-id="a24f1-265">Ponieważ pobieranie środowiska JRE wymaga ręcznego akceptacji licencji Oracle, toosimplify hello wdrożenia, pobierania wszystkich hello później przekazywanie do obrazu szablonu Ubuntu hello, firma Microsoft będzie tworzony jako klaster toohello macierzystych pulpitu toohello wymaganego oprogramowania wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="a24f1-265">Since downloading of JRE requires manual acceptance of Oracle license, toosimplify hello deployment, download all hello required software toohello desktop for later uploading into hello Ubuntu template image we will be creating as a precursor toohello cluster deployment.</span></span>

<span data-ttu-id="a24f1-266">Pobierz hello powyżej oprogramowania w katalogu pobierania dobrze znanego (np. %TEMP%/downloads w systemie Windows lub ~/Downloads na większości dystrybucje systemu Linux lub Mac.) na komputerze lokalnym hello.</span><span class="sxs-lookup"><span data-stu-id="a24f1-266">Download hello above software into a well-known download directory (e.g. %TEMP%/downloads on Windows or ~/Downloads on most Linux distributions or Mac) on hello local computer.</span></span>

### <a name="create-ubuntu-vm"></a><span data-ttu-id="a24f1-267">TWORZENIE MASZYNY WIRTUALNEJ SYSTEMU UBUNTU</span><span class="sxs-lookup"><span data-stu-id="a24f1-267">CREATE UBUNTU VM</span></span>
<span data-ttu-id="a24f1-268">W tym kroku procesu hello utworzymy Ubuntu obrazu z hello wstępnie wymagane oprogramowanie, aby hello obrazu mogą być ponownie używane do inicjowania obsługi kilka węzłów Cassandra.</span><span class="sxs-lookup"><span data-stu-id="a24f1-268">In this step of hello process we will create Ubuntu image with hello pre-requisite software so that hello image can be reused for provisioning several Cassandra nodes.</span></span>  

#### <a name="step-1-generate-ssh-key-pair"></a><span data-ttu-id="a24f1-269">Krok 1: Generuje parę kluczy SSH</span><span class="sxs-lookup"><span data-stu-id="a24f1-269">STEP 1: Generate SSH key pair</span></span>
<span data-ttu-id="a24f1-270">Platforma Azure wymaga X509 klucza publicznego, który jest PEM lub DER zakodowane w hello inicjowania obsługi administracyjnej czasu.</span><span class="sxs-lookup"><span data-stu-id="a24f1-270">Azure needs an X509 public key that is either PEM or DER encoded at hello provisioning time.</span></span> <span data-ttu-id="a24f1-271">Generowanie pary kluczy publiczny/prywatny przy użyciu instrukcji hello znajdujący się w sposób tooUse SSH z systemem Linux na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="a24f1-271">Generate a public/private key pair using hello instructions located at How tooUse SSH with Linux on Azure.</span></span> <span data-ttu-id="a24f1-272">Jeśli planujesz toouse putty.exe jako klient SSH w systemie Windows lub Linux, masz tooconvert hello PEM kodowany w formacie tooPPK klucza prywatnego RSA przy użyciu puttygen.exe; Witaj odpowiednie instrukcje znajdują się w hello powyżej strony sieci web.</span><span class="sxs-lookup"><span data-stu-id="a24f1-272">If you plan toouse putty.exe as an SSH client either on Windows or Linux, you have tooconvert hello PEM encoded RSA private key tooPPK format using puttygen.exe; hello instructions for this can be found in hello above web page.</span></span>

#### <a name="step-2-create-ubuntu-template-vm"></a><span data-ttu-id="a24f1-273">Krok 2: Tworzenie Ubuntu szablonu maszyny Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="a24f1-273">STEP 2: Create Ubuntu template VM</span></span>
<span data-ttu-id="a24f1-274">toocreate hello szablonu maszyny Wirtualnej, zaloguj się do hello Azure classic hello portalu i użycie następującej sekwencji: kliknij przycisk Nowy, obliczeń, maszyny WIRTUALNEJ, z GALERII, UBUNTU, Ubuntu Server 14.04 LTS, a następnie kliknij strzałkę w prawo hello.</span><span class="sxs-lookup"><span data-stu-id="a24f1-274">toocreate hello template VM, log into hello Azure classic portal and use hello following sequence: Click NEW, COMPUTE, VIRTUAL MACHINE, FROM GALLERY, UBUNTU, Ubuntu Server 14.04 LTS, and then click hello right arrow.</span></span> <span data-ttu-id="a24f1-275">Samouczek opisujący toocreate Maszynę wirtualną systemu Linux, zobacz temat Tworzenie maszyny wirtualnej systemem Linux.</span><span class="sxs-lookup"><span data-stu-id="a24f1-275">For a tutorial that describes how toocreate a Linux VM, see Create a Virtual Machine Running Linux.</span></span>

<span data-ttu-id="a24f1-276">Wprowadź następujące informacje na ekranie powitania "konfiguracja maszyny wirtualnej" #1 hello:</span><span class="sxs-lookup"><span data-stu-id="a24f1-276">Enter hello following information on hello “Virtual machine configuration” screen #1:</span></span>

<table>
<tr><th><span data-ttu-id="a24f1-277">NAZWA POLA</span><span class="sxs-lookup"><span data-stu-id="a24f1-277">FIELD NAME</span></span>              </td><td>       <span data-ttu-id="a24f1-278">WARTOŚĆ POLA</span><span class="sxs-lookup"><span data-stu-id="a24f1-278">FIELD VALUE</span></span>               </td><td>         <span data-ttu-id="a24f1-279">UWAGI</span><span class="sxs-lookup"><span data-stu-id="a24f1-279">REMARKS</span></span>                </td><tr>
<tr><td><span data-ttu-id="a24f1-280">DATA WYDANIA WERSJI</span><span class="sxs-lookup"><span data-stu-id="a24f1-280">VERSION RELEASE DATE</span></span>    </td><td> <span data-ttu-id="a24f1-281">Wybierz datę z hello listy rozwijanej</span><span class="sxs-lookup"><span data-stu-id="a24f1-281">Select a date from hello drop down</span></span></td><td></td><tr>
<tr><td><span data-ttu-id="a24f1-282">NAZWA MASZYNY WIRTUALNEJ</span><span class="sxs-lookup"><span data-stu-id="a24f1-282">VIRTUAL MACHINE NAME</span></span>    </td><td> <span data-ttu-id="a24f1-283">Szablon przypadku</span><span class="sxs-lookup"><span data-stu-id="a24f1-283">cass-template</span></span>                   </td><td> <span data-ttu-id="a24f1-284">Jest to nazwa hosta hello hello maszyny Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="a24f1-284">This is hello hostname of hello VM</span></span> </td><tr>
<tr><td><span data-ttu-id="a24f1-285">WARSTWY</span><span class="sxs-lookup"><span data-stu-id="a24f1-285">TIER</span></span>                     </td><td> <span data-ttu-id="a24f1-286">STANDARDOWA</span><span class="sxs-lookup"><span data-stu-id="a24f1-286">STANDARD</span></span>                           </td><td> <span data-ttu-id="a24f1-287">Pozostaw domyślną hello</span><span class="sxs-lookup"><span data-stu-id="a24f1-287">Leave hello default</span></span>              </td><tr>
<tr><td><span data-ttu-id="a24f1-288">ROZMIAR</span><span class="sxs-lookup"><span data-stu-id="a24f1-288">SIZE</span></span>                     </td><td> <span data-ttu-id="a24f1-289">A1</span><span class="sxs-lookup"><span data-stu-id="a24f1-289">A1</span></span>                              </td><td><span data-ttu-id="a24f1-290">Wybierz hello, maszyna wirtualna jest oparta na powitania we/wy potrzeb. w tym celu należy pozostawić domyślne hello</span><span class="sxs-lookup"><span data-stu-id="a24f1-290">Select hello VM based on hello IO needs; for this purpose leave hello default</span></span> </td><tr>
<tr><td> <span data-ttu-id="a24f1-291">NOWĄ NAZWĘ UŻYTKOWNIKA</span><span class="sxs-lookup"><span data-stu-id="a24f1-291">NEW USER NAME</span></span>             </td><td> <span data-ttu-id="a24f1-292">localadmin</span><span class="sxs-lookup"><span data-stu-id="a24f1-292">localadmin</span></span>                       </td><td> <span data-ttu-id="a24f1-293">"Administrator" jest zastrzeżoną nazwą użytkownika w xx 12 Ubuntu i po</span><span class="sxs-lookup"><span data-stu-id="a24f1-293">"admin" is a reserved user name in Ubuntu 12.xx and after</span></span></td><tr>
<tr><td> <span data-ttu-id="a24f1-294">UWIERZYTELNIANIE</span><span class="sxs-lookup"><span data-stu-id="a24f1-294">AUTHENTICATION</span></span>         </td><td> <span data-ttu-id="a24f1-295">Kliknij pole wyboru</span><span class="sxs-lookup"><span data-stu-id="a24f1-295">Click check box</span></span>                 </td><td><span data-ttu-id="a24f1-296">Sprawdź, czy ma toosecure przy użyciu klucza SSH</span><span class="sxs-lookup"><span data-stu-id="a24f1-296">Check if you want toosecure with an SSH key</span></span> </td><tr>
<tr><td> <span data-ttu-id="a24f1-297">CERTYFIKAT</span><span class="sxs-lookup"><span data-stu-id="a24f1-297">CERTIFICATE</span></span>             </td><td> <span data-ttu-id="a24f1-298">Nazwa pliku certyfikatu klucza publicznego hello</span><span class="sxs-lookup"><span data-stu-id="a24f1-298">file name of hello public key certificate</span></span> </td><td> <span data-ttu-id="a24f1-299">Użyj klucza publicznego hello wcześniej wygenerowany</span><span class="sxs-lookup"><span data-stu-id="a24f1-299">Use hello public key generated previously</span></span></td><tr>
<tr><td> <span data-ttu-id="a24f1-300">Nowe hasło</span><span class="sxs-lookup"><span data-stu-id="a24f1-300">New Password</span></span>    </td><td> <span data-ttu-id="a24f1-301">Silne hasło</span><span class="sxs-lookup"><span data-stu-id="a24f1-301">strong password</span></span> </td><td> </td><tr>
<tr><td> <span data-ttu-id="a24f1-302">Potwierdź hasło</span><span class="sxs-lookup"><span data-stu-id="a24f1-302">Confirm Password</span></span>    </td><td> <span data-ttu-id="a24f1-303">Silne hasło</span><span class="sxs-lookup"><span data-stu-id="a24f1-303">strong password</span></span> </td><td></td><tr>
</table>

<span data-ttu-id="a24f1-304">Wprowadź następujące informacje na ekranie powitania "konfiguracja maszyny wirtualnej" #2 hello:</span><span class="sxs-lookup"><span data-stu-id="a24f1-304">Enter hello following information on hello “Virtual machine configuration” screen #2:</span></span>

<table>
<tr><th><span data-ttu-id="a24f1-305">NAZWA POLA</span><span class="sxs-lookup"><span data-stu-id="a24f1-305">FIELD NAME</span></span>             </th><th> <span data-ttu-id="a24f1-306">WARTOŚĆ POLA</span><span class="sxs-lookup"><span data-stu-id="a24f1-306">FIELD VALUE</span></span>                       </th><th> <span data-ttu-id="a24f1-307">UWAGI</span><span class="sxs-lookup"><span data-stu-id="a24f1-307">REMARKS</span></span>                                 </th></tr>
<tr><td> <span data-ttu-id="a24f1-308">USŁUGI W CHMURZE</span><span class="sxs-lookup"><span data-stu-id="a24f1-308">CLOUD SERVICE</span></span>    </td><td> <span data-ttu-id="a24f1-309">Utwórz nową usługę w chmurze</span><span class="sxs-lookup"><span data-stu-id="a24f1-309">Create a new cloud service</span></span>    </td><td><span data-ttu-id="a24f1-310">Usługa w chmurze jest zasoby obliczeniowe kontenera, takich jak maszyny wirtualne</span><span class="sxs-lookup"><span data-stu-id="a24f1-310">Cloud service is a container compute resources like virtual machines</span></span></td></tr>
<tr><td> <span data-ttu-id="a24f1-311">NAZWA DNS USŁUGI W CHMURZE</span><span class="sxs-lookup"><span data-stu-id="a24f1-311">CLOUD SERVICE DNS NAME</span></span>    </td><td><span data-ttu-id="a24f1-312">ubuntu template.cloudapp.net</span><span class="sxs-lookup"><span data-stu-id="a24f1-312">ubuntu-template.cloudapp.net</span></span>    </td><td><span data-ttu-id="a24f1-313">Nadaj nazwę modułu równoważenia obciążenia o niesprecyzowanym maszyny</span><span class="sxs-lookup"><span data-stu-id="a24f1-313">Give a machine agnostic load balancer name</span></span></td></tr>
<tr><td> <span data-ttu-id="a24f1-314">REGION/GRUPY KOLIGACJI/SIECI WIRTUALNEJ</span><span class="sxs-lookup"><span data-stu-id="a24f1-314">REGION/AFFINITY GROUP/VIRTUAL NETWORK</span></span> </td><td>    <span data-ttu-id="a24f1-315">Zachodnie stany USA</span><span class="sxs-lookup"><span data-stu-id="a24f1-315">West US</span></span>    </td><td> <span data-ttu-id="a24f1-316">Wybierz region, z którego dostęp do aplikacji sieci web hello Cassandra klastra</span><span class="sxs-lookup"><span data-stu-id="a24f1-316">Select a region from which your web applications access hello Cassandra cluster</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-317">KONTO MAGAZYNU</span><span class="sxs-lookup"><span data-stu-id="a24f1-317">STORAGE ACCOUNT</span></span> </td><td>    <span data-ttu-id="a24f1-318">Użyj domyślnej</span><span class="sxs-lookup"><span data-stu-id="a24f1-318">Use default</span></span>    </td><td><span data-ttu-id="a24f1-319">Użyj domyślnego konta magazynu hello lub wstępnie utworzone konto magazynu w określonym regionie</span><span class="sxs-lookup"><span data-stu-id="a24f1-319">Use hello default storage account  or a pre-created storage account in a particular region</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-320">ZESTAW DOSTĘPNOŚCI</span><span class="sxs-lookup"><span data-stu-id="a24f1-320">AVAILABILITY SET</span></span> </td><td>    <span data-ttu-id="a24f1-321">Brak</span><span class="sxs-lookup"><span data-stu-id="a24f1-321">None</span></span> </td><td>    <span data-ttu-id="a24f1-322">Pozostaw to pole puste</span><span class="sxs-lookup"><span data-stu-id="a24f1-322">Leave it blank</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-323">PUNKTY KOŃCOWE</span><span class="sxs-lookup"><span data-stu-id="a24f1-323">ENDPOINTS</span></span>    </td><td><span data-ttu-id="a24f1-324">Użyj domyślnej</span><span class="sxs-lookup"><span data-stu-id="a24f1-324">Use default</span></span> </td><td>    <span data-ttu-id="a24f1-325">Użyj hello domyślnej konfiguracji SSH</span><span class="sxs-lookup"><span data-stu-id="a24f1-325">Use hello default SSH configuration</span></span> </td></tr>
</table>

<span data-ttu-id="a24f1-326">Kliknij strzałkę w prawo, pozostaw wartości domyślne hello na ekranie powitania #3, a następnie kliknij przycisk hello "wyboru" przycisk toocomplete hello wirtualna procesu inicjowania obsługi administracyjnej.</span><span class="sxs-lookup"><span data-stu-id="a24f1-326">Click right arrow, leave hello defaults on hello screen #3 and click hello “check” button toocomplete hello VM provisioning process.</span></span> <span data-ttu-id="a24f1-327">Po kilku minutach hello maszyny Wirtualnej z hello nazwy "ubuntu-template" powinna być w stanie "uruchomiona".</span><span class="sxs-lookup"><span data-stu-id="a24f1-327">After a few minutes, hello VM with hello name “ubuntu-template” should be in a “running” status.</span></span>

### <a name="install-hello-necessary-software"></a><span data-ttu-id="a24f1-328">Zainstaluj hello niezbędne oprogramowanie</span><span class="sxs-lookup"><span data-stu-id="a24f1-328">INSTALL hello NECESSARY SOFTWARE</span></span>
#### <a name="step-1-upload-tarballs"></a><span data-ttu-id="a24f1-329">Krok 1: Przekazywanie tarballs</span><span class="sxs-lookup"><span data-stu-id="a24f1-329">STEP 1: Upload tarballs</span></span>
<span data-ttu-id="a24f1-330">Przy użyciu protokołu scp lub pscp, hello kopiowania pobrane wcześniej oprogramowanie zbyt ~ / directory pliki do pobrania przy użyciu hello zgodny z formatem polecenia:</span><span class="sxs-lookup"><span data-stu-id="a24f1-330">Using scp or pscp, copy hello previously downloaded software too~/downloads directory using hello following command format:</span></span>

##### <a name="pscp-server-jre-8u5-linux-x64targz-localadminhk-cas-templatecloudappnethomelocaladmindownloadsserver-jre-8u5-linux-x64targz"></a><span data-ttu-id="a24f1-331">pscp server-środowiska jre-8u5-linux-x64.tar.gzlocaladmin@hk-cas-template.cloudapp.net:/home/localadmin/downloads/server-jre-8u5-linux-x64.tar.gz</span><span class="sxs-lookup"><span data-stu-id="a24f1-331">pscp server-jre-8u5-linux-x64.tar.gz localadmin@hk-cas-template.cloudapp.net:/home/localadmin/downloads/server-jre-8u5-linux-x64.tar.gz</span></span>
<span data-ttu-id="a24f1-332">Powtórz hello powyżej polecenia dla środowiska JRE również podobnie jak w przypadku hello Cassandra bitów.</span><span class="sxs-lookup"><span data-stu-id="a24f1-332">Repeat hello above command for JRE as well as for hello Cassandra bits.</span></span>

#### <a name="step-2-prepare-hello-directory-structure-and-extract-hello-archives"></a><span data-ttu-id="a24f1-333">Krok 2: Przygotowanie hello strukturę katalogów i wyodrębniać hello archiwa</span><span class="sxs-lookup"><span data-stu-id="a24f1-333">STEP 2: Prepare hello directory structure and extract hello archives</span></span>
<span data-ttu-id="a24f1-334">Zaloguj się do hello maszyny Wirtualnej i Utwórz strukturę katalogów hello i Wyodrębnij oprogramowania jako superużytkownika przy użyciu skryptu bash hello poniżej:</span><span class="sxs-lookup"><span data-stu-id="a24f1-334">Log into hello VM and create hello directory structure and extract software as a super user using hello bash script below:</span></span>

    #!/bin/bash
    CASS_INSTALL_DIR="/opt/cassandra"
    JRE_INSTALL_DIR="/opt/java"
    CASS_DATA_DIR="/var/lib/cassandra"
    CASS_LOG_DIR="/var/log/cassandra"
    DOWNLOADS_DIR="~/downloads"
    JRE_TARBALL="server-jre-8u5-linux-x64.tar.gz"
    CASS_TARBALL="apache-cassandra-2.0.8-bin.tar.gz"
    SVC_USER="localadmin"

    RESET_ERROR=1
    MKDIR_ERROR=2

    reset_installation ()
    {
       rm -rf $CASS_INSTALL_DIR 2> /dev/null
       rm -rf $JRE_INSTALL_DIR 2> /dev/null
       rm -rf $CASS_DATA_DIR 2> /dev/null
       rm -rf $CASS_LOG_DIR 2> /dev/null
    }
    make_dir ()
    {
       if [ -z "$1" ]
       then
          echo "make_dir: invalid directory name"
          exit $MKDIR_ERROR
       fi

       if [ -d "$1" ]
       then
          echo "make_dir: directory already exists"
          exit $MKDIR_ERROR
       fi

       mkdir $1 2>/dev/null
       if [ $? != 0 ]
       then
          echo "directory creation failed"
          exit $MKDIR_ERROR
       fi
    }

    unzip()
    {
       if [ $# == 2 ]
       then
          tar xzf $1 -C $2
       else
          echo "archive error"
       fi

    }

    if [ -n "$1" ]
    then
       SVC_USER=$1
    fi

    reset_installation
    make_dir $CASS_INSTALL_DIR
    make_dir $JRE_INSTALL_DIR
    make_dir $CASS_DATA_DIR
    make_dir $CASS_LOG_DIR

    #unzip JRE and Cassandra
    unzip $HOME/downloads/$JRE_TARBALL $JRE_INSTALL_DIR
    unzip $HOME/downloads/$CASS_TARBALL $CASS_INSTALL_DIR

    #Change hello ownership toohello service credentials

    chown -R $SVC_USER:$GROUP $CASS_DATA_DIR
    chown -R $SVC_USER:$GROUP $CASS_LOG_DIR
    echo "edit /etc/profile tooadd JRE toohello PATH"
    echo "installation is complete"


<span data-ttu-id="a24f1-335">Po wklejeniu tego skryptu do okna vim upewnij się, że tooremove hello karetki zwracany ("\r") przy użyciu hello następujące polecenie:</span><span class="sxs-lookup"><span data-stu-id="a24f1-335">If you paste this script into vim window, make sure tooremove hello carriage return (‘\r”) using hello following command:</span></span>

    tr -d '\r' <infile.sh >outfile.sh

#### <a name="step-3-edit-etcprofile"></a><span data-ttu-id="a24f1-336">Krok 3: Edytowanie profilu itp.</span><span class="sxs-lookup"><span data-stu-id="a24f1-336">Step 3: Edit etc/profile</span></span>
<span data-ttu-id="a24f1-337">Dołącz następujące hello na końcu hello:</span><span class="sxs-lookup"><span data-stu-id="a24f1-337">Append hello following at hello end:</span></span>

    JAVA_HOME=/opt/java/jdk1.8.0_05
    CASS_HOME= /opt/cassandra/apache-cassandra-2.0.8
    PATH=$PATH:$HOME/bin:$JAVA_HOME/bin:$CASS_HOME/bin
    export JAVA_HOME
    export CASS_HOME
    export PATH

#### <a name="step-4-install-jna-for-production-systems"></a><span data-ttu-id="a24f1-338">Krok 4: Instalacja JNA dla systemów produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="a24f1-338">Step 4: Install JNA for production systems</span></span>
<span data-ttu-id="a24f1-339">Użyj hello następujące polecenie sekwencji: hello następujące polecenie, zainstaluj jna-3.2.7.jar i too/usr/share.java jna-platform — 3.2.7.jar katalogu sudo stanie get zainstaluje libjna java</span><span class="sxs-lookup"><span data-stu-id="a24f1-339">Use hello following command sequence: hello following command will install jna-3.2.7.jar and jna-platform-3.2.7.jar too/usr/share.java directory sudo apt-get install libjna-java</span></span>

<span data-ttu-id="a24f1-340">Utwórz łącza symbolicznego w katalogu CASS_HOME/lib $ tak, aby Cassandra uruchamiania skryptu można znaleźć te słoików:</span><span class="sxs-lookup"><span data-stu-id="a24f1-340">Create symbolic links in $CASS_HOME/lib directory so that Cassandra startup script can find these jars:</span></span>

    ln -s /usr/share/java/jna-3.2.7.jar $CASS_HOME/lib/jna.jar

    ln -s /usr/share/java/jna-platform-3.2.7.jar $CASS_HOME/lib/jna-platform.jar

#### <a name="step-5-configure-cassandrayaml"></a><span data-ttu-id="a24f1-341">Krok 5: Konfigurowanie cassandra.yaml</span><span class="sxs-lookup"><span data-stu-id="a24f1-341">Step 5: Configure cassandra.yaml</span></span>
<span data-ttu-id="a24f1-342">Edytuj cassandra.yaml na każdej maszyny Wirtualnej konfiguracji tooreflect wymagane przez wszystkie maszyny wirtualne hello [firma Microsoft będzie dostosować to podczas inicjowania obsługi rzeczywistych hello]:</span><span class="sxs-lookup"><span data-stu-id="a24f1-342">Edit cassandra.yaml on each VM tooreflect configuration needed by all hello virtual machines [we will tweak this during hello actual provisioning]:</span></span>

<table>
<tr><th><span data-ttu-id="a24f1-343">Nazwa pola</span><span class="sxs-lookup"><span data-stu-id="a24f1-343">Field Name</span></span>   </th><th> <span data-ttu-id="a24f1-344">Wartość</span><span class="sxs-lookup"><span data-stu-id="a24f1-344">Value</span></span>  </th><th>    <span data-ttu-id="a24f1-345">Uwagi</span><span class="sxs-lookup"><span data-stu-id="a24f1-345">Remarks</span></span> </th></tr>
<tr><td><span data-ttu-id="a24f1-346">nazwa_klastra</span><span class="sxs-lookup"><span data-stu-id="a24f1-346">cluster_name</span></span> </td><td>    <span data-ttu-id="a24f1-347">"CustomerService"</span><span class="sxs-lookup"><span data-stu-id="a24f1-347">“CustomerService”</span></span>    </td><td> <span data-ttu-id="a24f1-348">Użyj nazwy hello, które odzwierciedla wdrożenia</span><span class="sxs-lookup"><span data-stu-id="a24f1-348">Use hello name that reflects your deployment</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-349">listen_address</span><span class="sxs-lookup"><span data-stu-id="a24f1-349">listen_address</span></span>    </td><td><span data-ttu-id="a24f1-350">[pozostaw to pole puste]</span><span class="sxs-lookup"><span data-stu-id="a24f1-350">[leave it blank]</span></span>    </td><td> <span data-ttu-id="a24f1-351">Usuń "localhost"</span><span class="sxs-lookup"><span data-stu-id="a24f1-351">Delete “localhost”</span></span> </td></tr>
<tr><td><span data-ttu-id="a24f1-352">rpc_addres</span><span class="sxs-lookup"><span data-stu-id="a24f1-352">rpc_addres</span></span>   </td><td><span data-ttu-id="a24f1-353">[pozostaw to pole puste]</span><span class="sxs-lookup"><span data-stu-id="a24f1-353">[leave it blank]</span></span>    </td><td> <span data-ttu-id="a24f1-354">Usuń "localhost"</span><span class="sxs-lookup"><span data-stu-id="a24f1-354">Delete “localhost”</span></span> </td></tr>
<tr><td><span data-ttu-id="a24f1-355">ziarna</span><span class="sxs-lookup"><span data-stu-id="a24f1-355">seeds</span></span>    </td><td><span data-ttu-id="a24f1-356">"10.1.2.4, 10.1.2.6, 10.1.2.8"</span><span class="sxs-lookup"><span data-stu-id="a24f1-356">"10.1.2.4, 10.1.2.6, 10.1.2.8"</span></span>    </td><td><span data-ttu-id="a24f1-357">Lista wszystkich adresów IP hello, które są oznaczone jako dane.</span><span class="sxs-lookup"><span data-stu-id="a24f1-357">List of  all hello IP addresses which are designated as seeds.</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-358">endpoint_snitch</span><span class="sxs-lookup"><span data-stu-id="a24f1-358">endpoint_snitch</span></span> </td><td> <span data-ttu-id="a24f1-359">org.apache.cassandra.locator.GossipingPropertyFileSnitch</span><span class="sxs-lookup"><span data-stu-id="a24f1-359">org.apache.cassandra.locator.GossipingPropertyFileSnitch</span></span> </td><td> <span data-ttu-id="a24f1-360">To jest używany przez hello NetworkTopologyStrateg wnioskowanie hello centrum danych i hello stojak hello maszyny Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="a24f1-360">This is used by hello NetworkTopologyStrateg for inferring hello data center and hello rack of hello VM</span></span></td></tr>
</table>

#### <a name="step-6-capture-hello-vm-image"></a><span data-ttu-id="a24f1-361">Krok 6: Przechwytywanie obrazu maszyny Wirtualnej hello</span><span class="sxs-lookup"><span data-stu-id="a24f1-361">Step 6: Capture hello VM image</span></span>
<span data-ttu-id="a24f1-362">Zaloguj się do maszyny wirtualnej hello przy użyciu nazwy hosta hello (hk-urzędów certyfikacji template.cloudapp.net) i klucz prywatny SSH hello wcześniej utworzony.</span><span class="sxs-lookup"><span data-stu-id="a24f1-362">Log into hello virtual machine using hello hostname (hk-cas-template.cloudapp.net) and hello SSH private key previously created.</span></span> <span data-ttu-id="a24f1-363">Zobacz temat jak tooUse SSH z systemem Linux na platformie Azure, aby uzyskać szczegółowe informacje w sposób toolog za pomocą hello polecenia ssh lub putty.exe.</span><span class="sxs-lookup"><span data-stu-id="a24f1-363">See How tooUse SSH with Linux on Azure for details on how toolog in using hello command ssh or putty.exe.</span></span>

<span data-ttu-id="a24f1-364">Wykonaj powitania po sekwencji obraz powitania toocapture akcje:</span><span class="sxs-lookup"><span data-stu-id="a24f1-364">Execute hello following sequence of actions toocapture hello image:</span></span>

##### <a name="1-deprovision"></a><span data-ttu-id="a24f1-365">1. Deprovision</span><span class="sxs-lookup"><span data-stu-id="a24f1-365">1. Deprovision</span></span>
<span data-ttu-id="a24f1-366">Użyj polecenia hello "sudo agenta waagent — deprovision + użytkownika" tooremove określone informacje o wystąpieniu maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="a24f1-366">Use hello command “sudo waagent –deprovision+user” tooremove Virtual Machine instance specific information.</span></span> <span data-ttu-id="a24f1-367">Zobacz dla [jak tooCapture maszyny wirtualnej systemu Linux](capture-image.md) szczegółowe na proces przechwytywania obrazu hello tooUse jako szablon.</span><span class="sxs-lookup"><span data-stu-id="a24f1-367">See for [How tooCapture a Linux Virtual Machine](capture-image.md) tooUse as a Template more details on hello image capture process.</span></span>

##### <a name="2-shutdown-hello-vm"></a><span data-ttu-id="a24f1-368">2: hello zamykania maszyny Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="a24f1-368">2: Shutdown hello VM</span></span>
<span data-ttu-id="a24f1-369">Upewnij się, że zostanie wyróżniona hello maszyny wirtualnej, a następnie kliknij łącze zamknięcia hello z hello dolnym pasku poleceń.</span><span class="sxs-lookup"><span data-stu-id="a24f1-369">Make sure that hello virtual machine is highlighted and click hello SHUTDOWN link from hello bottom command bar.</span></span>

##### <a name="3-capture-hello-image"></a><span data-ttu-id="a24f1-370">3: obraz powitania przechwytywania</span><span class="sxs-lookup"><span data-stu-id="a24f1-370">3: Capture hello image</span></span>
<span data-ttu-id="a24f1-371">Upewnij się, że zostanie wyróżniona hello maszyny wirtualnej, a następnie kliknij łącze PRZECHWYTYWANIA hello z hello dolnym pasku poleceń.</span><span class="sxs-lookup"><span data-stu-id="a24f1-371">Make sure that hello virtual machine is highlighted and click hello CAPTURE link from hello bottom command bar.</span></span> <span data-ttu-id="a24f1-372">W następnym ekranie powitania nadaj nazwę obrazu (np. hk-cas-2-08-ub-14-04-2014071), odpowiednich opis obrazu, a następnie kliknij przycisk proces PRZECHWYTYWANIA hello toofinish znaku "wyboru" hello.</span><span class="sxs-lookup"><span data-stu-id="a24f1-372">In hello next screen, give an IMAGE NAME (e.g. hk-cas-2-08-ub-14-04-2014071), appropriate IMAGE DESCRIPTION, and click hello “check” mark toofinish hello CAPTURE process.</span></span>

<span data-ttu-id="a24f1-373">To może zająć kilka sekund i obraz powitania powinny być dostępne w sekcji Moje obrazy hello Galeria obrazów.</span><span class="sxs-lookup"><span data-stu-id="a24f1-373">This will take a few seconds and hello image should be available in MY IMAGES section of hello image gallery.</span></span> <span data-ttu-id="a24f1-374">pomyślnie przechwycony obraz powitania Hello źródłowej maszyny Wirtualnej zostaną automatycznie usunięte.</span><span class="sxs-lookup"><span data-stu-id="a24f1-374">hello source VM will be automatically deleted after hello image is successfully captured.</span></span> 

## <a name="single-region-deployment-process"></a><span data-ttu-id="a24f1-375">Proces wdrażania pojedynczy Region</span><span class="sxs-lookup"><span data-stu-id="a24f1-375">Single Region Deployment Process</span></span>
<span data-ttu-id="a24f1-376">**Krok 1: Tworzenie sieci wirtualnej hello** Zaloguj się do hello portalu Azure i utworzyć sieć wirtualną (klasyczne) z atrybutami hello pokazano hello w poniższej tabeli.</span><span class="sxs-lookup"><span data-stu-id="a24f1-376">**Step 1: Create hello Virtual Network** Log into hello Azure portal and create a virtual network (classic) with hello attributes shown in hello following table.</span></span> <span data-ttu-id="a24f1-377">Zobacz [Utwórz sieć wirtualną (klasyczne) przy użyciu portalu Azure hello](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) szczegółowy opis kroków procesu hello.</span><span class="sxs-lookup"><span data-stu-id="a24f1-377">See [Create a virtual network (classic) using hello Azure portal](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) for detailed steps of hello process.</span></span>      

<table>
<tr><th><span data-ttu-id="a24f1-378">Nazwa atrybutu maszyny Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="a24f1-378">VM Attribute Name</span></span></th><th><span data-ttu-id="a24f1-379">Wartość</span><span class="sxs-lookup"><span data-stu-id="a24f1-379">Value</span></span></th><th><span data-ttu-id="a24f1-380">Uwagi</span><span class="sxs-lookup"><span data-stu-id="a24f1-380">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="a24f1-381">Nazwa</span><span class="sxs-lookup"><span data-stu-id="a24f1-381">Name</span></span></td><td><span data-ttu-id="a24f1-382">sieć wirtualna — przypadku zachód nam</span><span class="sxs-lookup"><span data-stu-id="a24f1-382">vnet-cass-west-us</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="a24f1-383">Region</span><span class="sxs-lookup"><span data-stu-id="a24f1-383">Region</span></span></td><td><span data-ttu-id="a24f1-384">Zachodnie stany USA</span><span class="sxs-lookup"><span data-stu-id="a24f1-384">West US</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="a24f1-385">Serwery DNS</span><span class="sxs-lookup"><span data-stu-id="a24f1-385">DNS Servers</span></span></td><td><span data-ttu-id="a24f1-386">Brak</span><span class="sxs-lookup"><span data-stu-id="a24f1-386">None</span></span></td><td><span data-ttu-id="a24f1-387">Zignoruj ten komunikat, ponieważ nie używamy serwera DNS</span><span class="sxs-lookup"><span data-stu-id="a24f1-387">Ignore this as we are not using a DNS Server</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-388">Przestrzeń adresów</span><span class="sxs-lookup"><span data-stu-id="a24f1-388">Address Space</span></span></td><td><span data-ttu-id="a24f1-389">10.1.0.0/16</span><span class="sxs-lookup"><span data-stu-id="a24f1-389">10.1.0.0/16</span></span></td><td></td></tr>    
<tr><td><span data-ttu-id="a24f1-390">Uruchamianie adresu IP</span><span class="sxs-lookup"><span data-stu-id="a24f1-390">Starting IP</span></span></td><td><span data-ttu-id="a24f1-391">10.1.0.0</span><span class="sxs-lookup"><span data-stu-id="a24f1-391">10.1.0.0</span></span></td><td></td></tr>    
<tr><td><span data-ttu-id="a24f1-392">CIDR</span><span class="sxs-lookup"><span data-stu-id="a24f1-392">CIDR</span></span> </td><td><span data-ttu-id="a24f1-393">/16 (65531)</span><span class="sxs-lookup"><span data-stu-id="a24f1-393">/16 (65531)</span></span></td><td></td></tr>
</table>

<span data-ttu-id="a24f1-394">Dodaj następujące podsieci hello:</span><span class="sxs-lookup"><span data-stu-id="a24f1-394">Add hello following subnets:</span></span>

<table>
<tr><th><span data-ttu-id="a24f1-395">Nazwa</span><span class="sxs-lookup"><span data-stu-id="a24f1-395">Name</span></span></th><th><span data-ttu-id="a24f1-396">Uruchamianie adresu IP</span><span class="sxs-lookup"><span data-stu-id="a24f1-396">Starting IP</span></span></th><th><span data-ttu-id="a24f1-397">CIDR</span><span class="sxs-lookup"><span data-stu-id="a24f1-397">CIDR</span></span></th><th><span data-ttu-id="a24f1-398">Uwagi</span><span class="sxs-lookup"><span data-stu-id="a24f1-398">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="a24f1-399">sieci Web</span><span class="sxs-lookup"><span data-stu-id="a24f1-399">web</span></span></td><td><span data-ttu-id="a24f1-400">10.1.1.0</span><span class="sxs-lookup"><span data-stu-id="a24f1-400">10.1.1.0</span></span></td><td><span data-ttu-id="a24f1-401">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="a24f1-401">/24 (251)</span></span></td><td><span data-ttu-id="a24f1-402">Podsieć hello kolektywu serwerów sieci web</span><span class="sxs-lookup"><span data-stu-id="a24f1-402">Subnet for hello web farm</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-403">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-403">data</span></span></td><td><span data-ttu-id="a24f1-404">10.1.2.0</span><span class="sxs-lookup"><span data-stu-id="a24f1-404">10.1.2.0</span></span></td><td><span data-ttu-id="a24f1-405">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="a24f1-405">/24 (251)</span></span></td><td><span data-ttu-id="a24f1-406">Podsieć hello węzłów bazy danych</span><span class="sxs-lookup"><span data-stu-id="a24f1-406">Subnet for hello database nodes</span></span></td></tr>
</table>

<span data-ttu-id="a24f1-407">Dane i podsieci w sieci Web mogą być chronione przy użyciu grup zabezpieczeń sieci, pokrycie hello wykracza poza zakres tego artykułu.</span><span class="sxs-lookup"><span data-stu-id="a24f1-407">Data and Web subnets can be protected through network security groups hello coverage of which is out of scope for this article.</span></span>  

<span data-ttu-id="a24f1-408">**Krok 2: Maszyny wirtualne należy** przy użyciu obrazu hello utworzone wcześniej, utworzymy hello następujące maszyny wirtualne w chmurze powitania serwera "hk-c-svc Zachód" ją i powiązać je toohello odpowiednich podsieci, jak pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="a24f1-408">**Step 2: Provision Virtual Machines** Using hello image created previously, we will create hello following virtual machines in hello cloud server “hk-c-svc-west” and bind them toohello respective subnets as shown below:</span></span>

<table>
<tr><th><span data-ttu-id="a24f1-409">Nazwa komputera</span><span class="sxs-lookup"><span data-stu-id="a24f1-409">Machine Name</span></span>    </th><th><span data-ttu-id="a24f1-410">Podsieć</span><span class="sxs-lookup"><span data-stu-id="a24f1-410">Subnet</span></span>    </th><th><span data-ttu-id="a24f1-411">Adres IP</span><span class="sxs-lookup"><span data-stu-id="a24f1-411">IP Address</span></span>    </th><th><span data-ttu-id="a24f1-412">Zestaw dostępności</span><span class="sxs-lookup"><span data-stu-id="a24f1-412">Availability set</span></span></th><th><span data-ttu-id="a24f1-413">DC/Rack</span><span class="sxs-lookup"><span data-stu-id="a24f1-413">DC/Rack</span></span></th><th><span data-ttu-id="a24f1-414">Inicjatora?</span><span class="sxs-lookup"><span data-stu-id="a24f1-414">Seed?</span></span></th></tr>
<tr><td><span data-ttu-id="a24f1-415">HK-c1-zachód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-415">hk-c1-west-us</span></span>    </td><td><span data-ttu-id="a24f1-416">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-416">data</span></span>    </td><td><span data-ttu-id="a24f1-417">10.1.2.4</span><span class="sxs-lookup"><span data-stu-id="a24f1-417">10.1.2.4</span></span>    </td><td><span data-ttu-id="a24f1-418">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="a24f1-418">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="a24f1-419">DC = stojak WESTUS = szafa1</span><span class="sxs-lookup"><span data-stu-id="a24f1-419">dc =WESTUS rack =rack1</span></span> </td><td><span data-ttu-id="a24f1-420">Tak</span><span class="sxs-lookup"><span data-stu-id="a24f1-420">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-421">HK-c2-zachód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-421">hk-c2-west-us</span></span>    </td><td><span data-ttu-id="a24f1-422">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-422">data</span></span>    </td><td><span data-ttu-id="a24f1-423">10.1.2.5</span><span class="sxs-lookup"><span data-stu-id="a24f1-423">10.1.2.5</span></span>    </td><td><span data-ttu-id="a24f1-424">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="a24f1-424">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="a24f1-425">DC = stojak WESTUS = szafa1</span><span class="sxs-lookup"><span data-stu-id="a24f1-425">dc =WESTUS rack =rack1</span></span>    </td><td><span data-ttu-id="a24f1-426">Nie</span><span class="sxs-lookup"><span data-stu-id="a24f1-426">No</span></span> </td></tr>
<tr><td><span data-ttu-id="a24f1-427">HK-c3-zachód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-427">hk-c3-west-us</span></span>    </td><td><span data-ttu-id="a24f1-428">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-428">data</span></span>    </td><td><span data-ttu-id="a24f1-429">10.1.2.6</span><span class="sxs-lookup"><span data-stu-id="a24f1-429">10.1.2.6</span></span>    </td><td><span data-ttu-id="a24f1-430">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="a24f1-430">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="a24f1-431">DC = stojak WESTUS = szafa2</span><span class="sxs-lookup"><span data-stu-id="a24f1-431">dc =WESTUS rack =rack2</span></span>    </td><td><span data-ttu-id="a24f1-432">Tak</span><span class="sxs-lookup"><span data-stu-id="a24f1-432">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-433">HK-c4-zachód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-433">hk-c4-west-us</span></span>    </td><td><span data-ttu-id="a24f1-434">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-434">data</span></span>    </td><td><span data-ttu-id="a24f1-435">10.1.2.7</span><span class="sxs-lookup"><span data-stu-id="a24f1-435">10.1.2.7</span></span>    </td><td><span data-ttu-id="a24f1-436">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="a24f1-436">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="a24f1-437">DC = stojak WESTUS = szafa2</span><span class="sxs-lookup"><span data-stu-id="a24f1-437">dc =WESTUS rack =rack2</span></span>    </td><td><span data-ttu-id="a24f1-438">Nie</span><span class="sxs-lookup"><span data-stu-id="a24f1-438">No</span></span> </td></tr>
<tr><td><span data-ttu-id="a24f1-439">HK-c5-zachód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-439">hk-c5-west-us</span></span>    </td><td><span data-ttu-id="a24f1-440">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-440">data</span></span>    </td><td><span data-ttu-id="a24f1-441">10.1.2.8</span><span class="sxs-lookup"><span data-stu-id="a24f1-441">10.1.2.8</span></span>    </td><td><span data-ttu-id="a24f1-442">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="a24f1-442">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="a24f1-443">DC = stojak WESTUS = szafa3</span><span class="sxs-lookup"><span data-stu-id="a24f1-443">dc =WESTUS rack =rack3</span></span>    </td><td><span data-ttu-id="a24f1-444">Tak</span><span class="sxs-lookup"><span data-stu-id="a24f1-444">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-445">HK-c6-zachód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-445">hk-c6-west-us</span></span>    </td><td><span data-ttu-id="a24f1-446">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-446">data</span></span>    </td><td><span data-ttu-id="a24f1-447">10.1.2.9</span><span class="sxs-lookup"><span data-stu-id="a24f1-447">10.1.2.9</span></span>    </td><td><span data-ttu-id="a24f1-448">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="a24f1-448">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="a24f1-449">DC = stojak WESTUS = szafa3</span><span class="sxs-lookup"><span data-stu-id="a24f1-449">dc =WESTUS rack =rack3</span></span>    </td><td><span data-ttu-id="a24f1-450">Nie</span><span class="sxs-lookup"><span data-stu-id="a24f1-450">No</span></span> </td></tr>
<tr><td><span data-ttu-id="a24f1-451">HK-c7-zachód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-451">hk-c7-west-us</span></span>    </td><td><span data-ttu-id="a24f1-452">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-452">data</span></span>    </td><td><span data-ttu-id="a24f1-453">10.1.2.10</span><span class="sxs-lookup"><span data-stu-id="a24f1-453">10.1.2.10</span></span>    </td><td><span data-ttu-id="a24f1-454">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="a24f1-454">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="a24f1-455">DC = stojak WESTUS = rack4</span><span class="sxs-lookup"><span data-stu-id="a24f1-455">dc =WESTUS rack =rack4</span></span>    </td><td><span data-ttu-id="a24f1-456">Tak</span><span class="sxs-lookup"><span data-stu-id="a24f1-456">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-457">HK-c8-zachód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-457">hk-c8-west-us</span></span>    </td><td><span data-ttu-id="a24f1-458">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-458">data</span></span>    </td><td><span data-ttu-id="a24f1-459">10.1.2.11</span><span class="sxs-lookup"><span data-stu-id="a24f1-459">10.1.2.11</span></span>    </td><td><span data-ttu-id="a24f1-460">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="a24f1-460">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="a24f1-461">DC = stojak WESTUS = rack4</span><span class="sxs-lookup"><span data-stu-id="a24f1-461">dc =WESTUS rack =rack4</span></span>    </td><td><span data-ttu-id="a24f1-462">Nie</span><span class="sxs-lookup"><span data-stu-id="a24f1-462">No</span></span> </td></tr>
<tr><td><span data-ttu-id="a24f1-463">HK-w1 — zachód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-463">hk-w1-west-us</span></span>    </td><td><span data-ttu-id="a24f1-464">sieci Web</span><span class="sxs-lookup"><span data-stu-id="a24f1-464">web</span></span>    </td><td><span data-ttu-id="a24f1-465">10.1.1.4</span><span class="sxs-lookup"><span data-stu-id="a24f1-465">10.1.1.4</span></span>    </td><td><span data-ttu-id="a24f1-466">HK p-aset-1</span><span class="sxs-lookup"><span data-stu-id="a24f1-466">hk-w-aset-1</span></span>    </td><td>                       </td><td><span data-ttu-id="a24f1-467">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="a24f1-467">N/A</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-468">HK-w2 — zachód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-468">hk-w2-west-us</span></span>    </td><td><span data-ttu-id="a24f1-469">sieci Web</span><span class="sxs-lookup"><span data-stu-id="a24f1-469">web</span></span>    </td><td><span data-ttu-id="a24f1-470">10.1.1.5</span><span class="sxs-lookup"><span data-stu-id="a24f1-470">10.1.1.5</span></span>    </td><td><span data-ttu-id="a24f1-471">HK p-aset-1</span><span class="sxs-lookup"><span data-stu-id="a24f1-471">hk-w-aset-1</span></span>    </td><td>                       </td><td><span data-ttu-id="a24f1-472">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="a24f1-472">N/A</span></span></td></tr>
</table>

<span data-ttu-id="a24f1-473">Tworzenie hello powyżej listy maszyn wirtualnych wymaga hello następującego procesu:</span><span class="sxs-lookup"><span data-stu-id="a24f1-473">Creation of hello above list of VMs requires hello following process:</span></span>

1. <span data-ttu-id="a24f1-474">Tworzenie usługi w chmurze pusta w określonym regionie</span><span class="sxs-lookup"><span data-stu-id="a24f1-474">Create an empty cloud service in a particular region</span></span>
2. <span data-ttu-id="a24f1-475">Utwórz maszynę Wirtualną z wcześniej przechwycony obraz powitania i dołącz je toohello sieci wirtualnej utworzonej wcześniej; Powtórz tę czynność dla wszystkich hello maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="a24f1-475">Create a VM from hello previously captured image and attach it toohello virtual network created previously; repeat this for all hello VMs</span></span>
3. <span data-ttu-id="a24f1-476">Dodawanie usługi w chmurze toohello usługi równoważenia obciążenia wewnętrznego i dołącz je podsieci toohello "dane"</span><span class="sxs-lookup"><span data-stu-id="a24f1-476">Add an internal load balancer toohello cloud service and attach it toohello “data” subnet</span></span>
4. <span data-ttu-id="a24f1-477">Dla każdej maszyny Wirtualnej utworzone wcześniej Dodaj punkt końcowy równoważenia obciążenia dla ruchu thrift za pośrednictwem ze zrównoważonym obciążeniem połączony zestaw toohello wcześniej utworzony wewnętrznego modułu równoważenia obciążenia</span><span class="sxs-lookup"><span data-stu-id="a24f1-477">For each VM created previously, add a load balanced endpoint for thrift traffic through a load balanced set connected toohello previously created internal load balancer</span></span>

<span data-ttu-id="a24f1-478">Witaj powyżej procesu mogą być wykonywane przy użyciu klasycznego portalu Azure; Użyj komputera z systemem Windows (Użyj maszyny Wirtualnej na platformie Azure, jeśli nie masz komputera z systemem Windows tooa dostępu), użyj wszystkich maszyn wirtualnych 8 powitania po tooprovision skrypt programu PowerShell automatycznie.</span><span class="sxs-lookup"><span data-stu-id="a24f1-478">hello above process can be executed using Azure classic portal; use a Windows machine (use a VM on Azure if you don't have access tooa Windows machine), use hello following PowerShell script tooprovision all 8 VMs automatically.</span></span>

<span data-ttu-id="a24f1-479">**Lista 1: Skrypt programu PowerShell do obsługi maszyn wirtualnych**</span><span class="sxs-lookup"><span data-stu-id="a24f1-479">**List 1: PowerShell script for provisioning virtual machines**</span></span>

        #Tested with Azure Powershell - November 2014
        #This powershell script deployes a number of VMs from an existing image inside an Azure region
        #Import your Azure subscription into hello current Powershell session before proceeding
        #hello process: 1. create Azure Storage account, 2. create virtual network, 3.create hello VM template, 2. crate a list of VMs from hello template

        #fundamental variables - change these tooreflect your subscription
        $country="us"; $region="west"; $vnetName = "your_vnet_name";$storageAccount="your_storage_account"
        $numVMs=8;$prefix = "hk-cass";$ilbIP="your_ilb_ip"
        $subscriptionName = "Azure_subscription_name";
        $vmSize="ExtraSmall"; $imageName="your_linux_image_name"
        $ilbName="ThriftInternalLB"; $thriftEndPoint="ThriftEndPoint"

        #generated variables
        $serviceName = "$prefix-svc-$region-$country"; $azureRegion = "$region $country"

        $vmNames = @()
        for ($i=0; $i -lt $numVMs; $i++)
        {
           $vmNames+=("$prefix-vm"+($i+1) + "-$region-$country" );
        }

        #select an Azure subscription already imported into Powershell session
        Select-AzureSubscription -SubscriptionName $subscriptionName -Current
        Set-AzureSubscription -SubscriptionName $subscriptionName -CurrentStorageAccountName $storageAccount

        #create an empty cloud service
        New-AzureService -ServiceName $serviceName -Label "hkcass$region" -Location $azureRegion
        Write-Host "Created $serviceName"

        $VMList= @()   # stores hello list of azure vm configuration objects
        #create hello list of VMs
        foreach($vmName in $vmNames)
        {
           $VMList += New-AzureVMConfig -Name $vmName -InstanceSize ExtraSmall -ImageName $imageName |
           Add-AzureProvisioningConfig -Linux -LinuxUser "localadmin" -Password "Local123" |
           Set-AzureSubnet "data"
        }

        New-AzureVM -ServiceName $serviceName -VNetName $vnetName -VMs $VMList

        #Create internal load balancer
        Add-AzureInternalLoadBalancer -ServiceName $serviceName -InternalLoadBalancerName $ilbName -SubnetName "data" -StaticVNetIPAddress "$ilbIP"
        Write-Host "Created $ilbName"
        #Add add hello thrift endpoint toohello internal load balancer for all hello VMs
        foreach($vmName in $vmNames)
        {
            Get-AzureVM -ServiceName $serviceName -Name $vmName |
                Add-AzureEndpoint -Name $thriftEndPoint -LBSetName "ThriftLBSet" -Protocol tcp -LocalPort 9160 -PublicPort 9160 -ProbePort 9160 -ProbeProtocol tcp -ProbeIntervalInSeconds 10 -InternalLoadBalancerName $ilbName |
                Update-AzureVM

            Write-Host "created $vmName"     
        }

<span data-ttu-id="a24f1-480">**Krok 3: Konfigurowanie Cassandra na każdej maszynie Wirtualnej**</span><span class="sxs-lookup"><span data-stu-id="a24f1-480">**Step 3: Configure Cassandra on each VM**</span></span>

<span data-ttu-id="a24f1-481">Zaloguj się do hello maszyny Wirtualnej i wykonaj następujące hello:</span><span class="sxs-lookup"><span data-stu-id="a24f1-481">Log into hello VM and perform hello following:</span></span>

* <span data-ttu-id="a24f1-482">Edytuj $CASS_HOME/conf/cassandra-rackdc.properties toospecify hello Centrum i stojak właściwości danych:</span><span class="sxs-lookup"><span data-stu-id="a24f1-482">Edit $CASS_HOME/conf/cassandra-rackdc.properties toospecify hello data center and rack properties:</span></span>
  
       dc =EASTUS, rack =rack1
* <span data-ttu-id="a24f1-483">Edytuj węzły inicjatora tooconfigure cassandra.yaml, jak pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="a24f1-483">Edit cassandra.yaml tooconfigure seed nodes as below:</span></span>
  
       Seeds: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10"

<span data-ttu-id="a24f1-484">**Krok 4: Uruchom hello maszyn wirtualnych i przetestować hello klastra**</span><span class="sxs-lookup"><span data-stu-id="a24f1-484">**Step 4: Start hello VMs and test hello cluster**</span></span>

<span data-ttu-id="a24f1-485">Zaloguj się do jednego z węzłów hello, (np. hk-c1-zachód us) i hello uruchom następujące polecenie toosee hello stan klastra hello:</span><span class="sxs-lookup"><span data-stu-id="a24f1-485">Log into one of hello nodes (e.g. hk-c1-west-us) and run hello following command toosee hello status of hello cluster:</span></span>

       nodetool –h 10.1.2.4 –p 7199 status

<span data-ttu-id="a24f1-486">Powinny pojawić się hello wyświetlania podobne toohello jeden poniżej 8 węzłów klastra:</span><span class="sxs-lookup"><span data-stu-id="a24f1-486">You should see hello display similar toohello one below for an 8-node cluster:</span></span>

<table>
<tr><th><span data-ttu-id="a24f1-487">Stan</span><span class="sxs-lookup"><span data-stu-id="a24f1-487">Status</span></span></th><th><span data-ttu-id="a24f1-488">Adres</span><span class="sxs-lookup"><span data-stu-id="a24f1-488">Address</span></span>    </th><th><span data-ttu-id="a24f1-489">Ładowanie</span><span class="sxs-lookup"><span data-stu-id="a24f1-489">Load</span></span>    </th><th><span data-ttu-id="a24f1-490">Tokeny</span><span class="sxs-lookup"><span data-stu-id="a24f1-490">Tokens</span></span>    </th><th><span data-ttu-id="a24f1-491">Właścicielem</span><span class="sxs-lookup"><span data-stu-id="a24f1-491">Owns</span></span> </th><th><span data-ttu-id="a24f1-492">Identyfikator hosta</span><span class="sxs-lookup"><span data-stu-id="a24f1-492">Host ID</span></span>    </th><th><span data-ttu-id="a24f1-493">Stojak</span><span class="sxs-lookup"><span data-stu-id="a24f1-493">Rack</span></span></th></tr>
<tr><th><span data-ttu-id="a24f1-494">WYREJESTRUJ</span><span class="sxs-lookup"><span data-stu-id="a24f1-494">UN</span></span>    </td><td><span data-ttu-id="a24f1-495">10.1.2.4</span><span class="sxs-lookup"><span data-stu-id="a24f1-495">10.1.2.4</span></span>     </td><td><span data-ttu-id="a24f1-496">87.81 KB</span><span class="sxs-lookup"><span data-stu-id="a24f1-496">87.81 KB</span></span>    </td><td><span data-ttu-id="a24f1-497">256</span><span class="sxs-lookup"><span data-stu-id="a24f1-497">256</span></span>    </td><td><span data-ttu-id="a24f1-498">38.0%</span><span class="sxs-lookup"><span data-stu-id="a24f1-498">38.0%</span></span>    </td><td><span data-ttu-id="a24f1-499">Identyfikator GUID (usunięte)</span><span class="sxs-lookup"><span data-stu-id="a24f1-499">Guid (removed)</span></span></td><td><span data-ttu-id="a24f1-500">szafa1</span><span class="sxs-lookup"><span data-stu-id="a24f1-500">rack1</span></span></td></tr>
<tr><th><span data-ttu-id="a24f1-501">WYREJESTRUJ</span><span class="sxs-lookup"><span data-stu-id="a24f1-501">UN</span></span>    </td><td><span data-ttu-id="a24f1-502">10.1.2.5</span><span class="sxs-lookup"><span data-stu-id="a24f1-502">10.1.2.5</span></span>     </td><td><span data-ttu-id="a24f1-503">41.08 KB</span><span class="sxs-lookup"><span data-stu-id="a24f1-503">41.08 KB</span></span>    </td><td><span data-ttu-id="a24f1-504">256</span><span class="sxs-lookup"><span data-stu-id="a24f1-504">256</span></span>    </td><td><span data-ttu-id="a24f1-505">68.9%</span><span class="sxs-lookup"><span data-stu-id="a24f1-505">68.9%</span></span>    </td><td><span data-ttu-id="a24f1-506">Identyfikator GUID (usunięte)</span><span class="sxs-lookup"><span data-stu-id="a24f1-506">Guid (removed)</span></span></td><td><span data-ttu-id="a24f1-507">szafa1</span><span class="sxs-lookup"><span data-stu-id="a24f1-507">rack1</span></span></td></tr>
<tr><th><span data-ttu-id="a24f1-508">WYREJESTRUJ</span><span class="sxs-lookup"><span data-stu-id="a24f1-508">UN</span></span>    </td><td><span data-ttu-id="a24f1-509">10.1.2.6</span><span class="sxs-lookup"><span data-stu-id="a24f1-509">10.1.2.6</span></span>     </td><td><span data-ttu-id="a24f1-510">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="a24f1-510">55.29 KB</span></span>    </td><td><span data-ttu-id="a24f1-511">256</span><span class="sxs-lookup"><span data-stu-id="a24f1-511">256</span></span>    </td><td><span data-ttu-id="a24f1-512">68.8%</span><span class="sxs-lookup"><span data-stu-id="a24f1-512">68.8%</span></span>    </td><td><span data-ttu-id="a24f1-513">Identyfikator GUID (usunięte)</span><span class="sxs-lookup"><span data-stu-id="a24f1-513">Guid (removed)</span></span></td><td><span data-ttu-id="a24f1-514">szafa2</span><span class="sxs-lookup"><span data-stu-id="a24f1-514">rack2</span></span></td></tr>
<tr><th><span data-ttu-id="a24f1-515">WYREJESTRUJ</span><span class="sxs-lookup"><span data-stu-id="a24f1-515">UN</span></span>    </td><td><span data-ttu-id="a24f1-516">10.1.2.7</span><span class="sxs-lookup"><span data-stu-id="a24f1-516">10.1.2.7</span></span>     </td><td><span data-ttu-id="a24f1-517">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="a24f1-517">55.29 KB</span></span>    </td><td><span data-ttu-id="a24f1-518">256</span><span class="sxs-lookup"><span data-stu-id="a24f1-518">256</span></span>    </td><td><span data-ttu-id="a24f1-519">68.8%</span><span class="sxs-lookup"><span data-stu-id="a24f1-519">68.8%</span></span>    </td><td><span data-ttu-id="a24f1-520">Identyfikator GUID (usunięte)</span><span class="sxs-lookup"><span data-stu-id="a24f1-520">Guid (removed)</span></span></td><td><span data-ttu-id="a24f1-521">szafa2</span><span class="sxs-lookup"><span data-stu-id="a24f1-521">rack2</span></span></td></tr>
<tr><th><span data-ttu-id="a24f1-522">WYREJESTRUJ</span><span class="sxs-lookup"><span data-stu-id="a24f1-522">UN</span></span>    </td><td><span data-ttu-id="a24f1-523">10.1.2.8</span><span class="sxs-lookup"><span data-stu-id="a24f1-523">10.1.2.8</span></span>     </td><td><span data-ttu-id="a24f1-524">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="a24f1-524">55.29 KB</span></span>    </td><td><span data-ttu-id="a24f1-525">256</span><span class="sxs-lookup"><span data-stu-id="a24f1-525">256</span></span>    </td><td><span data-ttu-id="a24f1-526">68.8%</span><span class="sxs-lookup"><span data-stu-id="a24f1-526">68.8%</span></span>    </td><td><span data-ttu-id="a24f1-527">Identyfikator GUID (usunięte)</span><span class="sxs-lookup"><span data-stu-id="a24f1-527">Guid (removed)</span></span></td><td><span data-ttu-id="a24f1-528">szafa3</span><span class="sxs-lookup"><span data-stu-id="a24f1-528">rack3</span></span></td></tr>
<tr><th><span data-ttu-id="a24f1-529">WYREJESTRUJ</span><span class="sxs-lookup"><span data-stu-id="a24f1-529">UN</span></span>    </td><td><span data-ttu-id="a24f1-530">10.1.2.9</span><span class="sxs-lookup"><span data-stu-id="a24f1-530">10.1.2.9</span></span>     </td><td><span data-ttu-id="a24f1-531">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="a24f1-531">55.29 KB</span></span>    </td><td><span data-ttu-id="a24f1-532">256</span><span class="sxs-lookup"><span data-stu-id="a24f1-532">256</span></span>    </td><td><span data-ttu-id="a24f1-533">68.8%</span><span class="sxs-lookup"><span data-stu-id="a24f1-533">68.8%</span></span>    </td><td><span data-ttu-id="a24f1-534">Identyfikator GUID (usunięte)</span><span class="sxs-lookup"><span data-stu-id="a24f1-534">Guid (removed)</span></span></td><td><span data-ttu-id="a24f1-535">szafa3</span><span class="sxs-lookup"><span data-stu-id="a24f1-535">rack3</span></span></td></tr>
<tr><th><span data-ttu-id="a24f1-536">WYREJESTRUJ</span><span class="sxs-lookup"><span data-stu-id="a24f1-536">UN</span></span>    </td><td><span data-ttu-id="a24f1-537">10.1.2.10</span><span class="sxs-lookup"><span data-stu-id="a24f1-537">10.1.2.10</span></span>     </td><td><span data-ttu-id="a24f1-538">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="a24f1-538">55.29 KB</span></span>    </td><td><span data-ttu-id="a24f1-539">256</span><span class="sxs-lookup"><span data-stu-id="a24f1-539">256</span></span>    </td><td><span data-ttu-id="a24f1-540">68.8%</span><span class="sxs-lookup"><span data-stu-id="a24f1-540">68.8%</span></span>    </td><td><span data-ttu-id="a24f1-541">Identyfikator GUID (usunięte)</span><span class="sxs-lookup"><span data-stu-id="a24f1-541">Guid (removed)</span></span></td><td><span data-ttu-id="a24f1-542">rack4</span><span class="sxs-lookup"><span data-stu-id="a24f1-542">rack4</span></span></td></tr>
<tr><th><span data-ttu-id="a24f1-543">WYREJESTRUJ</span><span class="sxs-lookup"><span data-stu-id="a24f1-543">UN</span></span>    </td><td><span data-ttu-id="a24f1-544">10.1.2.11</span><span class="sxs-lookup"><span data-stu-id="a24f1-544">10.1.2.11</span></span>     </td><td><span data-ttu-id="a24f1-545">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="a24f1-545">55.29 KB</span></span>    </td><td><span data-ttu-id="a24f1-546">256</span><span class="sxs-lookup"><span data-stu-id="a24f1-546">256</span></span>    </td><td><span data-ttu-id="a24f1-547">68.8%</span><span class="sxs-lookup"><span data-stu-id="a24f1-547">68.8%</span></span>    </td><td><span data-ttu-id="a24f1-548">Identyfikator GUID (usunięte)</span><span class="sxs-lookup"><span data-stu-id="a24f1-548">Guid (removed)</span></span></td><td><span data-ttu-id="a24f1-549">rack4</span><span class="sxs-lookup"><span data-stu-id="a24f1-549">rack4</span></span></td></tr>
</table>

## <a name="test-hello-single-region-cluster"></a><span data-ttu-id="a24f1-550">Test hello pojedynczy klaster regionu</span><span class="sxs-lookup"><span data-stu-id="a24f1-550">Test hello Single Region Cluster</span></span>
<span data-ttu-id="a24f1-551">Użyj hello następujące kroki tootest hello klastra:</span><span class="sxs-lookup"><span data-stu-id="a24f1-551">Use hello following steps tootest hello cluster:</span></span>

1. <span data-ttu-id="a24f1-552">Za pomocą polecenia programu Powershell hello apletu polecenia Get-AzureInternalLoadbalancer, uzyskać adres IP hello hello wewnętrznego modułu równoważenia obciążenia (np.  10.1.2.101).</span><span class="sxs-lookup"><span data-stu-id="a24f1-552">Using hello Powershell command Get-AzureInternalLoadbalancer commandlet, obtain hello IP address of hello internal load balancer (e.g.  10.1.2.101).</span></span> <span data-ttu-id="a24f1-553">Poniżej przedstawiono Hello Składnia polecenia hello: Get-AzureLoadbalancer — ServiceName "hk — c-svc zachód us" [Wyświetla szczegóły hello hello wewnętrznego modułu równoważenia obciążenia oraz adres IP]</span><span class="sxs-lookup"><span data-stu-id="a24f1-553">hello syntax of hello command is shown below: Get-AzureLoadbalancer –ServiceName "hk-c-svc-west-us” [displays hello details of hello internal load balancer along with its IP address]</span></span>
2. <span data-ttu-id="a24f1-554">Zaloguj się do kolektywu serwerów sieci web hello maszyny Wirtualnej (np. hk-w1 — zachód us) przy użyciu programu Putty lub ssh</span><span class="sxs-lookup"><span data-stu-id="a24f1-554">Log into hello web farm VM (e.g. hk-w1-west-us) using Putty or ssh</span></span>
3. <span data-ttu-id="a24f1-555">Wykonanie $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="a24f1-555">Execute $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span></span>
4. <span data-ttu-id="a24f1-556">Użyj powitania po tooverify polecenia CQL działa hello klastra:</span><span class="sxs-lookup"><span data-stu-id="a24f1-556">Use hello following CQL commands tooverify if hello cluster is working:</span></span>
   
     <span data-ttu-id="a24f1-557">TWORZENIE przestrzeni KLUCZY customers_ks z REPLIKACJĄ = {"class": "SimpleStrategy", "replication_factor": 3};   UŻYJ customers_ks;   Tworzenie tabeli Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   Wstaw do Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   Wstaw do Customers(customer_id, firstname, lastname) wartości 2, 'Magdalena', 'Nowak';</span><span class="sxs-lookup"><span data-stu-id="a24f1-557">CREATE KEYSPACE customers_ks WITH REPLICATION = { 'class' : 'SimpleStrategy', 'replication_factor' : 3 };   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');</span></span>
   
     <span data-ttu-id="a24f1-558">Wybierz * od klientów.</span><span class="sxs-lookup"><span data-stu-id="a24f1-558">SELECT * FROM Customers;</span></span>

<span data-ttu-id="a24f1-559">Powinny pojawić się wyświetlanej takie jak hello jedną poniżej:</span><span class="sxs-lookup"><span data-stu-id="a24f1-559">You should see a display like hello one below:</span></span>

<table>
  <tr><th> <span data-ttu-id="a24f1-560">customer_id</span><span class="sxs-lookup"><span data-stu-id="a24f1-560">customer_id</span></span> </th><th> <span data-ttu-id="a24f1-561">Imię</span><span class="sxs-lookup"><span data-stu-id="a24f1-561">firstname</span></span> </th><th> <span data-ttu-id="a24f1-562">nazwisko</span><span class="sxs-lookup"><span data-stu-id="a24f1-562">lastname</span></span> </th></tr>
  <tr><td> <span data-ttu-id="a24f1-563">1</span><span class="sxs-lookup"><span data-stu-id="a24f1-563">1</span></span> </td><td> <span data-ttu-id="a24f1-564">Jan</span><span class="sxs-lookup"><span data-stu-id="a24f1-564">John</span></span> </td><td> <span data-ttu-id="a24f1-565">Nowak</span><span class="sxs-lookup"><span data-stu-id="a24f1-565">Doe</span></span> </td></tr>
  <tr><td> <span data-ttu-id="a24f1-566">2</span><span class="sxs-lookup"><span data-stu-id="a24f1-566">2</span></span> </td><td> <span data-ttu-id="a24f1-567">Magdalena</span><span class="sxs-lookup"><span data-stu-id="a24f1-567">Jane</span></span> </td><td> <span data-ttu-id="a24f1-568">Nowak</span><span class="sxs-lookup"><span data-stu-id="a24f1-568">Doe</span></span> </td></tr>
</table>

<span data-ttu-id="a24f1-569">Należy pamiętać, że używa tego hello przestrzeni kluczy, utworzony w kroku 4 SimpleStrategy replication_factor 3.</span><span class="sxs-lookup"><span data-stu-id="a24f1-569">Please note that hello keyspace created in step 4 uses SimpleStrategy with a  replication_factor of 3.</span></span> <span data-ttu-id="a24f1-570">SimpleStrategy jest zalecane dla pojedynczego wdrożenia Centrum natomiast NetworkTopologyStrategy danych z wielu centrów.</span><span class="sxs-lookup"><span data-stu-id="a24f1-570">SimpleStrategy is recommended for single data center deployments whereas NetworkTopologyStrategy for multi-data center deployments.</span></span> <span data-ttu-id="a24f1-571">Replication_factor 3 zapewni tolerancji na wypadek awarii węzła.</span><span class="sxs-lookup"><span data-stu-id="a24f1-571">A replication_factor of 3 will give tolerance for node failures.</span></span>

## <span data-ttu-id="a24f1-572"><a id="tworegion"></a>Proces w przypadku wdrażania</span><span class="sxs-lookup"><span data-stu-id="a24f1-572"><a id="tworegion"> </a>Multi-Region Deployment Process</span></span>
<span data-ttu-id="a24f1-573">Zostanie korzystaj z wdrożenia jednego regionu hello ukończone i powtórz hello tego samego procesu instalowania hello drugi regionu.</span><span class="sxs-lookup"><span data-stu-id="a24f1-573">Will leverage hello single region deployment completed and repeat hello same process for installing hello second region.</span></span> <span data-ttu-id="a24f1-574">Różnica klucza Hello hello jednego i wielu wdrożenia region jest Instalator tunelu VPN hello do komunikacji między regionu; Firma Microsoft będzie rozpoczynać się od instalacji sieciowej hello, udostępnić hello maszyn wirtualnych i skonfiguruj Cassandra.</span><span class="sxs-lookup"><span data-stu-id="a24f1-574">hello key difference between hello single and multiple region deployment is hello VPN tunnel setup for inter-region communication; we will start with hello network installation, provision hello VMs and configure Cassandra.</span></span>

### <a name="step-1-create-hello-virtual-network-at-hello-2nd-region"></a><span data-ttu-id="a24f1-575">Krok 1: Tworzenie sieci wirtualnej hello na powitania Region 2</span><span class="sxs-lookup"><span data-stu-id="a24f1-575">Step 1: Create hello Virtual Network at hello 2nd Region</span></span>
<span data-ttu-id="a24f1-576">Zaloguj się do hello klasycznego portalu Azure i utworzyć sieć wirtualną z programem atrybuty hello hello tabeli.</span><span class="sxs-lookup"><span data-stu-id="a24f1-576">Log into hello Azure classic portal and create a Virtual Network with hello attributes show in hello table.</span></span> <span data-ttu-id="a24f1-577">Zobacz [skonfigurować sieć wirtualną Cloud-Only w hello klasycznego portalu Azure](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) szczegółowy opis kroków procesu hello.</span><span class="sxs-lookup"><span data-stu-id="a24f1-577">See [Configure a Cloud-Only Virtual Network in hello Azure classic portal](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) for detailed steps of hello process.</span></span>      

<table>
<tr><th><span data-ttu-id="a24f1-578">Nazwa atrybutu</span><span class="sxs-lookup"><span data-stu-id="a24f1-578">Attribute Name</span></span>    </th><th><span data-ttu-id="a24f1-579">Wartość</span><span class="sxs-lookup"><span data-stu-id="a24f1-579">Value</span></span>    </th><th><span data-ttu-id="a24f1-580">Uwagi</span><span class="sxs-lookup"><span data-stu-id="a24f1-580">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="a24f1-581">Nazwa</span><span class="sxs-lookup"><span data-stu-id="a24f1-581">Name</span></span>    </td><td><span data-ttu-id="a24f1-582">sieci wirtualnej przypadku wschód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-582">vnet-cass-east-us</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="a24f1-583">Region</span><span class="sxs-lookup"><span data-stu-id="a24f1-583">Region</span></span>    </td><td><span data-ttu-id="a24f1-584">Wschodnie stany USA</span><span class="sxs-lookup"><span data-stu-id="a24f1-584">East US</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="a24f1-585">Serwery DNS</span><span class="sxs-lookup"><span data-stu-id="a24f1-585">DNS Servers</span></span>        </td><td></td><td><span data-ttu-id="a24f1-586">Zignoruj ten komunikat, ponieważ nie używamy serwera DNS</span><span class="sxs-lookup"><span data-stu-id="a24f1-586">Ignore this as we are not using a DNS Server</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-587">Konfigurowanie sieci VPN punkt lokacja</span><span class="sxs-lookup"><span data-stu-id="a24f1-587">Configure a point-to-site VPN</span></span></td><td></td><td>        <span data-ttu-id="a24f1-588">Zignoruj ten komunikat</span><span class="sxs-lookup"><span data-stu-id="a24f1-588">Ignore this</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-589">Konfiguracja tunelu sieci VPN łączącego lokacje</span><span class="sxs-lookup"><span data-stu-id="a24f1-589">Configure a site-to-site VPN</span></span></td><td></td><td>        <span data-ttu-id="a24f1-590">Zignoruj ten komunikat</span><span class="sxs-lookup"><span data-stu-id="a24f1-590">Ignore this</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-591">Przestrzeń adresów</span><span class="sxs-lookup"><span data-stu-id="a24f1-591">Address Space</span></span>    </td><td><span data-ttu-id="a24f1-592">10.2.0.0/16</span><span class="sxs-lookup"><span data-stu-id="a24f1-592">10.2.0.0/16</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="a24f1-593">Uruchamianie adresu IP</span><span class="sxs-lookup"><span data-stu-id="a24f1-593">Starting IP</span></span>    </td><td><span data-ttu-id="a24f1-594">10.2.0.0</span><span class="sxs-lookup"><span data-stu-id="a24f1-594">10.2.0.0</span></span>    </td><td></td></tr>
<tr><td><span data-ttu-id="a24f1-595">CIDR</span><span class="sxs-lookup"><span data-stu-id="a24f1-595">CIDR</span></span>    </td><td><span data-ttu-id="a24f1-596">/16 (65531)</span><span class="sxs-lookup"><span data-stu-id="a24f1-596">/16 (65531)</span></span></td><td></td></tr>
</table>

<span data-ttu-id="a24f1-597">Dodaj następujące podsieci hello:</span><span class="sxs-lookup"><span data-stu-id="a24f1-597">Add hello following subnets:</span></span>

<table>
<tr><th><span data-ttu-id="a24f1-598">Nazwa</span><span class="sxs-lookup"><span data-stu-id="a24f1-598">Name</span></span>    </th><th><span data-ttu-id="a24f1-599">Uruchamianie adresu IP</span><span class="sxs-lookup"><span data-stu-id="a24f1-599">Starting IP</span></span>    </th><th><span data-ttu-id="a24f1-600">CIDR</span><span class="sxs-lookup"><span data-stu-id="a24f1-600">CIDR</span></span>    </th><th><span data-ttu-id="a24f1-601">Uwagi</span><span class="sxs-lookup"><span data-stu-id="a24f1-601">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="a24f1-602">sieci Web</span><span class="sxs-lookup"><span data-stu-id="a24f1-602">web</span></span>    </td><td><span data-ttu-id="a24f1-603">10.2.1.0</span><span class="sxs-lookup"><span data-stu-id="a24f1-603">10.2.1.0</span></span>    </td><td><span data-ttu-id="a24f1-604">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="a24f1-604">/24 (251)</span></span>    </td><td><span data-ttu-id="a24f1-605">Podsieć hello kolektywu serwerów sieci web</span><span class="sxs-lookup"><span data-stu-id="a24f1-605">Subnet for hello web farm</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-606">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-606">data</span></span>    </td><td><span data-ttu-id="a24f1-607">10.2.2.0</span><span class="sxs-lookup"><span data-stu-id="a24f1-607">10.2.2.0</span></span>    </td><td><span data-ttu-id="a24f1-608">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="a24f1-608">/24 (251)</span></span>    </td><td><span data-ttu-id="a24f1-609">Podsieć hello węzłów bazy danych</span><span class="sxs-lookup"><span data-stu-id="a24f1-609">Subnet for hello database nodes</span></span></td></tr>
</table>


### <a name="step-2-create-local-networks"></a><span data-ttu-id="a24f1-610">Krok 2: Tworzenie sieci lokalne</span><span class="sxs-lookup"><span data-stu-id="a24f1-610">Step 2: Create Local Networks</span></span>
<span data-ttu-id="a24f1-611">Sieci lokalnej w sieci wirtualnej platformy Azure jest przestrzeń adresów serwera proxy, która mapuje tooa witryny zdalnej w tym chmurę prywatną lub inny region platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="a24f1-611">A Local Network in Azure virtual networking is a proxy address space that maps tooa remote site including a private cloud or another Azure region.</span></span> <span data-ttu-id="a24f1-612">Ta przestrzeń adresowa serwera proxy jest powiązane tooa bramy zdalnego dla routingu toohello sieci prawo sieci miejsc docelowych.</span><span class="sxs-lookup"><span data-stu-id="a24f1-612">This proxy address space is bound tooa remote gateway for routing network toohello right networking destinations.</span></span> <span data-ttu-id="a24f1-613">Zobacz [Konfigurowanie sieci wirtualnej tooVNet połączenia](../../../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md) hello instrukcje dotyczące nawiązywania połączenia do Wirtualnymi.</span><span class="sxs-lookup"><span data-stu-id="a24f1-613">See [Configure a VNet tooVNet Connection](../../../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md) for hello instructions on establishing VNET-to-VNET connection.</span></span>

<span data-ttu-id="a24f1-614">Utwórz dwie sieci lokalne na powitania poniższe informacje:</span><span class="sxs-lookup"><span data-stu-id="a24f1-614">Create two local networks per hello following details:</span></span>

| <span data-ttu-id="a24f1-615">Nazwa sieci</span><span class="sxs-lookup"><span data-stu-id="a24f1-615">Network Name</span></span> | <span data-ttu-id="a24f1-616">Adres bramy sieci VPN</span><span class="sxs-lookup"><span data-stu-id="a24f1-616">VPN Gateway Address</span></span> | <span data-ttu-id="a24f1-617">Przestrzeń adresów</span><span class="sxs-lookup"><span data-stu-id="a24f1-617">Address Space</span></span> | <span data-ttu-id="a24f1-618">Uwagi</span><span class="sxs-lookup"><span data-stu-id="a24f1-618">Remarks</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="a24f1-619">HK-lnet-map-to-East-US</span><span class="sxs-lookup"><span data-stu-id="a24f1-619">hk-lnet-map-to-east-us</span></span> |<span data-ttu-id="a24f1-620">23.1.1.1</span><span class="sxs-lookup"><span data-stu-id="a24f1-620">23.1.1.1</span></span> |<span data-ttu-id="a24f1-621">10.2.0.0/16</span><span class="sxs-lookup"><span data-stu-id="a24f1-621">10.2.0.0/16</span></span> |<span data-ttu-id="a24f1-622">Podczas tworzenia hello sieci lokalnej nadaj symbol zastępczy adres bramy.</span><span class="sxs-lookup"><span data-stu-id="a24f1-622">While creating hello Local Network give a placeholder gateway address.</span></span> <span data-ttu-id="a24f1-623">Adres bramy rzeczywistych Hello jest wypełniony, po utworzeniu bramy hello.</span><span class="sxs-lookup"><span data-stu-id="a24f1-623">hello real gateway address is filled once hello gateway is created.</span></span> <span data-ttu-id="a24f1-624">Upewnij się, że przestrzeń adresowa hello dokładnie zgodny hello odpowiednich zdalna sieć wirtualna; w takim przypadku hello sieci Wirtualnej utworzone w hello regionu wschodnie stany USA.</span><span class="sxs-lookup"><span data-stu-id="a24f1-624">Make sure hello address space exactly matches hello respective remote VNET; in this case hello VNET created in hello East US region.</span></span> |
| <span data-ttu-id="a24f1-625">HK-lnet-map-to-West-US</span><span class="sxs-lookup"><span data-stu-id="a24f1-625">hk-lnet-map-to-west-us</span></span> |<span data-ttu-id="a24f1-626">23.2.2.2</span><span class="sxs-lookup"><span data-stu-id="a24f1-626">23.2.2.2</span></span> |<span data-ttu-id="a24f1-627">10.1.0.0/16</span><span class="sxs-lookup"><span data-stu-id="a24f1-627">10.1.0.0/16</span></span> |<span data-ttu-id="a24f1-628">Podczas tworzenia hello sieci lokalnej nadaj symbol zastępczy adres bramy.</span><span class="sxs-lookup"><span data-stu-id="a24f1-628">While creating hello Local Network give a placeholder gateway address.</span></span> <span data-ttu-id="a24f1-629">Adres bramy rzeczywistych Hello jest wypełniony, po utworzeniu bramy hello.</span><span class="sxs-lookup"><span data-stu-id="a24f1-629">hello real gateway address is filled once hello gateway is created.</span></span> <span data-ttu-id="a24f1-630">Upewnij się, że przestrzeń adresowa hello dokładnie zgodny hello odpowiednich zdalna sieć wirtualna; w takim przypadku hello sieci Wirtualnej utworzone w hello regionu zachodnie stany USA.</span><span class="sxs-lookup"><span data-stu-id="a24f1-630">Make sure hello address space exactly matches hello respective remote VNET; in this case hello VNET created in hello West US region.</span></span> |

### <a name="step-3-map-local-network-toohello-respective-vnets"></a><span data-ttu-id="a24f1-631">Krok 3: Mapy sieci "Lokalnie" toohello odpowiednich sieci wirtualnych</span><span class="sxs-lookup"><span data-stu-id="a24f1-631">Step 3: Map “Local” network toohello respective VNETs</span></span>
<span data-ttu-id="a24f1-632">Z hello klasycznego portalu Azure wybierz każdej sieci wirtualnej, kliknij przycisk "Konfiguruj" Sprawdź "Connect toohello sieci lokalnej" i wybierz sieci lokalne powitania na powitania poniższe informacje:</span><span class="sxs-lookup"><span data-stu-id="a24f1-632">From hello Azure classic portal, select each vnet, click “Configure”, check “Connect toohello local network”, and select hello Local Networks per hello following details:</span></span>

| <span data-ttu-id="a24f1-633">Virtual Network</span><span class="sxs-lookup"><span data-stu-id="a24f1-633">Virtual Network</span></span> | <span data-ttu-id="a24f1-634">Sieci lokalnej</span><span class="sxs-lookup"><span data-stu-id="a24f1-634">Local Network</span></span> |
| --- | --- |
| <span data-ttu-id="a24f1-635">HK — sieci wirtualnej zachód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-635">hk-vnet-west-us</span></span> |<span data-ttu-id="a24f1-636">HK-lnet-map-to-East-US</span><span class="sxs-lookup"><span data-stu-id="a24f1-636">hk-lnet-map-to-east-us</span></span> |
| <span data-ttu-id="a24f1-637">HK — sieci wirtualnej wschód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-637">hk-vnet-east-us</span></span> |<span data-ttu-id="a24f1-638">HK-lnet-map-to-West-US</span><span class="sxs-lookup"><span data-stu-id="a24f1-638">hk-lnet-map-to-west-us</span></span> |

### <a name="step-4-create-gateways-on-vnet1-and-vnet2"></a><span data-ttu-id="a24f1-639">Krok 4: Tworzenie bramy na VNET1 i VNET2</span><span class="sxs-lookup"><span data-stu-id="a24f1-639">Step 4: Create Gateways on VNET1 and VNET2</span></span>
<span data-ttu-id="a24f1-640">Z pulpitu nawigacyjnego hello sieci wirtualnych obu hello kliknij przycisk Utwórz bramy, które wyzwoli bramy sieci VPN hello w procesie inicjowania obsługi.</span><span class="sxs-lookup"><span data-stu-id="a24f1-640">From hello dashboard of both hello virtual networks, click CREATE GATEWAY which will trigger hello VPN gateway provisioning process.</span></span> <span data-ttu-id="a24f1-641">Adres bramy rzeczywiste hello powinien być wyświetlany po kilku minut hello pulpitu nawigacyjnego w każdej sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="a24f1-641">After a few minutes hello dashboard of each virtual network should display hello actual gateway address.</span></span>

### <a name="step-5-update-local-networks-with-hello-respective-gateway-addresses"></a><span data-ttu-id="a24f1-642">Krok 5: Aktualizacja "Lokalnie" sieci z adresami odpowiednich "bramy" hello</span><span class="sxs-lookup"><span data-stu-id="a24f1-642">Step 5: Update “Local” networks with hello respective “Gateway” addresses</span></span>
<span data-ttu-id="a24f1-643">Edytować zarówno hello sieci lokalne tooreplace hello symbolu zastępczego brama IP adresu hello rzeczywistego adresu IP hello tylko elastycznie bramy.</span><span class="sxs-lookup"><span data-stu-id="a24f1-643">Edit both hello local networks tooreplace hello placeholder gateway IP address with hello real IP address of hello just provisioned gateways.</span></span> <span data-ttu-id="a24f1-644">Użyj następującego mapowania hello:</span><span class="sxs-lookup"><span data-stu-id="a24f1-644">Use hello following mapping:</span></span>

<table>
<tr><th><span data-ttu-id="a24f1-645">Sieci lokalnej</span><span class="sxs-lookup"><span data-stu-id="a24f1-645">Local Network</span></span>    </th><th><span data-ttu-id="a24f1-646">Brama sieci wirtualnej</span><span class="sxs-lookup"><span data-stu-id="a24f1-646">Virtual Network Gateway</span></span></th></tr>
<tr><td><span data-ttu-id="a24f1-647">HK-lnet-map-to-East-US</span><span class="sxs-lookup"><span data-stu-id="a24f1-647">hk-lnet-map-to-east-us</span></span> </td><td><span data-ttu-id="a24f1-648">Brama hk — sieci wirtualnej zachód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-648">Gateway of hk-vnet-west-us</span></span></td></tr>
<tr><td><span data-ttu-id="a24f1-649">HK-lnet-map-to-West-US</span><span class="sxs-lookup"><span data-stu-id="a24f1-649">hk-lnet-map-to-west-us</span></span> </td><td><span data-ttu-id="a24f1-650">Brama hk — sieci wirtualnej wschód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-650">Gateway of hk-vnet-east-us</span></span></td></tr>
</table>

### <a name="step-6-update-hello-shared-key"></a><span data-ttu-id="a24f1-651">Krok 6: Klucz udostępniony hello aktualizacji</span><span class="sxs-lookup"><span data-stu-id="a24f1-651">Step 6: Update hello shared key</span></span>
<span data-ttu-id="a24f1-652">Użyj powitania po klucz tooupdate skrypt programu Powershell IPSec hello każdej bramy sieci VPN [Użyj hello sake klucza dla obu bram hello]: Set AzureVNetGatewayKey - VNetName hk — sieci wirtualnej wschód us - LocalNetworkSiteName hk-lnet-map-to-west-us - SharedKey D9E76BKK Zestaw AzureVNetGatewayKey - VNetName hk — sieci wirtualnej zachód us - LocalNetworkSiteName hk-lnet-map-to-east-us - SharedKey D9E76BKK</span><span class="sxs-lookup"><span data-stu-id="a24f1-652">Use hello following Powershell script tooupdate hello IPSec key of each VPN gateway [use hello sake key for both hello gateways]: Set-AzureVNetGatewayKey -VNetName hk-vnet-east-us -LocalNetworkSiteName hk-lnet-map-to-west-us -SharedKey D9E76BKK Set-AzureVNetGatewayKey -VNetName hk-vnet-west-us -LocalNetworkSiteName hk-lnet-map-to-east-us -SharedKey D9E76BKK</span></span>

### <a name="step-7-establish-hello-vnet-to-vnet-connection"></a><span data-ttu-id="a24f1-653">Krok 7: Nawiązania połączenia hello do Wirtualnymi</span><span class="sxs-lookup"><span data-stu-id="a24f1-653">Step 7: Establish hello VNET-to-VNET connection</span></span>
<span data-ttu-id="a24f1-654">Hello klasycznego portalu Azure użyj menu "Pulpitu NAWIGACYJNEGO" hello zarówno hello sieci wirtualnych tooestablish brama brama połączenia.</span><span class="sxs-lookup"><span data-stu-id="a24f1-654">From hello Azure classic portal, use hello “DASHBOARD” menu of both hello virtual networks tooestablish gateway-to-gateway connection.</span></span> <span data-ttu-id="a24f1-655">Użyj elementów menu "POŁĄCZ" hello w hello dolnym pasku narzędzi.</span><span class="sxs-lookup"><span data-stu-id="a24f1-655">Use hello “CONNECT” menu items in hello bottom toolbar.</span></span> <span data-ttu-id="a24f1-656">Po kilku minutach pulpitu nawigacyjnego hello powinien być wyświetlany szczegóły połączenia hello graficznie.</span><span class="sxs-lookup"><span data-stu-id="a24f1-656">After a few minutes hello dashboard should display hello connection details graphically.</span></span>

### <a name="step-8-create-hello-virtual-machines-in-region-2"></a><span data-ttu-id="a24f1-657">Krok 8: Tworzenie maszyn wirtualnych hello w regionie #2</span><span class="sxs-lookup"><span data-stu-id="a24f1-657">Step 8: Create hello virtual machines in region #2</span></span>
<span data-ttu-id="a24f1-658">Utwórz obraz Ubuntu hello zgodnie z opisem w regionie #1 wdrożenia przez następujące hello same kroki lub skopiuj hello obrazu wirtualnego dysku twardego pliku toohello Azure konta magazynu znajdującego się w regionie #2 a hello obrazu.</span><span class="sxs-lookup"><span data-stu-id="a24f1-658">Create hello Ubuntu image as described in region #1 deployment by following hello same steps or copy hello image VHD file toohello Azure storage account located in region #2 and create hello image.</span></span> <span data-ttu-id="a24f1-659">Skorzystaj z tego obrazu, a następnie utwórz powitania po listę maszyn wirtualnych do nowej usługi w chmurze, hk-c-svc wschód nam:</span><span class="sxs-lookup"><span data-stu-id="a24f1-659">Use this image and create hello following list of virtual machines into a new cloud service hk-c-svc-east-us:</span></span>

| <span data-ttu-id="a24f1-660">Nazwa komputera</span><span class="sxs-lookup"><span data-stu-id="a24f1-660">Machine Name</span></span> | <span data-ttu-id="a24f1-661">Podsieć</span><span class="sxs-lookup"><span data-stu-id="a24f1-661">Subnet</span></span> | <span data-ttu-id="a24f1-662">Adres IP</span><span class="sxs-lookup"><span data-stu-id="a24f1-662">IP Address</span></span> | <span data-ttu-id="a24f1-663">Zestaw dostępności</span><span class="sxs-lookup"><span data-stu-id="a24f1-663">Availability set</span></span> | <span data-ttu-id="a24f1-664">DC/Rack</span><span class="sxs-lookup"><span data-stu-id="a24f1-664">DC/Rack</span></span> | <span data-ttu-id="a24f1-665">Inicjatora?</span><span class="sxs-lookup"><span data-stu-id="a24f1-665">Seed?</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="a24f1-666">HK-c1-wschód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-666">hk-c1-east-us</span></span> |<span data-ttu-id="a24f1-667">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-667">data</span></span> |<span data-ttu-id="a24f1-668">10.2.2.4</span><span class="sxs-lookup"><span data-stu-id="a24f1-668">10.2.2.4</span></span> |<span data-ttu-id="a24f1-669">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="a24f1-669">hk-c-aset-1</span></span> |<span data-ttu-id="a24f1-670">DC = stojak EASTUS = szafa1</span><span class="sxs-lookup"><span data-stu-id="a24f1-670">dc =EASTUS rack =rack1</span></span> |<span data-ttu-id="a24f1-671">Tak</span><span class="sxs-lookup"><span data-stu-id="a24f1-671">Yes</span></span> |
| <span data-ttu-id="a24f1-672">HK-c2-wschód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-672">hk-c2-east-us</span></span> |<span data-ttu-id="a24f1-673">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-673">data</span></span> |<span data-ttu-id="a24f1-674">10.2.2.5</span><span class="sxs-lookup"><span data-stu-id="a24f1-674">10.2.2.5</span></span> |<span data-ttu-id="a24f1-675">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="a24f1-675">hk-c-aset-1</span></span> |<span data-ttu-id="a24f1-676">DC = stojak EASTUS = szafa1</span><span class="sxs-lookup"><span data-stu-id="a24f1-676">dc =EASTUS rack =rack1</span></span> |<span data-ttu-id="a24f1-677">Nie</span><span class="sxs-lookup"><span data-stu-id="a24f1-677">No</span></span> |
| <span data-ttu-id="a24f1-678">HK-c3-wschód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-678">hk-c3-east-us</span></span> |<span data-ttu-id="a24f1-679">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-679">data</span></span> |<span data-ttu-id="a24f1-680">10.2.2.6</span><span class="sxs-lookup"><span data-stu-id="a24f1-680">10.2.2.6</span></span> |<span data-ttu-id="a24f1-681">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="a24f1-681">hk-c-aset-1</span></span> |<span data-ttu-id="a24f1-682">DC = stojak EASTUS = szafa2</span><span class="sxs-lookup"><span data-stu-id="a24f1-682">dc =EASTUS rack =rack2</span></span> |<span data-ttu-id="a24f1-683">Tak</span><span class="sxs-lookup"><span data-stu-id="a24f1-683">Yes</span></span> |
| <span data-ttu-id="a24f1-684">HK-c5-wschód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-684">hk-c5-east-us</span></span> |<span data-ttu-id="a24f1-685">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-685">data</span></span> |<span data-ttu-id="a24f1-686">10.2.2.8</span><span class="sxs-lookup"><span data-stu-id="a24f1-686">10.2.2.8</span></span> |<span data-ttu-id="a24f1-687">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="a24f1-687">hk-c-aset-2</span></span> |<span data-ttu-id="a24f1-688">DC = stojak EASTUS = szafa3</span><span class="sxs-lookup"><span data-stu-id="a24f1-688">dc =EASTUS rack =rack3</span></span> |<span data-ttu-id="a24f1-689">Tak</span><span class="sxs-lookup"><span data-stu-id="a24f1-689">Yes</span></span> |
| <span data-ttu-id="a24f1-690">HK-c6-wschód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-690">hk-c6-east-us</span></span> |<span data-ttu-id="a24f1-691">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-691">data</span></span> |<span data-ttu-id="a24f1-692">10.2.2.9</span><span class="sxs-lookup"><span data-stu-id="a24f1-692">10.2.2.9</span></span> |<span data-ttu-id="a24f1-693">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="a24f1-693">hk-c-aset-2</span></span> |<span data-ttu-id="a24f1-694">DC = stojak EASTUS = szafa3</span><span class="sxs-lookup"><span data-stu-id="a24f1-694">dc =EASTUS rack =rack3</span></span> |<span data-ttu-id="a24f1-695">Nie</span><span class="sxs-lookup"><span data-stu-id="a24f1-695">No</span></span> |
| <span data-ttu-id="a24f1-696">HK-c7-wschód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-696">hk-c7-east-us</span></span> |<span data-ttu-id="a24f1-697">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-697">data</span></span> |<span data-ttu-id="a24f1-698">10.2.2.10</span><span class="sxs-lookup"><span data-stu-id="a24f1-698">10.2.2.10</span></span> |<span data-ttu-id="a24f1-699">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="a24f1-699">hk-c-aset-2</span></span> |<span data-ttu-id="a24f1-700">DC = stojak EASTUS = rack4</span><span class="sxs-lookup"><span data-stu-id="a24f1-700">dc =EASTUS rack =rack4</span></span> |<span data-ttu-id="a24f1-701">Tak</span><span class="sxs-lookup"><span data-stu-id="a24f1-701">Yes</span></span> |
| <span data-ttu-id="a24f1-702">HK-c8-wschód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-702">hk-c8-east-us</span></span> |<span data-ttu-id="a24f1-703">Dane</span><span class="sxs-lookup"><span data-stu-id="a24f1-703">data</span></span> |<span data-ttu-id="a24f1-704">10.2.2.11</span><span class="sxs-lookup"><span data-stu-id="a24f1-704">10.2.2.11</span></span> |<span data-ttu-id="a24f1-705">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="a24f1-705">hk-c-aset-2</span></span> |<span data-ttu-id="a24f1-706">DC = stojak EASTUS = rack4</span><span class="sxs-lookup"><span data-stu-id="a24f1-706">dc =EASTUS rack =rack4</span></span> |<span data-ttu-id="a24f1-707">Nie</span><span class="sxs-lookup"><span data-stu-id="a24f1-707">No</span></span> |
| <span data-ttu-id="a24f1-708">HK-w1 — wschód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-708">hk-w1-east-us</span></span> |<span data-ttu-id="a24f1-709">sieci Web</span><span class="sxs-lookup"><span data-stu-id="a24f1-709">web</span></span> |<span data-ttu-id="a24f1-710">10.2.1.4</span><span class="sxs-lookup"><span data-stu-id="a24f1-710">10.2.1.4</span></span> |<span data-ttu-id="a24f1-711">HK p-aset-1</span><span class="sxs-lookup"><span data-stu-id="a24f1-711">hk-w-aset-1</span></span> |<span data-ttu-id="a24f1-712">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="a24f1-712">N/A</span></span> |<span data-ttu-id="a24f1-713">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="a24f1-713">N/A</span></span> |
| <span data-ttu-id="a24f1-714">HK-w2 — wschód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-714">hk-w2-east-us</span></span> |<span data-ttu-id="a24f1-715">sieci Web</span><span class="sxs-lookup"><span data-stu-id="a24f1-715">web</span></span> |<span data-ttu-id="a24f1-716">10.2.1.5</span><span class="sxs-lookup"><span data-stu-id="a24f1-716">10.2.1.5</span></span> |<span data-ttu-id="a24f1-717">HK p-aset-1</span><span class="sxs-lookup"><span data-stu-id="a24f1-717">hk-w-aset-1</span></span> |<span data-ttu-id="a24f1-718">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="a24f1-718">N/A</span></span> |<span data-ttu-id="a24f1-719">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="a24f1-719">N/A</span></span> |

<span data-ttu-id="a24f1-720">Wykonaj hello same instrukcje jako region #1, ale użyj przestrzeni adresowej 10.2.xxx.xxx.</span><span class="sxs-lookup"><span data-stu-id="a24f1-720">Follow hello same instructions as region #1 but use 10.2.xxx.xxx address space.</span></span>

### <a name="step-9-configure-cassandra-on-each-vm"></a><span data-ttu-id="a24f1-721">Krok 9: Konfigurowanie Cassandra na każdej maszynie Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="a24f1-721">Step 9: Configure Cassandra on each VM</span></span>
<span data-ttu-id="a24f1-722">Zaloguj się do hello maszyny Wirtualnej i wykonaj następujące hello:</span><span class="sxs-lookup"><span data-stu-id="a24f1-722">Log into hello VM and perform hello following:</span></span>

1. <span data-ttu-id="a24f1-723">Edytuj $CASS_HOME/conf/cassandra-rackdc.properties toospecify hello Centrum i stojak właściwości danych w formacie hello: dc = stojak EASTUS = szafa1</span><span class="sxs-lookup"><span data-stu-id="a24f1-723">Edit $CASS_HOME/conf/cassandra-rackdc.properties toospecify hello data center and rack properties in hello format:  dc =EASTUS  rack =rack1</span></span>
2. <span data-ttu-id="a24f1-724">Edytuj węzły inicjatora tooconfigure cassandra.yaml: ziarna: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10,10.2.2.4,10.2.2.6,10.2.2.8,10.2.2.10"</span><span class="sxs-lookup"><span data-stu-id="a24f1-724">Edit cassandra.yaml tooconfigure seed nodes:  Seeds: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10,10.2.2.4,10.2.2.6,10.2.2.8,10.2.2.10"</span></span>

### <a name="step-10-start-cassandra"></a><span data-ttu-id="a24f1-725">Krok 10: Uruchom Cassandra</span><span class="sxs-lookup"><span data-stu-id="a24f1-725">Step 10: Start Cassandra</span></span>
<span data-ttu-id="a24f1-726">Zaloguj się do każdej maszyny Wirtualnej i uruchomić Cassandra w tle hello, uruchamiając następujące polecenie hello: $CASS_HOME/bin/cassandra</span><span class="sxs-lookup"><span data-stu-id="a24f1-726">Log into each VM and start Cassandra in hello background by running hello following command: $CASS_HOME/bin/cassandra</span></span>

## <a name="test-hello-multi-region-cluster"></a><span data-ttu-id="a24f1-727">Witaj testu w przypadku klastra</span><span class="sxs-lookup"><span data-stu-id="a24f1-727">Test hello Multi-Region Cluster</span></span>
<span data-ttu-id="a24f1-728">Już Cassandra zostało wdrożone too16 węzłów z 8 węzłów w każdym regionie Azure.</span><span class="sxs-lookup"><span data-stu-id="a24f1-728">By now Cassandra has been deployed too16 nodes with 8 nodes in each Azure region.</span></span> <span data-ttu-id="a24f1-729">Te węzły znajdują się w hello sam klastra ze względu na powitania wspólnej nazwy klastra i konfiguracja węzła hello inicjatora.</span><span class="sxs-lookup"><span data-stu-id="a24f1-729">These nodes are in hello same cluster by virtue of hello common cluster name and hello seed node configuration.</span></span> <span data-ttu-id="a24f1-730">Użyj następującego procesu tootest hello klastra hello:</span><span class="sxs-lookup"><span data-stu-id="a24f1-730">Use hello following process tootest hello cluster:</span></span>

### <a name="step-1-get-hello-internal-load-balancer-ip-for-both-hello-regions-using-powershell"></a><span data-ttu-id="a24f1-731">Krok 1: Uzyskiwanie adresu IP usługi równoważenia obciążenia wewnętrznego powitania dla obu regionów hello przy użyciu programu PowerShell</span><span class="sxs-lookup"><span data-stu-id="a24f1-731">Step 1: Get hello internal load balancer IP for both hello regions using PowerShell</span></span>
* <span data-ttu-id="a24f1-732">Get-AzureInternalLoadbalancer - ServiceName "hk — c-svc zachód us"</span><span class="sxs-lookup"><span data-stu-id="a24f1-732">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-west-us"</span></span>
* <span data-ttu-id="a24f1-733">Get-AzureInternalLoadbalancer - ServiceName "hk — c-svc wschód us"</span><span class="sxs-lookup"><span data-stu-id="a24f1-733">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-east-us"</span></span>  
  
    <span data-ttu-id="a24f1-734">Należy zwrócić uwagę hello adresów IP (np. - 10.1.2.101, wschód - zachód 10.2.2.101) wyświetlane.</span><span class="sxs-lookup"><span data-stu-id="a24f1-734">Note hello IP addresses (e.g. west - 10.1.2.101, east - 10.2.2.101) displayed.</span></span>

### <a name="step-2-execute-hello-following-in-hello-west-region-after-logging-into-hk-w1-west-us"></a><span data-ttu-id="a24f1-735">Krok 2: Wykonaj następujące hello w regionu zachodnie powitania po zalogowaniu w hk-w1 — zachód us</span><span class="sxs-lookup"><span data-stu-id="a24f1-735">Step 2: Execute hello following in hello west region after logging into hk-w1-west-us</span></span>
1. <span data-ttu-id="a24f1-736">Wykonanie $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="a24f1-736">Execute $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span></span>
2. <span data-ttu-id="a24f1-737">Wykonaj następujące polecenia CQL hello:</span><span class="sxs-lookup"><span data-stu-id="a24f1-737">Execute hello following CQL commands:</span></span>
   
     <span data-ttu-id="a24f1-738">TWORZENIE przestrzeni KLUCZY customers_ks z REPLIKACJĄ = {"class": "NetworkToplogyStrategy", "WESTUS": 3, EASTUS: 3};   UŻYJ customers_ks;   Tworzenie tabeli Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   Wstaw do Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   Wstaw do Customers(customer_id, firstname, lastname) wartości 2, 'Magdalena', 'Nowak';   Wybierz * od klientów.</span><span class="sxs-lookup"><span data-stu-id="a24f1-738">CREATE KEYSPACE customers_ks   WITH REPLICATION = { 'class' : 'NetworkToplogyStrategy', 'WESTUS' : 3, 'EASTUS' : 3};   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span></span>

<span data-ttu-id="a24f1-739">Powinny pojawić się wyświetlanej takie jak hello jedną poniżej:</span><span class="sxs-lookup"><span data-stu-id="a24f1-739">You should see a display like hello one below:</span></span>

| <span data-ttu-id="a24f1-740">customer_id</span><span class="sxs-lookup"><span data-stu-id="a24f1-740">customer_id</span></span> | <span data-ttu-id="a24f1-741">Imię</span><span class="sxs-lookup"><span data-stu-id="a24f1-741">firstname</span></span> | <span data-ttu-id="a24f1-742">nazwisko</span><span class="sxs-lookup"><span data-stu-id="a24f1-742">Lastname</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a24f1-743">1</span><span class="sxs-lookup"><span data-stu-id="a24f1-743">1</span></span> |<span data-ttu-id="a24f1-744">Jan</span><span class="sxs-lookup"><span data-stu-id="a24f1-744">John</span></span> |<span data-ttu-id="a24f1-745">Nowak</span><span class="sxs-lookup"><span data-stu-id="a24f1-745">Doe</span></span> |
| <span data-ttu-id="a24f1-746">2</span><span class="sxs-lookup"><span data-stu-id="a24f1-746">2</span></span> |<span data-ttu-id="a24f1-747">Magdalena</span><span class="sxs-lookup"><span data-stu-id="a24f1-747">Jane</span></span> |<span data-ttu-id="a24f1-748">Nowak</span><span class="sxs-lookup"><span data-stu-id="a24f1-748">Doe</span></span> |

### <a name="step-3-execute-hello-following-in-hello-east-region-after-logging-into-hk-w1-east-us"></a><span data-ttu-id="a24f1-749">Krok 3: Wykonanie następujących hello w regionie wschodnie hello po zalogowaniu w hk-w1 — wschód us:</span><span class="sxs-lookup"><span data-stu-id="a24f1-749">Step 3: Execute hello following in hello east region after logging into hk-w1-east-us:</span></span>
1. <span data-ttu-id="a24f1-750">Wykonanie $CASS_HOME/bin/cqlsh 10.2.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="a24f1-750">Execute $CASS_HOME/bin/cqlsh 10.2.2.101 9160</span></span>
2. <span data-ttu-id="a24f1-751">Wykonaj następujące polecenia CQL hello:</span><span class="sxs-lookup"><span data-stu-id="a24f1-751">Execute hello following CQL commands:</span></span>
   
     <span data-ttu-id="a24f1-752">UŻYJ customers_ks;   Tworzenie tabeli Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   Wstaw do Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   Wstaw do Customers(customer_id, firstname, lastname) wartości 2, 'Magdalena', 'Nowak';   Wybierz * od klientów.</span><span class="sxs-lookup"><span data-stu-id="a24f1-752">USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span></span>

<span data-ttu-id="a24f1-753">Powinny pojawić się sam wyświetlić widziany dla regionu zachodnie hello hello:</span><span class="sxs-lookup"><span data-stu-id="a24f1-753">You should see hello same display as seen for hello West region:</span></span>

| <span data-ttu-id="a24f1-754">customer_id</span><span class="sxs-lookup"><span data-stu-id="a24f1-754">customer_id</span></span> | <span data-ttu-id="a24f1-755">Imię</span><span class="sxs-lookup"><span data-stu-id="a24f1-755">firstname</span></span> | <span data-ttu-id="a24f1-756">nazwisko</span><span class="sxs-lookup"><span data-stu-id="a24f1-756">Lastname</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a24f1-757">1</span><span class="sxs-lookup"><span data-stu-id="a24f1-757">1</span></span> |<span data-ttu-id="a24f1-758">Jan</span><span class="sxs-lookup"><span data-stu-id="a24f1-758">John</span></span> |<span data-ttu-id="a24f1-759">Nowak</span><span class="sxs-lookup"><span data-stu-id="a24f1-759">Doe</span></span> |
| <span data-ttu-id="a24f1-760">2</span><span class="sxs-lookup"><span data-stu-id="a24f1-760">2</span></span> |<span data-ttu-id="a24f1-761">Magdalena</span><span class="sxs-lookup"><span data-stu-id="a24f1-761">Jane</span></span> |<span data-ttu-id="a24f1-762">Nowak</span><span class="sxs-lookup"><span data-stu-id="a24f1-762">Doe</span></span> |

<span data-ttu-id="a24f1-763">Wykonaj kilka więcej operacji wstawienia i zobacz, czy pobrać tych zreplikowanych toowest-us, które są częścią klastra hello.</span><span class="sxs-lookup"><span data-stu-id="a24f1-763">Execute a few more inserts and see that those get replicated toowest-us part of hello cluster.</span></span>

## <a name="test-cassandra-cluster-from-nodejs"></a><span data-ttu-id="a24f1-764">Testowanie Cassandra klastra w oprogramowaniu Node.js</span><span class="sxs-lookup"><span data-stu-id="a24f1-764">Test Cassandra Cluster from Node.js</span></span>
<span data-ttu-id="a24f1-765">Przy użyciu jednej z maszyn wirtualnych systemu Linux hello utworzone wcześniej w warstwie "web" hello, firma Microsoft będzie wykonywać proste danych hello wcześniej wstawiony tooread skryptu środowiska Node.js</span><span class="sxs-lookup"><span data-stu-id="a24f1-765">Using one of hello Linux VMs crated in hello "web" tier previously, we will execute a simple Node.js script tooread hello previously inserted data</span></span>

<span data-ttu-id="a24f1-766">**Krok 1: Instalacja klienta Cassandra i Node.js**</span><span class="sxs-lookup"><span data-stu-id="a24f1-766">**Step 1: Install Node.js and Cassandra Client**</span></span>

1. <span data-ttu-id="a24f1-767">Instalowanie środowiska Node.js i npm</span><span class="sxs-lookup"><span data-stu-id="a24f1-767">Install Node.js and npm</span></span>
2. <span data-ttu-id="a24f1-768">Instalowanie pakietu "cassandra klienta w węźle" za pomocą programu npm</span><span class="sxs-lookup"><span data-stu-id="a24f1-768">Install node package "cassandra-client" using npm</span></span>
3. <span data-ttu-id="a24f1-769">Wykonanie następującego skryptu w wierszu polecenia powłoki hello wyświetlającego hello json ciąg hello pobrać danych hello:</span><span class="sxs-lookup"><span data-stu-id="a24f1-769">Execute hello following script at hello shell prompt which displays hello json string of hello retrieved data:</span></span>
   
        var pooledCon = require('cassandra-client').PooledConnection;
        var ksName = "custsupport_ks";
        var cfName = "customers_cf";
        var hostList = ['internal_loadbalancer_ip:9160'];
        var ksConOptions = { hosts: hostList,
                             keyspace: ksName, use_bigints: false };
   
        function createKeyspace(callback){
           var cql = 'CREATE KEYSPACE ' + ksName + ' WITH strategy_class=SimpleStrategy AND strategy_options:replication_factor=1';
           var sysConOptions = { hosts: hostList,  
                                 keyspace: 'system', use_bigints: false };
           var con = new pooledCon(sysConOptions);
           con.execute(cql,[],function(err) {
           if (err) {
             console.log("Failed toocreate Keyspace: " + ksName);
             console.log(err);
           }
           else {
             console.log("Created Keyspace: " + ksName);
             callback(ksConOptions, populateCustomerData);
           }
           });
           con.shutdown();
        }
   
        function createColumnFamily(ksConOptions, callback){
          var params = ['customers_cf','custid','varint','custname',
                        'text','custaddress','text'];
          var cql = 'CREATE COLUMNFAMILY ? (? ? PRIMARY KEY,? ?, ? ?)';
        var con =  new pooledCon(ksConOptions);
          con.execute(cql,params,function(err) {
              if (err) {
                 console.log("Failed toocreate column family: " + params[0]);
                 console.log(err);
              }
              else {
                 console.log("Created column family: " + params[0]);
                 callback();
              }
          });
          con.shutdown();
        }
   
        //populate Data
        function populateCustomerData() {
           var params = ['John','Infinity Dr, TX', 1];
           updateCustomer(ksConOptions,params);
   
           params = ['Tom','Fermat Ln, WA', 2];
           updateCustomer(ksConOptions,params);
        }
   
        //update will also insert hello record if none exists
        function updateCustomer(ksConOptions,params)
        {
          var cql = 'UPDATE customers_cf SET custname=?,custaddress=? where custid=?';
          var con = new pooledCon(ksConOptions);
          con.execute(cql,params,function(err) {
              if (err) console.log(err);
              else console.log("Inserted customer : " + params[0]);
          });
          con.shutdown();
        }
   
        //read hello two rows inserted above
        function readCustomer(ksConOptions)
        {
          var cql = 'SELECT * FROM customers_cf WHERE custid IN (1,2)';
          var con = new pooledCon(ksConOptions);
          con.execute(cql,[],function(err,rows) {
              if (err)
                 console.log(err);
              else
                 for (var i=0; i<rows.length; i++)
                    console.log(JSON.stringify(rows[i]));
            });
           con.shutdown();
        }
   
        //exectue hello code
        createKeyspace(createColumnFamily);
        readCustomer(ksConOptions)

## <a name="conclusion"></a><span data-ttu-id="a24f1-770">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="a24f1-770">Conclusion</span></span>
<span data-ttu-id="a24f1-771">Microsoft Azure to elastyczna platforma, która umożliwia uruchamianie hello zarówno firmy Microsoft, jak i oprogramowanie typu open source, jak zostało to pokazane w tym ćwiczeniu.</span><span class="sxs-lookup"><span data-stu-id="a24f1-771">Microsoft Azure is a flexible platform that allows hello running of both Microsoft as well as open source software as demonstrated by this exercise.</span></span> <span data-ttu-id="a24f1-772">Klastry Cassandra wysokiej dostępności można wdrożyć na jednego centrum danych przez rozłożenie hello węzłów klastra hello wielu domen błędów.</span><span class="sxs-lookup"><span data-stu-id="a24f1-772">Highly available Cassandra clusters can be deployed on a single data center through hello spreading of hello cluster nodes across multiple fault domains.</span></span> <span data-ttu-id="a24f1-773">Klastry Cassandra można także wdrożyć w różnych regionach platformy Azure odległymi geograficznie systemów potwierdzającego po awarii.</span><span class="sxs-lookup"><span data-stu-id="a24f1-773">Cassandra clusters can also be deployed across multiple geographically distant Azure regions for disaster proof systems.</span></span> <span data-ttu-id="a24f1-774">Azure i umożliwia razem Cassandra hello konstrukcja wysoce skalowalną, wysokiej dostępności i usługi w chmurze możliwych do odzyskania po awarii wymagane przez internet współczesnych skalowania usług.</span><span class="sxs-lookup"><span data-stu-id="a24f1-774">Azure and Cassandra together enables hello construction of highly scalable, highly available and disaster recoverable cloud services needed by today's internet scale services.</span></span>  

## <a name="references"></a><span data-ttu-id="a24f1-775">Dokumentacja</span><span class="sxs-lookup"><span data-stu-id="a24f1-775">References</span></span>
* [<span data-ttu-id="a24f1-776">http://cassandra.apache.org</span><span class="sxs-lookup"><span data-stu-id="a24f1-776">http://cassandra.apache.org</span></span>](http://cassandra.apache.org)
* [<span data-ttu-id="a24f1-777">http://www.datastax.com</span><span class="sxs-lookup"><span data-stu-id="a24f1-777">http://www.datastax.com</span></span>](http://www.datastax.com)
* [<span data-ttu-id="a24f1-778">http://www.nodejs.org</span><span class="sxs-lookup"><span data-stu-id="a24f1-778">http://www.nodejs.org</span></span>](http://www.nodejs.org)

