---
title: "Rozwiązywanie problemów z maszyny Wirtualnej systemu Linux wdrożenia — Classic | Dokumentacja firmy Microsoft"
description: "Klasycznym Rozwiązywanie problemów dotyczących wdrożenia podczas tworzenia nowej maszyny wirtualnej systemu Linux na platformie Azure"
services: virtual-machines-linux
documentationcenter: 
author: JiangChen79
manager: felixwu
editor: 
tags: top-support-issue
ms.assetid: c8a963fa-6b2a-4c7a-a1f4-7793adb02b19
ms.service: virtual-machines-linux
ms.workload: na
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 09/06/2016
ms.author: cjiang
ms.openlocfilehash: 35b8ae033425e16fb53cc3127f300e1fb919a2f2
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="troubleshoot-classic-deployment-issues-with-creating-a-new-linux-virtual-machine-in-azure"></a><span data-ttu-id="30885-103">Rozwiązywanie problemów wdrożenie klasyczne z Tworzenie nowej maszyny wirtualnej systemu Linux na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="30885-103">Troubleshoot classic deployment issues with creating a new Linux virtual machine in Azure</span></span>
[!INCLUDE [virtual-machines-troubleshoot-deployment-new-vm-selectors](../../../../includes/virtual-machines-linux-troubleshoot-deployment-new-vm-selectors-include.md)]

[!INCLUDE [virtual-machines-troubleshoot-deployment-new-vm-opening](../../../../includes/virtual-machines-troubleshoot-deployment-new-vm-opening-include.md)]

> [!IMPORTANT] 
> <span data-ttu-id="30885-104">Platforma Azure ma dwa różne modele wdrażania do tworzenia i pracy z zasobami: [Resource Manager i Model Klasyczny](../../../resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="30885-104">Azure has two different deployment models for creating and working with resources: [Resource Manager and Classic](../../../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="30885-105">W tym artykule omówiono przy użyciu klasycznego modelu wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="30885-105">This article covers using the Classic deployment model.</span></span> <span data-ttu-id="30885-106">Firma Microsoft zaleca, aby w przypadku większości nowych wdrożeń korzystać z modelu opartego na programie Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="30885-106">Microsoft recommends that most new deployments use the Resource Manager model.</span></span> <span data-ttu-id="30885-107">Wersja usługi Resource Manager w tym artykule, dla [tutaj](../troubleshoot-deployment-new-vm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="30885-107">For the Resource Manager version of this article, see [here](../troubleshoot-deployment-new-vm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

[!INCLUDE [support-disclaimer](../../../../includes/support-disclaimer.md)]

## <a name="collect-audit-logs"></a><span data-ttu-id="30885-108">Dzienniki inspekcji zbieranie</span><span class="sxs-lookup"><span data-stu-id="30885-108">Collect audit logs</span></span>
<span data-ttu-id="30885-109">Zacząć Rozwiązywanie problemów, zbierz dzienniki inspekcji, aby określić błąd skojarzone z problem.</span><span class="sxs-lookup"><span data-stu-id="30885-109">To start troubleshooting, collect the audit logs to identify the error associated with the issue.</span></span>

<span data-ttu-id="30885-110">W portalu Azure kliknij **Przeglądaj** > **maszyn wirtualnych** > *maszyny wirtualnej systemu Windows* > **ustawienia** > **dzienniki inspekcji**.</span><span class="sxs-lookup"><span data-stu-id="30885-110">In the Azure portal, click **Browse** > **Virtual machines** > *your Windows virtual machine* > **Settings** > **Audit logs**.</span></span>

[!INCLUDE [virtual-machines-troubleshoot-deployment-new-vm-issue1](../../../../includes/virtual-machines-troubleshoot-deployment-new-vm-issue1-include.md)]

[!INCLUDE [virtual-machines-linux-troubleshoot-deployment-new-vm-table](../../../../includes/virtual-machines-linux-troubleshoot-deployment-new-vm-table.md)]

<span data-ttu-id="30885-111">**/ Y:** Jeśli system operacyjny Linux uogólniony i jest przekazany lub przechwycone z ustawieniem uogólniony, wówczas nie będzie błędów.</span><span class="sxs-lookup"><span data-stu-id="30885-111">**Y:** If the OS is Linux generalized, and it is uploaded and/or captured with the generalized setting, then there won’t be any errors.</span></span> <span data-ttu-id="30885-112">Podobnie w przypadku systemu operacyjnego Linux specjalizowany, jest przekazywane lub przechwycić ustawienia specjalne, a następnie nie będzie błędów.</span><span class="sxs-lookup"><span data-stu-id="30885-112">Similarly, if the OS is Linux specialized, and it is uploaded and/or captured with the specialized setting, then there won’t be any errors.</span></span>

<span data-ttu-id="30885-113">**Przekazywanie błędów:**</span><span class="sxs-lookup"><span data-stu-id="30885-113">**Upload Errors:**</span></span>

<span data-ttu-id="30885-114">**N<sup>1</sup>:** Jeśli system operacyjny Linux uogólniony, a jest przekazywany jako wyspecjalizowane, otrzymasz inicjowania obsługi administracyjnej błąd upływu limitu czasu, ponieważ maszyna wirtualna jest zablokowana w fazie inicjowania obsługi administracyjnej.</span><span class="sxs-lookup"><span data-stu-id="30885-114">**N<sup>1</sup>:** If the OS is Linux generalized, and it is uploaded as specialized, you will get a provisioning timeout error because the VM is stuck at the provisioning stage.</span></span>

<span data-ttu-id="30885-115">**N<sup>2</sup>:** w przypadku systemu operacyjnego Linux specjalizowany, a przesłaniem jako uogólniony, otrzymasz inicjowania obsługi administracyjnej błąd niepowodzenie, ponieważ nowa maszyna wirtualna jest uruchomiona z oryginalnej nazwy komputera, nazwę użytkownika i hasło.</span><span class="sxs-lookup"><span data-stu-id="30885-115">**N<sup>2</sup>:** If the OS is Linux specialized, and it is uploaded as generalized, you will get a provisioning failure error because the new VM is running with the original computer name, username and password.</span></span>

<span data-ttu-id="30885-116">**Rozwiązanie:**</span><span class="sxs-lookup"><span data-stu-id="30885-116">**Resolution:**</span></span>

<span data-ttu-id="30885-117">Aby rozwiązać oba te błędy, Przekaż oryginalny dysk VHD, dostępne lokalnych, jak to samo ustawienie dla systemu operacyjnego (uogólniony/specjalizowany).</span><span class="sxs-lookup"><span data-stu-id="30885-117">To resolve both these errors, upload the original VHD, available on-prem, with the same setting as that for the OS (generalized/specialized).</span></span> <span data-ttu-id="30885-118">Można przekazać jako uogólniony, pamiętaj, aby uruchomić - anulowanie zastrzeżenia najpierw.</span><span class="sxs-lookup"><span data-stu-id="30885-118">To upload as generalized, remember to run -deprovision first.</span></span> <span data-ttu-id="30885-119">Zobacz [tworzenie i przekazywanie wirtualnego dysku twardego, który zawiera System operacyjny Linux](create-upload-vhd.md) Aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="30885-119">See [Create and Upload a Virtual Hard Disk that Contains the Linux Operating System](create-upload-vhd.md) for more information.</span></span>

<span data-ttu-id="30885-120">**Zapisz błędy:**</span><span class="sxs-lookup"><span data-stu-id="30885-120">**Capture Errors:**</span></span>

<span data-ttu-id="30885-121">**N<sup>3</sup>:** Jeśli system operacyjny Linux uogólniony, a jest przechwytywany jako wyspecjalizowane, otrzymasz inicjowania obsługi administracyjnej błąd upływu limitu czasu, ponieważ oryginalna maszyna wirtualna nie jest używany, ponieważ jest oznaczony jako uogólniony.</span><span class="sxs-lookup"><span data-stu-id="30885-121">**N<sup>3</sup>:** If the OS is Linux generalized, and it is captured as specialized, you will get a provisioning timeout error because the original VM is not usable as it is marked as generalized.</span></span>

<span data-ttu-id="30885-122">**N<sup>4</sup>:** w przypadku systemu operacyjnego Linux specjalizowany i jest przechwytywany jako uogólniony, otrzymasz inicjowania obsługi administracyjnej błąd niepowodzenie, ponieważ nowa maszyna wirtualna jest uruchomiona z oryginalnej nazwy komputera, nazwę użytkownika i hasło.</span><span class="sxs-lookup"><span data-stu-id="30885-122">**N<sup>4</sup>:** If the OS is Linux specialized, and it is captured as generalized, you will get a provisioning failure error because the new VM is running with the original computer name, username and password.</span></span> <span data-ttu-id="30885-123">Ponadto oryginalna maszyna wirtualna nie jest używany ponieważ jest oznaczony jako specjalne.</span><span class="sxs-lookup"><span data-stu-id="30885-123">Also, the original VM is not usable because it is marked as specialized.</span></span>

<span data-ttu-id="30885-124">**Rozwiązanie:**</span><span class="sxs-lookup"><span data-stu-id="30885-124">**Resolution:**</span></span>

<span data-ttu-id="30885-125">Usuń oba te błędy, Usuń bieżący obraz z portalu, i [je ponownie przechwycić z bieżącym wirtualnych dysków twardych](capture-image.md) to samo ustawienie, jak te dla systemu operacyjnego (uogólniony/specjalizowany).</span><span class="sxs-lookup"><span data-stu-id="30885-125">To resolve both these errors, delete the current image from the portal, and [recapture it from the current VHDs](capture-image.md) with the same setting as that for the OS (generalized/specialized).</span></span>

## <a name="issue-custom-gallery-marketplace-image-allocation-failure"></a><span data-ttu-id="30885-126">Problem: Niestandardowy / galerii / obrazu z witryny marketplace; Błąd alokacji</span><span class="sxs-lookup"><span data-stu-id="30885-126">Issue: Custom/ gallery/ marketplace image; allocation failure</span></span>
<span data-ttu-id="30885-127">Ten błąd pojawia się w sytuacjach, gdy nowe żądanie maszyny Wirtualnej są wysyłane do klastra, który nie ma dostępnego wolnego miejsca, aby pomieścić żądania albo nie obsługuje żądanej rozmiaru maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="30885-127">This error arises in situations when the new VM request is sent to a cluster that either does not have available free space to accommodate the request, or cannot support the VM size being requested.</span></span> <span data-ttu-id="30885-128">Nie jest możliwe mieszać innej serii maszyn wirtualnych w tej samej usłudze w chmurze.</span><span class="sxs-lookup"><span data-stu-id="30885-128">It is not possible to mix different series of VMs in the same cloud service.</span></span> <span data-ttu-id="30885-129">Więc jeśli chcesz tworzyć nowej maszyny Wirtualnej o innym rozmiarze niż co usługi w chmurze może obsługiwać żądania obliczeń zakończy się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="30885-129">So if you want to create a new VM of a different size than what your cloud service can support, the compute request will fail.</span></span>

<span data-ttu-id="30885-130">W zależności od ograniczeń usługi w chmurze, który jest używany do utworzenia nowej maszyny Wirtualnej może wystąpić błąd spowodowane jedną z dwóch sytuacji.</span><span class="sxs-lookup"><span data-stu-id="30885-130">Depending on the constraints of the cloud service you use to create the new VM, you might encounter an error caused by one of two situations.</span></span>

<span data-ttu-id="30885-131">**Przyczyna 1:** usługi w chmurze jest przypięta do określonego klastra lub jest połączony z grupą koligacji i dlatego przypięty do określonego klastra zgodnie z projektem.</span><span class="sxs-lookup"><span data-stu-id="30885-131">**Cause 1:** The cloud service is pinned to a specific cluster, or it is linked to an affinity group, and hence pinned to a specific cluster by design.</span></span> <span data-ttu-id="30885-132">Dlatego nowy zasób obliczeniowy żądania w tej grupie koligacji są sprawdzane w tym samym klastrze, gdzie hostowane są istniejących zasobów.</span><span class="sxs-lookup"><span data-stu-id="30885-132">So new compute resource requests in that affinity group are tried in the same cluster where the existing resources are hosted.</span></span> <span data-ttu-id="30885-133">Jednak tego samego klastra mogą nie obsługiwać żądany rozmiar maszyny Wirtualnej lub ma za mało dostępnego miejsca, powodując błąd alokacji.</span><span class="sxs-lookup"><span data-stu-id="30885-133">However, the same cluster may either not support the requested VM size or have insufficient available space, resulting in an allocation error.</span></span> <span data-ttu-id="30885-134">Jest to możliwe, czy nowe zasoby są tworzone przez nową usługę w chmurze albo przez istniejącą usługę w chmurze.</span><span class="sxs-lookup"><span data-stu-id="30885-134">This is true whether the new resources are created through a new cloud service or through an existing cloud service.</span></span>

<span data-ttu-id="30885-135">**Rozwiązanie 1:**</span><span class="sxs-lookup"><span data-stu-id="30885-135">**Resolution 1:**</span></span>

* <span data-ttu-id="30885-136">Utwórz nową usługę w chmurze i powiązać ją z obszarem lub sieci wirtualnej na podstawie regionu.</span><span class="sxs-lookup"><span data-stu-id="30885-136">Create a new cloud service and associate it with either a region or a region-based virtual network.</span></span>
* <span data-ttu-id="30885-137">Utwórz nową maszynę Wirtualną w nowej usługi w chmurze.</span><span class="sxs-lookup"><span data-stu-id="30885-137">Create a new VM in the new cloud service.</span></span>
  <span data-ttu-id="30885-138">Jeśli wystąpi błąd podczas próby utworzenia nowej usługi w chmurze, spróbuj ponownie później lub zmienić regionu dla usługi w chmurze.</span><span class="sxs-lookup"><span data-stu-id="30885-138">If you get an error when trying to create a new cloud service, either retry at a later time or change the region for the cloud service.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="30885-139">Jeśli próbujesz utworzyć nową maszynę Wirtualną w istniejącej usługi w chmurze, ale nie i utworzyć nową usługę chmury dla nowej maszyny Wirtualnej, można skonsolidować wszystkich maszyn wirtualnych w tej samej usłudze w chmurze.</span><span class="sxs-lookup"><span data-stu-id="30885-139">If you were trying to create a new VM in an existing cloud service but couldn’t, and had to create a new cloud service for your new VM, you can choose to consolidate all your VMs in the same cloud service.</span></span> <span data-ttu-id="30885-140">Aby to zrobić, Usuń maszyn wirtualnych w istniejącej usługi w chmurze i ponownie je przechwycić z ich dysków w nowej usługi w chmurze.</span><span class="sxs-lookup"><span data-stu-id="30885-140">To do so, delete the VMs in the existing cloud service, and recapture them from their disks in the new cloud service.</span></span> <span data-ttu-id="30885-141">Jest jednak należy pamiętać, że nowa usługa w chmurze będzie są nowej nazwy i adresu VIP, więc należy zaktualizować te zależności, których te informacje jest obecnie używana dla istniejącej usługi w chmurze.</span><span class="sxs-lookup"><span data-stu-id="30885-141">However, it is important to remember that the new cloud service will have a new name and VIP, so you will need to update these for all the dependencies that currently use this information for the existing cloud service.</span></span>
> 
> 

<span data-ttu-id="30885-142">**Przyczyny 2:** usługi w chmurze jest skojarzona z siecią wirtualną, która jest połączony do grupy koligacji, więc jest przypięta do określonego klastra zgodnie z projektem.</span><span class="sxs-lookup"><span data-stu-id="30885-142">**Cause 2:** The cloud service is associated with a virtual network that is linked to an affinity group, so it is pinned to a specific cluster by design.</span></span> <span data-ttu-id="30885-143">Wszystkie nowe zasobów obliczeniowych żądania w tej grupie koligacji w związku z tym są sprawdzane w tym samym klastrze, gdzie hostowane są istniejących zasobów.</span><span class="sxs-lookup"><span data-stu-id="30885-143">All new compute resource requests in that affinity group are therefore tried in the same cluster where the existing resources are hosted.</span></span> <span data-ttu-id="30885-144">Jednak tego samego klastra mogą nie obsługiwać żądany rozmiar maszyny Wirtualnej lub ma za mało dostępnego miejsca, powodując błąd alokacji.</span><span class="sxs-lookup"><span data-stu-id="30885-144">However, the same cluster may either not support the requested VM size or have insufficient available space, resulting in an allocation error.</span></span> <span data-ttu-id="30885-145">Jest to możliwe, czy nowe zasoby są tworzone przez nową usługę w chmurze albo przez istniejącą usługę w chmurze.</span><span class="sxs-lookup"><span data-stu-id="30885-145">This is true whether the new resources are created through a new cloud service or through an existing cloud service.</span></span>

<span data-ttu-id="30885-146">**Rozdzielczość 2:**</span><span class="sxs-lookup"><span data-stu-id="30885-146">**Resolution 2:**</span></span>

* <span data-ttu-id="30885-147">Tworzenie nowego regionalnej sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="30885-147">Create a new regional virtual network.</span></span>
* <span data-ttu-id="30885-148">Utwórz nową maszynę Wirtualną w nowej sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="30885-148">Create the new VM in the new virtual network.</span></span>
* <span data-ttu-id="30885-149">[Połączenie z istniejącą siecią wirtualną](https://azure.microsoft.com/blog/vnet-to-vnet-connecting-virtual-networks-in-azure-across-different-regions/) do nowej sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="30885-149">[Connect your existing virtual network](https://azure.microsoft.com/blog/vnet-to-vnet-connecting-virtual-networks-in-azure-across-different-regions/) to the new virtual network.</span></span> <span data-ttu-id="30885-150">Zobacz więcej informacji [regionalnych sieci wirtualnych](https://azure.microsoft.com/blog/2014/05/14/regional-virtual-networks/).</span><span class="sxs-lookup"><span data-stu-id="30885-150">See more about [regional virtual networks](https://azure.microsoft.com/blog/2014/05/14/regional-virtual-networks/).</span></span> <span data-ttu-id="30885-151">Można też [migrację do regionalnej sieci wirtualnej sieci wirtualnej na podstawie grupy koligacji](https://azure.microsoft.com/blog/2014/11/26/migrating-existing-services-to-regional-scope/), a następnie utwórz nową maszynę Wirtualną.</span><span class="sxs-lookup"><span data-stu-id="30885-151">Alternatively, you can [migrate your affinity-group-based virtual network to a regional virtual network](https://azure.microsoft.com/blog/2014/11/26/migrating-existing-services-to-regional-scope/), and then create the new VM.</span></span>

## <a name="next-steps"></a><span data-ttu-id="30885-152">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="30885-152">Next steps</span></span>
<span data-ttu-id="30885-153">Jeśli wystąpią problemy podczas uruchamiania zatrzymanej maszyny Wirtualnej systemu Linux lub zmień rozmiar istniejącej maszyny Wirtualnej systemu Linux na platformie Azure, zobacz [klasycznego Rozwiązywanie problemów dotyczących wdrożenia z ponownym uruchomieniem lub zmiana rozmiaru istniejącej maszyny wirtualnej systemu Linux na platformie Azure](restart-resize-error-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="30885-153">If you encounter issues when you start a stopped Linux VM or resize an existing Linux VM in Azure, see [Troubleshoot classic deployment issues with restarting or resizing an existing Linux Virtual Machine in Azure](restart-resize-error-troubleshooting.md).</span></span>

