---
title: "aaaHigh dostępności i odzyskiwania po awarii programu SAP HANA na platformie Azure (wystąpienia duże) | Dokumentacja firmy Microsoft"
description: "Ustal wysokiej dostępności i planu odzyskiwania po awarii programu SAP HANA na platformie Azure (wystąpienia duże)."
services: virtual-machines-linux
documentationcenter: 
author: RicksterCDN
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure
ms.date: 12/01/2016
ms.author: rclaus
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 0c0967f54cf29bbb275eb7cda9d36608488add9e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="sap-hana-large-instances-high-availability-and-disaster-recovery-on-azure"></a><span data-ttu-id="1cf91-103">SAP HANA (duże wystąpień) wysokiej dostępności i odzyskiwania po awarii na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="1cf91-103">SAP HANA (large instances) high availability and disaster recovery on Azure</span></span> 

<span data-ttu-id="1cf91-104">Wysoka dostępność i odzyskiwanie po awarii są ważne kwestie związane z uruchomionych z kluczowych SAP HANA na serwerach Azure (wystąpienia duże).</span><span class="sxs-lookup"><span data-stu-id="1cf91-104">High availability and disaster recovery are important aspects of running your mission-critical SAP HANA on Azure (large instances) servers.</span></span> <span data-ttu-id="1cf91-105">Jego ważne toowork z SAP, system integrator lub Microsoft tooproperly architektów i wdrożenie hello strategii prawo wysoki dostępności/odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="1cf91-105">It's important toowork with SAP, your system integrator, or Microsoft tooproperly architect and implement hello right high-availability/disaster-recovery strategy.</span></span> <span data-ttu-id="1cf91-106">Istnieje również cel punktu odzyskiwania hello tooconsider ważne i celu czasu odzyskiwania, które są tooyour określonego środowiska.</span><span class="sxs-lookup"><span data-stu-id="1cf91-106">It is also important tooconsider hello recovery point objective and recovery time objective, which are specific tooyour environment.</span></span>

## <a name="high-availability"></a><span data-ttu-id="1cf91-107">Wysoka dostępność</span><span class="sxs-lookup"><span data-stu-id="1cf91-107">High availability</span></span>

<span data-ttu-id="1cf91-108">Firma Microsoft zapewnia metody wysokiej dostępności SAP HANA "poza pole hello", które obejmują:</span><span class="sxs-lookup"><span data-stu-id="1cf91-108">Microsoft supports SAP HANA high-availability methods "out of hello box," which include:</span></span>

- <span data-ttu-id="1cf91-109">**Replikacja magazynu:** hello tooreplicate możliwości system przechowywania wszystkich lokalizacji tooanother danych (w ramach, lub oddzielnie od hello tym samym centrum danych).</span><span class="sxs-lookup"><span data-stu-id="1cf91-109">**Storage replication:** hello storage system's ability tooreplicate all data tooanother location (within, or separate from, hello same datacenter).</span></span> <span data-ttu-id="1cf91-110">SAP HANA działa niezależnie od tej metody.</span><span class="sxs-lookup"><span data-stu-id="1cf91-110">SAP HANA operates independently of this method.</span></span>
- <span data-ttu-id="1cf91-111">**Replikacji systemu HANA:** hello replikacji wszystkich danych w oddzielnym systemie SAP HANA tooa SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="1cf91-111">**HANA system replication:** hello replication of all data in SAP HANA tooa separate SAP HANA system.</span></span> <span data-ttu-id="1cf91-112">celu czasu odzyskiwania Hello jest zminimalizowany do replikacji danych w regularnych odstępach czasu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-112">hello recovery time objective is minimized through data replication at regular intervals.</span></span> <span data-ttu-id="1cf91-113">SAP HANA obsługuje asynchroniczne, synchronicznej tryby w pamięci i synchroniczne (zalecane tylko dla SAP HANA hello systemów, które znajdują się w tym samym centrum danych lub mniej niż 100 KM od siebie).</span><span class="sxs-lookup"><span data-stu-id="1cf91-113">SAP HANA supports asynchronous, synchronous in-memory, and synchronous modes (recommended only for SAP HANA systems that are within hello same datacenter or less than 100 KM apart).</span></span> <span data-ttu-id="1cf91-114">Hello bieżącego projektu HANA dużych wystąpienia sygnatur w HANA replikacji systemu może służyć tylko wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="1cf91-114">In hello current design of HANA large-instance stamps, HANA system replication can be used for high availability only.</span></span>
- <span data-ttu-id="1cf91-115">**Host trybu failover automatycznego:** toouse rozwiązania lokalnego odzyskiwania usterek, jako alternatywnej toosystem replikacji.</span><span class="sxs-lookup"><span data-stu-id="1cf91-115">**Host auto-failover:** A local fault-recovery solution toouse as an alternative toosystem replication.</span></span> <span data-ttu-id="1cf91-116">Gdy węzeł główny hello staje się niedostępny, co najmniej jeden węzeł rezerwy SAP HANA są skonfigurowane w trybie skalowalnego w poziomie i SAP HANA automatycznie przełącza tooanother węzła.</span><span class="sxs-lookup"><span data-stu-id="1cf91-116">When hello master node becomes unavailable, one or more standby SAP HANA nodes are configured in scale-out mode and SAP HANA automatically fails over tooanother node.</span></span>

<span data-ttu-id="1cf91-117">Aby uzyskać więcej informacji na temat SAP HANA wysokiej dostępności Zobacz hello następujących informacji SAP:</span><span class="sxs-lookup"><span data-stu-id="1cf91-117">For more information on SAP HANA high availability, see hello following SAP information:</span></span>

- [<span data-ttu-id="1cf91-118">Oficjalny dokument programu SAP HANA wysokiej dostępności</span><span class="sxs-lookup"><span data-stu-id="1cf91-118">SAP HANA High-Availability Whitepaper</span></span>](http://go.sap.com/documents/2016/05/f8e5eeba-737c-0010-82c7-eda71af511fa.html)
- [<span data-ttu-id="1cf91-119">Przewodnik administracji programu SAP HANA</span><span class="sxs-lookup"><span data-stu-id="1cf91-119">SAP HANA Administration Guide</span></span>](http://help.sap.com/hana/SAP_HANA_Administration_Guide_en.pdf)
- [<span data-ttu-id="1cf91-120">Akademia SAP wideo na replikacji systemu SAP HANA</span><span class="sxs-lookup"><span data-stu-id="1cf91-120">SAP Academy Video on SAP HANA System Replication</span></span>](http://scn.sap.com/community/hana-in-memory/blog/2015/05/19/sap-hana-system-replication)
- [<span data-ttu-id="1cf91-121">Obsługa Uwaga #1999880 — często zadawane pytania dotyczące replikacji systemu SAP HANA SAP</span><span class="sxs-lookup"><span data-stu-id="1cf91-121">SAP Support Note #1999880 – FAQ on SAP HANA System Replication</span></span>](https://bcs.wdf.sap.corp/sap/support/notes/1999880)
- <span data-ttu-id="1cf91-122">[Obsługa Uwaga #2165547 — SAP HANA tworzenia kopii zapasowej i przywracania w środowisku replikacji programu SAP HANA systemu SAP](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3231363535343726)</span><span class="sxs-lookup"><span data-stu-id="1cf91-122">[SAP Support Note #2165547 – SAP HANA Backup and Restore within SAP HANA System Replication Environment](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3231363535343726)</span></span>
- <span data-ttu-id="1cf91-123">[SAP Uwaga Obsługa #1984882 — za pomocą replikacji systemu SAP HANA wymiany sprzętu przestojów minimalna/Zero](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3139383438383226)</span><span class="sxs-lookup"><span data-stu-id="1cf91-123">[SAP Support Note #1984882 – Using SAP HANA System Replication for Hardware Exchange with Minimum/Zero Downtime](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3139383438383226)</span></span>

## <a name="disaster-recovery"></a><span data-ttu-id="1cf91-124">Odzyskiwanie po awarii</span><span class="sxs-lookup"><span data-stu-id="1cf91-124">Disaster recovery</span></span>

<span data-ttu-id="1cf91-125">SAP HANA na platformie Azure (wystąpienia duże) jest oferowana w dwóch regionach platformy Azure w regionie geograficznymi.</span><span class="sxs-lookup"><span data-stu-id="1cf91-125">SAP HANA on Azure (large instances) is offered in two Azure regions in a geopolitical region.</span></span> <span data-ttu-id="1cf91-126">Między hello dwóch dużych wystąpienia sygnatury o dwóch różnych regionach jest bezpośrednie łączność do replikacji danych podczas odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="1cf91-126">Between hello two large-instance stamps of two different regions is a direct network connectivity for replicating data during disaster recovery.</span></span> <span data-ttu-id="1cf91-127">Replikacja Hello danych hello jest na podstawie infrastruktury magazynu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-127">hello replication of hello data is storage-infrastructure based.</span></span> <span data-ttu-id="1cf91-128">Witaj replikacji nie jest wykonywana domyślnie.</span><span class="sxs-lookup"><span data-stu-id="1cf91-128">hello replication is not done by default.</span></span> <span data-ttu-id="1cf91-129">Została ona wysłana dla konfiguracji klienta hello, uporządkowanych hello odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="1cf91-129">It is done for hello customer configurations that ordered hello disaster recovery.</span></span> <span data-ttu-id="1cf91-130">Hello bieżącego projektu w HANA system replikacji nie może służyć do odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="1cf91-130">In hello current design, HANA system replication can't be used for disaster recovery.</span></span>

<span data-ttu-id="1cf91-131">Jednak zaletą tootake hello odzyskiwania po awarii, dlatego należy toostart toodesign hello sieci łączności toohello dwóch różnych regionach platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="1cf91-131">However, tootake advantage of hello disaster recovery, you need toostart toodesign hello network connectivity toohello two different Azure regions.</span></span> <span data-ttu-id="1cf91-132">toodo, należy więc połączenie obwodu Azure ExpressRoute z lokalnymi główny region platformy Azure i inne obwodu połączenie z lokalnymi tooyour odzyskiwania po awarii regionu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-132">toodo so, you need an Azure ExpressRoute circuit connection from on-premises in your main Azure region and another circuit connection from on-premises tooyour disaster-recovery region.</span></span> <span data-ttu-id="1cf91-133">To jest miara obejmowałoby sytuacji, w którym pełną regionu Azure, łącznie z lokalizacji Microsoft enterprise krawędzi routera (MSEE) wystąpił problem.</span><span class="sxs-lookup"><span data-stu-id="1cf91-133">This measure would cover a situation in which a complete Azure region, including a Microsoft enterprise edge router (MSEE) location, has an issue.</span></span>

<span data-ttu-id="1cf91-134">Jako druga Metryka używana można połączyć wszystkie sieci wirtualne Azure łączących tooSAP HANA na platformie Azure (duże wystąpień) w jednym z tooboth regionów hello tych obwody usługi ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="1cf91-134">As a second measure, you can connect all Azure virtual networks that connect tooSAP HANA on Azure (large instances) in one of hello regions tooboth of those ExpressRoute circuits.</span></span> <span data-ttu-id="1cf91-135">To jest miara dotyczy przypadku, gdy tylko jeden lokalizacji MSEE hello łączącego Twojej lokalizacji lokalnej z Azure przechodzi nieczynne.</span><span class="sxs-lookup"><span data-stu-id="1cf91-135">This measure addresses a case where only one of hello MSEE locations that connects your on-premises location with Azure goes off duty.</span></span>

<span data-ttu-id="1cf91-136">Witaj poniższej ilustracji przedstawiono hello konfiguracją optymalną dla odzyskiwania po awarii:</span><span class="sxs-lookup"><span data-stu-id="1cf91-136">hello following figure shows hello optimal configuration for disaster recovery:</span></span>

![Konfiguracją optymalną dla odzyskiwania po awarii](./media/hana-overview-high-availability-disaster-recovery/image1-optimal-configuration.png)

<span data-ttu-id="1cf91-138">Witaj optymalne przypadek konfiguracji odzyskiwania po awarii sieci hello jest toohave dwa obwody usługi ExpressRoute z lokalnymi toohello dwóch różnych regionach platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="1cf91-138">hello optimal case for a disaster-recovery configuration of hello network is toohave two ExpressRoute circuits from on-premises toohello two different Azure regions.</span></span> <span data-ttu-id="1cf91-139">Jeden obwód przechodzi tooregion #1, na którym uruchomiono wystąpienie produkcji.</span><span class="sxs-lookup"><span data-stu-id="1cf91-139">One circuit goes tooregion #1, running a production instance.</span></span> <span data-ttu-id="1cf91-140">drugi obwodu ExpressRoute Hello przechodzi tooregion #2 uruchamianie niektórych wystąpień HANA nieprodukcyjnych.</span><span class="sxs-lookup"><span data-stu-id="1cf91-140">hello second ExpressRoute circuit goes tooregion #2, running some non-production HANA instances.</span></span> <span data-ttu-id="1cf91-141">(Jest to ważne, jeśli cały region platformy Azure, tym hello MSEE i sygnatury dużych wystąpienia wychodzeniu hello siatki.)</span><span class="sxs-lookup"><span data-stu-id="1cf91-141">(This is important if an entire Azure region, including hello MSEE and large-instance stamp, goes off hello grid.)</span></span>

<span data-ttu-id="1cf91-142">Jako druga Metryka hello różnych sieci wirtualnych są połączone toohello różnych obwody usługi ExpressRoute, które są połączone tooSAP HANA na platformie Azure (wystąpienia duże).</span><span class="sxs-lookup"><span data-stu-id="1cf91-142">As a second measure, hello various virtual networks are connected toohello various ExpressRoute circuits that are connected tooSAP HANA on Azure (large instances).</span></span> <span data-ttu-id="1cf91-143">Hello lokalizacji, gdzie MSEE kończy się niepowodzeniem, lub można obniżyć hello cel punktu odzyskiwania podczas odzyskiwania po awarii, można pominąć, ponieważ omówiono później.</span><span class="sxs-lookup"><span data-stu-id="1cf91-143">You can bypass hello location where an MSEE is failing, or you can lower hello recovery point objective for disaster recovery, as we discuss later.</span></span>

<span data-ttu-id="1cf91-144">Witaj dalej wymagania dotyczące konfiguracji odzyskiwania po awarii są:</span><span class="sxs-lookup"><span data-stu-id="1cf91-144">hello next requirements for a disaster-recovery setup are:</span></span>

- <span data-ttu-id="1cf91-145">Na jednostki SKU Azure (wystąpienia duże) z hello sam rozmiar jako jednostki SKU produkcyjnego i wdrożyć je w hello region odzyskiwania po awarii należy zamówić SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="1cf91-145">You must order SAP HANA on Azure (large instances) SKUs of hello same size as your production SKUs and deploy them in hello disaster-recovery region.</span></span> <span data-ttu-id="1cf91-146">Te wystąpienia może być używane toorun testu, piaskownicy lub wystąpień HANA pytań i odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="1cf91-146">These instances can be used toorun test, sandbox, or QA HANA instances.</span></span>
- <span data-ttu-id="1cf91-147">Należy zamówić profilu odzyskiwania po awarii dla każdego z programu SAP HANA na jednostki SKU Azure (wystąpienia duże), które mają toorecover w lokacji odzyskiwania po awarii hello, jeśli to konieczne.</span><span class="sxs-lookup"><span data-stu-id="1cf91-147">You must order a disaster-recovery profile for each of your SAP HANA on Azure (large instances) SKUs that you want toorecover in hello disaster-recovery site, if necessary.</span></span> <span data-ttu-id="1cf91-148">Ta akcja prowadzi toohello Alokacja magazynu woluminy, które są docelowy hello hello replikacji magazynu z Twoim regionie produkcji w hello region odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="1cf91-148">This action leads toohello allocation of storage volumes, which are hello target of hello storage replication from your production region into hello disaster-recovery region.</span></span>

<span data-ttu-id="1cf91-149">Po hello poprzedzających wymagania zostały spełnione, jest ona z replikacji magazynu hello toostart odpowiedzialności.</span><span class="sxs-lookup"><span data-stu-id="1cf91-149">After you meet hello preceding requirements, it is your responsibility toostart hello storage replication.</span></span> <span data-ttu-id="1cf91-150">W infrastrukturze magazynu hello używany dla SAP HANA na platformie Azure (wystąpienia duże) podstawą hello replikacji magazynu jest magazynu migawek.</span><span class="sxs-lookup"><span data-stu-id="1cf91-150">In hello storage infrastructure used for SAP HANA on Azure (large instances), hello basis of storage replication is storage snapshots.</span></span> <span data-ttu-id="1cf91-151">toostart hello odzyskiwania po awarii replikacji, należy tooperform:</span><span class="sxs-lookup"><span data-stu-id="1cf91-151">toostart hello disaster-recovery replication, you need tooperform:</span></span>

- <span data-ttu-id="1cf91-152">Migawka rozruchowych jednostki LUN, zgodnie z wcześniejszym opisem.</span><span class="sxs-lookup"><span data-stu-id="1cf91-152">A snapshot of your boot LUN, as described earlier.</span></span>
- <span data-ttu-id="1cf91-153">Migawka woluminów powiązane HANA, zgodnie z wcześniejszym opisem.</span><span class="sxs-lookup"><span data-stu-id="1cf91-153">A snapshot of your HANA-related volumes, as described earlier.</span></span>

<span data-ttu-id="1cf91-154">Po wykonaniu te migawki początkowej repliki woluminów hello jest rozpoczęta hello woluminach, które są skojarzone z danym profilem odzyskiwania po awarii w regionie odzyskiwania po awarii hello.</span><span class="sxs-lookup"><span data-stu-id="1cf91-154">After you execute these snapshots, an initial replica of hello volumes is seeded on hello volumes that are associated with your disaster-recovery profile in hello disaster-recovery region.</span></span>

<span data-ttu-id="1cf91-155">Następnie hello najnowszych migawki magazynu jest używana co godzinę delty hello tooreplicate, których tworzenie aplikacji na powitania woluminów magazynu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-155">Subsequently, hello most recent storage snapshot is used every hour tooreplicate hello deltas that develop on hello storage volumes.</span></span>

<span data-ttu-id="1cf91-156">Witaj cel punktu odzyskiwania, które odbywa się w tej konfiguracji jest od 60 minut too90.</span><span class="sxs-lookup"><span data-stu-id="1cf91-156">hello recovery point objective that's achieved with this configuration is from 60 too90 minutes.</span></span> <span data-ttu-id="1cf91-157">tooachieve lepsze odzyskiwania cel w przypadku odzyskiwania po awarii hello kopiowania hello HANA kopie zapasowe dziennika transakcji z SAP HANA na toohello Azure (wystąpienia duże) punktu inny region platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="1cf91-157">tooachieve a better recovery point objective in hello disaster-recovery case, copy hello HANA transaction log backups from SAP HANA on Azure (large instances) toohello other Azure region.</span></span> <span data-ttu-id="1cf91-158">tooachieve ten cel punktu odzyskiwania hello następujące:</span><span class="sxs-lookup"><span data-stu-id="1cf91-158">tooachieve this recovery point objective, do hello following:</span></span>

1. <span data-ttu-id="1cf91-159">Utwórz kopię zapasową transakcji HANA hello Zaloguj się jako często, jak to możliwe za/hana / / kopii zapasowej dziennika.</span><span class="sxs-lookup"><span data-stu-id="1cf91-159">Back up hello HANA transaction log as frequently as possible too/hana/log/backup.</span></span>
2. <span data-ttu-id="1cf91-160">Kopiowanie hello kopie zapasowe dziennika transakcji, jeśli są Zakończono tooan maszyny wirtualnej platformy Azure (VM), który znajduje się w sieci wirtualnej, który został podłączony toohello SAP HANA na serwerze Azure (wystąpienia duże).</span><span class="sxs-lookup"><span data-stu-id="1cf91-160">Copy hello transaction log backups when they are finished tooan Azure virtual machine (VM), which is in a virtual network that's connected toohello SAP HANA on Azure (large instances) server.</span></span>
3. <span data-ttu-id="1cf91-161">Z tej maszyny Wirtualnej skopiuj hello tooa kopii zapasowej maszyny Wirtualnej, który znajduje się w sieci wirtualnej w regionie odzyskiwania po awarii hello.</span><span class="sxs-lookup"><span data-stu-id="1cf91-161">From that VM, copy hello backup tooa VM that's in a virtual network in hello disaster-recovery region.</span></span>
4. <span data-ttu-id="1cf91-162">Zachowaj kopie zapasowe dziennika transakcji hello, regionu w hello maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="1cf91-162">Keep hello transaction log backups in that region in hello VM.</span></span>

<span data-ttu-id="1cf91-163">W razie awarii po hello odzyskiwania po awarii profil został wdrożony na używanego serwera, skopiować hello kopie zapasowe dziennika transakcji z hello wirtualna toohello SAP HANA na platformie Azure (wystąpienia duże) jest teraz serwerem podstawowym hello w regionie odzyskiwania po awarii hello, i przywrócenie tych kopii zapasowych.</span><span class="sxs-lookup"><span data-stu-id="1cf91-163">In case of disaster, after hello disaster-recovery profile has been deployed on an actual server, copy hello transaction log backups from hello VM toohello SAP HANA on Azure (large instances) that is now hello primary server in hello disaster-recovery region, and restore those backups.</span></span> <span data-ttu-id="1cf91-164">Odzyskiwanie jest możliwe, ponieważ stan hello HANA na dyskach odzyskiwania po awarii hello jest to, że migawki HANA.</span><span class="sxs-lookup"><span data-stu-id="1cf91-164">This recovery is possible because hello state of HANA on hello disaster-recovery disks is that of a HANA snapshot.</span></span> <span data-ttu-id="1cf91-165">To jest punkt przesunięcia hello dalsze operacje przywracania z kopii zapasowej dziennika transakcji.</span><span class="sxs-lookup"><span data-stu-id="1cf91-165">This is hello offset point for further restorations of transaction log backups.</span></span>

## <a name="backup-and-restore"></a><span data-ttu-id="1cf91-166">Tworzenie kopii zapasowej i przywracanie</span><span class="sxs-lookup"><span data-stu-id="1cf91-166">Backup and restore</span></span>

<span data-ttu-id="1cf91-167">Jest jednej z baz danych hello najważniejszych aspektów toooperating upewnienie się, że hello bazy danych mogą być chronione od różnych zdarzeń losowych.</span><span class="sxs-lookup"><span data-stu-id="1cf91-167">One of hello most important aspects toooperating databases is making sure hello database can be protected from various catastrophic events.</span></span> <span data-ttu-id="1cf91-168">Te zdarzenia może być spowodowane przez coś z klęski żywiołowej toosimple użytkownika błędów.</span><span class="sxs-lookup"><span data-stu-id="1cf91-168">These events can be caused by anything from natural disasters toosimple user errors.</span></span>

<span data-ttu-id="1cf91-169">Tworzenie kopii zapasowej bazy danych, z toorestore możliwości hello go tooany punktu w czasie (takich jak przed ktoś usunął kluczowe dane), umożliwia przywrócenie tooa stanu jak, jak to możliwe sposób toohello był przed wystąpieniem hello przerw w działaniu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-169">Backing up a database, with hello ability toorestore it tooany point in time (such as before somebody deleted critical data), allows restoration tooa state that is as close as possible toohello way it was before hello disruption occurred.</span></span>

<span data-ttu-id="1cf91-170">Dwa typy kopii zapasowych należy wykonać w celu uzyskania najlepszych wyników:</span><span class="sxs-lookup"><span data-stu-id="1cf91-170">Two types of backups must be performed for best results:</span></span>

- <span data-ttu-id="1cf91-171">Kopie zapasowe bazy danych</span><span class="sxs-lookup"><span data-stu-id="1cf91-171">Database backups</span></span>
- <span data-ttu-id="1cf91-172">Kopie zapasowe dziennika transakcji</span><span class="sxs-lookup"><span data-stu-id="1cf91-172">Transaction log backups</span></span>

<span data-ttu-id="1cf91-173">Ponadto toofull kopie zapasowe bazy danych wykonywane na poziomie aplikacji, można jeszcze bardziej szczegółowej, wykonując kopie zapasowe z magazynu migawek.</span><span class="sxs-lookup"><span data-stu-id="1cf91-173">In addition toofull database backups performed at an application-level, you can be even more thorough by performing backups with storage snapshots.</span></span> <span data-ttu-id="1cf91-174">Wykonywanie kopii zapasowych dziennika są też ważne przywracania bazy danych hello (i dzienniki hello tooempty już zatwierdzone transakcje).</span><span class="sxs-lookup"><span data-stu-id="1cf91-174">Performing log backups is also important for restoring hello database (and tooempty hello logs from already committed transactions).</span></span>

<span data-ttu-id="1cf91-175">SAP HANA na platformie Azure (wystąpienia duże) oferuje dwie opcje tworzenia kopii zapasowej i przywracania:</span><span class="sxs-lookup"><span data-stu-id="1cf91-175">SAP HANA on Azure (large instances) offers two backup and restore options:</span></span>

- <span data-ttu-id="1cf91-176">Należy ją samodzielnie (DIY).</span><span class="sxs-lookup"><span data-stu-id="1cf91-176">Do it yourself (DIY).</span></span> <span data-ttu-id="1cf91-177">Po tooensure obliczyć miejsca na dysku, należy wykonać pełne kopie zapasowe bazy danych i dziennika przy użyciu metody wykonywania kopii zapasowej dysku (toothose dyski).</span><span class="sxs-lookup"><span data-stu-id="1cf91-177">After you calculate tooensure enough disk space, perform full database and log backups by using disk backup methods (toothose disks).</span></span> <span data-ttu-id="1cf91-178">Wraz z upływem czasu hello kopie zapasowe są tooan skopiowanych kontem magazynu platformy Azure (po skonfigurowaniu serwera plików z systemem Azure z magazynem nieograniczoną) lub Użyj magazynu usługi Kopia zapasowa Azure lub usługi Azure storage chłodni.</span><span class="sxs-lookup"><span data-stu-id="1cf91-178">Over time, hello backups are copied tooan Azure storage account (after you set up an Azure-based file server with virtually unlimited storage), or use an Azure Backup vault or Azure cold storage.</span></span> <span data-ttu-id="1cf91-179">Innym rozwiązaniem jest toouse narzędzia ochrony danych innych firm, takich jak Commvault, kopie zapasowe hello toostore po ich skopiowane tooa konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-179">Another option is toouse a third-party data protection tool, such as Commvault, toostore hello backups after they are copied tooa storage account.</span></span> <span data-ttu-id="1cf91-180">Witaj DIY opcję tworzenia kopii zapasowej może być także konieczne dla danych, które wymagałyby toobe przechowywane przez dłuższy czas, zgodności i inspekcji.</span><span class="sxs-lookup"><span data-stu-id="1cf91-180">hello DIY backup option might also be necessary for data that needs toobe stored for longer periods for compliancy and auditing purposes.</span></span>
- <span data-ttu-id="1cf91-181">Użyj hello kopii zapasowej i przywracania funkcji hello podstawowej infrastruktury SAP HANA na platformie Azure (wystąpienia duże) zawiera.</span><span class="sxs-lookup"><span data-stu-id="1cf91-181">Use hello backup and restore functionality that hello underlying infrastructure of SAP HANA on Azure (large instances) provides.</span></span> <span data-ttu-id="1cf91-182">Ta opcja spełnia potrzeby hello kopii zapasowych, a także udostępnia ręcznego tworzenia kopii zapasowych niemal przestarzałe (z wyjątkiem przypadków, gdy kopie zapasowe danych są wymagane do celów zgodności).</span><span class="sxs-lookup"><span data-stu-id="1cf91-182">This option fulfills hello need for backups, and it makes manual backups nearly obsolete (except where data backups are required for compliance purposes).</span></span> <span data-ttu-id="1cf91-183">Hello pozostałej części tej sekcji adresy hello kopii zapasowej i przywracania funkcje, które jest oferowany z HANA (duże wystąpień).</span><span class="sxs-lookup"><span data-stu-id="1cf91-183">hello rest of this section addresses hello backup and restore functionality that's offered with HANA (large instances).</span></span>

> [!NOTE]
> <span data-ttu-id="1cf91-184">Hello migawki technologia, która jest używana przez hello podstawowej infrastruktury HANA (duże wystąpień) ma zależność na migawki SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="1cf91-184">hello snapshot technology that is used by hello underlying infrastructure of HANA (large instances) has a dependency on SAP HANA snapshots.</span></span> <span data-ttu-id="1cf91-185">Migawki SAP HANA nie działają w połączeniu z kontenerami bazy danych programu SAP HANA wielodostępnej.</span><span class="sxs-lookup"><span data-stu-id="1cf91-185">SAP HANA snapshots do not work in conjunction with SAP HANA Multitenant Database Containers.</span></span> <span data-ttu-id="1cf91-186">W związku z tym ta metoda tworzenia kopii zapasowej nie może być używane toodeploy SAP HANA wielodostępnej bazy danych kontenerów.</span><span class="sxs-lookup"><span data-stu-id="1cf91-186">As a result, this method of backup cannot be used toodeploy SAP HANA Multitenant Database Containers.</span></span>

### <a name="using-storage-snapshots-of-sap-hana-on-azure-large-instances"></a><span data-ttu-id="1cf91-187">Przy użyciu magazynu migawek SAP HANA na platformie Azure (wystąpienia duże)</span><span class="sxs-lookup"><span data-stu-id="1cf91-187">Using storage snapshots of SAP HANA on Azure (large instances)</span></span>

<span data-ttu-id="1cf91-188">Infrastruktura magazynu Hello bazowy SAP HANA na platformie Azure (wystąpienia duże) obsługuje pojęcie hello migawki woluminów magazynu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-188">hello storage infrastructure underlying SAP HANA on Azure (large instances) supports hello notion of a storage snapshot of volumes.</span></span> <span data-ttu-id="1cf91-189">Zarówno kopii zapasowej i przywracania dla określonego woluminu są obsługiwane przez hello następujące zagadnienia:</span><span class="sxs-lookup"><span data-stu-id="1cf91-189">Both backup and restoration of a particular volume are supported, with hello following considerations:</span></span>

- <span data-ttu-id="1cf91-190">Zamiast kopii zapasowych bazy danych wykonywane na częste migawek woluminu magazynu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-190">Instead of database backups, storage volume snapshots are taken on a frequent basis.</span></span>
- <span data-ttu-id="1cf91-191">migawki magazynu Hello inicjuje migawki SAP HANA przed rozpoczęciem wykonywania hello pamięci masowej migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-191">hello storage snapshot initiates an SAP HANA snapshot before it executes hello storage snapshot.</span></span> <span data-ttu-id="1cf91-192">Ta migawka SAP HANA jest punkt instalacji hello operacje przywracania dziennika ostatecznego po odzyskaniu hello pamięci masowej migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-192">This SAP HANA snapshot is hello setup point for eventual log restorations after recovery of hello storage snapshot.</span></span>
- <span data-ttu-id="1cf91-193">W momencie hello gdzie hello pamięci masowej migawki jest wykonywane prawidłowo hello SAP HANA migawka jest usuwana.</span><span class="sxs-lookup"><span data-stu-id="1cf91-193">At hello point where hello storage snapshot is executed successfully, hello SAP HANA snapshot is deleted.</span></span>
- <span data-ttu-id="1cf91-194">Kopie zapasowe dziennika często zarejestrowane i przechowywane w woluminie kopii zapasowej dziennika hello lub na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="1cf91-194">Log backups are taken frequently and stored in hello log backup volume or in Azure.</span></span>
- <span data-ttu-id="1cf91-195">Jeśli należy przywrócić bazę hello tooa niektórych punktu w czasie, żądań pomocy technicznej platformy Azure (awarii w środowisku produkcyjnym) lub SAP HANA tooMicrosoft na tooa toorestore zarządzania usługą Azure niektórych magazynu migawek (na przykład planowane Przywracanie systemu piaskownicy tooits pierwotnego stanu).</span><span class="sxs-lookup"><span data-stu-id="1cf91-195">If hello database must be restored tooa certain point in time, a request is made tooMicrosoft Azure Support (production outage) or SAP HANA on Azure Service Management toorestore tooa certain storage snapshot (for example, a planned restoration of a sandbox system tooits original state).</span></span>
- <span data-ttu-id="1cf91-196">Witaj SAP HANA migawki, która była dostępna w migawce magazynu hello jest punktem przesunięcia stosowania kopie zapasowe dziennika, które zostały wykonane i przechowywane po hello pamięci masowej migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-196">hello SAP HANA snapshot that's included in hello storage snapshot is an offset point for applying log backups that have been executed and stored after hello storage snapshot was taken.</span></span>
- <span data-ttu-id="1cf91-197">Te kopie zapasowe dziennika są pobierane toorestore tooa wstecz hello bazy danych, niektóre punktu w czasie.</span><span class="sxs-lookup"><span data-stu-id="1cf91-197">These log backups are taken toorestore hello database back tooa certain point in time.</span></span>

<span data-ttu-id="1cf91-198">Określanie hello kopii zapasowej\_nazwa tworzy migawkę hello następujące woluminy:</span><span class="sxs-lookup"><span data-stu-id="1cf91-198">Specifying hello backup\_name creates a snapshot of hello following volumes:</span></span>

- <span data-ttu-id="1cf91-199">Hana/danych</span><span class="sxs-lookup"><span data-stu-id="1cf91-199">hana/data</span></span>
- <span data-ttu-id="1cf91-200">Hana/dziennika</span><span class="sxs-lookup"><span data-stu-id="1cf91-200">hana/log</span></span>
- <span data-ttu-id="1cf91-201">Hana/log\_kopii zapasowej (zainstalowany jako kopii zapasowej do hana/log)</span><span class="sxs-lookup"><span data-stu-id="1cf91-201">hana/log\_backup (mounted as backup into hana/log)</span></span>
- <span data-ttu-id="1cf91-202">Hana/udostępnionych</span><span class="sxs-lookup"><span data-stu-id="1cf91-202">hana/shared</span></span>

### <a name="storage-snapshot-considerations"></a><span data-ttu-id="1cf91-203">Zagadnienia dotyczące magazynu migawki</span><span class="sxs-lookup"><span data-stu-id="1cf91-203">Storage snapshot considerations</span></span>

>[!NOTE]
><span data-ttu-id="1cf91-204">Migawki magazynu są _nie_ dostarczony bezpłatnie, ponieważ musi być przydzielona dodatkowego miejsca.</span><span class="sxs-lookup"><span data-stu-id="1cf91-204">Storage snapshots are _not_ provided free of charge, because additional storage space must be allocated.</span></span>

<span data-ttu-id="1cf91-205">Hello mechanika określonego magazynu migawek dla SAP HANA na platformie Azure (wystąpienia duże) obejmują:</span><span class="sxs-lookup"><span data-stu-id="1cf91-205">hello specific mechanics of storage snapshots for SAP HANA on Azure (large instances) include:</span></span>

- <span data-ttu-id="1cf91-206">Migawki określonego magazynu (w momencie hello w czasie, gdy jest zajęty) zużywa bardzo mało pamięci masowej.</span><span class="sxs-lookup"><span data-stu-id="1cf91-206">A specific storage snapshot (at hello point in time when it is taken) consumes very little storage.</span></span>
- <span data-ttu-id="1cf91-207">Jako dane zmiany zawartości i hello zawartości w danych SAP HANA zmienić plików na woluminie magazynu hello migawki hello musi toostore hello oryginalnej zawartości bloku.</span><span class="sxs-lookup"><span data-stu-id="1cf91-207">As data content changes and hello content in SAP HANA data files change on hello storage volume, hello snapshot needs toostore hello original block content.</span></span>
- <span data-ttu-id="1cf91-208">migawki magazynu Hello wzrost rozmiaru.</span><span class="sxs-lookup"><span data-stu-id="1cf91-208">hello storage snapshot increases in size.</span></span> <span data-ttu-id="1cf91-209">istnieje Hello dłużej hello migawki, staje się hello większych hello pamięci masowej migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-209">hello longer hello snapshot exists, hello larger hello storage snapshot becomes.</span></span>
- <span data-ttu-id="1cf91-210">Witaj więcej zmian toohello woluminie bazy danych SAP HANA okresu istnienia hello migawki magazynu, staje się hello większych hello użycie miejsca na powitania pamięci masowej migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-210">hello more changes made toohello SAP HANA database volume over hello lifetime of a storage snapshot, hello larger hello space consumption of hello storage snapshot becomes.</span></span>

<span data-ttu-id="1cf91-211">SAP HANA na platformie Azure (wystąpienia duże) jest dostarczany z stały wolumin rozmiary hello wolumin danych i dziennika SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="1cf91-211">SAP HANA on Azure (large instances) comes with fixed volume sizes for hello SAP HANA data and log volume.</span></span> <span data-ttu-id="1cf91-212">Wykonywanie migawek woluminy eats do ilość miejsca na woluminie, więc jest Twoje odpowiedzialność tooschedule magazynu migawek (w ramach hello SAP HANA na proces Azure [dużych wystąpień]).</span><span class="sxs-lookup"><span data-stu-id="1cf91-212">Performing snapshots of those volumes eats into your volume space, so it is your responsibility tooschedule storage snapshots (within hello SAP HANA on Azure [large instances] process).</span></span>

<span data-ttu-id="1cf91-213">Witaj poniższe sekcje zawierają informacje dotyczące wykonywania migawek, w tym ogólne zalecenia:</span><span class="sxs-lookup"><span data-stu-id="1cf91-213">hello following sections provide information for performing these snapshots, including general recommendations:</span></span>

- <span data-ttu-id="1cf91-214">Chociaż hello sprzętu może wytrzymać 255 migawek dla każdego woluminu, zdecydowanie zaleca się to zapewnić, że również pod ten numer.</span><span class="sxs-lookup"><span data-stu-id="1cf91-214">Though hello hardware can sustain 255 snapshots per volume, we highly recommend that you stay well below this number.</span></span>
- <span data-ttu-id="1cf91-215">Przed wykonaniem migawki pamięci masowej, monitorować i śledzić ilość wolnego miejsca.</span><span class="sxs-lookup"><span data-stu-id="1cf91-215">Before you perform storage snapshots, monitor and keep track of free space.</span></span>
- <span data-ttu-id="1cf91-216">Mniejszą hello liczbę migawek magazynu oparte na wolnego miejsca.</span><span class="sxs-lookup"><span data-stu-id="1cf91-216">Lower hello number of storage snapshots based on free space.</span></span> <span data-ttu-id="1cf91-217">Może być konieczne toolower hello liczby migawek, które są stale lub może być tooextend hello woluminów.</span><span class="sxs-lookup"><span data-stu-id="1cf91-217">You might need toolower hello number of snapshots that you keep, or you might need tooextend hello volumes.</span></span> <span data-ttu-id="1cf91-218">(W jednostkach 1 TB można zamówić dodatkowego miejsca do magazynowania).</span><span class="sxs-lookup"><span data-stu-id="1cf91-218">(You can order additional storage in 1-TB units.)</span></span>
- <span data-ttu-id="1cf91-219">Podczas działania, takie jak przenoszenie danych do programu SAP HANA z narzędzi migracji systemu (bez R3load lub przez Przywracanie z kopii zapasowej bazy danych SAP HANA) zaleca się nie wykonać wszystkie migawki magazynu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-219">During activities such as moving data into SAP HANA with system migration tools (with R3load, or by restoring SAP HANA databases from backups), we highly recommended that you not perform any storage snapshots.</span></span> <span data-ttu-id="1cf91-220">(Jeśli migracja systemu jest wykonywana na nowego systemu SAP HANA, magazynu migawek nie musi wykonać toobe.)</span><span class="sxs-lookup"><span data-stu-id="1cf91-220">(If a system migration is being done on a new SAP HANA system, storage snapshots would not need toobe performed.)</span></span>
- <span data-ttu-id="1cf91-221">Podczas większych reorganizacji SAP HANA tabel Jeśli to możliwe należy unikać magazynu migawek.</span><span class="sxs-lookup"><span data-stu-id="1cf91-221">During larger reorganizations of SAP HANA tables, storage snapshots should be avoided if possible.</span></span>
- <span data-ttu-id="1cf91-222">Migawki magazynu są możliwości odzyskiwania po awarii hello wymagań wstępnych tooengaging SAP HANA na platformie Azure (wystąpienia duże).</span><span class="sxs-lookup"><span data-stu-id="1cf91-222">Storage snapshots are a prerequisite tooengaging hello disaster-recovery capabilities of SAP HANA on Azure (large instances).</span></span>

### <a name="setting-up-storage-snapshots"></a><span data-ttu-id="1cf91-223">Konfigurowanie magazynu migawek</span><span class="sxs-lookup"><span data-stu-id="1cf91-223">Setting up storage snapshots</span></span>

1. <span data-ttu-id="1cf91-224">Upewnij się, że Perl jest zainstalowana w systemie operacyjnym Linux hello na serwerze (duże wystąpień) HANA hello.</span><span class="sxs-lookup"><span data-stu-id="1cf91-224">Make sure that Perl is installed in hello Linux operating system on hello HANA (large instances) server.</span></span>
2. <span data-ttu-id="1cf91-225">Modyfikowanie/etc/ssh/ssh\_config tooadd hello wiersza _Mac hmac-sha1_.</span><span class="sxs-lookup"><span data-stu-id="1cf91-225">Modify /etc/ssh/ssh\_config tooadd hello line _MACs hmac-sha1_.</span></span>
3. <span data-ttu-id="1cf91-226">W węźle głównym powitania dla każdego wystąpienia SAP HANA, na którym jest uruchomiony (jeśli dotyczy), należy utworzyć konto użytkownika kopii zapasowej SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="1cf91-226">Create an SAP HANA backup user account on hello master node for each SAP HANA instance you are running (if applicable).</span></span>
4. <span data-ttu-id="1cf91-227">Hello SAP HANA HDB klienta musi być zainstalowana na wszystkich serwerach (duże wystąpień) SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="1cf91-227">hello SAP HANA HDB client must be installed on all SAP HANA (large instances) servers.</span></span>
5. <span data-ttu-id="1cf91-228">Na powitania pierwszego serwera SAP HANA (duże wystąpień) każdego regionu klucza publicznego musi zostać utworzony hello tooaccess podstawowej infrastruktury magazynu, który kontroluje Tworzenie migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-228">On hello first SAP HANA (large instances) server of each region, a public key must be created tooaccess hello underlying storage infrastructure that controls snapshot creation.</span></span>
6. <span data-ttu-id="1cf91-229">Skopiuj skrypt hello azure\_hana\_backup.pl z lokalizacji toohello/skrypty **hdbsql** z hello instalacji SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="1cf91-229">Copy hello script azure\_hana\_backup.pl from /scripts toohello location of **hdbsql** of hello SAP HANA installation.</span></span>
7. <span data-ttu-id="1cf91-230">Hello kopiowania HANABackupDetails.txt plik z toohello/skrypty sam lokalizacji jako hello skryptów języka Perl.</span><span class="sxs-lookup"><span data-stu-id="1cf91-230">Copy hello HANABackupDetails.txt file from /scripts toohello same location as hello Perl script.</span></span>
8. <span data-ttu-id="1cf91-231">Zmodyfikuj hello HANABackupDetails.txt zgodnie z potrzebami dla hello specyfikacjami odpowiedniego klienta.</span><span class="sxs-lookup"><span data-stu-id="1cf91-231">Modify hello HANABackupDetails.txt file as necessary for hello appropriate customer specifications.</span></span>

### <a name="step-1-install-sap-hana-hdbclient"></a><span data-ttu-id="1cf91-232">Krok 1: Instalowanie SAP HANA HDBClient</span><span class="sxs-lookup"><span data-stu-id="1cf91-232">Step 1: Install SAP HANA HDBClient</span></span>

<span data-ttu-id="1cf91-233">Hello systemu Linux w systemie SAP HANA na platformie Azure (wystąpienia duże) obejmuje foldery hello i skrypty niezbędne tooexecute SAP HANA magazynu migawek dla celów tworzenia kopii zapasowych i odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="1cf91-233">hello Linux installed on SAP HANA on Azure (large instances) includes hello folders and scripts necessary tooexecute SAP HANA storage snapshots for backup and disaster-recovery purposes.</span></span> <span data-ttu-id="1cf91-234">Warto jednak tooinstall Twojego odpowiedzialność SAP HANA HDBclient podczas instalowania SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="1cf91-234">However, it is your responsibility tooinstall SAP HANA HDBclient while you are installing SAP HANA.</span></span> <span data-ttu-id="1cf91-235">(Microsoft Instaluje hello HDBclient ani SAP HANA.)</span><span class="sxs-lookup"><span data-stu-id="1cf91-235">(Microsoft installs neither hello HDBclient nor SAP HANA.)</span></span>

### <a name="step-2-change-etcsshsshconfig"></a><span data-ttu-id="1cf91-236">Krok 2: Zmień/etc/ssh/ssh\_konfiguracji</span><span class="sxs-lookup"><span data-stu-id="1cf91-236">Step 2: Change /etc/ssh/ssh\_config</span></span>

<span data-ttu-id="1cf91-237">Zmień/etc/ssh/ssh\_konfiguracji przez dodanie _Mac hmac-sha1_ wiersz w sposób pokazany poniżej:</span><span class="sxs-lookup"><span data-stu-id="1cf91-237">Change /etc/ssh/ssh\_config by adding _MACs hmac-sha1_ line as shown here:</span></span>
```
#   RhostsRSAAuthentication no
#   RSAAuthentication yes
#   PasswordAuthentication yes
#   HostbasedAuthentication no
#   GSSAPIAuthentication no
#   GSSAPIDelegateCredentials no
#   GSSAPIKeyExchange no
#   GSSAPITrustDNS no
#   BatchMode no
#   CheckHostIP yes
#   AddressFamily any
#   ConnectTimeout 0
#   StrictHostKeyChecking ask
#   IdentityFile ~/.ssh/identity
#   IdentityFile ~/.ssh/id_rsa
#   IdentityFile ~/.ssh/id_dsa
#   Port 22
Protocol 2
#   Cipher 3des
#   Ciphers aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc
#   MACs hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160
MACs hmac-sha1
#   EscapeChar ~
#   Tunnel no
#   TunnelDevice any:any
#   PermitLocalCommand no
#   VisualHostKey no
#   ProxyCommand ssh -q -W %h:%p gateway.example.com
```

### <a name="step-3-create-a-public-key"></a><span data-ttu-id="1cf91-238">Krok 3: Tworzenie klucza publicznego</span><span class="sxs-lookup"><span data-stu-id="1cf91-238">Step 3: Create a public key</span></span>

<span data-ttu-id="1cf91-239">Na powitania pierwszy SAP HANA na serwerze Azure (duże wystąpień) w każdym regionie Azure, tworzenie infrastruktury magazynu hello tooaccess publicznego klucza toobe używany, dzięki czemu można utworzyć migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-239">On hello first SAP HANA on Azure (large instances) server in each Azure region, create a public key toobe used tooaccess hello storage infrastructure so that you can create snapshots.</span></span> <span data-ttu-id="1cf91-240">klucz publiczny Hello zapewnia, że hasło nie jest wymagane toosign w magazynie toohello i poświadczenia hasła nie są zachowywane.</span><span class="sxs-lookup"><span data-stu-id="1cf91-240">hello public key ensures that a password is not required toosign in toohello storage and that password credentials are not maintained.</span></span> <span data-ttu-id="1cf91-241">W systemie Linux na powitania serwera SAP HANA (duże wystąpienia) wykonaj powitania po klucz publiczny hello toogenerate polecenia:</span><span class="sxs-lookup"><span data-stu-id="1cf91-241">In Linux on hello SAP HANA (large instances) server, execute hello following command toogenerate hello public key:</span></span>
```
  ssh-keygen –t dsa –b 1024
```
<span data-ttu-id="1cf91-242">Nowa lokalizacja Hello jest _/root/.ssh/id\_dsa.pub.</span><span class="sxs-lookup"><span data-stu-id="1cf91-242">hello new location is _/root/.ssh/id\_dsa.pub.</span></span> <span data-ttu-id="1cf91-243">Nie wpisuj rzeczywiste hasło, w przeciwnym razie wymagane tooenter hello hasło będzie zawsze możesz się zalogować.</span><span class="sxs-lookup"><span data-stu-id="1cf91-243">Do not enter an actual passphrase, or else you will be required tooenter hello passphrase each time you sign in.</span></span> <span data-ttu-id="1cf91-244">Zamiast tego, naciśnij klawisz **Enter** dwukrotnie tooremove hello należy wprowadzić wymaganie hasła do logowania.</span><span class="sxs-lookup"><span data-stu-id="1cf91-244">Instead, press **Enter** twice tooremove hello enter passphrase requirement for signing in.</span></span>

<span data-ttu-id="1cf91-245">Sprawdź toomake się, że klucz publiczny hello został rozwiązany, zgodnie z oczekiwaniami, zmieniając too/root/.ssh/ folderów, a następnie wykonywanie hello **ls** polecenia.</span><span class="sxs-lookup"><span data-stu-id="1cf91-245">Check toomake sure that hello public key was corrected as expected by changing folders too/root/.ssh/ and then executing hello **ls** command.</span></span> <span data-ttu-id="1cf91-246">Jeśli klucz hello jest obecny, można go skopiować, uruchamiając następujące polecenie hello:</span><span class="sxs-lookup"><span data-stu-id="1cf91-246">If hello key is present, you can copy it by running hello following command:</span></span>

![Klucz publiczny jest kopiowany przez uruchomienie tego polecenia](./media/hana-overview-high-availability-disaster-recovery/image2-public-key.png)

<span data-ttu-id="1cf91-248">W tym momencie skontaktuj się z SAP HANA na zarządzania usługą Azure i podanie hello klucza.</span><span class="sxs-lookup"><span data-stu-id="1cf91-248">At this point, contact SAP HANA on Azure Service Management and provide hello key.</span></span> <span data-ttu-id="1cf91-249">Witaj działu obsługi używa publicznego klucza tooregister hello w hello podstawowej infrastruktury magazynu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-249">hello service representative uses hello public key tooregister it in hello underlying storage infrastructure.</span></span>

### <a name="step-4-create-an-sap-hana-user-account"></a><span data-ttu-id="1cf91-250">Krok 4: Tworzenie konta użytkownika SAP HANA</span><span class="sxs-lookup"><span data-stu-id="1cf91-250">Step 4: Create an SAP HANA user account</span></span>

<span data-ttu-id="1cf91-251">Tworzenie konta użytkownika SAP HANA poziomu SAP HANA Studio do wykonywania kopii zapasowych.</span><span class="sxs-lookup"><span data-stu-id="1cf91-251">Create an SAP HANA user account within SAP HANA Studio for backup purposes.</span></span> <span data-ttu-id="1cf91-252">To konto musi mieć następujące uprawnienia hello: _administratora kopii zapasowych_ i _odczytu katalogu_.</span><span class="sxs-lookup"><span data-stu-id="1cf91-252">This account must have hello following privileges: _Backup Admin_ and _Catalog Read_.</span></span> <span data-ttu-id="1cf91-253">W tym przykładzie hello username SCADMIN jest tworzony.</span><span class="sxs-lookup"><span data-stu-id="1cf91-253">In this example, hello username SCADMIN is created.</span></span>

![Tworzenie użytkownika w HANA Studio](./media/hana-overview-high-availability-disaster-recovery/image3-creating-user.png)

### <a name="step-5-authorize-hello-sap-hana-user-account"></a><span data-ttu-id="1cf91-255">Krok 5: Autoryzowanie konta użytkownika SAP HANA hello</span><span class="sxs-lookup"><span data-stu-id="1cf91-255">Step 5: Authorize hello SAP HANA user account</span></span>

<span data-ttu-id="1cf91-256">Autoryzacja konta użytkownika SAP HANA hello (używane przez skrypty hello bez autoryzacji w każdym uruchomieniu skryptu hello toobe).</span><span class="sxs-lookup"><span data-stu-id="1cf91-256">Authorize hello SAP HANA user account (toobe used by hello scripts without requiring authorization every time hello script is run).</span></span> <span data-ttu-id="1cf91-257">polecenie SAP HANA Hello `hdbuserstore` umożliwia tworzenie hello SAP HANA klucza użytkownika, który jest przechowywany na co najmniej jeden węzeł SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="1cf91-257">hello SAP HANA command `hdbuserstore` allows hello creation of an SAP HANA user key, which is stored on one or more SAP HANA nodes.</span></span> <span data-ttu-id="1cf91-258">klucz użytkownika Hello umożliwia także hello użytkownika tooaccess SAP HANA bez hasła toomanage z hello skryptów omówiono w dalszej części procesu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-258">hello user key also allows hello user tooaccess SAP HANA without having toomanage passwords from within hello scripting process that's discussed later.</span></span>

>[!IMPORTANT]
><span data-ttu-id="1cf91-259">Uruchom hello następujące polecenie jako `_root_`.</span><span class="sxs-lookup"><span data-stu-id="1cf91-259">Run hello following command as `_root_`.</span></span> <span data-ttu-id="1cf91-260">W przeciwnym razie hello skryptu nie może działać poprawnie.</span><span class="sxs-lookup"><span data-stu-id="1cf91-260">Otherwise, hello script cannot work properly.</span></span>

<span data-ttu-id="1cf91-261">Wprowadź hello `hdbuserstore` polecenia w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="1cf91-261">Enter hello `hdbuserstore` command as follows:</span></span>

![Wprowadź polecenie hdbuserstore hello](./media/hana-overview-high-availability-disaster-recovery/image4-hdbuserstore-command.png)

<span data-ttu-id="1cf91-263">W hello poniższy przykład, gdy użytkownik hello jest SCADMIN01 i hello nazwa hosta jest lhanad01, polecenie hello jest:</span><span class="sxs-lookup"><span data-stu-id="1cf91-263">In hello following example, where hello user is SCADMIN01 and hello hostname is lhanad01, hello command is:</span></span>
```
hdbuserstore set SCADMIN01 lhanad01:30115 <backup username> <password>
```
<span data-ttu-id="1cf91-264">Zarządzanie wszystkie skrypty z jednego serwera do skalowania w poziomie HANA wystąpień.</span><span class="sxs-lookup"><span data-stu-id="1cf91-264">Manage all scripting from a single server for scale-out HANA instances.</span></span> <span data-ttu-id="1cf91-265">W tym przykładzie należy zmienić klucz SAP HANA hello SCADMIN01 dla każdego hosta w sposób zapewniający odzwierciedla hello hosta, który jest powiązane toohello klucza.</span><span class="sxs-lookup"><span data-stu-id="1cf91-265">In this example, hello SAP HANA key SCADMIN01 must be altered for each host in a way that reflects hello host that is related toohello key.</span></span> <span data-ttu-id="1cf91-266">Oznacza to, hello konto kopii zapasowej SAP HANA zmienia się z liczbą wystąpień hello hello HANA DB **lhanad**.</span><span class="sxs-lookup"><span data-stu-id="1cf91-266">That is, hello SAP HANA backup account is amended with hello instance number of hello HANA DB, **lhanad**.</span></span> <span data-ttu-id="1cf91-267">klucz Hello musi mieć uprawnienia administracyjne na hoście hello, który jest przypisany do, a hello użytkownika kopii zapasowej dla skalowalnego w poziomie musi mieć wystąpień SAP HANA tooall praw dostępu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-267">hello key must have administrative privileges on hello host it is assigned to, and hello backup user for scale-out must have access rights tooall SAP HANA instances.</span></span>
```
hdbuserstore set SCADMIN01 lhanad:30015 SCADMIN <password>
hdbuserstore set SCADMIN02 lhanad:30115 SCADMIN <password>
hdbuserstore set SCADMIN03 lhanad:30215 SCADMIN <password>
```

### <a name="step-6-copy-items-from-hello-scripts-folder"></a><span data-ttu-id="1cf91-268">Krok 6: Kopiowanie elementów z folderu/skrypty hello</span><span class="sxs-lookup"><span data-stu-id="1cf91-268">Step 6: Copy items from hello /scripts folder</span></span>

<span data-ttu-id="1cf91-269">Kopia hello następujących elementów z hello/skrypty katalogu roboczego toohello folderu (znajdującego się na powitania złoty obraz instalacji hello) **hdbsql**.</span><span class="sxs-lookup"><span data-stu-id="1cf91-269">Copy hello following items from hello /scripts folder (included on hello gold image of hello installation) toohello working directory for **hdbsql**.</span></span> <span data-ttu-id="1cf91-270">W przypadku bieżącej instalacji HANA ten katalog jest /hana/shared/D01/exe/linuxx86\_64/hdb.</span><span class="sxs-lookup"><span data-stu-id="1cf91-270">For current HANA installations, this directory is /hana/shared/D01/exe/linuxx86\_64/hdb.</span></span>
```
azure\_hana\_backup.pl
testHANAConnection.pl
testStorageSnapshotConnection.pl
removeTestStorageSnapshot.pl
HANABackupCustomerDetails.txt
```
<span data-ttu-id="1cf91-271">Skopiuj hello poniższych elementach, jeśli są na nich uruchomione skalowalnego w poziomie lub OLAP:</span><span class="sxs-lookup"><span data-stu-id="1cf91-271">Copy hello following items if they are running scale-out or OLAP:</span></span>
```
azure\_hana\_backup\_bw.pl
testHANAConnectionBW.pl
testStorageSnapshotConnectionBW.pl
removeTestStorageSnapshotBW.pl
HANABackupCustomerDetailsBW.txt
```
<span data-ttu-id="1cf91-272">Plik HANABackupCustomerDetails.txt Hello jest można modyfikować w następujący sposób w przypadku wdrożenia skalowania w górę.</span><span class="sxs-lookup"><span data-stu-id="1cf91-272">hello HANABackupCustomerDetails.txt file is modifiable as follows for a scale-up deployment.</span></span> <span data-ttu-id="1cf91-273">Jest hello kontroli i pliku konfiguracji dla hello skryptu, który uruchamia hello magazynu migawek.</span><span class="sxs-lookup"><span data-stu-id="1cf91-273">It is hello control and configuration file for hello script that runs hello storage snapshots.</span></span> <span data-ttu-id="1cf91-274">Powinna zostać odebrana hello _nazwę magazynu kopii zapasowej_ i _adres IP magazynu_ z SAP HANA na zarządzanie usługami Azure, gdy wdrożono swoich wystąpień.</span><span class="sxs-lookup"><span data-stu-id="1cf91-274">You should have received hello _Storage Backup Name_ and _Storage IP Address_ from SAP HANA on Azure Service Management when your instances were deployed.</span></span> <span data-ttu-id="1cf91-275">Nie można zmodyfikować sekwencji hello porządkowanie lub odstępy zmienne hello lub skryptu hello nie działa prawidłowo.</span><span class="sxs-lookup"><span data-stu-id="1cf91-275">You cannot modify hello sequence, ordering, or spacing of any of hello variables, or hello script does not run properly.</span></span>

<span data-ttu-id="1cf91-276">W przypadku wdrożenia skalowania w górę pliku konfiguracji hello wyglądałyby tak jak:</span><span class="sxs-lookup"><span data-stu-id="1cf91-276">For a scale-up deployment, hello configuration file would look like:</span></span>
```
#Provided by Microsoft Service Management
Storage Backup Name: lhanad01backup
Storage IP Address: 10.250.20.21
#Created by customer using hdbuserstore
HANA Backup Name: SCADMIND01
```
<span data-ttu-id="1cf91-277">Do skalowania konfiguracji pliku HANABackupCustomerDetailsBW.txt hello wyglądałyby tak jak:</span><span class="sxs-lookup"><span data-stu-id="1cf91-277">For a scale-out configuration, hello HANABackupCustomerDetailsBW.txt file would look like:</span></span>
```
#Provided by Microsoft Service Management
Storage Backup Name: lhanad01backup
Storage IP Address: 10.250.20.21
#Node IP addresses, instance numbers, and HANA backup name
#provided by customer.  HANA backup name created using
#hdbuserstore utility.
Node 1 IP Address: 10.254.15.21
Node 1 HANA instance number: 01
Node 1 HANA Backup Name: SCADMIN01
Node 2 IP Address: 10.254.15.22
Node 2 HANA instance number: 02
Node 2 HANA Backup Name: SCADMIN02
Node 3 IP Address: 10.254.15.23
Node 3 HANA instance number: 03
Node 3 HANA Backup Name: SCADMIN03
Node 4 IP Address: 10.254.15.24
Node 4 HANA instance number: 04
Node 4 HANA Backup Name: SCADMIN04
Node 5 IP Address: 10.254.15.25
Node 5 HANA instance number: 05
Node 5 HANA Backup Name: SCADMIN05
Node 6 IP Address: 10.254.15.26
Node 6 HANA instance number: 06
Node 6 HANA Backup Name: SCADMIN06
Node 7 IP Address: 10.254.15.27
Node 7 HANA instance number: 07
Node 7 HANA Backup Name: SCADMIN07
Node 8 IP Address: 10.254.15.28
Node 8 HANA instance number: 08
Node 8 HANA Backup Name: SCADMIN08
```
>[!NOTE]
><span data-ttu-id="1cf91-278">Obecnie tylko szczegóły dotyczące węzła 1 są używane w hello rzeczywiste HANA pamięci masowej migawki skryptu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-278">Currently, only Node 1 details are used in hello actual HANA storage snapshot script.</span></span> <span data-ttu-id="1cf91-279">Zaleca się przetestowanie tooor dostęp ze wszystkich węzłów HANA tak, aby w przypadku węzła głównego kopii zapasowej hello kiedykolwiek zmiany, już zapewnieniu innym węźle może zająć jego miejsce, modyfikując szczegóły hello w węźle 1.</span><span class="sxs-lookup"><span data-stu-id="1cf91-279">We recommend that you test access tooor from all HANA nodes so that, if hello master backup node ever changes, you have already ensured that any other node can take its place by modifying hello details in Node 1.</span></span>

<span data-ttu-id="1cf91-280">toocheck dla hello właściwej konfiguracji w pliku konfiguracji hello lub wystąpień HANA toohello odpowiednie połączenie, uruchom dowolne z hello następujące skrypty:</span><span class="sxs-lookup"><span data-stu-id="1cf91-280">toocheck for hello correct configurations in hello configuration file or proper connectivity toohello HANA instances, run either of hello following scripts:</span></span>
- <span data-ttu-id="1cf91-281">Do konfiguracji skalowania w górę (niezależnie od obciążenia SAP):</span><span class="sxs-lookup"><span data-stu-id="1cf91-281">For a scale-up configuration (independent on SAP workload):</span></span>

 ```
testHANAConnection.pl
```
- <span data-ttu-id="1cf91-282">Do skalowania konfiguracji:</span><span class="sxs-lookup"><span data-stu-id="1cf91-282">For a scale-out configuration:</span></span>

 ```
testHANAConnectionBW.pl
```

<span data-ttu-id="1cf91-283">Upewnij się, że to wystąpienie hello wzorca HANA ma serwerów HANA tooall wymaganego dostępu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-283">Ensure that hello master HANA instance has access tooall required HANA servers.</span></span> <span data-ttu-id="1cf91-284">Nie ma żadnych parametrów toohello skryptu, ale należy wykonać odpowiednie HANABackupCustomerDetails hello / HANABackupCustomerDetailsBW pliku toorun skryptu hello poprawnie.</span><span class="sxs-lookup"><span data-stu-id="1cf91-284">There are no parameters toohello script, but you must complete hello appropriate HANABackupCustomerDetails/ HANABackupCustomerDetailsBW file for hello script toorun properly.</span></span> <span data-ttu-id="1cf91-285">Ponieważ zwracane są tylko hello powłoki poleceń kody błędów, nie jest możliwe dla hello skryptu tooerror wyboru każde wystąpienie.</span><span class="sxs-lookup"><span data-stu-id="1cf91-285">Because only hello shell command error codes are returned, it is not possible for hello script tooerror-check every instance.</span></span> <span data-ttu-id="1cf91-286">Mimo tego skryptu hello podanie niektórych przydatne uwagi toodouble wyboru.</span><span class="sxs-lookup"><span data-stu-id="1cf91-286">Even so, hello script does provide some helpful comments for you toodouble-check.</span></span>

<span data-ttu-id="1cf91-287">skrypt hello toorun:</span><span class="sxs-lookup"><span data-stu-id="1cf91-287">toorun hello script:</span></span>
```
 ./testHANAConnection.pl
```
 <span data-ttu-id="1cf91-288">Skrypt hello pomyślnie uzyska stan hello hello HANA wystąpienia, wyświetla komunikat o pomyślnym hello HANA połączenia.</span><span class="sxs-lookup"><span data-stu-id="1cf91-288">If hello script successfully obtains hello status of hello HANA instance, it displays a message that hello HANA connection was successful.</span></span>

<span data-ttu-id="1cf91-289">Ponadto istnieje drugi typ skryptu za pomocą toocheck hello HANA wystąpienia serwera głównego na możliwości toosign w magazynie toohello.</span><span class="sxs-lookup"><span data-stu-id="1cf91-289">Additionally, there is a second type of script you can use toocheck hello master HANA instance server's ability toosign in toohello storage.</span></span> <span data-ttu-id="1cf91-290">Przed wykonaniem hello azure\_hana\_kopii zapasowej (\_bw) .pl skryptu, należy wykonać hello dalej skryptu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-290">Before you execute hello azure\_hana\_backup(\_bw).pl script, you must execute hello next script.</span></span> <span data-ttu-id="1cf91-291">Jeśli wolumin nie zawiera żadnych migawek, czy wolumin hello jest po prostu pusty lub nie jest niemożliwe toodetermine ssh hello tooobtain awarii migawki szczegóły.</span><span class="sxs-lookup"><span data-stu-id="1cf91-291">If a volume contains no snapshots, it is impossible toodetermine whether hello volume is simply empty or there is an ssh failure tooobtain hello snapshot details.</span></span> <span data-ttu-id="1cf91-292">Z tego powodu hello skrypt jest wykonywany, należy wykonać dwie czynności:</span><span class="sxs-lookup"><span data-stu-id="1cf91-292">For this reason, hello script executes two steps:</span></span>

- <span data-ttu-id="1cf91-293">Sprawdzi, czy hello konsoli magazynu jest dostępne.</span><span class="sxs-lookup"><span data-stu-id="1cf91-293">It verifies that hello storage console is accessible.</span></span>
- <span data-ttu-id="1cf91-294">Tworzy migawkę testu lub manekina, dla każdego woluminu przez wystąpienie HANA.</span><span class="sxs-lookup"><span data-stu-id="1cf91-294">It creates a test, or dummy, snapshot for each volume by HANA instance.</span></span>

<span data-ttu-id="1cf91-295">Z tego powodu hello HANA wystąpienia jest włączony jako argument.</span><span class="sxs-lookup"><span data-stu-id="1cf91-295">For this reason, hello HANA instance is included as an argument.</span></span> <span data-ttu-id="1cf91-296">Ponownie nie jest możliwe tooprovide sprawdzanie błędów dotyczących połączenia z magazynem hello, ale hello skrypt zawiera wskazówki przydatne, jeśli hello wykonanie nie powiedzie się.</span><span class="sxs-lookup"><span data-stu-id="1cf91-296">Again, it is not possible tooprovide error checking for hello storage connection, but hello script provides helpful hints if hello execution fails.</span></span>

<span data-ttu-id="1cf91-297">Witaj skrypt jest uruchamiany jako:</span><span class="sxs-lookup"><span data-stu-id="1cf91-297">hello script is run as:</span></span>
```
 ./testStorageSnapshotConnection.pl <hana instance>
```
<span data-ttu-id="1cf91-298">Lub jest uruchamiany jako:</span><span class="sxs-lookup"><span data-stu-id="1cf91-298">Or it is run as:</span></span>
```
./testStorageSnapshotConnectionBW.pl <hana instance>
```
<span data-ttu-id="1cf91-299">skrypt Hello wyświetla również komunikatem, że są możliwe toosign w odpowiednio tooyour wdrożone magazynu dzierżawy, którym skupiono hello jednostki logicznej LUN używanych przez hello wystąpienia serwera, którego jesteś właścicielem.</span><span class="sxs-lookup"><span data-stu-id="1cf91-299">hello script also displays a message that you are able toosign in appropriately tooyour deployed storage tenant, which is organized around hello logical unit numbers (LUNs) that are used by hello server instances you own.</span></span>

<span data-ttu-id="1cf91-300">Przed wykonaniem hello pierwszy magazynu na podstawie migawki kopii zapasowych, należy uruchomić hello dalej skrypty toomake upewnić się, że konfiguracja hello jest poprawna.</span><span class="sxs-lookup"><span data-stu-id="1cf91-300">Before you execute hello first storage snapshot-based backups, run hello next scripts toomake sure that hello configuration is correct.</span></span>

<span data-ttu-id="1cf91-301">Po uruchomieniu tych skryptów, można usunąć, wykonując migawki hello:</span><span class="sxs-lookup"><span data-stu-id="1cf91-301">After running these scripts, you can delete hello snapshots by executing:</span></span>
```
./removeTestStorageSnapshot.pl <hana instance>
```
<span data-ttu-id="1cf91-302">Lub</span><span class="sxs-lookup"><span data-stu-id="1cf91-302">Or</span></span>
```
./removeTestStorageSnapshot.pl <hana instance>
```

### <a name="step-7-perform-on-demand-snapshots"></a><span data-ttu-id="1cf91-303">Krok 7: Wykonaj migawki na żądanie</span><span class="sxs-lookup"><span data-stu-id="1cf91-303">Step 7: Perform on-demand snapshots</span></span>

<span data-ttu-id="1cf91-304">Wykonaj migawki na żądanie (a także zaplanować regularne migawki za pomocą usługi cron) zgodnie z opisem w tym miejscu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-304">Perform on-demand snapshots (as well as schedule regular snapshots by using cron) as described here.</span></span>

<span data-ttu-id="1cf91-305">W przypadku konfiguracji skalowania w górę należy wykonać hello następującego skryptu:</span><span class="sxs-lookup"><span data-stu-id="1cf91-305">For scale-up configurations, execute hello following script:</span></span>
```
./azure_hana_backup.pl lhanad01 customer 20
```
<span data-ttu-id="1cf91-306">W przypadku konfiguracji skalowania w poziomie wykonaj hello następującego skryptu:</span><span class="sxs-lookup"><span data-stu-id="1cf91-306">For scale-out configurations, execute hello following script:</span></span>
```
./azure_hana_backup_bw.pl lhanad01 customer 20
```
<span data-ttu-id="1cf91-307">skrypt skalowalnego w poziomie Hello wykonuje pewne dodatkowe sprawdzanie toomake się, że wszystkie serwery HANA są dostępne, i wszystkich wystąpień HANA Zwróć odpowiedni stan wystąpienia hello przed kontynuowaniem tworzenie migawek SAP HANA lub magazynu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-307">hello scale-out script does some additional checking toomake sure that all HANA servers can be accessed, and all HANA instances return appropriate status of hello instance before proceeding with creating SAP HANA or storage snapshots.</span></span>

<span data-ttu-id="1cf91-308">wymagane są Hello następujące argumenty:</span><span class="sxs-lookup"><span data-stu-id="1cf91-308">hello following arguments are required:</span></span>

- <span data-ttu-id="1cf91-309">Witaj HANA wystąpienia wymagające kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="1cf91-309">hello HANA instance requiring backup.</span></span>
- <span data-ttu-id="1cf91-310">Prefiks migawki Hello hello pamięci masowej migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-310">hello snapshot prefix for hello storage snapshot.</span></span>
- <span data-ttu-id="1cf91-311">Liczba Hello toobe migawki zachowane do sprecyzowanego prefiksu hello.</span><span class="sxs-lookup"><span data-stu-id="1cf91-311">hello number of snapshots toobe kept for hello specific prefix.</span></span>

```
./azure_hana_backup.pl lhanad01 customer 20
```

<span data-ttu-id="1cf91-312">wykonywanie skryptu hello Hello tworzy migawkę magazynu hello w tych fazach:</span><span class="sxs-lookup"><span data-stu-id="1cf91-312">hello execution of hello script creates hello storage snapshot in these three distinct phases:</span></span>

- <span data-ttu-id="1cf91-313">Wykonaj migawkę HANA.</span><span class="sxs-lookup"><span data-stu-id="1cf91-313">Execute a HANA snapshot.</span></span>
- <span data-ttu-id="1cf91-314">Wykonaj migawkę magazynu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-314">Execute a storage snapshot.</span></span>
- <span data-ttu-id="1cf91-315">Usuń hello HANA migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-315">Remove hello HANA snapshot.</span></span>

<span data-ttu-id="1cf91-316">Uruchom skrypt hello wywołując z hello HDB wykonywalnego folderu, który został skopiowany do.</span><span class="sxs-lookup"><span data-stu-id="1cf91-316">Execute hello script by calling it from hello HDB executable folder that it was copied to.</span></span> <span data-ttu-id="1cf91-317">Jego kopię zapasową co najmniej hello następujące woluminy, ale również tworzy kopię zapasową woluminu, który ma hello jawna nazwa wystąpienia SAP HANA w hello nazwa woluminu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-317">It backs up at least hello following volumes, but it also backs up any volume that has hello explicit SAP HANA instance name in hello volume name.</span></span>
```
hana_data_<hana instance>_prod_t020_vol
hana_log_<hana instance>_prod_t020_vol
hana_log_backup_<hana instance>_prod_t020_vol
hana_shared_<hana instance>_prod_t020_vol
```
<span data-ttu-id="1cf91-318">okres przechowywania Hello jest ściśle zarządzane hello liczby migawek przekazany jako parametr podczas wykonywania skryptu hello (na przykład 20 pokazano wcześniej).</span><span class="sxs-lookup"><span data-stu-id="1cf91-318">hello retention period is strictly administered, with hello number of snapshots submitted as a parameter when you execute hello script (such as 20, shown previously).</span></span> <span data-ttu-id="1cf91-319">Dlatego hello ilość czasu jest funkcją hello okres wykonywania i hello liczby migawek w wywołaniu hello hello skryptu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-319">So hello amount of time is a function of hello period of execution and hello number of snapshots in hello call of hello script.</span></span> <span data-ttu-id="1cf91-320">Jeśli hello liczby migawek, które są zachowane przekracza liczbę hello, które są nazywane jako parametr w wywołaniu hello hello skryptu, hello najstarsza migawka magazynu tej etykiety (w tym przypadku poprzednich _niestandardowych_) zostanie usunięte przed jest nową migawkę wykonywane.</span><span class="sxs-lookup"><span data-stu-id="1cf91-320">If hello number of snapshots that are kept exceeds hello number that are named as a parameter in hello call of hello script, hello oldest storage snapshot of this label (in our previous case, _custom_) is deleted before a new snapshot is executed.</span></span> <span data-ttu-id="1cf91-321">Oznacza to numer hello, dawać hello ostatniego parametru wywołania hello jest numer hello można używać toocontrol hello liczby migawek.</span><span class="sxs-lookup"><span data-stu-id="1cf91-321">This means hello number you give as hello last parameter of hello call is hello number you can use toocontrol hello number of snapshots.</span></span>

>[!NOTE]
><span data-ttu-id="1cf91-322">Jak zmienić etykiety hello, zliczania hello jest uruchamiana ponownie.</span><span class="sxs-lookup"><span data-stu-id="1cf91-322">As soon as you change hello label, hello counting starts again.</span></span>

<span data-ttu-id="1cf91-323">Należy tooinclude hello HANA wystąpienia nazwą dostarczoną przez SAP HANA na zarządzania usługą Azure jako argument ich tworzenia migawek w środowiskach z wieloma węzłami.</span><span class="sxs-lookup"><span data-stu-id="1cf91-323">You need tooinclude hello HANA instance name that's provided by SAP HANA on Azure Service Management as an argument if they are creating snapshots in multi-node environments.</span></span> <span data-ttu-id="1cf91-324">W środowiskach z jednym węzłem nazwa hello hello SAP HANA w jednostce Azure (wystąpienia duże) jest wystarczająca, ale nazwa wystąpienia HANA hello nadal jest zalecane.</span><span class="sxs-lookup"><span data-stu-id="1cf91-324">In single-node environments, hello name of hello SAP HANA on Azure (large instances) unit is sufficient, but hello HANA instance name is still recommended.</span></span>

<span data-ttu-id="1cf91-325">Ponadto możesz można wykonać kopię zapasową volumes\LUNs rozruch przy użyciu hello takie same skryptu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-325">Additionally, you can back up boot volumes\LUNs by using hello same script.</span></span> <span data-ttu-id="1cf91-326">Użytkownik należy wykonać kopię zapasową woluminu rozruchowego co najmniej raz przy pierwszym uruchomieniu HANA, mimo że firma Microsoft zaleca co tydzień lub co noc harmonogram tworzenia kopii zapasowych do rozruchu w cron.</span><span class="sxs-lookup"><span data-stu-id="1cf91-326">You must back up your boot volume at least once when you first run HANA, although we recommend a weekly or nightly backup schedule for booting in cron.</span></span> <span data-ttu-id="1cf91-327">Zamiast niż dodać nazwę wystąpienia SAP HANA, Wstaw _rozruchu_ jako hello argument do skryptu hello w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="1cf91-327">Rather than add an SAP HANA instance name, insert _boot_ as hello argument into hello script as follows:</span></span>
```
./azure_hana_backup boot customer 20
```
<span data-ttu-id="1cf91-328">Witaj tych samych zasad przechowywania zapewniona jest również wolumin rozruchowy toohello.</span><span class="sxs-lookup"><span data-stu-id="1cf91-328">hello same retention policy is afforded toohello boot volume as well.</span></span> <span data-ttu-id="1cf91-329">Przy użyciu migawek na żądanie, zgodnie z opisem wcześniej dla przypadków specjalnych, takich jak podczas uaktualniania pakietu (EHP) ulepszenie SAP lub gdy będziesz potrzebować toocreate migawki różne magazynu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-329">Use on-demand snapshots, as described previously, for special cases only, such as during an SAP enhancement package (EHP) upgrade, or when you need toocreate a distinct storage snapshot.</span></span>

<span data-ttu-id="1cf91-330">Firma Microsoft zachęca tooperform zaplanowane magazynu migawek, za pomocą usługi cron i zalecane jest użycie hello skryptu takie same dla wszystkich kopii zapasowych i odzyskiwania po awarii potrzeb (modyfikowanie hello skryptu wejść toomatch hello różnych żądany czas tworzenia kopii zapasowej).</span><span class="sxs-lookup"><span data-stu-id="1cf91-330">We encourage you tooperform scheduled storage snapshots using cron, and we recommend that you use hello same script for all backups and disaster-recovery needs (modifying hello script inputs toomatch hello various requested backup times).</span></span> <span data-ttu-id="1cf91-331">Te są wszystkie zaplanowane inaczej w cron w zależności od ich czas wykonywania: co godzinę, 12-godzinnym, codziennie lub co tydzień.</span><span class="sxs-lookup"><span data-stu-id="1cf91-331">These are all scheduled differently in cron depending on their execution time: hourly, 12-hour, daily, or weekly.</span></span> <span data-ttu-id="1cf91-332">Harmonogram cron Hello jest zaprojektowana toocreate magazynu migawek, zgodne hello wspomnianej wcześniej przechowywania etykietowania dla długoterminowych kopii zapasowych poza nim.</span><span class="sxs-lookup"><span data-stu-id="1cf91-332">hello cron schedule is designed toocreate storage snapshots that match hello previously discussed retention labeling for long-term off-site backup.</span></span> <span data-ttu-id="1cf91-333">skrypt Hello zawiera polecenia tooback zapasowe wszystkich woluminów produkcji, w zależności od ich żądanej częstotliwość (plików danych i dziennika kopie zapasowe są tworzone co godzinę, podczas gdy wolumin rozruchowy hello jest wykonywana kopia zapasowa codziennie).</span><span class="sxs-lookup"><span data-stu-id="1cf91-333">hello script includes commands tooback up all production volumes, depending on their requested frequency (data and log files are backed up hourly, whereas hello boot volume is backed up daily).</span></span>

<span data-ttu-id="1cf91-334">wpisy Hello w hello następującego skryptu cron uruchamiane co godzinę, o hello dziesiątego minutę, co 12 godzin w hello dziesiątego minutę i codziennie w hello dziesiątego minutę.</span><span class="sxs-lookup"><span data-stu-id="1cf91-334">hello entries in hello following cron script run every hour at hello tenth minute, every 12 hours at hello tenth minute, and daily at hello tenth minute.</span></span> <span data-ttu-id="1cf91-335">cron Hello, które zadania są tworzone w taki sposób, ją tylko jeden magazyn SAP HANA odbywa się podczas dowolnej określonej godziny, dzięki czemu hello co godzinę i codziennych kopii zapasowych nie występują na powitania się, że sama czasu (00:10:00).</span><span class="sxs-lookup"><span data-stu-id="1cf91-335">hello cron jobs are created in such a way that only one SAP HANA storage snapshot takes place during any particular hour, so that hello hourly and daily backups do not occur at hello same time (12:10 AM).</span></span> <span data-ttu-id="1cf91-336">toohelp optymalizacji sieci Tworzenie migawki i replikacji, SAP HANA na zarządzania usługą Azure zapewnia hello zalecany czas można toorun kopii zapasowych.</span><span class="sxs-lookup"><span data-stu-id="1cf91-336">toohelp optimize your snapshot creation and replication, SAP HANA on Azure Service Management provides hello recommended time for you toorun your backups.</span></span>

<span data-ttu-id="1cf91-337">Planowanie w /etc/crontab cron domyślne Hello jest następujący:</span><span class="sxs-lookup"><span data-stu-id="1cf91-337">hello default cron scheduling in /etc/crontab is as follows:</span></span>
```
10 1-11,13-23 * * * ./azure_hana_backup.pl lhanad01 hourly 66
10 12 * * *  ./azure_hana_backup.pl lhanad01 12hour 14
```
<span data-ttu-id="1cf91-338">W poprzednich instrukcji cron hello hello HANA woluminów (bez wolumin rozruchowy) uzyskać co godzinę migawki z etykietą hello.</span><span class="sxs-lookup"><span data-stu-id="1cf91-338">In hello previous cron instructions, hello HANA volumes (without boot volume) get an hourly snapshot with hello label.</span></span> <span data-ttu-id="1cf91-339">Te migawek 66 zostaną zachowane.</span><span class="sxs-lookup"><span data-stu-id="1cf91-339">Of these snapshots, 66 are retained.</span></span> <span data-ttu-id="1cf91-340">Ponadto 14 migawki z etykietą 12-godzinnym hello są zachowywane.</span><span class="sxs-lookup"><span data-stu-id="1cf91-340">Additionally, 14 snapshots with hello 12-hour label are retained.</span></span> <span data-ttu-id="1cf91-341">Potencjalnie uzyskać co godzinę migawek dla trzech dni, a także migawki 12-godzinnym o czterech dni, które umożliwia cały tydzień migawek.</span><span class="sxs-lookup"><span data-stu-id="1cf91-341">You potentially get hourly snapshots for three days, plus 12-hour snapshots for another four days, which gives you an entire week of snapshots.</span></span>

<span data-ttu-id="1cf91-342">Planowanie w ramach usługi cron może być trudne, ponieważ tylko jeden skrypt powinien być wykonywany w dowolnym momencie w szczególności, chyba że skrypty hello są rozłożone za kilka minut.</span><span class="sxs-lookup"><span data-stu-id="1cf91-342">Scheduling within cron can be tricky, because only one script should be executed at any particular time, unless hello scripts are staggered by several minutes.</span></span> <span data-ttu-id="1cf91-343">Jeśli chcesz codzienne wykonywanie kopii zapasowych w celu przechowywania długoterminowego dziennej migawki są przechowywane wraz z migawki 12-godzinnym (z licznikiem przechowywania siedmiu każdego) lub hello co godzinę migawka jest rozłożona tootake miejsce 10 minutach.</span><span class="sxs-lookup"><span data-stu-id="1cf91-343">If you want daily backups for long-term retention, either a daily snapshot is kept along with a 12-hour snapshot (with a retention count of seven each), or hello hourly snapshot is staggered tootake place 10 minutes later.</span></span> <span data-ttu-id="1cf91-344">Tylko jeden codziennych migawek jest przechowywany w hello wielkości produkcji.</span><span class="sxs-lookup"><span data-stu-id="1cf91-344">Only one daily snapshot is kept in hello production volume.</span></span>
```
10 1-11,13-23 * * * ./azure_hana_backup.pl lhanad01 hourly 66
10 12 * * *  ./azure_hana_backup.pl lhanad01 12hour 7
10 0 * * * ./azure_hana_backup.pl lhanad01 daily 7
```
<span data-ttu-id="1cf91-345">częstotliwości Hello wymienione w tym miejscu są tylko przykładowe.</span><span class="sxs-lookup"><span data-stu-id="1cf91-345">hello frequencies listed here are only examples.</span></span> <span data-ttu-id="1cf91-346">tooderive optymalną liczbę migawek, hello Użyj następujących kryteriów:</span><span class="sxs-lookup"><span data-stu-id="1cf91-346">tooderive your optimum number of snapshots, use hello following criteria:</span></span>

- <span data-ttu-id="1cf91-347">Wymagania w celu czasu odzyskiwania do punktu w czasie odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="1cf91-347">Requirements in recovery time objective for point-in-time recovery.</span></span>
- <span data-ttu-id="1cf91-348">Użycie miejsca.</span><span class="sxs-lookup"><span data-stu-id="1cf91-348">Space usage.</span></span>
- <span data-ttu-id="1cf91-349">Wymagania dotyczące odzyskiwania punktu cel i celu czasu odzyskiwania do potencjalnego odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="1cf91-349">Requirements in recovery point objective and recovery time objective for potential disaster recovery.</span></span>
- <span data-ttu-id="1cf91-350">Wykonanie ostatecznego HANA pełnej bazy danych z kopii zapasowych na dyskach.</span><span class="sxs-lookup"><span data-stu-id="1cf91-350">Eventual execution of HANA full database backups against disks.</span></span> <span data-ttu-id="1cf91-351">Zawsze, gdy kopii zapasowej pełnej bazy danych na dyskach, lub _backint_ interfejsu, jest wykonywana, niepowodzenia wykonywania hello magazynu migawek.</span><span class="sxs-lookup"><span data-stu-id="1cf91-351">Whenever a full database backup against disks, or _backint_ interface, is performed, hello execution of storage snapshots fails.</span></span> <span data-ttu-id="1cf91-352">Jeśli planujesz tooexecute pełnej bazy danych tworzenie kopii zapasowych na górze magazynu migawek, upewnij się, że hello wykonywania migawek magazynu jest wyłączone w tym czasie.</span><span class="sxs-lookup"><span data-stu-id="1cf91-352">If you plan tooexecute full database backups on top of storage snapshots, make sure that hello execution of storage snapshots is disabled during this time.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="1cf91-353">Użyj Hello magazynu migawek kopii zapasowych SAP HANA jest prawidłowa tylko wtedy, gdy hello migawek są wykonywane w połączeniu z kopii zapasowych dziennika SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="1cf91-353">hello use of storage snapshots for SAP HANA backups is valid only when hello snapshots are performed in conjunction with SAP HANA log backups.</span></span> <span data-ttu-id="1cf91-354">Te dziennika kopii zapasowych należy toobe toocover stanie hello okresy między hello magazynu migawek.</span><span class="sxs-lookup"><span data-stu-id="1cf91-354">These log backups need toobe able toocover hello time periods between hello storage snapshots.</span></span> <span data-ttu-id="1cf91-355">Jeśli ustawiono toousers zadeklarowanej w momencie odzyskiwania 30 dni, należy hello następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="1cf91-355">If you've set a commitment toousers of a point-in-time recovery of 30 days, you need hello following:</span></span>

- <span data-ttu-id="1cf91-356">Możliwość tooaccess magazynu migawek, czyli 30 dni.</span><span class="sxs-lookup"><span data-stu-id="1cf91-356">Ability tooaccess a storage snapshot that is 30 days old.</span></span>
- <span data-ttu-id="1cf91-357">Kopie zapasowe dziennika ciągłe za pośrednictwem hello ostatnich 30 dni.</span><span class="sxs-lookup"><span data-stu-id="1cf91-357">Contiguous log backups over hello last 30 days.</span></span>

<span data-ttu-id="1cf91-358">W zakresie hello kopie zapasowe dziennika należy utworzyć migawkę również hello dziennika kopii zapasowej woluminu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-358">In hello range of log backups, create a snapshot of hello backup log volume as well.</span></span> <span data-ttu-id="1cf91-359">Jednak można się tooperform dziennika regularne tworzenie kopii zapasowych, co pozwala:</span><span class="sxs-lookup"><span data-stu-id="1cf91-359">However, be sure tooperform regular log backups so that you can:</span></span>

- <span data-ttu-id="1cf91-360">Kopie zapasowe dziennika ciągłe hello potrzeby tooperform w momencie przywracania.</span><span class="sxs-lookup"><span data-stu-id="1cf91-360">Have hello contiguous log backups needed tooperform point-in-time recoveries.</span></span>
- <span data-ttu-id="1cf91-361">Wolumin dziennika SAP HANA hello uniemożliwić brakiem miejsca.</span><span class="sxs-lookup"><span data-stu-id="1cf91-361">Prevent hello SAP HANA log volume from running out of space.</span></span>

<span data-ttu-id="1cf91-362">Jeden z kroków ostatniego hello jest tooschedule SAP HANA dzienniki kopii zapasowych w SAP HANA Studio.</span><span class="sxs-lookup"><span data-stu-id="1cf91-362">One of hello last steps is tooschedule SAP HANA backup logs in SAP HANA Studio.</span></span> <span data-ttu-id="1cf91-363">Witaj SAP HANA kopii zapasowej dziennika docelowej jest hello utworzony specjalnie hana/log\_wolumin kopii zapasowych z hello punkt instalacji /hana/log/backups.</span><span class="sxs-lookup"><span data-stu-id="1cf91-363">hello SAP HANA backup log target destination is hello specially created hana/log\_backups volume with hello mount point of /hana/log/backups.</span></span>

![Planowanie tworzenia kopii zapasowych dzienników SAP HANA w SAP HANA Studio](./media/hana-overview-high-availability-disaster-recovery/image5-schedule-backup.png)

<span data-ttu-id="1cf91-365">Możesz wybrać tworzenie kopii zapasowych, które są częściej niż co 15 minut.</span><span class="sxs-lookup"><span data-stu-id="1cf91-365">You can choose backups that are more frequent than every 15 minutes.</span></span> <span data-ttu-id="1cf91-366">W przypadku niektórych użytkowników nawet wykonywać kopie zapasowe dziennika co minutę, chociaż nie zalecamy będzie _za pośrednictwem_ 15 minut.</span><span class="sxs-lookup"><span data-stu-id="1cf91-366">Some users even perform log backups every minute, although we do not recommend going _over_ 15 minutes.</span></span>

<span data-ttu-id="1cf91-367">Ostatnim krokiem Hello jest tooperform na podstawie pliku kopii zapasowej (po początkowej instalacji hello systemu SAP HANA) toocreate jednego wpisu kopii zapasowej, który musi istnieć w katalogu kopii zapasowej hello.</span><span class="sxs-lookup"><span data-stu-id="1cf91-367">hello final step is tooperform a file-based backup (after hello initial installation of SAP HANA) toocreate a single backup entry that must exist within hello backup catalog.</span></span> <span data-ttu-id="1cf91-368">W przeciwnym razie SAP HANA nie można zainicjować kopii zapasowych określony dziennik.</span><span class="sxs-lookup"><span data-stu-id="1cf91-368">Otherwise SAP HANA cannot initiate your specified log backups.</span></span>

![Należy toocreate kopii zapasowej pliku pojedynczy wpis tworzenia kopii zapasowej](./media/hana-overview-high-availability-disaster-recovery/image6-make-backup.png)

### <a name="monitoring-hello-number-and-size-of-snapshots-on-hello-disk-volume"></a><span data-ttu-id="1cf91-370">Monitorowanie hello liczby i rozmiaru migawek na woluminie dysku hello</span><span class="sxs-lookup"><span data-stu-id="1cf91-370">Monitoring hello number and size of snapshots on hello disk volume</span></span>

<span data-ttu-id="1cf91-371">Na woluminie magazynujące można monitorować hello liczbę migawek i użyciu przestrzeni dyskowej hello migawek.</span><span class="sxs-lookup"><span data-stu-id="1cf91-371">On a particular storage volume, you can monitor hello number of snapshots and hello storage consumption of snapshots.</span></span> <span data-ttu-id="1cf91-372">Witaj `ls` polecenie nie wyświetla hello migawki katalog lub pliki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-372">hello `ls` command doesn't show hello snapshot directory or files.</span></span> <span data-ttu-id="1cf91-373">Jednak hello polecenia systemu operacyjnego Linux `du` robi, hello następującego polecenia:</span><span class="sxs-lookup"><span data-stu-id="1cf91-373">However, hello Linux OS command `du` does, with hello following commands:</span></span>

- <span data-ttu-id="1cf91-374">`du –sh .snapshot`zawiera sumę wszystkich migawek w katalogu migawki hello.</span><span class="sxs-lookup"><span data-stu-id="1cf91-374">`du –sh .snapshot` provides a total of all snapshots within hello snapshot directory.</span></span>
- <span data-ttu-id="1cf91-375">`du –sh --max-depth=1`Wyświetla listę wszystkich migawek, które są zapisywane w folderze .snapshot hello i hello rozmiar każdej migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-375">`du –sh --max-depth=1` lists all snapshots that are saved in hello .snapshot folder and hello size of each snapshot.</span></span>
- <span data-ttu-id="1cf91-376">`du –hc`zawiera łączny rozmiar hello używane przez wszystkie migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-376">`du –hc` provides hello total size used by all snapshots.</span></span>

<span data-ttu-id="1cf91-377">Użyj tych czy migawki hello, zarejestrowane i przechowywane zużywają nie wszystkie magazyny hello na woluminach hello toomake poleceń.</span><span class="sxs-lookup"><span data-stu-id="1cf91-377">Use these commands toomake sure that hello snapshots that are taken and stored are not consuming all hello storage on hello volumes.</span></span>

### <a name="reducing-hello-number-of-snapshots-on-a-server"></a><span data-ttu-id="1cf91-378">Zmniejszanie hello liczby migawek na serwerze</span><span class="sxs-lookup"><span data-stu-id="1cf91-378">Reducing hello number of snapshots on a server</span></span>

<span data-ttu-id="1cf91-379">Zgodnie z opisem, można zmniejszyć liczbę hello niektórych etykiety migawek, które są przechowywane.</span><span class="sxs-lookup"><span data-stu-id="1cf91-379">As explained earlier, you can reduce hello number of certain labels of snapshots that you store.</span></span> <span data-ttu-id="1cf91-380">Witaj ostatnie dwa parametry tooinitiate polecenia hello migawki są etykiety i hello liczby migawek, które mają tooretain.</span><span class="sxs-lookup"><span data-stu-id="1cf91-380">hello last two parameters of hello command tooinitiate a snapshot are a label and hello number of snapshots you want tooretain.</span></span>
```
./azure_hana_backup.pl lhanad01 customer 20
```
<span data-ttu-id="1cf91-381">W poprzednim przykładzie hello etykieta migawki hello jest _klienta_ i hello liczby migawek z tej toobe etykiety zachowane _20_.</span><span class="sxs-lookup"><span data-stu-id="1cf91-381">In hello previous example, hello snapshot label is _customer_ and hello number of snapshots with this label toobe retained is _20_.</span></span> <span data-ttu-id="1cf91-382">W odpowiedzi wykorzystanie miejsca toodisk, może być tooreduce hello liczba migawek przechowywanych.</span><span class="sxs-lookup"><span data-stu-id="1cf91-382">As you respond toodisk space consumption, you might want tooreduce hello number of stored snapshots.</span></span> <span data-ttu-id="1cf91-383">łatwe Hello tooreduce hello liczby migawek jest skrypt hello toorun hello ostatniego parametru zestawu too5:</span><span class="sxs-lookup"><span data-stu-id="1cf91-383">hello easy way tooreduce hello number of snapshots is toorun hello script with hello last parameter set too5:</span></span>
```
./azure_hana_backup.pl lhanad01 customer 5
```
<span data-ttu-id="1cf91-384">W wyniku uruchamianie skryptu hello to ustawienie jest hello liczby migawek, w tym hello nowego magazynu migawek, _5_.</span><span class="sxs-lookup"><span data-stu-id="1cf91-384">As a result of running hello script with this setting, hello number of snapshots, including hello new storage snapshot, is _5_.</span></span>

 >[!NOTE]
 > <span data-ttu-id="1cf91-385">Ten skrypt powoduje zmniejszenie hello liczby migawek tylko wtedy, gdy więcej niż jedną godzinę hello najnowszych poprzednią migawkę.</span><span class="sxs-lookup"><span data-stu-id="1cf91-385">This script reduces hello number of snapshots only if hello most recent previous snapshot is more than one hour old.</span></span> <span data-ttu-id="1cf91-386">skrypt Hello nie powoduje usunięcia migawki, które są mniej niż jedną godzinę.</span><span class="sxs-lookup"><span data-stu-id="1cf91-386">hello script does not delete snapshots that are less than one hour old.</span></span>

<span data-ttu-id="1cf91-387">Ograniczenia te są powiązane toohello funkcje opcjonalne odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="1cf91-387">These restrictions are related toohello optional disaster-recovery functionality offered.</span></span>

<span data-ttu-id="1cf91-388">Toomaintain zestawem migawki z tym prefiksem nie są już potrzebne, można wykonać skryptu hello _0_ jako hello przechowywania number tooremove wszystkie migawki dopasowania tego prefiksu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-388">If you no longer want toomaintain a set of snapshots with that prefix, you can execute hello script with _0_ as hello retention number tooremove all snapshots matching that prefix.</span></span> <span data-ttu-id="1cf91-389">Jednak usunięcie wszystkich migawek może wpływać na powitania możliwości odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="1cf91-389">However, removing all snapshots can affect hello capabilities of disaster recovery.</span></span>

### <a name="recovering-toohello-most-recent-hana-snapshot"></a><span data-ttu-id="1cf91-390">Odzyskiwanie toohello najnowszych HANA migawki</span><span class="sxs-lookup"><span data-stu-id="1cf91-390">Recovering toohello most recent HANA snapshot</span></span>

<span data-ttu-id="1cf91-391">W przypadku hello wystąpi produkcyjnym rozwijanej scenariusza, hello proces przywracania z migawki magazynu może być inicjowane jako zdarzeniem klienta z SAP HANA na zarządzania usługą Azure.</span><span class="sxs-lookup"><span data-stu-id="1cf91-391">In hello event that you experience a production-down scenario, hello process of recovering from a storage snapshot can be initiated as a customer incident with SAP HANA on Azure Service Management.</span></span> <span data-ttu-id="1cf91-392">Nieoczekiwany scenariusz może być sprawa wysoka pilność, jeśli dane zostały usunięte w produkcji systemu i hello tylko sposób tooretrieve hello danych jest toorestore hello produkcyjną bazę danych.</span><span class="sxs-lookup"><span data-stu-id="1cf91-392">Such an unexpected scenario might be a high-urgency matter if data was deleted in a production system and hello only way tooretrieve hello data is toorestore hello production database.</span></span>

<span data-ttu-id="1cf91-393">Na powitania drugiej strony, w momencie odzyskiwania może być niski pilność i planowane na dni wcześniej.</span><span class="sxs-lookup"><span data-stu-id="1cf91-393">On hello other hand, a point-in-time recovery could be low urgency and planned for days in advance.</span></span> <span data-ttu-id="1cf91-394">Można zaplanować na zarządzania usługą Azure to odzyskiwanie z programu SAP HANA zamiast wywoływanie problem o wysokim priorytecie.</span><span class="sxs-lookup"><span data-stu-id="1cf91-394">You can plan this recovery with SAP HANA on Azure Service Management instead of raising a high-priority issue.</span></span> <span data-ttu-id="1cf91-395">Na przykład może być planowania tootry uaktualnienie oprogramowania SAP hello stosując nowy pakiet rozszerzenia, a następnie należy utworzyć kopię toorevert tooa migawki, która reprezentuje stan hello przed uaktualnieniem hello EHP.</span><span class="sxs-lookup"><span data-stu-id="1cf91-395">For example, you might be planning tootry an upgrade of hello SAP software by applying a new enhancement package, and you then need toorevert back tooa snapshot that represents hello state before hello EHP upgrade.</span></span>

<span data-ttu-id="1cf91-396">Przed wydaniem żądania hello należy toodo pewne przygotowania.</span><span class="sxs-lookup"><span data-stu-id="1cf91-396">Before you issue hello request, you need toodo some preparation.</span></span> <span data-ttu-id="1cf91-397">SAP HANA zespołu zarządzania usługą Azure, a następnie obsługi żądania hello i udostępnienia hello przywrócić woluminów.</span><span class="sxs-lookup"><span data-stu-id="1cf91-397">SAP HANA on Azure Service Management team can then handle hello request and provide hello restored volumes.</span></span> <span data-ttu-id="1cf91-398">W efekcie to maksymalnie tooyou toorestore hello HANA bazy danych na podstawie hello migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-398">Afterward, it is up tooyou toorestore hello HANA database based on hello snapshots.</span></span> <span data-ttu-id="1cf91-399">Oto jak tooprepare dla hello żądania:</span><span class="sxs-lookup"><span data-stu-id="1cf91-399">Here is how tooprepare for hello request:</span></span>

>[!NOTE]
><span data-ttu-id="1cf91-400">Interfejs użytkownika mogą się różnić od powitania po zrzuty ekranu, w zależności od hello wersji SAP HANA, którego używasz.</span><span class="sxs-lookup"><span data-stu-id="1cf91-400">Your user interface might vary from hello following screenshots, depending on hello SAP HANA release you are using.</span></span>

1. <span data-ttu-id="1cf91-401">Zdecyduj, które toorestore migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-401">Decide which snapshot toorestore.</span></span> <span data-ttu-id="1cf91-402">Czy można przywrócić tylko hello hana/danych woluminu, chyba że są poinstruowany.</span><span class="sxs-lookup"><span data-stu-id="1cf91-402">Only hello hana/data volume would be restored unless you are instructed otherwise.</span></span>

2. <span data-ttu-id="1cf91-403">Zamknij hello HANA wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="1cf91-403">Shut down hello HANA instance.</span></span>

 ![Zamknij hello HANA wystąpienia](./media/hana-overview-high-availability-disaster-recovery/image7-shutdown-hana.png)

3. <span data-ttu-id="1cf91-405">Odinstaluj woluminy danych hello w każdym węźle bazy danych HANA.</span><span class="sxs-lookup"><span data-stu-id="1cf91-405">Unmount hello data volumes on each HANA database node.</span></span> <span data-ttu-id="1cf91-406">Przywracanie Hello hello migawki nie powiedzie się, jeśli nie są odinstalowane hello woluminów danych.</span><span class="sxs-lookup"><span data-stu-id="1cf91-406">hello restoration of hello snapshot fails if hello data volumes are not unmounted.</span></span>

 ![Odinstaluj woluminy danych hello w każdym węźle bazy danych HANA](./media/hana-overview-high-availability-disaster-recovery/image8-unmount-data-volumes.png)

4. <span data-ttu-id="1cf91-408">Otwórz Pomoc techniczna platformy Azure żądania tooinstruct hello przywrócenie określoną migawkę.</span><span class="sxs-lookup"><span data-stu-id="1cf91-408">Open an Azure support request tooinstruct hello restoration of a specific snapshot.</span></span>

 - <span data-ttu-id="1cf91-409">Podczas przywracania hello: SAP HANA z zarządzania usługi Azure może poprosić o tooattend tooensure połączenia, który jest poczucia zagubienia żadne dane.</span><span class="sxs-lookup"><span data-stu-id="1cf91-409">During hello restoration: SAP HANA on Azure Service Management might ask you tooattend a conference call tooensure that no data is getting lost.</span></span>

 - <span data-ttu-id="1cf91-410">Po przywróceniu hello: SAP HANA na zarządzania usługą Azure sygnalizuje hello magazynu migawka została przywrócona.</span><span class="sxs-lookup"><span data-stu-id="1cf91-410">After hello restoration: SAP HANA on Azure Service Management notifies you when hello storage snapshot has been restored.</span></span>

5. <span data-ttu-id="1cf91-411">Po ukończeniu procesu przywracania hello Zainstaluj wszystkie woluminy danych.</span><span class="sxs-lookup"><span data-stu-id="1cf91-411">After hello restoration process is complete, remount all data volumes.</span></span>

 ![Zainstaluj wszystkie woluminy danych](./media/hana-overview-high-availability-disaster-recovery/image9-remount-data-volumes.png)

6. <span data-ttu-id="1cf91-413">Wybierz opcje odzyskiwania w ramach SAP HANA Studio, jeśli nie automatycznie pochodzą po ponownym tooHANA bazy danych za pomocą programu SAP HANA Studio.</span><span class="sxs-lookup"><span data-stu-id="1cf91-413">Select recovery options within SAP HANA Studio, if they do not automatically come up when you reconnect tooHANA DB through SAP HANA Studio.</span></span> <span data-ttu-id="1cf91-414">Witaj poniższy przykład przedstawia przywracania toohello ostatniego HANA migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-414">hello following example shows a restoration toohello last HANA snapshot.</span></span> <span data-ttu-id="1cf91-415">Jeśli przywracasz toohello najnowszych magazynu migawek, należy hello najnowszych HANA migawki i Migawka magazynu osadza jedną migawkę HANA.</span><span class="sxs-lookup"><span data-stu-id="1cf91-415">A storage snapshot embeds one HANA snapshot, and if you are restoring toohello most recent storage snapshot, it should be hello most recent HANA snapshot.</span></span> <span data-ttu-id="1cf91-416">(Jeśli przywracasz tooolder magazynu migawek, należy toolocate hello HANA oparte na powitania czasu hello pamięci masowej migawki migawki.)</span><span class="sxs-lookup"><span data-stu-id="1cf91-416">(If you are restoring tooolder storage snapshots, you need toolocate hello HANA snapshot based on hello time hello storage snapshot was taken.)</span></span>

 ![Wybierz opcje odzyskiwania w ramach SAP HANA Studio](./media/hana-overview-high-availability-disaster-recovery/image10-recover-options-a.png)

7. <span data-ttu-id="1cf91-418">Wybierz **Odzyskaj hello migawki bazy danych tooa określonych danych kopii zapasowej lub magazynu**.</span><span class="sxs-lookup"><span data-stu-id="1cf91-418">Select **Recover hello database tooa specific data backup or storage snapshot**.</span></span>

 ![okno "Określ typ odzyskiwania" Hello](./media/hana-overview-high-availability-disaster-recovery/image11-recover-options-b.png)

8. <span data-ttu-id="1cf91-420">Wybierz **Określ tworzenia kopii zapasowej bez katalogu**.</span><span class="sxs-lookup"><span data-stu-id="1cf91-420">Select **Specify backup without catalog**.</span></span>

 ![okno "Określ lokalizację kopii zapasowej" Hello](./media/hana-overview-high-availability-disaster-recovery/image12-recover-options-c.png)

9. <span data-ttu-id="1cf91-422">W hello **typ docelowy** listy, wybierz **migawki**.</span><span class="sxs-lookup"><span data-stu-id="1cf91-422">In hello **Destination Type** list, select **Snapshot**.</span></span>

 ![okno "Określ hello kopii zapasowej tooRecover" Hello](./media/hana-overview-high-availability-disaster-recovery/image13-recover-options-d.png)

10. <span data-ttu-id="1cf91-424">Kliknij przycisk **Zakończ** proces odzyskiwania hello toostart.</span><span class="sxs-lookup"><span data-stu-id="1cf91-424">Click **Finish** toostart hello recovery process.</span></span>

 ![Kliknij przycisk "Zakończ", proces odzyskiwania hello toostart](./media/hana-overview-high-availability-disaster-recovery/image14-recover-options-e.png)

11. <span data-ttu-id="1cf91-426">bazy danych HANA Hello jest przywracany i odzyskać toohello HANA migawki, która znajduje się w hello pamięci masowej migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-426">hello HANA database is restored and recovered toohello HANA snapshot that's included in hello storage snapshot.</span></span>

 ![Baza danych HANA jest toohello przywrócona i odzyskane HANA migawki](./media/hana-overview-high-availability-disaster-recovery/image15-recover-options-f.png)

### <a name="recovering-toohello-most-recent-state"></a><span data-ttu-id="1cf91-428">Odzyskiwanie stanu ostatniej toohello</span><span class="sxs-lookup"><span data-stu-id="1cf91-428">Recovering toohello most recent state</span></span>

<span data-ttu-id="1cf91-429">Witaj następujący proces przywraca hello HANA migawki, która znajduje się w hello pamięci masowej migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-429">hello following process restores hello HANA snapshot that is included in hello storage snapshot.</span></span> <span data-ttu-id="1cf91-430">Przywraca następnie hello transakcji dziennika kopii zapasowych toohello ostatniego stanu hello bazy danych przed przywróceniem hello pamięci masowej migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-430">It then restores hello transaction log backups toohello most recent state of hello database before restoring hello storage snapshot.</span></span>

>[!IMPORTANT]
><span data-ttu-id="1cf91-431">Przed kontynuowaniem upewnij się, że masz pełne, jak i ciągłe łańcuch kopii zapasowej dziennika transakcji.</span><span class="sxs-lookup"><span data-stu-id="1cf91-431">Before you proceed, make sure that you have a complete and contiguous chain of transaction log backups.</span></span> <span data-ttu-id="1cf91-432">Bez tych kopii zapasowych nie można przywrócić bieżącego stanu hello hello bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1cf91-432">Without these backups, you cannot restore hello current state of hello database.</span></span>

1. <span data-ttu-id="1cf91-433">Wykonaj kroki 1 – 6 hello poprzedzające procedury "Odzyskiwanie toohello najnowszych HANA migawki."</span><span class="sxs-lookup"><span data-stu-id="1cf91-433">Complete steps 1-6 of hello preceding procedure in "Recovering toohello most recent HANA snapshot."</span></span>

2. <span data-ttu-id="1cf91-434">Wybierz **odzyskać stan ostatniej hello bazy danych tooits**.</span><span class="sxs-lookup"><span data-stu-id="1cf91-434">Select **Recover hello database tooits most recent state**.</span></span>

 ![Wybierz opcję "Odzyskać stan ostatniej tooits hello bazy danych"](./media/hana-overview-high-availability-disaster-recovery/image16-recover-database-a.png)

3. <span data-ttu-id="1cf91-436">Określ lokalizację hello kopie zapasowe hello najnowszych HANA dziennika.</span><span class="sxs-lookup"><span data-stu-id="1cf91-436">Specify hello location of hello most recent HANA log backups.</span></span> <span data-ttu-id="1cf91-437">Lokalizacja Hello musi toocontain wszystkie HANA kopie zapasowe dziennika transakcji z stan ostatniej toohello hello HANA migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-437">hello location needs toocontain all HANA transaction log backups from hello HANA snapshot toohello most recent state.</span></span>

 ![Określ lokalizację hello kopie zapasowe hello najnowszych HANA dzienników](./media/hana-overview-high-availability-disaster-recovery/image17-recover-database-b.png)

4. <span data-ttu-id="1cf91-439">Wybierz kopię zapasową jako podstawa z hello toorecover bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1cf91-439">Select a backup as a base from which toorecover hello database.</span></span> <span data-ttu-id="1cf91-440">W naszym przykładzie jest to hello HANA migawki, która została uwzględniona w hello pamięci masowej migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-440">In our example, this is hello HANA snapshot that was included in hello storage snapshot.</span></span> <span data-ttu-id="1cf91-441">(Tylko jedna migawka znajduje się w powitania po zrzut ekranu).</span><span class="sxs-lookup"><span data-stu-id="1cf91-441">(Only one snapshot is listed in hello following screenshot.)</span></span>

 ![Wybierz kopię zapasową jako podstawa z bazy danych hello toorecover](./media/hana-overview-high-availability-disaster-recovery/image18-recover-database-c.png)

5. <span data-ttu-id="1cf91-443">Wyczyść hello **kopii zapasowych Delta użyj** pole wyboru, jeśli nie istnieją różnice między czasem hello hello HANA migawki i stan ostatniej hello.</span><span class="sxs-lookup"><span data-stu-id="1cf91-443">Clear hello **Use Delta Backups** check box if deltas do not exist between hello time of hello HANA snapshot and hello most recent state.</span></span>

 ![Witaj wyczyść pole wyboru "Użyj różnicowe kopie zapasowe" Jeśli nie istnieją żadne delty](./media/hana-overview-high-availability-disaster-recovery/image19-recover-database-d.png)

6. <span data-ttu-id="1cf91-445">Na ekranie Podsumowanie powitania kliknij **Zakończ** procedury przywracania hello toostart.</span><span class="sxs-lookup"><span data-stu-id="1cf91-445">On hello summary screen, click **Finish** toostart hello restoration procedure.</span></span>

 ![Na ekranie Podsumowanie powitania kliknij przycisk "Zakończ"](./media/hana-overview-high-availability-disaster-recovery/image20-recover-database-e.png)

### <a name="recovering-tooanother-point-in-time"></a><span data-ttu-id="1cf91-447">Odzyskiwanie tooanother punktu w czasie</span><span class="sxs-lookup"><span data-stu-id="1cf91-447">Recovering tooanother point in time</span></span>
<span data-ttu-id="1cf91-448">toorecover tooa punktu w czasie między migawki HANA hello (dołączone do migawki magazynu hello) i jedną, która jest nowsza niż hello HANA migawki odzyskiwania w momencie hello następujące:</span><span class="sxs-lookup"><span data-stu-id="1cf91-448">toorecover tooa point in time between hello HANA snapshot (included in hello storage snapshot) and one that is later than hello HANA snapshot point-in-time recovery, do hello following:</span></span>

1. <span data-ttu-id="1cf91-449">Upewnij się, że wszystkie kopie zapasowe dziennika transakcji z ma toorecover hello HANA migawki toohello czasu.</span><span class="sxs-lookup"><span data-stu-id="1cf91-449">Make sure that you have all transaction log backups from hello HANA snapshot toohello time you want toorecover.</span></span>
2. <span data-ttu-id="1cf91-450">Rozpocznij procedurę hello w obszarze "Stan ostatniej odzyskiwanie toohello."</span><span class="sxs-lookup"><span data-stu-id="1cf91-450">Begin hello procedure under "Recovering toohello most recent state."</span></span>
3. <span data-ttu-id="1cf91-451">W kroku 2 procedury hello w hello **typu odzyskiwania określ** wybierz **Odzyskaj hello bazy danych toohello następujące punktu w czasie**Określ hello punktu w czasie, a następnie wykonaj kroki od 3 do 6.</span><span class="sxs-lookup"><span data-stu-id="1cf91-451">In step 2 of hello procedure, in hello **Specify Recovery Type** window, select **Recover hello database toohello following point in time**, specify hello point in time, and then complete steps 3-6.</span></span>

## <a name="monitoring-hello-execution-of-snapshots"></a><span data-ttu-id="1cf91-452">Monitorowanie hello wykonywania migawek</span><span class="sxs-lookup"><span data-stu-id="1cf91-452">Monitoring hello execution of snapshots</span></span>

<span data-ttu-id="1cf91-453">Konieczne jest wykonanie hello toomonitor magazynu migawek.</span><span class="sxs-lookup"><span data-stu-id="1cf91-453">You need toomonitor hello execution of storage snapshots.</span></span> <span data-ttu-id="1cf91-454">Witaj skrypt, który wykonuje migawkę magazynu zapisuje plik wyjściowy tooa, a następnie zapisuje on toohello tej samej lokalizacji co skryptów języka Perl hello.</span><span class="sxs-lookup"><span data-stu-id="1cf91-454">hello script that executes a storage snapshot writes output tooa file and then saves it toohello same location as hello Perl scripts.</span></span> <span data-ttu-id="1cf91-455">Oddzielny plik jest przeznaczony dla każdej migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-455">A separate file is written for each snapshot.</span></span> <span data-ttu-id="1cf91-456">dane wyjściowe każdego pliku Hello jasno wskazuje hello różnych faz, które wykonuje hello migawki skryptu:</span><span class="sxs-lookup"><span data-stu-id="1cf91-456">hello output of each file clearly shows hello various phases that hello snapshot script executes:</span></span>

- <span data-ttu-id="1cf91-457">Znajdowanie hello woluminów, które wymagają toocreate migawki</span><span class="sxs-lookup"><span data-stu-id="1cf91-457">Finding hello volumes that need toocreate a snapshot</span></span>
- <span data-ttu-id="1cf91-458">Znajdowanie migawki hello pobranych z tych woluminów</span><span class="sxs-lookup"><span data-stu-id="1cf91-458">Finding hello snapshots taken from these volumes</span></span>
- <span data-ttu-id="1cf91-459">Usuwanie ewentualne istniejące migawki toomatch hello liczby migawek określona</span><span class="sxs-lookup"><span data-stu-id="1cf91-459">Deleting eventual existing snapshots toomatch hello number of snapshots you specified</span></span>
- <span data-ttu-id="1cf91-460">Tworzenie migawek HANA</span><span class="sxs-lookup"><span data-stu-id="1cf91-460">Creating a HANA snapshot</span></span>
- <span data-ttu-id="1cf91-461">Utworzenie migawki magazynu hello za pośrednictwem hello woluminów</span><span class="sxs-lookup"><span data-stu-id="1cf91-461">Creating hello storage snapshot over hello volumes</span></span>
- <span data-ttu-id="1cf91-462">Usunięcie migawki HANA hello</span><span class="sxs-lookup"><span data-stu-id="1cf91-462">Deleting hello HANA snapshot</span></span>
- <span data-ttu-id="1cf91-463">Zmiana nazwy hello najnowszych migawki zbyt**.0**</span><span class="sxs-lookup"><span data-stu-id="1cf91-463">Renaming hello most recent snapshot too**.0**</span></span>

<span data-ttu-id="1cf91-464">Witaj najważniejszy element skryptu hello są następujące:</span><span class="sxs-lookup"><span data-stu-id="1cf91-464">hello most important part of hello script is this:</span></span>
```
**********************Creating HANA snapshot**********************
Creating hello HANA snapshot with command: "./hdbsql -n localhost -i 01 -U SCADMIN01 "backup data create snapshot"" ...
HANA snapshot created successfully.
**********************Creating Storage snapshot**********************
Taking snapshot hourly.recent for hana_data_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for hana_log_backup_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for hana_log_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for hana_shared_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for sapmnt_lhanad01_t020_vol ...
Snapshot created successfully.
**********************Deleting HANA snapshot**********************
Deleting hello HANA snapshot with command: "./hdbsql -n localhost -i 01 -U SCADMIN01 "backup data drop snapshot"" ...
HANA snapshot deletion successfully.
```
<span data-ttu-id="1cf91-465">W tym przykładzie widać, jak rekordy skryptu hello hello tworzenia migawki HANA hello.</span><span class="sxs-lookup"><span data-stu-id="1cf91-465">You can see from this sample how hello script records hello creation of hello HANA snapshot.</span></span> <span data-ttu-id="1cf91-466">W przypadku skalowania w poziomie hello ten proces jest inicjowana na powitania węzła głównego.</span><span class="sxs-lookup"><span data-stu-id="1cf91-466">In hello scale-out case, this process is initiated on hello master node.</span></span> <span data-ttu-id="1cf91-467">węzeł główny Hello inicjuje hello synchroniczne tworzenie migawek hello na każdym z węzłów procesu roboczego hello.</span><span class="sxs-lookup"><span data-stu-id="1cf91-467">hello master node initiates hello synchronous creation of hello snapshots on each of hello worker nodes.</span></span> <span data-ttu-id="1cf91-468">Następnie hello pamięci masowej migawki.</span><span class="sxs-lookup"><span data-stu-id="1cf91-468">Then hello storage snapshot is taken.</span></span> <span data-ttu-id="1cf91-469">Po pomyślnym wykonaniu hello hello magazynu migawek hello HANA migawka jest usuwana.</span><span class="sxs-lookup"><span data-stu-id="1cf91-469">After hello successful execution of hello storage snapshots, hello HANA snapshot is deleted.</span></span>
