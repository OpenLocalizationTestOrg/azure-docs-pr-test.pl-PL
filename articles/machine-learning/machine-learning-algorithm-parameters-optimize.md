---
title: "Zoptymalizuj algorytmy w usłudze Azure Machine Learning | Dokumentacja firmy Microsoft"
description: "Wyjaśniono, jak wybrać optymalne zestawu parametrów dla algorytmu w usłudze Azure Machine Learning."
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: 6717e30e-b8d8-4cc1-ad0b-1d4727928d32
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/29/2017
ms.author: bradsev
ms.openlocfilehash: b3be7f31ac31c656744fb809e3972af0ac4ad4f1
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="choose-parameters-to-optimize-your-algorithms-in-azure-machine-learning"></a><span data-ttu-id="09109-103">Wybierz parametry w celu zoptymalizowania algorytmy w usłudze Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="09109-103">Choose parameters to optimize your algorithms in Azure Machine Learning</span></span>
<span data-ttu-id="09109-104">W tym temacie opisano, jak wybrać prawa hyperparameter, ustaw dla algorytmu w usłudze Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="09109-104">This topic describes how to choose the right hyperparameter set for an algorithm in Azure Machine Learning.</span></span> <span data-ttu-id="09109-105">Większość algorytmów uczenia maszynowego ma parametry, aby ustawić.</span><span class="sxs-lookup"><span data-stu-id="09109-105">Most machine learning algorithms have parameters to set.</span></span> <span data-ttu-id="09109-106">Podczas uczenia modelu, konieczne jest podanie wartości tych parametrów.</span><span class="sxs-lookup"><span data-stu-id="09109-106">When you train a model, you need to provide values for those parameters.</span></span> <span data-ttu-id="09109-107">Efektywnie tworzyć trenowanego modelu zależy od parametrów modelu, które można wybrać.</span><span class="sxs-lookup"><span data-stu-id="09109-107">The efficacy of the trained model depends on the model parameters that you choose.</span></span> <span data-ttu-id="09109-108">Proces odnajdywania optymalne zestaw parametrów jest nazywany *modelu zaznaczenia*.</span><span class="sxs-lookup"><span data-stu-id="09109-108">The process of finding the optimal set of parameters is known as *model selection*.</span></span>

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

<span data-ttu-id="09109-109">Istnieją różne sposoby modelu zaznaczenia.</span><span class="sxs-lookup"><span data-stu-id="09109-109">There are various ways to do model selection.</span></span> <span data-ttu-id="09109-110">W uczeniu maszynowym, krzyżowe sprawdzanie poprawności jest jednym z najpopularniejszych metod wybór modelu i jest domyślny mechanizm wyboru modelu w usłudze Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="09109-110">In machine learning, cross-validation is one of the most widely used methods for model selection, and it is the default model selection mechanism in Azure Machine Learning.</span></span> <span data-ttu-id="09109-111">Ponieważ uczenia maszynowego Azure obsługuje R i Python, zawsze można zaimplementować własne mechanizmy wybór modelu przy użyciu R lub Python.</span><span class="sxs-lookup"><span data-stu-id="09109-111">Because Azure Machine Learning supports both R and Python, you can always implement their own model selection mechanisms by using either R or Python.</span></span>

<span data-ttu-id="09109-112">Istnieją cztery czynności w procesie znajdowanie najlepsze zestaw parametrów:</span><span class="sxs-lookup"><span data-stu-id="09109-112">There are four steps in the process of finding the best parameter set:</span></span>

1. <span data-ttu-id="09109-113">**Zdefiniuj miejsca parametru**: dla algorytmu, najpierw zdecyduj, wartości parametrów dokładne chcesz wziąć pod uwagę.</span><span class="sxs-lookup"><span data-stu-id="09109-113">**Define the parameter space**: For the algorithm, first decide the exact parameter values you want to consider.</span></span>
2. <span data-ttu-id="09109-114">**Zdefiniuj ustawienia krzyżowego sprawdzania poprawności**: zdecydować, jak wybrać złożeń krzyżowego sprawdzania poprawności dla zestawu danych.</span><span class="sxs-lookup"><span data-stu-id="09109-114">**Define the cross-validation settings**: Decide how to choose cross-validation folds for the dataset.</span></span>
3. <span data-ttu-id="09109-115">**Zdefiniuj Metryka**: Zdecyduj, jakie Metryka używaną do określania zestawu najlepszych parametrów, takich jak dokładność, średniej głównego kwadrat błąd, dokładność, odwołania lub wynik f.</span><span class="sxs-lookup"><span data-stu-id="09109-115">**Define the metric**: Decide what metric to use for determining the best set of parameters, such as accuracy, root mean squared error, precision, recall, or f-score.</span></span>
4. <span data-ttu-id="09109-116">**Uczenie, ocenę i porównywania**: dla każdej kombinacji unikatowe wartości parametrów jest przeprowadzane przez i oparta na Metryka błędu, należy zdefiniować krzyżowego sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="09109-116">**Train, evaluate, and compare**: For each unique combination of the parameter values, cross-validation is carried out by and based on the error metric you define.</span></span> <span data-ttu-id="09109-117">Po oceny i porównania możesz wybrać najlepiej wykonywania modelu.</span><span class="sxs-lookup"><span data-stu-id="09109-117">After evaluation and comparison, you can choose the best-performing model.</span></span>

<span data-ttu-id="09109-118">Na poniższym obrazie przedstawiono pokazuje, jak można to osiągnąć w usłudze Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="09109-118">The following image illustrates shows how this can be achieved in Azure Machine Learning.</span></span>

![Znajdź najlepsze zestaw parametrów](./media/machine-learning-algorithm-parameters-optimize/fig1.png)

## <a name="define-the-parameter-space"></a><span data-ttu-id="09109-120">Zdefiniuj miejsca parametru</span><span class="sxs-lookup"><span data-stu-id="09109-120">Define the parameter space</span></span>
<span data-ttu-id="09109-121">Można określić parametr ustawiony w kroku inicjowania modelu.</span><span class="sxs-lookup"><span data-stu-id="09109-121">You can define the parameter set at the model initialization step.</span></span> <span data-ttu-id="09109-122">W okienku parametru wszystkich algorytmów uczenia maszynowego ma dwa tryby trainer: *pojedynczy parametr* i *zakres parametru*.</span><span class="sxs-lookup"><span data-stu-id="09109-122">The parameter pane of all machine learning algorithms has two trainer modes: *Single Parameter* and *Parameter Range*.</span></span> <span data-ttu-id="09109-123">Wybierz tryb zakres parametru.</span><span class="sxs-lookup"><span data-stu-id="09109-123">Choose Parameter Range mode.</span></span> <span data-ttu-id="09109-124">W trybie parametru zakresu można wprowadzić wiele wartości dla każdego parametru.</span><span class="sxs-lookup"><span data-stu-id="09109-124">In Parameter Range mode, you can enter multiple values for each parameter.</span></span> <span data-ttu-id="09109-125">W polu tekstowym, można wprowadzić wartości rozdzielanych przecinkami.</span><span class="sxs-lookup"><span data-stu-id="09109-125">You can enter comma-separated values in the text box.</span></span>

![Drzewo decyzyjne boosted dwuklasowych, jeden parametr](./media/machine-learning-algorithm-parameters-optimize/fig2.png)

 <span data-ttu-id="09109-127">Alternatywnie można zdefiniować maksymalne i minimalne punktów siatki i łączną liczbę punktów, które ma zostać wygenerowane z **Użyj konstruktora zakresu**.</span><span class="sxs-lookup"><span data-stu-id="09109-127">Alternately, you can define the maximum and minimum points of the grid and the total number of points to be generated with **Use Range Builder**.</span></span> <span data-ttu-id="09109-128">Domyślnie wartości parametrów, które są generowane na skali liniowej.</span><span class="sxs-lookup"><span data-stu-id="09109-128">By default, the parameter values are generated on a linear scale.</span></span> <span data-ttu-id="09109-129">Jeśli jednak **skali logarytmicznej** zaznaczono wartości są generowane w skali logarytmicznej (stosunek sąsiadujących punktów jest stałe, zamiast ich różnica).</span><span class="sxs-lookup"><span data-stu-id="09109-129">But if **Log Scale** is checked, the values are generated in the log scale (that is, the ratio of the adjacent points is constant instead of their difference).</span></span> <span data-ttu-id="09109-130">Dla parametrów liczba całkowita można zdefiniować zakres przy użyciu łącznika.</span><span class="sxs-lookup"><span data-stu-id="09109-130">For integer parameters, you can define a range by using a hyphen.</span></span> <span data-ttu-id="09109-131">Na przykład "1-10" oznacza, że wszystkie liczby całkowite z przedziału od 1 do 10 (zarówno z wartościami granicznymi) tworzą zestaw parametrów.</span><span class="sxs-lookup"><span data-stu-id="09109-131">For example, “1-10” means that all integers between 1 and 10 (both inclusive) form the parameter set.</span></span> <span data-ttu-id="09109-132">Tryb mieszany jest również obsługiwany.</span><span class="sxs-lookup"><span data-stu-id="09109-132">A mixed mode is also supported.</span></span> <span data-ttu-id="09109-133">Na przykład ustawić parametr "1-10, 20, 50" obejmuje liczb całkowitych 1-10, 20 do 50.</span><span class="sxs-lookup"><span data-stu-id="09109-133">For example, the parameter set “1-10, 20, 50” would include integers 1-10, 20, and 50.</span></span>

![Drzewo decyzyjne boosted dwuklasowych, parametr zakresu](./media/machine-learning-algorithm-parameters-optimize/fig3.png)

## <a name="define-cross-validation-folds"></a><span data-ttu-id="09109-135">Zdefiniuj złożeń krzyżowego sprawdzania poprawności</span><span class="sxs-lookup"><span data-stu-id="09109-135">Define cross-validation folds</span></span>
<span data-ttu-id="09109-136">[Partycja i próbka] [ partition-and-sample] modułu może służyć do losowo przypisać złożeń do danych.</span><span class="sxs-lookup"><span data-stu-id="09109-136">The [Partition and Sample][partition-and-sample] module can be used to randomly assign folds to the data.</span></span> <span data-ttu-id="09109-137">W następujących Przykładowa konfiguracja modułu możemy zdefiniować pięć złożeń i losowo przypisania do wystąpień próbki numeru złożenia.</span><span class="sxs-lookup"><span data-stu-id="09109-137">In the following sample configuration for the module, we define five folds and randomly assign a fold number to the sample instances.</span></span>

![Partycja i próbka](./media/machine-learning-algorithm-parameters-optimize/fig4.png)

## <a name="define-the-metric"></a><span data-ttu-id="09109-139">Zdefiniuj metrykę</span><span class="sxs-lookup"><span data-stu-id="09109-139">Define the metric</span></span>
<span data-ttu-id="09109-140">[Hiperparametry modelu] [ tune-model-hyperparameters] modułu zapewnia obsługę empirycznie Wybieranie najlepszych zbiór parametrów dla podanego algorytmu i zestawu danych.</span><span class="sxs-lookup"><span data-stu-id="09109-140">The [Tune Model Hyperparameters][tune-model-hyperparameters] module provides support for empirically choosing the best set of parameters for a given algorithm and dataset.</span></span> <span data-ttu-id="09109-141">Oprócz innych informacji dotyczących uczenia modelu, **właściwości** okienko ten moduł zawiera metrykę określania najlepsze zestaw parametrów.</span><span class="sxs-lookup"><span data-stu-id="09109-141">In addition to other information regarding training the model, the **Properties** pane of this module includes the metric for determining the best parameter set.</span></span> <span data-ttu-id="09109-142">Ma on dwa pola listy rozwijanej różnych algorytmów klasyfikacji i regresji, odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="09109-142">It has two different drop-down list boxes for classification and regression algorithms, respectively.</span></span> <span data-ttu-id="09109-143">Jeśli algorytm pod uwagę to algorytm klasyfikacji, metryka regresji jest ignorowany i na odwrót.</span><span class="sxs-lookup"><span data-stu-id="09109-143">If the algorithm under consideration is a classification algorithm, the regression metric is ignored and vice versa.</span></span> <span data-ttu-id="09109-144">W tym przykładzie określonych metryka jest **dokładność**.</span><span class="sxs-lookup"><span data-stu-id="09109-144">In this specific example, the metric is **Accuracy**.</span></span>   

![Parametry odchylenia](./media/machine-learning-algorithm-parameters-optimize/fig5.png)

## <a name="train-evaluate-and-compare"></a><span data-ttu-id="09109-146">Uczenie, ocenę i porównywania</span><span class="sxs-lookup"><span data-stu-id="09109-146">Train, evaluate, and compare</span></span>
<span data-ttu-id="09109-147">Taki sam [Hiperparametry modelu] [ tune-model-hyperparameters] pociągu modułu wszystkie modele, które odpowiadają parametr ustawić, ocenia różnych metryk, a następnie tworzy najlepiej trenowanego modelu na podstawie na Metryka Wybierz.</span><span class="sxs-lookup"><span data-stu-id="09109-147">The same [Tune Model Hyperparameters][tune-model-hyperparameters] module trains all the models that correspond to the parameter set, evaluates various metrics, and then creates the best-trained model based on the metric you choose.</span></span> <span data-ttu-id="09109-148">Ten moduł ma dwóch parametrów wejściowych obowiązkowe:</span><span class="sxs-lookup"><span data-stu-id="09109-148">This module has two mandatory inputs:</span></span>

* <span data-ttu-id="09109-149">Nieprzeszkolonych uczeń</span><span class="sxs-lookup"><span data-stu-id="09109-149">The untrained learner</span></span>
* <span data-ttu-id="09109-150">Zestaw danych</span><span class="sxs-lookup"><span data-stu-id="09109-150">The dataset</span></span>

<span data-ttu-id="09109-151">Moduł ma również zestaw opcjonalne danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="09109-151">The module also has an optional dataset input.</span></span> <span data-ttu-id="09109-152">Zestaw danych Uzyskuj dostęp do złożenia informacji w danych wejściowych obowiązkowe zestawu danych.</span><span class="sxs-lookup"><span data-stu-id="09109-152">Connect the dataset with fold information to the mandatory dataset input.</span></span> <span data-ttu-id="09109-153">Jeśli zestaw danych nie przypisano żadnych informacji złożenia, 10-krotnych krzyżowego sprawdzania poprawności automatycznie jest wykonywana domyślnie.</span><span class="sxs-lookup"><span data-stu-id="09109-153">If the dataset is not assigned any fold information, then a 10-fold cross-validation is automatically executed by default.</span></span> <span data-ttu-id="09109-154">Jeśli przypisanie składanie nie została wykonana i sprawdzanie poprawności zestawu danych jest dostępne w porcie opcjonalny zestaw danych, wybrany jest tryb train testu i pierwszego zestawu danych jest używany do nauczenia modelu, dla każdej kombinacji parametrów.</span><span class="sxs-lookup"><span data-stu-id="09109-154">If the fold assignment is not done and a validation dataset is provided at the optional dataset port, then a train-test mode is chosen and the first dataset is used to train the model for each parameter combination.</span></span>

![Klasyfikator drzewa decyzyjnego boosted](./media/machine-learning-algorithm-parameters-optimize/fig6a.png)

<span data-ttu-id="09109-156">Model jest oceniane oddzielnie dla zestawu danych sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="09109-156">The model is then evaluated on the validation dataset.</span></span> <span data-ttu-id="09109-157">Lewy port wyjściowy modułu zawiera różne metryki jako funkcje wartości parametrów.</span><span class="sxs-lookup"><span data-stu-id="09109-157">The left output port of the module shows different metrics as functions of parameter values.</span></span> <span data-ttu-id="09109-158">Port wyjściowy prawym daje trenowanego modelu, który odpowiada modelowi najlepiej zostanie wykonana zgodnie z wybranym metryka (**dokładność** w takim przypadku).</span><span class="sxs-lookup"><span data-stu-id="09109-158">The right output port gives the trained model that corresponds to the best-performing model according to the chosen metric (**Accuracy** in this case).</span></span>  

![Sprawdzanie poprawności zestawu danych](./media/machine-learning-algorithm-parameters-optimize/fig6b.png)

<span data-ttu-id="09109-160">Widać parametrami wybierany przez wizualizacja port wyjściowy w prawo.</span><span class="sxs-lookup"><span data-stu-id="09109-160">You can see the exact parameters chosen by visualizing the right output port.</span></span> <span data-ttu-id="09109-161">Ten model można oceniania zestawu testowego lub usługi sieci web operationalized po zapisaniu jako uczonego modelu.</span><span class="sxs-lookup"><span data-stu-id="09109-161">This model can be used in scoring a test set or in an operationalized web service after saving as a trained model.</span></span>

<!-- Module References -->
[partition-and-sample]: https://msdn.microsoft.com/library/azure/a8726e34-1b3e-4515-b59a-3e4a475654b8/
[tune-model-hyperparameters]: https://msdn.microsoft.com/library/azure/038d91b6-c2f2-42a1-9215-1f2c20ed1b40/
