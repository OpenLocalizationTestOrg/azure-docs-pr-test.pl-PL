---
title: "Samouczek Azure Analysis Services: lekcja 4 — tworzenie relacji | Microsoft Docs"
description: "Opisuje sposób tworzenia relacji w projekcie samouczka usług Azure Analysis Services."
services: analysis-services
documentationcenter: 
author: minewiskan
manager: erikre
editor: 
tags: 
ms.assetid: 
ms.service: analysis-services
ms.devlang: NA
ms.topic: get-started-article
ms.tgt_pltfrm: NA
ms.workload: na
ms.date: 05/26/2017
ms.author: owend
ms.openlocfilehash: d79af3915c718a79f60e5f589527eb4c2ae8b367
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="lesson-4-create-relationships"></a><span data-ttu-id="65b54-103">Lekcja 4. Tworzenie relacji</span><span class="sxs-lookup"><span data-stu-id="65b54-103">Lesson 4: Create relationships</span></span>

[!INCLUDE[analysis-services-appliesto-aas-sql2017-later](../../../includes/analysis-services-appliesto-aas-sql2017-later.md)]

<span data-ttu-id="65b54-104">W tej lekcji sprawdzisz relacje, które zostały automatycznie utworzone po zaimportowaniu danych, i dodasz nowe relacje między różnymi tabelami.</span><span class="sxs-lookup"><span data-stu-id="65b54-104">In this lesson, you verify the relationships that were created automatically when you imported data and add new relationships between different tables.</span></span> <span data-ttu-id="65b54-105">Relacja to połączenie między dwiema tabelami, które określa sposób korelowania danych w tych tabelach.</span><span class="sxs-lookup"><span data-stu-id="65b54-105">A relationship is a connection between two tables that establishes how the data in those tables should be correlated.</span></span> <span data-ttu-id="65b54-106">Na przykład: między tabelą DimProduct a tabelą DimProductSubcategory istnieje relacja opierająca się na fakcie, że każdy z produktów należy do podkategorii.</span><span class="sxs-lookup"><span data-stu-id="65b54-106">For example, the DimProduct table and the DimProductSubcategory table have a relationship based on the fact that each product belongs to a subcategory.</span></span> <span data-ttu-id="65b54-107">Aby dowiedzieć się więcej, zobacz [Relacje](https://docs.microsoft.com/sql/analysis-services/tabular-models/relationships-ssas-tabular).</span><span class="sxs-lookup"><span data-stu-id="65b54-107">To learn more, see [Relationships](https://docs.microsoft.com/sql/analysis-services/tabular-models/relationships-ssas-tabular).</span></span>
  
<span data-ttu-id="65b54-108">Szacowany czas trwania lekcji: **10 minut**</span><span class="sxs-lookup"><span data-stu-id="65b54-108">Estimated time to complete this lesson: **10 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="65b54-109">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="65b54-109">Prerequisites</span></span>  
<span data-ttu-id="65b54-110">Ten temat stanowi część samouczka modelowania tabelarycznego, który należy wykonać w podanej kolejności.</span><span class="sxs-lookup"><span data-stu-id="65b54-110">This topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="65b54-111">Przed przystąpieniem do wykonywania zadań w tej lekcji należy ukończyć lekcję poprzednią: [Lekcja 3. Oznaczanie jako tabeli dat](../tutorials/aas-lesson-3-mark-as-date-table.md).</span><span class="sxs-lookup"><span data-stu-id="65b54-111">Before performing the tasks in this lesson, you should have completed the previous lesson: [Lesson 3: Mark as Date Table](../tutorials/aas-lesson-3-mark-as-date-table.md).</span></span> 
  
## <a name="review-existing-relationships-and-add-new-relationships"></a><span data-ttu-id="65b54-112">Przegląd istniejących relacji i dodawanie nowych</span><span class="sxs-lookup"><span data-stu-id="65b54-112">Review existing relationships and add new relationships</span></span>  
<span data-ttu-id="65b54-113">Podczas importowania danych przy użyciu narzędzia Pobierz dane uzyskano siedem tabel z bazy danych AdventureWorksDW2014.</span><span class="sxs-lookup"><span data-stu-id="65b54-113">When you imported data by using Get Data, you got seven tables from the AdventureWorksDW2014 database.</span></span> <span data-ttu-id="65b54-114">Ogólnie rzecz biorąc, podczas importowania danych ze źródła relacyjnego istniejące relacje są importowane automatycznie wraz z danymi.</span><span class="sxs-lookup"><span data-stu-id="65b54-114">Generally, when you import data from a relational source, existing relationships are automatically imported together with the data.</span></span> <span data-ttu-id="65b54-115">Jednak przed przystąpieniem do tworzenia modelu należy sprawdzić, czy relacje między tabelami zostały utworzone prawidłowo.</span><span class="sxs-lookup"><span data-stu-id="65b54-115">However, before you proceed with authoring your model you should verify those relationships between tables were created properly.</span></span> <span data-ttu-id="65b54-116">W tym samouczku zostaną dodane trzy nowe relacje.</span><span class="sxs-lookup"><span data-stu-id="65b54-116">For this tutorial, you add three new relationships.</span></span>  
  
#### <a name="to-review-existing-relationships"></a><span data-ttu-id="65b54-117">Aby przejrzeć istniejące relacje:</span><span class="sxs-lookup"><span data-stu-id="65b54-117">To review existing relationships</span></span>  
  
1.  <span data-ttu-id="65b54-118">W menu **Model** kliknij **Widok modelu** > **Widok diagramu**.</span><span class="sxs-lookup"><span data-stu-id="65b54-118">Click the **Model** menu > **Model View** > **Diagram View**.</span></span>  

    <span data-ttu-id="65b54-119">Projektant modeli zostanie wyświetlony w widoku diagramu, który w postaci graficznej przedstawia wszystkie zaimportowane tabele oraz łączące je linie.</span><span class="sxs-lookup"><span data-stu-id="65b54-119">The model designer now appears in Diagram View, a graphical format displaying all the tables you imported with lines between them.</span></span> <span data-ttu-id="65b54-120">Linie między tabelami wskazują relacje, które zostały automatycznie utworzone po zaimportowaniu danych.</span><span class="sxs-lookup"><span data-stu-id="65b54-120">The lines between tables indicate the relationships that were automatically created when you imported the data.</span></span>
    
    ![aas-lesson4-diagram](../tutorials/media/aas-lesson4-diagram.png)
  
    <span data-ttu-id="65b54-122">Dołącz jak najwięcej tabel, używając formantów minimapy w prawym dolnym rogu projektanta modeli.</span><span class="sxs-lookup"><span data-stu-id="65b54-122">Include as many of the tables as possible by using minimap controls in the lower-right corner of the model designer.</span></span> <span data-ttu-id="65b54-123">Można również kliknąć i przeciągnąć tabele do innych lokalizacji, zbliżając je do siebie lub umieszczając w określonej kolejności.</span><span class="sxs-lookup"><span data-stu-id="65b54-123">You can also click and drag tables to different locations, bringing tables closer together, or putting them in a particular order.</span></span> <span data-ttu-id="65b54-124">Przenoszenie tabel nie ma wpływu na relacje istniejące już między tabelami.</span><span class="sxs-lookup"><span data-stu-id="65b54-124">Moving tables does not affect the relationships already between the tables.</span></span> <span data-ttu-id="65b54-125">Jeśli chcesz wyświetlić wszystkie kolumny w określonej tabeli, kliknij i przeciągnij krawędź tabeli, aby powiększyć ją lub zmniejszyć.</span><span class="sxs-lookup"><span data-stu-id="65b54-125">To view all the columns in a particular table, click and drag on a table edge to expand or make it smaller.</span></span>  
  
2.  <span data-ttu-id="65b54-126">Kliknij ciągłą linię między tabelami **DimCustomer** a **DimGeography**.</span><span class="sxs-lookup"><span data-stu-id="65b54-126">Click the solid line between the **DimCustomer** table and the **DimGeography** table.</span></span> <span data-ttu-id="65b54-127">Linia ciągła między tymi dwiema tabelami pokazuje, że relacja jest aktywna, co oznacza, że jest używana domyślnie podczas obliczania formuł języka DAX.</span><span class="sxs-lookup"><span data-stu-id="65b54-127">The solid line between these two tables shows this relationship is active, that is, it is used by default when calculating DAX formulas.</span></span>  
  
    <span data-ttu-id="65b54-128">Należy zauważyć, że w polu pojawiła się zarówno kolumna **GeographyKey** w tabeli **DimCustomer**, jak i kolumna **GeographyKey** w tabeli **DimGeography**.</span><span class="sxs-lookup"><span data-stu-id="65b54-128">Notice the **GeographyKey** column in the **DimCustomer** table and the **GeographyKey** column in the **DimGeography** table now both each appear within a box.</span></span> <span data-ttu-id="65b54-129">Te kolumny są używane w relacji.</span><span class="sxs-lookup"><span data-stu-id="65b54-129">These columns are used in the relationship.</span></span> <span data-ttu-id="65b54-130">Właściwości relacji również pojawiają się w oknie **Właściwości**.</span><span class="sxs-lookup"><span data-stu-id="65b54-130">The relationship’s properties now also appear in the **Properties** window.</span></span>  
  
    > [!TIP]  
    > <span data-ttu-id="65b54-131">Oprócz projektanta modeli w widoku diagramu do wyświetlania relacji między wszystkimi tabelami w formacie tabeli można również użyć okna dialogowego Zarządzanie relacjami.</span><span class="sxs-lookup"><span data-stu-id="65b54-131">In addition to using the model designer in diagram view, you can also use the Manage Relationships dialog box to show the relationships between all tables in a table format.</span></span> <span data-ttu-id="65b54-132">W Eksploratorze modeli tabelarycznych kliknij prawym przyciskiem myszy pozycje **Relacje** > **Zarządzanie relacjami**.</span><span class="sxs-lookup"><span data-stu-id="65b54-132">In Tabular Model Explorer, right-click **Relationships** > **Manage Relationships**.</span></span>
  
3.  <span data-ttu-id="65b54-133">Sprawdź, czy podczas importowania wszystkich tabel z bazy danych AdventureWorksDW zostały utworzone następujące relacje:</span><span class="sxs-lookup"><span data-stu-id="65b54-133">Verify the following relationships were created when each of the tables were imported from the AdventureWorksDW database:</span></span>  
  
    |<span data-ttu-id="65b54-134">Aktywne</span><span class="sxs-lookup"><span data-stu-id="65b54-134">Active</span></span>|<span data-ttu-id="65b54-135">Tabela</span><span class="sxs-lookup"><span data-stu-id="65b54-135">Table</span></span>|<span data-ttu-id="65b54-136">Pokrewna tabela odnośników</span><span class="sxs-lookup"><span data-stu-id="65b54-136">Related Lookup Table</span></span>|  
    |----------|---------|------------------------|  
    |<span data-ttu-id="65b54-137">Tak</span><span class="sxs-lookup"><span data-stu-id="65b54-137">Yes</span></span>|<span data-ttu-id="65b54-138">**DimCustomer [GeographyKey]**</span><span class="sxs-lookup"><span data-stu-id="65b54-138">**DimCustomer [GeographyKey]**</span></span>|<span data-ttu-id="65b54-139">**DimGeography [GeographyKey]**</span><span class="sxs-lookup"><span data-stu-id="65b54-139">**DimGeography [GeographyKey]**</span></span>|  
    |<span data-ttu-id="65b54-140">Tak</span><span class="sxs-lookup"><span data-stu-id="65b54-140">Yes</span></span>|<span data-ttu-id="65b54-141">**DimProduct [ProductSubcategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="65b54-141">**DimProduct [ProductSubcategoryKey]**</span></span>|<span data-ttu-id="65b54-142">**DimProductSubcategory [ProductSubcategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="65b54-142">**DimProductSubcategory [ProductSubcategoryKey]**</span></span>|  
    |<span data-ttu-id="65b54-143">Tak</span><span class="sxs-lookup"><span data-stu-id="65b54-143">Yes</span></span>|<span data-ttu-id="65b54-144">**DimProductSubcategory [ProductCategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="65b54-144">**DimProductSubcategory [ProductCategoryKey]**</span></span>|<span data-ttu-id="65b54-145">**DimProductCategory [ProductCategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="65b54-145">**DimProductCategory [ProductCategoryKey]**</span></span>|  
    |<span data-ttu-id="65b54-146">Tak</span><span class="sxs-lookup"><span data-stu-id="65b54-146">Yes</span></span>|<span data-ttu-id="65b54-147">**FactInternetSales [CustomerKey]**</span><span class="sxs-lookup"><span data-stu-id="65b54-147">**FactInternetSales [CustomerKey]**</span></span>|<span data-ttu-id="65b54-148">**DimCustomer [CustomerKey]**</span><span class="sxs-lookup"><span data-stu-id="65b54-148">**DimCustomer [CustomerKey]**</span></span>|  
    |<span data-ttu-id="65b54-149">Tak</span><span class="sxs-lookup"><span data-stu-id="65b54-149">Yes</span></span>|<span data-ttu-id="65b54-150">**FactInternetSales [ProductKey]**</span><span class="sxs-lookup"><span data-stu-id="65b54-150">**FactInternetSales [ProductKey]**</span></span>|<span data-ttu-id="65b54-151">**DimProduct [ProductKey]**</span><span class="sxs-lookup"><span data-stu-id="65b54-151">**DimProduct [ProductKey]**</span></span>|  
  
    <span data-ttu-id="65b54-152">Jeśli brakuje dowolnej z tych relacji, sprawdź, czy model zawiera następujące tabele: DimCustomer, DimDate, DimGeography, DimProduct, DimProductCategory, DimProductSubcategory i FactInternetSales.</span><span class="sxs-lookup"><span data-stu-id="65b54-152">If any of the relationships are missing, verify that your model includes the following tables: DimCustomer, DimDate, DimGeography, DimProduct, DimProductCategory, DimProductSubcategory, and FactInternetSales.</span></span> <span data-ttu-id="65b54-153">W przypadku tabel pochodzących z tego samego połączenia źródła danych, które zostały zaimportowane w różnym czasie, relacje między takimi tabelami nie są tworzone i należy utworzyć je ręcznie.</span><span class="sxs-lookup"><span data-stu-id="65b54-153">If tables from the same data source connection are imported at separate times, any relationships between those tables are not be created and must be created manually.</span></span>  

### <a name="take-a-closer-look"></a><span data-ttu-id="65b54-154">Przyjrzyjmy się temu bliżej</span><span class="sxs-lookup"><span data-stu-id="65b54-154">Take a closer look</span></span>
<span data-ttu-id="65b54-155">W widoku diagramu zwróć uwagę na strzałkę, gwiazdkę i liczbę w wierszach, które wskazują relacje między tabelami.</span><span class="sxs-lookup"><span data-stu-id="65b54-155">In Diagram View, notice an arrow, an asterisk, and a number on the lines that show the relationship between tables.</span></span>

![aas-lesson4-line](../tutorials/media/aas-lesson4-line.png)

<span data-ttu-id="65b54-157">Strzałka wskazuje kierunek filtrowania.</span><span class="sxs-lookup"><span data-stu-id="65b54-157">The arrow shows the filter direction.</span></span> <span data-ttu-id="65b54-158">Gwiazdka wskazuje, że dana tabela znajduje się po stronie wielu w kardynalności relacji, a jedynka wskazuje, że dana tabela jest po stronie jednego w kardynalności relacji.</span><span class="sxs-lookup"><span data-stu-id="65b54-158">The asterisk shows this table is the many side in the relationship's cardinality, and the one shows this table is the one side of the relationship.</span></span> <span data-ttu-id="65b54-159">W przypadku konieczności edytowania relacji, na przykład w celu zmiany kierunku filtrowania relacji lub jej kardynalności, kliknij dwukrotnie wiersz relacji, aby otworzyć okno dialogowe Edytowanie relacji.</span><span class="sxs-lookup"><span data-stu-id="65b54-159">If you need to edit a relationship; for example, change the relationship's filter direction or cardinality, double-click the relationship line to open the Edit Relationship dialog.</span></span>

![aas-lesson4-edit](../tutorials/media/aas-lesson4-edit.png)

<span data-ttu-id="65b54-161">Te funkcje są przeznaczone do zaawansowanego modelowania danych i wykraczają poza zakres tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="65b54-161">These features are meant for advanced data modeling and are outside the scope of this tutorial.</span></span> <span data-ttu-id="65b54-162">Aby dowiedzieć się więcej, zobacz [Dwukierunkowe filtry krzyżowe dla modeli tabelarycznych w usługach Analysis Services](https://docs.microsoft.com/sql/analysis-services/tabular-models/bi-directional-cross-filters-tabular-models-analysis-services).</span><span class="sxs-lookup"><span data-stu-id="65b54-162">To learn more, see [Bi-directional cross filters for tabular models in Analysis Services](https://docs.microsoft.com/sql/analysis-services/tabular-models/bi-directional-cross-filters-tabular-models-analysis-services).</span></span>

<span data-ttu-id="65b54-163">W niektórych przypadkach może być konieczne utworzenie dodatkowych relacji między tabelami w modelu służącym do obsługi określonej logiki biznesowej.</span><span class="sxs-lookup"><span data-stu-id="65b54-163">In some cases, you may need to create additional relationships between tables in your model to support certain business logic.</span></span> <span data-ttu-id="65b54-164">W tym samouczku zostaną utworzone trzy dodatkowe relacje między tabelami FactInternetSales a DimDate.</span><span class="sxs-lookup"><span data-stu-id="65b54-164">For this tutorial, you need to create three additional relationships between the FactInternetSales table and the DimDate table.</span></span>  
  
#### <a name="to-add-new-relationships-between-tables"></a><span data-ttu-id="65b54-165">Aby dodać nowe relacje między tabelami</span><span class="sxs-lookup"><span data-stu-id="65b54-165">To add new relationships between tables</span></span>  
  
1.  <span data-ttu-id="65b54-166">W Projektancie modeli w tabeli **FactInternetSales** kliknij i przytrzymaj kolumnę **OrderDate**, a następnie przeciągnij kursor do kolumny **Date** w tabeli **DimDate**, po czym zwolnij kursor.</span><span class="sxs-lookup"><span data-stu-id="65b54-166">In the model designer, in the **FactInternetSales** table, click, and hold on the **OrderDate** column, then drag the cursor to the **Date** column in the **DimDate** table, and then release.</span></span>  

    <span data-ttu-id="65b54-167">Zostanie wyświetlona linia ciągła wskazująca utworzenie aktywnej relacji między kolumną **OrderDate** w tabeli **Internet Sales** tabeli a kolumną **Date** w tabeli **Date**.</span><span class="sxs-lookup"><span data-stu-id="65b54-167">A solid line appears showing you have created an active relationship between the **OrderDate** column in the **Internet Sales** table, and the **Date** column in the **Date** table.</span></span> 
  
      ![aas-lesson4-new](../tutorials/media/aas-lesson4-new.png) 
  
    > [!NOTE]  
    > <span data-ttu-id="65b54-169">Podczas tworzenia relacji jest automatycznie wybierana kardynalność i kierunek filtrowania pomiędzy tabelą podstawową a pokrewną tabelą odnośników.</span><span class="sxs-lookup"><span data-stu-id="65b54-169">When creating relationships, the cardinality and filter direction between the primary table and the related lookup table is automatically selected.</span></span>  
  
2.  <span data-ttu-id="65b54-170">W tabeli **FactInternetSales** kliknij i przytrzymaj kolumnę **DueDate**, a następnie przeciągnij kursor do kolumny **Date** w tabeli **DimDate**, po czym zwolnij kursor.</span><span class="sxs-lookup"><span data-stu-id="65b54-170">In the **FactInternetSales** table, click and hold on the **DueDate** column, then drag the cursor to the **Date** column in the **DimDate** table, and then release.</span></span>  
  
    <span data-ttu-id="65b54-171">Zostanie wyświetlona linia przerywana wskazująca utworzenie nieaktywnej relacji między kolumną **DueDate** w tabeli **FactInternet Sales** a kolumną **Date** w tabeli **DimDate**.</span><span class="sxs-lookup"><span data-stu-id="65b54-171">A dotted line appears showing you have created an inactive relationship between the **DueDate** column in the **FactInternetSales** table, and the **Date** column in the **DimDate** table.</span></span> <span data-ttu-id="65b54-172">Między tabelami może istnieć wiele relacji, ale tylko jedna z nich może być aktywna w danym momencie.</span><span class="sxs-lookup"><span data-stu-id="65b54-172">You can have multiple relationships between tables, but only one relationship can be active at a time.</span></span> <span data-ttu-id="65b54-173">Nieaktywne relacje można uaktywnić, wykonując specjalne agregacje za pomocą niestandardowych wyrażeń języka DAX.</span><span class="sxs-lookup"><span data-stu-id="65b54-173">Inactive relationships can be made active to perform special aggregations in custom DAX expressions.</span></span>  
  
3.  <span data-ttu-id="65b54-174">Na koniec utwórz jeszcze jedną relację.</span><span class="sxs-lookup"><span data-stu-id="65b54-174">Finally, create one more relationship.</span></span> <span data-ttu-id="65b54-175">W tabeli **FactInternetSales** kliknij i przytrzymaj kolumnę **ShipDate**, a następnie przeciągnij kursor do kolumny **Date** w tabeli **DimDate**, po czym zwolnij kursor.</span><span class="sxs-lookup"><span data-stu-id="65b54-175">In the **FactInternetSales** table, click and hold on the **ShipDate** column, then drag the cursor to the **Date** column in the **DimDate** table, and then release.</span></span>  
    
     ![aas-lesson4-newinactive](../tutorials/media/aas-lesson4-newinactive.png)
  
## <a name="whats-next"></a><span data-ttu-id="65b54-177">Co dalej?</span><span class="sxs-lookup"><span data-stu-id="65b54-177">What's next?</span></span>
<span data-ttu-id="65b54-178">[Lekcja 5. Tworzenie kolumn obliczeniowych](../tutorials/aas-lesson-5-create-calculated-columns.md).</span><span class="sxs-lookup"><span data-stu-id="65b54-178">[Lesson 5: Create calculated columns](../tutorials/aas-lesson-5-create-calculated-columns.md).</span></span>
  
  
  
