---
title: "Usługa Application Insights dla usług Azure Cloud Services | Microsoft Docs"
description: "Skutecznie monitoruj role sieci Web i procesu roboczego za pomocą usługi Application Insights"
services: application-insights
documentationcenter: 
keywords: WAD2AI, diagnostyka platformy Azure
author: CFreemanwa
manager: carmonm
editor: alancameronwills
ms.assetid: 5c7a5b34-329e-42b7-9330-9dcbb9ff1f88
ms.service: application-insights
ms.devlang: na
ms.tgt_pltfrm: ibiza
ms.topic: get-started-article
ms.workload: tbd
ms.date: 05/05/2017
ms.author: bwren
ms.openlocfilehash: c12b225aa351d0c272243469550791a6840091e0
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/18/2017
---
# <a name="application-insights-for-azure-cloud-services"></a><span data-ttu-id="e982f-104">Usługa Application Insights dla usług Azure Cloud Services</span><span class="sxs-lookup"><span data-stu-id="e982f-104">Application Insights for Azure Cloud Services</span></span>
<span data-ttu-id="e982f-105">[Aplikacje usługi Microsoft Azure Cloud](https://azure.microsoft.com/services/cloud-services/) mogą być monitorowane przez [usługi Application Insights][start] w celu sprawdzania ich dostępności, wydajności, błędów i użycia. W tym celu dane z zestawów SDK usługi Application Insights są łączone z danymi z usługi [Azure Diagnotics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) pochodzącymi z usług w chmurze.</span><span class="sxs-lookup"><span data-stu-id="e982f-105">[Microsoft Azure Cloud service apps](https://azure.microsoft.com/services/cloud-services/) can be monitored by [Application Insights][start] for availability, performance, failures, and usage by combining data from Application Insights' SDKs with [Azure Diagnotics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) data from your Cloud Services.</span></span> <span data-ttu-id="e982f-106">Dzięki uzyskiwanym opiniom dotyczącym wydajności i skuteczności aplikacji możesz dokonać opartych na informacjach wyborów dotyczących kierunku projektu w każdym cyklu życia.</span><span class="sxs-lookup"><span data-stu-id="e982f-106">With the feedback you get about the performance and effectiveness of your app in the wild, you can make informed choices about the direction of the design in each development lifecycle.</span></span>

![Przykład](./media/app-insights-cloudservices/sample.png)

## <a name="before-you-start"></a><span data-ttu-id="e982f-108">Przed rozpoczęciem</span><span class="sxs-lookup"><span data-stu-id="e982f-108">Before you start</span></span>
<span data-ttu-id="e982f-109">Będą potrzebne:</span><span class="sxs-lookup"><span data-stu-id="e982f-109">You'll need:</span></span>

* <span data-ttu-id="e982f-110">Subskrypcja platformy [Microsoft Azure](http://azure.com).</span><span class="sxs-lookup"><span data-stu-id="e982f-110">A subscription with [Microsoft Azure](http://azure.com).</span></span> <span data-ttu-id="e982f-111">Zaloguj się przy użyciu konta Microsoft, które możesz mieć dla systemu Windows, usługi XBox Live lub innych usług w chmurze firmy Microsoft.</span><span class="sxs-lookup"><span data-stu-id="e982f-111">Sign in with a Microsoft account, which you might have for Windows, XBox Live, or other Microsoft cloud services.</span></span> 
* <span data-ttu-id="e982f-112">Narzędzia Microsoft Azure Tools 2.9 lub nowsze.</span><span class="sxs-lookup"><span data-stu-id="e982f-112">Microsoft Azure tools 2.9 or later</span></span>
* <span data-ttu-id="e982f-113">Narzędzia Developer Analytics Tools 7.10 lub nowsze.</span><span class="sxs-lookup"><span data-stu-id="e982f-113">Developer Analytics Tools 7.10 or later</span></span>

## <a name="quick-start"></a><span data-ttu-id="e982f-114">Szybki start</span><span class="sxs-lookup"><span data-stu-id="e982f-114">Quick start</span></span>
<span data-ttu-id="e982f-115">Najszybszym i najłatwiejszym sposobem monitorowania usługi w chmurze za pomocą usługi Application Insights jest wybranie tej opcji podczas publikowania usługi na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="e982f-115">The quickest and easiest way to monitor your cloud service with Application Insights is to choose that option when you publish your service to Azure.</span></span>

![Przykład](./media/app-insights-cloudservices/azure-cloud-application-insights.png)

<span data-ttu-id="e982f-117">Ta opcja umożliwia instrumentację aplikacji w czasie wykonywania dzięki udostępnieniu całej telemetrii potrzebnej do monitorowania żądań, wyjątków i zależności w roli sieci Web oraz liczników wydajności z ról procesu roboczego.</span><span class="sxs-lookup"><span data-stu-id="e982f-117">This option instruments your app at run time, giving you all the telemetry you need to monitor requests, exceptions, and dependencies in your web role, as well as performance counters from your worker roles.</span></span> <span data-ttu-id="e982f-118">Wszelkie ślady diagnostyczne wygenerowane przez aplikację również są wysyłane do usługi Application Insights.</span><span class="sxs-lookup"><span data-stu-id="e982f-118">Any diagnostic traces generated by your app are also sent to Application Insights.</span></span>

<span data-ttu-id="e982f-119">Jeśli to wszystko, czego potrzebujesz, to koniec!</span><span class="sxs-lookup"><span data-stu-id="e982f-119">If that's all you need, you're done!</span></span> <span data-ttu-id="e982f-120">Następne kroki to [wyświetlanie metryk z poziomu aplikacji](app-insights-metrics-explorer.md), [wykonywanie zapytań do danych za pomocą funkcji analizy](app-insights-analytics.md) i, być może, konfigurowanie [pulpitu nawigacyjnego](app-insights-dashboards.md).</span><span class="sxs-lookup"><span data-stu-id="e982f-120">Next steps are [viewing metrics from your app](app-insights-metrics-explorer.md), [querying your data with Analytics](app-insights-analytics.md), and maybe setting up a [dashboard](app-insights-dashboards.md).</span></span> <span data-ttu-id="e982f-121">Możesz chcieć skonfigurować [testy dostępności](app-insights-monitor-web-app-availability.md) i [dodać kod do stron sieci Web](app-insights-javascript.md) w celu monitorowania wydajności w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="e982f-121">You might want to set up [availability tests](app-insights-monitor-web-app-availability.md) and [add code to your web pages](app-insights-javascript.md) to monitor performance in the browser.</span></span>

<span data-ttu-id="e982f-122">Ale możesz również korzystać z dodatkowych opcji:</span><span class="sxs-lookup"><span data-stu-id="e982f-122">But you can also get more options:</span></span>

* <span data-ttu-id="e982f-123">Wysyłanie danych z różnych składników i kompilowanie konfiguracji w celu oddzielenia zasobów.</span><span class="sxs-lookup"><span data-stu-id="e982f-123">Send data from different components and build configurations to separate resources.</span></span>
* <span data-ttu-id="e982f-124">Dodawanie niestandardowej telemetrii z aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e982f-124">Add custom telemetry from your app.</span></span>

<span data-ttu-id="e982f-125">Jeśli te opcje Cię zainteresowały, czytaj dalej.</span><span class="sxs-lookup"><span data-stu-id="e982f-125">If those options are of interest to you, read on.</span></span>

## <a name="sample-application-instrumented-with-application-insights"></a><span data-ttu-id="e982f-126">Przykładowa aplikacja z instrumentacją zapewnianą przez usługę Application Insights</span><span class="sxs-lookup"><span data-stu-id="e982f-126">Sample Application instrumented with Application Insights</span></span>
<span data-ttu-id="e982f-127">Przyjrzyj się tej [przykładowej aplikacji](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService), w której usługa Application Insights została dodana do usługi w chmurze z dwoma rolami procesów roboczych hostowanych na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="e982f-127">Take a look at this [sample application](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) in which Application Insights is added to a cloud service with two worker roles hosted in Azure.</span></span> 

<span data-ttu-id="e982f-128">Poniżej znajdują się informacje, jak dostosować własny projekt usługi w chmurze w taki sam sposób.</span><span class="sxs-lookup"><span data-stu-id="e982f-128">What follows tells you how to adapt your own cloud service project in the same way.</span></span>

## <a name="plan-resources-and-resource-groups"></a><span data-ttu-id="e982f-129">Planowanie zasobów i grup zasobów</span><span class="sxs-lookup"><span data-stu-id="e982f-129">Plan resources and resource groups</span></span>
<span data-ttu-id="e982f-130">Dane telemetryczne z aplikacji są przechowywane, analizowane i wyświetlane w zasobie platformy Azure typu Application Insights.</span><span class="sxs-lookup"><span data-stu-id="e982f-130">The telemetry from your app is stored, analyzed and displayed in an Azure resource of type Application Insights.</span></span> 

<span data-ttu-id="e982f-131">Każdy zasób należy do grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="e982f-131">Each resource belongs to a resource group.</span></span> <span data-ttu-id="e982f-132">Grupy zasobów służą do zarządzania kosztami, do przyznawania dostępu członkom zespołu i wdrażania aktualizacji w jednej skoordynowanej transakcji.</span><span class="sxs-lookup"><span data-stu-id="e982f-132">Resource groups are used for managing costs, for granting access to team members, and to deploy updates in a single coordinated transaction.</span></span> <span data-ttu-id="e982f-133">Na przykład możesz [napisać skrypt w celu wdrożenia](../azure-resource-manager/resource-group-template-deploy.md) usługi Azure Cloud Service i jej zasobów monitorowania usługi Application Insights łącznie w jednej operacji.</span><span class="sxs-lookup"><span data-stu-id="e982f-133">For example, you could [write a script to deploy](../azure-resource-manager/resource-group-template-deploy.md) an Azure Cloud Service and its Application Insights monitoring resources all in one operation.</span></span>

### <a name="resources-for-components"></a><span data-ttu-id="e982f-134">Zasoby dla składników</span><span class="sxs-lookup"><span data-stu-id="e982f-134">Resources for components</span></span>
<span data-ttu-id="e982f-135">Zalecany schemat obejmuje utworzenie osobnego zasobu dla każdego składnika aplikacji — czyli każdej roli sieci Web i roli procesu roboczego.</span><span class="sxs-lookup"><span data-stu-id="e982f-135">The recommended scheme is to create a separate resource for each component of your application - that is, each web role and worker role.</span></span> <span data-ttu-id="e982f-136">Możesz analizować każdy składnik oddzielnie, ale możesz też utworzyć [pulpit nawigacyjny](app-insights-dashboards.md), który zgromadzi kluczowe wykresy ze wszystkich składników, dzięki czemu można będzie je porównać i monitorować razem.</span><span class="sxs-lookup"><span data-stu-id="e982f-136">You can analyze each component separately, but can create a [dashboard](app-insights-dashboards.md) that brings together the key charts from all the components, so that you can compare and monitor them together.</span></span> 

<span data-ttu-id="e982f-137">Alternatywny schemat obejmuje wysłanie danych telemetrycznych z więcej niż jednej roli do tego samego zasobu, ale [dodanie właściwości wymiaru do każdego elementu telemetrii](app-insights-api-filtering-sampling.md#add-properties-itelemetryinitializer), która określa jego rolę źródłową.</span><span class="sxs-lookup"><span data-stu-id="e982f-137">An alternative scheme is to send the telemetry from more than one role to the same resource, but [add a dimension property to each telemetry item](app-insights-api-filtering-sampling.md#add-properties-itelemetryinitializer) that identifies its source role.</span></span> <span data-ttu-id="e982f-138">W tym schemacie wykresy metryk, takich jak wyjątki, zwykle przedstawiają agregację liczby elementów z różnych ról, ale w razie potrzeby możesz posegmentować wykres zgodnie z identyfikatorem roli.</span><span class="sxs-lookup"><span data-stu-id="e982f-138">In this scheme, metric charts such as exceptions normally show an aggregation of the counts from the different roles, but you can segment the chart by the role identifier when required.</span></span> <span data-ttu-id="e982f-139">Wyszukiwanie można również filtrować według tego samego wymiaru.</span><span class="sxs-lookup"><span data-stu-id="e982f-139">Searches can also be filtered by the same dimension.</span></span> <span data-ttu-id="e982f-140">Ta alternatywa nieco ułatwia jednoczesne wyświetlanie wszystkich elementów, ale może też prowadzić do wystąpienia pewnych niejasności między rolami.</span><span class="sxs-lookup"><span data-stu-id="e982f-140">This alternative makes it a bit easier to view everything at the same time, but could also lead to some confusion between the roles.</span></span>

<span data-ttu-id="e982f-141">Telemetria przeglądarki zwykle jest zawarta w tym samym zasobie, co jej rola sieci Web po stronie serwera.</span><span class="sxs-lookup"><span data-stu-id="e982f-141">Browser telemetry is usually included in the same resource as its server-side web role.</span></span>

<span data-ttu-id="e982f-142">Umieść zasoby usługi Application Insights dla różnych składników w jednej grupie zasobów.</span><span class="sxs-lookup"><span data-stu-id="e982f-142">Put the Application Insights resources for the different components in one resource group.</span></span> <span data-ttu-id="e982f-143">Ułatwia to wspólne zarządzanie nimi.</span><span class="sxs-lookup"><span data-stu-id="e982f-143">This makes it easy to manage them together.</span></span> 

### <a name="separating-development-test-and-production"></a><span data-ttu-id="e982f-144">Oddzielanie tworzenia, testowania i produkcji</span><span class="sxs-lookup"><span data-stu-id="e982f-144">Separating development, test, and production</span></span>
<span data-ttu-id="e982f-145">Jeśli opracowujesz zdarzenia niestandardowe dla następnej funkcji, gdy poprzednia wersja działa, wyślij telemetrię tworzenia do oddzielnych zasobów usługi Application Insights.</span><span class="sxs-lookup"><span data-stu-id="e982f-145">If you are developing custom events for your next feature while the previous version is live, you want to send the development telemetry to a separate Application Insights resource.</span></span> <span data-ttu-id="e982f-146">W przeciwnym razie będzie Ci trudno znaleźć telemetrie testów wśród całego ruchu z działającej witryny.</span><span class="sxs-lookup"><span data-stu-id="e982f-146">Otherwise it will be hard to find your test telemetry among all the traffic from the live site.</span></span>

<span data-ttu-id="e982f-147">Aby uniknąć tej sytuacji, należy utworzyć osobne zasoby dla każdej konfiguracji kompilacji lub „oznakowania” (tworzenie, testy, produkcja,...) systemu.</span><span class="sxs-lookup"><span data-stu-id="e982f-147">To avoid this situation, create separate resources for each build configuration or 'stamp' (development, test, production, ...) of your system.</span></span> <span data-ttu-id="e982f-148">Umieść zasoby dla każdej konfiguracji kompilacji w oddzielnej grupie zasobów.</span><span class="sxs-lookup"><span data-stu-id="e982f-148">Put the resources for each build configuration in a separate resource group.</span></span> 

<span data-ttu-id="e982f-149">Aby wysłać dane telemetryczne do odpowiednich zasobów, możesz skonfigurować zestaw SDK usługi Application Insights tak, aby pobierał inny klucz instrumentacji w zależności od konfiguracji kompilacji.</span><span class="sxs-lookup"><span data-stu-id="e982f-149">To send the telemetry to the appropriate resources, you can set up the Application Insights SDK so that it picks up a different instrumentation key depending on the build configuration.</span></span> 

## <a name="create-an-application-insights-resource-for-each-role"></a><span data-ttu-id="e982f-150">Tworzenie zasobu usługi Application Insights dla każdej roli</span><span class="sxs-lookup"><span data-stu-id="e982f-150">Create an Application Insights resource for each role</span></span>
<span data-ttu-id="e982f-151">Jeśli postanowisz utworzyć osobny zasób dla każdej roli — oraz, być może, oddzielny zestaw dla każdej konfiguracji kompilacji — wówczas najłatwiej utworzyć je wszystkie w portalu usługi Application Insights.</span><span class="sxs-lookup"><span data-stu-id="e982f-151">If you've decided to create a separate resource for each role - and perhaps a separate set for each build configuration - then it's easiest to create them all in the Application Insights portal.</span></span> <span data-ttu-id="e982f-152">(Jeśli tworzysz wiele zasobów, możesz [zautomatyzować ten proces](app-insights-powershell.md)).</span><span class="sxs-lookup"><span data-stu-id="e982f-152">(If you create resources a lot, you can [automate the process](app-insights-powershell.md).</span></span>

1. <span data-ttu-id="e982f-153">W witrynie [Azure Portal][portal] utwórz nowy zasób usługi Application Insights.</span><span class="sxs-lookup"><span data-stu-id="e982f-153">In the [Azure portal][portal], create a new Application Insights resource.</span></span> <span data-ttu-id="e982f-154">Jako typ aplikacji wybierz ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e982f-154">For application type, choose ASP.NET app.</span></span> 

    ![Kliknij kolejno polecenia Nowy, Application Insights](./media/app-insights-cloudservices/01-new.png)
2. <span data-ttu-id="e982f-156">Należy pamiętać, że każdy zasób jest identyfikowany przez klucz instrumentacji.</span><span class="sxs-lookup"><span data-stu-id="e982f-156">Note that each resource is identified by an Instrumentation Key.</span></span> <span data-ttu-id="e982f-157">Może on być potrzebny później, jeśli chcesz ręcznie skonfigurować zestaw SDK lub sprawdzić jego konfigurację.</span><span class="sxs-lookup"><span data-stu-id="e982f-157">You might need this later if you want to manually configure or verify the configuration of the SDK.</span></span>

    ![Kliknij opcję Właściwości, zaznacz klucz i naciśnij klawisze Ctrl+C](./media/app-insights-cloudservices/02-props.png) 

## <a name="set-up-azure-diagnostics-for-each-role"></a><span data-ttu-id="e982f-159">Konfigurowanie diagnostyki platformy Azure dla każdej roli</span><span class="sxs-lookup"><span data-stu-id="e982f-159">Set up Azure Diagnostics for each role</span></span>
<span data-ttu-id="e982f-160">Ustaw tę opcję, aby monitorować aplikację za pomocą usługi Application Insights.</span><span class="sxs-lookup"><span data-stu-id="e982f-160">Set this option to monitor your app with Application Insights.</span></span> <span data-ttu-id="e982f-161">W przypadku ról sieci Web zapewnia to monitorowanie wydajności, alerty i diagnostykę oraz analizę użycia.</span><span class="sxs-lookup"><span data-stu-id="e982f-161">For web roles, this provides performance monitoring, alerts, and diagnostics, as well as usage analysis.</span></span> <span data-ttu-id="e982f-162">W przypadku innych ról możesz wyszukiwać i monitorować diagnostykę platformy Azure, taką jak ponowne uruchomienie, liczniki wydajności i wywołania interfejsu System.Diagnostics.Trace.</span><span class="sxs-lookup"><span data-stu-id="e982f-162">For other roles, you can search and monitor Azure diagnostics such as restart, performance counters, and calls to System.Diagnostics.Trace.</span></span> 

1. <span data-ttu-id="e982f-163">W Eksploratorze rozwiązań programu Visual Studio w obszarze &lt;YourCloudService&gt;, Role, otwórz właściwości każdej roli.</span><span class="sxs-lookup"><span data-stu-id="e982f-163">In Visual Studio Solution Explorer, under &lt;YourCloudService&gt;, Roles, open the properties of each role.</span></span>
2. <span data-ttu-id="e982f-164">W pozycji **Konfiguracja** ustaw pozycję **Wysyłaj dane diagnostyczne do usługi Application Insights** i wybierz odpowiedni, utworzony wcześniej zasób usługi Application Insights.</span><span class="sxs-lookup"><span data-stu-id="e982f-164">In **Configuration**, set **Send diagnostics data to Application Insights** and select the appropriate Application Insights resource that you created earlier.</span></span>

<span data-ttu-id="e982f-165">Jeśli zamierzasz używać osobnego zasobu usługi Application Insights dla każdej konfiguracji kompilacji, najpierw wybierz konfigurację.</span><span class="sxs-lookup"><span data-stu-id="e982f-165">If you have decided to use a separate Application Insights resource for each build configuration, select the configuration first.</span></span>

![We właściwościach poszczególnych ról platformy Azure skonfiguruj usługę Application Insights](./media/app-insights-cloudservices/configure-azure-diagnostics.png)

<span data-ttu-id="e982f-167">To powoduje wstawianie kluczy instrumentacji usługi Application Insights do plików o nazwie `ServiceConfiguration.*.cscfg`.</span><span class="sxs-lookup"><span data-stu-id="e982f-167">This has the effect of inserting your Application Insights instrumentation keys into the files named `ServiceConfiguration.*.cscfg`.</span></span> <span data-ttu-id="e982f-168">([Przykładowy kod](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/AzureEmailService/ServiceConfiguration.Cloud.cscfg)).</span><span class="sxs-lookup"><span data-stu-id="e982f-168">([Sample code](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/AzureEmailService/ServiceConfiguration.Cloud.cscfg)).</span></span>

<span data-ttu-id="e982f-169">Jeśli chcesz zróżnicować poziom informacji diagnostycznych wysyłanych do usługi Application Insights, możesz to zrobić, [bezpośrednio edytując pliki `.cscfg`](app-insights-azure-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="e982f-169">If you want to vary the level of diagnostic information sent to Application Insights, you can do so [by editing the `.cscfg` files directly](app-insights-azure-diagnostics.md).</span></span>

## <span data-ttu-id="e982f-170"><a name="sdk"></a>Zainstaluj zestaw SDK w każdym projekcie</span><span class="sxs-lookup"><span data-stu-id="e982f-170"><a name="sdk"></a>Install the SDK in each project</span></span>
<span data-ttu-id="e982f-171">Ta opcja dodaje możliwość dodawania niestandardowych telemetrii biznesowych do każdej roli w celu dokładniejszego przeanalizowania sposobu używania i działania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e982f-171">This option adds the ability to add custom business telemetry to any role, for a closer analysis of how your application is used and performs.</span></span>

<span data-ttu-id="e982f-172">W programie Visual Studio skonfiguruj zestaw SDK usługi Application Insights dla każdego projektu aplikacji w chmurze.</span><span class="sxs-lookup"><span data-stu-id="e982f-172">In Visual Studio, configure the Application Insights SDK for each cloud app project.</span></span>

1. <span data-ttu-id="e982f-173">**Role sieci Web**: kliknij prawym przyciskiem myszy projekt i wybierz pozycję **Konfiguruj usługę Application Insights** lub **Dodaj > Telemetria usługi Application Insights**.</span><span class="sxs-lookup"><span data-stu-id="e982f-173">**Web roles**: Right-click the project and choose **Configure Application Insights** or **Add > Application Insights telemetry**.</span></span>

2. <span data-ttu-id="e982f-174">**Role procesów roboczych**:</span><span class="sxs-lookup"><span data-stu-id="e982f-174">**Worker roles**:</span></span> 
 * <span data-ttu-id="e982f-175">Kliknij projekt prawym przyciskiem myszy i wybierz pozycję **Zarządzaj pakietami NuGet**.</span><span class="sxs-lookup"><span data-stu-id="e982f-175">Right-click the project and select **Manage Nuget Packages**.</span></span>
 * <span data-ttu-id="e982f-176">Dodaj pozycję [Usługa Application Insights dla serwerów systemu Windows](https://www.nuget.org/packages/Microsoft.ApplicationInsights.WindowsServer/).</span><span class="sxs-lookup"><span data-stu-id="e982f-176">Add [Application Insights for Windows Servers](https://www.nuget.org/packages/Microsoft.ApplicationInsights.WindowsServer/).</span></span>

    ![Wyszukaj „Application Insights”](./media/app-insights-cloudservices/04-ai-nuget.png)

3. <span data-ttu-id="e982f-178">Skonfiguruj zestaw SDK do przesyłania danych do zasobu usługi Application Insights.</span><span class="sxs-lookup"><span data-stu-id="e982f-178">Configure the SDK to send data to the Application Insights resource.</span></span>

    <span data-ttu-id="e982f-179">W odpowiedniej funkcji uruchamiania ustaw klucz instrumentacji z ustawień konfiguracji w pliku cscfg:</span><span class="sxs-lookup"><span data-stu-id="e982f-179">In a suitable startup function, set the instrumentation key from the configuration setting in the .cscfg file:</span></span>
 
    ```C#
   
     TelemetryConfiguration.Active.InstrumentationKey = RoleEnvironment.GetConfigurationSettingValue("APPINSIGHTS_INSTRUMENTATIONKEY");
    ```
   
    <span data-ttu-id="e982f-180">Zrób to dla każdej roli w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e982f-180">Do this for each role in your application.</span></span> <span data-ttu-id="e982f-181">Zobacz przykłady:</span><span class="sxs-lookup"><span data-stu-id="e982f-181">See the examples:</span></span>
   
   * [<span data-ttu-id="e982f-182">Rola sieci Web</span><span class="sxs-lookup"><span data-stu-id="e982f-182">Web role</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Global.asax.cs#L27)
   * [<span data-ttu-id="e982f-183">Rola procesu roboczego</span><span class="sxs-lookup"><span data-stu-id="e982f-183">Worker role</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L232)
   * [<span data-ttu-id="e982f-184">W przypadku stron sieci Web</span><span class="sxs-lookup"><span data-stu-id="e982f-184">For web pages</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Views/Shared/_Layout.cshtml#L13) 
4. <span data-ttu-id="e982f-185">Ustaw plik ApplicationInsights.config tak, aby zawsze był kopiowany do katalogu wyjściowego.</span><span class="sxs-lookup"><span data-stu-id="e982f-185">Set the ApplicationInsights.config file to be copied always to the output directory.</span></span> 
   
    <span data-ttu-id="e982f-186">(W pliku config zostaną wyświetlone komunikaty z prośbą o umieszczenie tam klucza instrumentacji.</span><span class="sxs-lookup"><span data-stu-id="e982f-186">(In the .config file, you'll see messages asking you to place the instrumentation key there.</span></span> <span data-ttu-id="e982f-187">Jednak dla aplikacji w chmurze lepiej ustawić to z pliku cscfg.</span><span class="sxs-lookup"><span data-stu-id="e982f-187">However, for cloud applications it's better to set it from the .cscfg file.</span></span> <span data-ttu-id="e982f-188">Zapewni to, że rola jest prawidłowo identyfikowana w portalu).</span><span class="sxs-lookup"><span data-stu-id="e982f-188">This ensures that the role is correctly identified in the portal.)</span></span>

#### <a name="run-and-publish-the-app"></a><span data-ttu-id="e982f-189">Uruchom i opublikuj aplikację</span><span class="sxs-lookup"><span data-stu-id="e982f-189">Run and publish the app</span></span>
<span data-ttu-id="e982f-190">Uruchom aplikację, a następnie zaloguj się na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="e982f-190">Run your app, and sign into Azure.</span></span> <span data-ttu-id="e982f-191">Otwórz utworzone zasoby usługi Application Insights, a zobaczysz poszczególne punkty danych znajdujące się w obszarze [wyszukiwania](app-insights-diagnostic-search.md) i zagregowane dane w [Eksploratorze metryk](app-insights-metrics-explorer.md).</span><span class="sxs-lookup"><span data-stu-id="e982f-191">Open the Application Insights resources you created, and you'll see individual data points appearing in [Search](app-insights-diagnostic-search.md), and aggregated data in [Metric Explorer](app-insights-metrics-explorer.md).</span></span> 

<span data-ttu-id="e982f-192">Dodaj więcej funkcji telemetrii — zobacz sekcje poniżej — a następnie opublikuj aplikację, aby uzyskać rzeczywiste opinie o diagnostyce i użyciu.</span><span class="sxs-lookup"><span data-stu-id="e982f-192">Add more telemetry - see the sections below - and then publish your app to get live diagnostic and usage feedback.</span></span> 

#### <a name="no-data"></a><span data-ttu-id="e982f-193">Brak danych?</span><span class="sxs-lookup"><span data-stu-id="e982f-193">No data?</span></span>
* <span data-ttu-id="e982f-194">Otwórz kafelek [Wyszukaj][diagnostic], aby wyświetlić poszczególne zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="e982f-194">Open the [Search][diagnostic] tile, to see individual events.</span></span>
* <span data-ttu-id="e982f-195">Otwieraj różne strony w aplikacji, aby wygenerować dane telemetryczne.</span><span class="sxs-lookup"><span data-stu-id="e982f-195">Use the application, opening different pages so that it generates some telemetry.</span></span>
* <span data-ttu-id="e982f-196">Odczekaj kilka sekund, a następnie kliknij przycisk Odśwież.</span><span class="sxs-lookup"><span data-stu-id="e982f-196">Wait a few seconds and click Refresh.</span></span>
* <span data-ttu-id="e982f-197">Zobacz [Rozwiązywanie problemów][qna].</span><span class="sxs-lookup"><span data-stu-id="e982f-197">See [Troubleshooting][qna].</span></span>

## <a name="view-azure-diagnostic-events"></a><span data-ttu-id="e982f-198">Wyświetlanie zdarzeń diagnostycznych platformy Azure</span><span class="sxs-lookup"><span data-stu-id="e982f-198">View Azure Diagnostic events</span></span>
<span data-ttu-id="e982f-199">Informacje o usłudze [Azure Diagnostics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) dostępne w usłudze Application Insights:</span><span class="sxs-lookup"><span data-stu-id="e982f-199">Where to find the [Azure Diagnostics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) information in Application Insights:</span></span>

* <span data-ttu-id="e982f-200">Liczniki wydajności są wyświetlane jako metryki niestandardowe.</span><span class="sxs-lookup"><span data-stu-id="e982f-200">Performance counters are displayed as custom metrics.</span></span> 
* <span data-ttu-id="e982f-201">Dzienniki zdarzeń systemu Windows są wyświetlane jako ślady i zdarzenia niestandardowe.</span><span class="sxs-lookup"><span data-stu-id="e982f-201">Windows event logs are shown as traces and custom events.</span></span>
* <span data-ttu-id="e982f-202">Dzienniki aplikacji, dzienniki śledzenia zdarzeń systemu Windows i wszelkie dzienniki infrastruktury diagnostycznej są wyświetlane jako ślady.</span><span class="sxs-lookup"><span data-stu-id="e982f-202">Application logs, ETW logs, and any diagnostics infrastructure logs appear as traces.</span></span>

<span data-ttu-id="e982f-203">Aby wyświetlić liczniki wydajności i liczby zdarzeń, otwórz pozycję [Eksplorator metryk](app-insights-metrics-explorer.md) i dodaj nowy wykres:</span><span class="sxs-lookup"><span data-stu-id="e982f-203">To see performance counters and counts of events, open [Metrics Explorer](app-insights-metrics-explorer.md) and add a new chart:</span></span>

![Dane diagnostyczne platformy Azure](./media/app-insights-cloudservices/23-wad.png)

<span data-ttu-id="e982f-205">Użyj [wyszukiwania](app-insights-diagnostic-search.md) lub [zapytania analitycznego](app-insights-analytics-tour.md), aby wyszukiwać w różnych dziennikach śledzenia wysyłanych przez diagnostykę platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="e982f-205">Use [Search](app-insights-diagnostic-search.md) or an [Analytics query](app-insights-analytics-tour.md) to search across the various trace logs sent by Azure Diagnostics.</span></span> <span data-ttu-id="e982f-206">Załóżmy na przykład, że masz nieobsłużony wyjątek, który spowodował awarię i odtworzenie roli.</span><span class="sxs-lookup"><span data-stu-id="e982f-206">For example, suppose you have an unhandled exception which caused a Role to crash and recycle.</span></span> <span data-ttu-id="e982f-207">Te informacje będą wyświetlane w kanale aplikacji dziennika zdarzeń systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="e982f-207">That information would show up in the Application channel of Windows Event Log.</span></span> <span data-ttu-id="e982f-208">Możesz użyć wyszukiwania, aby wyszukać błąd w dzienniku zdarzeń systemu Windows i uzyskać pełen ślad stosu dla wyjątku.</span><span class="sxs-lookup"><span data-stu-id="e982f-208">You can use Search to look at the Windows Event Log error and get the full stack trace for the exception.</span></span> <span data-ttu-id="e982f-209">Pomoże Ci to znaleźć główną przyczynę problemu.</span><span class="sxs-lookup"><span data-stu-id="e982f-209">That will help you find the root cause of the issue.</span></span>

![Wyszukiwanie diagnostyki platformy Azure](./media/app-insights-cloudservices/25-wad.png)

## <a name="more-telemetry"></a><span data-ttu-id="e982f-211">Dalsze funkcje telemetrii</span><span class="sxs-lookup"><span data-stu-id="e982f-211">More telemetry</span></span>
<span data-ttu-id="e982f-212">Poniższe sekcje pokazują, jak uzyskać dodatkowe dane telemetryczne z różnych aspektów aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e982f-212">The sections below show how to get additional telemetry from different aspects of your application.</span></span>

## <a name="track-requests-from-worker-roles"></a><span data-ttu-id="e982f-213">Śledzenie żądań z ról procesów roboczych</span><span class="sxs-lookup"><span data-stu-id="e982f-213">Track Requests from Worker roles</span></span>
<span data-ttu-id="e982f-214">W rolach sieci Web moduł żądań automatycznie zbiera dane o żądaniach HTTP.</span><span class="sxs-lookup"><span data-stu-id="e982f-214">In web roles, the requests module automatically collects data about HTTP requests.</span></span> <span data-ttu-id="e982f-215">Zobacz [przykładową rolę MVCWebRole](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/MvcWebRole), aby zapoznać się z przykładami sposobu zastąpienia domyślnego zachowania kolekcji.</span><span class="sxs-lookup"><span data-stu-id="e982f-215">See the [sample MVCWebRole](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/MvcWebRole) for examples of how you can override the default collection behavior.</span></span> 

<span data-ttu-id="e982f-216">Możesz przechwycić wydajności wywołań do ról procesów roboczych, śledząc je w taki sam sposób, jak żądania HTTP.</span><span class="sxs-lookup"><span data-stu-id="e982f-216">You can capture the performance of calls to worker roles by tracking them in the same way as HTTP requests.</span></span> <span data-ttu-id="e982f-217">W usłudze Application Insights żądanie typu telemetrii mierzy jednostkę po stronie nazwanego serwera, które może być synchronizowane i może niezależnie zakończyć się sukcesem lub niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="e982f-217">In Application Insights, the Request telemetry type measures a unit of named server-side work that can be timed and can independently succeed or fail.</span></span> <span data-ttu-id="e982f-218">Gdy żądania HTTP są przechwytywane automatycznie przez zestaw SDK, możesz wstawić własny kod do śledzenia żądań dla ról procesów roboczych.</span><span class="sxs-lookup"><span data-stu-id="e982f-218">While HTTP requests are captured automatically by the SDK, you can insert your own code to track requests to worker roles.</span></span>

<span data-ttu-id="e982f-219">Zobacz dwie role procesu roboczego mające instrumentację do zgłaszania żądania: [WorkerRoleA](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleA) i [WorkerRoleB](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleB)</span><span class="sxs-lookup"><span data-stu-id="e982f-219">See the two sample worker roles instrumented to report requests: [WorkerRoleA](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleA) and [WorkerRoleB](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleB)</span></span>

## <a name="exceptions"></a><span data-ttu-id="e982f-220">Wyjątki</span><span class="sxs-lookup"><span data-stu-id="e982f-220">Exceptions</span></span>
<span data-ttu-id="e982f-221">Zobacz [Monitoring Exceptions in Application Insights](app-insights-asp-net-exceptions.md) (Monitorowanie wyjątków w usłudze Application Insights), aby uzyskać informacje, w jaki sposób możesz gromadzić nieobsługiwane wyjątki z różnych typów aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="e982f-221">See [Monitoring Exceptions in Application Insights](app-insights-asp-net-exceptions.md) for information on how you can collect unhandled exceptions from different web application types.</span></span>

<span data-ttu-id="e982f-222">Przykładowa rola sieci Web ma kontrolery MVC5 i Web API 2.</span><span class="sxs-lookup"><span data-stu-id="e982f-222">The sample web role has MVC5 and Web API 2 controllers.</span></span> <span data-ttu-id="e982f-223">Nieobsługiwane wyjątki od tych dwóch są przechwytywane za pomocą następujących programów obsługi:</span><span class="sxs-lookup"><span data-stu-id="e982f-223">The unhandled exceptions from the two are captured with the following handlers:</span></span>

* <span data-ttu-id="e982f-224">[AiHandleErrorAttribute](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiHandleErrorAttribute.cs) konfigurowanego [tutaj](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/FilterConfig.cs#L12) dla kontrolerów MVC5</span><span class="sxs-lookup"><span data-stu-id="e982f-224">[AiHandleErrorAttribute](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiHandleErrorAttribute.cs) set up [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/FilterConfig.cs#L12) for MVC5 controllers</span></span>
* <span data-ttu-id="e982f-225">[AiWebApiExceptionLogger](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiWebApiExceptionLogger.cs) konfigurowanego [tutaj](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/WebApiConfig.cs#L25) dla kontrolerów Web API 2</span><span class="sxs-lookup"><span data-stu-id="e982f-225">[AiWebApiExceptionLogger](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiWebApiExceptionLogger.cs) set up [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/WebApiConfig.cs#L25) for Web API 2 controllers</span></span>

<span data-ttu-id="e982f-226">Dla ról procesów roboczych istnieją dwa sposoby śledzenia wyjątków:</span><span class="sxs-lookup"><span data-stu-id="e982f-226">For worker roles, there are two ways to track exceptions:</span></span>

* <span data-ttu-id="e982f-227">TrackException(ex)</span><span class="sxs-lookup"><span data-stu-id="e982f-227">TrackException(ex)</span></span>
* <span data-ttu-id="e982f-228">Jeśli został dodany pakiet NuGet odbiornika śledzenia usługi Application Insights, możesz użyć interfejsu **System.Diagnostics.Trace** do rejestrowania wyjątków.</span><span class="sxs-lookup"><span data-stu-id="e982f-228">If you have added the Application Insights trace listener NuGet package, you can use **System.Diagnostics.Trace** to log exceptions.</span></span> [<span data-ttu-id="e982f-229">Przykładowy kod.</span><span class="sxs-lookup"><span data-stu-id="e982f-229">Code example.</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L107)

## <a name="performance-counters"></a><span data-ttu-id="e982f-230">Liczniki wydajności</span><span class="sxs-lookup"><span data-stu-id="e982f-230">Performance Counters</span></span>
<span data-ttu-id="e982f-231">Domyślnie są zbierane następujące liczniki:</span><span class="sxs-lookup"><span data-stu-id="e982f-231">The following counters are collected by default:</span></span>

    * <span data-ttu-id="e982f-232">\Process(??. APP_WIN32_PROC??)\% Czas procesora</span><span class="sxs-lookup"><span data-stu-id="e982f-232">\Process(??APP_WIN32_PROC??)\% Processor Time</span></span>
    * <span data-ttu-id="e982f-233">\Memory\Available Bytes</span><span class="sxs-lookup"><span data-stu-id="e982f-233">\Memory\Available Bytes</span></span>
    * <span data-ttu-id="e982f-234">\.NET CLR Exceptions(??APP_CLR_PROC??)\# of Exceps Thrown / sec</span><span class="sxs-lookup"><span data-stu-id="e982f-234">\.NET CLR Exceptions(??APP_CLR_PROC??)\# of Exceps Thrown / sec</span></span>
    * <span data-ttu-id="e982f-235">\Process(??APP_WIN32_PROC??)\Private Bytes</span><span class="sxs-lookup"><span data-stu-id="e982f-235">\Process(??APP_WIN32_PROC??)\Private Bytes</span></span>
    * <span data-ttu-id="e982f-236">\Process(??APP_WIN32_PROC??)\IO Data Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="e982f-236">\Process(??APP_WIN32_PROC??)\IO Data Bytes/sec</span></span>
    * <span data-ttu-id="e982f-237">\Processor(_Total)\% Processor Time</span><span class="sxs-lookup"><span data-stu-id="e982f-237">\Processor(_Total)\% Processor Time</span></span>

<span data-ttu-id="e982f-238">Następujące liczniki są również zbierane dla ról sieci Web:</span><span class="sxs-lookup"><span data-stu-id="e982f-238">For web roles, these counters are also collected:</span></span>

    * <span data-ttu-id="e982f-239">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests/Sec</span><span class="sxs-lookup"><span data-stu-id="e982f-239">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests/Sec</span></span>
    * <span data-ttu-id="e982f-240">\ASP.NET Applications(??APP_W3SVC_PROC??)\Request Execution Time</span><span class="sxs-lookup"><span data-stu-id="e982f-240">\ASP.NET Applications(??APP_W3SVC_PROC??)\Request Execution Time</span></span>
    * <span data-ttu-id="e982f-241">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests In Application Queue</span><span class="sxs-lookup"><span data-stu-id="e982f-241">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests In Application Queue</span></span>

<span data-ttu-id="e982f-242">Możesz określić dodatkowe niestandardowe lub inne liczniki wydajności systemu Windows, edytując plik ApplicationInsights.config [jak w poniższym przykładzie](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/ApplicationInsights.config#L14).</span><span class="sxs-lookup"><span data-stu-id="e982f-242">You can specify additional custom or other windows performance counters by editing ApplicationInsights.config [as in this example](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/ApplicationInsights.config#L14).</span></span>

  ![Liczniki wydajności](./media/app-insights-cloudservices/OLfMo2f.png)

## <a name="correlated-telemetry-for-worker-roles"></a><span data-ttu-id="e982f-244">Skorelowana telemetria dla ról procesów roboczych</span><span class="sxs-lookup"><span data-stu-id="e982f-244">Correlated Telemetry for Worker Roles</span></span>
<span data-ttu-id="e982f-245">Gdy możesz zobaczyć, co doprowadziło do nieudanego lub znacznie opóźnionego żądania, gromadzisz znaczne doświadczenie diagnostyczne.</span><span class="sxs-lookup"><span data-stu-id="e982f-245">It is a rich diagnostic experience, when you can see what led to a failed or high latency request.</span></span> <span data-ttu-id="e982f-246">Za pomocą ról sieci Web zestaw SDK automatycznie konfiguruje korelację między powiązaną telemetrią.</span><span class="sxs-lookup"><span data-stu-id="e982f-246">With web roles, the SDK automatically sets up correlation between related telemetry.</span></span> <span data-ttu-id="e982f-247">Dla ról procesów roboczych możesz użyć inicjatora niestandardowej telemetrii, aby ustawić wspólny atrybut kontekstu Operation.Id dla wszystkich telemetrii, aby to osiągnąć.</span><span class="sxs-lookup"><span data-stu-id="e982f-247">For worker roles, you can use a custom telemetry initializer to set a common Operation.Id context attribute for all the telemetry to achieve this.</span></span> <span data-ttu-id="e982f-248">Dzięki temu możesz szybko sprawdzić, czy problem opóźnienia/błędu został spowodowany przez zależność, czy też przez kod.</span><span class="sxs-lookup"><span data-stu-id="e982f-248">This allows you to see whether the latency/failure issue was caused due to a dependency or your code, at a glance!</span></span> 

<span data-ttu-id="e982f-249">Oto kroki tej procedury:</span><span class="sxs-lookup"><span data-stu-id="e982f-249">Here's how:</span></span>

* <span data-ttu-id="e982f-250">Ustaw identyfikator korelacji na parametr CallContext, jak pokazano [tutaj](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L36).</span><span class="sxs-lookup"><span data-stu-id="e982f-250">Set the correlation Id into a CallContext as shown [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L36).</span></span> <span data-ttu-id="e982f-251">W takim przypadku użyjemy Identyfikatora żądania jako identyfikatora korelacji</span><span class="sxs-lookup"><span data-stu-id="e982f-251">In this case, we are using the Request ID as the correlation id</span></span>
* <span data-ttu-id="e982f-252">Dodaj niestandardową implementację parametru TelemetryInitializer, aby ustawić parametr Operation.Id na ustawiony powyżej correlationId.</span><span class="sxs-lookup"><span data-stu-id="e982f-252">Add a custom TelemetryInitializer implementation, to set the Operation.Id to the correlationId set above.</span></span> <span data-ttu-id="e982f-253">Tutaj znajduje się przykład: [ItemCorrelationTelemetryInitializer](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/Telemetry/ItemCorrelationTelemetryInitializer.cs#L13)</span><span class="sxs-lookup"><span data-stu-id="e982f-253">There's an example here: [ItemCorrelationTelemetryInitializer](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/Telemetry/ItemCorrelationTelemetryInitializer.cs#L13)</span></span>
* <span data-ttu-id="e982f-254">Dodaj inicjator niestandardowej telemetrii.</span><span class="sxs-lookup"><span data-stu-id="e982f-254">Add the custom telemetry initializer.</span></span> <span data-ttu-id="e982f-255">Możesz to zrobić w pliku ApplicationInsights.config lub w kodzie, co zostało pokazane [tutaj](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L233)</span><span class="sxs-lookup"><span data-stu-id="e982f-255">You could do that in the ApplicationInsights.config file, or in code as shown [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L233)</span></span>

<span data-ttu-id="e982f-256">Gotowe.</span><span class="sxs-lookup"><span data-stu-id="e982f-256">That's it!</span></span> <span data-ttu-id="e982f-257">Środowisko pracy w portalu jest już gotowe i możesz łatwo zobaczyć całą skojarzoną telemetrię:</span><span class="sxs-lookup"><span data-stu-id="e982f-257">The portal experience is already wired up to help you see all associated telemetry at a glance:</span></span>

![Skorelowana telemetria](./media/app-insights-cloudservices/bHxuUhd.png)

## <a name="client-telemetry"></a><span data-ttu-id="e982f-259">Telemetria klienta</span><span class="sxs-lookup"><span data-stu-id="e982f-259">Client telemetry</span></span>
<span data-ttu-id="e982f-260">[Dodaj zestaw SDK JavaScript do stron sieci Web][client], aby uzyskiwać dane telemetryczne oparte na przeglądarce, takie jak liczba wyświetleń strony, czasy ładowania strony i wyjątki skryptów, oraz mieć możliwość napisania niestandardowej telemetrii w skryptach strony.</span><span class="sxs-lookup"><span data-stu-id="e982f-260">[Add the JavaScript SDK to your web pages][client] to get browser-based telemetry such as page view counts, page load times, script exceptions, and to let you write custom telemetry in your page scripts.</span></span>

## <a name="availability-tests"></a><span data-ttu-id="e982f-261">Testy dostępności</span><span class="sxs-lookup"><span data-stu-id="e982f-261">Availability tests</span></span>
<span data-ttu-id="e982f-262">[Konfigurowanie testów sieci Web][availability], aby upewnić się, że aplikacja stale działa i odpowiada.</span><span class="sxs-lookup"><span data-stu-id="e982f-262">[Set up web tests][availability] to make sure your application stays live and responsive.</span></span>

## <a name="display-everything-together"></a><span data-ttu-id="e982f-263">Wyświetlanie wszystkich elementów razem</span><span class="sxs-lookup"><span data-stu-id="e982f-263">Display everything together</span></span>
<span data-ttu-id="e982f-264">Aby uzyskać ogólny obraz systemu, można przenieść kluczowe wykresy monitorowania razem na jeden [pulpit nawigacyjny](app-insights-dashboards.md).</span><span class="sxs-lookup"><span data-stu-id="e982f-264">To get an overall picture of your system, you can bring the key monitoring charts together on one [dashboard](app-insights-dashboards.md).</span></span> <span data-ttu-id="e982f-265">Na przykład możesz przypiąć liczbę żądań i awarii poszczególnych ról.</span><span class="sxs-lookup"><span data-stu-id="e982f-265">For example, you could pin the request and failure counts of each role.</span></span> 

<span data-ttu-id="e982f-266">Jeśli system używa innych usług platformy Azure, takich jak Stream Analytics, należy również uwzględnić wykresy ich monitorowania.</span><span class="sxs-lookup"><span data-stu-id="e982f-266">If your system uses other Azure services such as Stream Analytics, include their monitoring charts as well.</span></span> 

<span data-ttu-id="e982f-267">Jeśli masz klienta aplikacji mobilnej, wstaw kod do wysyłania niestandardowych zdarzeń dla kluczowych operacji użytkownika i utwórz [mostek platformy HockeyApp](app-insights-hockeyapp-bridge-app.md).</span><span class="sxs-lookup"><span data-stu-id="e982f-267">If you have a client mobile app, insert some code to send custom events on key user operations, and create a [HockeyApp bridge](app-insights-hockeyapp-bridge-app.md).</span></span> <span data-ttu-id="e982f-268">Utwórz zapytania w pozycji [Analiza](app-insights-analytics.md), aby wyświetlić liczby zdarzeń i przypiąć je do pulpitu nawigacyjnego.</span><span class="sxs-lookup"><span data-stu-id="e982f-268">Create queries in [Analytics](app-insights-analytics.md) to display the event counts, and pin them to the dashboard.</span></span>

## <a name="example"></a><span data-ttu-id="e982f-269">Przykład</span><span class="sxs-lookup"><span data-stu-id="e982f-269">Example</span></span>
<span data-ttu-id="e982f-270">[Przykład](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) monitoruje usługę mającą rolę sieci Web i dwie role procesów roboczych.</span><span class="sxs-lookup"><span data-stu-id="e982f-270">[The example](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) monitors a service that has a web role and two worker roles.</span></span>

## <a name="exception-method-not-found-on-running-in-azure-cloud-services"></a><span data-ttu-id="e982f-271">Wyjątek „nie można odnaleźć metody” podczas uruchamiania w usługach Azure Cloud Services</span><span class="sxs-lookup"><span data-stu-id="e982f-271">Exception "method not found" on running in Azure Cloud Services</span></span>
<span data-ttu-id="e982f-272">Czy to kompilacja dla .NET 4.6?</span><span class="sxs-lookup"><span data-stu-id="e982f-272">Did you build for .NET 4.6?</span></span> <span data-ttu-id="e982f-273">Wersja 4.6 nie jest automatycznie obsługiwana w rolach usług Azure Cloud Services.</span><span class="sxs-lookup"><span data-stu-id="e982f-273">4.6 is not automatically supported in Azure Cloud Services roles.</span></span> <span data-ttu-id="e982f-274">[Zainstaluj wersję 4.6 w każdej roli](../cloud-services/cloud-services-dotnet-install-dotnet.md) przed uruchomieniem aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e982f-274">[Install 4.6 on each role](../cloud-services/cloud-services-dotnet-install-dotnet.md) before running your app.</span></span>

## <a name="video"></a><span data-ttu-id="e982f-275">Połączenia wideo</span><span class="sxs-lookup"><span data-stu-id="e982f-275">Video</span></span>

> [!VIDEO https://channel9.msdn.com/events/Connect/2016/100/player]

## <a name="next-steps"></a><span data-ttu-id="e982f-276">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="e982f-276">Next steps</span></span>
* [<span data-ttu-id="e982f-277">Konfigurowanie wysyłania usługi Diagnostyka Azure do usługi Application Insights</span><span class="sxs-lookup"><span data-stu-id="e982f-277">Configure sending Azure Diagnostics to Application Insights</span></span>](app-insights-azure-diagnostics.md)
* [<span data-ttu-id="e982f-278">Automatyczne tworzenie zasobów usługi Application Insights</span><span class="sxs-lookup"><span data-stu-id="e982f-278">Automate creation of Application Insights resources</span></span>](app-insights-powershell.md)
* [<span data-ttu-id="e982f-279">Automatyzacja usługi Diagnostyka Azure</span><span class="sxs-lookup"><span data-stu-id="e982f-279">Automate Azure diagnostics</span></span>](app-insights-powershell-azure-diagnostics.md)
* [<span data-ttu-id="e982f-280">Azure Functions</span><span class="sxs-lookup"><span data-stu-id="e982f-280">Azure Functions</span></span>](https://github.com/christopheranderson/azure-functions-app-insights-sample)

[api]: app-insights-api-custom-events-metrics.md
[availability]: app-insights-monitor-web-app-availability.md
[azure]: app-insights-azure.md
[client]: app-insights-javascript.md
[diagnostic]: app-insights-diagnostic-search.md
[netlogs]: app-insights-asp-net-trace-logs.md
[portal]: http://portal.azure.com/
[qna]: app-insights-troubleshoot-faq.md
[redfield]: app-insights-monitor-performance-live-website-now.md
[start]: app-insights-overview.md 
