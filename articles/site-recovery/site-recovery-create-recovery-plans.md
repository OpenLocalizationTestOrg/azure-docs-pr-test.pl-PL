---
title: "aaaCreate plany odzyskiwania dla trybu failover i odzyskiwania w usłudze Azure Site Recovery | Dokumentacja firmy Microsoft"
description: "Opisuje sposób toocreate i dostosowywać plany odzyskiwania w usłudze Azure Site Recovery, toofail za pośrednictwem i odzyskiwania maszyn wirtualnych i serwerów fizycznych"
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: 72408c62-fcb6-4ee2-8ff5-cab1218773f2
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 07/23/2017
ms.author: raynew
ms.openlocfilehash: 09ca7719e92460b283947fdbe752e8654e5b9cab
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="create-recovery-plans"></a><span data-ttu-id="8b745-103">Tworzenie planów odzyskiwania</span><span class="sxs-lookup"><span data-stu-id="8b745-103">Create recovery plans</span></span>


<span data-ttu-id="8b745-104">Ten artykuł zawiera informacje na temat tworzenia i dostosowywania planów odzyskiwania w [usługi Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8b745-104">This article provides information about creating and customizing recovery plans in [Azure Site Recovery](site-recovery-overview.md).</span></span>

<span data-ttu-id="8b745-105">Zamieść wszelkie komentarze lub pytania u dołu hello w tym artykule, albo na powitania [Forum usług odzyskiwania Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="8b745-105">Post any comments or questions at hello bottom of this article, or on hello [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>

 <span data-ttu-id="8b745-106">Utwórz hello toodo planów odzyskiwania po:</span><span class="sxs-lookup"><span data-stu-id="8b745-106">Create recovery plans toodo hello following:</span></span>

* <span data-ttu-id="8b745-107">Definiowanie grup komputerów, które w tryb failover ze sobą, a następnie uruchom ze sobą.</span><span class="sxs-lookup"><span data-stu-id="8b745-107">Define groups of machines that fail over together, and then start up together.</span></span>
* <span data-ttu-id="8b745-108">Model zależności między komputerami, grupując je do odzyskiwania Zaplanuj grupy.</span><span class="sxs-lookup"><span data-stu-id="8b745-108">Model dependencies between machines, by grouping them together into a recovery plan group.</span></span> <span data-ttu-id="8b745-109">Na przykład toofail za pośrednictwem i wyświetlić określonej aplikacji, wszystkie maszyny wirtualne powitania dla tej aplikacji na powitania grupy tej samej grupie planu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="8b745-109">For example, toofail over and bring up a specific application, you group all of hello VMs for that application into hello same recovery plan group.</span></span>
* <span data-ttu-id="8b745-110">Uruchom tryb failover.</span><span class="sxs-lookup"><span data-stu-id="8b745-110">Run a failover.</span></span> <span data-ttu-id="8b745-111">Można uruchomić testu, planowane, ani nieplanowane przełączenie awaryjne, w ramach planu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="8b745-111">You can run a test, planned, or unplanned failover on a recovery plan.</span></span>


## <a name="create-a-recovery-plan"></a><span data-ttu-id="8b745-112">Tworzenie planu odzyskiwania</span><span class="sxs-lookup"><span data-stu-id="8b745-112">Create a recovery plan</span></span>

1. <span data-ttu-id="8b745-113">Kliknij przycisk **planów odzyskiwania** > **utworzenie planu odzyskiwania**.</span><span class="sxs-lookup"><span data-stu-id="8b745-113">Click **Recovery Plans** > **Create Recovery Plan**.</span></span>
   <span data-ttu-id="8b745-114">Określ nazwę hello planu odzyskiwania, a źródłowa i docelowa.</span><span class="sxs-lookup"><span data-stu-id="8b745-114">Specify a name for hello recovery plan, and a source and target.</span></span> <span data-ttu-id="8b745-115">Lokalizacja źródła Hello musi mieć maszyn wirtualnych, które są włączone dla trybu failover i odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="8b745-115">hello source location must have virtual machines that are enabled for failover and recovery.</span></span>

    - <span data-ttu-id="8b745-116">Replikacja tooVMM VMM, wybierz **typ źródła** > **VMM**i hello źródłowych i docelowych serwerów programu VMM.</span><span class="sxs-lookup"><span data-stu-id="8b745-116">For VMM tooVMM replication, select **Source Type** > **VMM**, and hello source and target VMM servers.</span></span> <span data-ttu-id="8b745-117">Kliknij przycisk **funkcji Hyper-V** toosee chmury, które są chronione.</span><span class="sxs-lookup"><span data-stu-id="8b745-117">Click **Hyper-V** toosee clouds that are protected.</span></span>
    - <span data-ttu-id="8b745-118">VMM tooAzure, wybierz **typ źródła** > **VMM**.</span><span class="sxs-lookup"><span data-stu-id="8b745-118">For VMM tooAzure, select **Source Type** > **VMM**.</span></span>  <span data-ttu-id="8b745-119">Witaj wybierz źródłowy serwer VMM i **Azure** jako cel hello.</span><span class="sxs-lookup"><span data-stu-id="8b745-119">Select hello source VMM server, and **Azure** as hello target.</span></span>
    - <span data-ttu-id="8b745-120">Dla funkcji Hyper-V tooAzure replikacji (bez VMM), wybierz **typ źródła** > **lokacji funkcji Hyper-V**.</span><span class="sxs-lookup"><span data-stu-id="8b745-120">For Hyper-V replication tooAzure (without VMM), select **Source Type** > **Hyper-V site**.</span></span> <span data-ttu-id="8b745-121">Wybierz hello lokacji jako źródło hello i **Azure** jako cel hello.</span><span class="sxs-lookup"><span data-stu-id="8b745-121">Select hello site as hello source, and **Azure** as hello target.</span></span>
    - <span data-ttu-id="8b745-122">Dla maszyny Wirtualnej VMware lub fizycznego lokalnego serwera tooAzure, wybierz serwer konfiguracji jako źródło hello i **Azure** jako cel hello.</span><span class="sxs-lookup"><span data-stu-id="8b745-122">For a VMware VM or a physical on-premises server tooAzure, select a configuration server as hello source, and **Azure** as hello target.</span></span>
    - <span data-ttu-id="8b745-123">Azure tooAzure plan odzyskiwania wybierz region platformy Azure jako źródło hello i dodatkowej region platformy Azure jako cel hello.</span><span class="sxs-lookup"><span data-stu-id="8b745-123">For a Azure tooAzure recovery plan, select a Azure region as hello source, and a secondary Azure region as hello target.</span></span> <span data-ttu-id="8b745-124">Witaj dodatkowej regiony platformy Azure są tylko maszyny wirtualne toowhich są chronione.</span><span class="sxs-lookup"><span data-stu-id="8b745-124">hello secondary Azure regions are only those toowhich virtual machines are protected.</span></span>
2. <span data-ttu-id="8b745-125">W **wybierz maszyny wirtualne**, wybierz maszyny wirtualne hello (lub grupa replikacji) mają tooadd toohello domyślnej grupy (Grupa 1) w planie odzyskiwania hello.</span><span class="sxs-lookup"><span data-stu-id="8b745-125">In **Select virtual machines**, select hello virtual machines (or replication group) that you want tooadd toohello default group (Group 1) in hello recovery plan.</span></span>

## <a name="customize-and-extend-recovery-plans"></a><span data-ttu-id="8b745-126">Dostosowywanie i rozszerzanie planów odzyskiwania</span><span class="sxs-lookup"><span data-stu-id="8b745-126">Customize and extend recovery plans</span></span>

<span data-ttu-id="8b745-127">Można dostosować i rozszerzyć planów odzyskiwania:</span><span class="sxs-lookup"><span data-stu-id="8b745-127">You can customize and extend recovery plans:</span></span>

- <span data-ttu-id="8b745-128">**Dodaj nowe grupy**— Dodawanie grup (up tooseven) planu odzyskiwania dodatkowe toohello grupy domyślnej, a następnie dodaj więcej maszyny lub replikacji grupy toothose odzyskiwania planu grupy.</span><span class="sxs-lookup"><span data-stu-id="8b745-128">**Add new groups**—Add additional recovery plan groups (up tooseven) toohello default group, and then add more machines or replication groups toothose recovery plan groups.</span></span> <span data-ttu-id="8b745-129">Grupy są numerowane kolejno hello je dodać.</span><span class="sxs-lookup"><span data-stu-id="8b745-129">Groups are numbered in hello order in which you add them.</span></span> <span data-ttu-id="8b745-130">Maszyny wirtualnej lub grupy replikacji tylko mogą zostać włączone w grupie planu odzyskiwania jednego.</span><span class="sxs-lookup"><span data-stu-id="8b745-130">A virtual machine, or replication group, can only be included in one recovery plan group.</span></span>
- <span data-ttu-id="8b745-131">**Dodaj akcję ręczną**— można dodać ręczne akcje, które są uruchamiane przed lub po grupie planu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="8b745-131">**Add a manual action**—You can add manual actions that run before or after a recovery plan group.</span></span> <span data-ttu-id="8b745-132">Po uruchomieniu planu odzyskiwania hello przestaje w momencie hello jaką dodaje hello akcji ręcznej.</span><span class="sxs-lookup"><span data-stu-id="8b745-132">When hello recovery plan runs, it stops at hello point at which you inserted hello manual action.</span></span> <span data-ttu-id="8b745-133">Okno dialogowe monituje toospecify zakończenie akcji ręcznej hello.</span><span class="sxs-lookup"><span data-stu-id="8b745-133">A dialog box prompts you toospecify that hello manual action was completed.</span></span>
- <span data-ttu-id="8b745-134">**Dodawanie skryptu**— można dodać skryptów uruchamianych przed lub po grupie planu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="8b745-134">**Add a script**—You can add scripts that run before or after a recovery plan group.</span></span> <span data-ttu-id="8b745-135">Po dodaniu skrypt dodaje nowy zestaw działań hello grupy.</span><span class="sxs-lookup"><span data-stu-id="8b745-135">When you add a script, it adds a new set of actions for hello group.</span></span> <span data-ttu-id="8b745-136">Na przykład, zostanie utworzony zestaw kroków wstępne 1 grupy o nazwie hello: Grupa 1: wstępne czynności.</span><span class="sxs-lookup"><span data-stu-id="8b745-136">For example, a set of pre-steps for Group 1 will be created with hello name: Group 1: pre-steps.</span></span> <span data-ttu-id="8b745-137">Wszystkie kroki przed będzie wyświetlane w tym zestawie.</span><span class="sxs-lookup"><span data-stu-id="8b745-137">All pre-steps will be listed inside this set.</span></span> <span data-ttu-id="8b745-138">Skrypt można dodać na powitania lokacji głównej, jeśli serwer VMM wdrożone.</span><span class="sxs-lookup"><span data-stu-id="8b745-138">You can only add a script on hello primary site if you have a VMM server deployed.</span></span>
- <span data-ttu-id="8b745-139">**Dodaj elementy runbook Azure**— można rozszerzyć plany odzyskiwania z elementów runbook platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8b745-139">**Add Azure runbooks**—You can extend recovery plans with Azure runbooks.</span></span> <span data-ttu-id="8b745-140">Na przykład tooautomate zadań lub toocreate pojedynczy krok odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="8b745-140">For example, tooautomate tasks, or toocreate single-step recovery.</span></span> <span data-ttu-id="8b745-141">[Dowiedz się więcej](site-recovery-runbook-automation.md).</span><span class="sxs-lookup"><span data-stu-id="8b745-141">[Learn more](site-recovery-runbook-automation.md).</span></span>

## <a name="add-scripts"></a><span data-ttu-id="8b745-142">Dodawanie skryptów</span><span class="sxs-lookup"><span data-stu-id="8b745-142">Add scripts</span></span>

<span data-ttu-id="8b745-143">Można użyć skryptów środowiska PowerShell w planów odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="8b745-143">You can use PowerShell scripts in your recovery plans.</span></span>

 - <span data-ttu-id="8b745-144">Upewnij się, że skrypty używać bloków try-catch, tak aby bezpiecznie obsługi wyjątków hello.</span><span class="sxs-lookup"><span data-stu-id="8b745-144">Ensure that scripts use try-catch blocks so that hello exceptions are handled gracefully.</span></span>
    - <span data-ttu-id="8b745-145">W przypadku wyjątku w skrypcie hello przestaje działać i zadań hello pokazuje nie powiodło się.</span><span class="sxs-lookup"><span data-stu-id="8b745-145">If there is an exception in hello script, it stops running and hello task shows as failed.</span></span>
    - <span data-ttu-id="8b745-146">Jeśli wystąpi błąd, pozostała część hello skrypt nie działa.</span><span class="sxs-lookup"><span data-stu-id="8b745-146">If an error occurs, any remaining part of hello script doesn't run.</span></span>
    - <span data-ttu-id="8b745-147">Jeśli błąd wystąpi po uruchomieniu nieplanowanego trybu failover, nadal hello planu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="8b745-147">If an error occurs when you run an unplanned failover, hello recovery plan continues.</span></span>
    - <span data-ttu-id="8b745-148">Jeśli wystąpi błąd podczas uruchamiania planowanego trybu failover, zatrzymuje hello planu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="8b745-148">If an error occurs when you run a planned failover, hello recovery plan stops.</span></span> <span data-ttu-id="8b745-149">Należy toofix hello skryptu, sprawdź, czy działa zgodnie z oczekiwaniami, a następnie uruchom ponownie planu odzyskiwania hello.</span><span class="sxs-lookup"><span data-stu-id="8b745-149">You need toofix hello script, check that it runs as expected, and then run hello recovery plan again.</span></span>
- <span data-ttu-id="8b745-150">Witaj polecenia Write-Host nie działa w skryptu planu odzyskiwania i hello skrypt zakończy się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="8b745-150">hello Write-Host command doesn’t work in a recovery plan script, and hello script will fail.</span></span> <span data-ttu-id="8b745-151">dane wyjściowe toocreate, utworzyć skrypt serwera proxy, który z kolei uruchamia skrypt głównego.</span><span class="sxs-lookup"><span data-stu-id="8b745-151">toocreate output, create a proxy script that in turn runs your main script.</span></span> <span data-ttu-id="8b745-152">Upewnij się, że wszystkie dane wyjściowe jest przekazywany w potoku się przy użyciu hello >> polecenia.</span><span class="sxs-lookup"><span data-stu-id="8b745-152">Make sure that all output is piped out using hello >> command.</span></span>
  * <span data-ttu-id="8b745-153">Upłynął limit czasu skryptu Hello Jeśli nie zwraca w 600 sekund.</span><span class="sxs-lookup"><span data-stu-id="8b745-153">hello script times out if it doesn't return within 600 seconds.</span></span>
  * <span data-ttu-id="8b745-154">Jeśli wszystko jest zapisywane tooSTDERR, skrypt hello jest klasyfikowany zgodnie z nie powiodło się.</span><span class="sxs-lookup"><span data-stu-id="8b745-154">If anything is written out tooSTDERR, hello script is classified as failed.</span></span> <span data-ttu-id="8b745-155">Te informacje są wyświetlane w szczegółach wykonywania skryptu hello.</span><span class="sxs-lookup"><span data-stu-id="8b745-155">This information is displayed in hello script execution details.</span></span>

<span data-ttu-id="8b745-156">Jeśli używasz programu VMM w ramach wdrożenia:</span><span class="sxs-lookup"><span data-stu-id="8b745-156">If you're using VMM in your deployment:</span></span>

* <span data-ttu-id="8b745-157">Skrypty w planie odzyskiwania są uruchamiane w kontekście hello hello konto usługi VMM.</span><span class="sxs-lookup"><span data-stu-id="8b745-157">Scripts in a recovery plan run in hello context of hello VMM Service account.</span></span> <span data-ttu-id="8b745-158">Upewnij się, że to konto ma uprawnienia do odczytu dla hello udziału zdalnego, na których hello zlokalizowany jest skrypt.</span><span class="sxs-lookup"><span data-stu-id="8b745-158">Make sure this account has Read permissions for hello remote share on which hello script is located.</span></span> <span data-ttu-id="8b745-159">Testowanie toorun skryptu hello na powitania poziom uprawnień konta usługi programu VMM.</span><span class="sxs-lookup"><span data-stu-id="8b745-159">Test hello script toorun at hello VMM service account privilege level.</span></span>
* <span data-ttu-id="8b745-160">Poleceń cmdlet programu VMM są dostarczane w moduł programu Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8b745-160">VMM cmdlets are delivered in a Windows PowerShell module.</span></span> <span data-ttu-id="8b745-161">Moduł Hello jest zainstalowany, po zainstalowaniu konsoli VMM hello.</span><span class="sxs-lookup"><span data-stu-id="8b745-161">hello module is installed when you install hello VMM console.</span></span> <span data-ttu-id="8b745-162">Może być załadowany do skryptu, za pomocą następującego polecenia w skrypcie hello hello:</span><span class="sxs-lookup"><span data-stu-id="8b745-162">It can be loaded into your script, using hello following command in hello script:</span></span>
   - <span data-ttu-id="8b745-163">Import-Module-Name virtualmachinemanager.</span><span class="sxs-lookup"><span data-stu-id="8b745-163">Import-Module -Name virtualmachinemanager.</span></span> <span data-ttu-id="8b745-164">[Dowiedz się więcej](https://technet.microsoft.com/library/hh875013.aspx).</span><span class="sxs-lookup"><span data-stu-id="8b745-164">[Learn more](https://technet.microsoft.com/library/hh875013.aspx).</span></span>
* <span data-ttu-id="8b745-165">Upewnij się, że co najmniej jednego serwera biblioteki w danym wdrożeniu programu VMM.</span><span class="sxs-lookup"><span data-stu-id="8b745-165">Ensure you have at least one library server in your VMM deployment.</span></span> <span data-ttu-id="8b745-166">Domyślnie program hello ścieżki udziału bibliotecznego na serwerze VMM znajduje się lokalnie na powitania serwera VMM, nazwą folderu hello MSCVMMLibrary.</span><span class="sxs-lookup"><span data-stu-id="8b745-166">By default, hello library share path for a VMM server is located locally on hello VMM server, with hello folder name MSCVMMLibrary.</span></span>
    * <span data-ttu-id="8b745-167">Jeśli Twoje ścieżki udziału bibliotecznego jest zdalne (lub lokalnym, ale nie są udostępniane MSCVMMLibrary), skonfiguruj udział hello w następujący sposób (przy użyciu \\libserver2.contoso.com\share\ jako przykład):</span><span class="sxs-lookup"><span data-stu-id="8b745-167">If your library share path is remote (or local but not shared with MSCVMMLibrary), configure hello share as follows (using \\libserver2.contoso.com\share\ as an example):</span></span>
      * <span data-ttu-id="8b745-168">Otwórz hello Edytor rejestru i przejdź zbyt**Recovery\Registration lokacji HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\Azure**.</span><span class="sxs-lookup"><span data-stu-id="8b745-168">Open hello Registry Editor and navigate too**HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\Azure Site Recovery\Registration**.</span></span>
      * <span data-ttu-id="8b745-169">Edytowanie wartości hello **ScriptLibraryPath** i umieszczenie go w formie \\libserver2.contoso.com\share\.</span><span class="sxs-lookup"><span data-stu-id="8b745-169">Edit hello value **ScriptLibraryPath** and place it as \\libserver2.contoso.com\share\.</span></span> <span data-ttu-id="8b745-170">Określ hello pełną nazwę FQDN.</span><span class="sxs-lookup"><span data-stu-id="8b745-170">Specify hello full FQDN.</span></span> <span data-ttu-id="8b745-171">Podaj lokalizację udziału toohello uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="8b745-171">Provide permissions toohello share location.</span></span>
      * <span data-ttu-id="8b745-172">Należy przetestować skrypt hello przy użyciu konta użytkownika, który ma hello takie same uprawnienia jak hello VMM konta usługi.</span><span class="sxs-lookup"><span data-stu-id="8b745-172">Ensure that you test hello script with a user account that has hello same permissions as hello VMM service account.</span></span> <span data-ttu-id="8b745-173">Sprawdza, że autonomiczny przetestowany skrypty uruchamiane w hello sam sposób, jak zostaną planów odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="8b745-173">This checks that standalone tested scripts run in hello same way as they will in recovery plans.</span></span> <span data-ttu-id="8b745-174">Na serwerze VMM hello Ustaw toobypass zasad wykonywania hello w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="8b745-174">On hello VMM server, set hello execution policy toobypass as follows:</span></span>
        * <span data-ttu-id="8b745-175">Otwórz konsolę programu Windows PowerShell 64-bitowych hello korzystając z podwyższonym poziomem uprawnień.</span><span class="sxs-lookup"><span data-stu-id="8b745-175">Open hello 64-bit Windows PowerShell console using elevated privileges.</span></span>
        * <span data-ttu-id="8b745-176">Typ: **obejścia Set-executionpolicy**.</span><span class="sxs-lookup"><span data-stu-id="8b745-176">Type: **Set-executionpolicy bypass**.</span></span> <span data-ttu-id="8b745-177">[Dowiedz się więcej](https://technet.microsoft.com/library/ee176961.aspx).</span><span class="sxs-lookup"><span data-stu-id="8b745-177">[Learn more](https://technet.microsoft.com/library/ee176961.aspx).</span></span>

## <a name="add-a-script-or-manual-action-tooa-plan"></a><span data-ttu-id="8b745-178">Dodaj skrypt lub plan tooa działania ręczne</span><span class="sxs-lookup"><span data-stu-id="8b745-178">Add a script or manual action tooa plan</span></span>

<span data-ttu-id="8b745-179">Po utworzeniu dodawania maszyn wirtualnych lub tooit grup replikacji i utworzono hello plan można dodać grupę planu odzyskiwania domyślną toohello skryptu.</span><span class="sxs-lookup"><span data-stu-id="8b745-179">You can add a script toohello default recovery plan group after you've added VMs or replication groups tooit, and created hello plan.</span></span>

1. <span data-ttu-id="8b745-180">Otwórz hello planu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="8b745-180">Open hello recovery plan.</span></span>
2. <span data-ttu-id="8b745-181">Kliknij element hello **krok** , a następnie kliknij przycisk **skryptu** lub **Akcja ręczna**.</span><span class="sxs-lookup"><span data-stu-id="8b745-181">Click an item in hello **Step** list, and then click **Script** or **Manual Action**.</span></span>
3. <span data-ttu-id="8b745-182">Określ, czy skrypt hello tooadd toowant lub akcji przed lub po hello wybrany element.</span><span class="sxs-lookup"><span data-stu-id="8b745-182">Specify whether toowant tooadd hello script or action before or after hello selected item.</span></span> <span data-ttu-id="8b745-183">Użyj hello **Przenieś w górę** i **Przenieś w dół** przyciski pozycji hello toomove hello skryptu w górę lub w dół.</span><span class="sxs-lookup"><span data-stu-id="8b745-183">Use hello **Move Up** and **Move Down**  buttons, toomove hello position of hello script up or down.</span></span>
4. <span data-ttu-id="8b745-184">Jeśli dodasz skryptu programu VMM, wybierz **pracy awaryjnej tooVMM skryptu**.</span><span class="sxs-lookup"><span data-stu-id="8b745-184">If you add a VMM script, select **Failover tooVMM script**.</span></span> <span data-ttu-id="8b745-185">W **ścieżka skryptu**, typ hello ścieżki względnej toohello udziału.</span><span class="sxs-lookup"><span data-stu-id="8b745-185">In **Script Path**, type hello relative path toohello share.</span></span> <span data-ttu-id="8b745-186">W poniższym przykładzie VMM hello, określ ścieżkę hello: **\RPScripts\RPScript.PS1**.</span><span class="sxs-lookup"><span data-stu-id="8b745-186">In hello VMM example below, you specify hello path: **\RPScripts\RPScript.PS1**.</span></span>
5. <span data-ttu-id="8b745-187">Po dodaniu usługi Automatyzacja Azure Uruchom książki Określ konto usługi Automatyzacja Azure hello, w których hello runbook to skrypt odpowiednich elementów runbook platformy Azure hello zlokalizować i wybierz opcję.</span><span class="sxs-lookup"><span data-stu-id="8b745-187">If you add an Azure automation run book, specify hello Azure Automation account in which hello runbook is located, and select hello appropriate Azure runbook script.</span></span>
6. <span data-ttu-id="8b745-188">Tryb failover planu odzyskiwania hello, czy skrypt hello toomake działa zgodnie z oczekiwaniami.</span><span class="sxs-lookup"><span data-stu-id="8b745-188">Do a failover of hello recovery plan, toomake sure hello script works as expected.</span></span>


### <a name="add-a-vmm-script"></a><span data-ttu-id="8b745-189">Skrypt programu VMM</span><span class="sxs-lookup"><span data-stu-id="8b745-189">Add a VMM script</span></span>

<span data-ttu-id="8b745-190">Lokację źródłową programu VMM można utworzyć skrypt na serwerze VMM hello i dołącz ją do planu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="8b745-190">If you have a VMM source site, you can create a script on hello VMM server, and include it in your recovery plan.</span></span>

1. <span data-ttu-id="8b745-191">Utwórz nowy folder w udziale biblioteki hello.</span><span class="sxs-lookup"><span data-stu-id="8b745-191">Create a new folder in hello library share.</span></span> <span data-ttu-id="8b745-192">Na przykład \<nazwa > \MSSCVMMLibrary\RPScripts.</span><span class="sxs-lookup"><span data-stu-id="8b745-192">For example, \<VMMServerName>\MSSCVMMLibrary\RPScripts.</span></span> <span data-ttu-id="8b745-193">Umieść go w źródle hello i VMM serwery docelowe.</span><span class="sxs-lookup"><span data-stu-id="8b745-193">Place it on hello source and target VMM servers.</span></span>
2. <span data-ttu-id="8b745-194">Utwórz skrypt hello (na przykład RPScript), a następnie sprawdź, czy działa on zgodnie z oczekiwaniami.</span><span class="sxs-lookup"><span data-stu-id="8b745-194">Create hello script (for example RPScript), and check it works as expected.</span></span>
3. <span data-ttu-id="8b745-195">Umieść skrypt hello w lokalizacji hello \<nazwa > \MSSCVMMLibrary na serwerach VMM hello źródłowych i docelowych.</span><span class="sxs-lookup"><span data-stu-id="8b745-195">Place hello script in hello location \<VMMServerName>\MSSCVMMLibrary, on hello source and target VMM servers.</span></span>


## <a name="next-steps"></a><span data-ttu-id="8b745-196">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="8b745-196">Next steps</span></span>

<span data-ttu-id="8b745-197">[Dowiedz się więcej](site-recovery-failover.md) dotyczące uruchamiania trybu failover.</span><span class="sxs-lookup"><span data-stu-id="8b745-197">[Learn more](site-recovery-failover.md) about running failovers.</span></span>
