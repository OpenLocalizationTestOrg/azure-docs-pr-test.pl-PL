---
title: "Przegląd architektury replikacji funkcji Hyper-V (bez programu System Center VMM) do platformy Azure za pomocą usługi Azure Site Recovery | Microsoft Docs"
description: "Ten artykuł zawiera omówienie składników i architektury używanych podczas replikowania lokalnych maszyn wirtualnych funkcji Hyper-V (bez usługi VMM) do platformy Azure za pomocą usługi Azure Site Recovery."
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: c413efcd-d750-4b22-b34b-15bcaa03934a
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/22/2017
ms.author: raynew
ms.openlocfilehash: d57cbc5b205cfb020070d567097f3bb648ce5300
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/03/2017
---
# <a name="step-1-review-the-architecture-for-hyper-v-replication-to-azure"></a><span data-ttu-id="702bf-103">Krok 1: Przegląd architektury replikacji funkcji Hyper-V na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="702bf-103">Step 1: Review the architecture for Hyper-V replication to Azure</span></span>


<span data-ttu-id="702bf-104">Ten artykuł zawiera opis składników i procesów związanych z replikacją lokalnych maszyn wirtualnych funkcji Hyper-V (niezarządzanych przez program System Center VMM) do platformy Azure za pomocą usługi [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="702bf-104">This article describes the components and processes involved when replicating on-premises Hyper-V virtual machines (that aren't managed by System Center VMM), to Azure using the [Azure Site Recovery](site-recovery-overview.md) service.</span></span>

<span data-ttu-id="702bf-105">Zamieść wszelkie komentarze pod tym artykułem lub na [forum usług Azure Recovery Services](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="702bf-105">Post any comments at the bottom of this article, or in the [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>



## <a name="architectural-components"></a><span data-ttu-id="702bf-106">Składniki architektury</span><span class="sxs-lookup"><span data-stu-id="702bf-106">Architectural components</span></span>

<span data-ttu-id="702bf-107">Podczas replikowania maszyn wirtualnych funkcji Hyper-V do platformy Azure bez użycia usługi VMM zaangażowanych jest wiele składników.</span><span class="sxs-lookup"><span data-stu-id="702bf-107">There are a number of components involved when replicating Hyper-V VMs to Azure without VMM.</span></span>

<span data-ttu-id="702bf-108">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="702bf-108">**Component**</span></span> | <span data-ttu-id="702bf-109">**Lokalizacja**</span><span class="sxs-lookup"><span data-stu-id="702bf-109">**Location**</span></span> | <span data-ttu-id="702bf-110">**Szczegóły**</span><span class="sxs-lookup"><span data-stu-id="702bf-110">**Details**</span></span>
--- | --- | ---
<span data-ttu-id="702bf-111">**Azure**</span><span class="sxs-lookup"><span data-stu-id="702bf-111">**Azure**</span></span> | <span data-ttu-id="702bf-112">W przypadku platformy Azure konieczne jest posiadanie konta platformy Microsoft Azure, konta usługi Azure Storage i sieci platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="702bf-112">In Azure you need a Microsoft Azure account, an Azure storage account, and a Azure network.</span></span> | <span data-ttu-id="702bf-113">Replikowane dane są przechowywane na koncie magazynu. W przypadku wystąpienia w lokacji lokalnej przejścia w tryb failover maszyny wirtualne platformy Azure są tworzone przy użyciu zreplikowanych danych.</span><span class="sxs-lookup"><span data-stu-id="702bf-113">Replicated data is stored in the storage account, and Azure VMs are created with the replicated data when failover from your on-premises site occurs.</span></span><br/><br/> <span data-ttu-id="702bf-114">Maszyny wirtualne platformy Azure nawiązują połączenie z siecią wirtualną platformy Azure, gdy są tworzone.</span><span class="sxs-lookup"><span data-stu-id="702bf-114">The Azure VMs connect to the Azure virtual network when they're created.</span></span>
<span data-ttu-id="702bf-115">**Funkcja Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="702bf-115">**Hyper-V**</span></span> | <span data-ttu-id="702bf-116">Hosty i klastry funkcji Hyper-V są zbierane do lokacji funkcji Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="702bf-116">Hyper-V hosts and clusters are gathered into Hyper-V sites.</span></span> <span data-ttu-id="702bf-117">Dostawca usługi Azure Site Recovery i agent usługi Recovery Services są instalowani na każdym hoście usługi Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="702bf-117">The Azure Site Recovery Provider and Recovery Services agent is installed on each Hyper-V host.</span></span> | <span data-ttu-id="702bf-118">Dostawca koordynuje replikację za pomocą usługi Site Recovery przez Internet.</span><span class="sxs-lookup"><span data-stu-id="702bf-118">The Provider orchestrates replication with Site Recovery over the internet.</span></span> <span data-ttu-id="702bf-119">Agent usługi Recovery Services obsługuje replikację danych.</span><span class="sxs-lookup"><span data-stu-id="702bf-119">The Recovery Services agent handles data replication.</span></span><br/><br/> <span data-ttu-id="702bf-120">Komunikacja zarówno ze strony dostawcy, jak i agenta, jest bezpieczna i szyfrowana.</span><span class="sxs-lookup"><span data-stu-id="702bf-120">Communications from both the Provider and the agent are secure and encrypted.</span></span> <span data-ttu-id="702bf-121">Zreplikowane dane w usłudze Azure Storage również są szyfrowane.</span><span class="sxs-lookup"><span data-stu-id="702bf-121">Replicated data in Azure storage is also encrypted.</span></span>
<span data-ttu-id="702bf-122">**Maszyny wirtualne funkcji Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="702bf-122">**Hyper-V VMs**</span></span> | <span data-ttu-id="702bf-123">Wymagana jest co najmniej jedna maszyna wirtualna na serwerze hosta funkcji Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="702bf-123">You need one or more VMs running on a Hyper-V host server.</span></span> | <span data-ttu-id="702bf-124">Niczego nie trzeba jawnie instalować na maszynach wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="702bf-124">Nothing needs to explicitly installed on VMs.</span></span>

<span data-ttu-id="702bf-125">Dowiedz się więcej o wymaganiach wstępnych dotyczących wdrożenia i wymaganiach dla każdego z tych składników z [macierzy obsługi](site-recovery-support-matrix-to-azure.md).</span><span class="sxs-lookup"><span data-stu-id="702bf-125">Learn about the deployment prerequisites and requirements for each of these components in the [support matrix](site-recovery-support-matrix-to-azure.md).</span></span>

<span data-ttu-id="702bf-126">**Rysunek 1: Replikacja z lokacji funkcji Hyper-V do platformy Azure**</span><span class="sxs-lookup"><span data-stu-id="702bf-126">**Figure 1: Hyper-V site to Azure replication**</span></span>

![Składniki](./media/hyper-v-site-walkthrough-architecture/arch-onprem-azure-hypervsite.png)


## <a name="replication-process"></a><span data-ttu-id="702bf-128">Proces replikacji</span><span class="sxs-lookup"><span data-stu-id="702bf-128">Replication process</span></span>

<span data-ttu-id="702bf-129">**Rysunek 2: Proces replikacji i odzyskiwania w przypadku replikacji funkcji Hyper-V do platformy Azure**</span><span class="sxs-lookup"><span data-stu-id="702bf-129">**Figure 2: Replication and recovery process for Hyper-V replication to Azure**</span></span>

![przepływ pracy](./media/hyper-v-site-walkthrough-architecture/arch-hyperv-azure-workflow.png)

### <a name="enable-protection"></a><span data-ttu-id="702bf-131">Włączanie ochrony</span><span class="sxs-lookup"><span data-stu-id="702bf-131">Enable protection</span></span>

1. <span data-ttu-id="702bf-132">Po włączeniu ochrony dla maszyny wirtualnej funkcji Hyper-V, w witrynie Azure Portal lub środowisku lokalnym, zostanie uruchomione zadanie **Włącz ochronę**.</span><span class="sxs-lookup"><span data-stu-id="702bf-132">After you enable protection for a Hyper-V VM, in the Azure portal or on-premises, the **Enable protection** starts.</span></span>
2. <span data-ttu-id="702bf-133">To zadanie sprawdza, czy maszyna spełnia wymagania wstępne, a następnie wywołuje metodę [CreateReplicationRelationship](https://msdn.microsoft.com/library/hh850036.aspx), aby skonfigurować replikację za pomocą określonych ustawień.</span><span class="sxs-lookup"><span data-stu-id="702bf-133">The job checks that the machine complies with prerequisites, before invoking the [CreateReplicationRelationship](https://msdn.microsoft.com/library/hh850036.aspx), to set up replication with the settings you've configured.</span></span>
3. <span data-ttu-id="702bf-134">Zadanie uruchamia replikację początkową, wywołując metodę [StartReplication](https://msdn.microsoft.com/library/hh850303.aspx), aby zainicjować pełną replikację maszyny wirtualnej i wysłać dyski wirtualne maszyny wirtualnej na platformę Azure.</span><span class="sxs-lookup"><span data-stu-id="702bf-134">The job starts initial replication by invoking the [StartReplication](https://msdn.microsoft.com/library/hh850303.aspx) method, to initialize a full VM replication, and send the VM's virtual disks to Azure.</span></span>
4. <span data-ttu-id="702bf-135">To zadanie możesz monitorować na karcie **Zadania**.</span><span class="sxs-lookup"><span data-stu-id="702bf-135">You can monitor the job in the **Jobs** tab.</span></span>
 
### <a name="replicate-the-initial-data"></a><span data-ttu-id="702bf-136">Replikowanie danych początkowych</span><span class="sxs-lookup"><span data-stu-id="702bf-136">Replicate the initial data</span></span>

1. <span data-ttu-id="702bf-137">Po wyzwoleniu replikacji początkowej tworzona jest [migawka maszyny wirtualnej funkcji Hyper-V](https://technet.microsoft.com/library/dd560637.aspx).</span><span class="sxs-lookup"><span data-stu-id="702bf-137">A [Hyper-V VM snapshot](https://technet.microsoft.com/library/dd560637.aspx) snapshot is taken when initial replication is triggered.</span></span>
2. <span data-ttu-id="702bf-138">Wirtualne dyski twarde są replikowane pojedynczo, dopóki wszystkie nie zostaną skopiowane na platformę Azure.</span><span class="sxs-lookup"><span data-stu-id="702bf-138">Virtual hard disks are replicated one by one until they're all copied to Azure.</span></span> <span data-ttu-id="702bf-139">Może to trochę potrwać, w zależności od rozmiaru maszyny wirtualnej i przepustowości sieci.</span><span class="sxs-lookup"><span data-stu-id="702bf-139">It could take a while, depending on the VM size, and network bandwidth.</span></span> <span data-ttu-id="702bf-140">Aby zoptymalizować użycie sieci, zobacz [Jak zarządzać użyciem przepustowości sieci przez ochronę za pomocą replikacji zasobów lokalnych do platformy Azure](https://support.microsoft.com/kb/3056159).</span><span class="sxs-lookup"><span data-stu-id="702bf-140">To optimize your network usage, see [How to manage on-premises to Azure protection network bandwidth usage](https://support.microsoft.com/kb/3056159).</span></span>
3. <span data-ttu-id="702bf-141">Jeśli podczas replikacji początkowej będzie miała miejsce zmiana dysku, składnik Replica Replication Tracker funkcji Hyper-V będzie śledził te zmiany jako dzienniki replikacji funkcji Hyper-V (hrl).</span><span class="sxs-lookup"><span data-stu-id="702bf-141">If disk changes occur while initial replication is in progress, the Hyper-V Replica Replication Tracker tracks those changes as Hyper-V Replication Logs (.hrl).</span></span> <span data-ttu-id="702bf-142">Te pliki znajdują się w tym samym folderze co dyski.</span><span class="sxs-lookup"><span data-stu-id="702bf-142">These files are located in the same folder as the disks.</span></span> <span data-ttu-id="702bf-143">Z każdym dyskiem jest skojarzony plik hrl, który zostanie wysłany do magazynu pomocniczego.</span><span class="sxs-lookup"><span data-stu-id="702bf-143">Each disk has an associated .hrl file that will be sent to secondary storage.</span></span>
4. <span data-ttu-id="702bf-144">Pliki migawki i dziennika zużywają zasoby dysku w trakcie replikacji początkowej.</span><span class="sxs-lookup"><span data-stu-id="702bf-144">The snapshot and log files consume disk resources while initial replication is in progress.</span></span>
5. <span data-ttu-id="702bf-145">Po zakończeniu replikacji początkowej migawka maszyny wirtualnej jest usuwana.</span><span class="sxs-lookup"><span data-stu-id="702bf-145">When the initial replication finishes, the VM snapshot is deleted.</span></span> <span data-ttu-id="702bf-146">Różnicowe zmiany dysku w dzienniku są synchronizowane i scalane z dyskiem nadrzędnym.</span><span class="sxs-lookup"><span data-stu-id="702bf-146">Delta disk changes in the log are synchronized and merged to the parent disk.</span></span>


### <a name="finalize-protection"></a><span data-ttu-id="702bf-147">Finalizowanie ochrony</span><span class="sxs-lookup"><span data-stu-id="702bf-147">Finalize protection</span></span>

1. <span data-ttu-id="702bf-148">Po zakończeniu replikacji początkowej zadanie **Finalizuj ochronę na maszynie wirtualnej** konfiguruje ustawienia sieciowe i inne ustawienia po replikacji, aby maszyna wirtualna była chroniona.</span><span class="sxs-lookup"><span data-stu-id="702bf-148">After the initial replication finishes, the **Finalize protection on the virtual machine** job configures network and other post-replication settings, so that the virtual machine is protected.</span></span>
2. <span data-ttu-id="702bf-149">W przypadku przeprowadzania replikacji na platformę Azure może być konieczne dostosowanie ustawień maszyny wirtualnej w taki sposób, aby była gotowa do przejścia w tryb failover.</span><span class="sxs-lookup"><span data-stu-id="702bf-149">If you're replicating to Azure, you might need to tweak the settings for the virtual machine so that it's ready for failover.</span></span> <span data-ttu-id="702bf-150">W tym momencie możesz uruchomić testowe przejście w tryb failover w celu sprawdzenia, czy wszystko działa zgodnie z oczekiwaniami.</span><span class="sxs-lookup"><span data-stu-id="702bf-150">At this point you can run a test failover to check everything is working as expected.</span></span>

### <a name="replicate-the-delta"></a><span data-ttu-id="702bf-151">Replikowanie danych różnicowych</span><span class="sxs-lookup"><span data-stu-id="702bf-151">Replicate the delta</span></span>

1. <span data-ttu-id="702bf-152">Po przeprowadzeniu replikacji początkowej rozpoczynana jest synchronizacja przyrostowa zgodnie z ustawieniami replikacji.</span><span class="sxs-lookup"><span data-stu-id="702bf-152">After the initial replication, delta synchronization begins, in accordance with replication settings.</span></span>
2. <span data-ttu-id="702bf-153">Składnik Replica Replication Tracker funkcji Hyper-V śledzi zmiany na wirtualnym dysku twardym w plikach hrl.</span><span class="sxs-lookup"><span data-stu-id="702bf-153">The Hyper-V Replica Replication Tracker tracks the changes to a virtual hard disk as .hrl files.</span></span> <span data-ttu-id="702bf-154">Z każdym dyskiem skonfigurowanym pod kątem replikacji jest skojarzony plik hrl.</span><span class="sxs-lookup"><span data-stu-id="702bf-154">Each disk that's configured for replication has an associated .hrl file.</span></span> <span data-ttu-id="702bf-155">Ten dziennik jest wysyłany do konta magazynu klienta po zakończeniu replikacji początkowej.</span><span class="sxs-lookup"><span data-stu-id="702bf-155">This log is sent to the customer's storage account after initial replication is complete.</span></span> <span data-ttu-id="702bf-156">Gdy plik dziennika jest przesyłany do platformy Azure, zmiany na dysku podstawowym są śledzone w innym pliku dziennika, w tym samym katalogu.</span><span class="sxs-lookup"><span data-stu-id="702bf-156">When a log is in transit to Azure, the changes in the primary disk are tracked in another log file, in the same directory.</span></span>
3. <span data-ttu-id="702bf-157">Podczas replikacji początkowej i różnicowej możesz monitorować maszynę wirtualną w widoku maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="702bf-157">During initial and delta replication, you can monitor the VM in the VM view.</span></span> <span data-ttu-id="702bf-158">[Dowiedz się więcej](site-recovery-monitoring-and-troubleshooting.md#monitor-replication-health-for-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="702bf-158">[Learn more](site-recovery-monitoring-and-troubleshooting.md#monitor-replication-health-for-virtual-machines).</span></span>  

### <a name="synchronize-replication"></a><span data-ttu-id="702bf-159">Synchronizowanie replikacji</span><span class="sxs-lookup"><span data-stu-id="702bf-159">Synchronize replication</span></span>

1. <span data-ttu-id="702bf-160">Jeśli replikacja różnicowa nie powiedzie się, a pełna replikacja byłaby kosztowna pod względem przepustowości lub czasu, maszyna wirtualna jest oznaczana do ponownej synchronizacji.</span><span class="sxs-lookup"><span data-stu-id="702bf-160">If delta replication fails, and a full replication would be costly in terms of bandwidth or time, then a VM is marked for resynchronization.</span></span> <span data-ttu-id="702bf-161">Jeśli na przykład pliki hrl będą zajmować 50% rozmiaru dysku, to maszyna wirtualna zostanie oznaczona do ponownej synchronizacji.</span><span class="sxs-lookup"><span data-stu-id="702bf-161">For example, if the .hrl files reach 50% of the disk size, then the VM will be marked for resynchronization.</span></span>
2.  <span data-ttu-id="702bf-162">Ponowna synchronizacja minimalizuje ilość wysyłanych danych dzięki obliczaniu sum kontrolnych źródłowych i docelowych maszyn wirtualnych oraz wysyłaniu tylko danych różnicowych.</span><span class="sxs-lookup"><span data-stu-id="702bf-162">Resynchronization minimizes the amount of data sent by computing checksums of the source and target virtual machines, and sending only the delta data.</span></span> <span data-ttu-id="702bf-163">Ponowna synchronizacja używa algorytmu dzielenia na fragmenty o stałym bloku. Za jego pomocą pliki źródłowe i docelowe są dzielone na stałe fragmenty.</span><span class="sxs-lookup"><span data-stu-id="702bf-163">Resynchronization uses a fixed-block chunking algorithm where source and target files are divided into fixed chunks.</span></span> <span data-ttu-id="702bf-164">Dla każdego fragmentu są generowane sumy kontrolne, które następnie są porównywane w celu określenia, które bloki ze źródła mają zostać zastosowane do celu.</span><span class="sxs-lookup"><span data-stu-id="702bf-164">Checksums for each chunk are generated and then compared to determine which blocks from the source need to be applied to the target.</span></span>
3. <span data-ttu-id="702bf-165">Po ukończeniu ponownej synchronizacji replikacja różnicowa powinna zostać wznowiona.</span><span class="sxs-lookup"><span data-stu-id="702bf-165">After resynchronization finishes, normal delta replication should resume.</span></span> <span data-ttu-id="702bf-166">Domyślnie ponowna synchronizacja jest zaplanowana do automatycznego uruchamiania poza godzinami pracy, ale możliwe jest uruchomienie ponownej synchronizacji maszyny wirtualnej ręcznie.</span><span class="sxs-lookup"><span data-stu-id="702bf-166">By default resynchronization is scheduled to run automatically outside office hours, but you can resynchronize a virtual machine manually.</span></span> <span data-ttu-id="702bf-167">Na przykład możesz wznowić ponowną synchronizację, jeśli wystąpi awaria sieci lub inna awaria.</span><span class="sxs-lookup"><span data-stu-id="702bf-167">For example, you can resume resynchronization if a network outage or another outage occurs.</span></span> <span data-ttu-id="702bf-168">W tym celu wybierz maszynę wirtualną w portalu i wybierz pozycję **Synchronizuj ponownie**.</span><span class="sxs-lookup"><span data-stu-id="702bf-168">To do this, select the VM in the portal > **Resynchronize**.</span></span>

    ![Ręczna ponowna synchronizacja](./media/hyper-v-site-walkthrough-architecture/image4.png)


### <a name="retry-logic"></a><span data-ttu-id="702bf-170">Logika ponowień</span><span class="sxs-lookup"><span data-stu-id="702bf-170">Retry logic</span></span>

<span data-ttu-id="702bf-171">Jeśli wystąpi błąd replikacji, może zostać użyty wbudowany mechanizm ponawiania.</span><span class="sxs-lookup"><span data-stu-id="702bf-171">If a replication error occurs, there's a built-in retry.</span></span> <span data-ttu-id="702bf-172">Tę logikę można podzielić na dwie kategorie:</span><span class="sxs-lookup"><span data-stu-id="702bf-172">This logic can be classified into two categories:</span></span>

<span data-ttu-id="702bf-173">**Kategoria**</span><span class="sxs-lookup"><span data-stu-id="702bf-173">**Category**</span></span> | <span data-ttu-id="702bf-174">**Szczegóły**</span><span class="sxs-lookup"><span data-stu-id="702bf-174">**Details**</span></span>
--- | ---
<span data-ttu-id="702bf-175">**Błąd nieodwracalny**</span><span class="sxs-lookup"><span data-stu-id="702bf-175">**Non-recoverable errors**</span></span> | <span data-ttu-id="702bf-176">Nie jest podejmowana próba ponowienia.</span><span class="sxs-lookup"><span data-stu-id="702bf-176">No retry is attempted.</span></span> <span data-ttu-id="702bf-177">Maszyna wirtualna będzie mieć stan **Krytyczny** i będzie wymagana interwencja administratora.</span><span class="sxs-lookup"><span data-stu-id="702bf-177">VM status will be **Critical**, and administrator intervention is required.</span></span> <span data-ttu-id="702bf-178">Przykłady błędów tego typu: przerwany łańcuch dysków VHD, nieprawidłowy stan repliki maszyny wirtualnej, błędy uwierzytelniania sieci (błędy autoryzacji), błędy Nie znaleziono maszyny wirtualnej (w przypadku autonomicznych serwerów funkcji Hyper-V)</span><span class="sxs-lookup"><span data-stu-id="702bf-178">Examples of these errors include: broken VHD chain; Invalid state for the replica VM; Network authentication errors: authorization errors; VM not found errors (for standalone Hyper-V servers)</span></span>
<span data-ttu-id="702bf-179">**Błędy odwracalne**</span><span class="sxs-lookup"><span data-stu-id="702bf-179">**Recoverable errors**</span></span> | <span data-ttu-id="702bf-180">Ponowne próby są wykonywane co interwał replikacji przy użyciu wycofywania wykładniczego zwiększającego interwał ponawiania prób od początku pierwszej próby o 1, 2, 4, 8 i 10 minut.</span><span class="sxs-lookup"><span data-stu-id="702bf-180">Retries occur every replication interval, using an exponential back-off that increases the retry interval from the start of the first attempt by 1, 2, 4, 8, and 10 minutes.</span></span> <span data-ttu-id="702bf-181">Jeśli błąd będzie się powtarzać, ponowne próby będą wykonywane co 30 minut.</span><span class="sxs-lookup"><span data-stu-id="702bf-181">If an error persists, retry every 30 minutes.</span></span> <span data-ttu-id="702bf-182">Są to na przykład błędy sieci, błędy małej ilości miejsca na dysku i warunki małej ilości pamięci</span><span class="sxs-lookup"><span data-stu-id="702bf-182">Examples include: network errors; low disk  errors; low memory conditions</span></span> |



## <a name="failover-and-failback-process"></a><span data-ttu-id="702bf-183">Proces pracy w trybie failover i podczas powrotu po awarii</span><span class="sxs-lookup"><span data-stu-id="702bf-183">Failover and failback process</span></span>

1. <span data-ttu-id="702bf-184">Planowane lub nieplanowane przejście w tryb [failover](site-recovery-failover.md) można uruchomić z maszyn wirtualnych funkcji Hyper-V do platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="702bf-184">You can run a planned or unplanned [failover](site-recovery-failover.md) from on-premises Hyper-V VMs to Azure.</span></span> <span data-ttu-id="702bf-185">Jeśli zostanie uruchomione planowane przejście w tryb failover, źródłowe maszyny wirtualne zostaną wyłączone w celu zapewnienia, że nie będzie miała miejsca utrata danych.</span><span class="sxs-lookup"><span data-stu-id="702bf-185">If you run a planned failover, then source VMs are shut down to ensure no data loss.</span></span>
2. <span data-ttu-id="702bf-186">W tryb failover można przełączyć pojedynczą maszynę lub można utworzyć [plany odzyskiwania](site-recovery-create-recovery-plans.md), aby zarządzać trybem failover na wielu maszynach.</span><span class="sxs-lookup"><span data-stu-id="702bf-186">You can fail over a single machine, or create [recovery plans](site-recovery-create-recovery-plans.md) to orchestrate failover of multiple machines.</span></span>
4. <span data-ttu-id="702bf-187">Po uruchomieniu trybu failover powinno być można zobaczyć utworzone repliki maszyn wirtualnych na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="702bf-187">After you run the failover, you should be able to see the created replica VMs in Azure.</span></span> <span data-ttu-id="702bf-188">Jeśli jest to wymagane, do maszyny wirtualnej można przypisać publiczny adres IP.</span><span class="sxs-lookup"><span data-stu-id="702bf-188">You can assign a public IP address to the VM if required.</span></span>
5. <span data-ttu-id="702bf-189">Następnie następuje zatwierdzenie trybu failover, aby można było rozpocząć uzyskiwanie dostępu do obciążenia z poziomu repliki maszyny wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="702bf-189">You then commit the failover to start accessing the workload from the replica Azure VM.</span></span>
6. <span data-ttu-id="702bf-190">Po ponownym udostępnieniu lokalnej lokacji głównej można do niej [powrócić po awarii](site-recovery-failback-from-azure-to-hyper-v.md).</span><span class="sxs-lookup"><span data-stu-id="702bf-190">When your primary on-premises site is available again, you can [fail back](site-recovery-failback-from-azure-to-hyper-v.md).</span></span> <span data-ttu-id="702bf-191">Planowane przejście w tryb failover jest rozpoczynane z platformy Azure do lokacji głównej.</span><span class="sxs-lookup"><span data-stu-id="702bf-191">You kick off a planned failover from Azure to the primary site.</span></span> <span data-ttu-id="702bf-192">W przypadku planowanego przejścia w tryb failover można wybrać powrót po awarii do tej samej maszyny wirtualnej lub do lokalizacji alternatywnej i zsynchronizować zmiany między platformą Azure i lokacją lokalną, aby zapobiec utracie danych.</span><span class="sxs-lookup"><span data-stu-id="702bf-192">For a planned failover you can select to failback to the same VM or to an alternate location, and synchronize changes between Azure and on-premises, to ensure no data loss.</span></span> <span data-ttu-id="702bf-193">Po utworzeniu lokalnych maszyn wirtualnych należy zatwierdzić tryb failover.</span><span class="sxs-lookup"><span data-stu-id="702bf-193">When VMs are created on-premises, you commit the failover.</span></span>




## <a name="next-steps"></a><span data-ttu-id="702bf-194">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="702bf-194">Next steps</span></span>

<span data-ttu-id="702bf-195">Przejdź do: [Krok 2: Przejrzyj wymagania wstępne dotyczące wdrażania](hyper-v-site-walkthrough-prerequisites.md)</span><span class="sxs-lookup"><span data-stu-id="702bf-195">Go to [Step 2: Review the deployment prerequisites](hyper-v-site-walkthrough-prerequisites.md)</span></span>
