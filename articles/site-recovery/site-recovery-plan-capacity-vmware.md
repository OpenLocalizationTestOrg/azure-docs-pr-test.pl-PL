---
title: "Planowanie wydajności i skalowania dla replikacji maszyn wirtualnych VMware do platformy Azure z usługą Azure Site Recovery | Dokumentacja firmy Microsoft"
description: "Użyj w tym artykule Planowanie wydajności i skalowania podczas replikowania maszyn wirtualnych VMware do platformy Azure z usługą Azure Site Recovery"
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: jwhit
editor: 
ms.assetid: 0a1cd8eb-a8f7-4228-ab84-9449e0b2887b
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 05/24/2017
ms.author: rayne
ms.openlocfilehash: 8b580ac239bfb6d7b633fb03d4cfb91b168b0610
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="plan-capacity-and-scaling-for-vmware-replication-with-azure-site-recovery"></a><span data-ttu-id="ee01e-103">Planowanie wydajności i skalowania w przypadku replikacji maszyn wirtualnych VMware z usługą Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="ee01e-103">Plan capacity and scaling for VMware replication with Azure Site Recovery</span></span>

<span data-ttu-id="ee01e-104">Użyj w tym artykule, aby zorientować się planowanie pojemności i skalowanie podczas replikowania lokalnych maszyn wirtualnych VMware i serwerów fizycznych do platformy Azure z [usługi Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="ee01e-104">Use this article to figure out planning for capacity and scaling, when replicating on-premises VMware VMs and physical servers to Azure with [Azure Site Recovery](site-recovery-overview.md).</span></span>

## <a name="how-do-i-start-capacity-planning"></a><span data-ttu-id="ee01e-105">Jak rozpocząć planowanie pojemności</span><span class="sxs-lookup"><span data-stu-id="ee01e-105">How do I start capacity planning?</span></span>

<span data-ttu-id="ee01e-106">Zbierz informacje o środowisku replikacji, uruchamiając [Azure lokacji odzyskiwania wdrożenia Planistę](https://aka.ms/asr-deployment-planner-doc) dla replikacji maszyn wirtualnych VMware.</span><span class="sxs-lookup"><span data-stu-id="ee01e-106">Gather information about your replication environment by running the [Azure Site Recovery Deployment Planner](https://aka.ms/asr-deployment-planner-doc) for VMware replication.</span></span> <span data-ttu-id="ee01e-107">[Dowiedz się więcej](site-recovery-deployment-planner.md) o tym narzędziu.</span><span class="sxs-lookup"><span data-stu-id="ee01e-107">[Learn more](site-recovery-deployment-planner.md) about this tool.</span></span> <span data-ttu-id="ee01e-108">Będzie zbierać informacje o zgodnych i niezgodnych maszyn wirtualnych, dysków dla maszyny Wirtualnej, a danych churn — na dysku.</span><span class="sxs-lookup"><span data-stu-id="ee01e-108">You'll gather information about compatible and incompatible VMs, disks per VM, and data churn per disk.</span></span> <span data-ttu-id="ee01e-109">Narzędzie obejmuje również wymagania dotyczące przepustowości sieci i infrastruktury platformy Azure wymagane do pomyślnego replikacji i testowania trybu failover.</span><span class="sxs-lookup"><span data-stu-id="ee01e-109">The tool also covers network bandwidth requirements, and the Azure infrastructure needed for successful replication and test failover.</span></span>

## <a name="capacity-considerations"></a><span data-ttu-id="ee01e-110">Zagadnienia dotyczące wydajności</span><span class="sxs-lookup"><span data-stu-id="ee01e-110">Capacity considerations</span></span>

<span data-ttu-id="ee01e-111">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="ee01e-111">**Component**</span></span> | <span data-ttu-id="ee01e-112">**Szczegóły**</span><span class="sxs-lookup"><span data-stu-id="ee01e-112">**Details**</span></span> |
--- | --- | ---
<span data-ttu-id="ee01e-113">**Replikacja**</span><span class="sxs-lookup"><span data-stu-id="ee01e-113">**Replication**</span></span> | <span data-ttu-id="ee01e-114">**Maksymalna szybkość codziennych zmian:** chronionej maszyny można używać tylko jednego serwera przetwarzania i serwer pojedynczego procesu może obsłużyć dziennym zmiany szybkości maksymalnie 2 TB.</span><span class="sxs-lookup"><span data-stu-id="ee01e-114">**Maximum daily change rate:** A protected machine can only use one process server, and a single process server can handle a daily change rate up to 2 TB.</span></span> <span data-ttu-id="ee01e-115">W związku z tym 2 TB jest maksymalną codziennych danych zmienić szybkość, z której jest obsługiwana dla komputera chronionego.</span><span class="sxs-lookup"><span data-stu-id="ee01e-115">Thus 2 TB is the maximum daily data change rate that’s supported for a protected machine.</span></span><br/><br/> <span data-ttu-id="ee01e-116">**Maksymalna przepustowość:** zreplikowanej maszyny mogą należeć do jednego konta magazynu na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="ee01e-116">**Maximum throughput:** A replicated machine can belong to one storage account in Azure.</span></span> <span data-ttu-id="ee01e-117">Konto magazynu w warstwie standardowa może obsługiwać maksymalnie 20 000 żądań na sekundę, i zaleca się utrzymać liczby operacji wejścia/wyjścia na sekundę (IOPS) dla maszyny źródłowej do 20 000.</span><span class="sxs-lookup"><span data-stu-id="ee01e-117">A standard storage account can handle a maximum of 20,000 requests per second, and we recommend that you keep the number of input/output operations per second (IOPS) across a source machine to 20,000.</span></span> <span data-ttu-id="ee01e-118">Na przykład jeśli masz maszyny źródłowej z dyskami 5, a każdy dysk generuje 120 IOPS (rozmiarze 8 KB) na maszynie źródłowej, następnie będzie w obrębie platformy Azure limitu IOPS dysku 500.</span><span class="sxs-lookup"><span data-stu-id="ee01e-118">For example, if you have a source machine with 5 disks, and each disk generates 120 IOPS (8K size) on the source machine, then it will be within the Azure per disk IOPS limit of 500.</span></span> <span data-ttu-id="ee01e-119">(Liczba kont magazynu wymagana jest równa maszyny źródłowej całkowita IOPS, podzielona przez 20 000).</span><span class="sxs-lookup"><span data-stu-id="ee01e-119">(The number of storage accounts required is equal to the total source machine IOPS, divided by 20,000.)</span></span>
<span data-ttu-id="ee01e-120">**Serwer konfiguracji**</span><span class="sxs-lookup"><span data-stu-id="ee01e-120">**Configuration server**</span></span> | <span data-ttu-id="ee01e-121">Serwer konfiguracji powinno być możliwe do obsługi codziennych pojemności szybkość zmian we wszystkich obciążeń uruchomionych na chronionych komputerach i musi wystarczającą przepustowość do ciągłej replikacji danych do usługi Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="ee01e-121">The configuration server should be able to handle the daily change rate capacity across all workloads running on protected machines, and needs sufficient bandwidth to continuously replicate data to Azure Storage.</span></span><br/><br/> <span data-ttu-id="ee01e-122">Najlepszym rozwiązaniem zlokalizować serwera konfiguracji na tej samej sieci, a segment sieci LAN jako maszyn, które chcesz chronić.</span><span class="sxs-lookup"><span data-stu-id="ee01e-122">As a best practice, locate the configuration server on the same network and LAN segment as the machines you want to protect.</span></span> <span data-ttu-id="ee01e-123">Może znajdować się w innej sieci, ale maszyny, które chcesz chronić powinny mieć widoczność warstwy 3 sieci do niego.</span><span class="sxs-lookup"><span data-stu-id="ee01e-123">It can be located on a different network, but machines you want to protect should have layer 3 network visibility to it.</span></span><br/><br/> <span data-ttu-id="ee01e-124">Rozmiar zalecenia dotyczące serwera konfiguracji są podsumowane w tabeli w następnej sekcji.</span><span class="sxs-lookup"><span data-stu-id="ee01e-124">Size recommendations for the configuration server are summarized in the table in the following section.</span></span>
<span data-ttu-id="ee01e-125">**Serwer przetwarzania**</span><span class="sxs-lookup"><span data-stu-id="ee01e-125">**Process server**</span></span> | <span data-ttu-id="ee01e-126">Pierwszy serwer przetwarzania jest instalowany domyślnie na serwerze konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ee01e-126">The first process server is installed by default on the configuration server.</span></span> <span data-ttu-id="ee01e-127">Można wdrożyć serwery dodatkowych procesów do skalowania środowiska.</span><span class="sxs-lookup"><span data-stu-id="ee01e-127">You can deploy additional process servers to scale your environment.</span></span> <br/><br/> <span data-ttu-id="ee01e-128">Serwer przetwarzania odbiera dane replikacji z chronionych maszyn i optymalizuje je przy użyciu pamięci podręcznej, kompresji i szyfrowania.</span><span class="sxs-lookup"><span data-stu-id="ee01e-128">The process server receives replication data from protected machines, and optimizes it with caching, compression, and encryption.</span></span> <span data-ttu-id="ee01e-129">Następnie wysyła dane na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="ee01e-129">Then it sends the data to Azure.</span></span> <span data-ttu-id="ee01e-130">Proces maszyny serwera ma wystarczające zasoby, aby wykonać te zadania.</span><span class="sxs-lookup"><span data-stu-id="ee01e-130">The process server machine should have sufficient resources to perform these tasks.</span></span><br/><br/> <span data-ttu-id="ee01e-131">Serwer przetwarzania korzysta z pamięci podręcznej opartej na dysku.</span><span class="sxs-lookup"><span data-stu-id="ee01e-131">The process server uses a disk-based cache.</span></span> <span data-ttu-id="ee01e-132">Użyj dysku pamięci podręcznej oddzielne 600 GB lub więcej do obsługi zmian danych przechowywanych w przypadku awarii lub wąskich gardeł.</span><span class="sxs-lookup"><span data-stu-id="ee01e-132">Use a separate cache disk of 600 GB or more to handle data changes stored in the event of a network bottleneck or outage.</span></span>

## <a name="size-recommendations-for-the-configuration-server"></a><span data-ttu-id="ee01e-133">Rozmiar zalecenia dotyczące serwera konfiguracji</span><span class="sxs-lookup"><span data-stu-id="ee01e-133">Size recommendations for the configuration server</span></span>

<span data-ttu-id="ee01e-134">**PROCESOR CPU**</span><span class="sxs-lookup"><span data-stu-id="ee01e-134">**CPU**</span></span> | <span data-ttu-id="ee01e-135">**Pamięci**</span><span class="sxs-lookup"><span data-stu-id="ee01e-135">**Memory**</span></span> | <span data-ttu-id="ee01e-136">**Rozmiar pamięci podręcznej dysku**</span><span class="sxs-lookup"><span data-stu-id="ee01e-136">**Cache disk size**</span></span> | <span data-ttu-id="ee01e-137">**Częstotliwość zmian danych**</span><span class="sxs-lookup"><span data-stu-id="ee01e-137">**Data change rate**</span></span> | <span data-ttu-id="ee01e-138">**Chronione maszyny**</span><span class="sxs-lookup"><span data-stu-id="ee01e-138">**Protected machines**</span></span>
--- | --- | --- | --- | ---
<span data-ttu-id="ee01e-139">8 Vcpu (2 sockets * 4 rdzenie @ 2,5 GHz [GHz])</span><span class="sxs-lookup"><span data-stu-id="ee01e-139">8 vCPUs (2 sockets * 4 cores @ 2.5 gigahertz [GHz])</span></span> | <span data-ttu-id="ee01e-140">16 GB</span><span class="sxs-lookup"><span data-stu-id="ee01e-140">16 GB</span></span> | <span data-ttu-id="ee01e-141">300 GB</span><span class="sxs-lookup"><span data-stu-id="ee01e-141">300 GB</span></span> | <span data-ttu-id="ee01e-142">500 GB lub mniej</span><span class="sxs-lookup"><span data-stu-id="ee01e-142">500 GB or less</span></span> | <span data-ttu-id="ee01e-143">Replikowanie maszyn mniej niż 100.</span><span class="sxs-lookup"><span data-stu-id="ee01e-143">Replicate less than 100 machines.</span></span>
<span data-ttu-id="ee01e-144">12 Vcpu (2 sockets * 6 rdzeni @ 2,5 GHz)</span><span class="sxs-lookup"><span data-stu-id="ee01e-144">12 vCPUs (2 sockets * 6 cores @ 2.5 GHz)</span></span> | <span data-ttu-id="ee01e-145">18 GB</span><span class="sxs-lookup"><span data-stu-id="ee01e-145">18 GB</span></span> | <span data-ttu-id="ee01e-146">600 GB</span><span class="sxs-lookup"><span data-stu-id="ee01e-146">600 GB</span></span> | <span data-ttu-id="ee01e-147">500 GB do 1 TB</span><span class="sxs-lookup"><span data-stu-id="ee01e-147">500 GB to 1 TB</span></span> | <span data-ttu-id="ee01e-148">Replikują między 100 150 maszyn.</span><span class="sxs-lookup"><span data-stu-id="ee01e-148">Replicate between 100-150 machines.</span></span>
<span data-ttu-id="ee01e-149">16 Vcpu (2 sockets * 8 rdzeni @ 2,5 GHz)</span><span class="sxs-lookup"><span data-stu-id="ee01e-149">16 vCPUs (2 sockets * 8 cores @ 2.5 GHz)</span></span> | <span data-ttu-id="ee01e-150">32 GB</span><span class="sxs-lookup"><span data-stu-id="ee01e-150">32 GB</span></span> | <span data-ttu-id="ee01e-151">1 TB</span><span class="sxs-lookup"><span data-stu-id="ee01e-151">1 TB</span></span> | <span data-ttu-id="ee01e-152">1 TB do 2 TB</span><span class="sxs-lookup"><span data-stu-id="ee01e-152">1 TB to 2 TB</span></span> | <span data-ttu-id="ee01e-153">Replikują między 150 – 200 maszyn.</span><span class="sxs-lookup"><span data-stu-id="ee01e-153">Replicate between 150-200 machines.</span></span>
<span data-ttu-id="ee01e-154">Wdrażanie inny serwer przetwarzania</span><span class="sxs-lookup"><span data-stu-id="ee01e-154">Deploy another process server</span></span> | | | <span data-ttu-id="ee01e-155">> 2 TB</span><span class="sxs-lookup"><span data-stu-id="ee01e-155">> 2 TB</span></span> | <span data-ttu-id="ee01e-156">Wdrażanie serwerów dodatkowych procesów, Jeśli replikujesz ponad 200 maszyn lub zmiana codziennych danych szybkość przekracza 2 TB.</span><span class="sxs-lookup"><span data-stu-id="ee01e-156">Deploy additional process servers if you're replicating more than 200 machines, or if the daily data change rate exceeds 2 TB.</span></span>

<span data-ttu-id="ee01e-157">Gdzie:</span><span class="sxs-lookup"><span data-stu-id="ee01e-157">Where:</span></span>

* <span data-ttu-id="ee01e-158">Każda maszyna źródłowa jest skonfigurowany z 3 dyski 100 GB.</span><span class="sxs-lookup"><span data-stu-id="ee01e-158">Each source machine is configured with 3 disks of 100 GB each.</span></span>
* <span data-ttu-id="ee01e-159">My używamy najlepszymi magazynu 8 dysków SAS 10 k obr. / min, z RAID 10 dla pamięci podręcznej dysku pomiarów.</span><span class="sxs-lookup"><span data-stu-id="ee01e-159">We used benchmarking storage of 8 SAS drives of 10 K RPM, with RAID 10, for cache disk measurements.</span></span>

## <a name="size-recommendations-for-the-process-server"></a><span data-ttu-id="ee01e-160">Zalecenia dotyczące rozmiaru serwera przetwarzania</span><span class="sxs-lookup"><span data-stu-id="ee01e-160">Size recommendations for the process server</span></span>

<span data-ttu-id="ee01e-161">Jeśli musisz ochrony ponad 200 maszyn lub szybkość codziennych zmian jest większa niż 2 TB, można dodać procesu serwerów do obsługi obciążenia replikacji.</span><span class="sxs-lookup"><span data-stu-id="ee01e-161">If you need to protect more than 200 machines, or the daily change rate is greater than 2 TB, you can add process servers to handle the replication load.</span></span> <span data-ttu-id="ee01e-162">Aby skalować w poziomie, można:</span><span class="sxs-lookup"><span data-stu-id="ee01e-162">To scale out, you can:</span></span>

* <span data-ttu-id="ee01e-163">Zwiększ liczbę serwerów konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ee01e-163">Increase the number of configuration servers.</span></span> <span data-ttu-id="ee01e-164">Na przykład można chronić maksymalnie 400 maszyn przy użyciu dwóch serwerów konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ee01e-164">For example, you can protect up to 400 machines with two configuration servers.</span></span>
* <span data-ttu-id="ee01e-165">Dodawanie kolejnych serwerów procesu i ich używać do obsługi ruchu zamiast (lub oprócz) serwera konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ee01e-165">Add more process servers, and use these to handle traffic instead of (or in addition to) the configuration server.</span></span>

<span data-ttu-id="ee01e-166">W poniższej tabeli opisano scenariusz, w którym:</span><span class="sxs-lookup"><span data-stu-id="ee01e-166">The following table describes a scenario in which:</span></span>

* <span data-ttu-id="ee01e-167">Nie planujesz użyć konfiguracji serwera jako serwera przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="ee01e-167">You're not planning to use the configuration server as a process server.</span></span>
* <span data-ttu-id="ee01e-168">Po skonfigurowaniu serwera dodatkowego przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="ee01e-168">You've set up an additional process server.</span></span>
* <span data-ttu-id="ee01e-169">Skonfigurowano chronionych maszyn wirtualnych do używania serwera dodatkowych procesów.</span><span class="sxs-lookup"><span data-stu-id="ee01e-169">You've configured protected virtual machines to use the additional process server.</span></span>
* <span data-ttu-id="ee01e-170">Każda maszyna chronionego źródła jest skonfigurowany z trzech dysków 100 GB.</span><span class="sxs-lookup"><span data-stu-id="ee01e-170">Each protected source machine is configured with three disks of 100 GB each.</span></span>

<span data-ttu-id="ee01e-171">**Serwer konfiguracji**</span><span class="sxs-lookup"><span data-stu-id="ee01e-171">**Configuration server**</span></span> | <span data-ttu-id="ee01e-172">**Serwer przetwarzania dodatkowe**</span><span class="sxs-lookup"><span data-stu-id="ee01e-172">**Additional process server**</span></span> | <span data-ttu-id="ee01e-173">**Rozmiar pamięci podręcznej dysku**</span><span class="sxs-lookup"><span data-stu-id="ee01e-173">**Cache disk size**</span></span> | <span data-ttu-id="ee01e-174">**Częstotliwość zmian danych**</span><span class="sxs-lookup"><span data-stu-id="ee01e-174">**Data change rate**</span></span> | <span data-ttu-id="ee01e-175">**Chronione maszyny**</span><span class="sxs-lookup"><span data-stu-id="ee01e-175">**Protected machines**</span></span>
--- | --- | --- | --- | ---
<span data-ttu-id="ee01e-176">8 Vcpu (2 sockets * 4 rdzenie @ 2,5 GHz), 16 GB pamięci</span><span class="sxs-lookup"><span data-stu-id="ee01e-176">8 vCPUs (2 sockets * 4 cores @ 2.5 GHz), 16 GB memory</span></span> | <span data-ttu-id="ee01e-177">4 Vcpu (2 sockets * 2 rdzenie @ 2,5 GHz), 8 GB pamięci</span><span class="sxs-lookup"><span data-stu-id="ee01e-177">4 vCPUs (2 sockets * 2 cores @ 2.5 GHz), 8 GB memory</span></span> | <span data-ttu-id="ee01e-178">300 GB</span><span class="sxs-lookup"><span data-stu-id="ee01e-178">300 GB</span></span> | <span data-ttu-id="ee01e-179">250 GB lub mniej</span><span class="sxs-lookup"><span data-stu-id="ee01e-179">250 GB or less</span></span> | <span data-ttu-id="ee01e-180">Replikowanie maszyn 85 lub mniej.</span><span class="sxs-lookup"><span data-stu-id="ee01e-180">Replicate 85 or fewer machines.</span></span>
<span data-ttu-id="ee01e-181">8 Vcpu (2 sockets * 4 rdzenie @ 2,5 GHz), 16 GB pamięci</span><span class="sxs-lookup"><span data-stu-id="ee01e-181">8 vCPUs (2 sockets * 4 cores @ 2.5 GHz), 16 GB memory</span></span> | <span data-ttu-id="ee01e-182">8 Vcpu (2 sockets * 4 rdzenie @ 2,5 GHz), 12 GB pamięci RAM</span><span class="sxs-lookup"><span data-stu-id="ee01e-182">8 vCPUs (2 sockets * 4 cores @ 2.5 GHz), 12 GB memory</span></span> | <span data-ttu-id="ee01e-183">600 GB</span><span class="sxs-lookup"><span data-stu-id="ee01e-183">600 GB</span></span> | <span data-ttu-id="ee01e-184">250 GB do 1 TB</span><span class="sxs-lookup"><span data-stu-id="ee01e-184">250 GB to 1 TB</span></span> | <span data-ttu-id="ee01e-185">Replikują między 85 150 maszyny.</span><span class="sxs-lookup"><span data-stu-id="ee01e-185">Replicate between 85-150 machines.</span></span>
<span data-ttu-id="ee01e-186">12 Vcpu (2 sockets * 6 rdzeni @ 2,5 GHz), 18 GB pamięci</span><span class="sxs-lookup"><span data-stu-id="ee01e-186">12 vCPUs (2 sockets * 6 cores @ 2.5 GHz), 18 GB memory</span></span> | <span data-ttu-id="ee01e-187">12 Vcpu (2 sockets * 6 rdzeni @ 2,5 GHz) 24 GB pamięci</span><span class="sxs-lookup"><span data-stu-id="ee01e-187">12 vCPUs (2 sockets * 6 cores @ 2.5 GHz) 24 GB memory</span></span> | <span data-ttu-id="ee01e-188">1 TB</span><span class="sxs-lookup"><span data-stu-id="ee01e-188">1 TB</span></span> | <span data-ttu-id="ee01e-189">1 TB do 2 TB</span><span class="sxs-lookup"><span data-stu-id="ee01e-189">1 TB to 2 TB</span></span> | <span data-ttu-id="ee01e-190">Replikują między 150 225 komputerów.</span><span class="sxs-lookup"><span data-stu-id="ee01e-190">Replicate between 150-225 machines.</span></span>

<span data-ttu-id="ee01e-191">Sposób, w którym można skalować serwery zależy od swoich preferencji modelu skalowania w górę i skalowania w poziomie.</span><span class="sxs-lookup"><span data-stu-id="ee01e-191">The way in which you scale your servers depends on your preference for a scale-up or scale-out model.</span></span>  <span data-ttu-id="ee01e-192">Skalowanie w górę przez wdrożenie kilku konfiguracje i serwerów procesu lub skalowanie w poziomie przez wdrożenie więcej serwerów z mniejszą liczbą zasobów.</span><span class="sxs-lookup"><span data-stu-id="ee01e-192">You scale up by deploying a few high-end configuration and process servers, or scale out by deploying more servers with fewer resources.</span></span> <span data-ttu-id="ee01e-193">Na przykład jeśli musisz chronić 220 maszyny, wykonaj jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="ee01e-193">For example, if you need to protect 220 machines, you could do either of the following:</span></span>

* <span data-ttu-id="ee01e-194">Konfigurowanie serwera konfiguracji z 12 vCPU, 18 GB pamięci, a serwerem dodatkowych procesów z 12 vCPU, 24 GB pamięci.</span><span class="sxs-lookup"><span data-stu-id="ee01e-194">Set up the configuration server with 12 vCPU, 18 GB of memory, and an additional process server with 12 vCPU, 24 GB of memory.</span></span> <span data-ttu-id="ee01e-195">Skonfiguruj chronione maszyny do korzystania z serwera dodatkowych procesów.</span><span class="sxs-lookup"><span data-stu-id="ee01e-195">Configure protected machines to use the additional process server only.</span></span>
* <span data-ttu-id="ee01e-196">Skonfiguruj dwa serwery konfiguracji (vCPU, 16 GB pamięci RAM 2 x 8) i dwa serwery dodatkowych procesów (vCPU 1 x 8 i 4 maszyny vCPU x 1 do uchwytu 135 + 85 [220]).</span><span class="sxs-lookup"><span data-stu-id="ee01e-196">Set up two configuration servers (2 x 8 vCPU, 16 GB RAM) and two additional process servers (1 x 8 vCPU and 4 vCPU x 1 to handle 135 + 85 [220] machines).</span></span> <span data-ttu-id="ee01e-197">Skonfiguruj chronione maszyny, aby korzystały z serwerów dodatkowych procesów.</span><span class="sxs-lookup"><span data-stu-id="ee01e-197">Configure protected machines to use the additional process servers only.</span></span>


## <a name="control-network-bandwidth"></a><span data-ttu-id="ee01e-198">Sterowania przepustowością sieci</span><span class="sxs-lookup"><span data-stu-id="ee01e-198">Control network bandwidth</span></span>

<span data-ttu-id="ee01e-199">Po używano [narzędzie wdrożenia Planistę](site-recovery-deployment-planner.md) do obliczania wartości przepustowości wymagane dla replikacji (Replikacja początkowa i następnie delta) można kontrolować, ilość przepustowości używanej w ramach replikacji przy użyciu kilku opcji:</span><span class="sxs-lookup"><span data-stu-id="ee01e-199">After you've used the [the Deployment Planner tool](site-recovery-deployment-planner.md) to calculate the bandwidth you need for replication (the initial replication and then delta), you can control the amount of bandwidth used for replication using a couple of options:</span></span>

* <span data-ttu-id="ee01e-200">**Ograniczanie przepustowości**: VMware ruchu, który replikuje Azure przechodzi przez serwer określonego procesu.</span><span class="sxs-lookup"><span data-stu-id="ee01e-200">**Throttle bandwidth**: VMware traffic that replicates to Azure goes through a specific process server.</span></span> <span data-ttu-id="ee01e-201">Możesz ograniczyć przepustowość na maszynach działających jako serwery procesu.</span><span class="sxs-lookup"><span data-stu-id="ee01e-201">You can throttle bandwidth on the machines running as process servers.</span></span>
* <span data-ttu-id="ee01e-202">**Wpływ przepustowości**: może mieć wpływ na przepustowość wykorzystywaną podczas replikacji przy użyciu kilku kluczy rejestru:</span><span class="sxs-lookup"><span data-stu-id="ee01e-202">**Influence bandwidth**: You can influence the bandwidth used for replication by using a couple of registry keys:</span></span>
  * <span data-ttu-id="ee01e-203">**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\UploadThreadsPerVM** wartość rejestru określa liczbę wątków, które są używane do transferu danych (Replikacja początkowa lub przyrostowa) dysku.</span><span class="sxs-lookup"><span data-stu-id="ee01e-203">The **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\UploadThreadsPerVM** registry value specifies the number of threads that are used for data transfer (initial or delta replication) of a disk.</span></span> <span data-ttu-id="ee01e-204">Wyższa wartość zwiększa przepustowość sieciową używaną podczas replikacji.</span><span class="sxs-lookup"><span data-stu-id="ee01e-204">A higher value increases the network bandwidth used for replication.</span></span>
  * <span data-ttu-id="ee01e-205">**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\DownloadThreadsPerVM** określa liczbę wątków używanych do transferu danych podczas powrotu po awarii.</span><span class="sxs-lookup"><span data-stu-id="ee01e-205">The **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\DownloadThreadsPerVM** specifies the number of threads used for data transfer during failback.</span></span>

### <a name="throttle-bandwidth"></a><span data-ttu-id="ee01e-206">Ograniczanie przepustowości</span><span class="sxs-lookup"><span data-stu-id="ee01e-206">Throttle bandwidth</span></span>

1. <span data-ttu-id="ee01e-207">Otwieranie przystawki MMC kopia zapasowa Azure na komputerze działającym jako serwer przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="ee01e-207">Open the Azure Backup MMC snap-in on the machine acting as the process server.</span></span> <span data-ttu-id="ee01e-208">Domyślnie skrót do utworzenia kopii zapasowej jest dostępny na pulpicie lub w następującym folderze: C:\Program Files\Microsoft Azure Recovery Services Agent\bin\wabadmin.</span><span class="sxs-lookup"><span data-stu-id="ee01e-208">By default, a shortcut for Backup is available on the desktop, or in the following folder: C:\Program Files\Microsoft Azure Recovery Services Agent\bin\wabadmin.</span></span>
2. <span data-ttu-id="ee01e-209">W przystawce kliknij pozycję **Zmień właściwości**.</span><span class="sxs-lookup"><span data-stu-id="ee01e-209">In the snap-in, click **Change Properties**.</span></span>

    ![Zrzut ekranu Azure Backup MMC przystawki opcję, aby zmienić właściwości](./media/site-recovery-vmware-to-azure/throttle1.png)
3. <span data-ttu-id="ee01e-211">Na **ograniczania** wybierz opcję **włączyć użycia przepustowości połączenia internetowego do operacji tworzenia kopii zapasowej**.</span><span class="sxs-lookup"><span data-stu-id="ee01e-211">On the **Throttling** tab, select **Enable internet bandwidth usage throttling for backup operations**.</span></span> <span data-ttu-id="ee01e-212">Ustaw limity dla pracy oraz innych niż godziny pracy.</span><span class="sxs-lookup"><span data-stu-id="ee01e-212">Set the limits for work and non-work hours.</span></span> <span data-ttu-id="ee01e-213">Prawidłowy zakres: od 512 Kb/s do 102 Mb/s na sekundę.</span><span class="sxs-lookup"><span data-stu-id="ee01e-213">Valid ranges are from 512 Kbps to 102 Mbps per second.</span></span>

    ![Okno dialogowe zrzut ekranu Azure Backup właściwości](./media/site-recovery-vmware-to-azure/throttle2.png)

<span data-ttu-id="ee01e-215">Możesz też użyć polecenia cmdlet [Set-OBMachineSetting](https://technet.microsoft.com/library/hh770409.aspx), aby ustawić ograniczanie przepływności.</span><span class="sxs-lookup"><span data-stu-id="ee01e-215">You can also use the [Set-OBMachineSetting](https://technet.microsoft.com/library/hh770409.aspx) cmdlet to set throttling.</span></span> <span data-ttu-id="ee01e-216">Oto przykład:</span><span class="sxs-lookup"><span data-stu-id="ee01e-216">Here's a sample:</span></span>

    $mon = [System.DayOfWeek]::Monday
    $tue = [System.DayOfWeek]::Tuesday
    Set-OBMachineSetting -WorkDay $mon, $tue -StartWorkHour "9:00:00" -EndWorkHour "18:00:00" -WorkHourBandwidth  (512*1024) -NonWorkHourBandwidth (2048*1024)

<span data-ttu-id="ee01e-217">**Set-OBMachineSetting -NoThrottle** wskazuje, że ograniczanie przepływności nie jest wymagane.</span><span class="sxs-lookup"><span data-stu-id="ee01e-217">**Set-OBMachineSetting -NoThrottle** indicates that no throttling is required.</span></span>

### <a name="influence-network-bandwidth-for-a-vm"></a><span data-ttu-id="ee01e-218">Wpływ na przepustowość sieci dla maszyny Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="ee01e-218">Influence network bandwidth for a VM</span></span>

1. <span data-ttu-id="ee01e-219">W rejestrze maszyny Wirtualnej, przejdź do **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\Replication**.</span><span class="sxs-lookup"><span data-stu-id="ee01e-219">In the VM's registry, navigate to **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\Replication**.</span></span>
   * <span data-ttu-id="ee01e-220">Wpływ na przepustowość ruchu replikacji dysku, zmodyfikuj wartość **UploadThreadsPerVM**, lub Utwórz klucz, jeśli nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="ee01e-220">To influence the bandwidth traffic on a replicating disk, modify the value of **UploadThreadsPerVM**, or create the key if it doesn't exist.</span></span>
   * <span data-ttu-id="ee01e-221">Wpływ przepustowości dla ruchu powrotu po awarii z platformy Azure, zmodyfikuj wartość **DownloadThreadsPerVM**.</span><span class="sxs-lookup"><span data-stu-id="ee01e-221">To influence the bandwidth for failback traffic from Azure, modify the value of **DownloadThreadsPerVM**.</span></span>
2. <span data-ttu-id="ee01e-222">Wartość domyślna to 4.</span><span class="sxs-lookup"><span data-stu-id="ee01e-222">The default value is 4.</span></span> <span data-ttu-id="ee01e-223">W sieci „o nadmiarowych zasobach” należy zmienić wartości domyślne tych kluczy rejestru.</span><span class="sxs-lookup"><span data-stu-id="ee01e-223">In an “overprovisioned” network, these registry keys should be changed from the default values.</span></span> <span data-ttu-id="ee01e-224">Wartość maksymalna to 32.</span><span class="sxs-lookup"><span data-stu-id="ee01e-224">The maximum is 32.</span></span> <span data-ttu-id="ee01e-225">Monitoruj ruch, aby zoptymalizować tę wartość.</span><span class="sxs-lookup"><span data-stu-id="ee01e-225">Monitor traffic to optimize the value.</span></span>


## <a name="deploy-additional-process-servers"></a><span data-ttu-id="ee01e-226">Wdrażanie serwerów dodatkowych procesów</span><span class="sxs-lookup"><span data-stu-id="ee01e-226">Deploy additional process servers</span></span>

<span data-ttu-id="ee01e-227">Jeśli masz skalowania mieszczą się w danym wdrożeniu ponad 200 maszyn źródłowych, lub łączna codziennie churn — liczba więcej niż 2 TB, potrzebujesz dodatkowych procesów serwerów do obsługi natężenia ruchu.</span><span class="sxs-lookup"><span data-stu-id="ee01e-227">If you have to scale out your deployment beyond 200 source machines, or you have a total daily churn rate of more than 2 TB, you need additional process servers to handle the traffic volume.</span></span> <span data-ttu-id="ee01e-228">Wykonaj te instrukcje, aby skonfigurować serwer przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="ee01e-228">Follow these instructions to set up the process server.</span></span> <span data-ttu-id="ee01e-229">Po skonfigurowaniu serwera, można dokonać migracji maszyn źródłowych z niego korzystać.</span><span class="sxs-lookup"><span data-stu-id="ee01e-229">After setting up the server, you migrate source machines to use it.</span></span>

1. <span data-ttu-id="ee01e-230">W **serwerów usługi Site Recovery**, kliknij serwer konfiguracji, a następnie kliknij przycisk **serwera przetwarzania**.</span><span class="sxs-lookup"><span data-stu-id="ee01e-230">In **Site Recovery servers**, click the configuration server, and then click **Process Server**.</span></span>

    ![Zrzut ekranu usługi Site Recovery serwerów opcję, aby dodać serwer przetwarzania](./media/site-recovery-vmware-to-azure/migrate-ps1.png)
2. <span data-ttu-id="ee01e-232">W **typ serwera**, kliknij przycisk **serwera przetwarzania (lokalnego)**.</span><span class="sxs-lookup"><span data-stu-id="ee01e-232">In **Server type**, click **Process server (on-premises)**.</span></span>

    ![Zrzut ekranu serwera przetwarzania, okno dialogowe](./media/site-recovery-vmware-to-azure/migrate-ps2.png)
3. <span data-ttu-id="ee01e-234">Pobierz plik Instalatora Unified usługi Site Recovery, a następnie uruchom go, aby zainstalować serwer przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="ee01e-234">Download the Site Recovery Unified Setup file, and run it to install the process server.</span></span> <span data-ttu-id="ee01e-235">To również rejestruje go w magazynie.</span><span class="sxs-lookup"><span data-stu-id="ee01e-235">This also registers it in the vault.</span></span>
4. <span data-ttu-id="ee01e-236">W obszarze **Przed rozpoczęciem** wybierz pozycję **Dodaj dodatkowe serwery przetwarzania w celu zwiększenia skali wdrożenia**.</span><span class="sxs-lookup"><span data-stu-id="ee01e-236">In **Before you begin**, select **Add additional process servers to scale out deployment**.</span></span>
5. <span data-ttu-id="ee01e-237">Ukończ pracę kreatora w taki sam sposób jak podczas możesz [Konfigurowanie](#step-2-set-up-the-source-environment) serwera konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ee01e-237">Complete the wizard in the same way you did when you [set up](#step-2-set-up-the-source-environment) the configuration server.</span></span>

    ![Zrzut ekranu z Instalatora Azure Site Recovery Unified Kreatora](./media/site-recovery-vmware-to-azure/add-ps1.png)
6. <span data-ttu-id="ee01e-239">W **szczegóły konfiguracji serwera**, podaj adres IP serwera konfiguracji i hasło.</span><span class="sxs-lookup"><span data-stu-id="ee01e-239">In **Configuration Server Details**, specify the IP address of the configuration server, and the passphrase.</span></span> <span data-ttu-id="ee01e-240">Aby uzyskać hasło, uruchom **[SiteRecoveryInstallationFolder]\home\sysystems\bin\genpassphrase.exe – n** na serwerze konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ee01e-240">To obtain the passphrase, run **[SiteRecoveryInstallationFolder]\home\sysystems\bin\genpassphrase.exe –n** on the configuration server.</span></span>

    ![Zrzut ekranu konfiguracji szczegóły serwera strony](./media/site-recovery-vmware-to-azure/add-ps2.png)

### <a name="migrate-machines-to-use-the-new-process-server"></a><span data-ttu-id="ee01e-242">Migruj maszyny, aby użyć nowego serwera przetwarzania</span><span class="sxs-lookup"><span data-stu-id="ee01e-242">Migrate machines to use the new process server</span></span>
1. <span data-ttu-id="ee01e-243">W **ustawienia** > **serwerów usługi Site Recovery**, kliknij serwer konfiguracji, a następnie rozwiń węzeł **przetworzyć serwerów**.</span><span class="sxs-lookup"><span data-stu-id="ee01e-243">In **Settings** > **Site Recovery servers**, click the configuration server, and then expand **Process servers**.</span></span>

    ![Zrzut ekranu serwera przetwarzania, okno dialogowe](./media/site-recovery-vmware-to-azure/migrate-ps2.png)
2. <span data-ttu-id="ee01e-245">Kliknij prawym przyciskiem myszy serwer przetwarzania aktualnie w użyciu, a następnie kliknij przycisk **przełącznika**.</span><span class="sxs-lookup"><span data-stu-id="ee01e-245">Right-click the process server currently in use, and click **Switch**.</span></span>

    ![Zrzut ekranu konfiguracji serwera, okno dialogowe](./media/site-recovery-vmware-to-azure/migrate-ps3.png)
3. <span data-ttu-id="ee01e-247">W **wybierz docelowy serwer przetwarzania**, wybierz nowego serwera przetwarzania, którego chcesz użyć, a następnie wybierz maszyny wirtualne, które będzie obsługiwać serwer.</span><span class="sxs-lookup"><span data-stu-id="ee01e-247">In **Select target process server**, select the new process server you want to use, and then select the virtual machines that the server will handle.</span></span> <span data-ttu-id="ee01e-248">Kliknij ikonę informacji, aby uzyskać informacje o serwerze.</span><span class="sxs-lookup"><span data-stu-id="ee01e-248">Click the information icon to get information about the server.</span></span> <span data-ttu-id="ee01e-249">Pomaga załadować decyzji, zostanie wyświetlony średni ilości miejsca, która jest potrzebna do replikowania każdego wybraną maszynę wirtualną do nowego serwera przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="ee01e-249">To help you make load decisions, the average space that's needed to replicate each selected virtual machine to the new process server is displayed.</span></span> <span data-ttu-id="ee01e-250">Kliknij znacznik wyboru, aby rozpocząć replikację do nowego serwera przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="ee01e-250">Click the check mark to start replicating to the new process server.</span></span>


## <a name="next-steps"></a><span data-ttu-id="ee01e-251">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="ee01e-251">Next steps</span></span>

<span data-ttu-id="ee01e-252">Pobierz i uruchom [Azure lokacji odzyskiwania wdrożenia Planistę](https://aka.ms/asr-deployment-planner)</span><span class="sxs-lookup"><span data-stu-id="ee01e-252">Download and run the [Azure Site Recovery Deployment Planner](https://aka.ms/asr-deployment-planner)</span></span>
