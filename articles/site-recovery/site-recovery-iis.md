---
title: "aaaReplicate IIS wielowarstwowych na podstawie aplikacji sieci web przy użyciu usługi Azure Site Recovery | Dokumentacja firmy Microsoft"
description: "W tym artykule opisano, jak tooreplicate IIS sieci web farmy maszyn wirtualnych za pomocą usługi Azure Site Recovery."
services: site-recovery
documentationcenter: 
author: nsoneji
manager: gauravd
editor: 
ms.assetid: 
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: nisoneji
ms.openlocfilehash: 1974265b3cb05f6dc57049876306d2e08424bb97
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="replicate-a-multi-tier-iis-based-web-application-using-azure-site-recovery"></a><span data-ttu-id="e570d-103">Replikowanie aplikacji sieci web usług IIS na podstawie wielowarstwową przy użyciu usługi Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="e570d-103">Replicate a multi-tier IIS based web application using Azure Site Recovery</span></span>

## <a name="overview"></a><span data-ttu-id="e570d-104">Omówienie</span><span class="sxs-lookup"><span data-stu-id="e570d-104">Overview</span></span>


<span data-ttu-id="e570d-105">Oprogramowanie to aparat hello wydajności biznesowej w organizacji.</span><span class="sxs-lookup"><span data-stu-id="e570d-105">Application software is hello engine of business productivity in an organization.</span></span> <span data-ttu-id="e570d-106">Różne aplikacje sieci web może obsługiwać różnych celów w organizacji.</span><span class="sxs-lookup"><span data-stu-id="e570d-106">Various web applications can serve different purposes in an organization.</span></span> <span data-ttu-id="e570d-107">Niektóre z nich, takie jak lista płac przetwarzania, aplikacje finansowe i klientów witryn sieci Web może być najwyższym krytyczne dla organizacji.</span><span class="sxs-lookup"><span data-stu-id="e570d-107">Some of these like payroll processing, financial applications and customer facing websites can be utmost critical for an organization.</span></span> <span data-ttu-id="e570d-108">Będzie on potrzebny do hello organizacji toohave je i uruchomiona na zawsze tooprevent zmniejszeniu wydajności pracy i więcej istotne zapobiec żadnego obrazu marki toohello uszkodzenia hello organizacji.</span><span class="sxs-lookup"><span data-stu-id="e570d-108">It will be important for hello organization toohave them up and running at all times tooprevent loss of productivity and more importantly prevent any damage toohello brand image of hello organization.</span></span>

<span data-ttu-id="e570d-109">Aplikacje sieci web krytyczne są zwykle tworzone jako aplikacje wielowarstwowe hello sieci web, bazy danych i aplikacji na różnych warstw.</span><span class="sxs-lookup"><span data-stu-id="e570d-109">Critical web applications are typically set up as multi-tier applications with hello web, database and application on different tiers.</span></span> <span data-ttu-id="e570d-110">Oprócz są rozkładane do różnych warstw, aplikacji hello może również używać wielu serwerów w każdej warstwie tooload równoważenie hello ruchu.</span><span class="sxs-lookup"><span data-stu-id="e570d-110">Apart from being spread across various tiers, hello applications may also be using multiple servers in each tier tooload balance hello traffic.</span></span> <span data-ttu-id="e570d-111">Ponadto hello mapowania między warstwami różnych i na serwerze sieci web hello może opierać się na statycznych adresów IP.</span><span class="sxs-lookup"><span data-stu-id="e570d-111">Moreover, hello mappings between various tiers and on hello web server may be based on static IP addresses.</span></span> <span data-ttu-id="e570d-112">W tryb failover niektóre z tych mapowania należy toobe zaktualizowane, zwłaszcza, jeśli masz wiele witryn sieci Web, które są skonfigurowane na serwerze sieci web hello.</span><span class="sxs-lookup"><span data-stu-id="e570d-112">On failover, some of these mappings will need toobe updated, especially, if you have multiple websites configured on hello web server.</span></span> <span data-ttu-id="e570d-113">W przypadku aplikacji sieci web przy użyciu protokołu SSL powiązania certyfikatu należy zaktualizować toobe.</span><span class="sxs-lookup"><span data-stu-id="e570d-113">In case of web applications using SSL, certificate bindings will need toobe updated.</span></span>

<span data-ttu-id="e570d-114">Metod tradycyjnych odzyskiwania na podstawie — replikacja obejmują tworzenie kopii zapasowych różnych plików konfiguracji, ustawienia rejestru, powiązania, niestandardowych składników (COM lub .NET), zawartość i również certyfikaty i odzyskiwanie plików hello za pomocą zestawu wymagane ręczne wykonanie czynności.</span><span class="sxs-lookup"><span data-stu-id="e570d-114">Traditional non-replication based recovery methods involve backing up of various configuration files, registry settings, bindings, custom components (COM or .NET), content and also certificates and recovering hello files through a set of manual steps.</span></span> <span data-ttu-id="e570d-115">Te techniki są jasno obciążeniem, błąd podatnych na błędy i nie skalowalności.</span><span class="sxs-lookup"><span data-stu-id="e570d-115">These techniques are clearly cumbersome, error prone and not scalable.</span></span> <span data-ttu-id="e570d-116">Jest na przykład może łatwo tooforget wykonywanie kopii zapasowej certyfikatów i pozostać z nie wyboru, ale toobuy nowe certyfikaty serwera na powitania po pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="e570d-116">It is, for example, easily possible for you tooforget backing up certificates and be left with no choice but toobuy new certificates for hello server after failover.</span></span>

<span data-ttu-id="e570d-117">Dobre rozwiązanie odzyskiwania po awarii, należy zezwala modelowania planów odzyskiwania wokół hello powyżej architekturach aplikacji złożonych i również mieć hello możliwości tooadd dostosowane kroki toohandle aplikacji mapowań między różnych warstw, dlatego zapewnienie jednym kliknięciem się, że zrzut rozwiązanie w przypadku awarii wiodące tooa hello obniżyć RTO.</span><span class="sxs-lookup"><span data-stu-id="e570d-117">A good disaster recovery solution, should allow modeling of recovery plans around hello above complex application architectures and also have hello ability tooadd customized steps toohandle application mappings between various tiers hence providing a single-click sure shot solution in hello event of a disaster leading tooa lower RTO.</span></span>


<span data-ttu-id="e570d-118">W tym artykule opisano, jak tooprotect usług IIS na podstawie aplikacji sieci web przy użyciu [usługi Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e570d-118">This article describes how tooprotect an IIS based web application using a [Azure Site Recovery](site-recovery-overview.md).</span></span> <span data-ttu-id="e570d-119">W tym artykule opisano najlepsze rozwiązania dotyczące replikacji trzy warstwy usług IIS na podstawie tooAzure aplikacji sieci web, jak wyszczególniania odzyskiwania po awarii i sposób tooAzure aplikacji hello trybu failover.</span><span class="sxs-lookup"><span data-stu-id="e570d-119">This article will cover best practices for replicating a three tier IIS based web application tooAzure, how you can do a disaster recovery drill, and how you can failover hello application tooAzure.</span></span>


## <a name="prerequisites"></a><span data-ttu-id="e570d-120">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="e570d-120">Prerequisites</span></span>

<span data-ttu-id="e570d-121">Przed rozpoczęciem upewnij się, że rozumiesz hello poniżej:</span><span class="sxs-lookup"><span data-stu-id="e570d-121">Before you start, make sure you understand hello following:</span></span>

1. [<span data-ttu-id="e570d-122">Replikowanie tooAzure maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="e570d-122">Replicating a virtual machine tooAzure</span></span>](site-recovery-vmware-to-azure.md)
1. <span data-ttu-id="e570d-123">Jak zbyt[projektowania sieci odzyskiwania](site-recovery-network-design.md)</span><span class="sxs-lookup"><span data-stu-id="e570d-123">How too[design a recovery network](site-recovery-network-design.md)</span></span>
1. [<span data-ttu-id="e570d-124">Ten test trybu failover tooAzure</span><span class="sxs-lookup"><span data-stu-id="e570d-124">Doing a test failover tooAzure</span></span>](./site-recovery-test-failover-to-azure.md)
1. [<span data-ttu-id="e570d-125">Sposób tooAzure trybu failover</span><span class="sxs-lookup"><span data-stu-id="e570d-125">Doing a failover tooAzure</span></span>](site-recovery-failover.md)
1. <span data-ttu-id="e570d-126">Jak zbyt[replikacji kontrolera domeny](site-recovery-active-directory.md)</span><span class="sxs-lookup"><span data-stu-id="e570d-126">How too[replicate a domain controller](site-recovery-active-directory.md)</span></span>
1. <span data-ttu-id="e570d-127">Jak zbyt[replikacji programu SQL Server](site-recovery-sql.md)</span><span class="sxs-lookup"><span data-stu-id="e570d-127">How too[replicate SQL Server](site-recovery-sql.md)</span></span>

## <a name="deployment-patterns"></a><span data-ttu-id="e570d-128">Wzorce wdrożenia</span><span class="sxs-lookup"><span data-stu-id="e570d-128">Deployment patterns</span></span>
<span data-ttu-id="e570d-129">Aplikacja sieci web usług IIS na podstawie zazwyczaj odpowiada jednemu z powitania po wzorców wdrożenia:</span><span class="sxs-lookup"><span data-stu-id="e570d-129">An IIS based web application typically follows one of hello following deployment patterns:</span></span>

<span data-ttu-id="e570d-130">** Wdrożenia wzorzec 1 ** usług IIS na podstawie kolektywu serwerów sieci web z Routing(ARR) żądania aplikacji, serwer usług IIS i Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e570d-130">**Deployment pattern 1 ** An IIS based web farm  with Application Request Routing(ARR), IIS Server and Microsoft SQL Server.</span></span>

![Wzorzec wdrożenia](./media/site-recovery-iis/deployment-pattern1.png)

<span data-ttu-id="e570d-132">**Wzorzec wdrożenia 2** usług IIS na podstawie kolektywu serwerów sieci web z Routing(ARR) żądania aplikacji, serwer usług IIS, serwera aplikacji i programu Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e570d-132">**Deployment pattern 2** An IIS based web farm with Application Request Routing(ARR), IIS Server, Application Server, and Microsoft SQL Server.</span></span>


![Wzorzec wdrożenia](./media/site-recovery-iis/deployment-pattern2.png)

## <a name="site-recovery-support"></a><span data-ttu-id="e570d-134">Obsługa odzyskiwania lokacji</span><span class="sxs-lookup"><span data-stu-id="e570d-134">Site Recovery support</span></span>

<span data-ttu-id="e570d-135">Witaj w celu tworzenia maszyn wirtualnych VMware tego artykułu z serwerem usług IIS w wersji 7.5 w systemie Windows Server 2012 R2 Enterprise były używane.</span><span class="sxs-lookup"><span data-stu-id="e570d-135">For hello purpose of creating this article VMware virtual machines with IIS Server version 7.5 on Windows Server 2012 R2 Enterprise were used.</span></span> <span data-ttu-id="e570d-136">Ponieważ replikacja z lokacji odzyskiwania jest niezależny od aplikacji, zalecenia hello podano tutaj toohold oczekiwanego w następujących scenariuszach również i dla różnych wersji programu IIS.</span><span class="sxs-lookup"><span data-stu-id="e570d-136">As site recovery replication is application agnostic, hello recommendations provided here are expected toohold on following scenarios as well and for different version of IIS.</span></span>

### <a name="source-and-target"></a><span data-ttu-id="e570d-137">Źródłowa i docelowa</span><span class="sxs-lookup"><span data-stu-id="e570d-137">Source and target</span></span>

<span data-ttu-id="e570d-138">**Scenariusz**</span><span class="sxs-lookup"><span data-stu-id="e570d-138">**Scenario**</span></span> | <span data-ttu-id="e570d-139">**tooa lokacji dodatkowej**</span><span class="sxs-lookup"><span data-stu-id="e570d-139">**tooa secondary site**</span></span> | <span data-ttu-id="e570d-140">**tooAzure**</span><span class="sxs-lookup"><span data-stu-id="e570d-140">**tooAzure**</span></span>
--- | --- | ---
<span data-ttu-id="e570d-141">**Funkcja Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="e570d-141">**Hyper-V**</span></span> | <span data-ttu-id="e570d-142">Tak</span><span class="sxs-lookup"><span data-stu-id="e570d-142">Yes</span></span> | <span data-ttu-id="e570d-143">Tak</span><span class="sxs-lookup"><span data-stu-id="e570d-143">Yes</span></span>
<span data-ttu-id="e570d-144">**VMware**</span><span class="sxs-lookup"><span data-stu-id="e570d-144">**VMware**</span></span> | <span data-ttu-id="e570d-145">Tak</span><span class="sxs-lookup"><span data-stu-id="e570d-145">Yes</span></span> | <span data-ttu-id="e570d-146">Tak</span><span class="sxs-lookup"><span data-stu-id="e570d-146">Yes</span></span>
<span data-ttu-id="e570d-147">**Serwer fizyczny**</span><span class="sxs-lookup"><span data-stu-id="e570d-147">**Physical server**</span></span> | <span data-ttu-id="e570d-148">Nie</span><span class="sxs-lookup"><span data-stu-id="e570d-148">No</span></span> | <span data-ttu-id="e570d-149">Tak</span><span class="sxs-lookup"><span data-stu-id="e570d-149">Yes</span></span>

## <a name="replicate-virtual-machines"></a><span data-ttu-id="e570d-150">Replikowanie maszyn wirtualnych</span><span class="sxs-lookup"><span data-stu-id="e570d-150">Replicate virtual machines</span></span>

<span data-ttu-id="e570d-151">Postępuj zgodnie z [w tych wskazówkach](site-recovery-vmware-to-azure.md) toostart replikację wszystkich tooAzure maszyn wirtualnych kolektywu serwerów sieci web hello usług IIS.</span><span class="sxs-lookup"><span data-stu-id="e570d-151">Follow [this guidance](site-recovery-vmware-to-azure.md) toostart replicating all hello IIS web farm virtual machines tooAzure.</span></span>

<span data-ttu-id="e570d-152">Jeśli jest używany statyczny adres IP, określ IP hello, interesujące hello tootake maszyny wirtualnej w hello [ **docelowy adres IP** ](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) ustawienie w ustawieniach obliczeń i sieci.</span><span class="sxs-lookup"><span data-stu-id="e570d-152">If you are using a static IP then specify hello IP that you want hello virtual machine tootake in hello [**Target IP**](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) setting in Compute and Network settings.</span></span>

![Adres IP obiektu docelowego](./media/site-recovery-active-directory/dns-target-ip.png)


## <a name="creating-a-recovery-plan"></a><span data-ttu-id="e570d-154">Tworzenie planu odzyskiwania</span><span class="sxs-lookup"><span data-stu-id="e570d-154">Creating a recovery plan</span></span>

<span data-ttu-id="e570d-155">Plan odzyskiwania umożliwia sekwencjonowania trybu failover hello różnych poziomów w wielowarstwowej aplikacji, w związku z tym zachowaniu spójności aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e570d-155">A recovery plan allows sequencing hello failover of various tiers in a multi-tier application, hence, maintaining application consistency.</span></span> <span data-ttu-id="e570d-156">Wykonaj hello kroki podczas tworzenia planu odzyskiwania dla aplikacji sieci web w wielowarstwowych.</span><span class="sxs-lookup"><span data-stu-id="e570d-156">Follow hello below steps while creating a recovery plan for a multi-tier web application.</span></span>  <span data-ttu-id="e570d-157">[Dowiedz się więcej o tworzeniu planu odzyskiwania](./site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="e570d-157">[Learn more about creating a recovery plan](./site-recovery-create-recovery-plans.md).</span></span>

### <a name="adding-virtual-machines-toofailover-groups"></a><span data-ttu-id="e570d-158">Dodawanie grup toofailover maszyny wirtualne</span><span class="sxs-lookup"><span data-stu-id="e570d-158">Adding virtual machines toofailover groups</span></span>
<span data-ttu-id="e570d-159">Typowa aplikacja sieci web usług IIS wielowarstwowych będzie składać się z warstwy bazy danych SQL maszyn wirtualnych, warstwa sieci web hello utworzoną przez serwer usług IIS i warstwy aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e570d-159">A typical multi-tier IIS web application will consist of a database tier with SQL virtual machines, hello web tier constituted by a IIS server and an application tier.</span></span> <span data-ttu-id="e570d-160">Dodaj wszystkie te maszyny wirtualne toodifferent grupy na podstawie warstwy jako poniżej.</span><span class="sxs-lookup"><span data-stu-id="e570d-160">Add all these virtual machines toodifferent group based on tier as below.</span></span> <span data-ttu-id="e570d-161">[Dowiedz się więcej o dostosowanie planu odzyskiwania](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span><span class="sxs-lookup"><span data-stu-id="e570d-161">[Learn more about customising recovery plan](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span></span>

1. <span data-ttu-id="e570d-162">Tworzenie planu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="e570d-162">Create a recovery plan.</span></span> <span data-ttu-id="e570d-163">Dodaj maszyny wirtualne warstwy hello bazy danych w obszarze grupy 1 tooensure ostatnio są zamykania i włączane pierwszej.</span><span class="sxs-lookup"><span data-stu-id="e570d-163">Add hello database tier virtual machines under Group 1 tooensure that they are shutdown last and brought up first.</span></span>

1. <span data-ttu-id="e570d-164">Dodaj maszyny wirtualne warstwy aplikacji hello w obszarze grupy 2 w taki sposób, że są włączane po włączane hello warstwy bazy danych.</span><span class="sxs-lookup"><span data-stu-id="e570d-164">Add hello application tier virtual machines under Group 2 such that they are brought up after hello database tier has been brought up.</span></span>

1. <span data-ttu-id="e570d-165">Dodaj maszyny wirtualne warstwy sieci web hello w grupa 3 taki sposób, że są włączane po włączane hello warstwy aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e570d-165">Add hello web tier virtual machines in Group 3 such that they are brought up after hello application tier has been brought up.</span></span>

1. <span data-ttu-id="e570d-166">Dodaj maszyny wirtualne równoważenia obciążenia w grupie 4 taki sposób, że są włączane po włączane hello warstwa sieci web.</span><span class="sxs-lookup"><span data-stu-id="e570d-166">Add load balance virtual machines in Group 4 such that they are brought up after hello web tier has been brought up.</span></span>


### <a name="adding-scripts-toohello-recovery-plan"></a><span data-ttu-id="e570d-167">Dodawanie skryptów toohello planu odzyskiwania</span><span class="sxs-lookup"><span data-stu-id="e570d-167">Adding scripts toohello recovery plan</span></span>
<span data-ttu-id="e570d-168">Może być konieczne toodo niektóre operacje na powitania maszyn wirtualnych platformy Azure post trybu failover i testowanie trybu failover toomake IIS sieci web farmy funkcja poprawnie.</span><span class="sxs-lookup"><span data-stu-id="e570d-168">You may need toodo some operations on hello Azure virtual machines post failover/Test failover toomake IIS web farm function correctly.</span></span> <span data-ttu-id="e570d-169">Można zautomatyzować tryb failover post hello takich jak aktualizacja wpisu DNS zmiana powiązania witryny, zmiany w parametrach połączenia, dodając odpowiednie skrypty w planie odzyskiwania hello zgodnie z poniższymi instrukcjami.</span><span class="sxs-lookup"><span data-stu-id="e570d-169">You can automate hello post failover operation like updating DNS entry, changing site binding, change  in connection string  by adding corresponding scripts in hello recovery plan as below.</span></span> <span data-ttu-id="e570d-170">[Dowiedz się więcej na temat dodawania skryptu planu odzyskiwania](./site-recovery-create-recovery-plans.md#add-scripts).</span><span class="sxs-lookup"><span data-stu-id="e570d-170">[Learn more about add script recovery plan](./site-recovery-create-recovery-plans.md#add-scripts).</span></span>

#### <a name="dns-update"></a><span data-ttu-id="e570d-171">Aktualizację DNS</span><span class="sxs-lookup"><span data-stu-id="e570d-171">DNS Update</span></span>
<span data-ttu-id="e570d-172">Jeśli hello DNS jest skonfigurowany do dynamicznej aktualizacji DNS, a następnie maszyn wirtualnych zwykle po rozpoczęciu aktualizacji hello DNS z hello nowego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="e570d-172">If hello DNS is configured for dynamic DNS update then virtual machines usually update hello DNS with hello new IP once they start.</span></span> <span data-ttu-id="e570d-173">Tooadd tooupdate jawne krok DNS z hello nowe adresy IP maszyn wirtualnych hello następnie należy dodać to [skryptu tooupdate IP w systemie DNS](https://aka.ms/asr-dns-update) akcji post na grupach planu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="e570d-173">If you want tooadd an explicit step tooupdate DNS with hello new IPs of hello virtual machines then add this [script tooupdate IP in DNS](https://aka.ms/asr-dns-update) as a post action on recovery plan groups.</span></span>  

#### <a name="connection-string-in-an-applications-webconfig"></a><span data-ttu-id="e570d-174">Parametry połączenia w pliku web.config aplikacji</span><span class="sxs-lookup"><span data-stu-id="e570d-174">Connection string in an application’s web.config</span></span>
<span data-ttu-id="e570d-175">Określa parametry połączenia Hello hello bazy danych, który hello witryny sieci web, który komunikuje się z.</span><span class="sxs-lookup"><span data-stu-id="e570d-175">hello connection string specifies hello database that hello web site communicates with.</span></span>

<span data-ttu-id="e570d-176">Jeśli parametry połączenia hello niesie hello Nazwa maszyny wirtualnej bazy danych hello, żadne dalsze czynności będą potrzebne post trybu failover i aplikacji hello będą mogli tooautomatically komunikacji toohello bazy danych.</span><span class="sxs-lookup"><span data-stu-id="e570d-176">If hello connection string carries hello name of hello database virtual machine, no further steps will be needed post failover and hello application will be able tooautomatically communicate toohello DB.</span></span> <span data-ttu-id="e570d-177">Ponadto jeśli hello adresu IP dla maszyny wirtualnej hello bazy danych jest zachowywana, nie będzie wymagane parametry połączenia hello tooupdate.</span><span class="sxs-lookup"><span data-stu-id="e570d-177">Also, if hello IP address for hello database virtual machine is retained, it will not be needed tooupdate hello connection string.</span></span> <span data-ttu-id="e570d-178">Parametry połączenia hello odwołuje się toohello maszyny wirtualnej dla bazy danych przy użyciu adresu IP, należy toobe zaktualizowane post w tryb failover.</span><span class="sxs-lookup"><span data-stu-id="e570d-178">If hello connection string refers toohello database virtual machine using an IP address, it will need toobe updated post failover.</span></span> <span data-ttu-id="e570d-179">Na przykład</span><span class="sxs-lookup"><span data-stu-id="e570d-179">E.g.</span></span> <span data-ttu-id="e570d-180">toohello bazy danych z adresem IP 127.0.1.2 punktów Hello poniżej parametrów połączenia</span><span class="sxs-lookup"><span data-stu-id="e570d-180">hello below connection string points toohello DB with IP 127.0.1.2</span></span>

        <?xml version="1.0" encoding="utf-8"?>
        <configuration>
        <connectionStrings>
        <add name="ConnStringDb1" connectionString="Data Source= 127.0.1.2\SqlExpress; Initial Catalog=TestDB1;Integrated Security=False;" />
        </connectionStrings>
        </configuration>

<span data-ttu-id="e570d-181">Parametry połączenia hello w warstwa sieci web można zaktualizować przez dodanie [skryptu aktualizacji połączenia usług IIS](https://aka.ms/asr-update-webtier-script-classic) po grupa 3 w planie odzyskiwania hello.</span><span class="sxs-lookup"><span data-stu-id="e570d-181">You can update hello connection string in web tier by adding [IIS connection update script](https://aka.ms/asr-update-webtier-script-classic) after Group 3 in hello recovery plan.</span></span>

#### <a name="site-bindings-for-hello-application"></a><span data-ttu-id="e570d-182">Powiązania witryny w aplikacji hello</span><span class="sxs-lookup"><span data-stu-id="e570d-182">Site bindings for hello application</span></span>
<span data-ttu-id="e570d-183">Każda witryna składa się z powiązania informacje obejmujące hello typ powiązania, hello adresu IP, na które powitania serwera IIS nasłuchuje żądań toohello hello lokacji, hello numer portu i nazwy hostów hello hello witryny.</span><span class="sxs-lookup"><span data-stu-id="e570d-183">Every site consists of binding information that includes hello type of binding, hello IP address at which hello IIS server listens toohello requests for hello site, hello port number and hello host names for hello site.</span></span> <span data-ttu-id="e570d-184">W czasie hello trybu failover te powiązania może być konieczne toobe aktualizowane, jeśli nie nastąpiła zmiana adresu IP hello skojarzonych z nimi.</span><span class="sxs-lookup"><span data-stu-id="e570d-184">At hello time of a failover, these bindings might need toobe updated if there is a change in hello IP address associated with them.</span></span>

> [!NOTE]
>
> <span data-ttu-id="e570d-185">Jeśli zostały oznaczone jako "wszystkie nieprzypisane" dla powiązania witryny hello tak jak w poniższym przykładzie hello, nie musisz tooupdate tej pracy awaryjnej post powiązania.</span><span class="sxs-lookup"><span data-stu-id="e570d-185">If you have marked ‘all unassigned’ for hello site binding as in hello example below, you will not need tooupdate this binding post failover.</span></span> <span data-ttu-id="e570d-186">Ponadto jeśli hello adresu IP skojarzonego z lokacji nie zostanie zmieniona post trybu failover, powiązania witryny hello muszą: nie można zaktualizować (przechowywania hello adres IP jest zależna od hello architektury sieci i podsieci przypisane toohello lokacji głównej i odzyskiwania lokacji i dlatego mogą lub nie mogą być zastosowane w danej organizacji).</span><span class="sxs-lookup"><span data-stu-id="e570d-186">Also, if hello IP address associated with a site is not changed post failover, hello site binding need not be updated (Retention of hello IP address depends on hello network architecture and subnets assigned toohello primary and recovery sites and hence may or may not be feasible for your organization.)</span></span>

![Powiązanie SSL](./media/site-recovery-iis/sslbinding.png)

<span data-ttu-id="e570d-188">Jeśli adres IP hello został skojarzony z lokacją, konieczne będzie tooupdate wszystkie powiązania witryny przy użyciu nowego adresu IP hello.</span><span class="sxs-lookup"><span data-stu-id="e570d-188">If you have associated hello IP address with a site, you will need tooupdate all site bindings with hello new IP address.</span></span> <span data-ttu-id="e570d-189">Możesz dodać [skryptu aktualizacji warstwy sieci Web usług IIS](https://aka.ms/asr-web-tier-update-runbook-classic) po grupa 3 w powiązania witryny hello toochange planu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="e570d-189">You can add [IIS Web tier update script](https://aka.ms/asr-web-tier-update-runbook-classic) after Group 3 in recovery plan toochange hello site bindings.</span></span>


#### <a name="update-load-balancer-ip-address"></a><span data-ttu-id="e570d-190">Zaktualizuj adres IP usługi równoważenia obciążenia</span><span class="sxs-lookup"><span data-stu-id="e570d-190">Update load balancer IP address</span></span>
<span data-ttu-id="e570d-191">Jeśli masz Routing żądań aplikacji maszyny wirtualnej, dodać [skryptu trybu failover IIS ARR](https://aka.ms/asr-iis-arrtier-failover-script-classic) po adres IP hello tooupdate grupy 4.</span><span class="sxs-lookup"><span data-stu-id="e570d-191">If you have  Application Request Routing virtual machine, add [IIS ARR  failover script](https://aka.ms/asr-iis-arrtier-failover-script-classic) after Group 4 tooupdate hello IP address.</span></span>

#### <a name="hello-ssl-cert-binding-for-an-https-connection"></a><span data-ttu-id="e570d-192">Witaj powiązania certyfikatu SSL dla połączenia https</span><span class="sxs-lookup"><span data-stu-id="e570d-192">hello SSL cert binding for an https connection</span></span>
<span data-ttu-id="e570d-193">Witryny sieci Web może mieć skojarzone certyfikatu SSL, który pomaga w celu zapewnienia bezpiecznej komunikacji między hello serwer sieci Web i przeglądarką hello użytkownika.</span><span class="sxs-lookup"><span data-stu-id="e570d-193">Websites can have an associated SSL certificate that helps in ensuring a secure communication between hello webserver and hello user’s browser.</span></span> <span data-ttu-id="e570d-194">Jeśli witryna sieci Web hello połączenia https i adres IP toohello powiązania witryny https skojarzone powitania serwera IIS wraz z powiązaniem certyfikatu SSL, nowego powiązania witryny należy toobe dodane cert hello z hello IP maszyny wirtualnej IIS hello post trybu failover.</span><span class="sxs-lookup"><span data-stu-id="e570d-194">If hello website has an https connection and an associated https site binding toohello IP address of hello IIS server with an SSL cert binding, a new site binding will need toobe added for hello cert with hello IP of hello IIS virtual machine post failover.</span></span>

<span data-ttu-id="e570d-195">certyfikat SSL Hello mogą być wystawiane przed-</span><span class="sxs-lookup"><span data-stu-id="e570d-195">hello SSL cert can be issued against-</span></span>

<span data-ttu-id="e570d-196">) nazwy FQDN hello hello witryny sieci Web</span><span class="sxs-lookup"><span data-stu-id="e570d-196">a) hello fully qualified domain name of hello website</span></span><br>
<span data-ttu-id="e570d-197">b) nazwa hello powitania serwera</span><span class="sxs-lookup"><span data-stu-id="e570d-197">b) hello name of hello server</span></span><br>
<span data-ttu-id="e570d-198">c) certyfikat uniwersalny hello nazwy domeny</span><span class="sxs-lookup"><span data-stu-id="e570d-198">c) A wildcard certificate for hello domain name</span></span><br>
<span data-ttu-id="e570d-199">d) adres IP — Jeśli certyfikat SSL hello jest wystawiony na podstawie IP hello powitania serwera IIS, innym toobe potrzeb certyfikatu SSL wystawiony na podstawie adresu IP hello powitania serwera usług IIS na powitania usługi Azure site i dodatkowe powiązania SSL dla tego certyfikatu, należy utworzyć toobe.</span><span class="sxs-lookup"><span data-stu-id="e570d-199">d) An IP address – If hello SSL cert is issued against hello IP of hello IIS server, another SSL cert needs toobe issued against hello IP address of hello IIS server on hello Azure site and an additional SSL binding for this certificate will need toobe created.</span></span> <span data-ttu-id="e570d-200">W związku z tym jest toonot zaleca się użycie certyfikatu SSL wystawiony na podstawie adresu IP.</span><span class="sxs-lookup"><span data-stu-id="e570d-200">Hence, it is advisable toonot use an SSL cert issued against IP.</span></span> <span data-ttu-id="e570d-201">To jest opcja mniej powszechnie używane i wkrótce zostaną wycofane zgodnie z harmonogramem nowych zmian forum urzędu certyfikacji/przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="e570d-201">This is a less widely used option and will soon be deprecated as per new CA/browser forum changes.</span></span>

#### <a name="update-hello-dependency-between-hello-web-and-hello-application-tier"></a><span data-ttu-id="e570d-202">Aktualizacja hello zależność między hello sieci web i warstwy aplikacji hello</span><span class="sxs-lookup"><span data-stu-id="e570d-202">Update hello dependency between hello web and hello application tier</span></span>
<span data-ttu-id="e570d-203">Jeśli masz zależność określonych aplikacji na podstawie adresu IP hello hello maszyn wirtualnych, należy tooupdate tej pracy awaryjnej post zależności.</span><span class="sxs-lookup"><span data-stu-id="e570d-203">If you have an application specific dependency based on hello IP address of hello virtual machines, you need tooupdate this dependency post failover.</span></span>

## <a name="doing-a-test-failover"></a><span data-ttu-id="e570d-204">Ten test trybu failover</span><span class="sxs-lookup"><span data-stu-id="e570d-204">Doing a test failover</span></span>
<span data-ttu-id="e570d-205">Postępuj zgodnie z [w tych wskazówkach](site-recovery-test-failover-to-azure.md) toodo test trybu failover.</span><span class="sxs-lookup"><span data-stu-id="e570d-205">Follow [this guidance](site-recovery-test-failover-to-azure.md) toodo a test failover.</span></span>

1.  <span data-ttu-id="e570d-206">Przejdź tooAzure portalu i wybierz magazyn usług odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="e570d-206">Go tooAzure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="e570d-207">Polecenie hello planu odzyskiwania utworzone dla kolektywu serwerów sieci web usług IIS.</span><span class="sxs-lookup"><span data-stu-id="e570d-207">Click on hello recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="e570d-208">Kliknij na "Test trybu Failover".</span><span class="sxs-lookup"><span data-stu-id="e570d-208">Click on 'Test Failover'.</span></span>
1.  <span data-ttu-id="e570d-209">Wybierz punkt odzyskiwania i procesu sieci wirtualnej platformy Azure toostart hello testowego trybu failover.</span><span class="sxs-lookup"><span data-stu-id="e570d-209">Select recovery point and Azure virtual network toostart hello test failover process.</span></span>
1.  <span data-ttu-id="e570d-210">Po skonfigurowaniu dodatkowej środowiska hello można wykonywać z operacji sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="e570d-210">Once hello secondary environment is up, you can perform your validations.</span></span>
1.  <span data-ttu-id="e570d-211">Po zakończeniu operacji sprawdzania poprawności hello, wybierz opcję "Ukończenie operacji sprawdzania poprawności" i hello testowe środowisko trybu failover zostaną wyczyszczone.</span><span class="sxs-lookup"><span data-stu-id="e570d-211">Once hello validations are complete, you can select ‘Validations complete’ and hello test failover environment will be cleaned.</span></span>

## <a name="doing-a-failover"></a><span data-ttu-id="e570d-212">Podczas pracy w trybie failover</span><span class="sxs-lookup"><span data-stu-id="e570d-212">Doing a failover</span></span>
<span data-ttu-id="e570d-213">Postępuj zgodnie z [w tych wskazówkach](site-recovery-failover.md) podczas wprowadzania trybu failover.</span><span class="sxs-lookup"><span data-stu-id="e570d-213">Follow [this guidance](site-recovery-failover.md) when you are doing a failover.</span></span>

1.  <span data-ttu-id="e570d-214">Przejdź tooAzure portalu i wybierz magazyn usług odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="e570d-214">Go tooAzure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="e570d-215">Polecenie hello planu odzyskiwania utworzone dla kolektywu serwerów sieci web usług IIS.</span><span class="sxs-lookup"><span data-stu-id="e570d-215">Click on hello recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="e570d-216">Kliknij pozycję "Failover".</span><span class="sxs-lookup"><span data-stu-id="e570d-216">Click on 'Failover'.</span></span>
1.  <span data-ttu-id="e570d-217">Wybierz proces pracy awaryjnej hello toostart punktu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="e570d-217">Select recovery point toostart hello failover process.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e570d-218">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="e570d-218">Next steps</span></span>
<span data-ttu-id="e570d-219">Użytkownik może dowiedzieć się więcej o [replikacji z innych aplikacji](site-recovery-workload.md) przy użyciu usługi Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="e570d-219">You can learn more about [replicate other applications](site-recovery-workload.md) using Site Recovery.</span></span>
