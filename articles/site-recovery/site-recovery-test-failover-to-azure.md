---
title: "aaaTest tooAzure pracy awaryjnej w usłudze Site Recovery | Dokumentacja firmy Microsoft"
description: "Dowiedz się więcej o uruchamianiu test trybu failover z lokalnymi tooAzure"
services: site-recovery
documentationcenter: 
author: prateek9us
manager: gauravd
editor: 
ms.assetid: 44813a48-c680-4581-a92e-cecc57cc3b1e
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 07/04/2017
ms.author: pratshar
ms.openlocfilehash: fa0a93f409cc9f2c2c06c2d91c65971dc90c507f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="test--failover-tooazure-in-site-recovery"></a><span data-ttu-id="e1bc6-103">Testowanie trybu Failover tooAzure w usłudze Site Recovery</span><span class="sxs-lookup"><span data-stu-id="e1bc6-103">Test  Failover tooAzure in Site Recovery</span></span>



<span data-ttu-id="e1bc6-104">Ten artykuł zawiera informacje i instrukcje dotyczące wykonywania test trybu failover i odzyskiwania po awarii Przechodzenie do szczegółów maszyn wirtualnych i serwerów fizycznych, które są chronione za pomocą usługi Site Recovery przy użyciu usługi Azure jako hello odzyskiwania lokacji.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-104">This article provides information and instructions for doing a test failover or a DR drill of virtual machines and physical servers that are protected with Site Recovery using Azure as hello recovery site.</span></span>

<span data-ttu-id="e1bc6-105">Zamieść wszelkie komentarze lub pytania u dołu hello w tym artykule, albo na powitania [Forum usług odzyskiwania Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="e1bc6-105">Post any comments or questions at hello bottom of this article, or on hello [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>

<span data-ttu-id="e1bc6-106">Testowanie trybu failover jest uruchamiania toovalidate strategii replikacji lub wyszczególniania odzyskiwania po awarii, bez utraty danych lub przestoju.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-106">Test failover is run toovalidate your replication strategy or perform a disaster recovery drill without any data loss or downtime.</span></span> <span data-ttu-id="e1bc6-107">Ten test trybu failover nie ma żadnego wpływu na powitania trwającej replikacji lub w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-107">Doing a test failover doesn't have any impact on hello ongoing replication or on your production environment.</span></span> <span data-ttu-id="e1bc6-108">Testowanie trybu failover jest możliwe albo dla maszyny wirtualnej lub a [planu odzyskiwania](site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="e1bc6-108">Test failover can be done either on a virtual machine or a [recovery plan](site-recovery-create-recovery-plans.md).</span></span> <span data-ttu-id="e1bc6-109">Wyzwolenie test trybu failover, konieczne jest toospecify hello sieci toowhich testów maszyn wirtualnych może zostać nawiązane połączenie.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-109">When triggering a test failover, you need toospecify hello network toowhich test virtual machines would connect to.</span></span> <span data-ttu-id="e1bc6-110">Po wyzwoleniu test trybu failover, możesz śledzić postępy w hello **zadania** strony.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-110">Once a test failover is triggered, you can track progress in hello **Jobs** page.</span></span>  


## <a name="supported-scenarios"></a><span data-ttu-id="e1bc6-111">Obsługiwane scenariusze</span><span class="sxs-lookup"><span data-stu-id="e1bc6-111">Supported scenarios</span></span>
<span data-ttu-id="e1bc6-112">Testowanie trybu failover jest obsługiwana we wszystkich scenariuszach wdrażania innych niż [starszych tooAzure lokacji VMware](site-recovery-vmware-to-azure-classic-legacy.md).</span><span class="sxs-lookup"><span data-stu-id="e1bc6-112">Test failover is supported in all deployment scenarios other than [legacy VMware site tooAzure](site-recovery-vmware-to-azure-classic-legacy.md).</span></span> <span data-ttu-id="e1bc6-113">Testowanie trybu failover również nie jest obsługiwana w przypadku maszyny wirtualnej nie powiodła się za pośrednictwem tooAzure.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-113">Test failover is also not supported when virtual machine has been failed over tooAzure.</span></span>  


## <a name="run-a-test-failover"></a><span data-ttu-id="e1bc6-114">Wykonywanie próby przejścia w tryb failover</span><span class="sxs-lookup"><span data-stu-id="e1bc6-114">Run a test failover</span></span>
<span data-ttu-id="e1bc6-115">W tej procedurze opisano sposób toorun test trybu failover dla odzyskiwania plan.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-115">This procedure describes how toorun a test failover for a recovery plan.</span></span> <span data-ttu-id="e1bc6-116">Możesz też uruchomić test trybu failover dla jednej maszyny przy użyciu hello odpowiednią opcję na nim.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-116">Alternatively you can also run test failover for a single machine by using hello appropriate option on it.</span></span>

![Testowanie trybu Failover](./media/site-recovery-test-failover-to-azure/TestFailover.png)


1. <span data-ttu-id="e1bc6-118">Wybierz **plany odzyskiwania** > *recoveryplan_name*.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-118">Select **Recovery Plans** > *recoveryplan_name*.</span></span> <span data-ttu-id="e1bc6-119">Kliknij przycisk **testowanie trybu Failover**.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-119">Click **Test Failover**.</span></span>
1. <span data-ttu-id="e1bc6-120">Wybierz **punkt odzyskiwania** toofailover do.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-120">Select a **Recovery Point** toofailover to.</span></span> <span data-ttu-id="e1bc6-121">Można użyć jednej z hello następujące opcje:</span><span class="sxs-lookup"><span data-stu-id="e1bc6-121">You can use one of hello following options:</span></span>
    1.  <span data-ttu-id="e1bc6-122">**Najnowsze przetworzone**: Ta opcja nie powiedzie się za pośrednictwem wszystkich maszyn wirtualnych hello odzyskiwania planu toohello najnowszy punkt odzyskiwania, który został już przetworzony przez usługę Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-122">**Latest processed**: This option fails over all virtual machines of hello recovery plan toohello latest recovery point that has already been processed by Site Recovery service.</span></span> <span data-ttu-id="e1bc6-123">Podczas wykonywania testu pracy w trybie failover maszyny wirtualnej, wyświetlane są również sygnaturę czasową hello najnowszy punkt odzyskiwania przetworzone.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-123">When you are doing test failover of a virtual machine, time stamp of hello latest processed recovery point is also shown.</span></span> <span data-ttu-id="e1bc6-124">Jeśli przeprowadzasz trybu failover planu odzyskiwania, można przejść tooindividual maszyny wirtualnej i przyjrzyj się **najnowsze punkty odzyskiwania** kafelka tooget te informacje.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-124">If you are doing failover of a recovery plan, you can go tooindividual virtual machine and look at **Latest Recovery Points** tile tooget this information.</span></span> <span data-ttu-id="e1bc6-125">Nie czas tooprocess hello nieprzetworzonych danych, ta opcja zapewnia niski opcja pracy awaryjnej RTO (celu czasu odzyskiwania).</span><span class="sxs-lookup"><span data-stu-id="e1bc6-125">As no time is spent tooprocess hello unprocessed data, this option provides a low RTO (Recovery Time Objective) failover option.</span></span>
    1.  <span data-ttu-id="e1bc6-126">**Najnowsza wersja aplikacji spójne**: Ta opcja nie powiedzie się za pośrednictwem wszystkich maszyn wirtualnych hello planu toohello najnowszej aplikacji odzyskiwania zapewniających spójność punkt odzyskiwania został już przetworzony przez usługę Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-126">**Latest app-consistent**: This option fails over all virtual machines of hello recovery plan toohello latest application consistent recovery point that has already been processed by Site Recovery service.</span></span> <span data-ttu-id="e1bc6-127">Podczas wykonywania testu pracy w trybie failover maszyny wirtualnej, sygnaturę czasową ostatniego punktu odzyskiwania zapewniających spójność aplikacji hello jest także pokazany.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-127">When you are doing test failover of a virtual machine, time stamp of hello latest app-consistent recovery point is also shown.</span></span> <span data-ttu-id="e1bc6-128">Jeśli przeprowadzasz trybu failover planu odzyskiwania, można przejść tooindividual maszyny wirtualnej i przyjrzyj się **najnowsze punkty odzyskiwania** kafelka tooget te informacje.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-128">If you are doing failover of a recovery plan, you can go tooindividual virtual machine and look at **Latest Recovery Points** tile tooget this information.</span></span>
    1.  <span data-ttu-id="e1bc6-129">**Najnowsze**: tę opcję, najpierw przetwarza wszystkie dane hello został wysłany tooSite odzyskiwania usługi toocreate punkt odzyskiwania dla każdej maszyny wirtualnej przed awaryjne tooit.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-129">**Latest**: This option first processes all hello data that has been sent tooSite Recovery service toocreate a recovery point for each virtual machine before failing them over tooit.</span></span> <span data-ttu-id="e1bc6-130">Ta opcja zapewnia hello najniższy RPO (cel punktu odzyskiwania) jako hello maszyny wirtualnej utworzonej po trybu failover ma wszystkie dane hello, która została replikowane tooSite odzyskiwania usługi zostało wyzwolone hello trybu failover.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-130">This option provides hello lowest RPO (Recovery Point Objective) as hello virtual machine created after failover will have all hello data that has been replicated tooSite Recovery service when hello failover was triggered.</span></span>
    1.  <span data-ttu-id="e1bc6-131">**Najnowsze wielu maszyn wirtualnych przetwarzane**: Ta opcja jest dostępna tylko dla planów odzyskiwania, które mają co najmniej jedną maszynę wirtualną z wielu maszyn wirtualnych na.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-131">**Latest multi-VM processed**: This option is only available for recovery plans that have at least one virtual machine with multi-VM consistency ON.</span></span> <span data-ttu-id="e1bc6-132">Maszyny wirtualne, które są częścią replikacji trybu failover toohello najnowsze wspólnej wielu maszyn wirtualnych spójne odzyskiwania grupy punktu.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-132">Virtual machines that are part of a replication group failover toohello latest common multi-VM consistent recovery point.</span></span> <span data-ttu-id="e1bc6-133">Inne maszyny wirtualne trybu failover tootheir najnowsze przetworzone punktu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-133">Other virtual machines failover tootheir latest processed recovery point.</span></span>  
    1.  <span data-ttu-id="e1bc6-134">**Najnowsze wielu maszyn wirtualnych całej aplikacji**: Ta opcja jest dostępna tylko dla planów odzyskiwania, które mają co najmniej jedną maszynę wirtualną z ON spójności wielu maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-134">**Latest multi-VM app-consistent**: This option is only available for recovery plans that have at least one virtual machine with multi-VM consistency ON.</span></span> <span data-ttu-id="e1bc6-135">Maszyny wirtualne, które są częścią replikacji grupy pracy awaryjnej toohello najnowsze wspólnych wielu maszyn wirtualnych spójnych z aplikacją punktów odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-135">Virtual machines that are part of a replication group failover toohello latest common multi-VM application-consistent recovery point.</span></span> <span data-ttu-id="e1bc6-136">Inne maszyny wirtualne trybu failover tootheir najnowsze spójnych z aplikacją punktu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-136">Other virtual machines failover tootheir latest application-consistent recovery point.</span></span> 
    1.  <span data-ttu-id="e1bc6-137">**Niestandardowe**: Jeśli przeprowadzasz testowy tryb failover maszyny wirtualnej, a następnie można użyć tej opcji toofailover tooa odzyskiwania z określonego punktu.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-137">**Custom**: If you are doing test failover of a virtual machine, then you can use this option toofailover tooa particular recovery point.</span></span>
1. <span data-ttu-id="e1bc6-138">Wybierz **sieci wirtualnej platformy Azure**: Podaj sieci wirtualnej platformy Azure gdzie zostałyby utworzone hello testowe maszyny wirtualne.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-138">Select an **Azure virtual network**: Provide an Azure virtual network where hello test virtual machines would be created.</span></span> <span data-ttu-id="e1bc6-139">Usługa Site Recovery prób toocreate testowych maszyn wirtualnych w podsieci o tej samej nazwie i przy użyciu hello tego samego adresu IP, jak te zawarte w **obliczenia i sieć** ustawienia hello maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-139">Site Recovery attempts toocreate test virtual machines in a subnet of same name and using hello same IP as that provided in **Compute and Network** settings of hello virtual machine.</span></span> <span data-ttu-id="e1bc6-140">Jeśli podsieć o tej samej nazwie nie jest dostępna w hello dostępne w celu testowania trybu failover sieci wirtualnej platformy Azure, a następnie testowej maszyny wirtualnej jest tworzony w pierwszej podsieci hello alfabetycznie.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-140">If subnet of same name is not available in hello Azure virtual network provided for test failover, then test virtual machine is created in hello first subnet alphabetically.</span></span> <span data-ttu-id="e1bc6-141">Jeśli tego samego adresu IP nie jest dostępny w podsieci hello, maszyny wirtualnej pobiera w podsieci hello innego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-141">If same IP is not available in hello subnet, then virtual machine gets another IP address available in hello subnet.</span></span> <span data-ttu-id="e1bc6-142">Przeczytaj tę sekcję, aby [więcej szczegółów](#creating-a-network-for-test-failover)</span><span class="sxs-lookup"><span data-stu-id="e1bc6-142">Read this section for [more details](#creating-a-network-for-test-failover)</span></span>
1. <span data-ttu-id="e1bc6-143">Jeśli powrotu po awarii za pośrednictwem tooAzure i szyfrowanie danych jest włączone, w **klucza szyfrowania** hello wybierz certyfikat wystawiony po włączeniu szyfrowania danych podczas instalacji dostawcy.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-143">If you're failing over tooAzure and data encryption is enabled, in **Encryption Key** select hello certificate that was issued when you enabled data encryption during Provider installation.</span></span> <span data-ttu-id="e1bc6-144">Jeśli nie włączono szyfrowania na powitania maszyny wirtualnej, można zignorować ten krok.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-144">You can ignore this step if you have not enabled encryption on hello virtual machine.</span></span>
1. <span data-ttu-id="e1bc6-145">Śledzić postęp trybu failover na powitania **zadania** kartę. Należy maszyny repliki stanie toosee hello testu w hello portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-145">Track failover progress on hello **Jobs** tab. You should be able toosee hello test replica machine in hello Azure portal.</span></span>
1. <span data-ttu-id="e1bc6-146">tooinitiate połączenie RDP na maszynie wirtualnej hello, konieczne będzie zbyt[Dodaj publiczny adres ip](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) na powitania interfejs sieciowy hello przejścia w tryb failover maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-146">tooinitiate an RDP connection on hello virtual machine, you will need too[add a public ip](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) on hello network interface of hello failed over virtual machine.</span></span> <span data-ttu-id="e1bc6-147">Jeśli kończy się niepowodzeniem przez maszynę wirtualną w klasycznym tooa, a następnie należy zbyt[Dodawanie punktu końcowego](../virtual-machines/windows/classic/setup-endpoints.md) do portu 3389</span><span class="sxs-lookup"><span data-stu-id="e1bc6-147">If you are failing over tooa Classic virtual machine, then you need too[add an endpoint](../virtual-machines/windows/classic/setup-endpoints.md) on port 3389</span></span>
1. <span data-ttu-id="e1bc6-148">Gdy wszystko będzie gotowe, kliknij przycisk **oczyszczania testowy tryb failover** na powitania planu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-148">Once you're done, click **Cleanup test failover** on hello recovery plan.</span></span> <span data-ttu-id="e1bc6-149">W **uwagi** zarejestrować i zapisać wszelkie obserwacje związane z hello testowy tryb failover.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-149">In **Notes** record and save any observations associated with hello test failover.</span></span> <span data-ttu-id="e1bc6-150">Spowoduje to usunięcie hello maszyn wirtualnych, które zostały utworzone podczas testowania trybu failover.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-150">This deletes hello virtual machines that were created during test failover.</span></span>


> [!TIP]
> <span data-ttu-id="e1bc6-151">Usługa Site Recovery prób toocreate testowych maszyn wirtualnych w podsieci o tej samej nazwie i przy użyciu hello tego samego adresu IP, jak te zawarte w **obliczenia i sieć** ustawienia hello maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-151">Site Recovery attempts toocreate test virtual machines in a subnet of same name and using hello same IP as that provided in **Compute and Network** settings of hello virtual machine.</span></span> <span data-ttu-id="e1bc6-152">Jeśli podsieć o tej samej nazwie nie jest dostępna w hello dostępne w celu testowania trybu failover sieci wirtualnej platformy Azure, a następnie testowej maszyny wirtualnej jest tworzony w pierwszej podsieci hello alfabetycznie.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-152">If subnet of same name is not available in hello Azure virtual network provided for test failover, then test virtual machine is created in hello first subnet alphabetically.</span></span> <span data-ttu-id="e1bc6-153">Jeśli hello docelowy adres IP jest częścią hello wybrana podsieć, usługa site recovery próbuje toocreate hello testowej trybu failover maszyny wirtualnej przy użyciu hello docelowy adres IP.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-153">If hello target IP is part of hello chosen subnet, then site recovery tries toocreate hello test failover virtual machine using hello target IP.</span></span> <span data-ttu-id="e1bc6-154">Jeśli hello docelowy adres IP nie jest częścią hello wybrana podsieć testowej trybu failover maszyny wirtualnej pobiera tworzone przy użyciu dostępny adres IP w hello wybrane podsieci.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-154">If hello target IP is not part of hello chosen subnet then test failover virtual machine gets created using any available IP in hello chosen subnet.</span></span>
>
>

## <a name="test-failover-job"></a><span data-ttu-id="e1bc6-155">Zadania testowego trybu failover</span><span class="sxs-lookup"><span data-stu-id="e1bc6-155">Test failover job</span></span>

![Testowanie trybu Failover](./media/site-recovery-test-failover-to-azure/TestFailoverJob.png)

<span data-ttu-id="e1bc6-157">Po wyzwoleniu test trybu failover obejmuje następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="e1bc6-157">When a test failover is triggered, it involves following steps:</span></span>

1. <span data-ttu-id="e1bc6-158">Sprawdzanie wymagań wstępnych: ten krok zapewnia, że spełniono wszystkie warunki wymagane do trybu failover</span><span class="sxs-lookup"><span data-stu-id="e1bc6-158">Prerequisites check: This step ensures that all conditions required for failover are met</span></span>
1. <span data-ttu-id="e1bc6-159">Tryb failover: Ten krok przetwarza dane hello i powoduje gotowy, że maszyna wirtualna platformy Azure można utworzyć poza jego.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-159">Failover: This step processes hello data and makes it ready so that an Azure virtual machine can be created out of it.</span></span> <span data-ttu-id="e1bc6-160">Jeśli wybrano **najnowsze** punkt odzyskiwania, w tym kroku tworzy punkt odzyskiwania z hello dane, które zostało wysłane toohello usługi.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-160">If you have chosen **Latest** recovery point, this step creates a recovery point from hello data that has been sent toohello service.</span></span>
1. <span data-ttu-id="e1bc6-161">Start: Ten krok umożliwia utworzenie maszyny wirtualnej platformy Azure przy użyciu danych hello przetwarzane w poprzednim kroku hello.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-161">Start: This step creates an Azure virtual machine using hello data processed in hello previous step.</span></span>

## <a name="time-taken-for-failover"></a><span data-ttu-id="e1bc6-162">Czas poświęcony na potrzeby trybu failover</span><span class="sxs-lookup"><span data-stu-id="e1bc6-162">Time taken for failover</span></span>

<span data-ttu-id="e1bc6-163">W niektórych przypadkach pracy awaryjnej maszyn wirtualnych wymaga bardzo pośredniego kroku, który zazwyczaj trwa około 8 toocomplete minut too10.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-163">In certain cases, failover of virtual machines requires an extra intermediate step that usually takes around 8  too10 minutes toocomplete.</span></span> <span data-ttu-id="e1bc6-164">Te przypadki są następujące:</span><span class="sxs-lookup"><span data-stu-id="e1bc6-164">These cases are as following:</span></span>

* <span data-ttu-id="e1bc6-165">Maszyny wirtualne VMware przy użyciu wersji usługi mobilności jest starsza niż 9,8 hello</span><span class="sxs-lookup"><span data-stu-id="e1bc6-165">VMware virtual machines using a version of hello Mobility service older than 9.8</span></span>
* <span data-ttu-id="e1bc6-166">Serwerów fizycznych</span><span class="sxs-lookup"><span data-stu-id="e1bc6-166">Physical servers</span></span>
* <span data-ttu-id="e1bc6-167">Maszyny wirtualne VMware systemu Linux</span><span class="sxs-lookup"><span data-stu-id="e1bc6-167">VMware Linux virtual machines</span></span>
* <span data-ttu-id="e1bc6-168">Maszyny wirtualne funkcji Hyper-V chronione jako serwerów fizycznych</span><span class="sxs-lookup"><span data-stu-id="e1bc6-168">Hyper-V virtual machines protected as physical servers</span></span>
* <span data-ttu-id="e1bc6-169">Maszyny wirtualne VMware, gdy następujące sterowniki nie są dostępne jako rozruchu sterowników</span><span class="sxs-lookup"><span data-stu-id="e1bc6-169">VMware virtual machines where following drivers are not present as boot drivers</span></span>
    * <span data-ttu-id="e1bc6-170">storvsc</span><span class="sxs-lookup"><span data-stu-id="e1bc6-170">storvsc</span></span>
    * <span data-ttu-id="e1bc6-171">magistralę maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="e1bc6-171">vmbus</span></span>
    * <span data-ttu-id="e1bc6-172">storflt</span><span class="sxs-lookup"><span data-stu-id="e1bc6-172">storflt</span></span>
    * <span data-ttu-id="e1bc6-173">Intelide</span><span class="sxs-lookup"><span data-stu-id="e1bc6-173">intelide</span></span>
    * <span data-ttu-id="e1bc6-174">ATAPI</span><span class="sxs-lookup"><span data-stu-id="e1bc6-174">atapi</span></span>
* <span data-ttu-id="e1bc6-175">Adresy IP maszyn wirtualnych VMware, które nie mają włączone niezależnie od tego, czy używasz DHCP lub statyczna usługi DHCP</span><span class="sxs-lookup"><span data-stu-id="e1bc6-175">VMware virtual machines that don't have DHCP service enabled irrespective of whether they are using DHCP or static IP addresses</span></span>

<span data-ttu-id="e1bc6-176">W hello wszystkich innych przypadkach zdarza się to pośredniego kroku nie jest wymagana i hello czas pracy w trybie failover hello jest znacznie niższa.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-176">In all hello other cases this intermediate step is not required and hello time taken for hello failover is significantly lower.</span></span>


## <a name="creating-a-network-for-test-failover"></a><span data-ttu-id="e1bc6-177">Tworzenie sieci do testowania trybu failover</span><span class="sxs-lookup"><span data-stu-id="e1bc6-177">Creating a network for test failover</span></span>
<span data-ttu-id="e1bc6-178">Zaleca się podczas wykonywania testowy tryb failover wybranie sieci, która jest odizolowana od sieci produkcyjnej odzyskiwania lokacji podane w **obliczenia i sieć** ustawienia hello maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-178">It is recommended that when you are doing a test failover you choose a network that is isolated from your production recovery site network that you provided in **Compute and Network** settings for hello virtual machine.</span></span> <span data-ttu-id="e1bc6-179">Domyślnie podczas tworzenia sieci wirtualnej platformy Azure jest odizolowana od innych sieci.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-179">By default when you create an Azure virtual network, it is isolated from other networks.</span></span> <span data-ttu-id="e1bc6-180">Ta sieć, powinien naśladować sieci produkcyjnej:</span><span class="sxs-lookup"><span data-stu-id="e1bc6-180">This network should mimic your production network:</span></span>

1. <span data-ttu-id="e1bc6-181">Sieci testowej powinien mieć tą samą liczbą podsieci co w sieci produkcyjnej oraz hello sama nazwa jak hello podsieci w sieci produkcyjnej.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-181">Test network should have same number of subnets as that in your production network and with hello same name as those of hello subnets in your production network.</span></span>
1. <span data-ttu-id="e1bc6-182">Należy używać sieci testowej hello tego samego zakresu IP jak sieci produkcyjnej.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-182">Test network should use hello same IP range as that of your production network.</span></span>
1. <span data-ttu-id="e1bc6-183">Witaj aktualizacji DNS hello sieci testowej, jako hello IP, który udostępnił jako adres IP obiektu docelowego dla maszyny wirtualnej DNS hello w obszarze **obliczenia i sieć** ustawienia.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-183">Update hello DNS of hello Test Network as hello IP that you gave as target IP for hello DNS virtual machine under **Compute and Network** settings.</span></span> <span data-ttu-id="e1bc6-184">Przejdź przez [test pracy awaryjnej zagadnienia dotyczące usługi active directory](site-recovery-active-directory.md#test-failover-considerations) sekcji, aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-184">Go through [test failover considerations for active directory](site-recovery-active-directory.md#test-failover-considerations) section for more details.</span></span>


## <a name="test-failover-tooa-production-network-on-recovery-site"></a><span data-ttu-id="e1bc6-185">Testowanie trybu failover tooa produkcyjnego środowiska sieciowego w lokacji odzyskiwania</span><span class="sxs-lookup"><span data-stu-id="e1bc6-185">Test failover tooa production network on recovery site</span></span>
<span data-ttu-id="e1bc6-186">Zaleca się podczas wykonywania testowy tryb failover wybranie sieci, która różni się od sieci produkcyjnej odzyskiwania lokacji podane w **obliczenia i sieć** ustawienia hello maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-186">It is recommended that when you are doing a test failover you choose a network that is different from your production recovery site network that you provided in **Compute and Network** settings for hello virtual machine.</span></span> <span data-ttu-id="e1bc6-187">Ale jeśli naprawdę chcesz toovalidate zakończenia tooend łączność w nie powiodło się na maszynie wirtualnej, należy zwrócić uwagę hello następujące punkty:</span><span class="sxs-lookup"><span data-stu-id="e1bc6-187">But if you really want toovalidate end tooend network connectivity in a failed over virtual machine, note hello following points:</span></span>

1. <span data-ttu-id="e1bc6-188">Upewnij się, że hello głównej maszyny wirtualnej jest zamykana podczas wykonywania hello testowy tryb failover.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-188">Make sure that hello primary virtual machine is shutdown when you are doing hello test failover.</span></span> <span data-ttu-id="e1bc6-189">Jeśli nie zrobisz, będzie dwóch maszyn wirtualnych o hello tej samej tożsamości w hello sam sieci na powitania tym samym czasie i który może prowadzić tooundesired skutków.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-189">If you don't do so, there will be two virtual machines with hello same identity running in hello same network at hello same time and that can lead tooundesired consequences.</span></span>
1. <span data-ttu-id="e1bc6-190">Wszelkie zmiany wprowadzone w testowej hello trybu failover maszyny wirtualnej może zostać utracone po możesz hello czyszczenie testowych maszyn wirtualnych trybu failover.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-190">Any changes that you make into hello test failover virtual machines would be lost when you cleanup hello test failover virtual machines.</span></span> <span data-ttu-id="e1bc6-191">Te zmiany nie zostaną zreplikowane toohello wstecz podstawowej maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-191">These changes will not be replicated back toohello primary virtual machine.</span></span>
1. <span data-ttu-id="e1bc6-192">Ten sposób prowadzenia testów prowadzi przestoju tooa aplikacji produkcyjnej.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-192">This way of doing testing leads tooa downtime of your production application.</span></span> <span data-ttu-id="e1bc6-193">Powinien zostać poproszony użytkowników aplikacji hello, że program toonot Użyj hello aplikacji hello DR przejść do szczegółów jest w toku.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-193">Users of hello application should be asked toonot use hello application when hello DR drill is in progress.</span></span>  



## <a name="prepare-active-directory-and-dns"></a><span data-ttu-id="e1bc6-194">Przygotowanie usługi Active Directory i DNS</span><span class="sxs-lookup"><span data-stu-id="e1bc6-194">Prepare Active Directory and DNS</span></span>
<span data-ttu-id="e1bc6-195">toorun testowy tryb failover do testowania aplikacji należy kopię hello środowisku usługi Active Directory w środowisku testowym.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-195">toorun a test failover for application testing, you need a copy of hello production Active Directory environment in your test environment.</span></span> <span data-ttu-id="e1bc6-196">Przejdź przez [test pracy awaryjnej zagadnienia dotyczące usługi active directory](site-recovery-active-directory.md#test-failover-considerations) sekcji, aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-196">Go through [test failover considerations for active directory](site-recovery-active-directory.md#test-failover-considerations) section for more details.</span></span>

## <a name="prepare-tooconnect-tooazure-vms-after-failover"></a><span data-ttu-id="e1bc6-197">Przygotowanie tooconnect tooAzure maszyn wirtualnych po pracy awaryjnej</span><span class="sxs-lookup"><span data-stu-id="e1bc6-197">Prepare tooconnect tooAzure VMs after failover</span></span>

<span data-ttu-id="e1bc6-198">Jeśli chcesz, aby tooAzure tooconnect maszyn wirtualnych za pomocą protokołu RDP po przejściu w tryb failover, upewnij się, że hello podsumowane w tabeli hello akcje.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-198">If you want tooconnect tooAzure VMs using RDP after failover, make sure you do hello actions summarized in hello table.</span></span>

<span data-ttu-id="e1bc6-199">**Tryb failover**</span><span class="sxs-lookup"><span data-stu-id="e1bc6-199">**Failover**</span></span> | <span data-ttu-id="e1bc6-200">**Lokalizacja**</span><span class="sxs-lookup"><span data-stu-id="e1bc6-200">**Location**</span></span> | <span data-ttu-id="e1bc6-201">**Akcje**</span><span class="sxs-lookup"><span data-stu-id="e1bc6-201">**Actions**</span></span>
--- | --- | ---
<span data-ttu-id="e1bc6-202">**Maszyna wirtualna platformy Azure, systemem Windows**</span><span class="sxs-lookup"><span data-stu-id="e1bc6-202">**Azure VM running Windows**</span></span> | <span data-ttu-id="e1bc6-203">Na maszynie lokalnej przed trybu failover</span><span class="sxs-lookup"><span data-stu-id="e1bc6-203">On on-premises machine before failover</span></span> | <span data-ttu-id="e1bc6-204">tooaccess hello maszyny Wirtualnej platformy Azure za pośrednictwem hello internet, Włącz protokół RDP, upewnij się, że TCP i UDP reguły są dodawane do hello **publicznego**, i że RDP jest dozwolone w **zapory systemu Windows** > **dozwolone Aplikacje**, we wszystkich profilach.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-204">tooaccess hello Azure VM over hello internet, enable RDP, make sure TCP, and UDP rules are added for hello **Public**, and that RDP is allowed in **Windows Firewall** > **Allowed Apps**, for all profiles.</span></span><br/><br/> <span data-ttu-id="e1bc6-205">Włącz protokół RDP na maszynie hello tooaccess przez połączenie lokacja lokacja i upewnij się, że RDP jest dozwolony w hello **zapory systemu Windows** -> **dozwolone aplikacje i funkcje** dla  **Domeny i prywatnej** sieci.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-205">tooaccess over a site-to-site connection, enable RDP on hello machine, and ensure that RDP is allowed in hello **Windows Firewall** -> **Allowed apps and features** for **Domain and Private** networks.</span></span><br/><br/>  <span data-ttu-id="e1bc6-206">Upewnij się, że zasady sieci SAN systemu operacyjnego hello ustawiono zbyt**OnlineAll**.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-206">Make sure hello operating system's SAN policy is set too**OnlineAll**.</span></span> <span data-ttu-id="e1bc6-207">[Dowiedz się więcej](https://support.microsoft.com/kb/3031135).</span><span class="sxs-lookup"><span data-stu-id="e1bc6-207">[Learn more](https://support.microsoft.com/kb/3031135).</span></span><br/><br/> <span data-ttu-id="e1bc6-208">Upewnij się, że nie ma żadnych aktualizacji systemu Windows oczekujących na maszynie wirtualnej hello, gdy użytkownik zainicjuje tryb failover.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-208">Make sure there are no Windows updates pending on hello virtual machine when you trigger a failover.</span></span> <span data-ttu-id="e1bc6-209">Usługi Windows update może być uruchamiany po pracy awaryjnej i nie będzie maszyny wirtualnej toohello toologin możliwe dopiero po zakończeniu aktualizacji hello.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-209">Windows update might start when you failover and you will not be able toologin toohello virtual machine until hello update completes.</span></span> <br/><br/>
<span data-ttu-id="e1bc6-210">**Maszyna wirtualna platformy Azure, systemem Windows**</span><span class="sxs-lookup"><span data-stu-id="e1bc6-210">**Azure VM running Windows**</span></span> | <span data-ttu-id="e1bc6-211">Na maszynie Wirtualnej Azure po trybu failover</span><span class="sxs-lookup"><span data-stu-id="e1bc6-211">On Azure VM after failover</span></span> | <span data-ttu-id="e1bc6-212">Na maszynie wirtualnej klasycznego [Dodaj publiczny punkt końcowy](../virtual-machines/windows/classic/setup-endpoints.md) dla hello protokołu RDP (port 3389)</span><span class="sxs-lookup"><span data-stu-id="e1bc6-212">For a classic virtual machine, [add a public endpoint](../virtual-machines/windows/classic/setup-endpoints.md) for hello RDP protocol (port 3389)</span></span><br/><br/>  <span data-ttu-id="e1bc6-213">Menedżer zasobów maszyny wirtualnej [Dodaj publiczny adres IP](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) na nim.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-213">For a Resource Manager virtual machine, [add a public IP](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) on it.</span></span><br/><br/> <span data-ttu-id="e1bc6-214">Witaj reguły grupy zabezpieczeń sieci na powitania przejścia w tryb failover maszyny Wirtualnej, i hello toowhich podsieci platformy Azure, który jest połączony, wymagają tooallow przychodzących połączeń toohello RDP portu.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-214">hello network security group rules on hello failed over VM, and hello Azure subnet toowhich it is connected, need tooallow incoming connections toohello RDP port.</span></span><br/><br/> <span data-ttu-id="e1bc6-215">Menedżer zasobów maszyny wirtualnej, można sprawdzić **diagnostyki rozruchu** toolook na zrzut ekranu hello maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="e1bc6-215">For a Resource Manager virtual machine, you can check **Boot diagnostics** toolook at a screenshot of hello virtual machine</span></span><br/><br/> <span data-ttu-id="e1bc6-216">Jeśli nie możesz połączyć, sprawdź hello, że maszyna wirtualna jest uruchomiona, a następnie sprawdź te [porady dotyczące rozwiązywania problemów](http://social.technet.microsoft.com/wiki/contents/articles/31666.troubleshooting-remote-desktop-connection-after-failover-using-asr.aspx).</span><span class="sxs-lookup"><span data-stu-id="e1bc6-216">If you can't connect, check that hello VM is running and then look at these [troubleshooting tips](http://social.technet.microsoft.com/wiki/contents/articles/31666.troubleshooting-remote-desktop-connection-after-failover-using-asr.aspx).</span></span><br/><br/>
<span data-ttu-id="e1bc6-217">**Maszyna wirtualna platformy Azure, systemem Linux**</span><span class="sxs-lookup"><span data-stu-id="e1bc6-217">**Azure VM running Linux**</span></span> | <span data-ttu-id="e1bc6-218">Na maszynie lokalnej przed trybu failover</span><span class="sxs-lookup"><span data-stu-id="e1bc6-218">On on-premises machine before failover</span></span> | <span data-ttu-id="e1bc6-219">Upewnij się, że Usługa Secure Shell na powitania maszyny Wirtualnej Azure hello jest automatycznie ustawiana toostart przy rozruchu systemu.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-219">Ensure that hello Secure Shell service on hello Azure VM is set toostart automatically on system boot.</span></span><br/><br/> <span data-ttu-id="e1bc6-220">Sprawdź, czy reguły zapory zezwalają tooit połączenia SSH.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-220">Check that firewall rules allow an SSH connection tooit.</span></span>
<span data-ttu-id="e1bc6-221">**Maszyna wirtualna platformy Azure, systemem Linux**</span><span class="sxs-lookup"><span data-stu-id="e1bc6-221">**Azure VM running Linux**</span></span> | <span data-ttu-id="e1bc6-222">Maszyna wirtualna platformy Azure po trybu failover</span><span class="sxs-lookup"><span data-stu-id="e1bc6-222">Azure VM after failover</span></span> | <span data-ttu-id="e1bc6-223">Witaj reguły grupy zabezpieczeń sieci na powitania przejścia w tryb failover maszyny Wirtualnej, i hello toowhich podsieci platformy Azure, który jest połączony, wymagają portu SSH toohello przychodzących połączeń tooallow.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-223">hello network security group rules on hello failed over VM, and hello Azure subnet toowhich it is connected, need tooallow incoming connections toohello SSH port.</span></span><br/><br/> <span data-ttu-id="e1bc6-224">Na maszynie wirtualnej klasycznego [Dodaj publiczny punkt końcowy](../virtual-machines/windows/classic/setup-endpoints.md) należy utworzyć tooallow połączenia przychodzące na powitania portu SSH (port TCP 22 domyślnie).</span><span class="sxs-lookup"><span data-stu-id="e1bc6-224">For  a classic virtual machine, [add a public endpoint](../virtual-machines/windows/classic/setup-endpoints.md) should be created, tooallow incoming connections on hello SSH port (TCP port 22 by default).</span></span><br/><br/> <span data-ttu-id="e1bc6-225">Menedżer zasobów maszyny wirtualnej [Dodaj publiczny adres IP](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) na nim.</span><span class="sxs-lookup"><span data-stu-id="e1bc6-225">For a Resource Manager virtual machine, [add a public IP](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) on it.</span></span><br/><br/> <span data-ttu-id="e1bc6-226">Menedżer zasobów maszyny wirtualnej, można sprawdzić **diagnostyki rozruchu** toolook na zrzut ekranu hello maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="e1bc6-226">For a Resource Manager virtual machine, you can check **Boot diagnostics** toolook at a screenshot of hello virtual machine</span></span><br/><br/>



## <a name="next-steps"></a><span data-ttu-id="e1bc6-227">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="e1bc6-227">Next steps</span></span>
<span data-ttu-id="e1bc6-228">Po pomyślnie wykonano test trybu failover możesz zrobić [pracy awaryjnej](site-recovery-failover.md).</span><span class="sxs-lookup"><span data-stu-id="e1bc6-228">Once you have successfully tried a test failover you can try doing a [failover](site-recovery-failover.md).</span></span>
