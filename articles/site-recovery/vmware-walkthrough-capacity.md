---
title: "Planowanie wydajności i skalowania dla replikacji maszyn wirtualnych VMware do platformy Azure z usługą Azure Site Recovery | Dokumentacja firmy Microsoft"
description: "Użyj w tym artykule Planowanie wydajności i skalowania podczas replikowania maszyn wirtualnych VMware do platformy Azure z usługą Azure Site Recovery"
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: 0a1cd8eb-a8f7-4228-ab84-9449e0b2887b
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 06/27/2017
ms.author: rayne
ms.openlocfilehash: f5b334e594e3d002e1862b25c4faba7163efa7d4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="step-3-plan-capacity-and-scaling-for-vmware-to-azure-replication"></a><span data-ttu-id="b9a6e-103">Krok 3: Planowanie pojemności i skalowanie VMware do platformy Azure replikacji</span><span class="sxs-lookup"><span data-stu-id="b9a6e-103">Step 3: Plan capacity and scaling for VMware to Azure replication</span></span>

<span data-ttu-id="b9a6e-104">Użyj w tym artykule, aby zorientować się planowanie pojemności i skalowanie podczas replikowania lokalnych maszyn wirtualnych VMware i serwerów fizycznych do platformy Azure z [usługi Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b9a6e-104">Use this article to figure out planning for capacity and scaling, when replicating on-premises VMware VMs and physical servers to Azure with [Azure Site Recovery](site-recovery-overview.md).</span></span>

<span data-ttu-id="b9a6e-105">Opublikuj komentarze i pytania w dolnej części tego artykułu lub na [Forum usług odzyskiwania Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="b9a6e-105">Post comments and questions at the bottom of this article, or on the [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>

## <a name="how-do-i-start-capacity-planning"></a><span data-ttu-id="b9a6e-106">Jak rozpocząć planowanie pojemności</span><span class="sxs-lookup"><span data-stu-id="b9a6e-106">How do I start capacity planning?</span></span>

<span data-ttu-id="b9a6e-107">Zbieranie informacji o środowisku replikacji, a następnie planowania pojemności, korzystając z tych informacji, wraz z uwagi wyróżniane w tym artykule.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-107">You gather information about your replication environment, and then plan capacity using this information, together with the considerations highlighted in this article.</span></span>


## <a name="gather-information"></a><span data-ttu-id="b9a6e-108">Zbieranie informacji</span><span class="sxs-lookup"><span data-stu-id="b9a6e-108">Gather information</span></span>

1. <span data-ttu-id="b9a6e-109">Pobierz [narzędzie wdrożenia Planistę](https://aka.ms/asr-deployment-planner) dla replikacji maszyn wirtualnych VMware.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-109">Download the [Deployment Planner tool](https://aka.ms/asr-deployment-planner) for VMware replication.</span></span>
2. <span data-ttu-id="b9a6e-110">[Przeczytaj ten artykuł](site-recovery-deployment-planner.md) zrozumienie, jak uruchomić narzędzie.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-110">[Read this article](site-recovery-deployment-planner.md) to understand how to run the tool.</span></span>
3. <span data-ttu-id="b9a6e-111">Za pomocą narzędzia zbierać informacje o zgodnych i niezgodnych maszyn wirtualnych, dysków dla maszyny Wirtualnej, a danych churn — na dysku.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-111">Using the tool you gather information about compatible and incompatible VMs, disks per VM, and data churn per disk.</span></span> <span data-ttu-id="b9a6e-112">Narzędzie obejmuje również wymagania dotyczące przepustowości sieci i infrastruktury platformy Azure wymagane do pomyślnego replikacji i testowania trybu failover.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-112">The tool also covers network bandwidth requirements, and the Azure infrastructure needed for successful replication and test failover.</span></span>

## <a name="replication-considerations"></a><span data-ttu-id="b9a6e-113">Uwagi dotyczące replikacji</span><span class="sxs-lookup"><span data-stu-id="b9a6e-113">Replication considerations</span></span>

<span data-ttu-id="b9a6e-114">Przed rozpoczęciem wdrażania należy zwrócić uwagę następujące zagadnienia:</span><span class="sxs-lookup"><span data-stu-id="b9a6e-114">Note these considerations before you start deployment:</span></span>

<span data-ttu-id="b9a6e-115">**Składnik**</span><span class="sxs-lookup"><span data-stu-id="b9a6e-115">**Component**</span></span> | <span data-ttu-id="b9a6e-116">**Szczegóły**</span><span class="sxs-lookup"><span data-stu-id="b9a6e-116">**Details**</span></span> |
--- | --- | ---
<span data-ttu-id="b9a6e-117">**Replikacja**</span><span class="sxs-lookup"><span data-stu-id="b9a6e-117">**Replication**</span></span> | <span data-ttu-id="b9a6e-118">**Maksymalna szybkość codziennych zmian:** chronionej maszyny można używać tylko jednego serwera przetwarzania i serwer pojedynczego procesu może obsłużyć dziennym zmiany szybkości maksymalnie 2 TB.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-118">**Maximum daily change rate:** A protected machine can only use one process server, and a single process server can handle a daily change rate up to 2 TB.</span></span> <span data-ttu-id="b9a6e-119">W związku z tym 2 TB jest maksymalną codziennych danych zmienić szybkość, z której jest obsługiwana dla komputera chronionego.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-119">Thus 2 TB is the maximum daily data change rate that’s supported for a protected machine.</span></span><br/><br/> <span data-ttu-id="b9a6e-120">**Maksymalna przepustowość:** zreplikowanej maszyny mogą należeć do jednego konta magazynu na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-120">**Maximum throughput:** A replicated machine can belong to one storage account in Azure.</span></span> <span data-ttu-id="b9a6e-121">Konto magazynu w warstwie standardowa może obsługiwać maksymalnie 20 000 żądań na sekundę, i zaleca się utrzymać liczby operacji wejścia/wyjścia na sekundę (IOPS) dla maszyny źródłowej do 20 000.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-121">A standard storage account can handle a maximum of 20,000 requests per second, and we recommend that you keep the number of input/output operations per second (IOPS) across a source machine to 20,000.</span></span> <span data-ttu-id="b9a6e-122">Na przykład jeśli masz maszyny źródłowej z dyskami 5, a każdy dysk generuje 120 IOPS (rozmiarze 8 KB) na maszynie źródłowej, następnie będzie w obrębie platformy Azure limitu IOPS dysku 500.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-122">For example, if you have a source machine with 5 disks, and each disk generates 120 IOPS (8K size) on the source machine, then it will be within the Azure per disk IOPS limit of 500.</span></span> <span data-ttu-id="b9a6e-123">(Liczba kont magazynu wymagana jest równa maszyny źródłowej całkowita IOPS, podzielona przez 20 000).</span><span class="sxs-lookup"><span data-stu-id="b9a6e-123">(The number of storage accounts required is equal to the total source machine IOPS, divided by 20,000.)</span></span>

## <a name="configuration-server-capacity"></a><span data-ttu-id="b9a6e-124">Pojemność serwera konfiguracji</span><span class="sxs-lookup"><span data-stu-id="b9a6e-124">Configuration server capacity</span></span>

<span data-ttu-id="b9a6e-125">Serwer konfiguracji powinno być możliwe do obsługi codziennych pojemności szybkość zmian we wszystkich obciążeń uruchomionych na chronionych komputerach i musi wystarczającą przepustowość do ciągłej replikacji danych do usługi Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-125">The configuration server should be able to handle the daily change rate capacity across all workloads running on protected machines, and needs sufficient bandwidth to continuously replicate data to Azure Storage.</span></span>

<span data-ttu-id="b9a6e-126">Najlepszym rozwiązaniem zlokalizować serwera konfiguracji na tej samej sieci, a segment sieci LAN jako maszyn, które chcesz chronić.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-126">As a best practice, locate the configuration server on the same network and LAN segment as the machines you want to protect.</span></span> <span data-ttu-id="b9a6e-127">Może znajdować się w innej sieci, ale maszyny, które chcesz chronić powinny mieć widoczność warstwy 3 sieci do niego.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-127">It can be located on a different network, but machines you want to protect should have layer 3 network visibility to it.</span></span>

## <a name="sizing-recommendations"></a><span data-ttu-id="b9a6e-128">Zalecenia dotyczące zmiany rozmiaru</span><span class="sxs-lookup"><span data-stu-id="b9a6e-128">Sizing recommendations</span></span>

<span data-ttu-id="b9a6e-129">W tabeli przedstawiono zalecenia dotyczące rozmiaru oparte na Procesorze.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-129">The table summarizes sizing recommendations based on CPU.</span></span>

<span data-ttu-id="b9a6e-130">**PROCESOR CPU**</span><span class="sxs-lookup"><span data-stu-id="b9a6e-130">**CPU**</span></span> | <span data-ttu-id="b9a6e-131">**Pamięci**</span><span class="sxs-lookup"><span data-stu-id="b9a6e-131">**Memory**</span></span> | <span data-ttu-id="b9a6e-132">**Rozmiar pamięci podręcznej dysku**</span><span class="sxs-lookup"><span data-stu-id="b9a6e-132">**Cache disk size**</span></span> | <span data-ttu-id="b9a6e-133">**Częstotliwość zmian danych**</span><span class="sxs-lookup"><span data-stu-id="b9a6e-133">**Data change rate**</span></span> | <span data-ttu-id="b9a6e-134">**Chronione maszyny**</span><span class="sxs-lookup"><span data-stu-id="b9a6e-134">**Protected machines**</span></span>
--- | --- | --- | --- | ---
<span data-ttu-id="b9a6e-135">8 Vcpu (2 sockets * 4 rdzenie @ 2,5 GHz [GHz])</span><span class="sxs-lookup"><span data-stu-id="b9a6e-135">8 vCPUs (2 sockets * 4 cores @ 2.5 gigahertz [GHz])</span></span> | <span data-ttu-id="b9a6e-136">16 GB</span><span class="sxs-lookup"><span data-stu-id="b9a6e-136">16 GB</span></span> | <span data-ttu-id="b9a6e-137">300 GB</span><span class="sxs-lookup"><span data-stu-id="b9a6e-137">300 GB</span></span> | <span data-ttu-id="b9a6e-138">500 GB lub mniej</span><span class="sxs-lookup"><span data-stu-id="b9a6e-138">500 GB or less</span></span> | <span data-ttu-id="b9a6e-139">Replikowanie maszyn mniej niż 100.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-139">Replicate less than 100 machines.</span></span>
<span data-ttu-id="b9a6e-140">12 Vcpu (2 sockets * 6 rdzeni @ 2,5 GHz)</span><span class="sxs-lookup"><span data-stu-id="b9a6e-140">12 vCPUs (2 sockets * 6 cores @ 2.5 GHz)</span></span> | <span data-ttu-id="b9a6e-141">18 GB</span><span class="sxs-lookup"><span data-stu-id="b9a6e-141">18 GB</span></span> | <span data-ttu-id="b9a6e-142">600 GB</span><span class="sxs-lookup"><span data-stu-id="b9a6e-142">600 GB</span></span> | <span data-ttu-id="b9a6e-143">500 GB do 1 TB</span><span class="sxs-lookup"><span data-stu-id="b9a6e-143">500 GB to 1 TB</span></span> | <span data-ttu-id="b9a6e-144">Replikują między 100 150 maszyn.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-144">Replicate between 100-150 machines.</span></span>
<span data-ttu-id="b9a6e-145">16 Vcpu (2 sockets * 8 rdzeni @ 2,5 GHz)</span><span class="sxs-lookup"><span data-stu-id="b9a6e-145">16 vCPUs (2 sockets * 8 cores @ 2.5 GHz)</span></span> | <span data-ttu-id="b9a6e-146">32 GB</span><span class="sxs-lookup"><span data-stu-id="b9a6e-146">32 GB</span></span> | <span data-ttu-id="b9a6e-147">1 TB</span><span class="sxs-lookup"><span data-stu-id="b9a6e-147">1 TB</span></span> | <span data-ttu-id="b9a6e-148">1 TB do 2 TB</span><span class="sxs-lookup"><span data-stu-id="b9a6e-148">1 TB to 2 TB</span></span> | <span data-ttu-id="b9a6e-149">Replikują między 150 – 200 maszyn.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-149">Replicate between 150-200 machines.</span></span>
<span data-ttu-id="b9a6e-150">Wdrażanie inny serwer przetwarzania</span><span class="sxs-lookup"><span data-stu-id="b9a6e-150">Deploy another process server</span></span> | | | <span data-ttu-id="b9a6e-151">> 2 TB</span><span class="sxs-lookup"><span data-stu-id="b9a6e-151">> 2 TB</span></span> | <span data-ttu-id="b9a6e-152">Wdrażanie serwerów dodatkowych procesów, Jeśli replikujesz ponad 200 maszyn lub zmiana codziennych danych szybkość przekracza 2 TB.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-152">Deploy additional process servers if you're replicating more than 200 machines, or if the daily data change rate exceeds 2 TB.</span></span>

<span data-ttu-id="b9a6e-153">Gdzie:</span><span class="sxs-lookup"><span data-stu-id="b9a6e-153">Where:</span></span>

* <span data-ttu-id="b9a6e-154">Każda maszyna źródłowa jest skonfigurowany z 3 dyski 100 GB.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-154">Each source machine is configured with 3 disks of 100 GB each.</span></span>
* <span data-ttu-id="b9a6e-155">My używamy najlepszymi magazynu 8 dysków SAS 10 k obr. / min, z RAID 10 dla pamięci podręcznej dysku pomiarów.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-155">We used benchmarking storage of 8 SAS drives of 10 K RPM, with RAID 10, for cache disk measurements.</span></span>

## <a name="process-server-capacity"></a><span data-ttu-id="b9a6e-156">Pojemność serwera przetwarzania</span><span class="sxs-lookup"><span data-stu-id="b9a6e-156">Process server capacity</span></span>


<span data-ttu-id="b9a6e-157">Serwer przetwarzania odbiera dane replikacji z chronionych maszyn i optymalizuje je przy użyciu pamięci podręcznej, kompresji i szyfrowania.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-157">The process server receives replication data from protected machines, and optimizes it with caching, compression, and encryption.</span></span> <span data-ttu-id="b9a6e-158">Następnie wysyła dane na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-158">Then it sends the data to Azure.</span></span>

- <span data-ttu-id="b9a6e-159">Proces maszyny serwera ma wystarczające zasoby, aby wykonać te zadania.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-159">The process server machine should have sufficient resources to perform these tasks.</span></span>
- <span data-ttu-id="b9a6e-160">Pierwszy serwer przetwarzania jest instalowany domyślnie na serwerze konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-160">The first process server is installed by default on the configuration server.</span></span> <span data-ttu-id="b9a6e-161">Można wdrożyć serwery dodatkowych procesów do skalowania środowiska.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-161">You can deploy additional process servers to scale your environment.</span></span>
- <span data-ttu-id="b9a6e-162">Serwer przetwarzania korzysta z pamięci podręcznej opartej na dysku.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-162">The process server uses a disk-based cache.</span></span> <span data-ttu-id="b9a6e-163">Użyj dysku pamięci podręcznej oddzielne 600 GB lub więcej do obsługi zmian danych przechowywanych w przypadku awarii lub wąskich gardeł.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-163">Use a separate cache disk of 600 GB or more to handle data changes stored in the event of a network bottleneck or outage.</span></span>
- <span data-ttu-id="b9a6e-164">Jeśli musisz ochrony ponad 200 maszyn lub szybkość codziennych zmian jest większa niż 2 TB, można dodać procesu serwerów do obsługi obciążenia replikacji.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-164">If you need to protect more than 200 machines, or the daily change rate is greater than 2 TB, you can add process servers to handle the replication load.</span></span> <span data-ttu-id="b9a6e-165">Aby skalować w poziomie, można:</span><span class="sxs-lookup"><span data-stu-id="b9a6e-165">To scale out, you can:</span></span>
    - <span data-ttu-id="b9a6e-166">Zwiększ liczbę serwerów konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-166">Increase the number of configuration servers.</span></span> <span data-ttu-id="b9a6e-167">Na przykład można chronić maksymalnie 400 maszyn przy użyciu dwóch serwerów konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-167">For example, you can protect up to 400 machines with two configuration servers.</span></span>
    - <span data-ttu-id="b9a6e-168">Dodawanie kolejnych serwerów procesu i ich używać do obsługi ruchu zamiast (lub oprócz) serwera konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-168">Add more process servers, and use these to handle traffic instead of (or in addition to) the configuration server.</span></span>


### <a name="example-process-server-scaling"></a><span data-ttu-id="b9a6e-169">Przykład procesu serwera skalowania</span><span class="sxs-lookup"><span data-stu-id="b9a6e-169">Example process server scaling</span></span>

<span data-ttu-id="b9a6e-170">W poniższej tabeli opisano scenariusz, w którym:</span><span class="sxs-lookup"><span data-stu-id="b9a6e-170">The following table describes a scenario in which:</span></span>

* <span data-ttu-id="b9a6e-171">Nie planujesz użyć konfiguracji serwera jako serwera przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-171">You're not planning to use the configuration server as a process server.</span></span>
* <span data-ttu-id="b9a6e-172">Po skonfigurowaniu serwera dodatkowego przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-172">You've set up an additional process server.</span></span>
* <span data-ttu-id="b9a6e-173">Skonfigurowano chronionych maszyn wirtualnych do używania serwera dodatkowych procesów.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-173">You've configured protected virtual machines to use the additional process server.</span></span>
* <span data-ttu-id="b9a6e-174">Każda maszyna chronionego źródła jest skonfigurowany z trzech dysków 100 GB.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-174">Each protected source machine is configured with three disks of 100 GB each.</span></span>

<span data-ttu-id="b9a6e-175">**Serwer konfiguracji**</span><span class="sxs-lookup"><span data-stu-id="b9a6e-175">**Configuration server**</span></span> | <span data-ttu-id="b9a6e-176">**Serwer przetwarzania dodatkowe**</span><span class="sxs-lookup"><span data-stu-id="b9a6e-176">**Additional process server**</span></span> | <span data-ttu-id="b9a6e-177">**Rozmiar pamięci podręcznej dysku**</span><span class="sxs-lookup"><span data-stu-id="b9a6e-177">**Cache disk size**</span></span> | <span data-ttu-id="b9a6e-178">**Częstotliwość zmian danych**</span><span class="sxs-lookup"><span data-stu-id="b9a6e-178">**Data change rate**</span></span> | <span data-ttu-id="b9a6e-179">**Chronione maszyny**</span><span class="sxs-lookup"><span data-stu-id="b9a6e-179">**Protected machines**</span></span>
--- | --- | --- | --- | ---
<span data-ttu-id="b9a6e-180">8 Vcpu (2 sockets * 4 rdzenie @ 2,5 GHz), 16 GB pamięci</span><span class="sxs-lookup"><span data-stu-id="b9a6e-180">8 vCPUs (2 sockets * 4 cores @ 2.5 GHz), 16 GB memory</span></span> | <span data-ttu-id="b9a6e-181">4 Vcpu (2 sockets * 2 rdzenie @ 2,5 GHz), 8 GB pamięci</span><span class="sxs-lookup"><span data-stu-id="b9a6e-181">4 vCPUs (2 sockets * 2 cores @ 2.5 GHz), 8 GB memory</span></span> | <span data-ttu-id="b9a6e-182">300 GB</span><span class="sxs-lookup"><span data-stu-id="b9a6e-182">300 GB</span></span> | <span data-ttu-id="b9a6e-183">250 GB lub mniej</span><span class="sxs-lookup"><span data-stu-id="b9a6e-183">250 GB or less</span></span> | <span data-ttu-id="b9a6e-184">Replikowanie maszyn 85 lub mniej.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-184">Replicate 85 or fewer machines.</span></span>
<span data-ttu-id="b9a6e-185">8 Vcpu (2 sockets * 4 rdzenie @ 2,5 GHz), 16 GB pamięci</span><span class="sxs-lookup"><span data-stu-id="b9a6e-185">8 vCPUs (2 sockets * 4 cores @ 2.5 GHz), 16 GB memory</span></span> | <span data-ttu-id="b9a6e-186">8 Vcpu (2 sockets * 4 rdzenie @ 2,5 GHz), 12 GB pamięci RAM</span><span class="sxs-lookup"><span data-stu-id="b9a6e-186">8 vCPUs (2 sockets * 4 cores @ 2.5 GHz), 12 GB memory</span></span> | <span data-ttu-id="b9a6e-187">600 GB</span><span class="sxs-lookup"><span data-stu-id="b9a6e-187">600 GB</span></span> | <span data-ttu-id="b9a6e-188">250 GB do 1 TB</span><span class="sxs-lookup"><span data-stu-id="b9a6e-188">250 GB to 1 TB</span></span> | <span data-ttu-id="b9a6e-189">Replikują między 85 150 maszyny.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-189">Replicate between 85-150 machines.</span></span>
<span data-ttu-id="b9a6e-190">12 Vcpu (2 sockets * 6 rdzeni @ 2,5 GHz), 18 GB pamięci</span><span class="sxs-lookup"><span data-stu-id="b9a6e-190">12 vCPUs (2 sockets * 6 cores @ 2.5 GHz), 18 GB memory</span></span> | <span data-ttu-id="b9a6e-191">12 Vcpu (2 sockets * 6 rdzeni @ 2,5 GHz) 24 GB pamięci</span><span class="sxs-lookup"><span data-stu-id="b9a6e-191">12 vCPUs (2 sockets * 6 cores @ 2.5 GHz) 24 GB memory</span></span> | <span data-ttu-id="b9a6e-192">1 TB</span><span class="sxs-lookup"><span data-stu-id="b9a6e-192">1 TB</span></span> | <span data-ttu-id="b9a6e-193">1 TB do 2 TB</span><span class="sxs-lookup"><span data-stu-id="b9a6e-193">1 TB to 2 TB</span></span> | <span data-ttu-id="b9a6e-194">Replikują między 150 225 komputerów.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-194">Replicate between 150-225 machines.</span></span>

<span data-ttu-id="b9a6e-195">Sposób, w którym można skalować serwery zależy od swoich preferencji modelu skalowania w górę i skalowania w poziomie.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-195">The way in which you scale your servers depends on your preference for a scale-up or scale-out model.</span></span>  <span data-ttu-id="b9a6e-196">Skalowanie w górę przez wdrożenie kilku konfiguracje i serwerów procesu lub skalowanie w poziomie przez wdrożenie więcej serwerów z mniejszą liczbą zasobów.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-196">You scale up by deploying a few high-end configuration and process servers, or scale out by deploying more servers with fewer resources.</span></span> <span data-ttu-id="b9a6e-197">Na przykład jeśli musisz chronić 220 maszyny, wykonaj jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="b9a6e-197">For example, if you need to protect 220 machines, you could do either of the following:</span></span>

* <span data-ttu-id="b9a6e-198">Konfigurowanie serwera konfiguracji z 12 vCPU, 18 GB pamięci, a serwerem dodatkowych procesów z 12 vCPU, 24 GB pamięci.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-198">Set up the configuration server with 12 vCPU, 18 GB of memory, and an additional process server with 12 vCPU, 24 GB of memory.</span></span> <span data-ttu-id="b9a6e-199">Skonfiguruj chronione maszyny do korzystania z serwera dodatkowych procesów.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-199">Configure protected machines to use the additional process server only.</span></span>
* <span data-ttu-id="b9a6e-200">Skonfiguruj dwa serwery konfiguracji (vCPU, 16 GB pamięci RAM 2 x 8) i dwa serwery dodatkowych procesów (vCPU 1 x 8 i 4 maszyny vCPU x 1 do uchwytu 135 + 85 [220]).</span><span class="sxs-lookup"><span data-stu-id="b9a6e-200">Set up two configuration servers (2 x 8 vCPU, 16 GB RAM) and two additional process servers (1 x 8 vCPU and 4 vCPU x 1 to handle 135 + 85 [220] machines).</span></span> <span data-ttu-id="b9a6e-201">Skonfiguruj chronione maszyny, aby korzystały z serwerów dodatkowych procesów.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-201">Configure protected machines to use the additional process servers only.</span></span>

## <a name="deploy-additional-process-servers"></a><span data-ttu-id="b9a6e-202">Wdrażanie serwerów dodatkowych procesów</span><span class="sxs-lookup"><span data-stu-id="b9a6e-202">Deploy additional process servers</span></span>

<span data-ttu-id="b9a6e-203">Wykonaj te instrukcje, aby skonfigurować serwer dodatkowych procesów.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-203">Follow these instructions to set up an additional process server.</span></span> <span data-ttu-id="b9a6e-204">Po skonfigurowaniu serwera, można dokonać migracji maszyn źródłowych z niego korzystać.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-204">After setting up the server, you migrate source machines to use it.</span></span>

1. <span data-ttu-id="b9a6e-205">W **serwerów usługi Site Recovery**, kliknij serwer konfiguracji > **+ serwera przetwarzania**.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-205">In **Site Recovery servers**, click the configuration server > **+Process Server**.</span></span>
2. <span data-ttu-id="b9a6e-206">W **typ serwera**, kliknij przycisk **serwera przetwarzania (lokalnego)**.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-206">In **Server type**, click **Process server (on-premises)**.</span></span>

    ![Serwer przetwarzania](./media/vmware-walkthrough-capacity/migrate-ps2.png)
3. <span data-ttu-id="b9a6e-208">Pobierz plik Instalatora Unified usługi Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-208">Download the Site Recovery Unified Setup file.</span></span>
4. <span data-ttu-id="b9a6e-209">Uruchom Instalatora, aby zainstalować serwer przetwarzania i zarejestruj go w magazynie.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-209">Run setup to install the process server, and register it in the vault.</span></span>
5. <span data-ttu-id="b9a6e-210">W obszarze **Przed rozpoczęciem** wybierz pozycję **Dodaj dodatkowe serwery przetwarzania w celu zwiększenia skali wdrożenia**.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-210">In **Before you begin**, select **Add additional process servers to scale out deployment**.</span></span>
6. <span data-ttu-id="b9a6e-211">W **szczegóły konfiguracji serwera**, podaj adres IP serwera konfiguracji i hasło.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-211">In **Configuration Server Details**, specify the IP address of the configuration server, and the passphrase.</span></span> <span data-ttu-id="b9a6e-212">Jeśli nie masz hasła go uzyskać, uruchamiając **[SiteRecoveryInstallationFolder]\home\sysystems\bin\genpassphrase.exe – n** na serwerze konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-212">If you don't have the passphrase, get it by running **[SiteRecoveryInstallationFolder]\home\sysystems\bin\genpassphrase.exe –n** on the configuration server.</span></span>

    ![Serwer konfiguracji](./media/vmware-walkthrough-capacity/add-ps2.png)
7. <span data-ttu-id="b9a6e-214">Wykonaj pozostałe ustawienia w taki sam sposób jak w przypadku podczas konfigurowania serwera konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-214">Complete the rest of setup in the same way you did when you set up the configuration server.</span></span>

### <a name="migrate-machines-to-use-the-process-server"></a><span data-ttu-id="b9a6e-215">Migruj maszyny, aby użyć serwera przetwarzania</span><span class="sxs-lookup"><span data-stu-id="b9a6e-215">Migrate machines to use the process server</span></span>

1. <span data-ttu-id="b9a6e-216">W **ustawienia** > **serwerów usługi Site Recovery**, kliknij serwer konfiguracji > **przetworzyć serwerów**.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-216">In **Settings** > **Site Recovery servers**, click the configuration server > **Process servers**.</span></span>
2. <span data-ttu-id="b9a6e-217">Kliknij prawym przyciskiem myszy serwer przetwarzania obecnie w użyciu > **przełącznika**.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-217">Right-click the process server currently in use > **Switch**.</span></span>

    ![Serwer przetwarzania przełącznika](./media/vmware-walkthrough-capacity/migrate-ps3.png)
3. <span data-ttu-id="b9a6e-219">W **wybierz docelowy serwer przetwarzania**, wybierz serwer przetwarzania, którego chcesz użyć i wybierz maszyny wirtualne, które będzie obsługiwać serwer.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-219">In **Select target process server**, select the process server you want to use, and select the VMs that the server will handle.</span></span>
4. <span data-ttu-id="b9a6e-220">Kliknij ikonę informacji.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-220">Click the information icon.</span></span> <span data-ttu-id="b9a6e-221">Pomaga załadować decyzji, zostanie wyświetlony średni ilości miejsca, która jest potrzebna do replikowania każdej wybranej maszyny Wirtualnej do nowego serwera przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-221">To help you make load decisions, the average space that's needed to replicate each selected VM to the new process server is displayed.</span></span>
5. <span data-ttu-id="b9a6e-222">Kliknij znacznik wyboru, aby rozpocząć replikację na nowym serwerze procesu.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-222">Click the check mark to start replication to the new process server.</span></span>

## <a name="control-network-bandwidth"></a><span data-ttu-id="b9a6e-223">Sterowania przepustowością sieci</span><span class="sxs-lookup"><span data-stu-id="b9a6e-223">Control network bandwidth</span></span>

<span data-ttu-id="b9a6e-224">Po uruchomieniu [narzędzie wdrożenia Planistę](site-recovery-deployment-planner.md) do obliczania wartości przepustowości wymagane dla replikacji (Replikacja początkowa i następnie delta) można kontrolować, ilość przepustowości używanej w ramach replikacji przy użyciu kilku opcji:</span><span class="sxs-lookup"><span data-stu-id="b9a6e-224">After you run [the Deployment Planner tool](site-recovery-deployment-planner.md) to calculate the bandwidth you need for replication (the initial replication and then delta), you can control the amount of bandwidth used for replication using a couple of options:</span></span>

* <span data-ttu-id="b9a6e-225">**Ograniczanie przepustowości**: VMware ruchu, który replikuje Azure przechodzi przez serwer określonego procesu.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-225">**Throttle bandwidth**: VMware traffic that replicates to Azure goes through a specific process server.</span></span> <span data-ttu-id="b9a6e-226">Możesz ograniczyć przepustowość na maszynach działających jako serwery procesu.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-226">You can throttle bandwidth on the machines running as process servers.</span></span>
* <span data-ttu-id="b9a6e-227">**Wpływ przepustowości**: może mieć wpływ na przepustowość wykorzystywaną podczas replikacji przy użyciu kilku kluczy rejestru:</span><span class="sxs-lookup"><span data-stu-id="b9a6e-227">**Influence bandwidth**: You can influence the bandwidth used for replication by using a couple of registry keys:</span></span>
  * <span data-ttu-id="b9a6e-228">**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\UploadThreadsPerVM** wartość rejestru określa liczbę wątków, które są używane do transferu danych (Replikacja początkowa lub przyrostowa) dysku.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-228">The **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\UploadThreadsPerVM** registry value specifies the number of threads that are used for data transfer (initial or delta replication) of a disk.</span></span> <span data-ttu-id="b9a6e-229">Wyższa wartość zwiększa przepustowość sieciową używaną podczas replikacji.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-229">A higher value increases the network bandwidth used for replication.</span></span>
  * <span data-ttu-id="b9a6e-230">**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\DownloadThreadsPerVM** określa liczbę wątków używanych do transferu danych podczas powrotu po awarii.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-230">The **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\DownloadThreadsPerVM** specifies the number of threads used for data transfer during failback.</span></span>

### <a name="throttle-bandwidth"></a><span data-ttu-id="b9a6e-231">Ograniczanie przepustowości</span><span class="sxs-lookup"><span data-stu-id="b9a6e-231">Throttle bandwidth</span></span>

1. <span data-ttu-id="b9a6e-232">Otwieranie przystawki MMC kopia zapasowa Azure na komputerze działającym jako serwer przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-232">Open the Azure Backup MMC snap-in on the machine acting as the process server.</span></span> <span data-ttu-id="b9a6e-233">Domyślnie skrót do utworzenia kopii zapasowej jest dostępny na pulpicie lub w następującym folderze: C:\Program Files\Microsoft Azure Recovery Services Agent\bin\wabadmin.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-233">By default, a shortcut for Backup is available on the desktop, or in the following folder: C:\Program Files\Microsoft Azure Recovery Services Agent\bin\wabadmin.</span></span>
2. <span data-ttu-id="b9a6e-234">W przystawce kliknij pozycję **Zmień właściwości**.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-234">In the snap-in, click **Change Properties**.</span></span>
3. <span data-ttu-id="b9a6e-235">Na **ograniczania** wybierz opcję **włączyć użycia przepustowości połączenia internetowego do operacji tworzenia kopii zapasowej**.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-235">On the **Throttling** tab, select **Enable internet bandwidth usage throttling for backup operations**.</span></span>
4. <span data-ttu-id="b9a6e-236">Ustaw limity dla pracy oraz innych niż godziny pracy.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-236">Set the limits for work and non-work hours.</span></span> <span data-ttu-id="b9a6e-237">Prawidłowy zakres: od 512 Kb/s do 102 Mb/s na sekundę.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-237">Valid ranges are from 512 Kbps to 102 Mbps per second.</span></span>

    ![Ograniczenie](./media/vmware-walkthrough-capacity/throttle2.png)

<span data-ttu-id="b9a6e-239">Możesz też użyć polecenia cmdlet [Set-OBMachineSetting](https://technet.microsoft.com/library/hh770409.aspx), aby ustawić ograniczanie przepływności.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-239">You can also use the [Set-OBMachineSetting](https://technet.microsoft.com/library/hh770409.aspx) cmdlet to set throttling.</span></span> <span data-ttu-id="b9a6e-240">Oto przykład:</span><span class="sxs-lookup"><span data-stu-id="b9a6e-240">Here's a sample:</span></span>

    $mon = [System.DayOfWeek]::Monday
    $tue = [System.DayOfWeek]::Tuesday
    Set-OBMachineSetting -WorkDay $mon, $tue -StartWorkHour "9:00:00" -EndWorkHour "18:00:00" -WorkHourBandwidth  (512*1024) -NonWorkHourBandwidth (2048*1024)

<span data-ttu-id="b9a6e-241">**Set-OBMachineSetting -NoThrottle** wskazuje, że ograniczanie przepływności nie jest wymagane.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-241">**Set-OBMachineSetting -NoThrottle** indicates that no throttling is required.</span></span>

### <a name="influence-network-bandwidth-for-a-vm"></a><span data-ttu-id="b9a6e-242">Wpływ na przepustowość sieci dla maszyny Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="b9a6e-242">Influence network bandwidth for a VM</span></span>

1. <span data-ttu-id="b9a6e-243">W rejestrze maszyny wirtualnej, przejdź do **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\Replication**.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-243">In registry of the VM, go to **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\Replication**.</span></span>
   * <span data-ttu-id="b9a6e-244">Wpływ na przepustowość ruchu replikacji dysku, zmodyfikuj wartość **UploadThreadsPerVM**, lub Utwórz klucz, jeśli nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-244">To influence the bandwidth traffic on a replicating disk, modify the value of **UploadThreadsPerVM**, or create the key if it doesn't exist.</span></span>
   * <span data-ttu-id="b9a6e-245">Wpływ przepustowości dla ruchu powrotu po awarii z platformy Azure, zmodyfikuj wartość **DownloadThreadsPerVM**.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-245">To influence the bandwidth for failback traffic from Azure, modify the value of **DownloadThreadsPerVM**.</span></span>
2. <span data-ttu-id="b9a6e-246">Wartość domyślna to 4.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-246">The default value is 4.</span></span> <span data-ttu-id="b9a6e-247">W sieci o nadmiarowych zasobach można zmodyfikować te klucze rejestru.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-247">In an overprovisioned network, these registry keys should be modified.</span></span> <span data-ttu-id="b9a6e-248">Wartość maksymalna to 32.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-248">The maximum is 32.</span></span> <span data-ttu-id="b9a6e-249">Monitoruj ruch, aby zoptymalizować tę wartość.</span><span class="sxs-lookup"><span data-stu-id="b9a6e-249">Monitor traffic to optimize the value.</span></span>




## <a name="next-steps"></a><span data-ttu-id="b9a6e-250">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="b9a6e-250">Next steps</span></span>

<span data-ttu-id="b9a6e-251">Przejdź do [krok 4: Planowanie sieci](vmware-walkthrough-network.md).</span><span class="sxs-lookup"><span data-stu-id="b9a6e-251">Go to [Step 4: Plan networking](vmware-walkthrough-network.md).</span></span>
