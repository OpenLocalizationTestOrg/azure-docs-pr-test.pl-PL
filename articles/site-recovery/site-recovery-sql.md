---
title: "Replikowanie aplikacji za pomocą programu SQL Server i usługi Azure Site Recovery | Dokumentacja firmy Microsoft"
description: "W tym artykule opisano sposób replikowania SQL Server przy użyciu usługi Azure Site Recovery dla funkcji po awarii programu SQL Server."
services: site-recovery
documentationcenter: 
author: prateek9us
manager: gauravd
editor: 
ms.assetid: 9126f5e8-e9ed-4c31-b6b4-bf969c12c184
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: pratshar
ms.openlocfilehash: e53f60979e01a0eabe118d3ae6457a61bd4b0ded
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/18/2017
---
# <a name="protect-sql-server-using-sql-server-disaster-recovery-and-azure-site-recovery"></a><span data-ttu-id="877cc-103">Ochrona programu SQL Server przy użyciu odzyskiwanie po awarii programu SQL Server i usługi Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="877cc-103">Protect SQL Server using SQL Server disaster recovery and Azure Site Recovery</span></span>

<span data-ttu-id="877cc-104">W tym artykule opisano, jak chronić wewnętrznej programu SQL Server przy użyciu kombinacji ciągłość prowadzenia działalności biznesowej programu SQL Server i technologii (BCDR) odzyskiwania po awarii, aplikacji i [usługi Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="877cc-104">This article describes how to protect the SQL Server back end of an application using a combination of SQL Server business continuity and disaster recovery (BCDR) technologies, and [Azure Site Recovery](site-recovery-overview.md).</span></span>

<span data-ttu-id="877cc-105">Przed rozpoczęciem upewnij się, że rozumiesz możliwości odzyskiwania po awarii programu SQL Server, łącznie z klastra trybu failover, zawsze włączonych grup dostępności funkcji dublowania baz danych i wysyłania dziennika.</span><span class="sxs-lookup"><span data-stu-id="877cc-105">Before you start, make sure you understand SQL Server disaster recovery capabilities, including failover clustering, Always On availability groups, database mirroring, and log shipping.</span></span>


## <a name="sql-server-deployments"></a><span data-ttu-id="877cc-106">Wdrożenie programu SQL Server</span><span class="sxs-lookup"><span data-stu-id="877cc-106">SQL Server deployments</span></span>

<span data-ttu-id="877cc-107">Wiele obciążeń Użyj programu SQL Server jako podstawę i może być zintegrowana z aplikacji, takich jak SharePoint, Dynamics i SAP, wdrożenie usługi danych.</span><span class="sxs-lookup"><span data-stu-id="877cc-107">Many workloads use SQL Server as a foundation, and it can be integrated with apps such as SharePoint, Dynamics, and SAP, to implement data services.</span></span>  <span data-ttu-id="877cc-108">SQL Server może być wdrożony na kilka sposobów:</span><span class="sxs-lookup"><span data-stu-id="877cc-108">SQL Server can be deployed in a number of ways:</span></span>

* <span data-ttu-id="877cc-109">**Autonomicznego serwera SQL**: SQL Server i wszystkie bazy danych znajdują się na pojedynczym komputerze (fizycznej lub wirtualnej).</span><span class="sxs-lookup"><span data-stu-id="877cc-109">**Standalone SQL Server**: SQL Server and all databases are hosted on a single machine (physical or a virtual).</span></span> <span data-ttu-id="877cc-110">Podczas wirtualizacji, klaster hosta jest używana do lokalnego wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="877cc-110">When virtualized, host clustering is used for local high availability.</span></span> <span data-ttu-id="877cc-111">Wysoka dostępność poziomie gościa nie jest zaimplementowana.</span><span class="sxs-lookup"><span data-stu-id="877cc-111">Guest-level high availability isn't implemented.</span></span>
* <span data-ttu-id="877cc-112">**Tryb Failover Clustering wystąpienia programu SQL Server (zawsze na FCI)**: co najmniej dwa węzły z uruchomionym programem SQL Server instancji z udostępnionych dysków są skonfigurowane w klastrze pracy awaryjnej systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="877cc-112">**SQL Server Failover Clustering Instances (Always On FCI)**: Two or more nodes running SQL Server instanced with shared disks are configured in a Windows Failover cluster.</span></span> <span data-ttu-id="877cc-113">Jeśli węzeł jest wyłączony, klaster może przełączyć programu SQL Server do innego wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="877cc-113">If a node is down, the cluster can fail SQL Server over to another instance.</span></span> <span data-ttu-id="877cc-114">Ta konfiguracja jest zwykle używane do implementacji wysokiej dostępności w lokacji głównej.</span><span class="sxs-lookup"><span data-stu-id="877cc-114">This setup is typically used to implement high availability at a primary site.</span></span> <span data-ttu-id="877cc-115">To wdrożenie nie chroni przed uszkodzenie lub awaria w warstwie magazynu udostępnionego.</span><span class="sxs-lookup"><span data-stu-id="877cc-115">This deployment doesn't protect against failure or outage in the shared storage layer.</span></span> <span data-ttu-id="877cc-116">Udostępniony dysk może być zaimplementowany przy użyciu udostępnionego dysku vhdx, fiber channel lub iSCSI.</span><span class="sxs-lookup"><span data-stu-id="877cc-116">A shared disk can be implemented using iSCSI, fiber channel or shared vhdx.</span></span>
* <span data-ttu-id="877cc-117">**SQL zawsze włączonych grup dostępności**: co najmniej dwa węzły są konfigurowane w udostępnionym klastra nic z baz danych serwera SQL skonfigurowany w grupie dostępności, Replikacja synchroniczna i automatycznej pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="877cc-117">**SQL Always On Availability Groups**: Two or more nodes are set up in a shared nothing cluster, with SQL Server databases configured in an availability group, with synchronous replication and automatic failover.</span></span>

 <span data-ttu-id="877cc-118">W tym artykule wykorzystuje następujące natywnego SQL awaryjnego odzyskiwania technologie do odzyskiwania baz danych do zdalnej witryny:</span><span class="sxs-lookup"><span data-stu-id="877cc-118">This article leverages the following native SQL disaster recovery technologies for recovering databases to a remote site:</span></span>

* <span data-ttu-id="877cc-119">SQL zawsze włączonych grup dostępności, zapewnia odzyskiwania po awarii dla programu SQL Server 2012 lub 2014 Enterprise Edition.</span><span class="sxs-lookup"><span data-stu-id="877cc-119">SQL Always On Availability Groups, to provide for disaster recovery for SQL Server 2012 or 2014 Enterprise editions.</span></span>
* <span data-ttu-id="877cc-120">Funkcja dublowania bazy danych SQL w trybie wysokiego bezpieczeństwa, SQL Server Standard edition (dowolna wersja) lub SQL Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="877cc-120">SQL database mirroring in high safety mode, for SQL Server Standard edition (any version), or for SQL Server 2008 R2.</span></span>

## <a name="site-recovery-support"></a><span data-ttu-id="877cc-121">Obsługa odzyskiwania lokacji</span><span class="sxs-lookup"><span data-stu-id="877cc-121">Site Recovery support</span></span>

### <a name="supported-scenarios"></a><span data-ttu-id="877cc-122">Obsługiwane scenariusze</span><span class="sxs-lookup"><span data-stu-id="877cc-122">Supported scenarios</span></span>
<span data-ttu-id="877cc-123">Usługa Site Recovery może chronić programu SQL Server, zgodnie z opisem w tabeli.</span><span class="sxs-lookup"><span data-stu-id="877cc-123">Site Recovery can protect SQL Server as summarized in the table.</span></span>

<span data-ttu-id="877cc-124">**Scenariusz**</span><span class="sxs-lookup"><span data-stu-id="877cc-124">**Scenario**</span></span> | <span data-ttu-id="877cc-125">**Do lokacji dodatkowej**</span><span class="sxs-lookup"><span data-stu-id="877cc-125">**To a secondary site**</span></span> | <span data-ttu-id="877cc-126">**Na platformie Azure**</span><span class="sxs-lookup"><span data-stu-id="877cc-126">**To Azure**</span></span>
--- | --- | ---
<span data-ttu-id="877cc-127">**Funkcja Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="877cc-127">**Hyper-V**</span></span> | <span data-ttu-id="877cc-128">Tak</span><span class="sxs-lookup"><span data-stu-id="877cc-128">Yes</span></span> | <span data-ttu-id="877cc-129">Tak</span><span class="sxs-lookup"><span data-stu-id="877cc-129">Yes</span></span>
<span data-ttu-id="877cc-130">**VMware**</span><span class="sxs-lookup"><span data-stu-id="877cc-130">**VMware**</span></span> | <span data-ttu-id="877cc-131">Tak</span><span class="sxs-lookup"><span data-stu-id="877cc-131">Yes</span></span> | <span data-ttu-id="877cc-132">Tak</span><span class="sxs-lookup"><span data-stu-id="877cc-132">Yes</span></span>
<span data-ttu-id="877cc-133">**Serwer fizyczny**</span><span class="sxs-lookup"><span data-stu-id="877cc-133">**Physical server**</span></span> | <span data-ttu-id="877cc-134">Tak</span><span class="sxs-lookup"><span data-stu-id="877cc-134">Yes</span></span> | <span data-ttu-id="877cc-135">Tak</span><span class="sxs-lookup"><span data-stu-id="877cc-135">Yes</span></span>

### <a name="supported-sql-server-versions"></a><span data-ttu-id="877cc-136">Obsługiwane wersje programu SQL Server</span><span class="sxs-lookup"><span data-stu-id="877cc-136">Supported SQL Server versions</span></span>
<span data-ttu-id="877cc-137">Te wersje programu SQL Server są obsługiwane dla obsługiwanych scenariuszach:</span><span class="sxs-lookup"><span data-stu-id="877cc-137">These SQL Server versions are supported, for the supported scenarios:</span></span>

* <span data-ttu-id="877cc-138">SQL Server 2016 Enterprise i Standard</span><span class="sxs-lookup"><span data-stu-id="877cc-138">SQL Server 2016 Enterprise and Standard</span></span>
* <span data-ttu-id="877cc-139">SQL Server 2014 Enterprise i Standard</span><span class="sxs-lookup"><span data-stu-id="877cc-139">SQL Server 2014 Enterprise and Standard</span></span>
* <span data-ttu-id="877cc-140">SQL Server 2012 Enterprise i Standard</span><span class="sxs-lookup"><span data-stu-id="877cc-140">SQL Server 2012 Enterprise and Standard</span></span>
* <span data-ttu-id="877cc-141">SQL Server 2008 R2 Enterprise i Standard</span><span class="sxs-lookup"><span data-stu-id="877cc-141">SQL Server 2008 R2 Enterprise and Standard</span></span>

### <a name="supported-sql-server-integration"></a><span data-ttu-id="877cc-142">Obsługiwaną integracji programu SQL Server</span><span class="sxs-lookup"><span data-stu-id="877cc-142">Supported SQL Server integration</span></span>

<span data-ttu-id="877cc-143">Usługa Site Recovery można zintegrować z natywnego technologiami BCDR serwera SQL podsumowane w tabeli, aby zapewnić rozwiązanie odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="877cc-143">Site Recovery can be integrated with native SQL Server BCDR technologies summarized in the table, to provide a disaster recovery solution.</span></span>

<span data-ttu-id="877cc-144">**Funkcja**</span><span class="sxs-lookup"><span data-stu-id="877cc-144">**Feature**</span></span> | <span data-ttu-id="877cc-145">**Szczegóły**</span><span class="sxs-lookup"><span data-stu-id="877cc-145">**Details**</span></span> | <span data-ttu-id="877cc-146">**SQL Server**</span><span class="sxs-lookup"><span data-stu-id="877cc-146">**SQL Server**</span></span> |
--- | --- | ---
<span data-ttu-id="877cc-147">**Konfigurowanie zawsze włączonej grupy dostępności**</span><span class="sxs-lookup"><span data-stu-id="877cc-147">**Always On availability group**</span></span> | <span data-ttu-id="877cc-148">Uruchamianie wielu wystąpień autonomicznych programu SQL Server w klastrze trybu failover, który ma wiele węzłów.</span><span class="sxs-lookup"><span data-stu-id="877cc-148">Multiple standalone instances of SQL Server each run in a failover cluster that has multiple nodes.</span></span><br/><br/><span data-ttu-id="877cc-149">Bazy danych można grupować w grupy trybu failover, które mogą zostać skopiowane (dublowany) w wystąpieniach programu SQL Server, aby niezbędne jest brak udostępnionego magazynu.</span><span class="sxs-lookup"><span data-stu-id="877cc-149">Databases can be grouped into failover groups that can be copied (mirrored) on SQL Server instances so that no shared storage is needed.</span></span><br/><br/><span data-ttu-id="877cc-150">Zapewnia odzyskiwanie po awarii między lokacją główną i co najmniej jednej lokacji dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="877cc-150">Provides disaster recovery between a primary site and one or more secondary sites.</span></span> <span data-ttu-id="877cc-151">Dwa węzły można skonfigurować w udostępnionej nic skonfigurowany klaster z baz danych programu SQL Server w grupie dostępności Replikacja synchroniczna i automatycznej pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="877cc-151">Two nodes can be set up in a shared nothing cluster with SQL Server databases configured in an availability group with synchronous replication and automatic failover.</span></span> | <span data-ttu-id="877cc-152">SQL Server 2014 & 2012 w wersji Enterprise</span><span class="sxs-lookup"><span data-stu-id="877cc-152">SQL Server 2014 & 2012 Enterprise edition</span></span>
<span data-ttu-id="877cc-153">**(Zawsze na FCI dla) klastra trybu failover**</span><span class="sxs-lookup"><span data-stu-id="877cc-153">**Failover clustering (Always On FCI)**</span></span> | <span data-ttu-id="877cc-154">SQL Server korzysta z systemu Windows klastra trybu failover dla wysokiej dostępności lokalnego obciążeń programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="877cc-154">SQL Server leverages Windows failover clustering for high availability of on-premises SQL Server workloads.</span></span><br/><br/><span data-ttu-id="877cc-155">Węzły uruchomione wystąpienia programu SQL Server z udostępnionych dysków są skonfigurowane w klastrze pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="877cc-155">Nodes running instances of SQL Server with shared disks are configured in a failover cluster.</span></span> <span data-ttu-id="877cc-156">Jeśli wystąpienie jest wyłączony klastra nie powiedzie się na inny.</span><span class="sxs-lookup"><span data-stu-id="877cc-156">If an instance is down the cluster fails over to different one.</span></span><br/><br/><span data-ttu-id="877cc-157">Klaster nie chroni przed awarią lub awarie w magazynie udostępnionym.</span><span class="sxs-lookup"><span data-stu-id="877cc-157">The cluster doesn't protect against failure or outages in shared storage.</span></span> <span data-ttu-id="877cc-158">Udostępniony dysk może być zaimplementowany z interfejsu iSCSI, fiber channel, lub udostępnionego Vhdx.</span><span class="sxs-lookup"><span data-stu-id="877cc-158">The shared disk can be implemented with iSCSI, fiber channel, or shared VHDXs.</span></span> | <span data-ttu-id="877cc-159">SQL Server Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="877cc-159">SQL Server Enterprise editions</span></span><br/><br/><span data-ttu-id="877cc-160">SQL Server Standard edition (maksymalnie dwa węzły tylko)</span><span class="sxs-lookup"><span data-stu-id="877cc-160">SQL Server Standard edition (limited to two nodes only)</span></span>
<span data-ttu-id="877cc-161">**(Tryb wysokiego bezpieczeństwa) dublowania bazy danych**</span><span class="sxs-lookup"><span data-stu-id="877cc-161">**Database mirroring (high safety mode)**</span></span> | <span data-ttu-id="877cc-162">Chroni pojedynczej bazy danych do pojedynczej kopii dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="877cc-162">Protects a single database to a single secondary copy.</span></span> <span data-ttu-id="877cc-163">Dostępne w obu wysokiego bezpieczeństwa (synchroniczne) i wysokiej wydajności replikacji (asynchronicznej) trybów.</span><span class="sxs-lookup"><span data-stu-id="877cc-163">Available in both high safety (synchronous) and high performance (asynchronous) replication modes.</span></span> <span data-ttu-id="877cc-164">Nie wymaga klastra pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="877cc-164">Doesn’t require a failover cluster.</span></span> | <span data-ttu-id="877cc-165">SQL Server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="877cc-165">SQL Server 2008 R2</span></span><br/><br/><span data-ttu-id="877cc-166">SQL Server Enterprise wszystkie wersje</span><span class="sxs-lookup"><span data-stu-id="877cc-166">SQL Server Enterprise all editions</span></span>
<span data-ttu-id="877cc-167">**Autonomiczny program SQL Server**</span><span class="sxs-lookup"><span data-stu-id="877cc-167">**Standalone SQL Server**</span></span> | <span data-ttu-id="877cc-168">SQL Server i bazy danych znajdują się na jednym serwerze (fizycznych lub wirtualnych).</span><span class="sxs-lookup"><span data-stu-id="877cc-168">The SQL Server and database are hosted on a single server (physical or virtual).</span></span> <span data-ttu-id="877cc-169">Klaster hostów jest używana wysokiej dostępności, gdy serwer jest wirtualnego.</span><span class="sxs-lookup"><span data-stu-id="877cc-169">Host clustering is used for high availability if the server is virtual.</span></span> <span data-ttu-id="877cc-170">Nie wysokiej dostępności poziomie gościa.</span><span class="sxs-lookup"><span data-stu-id="877cc-170">No guest-level high availability.</span></span> | <span data-ttu-id="877cc-171">Enterprise lub Standard edition</span><span class="sxs-lookup"><span data-stu-id="877cc-171">Enterprise or Standard edition</span></span>

## <a name="deployment-recommendations"></a><span data-ttu-id="877cc-172">Zalecenia dotyczące wdrożenia</span><span class="sxs-lookup"><span data-stu-id="877cc-172">Deployment recommendations</span></span>

<span data-ttu-id="877cc-173">Ta tabela zawiera podsumowanie Nasze zalecenia dotyczące integracji z usługą Site Recovery technologiami BCDR serwera SQL.</span><span class="sxs-lookup"><span data-stu-id="877cc-173">This table summarizes our recommendations for integrating SQL Server BCDR technologies with Site Recovery.</span></span>

| <span data-ttu-id="877cc-174">**Wersja**</span><span class="sxs-lookup"><span data-stu-id="877cc-174">**Version**</span></span> | <span data-ttu-id="877cc-175">**Wersja**</span><span class="sxs-lookup"><span data-stu-id="877cc-175">**Edition**</span></span> | <span data-ttu-id="877cc-176">**Wdrożenie**</span><span class="sxs-lookup"><span data-stu-id="877cc-176">**Deployment**</span></span> | <span data-ttu-id="877cc-177">**Wersja Premium do lokalnego**</span><span class="sxs-lookup"><span data-stu-id="877cc-177">**On-prem to on-prem**</span></span> | <span data-ttu-id="877cc-178">**Wersja Premium na platformie Azure**</span><span class="sxs-lookup"><span data-stu-id="877cc-178">**On-prem to Azure**</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="877cc-179">SQL Server 2014 lub 2012</span><span class="sxs-lookup"><span data-stu-id="877cc-179">SQL Server 2014 or 2012</span></span> |<span data-ttu-id="877cc-180">Enterprise</span><span class="sxs-lookup"><span data-stu-id="877cc-180">Enterprise</span></span> |<span data-ttu-id="877cc-181">Wystąpienie klastra pracy awaryjnej</span><span class="sxs-lookup"><span data-stu-id="877cc-181">Failover cluster instance</span></span> |<span data-ttu-id="877cc-182">Zawsze włączone grupy dostępności</span><span class="sxs-lookup"><span data-stu-id="877cc-182">Always On availability groups</span></span> |<span data-ttu-id="877cc-183">Zawsze włączone grupy dostępności</span><span class="sxs-lookup"><span data-stu-id="877cc-183">Always On availability groups</span></span> |
|| <span data-ttu-id="877cc-184">Enterprise</span><span class="sxs-lookup"><span data-stu-id="877cc-184">Enterprise</span></span> |<span data-ttu-id="877cc-185">Zawsze włączone grupy dostępności wysokiej dostępności</span><span class="sxs-lookup"><span data-stu-id="877cc-185">Always On availability groups for high availability</span></span> |<span data-ttu-id="877cc-186">Zawsze włączone grupy dostępności</span><span class="sxs-lookup"><span data-stu-id="877cc-186">Always On availability groups</span></span> |<span data-ttu-id="877cc-187">Zawsze włączone grupy dostępności</span><span class="sxs-lookup"><span data-stu-id="877cc-187">Always On availability groups</span></span> | |
|| <span data-ttu-id="877cc-188">Standardowa</span><span class="sxs-lookup"><span data-stu-id="877cc-188">Standard</span></span> |<span data-ttu-id="877cc-189">Wystąpienia klastra trybu failover (FCI)</span><span class="sxs-lookup"><span data-stu-id="877cc-189">Failover cluster instance (FCI)</span></span> |<span data-ttu-id="877cc-190">Replikacja z lokacji odzyskiwania dublowaniem lokalnego</span><span class="sxs-lookup"><span data-stu-id="877cc-190">Site Recovery replication with local mirror</span></span> |<span data-ttu-id="877cc-191">Replikacja z lokacji odzyskiwania dublowaniem lokalnego</span><span class="sxs-lookup"><span data-stu-id="877cc-191">Site Recovery replication with local mirror</span></span> | |
|| <span data-ttu-id="877cc-192">Enterprise lub Standard</span><span class="sxs-lookup"><span data-stu-id="877cc-192">Enterprise or Standard</span></span> |<span data-ttu-id="877cc-193">Autonomiczna</span><span class="sxs-lookup"><span data-stu-id="877cc-193">Standalone</span></span> |<span data-ttu-id="877cc-194">Replikacja odzyskiwania lokacji</span><span class="sxs-lookup"><span data-stu-id="877cc-194">Site Recovery replication</span></span> |<span data-ttu-id="877cc-195">Replikacja odzyskiwania lokacji</span><span class="sxs-lookup"><span data-stu-id="877cc-195">Site Recovery replication</span></span> | |
| <span data-ttu-id="877cc-196">SQL Server 2008 R2 lub 2008</span><span class="sxs-lookup"><span data-stu-id="877cc-196">SQL Server 2008 R2 or 2008</span></span> |<span data-ttu-id="877cc-197">Enterprise lub Standard</span><span class="sxs-lookup"><span data-stu-id="877cc-197">Enterprise or Standard</span></span> |<span data-ttu-id="877cc-198">Wystąpienia klastra trybu failover (FCI)</span><span class="sxs-lookup"><span data-stu-id="877cc-198">Failover cluster instance (FCI)</span></span> |<span data-ttu-id="877cc-199">Replikacja z lokacji odzyskiwania dublowaniem lokalnego</span><span class="sxs-lookup"><span data-stu-id="877cc-199">Site Recovery replication with local mirror</span></span> |<span data-ttu-id="877cc-200">Replikacja z lokacji odzyskiwania dublowaniem lokalnego</span><span class="sxs-lookup"><span data-stu-id="877cc-200">Site Recovery replication with local mirror</span></span> |
|| <span data-ttu-id="877cc-201">Enterprise lub Standard</span><span class="sxs-lookup"><span data-stu-id="877cc-201">Enterprise or Standard</span></span> |<span data-ttu-id="877cc-202">Autonomiczna</span><span class="sxs-lookup"><span data-stu-id="877cc-202">Standalone</span></span> |<span data-ttu-id="877cc-203">Replikacja odzyskiwania lokacji</span><span class="sxs-lookup"><span data-stu-id="877cc-203">Site Recovery replication</span></span> |<span data-ttu-id="877cc-204">Replikacja odzyskiwania lokacji</span><span class="sxs-lookup"><span data-stu-id="877cc-204">Site Recovery replication</span></span> | |
| <span data-ttu-id="877cc-205">SQL Server (dowolna wersja)</span><span class="sxs-lookup"><span data-stu-id="877cc-205">SQL Server (Any version)</span></span> |<span data-ttu-id="877cc-206">Enterprise lub Standard</span><span class="sxs-lookup"><span data-stu-id="877cc-206">Enterprise or Standard</span></span> |<span data-ttu-id="877cc-207">Wystąpienie klastra pracy awaryjnej — aplikacji usługi DTC</span><span class="sxs-lookup"><span data-stu-id="877cc-207">Failover cluster instance - DTC application</span></span> |<span data-ttu-id="877cc-208">Replikacja odzyskiwania lokacji</span><span class="sxs-lookup"><span data-stu-id="877cc-208">Site Recovery replication</span></span> |<span data-ttu-id="877cc-209">Nieobsługiwane</span><span class="sxs-lookup"><span data-stu-id="877cc-209">Not Supported</span></span> |

## <a name="deployment-prerequisites"></a><span data-ttu-id="877cc-210">Wymagania wstępne dotyczące wdrożenia</span><span class="sxs-lookup"><span data-stu-id="877cc-210">Deployment prerequisites</span></span>

* <span data-ttu-id="877cc-211">Lokalnego wdrożenia serwera SQL, zainstalowana obsługiwana wersja programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="877cc-211">An on-premises SQL Server deployment, running a supported SQL Server version.</span></span> <span data-ttu-id="877cc-212">Zazwyczaj należy również usługi Active Directory dla programu SQL server.</span><span class="sxs-lookup"><span data-stu-id="877cc-212">Typically, you also need Active Directory for your SQL server.</span></span>
* <span data-ttu-id="877cc-213">Wymagania dotyczące tego scenariusza, którą chcesz wdrożyć.</span><span class="sxs-lookup"><span data-stu-id="877cc-213">The requirements for the scenario you want to deploy.</span></span> <span data-ttu-id="877cc-214">Dowiedz się więcej o wymaganiach dotyczących pomocy technicznej dla [replikacji do platformy Azure](site-recovery-support-matrix-to-azure.md) i [lokalnymi](site-recovery-support-matrix.md), i [wymagania wstępne dotyczące wdrażania](site-recovery-prereq.md).</span><span class="sxs-lookup"><span data-stu-id="877cc-214">Learn more about support requirements for [replication to Azure](site-recovery-support-matrix-to-azure.md) and [on-premises](site-recovery-support-matrix.md), and [deployment prerequisites](site-recovery-prereq.md).</span></span>
* <span data-ttu-id="877cc-215">Aby skonfigurować odzyskiwania na platformie Azure, uruchom [oceny gotowości maszyny wirtualnej Azure](http://www.microsoft.com/download/details.aspx?id=40898) narzędzia na maszynach wirtualnych programu SQL Server, aby się upewnić, że są one zgodne z platformy Azure i usługi Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="877cc-215">To set up recovery in Azure, run the [Azure Virtual Machine Readiness Assessment](http://www.microsoft.com/download/details.aspx?id=40898) tool on your SQL Server virtual machines, to make sure they're compatible with Azure and Site Recovery.</span></span>

## <a name="set-up-active-directory"></a><span data-ttu-id="877cc-216">Konfigurowanie usługi Active Directory</span><span class="sxs-lookup"><span data-stu-id="877cc-216">Set up Active Directory</span></span>

<span data-ttu-id="877cc-217">Konfigurowanie usługi Active Directory, w lokacji dodatkowej odzyskiwania dla programu SQL Server do prawidłowego działania.</span><span class="sxs-lookup"><span data-stu-id="877cc-217">Set up Active Directory, in the secondary recovery site, for SQL Server to run properly.</span></span>

* <span data-ttu-id="877cc-218">**Małe przedsiębiorstwa**— z mniejszą liczbą aplikacji i jednego kontrolera domeny do lokalnej lokacji, aby przełączyć w całej lokacji, zalecane jest użycie usługi Site Recovery replikacji replikacji kontrolera domeny na serwerze pomocniczym Centrum danych, lub na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="877cc-218">**Small enterprise**—With a small number of applications, and single domain controller for the on-premises site, if you want to fail over the entire site, we recommend you use Site Recovery replication to replicate the domain controller to the secondary datacenter, or to Azure.</span></span>
* <span data-ttu-id="877cc-219">**Średnich i dużych przedsiębiorstw**— Jeśli masz wiele aplikacji w lesie usługi Active Directory i chcesz zakończyć się niepowodzeniem przez aplikację lub obciążenia, zaleca się Konfigurowanie dodatkowego kontrolera domeny w dodatkowego centrum danych lub na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="877cc-219">**Medium to large enterprise**—If you have a large number of applications, an Active Directory forest, and you want to fail over by application or workload, we recommend you set up an additional domain controller in the secondary datacenter, or in Azure.</span></span> <span data-ttu-id="877cc-220">Jeśli używasz zawsze włączonych grup dostępności do odzyskania z lokacją zdalną, zaleca się Konfigurowanie innego dodatkowego kontrolera domeny w lokacji dodatkowej lub na platformie Azure do użycia na potrzeby odzyskanego wystąpienia programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="877cc-220">If you're using Always On availability groups to recover to a remote site, we recommend you set up another additional domain controller on the secondary site or in Azure, to use for the recovered SQL Server instance.</span></span>

<span data-ttu-id="877cc-221">Instrukcje w tym artykule zakładają, że kontroler domeny jest dostępny w lokalizacji dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="877cc-221">The instructions in this article presume that a domain controller is available in the secondary location.</span></span> <span data-ttu-id="877cc-222">[Dowiedz się więcej](site-recovery-active-directory.md) o ochronie usługi Active Directory z usługą Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="877cc-222">[Read more](site-recovery-active-directory.md) about protecting Active Directory with Site Recovery.</span></span>


## <a name="integrate-with-sql-server-always-on-for-replication-to-azure"></a><span data-ttu-id="877cc-223">Integrowanie z programu SQL Server AlwaysOn dla replikacji do platformy Azure</span><span class="sxs-lookup"><span data-stu-id="877cc-223">Integrate with SQL Server Always On for replication to Azure</span></span>

<span data-ttu-id="877cc-224">Oto, co należy zrobić:</span><span class="sxs-lookup"><span data-stu-id="877cc-224">Here's what you need to do:</span></span>

1. <span data-ttu-id="877cc-225">Importuj skryptów do konta usługi Automatyzacja Azure.</span><span class="sxs-lookup"><span data-stu-id="877cc-225">Import scripts into your Azure Automation account.</span></span> <span data-ttu-id="877cc-226">Zawiera skrypty do trybu failover grupy dostępności SQL w [maszyny wirtualnej usługi Resource Manager](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/asr-automation-recovery/scripts/ASR-SQL-FailoverAG.ps1) i [maszynę wirtualną w klasycznym](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/asr-automation-recovery/scripts/ASR-SQL-FailoverAGClassic.ps1).</span><span class="sxs-lookup"><span data-stu-id="877cc-226">This contains the scripts to failover SQL Availability Group in a [Resource Manager virtual machine](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/asr-automation-recovery/scripts/ASR-SQL-FailoverAG.ps1) and a [Classic virtual machine](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/asr-automation-recovery/scripts/ASR-SQL-FailoverAGClassic.ps1).</span></span>

    <span data-ttu-id="877cc-227">[![Wdrażanie na platformie Azure](https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c4803408-340e-49e3-9a1f-0ed3f689813d.png)](https://aka.ms/asr-automationrunbooks-deploy)</span><span class="sxs-lookup"><span data-stu-id="877cc-227">[![Deploy to Azure](https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c4803408-340e-49e3-9a1f-0ed3f689813d.png)](https://aka.ms/asr-automationrunbooks-deploy)</span></span>


1. <span data-ttu-id="877cc-228">Dodaj ASR-SQL-FailoverAG jako akcją przed pierwszą grupą planu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="877cc-228">Add ASR-SQL-FailoverAG as a pre action of the first group of the recovery plan.</span></span>

1. <span data-ttu-id="877cc-229">Wykonaj instrukcje dostępne w skrypcie tworzenia zmiennej automatyzacji, aby podać nazwę grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="877cc-229">Follow the instructions available in the script to create an automation variable to provide the name of the availability groups.</span></span>

### <a name="steps-to-do-a-test-failover"></a><span data-ttu-id="877cc-230">Kroki, aby wykonać test trybu failover</span><span class="sxs-lookup"><span data-stu-id="877cc-230">Steps to do a test failover</span></span>

<span data-ttu-id="877cc-231">Program SQL AlwaysOn nie obsługuje natywnie testowy tryb failover.</span><span class="sxs-lookup"><span data-stu-id="877cc-231">SQL Always On doesn’t natively support test failover.</span></span> <span data-ttu-id="877cc-232">Dlatego zaleca się następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="877cc-232">Therefore, we recommend the following:</span></span>

1. <span data-ttu-id="877cc-233">Konfigurowanie [kopia zapasowa Azure](../backup/backup-azure-vms.md) na maszynie wirtualnej, który jest hostem repliki grupy dostępności na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="877cc-233">Set up [Azure Backup](../backup/backup-azure-vms.md) on the virtual machine that hosts the availability group replica in Azure.</span></span>

1. <span data-ttu-id="877cc-234">Aby mogło nastąpić wyzwolenie testowy tryb failover planu odzyskiwania, należy odzyskać maszynę wirtualną z kopii zapasowej w poprzednim kroku.</span><span class="sxs-lookup"><span data-stu-id="877cc-234">Before triggering test failover of the recovery plan, recover the virtual machine from the backup taken in the previous step.</span></span>

    ![<span data-ttu-id="877cc-235">Przywracanie z kopii zapasowej systemu Azure</span><span class="sxs-lookup"><span data-stu-id="877cc-235">Restore from Azure Backup</span></span> ](./media/site-recovery-sql/restore-from-backup.png)

1. <span data-ttu-id="877cc-236">[Wymuszenie kworum](https://docs.microsoft.com/sql/sql-server/failover-clusters/windows/force-a-wsfc-cluster-to-start-without-a-quorum#PowerShellProcedure) na maszynie wirtualnej przywróconej z kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="877cc-236">[Force a quorum](https://docs.microsoft.com/sql/sql-server/failover-clusters/windows/force-a-wsfc-cluster-to-start-without-a-quorum#PowerShellProcedure) in the virtual machine restored from backup.</span></span>

1. <span data-ttu-id="877cc-237">Zaktualizuj IP odbiornika do adresu IP, które są dostępne w testowej sieci trybu failover.</span><span class="sxs-lookup"><span data-stu-id="877cc-237">Update IP of the listener to an IP available in the test failover network.</span></span>

    ![Zaktualizuj odbiornik IP](./media/site-recovery-sql/update-listener-ip.png)

1. <span data-ttu-id="877cc-239">Przełącz odbiornika w trybie online.</span><span class="sxs-lookup"><span data-stu-id="877cc-239">Bring listener online.</span></span>

    ![Przełącz do trybu Online odbiornika](./media/site-recovery-sql/bring-listener-online.png)

1. <span data-ttu-id="877cc-241">Tworzenie modułu równoważenia obciążenia z jednego adresu IP utworzone w puli adresów IP frontonu odpowiadającej każdego odbiornika grupy dostępności i maszyny wirtualnej SQL dodane w puli zaplecza.</span><span class="sxs-lookup"><span data-stu-id="877cc-241">Create a load balancer with one IP created under frontend IP pool corresponding to each availability group listener and with the SQL virtual machine added in the backend pool.</span></span>

     ![<span data-ttu-id="877cc-242">Tworzenie usługi równoważenia obciążenia - puli adresów IP frontonu</span><span class="sxs-lookup"><span data-stu-id="877cc-242">Create Load Balancer - Frontend IP pool</span></span> ](./media/site-recovery-sql/create-load-balancer1.png)

    ![<span data-ttu-id="877cc-243">Tworzenie usługi równoważenia obciążenia - puli wewnętrznej bazy danych</span><span class="sxs-lookup"><span data-stu-id="877cc-243">Create Load Balancer - Backend pool</span></span> ](./media/site-recovery-sql/create-load-balancer2.png)

1. <span data-ttu-id="877cc-244">Wykonaj test trybu failover planu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="877cc-244">Do a test failover of the recovery plan.</span></span>

### <a name="steps-to-do-a-failover"></a><span data-ttu-id="877cc-245">Kroki, aby tryb failover</span><span class="sxs-lookup"><span data-stu-id="877cc-245">Steps to do a failover</span></span>

<span data-ttu-id="877cc-246">Po dodaniu skrypt w planie odzyskiwania i zweryfikowany, wykonując test trybu failover planu odzyskiwania, można wykonywać trybu failover planu odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="877cc-246">Once you have added the script in the recovery plan and validated the recovery plan by doing a test failover, you can do failover of the recovery plan.</span></span>


## <a name="integrate-with-sql-server-always-on-for-replication-to-a-secondary-on-premises-site"></a><span data-ttu-id="877cc-247">Integrowanie z programu SQL Server AlwaysOn dla replikacji do lokacji dodatkowej lokalnymi</span><span class="sxs-lookup"><span data-stu-id="877cc-247">Integrate with SQL Server Always On for replication to a secondary on-premises site</span></span>

<span data-ttu-id="877cc-248">Jeśli program SQL Server używa grup dostępności dla wysokiej dostępności (lub FCI), zaleca się przy użyciu grup dostępności w lokacji odzyskiwania również.</span><span class="sxs-lookup"><span data-stu-id="877cc-248">If the SQL Server is using availability groups for high availability (or an FCI), we recommend using availability groups on the recovery site as well.</span></span> <span data-ttu-id="877cc-249">Należy zwrócić uwagę, to ma zastosowanie do aplikacji, które nie używają transakcji rozproszonych.</span><span class="sxs-lookup"><span data-stu-id="877cc-249">Note that this applies to apps that don't use distributed transactions.</span></span>

1. <span data-ttu-id="877cc-250">[Skonfuguruj](https://msdn.microsoft.com/library/hh213078.aspx) do grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="877cc-250">[Configure databases](https://msdn.microsoft.com/library/hh213078.aspx) into availability groups.</span></span>
1. <span data-ttu-id="877cc-251">Tworzenie sieci wirtualnej w lokacji dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="877cc-251">Create a virtual network on the secondary site.</span></span>
1. <span data-ttu-id="877cc-252">Konfigurowanie połączenia sieci VPN lokacja lokacja między sieci wirtualnej i lokacji głównej.</span><span class="sxs-lookup"><span data-stu-id="877cc-252">Set up a site-to-site VPN connection between the virtual network, and the primary site.</span></span>
1. <span data-ttu-id="877cc-253">Utwórz maszynę wirtualną w lokacji odzyskiwania, a SQL Server należy zainstalować na nim.</span><span class="sxs-lookup"><span data-stu-id="877cc-253">Create a virtual machine on the recovery site, and install SQL Server on it.</span></span>
1. <span data-ttu-id="877cc-254">Rozszerzyć istniejącą zawsze włączonych grup dostępności nową maszynę Wirtualną programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="877cc-254">Extend the existing Always On availability groups to the new SQL Server VM.</span></span> <span data-ttu-id="877cc-255">Konfigurowania tego wystąpienia programu SQL Server jako kopia repliki asynchronicznego.</span><span class="sxs-lookup"><span data-stu-id="877cc-255">Configure this SQL Server instance as an asynchronous replica copy.</span></span>
1. <span data-ttu-id="877cc-256">Utwórz odbiornik grupy dostępności, lub zaktualizować istniejący odbiornik, aby dołączyć maszynę wirtualną repliki asynchronicznego.</span><span class="sxs-lookup"><span data-stu-id="877cc-256">Create an availability group listener, or update the existing listener to include the asynchronous replica virtual machine.</span></span>
1. <span data-ttu-id="877cc-257">Upewnij się, że farmy aplikacji jest skonfigurowany przy użyciu odbiornika.</span><span class="sxs-lookup"><span data-stu-id="877cc-257">Make sure that the application farm is set up using the listener.</span></span> <span data-ttu-id="877cc-258">Jeśli ustawianie przy użyciu nazwy serwera bazy danych, zaktualizuj go do użycia odbiornika, więc nie trzeba go ponownie skonfigurować po przejściu w tryb failover.</span><span class="sxs-lookup"><span data-stu-id="877cc-258">If it's setup up using the database server name, update it to use the listener, so you don't need to reconfigure it after the failover.</span></span>

<span data-ttu-id="877cc-259">W przypadku aplikacji korzystających z transakcji rozproszonych, zaleca się wdrażania usługi Site Recovery z [replikacji do lokacji serwera VMware/fizyczne](site-recovery-vmware-to-vmware.md).</span><span class="sxs-lookup"><span data-stu-id="877cc-259">For applications that use distributed transactions, we recommend you deploy Site Recovery with [VMware/physical server site-to-site replication](site-recovery-vmware-to-vmware.md).</span></span>

### <a name="recovery-plan-considerations"></a><span data-ttu-id="877cc-260">Zagadnienia dotyczące planu odzyskiwania</span><span class="sxs-lookup"><span data-stu-id="877cc-260">Recovery plan considerations</span></span>
1. <span data-ttu-id="877cc-261">Dodaj ten przykładowy skrypt do biblioteki programu VMM w lokacjach głównych i dodatkowych.</span><span class="sxs-lookup"><span data-stu-id="877cc-261">Add this sample script to the VMM library, on the primary and secondary sites.</span></span>

        Param(
        [string]$SQLAvailabilityGroupPath
        )
        import-module sqlps
        Switch-SqlAvailabilityGroup -Path $SQLAvailabilityGroupPath -AllowDataLoss -force

1. <span data-ttu-id="877cc-262">Po utworzeniu planu odzyskiwania dla aplikacji, należy dodać akcję sprzed do kroku inicjowanych przez skrypty grupy-1, który wywołuje skrypt do trybu failover grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="877cc-262">When you create a recovery plan for the application, add a pre action to Group-1 scripted step, that invokes the script to fail over availability groups.</span></span>

## <a name="protect-a-standalone-sql-server"></a><span data-ttu-id="877cc-263">Ochrona autonomicznego serwera SQL</span><span class="sxs-lookup"><span data-stu-id="877cc-263">Protect a standalone SQL Server</span></span>

<span data-ttu-id="877cc-264">W tym scenariuszu zalecane jest użycie replikacji usługi Site Recovery do ochrony komputera programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="877cc-264">In this scenario, we recommend that you use Site Recovery replication to protect the SQL Server machine.</span></span> <span data-ttu-id="877cc-265">Dokładne kroki zależy, czy serwer SQL jest maszyny Wirtualnej lub serwerze fizycznym i określa, czy chcesz replikować do platformy Azure lub dodatkowej lokacji lokalnymi.</span><span class="sxs-lookup"><span data-stu-id="877cc-265">The exact steps will depend whether SQL Server is a VM or a physical server, and whether you want to replicate to Azure or a secondary on-premises site.</span></span> <span data-ttu-id="877cc-266">Dowiedz się więcej o [scenariuszy odzyskiwania lokacji](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="877cc-266">Learn about [Site Recovery scenarios](site-recovery-overview.md).</span></span>

## <a name="protect-a-sql-server-cluster-standard-editionwindows-server-2008-r2"></a><span data-ttu-id="877cc-267">Ochrona klastra programu SQL Server (standard edition/Windows Server 2008 R2)</span><span class="sxs-lookup"><span data-stu-id="877cc-267">Protect a SQL Server cluster (standard edition/Windows Server 2008 R2)</span></span>

<span data-ttu-id="877cc-268">W przypadku klastra z programem SQL Server Standard edition lub SQL Server 2008 R2, firma Microsoft zaleca się, że używasz replikacji usługi Site Recovery do ochrony programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="877cc-268">For a cluster running SQL Server Standard edition, or SQL Server 2008 R2, we recommend you use Site Recovery replication to protect SQL Server.</span></span>

### <a name="on-premises-to-on-premises"></a><span data-ttu-id="877cc-269">Ze środowiska lokalnego do środowiska lokalnego</span><span class="sxs-lookup"><span data-stu-id="877cc-269">On-premises to on-premises</span></span>

* <span data-ttu-id="877cc-270">Jeśli aplikacja korzysta z transakcji rozproszonych zalecamy wdrożeniem [odzyskiwania lokacji za pomocą replikacji SAN](site-recovery-vmm-san.md) w środowisku funkcji Hyper-V lub [serwera VMware/fizyczne do programu VMware](site-recovery-vmware-to-vmware.md) w środowisku VMware.</span><span class="sxs-lookup"><span data-stu-id="877cc-270">If the app uses distributed transactions we recommend you deploy [Site Recovery with SAN replication](site-recovery-vmm-san.md) for a Hyper-V environment, or [VMware/physical server to VMware](site-recovery-vmware-to-vmware.md) for a VMware environment.</span></span>
* <span data-ttu-id="877cc-271">Dla aplikacji z systemem innym niż DTC należy użyć metody powyżej, aby odzyskać klaster jako serwer autonomiczny, wykorzystując lokalnego wysokiego bezpieczeństwa dublowania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="877cc-271">For non-DTC applications, use the above approach to recover the cluster as a standalone server, by leveraging a local high safety DB mirror.</span></span>

### <a name="on-premises-to-azure"></a><span data-ttu-id="877cc-272">Dane lokalne na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="877cc-272">On-premises to Azure</span></span>

<span data-ttu-id="877cc-273">Usługa Site Recovery nie zapewnia gościa Obsługa klastrów, podczas replikacji do platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="877cc-273">Site Recovery doesn't provide guest cluster support when replicating to Azure.</span></span> <span data-ttu-id="877cc-274">Dla wersji Standard programu SQL Server również nie zapewnia rozwiązanie odzyskiwania po awarii niskich kosztach.</span><span class="sxs-lookup"><span data-stu-id="877cc-274">SQL Server also doesn't provide a low-cost disaster recovery solution for Standard edition.</span></span> <span data-ttu-id="877cc-275">W tym scenariuszu Zalecamy ochronę lokalnego klastra programu SQL Server do autonomicznego serwera SQL i odzyskać ją na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="877cc-275">In this scenario, we recommend you protect the on-premises SQL Server cluster to a standalone SQL Server, and recover it in Azure.</span></span>

1. <span data-ttu-id="877cc-276">Skonfiguruj dodatkowe autonomiczne wystąpienie programu SQL Server w lokacji lokalnej.</span><span class="sxs-lookup"><span data-stu-id="877cc-276">Configure an additional standalone SQL Server instance on the on-premises site.</span></span>
1. <span data-ttu-id="877cc-277">Skonfiguruj wystąpienie jako dublowania baz danych, które chcesz chronić.</span><span class="sxs-lookup"><span data-stu-id="877cc-277">Configure the instance to serve as a mirror for the databases you want to protect.</span></span> <span data-ttu-id="877cc-278">Konfigurowanie funkcji dublowania w trybie wysokiego bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="877cc-278">Configure mirroring in high safety mode.</span></span>
1. <span data-ttu-id="877cc-279">Konfigurowanie usługi Site Recovery w lokacji lokalnej dla ([funkcji Hyper-V](site-recovery-hyper-v-site-to-azure.md) lub [VMware maszyny wirtualne/serwery fizyczne)](site-recovery-vmware-to-azure-classic.md).</span><span class="sxs-lookup"><span data-stu-id="877cc-279">Configure Site Recovery on the on-premises site, for ([Hyper-V](site-recovery-hyper-v-site-to-azure.md) or [VMware VMs/physical servers)](site-recovery-vmware-to-azure-classic.md).</span></span>
1. <span data-ttu-id="877cc-280">Replikacja usługi Site Recovery umożliwia replikowanie nowe wystąpienie programu SQL Server na platformę Azure.</span><span class="sxs-lookup"><span data-stu-id="877cc-280">Use Site Recovery replication to replicate the new SQL Server instance to Azure.</span></span> <span data-ttu-id="877cc-281">Ponieważ jest kopii duplikatu wysokiego bezpieczeństwa, zostanie on zsynchronizowany z klastra głównego, ale będą replikowane do platformy Azure przy użyciu replikacji usługi Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="877cc-281">Since it's a high safety mirror copy, it will be synchronized with the primary cluster, but it will be replicated to Azure using Site Recovery replication.</span></span>


![Klaster w warstwie Standardowa](./media/site-recovery-sql/standalone-cluster-local.png)

### <a name="failback-considerations"></a><span data-ttu-id="877cc-283">Zagadnienia dotyczące powrotu po awarii</span><span class="sxs-lookup"><span data-stu-id="877cc-283">Failback considerations</span></span>

<span data-ttu-id="877cc-284">W przypadku klastrów programu SQL Server Standard powrotu po awarii po nieplanowany tryb failover wymaga kopii zapasowej serwera SQL i przywracania z wystąpienia duplikatu do oryginalnego klastra reestablishment duplikatu.</span><span class="sxs-lookup"><span data-stu-id="877cc-284">For SQL Server Standard clusters, failback after an unplanned failover requires a SQL server backup and restore, from the mirror instance to the original cluster, with reestablishment of the mirror.</span></span>

## <a name="next-steps"></a><span data-ttu-id="877cc-285">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="877cc-285">Next steps</span></span>
<span data-ttu-id="877cc-286">[Dowiedz się więcej](site-recovery-components.md) o architekturze usługi Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="877cc-286">[Learn more](site-recovery-components.md) about Site Recovery architecture.</span></span>
