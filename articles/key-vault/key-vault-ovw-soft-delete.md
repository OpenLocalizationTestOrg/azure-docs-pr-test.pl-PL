---
ms.assetid: 
title: "usuwania nietrwałego aaaAzure Key Vault | Dokumentacja firmy Microsoft"
ms.service: key-vault
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.date: 07/10/2017
ms.openlocfilehash: 1b402c58db6f25ae4ae5e2720786fa81eb0e839a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="azure-key-vault-soft-delete-overview"></a><span data-ttu-id="529cf-102">Omówienie usługi Azure Key Vault soft-delete</span><span class="sxs-lookup"><span data-stu-id="529cf-102">Azure Key Vault soft-delete overview</span></span>

<span data-ttu-id="529cf-103">Funkcja usuwania nietrwałego Key Vault umożliwia odzyskiwanie hello usunięte magazynów i magazynu obiektów, znany jako usuwania nietrwałego.</span><span class="sxs-lookup"><span data-stu-id="529cf-103">Key Vault's soft delete feature allows recovery of hello deleted vaults and vault objects, known as soft-delete.</span></span> <span data-ttu-id="529cf-104">W szczególności można rozwiązać hello następujące scenariusze:</span><span class="sxs-lookup"><span data-stu-id="529cf-104">Specifically, we address hello following scenarios:</span></span>

- <span data-ttu-id="529cf-105">Obsługa możliwych do odzyskania usuwanie magazynu kluczy</span><span class="sxs-lookup"><span data-stu-id="529cf-105">Support for recoverable deletion of a key vault</span></span>
- <span data-ttu-id="529cf-106">Obsługa możliwych do odzyskania usuwanie magazynu kluczy obiektów (np.</span><span class="sxs-lookup"><span data-stu-id="529cf-106">Support for recoverable deletion of key vault objects (ex.</span></span> <span data-ttu-id="529cf-107">klucze, klucze tajne certyfikatów)</span><span class="sxs-lookup"><span data-stu-id="529cf-107">keys, secrets, certificates)</span></span>

## <a name="supporting-interfaces"></a><span data-ttu-id="529cf-108">Obsługa interfejsów</span><span class="sxs-lookup"><span data-stu-id="529cf-108">Supporting interfaces</span></span>

<span data-ttu-id="529cf-109">Witaj funkcji usuwania nietrwałego jest początkowo dostępna za pośrednictwem hello REST, .NET / interfejsy C# i programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="529cf-109">hello soft-delete feature is initially available through hello REST, .NET/C# and PowerShell interfaces.</span></span> <span data-ttu-id="529cf-110">Odnoszą się odwołania toohello tych więcej szczegółów, [z informacjami o kluczach magazynu](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="529cf-110">Refer toohello references for these for more details, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

## <a name="scenarios"></a><span data-ttu-id="529cf-111">Scenariusze</span><span class="sxs-lookup"><span data-stu-id="529cf-111">Scenarios</span></span>

<span data-ttu-id="529cf-112">Azure magazynów kluczy są śledzone zasoby zarządzanym przez Menedżera zasobów Azure.</span><span class="sxs-lookup"><span data-stu-id="529cf-112">Azure Key Vaults are tracked resources, managed by Azure Resource Manager.</span></span> <span data-ttu-id="529cf-113">Usługa Azure Resource Manager określa również dobrze zdefiniowanego zachowania do usunięcia, co wymaga czy powodzenie operacji DELETE muszą dawać w wyniku tego zasobu nie nie jest już dostępny.</span><span class="sxs-lookup"><span data-stu-id="529cf-113">Azure Resource Manager also specifies a well-defined behavior for deletion, which requires that a successful DELETE operation must result in that resource not being accessible anymore.</span></span> <span data-ttu-id="529cf-114">adresy funkcji usuwania nietrwałego Hello hello odzyskiwania hello usunięty obiekt, czy usunięcie hello było przypadkowym lub zamierzone.</span><span class="sxs-lookup"><span data-stu-id="529cf-114">hello soft-delete feature addresses hello recovery of hello deleted object, whether hello deletion was accidental or intentional.</span></span>

1. <span data-ttu-id="529cf-115">W hello typowy scenariusz użytkownik może przypadkowo usunięto magazyn kluczy lub obiekt magazynu kluczy; Jeśli tego klucza lub klucza magazynie magazyn obiektu zostały toobe możliwych do odzyskania przez okres ustalonej, hello użytkownika może cofnąć usunięcia hello i odzyskiwanie ich danych.</span><span class="sxs-lookup"><span data-stu-id="529cf-115">In hello typical scenario, a user may have inadvertently deleted a key vault or a key vault object; if that key vault or key vault object were toobe recoverable for a predetermined period, hello user may undo hello deletion and recover their data.</span></span>

2. <span data-ttu-id="529cf-116">W przypadku różnych złośliwy użytkownik może podejmować toodelete magazynu kluczy lub obiektu magazynu kluczy, na przykład klucz w magazynie toocause zakłóceń biznesowych.</span><span class="sxs-lookup"><span data-stu-id="529cf-116">In a different scenario, a rogue user may attempt toodelete a key vault or a key vault object, such as a key inside a vault, toocause a business disruption.</span></span> <span data-ttu-id="529cf-117">Oddzielanie hello usuwanie magazynu kluczy hello lub obiekt magazynu kluczy z hello rzeczywiste usunięcie hello bazowy danych może służyć jako zabezpieczeniem, na przykład ograniczenie uprawnień na tooa usunięcia danych jest inny, Zaufane roli.</span><span class="sxs-lookup"><span data-stu-id="529cf-117">Separating hello deletion of hello key vault or key vault object from hello actual deletion of hello underlying data can be used as a safety measure by, for instance, restricting permissions on data deletion tooa different, trusted role.</span></span> <span data-ttu-id="529cf-118">Takie podejście efektywnie wymaga kworum dla danej operacji, które w przeciwnym razie może spowodować utratę danych bezpośrednim.</span><span class="sxs-lookup"><span data-stu-id="529cf-118">This approach effectively requires quorum for an operation which might otherwise result in an immediate data loss.</span></span>

### <a name="soft-delete-behavior"></a><span data-ttu-id="529cf-119">Zachowanie soft-delete</span><span class="sxs-lookup"><span data-stu-id="529cf-119">Soft-delete behavior</span></span>

<span data-ttu-id="529cf-120">Przy użyciu tej funkcji hello operacji usuwania w magazynie kluczy lub obiekt magazynu kluczy jest soft-delete, efektywnie przytrzymując hello zasobów w danym okresie przechowywania danego nadanie hello wygląd obiektu hello jest usuwany.</span><span class="sxs-lookup"><span data-stu-id="529cf-120">With this feature, hello DELETE operation on a key vault or key vault object is a soft-delete, effectively holding hello resources for a given retention period, while giving hello appearance that hello object is deleted.</span></span> <span data-ttu-id="529cf-121">Dodatkowo usługa Hello udostępnia mechanizm odzyskiwanie hello usunięty obiekt zasadniczo cofanie usuwania hello.</span><span class="sxs-lookup"><span data-stu-id="529cf-121">hello service further provides a mechanism for recovering hello deleted object, essentially undoing hello deletion.</span></span> 

<span data-ttu-id="529cf-122">Usuwania nietrwałego jest opcjonalne zachowanie magazyn kluczy i **nie jest włączone domyślnie** w tej wersji.</span><span class="sxs-lookup"><span data-stu-id="529cf-122">Soft-delete is an optional Key Vault behavior and is **not enabled by default** in this release.</span></span> <span data-ttu-id="529cf-123">Szczegółowe informacje na temat włączania soft-delete dla magazynu kluczy, można znaleźć hello dokładne wskazówki w odwołaniu hello interfejsu hello wybranych [z informacjami o kluczach magazynu](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="529cf-123">For details on enabling soft-delete for your key vault, see hello specific guidance in hello reference for hello interface of your choice, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

### <a name="key-vault-recovery"></a><span data-ttu-id="529cf-124">Magazyn kluczy odzyskiwania</span><span class="sxs-lookup"><span data-stu-id="529cf-124">Key vault recovery</span></span>

<span data-ttu-id="529cf-125">Podczas usuwania magazynu kluczy, usługa hello tworzy zasób serwera proxy w ramach subskrypcji hello, dodawanie metadanych wystarczające do odzyskania.</span><span class="sxs-lookup"><span data-stu-id="529cf-125">Upon deleting a key vault, hello service creates a proxy resource under hello subscription, adding sufficient metadata for recovery.</span></span> <span data-ttu-id="529cf-126">zasób proxy Hello jest przechowywane obiektu dostępne w hello tej samej lokalizacji co magazyn kluczy hello usunięte.</span><span class="sxs-lookup"><span data-stu-id="529cf-126">hello proxy resource is a stored object, available in hello same location as hello deleted key vault.</span></span> 

### <a name="key-vault-object-recovery"></a><span data-ttu-id="529cf-127">Odzyskiwanie obiektów magazynu kluczy</span><span class="sxs-lookup"><span data-stu-id="529cf-127">Key vault object recovery</span></span>

<span data-ttu-id="529cf-128">Podczas usuwania obiektu magazynu kluczy, na przykład klucz usługi hello umieści obiektu hello w stanie usunięty, co w związku z tym operacjami pobierania tooany niedostępny.</span><span class="sxs-lookup"><span data-stu-id="529cf-128">Upon deleting a key vault object, such as a key, hello service will place hello object in a deleted state, thus making it inaccessible tooany retrieval operations.</span></span> <span data-ttu-id="529cf-129">W tym stanie obiektu magazynu kluczy hello może wystąpić tylko, odzyskana lub wymuszone/trwale usunięte.</span><span class="sxs-lookup"><span data-stu-id="529cf-129">While in this state, hello key vault object can only be listed, recovered, or forcefully/permanently deleted.</span></span> 

<span data-ttu-id="529cf-130">Na powitania sam czasie, klucza magazynu zaplanowane usunięcie hello hello bazowy toohello odpowiednich danych usunąć magazyn kluczy lub obiekt magazynu kluczy do wykonania po upływie czasu przechowywania wcześniej.</span><span class="sxs-lookup"><span data-stu-id="529cf-130">At hello same time, Key Vault will schedule hello deletion of hello underlying data corresponding toohello deleted key vault or key vault object for execution after a predetermined retention interval.</span></span> <span data-ttu-id="529cf-131">Witaj DNS rekordów odpowiedni toohello magazyn także jest przechowywany dla długości hello okresu przechowywania hello.</span><span class="sxs-lookup"><span data-stu-id="529cf-131">hello DNS record corresponding toohello vault is also retained for hello duration of hello retention interval.</span></span>

### <a name="soft-delete-retention-period"></a><span data-ttu-id="529cf-132">Okres przechowywania soft-delete</span><span class="sxs-lookup"><span data-stu-id="529cf-132">Soft-delete retention period</span></span>

<span data-ttu-id="529cf-133">Elastyczne zasoby usunięte zostaną zachowane na wybrany okres czasu, w ciągu 90 dni.</span><span class="sxs-lookup"><span data-stu-id="529cf-133">Soft deleted resources are retained for a set period of time, 90 days.</span></span> <span data-ttu-id="529cf-134">Przedział czasu przechowywania usuwania nietrwałego hello Zastosuj następujące hello:</span><span class="sxs-lookup"><span data-stu-id="529cf-134">During hello soft-delete retention interval, hello following apply:</span></span>

- <span data-ttu-id="529cf-135">Może listę wszystkich magazynów kluczy hello i obiektów magazynu kluczy w stanie usuwania nietrwałego powitania dla Twojej subskrypcji, a także dostęp do usunięcia i odzyskiwania informacji o nich.</span><span class="sxs-lookup"><span data-stu-id="529cf-135">You may list all of hello key vaults and key vault objects in hello soft-delete state for your subscription as well as access deletion and recovery information about them.</span></span>
    - <span data-ttu-id="529cf-136">Tylko użytkownicy z uprawnieniami specjalne można wyświetlić listę usuniętych magazynów.</span><span class="sxs-lookup"><span data-stu-id="529cf-136">Only users with special permissions can list deleted vaults.</span></span> <span data-ttu-id="529cf-137">Zaleca się naszych użytkowników utworzenie niestandardowej roli zabezpieczeń z odpowiednimi uprawnieniami specjalne magazynów Obsługa usunięta.</span><span class="sxs-lookup"><span data-stu-id="529cf-137">We recommend that our users create a custom role with these special permissions for handling deleted vaults.</span></span>
- <span data-ttu-id="529cf-138">Magazyn kluczy o tej samej nazwie, nie można utworzyć w hello hello tej samej lokalizacji. odpowiednio magazynu kluczy nie można utworzyć obiektu w danym magazynie Jeśli tego magazynu kluczy zawiera obiekt z hello tej samej nazwy i która jest w stanie usunięty</span><span class="sxs-lookup"><span data-stu-id="529cf-138">A key vault with hello same name cannot be created in hello same location; correspondingly, a key vault object cannot be created in a given vault if that key vault contains an object with hello same name and which is in a deleted state</span></span> 
- <span data-ttu-id="529cf-139">W szczególności uprzywilejowanych użytkownik może przywrócić magazynu kluczy lub obiekt magazynu kluczy wydając polecenie Odzyskaj na powitania odpowiadający jej zasób serwera proxy.</span><span class="sxs-lookup"><span data-stu-id="529cf-139">Only a specifically privileged user may restore a key vault or key vault object by issuing a recover command on hello corresponding proxy resource.</span></span>
    - <span data-ttu-id="529cf-140">Użytkownik Hello członka hello niestandardową rolę, który ma toocreate uprawnień hello magazynu kluczy w grupie zasobów hello można przywrócić hello magazynu.</span><span class="sxs-lookup"><span data-stu-id="529cf-140">hello user, member of hello custom role, who has hello privilege toocreate a key vault under hello resource group can restore hello vault.</span></span>
- <span data-ttu-id="529cf-141">Tylko użytkownik, w szczególności uprzywilejowanych może wymusić usuwanie magazynu kluczy lub obiektu magazynu kluczy wydając polecenie delete na powitania odpowiadający jej zasób serwera proxy.</span><span class="sxs-lookup"><span data-stu-id="529cf-141">Only a specifically privileged user may forcibly delete a key vault or key vault object by issuing a delete command on hello corresponding proxy resource.</span></span>

<span data-ttu-id="529cf-142">Chyba, że magazyn kluczy lub obiekt magazynu kluczy zostanie przywrócona, koniec usługi hello interwał przechowywania hello na powitania wykonuje przeczyszczanie magazynu kluczy hello wszystkie usunięte nietrwale lub obiektu magazynu kluczy i jego zawartości.</span><span class="sxs-lookup"><span data-stu-id="529cf-142">Unless a key vault or key vault object is recovered, at hello end of hello retention interval hello service performs a purge of hello soft-deleted key vault or key vault object and its content.</span></span> <span data-ttu-id="529cf-143">Nie może być zmienił jego usunięcia zasobu.</span><span class="sxs-lookup"><span data-stu-id="529cf-143">Resource deletion may not be rescheduled.</span></span>

### <a name="permitted-purge"></a><span data-ttu-id="529cf-144">Przeczyszczanie dozwolone</span><span class="sxs-lookup"><span data-stu-id="529cf-144">Permitted purge</span></span>

<span data-ttu-id="529cf-145">Trwałe usuwanie, usuwanie, magazyn kluczy jest możliwe za pośrednictwem operację POST na powitania serwera proxy zasobów i wymaga specjalnych uprawnień.</span><span class="sxs-lookup"><span data-stu-id="529cf-145">Permanently deleting, purging, a key vault is possible via a POST operation on hello proxy resource and requires special privileges.</span></span> <span data-ttu-id="529cf-146">Ogólnie rzecz biorąc tylko właściciel subskrypcji hello będą mogli toopurge magazynu kluczy.</span><span class="sxs-lookup"><span data-stu-id="529cf-146">Generally, only hello subscription owner will be able toopurge a key vault.</span></span> <span data-ttu-id="529cf-147">Wyzwalacze operacji POST Hello hello usunięcia natychmiastowe i nie można odzyskać tego magazynu.</span><span class="sxs-lookup"><span data-stu-id="529cf-147">hello POST operation triggers hello immediate and irrecoverable deletion of that vault.</span></span> 

<span data-ttu-id="529cf-148">Wyjątek toothis sytuacja hello hello subskrypcji platformy Azure została oznaczona jako *nieusuwalnej*.</span><span class="sxs-lookup"><span data-stu-id="529cf-148">An exception toothis is hello case when hello Azure subscription has been marked as *undeletable*.</span></span> <span data-ttu-id="529cf-149">W takim przypadku tylko hello usługa może następnie wykonaj rzeczywiste usunięcie hello i wykonuje zaplanowane proces.</span><span class="sxs-lookup"><span data-stu-id="529cf-149">In this case, only hello service may then perform hello actual deletion, and does so as a scheduled process.</span></span> 



