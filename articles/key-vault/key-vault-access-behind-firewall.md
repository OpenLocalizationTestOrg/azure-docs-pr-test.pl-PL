---
title: "aaaAccess Key Vault za zaporą | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak tooaccess Azure klucza magazynu z aplikacji za zaporą"
services: key-vault
documentationcenter: 
author: amitbapat
manager: mbaldwin
tags: azure-resource-manager
ms.assetid: 50d21774-2ee1-4212-8995-570c9de603c5
ms.service: key-vault
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: hero-article
ms.date: 01/07/2017
ms.author: ambapat
ms.openlocfilehash: ab4bb0c27a41fef878a20dace6cab203df04e579
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="access-azure-key-vault-behind-a-firewall"></a><span data-ttu-id="a2868-103">Uzyskiwanie dostępu do usługi Azure Key Vault za zaporą</span><span class="sxs-lookup"><span data-stu-id="a2868-103">Access Azure Key Vault behind a firewall</span></span>
### <a name="q-my-key-vault-client-application-needs-toobe-behind-a-firewall-what-ports-hosts-or-ip-addresses-should-i-open-tooenable-access-tooa-key-vault"></a><span data-ttu-id="a2868-104">Pytanie: czy Moja aplikacja klienta magazynu kluczy musi toobe za zaporą.</span><span class="sxs-lookup"><span data-stu-id="a2868-104">Q: My key vault client application needs toobe behind a firewall.</span></span> <span data-ttu-id="a2868-105">Jakie porty, hosty lub adresy IP należy otworzyć magazynu kluczy tooa tooenable dostępu?</span><span class="sxs-lookup"><span data-stu-id="a2868-105">What ports, hosts, or IP addresses should I open tooenable access tooa key vault?</span></span>
<span data-ttu-id="a2868-106">tooaccess magazyn kluczy, aplikacja kliencka magazynu kluczy ma tooaccess wiele punktów końcowych dla różnych funkcji:</span><span class="sxs-lookup"><span data-stu-id="a2868-106">tooaccess a key vault, your key vault client application has tooaccess multiple endpoints for various functionalities:</span></span>

* <span data-ttu-id="a2868-107">Uwierzytelnianie za pośrednictwem usługi Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="a2868-107">Authentication via Azure Active Directory (Azure AD).</span></span>
* <span data-ttu-id="a2868-108">Zarządzanie usługą Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="a2868-108">Management of Azure Key Vault.</span></span> <span data-ttu-id="a2868-109">Obejmuje to tworzenie, odczytywanie, aktualizowanie, usuwanie oraz ustawianie zasad dostępu za pośrednictwem usługi Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="a2868-109">This includes creating, reading, updating, deleting, and setting access policies through Azure Resource Manager.</span></span>
* <span data-ttu-id="a2868-110">Dostęp i zarządzanie obiektów (kluczy i kluczy tajnych) przechowywanych w magazynie kluczy samego, pośrednictwa hello specyficzne dla klucza magazynu punktu końcowego (na przykład [https://yourvaultname.vault.azure.net](https://yourvaultname.vault.azure.net)).</span><span class="sxs-lookup"><span data-stu-id="a2868-110">Accessing and managing objects (keys and secrets) stored in Key Vault itself, going through hello Key Vault-specific endpoint (for example, [https://yourvaultname.vault.azure.net](https://yourvaultname.vault.azure.net)).</span></span>  

<span data-ttu-id="a2868-111">W zależności od konfiguracji i środowiska istnieją pewne odstępstwa.</span><span class="sxs-lookup"><span data-stu-id="a2868-111">Depending on your configuration and environment, there are some variations.</span></span>   

## <a name="ports"></a><span data-ttu-id="a2868-112">Porty</span><span class="sxs-lookup"><span data-stu-id="a2868-112">Ports</span></span>
<span data-ttu-id="a2868-113">Przechodzi wszystkie ruchu tooa magazynu kluczy dla wszystkich trzech funkcji (dostęp płaszczyzny uwierzytelniania, zarządzania i dane) za pośrednictwem protokołu HTTPS: portu 443.</span><span class="sxs-lookup"><span data-stu-id="a2868-113">All traffic tooa key vault for all three functions (authentication, management, and data plane access) goes over HTTPS: port 443.</span></span> <span data-ttu-id="a2868-114">Jednak w przypadku listy CRL może czasami wystąpić ruch za pośrednictwem protokołu HTTP (port 80).</span><span class="sxs-lookup"><span data-stu-id="a2868-114">However, there will occasionally be HTTP (port 80) traffic for CRL.</span></span> <span data-ttu-id="a2868-115">Klienci obsługujący protokół OCSP nie powinni docierać do listy CRL, ale czasami mogą dotrzeć do pliku [http://cdp1.public-trust.com/CRL/Omniroot2025.crl](http://cdp1.public-trust.com/CRL/Omniroot2025.crl).</span><span class="sxs-lookup"><span data-stu-id="a2868-115">Clients that support OCSP shouldn't reach CRL, but may occasionally reach [http://cdp1.public-trust.com/CRL/Omniroot2025.crl](http://cdp1.public-trust.com/CRL/Omniroot2025.crl).</span></span>  

## <a name="authentication"></a><span data-ttu-id="a2868-116">Authentication</span><span class="sxs-lookup"><span data-stu-id="a2868-116">Authentication</span></span>
<span data-ttu-id="a2868-117">Aplikacje klienckie magazynu kluczy musi tooaccess punktów końcowych usługi Azure Active Directory do uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="a2868-117">Key vault client applications will need tooaccess Azure Active Directory endpoints for authentication.</span></span> <span data-ttu-id="a2868-118">Witaj punktowi końcowemu używanemu zależy hello konfiguracji dzierżawy usługi Azure AD, hello typ podmiotu zabezpieczeń (głównej nazwy użytkownika lub nazwy głównej usługi) i hello typ konta — na przykład konta Microsoft lub służbowy lub konta służbowego.</span><span class="sxs-lookup"><span data-stu-id="a2868-118">hello endpoint used depends on hello Azure AD tenant configuration, hello type of principal (user principal or service principal), and hello type of account--for example, a Microsoft account or a work or school account.</span></span>  

| <span data-ttu-id="a2868-119">Typ nazwy głównej</span><span class="sxs-lookup"><span data-stu-id="a2868-119">Principal type</span></span> | <span data-ttu-id="a2868-120">Punkt końcowy:port</span><span class="sxs-lookup"><span data-stu-id="a2868-120">Endpoint:port</span></span> |
| --- | --- |
| <span data-ttu-id="a2868-121">Użytkownik korzystający z konta Microsoft</span><span class="sxs-lookup"><span data-stu-id="a2868-121">User using Microsoft account</span></span><br> <span data-ttu-id="a2868-122">(na przykład user@hotmail.com)</span><span class="sxs-lookup"><span data-stu-id="a2868-122">(for example, user@hotmail.com)</span></span> |<span data-ttu-id="a2868-123">**Cały świat:**</span><span class="sxs-lookup"><span data-stu-id="a2868-123">**Global:**</span></span><br> <span data-ttu-id="a2868-124">login.microsoftonline.com:443</span><span class="sxs-lookup"><span data-stu-id="a2868-124">login.microsoftonline.com:443</span></span><br><br> <span data-ttu-id="a2868-125">**Chińska wersja platformy Azure:**</span><span class="sxs-lookup"><span data-stu-id="a2868-125">**Azure China:**</span></span><br> <span data-ttu-id="a2868-126">login.chinacloudapi.cn:443</span><span class="sxs-lookup"><span data-stu-id="a2868-126">login.chinacloudapi.cn:443</span></span><br><br><span data-ttu-id="a2868-127">**Wersja platformy Azure dla administracji USA:**</span><span class="sxs-lookup"><span data-stu-id="a2868-127">**Azure US Government:**</span></span><br> <span data-ttu-id="a2868-128">login-us.microsoftonline.com:443</span><span class="sxs-lookup"><span data-stu-id="a2868-128">login-us.microsoftonline.com:443</span></span><br><br><span data-ttu-id="a2868-129">**Niemiecka wersja platformy Azure:**</span><span class="sxs-lookup"><span data-stu-id="a2868-129">**Azure Germany:**</span></span><br> <span data-ttu-id="a2868-130">login.microsoftonline.de:443</span><span class="sxs-lookup"><span data-stu-id="a2868-130">login.microsoftonline.de:443</span></span><br><br> <span data-ttu-id="a2868-131">i</span><span class="sxs-lookup"><span data-stu-id="a2868-131">and</span></span> <br><span data-ttu-id="a2868-132">login.live.com:443</span><span class="sxs-lookup"><span data-stu-id="a2868-132">login.live.com:443</span></span> |
| <span data-ttu-id="a2868-133">Użytkownika lub nazwy głównej usługi przy użyciu konta służbowego z usługą Azure AD (na przykład user@contoso.com)</span><span class="sxs-lookup"><span data-stu-id="a2868-133">User or service principal using a work or school account with Azure AD (for example, user@contoso.com)</span></span> |<span data-ttu-id="a2868-134">**Cały świat:**</span><span class="sxs-lookup"><span data-stu-id="a2868-134">**Global:**</span></span><br> <span data-ttu-id="a2868-135">login.microsoftonline.com:443</span><span class="sxs-lookup"><span data-stu-id="a2868-135">login.microsoftonline.com:443</span></span><br><br> <span data-ttu-id="a2868-136">**Chińska wersja platformy Azure:**</span><span class="sxs-lookup"><span data-stu-id="a2868-136">**Azure China:**</span></span><br> <span data-ttu-id="a2868-137">login.chinacloudapi.cn:443</span><span class="sxs-lookup"><span data-stu-id="a2868-137">login.chinacloudapi.cn:443</span></span><br><br><span data-ttu-id="a2868-138">**Wersja platformy Azure dla administracji USA:**</span><span class="sxs-lookup"><span data-stu-id="a2868-138">**Azure US Government:**</span></span><br> <span data-ttu-id="a2868-139">login-us.microsoftonline.com:443</span><span class="sxs-lookup"><span data-stu-id="a2868-139">login-us.microsoftonline.com:443</span></span><br><br><span data-ttu-id="a2868-140">**Niemiecka wersja platformy Azure:**</span><span class="sxs-lookup"><span data-stu-id="a2868-140">**Azure Germany:**</span></span><br> <span data-ttu-id="a2868-141">login.microsoftonline.de:443</span><span class="sxs-lookup"><span data-stu-id="a2868-141">login.microsoftonline.de:443</span></span> |
| <span data-ttu-id="a2868-142">Użytkownika lub nazwy głównej usługi przy użyciu służbowy lub konta służbowego, oraz usługi Active Directory Federation Services (AD FS) lub inne federacyjne punktu końcowego (na przykład user@contoso.com)</span><span class="sxs-lookup"><span data-stu-id="a2868-142">User or service principal using a work or school account, plus Active Directory Federation Services (AD FS) or other federated endpoint (for example, user@contoso.com)</span></span> |<span data-ttu-id="a2868-143">Wszystkie punkty końcowe dla konta służbowego oraz punkty końcowe usług AD FS lub inne federacyjne punkty końcowe</span><span class="sxs-lookup"><span data-stu-id="a2868-143">All endpoints for a work or school account, plus AD FS or other federated endpoints</span></span> |

<span data-ttu-id="a2868-144">Istnieją inne możliwe złożone scenariusze.</span><span class="sxs-lookup"><span data-stu-id="a2868-144">There are other possible complex scenarios.</span></span> <span data-ttu-id="a2868-145">Odwołuje się zbyt[Azure Active Directory Authentication przepływ](/documentation/articles/active-directory-authentication-scenarios/), [integracji aplikacji z usługą Azure Active Directory](/documentation/articles/active-directory-integrating-applications/), i [protokoły uwierzytelniania w usłudze Active Directory](https://msdn.microsoft.com/library/azure/dn151124.aspx) Aby uzyskać dodatkowe informacje.</span><span class="sxs-lookup"><span data-stu-id="a2868-145">Refer too[Azure Active Directory Authentication Flow](/documentation/articles/active-directory-authentication-scenarios/), [Integrating Applications with Azure Active Directory](/documentation/articles/active-directory-integrating-applications/), and [Active Directory Authentication Protocols](https://msdn.microsoft.com/library/azure/dn151124.aspx) for additional information.</span></span>  

## <a name="key-vault-management"></a><span data-ttu-id="a2868-146">Zarządzanie usługą Key Vault</span><span class="sxs-lookup"><span data-stu-id="a2868-146">Key Vault management</span></span>
<span data-ttu-id="a2868-147">Do zarządzania usługi Key Vault (CRUD i ustawienie zasad dostępu) aplikacji klienckiej hello magazynu kluczy musi tooaccess punktu końcowego usługi Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="a2868-147">For Key Vault management (CRUD and setting access policy), hello key vault client application needs tooaccess an Azure Resource Manager endpoint.</span></span>  

| <span data-ttu-id="a2868-148">Typ operacji</span><span class="sxs-lookup"><span data-stu-id="a2868-148">Type of operation</span></span> | <span data-ttu-id="a2868-149">Punkt końcowy:port</span><span class="sxs-lookup"><span data-stu-id="a2868-149">Endpoint:port</span></span> |
| --- | --- |
| <span data-ttu-id="a2868-150">Operacje warstwy kontroli usługi Key Vault</span><span class="sxs-lookup"><span data-stu-id="a2868-150">Key Vault control plane operations</span></span><br> <span data-ttu-id="a2868-151">za pośrednictwem usługi Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="a2868-151">via Azure Resource Manager</span></span> |<span data-ttu-id="a2868-152">**Cały świat:**</span><span class="sxs-lookup"><span data-stu-id="a2868-152">**Global:**</span></span><br> <span data-ttu-id="a2868-153">management.azure.com:443</span><span class="sxs-lookup"><span data-stu-id="a2868-153">management.azure.com:443</span></span><br><br> <span data-ttu-id="a2868-154">**Chińska wersja platformy Azure:**</span><span class="sxs-lookup"><span data-stu-id="a2868-154">**Azure China:**</span></span><br> <span data-ttu-id="a2868-155">management.chinacloudapi.cn:443</span><span class="sxs-lookup"><span data-stu-id="a2868-155">management.chinacloudapi.cn:443</span></span><br><br> <span data-ttu-id="a2868-156">**Wersja platformy Azure dla administracji USA:**</span><span class="sxs-lookup"><span data-stu-id="a2868-156">**Azure US Government:**</span></span><br> <span data-ttu-id="a2868-157">management.usgovcloudapi.net:443</span><span class="sxs-lookup"><span data-stu-id="a2868-157">management.usgovcloudapi.net:443</span></span><br><br> <span data-ttu-id="a2868-158">**Niemiecka wersja platformy Azure:**</span><span class="sxs-lookup"><span data-stu-id="a2868-158">**Azure Germany:**</span></span><br> <span data-ttu-id="a2868-159">management.microsoftazure.de:443</span><span class="sxs-lookup"><span data-stu-id="a2868-159">management.microsoftazure.de:443</span></span> |
| <span data-ttu-id="a2868-160">Interfejs API programu Graph usługi Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="a2868-160">Azure Active Directory Graph API</span></span> |<span data-ttu-id="a2868-161">**Cały świat:**</span><span class="sxs-lookup"><span data-stu-id="a2868-161">**Global:**</span></span><br> <span data-ttu-id="a2868-162">graph.windows.net:443</span><span class="sxs-lookup"><span data-stu-id="a2868-162">graph.windows.net:443</span></span><br><br> <span data-ttu-id="a2868-163">**Chińska wersja platformy Azure:**</span><span class="sxs-lookup"><span data-stu-id="a2868-163">**Azure China:**</span></span><br> <span data-ttu-id="a2868-164">graph.chinacloudapi.cn:443</span><span class="sxs-lookup"><span data-stu-id="a2868-164">graph.chinacloudapi.cn:443</span></span><br><br> <span data-ttu-id="a2868-165">**Wersja platformy Azure dla administracji USA:**</span><span class="sxs-lookup"><span data-stu-id="a2868-165">**Azure US Government:**</span></span><br> <span data-ttu-id="a2868-166">graph.windows.net:443</span><span class="sxs-lookup"><span data-stu-id="a2868-166">graph.windows.net:443</span></span><br><br> <span data-ttu-id="a2868-167">**Niemiecka wersja platformy Azure:**</span><span class="sxs-lookup"><span data-stu-id="a2868-167">**Azure Germany:**</span></span><br> <span data-ttu-id="a2868-168">graph.cloudapi.de:443</span><span class="sxs-lookup"><span data-stu-id="a2868-168">graph.cloudapi.de:443</span></span> |

## <a name="key-vault-operations"></a><span data-ttu-id="a2868-169">Operacje usługi Key Vault</span><span class="sxs-lookup"><span data-stu-id="a2868-169">Key Vault operations</span></span>
<span data-ttu-id="a2868-170">Do zarządzania (kluczy i kluczy tajnych) obiektów magazynu kluczy i operacje kryptograficzne powitania klienta magazynu kluczy musi tooaccess hello magazynu kluczy w punkcie końcowym.</span><span class="sxs-lookup"><span data-stu-id="a2868-170">For all key vault object (keys and secrets) management and cryptographic operations, hello key vault client needs tooaccess hello key vault endpoint.</span></span> <span data-ttu-id="a2868-171">sufiks DNS punktu końcowego Hello różni się w zależności od lokalizacji hello magazynu kluczy.</span><span class="sxs-lookup"><span data-stu-id="a2868-171">hello endpoint DNS suffix varies depending on hello location of your key vault.</span></span> <span data-ttu-id="a2868-172">hello format jest punktu końcowego magazynu kluczy Hello *nazwę magazynu*. *region —-sufiks dns konkretnego*, zgodnie z opisem w poniższej tabeli hello.</span><span class="sxs-lookup"><span data-stu-id="a2868-172">hello key vault endpoint is of hello format *vault-name*.*region-specific-dns-suffix*, as described in hello following table.</span></span>  

| <span data-ttu-id="a2868-173">Typ operacji</span><span class="sxs-lookup"><span data-stu-id="a2868-173">Type of operation</span></span> | <span data-ttu-id="a2868-174">Punkt końcowy:port</span><span class="sxs-lookup"><span data-stu-id="a2868-174">Endpoint:port</span></span> |
| --- | --- |
| <span data-ttu-id="a2868-175">Operacje, takie jak operacje kryptograficzne na kluczach, tworzenie, odczytywanie, aktualizowanie i usuwanie kluczy oraz wpisów tajnych, ustawianie lub pobieranie tagów i innych atrybutów obiektów magazynu kluczy (klucze lub wpisy tajne)</span><span class="sxs-lookup"><span data-stu-id="a2868-175">Operations including cryptographic operations on keys; creating, reading, updating, and deleting keys and secrets; setting or getting tags and other attributes on key vault objects (keys or secrets)</span></span> |<span data-ttu-id="a2868-176">**Cały świat:**</span><span class="sxs-lookup"><span data-stu-id="a2868-176">**Global:**</span></span><br> <span data-ttu-id="a2868-177">&lt;nazwa_magazynu&gt;.vault.azure.net:443</span><span class="sxs-lookup"><span data-stu-id="a2868-177">&lt;vault-name&gt;.vault.azure.net:443</span></span><br><br> <span data-ttu-id="a2868-178">**Chińska wersja platformy Azure:**</span><span class="sxs-lookup"><span data-stu-id="a2868-178">**Azure China:**</span></span><br> <span data-ttu-id="a2868-179">&lt;nazwa_magazynu&gt;.vault.azure.cn:443</span><span class="sxs-lookup"><span data-stu-id="a2868-179">&lt;vault-name&gt;.vault.azure.cn:443</span></span><br><br> <span data-ttu-id="a2868-180">**Wersja platformy Azure dla administracji USA:**</span><span class="sxs-lookup"><span data-stu-id="a2868-180">**Azure US Government:**</span></span><br> <span data-ttu-id="a2868-181">&lt;nazwa_magazynu&gt;.vault.usgovcloudapi.net:443</span><span class="sxs-lookup"><span data-stu-id="a2868-181">&lt;vault-name&gt;.vault.usgovcloudapi.net:443</span></span><br><br> <span data-ttu-id="a2868-182">**Niemiecka wersja platformy Azure:**</span><span class="sxs-lookup"><span data-stu-id="a2868-182">**Azure Germany:**</span></span><br> <span data-ttu-id="a2868-183">&lt;nazwa_magazynu&gt;.vault.microsoftazure.de:443</span><span class="sxs-lookup"><span data-stu-id="a2868-183">&lt;vault-name&gt;.vault.microsoftazure.de:443</span></span> |

## <a name="ip-address-ranges"></a><span data-ttu-id="a2868-184">Zakresy adresów IP</span><span class="sxs-lookup"><span data-stu-id="a2868-184">IP address ranges</span></span>
<span data-ttu-id="a2868-185">Witaj w usłudze Key Vault używa innych zasobów platformy Azure, takich jak PaaS infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="a2868-185">hello Key Vault service uses other Azure resources like PaaS infrastructure.</span></span> <span data-ttu-id="a2868-186">Tak nie jest możliwe tooprovide określonego zakresu adresów IP tego punktów końcowych usługi będzie mieć jednocześnie określonej usługi Key Vault.</span><span class="sxs-lookup"><span data-stu-id="a2868-186">So it's not possible tooprovide a specific range of IP addresses that Key Vault service endpoints will have at any particular time.</span></span> <span data-ttu-id="a2868-187">Jeśli zapora obsługuje tylko zakresów adresów IP, zobacz toohello [zakresy IP centrum danych Azure Microsoft](https://www.microsoft.com/download/details.aspx?id=41653) dokumentu.</span><span class="sxs-lookup"><span data-stu-id="a2868-187">If your firewall supports only IP address ranges, refer toohello [Microsoft Azure Datacenter IP Ranges](https://www.microsoft.com/download/details.aspx?id=41653) document.</span></span> <span data-ttu-id="a2868-188">Uwierzytelnianie i tożsamość (Azure Active Directory), aplikacja musi być punkty końcowe toohello stanie tooconnect opisanego w [adresy uwierzytelnianie i tożsamość](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span><span class="sxs-lookup"><span data-stu-id="a2868-188">For authentication and identity (Azure Active Directory), your application must be able tooconnect toohello endpoints described in [Authentication and identity addresses](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span></span>

## <a name="next-steps"></a><span data-ttu-id="a2868-189">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="a2868-189">Next steps</span></span>
<span data-ttu-id="a2868-190">Jeśli masz pytania dotyczące usługi Key Vault, odwiedź stronę hello [fora magazynu kluczy Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=AzureKeyVault).</span><span class="sxs-lookup"><span data-stu-id="a2868-190">If you have questions about Key Vault, visit hello [Azure Key Vault Forums](https://social.msdn.microsoft.com/forums/azure/home?forum=AzureKeyVault).</span></span>

