---
title: "aaaDesign Azure szablony złożonych rozwiązań | Dokumentacja firmy Microsoft"
description: "Przedstawiono najlepsze rozwiązania dotyczące projektowania szablonów usługi Azure Resource Manager w złożonych scenariuszach"
services: azure-resource-manager
documentationcenter: 
author: tfitzmac
manager: timlt
editor: tysonn
ms.assetid: ce1141d6-ece7-4976-acea-1db1f775409e
ms.service: azure-resource-manager
ms.workload: multiple
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/19/2016
ms.author: tomfitz
ms.openlocfilehash: aa45e9a46d79a6336b696cff8fd37f65fa449f11
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="design-patterns-for-azure-resource-manager-templates-when-deploying-complex-solutions"></a><span data-ttu-id="c0292-103">Wzorce projektowe dla szablonów usługi Azure Resource Manager w przypadku wdrażania złożonych rozwiązań</span><span class="sxs-lookup"><span data-stu-id="c0292-103">Design patterns for Azure Resource Manager templates when deploying complex solutions</span></span>
<span data-ttu-id="c0292-104">Przy użyciu elastyczne podejście oparte na szablonach usługi Azure Resource Manager, można wdrożyć złożonej topologii szybkie i spójne.</span><span class="sxs-lookup"><span data-stu-id="c0292-104">Using a flexible approach based on Azure Resource Manager templates, you can deploy complex topologies quickly and consistently.</span></span> <span data-ttu-id="c0292-105">Można dostosować te wdrożenia łatwo jako podstawowych ofert rozwijać lub wariantów tooaccommodate dla scenariuszy izolowanej lub klientów.</span><span class="sxs-lookup"><span data-stu-id="c0292-105">You can adapt these deployments easily as core offerings evolve or tooaccommodate variants for outlier scenarios or customers.</span></span>

<span data-ttu-id="c0292-106">Ten temat jest częścią większej oficjalny dokument.</span><span class="sxs-lookup"><span data-stu-id="c0292-106">This topic is part of a larger whitepaper.</span></span> <span data-ttu-id="c0292-107">Pobierz hello tooread pełnej papier [światowej klasy Azure zasobów Menedżer szablonów zagadnienia i sprawdzonych rozwiązań](http://download.microsoft.com/download/8/E/1/8E1DBEFA-CECE-4DC9-A813-93520A5D7CFE/World Class ARM Templates - Considerations and Proven Practices.pdf).</span><span class="sxs-lookup"><span data-stu-id="c0292-107">tooread hello full paper, download [World Class Azure Resource Manager Templates Considerations and Proven Practices](http://download.microsoft.com/download/8/E/1/8E1DBEFA-CECE-4DC9-A813-93520A5D7CFE/World Class ARM Templates - Considerations and Proven Practices.pdf).</span></span>

<span data-ttu-id="c0292-108">Szablony łączyć hello zalet hello podstawowej usługi Azure Resource Manager z zdolności adaptacyjnych hello i czytelność kodu JavaScript Object Notation (JSON).</span><span class="sxs-lookup"><span data-stu-id="c0292-108">Templates combine hello benefits of hello underlying Azure Resource Manager with hello adaptability and readability of JavaScript Object Notation (JSON).</span></span> <span data-ttu-id="c0292-109">Za pomocą szablonów, można:</span><span class="sxs-lookup"><span data-stu-id="c0292-109">Using templates, you can:</span></span>

* <span data-ttu-id="c0292-110">Spójne wdrażanie topologii i ich obciążeń.</span><span class="sxs-lookup"><span data-stu-id="c0292-110">Deploy topologies and their workloads consistently.</span></span>
* <span data-ttu-id="c0292-111">Zarządzanie wszystkich zasobów w aplikacji ze sobą przy użyciu grup zasobów.</span><span class="sxs-lookup"><span data-stu-id="c0292-111">Manage all your resources in an application together using resource groups.</span></span>
* <span data-ttu-id="c0292-112">Zastosuj toousers odpowiedni dostęp toogrant kontroli dostępu opartej na rolach, grup i usług.</span><span class="sxs-lookup"><span data-stu-id="c0292-112">Apply role-based access control (RBAC) toogrant appropriate access toousers, groups, and services.</span></span>
* <span data-ttu-id="c0292-113">Użyj znakowania skojarzenia toostreamline zadań, takich jak rozliczenia pakietów zbiorczych.</span><span class="sxs-lookup"><span data-stu-id="c0292-113">Use tagging associations toostreamline tasks such as billing rollups.</span></span>

<span data-ttu-id="c0292-114">Ten artykuł zawiera szczegółowe informacje na scenariusze użycia, architektura i wzorce implementacji zidentyfikowanego w trakcie naszych sesji projektowania i implementacji rzeczywistych szablonu z klientami Azure zespół doradczy klientów (AzureCAT).</span><span class="sxs-lookup"><span data-stu-id="c0292-114">This article provides details on consumption scenarios, architecture, and implementation patterns identified during our design sessions and real-world template implementations with Azure Customer Advisory Team (AzureCAT) customers.</span></span> <span data-ttu-id="c0292-115">Daleko od uczelni, tych sposobów są sprawdzonych rozwiązań poinformowany przez hello tworzenia szablonów dla 12 hello top opartych na systemie Linux OSS technologii, takich jak: Apache Kafka, Apache Spark, Cloudera, Couchbase Hortonworks HDP, Enterprise DataStax obsługiwane przez Apache Cassandra, Elasticsearch Wpięć, bazy danych MongoDB, PostgreSQL, Redis i Nagios.</span><span class="sxs-lookup"><span data-stu-id="c0292-115">Far from academic, these approaches are proven practices informed by hello development of templates for 12 of hello top Linux-based OSS technologies, including: Apache Kafka, Apache Spark, Cloudera, Couchbase, Hortonworks HDP, DataStax Enterprise powered by Apache Cassandra, Elasticsearch, Jenkins, MongoDB, PostgreSQL, Redis, and Nagios.</span></span> 

<span data-ttu-id="c0292-116">W tym artykule współużytkuje te toohelp sprawdzonych rozwiązań projektowania szablonów usługi Azure Resource Manager klas world.</span><span class="sxs-lookup"><span data-stu-id="c0292-116">This article shares these proven practices toohelp you architect world class Azure Resource Manager templates.</span></span>  

<span data-ttu-id="c0292-117">W naszym Praca z klientami określiliśmy kilka środowisko konsumowania szablon Menedżera zasobów przedsiębiorstwa, s integratory systemu (SI) i udostępnionych woluminów klastra.</span><span class="sxs-lookup"><span data-stu-id="c0292-117">In our work with customers, we have identified several Resource Manager template consumption experiences across enterprises, System Integrators (SI)s, and CSVs.</span></span> <span data-ttu-id="c0292-118">Witaj poniższe sekcje zawierają ogólne omówienie typowych scenariuszy i wzorce dla różnych typów klientów.</span><span class="sxs-lookup"><span data-stu-id="c0292-118">hello following sections provide a high-level overview of common scenarios and patterns for different customer types.</span></span>

## <a name="enterprises-and-system-integrators"></a><span data-ttu-id="c0292-119">Przedsiębiorstwach i integratorów systemów. platforma</span><span class="sxs-lookup"><span data-stu-id="c0292-119">Enterprises and system integrators</span></span>
<span data-ttu-id="c0292-120">W dużych organizacjach widzimy często konsumentów dwóch szablonów usługi Resource Manager: zespoły rozwoju oprogramowania wewnętrzny i firmowych IT.</span><span class="sxs-lookup"><span data-stu-id="c0292-120">Within large organizations, we commonly see two consumers of Resource Manager templates: internal software development teams and corporate IT.</span></span> <span data-ttu-id="c0292-121">Wykryto, że scenariusze hello hello SIs mapy toohello scenariuszy dla przedsiębiorstw, tak hello te same kwestie.</span><span class="sxs-lookup"><span data-stu-id="c0292-121">We've found that hello scenarios for hello SIs map toohello scenarios for Enterprises, so hello same considerations apply.</span></span>

### <a name="internal-software-development-teams"></a><span data-ttu-id="c0292-122">Zespoły rozwoju oprogramowania wewnętrznego</span><span class="sxs-lookup"><span data-stu-id="c0292-122">Internal software development teams</span></span>
<span data-ttu-id="c0292-123">Jeśli zespół osiąga toosupport oprogramowania firmy, szablony umożliwiają łatwe tooquickly wdrażać technologie do zastosowania w rozwiązaniach specyficzne dla firm.</span><span class="sxs-lookup"><span data-stu-id="c0292-123">If your team develops software toosupport your business, templates provide an easy way tooquickly deploy technologies for use in business-specific solutions.</span></span> <span data-ttu-id="c0292-124">Można również użyć szablonów toorapidly utworzyć środowiska szkolenia, umożliwiających umiejętności niezbędne toogain członków zespołu.</span><span class="sxs-lookup"><span data-stu-id="c0292-124">You can also use templates toorapidly create training environments that enable team members toogain necessary skills.</span></span>

<span data-ttu-id="c0292-125">Za pomocą szablonów jako — jest lub rozszerzyć lub tworzą je tooaccommodate potrzeb.</span><span class="sxs-lookup"><span data-stu-id="c0292-125">You can use templates as-is or extend or compose them tooaccommodate your needs.</span></span> <span data-ttu-id="c0292-126">Za pomocą znakowania w szablonach, można udostępnić rozliczeń Podsumowanie różnych widokach, takich jak zespołu, projekt, osoby i education.</span><span class="sxs-lookup"><span data-stu-id="c0292-126">Using tagging within templates, you can provide a billing summary with various views such as team, project, individual, and education.</span></span>

<span data-ttu-id="c0292-127">Firm chce często, że rozwoju oprogramowania zespoły toocreate szablonu spójne wdrożenia rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="c0292-127">Businesses often want software development teams toocreate a template for consistent deployment of a solution.</span></span> <span data-ttu-id="c0292-128">Szablon Hello ułatwia ograniczenia niektórych elementów w tym środowisku pozostają z ustaloną i nie może zostać zastąpiona.</span><span class="sxs-lookup"><span data-stu-id="c0292-128">hello template facilitates constraints so certain items within that environment remain fixed and can't be overridden.</span></span> <span data-ttu-id="c0292-129">Na przykład bank mogą wymagać tooinclude szablonu RBAC programisty nie można poprawić rozwiązania banku toosend danych tooa magazynu osobistego konta.</span><span class="sxs-lookup"><span data-stu-id="c0292-129">For example, a bank might require a template tooinclude RBAC so a programmer can’t revise a banking solution toosend data tooa personal storage account.</span></span>

### <a name="corporate-it"></a><span data-ttu-id="c0292-130">Firmowej IT</span><span class="sxs-lookup"><span data-stu-id="c0292-130">Corporate IT</span></span>
<span data-ttu-id="c0292-131">Działy IT firmy zwykle korzystają z szablonów do dostarczania chmury możliwości pojemności i hostowanych w chmurze.</span><span class="sxs-lookup"><span data-stu-id="c0292-131">Corporate IT organizations typically use templates for delivering cloud capacity and cloud-hosted capabilities.</span></span>

#### <a name="cloud-capacity"></a><span data-ttu-id="c0292-132">Pojemność w chmurze</span><span class="sxs-lookup"><span data-stu-id="c0292-132">Cloud capacity</span></span>
<span data-ttu-id="c0292-133">Jest to często stosowana metoda firmowej IT grup tooprovide chmury pojemności dla zespołów "rozmiary obrazów na koszulki", które są standardowe oferty rozmiary, takich jak małych, średnich i dużych.</span><span class="sxs-lookup"><span data-stu-id="c0292-133">A common way for corporate IT groups tooprovide cloud capacity for teams is with "t-shirt sizes", which are standard offering sizes such as small, medium, and large.</span></span> <span data-ttu-id="c0292-134">Hello obrazów na koszulki o rozmiarze oferty można łączyć różnych typów zasobów i ilości, zapewniając poziom normalizacji, dzięki którym możliwe toouse szablony.</span><span class="sxs-lookup"><span data-stu-id="c0292-134">hello t-shirt sized offerings can mix different resource types and quantities while providing a level of standardization that makes it possible toouse templates.</span></span> <span data-ttu-id="c0292-135">Szablony Hello dostarczanie pojemności w spójny sposób, który wymusza zasady firmowe i używa znakowanie organizacji tooconsuming obciążenia zwrotnego tooprovide.</span><span class="sxs-lookup"><span data-stu-id="c0292-135">hello templates deliver capacity in a consistent way that enforces corporate policies and uses tagging tooprovide chargeback tooconsuming organizations.</span></span>

<span data-ttu-id="c0292-136">Na przykład może wymagać rozwoju tooprovide, testów lub środowisk produkcyjnych, w których hello zespoły rozwoju oprogramowania można wdrożyć ich rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="c0292-136">For example, you may need tooprovide development, test, or production environments within which hello software development teams can deploy their solutions.</span></span> <span data-ttu-id="c0292-137">środowisko Hello ma topologii sieci wstępnie zdefiniowane i elementy, które hello zespoły rozwoju oprogramowania nie można zmienić, takich jak zasady dostępu toohello publiczny internet i pakietów inspekcji.</span><span class="sxs-lookup"><span data-stu-id="c0292-137">hello environment has a predefined network topology and elements that hello software development teams cannot change, such as rules governing access toohello public internet and packet inspection.</span></span> <span data-ttu-id="c0292-138">Ponadto klientowi mogą przysługiwać role w danej organizacji dla tych środowisk z prawami dostępu unikatowych hello środowiska.</span><span class="sxs-lookup"><span data-stu-id="c0292-138">You may also have organization-specific roles for these environments with distinct access rights for hello environment.</span></span>

#### <a name="cloud-hosted-capabilities"></a><span data-ttu-id="c0292-139">Możliwości hostowanych w chmurze</span><span class="sxs-lookup"><span data-stu-id="c0292-139">Cloud-hosted capabilities</span></span>
<span data-ttu-id="c0292-140">Można użyć szablonów toosupport hostowanych w chmurze możliwości, takie jak pakiety oprogramowania lub złożone oferty, które są oferowane toointernal rodzajach działalności gospodarczej.</span><span class="sxs-lookup"><span data-stu-id="c0292-140">You can use templates toosupport cloud-hosted capabilities, including individual software packages or composite offerings that are offered toointernal lines of business.</span></span> <span data-ttu-id="c0292-141">Przykładem złożone oferty może być analytics jako usługa — analytics, wizualizacji i innych technologii — dostarczone w konfiguracji zoptymalizowane, połączonych w topologii sieci wstępnie zdefiniowane.</span><span class="sxs-lookup"><span data-stu-id="c0292-141">An example of a composite offering would be analytics-as-a-service—analytics, visualization, and other technologies—delivered in an optimized, connected configuration on a predefined network topology.</span></span>

<span data-ttu-id="c0292-142">Możliwości hostowanych w chmurze są zagrożone hello zabezpieczeń i zagadnienia dotyczące roli ustala pojemności chmury hello oferty, w którym są wbudowane.</span><span class="sxs-lookup"><span data-stu-id="c0292-142">Cloud-hosted capabilities are affected by hello security and role considerations established by hello cloud capacity offering on which they’re built.</span></span> <span data-ttu-id="c0292-143">Te możliwości są oferowane zmian lub jako zarządzanych usług.</span><span class="sxs-lookup"><span data-stu-id="c0292-143">These capabilities are offered as is or as a managed service.</span></span> <span data-ttu-id="c0292-144">Dla hello później, wymagane są role ograniczonego dostępu tooenable dostępu do środowiska hello do celów zarządzania.</span><span class="sxs-lookup"><span data-stu-id="c0292-144">For hello latter, access-constrained roles are required tooenable access into hello environment for management purposes.</span></span>

## <a name="cloud-service-vendors"></a><span data-ttu-id="c0292-145">Dostawców usługi w chmurze</span><span class="sxs-lookup"><span data-stu-id="c0292-145">Cloud service vendors</span></span>
<span data-ttu-id="c0292-146">Po rozmowie toomany woluminów CSV, określiliśmy, że wiele metod może zająć toodeploy usług dla klientów i skojarzone wymagania.</span><span class="sxs-lookup"><span data-stu-id="c0292-146">After talking toomany CSVs, we identified multiple approaches you can take toodeploy services for your customers and associated requirements.</span></span>

### <a name="csv-hosted-offering"></a><span data-ttu-id="c0292-147">Hostowana CSV oferty</span><span class="sxs-lookup"><span data-stu-id="c0292-147">CSV-hosted offering</span></span>
<span data-ttu-id="c0292-148">Jeśli w ramach własnej subskrypcji platformy Azure Twojej oferty, typowe są dwa podejścia hostingu: wdrażanie różnych wdrożenia dla każdego klienta lub wdrożeniu jednostek skalowania, które stanowi podstawę współużytkowanej infrastruktury używane dla wszystkich klientów.</span><span class="sxs-lookup"><span data-stu-id="c0292-148">If you host your offering in your own Azure subscription, two hosting approaches are common: deploying a distinct deployment for every customer or deploying scale units that underpin a shared infrastructure used for all customers.</span></span>

* <span data-ttu-id="c0292-149">**Różne wdrożenia dla każdego klienta.**</span><span class="sxs-lookup"><span data-stu-id="c0292-149">**Distinct deployments for each customer.**</span></span> <span data-ttu-id="c0292-150">Różne wdrożeń na klienta wymaga stałej topologie znanych konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="c0292-150">Distinct deployments per customer require fixed topologies of different known configurations.</span></span> <span data-ttu-id="c0292-151">Te wdrożenia może mieć rozmiary inną maszynę wirtualną (VM), różną liczbę węzłów i różnych ilości powiązanym magazynie.</span><span class="sxs-lookup"><span data-stu-id="c0292-151">These deployments may have different virtual machine (VM) sizes, varying numbers of nodes, and different amounts of associated storage.</span></span> <span data-ttu-id="c0292-152">Znakowanie wdrożeń służy do rozliczeń zbiorczy każdego klienta.</span><span class="sxs-lookup"><span data-stu-id="c0292-152">Tagging of deployments is used for roll-up billing of each customer.</span></span> <span data-ttu-id="c0292-153">RBAC może być włączone tooallow klientów dostępu tooaspects środowiska chmury.</span><span class="sxs-lookup"><span data-stu-id="c0292-153">RBAC may be enabled tooallow customers access tooaspects of their cloud environment.</span></span>
* <span data-ttu-id="c0292-154">**Jednostki skalowania w udostępnionych środowiskach wielodostępnych.**</span><span class="sxs-lookup"><span data-stu-id="c0292-154">**Scale units in shared multi-tenant environments.**</span></span> <span data-ttu-id="c0292-155">Szablon może reprezentować jednostki skalowania dla środowiska z wieloma dzierżawcami.</span><span class="sxs-lookup"><span data-stu-id="c0292-155">A template can represent a scale unit for multi-tenant environments.</span></span> <span data-ttu-id="c0292-156">W takim przypadku hello tej samej infrastruktury jest używane toosupport wszystkich klientów.</span><span class="sxs-lookup"><span data-stu-id="c0292-156">In this case, hello same infrastructure is used toosupport all customers.</span></span> <span data-ttu-id="c0292-157">wdrożenia Hello reprezentuje grupę zasobów dostarczających poziom pojemności dla hello hostowanej oferty, takie jak liczba użytkowników oraz liczbę transakcji.</span><span class="sxs-lookup"><span data-stu-id="c0292-157">hello deployments represent a group of resources that deliver a level of capacity for hello hosted offering, such as number of users and number of transactions.</span></span> <span data-ttu-id="c0292-158">Te jednostki skali są zwiększyć lub zmniejszyć, jak długo żądanie.</span><span class="sxs-lookup"><span data-stu-id="c0292-158">These scale units are increased or decreased as demand requires.</span></span>

### <a name="csv-offering-injected-into-customer-subscription"></a><span data-ttu-id="c0292-159">Oferta CSV do subskrypcji klienta</span><span class="sxs-lookup"><span data-stu-id="c0292-159">CSV offering injected into customer subscription</span></span>
<span data-ttu-id="c0292-160">Możesz toodeploy oprogramowanie do subskrypcji własnością klientów końcowych.</span><span class="sxs-lookup"><span data-stu-id="c0292-160">You may want toodeploy your software into subscriptions owned by end customers.</span></span> <span data-ttu-id="c0292-161">Można użyć szablonów toodeploy różnych wdrożeń do klienta konto platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="c0292-161">You can use templates toodeploy distinct deployments into a customer’s Azure account.</span></span>

<span data-ttu-id="c0292-162">Te wdrożenia użycie funkcji RBAC, aby można było zaktualizować i Zarządzanie wdrażaniem hello w ramach konta powitania klienta.</span><span class="sxs-lookup"><span data-stu-id="c0292-162">These deployments use RBAC so you can update and manage hello deployment within hello customer’s account.</span></span>

### <a name="azure-marketplace"></a><span data-ttu-id="c0292-163">Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="c0292-163">Azure Marketplace</span></span>
<span data-ttu-id="c0292-164">tooadvertise i sprzedawać Twojej oferty za pośrednictwem portalu marketplace, takich jak Azure Marketplace, można tworzyć szablony toodeliver różne typy wdrożenia, które są uruchamiane z konta Azure klienta.</span><span class="sxs-lookup"><span data-stu-id="c0292-164">tooadvertise and sell your offerings through a marketplace, such as Azure Marketplace, you can develop templates toodeliver distinct types of deployments that run in a customer’s Azure account.</span></span> <span data-ttu-id="c0292-165">Te wdrożenia distinct można przedstawić zwykle jako rozmiar koszulki (małe, średnie, duża), typ produktu/odbiorców (społeczności, developer i enterprise) lub typu funkcji (podstawowe o wysokiej dostępności).</span><span class="sxs-lookup"><span data-stu-id="c0292-165">These distinct deployments can be typically described as a t-shirt size (small, medium, large), product/audience type (community, developer, enterprise), or feature type (basic, high availability).</span></span>  <span data-ttu-id="c0292-166">W niektórych przypadkach te typy pozwalają toospecify niektóre atrybuty hello, takiego jak wdrożenie typu maszyny Wirtualnej lub liczbę dysków.</span><span class="sxs-lookup"><span data-stu-id="c0292-166">In some cases, these types allow you toospecify certain attributes of hello deployment, such as VM type or number of disks.</span></span>

## <a name="oss-projects"></a><span data-ttu-id="c0292-167">Projekty OSS</span><span class="sxs-lookup"><span data-stu-id="c0292-167">OSS projects</span></span>
<span data-ttu-id="c0292-168">W obrębie projektów typu open source szablonów usługi Resource Manager Włącz toodeploy społeczności rozwiązanie szybko przy użyciu sprawdzonych rozwiązań.</span><span class="sxs-lookup"><span data-stu-id="c0292-168">Within open source projects, Resource Manager templates enable a community toodeploy a solution quickly using proven practices.</span></span> <span data-ttu-id="c0292-169">Szablony można przechowywać w repozytorium GitHub, więc społeczności hello je skorygować w czasie.</span><span class="sxs-lookup"><span data-stu-id="c0292-169">You can store templates in a GitHub repository so hello community can revise them over time.</span></span> <span data-ttu-id="c0292-170">Użytkownicy wdrażania tych szablonów w ich własnej subskrypcji platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="c0292-170">Users deploy these templates in their own Azure subscriptions.</span></span>

<span data-ttu-id="c0292-171">Witaj poniższych sekcjach podano elementów hello potrzebnych tooconsider przed rozpoczęciem projektowania rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="c0292-171">hello following sections identify hello things you need tooconsider before designing your solution.</span></span>

## <a name="identifying-what-is-outside-and-inside-a-vm"></a><span data-ttu-id="c0292-172">Identyfikowanie, co to jest poza i wewnątrz maszyny Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="c0292-172">Identifying what is outside and inside a VM</span></span>
<span data-ttu-id="c0292-173">Podczas projektowania szablonu jest przydatne toolook na powitania wymagań w zakresie co to jest poza i wewnątrz hello maszynach wirtualnych (VM):</span><span class="sxs-lookup"><span data-stu-id="c0292-173">As you design your template, it’s helpful toolook at hello requirements in terms of what's outside and inside hello virtual machines (VMs):</span></span>

* <span data-ttu-id="c0292-174">Poza oznacza hello maszyn wirtualnych i innych zasobów wdrożenia, takich jak hello topologii sieci, znakowanie odwołania toohello certyfikaty/klucze tajne i kontroli dostępu opartej na rolach.</span><span class="sxs-lookup"><span data-stu-id="c0292-174">Outside means hello VMs and other resources of your deployment, such as hello network topology, tagging, references toohello certs/secrets, and role-based access control.</span></span> <span data-ttu-id="c0292-175">Te zasoby są częścią szablonu.</span><span class="sxs-lookup"><span data-stu-id="c0292-175">All these resources are part of your template.</span></span>
* <span data-ttu-id="c0292-176">Oznacza wewnątrz hello zainstalowanego oprogramowania i potrzeby ogólnego stanu konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="c0292-176">Inside means hello installed software and overall desired state configuration.</span></span> <span data-ttu-id="c0292-177">Inne mechanizmy, takie jak rozszerzeń maszyny Wirtualnej lub skrypty, są używane w całości lub częściowo.</span><span class="sxs-lookup"><span data-stu-id="c0292-177">Other mechanisms, such as VM extensions or scripts, are used in whole or in part.</span></span> <span data-ttu-id="c0292-178">Mechanizmy te mogą być zidentyfikowane i wykonywane przez szablon hello, ale nie są w nim.</span><span class="sxs-lookup"><span data-stu-id="c0292-178">These mechanisms may be identified and executed by hello template but aren’t in it.</span></span>

<span data-ttu-id="c0292-179">Typowe przykłady działań, które należy wykonać "wewnątrz pola hello" —</span><span class="sxs-lookup"><span data-stu-id="c0292-179">Common examples of activities you would do “inside hello box” include -</span></span>  

* <span data-ttu-id="c0292-180">Instalowanie lub usuwanie ról i funkcji serwera</span><span class="sxs-lookup"><span data-stu-id="c0292-180">Install or remove server roles and features</span></span>
* <span data-ttu-id="c0292-181">Instalowanie i konfigurowanie oprogramowania na poziomie hello węzła lub klastra</span><span class="sxs-lookup"><span data-stu-id="c0292-181">Install and configure software at hello node or cluster level</span></span>
* <span data-ttu-id="c0292-182">Wdrażanie witryn sieci Web na serwerze sieci web</span><span class="sxs-lookup"><span data-stu-id="c0292-182">Deploy websites on a web server</span></span>
* <span data-ttu-id="c0292-183">Wdrażanie schematów bazy danych</span><span class="sxs-lookup"><span data-stu-id="c0292-183">Deploy database schemas</span></span>
* <span data-ttu-id="c0292-184">Zarządzanie rejestru lub inne ustawienia konfiguracji</span><span class="sxs-lookup"><span data-stu-id="c0292-184">Manage registry or other types of configuration settings</span></span>
* <span data-ttu-id="c0292-185">Zarządzanie plikami i katalogami</span><span class="sxs-lookup"><span data-stu-id="c0292-185">Manage files and directories</span></span>
* <span data-ttu-id="c0292-186">Uruchamianie, zatrzymywanie i zarządzania procesami i usługami</span><span class="sxs-lookup"><span data-stu-id="c0292-186">Start, stop, and manage processes and services</span></span>
* <span data-ttu-id="c0292-187">Zarządzanie grupami lokalnymi i kont użytkowników</span><span class="sxs-lookup"><span data-stu-id="c0292-187">Manage local groups and user accounts</span></span>
* <span data-ttu-id="c0292-188">Zainstaluj pakiety i zarządzać nimi (.msi, .exe, yum itp.)</span><span class="sxs-lookup"><span data-stu-id="c0292-188">Install and manage packages (.msi, .exe, yum, etc.)</span></span>
* <span data-ttu-id="c0292-189">Zarządzanie zmienne środowiskowe</span><span class="sxs-lookup"><span data-stu-id="c0292-189">Manage environment variables</span></span>
* <span data-ttu-id="c0292-190">Uruchom skrypty natywnego (środowiska Windows PowerShell, bash, itp.)</span><span class="sxs-lookup"><span data-stu-id="c0292-190">Run native scripts (Windows PowerShell, bash, etc.)</span></span>

### <a name="desired-state-configuration-dsc"></a><span data-ttu-id="c0292-191">Konfiguracja żądanego stanu (DSC)</span><span class="sxs-lookup"><span data-stu-id="c0292-191">Desired state configuration (DSC)</span></span>
<span data-ttu-id="c0292-192">Planowanie hello wewnętrzny stan klasy poza wdrażania maszyn wirtualnych, ma toomake się, że to wdrożenie nie "rozchodzenia" z konfiguracji hello, który został zdefiniowany i zaznaczone do kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="c0292-192">Thinking about hello internal state of your VMs beyond deployment, you want toomake sure this deployment doesn’t "drift" from hello configuration that you have defined and checked into source control.</span></span> <span data-ttu-id="c0292-193">To podejście zapewnia deweloperów lub Operatorzy nie upewnij środowisko tooan zmian ad hoc, które nie są sprawdzane, przetestowane lub zarejestrowane w kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="c0292-193">This approach ensures your developers or operations staff don’t make ad-hoc changes tooan environment that are not vetted, tested, or recorded in source control.</span></span> <span data-ttu-id="c0292-194">Ten formant jest ważne, ponieważ hello ręcznej zmiany nie są w kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="c0292-194">This control is important, because hello manual changes are not in source control.</span></span> <span data-ttu-id="c0292-195">Również nie są częścią wdrożenia standardowego hello i będzie miało wpływ na przyszłe zautomatyzowanych wdrożeń oprogramowania hello.</span><span class="sxs-lookup"><span data-stu-id="c0292-195">They are also not part of hello standard deployment and will impact future automated deployments of hello software.</span></span>

<span data-ttu-id="c0292-196">Poza pracownikom wewnętrzny konfiguracji żądanego stanu są też ważne z punktu widzenia zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="c0292-196">Beyond your internal employees, desired state configuration is also important from a security perspective.</span></span> <span data-ttu-id="c0292-197">Przed hakerami regularnie próbujesz toocompromise i wykorzystać systemów oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="c0292-197">Hackers are regularly trying toocompromise and exploit software systems.</span></span> <span data-ttu-id="c0292-198">Zakończone powodzeniem jest wspólne pliki tooinstall, a w przeciwnym razie Zmień stan hello ze złamanymi zabezpieczeniami systemu.</span><span class="sxs-lookup"><span data-stu-id="c0292-198">When successful, it's common tooinstall files and otherwise change hello state of a compromised system.</span></span> <span data-ttu-id="c0292-199">Za pomocą konfiguracji żądanego stanu, można zidentyfikować delty między hello potrzeby i rzeczywisty stan i przywrócić znanej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="c0292-199">Using desired state configuration, you can identify deltas between hello desired and actual state and restore a known configuration.</span></span>

<span data-ttu-id="c0292-200">Brak rozszerzenia zasobu dla hello najpopularniejszych mechanizmy DSC - PowerShell DSC, Chef i Puppet.</span><span class="sxs-lookup"><span data-stu-id="c0292-200">There are resource extensions for hello most popular mechanisms for DSC - PowerShell DSC, Chef, and Puppet.</span></span> <span data-ttu-id="c0292-201">Każdy z tych rozszerzeń można wdrożyć hello początkowy stan maszyny Wirtualnej i być również używane toomake się, że hello potrzeby się, że stan jest przechowywany.</span><span class="sxs-lookup"><span data-stu-id="c0292-201">Each of these extensions can deploy hello initial state of your VM and also be used toomake sure hello desired state is maintained.</span></span>

## <a name="common-template-scopes"></a><span data-ttu-id="c0292-202">Typowe zakresy szablonu</span><span class="sxs-lookup"><span data-stu-id="c0292-202">Common template scopes</span></span>
<span data-ttu-id="c0292-203">W naszym środowisku możemy przedstawiono trzy zakresy szablony klucza rozwiązania wyłonić.</span><span class="sxs-lookup"><span data-stu-id="c0292-203">In our experience, we’ve seen three key solution templates scopes emerge.</span></span> <span data-ttu-id="c0292-204">Te trzy zakresy — wydajność, możliwości i end-to-end rozwiązania — są opisane w hello następujące sekcje.</span><span class="sxs-lookup"><span data-stu-id="c0292-204">These three scopes – capacity, capability, and end-to-end solution – are described in hello following sections.</span></span>

### <a name="capacity-scope"></a><span data-ttu-id="c0292-205">Zakres pojemności</span><span class="sxs-lookup"><span data-stu-id="c0292-205">Capacity scope</span></span>
<span data-ttu-id="c0292-206">Zakres pojemności oferuje zestaw zasobów w standardowej topologii, który jest wstępnie skonfigurowana toobe zgodność z przepisami i zasady.</span><span class="sxs-lookup"><span data-stu-id="c0292-206">A capacity scope delivers a set of resources in a standard topology that is pre-configured toobe in compliance with regulations and policies.</span></span> <span data-ttu-id="c0292-207">najbardziej typowym przykładem Hello jest wdrażana przez środowisko deweloperskie standardowe w scenariuszu informatycznego w firmie lub tożsamości usługi.</span><span class="sxs-lookup"><span data-stu-id="c0292-207">hello most common example is deploying a standard development environment in an Enterprise IT or SI scenario.</span></span>

### <a name="capability-scope"></a><span data-ttu-id="c0292-208">Zakres możliwości</span><span class="sxs-lookup"><span data-stu-id="c0292-208">Capability scope</span></span>
<span data-ttu-id="c0292-209">Zakres możliwości koncentruje się na wdrażanie i Konfigurowanie topologii dla danej technologii.</span><span class="sxs-lookup"><span data-stu-id="c0292-209">A capability scope is focused on deploying and configuring a topology for a given technology.</span></span> <span data-ttu-id="c0292-210">Typowe scenariusze, w tym technologii, takich jak SQL Server, Cassandra, Hadoop.</span><span class="sxs-lookup"><span data-stu-id="c0292-210">Common scenarios including technologies such as SQL Server, Cassandra, Hadoop.</span></span>

### <a name="end-to-end-solution-scope"></a><span data-ttu-id="c0292-211">Zakres end-to-end rozwiązania</span><span class="sxs-lookup"><span data-stu-id="c0292-211">End-to-end solution scope</span></span>
<span data-ttu-id="c0292-212">Zakresu rozwiązania End-to-End docelowe poza jednym możliwości, a zamiast tego koncentruje się na dostarczaniu tooend rozwiązanie obejmuje kilka możliwości.</span><span class="sxs-lookup"><span data-stu-id="c0292-212">An End-to-End Solution Scope is targeted beyond a single capability, and instead focused on delivering an end tooend solution comprised of multiple capabilities.</span></span>  

<span data-ttu-id="c0292-213">Zakres zakres rozwiązania szablonu manifesty jako zestaw co najmniej jeden zakres możliwości szablonów zasobów specyficznych dla rozwiązania, logiki i żądanego stanu.</span><span class="sxs-lookup"><span data-stu-id="c0292-213">A solution-scoped template scope manifests itself as a set of one or more capability-scoped templates with solution-specific resources, logic, and desired state.</span></span> <span data-ttu-id="c0292-214">Przykładem rozwiązania o zakresie szablonu jest szablon rozwiązania zakończenia tooend danych potoku.</span><span class="sxs-lookup"><span data-stu-id="c0292-214">An example of a solution-scoped template is an end tooend data pipeline solution template.</span></span> <span data-ttu-id="c0292-215">Szablon Hello może mieszać topologii określonego rozwiązania i stan z wielu szablonów zakres możliwości rozwiązania, takie jak Kafka, Storm i Hadoop.</span><span class="sxs-lookup"><span data-stu-id="c0292-215">hello template might mix solution-specific topology and state with multiple capability-scoped solution templates such as Kafka, Storm, and Hadoop.</span></span>

## <a name="choosing-free-form-vs-known-configurations"></a><span data-ttu-id="c0292-216">Wybranie dowolnego a znanych konfiguracji</span><span class="sxs-lookup"><span data-stu-id="c0292-216">Choosing free-form vs. known configurations</span></span>
<span data-ttu-id="c0292-217">Początkowo uważasz szablon powinien zapewnić konsumentów hello największą elastyczność, ale wiele kwestii wpłynąć na wybór hello, czy konfiguracje dowolnych toouse a znanych konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="c0292-217">You might initially think a template should give consumers hello utmost flexibility, but many considerations affect hello choice of whether toouse free-form configurations vs. known configurations.</span></span> <span data-ttu-id="c0292-218">W tej sekcji wymieniono wymagania klienta klucza hello i kwestii technicznych, które w kształcie podejście hello udostępnione w tym dokumencie.</span><span class="sxs-lookup"><span data-stu-id="c0292-218">This section identifies hello key customer requirements and technical considerations that shaped hello approach shared in this document.</span></span>

### <a name="free-form-configurations"></a><span data-ttu-id="c0292-219">Konfiguracje dowolnych</span><span class="sxs-lookup"><span data-stu-id="c0292-219">Free-form configurations</span></span>
<span data-ttu-id="c0292-220">Na powierzchni hello konfiguracje dowolnych dźwiękowej idealne.</span><span class="sxs-lookup"><span data-stu-id="c0292-220">On hello surface, free-form configurations sound ideal.</span></span> <span data-ttu-id="c0292-221">One pozwalają tooselect typu maszyny Wirtualnej i podaj dowolną liczbę węzłów i dołączone dyski dla tych węzłów — i zrobić jako parametry szablonu tooa.</span><span class="sxs-lookup"><span data-stu-id="c0292-221">They allow you tooselect a VM type and provide an arbitrary number of nodes and attached disks for those nodes — and do so as parameters tooa template.</span></span> <span data-ttu-id="c0292-222">Jednak ta metoda nie jest idealnym rozwiązaniem w niektórych scenariuszach.</span><span class="sxs-lookup"><span data-stu-id="c0292-222">However, this approach is not ideal for some scenarios.</span></span>

<span data-ttu-id="c0292-223">W [rozmiary maszyn wirtualnych](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)hello różnych typach maszyn wirtualnych i dostępne rozmiary są identyfikowane i dyski każdego hello liczby trwałe (2, 4, 8, 16 i 32), który może zostać dołączony.</span><span class="sxs-lookup"><span data-stu-id="c0292-223">In [Sizes for virtual machines](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), hello different VM types and available sizes are identified, and each of hello number of durable disks (2, 4, 8, 16, or 32) that can be attached.</span></span> <span data-ttu-id="c0292-224">Każdy dysk dołączony zapewnia 500 IOPS i wielu z tych dysków może puli dla mnożnik tej liczby IOPS.</span><span class="sxs-lookup"><span data-stu-id="c0292-224">Each attached disk provides 500 IOPS and multiples of these disks can be pooled for a multiplier of that number of IOPS.</span></span> <span data-ttu-id="c0292-225">Na przykład 16 dysków może być tooprovide puli 8000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="c0292-225">For example, 16 disks can be pooled tooprovide 8,000 IOPS.</span></span> <span data-ttu-id="c0292-226">Buforowanie wykonuje się za pomocą konfiguracji systemu operacyjnego hello, za pomocą funkcji miejsca do magazynowania systemu Windows firmy Microsoft lub macierzy tanich dysków (RAID) w systemie Linux.</span><span class="sxs-lookup"><span data-stu-id="c0292-226">Pooling is done with configuration in hello operating system, using Microsoft Windows Storage Spaces or redundant array of inexpensive disks (RAID) in Linux.</span></span>

<span data-ttu-id="c0292-227">Konfiguracja dowolnych umożliwia wybór hello kilka wystąpień maszyn wirtualnych, wirtualna różnych typów, a rozmiary w tych wystąpieniach różnych dyskach hello typu maszyny Wirtualnej, i co najmniej jeden skrypty tooconfigure hello wirtualna zawartości.</span><span class="sxs-lookup"><span data-stu-id="c0292-227">A free-form configuration enables hello selection several VM instances, various VM types and sizes for those instances, various disks for hello VM type, and one or more scripts tooconfigure hello VM contents.</span></span>

<span data-ttu-id="c0292-228">Bardzo często, że wdrożenie może mieć wiele typów węzłów, takich jak wzorzec i węzły danych, tego rodzaju elastyczności jest często podane dla każdego typu węzła.</span><span class="sxs-lookup"><span data-stu-id="c0292-228">It is common that a deployment may have multiple types of nodes, such as master and data nodes, so this flexibility is often provided for every node type.</span></span>

<span data-ttu-id="c0292-229">Po rozpoczęciu toodeploy klastry żadnego znaczenia rozpoczęciem toowork z tych scenariuszy złożonych.</span><span class="sxs-lookup"><span data-stu-id="c0292-229">As you start toodeploy clusters of any significance, you begin toowork with these complex scenarios.</span></span> <span data-ttu-id="c0292-230">Jeśli zostały wdrażanie klastra usługi Hadoop, na przykład z 8 węzłów głównych i węzłów 200 danych oraz puli 4 dołączonych dysków w każdym węźle głównym i puli 16 dysków dołączonych na węzeł danych, trzeba 208 maszyn wirtualnych i toomanage 3,232 dysków.</span><span class="sxs-lookup"><span data-stu-id="c0292-230">If you were deploying a Hadoop cluster, for example, with 8 master nodes and 200 data nodes, and pooled 4 attached disks on each master node and pooled 16 attached disks per data node, you would have 208 VMs and 3,232 disks toomanage.</span></span>

<span data-ttu-id="c0292-231">Konto magazynu będzie ograniczenie przepustowości żądań powyżej jego zidentyfikowanych 20 000 ograniczyć transakcje na sekundę, należy przyjrzeć się partycjonowanie konta magazynu i użyć obliczenia się, że toodetermine hello odpowiedniej liczby magazynu kont tooaccommodate tej topologii.</span><span class="sxs-lookup"><span data-stu-id="c0292-231">A storage account will throttle requests above its identified 20,000 transactions/second limit, so you should look at storage account partitioning and use calculations toodetermine hello appropriate number of storage accounts tooaccommodate this topology.</span></span> <span data-ttu-id="c0292-232">Podane wieloma hello kombinacji obsługiwane przez hello dowolnych podejście, obliczenia dynamiczne są wymagane toodetermine hello odpowiednie partycjonowania.</span><span class="sxs-lookup"><span data-stu-id="c0292-232">Given hello multitude of combinations supported by hello free-form approach, dynamic calculations are required toodetermine hello appropriate partitioning.</span></span> <span data-ttu-id="c0292-233">Witaj język szablonu usługi Azure Resource Manager nie zawiera obecnie funkcje matematyczne, należy wykonać te obliczenia w kodzie, generowania unikatowych, ustalony szablonu z hello odpowiednie informacje.</span><span class="sxs-lookup"><span data-stu-id="c0292-233">hello Azure Resource Manager Template Language does not presently provide mathematical functions, so you must perform these calculations in code, generating a unique, hard-coded template with hello appropriate details.</span></span>

<span data-ttu-id="c0292-234">W organizacji IT i scenariusze SI ktoś Obsługa szablonów hello i obsługuje topologie hello wdrożony co najmniej jeden organizacji.</span><span class="sxs-lookup"><span data-stu-id="c0292-234">In enterprise IT and SI scenarios, someone must maintain hello templates and support hello deployed topologies for one or more organizations.</span></span> <span data-ttu-id="c0292-235">To dodatkowe obciążenie — szablony dla każdego klienta i różnych konfiguracjach — równocześnie pożądane.</span><span class="sxs-lookup"><span data-stu-id="c0292-235">This additional overhead — different configurations and templates for each customer — is far from desirable.</span></span>

<span data-ttu-id="c0292-236">Możesz użyć tych środowisk toodeploy szablonów w subskrypcji Azure klienta, ale zespoły IT firmy i woluminy CSV zwykle wdrożyć je do ich własnych subskrypcji przy użyciu toobill funkcja obciążenia zwrotnego klientom.</span><span class="sxs-lookup"><span data-stu-id="c0292-236">You can use these templates toodeploy environments in your customer’s Azure subscription, but both corporate IT teams and CSVs typically deploy them into their own subscriptions, using a chargeback function toobill their customers.</span></span> <span data-ttu-id="c0292-237">W tych scenariuszach celem hello jest toodeploy pojemność dla wielu klientów w puli subskrypcji i Zachowaj wdrożeń gęsto umieszczane w hello subskrypcje toominimize subskrypcji przetwarzania — to znaczy więcej toomanage subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="c0292-237">In these scenarios, hello goal is toodeploy capacity for multiple customers across a pool of subscriptions and keep deployments densely populated into hello subscriptions toominimize subscription sprawl—that is, more subscriptions toomanage.</span></span> <span data-ttu-id="c0292-238">O rozmiarze naprawdę dynamiczne wdrożenia osiągnięcie tego typu gęstość wymaga zachować ostrożność podczas planowania i projektowania dodatkowe szkieletów pracy w imieniu organizacji hello.</span><span class="sxs-lookup"><span data-stu-id="c0292-238">With truly dynamic deployment sizes, achieving this type of density requires careful planning and additional development for scaffolding work on behalf of hello organization.</span></span>

<span data-ttu-id="c0292-239">Ponadto nie można utworzyć subskrypcji za pośrednictwem wywołania interfejsu API, ale należy to zrobić ręcznie za pośrednictwem portalu hello.</span><span class="sxs-lookup"><span data-stu-id="c0292-239">In addition, you can’t create subscriptions via an API call but must do so manually through hello portal.</span></span> <span data-ttu-id="c0292-240">Zwiększa liczbę hello subskrypcji, wszelkie wynikowy przetwarzania subskrypcji wymaga udziału człowieka — nie mogły zostać zautomatyzowane.</span><span class="sxs-lookup"><span data-stu-id="c0292-240">As hello number of subscriptions increases, any resulting subscription sprawl requires human intervention—it can’t be automated.</span></span> <span data-ttu-id="c0292-241">Z bardzo dużo zmienności rozmiary hello wdrożeń, należy udostępnić toopre liczbę subskrypcji ręcznie tooensure subskrypcje są dostępne.</span><span class="sxs-lookup"><span data-stu-id="c0292-241">With so much variability in hello sizes of deployments, you would have toopre-provision a number of subscriptions manually tooensure subscriptions are available.</span></span>

<span data-ttu-id="c0292-242">Biorąc pod uwagę następujące czynniki Konfiguracja naprawdę dowolnych jest mniej atrakcyjne niż co najpierw blush.</span><span class="sxs-lookup"><span data-stu-id="c0292-242">Considering all these factors, a truly free-form configuration is less appealing than at first blush.</span></span>

### <a name="known-configurations--hello-t-shirt-sizing-approach"></a><span data-ttu-id="c0292-243">Znane konfiguracje — Witaj podejście zmiany rozmiaru obrazów na koszulki</span><span class="sxs-lookup"><span data-stu-id="c0292-243">Known configurations — hello t-shirt sizing approach</span></span>
<span data-ttu-id="c0292-244">Nie oferują szablon, który zapewnia elastyczność całkowitej i niezliczonych zmian, wiemy z doświadczenia wspólnego wzorca jest raczej tooselect możliwości hello tooprovide znane konfiguracje — w efekcie rozmiary obrazów na standardowe koszulki takich jak piaskownicy, małych, średnich i dużych.</span><span class="sxs-lookup"><span data-stu-id="c0292-244">Rather than offer a template that provides total flexibility and countless variations, in our experience a common pattern is tooprovide hello ability tooselect known configurations — in effect, standard t-shirt sizes such as sandbox, small, medium, and large.</span></span> <span data-ttu-id="c0292-245">Inne przykłady rozmiary obrazów na koszulki są ofert produktów, takich jak community edition lub enterprise edition.</span><span class="sxs-lookup"><span data-stu-id="c0292-245">Other examples of t-shirt sizes are product offerings, such as community edition or enterprise edition.</span></span>  <span data-ttu-id="c0292-246">W innych przypadkach może być konfiguracje specyficznego dla obciążenia technologii — takie jak ograniczyć mapy lub nie sql.</span><span class="sxs-lookup"><span data-stu-id="c0292-246">In other cases, it may be workload-specific configurations of a technology – such as map reduce or no sql.</span></span>

<span data-ttu-id="c0292-247">Wiele organizacji IT organizacji, dostawców OSS i SIs udostępnianie ich ofert dzisiaj w ten sposób w lokalnej, zwirtualizowanych środowiskach (przedsiębiorstwa) lub oprogramowania jako usługa (SaaS) oferty (woluminy CSV i OSVs).</span><span class="sxs-lookup"><span data-stu-id="c0292-247">Many enterprise IT organizations, OSS vendors, and SIs make their offerings available today in this way in on-premises, virtualized environments (enterprises) or as software-as-a-service (SaaS) offerings (CSVs and OSVs).</span></span>

<span data-ttu-id="c0292-248">Takie podejście zapewnia dobre, znanej konfiguracji o różnych rozmiarach, które są wstępnie skonfigurowane dla klientów.</span><span class="sxs-lookup"><span data-stu-id="c0292-248">This approach provides good, known configurations of varying sizes that are preconfigured for customers.</span></span> <span data-ttu-id="c0292-249">Bez znanych konfiguracji klientów końcowych musi określić rozmiaru klastra na ich własnych, uwzględnieniu ograniczenia zasobów platformy i czy matematyczne tooidentify hello wynikowa partycjonowanie konta magazynu i innych zasobów (z powodu rozmiaru toocluster i zasobów ograniczenia).</span><span class="sxs-lookup"><span data-stu-id="c0292-249">Without known configurations, end customers must determine cluster sizing on their own, factor in platform resource constraints, and do math tooidentify hello resulting partitioning of storage accounts and other resources (due toocluster size and resource constraints).</span></span> <span data-ttu-id="c0292-250">Znane konfiguracje włączyć klientów tooeasily hello wybierz prawa Rozmiar koszulki — to znaczy danego wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="c0292-250">Known configurations enable customers tooeasily select hello right t-shirt size—that is, a given deployment.</span></span> <span data-ttu-id="c0292-251">Ponadto toomaking lepsze środowisko dla powitania klienta niewielkiej liczby znanych konfiguracji jest łatwiejsze toosupport i ułatwiają dostarczanie wyższego poziomu gęstości.</span><span class="sxs-lookup"><span data-stu-id="c0292-251">In addition toomaking a better experience for hello customer, a small number of known configurations is easier toosupport and can help you deliver a higher level of density.</span></span>

<span data-ttu-id="c0292-252">To podejście znanej konfiguracji koncentruje się na rozmiary obrazów na koszulki mogą także mieć różną liczbę węzłów w rozmiarze.</span><span class="sxs-lookup"><span data-stu-id="c0292-252">A known configuration approach focused on t-shirt sizes may also have varying number of nodes within a size.</span></span> <span data-ttu-id="c0292-253">Na przykład mały rozmiar koszulki może być między węzłami 3 do 10.</span><span class="sxs-lookup"><span data-stu-id="c0292-253">For example, a small t-shirt size may be between 3 and 10 nodes.</span></span>  <span data-ttu-id="c0292-254">Rozmiar koszulki Hello może być zaprojektowana tooaccommodate zapasowych too10 węzłów i podaj hello konsumenta hello możliwości toomake dowolnej postaci opcje toohello rozmiar maksymalny zidentyfikowane.</span><span class="sxs-lookup"><span data-stu-id="c0292-254">hello t-shirt size would be designed tooaccommodate up too10 nodes and provide hello consumer hello ability toomake free form selections up toohello maximum size identified.</span></span>  

<span data-ttu-id="c0292-255">Rozmiar koszulki, na podstawie typu obciążenie może być więcej dowolnej postaci charakteru pod względem hello liczba węzłów, które można wdrożyć, ale mają rozmiar węzła różne obciążenia i konfiguracji oprogramowania hello na powitania węzła.</span><span class="sxs-lookup"><span data-stu-id="c0292-255">A t-shirt size based on workload type, may be more free form in nature in terms of hello number of nodes that can be deployed but will have workload distinct node size and configuration of hello software on hello node.</span></span>

<span data-ttu-id="c0292-256">Rozmiary obrazów na koszulki oparte na ofert produktów, takich jak społeczność lub przedsiębiorstwa, może mieć typów różnych zasobów i maksymalną liczbę węzłów, które można wdrożyć, zwykle powiązane zagadnienia toolicensing lub dostępność funkcji w różnych ofert hello.</span><span class="sxs-lookup"><span data-stu-id="c0292-256">T-shirt sizes based on product offerings, such as community or Enterprise, may have distinct resource types and maximum number of nodes that can be deployed, typically tied toolicensing considerations or feature availability across hello different offerings.</span></span>

<span data-ttu-id="c0292-257">Można również zapewnić klientom z unikatowy wariantów za pomocą szablonów opartych na formacie JSON hello.</span><span class="sxs-lookup"><span data-stu-id="c0292-257">You can also accommodate customers with unique variants using hello JSON-based templates.</span></span> <span data-ttu-id="c0292-258">Podczas pracy nad wartości odstających, możesz dołączyć do nich hello odpowiednie planowania i zagadnienia dotyczące projektowania, pomocy technicznej i analiza kosztów.</span><span class="sxs-lookup"><span data-stu-id="c0292-258">When dealing with outliers, you can incorporate hello appropriate planning and considerations for development, support, and costing.</span></span>

<span data-ttu-id="c0292-259">Na podstawie zużycia hello scenariuszy szablonu i wymagania określone na początku hello tego dokumentu, określiliśmy, że wzorzec do rozkładu szablonu.</span><span class="sxs-lookup"><span data-stu-id="c0292-259">Based on hello customer template consumption scenarios, and requirements identified at hello start of this document, we identified a pattern for template decomposition.</span></span>

## <a name="capacity-and-capability-scoped-solution-templates"></a><span data-ttu-id="c0292-260">Pojemność i szablony zakres możliwości rozwiązania</span><span class="sxs-lookup"><span data-stu-id="c0292-260">Capacity and capability-scoped solution templates</span></span>
<span data-ttu-id="c0292-261">Rozkład zapewnia projektowania tootemplate podejściu, które obsługuje ponowne użycie, rozszerzalności, testowania i narzędzi.</span><span class="sxs-lookup"><span data-stu-id="c0292-261">Decomposition provides a modular approach tootemplate development that supports reuse, extensibility, testing, and tooling.</span></span> <span data-ttu-id="c0292-262">Ta sekcja zawiera szczegóły na jak podejście dekompozycji może być zastosowane tootemplates z zakresem możliwości.</span><span class="sxs-lookup"><span data-stu-id="c0292-262">This section provides detail on how a decomposition approach can be applied tootemplates with a Capacity or Capability scope.</span></span>

<span data-ttu-id="c0292-263">W tej metody szablonu głównego odbiera wartości parametrów od konsumenta szablonu, a następnie łączy tooseveral typów szablonów i skryptów poniżej, jak pokazano poniżej.</span><span class="sxs-lookup"><span data-stu-id="c0292-263">In this approach, a main template receives parameter values from a template consumer, then links tooseveral types of templates and scripts downstream as shown below.</span></span> <span data-ttu-id="c0292-264">Parametry, zmienne statyczne i wygenerowanego zmienne są używane tooprovide wartości i szablonów hello połączone.</span><span class="sxs-lookup"><span data-stu-id="c0292-264">Parameters, static variables, and generated variables are used tooprovide values in and out of hello linked templates.</span></span>

![Parametry szablonu](./media/best-practices-resource-manager-design-templates/template-parameters.png)

<span data-ttu-id="c0292-266">**Parametry są przekazywane tooa szablonie głównym, a następnie toolinked szablonów**</span><span class="sxs-lookup"><span data-stu-id="c0292-266">**Parameters are passed tooa main template then toolinked templates**</span></span>

<span data-ttu-id="c0292-267">następujące sekcje fokus na powitania typów szablonów i skrypty, które jednego szablonu jest rozłożone na powitania.</span><span class="sxs-lookup"><span data-stu-id="c0292-267">hello following sections focus on hello types of templates and scripts that a single template is decomposed into.</span></span> <span data-ttu-id="c0292-268">sekcje Hello przedstawia podejścia do przekazywania informacji o stanie między hello szablonów.</span><span class="sxs-lookup"><span data-stu-id="c0292-268">hello sections present approaches for passing state information among hello templates.</span></span> <span data-ttu-id="c0292-269">Opisano każdego szablonu i hello typy skryptu w obrazie hello wraz z przykładami.</span><span class="sxs-lookup"><span data-stu-id="c0292-269">Each template and hello script types in hello image are described along with examples.</span></span> <span data-ttu-id="c0292-270">Na przykład kontekstowe, zobacz "umieścić go razem: Przykładowe zastosowanie" dalszej części tego dokumentu.</span><span class="sxs-lookup"><span data-stu-id="c0292-270">For a contextual example, see "Putting it together: a sample implementation" later in this document.</span></span>

### <a name="template-metadata"></a><span data-ttu-id="c0292-271">Metadane szablonu</span><span class="sxs-lookup"><span data-stu-id="c0292-271">Template metadata</span></span>
<span data-ttu-id="c0292-272">Metadane szablonu (plik metadata.json hello) zawiera opis szablonu w formacie JSON, który może zostać odczytany przez ludzi i systemów oprogramowania par klucz/wartość.</span><span class="sxs-lookup"><span data-stu-id="c0292-272">Template metadata (hello metadata.json file) contains key/value pairs that describe a template in JSON, which can be read by humans and software systems.</span></span>

![Metadane szablonu](./media/best-practices-resource-manager-design-templates/template-metadata.png)

<span data-ttu-id="c0292-274">**Metadane szablonu jest opisany w pliku metadata.json hello**</span><span class="sxs-lookup"><span data-stu-id="c0292-274">**Template metadata is described in hello metadata.json file**</span></span>

<span data-ttu-id="c0292-275">Agenci oprogramowanie można pobrać pliku metadata.json hello i publikowania informacji hello i szablon toohello link w katalogu lub strony sieci web.</span><span class="sxs-lookup"><span data-stu-id="c0292-275">Software agents can retrieve hello metadata.json file and publish hello information and a link toohello template in a web page or directory.</span></span> <span data-ttu-id="c0292-276">Elementy obejmują *itemDisplayName*, *opis*, *podsumowania*, *githubUsername*, i *dateUpdated*.</span><span class="sxs-lookup"><span data-stu-id="c0292-276">Elements include *itemDisplayName*, *description*, *summary*, *githubUsername*, and *dateUpdated*.</span></span>

<span data-ttu-id="c0292-277">Poniżej przedstawiono przykładowy plik w całości.</span><span class="sxs-lookup"><span data-stu-id="c0292-277">An example file is shown below in its entirety.</span></span>

    {
        "itemDisplayName": "PostgreSQL 9.3 on Ubuntu VMs",
        "description": "This template creates a PostgreSQL streaming-replication between a master and one or more slave servers each with 2 striped data disks. hello database servers are deployed into a private-only subnet with one publicly accessible jumpbox VM in a DMZ subnet with public IP.",
        "summary": "PostgreSQL stream-replication with multiple slave servers and a publicly accessible jumpbox VM",
        "githubUsername": "arsenvlad",
        "dateUpdated": "2015-04-24"
    }

### <a name="main-template"></a><span data-ttu-id="c0292-278">Główny szablonu</span><span class="sxs-lookup"><span data-stu-id="c0292-278">Main template</span></span>
<span data-ttu-id="c0292-279">Szablon głównego Hello odbiera parametrów z użytkownikiem, korzysta z tej informacji toopopulate obiekt złożony zmienne i wykonuje szablony hello połączone.</span><span class="sxs-lookup"><span data-stu-id="c0292-279">hello main template receives parameters from a user, uses that information toopopulate complex object variables, and executes hello linked templates.</span></span>

![Główny szablonu](./media/best-practices-resource-manager-design-templates/main-template.png)

<span data-ttu-id="c0292-281">**szablonu głównego Hello odbiera parametrów z użytkownikiem**</span><span class="sxs-lookup"><span data-stu-id="c0292-281">**hello main template receives parameters from a user**</span></span>

<span data-ttu-id="c0292-282">Jeden parametr, który został dostarczony jest typem znanej konfiguracji znanej także jako hello parametr rozmiaru obrazów na koszulki ze względu na jego wartości standardowych, takich jak małych, średnich i dużych.</span><span class="sxs-lookup"><span data-stu-id="c0292-282">One parameter that is provided is a known configuration type also known as hello t-shirt size parameter because of its standardized values such as small, medium, or large.</span></span> <span data-ttu-id="c0292-283">W praktyce można użyć tego parametru na wiele sposobów.</span><span class="sxs-lookup"><span data-stu-id="c0292-283">In practice, you can use this parameter in multiple ways.</span></span> <span data-ttu-id="c0292-284">Aby uzyskać więcej informacji zobacz temat "Znanej konfiguracji zasobów szablonu" w dalszej części tego dokumentu.</span><span class="sxs-lookup"><span data-stu-id="c0292-284">For details, see "Known configuration resources template" later in this document.</span></span>

<span data-ttu-id="c0292-285">Niektóre zasoby są wdrażane niezależnie od tego, znanej konfiguracji hello określonej przez parametr użytkownika.</span><span class="sxs-lookup"><span data-stu-id="c0292-285">Some resources are deployed regardless of hello known configuration specified by a user parameter.</span></span> <span data-ttu-id="c0292-286">Te zasoby są udostępniane za pomocą szablonu pojedynczego zasobu udostępnionego i są współużytkowane przez innych szablonów, więc hello udostępnianego zasobu szablon jest uruchamiany pierwszy.</span><span class="sxs-lookup"><span data-stu-id="c0292-286">These resources are provisioned using a single shared resource template and are shared by other templates, so hello shared resource template is run first.</span></span>

<span data-ttu-id="c0292-287">Niektóre zasoby są wdrażane opcjonalnie niezależnie od określonej konfiguracji znanych hello.</span><span class="sxs-lookup"><span data-stu-id="c0292-287">Some resources are deployed optionally regardless of hello specified known configuration.</span></span>

### <a name="shared-resources-template"></a><span data-ttu-id="c0292-288">Udostępnione zasoby szablonu</span><span class="sxs-lookup"><span data-stu-id="c0292-288">Shared resources template</span></span>
<span data-ttu-id="c0292-289">Ten szablon udostępnia zasoby, które są wspólne dla wszystkich znanych konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="c0292-289">This template delivers resources that are common across all known configurations.</span></span> <span data-ttu-id="c0292-290">Zawiera sieć wirtualną hello, zestawów dostępności i inne zasoby, które są wymagane niezależnie od hello znanej konfiguracji szablonu, które zostało wdrożone.</span><span class="sxs-lookup"><span data-stu-id="c0292-290">It contains hello virtual network, availability sets, and other resources that are required regardless of hello known configuration template that is deployed.</span></span>

![Zasobów szablonu](./media/best-practices-resource-manager-design-templates/template-resources.png)

<span data-ttu-id="c0292-292">**Udostępnione zasoby szablonu**</span><span class="sxs-lookup"><span data-stu-id="c0292-292">**Shared resources template**</span></span>

<span data-ttu-id="c0292-293">Nazwy zasobów, takie jak nazwa sieci wirtualnej hello, na podstawie hello głównym szablonu.</span><span class="sxs-lookup"><span data-stu-id="c0292-293">Resource names, such as hello virtual network name, are based on hello main template.</span></span> <span data-ttu-id="c0292-294">Można określić je jako zmienną w obrębie tego szablonu lub ich odbierania jako parametr użytkownika hello, zgodnie z wymaganiami organizacji.</span><span class="sxs-lookup"><span data-stu-id="c0292-294">You can specify them as a variable within that template or receive them as a parameter from hello user, as required by your organization.</span></span>

### <a name="optional-resources-template"></a><span data-ttu-id="c0292-295">Opcjonalne zasoby szablonu</span><span class="sxs-lookup"><span data-stu-id="c0292-295">Optional resources template</span></span>
<span data-ttu-id="c0292-296">Hello szablon opcjonalnych zasobów zawiera zasoby programowe wdrażane na podstawie wartości hello parametr lub zmienna.</span><span class="sxs-lookup"><span data-stu-id="c0292-296">hello optional resources template contains resources that are programmatically deployed based on hello value of a parameter or variable.</span></span>

![Opcjonalne zasoby](./media/best-practices-resource-manager-design-templates/optional-resources.png)

<span data-ttu-id="c0292-298">**Opcjonalne zasoby szablonu**</span><span class="sxs-lookup"><span data-stu-id="c0292-298">**Optional resources template**</span></span>

<span data-ttu-id="c0292-299">Na przykład można użyć opcjonalnych zasobów szablonu tooconfigure jumpbox, który umożliwia bezpośredni dostęp tooa wdrożyć środowisko z hello publicznej sieci Internet.</span><span class="sxs-lookup"><span data-stu-id="c0292-299">For example, you can use an optional resources template tooconfigure a jumpbox that enables indirect access tooa deployed environment from hello public Internet.</span></span> <span data-ttu-id="c0292-300">Czy powinno być włączone hello jumpbox użyje tooidentify parametr lub zmienna i hello *concat* funkcji takich jak nazwa docelowej hello toobuild dla szablonu hello *jumpbox_enabled.json*.</span><span class="sxs-lookup"><span data-stu-id="c0292-300">You would use a parameter or variable tooidentify whether hello jumpbox should be enabled and hello *concat* function toobuild hello target name for hello template, such as *jumpbox_enabled.json*.</span></span> <span data-ttu-id="c0292-301">Łączenie szablonu użyje hello wynikowy jumpbox hello tooinstall zmiennej.</span><span class="sxs-lookup"><span data-stu-id="c0292-301">Template linking would use hello resulting variable tooinstall hello jumpbox.</span></span>

<span data-ttu-id="c0292-302">Możesz połączyć hello opcjonalnych zasobów szablonu w wielu miejscach:</span><span class="sxs-lookup"><span data-stu-id="c0292-302">You can link hello optional resources template from multiple places:</span></span>

* <span data-ttu-id="c0292-303">Podczas wdrażania odpowiednich tooevery połączyć oparte na parametr szablonu zasobów udostępnionych hello.</span><span class="sxs-lookup"><span data-stu-id="c0292-303">When applicable tooevery deployment, create a parameter-driven link from hello shared resources template.</span></span>
* <span data-ttu-id="c0292-304">Gdy dotyczy tooselect znane konfiguracje — na przykład zainstalować tylko w dużych wdrożeniach — połączyć oparte na parametr lub zmienna driven hello znanej konfiguracji szablonu.</span><span class="sxs-lookup"><span data-stu-id="c0292-304">When applicable tooselect known configurations—for example, only install on large deployments—create a parameter-driven or variable-driven link from hello known configuration template.</span></span>

<span data-ttu-id="c0292-305">Określa, czy dany zasób jest opcjonalny mogą nie kierować hello szablon konsumenta tylko przez dostawcę szablonu hello.</span><span class="sxs-lookup"><span data-stu-id="c0292-305">Whether a given resource is optional may not be driven by hello template consumer but instead by hello template provider.</span></span> <span data-ttu-id="c0292-306">Na przykład może wymagać toosatisfy wymagania danego produktu lub dodatek produktu (wspólne dla woluminów CSV) lub zasad tooenforce (w przypadku SIs i rozwiązaniami INFORMATYCZNYMI dla firm grupy).</span><span class="sxs-lookup"><span data-stu-id="c0292-306">For example, you may need toosatisfy a particular product requirement or product add-on (common for CSVs) or tooenforce policies (common for SIs and enterprise IT groups).</span></span> <span data-ttu-id="c0292-307">W takich przypadkach można użyć zmiennej tooidentify czy hello zasobu powinny zostać wdrożone.</span><span class="sxs-lookup"><span data-stu-id="c0292-307">In these cases, you can use a variable tooidentify whether hello resource should be deployed.</span></span>

### <a name="known-configuration-resources-template"></a><span data-ttu-id="c0292-308">Szablon zasobów znanej konfiguracji</span><span class="sxs-lookup"><span data-stu-id="c0292-308">Known configuration resources template</span></span>
<span data-ttu-id="c0292-309">W szablonie głównym hello parametr może być uwidocznione tooallow hello szablon konsumenta toospecify toodeploy wymaganą konfiguracją znane.</span><span class="sxs-lookup"><span data-stu-id="c0292-309">In hello main template, a parameter can be exposed tooallow hello template consumer toospecify a desired known configuration toodeploy.</span></span> <span data-ttu-id="c0292-310">Często ta konfiguracja znane korzysta z podejścia rozmiar obrazów na koszulki z zestawem rozmiary stałym konfiguracji, takie jak piaskownicy, małe, średnie i duże.</span><span class="sxs-lookup"><span data-stu-id="c0292-310">Often, this known configuration uses a t-shirt size approach with a set of fixed configuration sizes such as sandbox, small, medium, and large.</span></span>

![Zasoby znanej konfiguracji](./media/best-practices-resource-manager-design-templates/known-config.png)

<span data-ttu-id="c0292-312">**Szablon zasobów znanej konfiguracji**</span><span class="sxs-lookup"><span data-stu-id="c0292-312">**Known configuration resources template**</span></span>

<span data-ttu-id="c0292-313">podejście rozmiar obrazów na koszulki Hello jest najczęściej używany, ale parametry hello może reprezentować dowolny zbiór znanych konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="c0292-313">hello t-shirt size approach is commonly used, but hello parameters can represent any set of known configurations.</span></span> <span data-ttu-id="c0292-314">Na przykład można określić zestaw środowisk dla aplikacji przedsiębiorstwa, takich jak projektowanie, testów i produktu.</span><span class="sxs-lookup"><span data-stu-id="c0292-314">For example, you can specify a set of environments for an enterprise application such as Development, Test, and Product.</span></span> <span data-ttu-id="c0292-315">Można też użyć dla toorepresent usługi chmury różnych skalowania jednostki, wersje produktu lub konfiguracje produktu, takie jak społeczności deweloperów i Enterprise.</span><span class="sxs-lookup"><span data-stu-id="c0292-315">Or you could use it for a cloud service toorepresent different scale units, product versions, or product configurations such as Community, Developer, or Enterprise.</span></span>

<span data-ttu-id="c0292-316">Podobnie jak w przypadku hello udostępnianego zasobu szablon, zmiennych są przekazywane toohello znanych konfiguracji szablonu z poziomu:</span><span class="sxs-lookup"><span data-stu-id="c0292-316">As with hello shared resource template, variables are passed toohello known configurations template from either:</span></span>

* <span data-ttu-id="c0292-317">Użytkownik końcowy — czyli parametry hello wysyłane toohello głównym szablonu.</span><span class="sxs-lookup"><span data-stu-id="c0292-317">An end user—that is, hello parameters sent toohello main template.</span></span>
* <span data-ttu-id="c0292-318">Organizacja — to znaczy hello zmienne w szablonie głównym hello, które reprezentują wymagań wewnętrznych lub zasad.</span><span class="sxs-lookup"><span data-stu-id="c0292-318">An organization—that is, hello variables in hello main template that represent internal requirements or policies.</span></span>

### <a name="member-resources-template"></a><span data-ttu-id="c0292-319">Szablon elementu członkowskiego zasobów</span><span class="sxs-lookup"><span data-stu-id="c0292-319">Member resources template</span></span>
<span data-ttu-id="c0292-320">W znanej konfiguracji co najmniej jednego elementu członkowskiego typu węzła często są dołączone.</span><span class="sxs-lookup"><span data-stu-id="c0292-320">Within a known configuration, one or more member node types are often included.</span></span> <span data-ttu-id="c0292-321">Na przykład z platformą Hadoop masz węzłów głównych i węzły danych.</span><span class="sxs-lookup"><span data-stu-id="c0292-321">For example, with Hadoop you have master nodes and data nodes.</span></span> <span data-ttu-id="c0292-322">Jeśli instalujesz bazy danych MongoDB ma węzły danych i kryterium.</span><span class="sxs-lookup"><span data-stu-id="c0292-322">If you are installing MongoDB, you have data nodes and an arbiter.</span></span> <span data-ttu-id="c0292-323">Jeśli wdrażasz DataStax masz węzły danych i maszyny Wirtualnej z OpsCenter zainstalowane.</span><span class="sxs-lookup"><span data-stu-id="c0292-323">If you are deploying DataStax, you have data nodes and a VM with OpsCenter installed.</span></span>

![Elementy członkowskie zasobów](./media/best-practices-resource-manager-design-templates/member-resources.png)

<span data-ttu-id="c0292-325">**Szablon elementu członkowskiego zasobów**</span><span class="sxs-lookup"><span data-stu-id="c0292-325">**Member resources template**</span></span>

<span data-ttu-id="c0292-326">Poszczególne typy węzłów można mają różne rozmiary maszyn wirtualnych, liczba dołączonych dysków, tooinstall skryptów i skonfiguruj hello węzłów, konfiguracji portów dla hello maszyn wirtualnych, liczba wystąpień i inne szczegóły.</span><span class="sxs-lookup"><span data-stu-id="c0292-326">Each type of nodes can have different sizes of VMs, numbers of attached disks, scripts tooinstall and set up hello nodes, port configurations for hello VMs, number of instances, and other details.</span></span> <span data-ttu-id="c0292-327">Tak każdy typ węzła pobiera własnego szablonu zasobów elementu członkowskiego, który zawiera hello szczegółów wdrażanie i konfigurowanie infrastruktury, a także wykonywanie skryptów toodeploy i konfigurowanie oprogramowania w ramach hello maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="c0292-327">So each node type gets its own member resource template, which contains hello details for deploying and configuring an infrastructure as well as executing scripts toodeploy and configure software within hello VM.</span></span>

<span data-ttu-id="c0292-328">Dla maszyn wirtualnych zazwyczaj dwa typy skryptów są używane, powszechnie wielokrotnego użytku i niestandardowych skryptów.</span><span class="sxs-lookup"><span data-stu-id="c0292-328">For VMs, typically two types of scripts are used, widely reusable and custom scripts.</span></span>

### <a name="widely-reusable-scripts"></a><span data-ttu-id="c0292-329">Skrypty powszechnie wielokrotnego użytku</span><span class="sxs-lookup"><span data-stu-id="c0292-329">Widely reusable scripts</span></span>
<span data-ttu-id="c0292-330">Można używać skryptów powszechnie wielokrotnego użytku przez wiele typów szablonów.</span><span class="sxs-lookup"><span data-stu-id="c0292-330">Widely reusable scripts can be used across multiple types of templates.</span></span> <span data-ttu-id="c0292-331">Jedna z hello lepsze Przykłady te skrypty powszechnie wielokrotnego użytku konfiguruje RAID na dyskach toopool systemu Linux i uzyskać większą liczbę IOPS.</span><span class="sxs-lookup"><span data-stu-id="c0292-331">One of hello better examples of these widely reusable scripts sets up RAID on Linux toopool disks and gain a greater number of IOPS.</span></span> <span data-ttu-id="c0292-332">Niezależnie od oprogramowania hello instalowane w hello maszyny Wirtualnej skrypt umożliwia ponowne użycie sprawdzonych rozwiązań dla typowych scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="c0292-332">Regardless of hello software being installed in hello VM, this script provides reuse of proven practices for common scenarios.</span></span>

![Skryptów wielokrotnego użytku](./media/best-practices-resource-manager-design-templates/reusable-scripts.png)

<span data-ttu-id="c0292-334">**Szablony zasobów Członkowskich można wywołać skryptów powszechnie wielokrotnego użytku**</span><span class="sxs-lookup"><span data-stu-id="c0292-334">**Member resources templates can call widely reusable scripts**</span></span>

### <a name="custom-scripts"></a><span data-ttu-id="c0292-335">Niestandardowych skryptów</span><span class="sxs-lookup"><span data-stu-id="c0292-335">Custom scripts</span></span>
<span data-ttu-id="c0292-336">Szablony zwykle wywołać co najmniej jeden skrypty, które Instalowanie i konfigurowanie oprogramowania w maszynach wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="c0292-336">Templates commonly call one or more scripts that install and configure software within VMs.</span></span> <span data-ttu-id="c0292-337">Wspólnego wzorca jest widoczna w dużych topologiach wdrożonym wielu wystąpień co najmniej jeden typ elementu członkowskiego.</span><span class="sxs-lookup"><span data-stu-id="c0292-337">A common pattern is seen with large topologies where multiple instances of one or more member types are deployed.</span></span> <span data-ttu-id="c0292-338">Skrypt instalacji jest inicjowane dla każdej maszyny Wirtualnej, które mogą być wykonywane równolegle, następuje skrypt instalacji, który jest wywoływana po wdrożeniu wszystkich maszyn wirtualnych (lub wszystkich maszyn wirtualnych typu danego elementu członkowskiego).</span><span class="sxs-lookup"><span data-stu-id="c0292-338">An installation script is initiated for every VM that can be run in parallel, followed by a setup script that is called after all VMs (or all VMs of a given member type) are deployed.</span></span>

![Niestandardowych skryptów](./media/best-practices-resource-manager-design-templates/custom-scripts.png)

<span data-ttu-id="c0292-340">**Szablony zasobów Członkowskich można wywołać skryptów do określonego celu, takie jak konfiguracja maszyny Wirtualnej**</span><span class="sxs-lookup"><span data-stu-id="c0292-340">**Member resources templates can call scripts for a specific purpose such as VM configuration**</span></span>

## <a name="capability-scoped-solution-template-example---redis"></a><span data-ttu-id="c0292-341">Przykład szablonu zakres możliwości rozwiązania — Redis</span><span class="sxs-lookup"><span data-stu-id="c0292-341">Capability-scoped solution template example - Redis</span></span>
<span data-ttu-id="c0292-342">tooshow jak implementacja może działać, Przyjrzyjmy się praktycznym przykładem tworzenia szablonu, który ułatwia wdrażanie hello i konfigurację pamięci podręcznej Redis w standardowe rozmiary obrazów na koszulki.</span><span class="sxs-lookup"><span data-stu-id="c0292-342">tooshow how an implementation might work, let's look at a practical example of building a template that facilitates hello deployment and configuration of Redis in standard t-shirt sizes.</span></span>  

<span data-ttu-id="c0292-343">W przypadku wdrożenia hello istnieje zestaw zasobów udostępnionych (sieci wirtualne, konta magazynu, zestawów dostępności) i opcjonalnie zasobów (jumpbox).</span><span class="sxs-lookup"><span data-stu-id="c0292-343">For hello deployment, there are a set of shared resources (virtual network, storage account, availability sets) and an optional resource (jumpbox).</span></span> <span data-ttu-id="c0292-344">Istnieją znane konfiguracji z wieloma reprezentowane jako rozmiary obrazów na koszulki (małe, średnie, duża), ale każdego z jednego węzła typu.</span><span class="sxs-lookup"><span data-stu-id="c0292-344">There are multiple known configurations represented as t-shirt sizes (small, medium, large) but each with a single node type.</span></span> <span data-ttu-id="c0292-345">Istnieją również dwa skrypty specyficzne dla celu (instalacji, konfiguracji).</span><span class="sxs-lookup"><span data-stu-id="c0292-345">There are also two purpose-specific scripts (installation, configuration).</span></span>

### <a name="creating-hello-template-files"></a><span data-ttu-id="c0292-346">Tworzenie hello pliki szablonów</span><span class="sxs-lookup"><span data-stu-id="c0292-346">Creating hello template files</span></span>
<span data-ttu-id="c0292-347">Należy utworzyć szablon głównego o nazwie azuredeploy.json.</span><span class="sxs-lookup"><span data-stu-id="c0292-347">You would create a Main Template named azuredeploy.json.</span></span>

<span data-ttu-id="c0292-348">Utwórz szablon zasobów o nazwie resources.json udostępnionych</span><span class="sxs-lookup"><span data-stu-id="c0292-348">You create Shared Resources Template named shared-resources.json</span></span>

<span data-ttu-id="c0292-349">Utwórz wdrożenie hello tooenable opcjonalne szablonu zasobów jumpbox, o nazwie jumpbox_enabled.json</span><span class="sxs-lookup"><span data-stu-id="c0292-349">You create an Optional Resource Template tooenable hello deployment of a jumpbox, named jumpbox_enabled.json</span></span>

<span data-ttu-id="c0292-350">Redis używa tylko jednego węzła o typie, utworzyć szablon pojedynczego zasobu elementu członkowskiego o nazwie resources.json węzła.</span><span class="sxs-lookup"><span data-stu-id="c0292-350">Redis uses just a single node type, so you create a single Member Resource Template named node-resources.json.</span></span>

<span data-ttu-id="c0292-351">Z pamięci podręcznej Redis mają tooinstall każdego indywidualnego węzła, a następnie ponowne skonfigurowanie klastra hello.</span><span class="sxs-lookup"><span data-stu-id="c0292-351">With Redis, you want tooinstall each individual node, and then set up hello cluster.</span></span>  <span data-ttu-id="c0292-352">Skrypty tooaccommodate hello instalacja i konfigurowanie pamięci podręcznej redis klastra install.sh i setup.sh-redis klastra.</span><span class="sxs-lookup"><span data-stu-id="c0292-352">You have scripts tooaccommodate hello installation and set up, redis-cluster-install.sh and redis-cluster-setup.sh.</span></span>

### <a name="linking-hello-templates"></a><span data-ttu-id="c0292-353">Łączenie hello szablonów</span><span class="sxs-lookup"><span data-stu-id="c0292-353">Linking hello templates</span></span>
<span data-ttu-id="c0292-354">Przy użyciu szablonu połączeń, hello szablonu głównego łączy się toohello zasobów udostępnionych szablonu, który określa hello sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="c0292-354">Using template linking, hello main template links out toohello shared resources template, which establishes hello virtual network.</span></span>

<span data-ttu-id="c0292-355">Logika jest dodawani hello szablonu głównego tooenable konsumentów hello szablonu toospecify czy jumpbox powinny zostać wdrożone.</span><span class="sxs-lookup"><span data-stu-id="c0292-355">Logic is added within hello main template tooenable consumers of hello template toospecify whether a jumpbox should be deployed.</span></span> <span data-ttu-id="c0292-356">*Włączone* wartość hello *EnableJumpbox* parametr wskazuje toodeploy jumpbox chce powitania klienta.</span><span class="sxs-lookup"><span data-stu-id="c0292-356">An *enabled* value for hello *EnableJumpbox* parameter indicates that hello customer wants toodeploy a jumpbox.</span></span> <span data-ttu-id="c0292-357">Gdy ta wartość zostanie podana, szablon hello łączy *_enabled* sufiks nazwy szablonu podstawowego tooa hello jumpbox możliwości.</span><span class="sxs-lookup"><span data-stu-id="c0292-357">When this value is provided, hello template concatenates *_enabled* as a suffix tooa base template name for hello jumpbox capability.</span></span>

<span data-ttu-id="c0292-358">Szablon głównego Hello stosuje hello *dużych* wartość parametru jako nazwę szablonu podstawowego tooa sufiks rozmiary obrazów na koszulki, a następnie używa tej wartości w łączu szablonu wychodzących za*technology_on_os_large.json*.</span><span class="sxs-lookup"><span data-stu-id="c0292-358">hello main template applies hello *large* parameter value as a suffix tooa base template name for t-shirt sizes, and then uses that value in a template link out too*technology_on_os_large.json*.</span></span>

<span data-ttu-id="c0292-359">Topologia Hello będzie wyglądać na tej ilustracji.</span><span class="sxs-lookup"><span data-stu-id="c0292-359">hello topology would resemble this illustration.</span></span>

![Redis szablonu](./media/best-practices-resource-manager-design-templates/redis-template.png)

<span data-ttu-id="c0292-361">**Struktura szablonu dla szablonu Redis**</span><span class="sxs-lookup"><span data-stu-id="c0292-361">**Template structure for a Redis template**</span></span>

### <a name="configuring-state"></a><span data-ttu-id="c0292-362">Konfigurowanie stanu</span><span class="sxs-lookup"><span data-stu-id="c0292-362">Configuring state</span></span>
<span data-ttu-id="c0292-363">Hello węzłów w klastrze hello istnieją dwa kroki tooconfiguring hello stanu, zarówno reprezentowany przez skrypty określonego celu.</span><span class="sxs-lookup"><span data-stu-id="c0292-363">For hello nodes in hello cluster, there are two steps tooconfiguring hello state, both represented by Purpose Specific Scripts.</span></span>  <span data-ttu-id="c0292-364">Redis instaluje "redis klastra install.sh" i "redis klastra setup.sh" Ustawia hello klastra.</span><span class="sxs-lookup"><span data-stu-id="c0292-364">"redis-cluster-install.sh" installs Redis and "redis-cluster-setup.sh" sets up hello cluster.</span></span>

### <a name="supporting-different-size-deployments"></a><span data-ttu-id="c0292-365">Obsługa wdrożeń inny rozmiar</span><span class="sxs-lookup"><span data-stu-id="c0292-365">Supporting Different Size Deployments</span></span>
<span data-ttu-id="c0292-366">Wewnątrz zmiennych szablonu rozmiar obrazów na koszulki hello określa hello liczba węzłów każdego typu toodeploy dla hello określony rozmiar (*dużych*).</span><span class="sxs-lookup"><span data-stu-id="c0292-366">Inside variables, hello t-shirt size template specifies hello number of nodes of each type toodeploy for hello specified size (*large*).</span></span> <span data-ttu-id="c0292-367">Następnie wdraża tej liczby wystąpień maszyn wirtualnych przy użyciu pętli zasobów, zapewniając tooresources unikatowe nazwy przez dodanie nazwy węzła z liczbą sekwencji liczbową z *copyIndex()*.</span><span class="sxs-lookup"><span data-stu-id="c0292-367">It then deploys that number of VM instances using resource loops, providing unique names tooresources by appending a node name with a numeric sequence number from *copyIndex()*.</span></span> <span data-ttu-id="c0292-368">Robi te kroki dla obu gorącego i ciepłych strefy maszyn wirtualnych, zgodnie z definicją w szablonie nazwy obrazów na koszulki hello</span><span class="sxs-lookup"><span data-stu-id="c0292-368">It does these steps for both hot and warm zone VMs, as defined in hello t-shirt name template</span></span>

## <a name="decomposition-and-end-to-end-solution-scoped-templates"></a><span data-ttu-id="c0292-369">Szablony rozwiązania w zakresie dekompozycji i end-to-end</span><span class="sxs-lookup"><span data-stu-id="c0292-369">Decomposition and end-to-end solution scoped templates</span></span>
<span data-ttu-id="c0292-370">Szablon rozwiązania w zakresie rozwiązania end-to-end koncentruje się na dostarczanie rozwiązania end-to-end.</span><span class="sxs-lookup"><span data-stu-id="c0292-370">A solution template with an end-to-end solution scope is focused on delivering an end-to-end solution.</span></span>  <span data-ttu-id="c0292-371">Ta metoda jest zwykle kompozycji wielu szablonów zakres możliwości dodatkowe zasoby, logiki i stanu.</span><span class="sxs-lookup"><span data-stu-id="c0292-371">This approach is typically a composition of multiple capability-scoped templates with additional resources, logic, and state.</span></span>

<span data-ttu-id="c0292-372">Jako wyróżniane na poniższym obrazie hello hello tego samego modelu używanego dla szablonów możliwości zakres jest rozszerzony na użytek szablonów w zakresie rozwiązania End-to-End.</span><span class="sxs-lookup"><span data-stu-id="c0292-372">As highlighted in hello image below, hello same model used for capability scoped templates is extended for templates with an End-to-End Solution Scope.</span></span>

<span data-ttu-id="c0292-373">Udostępnione zasoby szablonu i opcjonalnie szablony zasobów służą hello tę samą funkcję jak hello pojemności i możliwości zakres podejścia szablonu, ale są w zakresie hello tooend rozwiązanie.</span><span class="sxs-lookup"><span data-stu-id="c0292-373">A Shared Resources Template and Optional Resources Templates serve hello same function as in hello capacity and capability scoped template approaches, but are scoped for hello end tooend solution.</span></span>

<span data-ttu-id="c0292-374">Zakres tooend rozwiązanie szablony również można zwykle mają rozmiary obrazów na koszulki, hello znanych zasobów konfiguracji szablonu odzwierciedla, co jest wymagane dla danej konfiguracji znanych hello rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="c0292-374">As end tooend solution scoped templates also can typically have t-shirt sizes, hello Known Configuration Resources template reflects what is required for a given known configuration of hello solution.</span></span>

<span data-ttu-id="c0292-375">tooone łącza znane konfiguracji szablonu zasobów Hello lub więcej możliwości zakresu szablonów rozwiązania, które są odpowiednie toohello tooend rozwiązanie, a także hello szablony zasobów elementu członkowskiego, która jest wymagana dla hello tooend rozwiązanie.</span><span class="sxs-lookup"><span data-stu-id="c0292-375">hello Known Configuration Resources Template links tooone or more capability scoped solution templates that are relevant toohello end tooend solution as well as hello Member Resource Templates that are required for hello end tooend solution.</span></span>

<span data-ttu-id="c0292-376">Rozmiar koszulki hello hello rozwiązania mogą różnić się od szablonu hello poszczególnych zakres możliwości, zmiennych w hello znane konfiguracji szablonu zasobów są używane tooprovide hello odpowiednie wartości dla rozwiązania możliwości podrzędny zakres Szablony toodeploy hello odpowiedni rozmiar koszulki.</span><span class="sxs-lookup"><span data-stu-id="c0292-376">As hello t-shirt size of hello solution may be different than hello individual capability-scoped template, variables within hello Known Configuration Resources Template are used tooprovide hello appropriate values for downstream capability scoped solution templates toodeploy hello appropriate t-shirt size.</span></span>

![End-to-end](./media/best-practices-resource-manager-design-templates/end-to-end.png)

<span data-ttu-id="c0292-378">**Hello model używany pojemności lub zakres możliwości rozwiązania szablonów można łatwo rozszerzony na użytek zakresy szablon rozwiązania tooend zakończenia**</span><span class="sxs-lookup"><span data-stu-id="c0292-378">**hello model used for capacity or capability scoped solution templates can be readily extended for end tooend solution template scopes**</span></span>

## <a name="preparing-templates-for-hello-marketplace"></a><span data-ttu-id="c0292-379">Przygotowywanie szablony hello Marketplace</span><span class="sxs-lookup"><span data-stu-id="c0292-379">Preparing templates for hello Marketplace</span></span>
<span data-ttu-id="c0292-380">Hello łatwo poprzedzających podejście bierze pod uwagę scenariusze, w których przedsiębiorstwa, SIs i woluminów CSV tooeither chcesz wdrożyć szablony hello lub Włącz ich toodeploy klientów na ich własnych.</span><span class="sxs-lookup"><span data-stu-id="c0292-380">hello preceding approach readily accommodates scenarios where Enterprises, SIs, and CSVs want tooeither deploy hello templates themselves or enable their customers toodeploy on their own.</span></span>

<span data-ttu-id="c0292-381">Innym scenariuszu żądany jest wdrażanie szablonu za pomocą hello marketplace.</span><span class="sxs-lookup"><span data-stu-id="c0292-381">Another desired scenario is deploying a template via hello marketplace.</span></span>  <span data-ttu-id="c0292-382">Takie podejście dekompozycji działa w przypadku marketplace hello również z niewielkimi zmianami.</span><span class="sxs-lookup"><span data-stu-id="c0292-382">This decomposition approach works for hello marketplace as well, with some minor changes.</span></span>

<span data-ttu-id="c0292-383">Jak wspomniano wcześniej, szablonów można typy wdrożeń różne toooffer używanych do sprzedaży w witrynie marketplace hello.</span><span class="sxs-lookup"><span data-stu-id="c0292-383">As mentioned previously, templates can be used toooffer distinct deployment types for sale in hello marketplace.</span></span> <span data-ttu-id="c0292-384">Typy wdrożeń różne może być rozmiary obrazów na koszulki (małe, średnie, duża), typ produktu/odbiorców (społeczności, developer i enterprise) lub typu funkcji (podstawowe o wysokiej dostępności).</span><span class="sxs-lookup"><span data-stu-id="c0292-384">Distinct deployment types may be t-shirt sizes (small, medium, large), product/audience type (community, developer, enterprise), or feature type (basic, high availability).</span></span>

<span data-ttu-id="c0292-385">Jak pokazano poniżej, hello istniejących tooend zakończenia rozwiązania lub możliwości zakresie szablonów można łatwo wykorzystana hello toolist różne konfiguracje znane hello rynku.</span><span class="sxs-lookup"><span data-stu-id="c0292-385">As shown below, hello existing end tooend solution or capability scoped templates can be readily utilized toolist hello different known configurations in hello marketplace.</span></span>

<span data-ttu-id="c0292-386">Hello szablonu głównego toohello parametry są najpierw zmodyfikować tooremove hello przychodzących parametru o nazwie tshirtSize.</span><span class="sxs-lookup"><span data-stu-id="c0292-386">hello parameters toohello main template are first modified tooremove hello inbound parameter named tshirtSize.</span></span>

<span data-ttu-id="c0292-387">Podczas mapowania typów wdrożenia różne hello toohello znane konfiguracji szablonu zasobów, muszą hello wspólnych zasobów i znaleźć konfiguracji w hello szablonu zasobów udostępnionych oraz potencjalnie w opcjonalne szablony zasobów.</span><span class="sxs-lookup"><span data-stu-id="c0292-387">While hello distinct deployment types map toohello Known Configuration Resources Template, they also need hello common resources and configuration found in hello Shared Resources Template and potentially those in Optional Resource Templates.</span></span>

<span data-ttu-id="c0292-388">Jeśli chcesz toopublish Twojego marketplace toohello szablonu, należy ustanowić różne kopie zastępujący hello wcześniej dostępne dla ruchu przychodzącego parametru zmiennej tooa tshirtSize osadzone w szablonie hello szablonu głównego.</span><span class="sxs-lookup"><span data-stu-id="c0292-388">If you want toopublish your template toohello marketplace, you establish distinct copies of your Main template that replaces hello previously available inbound parameter of tshirtSize tooa variable embedded within hello template.</span></span>

![Portal Marketplace](./media/best-practices-resource-manager-design-templates/marketplace.png)

<span data-ttu-id="c0292-390">**Dostosowania rozwiązania o zakresie szablonu dla hello marketplace**</span><span class="sxs-lookup"><span data-stu-id="c0292-390">**Adapting a solution scoped template for hello marketplace**</span></span>

## <a name="next-steps"></a><span data-ttu-id="c0292-391">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="c0292-391">Next steps</span></span>
* <span data-ttu-id="c0292-392">toolearn o udostępnianiu stanu do i z szablonów, zobacz [udostępniania stanu w szablonach usługi Azure Resource Manager](best-practices-resource-manager-state.md).</span><span class="sxs-lookup"><span data-stu-id="c0292-392">toolearn about sharing state into and out of templates, see [Sharing state in Azure Resource Manager templates](best-practices-resource-manager-state.md).</span></span>
* <span data-ttu-id="c0292-393">Aby uzyskać wskazówki dotyczące użycia tooeffectively Menedżera zasobów przedsiębiorstwa Zarządzaj subskrypcjami, zobacz [szkieletu Azure enterprise — ładu przetestowanego subskrypcji](resource-manager-subscription-governance.md).</span><span class="sxs-lookup"><span data-stu-id="c0292-393">For guidance on how enterprises can use Resource Manager tooeffectively manage subscriptions, see [Azure enterprise scaffold - prescriptive subscription governance](resource-manager-subscription-governance.md).</span></span>

