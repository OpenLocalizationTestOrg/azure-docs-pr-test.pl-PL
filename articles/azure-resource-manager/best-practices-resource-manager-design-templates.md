---
title: "Projektowanie szablonów platformy Azure złożonych rozwiązań | Dokumentacja firmy Microsoft"
description: "Przedstawiono najlepsze rozwiązania dotyczące projektowania szablonów usługi Azure Resource Manager w złożonych scenariuszach"
services: azure-resource-manager
documentationcenter: 
author: tfitzmac
manager: timlt
editor: tysonn
ms.assetid: ce1141d6-ece7-4976-acea-1db1f775409e
ms.service: azure-resource-manager
ms.workload: multiple
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/19/2016
ms.author: tomfitz
ms.openlocfilehash: dcc31f7a8c85a8f7fbd554371a66fb1e348bca17
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/03/2017
---
# <a name="design-patterns-for-azure-resource-manager-templates-when-deploying-complex-solutions"></a><span data-ttu-id="c5676-103">Wzorce projektowe dla szablonów usługi Azure Resource Manager w przypadku wdrażania złożonych rozwiązań</span><span class="sxs-lookup"><span data-stu-id="c5676-103">Design patterns for Azure Resource Manager templates when deploying complex solutions</span></span>
<span data-ttu-id="c5676-104">Przy użyciu elastyczne podejście oparte na szablonach usługi Azure Resource Manager, można wdrożyć złożonej topologii szybkie i spójne.</span><span class="sxs-lookup"><span data-stu-id="c5676-104">Using a flexible approach based on Azure Resource Manager templates, you can deploy complex topologies quickly and consistently.</span></span> <span data-ttu-id="c5676-105">Dostosowanie tych wdrożeń łatwe jak ofert core rozwijać lub w celu uwzględnienia wariantów dla scenariuszy izolowanej lub klientów.</span><span class="sxs-lookup"><span data-stu-id="c5676-105">You can adapt these deployments easily as core offerings evolve or to accommodate variants for outlier scenarios or customers.</span></span>

<span data-ttu-id="c5676-106">Ten temat jest częścią większej oficjalny dokument.</span><span class="sxs-lookup"><span data-stu-id="c5676-106">This topic is part of a larger whitepaper.</span></span> <span data-ttu-id="c5676-107">Aby uzyskać pełne papieru, Pobierz [światowej klasy Azure zasobów Menedżer szablonów zagadnienia i sprawdzonych rozwiązań](http://download.microsoft.com/download/8/E/1/8E1DBEFA-CECE-4DC9-A813-93520A5D7CFE/World Class ARM Templates - Considerations and Proven Practices.pdf).</span><span class="sxs-lookup"><span data-stu-id="c5676-107">To read the full paper, download [World Class Azure Resource Manager Templates Considerations and Proven Practices](http://download.microsoft.com/download/8/E/1/8E1DBEFA-CECE-4DC9-A813-93520A5D7CFE/World Class ARM Templates - Considerations and Proven Practices.pdf).</span></span>

<span data-ttu-id="c5676-108">Szablony łączyć korzyści z podstawowej usługi Azure Resource Manager z zdolności adaptacyjnych i czytelność kodu JavaScript Object Notation (JSON).</span><span class="sxs-lookup"><span data-stu-id="c5676-108">Templates combine the benefits of the underlying Azure Resource Manager with the adaptability and readability of JavaScript Object Notation (JSON).</span></span> <span data-ttu-id="c5676-109">Za pomocą szablonów, można:</span><span class="sxs-lookup"><span data-stu-id="c5676-109">Using templates, you can:</span></span>

* <span data-ttu-id="c5676-110">Spójne wdrażanie topologii i ich obciążeń.</span><span class="sxs-lookup"><span data-stu-id="c5676-110">Deploy topologies and their workloads consistently.</span></span>
* <span data-ttu-id="c5676-111">Zarządzanie wszystkich zasobów w aplikacji ze sobą przy użyciu grup zasobów.</span><span class="sxs-lookup"><span data-stu-id="c5676-111">Manage all your resources in an application together using resource groups.</span></span>
* <span data-ttu-id="c5676-112">Zastosowanie kontroli dostępu opartej na rolach (RBAC) w celu udzielenia dostępu odpowiednie do użytkowników, grup i usług.</span><span class="sxs-lookup"><span data-stu-id="c5676-112">Apply role-based access control (RBAC) to grant appropriate access to users, groups, and services.</span></span>
* <span data-ttu-id="c5676-113">Użycie znakowanie skojarzenia uprościć zadania, takie jak pakiety zbiorcze rozliczeń.</span><span class="sxs-lookup"><span data-stu-id="c5676-113">Use tagging associations to streamline tasks such as billing rollups.</span></span>

<span data-ttu-id="c5676-114">Ten artykuł zawiera szczegółowe informacje na scenariusze użycia, architektura i wzorce implementacji zidentyfikowanego w trakcie naszych sesji projektowania i implementacji rzeczywistych szablonu z klientami Azure zespół doradczy klientów (AzureCAT).</span><span class="sxs-lookup"><span data-stu-id="c5676-114">This article provides details on consumption scenarios, architecture, and implementation patterns identified during our design sessions and real-world template implementations with Azure Customer Advisory Team (AzureCAT) customers.</span></span> <span data-ttu-id="c5676-115">Daleko od uczelni, tych sposobów są sprawdzonych rozwiązań poinformowany przez tworzenie szablonów dla 12 technologii top OSS opartych na systemie Linux, w tym: Apache Kafka, Apache Spark, Cloudera, Couchbase, Hortonworks HDP, obsługiwane przez Apache Enterprise DataStax Cassandra, Elasticsearch Wpięć, bazy danych MongoDB, PostgreSQL, Redis i Nagios.</span><span class="sxs-lookup"><span data-stu-id="c5676-115">Far from academic, these approaches are proven practices informed by the development of templates for 12 of the top Linux-based OSS technologies, including: Apache Kafka, Apache Spark, Cloudera, Couchbase, Hortonworks HDP, DataStax Enterprise powered by Apache Cassandra, Elasticsearch, Jenkins, MongoDB, PostgreSQL, Redis, and Nagios.</span></span> 

<span data-ttu-id="c5676-116">W tym artykule współużytkuje te wskazówki ułatwiające projektowania szablonów usługi Azure Resource Manager klas world sprawdzone.</span><span class="sxs-lookup"><span data-stu-id="c5676-116">This article shares these proven practices to help you architect world class Azure Resource Manager templates.</span></span>  

<span data-ttu-id="c5676-117">W naszym Praca z klientami określiliśmy kilka środowisko konsumowania szablon Menedżera zasobów przedsiębiorstwa, s integratory systemu (SI) i udostępnionych woluminów klastra.</span><span class="sxs-lookup"><span data-stu-id="c5676-117">In our work with customers, we have identified several Resource Manager template consumption experiences across enterprises, System Integrators (SI)s, and CSVs.</span></span> <span data-ttu-id="c5676-118">Poniższe sekcje zawierają ogólne omówienie typowych scenariuszy i wzorce dla różnych typów klientów.</span><span class="sxs-lookup"><span data-stu-id="c5676-118">The following sections provide a high-level overview of common scenarios and patterns for different customer types.</span></span>

## <a name="enterprises-and-system-integrators"></a><span data-ttu-id="c5676-119">Przedsiębiorstwach i integratorów systemów. platforma</span><span class="sxs-lookup"><span data-stu-id="c5676-119">Enterprises and system integrators</span></span>
<span data-ttu-id="c5676-120">W dużych organizacjach widzimy często konsumentów dwóch szablonów usługi Resource Manager: zespoły rozwoju oprogramowania wewnętrzny i firmowych IT.</span><span class="sxs-lookup"><span data-stu-id="c5676-120">Within large organizations, we commonly see two consumers of Resource Manager templates: internal software development teams and corporate IT.</span></span> <span data-ttu-id="c5676-121">Znaleźliśmy który scenariusze mapy SIs do scenariuszy dla przedsiębiorstw, więc te same kwestie.</span><span class="sxs-lookup"><span data-stu-id="c5676-121">We've found that the scenarios for the SIs map to the scenarios for Enterprises, so the same considerations apply.</span></span>

### <a name="internal-software-development-teams"></a><span data-ttu-id="c5676-122">Zespoły rozwoju oprogramowania wewnętrznego</span><span class="sxs-lookup"><span data-stu-id="c5676-122">Internal software development teams</span></span>
<span data-ttu-id="c5676-123">Jeśli zespół osiąga oprogramowania Twojej firmy, Szablony zapewniają prosty sposób na szybkie wdrożenie technologie do zastosowania w rozwiązaniach specyficzne dla firm.</span><span class="sxs-lookup"><span data-stu-id="c5676-123">If your team develops software to support your business, templates provide an easy way to quickly deploy technologies for use in business-specific solutions.</span></span> <span data-ttu-id="c5676-124">Szablony umożliwia również szybkie tworzenie środowisk szkolenia, umożliwiające członkom zespołu uzyskanie umiejętności niezbędne.</span><span class="sxs-lookup"><span data-stu-id="c5676-124">You can also use templates to rapidly create training environments that enable team members to gain necessary skills.</span></span>

<span data-ttu-id="c5676-125">Za pomocą szablonów jako — jest lub rozszerzyć lub tworzą je, aby zmieścił się w Twoim potrzebom.</span><span class="sxs-lookup"><span data-stu-id="c5676-125">You can use templates as-is or extend or compose them to accommodate your needs.</span></span> <span data-ttu-id="c5676-126">Za pomocą znakowania w szablonach, można udostępnić rozliczeń Podsumowanie różnych widokach, takich jak zespołu, projekt, osoby i education.</span><span class="sxs-lookup"><span data-stu-id="c5676-126">Using tagging within templates, you can provide a billing summary with various views such as team, project, individual, and education.</span></span>

<span data-ttu-id="c5676-127">Firmy często mają zespoły deweloperów oprogramowania do tworzenia szablonu spójne wdrażanie rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="c5676-127">Businesses often want software development teams to create a template for consistent deployment of a solution.</span></span> <span data-ttu-id="c5676-128">Szablonu ułatwia ograniczenia, więc niektóre elementy w tym środowisku pozostają z ustaloną i nie można zastąpić.</span><span class="sxs-lookup"><span data-stu-id="c5676-128">The template facilitates constraints so certain items within that environment remain fixed and can't be overridden.</span></span> <span data-ttu-id="c5676-129">Na przykład bank może wymagać szablon zawiera RBAC, więc programisty nie może skorygować banku rozwiązania do przesyłania danych do konta magazynu osobistego.</span><span class="sxs-lookup"><span data-stu-id="c5676-129">For example, a bank might require a template to include RBAC so a programmer can’t revise a banking solution to send data to a personal storage account.</span></span>

### <a name="corporate-it"></a><span data-ttu-id="c5676-130">Firmowej IT</span><span class="sxs-lookup"><span data-stu-id="c5676-130">Corporate IT</span></span>
<span data-ttu-id="c5676-131">Działy IT firmy zwykle korzystają z szablonów do dostarczania chmury możliwości pojemności i hostowanych w chmurze.</span><span class="sxs-lookup"><span data-stu-id="c5676-131">Corporate IT organizations typically use templates for delivering cloud capacity and cloud-hosted capabilities.</span></span>

#### <a name="cloud-capacity"></a><span data-ttu-id="c5676-132">Pojemność w chmurze</span><span class="sxs-lookup"><span data-stu-id="c5676-132">Cloud capacity</span></span>
<span data-ttu-id="c5676-133">Jest to często stosowana metoda firmowej grup IT zapewnienie pojemności chmury dla zespołów "rozmiary obrazów na koszulki", które są standardowe oferty rozmiary, takich jak małych, średnich i dużych.</span><span class="sxs-lookup"><span data-stu-id="c5676-133">A common way for corporate IT groups to provide cloud capacity for teams is with "t-shirt sizes", which are standard offering sizes such as small, medium, and large.</span></span> <span data-ttu-id="c5676-134">Oferty obrazów na koszulki o rozmiarze można łączyć różnych typów zasobów ilości zapewniając poziom normalizacji, który umożliwia szablony i zarządzać nimi.</span><span class="sxs-lookup"><span data-stu-id="c5676-134">The t-shirt sized offerings can mix different resource types and quantities while providing a level of standardization that makes it possible to use templates.</span></span> <span data-ttu-id="c5676-135">Szablony dostarczanie pojemności w spójny sposób, który wymusza zasady firmowe i używa znakowanie, aby zapewnić obciążenia zwrotnego na korzystanie z organizacji.</span><span class="sxs-lookup"><span data-stu-id="c5676-135">The templates deliver capacity in a consistent way that enforces corporate policies and uses tagging to provide chargeback to consuming organizations.</span></span>

<span data-ttu-id="c5676-136">Na przykład może być konieczne Podaj rozwoju, testów lub produkcji środowisk, w ramach których zespoły rozwoju oprogramowania można wdrożyć ich rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="c5676-136">For example, you may need to provide development, test, or production environments within which the software development teams can deploy their solutions.</span></span> <span data-ttu-id="c5676-137">W środowisku występuje topologii sieci wstępnie zdefiniowane i elementy, które można zmienić zespoły rozwoju oprogramowania, takie jak zasady dostępu do wglądu publicznego Internetu i pakietów.</span><span class="sxs-lookup"><span data-stu-id="c5676-137">The environment has a predefined network topology and elements that the software development teams cannot change, such as rules governing access to the public internet and packet inspection.</span></span> <span data-ttu-id="c5676-138">Ponadto klientowi mogą przysługiwać ról w danej organizacji dla tych środowisk różne uprawnienia dla środowiska.</span><span class="sxs-lookup"><span data-stu-id="c5676-138">You may also have organization-specific roles for these environments with distinct access rights for the environment.</span></span>

#### <a name="cloud-hosted-capabilities"></a><span data-ttu-id="c5676-139">Możliwości hostowanych w chmurze</span><span class="sxs-lookup"><span data-stu-id="c5676-139">Cloud-hosted capabilities</span></span>
<span data-ttu-id="c5676-140">Szablony służy do obsługi hostowanych w chmurze możliwości, takie jak pakiety oprogramowania lub złożone oferty, które są dostępne dla wewnętrznego rodzajach działalności gospodarczej.</span><span class="sxs-lookup"><span data-stu-id="c5676-140">You can use templates to support cloud-hosted capabilities, including individual software packages or composite offerings that are offered to internal lines of business.</span></span> <span data-ttu-id="c5676-141">Przykładem złożone oferty może być analytics jako usługa — analytics, wizualizacji i innych technologii — dostarczone w konfiguracji zoptymalizowane, połączonych w topologii sieci wstępnie zdefiniowane.</span><span class="sxs-lookup"><span data-stu-id="c5676-141">An example of a composite offering would be analytics-as-a-service—analytics, visualization, and other technologies—delivered in an optimized, connected configuration on a predefined network topology.</span></span>

<span data-ttu-id="c5676-142">Zagadnienia dotyczące zabezpieczeń i roli ustala pojemności chmury oferty, w którym są wbudowane dotyczy możliwości hostowanych w chmurze.</span><span class="sxs-lookup"><span data-stu-id="c5676-142">Cloud-hosted capabilities are affected by the security and role considerations established by the cloud capacity offering on which they’re built.</span></span> <span data-ttu-id="c5676-143">Te możliwości są oferowane zmian lub jako zarządzanych usług.</span><span class="sxs-lookup"><span data-stu-id="c5676-143">These capabilities are offered as is or as a managed service.</span></span> <span data-ttu-id="c5676-144">Dla ról drugie, ograniczonego dostępu są wymagane do włączenia dostępu do środowiska w celu zarządzania nim.</span><span class="sxs-lookup"><span data-stu-id="c5676-144">For the latter, access-constrained roles are required to enable access into the environment for management purposes.</span></span>

## <a name="cloud-service-vendors"></a><span data-ttu-id="c5676-145">Dostawców usługi w chmurze</span><span class="sxs-lookup"><span data-stu-id="c5676-145">Cloud service vendors</span></span>
<span data-ttu-id="c5676-146">Po rozmowie z wielu woluminów CSV, określiliśmy, że wiele metod, które należy wykonać w celu wdrażania usług dla klientów i skojarzone wymagania.</span><span class="sxs-lookup"><span data-stu-id="c5676-146">After talking to many CSVs, we identified multiple approaches you can take to deploy services for your customers and associated requirements.</span></span>

### <a name="csv-hosted-offering"></a><span data-ttu-id="c5676-147">Hostowana CSV oferty</span><span class="sxs-lookup"><span data-stu-id="c5676-147">CSV-hosted offering</span></span>
<span data-ttu-id="c5676-148">Jeśli w ramach własnej subskrypcji platformy Azure Twojej oferty, typowe są dwa podejścia hostingu: wdrażanie różnych wdrożenia dla każdego klienta lub wdrożeniu jednostek skalowania, które stanowi podstawę współużytkowanej infrastruktury używane dla wszystkich klientów.</span><span class="sxs-lookup"><span data-stu-id="c5676-148">If you host your offering in your own Azure subscription, two hosting approaches are common: deploying a distinct deployment for every customer or deploying scale units that underpin a shared infrastructure used for all customers.</span></span>

* <span data-ttu-id="c5676-149">**Różne wdrożenia dla każdego klienta.**</span><span class="sxs-lookup"><span data-stu-id="c5676-149">**Distinct deployments for each customer.**</span></span> <span data-ttu-id="c5676-150">Różne wdrożeń na klienta wymaga stałej topologie znanych konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="c5676-150">Distinct deployments per customer require fixed topologies of different known configurations.</span></span> <span data-ttu-id="c5676-151">Te wdrożenia może mieć rozmiary inną maszynę wirtualną (VM), różną liczbę węzłów i różnych ilości powiązanym magazynie.</span><span class="sxs-lookup"><span data-stu-id="c5676-151">These deployments may have different virtual machine (VM) sizes, varying numbers of nodes, and different amounts of associated storage.</span></span> <span data-ttu-id="c5676-152">Znakowanie wdrożeń służy do rozliczeń zbiorczy każdego klienta.</span><span class="sxs-lookup"><span data-stu-id="c5676-152">Tagging of deployments is used for roll-up billing of each customer.</span></span> <span data-ttu-id="c5676-153">RBAC może być włączone, aby umożliwić klientom dostęp do aspektów ich środowiska chmury.</span><span class="sxs-lookup"><span data-stu-id="c5676-153">RBAC may be enabled to allow customers access to aspects of their cloud environment.</span></span>
* <span data-ttu-id="c5676-154">**Jednostki skalowania w udostępnionych środowiskach wielodostępnych.**</span><span class="sxs-lookup"><span data-stu-id="c5676-154">**Scale units in shared multi-tenant environments.**</span></span> <span data-ttu-id="c5676-155">Szablon może reprezentować jednostki skalowania dla środowiska z wieloma dzierżawcami.</span><span class="sxs-lookup"><span data-stu-id="c5676-155">A template can represent a scale unit for multi-tenant environments.</span></span> <span data-ttu-id="c5676-156">W takim przypadku infrastruktura jest używana do obsługi wszystkich klientów.</span><span class="sxs-lookup"><span data-stu-id="c5676-156">In this case, the same infrastructure is used to support all customers.</span></span> <span data-ttu-id="c5676-157">Wdrożenia reprezentuje grupę zasobów dostarczających poziom wydajności hostowanej oferty, takie jak liczba użytkowników oraz liczbę transakcji.</span><span class="sxs-lookup"><span data-stu-id="c5676-157">The deployments represent a group of resources that deliver a level of capacity for the hosted offering, such as number of users and number of transactions.</span></span> <span data-ttu-id="c5676-158">Te jednostki skali są zwiększyć lub zmniejszyć, jak długo żądanie.</span><span class="sxs-lookup"><span data-stu-id="c5676-158">These scale units are increased or decreased as demand requires.</span></span>

### <a name="csv-offering-injected-into-customer-subscription"></a><span data-ttu-id="c5676-159">Oferta CSV do subskrypcji klienta</span><span class="sxs-lookup"><span data-stu-id="c5676-159">CSV offering injected into customer subscription</span></span>
<span data-ttu-id="c5676-160">Można wdrażać oprogramowanie do subskrypcji własnością klientów końcowych.</span><span class="sxs-lookup"><span data-stu-id="c5676-160">You may want to deploy your software into subscriptions owned by end customers.</span></span> <span data-ttu-id="c5676-161">Szablony umożliwia wdrażanie różnych wdrożeń do klienta konto platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="c5676-161">You can use templates to deploy distinct deployments into a customer’s Azure account.</span></span>

<span data-ttu-id="c5676-162">Te wdrożenia użycie funkcji RBAC, aby można było zaktualizować i Zarządzaj wdrożeniem w ramach konta klienta.</span><span class="sxs-lookup"><span data-stu-id="c5676-162">These deployments use RBAC so you can update and manage the deployment within the customer’s account.</span></span>

### <a name="azure-marketplace"></a><span data-ttu-id="c5676-163">Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="c5676-163">Azure Marketplace</span></span>
<span data-ttu-id="c5676-164">Reklamy i sprzedawać Twojej oferty za pośrednictwem portalu marketplace, takich jak Azure Marketplace można tworzyć szablony do dostarczania różne typy wdrożenia, które są uruchamiane z konta Azure klienta.</span><span class="sxs-lookup"><span data-stu-id="c5676-164">To advertise and sell your offerings through a marketplace, such as Azure Marketplace, you can develop templates to deliver distinct types of deployments that run in a customer’s Azure account.</span></span> <span data-ttu-id="c5676-165">Te wdrożenia distinct można przedstawić zwykle jako rozmiar koszulki (małe, średnie, duża), typ produktu/odbiorców (społeczności, developer i enterprise) lub typu funkcji (podstawowe o wysokiej dostępności).</span><span class="sxs-lookup"><span data-stu-id="c5676-165">These distinct deployments can be typically described as a t-shirt size (small, medium, large), product/audience type (community, developer, enterprise), or feature type (basic, high availability).</span></span>  <span data-ttu-id="c5676-166">W niektórych przypadkach te typy umożliwiają określenie niektóre atrybuty wdrożenia, takie jak typ maszyny Wirtualnej lub liczbę dysków.</span><span class="sxs-lookup"><span data-stu-id="c5676-166">In some cases, these types allow you to specify certain attributes of the deployment, such as VM type or number of disks.</span></span>

## <a name="oss-projects"></a><span data-ttu-id="c5676-167">Projekty OSS</span><span class="sxs-lookup"><span data-stu-id="c5676-167">OSS projects</span></span>
<span data-ttu-id="c5676-168">W obrębie projektów typu open source szablony usługi Resource Manager Włącz społeczności wdrożyć rozwiązanie szybko przy użyciu sprawdzonych rozwiązań.</span><span class="sxs-lookup"><span data-stu-id="c5676-168">Within open source projects, Resource Manager templates enable a community to deploy a solution quickly using proven practices.</span></span> <span data-ttu-id="c5676-169">Szablony można przechowywać w repozytorium GitHub, więc społeczności je skorygować w czasie.</span><span class="sxs-lookup"><span data-stu-id="c5676-169">You can store templates in a GitHub repository so the community can revise them over time.</span></span> <span data-ttu-id="c5676-170">Użytkownicy wdrażania tych szablonów w ich własnej subskrypcji platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="c5676-170">Users deploy these templates in their own Azure subscriptions.</span></span>

<span data-ttu-id="c5676-171">W poniższych sekcjach podano czynności, które należy wziąć pod uwagę przed rozpoczęciem projektowania rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="c5676-171">The following sections identify the things you need to consider before designing your solution.</span></span>

## <a name="identifying-what-is-outside-and-inside-a-vm"></a><span data-ttu-id="c5676-172">Identyfikowanie, co to jest poza i wewnątrz maszyny Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="c5676-172">Identifying what is outside and inside a VM</span></span>
<span data-ttu-id="c5676-173">Podczas projektowania szablonu, warto przyjrzeć się wymagania w zakresie co to jest poza i wewnątrz maszyn wirtualnych (VM):</span><span class="sxs-lookup"><span data-stu-id="c5676-173">As you design your template, it’s helpful to look at the requirements in terms of what's outside and inside the virtual machines (VMs):</span></span>

* <span data-ttu-id="c5676-174">Poza oznacza maszyn wirtualnych i innych zasobów wdrożenia, takie jak topologii sieci, znakowanie, odwołuje się do certyfikatów/klucze tajne i kontroli dostępu opartej na rolach.</span><span class="sxs-lookup"><span data-stu-id="c5676-174">Outside means the VMs and other resources of your deployment, such as the network topology, tagging, references to the certs/secrets, and role-based access control.</span></span> <span data-ttu-id="c5676-175">Te zasoby są częścią szablonu.</span><span class="sxs-lookup"><span data-stu-id="c5676-175">All these resources are part of your template.</span></span>
* <span data-ttu-id="c5676-176">Wewnątrz oznacza zainstalowanego oprogramowania i ogólny stan żądanej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="c5676-176">Inside means the installed software and overall desired state configuration.</span></span> <span data-ttu-id="c5676-177">Inne mechanizmy, takie jak rozszerzeń maszyny Wirtualnej lub skrypty, są używane w całości lub częściowo.</span><span class="sxs-lookup"><span data-stu-id="c5676-177">Other mechanisms, such as VM extensions or scripts, are used in whole or in part.</span></span> <span data-ttu-id="c5676-178">Mechanizmy te mogą być zidentyfikowane i wykonywane przez szablon, ale nie są w nim.</span><span class="sxs-lookup"><span data-stu-id="c5676-178">These mechanisms may be identified and executed by the template but aren’t in it.</span></span>

<span data-ttu-id="c5676-179">Typowe przykłady działań, które należy wykonać "wewnątrz pola" —</span><span class="sxs-lookup"><span data-stu-id="c5676-179">Common examples of activities you would do “inside the box” include -</span></span>  

* <span data-ttu-id="c5676-180">Instalowanie lub usuwanie ról i funkcji serwera</span><span class="sxs-lookup"><span data-stu-id="c5676-180">Install or remove server roles and features</span></span>
* <span data-ttu-id="c5676-181">Instalowanie i konfigurowanie oprogramowania na poziomie węzła lub klastra</span><span class="sxs-lookup"><span data-stu-id="c5676-181">Install and configure software at the node or cluster level</span></span>
* <span data-ttu-id="c5676-182">Wdrażanie witryn sieci Web na serwerze sieci web</span><span class="sxs-lookup"><span data-stu-id="c5676-182">Deploy websites on a web server</span></span>
* <span data-ttu-id="c5676-183">Wdrażanie schematów bazy danych</span><span class="sxs-lookup"><span data-stu-id="c5676-183">Deploy database schemas</span></span>
* <span data-ttu-id="c5676-184">Zarządzanie rejestru lub inne ustawienia konfiguracji</span><span class="sxs-lookup"><span data-stu-id="c5676-184">Manage registry or other types of configuration settings</span></span>
* <span data-ttu-id="c5676-185">Zarządzanie plikami i katalogami</span><span class="sxs-lookup"><span data-stu-id="c5676-185">Manage files and directories</span></span>
* <span data-ttu-id="c5676-186">Uruchamianie, zatrzymywanie i zarządzania procesami i usługami</span><span class="sxs-lookup"><span data-stu-id="c5676-186">Start, stop, and manage processes and services</span></span>
* <span data-ttu-id="c5676-187">Zarządzanie grupami lokalnymi i kont użytkowników</span><span class="sxs-lookup"><span data-stu-id="c5676-187">Manage local groups and user accounts</span></span>
* <span data-ttu-id="c5676-188">Zainstaluj pakiety i zarządzać nimi (.msi, .exe, yum itp.)</span><span class="sxs-lookup"><span data-stu-id="c5676-188">Install and manage packages (.msi, .exe, yum, etc.)</span></span>
* <span data-ttu-id="c5676-189">Zarządzanie zmienne środowiskowe</span><span class="sxs-lookup"><span data-stu-id="c5676-189">Manage environment variables</span></span>
* <span data-ttu-id="c5676-190">Uruchom skrypty natywnego (środowiska Windows PowerShell, bash, itp.)</span><span class="sxs-lookup"><span data-stu-id="c5676-190">Run native scripts (Windows PowerShell, bash, etc.)</span></span>

### <a name="desired-state-configuration-dsc"></a><span data-ttu-id="c5676-191">Konfiguracja żądanego stanu (DSC)</span><span class="sxs-lookup"><span data-stu-id="c5676-191">Desired state configuration (DSC)</span></span>
<span data-ttu-id="c5676-192">Planowanie wewnętrzny stan klasy poza wdrażania maszyn wirtualnych, chcesz upewnij się, że to wdrożenie nie "rozchodzenia" z konfiguracji, który został zdefiniowany i zaznaczone do kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="c5676-192">Thinking about the internal state of your VMs beyond deployment, you want to make sure this deployment doesn’t "drift" from the configuration that you have defined and checked into source control.</span></span> <span data-ttu-id="c5676-193">To podejście zapewnia deweloperów lub Operatorzy nie wprowadzać zmian ad hoc środowisko, które nie są sprawdzane, przetestowane lub zarejestrowane w kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="c5676-193">This approach ensures your developers or operations staff don’t make ad-hoc changes to an environment that are not vetted, tested, or recorded in source control.</span></span> <span data-ttu-id="c5676-194">Ten formant jest ważne, ponieważ ręcznej zmiany nie są w kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="c5676-194">This control is important, because the manual changes are not in source control.</span></span> <span data-ttu-id="c5676-195">Również nie są częścią wdrożenia standardowego i będzie miał wpływ na przyszłe zautomatyzowanych wdrożeń oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="c5676-195">They are also not part of the standard deployment and will impact future automated deployments of the software.</span></span>

<span data-ttu-id="c5676-196">Poza pracownikom wewnętrzny konfiguracji żądanego stanu są też ważne z punktu widzenia zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="c5676-196">Beyond your internal employees, desired state configuration is also important from a security perspective.</span></span> <span data-ttu-id="c5676-197">Przed hakerami próbujesz regularnie naruszyć i wykorzystać systemów oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="c5676-197">Hackers are regularly trying to compromise and exploit software systems.</span></span> <span data-ttu-id="c5676-198">Gdy to się powiedzie, jest często stosowanym rozwiązaniem zainstalować pliki, a w przeciwnym razie zmiany stanu systemu ze złamanymi zabezpieczeniami.</span><span class="sxs-lookup"><span data-stu-id="c5676-198">When successful, it's common to install files and otherwise change the state of a compromised system.</span></span> <span data-ttu-id="c5676-199">Za pomocą konfiguracji żądanego stanu, można zidentyfikować delty między żądaną i rzeczywistego stanu i przywrócenia znanej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="c5676-199">Using desired state configuration, you can identify deltas between the desired and actual state and restore a known configuration.</span></span>

<span data-ttu-id="c5676-200">Brak rozszerzenia zasobu dla najbardziej popularnych mechanizmów DSC - PowerShell DSC, Chef i Puppet.</span><span class="sxs-lookup"><span data-stu-id="c5676-200">There are resource extensions for the most popular mechanisms for DSC - PowerShell DSC, Chef, and Puppet.</span></span> <span data-ttu-id="c5676-201">Każdy z tych rozszerzeń można wdrożyć początkowy stan maszyny Wirtualnej i również upewnij się, że żądany stan jest przechowywany.</span><span class="sxs-lookup"><span data-stu-id="c5676-201">Each of these extensions can deploy the initial state of your VM and also be used to make sure the desired state is maintained.</span></span>

## <a name="common-template-scopes"></a><span data-ttu-id="c5676-202">Typowe zakresy szablonu</span><span class="sxs-lookup"><span data-stu-id="c5676-202">Common template scopes</span></span>
<span data-ttu-id="c5676-203">W naszym środowisku możemy przedstawiono trzy zakresy szablony klucza rozwiązania wyłonić.</span><span class="sxs-lookup"><span data-stu-id="c5676-203">In our experience, we’ve seen three key solution templates scopes emerge.</span></span> <span data-ttu-id="c5676-204">Te trzy zakresy — wydajność, możliwości i end-to-end rozwiązania — są opisane w poniższych sekcjach.</span><span class="sxs-lookup"><span data-stu-id="c5676-204">These three scopes – capacity, capability, and end-to-end solution – are described in the following sections.</span></span>

### <a name="capacity-scope"></a><span data-ttu-id="c5676-205">Zakres pojemności</span><span class="sxs-lookup"><span data-stu-id="c5676-205">Capacity scope</span></span>
<span data-ttu-id="c5676-206">Zakres pojemności oferuje zestaw zasobów w standardowej topologii, który jest wstępnie skonfigurowana zgodnie z przepisami i zasad.</span><span class="sxs-lookup"><span data-stu-id="c5676-206">A capacity scope delivers a set of resources in a standard topology that is pre-configured to be in compliance with regulations and policies.</span></span> <span data-ttu-id="c5676-207">Najbardziej typowym przykładem jest wdrażana przez środowisko deweloperskie standardowe w scenariuszu informatycznego w firmie lub tożsamości usługi.</span><span class="sxs-lookup"><span data-stu-id="c5676-207">The most common example is deploying a standard development environment in an Enterprise IT or SI scenario.</span></span>

### <a name="capability-scope"></a><span data-ttu-id="c5676-208">Zakres możliwości</span><span class="sxs-lookup"><span data-stu-id="c5676-208">Capability scope</span></span>
<span data-ttu-id="c5676-209">Zakres możliwości koncentruje się na wdrażanie i Konfigurowanie topologii dla danej technologii.</span><span class="sxs-lookup"><span data-stu-id="c5676-209">A capability scope is focused on deploying and configuring a topology for a given technology.</span></span> <span data-ttu-id="c5676-210">Typowe scenariusze, w tym technologii, takich jak SQL Server, Cassandra, Hadoop.</span><span class="sxs-lookup"><span data-stu-id="c5676-210">Common scenarios including technologies such as SQL Server, Cassandra, Hadoop.</span></span>

### <a name="end-to-end-solution-scope"></a><span data-ttu-id="c5676-211">Zakres end-to-end rozwiązania</span><span class="sxs-lookup"><span data-stu-id="c5676-211">End-to-end solution scope</span></span>
<span data-ttu-id="c5676-212">Zakres rozwiązania End-to-End docelowe poza jednym możliwości, a zamiast tego koncentruje się na dostarczaniu kompleksowe rozwiązania składającej się z wielu funkcji.</span><span class="sxs-lookup"><span data-stu-id="c5676-212">An End-to-End Solution Scope is targeted beyond a single capability, and instead focused on delivering an end to end solution comprised of multiple capabilities.</span></span>  

<span data-ttu-id="c5676-213">Zakres zakres rozwiązania szablonu manifesty jako zestaw co najmniej jeden zakres możliwości szablonów zasobów specyficznych dla rozwiązania, logiki i żądanego stanu.</span><span class="sxs-lookup"><span data-stu-id="c5676-213">A solution-scoped template scope manifests itself as a set of one or more capability-scoped templates with solution-specific resources, logic, and desired state.</span></span> <span data-ttu-id="c5676-214">Przykład szablonu o zakresie rozwiązania to szablon rozwiązania potoku pełne dane.</span><span class="sxs-lookup"><span data-stu-id="c5676-214">An example of a solution-scoped template is an end to end data pipeline solution template.</span></span> <span data-ttu-id="c5676-215">Szablon może mieszać topologii określonego rozwiązania i stan z wielu szablonów zakres możliwości rozwiązania, takie jak Kafka, Storm i Hadoop.</span><span class="sxs-lookup"><span data-stu-id="c5676-215">The template might mix solution-specific topology and state with multiple capability-scoped solution templates such as Kafka, Storm, and Hadoop.</span></span>

## <a name="choosing-free-form-vs-known-configurations"></a><span data-ttu-id="c5676-216">Wybranie dowolnego a znanych konfiguracji</span><span class="sxs-lookup"><span data-stu-id="c5676-216">Choosing free-form vs. known configurations</span></span>
<span data-ttu-id="c5676-217">Może początkowo uważasz, że szablon powinien zapewnić konsumentów największą elastyczność, ale wiele kwestii wpłynąć na wybór, czy używać dowolnych konfiguracje a znanych konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="c5676-217">You might initially think a template should give consumers the utmost flexibility, but many considerations affect the choice of whether to use free-form configurations vs. known configurations.</span></span> <span data-ttu-id="c5676-218">W tej sekcji wymieniono wymagania dotyczące klienta klucza i kwestii technicznych, które w kształcie podejście udostępnione w tym dokumencie.</span><span class="sxs-lookup"><span data-stu-id="c5676-218">This section identifies the key customer requirements and technical considerations that shaped the approach shared in this document.</span></span>

### <a name="free-form-configurations"></a><span data-ttu-id="c5676-219">Konfiguracje dowolnych</span><span class="sxs-lookup"><span data-stu-id="c5676-219">Free-form configurations</span></span>
<span data-ttu-id="c5676-220">Na pierwszy rzut oka konfiguracje dowolnych dźwiękowej idealne.</span><span class="sxs-lookup"><span data-stu-id="c5676-220">On the surface, free-form configurations sound ideal.</span></span> <span data-ttu-id="c5676-221">Pozwala na wybór typu maszyny Wirtualnej i podaj dowolną liczbę węzłów i dołączone dyski dla tych węzłów — i zrobić jako parametry szablonu.</span><span class="sxs-lookup"><span data-stu-id="c5676-221">They allow you to select a VM type and provide an arbitrary number of nodes and attached disks for those nodes — and do so as parameters to a template.</span></span> <span data-ttu-id="c5676-222">Jednak ta metoda nie jest idealnym rozwiązaniem w niektórych scenariuszach.</span><span class="sxs-lookup"><span data-stu-id="c5676-222">However, this approach is not ideal for some scenarios.</span></span>

<span data-ttu-id="c5676-223">W [rozmiary maszyn wirtualnych](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)różnych typach maszyn wirtualnych i dostępne rozmiary są identyfikowane i dyski każdej liczby trwałe (2, 4, 8, 16 i 32), który może zostać dołączony.</span><span class="sxs-lookup"><span data-stu-id="c5676-223">In [Sizes for virtual machines](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), the different VM types and available sizes are identified, and each of the number of durable disks (2, 4, 8, 16, or 32) that can be attached.</span></span> <span data-ttu-id="c5676-224">Każdy dysk dołączony zapewnia 500 IOPS i wielu z tych dysków może puli dla mnożnik tej liczby IOPS.</span><span class="sxs-lookup"><span data-stu-id="c5676-224">Each attached disk provides 500 IOPS and multiples of these disks can be pooled for a multiplier of that number of IOPS.</span></span> <span data-ttu-id="c5676-225">Na przykład 16 dysków może puli zapewnienie 8000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="c5676-225">For example, 16 disks can be pooled to provide 8,000 IOPS.</span></span> <span data-ttu-id="c5676-226">Buforowanie wykonuje się za pomocą konfiguracji systemu operacyjnego, za pomocą funkcji miejsca do magazynowania systemu Windows firmy Microsoft lub macierzy tanich dysków (RAID) w systemie Linux.</span><span class="sxs-lookup"><span data-stu-id="c5676-226">Pooling is done with configuration in the operating system, using Microsoft Windows Storage Spaces or redundant array of inexpensive disks (RAID) in Linux.</span></span>

<span data-ttu-id="c5676-227">Konfiguracja dowolnych umożliwia wybór kilka wystąpień maszyn wirtualnych, maszyny Wirtualnej w różnych typów i rozmiar dla tych wystąpień różne dyski dla typu maszyny Wirtualnej i co najmniej jednego skryptu skonfigurować zawartość maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="c5676-227">A free-form configuration enables the selection several VM instances, various VM types and sizes for those instances, various disks for the VM type, and one or more scripts to configure the VM contents.</span></span>

<span data-ttu-id="c5676-228">Bardzo często, że wdrożenie może mieć wiele typów węzłów, takich jak wzorzec i węzły danych, tego rodzaju elastyczności jest często podane dla każdego typu węzła.</span><span class="sxs-lookup"><span data-stu-id="c5676-228">It is common that a deployment may have multiple types of nodes, such as master and data nodes, so this flexibility is often provided for every node type.</span></span>

<span data-ttu-id="c5676-229">Po rozpoczęciu wdrażania klastrów żadnego znaczenia rozpoczęciem pracy z tych scenariuszy złożonych.</span><span class="sxs-lookup"><span data-stu-id="c5676-229">As you start to deploy clusters of any significance, you begin to work with these complex scenarios.</span></span> <span data-ttu-id="c5676-230">Jeśli zostały wdrażanie klastra usługi Hadoop, na przykład z 8 węzłów głównych i węzłów 200 danych oraz puli 4 dołączonych dysków w każdym węźle głównym i puli 16 dysków dołączonych na węzeł danych, trzeba 208 maszyn wirtualnych i 3,232 dysków, aby zarządzać.</span><span class="sxs-lookup"><span data-stu-id="c5676-230">If you were deploying a Hadoop cluster, for example, with 8 master nodes and 200 data nodes, and pooled 4 attached disks on each master node and pooled 16 attached disks per data node, you would have 208 VMs and 3,232 disks to manage.</span></span>

<span data-ttu-id="c5676-231">Konto magazynu będzie ograniczenie przepustowości żądań powyżej jego zidentyfikowanych 20 000 ograniczyć transakcje na sekundę, dlatego należy przyjrzeć się partycjonowanie konta magazynu i umożliwia określenie odpowiedniej liczby kont magazynu w celu uwzględnienia tej topologii obliczeń.</span><span class="sxs-lookup"><span data-stu-id="c5676-231">A storage account will throttle requests above its identified 20,000 transactions/second limit, so you should look at storage account partitioning and use calculations to determine the appropriate number of storage accounts to accommodate this topology.</span></span> <span data-ttu-id="c5676-232">Podana wieloma obsługiwane przez metody dowolne kombinacje, obliczenia dynamiczne są wymagane do określenia odpowiedniego partycjonowania.</span><span class="sxs-lookup"><span data-stu-id="c5676-232">Given the multitude of combinations supported by the free-form approach, dynamic calculations are required to determine the appropriate partitioning.</span></span> <span data-ttu-id="c5676-233">Język szablonu usługi Azure Resource Manager nie zawiera obecnie funkcji matematycznych, należy wykonać te obliczenia w kodzie, generowania unikatowych, ustalony szablonu z odpowiednie informacje.</span><span class="sxs-lookup"><span data-stu-id="c5676-233">The Azure Resource Manager Template Language does not presently provide mathematical functions, so you must perform these calculations in code, generating a unique, hard-coded template with the appropriate details.</span></span>

<span data-ttu-id="c5676-234">W organizacji IT i scenariusze SI ktoś Obsługa szablonów i obsługuje wdrożonej topologii dla organizacji, co najmniej jeden.</span><span class="sxs-lookup"><span data-stu-id="c5676-234">In enterprise IT and SI scenarios, someone must maintain the templates and support the deployed topologies for one or more organizations.</span></span> <span data-ttu-id="c5676-235">To dodatkowe obciążenie — szablony dla każdego klienta i różnych konfiguracjach — równocześnie pożądane.</span><span class="sxs-lookup"><span data-stu-id="c5676-235">This additional overhead — different configurations and templates for each customer — is far from desirable.</span></span>

<span data-ttu-id="c5676-236">Te szablony można użyć do wdrożenia środowiska klienta subskrypcji platformy Azure, ale zespoły IT firmy i woluminy CSV zwykle wdrożyć je do ich własnych subskrypcji przy użyciu funkcji obciążeń zwrotnych do klientów.</span><span class="sxs-lookup"><span data-stu-id="c5676-236">You can use these templates to deploy environments in your customer’s Azure subscription, but both corporate IT teams and CSVs typically deploy them into their own subscriptions, using a chargeback function to bill their customers.</span></span> <span data-ttu-id="c5676-237">W tych scenariuszach celem jest wdrażanie pojemność dla wielu klientów w puli subskrypcji i zachowanie wdrożenia gęsto umieszczane w subskrypcji, aby zminimalizować ilość okablowania subskrypcji — to znaczy więcej subskrypcji do zarządzania.</span><span class="sxs-lookup"><span data-stu-id="c5676-237">In these scenarios, the goal is to deploy capacity for multiple customers across a pool of subscriptions and keep deployments densely populated into the subscriptions to minimize subscription sprawl—that is, more subscriptions to manage.</span></span> <span data-ttu-id="c5676-238">O rozmiarze naprawdę dynamiczne wdrożenia osiągnięcie tego typu gęstość wymaga zachować ostrożność podczas planowania i projektowania dodatkowe szkieletów pracy w imieniu organizacji.</span><span class="sxs-lookup"><span data-stu-id="c5676-238">With truly dynamic deployment sizes, achieving this type of density requires careful planning and additional development for scaffolding work on behalf of the organization.</span></span>

<span data-ttu-id="c5676-239">Ponadto nie można utworzyć subskrypcji za pośrednictwem wywołania interfejsu API, ale należy to zrobić ręcznie za pośrednictwem portalu.</span><span class="sxs-lookup"><span data-stu-id="c5676-239">In addition, you can’t create subscriptions via an API call but must do so manually through the portal.</span></span> <span data-ttu-id="c5676-240">Zwiększa liczbę subskrypcji, wszelkie wynikowy przetwarzania subskrypcji wymaga udziału człowieka — nie mogły zostać zautomatyzowane.</span><span class="sxs-lookup"><span data-stu-id="c5676-240">As the number of subscriptions increases, any resulting subscription sprawl requires human intervention—it can’t be automated.</span></span> <span data-ttu-id="c5676-241">O wiele zmienności rozmiary wdrożeń będzie musiał wstępnego zainicjowania obsługi liczbę subskrypcji ręcznie, aby upewnić się, że dostępnych subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="c5676-241">With so much variability in the sizes of deployments, you would have to pre-provision a number of subscriptions manually to ensure subscriptions are available.</span></span>

<span data-ttu-id="c5676-242">Biorąc pod uwagę następujące czynniki Konfiguracja naprawdę dowolnych jest mniej atrakcyjne niż co najpierw blush.</span><span class="sxs-lookup"><span data-stu-id="c5676-242">Considering all these factors, a truly free-form configuration is less appealing than at first blush.</span></span>

### <a name="known-configurations--the-t-shirt-sizing-approach"></a><span data-ttu-id="c5676-243">Znane konfiguracje — metoda ustalania rozmiaru obrazów na koszulki</span><span class="sxs-lookup"><span data-stu-id="c5676-243">Known configurations — the t-shirt sizing approach</span></span>
<span data-ttu-id="c5676-244">Raczej nie oferują szablon, który zapewnia elastyczność całkowitej i niezliczonych zmian, wiemy z doświadczenia wspólnego wzorca jest zapewnienie możliwość wybrania znanych konfiguracji — w efekcie rozmiary obrazów na standardowe koszulki takich jak piaskownicy, małych, średnich i dużych.</span><span class="sxs-lookup"><span data-stu-id="c5676-244">Rather than offer a template that provides total flexibility and countless variations, in our experience a common pattern is to provide the ability to select known configurations — in effect, standard t-shirt sizes such as sandbox, small, medium, and large.</span></span> <span data-ttu-id="c5676-245">Inne przykłady rozmiary obrazów na koszulki są ofert produktów, takich jak community edition lub enterprise edition.</span><span class="sxs-lookup"><span data-stu-id="c5676-245">Other examples of t-shirt sizes are product offerings, such as community edition or enterprise edition.</span></span>  <span data-ttu-id="c5676-246">W innych przypadkach może być konfiguracje specyficznego dla obciążenia technologii — takie jak ograniczyć mapy lub nie sql.</span><span class="sxs-lookup"><span data-stu-id="c5676-246">In other cases, it may be workload-specific configurations of a technology – such as map reduce or no sql.</span></span>

<span data-ttu-id="c5676-247">Wiele organizacji IT organizacji, dostawców OSS i SIs udostępnianie ich ofert dzisiaj w ten sposób w lokalnej, zwirtualizowanych środowiskach (przedsiębiorstwa) lub oprogramowania jako usługa (SaaS) oferty (woluminy CSV i OSVs).</span><span class="sxs-lookup"><span data-stu-id="c5676-247">Many enterprise IT organizations, OSS vendors, and SIs make their offerings available today in this way in on-premises, virtualized environments (enterprises) or as software-as-a-service (SaaS) offerings (CSVs and OSVs).</span></span>

<span data-ttu-id="c5676-248">Takie podejście zapewnia dobre, znanej konfiguracji o różnych rozmiarach, które są wstępnie skonfigurowane dla klientów.</span><span class="sxs-lookup"><span data-stu-id="c5676-248">This approach provides good, known configurations of varying sizes that are preconfigured for customers.</span></span> <span data-ttu-id="c5676-249">Bez znanych konfiguracji klientów końcowych musi ustalić klastra zmiany rozmiaru na ich własnych uwzględnieniu ograniczenia zasobów platformy i wykonywanie obliczeń do identyfikowania wynikowy partycjonowanie konta magazynu i innych zasobów (ze względu na rozmiar klastra i zasoby ograniczenia).</span><span class="sxs-lookup"><span data-stu-id="c5676-249">Without known configurations, end customers must determine cluster sizing on their own, factor in platform resource constraints, and do math to identify the resulting partitioning of storage accounts and other resources (due to cluster size and resource constraints).</span></span> <span data-ttu-id="c5676-250">Znane konfiguracje umożliwiają klientom łatwe wybierz prawa Rozmiar koszulki — to znaczy danego wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="c5676-250">Known configurations enable customers to easily select the right t-shirt size—that is, a given deployment.</span></span> <span data-ttu-id="c5676-251">Oprócz tworzenia lepsze środowisko dla odbiorcy, łatwiej jest niewielka liczba znanych konfiguracji obsługuje i ułatwiają dostarczanie wyższego poziomu gęstości.</span><span class="sxs-lookup"><span data-stu-id="c5676-251">In addition to making a better experience for the customer, a small number of known configurations is easier to support and can help you deliver a higher level of density.</span></span>

<span data-ttu-id="c5676-252">To podejście znanej konfiguracji koncentruje się na rozmiary obrazów na koszulki mogą także mieć różną liczbę węzłów w rozmiarze.</span><span class="sxs-lookup"><span data-stu-id="c5676-252">A known configuration approach focused on t-shirt sizes may also have varying number of nodes within a size.</span></span> <span data-ttu-id="c5676-253">Na przykład mały rozmiar koszulki może być między węzłami 3 do 10.</span><span class="sxs-lookup"><span data-stu-id="c5676-253">For example, a small t-shirt size may be between 3 and 10 nodes.</span></span>  <span data-ttu-id="c5676-254">Rozmiar koszulki będzie przeznaczony obsłużyć maksymalnie 10 węzłów i umożliwiają konsumenta dowolnej postaci opcje do maksymalnego rozmiaru zidentyfikowane.</span><span class="sxs-lookup"><span data-stu-id="c5676-254">The t-shirt size would be designed to accommodate up to 10 nodes and provide the consumer the ability to make free form selections up to the maximum size identified.</span></span>  

<span data-ttu-id="c5676-255">Rozmiar koszulki, na podstawie typu obciążenie może być więcej dowolnej postaci charakteru pod względem liczby węzłów, które można wdrożyć, ale mają rozmiar węzła różne obciążenia i konfiguracji oprogramowania na węźle.</span><span class="sxs-lookup"><span data-stu-id="c5676-255">A t-shirt size based on workload type, may be more free form in nature in terms of the number of nodes that can be deployed but will have workload distinct node size and configuration of the software on the node.</span></span>

<span data-ttu-id="c5676-256">Rozmiary obrazów na koszulki oparte na ofert produktów, takich jak społeczność lub przedsiębiorstwa, może mieć typów różnych zasobów i maksymalną liczbę węzłów, które można wdrożyć, zwykle powiązane zagadnień związanych z licencjami lub dostępność funkcji w różnych ofert.</span><span class="sxs-lookup"><span data-stu-id="c5676-256">T-shirt sizes based on product offerings, such as community or Enterprise, may have distinct resource types and maximum number of nodes that can be deployed, typically tied to licensing considerations or feature availability across the different offerings.</span></span>

<span data-ttu-id="c5676-257">Można również zapewnić klientom z unikatowy wariantów za pomocą szablonów opartych na formacie JSON.</span><span class="sxs-lookup"><span data-stu-id="c5676-257">You can also accommodate customers with unique variants using the JSON-based templates.</span></span> <span data-ttu-id="c5676-258">Podczas pracy nad wartości odstających, możesz dołączyć do nich odpowiednie planowanie i zagadnienia dotyczące projektowania, pomocy technicznej i analiza kosztów.</span><span class="sxs-lookup"><span data-stu-id="c5676-258">When dealing with outliers, you can incorporate the appropriate planning and considerations for development, support, and costing.</span></span>

<span data-ttu-id="c5676-259">Na podstawie scenariuszy użycia szablonu i wymagania określone w chwili rozpoczęcia tego dokumentu, określiliśmy, że wzorzec do rozkładu szablonu.</span><span class="sxs-lookup"><span data-stu-id="c5676-259">Based on the customer template consumption scenarios, and requirements identified at the start of this document, we identified a pattern for template decomposition.</span></span>

## <a name="capacity-and-capability-scoped-solution-templates"></a><span data-ttu-id="c5676-260">Pojemność i szablony zakres możliwości rozwiązania</span><span class="sxs-lookup"><span data-stu-id="c5676-260">Capacity and capability-scoped solution templates</span></span>
<span data-ttu-id="c5676-261">Dekompozycji zapewnia podejściu tworzenia szablonu, że obsługuje ponowne użycie, rozszerzalności, testowania i narzędzi.</span><span class="sxs-lookup"><span data-stu-id="c5676-261">Decomposition provides a modular approach to template development that supports reuse, extensibility, testing, and tooling.</span></span> <span data-ttu-id="c5676-262">Ta sekcja zawiera szczegóły na jak podejście dekompozycji można zastosować do szablonów z zakresem możliwości.</span><span class="sxs-lookup"><span data-stu-id="c5676-262">This section provides detail on how a decomposition approach can be applied to templates with a Capacity or Capability scope.</span></span>

<span data-ttu-id="c5676-263">W takie podejście szablonu głównego odbiera wartości parametrów od konsumenta szablonu, a następnie łączy kilka typów szablonów i skrypty downstream jak pokazano poniżej.</span><span class="sxs-lookup"><span data-stu-id="c5676-263">In this approach, a main template receives parameter values from a template consumer, then links to several types of templates and scripts downstream as shown below.</span></span> <span data-ttu-id="c5676-264">Podać wartości i szablonów połączonych są używane parametry, zmienne statyczne i zmienne wygenerowany.</span><span class="sxs-lookup"><span data-stu-id="c5676-264">Parameters, static variables, and generated variables are used to provide values in and out of the linked templates.</span></span>

![Parametry szablonu](./media/best-practices-resource-manager-design-templates/template-parameters.png)

<span data-ttu-id="c5676-266">**Parametry są przekazywane do głównego szablonu następnie do połączonego szablonów**</span><span class="sxs-lookup"><span data-stu-id="c5676-266">**Parameters are passed to a main template then to linked templates**</span></span>

<span data-ttu-id="c5676-267">Poniższe sekcje skupić się na typy szablonów i skrypty, które jest cenowego jednego szablonu.</span><span class="sxs-lookup"><span data-stu-id="c5676-267">The following sections focus on the types of templates and scripts that a single template is decomposed into.</span></span> <span data-ttu-id="c5676-268">Sekcje stanowią podejścia do przekazywania informacji o stanie między szablonów.</span><span class="sxs-lookup"><span data-stu-id="c5676-268">The sections present approaches for passing state information among the templates.</span></span> <span data-ttu-id="c5676-269">Każdy szablon i typy skryptu w obrazie opisano wraz z przykładami.</span><span class="sxs-lookup"><span data-stu-id="c5676-269">Each template and the script types in the image are described along with examples.</span></span> <span data-ttu-id="c5676-270">Na przykład kontekstowe, zobacz "umieścić go razem: Przykładowe zastosowanie" dalszej części tego dokumentu.</span><span class="sxs-lookup"><span data-stu-id="c5676-270">For a contextual example, see "Putting it together: a sample implementation" later in this document.</span></span>

### <a name="template-metadata"></a><span data-ttu-id="c5676-271">Metadane szablonu</span><span class="sxs-lookup"><span data-stu-id="c5676-271">Template metadata</span></span>
<span data-ttu-id="c5676-272">Metadane szablonu (plik metadata.json) zawiera opis szablonu w formacie JSON, który może zostać odczytany przez ludzi i systemów oprogramowania par klucz/wartość.</span><span class="sxs-lookup"><span data-stu-id="c5676-272">Template metadata (the metadata.json file) contains key/value pairs that describe a template in JSON, which can be read by humans and software systems.</span></span>

![Metadane szablonu](./media/best-practices-resource-manager-design-templates/template-metadata.png)

<span data-ttu-id="c5676-274">**Metadane szablonu jest opisany w pliku metadata.json**</span><span class="sxs-lookup"><span data-stu-id="c5676-274">**Template metadata is described in the metadata.json file**</span></span>

<span data-ttu-id="c5676-275">Agenci oprogramowanie można pobrać pliku metadata.json i publikować informacje i łącza do szablonu w katalogu lub strony sieci web.</span><span class="sxs-lookup"><span data-stu-id="c5676-275">Software agents can retrieve the metadata.json file and publish the information and a link to the template in a web page or directory.</span></span> <span data-ttu-id="c5676-276">Elementy obejmują *itemDisplayName*, *opis*, *podsumowania*, *githubUsername*, i *dateUpdated*.</span><span class="sxs-lookup"><span data-stu-id="c5676-276">Elements include *itemDisplayName*, *description*, *summary*, *githubUsername*, and *dateUpdated*.</span></span>

<span data-ttu-id="c5676-277">Poniżej przedstawiono przykładowy plik w całości.</span><span class="sxs-lookup"><span data-stu-id="c5676-277">An example file is shown below in its entirety.</span></span>

    {
        "itemDisplayName": "PostgreSQL 9.3 on Ubuntu VMs",
        "description": "This template creates a PostgreSQL streaming-replication between a master and one or more slave servers each with 2 striped data disks. The database servers are deployed into a private-only subnet with one publicly accessible jumpbox VM in a DMZ subnet with public IP.",
        "summary": "PostgreSQL stream-replication with multiple slave servers and a publicly accessible jumpbox VM",
        "githubUsername": "arsenvlad",
        "dateUpdated": "2015-04-24"
    }

### <a name="main-template"></a><span data-ttu-id="c5676-278">Główny szablonu</span><span class="sxs-lookup"><span data-stu-id="c5676-278">Main template</span></span>
<span data-ttu-id="c5676-279">Szablonie głównym odbiera parametrów z użytkownikiem, używa tych informacji, aby wypełnić zmienne obiekt złożony i wykonuje połączonego szablonów.</span><span class="sxs-lookup"><span data-stu-id="c5676-279">The main template receives parameters from a user, uses that information to populate complex object variables, and executes the linked templates.</span></span>

![Główny szablonu](./media/best-practices-resource-manager-design-templates/main-template.png)

<span data-ttu-id="c5676-281">**Szablonie głównym odbiera parametrów z użytkownikiem**</span><span class="sxs-lookup"><span data-stu-id="c5676-281">**The main template receives parameters from a user**</span></span>

<span data-ttu-id="c5676-282">Jeden parametr, który został dostarczony jest typem znanej konfiguracji znanej także jako parametr rozmiaru obrazów na koszulki ze względu na jego wartości standardowych, takich jak małych, średnich i dużych.</span><span class="sxs-lookup"><span data-stu-id="c5676-282">One parameter that is provided is a known configuration type also known as the t-shirt size parameter because of its standardized values such as small, medium, or large.</span></span> <span data-ttu-id="c5676-283">W praktyce można użyć tego parametru na wiele sposobów.</span><span class="sxs-lookup"><span data-stu-id="c5676-283">In practice, you can use this parameter in multiple ways.</span></span> <span data-ttu-id="c5676-284">Aby uzyskać więcej informacji zobacz temat "Znanej konfiguracji zasobów szablonu" w dalszej części tego dokumentu.</span><span class="sxs-lookup"><span data-stu-id="c5676-284">For details, see "Known configuration resources template" later in this document.</span></span>

<span data-ttu-id="c5676-285">Niektóre zasoby są wdrażane niezależnie od tego, znanej konfiguracji określonej przez parametr użytkownika.</span><span class="sxs-lookup"><span data-stu-id="c5676-285">Some resources are deployed regardless of the known configuration specified by a user parameter.</span></span> <span data-ttu-id="c5676-286">Te zasoby są udostępniane za pomocą szablonu pojedynczego zasobu udostępnionego i są współużytkowane przez innych szablonów, a szablon zasób udostępniony zostanie wykonany w pierwszym.</span><span class="sxs-lookup"><span data-stu-id="c5676-286">These resources are provisioned using a single shared resource template and are shared by other templates, so the shared resource template is run first.</span></span>

<span data-ttu-id="c5676-287">Niektóre zasoby są wdrażane opcjonalnie niezależnie od określonej konfiguracji znane.</span><span class="sxs-lookup"><span data-stu-id="c5676-287">Some resources are deployed optionally regardless of the specified known configuration.</span></span>

### <a name="shared-resources-template"></a><span data-ttu-id="c5676-288">Udostępnione zasoby szablonu</span><span class="sxs-lookup"><span data-stu-id="c5676-288">Shared resources template</span></span>
<span data-ttu-id="c5676-289">Ten szablon udostępnia zasoby, które są wspólne dla wszystkich znanych konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="c5676-289">This template delivers resources that are common across all known configurations.</span></span> <span data-ttu-id="c5676-290">Zawiera sieć wirtualną, zestawów dostępności i inne zasoby, które są wymagane niezależnie od tego szablonu znanej konfiguracji, które zostało wdrożone.</span><span class="sxs-lookup"><span data-stu-id="c5676-290">It contains the virtual network, availability sets, and other resources that are required regardless of the known configuration template that is deployed.</span></span>

![Zasobów szablonu](./media/best-practices-resource-manager-design-templates/template-resources.png)

<span data-ttu-id="c5676-292">**Udostępnione zasoby szablonu**</span><span class="sxs-lookup"><span data-stu-id="c5676-292">**Shared resources template**</span></span>

<span data-ttu-id="c5676-293">Nazwy zasobów, takie jak nazwa sieci wirtualnej, są oparte na szablonie głównym.</span><span class="sxs-lookup"><span data-stu-id="c5676-293">Resource names, such as the virtual network name, are based on the main template.</span></span> <span data-ttu-id="c5676-294">Można określić je jako zmienną w obrębie tego szablonu lub ich odbierania jako parametr użytkownika, zgodnie z wymaganiami organizacji.</span><span class="sxs-lookup"><span data-stu-id="c5676-294">You can specify them as a variable within that template or receive them as a parameter from the user, as required by your organization.</span></span>

### <a name="optional-resources-template"></a><span data-ttu-id="c5676-295">Opcjonalne zasoby szablonu</span><span class="sxs-lookup"><span data-stu-id="c5676-295">Optional resources template</span></span>
<span data-ttu-id="c5676-296">Szablon opcjonalnych zasobów zawiera zasoby programowe wdrażane na podstawie wartości parametr lub zmienna.</span><span class="sxs-lookup"><span data-stu-id="c5676-296">The optional resources template contains resources that are programmatically deployed based on the value of a parameter or variable.</span></span>

![Opcjonalne zasoby](./media/best-practices-resource-manager-design-templates/optional-resources.png)

<span data-ttu-id="c5676-298">**Opcjonalne zasoby szablonu**</span><span class="sxs-lookup"><span data-stu-id="c5676-298">**Optional resources template**</span></span>

<span data-ttu-id="c5676-299">Na przykład umożliwia szablonu zasobów opcjonalnie skonfigurować jumpbox, który umożliwia bezpośredni dostęp do wdrożonych środowisko z publicznej sieci Internet.</span><span class="sxs-lookup"><span data-stu-id="c5676-299">For example, you can use an optional resources template to configure a jumpbox that enables indirect access to a deployed environment from the public Internet.</span></span> <span data-ttu-id="c5676-300">Określa, czy powinno być włączone jumpbox użyje parametr lub zmienna i *concat* funkcji do kompilacji docelową nazwę dla szablonu, takie jak *jumpbox_enabled.json*.</span><span class="sxs-lookup"><span data-stu-id="c5676-300">You would use a parameter or variable to identify whether the jumpbox should be enabled and the *concat* function to build the target name for the template, such as *jumpbox_enabled.json*.</span></span> <span data-ttu-id="c5676-301">Łączenie szablonu czy należy zainstalować jumpbox wynikowy zmiennej.</span><span class="sxs-lookup"><span data-stu-id="c5676-301">Template linking would use the resulting variable to install the jumpbox.</span></span>

<span data-ttu-id="c5676-302">Możesz połączyć szablonu opcjonalnych zasobów z wielu miejscach:</span><span class="sxs-lookup"><span data-stu-id="c5676-302">You can link the optional resources template from multiple places:</span></span>

* <span data-ttu-id="c5676-303">W razie potrzeby do każdego wdrożenia połączyć oparte na parametr szablonu zasobów udostępnionych.</span><span class="sxs-lookup"><span data-stu-id="c5676-303">When applicable to every deployment, create a parameter-driven link from the shared resources template.</span></span>
* <span data-ttu-id="c5676-304">W razie potrzeby zaznacz znanych konfiguracji — na przykład zainstalować tylko w dużych wdrożeniach — połączyć oparte na parametr lub zmienna zmiennych szablonu znanej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="c5676-304">When applicable to select known configurations—for example, only install on large deployments—create a parameter-driven or variable-driven link from the known configuration template.</span></span>

<span data-ttu-id="c5676-305">Określa, czy dany zasób jest opcjonalny mogą nie kierować konsumenta szablonu tylko przez dostawcę szablonu.</span><span class="sxs-lookup"><span data-stu-id="c5676-305">Whether a given resource is optional may not be driven by the template consumer but instead by the template provider.</span></span> <span data-ttu-id="c5676-306">Na przykład może wymagać spełniają wymagania danego produktu lub dodatek produktu (wspólne dla woluminów CSV) lub do wymuszania zasad (w przypadku SIs i rozwiązaniami INFORMATYCZNYMI dla firm grupy).</span><span class="sxs-lookup"><span data-stu-id="c5676-306">For example, you may need to satisfy a particular product requirement or product add-on (common for CSVs) or to enforce policies (common for SIs and enterprise IT groups).</span></span> <span data-ttu-id="c5676-307">W takich przypadkach można użyć zmiennej określa, czy zasób powinny zostać wdrożone.</span><span class="sxs-lookup"><span data-stu-id="c5676-307">In these cases, you can use a variable to identify whether the resource should be deployed.</span></span>

### <a name="known-configuration-resources-template"></a><span data-ttu-id="c5676-308">Szablon zasobów znanej konfiguracji</span><span class="sxs-lookup"><span data-stu-id="c5676-308">Known configuration resources template</span></span>
<span data-ttu-id="c5676-309">W szablonie głównym parametru może być narażony na Zezwalaj szablon konsumenta Określ żądany znanej konfiguracji do wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="c5676-309">In the main template, a parameter can be exposed to allow the template consumer to specify a desired known configuration to deploy.</span></span> <span data-ttu-id="c5676-310">Często ta konfiguracja znane korzysta z podejścia rozmiar obrazów na koszulki z zestawem rozmiary stałym konfiguracji, takie jak piaskownicy, małe, średnie i duże.</span><span class="sxs-lookup"><span data-stu-id="c5676-310">Often, this known configuration uses a t-shirt size approach with a set of fixed configuration sizes such as sandbox, small, medium, and large.</span></span>

![Zasoby znanej konfiguracji](./media/best-practices-resource-manager-design-templates/known-config.png)

<span data-ttu-id="c5676-312">**Szablon zasobów znanej konfiguracji**</span><span class="sxs-lookup"><span data-stu-id="c5676-312">**Known configuration resources template**</span></span>

<span data-ttu-id="c5676-313">Podejście rozmiar obrazów na koszulki to powszechnie używane, ale parametry może reprezentować dowolny zbiór znanych konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="c5676-313">The t-shirt size approach is commonly used, but the parameters can represent any set of known configurations.</span></span> <span data-ttu-id="c5676-314">Na przykład można określić zestaw środowisk dla aplikacji przedsiębiorstwa, takich jak projektowanie, testów i produktu.</span><span class="sxs-lookup"><span data-stu-id="c5676-314">For example, you can specify a set of environments for an enterprise application such as Development, Test, and Product.</span></span> <span data-ttu-id="c5676-315">Można także użyć go do usługi w chmurze do reprezentowania różnych jednostek, wersje produktu lub konfiguracje produktu, takie jak społeczności deweloperów i Enterprise.</span><span class="sxs-lookup"><span data-stu-id="c5676-315">Or you could use it for a cloud service to represent different scale units, product versions, or product configurations such as Community, Developer, or Enterprise.</span></span>

<span data-ttu-id="c5676-316">Podobnie jak w przypadku szablonu zasobów udostępnionych zmiennych są przekazywane do szablonu znanych konfiguracji z poziomu:</span><span class="sxs-lookup"><span data-stu-id="c5676-316">As with the shared resource template, variables are passed to the known configurations template from either:</span></span>

* <span data-ttu-id="c5676-317">Użytkownik końcowy — czyli parametry, które zostały wysłane do szablonu głównego.</span><span class="sxs-lookup"><span data-stu-id="c5676-317">An end user—that is, the parameters sent to the main template.</span></span>
* <span data-ttu-id="c5676-318">Organizacja — czyli zmienne w szablonie głównym reprezentujących wymagań wewnętrznych lub zasad.</span><span class="sxs-lookup"><span data-stu-id="c5676-318">An organization—that is, the variables in the main template that represent internal requirements or policies.</span></span>

### <a name="member-resources-template"></a><span data-ttu-id="c5676-319">Szablon elementu członkowskiego zasobów</span><span class="sxs-lookup"><span data-stu-id="c5676-319">Member resources template</span></span>
<span data-ttu-id="c5676-320">W znanej konfiguracji co najmniej jednego elementu członkowskiego typu węzła często są dołączone.</span><span class="sxs-lookup"><span data-stu-id="c5676-320">Within a known configuration, one or more member node types are often included.</span></span> <span data-ttu-id="c5676-321">Na przykład z platformą Hadoop masz węzłów głównych i węzły danych.</span><span class="sxs-lookup"><span data-stu-id="c5676-321">For example, with Hadoop you have master nodes and data nodes.</span></span> <span data-ttu-id="c5676-322">Jeśli instalujesz bazy danych MongoDB ma węzły danych i kryterium.</span><span class="sxs-lookup"><span data-stu-id="c5676-322">If you are installing MongoDB, you have data nodes and an arbiter.</span></span> <span data-ttu-id="c5676-323">Jeśli wdrażasz DataStax masz węzły danych i maszyny Wirtualnej z OpsCenter zainstalowane.</span><span class="sxs-lookup"><span data-stu-id="c5676-323">If you are deploying DataStax, you have data nodes and a VM with OpsCenter installed.</span></span>

![Elementy członkowskie zasobów](./media/best-practices-resource-manager-design-templates/member-resources.png)

<span data-ttu-id="c5676-325">**Szablon elementu członkowskiego zasobów**</span><span class="sxs-lookup"><span data-stu-id="c5676-325">**Member resources template**</span></span>

<span data-ttu-id="c5676-326">Każdy typ węzłów może mieć różne rozmiary maszyn wirtualnych, liczba dołączonych dysków, skryptów do instalowania i konfigurowania węzłów, konfiguracji portów dla maszyn wirtualnych, liczbę wystąpień oraz innych szczegółów.</span><span class="sxs-lookup"><span data-stu-id="c5676-326">Each type of nodes can have different sizes of VMs, numbers of attached disks, scripts to install and set up the nodes, port configurations for the VMs, number of instances, and other details.</span></span> <span data-ttu-id="c5676-327">Dlatego każdy typ węzła pobiera jej członka zasobu szablon, który zawiera szczegóły dotyczące wdrażania i konfigurowania infrastruktury, a także wykonywanie skryptów do wdrożenia i skonfigurowania oprogramowania w ramach maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="c5676-327">So each node type gets its own member resource template, which contains the details for deploying and configuring an infrastructure as well as executing scripts to deploy and configure software within the VM.</span></span>

<span data-ttu-id="c5676-328">Dla maszyn wirtualnych zazwyczaj dwa typy skryptów są używane, powszechnie wielokrotnego użytku i niestandardowych skryptów.</span><span class="sxs-lookup"><span data-stu-id="c5676-328">For VMs, typically two types of scripts are used, widely reusable and custom scripts.</span></span>

### <a name="widely-reusable-scripts"></a><span data-ttu-id="c5676-329">Skrypty powszechnie wielokrotnego użytku</span><span class="sxs-lookup"><span data-stu-id="c5676-329">Widely reusable scripts</span></span>
<span data-ttu-id="c5676-330">Można używać skryptów powszechnie wielokrotnego użytku przez wiele typów szablonów.</span><span class="sxs-lookup"><span data-stu-id="c5676-330">Widely reusable scripts can be used across multiple types of templates.</span></span> <span data-ttu-id="c5676-331">Skonfigurowanie jednego lepsze Przykłady te skrypty powszechnie wielokrotnego użytku RAID w systemie Linux w puli dysków i uzyskać większą liczbę IOPS.</span><span class="sxs-lookup"><span data-stu-id="c5676-331">One of the better examples of these widely reusable scripts sets up RAID on Linux to pool disks and gain a greater number of IOPS.</span></span> <span data-ttu-id="c5676-332">Niezależnie od tego, oprogramowanie instalowane na maszynie wirtualnej skrypt umożliwia ponowne użycie sprawdzonych rozwiązań dla typowych scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="c5676-332">Regardless of the software being installed in the VM, this script provides reuse of proven practices for common scenarios.</span></span>

![Skryptów wielokrotnego użytku](./media/best-practices-resource-manager-design-templates/reusable-scripts.png)

<span data-ttu-id="c5676-334">**Szablony zasobów Członkowskich można wywołać skryptów powszechnie wielokrotnego użytku**</span><span class="sxs-lookup"><span data-stu-id="c5676-334">**Member resources templates can call widely reusable scripts**</span></span>

### <a name="custom-scripts"></a><span data-ttu-id="c5676-335">Niestandardowych skryptów</span><span class="sxs-lookup"><span data-stu-id="c5676-335">Custom scripts</span></span>
<span data-ttu-id="c5676-336">Szablony zwykle wywołać co najmniej jeden skrypty, które Instalowanie i konfigurowanie oprogramowania w maszynach wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="c5676-336">Templates commonly call one or more scripts that install and configure software within VMs.</span></span> <span data-ttu-id="c5676-337">Wspólnego wzorca jest widoczna w dużych topologiach wdrożonym wielu wystąpień co najmniej jeden typ elementu członkowskiego.</span><span class="sxs-lookup"><span data-stu-id="c5676-337">A common pattern is seen with large topologies where multiple instances of one or more member types are deployed.</span></span> <span data-ttu-id="c5676-338">Skrypt instalacji jest inicjowane dla każdej maszyny Wirtualnej, które mogą być wykonywane równolegle, następuje skrypt instalacji, który jest wywoływana po wdrożeniu wszystkich maszyn wirtualnych (lub wszystkich maszyn wirtualnych typu danego elementu członkowskiego).</span><span class="sxs-lookup"><span data-stu-id="c5676-338">An installation script is initiated for every VM that can be run in parallel, followed by a setup script that is called after all VMs (or all VMs of a given member type) are deployed.</span></span>

![Niestandardowych skryptów](./media/best-practices-resource-manager-design-templates/custom-scripts.png)

<span data-ttu-id="c5676-340">**Szablony zasobów Członkowskich można wywołać skryptów do określonego celu, takie jak konfiguracja maszyny Wirtualnej**</span><span class="sxs-lookup"><span data-stu-id="c5676-340">**Member resources templates can call scripts for a specific purpose such as VM configuration**</span></span>

## <a name="capability-scoped-solution-template-example---redis"></a><span data-ttu-id="c5676-341">Przykład szablonu zakres możliwości rozwiązania — Redis</span><span class="sxs-lookup"><span data-stu-id="c5676-341">Capability-scoped solution template example - Redis</span></span>
<span data-ttu-id="c5676-342">Aby pokazać, jak implementacja może działać, Przyjrzyjmy się praktycznym przykładem tworzenia szablonu, który ułatwia wdrożenie i konfigurację pamięci podręcznej Redis w standardowe rozmiary obrazów na koszulki.</span><span class="sxs-lookup"><span data-stu-id="c5676-342">To show how an implementation might work, let's look at a practical example of building a template that facilitates the deployment and configuration of Redis in standard t-shirt sizes.</span></span>  

<span data-ttu-id="c5676-343">Dla wdrożenia ma zestaw zasobów udostępnionych (sieci wirtualne, konta magazynu, zestawów dostępności) i opcjonalnie zasobów (jumpbox).</span><span class="sxs-lookup"><span data-stu-id="c5676-343">For the deployment, there are a set of shared resources (virtual network, storage account, availability sets) and an optional resource (jumpbox).</span></span> <span data-ttu-id="c5676-344">Istnieją znane konfiguracji z wieloma reprezentowane jako rozmiary obrazów na koszulki (małe, średnie, duża), ale każdego z jednego węzła typu.</span><span class="sxs-lookup"><span data-stu-id="c5676-344">There are multiple known configurations represented as t-shirt sizes (small, medium, large) but each with a single node type.</span></span> <span data-ttu-id="c5676-345">Istnieją również dwa skrypty specyficzne dla celu (instalacji, konfiguracji).</span><span class="sxs-lookup"><span data-stu-id="c5676-345">There are also two purpose-specific scripts (installation, configuration).</span></span>

### <a name="creating-the-template-files"></a><span data-ttu-id="c5676-346">Tworzenie plików szablonu</span><span class="sxs-lookup"><span data-stu-id="c5676-346">Creating the template files</span></span>
<span data-ttu-id="c5676-347">Należy utworzyć szablon głównego o nazwie azuredeploy.json.</span><span class="sxs-lookup"><span data-stu-id="c5676-347">You would create a Main Template named azuredeploy.json.</span></span>

<span data-ttu-id="c5676-348">Utwórz szablon zasobów o nazwie resources.json udostępnionych</span><span class="sxs-lookup"><span data-stu-id="c5676-348">You create Shared Resources Template named shared-resources.json</span></span>

<span data-ttu-id="c5676-349">Tworzenie szablonu zasobów opcjonalne włączyć wdrożenie jumpbox, o nazwie jumpbox_enabled.json</span><span class="sxs-lookup"><span data-stu-id="c5676-349">You create an Optional Resource Template to enable the deployment of a jumpbox, named jumpbox_enabled.json</span></span>

<span data-ttu-id="c5676-350">Redis używa tylko jednego węzła o typie, utworzyć szablon pojedynczego zasobu elementu członkowskiego o nazwie resources.json węzła.</span><span class="sxs-lookup"><span data-stu-id="c5676-350">Redis uses just a single node type, so you create a single Member Resource Template named node-resources.json.</span></span>

<span data-ttu-id="c5676-351">Z pamięci podręcznej Redis, dla których chcesz zainstalować każdego indywidualnego węzła, a następnie ponowne skonfigurowanie klastra.</span><span class="sxs-lookup"><span data-stu-id="c5676-351">With Redis, you want to install each individual node, and then set up the cluster.</span></span>  <span data-ttu-id="c5676-352">Masz skrypty w celu uwzględnienia instalacja i konfigurowanie, redis klastra install.sh i setup.sh-redis klastra.</span><span class="sxs-lookup"><span data-stu-id="c5676-352">You have scripts to accommodate the installation and set up, redis-cluster-install.sh and redis-cluster-setup.sh.</span></span>

### <a name="linking-the-templates"></a><span data-ttu-id="c5676-353">Łączenie z szablonów</span><span class="sxs-lookup"><span data-stu-id="c5676-353">Linking the templates</span></span>
<span data-ttu-id="c5676-354">Przy użyciu szablonu łączenie łącza szablonu głównego się do szablonu zasobów udostępnionych, który określa sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="c5676-354">Using template linking, the main template links out to the shared resources template, which establishes the virtual network.</span></span>

<span data-ttu-id="c5676-355">Logika jest dodawany w szablonie głównym umożliwiające konsumentów szablonu określić, czy jumpbox powinny zostać wdrożone.</span><span class="sxs-lookup"><span data-stu-id="c5676-355">Logic is added within the main template to enable consumers of the template to specify whether a jumpbox should be deployed.</span></span> <span data-ttu-id="c5676-356">*Włączone* wartość *EnableJumpbox* parametr wskazuje, że odbiorca chce wdrożyć jumpbox.</span><span class="sxs-lookup"><span data-stu-id="c5676-356">An *enabled* value for the *EnableJumpbox* parameter indicates that the customer wants to deploy a jumpbox.</span></span> <span data-ttu-id="c5676-357">Gdy ta wartość zostanie podana, szablon łączy *_enabled* sufiks na nazwę szablonu podstawowego dla funkcji jumpbox.</span><span class="sxs-lookup"><span data-stu-id="c5676-357">When this value is provided, the template concatenates *_enabled* as a suffix to a base template name for the jumpbox capability.</span></span>

<span data-ttu-id="c5676-358">Zastosowanie szablonu głównego *dużych* wartość parametru sufiks na nazwę szablonu podstawowego rozmiary obrazów na koszulki, a następnie używa tej wartości w łącze szablonu wychodzących do *technology_on_os_large.json*.</span><span class="sxs-lookup"><span data-stu-id="c5676-358">The main template applies the *large* parameter value as a suffix to a base template name for t-shirt sizes, and then uses that value in a template link out to *technology_on_os_large.json*.</span></span>

<span data-ttu-id="c5676-359">Topologia będzie wyglądać na tej ilustracji.</span><span class="sxs-lookup"><span data-stu-id="c5676-359">The topology would resemble this illustration.</span></span>

![Redis szablonu](./media/best-practices-resource-manager-design-templates/redis-template.png)

<span data-ttu-id="c5676-361">**Struktura szablonu dla szablonu Redis**</span><span class="sxs-lookup"><span data-stu-id="c5676-361">**Template structure for a Redis template**</span></span>

### <a name="configuring-state"></a><span data-ttu-id="c5676-362">Konfigurowanie stanu</span><span class="sxs-lookup"><span data-stu-id="c5676-362">Configuring state</span></span>
<span data-ttu-id="c5676-363">Dla węzłów w klastrze należy wykonać dwie czynności w przypadku konfigurowania stanu, zarówno reprezentowany przez skrypty określonego celu.</span><span class="sxs-lookup"><span data-stu-id="c5676-363">For the nodes in the cluster, there are two steps to configuring the state, both represented by Purpose Specific Scripts.</span></span>  <span data-ttu-id="c5676-364">Redis instaluje "redis klastra install.sh" i "redis klastra setup.sh" Ustawia klaster.</span><span class="sxs-lookup"><span data-stu-id="c5676-364">"redis-cluster-install.sh" installs Redis and "redis-cluster-setup.sh" sets up the cluster.</span></span>

### <a name="supporting-different-size-deployments"></a><span data-ttu-id="c5676-365">Obsługa wdrożeń inny rozmiar</span><span class="sxs-lookup"><span data-stu-id="c5676-365">Supporting Different Size Deployments</span></span>
<span data-ttu-id="c5676-366">Wewnątrz zmiennych szablonu rozmiar obrazów na koszulki określa liczbę węzłów każdego typu wdrożenia dla określonego rozmiaru (*dużych*).</span><span class="sxs-lookup"><span data-stu-id="c5676-366">Inside variables, the t-shirt size template specifies the number of nodes of each type to deploy for the specified size (*large*).</span></span> <span data-ttu-id="c5676-367">Następnie wdraża tej liczby wystąpień maszyn wirtualnych przy użyciu pętli zasobów, zapewniając unikatowe nazwy do zasobów przez dodanie nazwy węzła z liczbą sekwencji liczbową z *copyIndex()*.</span><span class="sxs-lookup"><span data-stu-id="c5676-367">It then deploys that number of VM instances using resource loops, providing unique names to resources by appending a node name with a numeric sequence number from *copyIndex()*.</span></span> <span data-ttu-id="c5676-368">Te kroki dla strefy zarówno gorącego i ciepłych maszyn wirtualnych, pojawia się zgodnie z definicją w szablonie nazwy obrazów na koszulki</span><span class="sxs-lookup"><span data-stu-id="c5676-368">It does these steps for both hot and warm zone VMs, as defined in the t-shirt name template</span></span>

## <a name="decomposition-and-end-to-end-solution-scoped-templates"></a><span data-ttu-id="c5676-369">Szablony rozwiązania w zakresie dekompozycji i end-to-end</span><span class="sxs-lookup"><span data-stu-id="c5676-369">Decomposition and end-to-end solution scoped templates</span></span>
<span data-ttu-id="c5676-370">Szablon rozwiązania w zakresie rozwiązania end-to-end koncentruje się na dostarczanie rozwiązania end-to-end.</span><span class="sxs-lookup"><span data-stu-id="c5676-370">A solution template with an end-to-end solution scope is focused on delivering an end-to-end solution.</span></span>  <span data-ttu-id="c5676-371">Ta metoda jest zwykle kompozycji wielu szablonów zakres możliwości dodatkowe zasoby, logiki i stanu.</span><span class="sxs-lookup"><span data-stu-id="c5676-371">This approach is typically a composition of multiple capability-scoped templates with additional resources, logic, and state.</span></span>

<span data-ttu-id="c5676-372">Jak wyróżniono na poniższej ilustracji ten sam model używane dla szablonów możliwości zakres zostanie rozszerzony na użytek szablonów w zakresie rozwiązania End-to-End.</span><span class="sxs-lookup"><span data-stu-id="c5676-372">As highlighted in the image below, the same model used for capability scoped templates is extended for templates with an End-to-End Solution Scope.</span></span>

<span data-ttu-id="c5676-373">Udostępnione zasoby szablonu i opcjonalnie szablony zasobów pełnią taką samą funkcję jak pojemność i możliwości zakres podejścia szablonu, ale są w zakresie kompleksowe rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="c5676-373">A Shared Resources Template and Optional Resources Templates serve the same function as in the capacity and capability scoped template approaches, but are scoped for the end to end solution.</span></span>

<span data-ttu-id="c5676-374">Kompleksowe rozwiązanie zakres szablonów również można zwykle mają rozmiary obrazów na koszulki, szablon znanych zasobów konfiguracji odzwierciedla, co jest wymagane dla danej konfiguracji znane rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="c5676-374">As end to end solution scoped templates also can typically have t-shirt sizes, the Known Configuration Resources template reflects what is required for a given known configuration of the solution.</span></span>

<span data-ttu-id="c5676-375">Łącza znane konfiguracji szablonu zasobów do jednego lub więcej możliwości zakresu szablony rozwiązań, które mają zastosowanie do pełnego rozwiązania, a także szablony zasobów — członek, która jest wymagana dla kompleksowe rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="c5676-375">The Known Configuration Resources Template links to one or more capability scoped solution templates that are relevant to the end to end solution as well as the Member Resource Templates that are required for the end to end solution.</span></span>

<span data-ttu-id="c5676-376">Jak rozmiar koszulki rozwiązania może być inna niż poszczególnych szablon zakres możliwości, zmienne w szablonie znanych zasobów konfiguracji są używane do podaj odpowiednie wartości dla szablonów rozwiązania możliwości podrzędny zakres należy wdrożyć odpowiedni rozmiar koszulki.</span><span class="sxs-lookup"><span data-stu-id="c5676-376">As the t-shirt size of the solution may be different than the individual capability-scoped template, variables within the Known Configuration Resources Template are used to provide the appropriate values for downstream capability scoped solution templates to deploy the appropriate t-shirt size.</span></span>

![End-to-end](./media/best-practices-resource-manager-design-templates/end-to-end.png)

<span data-ttu-id="c5676-378">**Model używany dla możliwości zakresu rozwiązania, które można łatwo rozszerzyć szablony dla zakresów szablonu kompleksowe rozwiązania**</span><span class="sxs-lookup"><span data-stu-id="c5676-378">**The model used for capacity or capability scoped solution templates can be readily extended for end to end solution template scopes**</span></span>

## <a name="preparing-templates-for-the-marketplace"></a><span data-ttu-id="c5676-379">Przygotowywanie szablony do witryny Marketplace</span><span class="sxs-lookup"><span data-stu-id="c5676-379">Preparing templates for the Marketplace</span></span>
<span data-ttu-id="c5676-380">Łatwo poprzedniego podejście bierze pod uwagę scenariusze miejscu przedsiębiorstwa, SIs i woluminów CSV do wdrażania szablonów, samodzielnie lub ich klienci mogą wdrożyć własne.</span><span class="sxs-lookup"><span data-stu-id="c5676-380">The preceding approach readily accommodates scenarios where Enterprises, SIs, and CSVs want to either deploy the templates themselves or enable their customers to deploy on their own.</span></span>

<span data-ttu-id="c5676-381">Żądana innego, że scenariusza wdrożenia szablonu za pomocą portalu marketplace.</span><span class="sxs-lookup"><span data-stu-id="c5676-381">Another desired scenario is deploying a template via the marketplace.</span></span>  <span data-ttu-id="c5676-382">Takie podejście dekompozycji działa w przypadku witryny marketplace, jak również z niewielkimi zmianami.</span><span class="sxs-lookup"><span data-stu-id="c5676-382">This decomposition approach works for the marketplace as well, with some minor changes.</span></span>

<span data-ttu-id="c5676-383">Jak wspomniano wcześniej, szablonów można można użyć do zaoferowania wdrożenia różne typy dla sprzedaży w witrynie marketplace.</span><span class="sxs-lookup"><span data-stu-id="c5676-383">As mentioned previously, templates can be used to offer distinct deployment types for sale in the marketplace.</span></span> <span data-ttu-id="c5676-384">Typy wdrożeń różne może być rozmiary obrazów na koszulki (małe, średnie, duża), typ produktu/odbiorców (społeczności, developer i enterprise) lub typu funkcji (podstawowe o wysokiej dostępności).</span><span class="sxs-lookup"><span data-stu-id="c5676-384">Distinct deployment types may be t-shirt sizes (small, medium, large), product/audience type (community, developer, enterprise), or feature type (basic, high availability).</span></span>

<span data-ttu-id="c5676-385">Jak pokazano poniżej, kompleksowe rozwiązania lub szablonów zakres możliwości mogą zostać łatwo użyte listy różnych konfiguracji znane w witrynie marketplace.</span><span class="sxs-lookup"><span data-stu-id="c5676-385">As shown below, the existing end to end solution or capability scoped templates can be readily utilized to list the different known configurations in the marketplace.</span></span>

<span data-ttu-id="c5676-386">Parametry szablonu głównego są najpierw zmodyfikowane w celu usunięcia przychodzących parametr o nazwie tshirtSize.</span><span class="sxs-lookup"><span data-stu-id="c5676-386">The parameters to the main template are first modified to remove the inbound parameter named tshirtSize.</span></span>

<span data-ttu-id="c5676-387">Podczas mapowania typów wdrożenia różne znane konfiguracji szablonu zasobów, muszą wspólnych zasobów i można znaleźć w szablonie zasobów udostępnionych i potencjalnie te w opcjonalne szablony zasobów konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="c5676-387">While the distinct deployment types map to the Known Configuration Resources Template, they also need the common resources and configuration found in the Shared Resources Template and potentially those in Optional Resource Templates.</span></span>

<span data-ttu-id="c5676-388">Jeśli chcesz opublikować szablon do witryny marketplace, należy ustanowić różne kopie Main szablonu zastępującym wcześniej dostępne dla ruchu przychodzącego parametr tshirtSize ze zmienną osadzone w szablonie.</span><span class="sxs-lookup"><span data-stu-id="c5676-388">If you want to publish your template to the marketplace, you establish distinct copies of your Main template that replaces the previously available inbound parameter of tshirtSize to a variable embedded within the template.</span></span>

![Portal Marketplace](./media/best-practices-resource-manager-design-templates/marketplace.png)

<span data-ttu-id="c5676-390">**Dostosowania rozwiązania o zakresie szablonu witryny marketplace**</span><span class="sxs-lookup"><span data-stu-id="c5676-390">**Adapting a solution scoped template for the marketplace**</span></span>

## <a name="next-steps"></a><span data-ttu-id="c5676-391">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="c5676-391">Next steps</span></span>
* <span data-ttu-id="c5676-392">Aby dowiedzieć się więcej na temat udostępniania stanu do i z szablonów, zobacz [udostępniania stanu w szablonach usługi Azure Resource Manager](best-practices-resource-manager-state.md).</span><span class="sxs-lookup"><span data-stu-id="c5676-392">To learn about sharing state into and out of templates, see [Sharing state in Azure Resource Manager templates](best-practices-resource-manager-state.md).</span></span>
* <span data-ttu-id="c5676-393">Aby uzyskać instrukcje dla przedsiębiorstw dotyczące użycia usługi Resource Manager w celu efektywnego zarządzania subskrypcjami, zobacz [Azure enterprise scaffold - prescriptive subscription governance](resource-manager-subscription-governance.md) (Szkielet platformy Azure dla przedsiębiorstwa — narzucony nadzór subskrypcji).</span><span class="sxs-lookup"><span data-stu-id="c5676-393">For guidance on how enterprises can use Resource Manager to effectively manage subscriptions, see [Azure enterprise scaffold - prescriptive subscription governance](resource-manager-subscription-governance.md).</span></span>

