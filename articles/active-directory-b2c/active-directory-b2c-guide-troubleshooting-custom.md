---
title: "Usługa Azure Active Directory B2C: Rozwiązywanie problemów dotyczących zasad niestandardowych | Dokumentacja firmy Microsoft"
description: "Więcej informacji na temat podejścia toosolving błędy podczas pracy z niestandardowych zasad w usłudze Azure Active Directory."
services: active-directory-b2c
documentationcenter: 
author: rojasja
manager: krassk
editor: rojasja
ms.assetid: 
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/07/2017
ms.author: joroja
ms.openlocfilehash: b9e1b46df1ddb29cdb90953e4a0d6f1dd085441f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-azure-ad-b2c-custom-policies-and-identity-experience-framework"></a><span data-ttu-id="d4e0f-103">Rozwiązywanie problemów z niestandardowych zasad usługi Azure AD B2C i Framework obsługi tożsamości</span><span class="sxs-lookup"><span data-stu-id="d4e0f-103">Troubleshoot Azure AD B2C custom policies and Identity Experience Framework</span></span>

<span data-ttu-id="d4e0f-104">Jeśli używasz usługi Azure Active Directory B2C zasad niestandardowych (Azure AD B2C), mogą pojawić się wyzwania Konfigurowanie hello Framework środowisko tożsamości w formacie XML język zasad.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-104">If you use Azure Active Directory B2C (Azure AD B2C) custom policies, you might experience challenges setting up hello Identity Experience Framework in its policy language XML format.</span></span>  <span data-ttu-id="d4e0f-105">Learning toowrite niestandardowych zasad może być jak uczenia nowego języka.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-105">Learning toowrite custom policies can be like learning a new language.</span></span> <span data-ttu-id="d4e0f-106">W tym artykule opisano narzędzia i wskazówki, które mogą ułatwić szybkie odnajdywanie i rozwiązywania problemów.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-106">In this article, we describe tools and tips that can help you quickly discover and resolve issues.</span></span> 

> [!NOTE]
> <span data-ttu-id="d4e0f-107">Ten artykuł skupia się na rozwiązywaniu problemów z konfiguracją zasad niestandardowych usługi Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-107">This article focuses on troubleshooting your Azure AD B2C custom policy configuration.</span></span> <span data-ttu-id="d4e0f-108">Nie jej adres hello jednostki uzależnionej aplikacji lub jej biblioteki tożsamości.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-108">It doesn't address hello relying party application or its identity library.</span></span>

## <a name="xml-editing"></a><span data-ttu-id="d4e0f-109">Edytowanie XML</span><span class="sxs-lookup"><span data-stu-id="d4e0f-109">XML editing</span></span>

<span data-ttu-id="d4e0f-110">Witaj najczęściej wystąpił błąd podczas konfigurowania niestandardowych zasad jest nieprawidłowo sformatowany XML.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-110">hello most common error in setting up custom policies is improperly formatted XML.</span></span> <span data-ttu-id="d4e0f-111">Niemal ważne jest dobrym edytora XML.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-111">A good XML editor is nearly essential.</span></span> <span data-ttu-id="d4e0f-112">Dobrym edytora XML Wyświetla XML w sposób macierzysty, color-codes zawartości powoduje wstępne wypełnienie typowe terminy, przechowuje elementy XML indeksowane i sprawdzić ze schematem.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-112">A good XML editor displays XML natively, color-codes content, prefills common terms, keeps XML elements indexed, and can validate with schema.</span></span> <span data-ttu-id="d4e0f-113">Poniżej przedstawiono dwa naszych ulubionych edytory XML:</span><span class="sxs-lookup"><span data-stu-id="d4e0f-113">Here are two of our favorite XML editors:</span></span>

* [<span data-ttu-id="d4e0f-114">Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="d4e0f-114">Visual Studio Code</span></span>](https://code.visualstudio.com/)
* [<span data-ttu-id="d4e0f-115">Notatnik ++</span><span class="sxs-lookup"><span data-stu-id="d4e0f-115">Notepad++</span></span>](https://notepad-plus-plus.org/)

<span data-ttu-id="d4e0f-116">Sprawdzanie poprawności schematu XML identyfikuje błędy, aby przesłać plik XML.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-116">XML schema validation identifies errors before you upload your XML file.</span></span> <span data-ttu-id="d4e0f-117">W folderze głównym hello hello początkowego pakietu Pobierz definicję schematu XML hello TrustFrameworkPolicy_0.3.0.0.xsd.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-117">In hello root folder of hello starter pack, get hello XML schema definition TrustFrameworkPolicy_0.3.0.0.xsd.</span></span> <span data-ttu-id="d4e0f-118">Aby uzyskać więcej informacji, w dokumentacji hello w edytorze XML, wyszukaj *narzędzia XML* i *sprawdzanie poprawności kodu XML*.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-118">For more information, in hello documentation of your XML editor, look for *XML tools* and *XML validation*.</span></span>

<span data-ttu-id="d4e0f-119">Przegląd reguł XML może okazać się przydatne.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-119">You might find a review of XML rules helpful.</span></span> <span data-ttu-id="d4e0f-120">Usługa Azure AD B2C odrzuca wszystkie formatowania błędów wykrytych XML.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-120">Azure AD B2C rejects any XML formatting errors that it detects.</span></span> <span data-ttu-id="d4e0f-121">Czasami niepoprawnie sformatowany XML może spowodować komunikaty o błędach, które są błędne.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-121">Occasionally, incorrectly formatted XML might cause error messages that are misleading.</span></span>

## <a name="upload-policies-and-policy-validation"></a><span data-ttu-id="d4e0f-122">Zasady przekazywania i sprawdzanie zasad</span><span class="sxs-lookup"><span data-stu-id="d4e0f-122">Upload policies and policy validation</span></span>

 <span data-ttu-id="d4e0f-123">Sprawdzanie poprawności kodu XML pliku przekazywania odbywa się automatycznie.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-123">XML file upload validation is automatic.</span></span> <span data-ttu-id="d4e0f-124">Większość błędów powodują hello toofail przekazywania.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-124">Most errors cause hello upload toofail.</span></span> <span data-ttu-id="d4e0f-125">Sprawdzanie poprawności obejmuje hello pliku zasad, które przekazujesz.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-125">Validation includes hello policy file that you are uploading.</span></span> <span data-ttu-id="d4e0f-126">Zawiera również łańcucha hello plików hello przekazywanego pliku odwołuje się zbyt (hello jednostki uzależnionej pliku zasad firmy, hello rozszerzeń plików i hello pliku podstawowego).</span><span class="sxs-lookup"><span data-stu-id="d4e0f-126">It also includes hello chain of files hello upload file refers too(hello relying party policy file, hello extensions file, and hello base file).</span></span> 
 
 <span data-ttu-id="d4e0f-127">Typowe błędy sprawdzania poprawności obejmują następujące hello.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-127">Common validation errors include hello following.</span></span>

<span data-ttu-id="d4e0f-128">Fragment kodu błędu:`... makes a reference tooClaimType with id "displaName" but neither hello policy nor any of its base policies contain such an element`</span><span class="sxs-lookup"><span data-stu-id="d4e0f-128">Error snippet: `... makes a reference tooClaimType with id "displaName" but neither hello policy nor any of its base policies contain such an element`</span></span>
* <span data-ttu-id="d4e0f-129">Hello wartość typu oświadczenia mogą być zawiera błąd pisowni lub nie istnieje w schemacie hello.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-129">hello ClaimType value might be misspelled, or does not exist in hello schema.</span></span>
* <span data-ttu-id="d4e0f-130">Typ oświadczenia wartości muszą być zdefiniowane w co najmniej jednego z plików hello w zasadach hello.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-130">ClaimType values must be defined in at least one of hello files in hello policy.</span></span> 
    <span data-ttu-id="d4e0f-131">Na przykład: ` <ClaimType Id="socialIdpUserId">`</span><span class="sxs-lookup"><span data-stu-id="d4e0f-131">For example: ` <ClaimType Id="socialIdpUserId">`</span></span>
* <span data-ttu-id="d4e0f-132">Jeśli typ oświadczenia jest zdefiniowana w pliku rozszerzenia hello, ale jest również używana wartość TechnicalProfile w pliku podstawowego hello, przekazywanie pliku podstawowego hello powoduje błąd.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-132">If ClaimType is defined in hello extensions file, but it's also used in a TechnicalProfile value in hello base file, uploading hello base file results in an error.</span></span>

<span data-ttu-id="d4e0f-133">Fragment kodu błędu:`...makes a reference tooa ClaimsTransformation with id...`</span><span class="sxs-lookup"><span data-stu-id="d4e0f-133">Error snippet: `...makes a reference tooa ClaimsTransformation with id...`</span></span>
* <span data-ttu-id="d4e0f-134">Witaj przyczyny dla hello błąd może być hello takie same jak w przypadku błędu typu oświadczenia hello.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-134">hello causes for hello error might be hello same as for hello ClaimType error.</span></span>

<span data-ttu-id="d4e0f-135">Fragment kodu błędu:`Reason: User is currently logged as a user of 'yourtenant.onmicrosoft.com' tenant. In order toomanage 'yourtenant.onmicrosoft.com', please login as a user of 'yourtenant.onmicrosoft.com' tenant`</span><span class="sxs-lookup"><span data-stu-id="d4e0f-135">Error snippet: `Reason: User is currently logged as a user of 'yourtenant.onmicrosoft.com' tenant. In order toomanage 'yourtenant.onmicrosoft.com', please login as a user of 'yourtenant.onmicrosoft.com' tenant`</span></span>
* <span data-ttu-id="d4e0f-136">Sprawdź tego wartość TenantId hello hello  **\<TrustFrameworkPolicy\>**  i  **\<BasePolicy\>**  elementy zgodne urządzenie docelowe usługi Azure AD B2C Dzierżawca.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-136">Check that hello TenantId value in hello **\<TrustFrameworkPolicy\>** and **\<BasePolicy\>** elements match your target Azure AD B2C tenant.</span></span>  

## <a name="troubleshoot-hello-runtime"></a><span data-ttu-id="d4e0f-137">Rozwiązywanie problemów z hello środowiska wykonawczego</span><span class="sxs-lookup"><span data-stu-id="d4e0f-137">Troubleshoot hello runtime</span></span>

* <span data-ttu-id="d4e0f-138">Użyj `Run Now` i `https://jwt.io` tootest zasad niezależnie od sieci web lub aplikacji mobilnej.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-138">Use `Run Now` and `https://jwt.io` tootest your policies independently of your web or mobile application.</span></span> <span data-ttu-id="d4e0f-139">Ta witryna sieci Web działa jak jednostki uzależnionej aplikacji firmy.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-139">This website acts like a relying party application.</span></span> <span data-ttu-id="d4e0f-140">Wyświetla zawartość hello hello JSON Web Token (JWT) generowany przez zasady usługi Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-140">It displays hello contents of hello JSON Web Token (JWT) that is generated by your Azure AD B2C policy.</span></span> <span data-ttu-id="d4e0f-141">toocreate aplikacja testowa, w ramach obsługi tożsamości, użyj hello następujące wartości:</span><span class="sxs-lookup"><span data-stu-id="d4e0f-141">toocreate a test application in Identity Experience Framework, use hello following values:</span></span>
    * <span data-ttu-id="d4e0f-142">Nazwa: TestApp</span><span class="sxs-lookup"><span data-stu-id="d4e0f-142">Name: TestApp</span></span>
    * <span data-ttu-id="d4e0f-143">Aplikacja/interfejs API sieci Web w sieci Web: nie</span><span class="sxs-lookup"><span data-stu-id="d4e0f-143">Web App/Web API: No</span></span>
    * <span data-ttu-id="d4e0f-144">Aplikacja Native client: nie</span><span class="sxs-lookup"><span data-stu-id="d4e0f-144">Native client: No</span></span>

* <span data-ttu-id="d4e0f-145">tootrace hello wymiana wiadomości między przeglądarki klienta i usługi Azure AD B2C, użyj [Fiddler](http://www.telerik.com/fiddler).</span><span class="sxs-lookup"><span data-stu-id="d4e0f-145">tootrace hello exchange of messages between your client browser and Azure AD B2C, use [Fiddler](http://www.telerik.com/fiddler).</span></span> <span data-ttu-id="d4e0f-146">Może pomóc Ci wskazanie gdzie podróży użytkownika nie działa prawidłowo w krokach Twojej aranżacji.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-146">It can help you get an indication of where your user journey is failing in your orchestration steps.</span></span>

* <span data-ttu-id="d4e0f-147">W **tryb programowania**, użyj **usługi Application Insights** tootrace działania hello podróży Framework obsługi tożsamości użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-147">In **Development mode**, use **Application Insights** tootrace hello activity of your Identity Experience Framework user journey.</span></span> <span data-ttu-id="d4e0f-148">W **tryb programowania**, można obserwować exchange hello oświadczeń między hello Framework obsługi tożsamości i jeśli hello różnych dostawców, którzy są definiowane przez techniczne profile, takie jak dostawców tożsamości, oparty na interfejsach API usług Hello Azure AD B2C katalogu użytkowników i innych usług, takich jak Azure kilku-Factor uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-148">In **Development mode**, you can observe hello exchange of claims between hello Identity Experience Framework and hello various claims providers that are defined by technical profiles, such as identity providers, API-based services, hello Azure AD B2C user directory, and other services, like Azure Multi-Factor-Authentication.</span></span>  

## <a name="recommended-practices"></a><span data-ttu-id="d4e0f-149">Zalecane wskazówki</span><span class="sxs-lookup"><span data-stu-id="d4e0f-149">Recommended practices</span></span>

<span data-ttu-id="d4e0f-150">**Przechowywać wiele wersji scenariuszy. Grupowania ich w projekcie z aplikacją.**</span><span class="sxs-lookup"><span data-stu-id="d4e0f-150">**Keep multiple versions of your scenarios. Group them in a project with your application.**</span></span> <span data-ttu-id="d4e0f-151">Hello base, rozszerzenia i jednostki uzależnionej plików firm są bezpośrednio zależne od siebie nawzajem.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-151">hello base, extensions, and relying party files are directly dependent on each other.</span></span> <span data-ttu-id="d4e0f-152">Zapisz je jako grupa.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-152">Save them as a group.</span></span> <span data-ttu-id="d4e0f-153">Nowe funkcje zostaną dodane zasady tooyour, zachować różne wersje robocze.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-153">As new features are added tooyour policies, keep separate working versions.</span></span> <span data-ttu-id="d4e0f-154">Etap wersji pracy w ramach własnego pliku system z kodem aplikacji hello, które współdziałają z.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-154">Stage working versions in your own file system with hello application code they interact with.</span></span>  <span data-ttu-id="d4e0f-155">Aplikacje mogą wywoływać wiele różnych jednostki uzależnionej zasady firmy, w dzierżawie.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-155">Your applications might invoke many different relying party policies in a tenant.</span></span> <span data-ttu-id="d4e0f-156">Mogą być zależne od hello oświadczenia, które oczekiwane z zasad usługi Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-156">They might become dependent on hello claims that they expect from your Azure AD B2C policies.</span></span>

<span data-ttu-id="d4e0f-157">**Opracowanie i przetestowanie techniczne profile z użyciem podróże znanych użytkowników.**</span><span class="sxs-lookup"><span data-stu-id="d4e0f-157">**Develop and test technical profiles with known user journeys.**</span></span> <span data-ttu-id="d4e0f-158">Użyj przetestowane początkowego pakietu zasady tooset zapasowej profili technicznych.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-158">Use tested starter pack policies tooset up your technical profiles.</span></span> <span data-ttu-id="d4e0f-159">Testowane oddzielnie przed włączyć je do własnych podróże użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-159">Test them separately before you incorporate them into your own user journeys.</span></span>

<span data-ttu-id="d4e0f-160">**Opracowanie i przetestowanie podróże użytkownika z profilami techniczne przetestowane.**</span><span class="sxs-lookup"><span data-stu-id="d4e0f-160">**Develop and test user journeys with tested technical profiles.**</span></span> <span data-ttu-id="d4e0f-161">Zmień kroki aranżacji hello podróży użytkownika przyrostowo.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-161">Change hello orchestration steps of a user journey incrementally.</span></span> <span data-ttu-id="d4e0f-162">Kompilacji stopniowego zamierzonego scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-162">Progressively build your intended scenarios.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d4e0f-163">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="d4e0f-163">Next steps</span></span>

* <span data-ttu-id="d4e0f-164">W usłudze GitHub Pobierz plik zip (https://github.com/Azure-Samples/active-directory-b2c-custom-policy-starterpack/archive/master.zip) [active-directory-b2c-custom-policy-starterpack] hello.</span><span class="sxs-lookup"><span data-stu-id="d4e0f-164">In GitHub, download hello [active-directory-b2c-custom-policy-starterpack] (https://github.com/Azure-Samples/active-directory-b2c-custom-policy-starterpack/archive/master.zip) .zip file.</span></span>
