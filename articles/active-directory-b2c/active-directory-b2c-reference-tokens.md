---
title: "Usługa Azure Active Directory B2C: Token odwołania | Dokumentacja firmy Microsoft"
description: "Witaj typy tokenów wystawionych w usłudze Azure Active Directory B2C"
services: active-directory-b2c
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 6df79878-65cb-4dfc-98bb-2b328055bc2e
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 3/17/2017
ms.author: dastrock
ms.openlocfilehash: 776bc88cc0308875ac6e576f19ac9edf50319d08
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-b2c-token-reference"></a><span data-ttu-id="0c274-103">Usługi Azure AD B2C: Odwołanie Token</span><span class="sxs-lookup"><span data-stu-id="0c274-103">Azure AD B2C: Token reference</span></span>
<span data-ttu-id="0c274-104">Usługa Azure Active Directory B2C (Azure AD B2C) emituje kilka typów tokenów zabezpieczających w czasie przetwarzania każdego [przepływ uwierzytelniania](active-directory-b2c-apps.md).</span><span class="sxs-lookup"><span data-stu-id="0c274-104">Azure Active Directory B2C (Azure AD B2C) emits several types of security tokens as it processes each [authentication flow](active-directory-b2c-apps.md).</span></span> <span data-ttu-id="0c274-105">W tym dokumencie opisano hello format, właściwości zabezpieczeń i zawartości każdego typu tokenu.</span><span class="sxs-lookup"><span data-stu-id="0c274-105">This document describes hello format, security characteristics, and contents of each type of token.</span></span>

## <a name="types-of-tokens"></a><span data-ttu-id="0c274-106">Typy tokenów</span><span class="sxs-lookup"><span data-stu-id="0c274-106">Types of tokens</span></span>
<span data-ttu-id="0c274-107">Usługa Azure AD B2C obsługuje hello [protokół OAuth 2.0](active-directory-b2c-reference-protocols.md), korzystające z obu tokenów dostępu i tokenów odświeżania.</span><span class="sxs-lookup"><span data-stu-id="0c274-107">Azure AD B2C supports hello [OAuth 2.0 authorization protocol](active-directory-b2c-reference-protocols.md), which makes use of both access tokens and refresh tokens.</span></span> <span data-ttu-id="0c274-108">Obsługuje ona również uwierzytelniania i logowania za pomocą [OpenID Connect](active-directory-b2c-reference-protocols.md), który został wprowadzony trzeci typ tokenu: token Identyfikatora hello.</span><span class="sxs-lookup"><span data-stu-id="0c274-108">It also supports authentication and sign-in via [OpenID Connect](active-directory-b2c-reference-protocols.md), which introduces a third type of token: hello ID token.</span></span> <span data-ttu-id="0c274-109">Każdy z tych tokenów jest reprezentowany jako tokenu elementu nośnego.</span><span class="sxs-lookup"><span data-stu-id="0c274-109">Each of these tokens is represented as a bearer token.</span></span>

<span data-ttu-id="0c274-110">Token elementu nośnego jest token zabezpieczający lekkie, że przyznaje hello tooa dostępu "bearer" chronionych zasobów.</span><span class="sxs-lookup"><span data-stu-id="0c274-110">A bearer token is a lightweight security token that grants hello "bearer" access tooa protected resource.</span></span> <span data-ttu-id="0c274-111">elementu nośnego Hello jest każda strona, która może ona powodować hello tokenu.</span><span class="sxs-lookup"><span data-stu-id="0c274-111">hello bearer is any party that can present hello token.</span></span> <span data-ttu-id="0c274-112">Usługi Azure AD muszą najpierw zostać uwierzytelnione strona przed może odbierać tokenu elementu nośnego.</span><span class="sxs-lookup"><span data-stu-id="0c274-112">Azure AD must first authenticate a party before it can receive a bearer token.</span></span> <span data-ttu-id="0c274-113">Jednak jeśli hello wymagane kroki nie są brane toosecure hello token w transmisji i przechowywania, może być przechwycony i używane przez niezamierzone strony.</span><span class="sxs-lookup"><span data-stu-id="0c274-113">But if hello required steps are not taken toosecure hello token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="0c274-114">Niektóre tokeny zabezpieczające mają wbudowany mechanizm nieupoważnione uniemożliwia korzystania z nich, ale tokenów elementu nośnego nie mają ten mechanizm.</span><span class="sxs-lookup"><span data-stu-id="0c274-114">Some security tokens have a built-in mechanism for preventing unauthorized parties from using them, but bearer tokens do not have this mechanism.</span></span> <span data-ttu-id="0c274-115">Muszą one być transportowane w bezpiecznego kanału, takie jak zabezpieczeń warstwy transportu (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="0c274-115">They must be transported in a secure channel, such as transport layer security (HTTPS).</span></span>

<span data-ttu-id="0c274-116">Jeśli token elementu nośnego, są przesyłane poza bezpiecznego kanału, strony złośliwych można używa tokenu hello tooacquire ataku man-in--middle i jego toogain nieautoryzowany dostęp tooa chronionych zasobów.</span><span class="sxs-lookup"><span data-stu-id="0c274-116">If a bearer token is transmitted outside a secure channel, a malicious party can use a man-in-the-middle attack tooacquire hello token and use it toogain unauthorized access tooa protected resource.</span></span> <span data-ttu-id="0c274-117">Witaj, te same zasady zabezpieczeń mają zastosowanie, gdy tokenów elementu nośnego, są przechowywane lub w pamięci podręcznej do późniejszego użycia.</span><span class="sxs-lookup"><span data-stu-id="0c274-117">hello same security principles apply when bearer tokens are stored or cached for later use.</span></span> <span data-ttu-id="0c274-118">Zawsze upewnij się, że aplikacja przesyła i przechowuje tokenów elementu nośnego w bezpieczny sposób.</span><span class="sxs-lookup"><span data-stu-id="0c274-118">Always ensure that your app transmits and stores bearer tokens in a secure manner.</span></span>

<span data-ttu-id="0c274-119">Uwagi dodatkowe zabezpieczenia na tokenów elementu nośnego można znaleźć [RFC 6750 sekcji 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="0c274-119">For additional security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="0c274-120">Wiele z usługi Azure AD B2C wystawia tokeny hello są zaimplementowane jako tokenów sieci web JSON (Jwt).</span><span class="sxs-lookup"><span data-stu-id="0c274-120">Many of hello tokens that Azure AD B2C issues are implemented as JSON web tokens (JWTs).</span></span> <span data-ttu-id="0c274-121">Token JWT jest compact, adres URL bezpiecznego sposób przekazywania informacji między dwiema stronami.</span><span class="sxs-lookup"><span data-stu-id="0c274-121">A JWT is a compact, URL-safe means of transferring information between two parties.</span></span> <span data-ttu-id="0c274-122">Jwt zawierają informacje znane jako oświadczenia.</span><span class="sxs-lookup"><span data-stu-id="0c274-122">JWTs contain information known as claims.</span></span> <span data-ttu-id="0c274-123">Są potwierdzeniami informacji na temat elementów nośnych hello i podmiotu hello hello tokenu.</span><span class="sxs-lookup"><span data-stu-id="0c274-123">These are assertions of information about hello bearer and hello subject of hello token.</span></span> <span data-ttu-id="0c274-124">oświadczenia Hello w Jwt są obiektami JSON, które kodowania i serializację do transmisji.</span><span class="sxs-lookup"><span data-stu-id="0c274-124">hello claims in JWTs are JSON objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="0c274-125">Ponieważ hello Jwt wystawione przez usługi Azure AD B2C podpisany, ale nie są szyfrowane, możesz łatwo sprawdzić zawartość hello JWT toodebug go.</span><span class="sxs-lookup"><span data-stu-id="0c274-125">Because hello JWTs issued by Azure AD B2C are signed but not encrypted, you can easily inspect hello contents of a JWT toodebug it.</span></span> <span data-ttu-id="0c274-126">Dostępnych jest kilka narzędzi który można to zrobić, w tym [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="0c274-126">Several tools are available that can do this, including [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="0c274-127">Aby uzyskać więcej informacji na temat tokenów Jwt, można znaleźć zbyt[specyfikacje JWT](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span><span class="sxs-lookup"><span data-stu-id="0c274-127">For more information about JWTs, refer too[JWT specifications](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="0c274-128">Tokeny Identyfikatora</span><span class="sxs-lookup"><span data-stu-id="0c274-128">ID tokens</span></span>
<span data-ttu-id="0c274-129">Identyfikator tokenu jest formą token zabezpieczający, który odbiera aplikacji z usługi Azure AD B2C hello `authorize` i `token` punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="0c274-129">An ID token is a form of security token that your app receives from hello Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="0c274-130">Identyfikator tokeny są reprezentowane jako [Jwt](#types-of-tokens), i zawierają roszczenia, w której można tooidentify użytkowników w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0c274-130">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use tooidentify users in your app.</span></span> <span data-ttu-id="0c274-131">Gdy tokeny Identyfikatora drogą kupna z hello `authorize` punktu końcowego, są często używane toosign w aplikacjach tooweb użytkowników.</span><span class="sxs-lookup"><span data-stu-id="0c274-131">When ID tokens are acquired from hello `authorize` endpoint, they are often used toosign in users tooweb applications.</span></span> <span data-ttu-id="0c274-132">Gdy tokeny Identyfikatora drogą kupna z hello `token` punktu końcowego, mogą być wysyłane w żądaniach HTTP podczas komunikacji między dwa składniki hello sama aplikacja lub usługa.</span><span class="sxs-lookup"><span data-stu-id="0c274-132">When ID tokens are acquired from hello `token` endpoint, they can be sent in HTTP requests during communication between two components of hello same application or service.</span></span> <span data-ttu-id="0c274-133">Można użyć hello oświadczenia w tokenie identyfikator, zgodnie z własnymi potrzebami.</span><span class="sxs-lookup"><span data-stu-id="0c274-133">You can use hello claims in an ID token as you see fit.</span></span> <span data-ttu-id="0c274-134">Są często używane toodisplay konta informacje lub toomake decyzje dotyczące kontroli dostępu w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0c274-134">They are commonly used toodisplay account information or toomake access control decisions in an app.</span></span>  

<span data-ttu-id="0c274-135">Zalogowano tokeny Identyfikatora, ale obecnie nie są zaszyfrowane.</span><span class="sxs-lookup"><span data-stu-id="0c274-135">ID tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="0c274-136">Gdy aplikację lub interfejsu API odbiera token Identyfikatora, należy [sprawdzanie poprawności podpisu hello](#token-validation) tooprove, który hello tokenu jest autentyczny.</span><span class="sxs-lookup"><span data-stu-id="0c274-136">When your app or API receives an ID token, it must [validate hello signature](#token-validation) tooprove that hello token is authentic.</span></span> <span data-ttu-id="0c274-137">Aplikację lub interfejsu API należy zweryfikować kilka oświadczeń w hello tooprove tokenu jest nieprawidłowy.</span><span class="sxs-lookup"><span data-stu-id="0c274-137">Your app or API must also validate a few claims in hello token tooprove that it is valid.</span></span> <span data-ttu-id="0c274-138">W zależności od wymagań scenariusza hello, może się różnić oświadczeń hello zweryfikowany przez aplikację, ale aplikacji należy wykonać niektóre [typowych operacji sprawdzania poprawności oświadczeń](#token-validation) w każdym scenariuszu.</span><span class="sxs-lookup"><span data-stu-id="0c274-138">Depending on hello scenario requirements, hello claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="0c274-139">Przykładowy identyfikator token</span><span class="sxs-lookup"><span data-stu-id="0c274-139">Sample ID token</span></span>
```
// Line breaks for display purposes only

eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IklkVG9rZW5TaWduaW5nS2V5Q29udGFpbmVyIn0.
eyJleHAiOjE0NDIzNjAwMzQsIm5iZiI6MTQ0MjM1NjQzNCwidmVyIjoiMS4wIiwiaXNzIjoiaHR0cHM6Ly9s
b2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLzc3NTUyN2ZmLTlhMzctNDMwNy04YjNkLWNjMzExZjU4ZDkyNS92
Mi4wLyIsImFjciI6ImIyY18xX3NpZ25faW5fc3RvY2siLCJzdWIiOiJOb3Qgc3VwcG9ydGVkIGN1cnJlbnRs
eS4gVXNlIG9pZCBjbGFpbS4iLCJhdWQiOiI5MGMwZmU2My1iY2YyLTQ0ZDUtOGZiNy1iOGJiYzBiMjlkYzYi
LCJpYXQiOjE0NDIzNTY0MzQsImF1dGhfdGltZSI6MTQ0MjM1NjQzNCwiaWRwIjoiZmFjZWJvb2suY29tIn0.
h-uiKcrT882pSKUtWCpj-_3b3vPs3bOWsESAhPMrL-iIIacKc6_uZrWxaWvIYkLra5czBcGKWrYwrAC8ZvQe
DJWZ50WXQrZYODEW1OUwzaD_I1f1HE0c2uvaWdGXBpDEVdsD3ExKaFlKGjFR2V7F-fPThkVDdKmkUDQX3bVc
yyj2V2nlCQ9jd7aGnokTPfLfpOjuIrTsAdPcGpe5hfSEuwYDmqOJjGs9Jp1f-eSNEiCDQOaTBSvr479L5ptP
XWeQZyX2SypN05Rjr05bjZh3j70ZUimiocfJzjibeoDCaQTz907yAg91WYuFOrQxb-5BaUoR7K-O7vxr2M-_
CQhoFA

```

### <a name="access-tokens"></a><span data-ttu-id="0c274-140">Tokeny dostępu</span><span class="sxs-lookup"><span data-stu-id="0c274-140">Access tokens</span></span>
<span data-ttu-id="0c274-141">Token dostępu jest również formularza token zabezpieczający, który odbiera aplikacji z usługi Azure AD B2C hello `authorize` i `token` punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="0c274-141">An access token is also a form of security token that your app receives from hello Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="0c274-142">Tokeny dostępu są także przedstawione jako [Jwt](#types-of-tokens), i zawierają oświadczeń służy hello tooidentify przyznane uprawnienia tooyour interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="0c274-142">Access tokens are also represented as [JWTs](#types-of-tokens), and they contain claims that you can use tooidentify hello granted permissions tooyour APIs.</span></span> <span data-ttu-id="0c274-143">Tokeny dostępu są podpisane, ale obecnie nie są zaszyfrowane.</span><span class="sxs-lookup"><span data-stu-id="0c274-143">Access tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="0c274-144">Tokeny dostępu powinien być serwery dostępu do używanych tooprovide tooAPIs i zasobów.</span><span class="sxs-lookup"><span data-stu-id="0c274-144">Access tokens should be used tooprovide access tooAPIs and resource servers.</span></span> <span data-ttu-id="0c274-145">Dowiedz się więcej o tym, jak za[używaj tokenów dostępu](active-directory-b2c-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="0c274-145">Learn more about how too[use access tokens](active-directory-b2c-access-tokens.md).</span></span> 

<span data-ttu-id="0c274-146">Interfejs API odebrania tokenu dostępu, należy [sprawdzanie poprawności podpisu hello](#token-validation) tooprove, który hello tokenu jest autentyczny.</span><span class="sxs-lookup"><span data-stu-id="0c274-146">When your API receives an access token, it must [validate hello signature](#token-validation) tooprove that hello token is authentic.</span></span> <span data-ttu-id="0c274-147">Interfejs API należy zweryfikować kilka oświadczeń w hello tooprove tokenu jest nieprawidłowy.</span><span class="sxs-lookup"><span data-stu-id="0c274-147">Your API must also validate a few claims in hello token tooprove that it is valid.</span></span> <span data-ttu-id="0c274-148">W zależności od wymagań scenariusza hello, może się różnić oświadczeń hello zweryfikowany przez aplikację, ale aplikacji należy wykonać niektóre [typowych operacji sprawdzania poprawności oświadczeń](#token-validation) w każdym scenariuszu.</span><span class="sxs-lookup"><span data-stu-id="0c274-148">Depending on hello scenario requirements, hello claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

### <a name="claims-in-id-and-access-tokens"></a><span data-ttu-id="0c274-149">Oświadczenia w tokenach dostępu i identyfikator</span><span class="sxs-lookup"><span data-stu-id="0c274-149">Claims in ID and access tokens</span></span>
<span data-ttu-id="0c274-150">Gdy używasz usługi Azure AD B2C, masz precyzyjną kontrolę nad zawartością hello z tokenów.</span><span class="sxs-lookup"><span data-stu-id="0c274-150">When you use Azure AD B2C, you have fine-grained control over hello content of your tokens.</span></span> <span data-ttu-id="0c274-151">Można skonfigurować [zasady](active-directory-b2c-reference-policies.md) toosend niektóre zestawy danych użytkownika w oświadczenia, które wymaga aplikacji dla operacji.</span><span class="sxs-lookup"><span data-stu-id="0c274-151">You can configure [policies](active-directory-b2c-reference-policies.md) toosend certain sets of user data in claims that your app requires for its operations.</span></span> <span data-ttu-id="0c274-152">Oświadczenia te mogą obejmować właściwości standardowych, takich jak hello użytkownika `displayName` i `emailAddress`.</span><span class="sxs-lookup"><span data-stu-id="0c274-152">These claims can include standard properties such as hello user's `displayName` and `emailAddress`.</span></span> <span data-ttu-id="0c274-153">Mogą również obejmować [atrybuty użytkownika niestandardowego](active-directory-b2c-reference-custom-attr.md) zdefiniowanej w katalogu usługi B2C.</span><span class="sxs-lookup"><span data-stu-id="0c274-153">They can also include [custom user attributes](active-directory-b2c-reference-custom-attr.md) that you can define in your B2C directory.</span></span> <span data-ttu-id="0c274-154">Każdy identyfikator i dostęp do tokenu, który pojawi się zawiera zestaw oświadczeń związanych z zabezpieczeniami.</span><span class="sxs-lookup"><span data-stu-id="0c274-154">Every ID and access token that you receive contains a certain set of security-related claims.</span></span> <span data-ttu-id="0c274-155">Aplikacje można użyć tych oświadczeń toosecurely uwierzytelniania użytkowników i żądań.</span><span class="sxs-lookup"><span data-stu-id="0c274-155">Your applications can use these claims toosecurely authenticate users and requests.</span></span>

<span data-ttu-id="0c274-156">Należy pamiętać, że hello oświadczenia w tokenach identyfikator nie są zwracane w określonej kolejności.</span><span class="sxs-lookup"><span data-stu-id="0c274-156">Note that hello claims in ID tokens are not returned in any particular order.</span></span> <span data-ttu-id="0c274-157">Ponadto oświadczeń nowy może zostać wprowadzony w tokeny Identyfikatora, w dowolnym momencie.</span><span class="sxs-lookup"><span data-stu-id="0c274-157">In addition, new claims can be introduced in ID tokens at any time.</span></span> <span data-ttu-id="0c274-158">Aplikacji nie powinna zostać podzielona na miarę wprowadzania nowych oświadczeń.</span><span class="sxs-lookup"><span data-stu-id="0c274-158">Your app should not break as new claims are introduced.</span></span> <span data-ttu-id="0c274-159">Poniżej przedstawiono hello oświadczeń oczekiwać tooexist w tokenach dostępu i identyfikator wystawione przez usługi Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="0c274-159">Here are hello claims that you expect tooexist in ID and access tokens issued by Azure AD B2C.</span></span> <span data-ttu-id="0c274-160">Wszelkie dodatkowe oświadczenia są określone przez zasady.</span><span class="sxs-lookup"><span data-stu-id="0c274-160">Any additional claims are determined by policies.</span></span> <span data-ttu-id="0c274-161">Praktyki, spróbuj sprawdzania hello oświadczenia w tokenie identyfikator próbki hello przez wklejenie go do [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="0c274-161">For practice, try inspecting hello claims in hello sample ID token by pasting it into [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="0c274-162">Dalsze szczegóły można znaleźć w hello [OpenID Connect specyfikacji](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="0c274-162">Further details can be found in hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

| <span data-ttu-id="0c274-163">Nazwa</span><span class="sxs-lookup"><span data-stu-id="0c274-163">Name</span></span> | <span data-ttu-id="0c274-164">Claim</span><span class="sxs-lookup"><span data-stu-id="0c274-164">Claim</span></span> | <span data-ttu-id="0c274-165">Przykładowa wartość</span><span class="sxs-lookup"><span data-stu-id="0c274-165">Example value</span></span> | <span data-ttu-id="0c274-166">Opis</span><span class="sxs-lookup"><span data-stu-id="0c274-166">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0c274-167">Grupy odbiorców</span><span class="sxs-lookup"><span data-stu-id="0c274-167">Audience</span></span> |`aud` |`90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6` |<span data-ttu-id="0c274-168">Oświadczenie odbiorców identyfikację hello przeznaczone odbiorcy tokenu hello.</span><span class="sxs-lookup"><span data-stu-id="0c274-168">An audience claim identifies hello intended recipient of hello token.</span></span> <span data-ttu-id="0c274-169">Dla usługi Azure AD B2C odbiorców hello jest identyfikator aplikacji dla danej aplikacji, co przypisane tooyour aplikacji w portalu rejestracji aplikacji hello.</span><span class="sxs-lookup"><span data-stu-id="0c274-169">For Azure AD B2C, hello audience is your app's application ID, as assigned tooyour app in hello app registration portal.</span></span> <span data-ttu-id="0c274-170">Aplikację należy sprawdzić tę wartość i odrzucić hello token, jeśli nie jest zgodny.</span><span class="sxs-lookup"><span data-stu-id="0c274-170">Your app should validate this value and reject hello token if it does not match.</span></span> |
| <span data-ttu-id="0c274-171">Wystawcy</span><span class="sxs-lookup"><span data-stu-id="0c274-171">Issuer</span></span> |`iss` |`https://login.microsoftonline.com/775527ff-9a37-4307-8b3d-cc311f58d925/v2.0/` |<span data-ttu-id="0c274-172">To oświadczenie identyfikuje hello usługi tokenu zabezpieczającego (STS) tworzy i zwraca hello token.</span><span class="sxs-lookup"><span data-stu-id="0c274-172">This claim identifies hello security token service (STS) that constructs and returns hello token.</span></span> <span data-ttu-id="0c274-173">Identyfikuje hello katalog usługi Azure AD, w których hello uwierzytelnienia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="0c274-173">It also identifies hello Azure AD directory in which hello user was authenticated.</span></span> <span data-ttu-id="0c274-174">Aplikację należy zweryfikować Witaj wystawca oświadczeń tooensure, który hello tokenu pochodzi z punktu końcowego v2.0 usługi Azure Active Directory hello.</span><span class="sxs-lookup"><span data-stu-id="0c274-174">Your app should validate hello issuer claim tooensure that hello token came from hello Azure Active Directory v2.0 endpoint.</span></span> |
| <span data-ttu-id="0c274-175">wystawiony w</span><span class="sxs-lookup"><span data-stu-id="0c274-175">Issued at</span></span> |`iat` |`1438535543` |<span data-ttu-id="0c274-176">Oświadczenie to hello czasu, w których hello token został wystawiony, czas epoki.</span><span class="sxs-lookup"><span data-stu-id="0c274-176">This claim is hello time at which hello token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="0c274-177">czas wygaśnięcia</span><span class="sxs-lookup"><span data-stu-id="0c274-177">Expiration time</span></span> |`exp` |`1438539443` |<span data-ttu-id="0c274-178">Witaj oświadczeń czas wygaśnięcia jest hello czasu, w których hello token staje się nieprawidłowy, w czasie epoki.</span><span class="sxs-lookup"><span data-stu-id="0c274-178">hello expiration time claim is hello time at which hello token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="0c274-179">Aplikację należy użyć tego oświadczenia tooverify hello ważności hello okres ważności tokenu.</span><span class="sxs-lookup"><span data-stu-id="0c274-179">Your app should use this claim tooverify hello validity of hello token lifetime.</span></span> |
| <span data-ttu-id="0c274-180">nie wcześniej niż</span><span class="sxs-lookup"><span data-stu-id="0c274-180">Not before</span></span> |`nbf` |`1438535543` |<span data-ttu-id="0c274-181">Oświadczenie to hello godzina, w którym hello token prawidłową, w czasie epoki.</span><span class="sxs-lookup"><span data-stu-id="0c274-181">This claim is hello time at which hello token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="0c274-182">To jest zwykle hello sam jak hello czasu hello token został wystawiony.</span><span class="sxs-lookup"><span data-stu-id="0c274-182">This is usually hello same as hello time hello token was issued.</span></span> <span data-ttu-id="0c274-183">Aplikację należy użyć tego oświadczenia tooverify hello ważności hello okres ważności tokenu.</span><span class="sxs-lookup"><span data-stu-id="0c274-183">Your app should use this claim tooverify hello validity of hello token lifetime.</span></span> |
| <span data-ttu-id="0c274-184">Wersja</span><span class="sxs-lookup"><span data-stu-id="0c274-184">Version</span></span> |`ver` |`1.0` |<span data-ttu-id="0c274-185">To jest wersja hello hello identyfikator tokenu, zgodnie z definicją w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0c274-185">This is hello version of hello ID token, as defined by Azure AD.</span></span> |
| <span data-ttu-id="0c274-186">Kod skrótu</span><span class="sxs-lookup"><span data-stu-id="0c274-186">Code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="0c274-187">Skrót kodu jest uwzględnione w tokenie identyfikator, tylko wtedy, gdy hello token jest wystawiony wraz z kodu autoryzacji protokołu OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="0c274-187">A code hash is included in an ID token only when hello token is issued together with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="0c274-188">Skrót kodu mogą być używane toovalidate hello autentyczności kod autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="0c274-188">A code hash can be used toovalidate hello authenticity of an authorization code.</span></span> <span data-ttu-id="0c274-189">Aby uzyskać więcej informacji na temat tooperform tej weryfikacji, zobacz hello [OpenID Connect specyfikacji](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="0c274-189">For more details on how tooperform this validation, see hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>  |
| <span data-ttu-id="0c274-190">Skrót token dostępu</span><span class="sxs-lookup"><span data-stu-id="0c274-190">Access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="0c274-191">Skrót token dostępu jest uwzględnione w tokenie identyfikator, tylko wtedy, gdy hello token jest wystawiony wraz z tokenu dostępu protokołu OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="0c274-191">An access token hash is included in an ID token only when hello token is issued together with an OAuth 2.0 access token.</span></span> <span data-ttu-id="0c274-192">Skrót tokenu dostępu mogą być używane toovalidate hello autentyczności tokenu dostępu.</span><span class="sxs-lookup"><span data-stu-id="0c274-192">An access token hash can be used toovalidate hello authenticity of an access token.</span></span> <span data-ttu-id="0c274-193">Aby uzyskać więcej informacji na temat tooperform tej weryfikacji, zobacz hello [specyfikacji OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html)</span><span class="sxs-lookup"><span data-stu-id="0c274-193">For more details on how tooperform this validation, see hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html)</span></span>  |
| <span data-ttu-id="0c274-194">Identyfikator jednorazowy</span><span class="sxs-lookup"><span data-stu-id="0c274-194">Nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="0c274-195">Identyfikator jednorazowy jest strategia używana toomitigate powtórzeń tokenów ataków.</span><span class="sxs-lookup"><span data-stu-id="0c274-195">A nonce is a strategy used toomitigate token replay attacks.</span></span> <span data-ttu-id="0c274-196">Aplikację można określić identyfikatora jednorazowego w żądaniu autoryzacji przy użyciu hello `nonce` parametr zapytania.</span><span class="sxs-lookup"><span data-stu-id="0c274-196">Your app can specify a nonce in an authorization request by using hello `nonce` query parameter.</span></span> <span data-ttu-id="0c274-197">wartość Hello podane w żądaniu hello będzie obliczanie nie mają być modyfikowane w hello `nonce` oświadczeń tylko identyfikator tokenu.</span><span class="sxs-lookup"><span data-stu-id="0c274-197">hello value you provide in hello request will be emitted unmodified in hello `nonce` claim of an ID token only.</span></span> <span data-ttu-id="0c274-198">Dzięki temu wartość aplikacji hello tooverify względem hello określone w żądaniu hello, co umożliwia skojarzenie aplikacji hello sesji z danego tokenu identyfikator.</span><span class="sxs-lookup"><span data-stu-id="0c274-198">This allows your app tooverify hello value against hello value it specified on hello request, which associates hello app's session with a given ID token.</span></span> <span data-ttu-id="0c274-199">Aplikację należy wykonać tej weryfikacji podczas hello identyfikator sprawdzenia poprawności tokenu procesu.</span><span class="sxs-lookup"><span data-stu-id="0c274-199">Your app should perform this validation during hello ID token validation process.</span></span> |
| <span data-ttu-id="0c274-200">Temat</span><span class="sxs-lookup"><span data-stu-id="0c274-200">Subject</span></span> |`sub` |`884408e1-2918-4cz0-b12d-3aa027d7563b` |<span data-ttu-id="0c274-201">Jest to główna hello o którym hello token deklaracji rozkazujących informacje, takie jak hello użytkownika aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0c274-201">This is hello principal about which hello token asserts information, such as hello user of an app.</span></span> <span data-ttu-id="0c274-202">Ta wartość jest niezmienne i nie można ponownie przypisać lub ponownie.</span><span class="sxs-lookup"><span data-stu-id="0c274-202">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="0c274-203">Sprawdzanie autoryzacji używany tooperform może być bezpiecznie, np. gdy hello token jest używane tooaccess zasobu.</span><span class="sxs-lookup"><span data-stu-id="0c274-203">It can be used tooperform authorization checks safely, such as when hello token is used tooaccess a resource.</span></span> <span data-ttu-id="0c274-204">Domyślnie oświadczeń podmiotu hello jest wypełniane przy użyciu Identyfikatora obiektu hello hello użytkownika w katalogu hello.</span><span class="sxs-lookup"><span data-stu-id="0c274-204">By default, hello subject claim is populated with hello object ID of hello user in hello directory.</span></span> <span data-ttu-id="0c274-205">toolearn więcej, zobacz [usługi Azure Active Directory B2C: tokenu sesji i konfiguracji rejestracji jednokrotnej](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="0c274-205">toolearn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="0c274-206">Klasy kontekstu uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="0c274-206">Authentication context class reference</span></span> |`acr` |<span data-ttu-id="0c274-207">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="0c274-207">Not applicable</span></span> |<span data-ttu-id="0c274-208">Nie używane obecnie, z wyjątkiem w przypadku hello starsze zasad.</span><span class="sxs-lookup"><span data-stu-id="0c274-208">Not used currently, except in hello case of older policies.</span></span> <span data-ttu-id="0c274-209">toolearn więcej, zobacz [usługi Azure Active Directory B2C: tokenu sesji i konfiguracji rejestracji jednokrotnej](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="0c274-209">toolearn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="0c274-210">Framework zasady zaufania</span><span class="sxs-lookup"><span data-stu-id="0c274-210">Trust framework policy</span></span> |`tfp` |`b2c_1_sign_in` |<span data-ttu-id="0c274-211">Jest to nazwa hello hello zasad, który był używany tooacquire hello Identyfikatora tokenu.</span><span class="sxs-lookup"><span data-stu-id="0c274-211">This is hello name of hello policy that was used tooacquire hello ID token.</span></span> |
| <span data-ttu-id="0c274-212">Czas uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="0c274-212">Authentication time</span></span> |`auth_time` |`1438535543` |<span data-ttu-id="0c274-213">Oświadczenie to czas hello jaką ostatniego poświadczenia wprowadzonego użytkownika, reprezentowane w czasie epoki.</span><span class="sxs-lookup"><span data-stu-id="0c274-213">This claim is hello time at which a user last entered credentials, represented in epoch time.</span></span> |

### <a name="refresh-tokens"></a><span data-ttu-id="0c274-214">Tokenów odświeżania</span><span class="sxs-lookup"><span data-stu-id="0c274-214">Refresh tokens</span></span>
<span data-ttu-id="0c274-215">Odśwież tokeny to tokeny zabezpieczające aplikacji może użyć tooacquire nowe tokeny Identyfikatora i dostęp do tokenów w przepływu OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="0c274-215">Refresh tokens are security tokens that your app can use tooacquire new ID tokens and access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="0c274-216">Udostępniają one aplikacji z długoterminowej tooresources dostępu w imieniu użytkowników bez konieczności interakcji z tymi użytkownikami.</span><span class="sxs-lookup"><span data-stu-id="0c274-216">They provide your app with long-term access tooresources on behalf of users without requiring interaction with those users.</span></span>

<span data-ttu-id="0c274-217">tooreceive token odświeżania w odpowiedzi tokenu aplikacji należy zażądać hello `offline_acesss` zakresu.</span><span class="sxs-lookup"><span data-stu-id="0c274-217">tooreceive a refresh token in a token response, your app must request hello `offline_acesss` scope.</span></span> <span data-ttu-id="0c274-218">więcej informacji na temat hello toolearn `offline_access` zakres, zapoznaj się toohello [odwołanie do usługi Azure AD B2C protokołu](active-directory-b2c-reference-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="0c274-218">toolearn more about hello `offline_access` scope, refer toohello [Azure AD B2C protocol reference](active-directory-b2c-reference-protocols.md).</span></span>

<span data-ttu-id="0c274-219">Tokenów odświeżania są i będą zawsze miały, całkowicie nieprzezroczyste tooyour aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0c274-219">Refresh tokens are, and will always be, completely opaque tooyour app.</span></span> <span data-ttu-id="0c274-220">Są wystawiane przez usługę Azure AD i mogą być kontrolowane i interpretowane tylko przez usługę Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0c274-220">They are issued by Azure AD and can be inspected and interpreted only by Azure AD.</span></span> <span data-ttu-id="0c274-221">Są one długotrwałe, ale aplikacja nie powinien być zapisywany z hello oczekiwanie, że trwa token odświeżania w określonym okresie czasu.</span><span class="sxs-lookup"><span data-stu-id="0c274-221">They are long-lived, but your app should not be written with hello expectation that a refresh token will last for a specific period of time.</span></span> <span data-ttu-id="0c274-222">Tokeny odświeżania nieważne można w dowolnym momencie z różnych przyczyn.</span><span class="sxs-lookup"><span data-stu-id="0c274-222">Refresh tokens can be invalidated at any moment for a variety of reasons.</span></span> <span data-ttu-id="0c274-223">Witaj tooattempt tooredeem jest sposób tooknow Twojej aplikacji, jeśli token odświeżania jest prawidłowy tylko go poprzez tooAzure żądania tokenu usługi AD.</span><span class="sxs-lookup"><span data-stu-id="0c274-223">hello only way for your app tooknow if a refresh token is valid is tooattempt tooredeem it by making a token request tooAzure AD.</span></span>

<span data-ttu-id="0c274-224">Gdy zrealizować token odświeżania, aby uzyskać nowy token (i jeśli aplikacja ma przyznane hello `offline_access` zakresu), zostanie wyświetlony nowy token odświeżania w hello odpowiedzi tokenu.</span><span class="sxs-lookup"><span data-stu-id="0c274-224">When you redeem a refresh token for a new token (and if your app has been granted hello `offline_access` scope), you will receive a new refresh token in hello token response.</span></span> <span data-ttu-id="0c274-225">Należy zapisać hello nowo wystawiony token odświeżania.</span><span class="sxs-lookup"><span data-stu-id="0c274-225">You should save hello newly issued refresh token.</span></span> <span data-ttu-id="0c274-226">Należy go zastąpić token odświeżania hello wcześniej używane w żądaniu hello.</span><span class="sxs-lookup"><span data-stu-id="0c274-226">It should replace hello refresh token you previously used in hello request.</span></span> <span data-ttu-id="0c274-227">Pozwala to zagwarantować, że tokenów odświeżania ważność tak długo, jak to możliwe.</span><span class="sxs-lookup"><span data-stu-id="0c274-227">This helps guarantee that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="token-validation"></a><span data-ttu-id="0c274-228">Token weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="0c274-228">Token validation</span></span>
<span data-ttu-id="0c274-229">toovalidate tokenu aplikacji należy sprawdzić zarówno hello podpis, jak i oświadczenia hello tokenu.</span><span class="sxs-lookup"><span data-stu-id="0c274-229">toovalidate a token, your app should check both hello signature and claims of hello token.</span></span>

<span data-ttu-id="0c274-230">Wiele bibliotek typu open source dostępnych sprawdzania poprawności tokenów Jwt, w zależności od preferowany język.</span><span class="sxs-lookup"><span data-stu-id="0c274-230">Many open source libraries are available for validating JWTs, depending on your preferred language.</span></span> <span data-ttu-id="0c274-231">Zaleca się, że można eksplorować te opcje, a nie implementacji logiki weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="0c274-231">We recommend that you explore those options rather than implement your own validation logic.</span></span> <span data-ttu-id="0c274-232">Witaj informacje w tym przewodniku może pomóc Dowiedz się, jak korzystać z tooproperly tych bibliotek.</span><span class="sxs-lookup"><span data-stu-id="0c274-232">hello information in this guide can help you learn how tooproperly use those libraries.</span></span>

### <a name="validate-hello-signature"></a><span data-ttu-id="0c274-233">Sprawdzanie poprawności podpisu hello</span><span class="sxs-lookup"><span data-stu-id="0c274-233">Validate hello signature</span></span>
<span data-ttu-id="0c274-234">Token JWT zawiera trzy segmenty oddzielone hello `.` znaków.</span><span class="sxs-lookup"><span data-stu-id="0c274-234">A JWT contains three segments, separated by hello `.` character.</span></span> <span data-ttu-id="0c274-235">pierwszy segment Hello jest hello *nagłówka*, hello jest drugi hello *treści*, i hello jest trzeci hello *podpisu*.</span><span class="sxs-lookup"><span data-stu-id="0c274-235">hello first segment is hello *header*, hello second is hello *body*, and hello third is hello *signature*.</span></span> <span data-ttu-id="0c274-236">segment podpisu Hello może być używane toovalidate hello autentyczności hello token, dzięki czemu mogą być zaufane przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="0c274-236">hello signature segment can be used toovalidate hello authenticity of hello token so that it can be trusted by your app.</span></span>

<span data-ttu-id="0c274-237">Azure AD B2C tokeny są podpisane za pomocą standardowych szyfrowanie asymetryczne algorytmy, takie jak RSA 256.</span><span class="sxs-lookup"><span data-stu-id="0c274-237">Azure AD B2C tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="0c274-238">Nagłówek Hello hello tokenu zawiera informacje na temat klucza hello i toosign hello token używany metody szyfrowania:</span><span class="sxs-lookup"><span data-stu-id="0c274-238">hello header of hello token contains information about hello key and encryption method used toosign hello token:</span></span>

```
{
        "typ": "JWT",
        "alg": "RS256",
        "kid": "GvnPApfWMdLRi8PDmisFn7bprKg"
}
```

<span data-ttu-id="0c274-239">Witaj `alg` oświadczeń wskazuje hello algorytmu, który był używany toosign hello token.</span><span class="sxs-lookup"><span data-stu-id="0c274-239">hello `alg` claim indicates hello algorithm that was used toosign hello token.</span></span> <span data-ttu-id="0c274-240">Witaj `kid` oświadczeń wskazuje hello określonego klucz publiczny, który był używany toosign hello token.</span><span class="sxs-lookup"><span data-stu-id="0c274-240">hello `kid` claim indicates hello particular public key that was used toosign hello token.</span></span>

<span data-ttu-id="0c274-241">W dowolnym momencie usługi Azure AD można zarejestrować tokenu przy użyciu dowolny zestaw par kluczy publicznych i prywatnych.</span><span class="sxs-lookup"><span data-stu-id="0c274-241">At any given time, Azure AD can sign a token by using any one of a certain set of public-private key pairs.</span></span> <span data-ttu-id="0c274-242">Usługi Azure AD obraca hello zestaw możliwych kluczy okresowo, więc aplikacja powinna być zapisana toohandle powoduje automatyczną zmianę tych kluczy.</span><span class="sxs-lookup"><span data-stu-id="0c274-242">Azure AD rotates hello possible set of keys periodically, so your app should be written toohandle those key changes automatically.</span></span> <span data-ttu-id="0c274-243">Toocheck uzasadnione częstotliwości aktualizacji toohello kluczy publicznych używane przez usługę Azure AD jest co 24 godziny.</span><span class="sxs-lookup"><span data-stu-id="0c274-243">A reasonable frequency toocheck for updates toohello public keys used by Azure AD is every 24 hours.</span></span>

<span data-ttu-id="0c274-244">Usługa Azure AD B2C ma punkt końcowy metadanych OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="0c274-244">Azure AD B2C has an OpenID Connect metadata endpoint.</span></span> <span data-ttu-id="0c274-245">Umożliwia to aplikacjom toofetch informacji na temat usługi Azure AD B2C w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="0c274-245">This allows apps toofetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="0c274-246">Informacje te obejmują punkty końcowe, zawartość tokenu i klucze podpisywania tokenu.</span><span class="sxs-lookup"><span data-stu-id="0c274-246">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="0c274-247">Katalogu usługi B2C zawiera dokument metadanych JSON dla każdej zasady.</span><span class="sxs-lookup"><span data-stu-id="0c274-247">Your B2C directory contains a JSON metadata document for each policy.</span></span> <span data-ttu-id="0c274-248">Na przykład dokument metadanych hello hello `b2c_1_sign_in` zasad w `fabrikamb2c.onmicrosoft.com` znajduje się pod adresem:</span><span class="sxs-lookup"><span data-stu-id="0c274-248">For example, hello metadata document for hello `b2c_1_sign_in` policy in  `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in
```

<span data-ttu-id="0c274-249">`fabrikamb2c.onmicrosoft.com`jest katalog hello B2C używany tooauthenticate hello użytkownika, i `b2c_1_sign_in` jest tooacquire hello token używany hello zasad.</span><span class="sxs-lookup"><span data-stu-id="0c274-249">`fabrikamb2c.onmicrosoft.com` is hello B2C directory used tooauthenticate hello user, and `b2c_1_sign_in` is hello policy used tooacquire hello token.</span></span> <span data-ttu-id="0c274-250">toodetermine zasady, których został użyty toosign token (i gdzie toogo toofetch hello metadanych), są dostępne dwie opcje.</span><span class="sxs-lookup"><span data-stu-id="0c274-250">toodetermine which policy was used toosign a token (and where toogo toofetch hello metadata), you have two options.</span></span> <span data-ttu-id="0c274-251">Najpierw hello zasad nazwa jest uwzględniona w hello `acr` oświadczenia w tokenie hello.</span><span class="sxs-lookup"><span data-stu-id="0c274-251">First, hello policy name is included in hello `acr` claim in hello token.</span></span> <span data-ttu-id="0c274-252">Można analizować oświadczeń poza hello treści hello JWT przez base-64 dekodowania hello treści i deserializacji hello JSON ciąg tego wyników.</span><span class="sxs-lookup"><span data-stu-id="0c274-252">You can parse claims out of hello body of hello JWT by base-64 decoding hello body and deserializing hello JSON string that results.</span></span> <span data-ttu-id="0c274-253">Witaj `acr` oświadczeń będzie nazwa hello hello zasad, który był używany tooissue hello token.</span><span class="sxs-lookup"><span data-stu-id="0c274-253">hello `acr` claim will be hello name of hello policy that was used tooissue hello token.</span></span>  <span data-ttu-id="0c274-254">Drugą opcją jest zasad hello tooencode hello wartości hello `state` parametru, gdy Żądanie hello, a następnie zdekodować toodetermine zasady, które zostało użyte.</span><span class="sxs-lookup"><span data-stu-id="0c274-254">Your other option is tooencode hello policy in hello value of hello `state` parameter when you issue hello request, and then decode it toodetermine which policy was used.</span></span> <span data-ttu-id="0c274-255">Każda metoda jest prawidłowa.</span><span class="sxs-lookup"><span data-stu-id="0c274-255">Either method is valid.</span></span>

<span data-ttu-id="0c274-256">Dokument metadanych Hello jest obiekt JSON, który zawiera przydatne w kilku informacji.</span><span class="sxs-lookup"><span data-stu-id="0c274-256">hello metadata document is a JSON object that contains several useful pieces of information.</span></span> <span data-ttu-id="0c274-257">Obejmują one lokalizację hello hello punkty końcowe wymagane tooperform uwierzytelniania OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="0c274-257">These include hello location of hello endpoints required tooperform OpenID Connect authentication.</span></span> <span data-ttu-id="0c274-258">Obejmuje to też `jwks_uri`, co daje hello lokalizacji hello zestawu kluczy publicznych, które są używane toosign tokenów.</span><span class="sxs-lookup"><span data-stu-id="0c274-258">They also include `jwks_uri`, which gives hello location of hello set of public keys that are used toosign tokens.</span></span> <span data-ttu-id="0c274-259">Tutaj podano tej lokalizacji, ale dynamicznie jest najlepszym miejscem hello toofetch za pomocą hello dokument metadanych i analizowania limit `jwks_uri`:</span><span class="sxs-lookup"><span data-stu-id="0c274-259">That location is provided here, but it is best toofetch hello location dynamically by using hello metadata document and parsing out `jwks_uri`:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in
```

<span data-ttu-id="0c274-260">dokument JSON Hello znajdujący się pod tym adresem URL zawiera wszystkie hello informacje o kluczu publicznym używany w danym momencie.</span><span class="sxs-lookup"><span data-stu-id="0c274-260">hello JSON document located at this URL contains all hello public key information in use at a particular moment.</span></span> <span data-ttu-id="0c274-261">Aplikację można użyć hello `kid` oświadczeń w hello JWT nagłówka tooselect hello klucza publicznego w dokumencie JSON hello, która jest używana toosign określonej tokenu.</span><span class="sxs-lookup"><span data-stu-id="0c274-261">Your app can use hello `kid` claim in hello JWT header tooselect hello public key in hello JSON document that is used toosign a particular token.</span></span> <span data-ttu-id="0c274-262">Następnie można przeprowadzić sprawdzania poprawności podpisu za pomocą hello prawidłowy klucz publiczny i algorytm wskazanych hello.</span><span class="sxs-lookup"><span data-stu-id="0c274-262">It can then perform signature validation by using hello correct public key and hello indicated algorithm.</span></span>

<span data-ttu-id="0c274-263">Opis sposobu sprawdzania poprawności podpisu tooperform jest hello poza zakres tego dokumentu.</span><span class="sxs-lookup"><span data-stu-id="0c274-263">A description of how tooperform signature validation is outside hello scope of this document.</span></span> <span data-ttu-id="0c274-264">Wiele biblioteki typu open source są dostępne toohelp o to, jeśli będzie potrzebny.</span><span class="sxs-lookup"><span data-stu-id="0c274-264">Many open source libraries are available toohelp you with this if you need it.</span></span>

### <a name="validate-hello-claims"></a><span data-ttu-id="0c274-265">Sprawdź poprawność hello oświadczeń</span><span class="sxs-lookup"><span data-stu-id="0c274-265">Validate hello claims</span></span>
<span data-ttu-id="0c274-266">Gdy aplikację lub interfejsu API odbiera token Identyfikatora, go również wykonywać kilka kontroli względem hello oświadczenia w tokenie identyfikator hello.</span><span class="sxs-lookup"><span data-stu-id="0c274-266">When your app or API receives an ID token, it should also perform several checks against hello claims in hello ID token.</span></span> <span data-ttu-id="0c274-267">Te obejmują, ale nie są ograniczone do:</span><span class="sxs-lookup"><span data-stu-id="0c274-267">These include, but are not limited to:</span></span>

* <span data-ttu-id="0c274-268">Witaj **odbiorców** oświadczeń: zweryfikuje hello identyfikator tokenu zostało przeznaczone toobe podane tooyour aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0c274-268">hello **audience** claim: This verifies that hello ID token was intended toobe given tooyour app.</span></span>
* <span data-ttu-id="0c274-269">Witaj **nie wcześniej niż** i **czas wygaśnięcia** oświadczenia: Sprawdź te hello identyfikator token nie wygasł.</span><span class="sxs-lookup"><span data-stu-id="0c274-269">hello **not before** and **expiration time** claims: These verify that hello ID token has not expired.</span></span>
* <span data-ttu-id="0c274-270">Witaj **wystawcy** oświadczeń: zweryfikuje hello token został wystawiony tooyour aplikacji przez usługę Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0c274-270">hello **issuer** claim: This verifies that hello token was issued tooyour app by Azure AD.</span></span>
* <span data-ttu-id="0c274-271">Witaj **identyfikator jednorazowy**: jest strategię ograniczenie ataków powtórzeń tokenów.</span><span class="sxs-lookup"><span data-stu-id="0c274-271">hello **nonce**: This is a strategy for token replay attack mitigation.</span></span>

<span data-ttu-id="0c274-272">Pełna lista aplikacji należy wykonać sprawdzanie poprawności, znajduje się w sekcji toohello [OpenID Connect specyfikacji](https://openid.net).</span><span class="sxs-lookup"><span data-stu-id="0c274-272">For a full list of validations your app should perform, refer toohello [OpenID Connect specification](https://openid.net).</span></span> <span data-ttu-id="0c274-273">Szczegóły hello oczekiwanych wartości tych oświadczeń znajdują się w poprzednim hello [token sekcji](#types-of-tokens).</span><span class="sxs-lookup"><span data-stu-id="0c274-273">Details of hello expected values for these claims are included in hello preceding [token section](#types-of-tokens).</span></span>  

## <a name="token-lifetimes"></a><span data-ttu-id="0c274-274">Okresy istnienia tokenu</span><span class="sxs-lookup"><span data-stu-id="0c274-274">Token lifetimes</span></span>
<span data-ttu-id="0c274-275">następujące okresy istnienia tokenu Hello są udostępniane toofurther wiedzy użytkownika.</span><span class="sxs-lookup"><span data-stu-id="0c274-275">hello following token lifetimes are provided toofurther your knowledge.</span></span> <span data-ttu-id="0c274-276">One może pomóc podczas opracowywania i debugowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0c274-276">They can help you when you develop and debug apps.</span></span> <span data-ttu-id="0c274-277">Należy pamiętać, że aplikacje nie powinny być napisane tooexpect żadnego z tych stała tooremain okresy istnienia.</span><span class="sxs-lookup"><span data-stu-id="0c274-277">Note that your apps should not be written tooexpect any of these lifetimes tooremain constant.</span></span> <span data-ttu-id="0c274-278">Mogą i ulegnie zmianie.</span><span class="sxs-lookup"><span data-stu-id="0c274-278">They can and will change.</span></span> <span data-ttu-id="0c274-279">Dowiedz się więcej o hello [dostosowywania okresy istnienia tokenu](active-directory-b2c-token-session-sso.md) w usłudze Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="0c274-279">Read more about hello [customization of token lifetimes](active-directory-b2c-token-session-sso.md) in Azure AD B2C.</span></span>

| <span data-ttu-id="0c274-280">Token</span><span class="sxs-lookup"><span data-stu-id="0c274-280">Token</span></span> | <span data-ttu-id="0c274-281">Cykl życia</span><span class="sxs-lookup"><span data-stu-id="0c274-281">Lifetime</span></span> | <span data-ttu-id="0c274-282">Opis</span><span class="sxs-lookup"><span data-stu-id="0c274-282">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="0c274-283">Tokeny Identyfikatora</span><span class="sxs-lookup"><span data-stu-id="0c274-283">ID tokens</span></span> |<span data-ttu-id="0c274-284">Jedna godzina</span><span class="sxs-lookup"><span data-stu-id="0c274-284">One hour</span></span> |<span data-ttu-id="0c274-285">Identyfikator tokeny są zwykle prawidłowe godziny.</span><span class="sxs-lookup"><span data-stu-id="0c274-285">ID tokens are typically valid for an hour.</span></span> <span data-ttu-id="0c274-286">Aplikacja sieci web można używać tego okresu istnienia toomaintain własnej sesji z użytkownikami (zalecane).</span><span class="sxs-lookup"><span data-stu-id="0c274-286">Your web app can use this lifetime toomaintain its own sessions with users (recommended).</span></span> <span data-ttu-id="0c274-287">Możesz również istnienia innej sesji.</span><span class="sxs-lookup"><span data-stu-id="0c274-287">You can also choose a different session lifetime.</span></span> <span data-ttu-id="0c274-288">Jeśli Twoja aplikacja powinna tooget nowy token identyfikator, po prostu musi toomake nowe tooAzure żądania logowania usługi AD.</span><span class="sxs-lookup"><span data-stu-id="0c274-288">If your app needs tooget a new ID token, it simply needs toomake a new sign-in request tooAzure AD.</span></span> <span data-ttu-id="0c274-289">Jeśli użytkownik ma prawidłowy sesję z usługą Azure AD, użytkownik może nie być tooenter wymaganych poświadczeń ponownie.</span><span class="sxs-lookup"><span data-stu-id="0c274-289">If a user has a valid browser session with Azure AD, that user might not be required tooenter credentials again.</span></span> |
| <span data-ttu-id="0c274-290">Tokenów odświeżania</span><span class="sxs-lookup"><span data-stu-id="0c274-290">Refresh tokens</span></span> |<span data-ttu-id="0c274-291">Zapasowej too14 dni</span><span class="sxs-lookup"><span data-stu-id="0c274-291">Up too14 days</span></span> |<span data-ttu-id="0c274-292">Token odświeżania pojedynczego jest prawidłowa dla maksymalnie 14 dni.</span><span class="sxs-lookup"><span data-stu-id="0c274-292">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="0c274-293">Jednak token odświeżania może być nieprawidłowy, w dowolnej chwili z kilku powodów.</span><span class="sxs-lookup"><span data-stu-id="0c274-293">However, a refresh token can become invalid at any time for a number of reasons.</span></span> <span data-ttu-id="0c274-294">Dopiero po niepowodzeniu żądania hello lub aplikacja zastępuje token odświeżania hello nowej aplikacji powinno być kontynuowane toouse tootry token odświeżania.</span><span class="sxs-lookup"><span data-stu-id="0c274-294">Your app should continue tootry toouse a refresh token until hello request fails, or until your app replaces hello refresh token with a new one.</span></span> <span data-ttu-id="0c274-295">Token odświeżania również może być nieprawidłowy, jeśli upłynie 90 dni od czasu ostatniego wprowadzone poświadczenia użytkownika hello.</span><span class="sxs-lookup"><span data-stu-id="0c274-295">A refresh token can also become invalid if 90 days have passed since hello user last entered credentials.</span></span> |
| <span data-ttu-id="0c274-296">Kodach autoryzacji</span><span class="sxs-lookup"><span data-stu-id="0c274-296">Authorization codes</span></span> |<span data-ttu-id="0c274-297">Pięć minut</span><span class="sxs-lookup"><span data-stu-id="0c274-297">Five minutes</span></span> |<span data-ttu-id="0c274-298">Kody autoryzacji są celowo krótkim okresie.</span><span class="sxs-lookup"><span data-stu-id="0c274-298">Authorization codes are intentionally short-lived.</span></span> <span data-ttu-id="0c274-299">One powinny być zrealizowane natychmiast tokenów dostępu, tokeny Identyfikatora lub tokenów odświeżania po odebraniu.</span><span class="sxs-lookup"><span data-stu-id="0c274-299">They should be redeemed immediately for access tokens, ID tokens, or refresh tokens when they are received.</span></span> |

