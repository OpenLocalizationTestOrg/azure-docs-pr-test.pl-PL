---
title: "Sieci Web logowania z OpenID Connect - usługi Azure AD B2C | Dokumentacja firmy Microsoft"
description: "Tworzenie aplikacji sieci web przy użyciu usługi Azure Active Directory implementacji protokołu uwierzytelniania OpenID Connect"
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: 21d420c8-3c10-4319-b681-adf2e89e7ede
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: b0c33a47dd0cae79eab32ac578448fae8bf59be5
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/29/2017
---
# <a name="azure-active-directory-b2c-web-sign-in-with-openid-connect"></a><span data-ttu-id="66b33-103">Usługa Azure Active Directory B2C: Sieci Web logowania z OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="66b33-103">Azure Active Directory B2C: Web sign-in with OpenID Connect</span></span>
<span data-ttu-id="66b33-104">OpenID Connect to protokół uwierzytelniania, rozszerzający OAuth 2.0, który może służyć do bezpiecznego logowania użytkowników w aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="66b33-104">OpenID Connect is an authentication protocol, built on top of OAuth 2.0, that can be used to securely sign users in to web applications.</span></span> <span data-ttu-id="66b33-105">Za pomocą usługi Azure Active Directory B2C (Azure AD B2C) wdrażania protokołu OpenID Connect, można zewnętrzny rejestrację, logowanie i wykonywania innych zarządzania tożsamościami w aplikacji sieci web do usługi Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="66b33-105">By using the Azure Active Directory B2C (Azure AD B2C) implementation of OpenID Connect, you can outsource sign-up, sign-in, and other identity management experiences in your web applications to Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="66b33-106">Ten przewodnik przedstawia, jak to zrobić w sposób niezależny od języka.</span><span class="sxs-lookup"><span data-stu-id="66b33-106">This guide shows you how to do so in a language-independent manner.</span></span> <span data-ttu-id="66b33-107">Przedstawiono sposób wysyłania i odbierania wiadomości HTTP bez przy użyciu dowolnej z naszych bibliotekach open source.</span><span class="sxs-lookup"><span data-stu-id="66b33-107">It describes how to send and receive HTTP messages without using any of our open-source libraries.</span></span>

<span data-ttu-id="66b33-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) rozszerza protokół OAuth 2.0 *autoryzacji* protokół do użycia jako *uwierzytelniania* protokołu.</span><span class="sxs-lookup"><span data-stu-id="66b33-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) extends the OAuth 2.0 *authorization* protocol for use as an *authentication* protocol.</span></span> <span data-ttu-id="66b33-109">Dzięki temu można wykonać logowanie jednokrotne przy użyciu uwierzytelniania OAuth.</span><span class="sxs-lookup"><span data-stu-id="66b33-109">This allows you to perform single sign-on by using OAuth.</span></span> <span data-ttu-id="66b33-110">Ona pojęcia związane z *token Identyfikatora*, który jest token zabezpieczający, który umożliwia klientowi weryfikacji tożsamości użytkownika i uzyskać podstawowych informacji o profilu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="66b33-110">It introduces the concept of an *ID token*, which is a security token that allows the client to verify the identity of the user and obtain basic profile information about the user.</span></span>

<span data-ttu-id="66b33-111">Ponieważ rozszerza on OAuth 2.0, umożliwia również aplikacji można bezpiecznie uzyskać *tokenów dostępu*.</span><span class="sxs-lookup"><span data-stu-id="66b33-111">Because it extends OAuth 2.0, it also enables apps to securely acquire *access tokens*.</span></span> <span data-ttu-id="66b33-112">Można użyć access_tokens dostępu do zasobów, które są zabezpieczone przez [serwera autoryzacji](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="66b33-112">You can use access_tokens to access resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span> <span data-ttu-id="66b33-113">Zalecamy OpenID Connect, jeśli tworzysz aplikację sieci web jest hostowany na serwerze i dostępne za pośrednictwem przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="66b33-113">We recommend OpenID Connect if you're building a web application that is hosted on a server and accessed through a browser.</span></span> <span data-ttu-id="66b33-114">Jeśli chcesz dodać Zarządzanie tożsamościami do aplikacji mobilnych lub komputerowych przy użyciu usługi Azure AD B2C, należy użyć [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) zamiast OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="66b33-114">If you want to add identity management to your mobile or desktop applications by using Azure AD B2C, you should use [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) rather than OpenID Connect.</span></span>

<span data-ttu-id="66b33-115">Usługa Azure AD B2C rozszerza standardowego protokołu OpenID Connect do więcej niż prostego uwierzytelniania i autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-115">Azure AD B2C extends the standard OpenID Connect protocol to do more than simple authentication and authorization.</span></span> <span data-ttu-id="66b33-116">Wprowadza ona [parametru zasady](active-directory-b2c-reference-policies.md), co umożliwia przy użyciu protokołu OpenID Connect Dodaj wrażenia użytkowników — takie jak rejestracji, logowania i zarządzania profilami — do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-116">It introduces the [policy parameter](active-directory-b2c-reference-policies.md), which enables you to use OpenID Connect to add user experiences--such as sign-up, sign-in, and profile management--to your app.</span></span> <span data-ttu-id="66b33-117">W tym miejscu możemy opisano sposób korzystania z OpenID Connect i zasad do wdrożenia każdego z tych środowisk w aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="66b33-117">Here, we show you how to use OpenID Connect and policies to implement each of these experiences in your web applications.</span></span> <span data-ttu-id="66b33-118">Możemy również opisano sposób uzyskiwania tokenów dostępu do uzyskiwania dostępu do interfejsów API sieci web.</span><span class="sxs-lookup"><span data-stu-id="66b33-118">We'll also show you how to get access tokens for accessing web APIs.</span></span>

<span data-ttu-id="66b33-119">Przykład żądań HTTP w następnej sekcji korzystania z katalogu B2C naszej próbki, fabrikamb2c.onmicrosoft.com, a także naszych przykładowej aplikacji, https://aadb2cplayground.azurewebsites.net i zasad.</span><span class="sxs-lookup"><span data-stu-id="66b33-119">The example HTTP requests in the next section use our sample B2C directory, fabrikamb2c.onmicrosoft.com, as well as our sample application, https://aadb2cplayground.azurewebsites.net, and policies.</span></span> <span data-ttu-id="66b33-120">Można go dowolnie wypróbowanie żądania samodzielnie przy użyciu tych wartości, lub można je zastąpić własnymi.</span><span class="sxs-lookup"><span data-stu-id="66b33-120">You're free to try out the requests yourself by using these values, or you can replace them with your own.</span></span>
<span data-ttu-id="66b33-121">Dowiedz się, jak [uzyskać własne dzierżawy B2C, aplikacji i zasad](#use-your-own-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="66b33-121">Learn how to [get your own B2C tenant, application, and policies](#use-your-own-b2c-directory).</span></span>

## <a name="send-authentication-requests"></a><span data-ttu-id="66b33-122">Wysyłanie żądania uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="66b33-122">Send authentication requests</span></span>
<span data-ttu-id="66b33-123">Gdy aplikacja sieci web musi uwierzytelnić użytkownika i wykonywanie zasad, można kierować użytkownikowi `/authorize` punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="66b33-123">When your web app needs to authenticate the user and execute a policy, it can direct the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="66b33-124">Jest to interakcyjne część przepływu, gdy użytkownik wykona akcję w zależności od zasad.</span><span class="sxs-lookup"><span data-stu-id="66b33-124">This is the interactive portion of the flow, where the user takes action, depending on the policy.</span></span>

<span data-ttu-id="66b33-125">W tym żądaniu klient wskazuje uprawnienia, które należy uzyskać użytkownika w `scope` parametr i zasad do wykonania w `p` parametru.</span><span class="sxs-lookup"><span data-stu-id="66b33-125">In this request, the client indicates the permissions that it needs to acquire from the user in the `scope` parameter and the policy to execute in the `p` parameter.</span></span> <span data-ttu-id="66b33-126">Trzy przedstawione przykłady w poniższych sekcjach (podziałami wierszy dla czytelności), używając inne zasady.</span><span class="sxs-lookup"><span data-stu-id="66b33-126">Three examples are provided in the following sections (with line breaks for readability), each using a different policy.</span></span> <span data-ttu-id="66b33-127">Aby uzyskać pewne pojęcie o sposób działania każdego żądania, spróbuj wkleić żądania do przeglądarki i uruchomić go.</span><span class="sxs-lookup"><span data-stu-id="66b33-127">To get a feel for how each request works, try pasting the request into a browser and running it.</span></span>

#### <a name="use-a-sign-in-policy"></a><span data-ttu-id="66b33-128">Użyj zasad logowania</span><span class="sxs-lookup"><span data-stu-id="66b33-128">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_in
```

#### <a name="use-a-sign-up-policy"></a><span data-ttu-id="66b33-129">Użyj zasad rejestracji</span><span class="sxs-lookup"><span data-stu-id="66b33-129">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_up
```

#### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="66b33-130">Użyj zasad edycji profilu</span><span class="sxs-lookup"><span data-stu-id="66b33-130">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_edit_profile
```

| <span data-ttu-id="66b33-131">Parametr</span><span class="sxs-lookup"><span data-stu-id="66b33-131">Parameter</span></span> | <span data-ttu-id="66b33-132">Wymagane?</span><span class="sxs-lookup"><span data-stu-id="66b33-132">Required?</span></span> | <span data-ttu-id="66b33-133">Opis</span><span class="sxs-lookup"><span data-stu-id="66b33-133">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="66b33-134">client_id</span><span class="sxs-lookup"><span data-stu-id="66b33-134">client_id</span></span> |<span data-ttu-id="66b33-135">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-135">Required</span></span> |<span data-ttu-id="66b33-136">Identyfikator aplikacji, która [portalu Azure](https://portal.azure.com/) przypisany do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-136">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="66b33-137">response_type</span><span class="sxs-lookup"><span data-stu-id="66b33-137">response_type</span></span> |<span data-ttu-id="66b33-138">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-138">Required</span></span> |<span data-ttu-id="66b33-139">Typ odpowiedzi muszą zawierać token Identyfikatora dla OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="66b33-139">The response type, which must include an ID token for OpenID Connect.</span></span> <span data-ttu-id="66b33-140">Jeśli aplikacja sieci web musi również tokenów do wywoływania interfejsu API sieci web, możesz użyć `code+id_token`, jak firma Microsoft zostało wykonane w tym miejscu.</span><span class="sxs-lookup"><span data-stu-id="66b33-140">If your web app also needs tokens for calling a web API, you can use `code+id_token`, as we've done here.</span></span> |
| <span data-ttu-id="66b33-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="66b33-141">redirect_uri</span></span> |<span data-ttu-id="66b33-142">Zalecane</span><span class="sxs-lookup"><span data-stu-id="66b33-142">Recommended</span></span> |<span data-ttu-id="66b33-143">`redirect_uri` Parametr aplikacji, w którym można wysłanych i odebranych przez aplikację odpowiedzi uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="66b33-143">The `redirect_uri` parameter of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="66b33-144">Musi dokładnie odpowiadać jeden z `redirect_uri` parametrów, które zarejestrowano w portalu, z wyjątkiem tego, że musi być zakodowane w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="66b33-144">It must exactly match one of the `redirect_uri` parameters that you registered in the portal, except that it must be URL encoded.</span></span> |
| <span data-ttu-id="66b33-145">Zakres</span><span class="sxs-lookup"><span data-stu-id="66b33-145">scope</span></span> |<span data-ttu-id="66b33-146">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-146">Required</span></span> |<span data-ttu-id="66b33-147">Rozdzieloną spacjami listę zakresów.</span><span class="sxs-lookup"><span data-stu-id="66b33-147">A space-separated list of scopes.</span></span> <span data-ttu-id="66b33-148">Wartość pojedynczy zakres wskazuje do usługi Azure AD, oba uprawnienia, które są żądane.</span><span class="sxs-lookup"><span data-stu-id="66b33-148">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="66b33-149">`openid` Zakresu wskazuje uprawnienia, aby zalogować użytkownika i Pobierz dane o użytkowniku w formie tokeny Identyfikatora, (powszechnym na tym w dalszej części tego artykułu).</span><span class="sxs-lookup"><span data-stu-id="66b33-149">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens (more to come on this later in the article).</span></span> <span data-ttu-id="66b33-150">`offline_access` Zakres jest opcjonalne dla aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="66b33-150">The `offline_access` scope is optional for web apps.</span></span> <span data-ttu-id="66b33-151">Wskazuje, że aplikacja, należy *token odświeżania* długotrwałe dostępu do zasobów.</span><span class="sxs-lookup"><span data-stu-id="66b33-151">It indicates that your app will need a *refresh token* for long-lived access to resources.</span></span> |
| <span data-ttu-id="66b33-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="66b33-152">response_mode</span></span> |<span data-ttu-id="66b33-153">Zalecane</span><span class="sxs-lookup"><span data-stu-id="66b33-153">Recommended</span></span> |<span data-ttu-id="66b33-154">Metody, które mają być używane do wysyłania wynikowy kod autoryzacji z powrotem do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-154">The method that should be used to send the resulting authorization code back to your app.</span></span> <span data-ttu-id="66b33-155">Może być albo `query`, `form_post`, lub `fragment`.</span><span class="sxs-lookup"><span data-stu-id="66b33-155">It can be either `query`, `form_post`, or `fragment`.</span></span>  <span data-ttu-id="66b33-156">`form_post` Najlepiej zalecany jest tryb odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="66b33-156">The `form_post` response mode is recommended for best security.</span></span> |
| <span data-ttu-id="66b33-157">state</span><span class="sxs-lookup"><span data-stu-id="66b33-157">state</span></span> |<span data-ttu-id="66b33-158">Zalecane</span><span class="sxs-lookup"><span data-stu-id="66b33-158">Recommended</span></span> |<span data-ttu-id="66b33-159">Wartość zawarte w żądaniu, który jest także zwracany w odpowiedzi tokenu.</span><span class="sxs-lookup"><span data-stu-id="66b33-159">A value included in the request that is also returned in the token response.</span></span> <span data-ttu-id="66b33-160">Można go ciąg ma zawartość.</span><span class="sxs-lookup"><span data-stu-id="66b33-160">It can be a string of any content that you want.</span></span> <span data-ttu-id="66b33-161">Losowo generowany unikatową wartość jest zwykle używany zapobiegania fałszerstwie żądania międzywitrynowego.</span><span class="sxs-lookup"><span data-stu-id="66b33-161">A randomly generated unique value is typically used for preventing cross-site request forgery attacks.</span></span> <span data-ttu-id="66b33-162">Stan służy także do kodowania informacje o stanie użytkownika w aplikacji przed wystąpieniem żądania uwierzytelniania, takich jak strony, które były na.</span><span class="sxs-lookup"><span data-stu-id="66b33-162">The state is also used to encode information about the user's state in the app before the authentication request occurred, such as the page they were on.</span></span> |
| <span data-ttu-id="66b33-163">Identyfikator jednorazowy</span><span class="sxs-lookup"><span data-stu-id="66b33-163">nonce</span></span> |<span data-ttu-id="66b33-164">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-164">Required</span></span> |<span data-ttu-id="66b33-165">Wartość zawarte w żądaniu (wygenerowany przez aplikację), która zostanie uwzględniona w jego identyfikator tokenu jako oświadczenia.</span><span class="sxs-lookup"><span data-stu-id="66b33-165">A value included in the request (generated by the app) that will be included in the resulting ID token as a claim.</span></span> <span data-ttu-id="66b33-166">Aplikacja może zweryfikować tę wartość, aby ograniczyć ataków powtórzeń tokenów.</span><span class="sxs-lookup"><span data-stu-id="66b33-166">The app can then verify this value to mitigate token replay attacks.</span></span> <span data-ttu-id="66b33-167">Wartość jest zazwyczaj losowego unikatowy ciąg, który może służyć do identyfikowania pochodzenia żądania.</span><span class="sxs-lookup"><span data-stu-id="66b33-167">The value is typically a randomized unique string that can be used to identify the origin of the request.</span></span> |
| <span data-ttu-id="66b33-168">P</span><span class="sxs-lookup"><span data-stu-id="66b33-168">p</span></span> |<span data-ttu-id="66b33-169">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-169">Required</span></span> |<span data-ttu-id="66b33-170">Zasady, które zostaną wykonane.</span><span class="sxs-lookup"><span data-stu-id="66b33-170">The policy that will be executed.</span></span> <span data-ttu-id="66b33-171">Jest to nazwa zasady, która jest tworzona w dzierżawie usługi B2C.</span><span class="sxs-lookup"><span data-stu-id="66b33-171">It is the name of a policy that is created in your B2C tenant.</span></span> <span data-ttu-id="66b33-172">Wartość Nazwa zasad powinny rozpoczynać się od `b2c\_1\_`.</span><span class="sxs-lookup"><span data-stu-id="66b33-172">The policy name value should begin with `b2c\_1\_`.</span></span> <span data-ttu-id="66b33-173">Dowiedz się więcej o zasadach i [rozszerzona platforma zasad](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="66b33-173">Learn more about policies and the [extensible policy framework](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="66b33-174">wiersz</span><span class="sxs-lookup"><span data-stu-id="66b33-174">prompt</span></span> |<span data-ttu-id="66b33-175">Optional (Opcjonalność)</span><span class="sxs-lookup"><span data-stu-id="66b33-175">Optional</span></span> |<span data-ttu-id="66b33-176">Typ interakcji z użytkownikiem, który jest wymagany.</span><span class="sxs-lookup"><span data-stu-id="66b33-176">The type of user interaction that is required.</span></span> <span data-ttu-id="66b33-177">Jest jedyną poprawną wartością w tej chwili `login`, która wymusza na użytkowniku, aby wprowadzić swoje poświadczenia dla tego żądania.</span><span class="sxs-lookup"><span data-stu-id="66b33-177">The only valid value at this time is `login`, which forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="66b33-178">Logowanie jednokrotne nie zacznie obowiązywać.</span><span class="sxs-lookup"><span data-stu-id="66b33-178">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="66b33-179">W tym momencie użytkownik jest proszony o ukończenia przepływu pracy zasad.</span><span class="sxs-lookup"><span data-stu-id="66b33-179">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="66b33-180">Może to obejmować wprowadzić swoją nazwę użytkownika i hasło, użytkownik zalogować społecznościowych tożsamości, podczas tworzenia katalogu lub dowolną liczbę kroków w zależności od tego, jak zdefiniowano zasad.</span><span class="sxs-lookup"><span data-stu-id="66b33-180">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps, depending on how the policy is defined.</span></span>

<span data-ttu-id="66b33-181">Po wypełnieniu zasad przez użytkownika, usługi Azure AD zwraca odpowiedź do aplikacji na wskazany `redirect_uri` parametru za pomocą metody określonej w `response_mode` parametru.</span><span class="sxs-lookup"><span data-stu-id="66b33-181">After the user completes the policy, Azure AD returns a response to your app at the indicated `redirect_uri` parameter, by using the method that is specified in the `response_mode` parameter.</span></span> <span data-ttu-id="66b33-182">Odpowiedź jest taka sama dla każdego z powyższych przypadków, niezależnie od zasady, która jest wykonywana.</span><span class="sxs-lookup"><span data-stu-id="66b33-182">The response is the same for each of the preceding cases, independent of the policy that is executed.</span></span>

<span data-ttu-id="66b33-183">Odpowiedź oznaczająca Powodzenie przy użyciu `response_mode=fragment` powinien wyglądać tak:</span><span class="sxs-lookup"><span data-stu-id="66b33-183">A successful response using `response_mode=fragment` would look like:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="66b33-184">Parametr</span><span class="sxs-lookup"><span data-stu-id="66b33-184">Parameter</span></span> | <span data-ttu-id="66b33-185">Opis</span><span class="sxs-lookup"><span data-stu-id="66b33-185">Description</span></span> |
| --- | --- |
| <span data-ttu-id="66b33-186">żądaniu</span><span class="sxs-lookup"><span data-stu-id="66b33-186">id_token</span></span> |<span data-ttu-id="66b33-187">Token ID żądanej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-187">The ID token that the app requested.</span></span> <span data-ttu-id="66b33-188">Token identyfikator służy do weryfikacji tożsamości użytkownika i rozpocząć sesję użytkownika.</span><span class="sxs-lookup"><span data-stu-id="66b33-188">You can use the ID token to verify the user's identity and begin a session with the user.</span></span> <span data-ttu-id="66b33-189">Więcej informacji na temat identyfikator tokeny i ich zawartość znajdują się w [odwołania do tokenu usługi Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="66b33-189">More details on ID tokens and their contents are included in the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |
| <span data-ttu-id="66b33-190">Kod</span><span class="sxs-lookup"><span data-stu-id="66b33-190">code</span></span> |<span data-ttu-id="66b33-191">Kod autoryzacji żądanej aplikacji, jeśli używasz `response_type=code+id_token`.</span><span class="sxs-lookup"><span data-stu-id="66b33-191">The authorization code that the app requested, if you used `response_type=code+id_token`.</span></span> <span data-ttu-id="66b33-192">Aplikację można użyć kodu autoryzacji do żądania tokenu dostępu dla zasobu docelowego.</span><span class="sxs-lookup"><span data-stu-id="66b33-192">The app can use the authorization code to request an access token for a target resource.</span></span> <span data-ttu-id="66b33-193">Kody autoryzacji są bardzo krótkim okresie.</span><span class="sxs-lookup"><span data-stu-id="66b33-193">Authorization codes are very short-lived.</span></span> <span data-ttu-id="66b33-194">Zazwyczaj wygasną po około 10 minut.</span><span class="sxs-lookup"><span data-stu-id="66b33-194">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="66b33-195">state</span><span class="sxs-lookup"><span data-stu-id="66b33-195">state</span></span> |<span data-ttu-id="66b33-196">Jeśli `state` parametru jest zawarte w żądaniu, tę samą wartość powinna być widoczna w odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="66b33-196">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="66b33-197">Aplikację należy sprawdzić, czy `state` wartości żądań i odpowiedzi są identyczne.</span><span class="sxs-lookup"><span data-stu-id="66b33-197">The app should verify that the `state` values in the request and response are identical.</span></span> |

<span data-ttu-id="66b33-198">Odpowiedzi na błędy mogą być również wysyłane do `redirect_uri` parametru, dzięki czemu aplikacja może je odpowiednią obsługę:</span><span class="sxs-lookup"><span data-stu-id="66b33-198">Error responses can also be sent to the `redirect_uri` parameter so that the app can handle them appropriately:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=access_denied
&error_description=the+user+canceled+the+authentication
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="66b33-199">Parametr</span><span class="sxs-lookup"><span data-stu-id="66b33-199">Parameter</span></span> | <span data-ttu-id="66b33-200">Opis</span><span class="sxs-lookup"><span data-stu-id="66b33-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="66b33-201">error</span><span class="sxs-lookup"><span data-stu-id="66b33-201">error</span></span> |<span data-ttu-id="66b33-202">Ciąg kod błędu, który może służyć do klasyfikowania typy błędów, które występować i który może służyć do reagowania na błędy.</span><span class="sxs-lookup"><span data-stu-id="66b33-202">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="66b33-203">error_description</span><span class="sxs-lookup"><span data-stu-id="66b33-203">error_description</span></span> |<span data-ttu-id="66b33-204">Komunikat o błędzie, które mogą ułatwić dewelopera Określ przyczynę błędu uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="66b33-204">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="66b33-205">state</span><span class="sxs-lookup"><span data-stu-id="66b33-205">state</span></span> |<span data-ttu-id="66b33-206">Zobacz pełny opis w pierwszej tabeli w tej sekcji.</span><span class="sxs-lookup"><span data-stu-id="66b33-206">See the full description in the first table in this section.</span></span> <span data-ttu-id="66b33-207">Jeśli `state` parametru jest zawarte w żądaniu, tę samą wartość powinna być widoczna w odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="66b33-207">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="66b33-208">Aplikację należy sprawdzić, czy `state` wartości żądań i odpowiedzi są identyczne.</span><span class="sxs-lookup"><span data-stu-id="66b33-208">The app should verify that the `state` values in the request and response are identical.</span></span> |

## <a name="validate-the-id-token"></a><span data-ttu-id="66b33-209">Zweryfikuj token Identyfikatora</span><span class="sxs-lookup"><span data-stu-id="66b33-209">Validate the ID token</span></span>
<span data-ttu-id="66b33-210">Tylko odbieranie identyfikator tokenu jest niewystarczająca do uwierzytelnienia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="66b33-210">Just receiving an ID token is not enough to authenticate the user.</span></span> <span data-ttu-id="66b33-211">Musisz zweryfikować podpisu tokenu identyfikator i sprawdzić oświadczenia w tokenie na wymagania dotyczące Twojej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-211">You must validate the ID token's signature and verify the claims in the token per your app's requirements.</span></span> <span data-ttu-id="66b33-212">Używa usługi Azure AD B2C [tokenów sieci Web JSON (Jwt)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) i kryptografii klucza publicznego do podpisywania tokenów i sprawdź, czy są prawidłowe.</span><span class="sxs-lookup"><span data-stu-id="66b33-212">Azure AD B2C uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography to sign tokens and verify that they are valid.</span></span>

<span data-ttu-id="66b33-213">Istnieje wiele bibliotekach open source dostępnych sprawdzania poprawności tokenów Jwt, w zależności od języka preferencji.</span><span class="sxs-lookup"><span data-stu-id="66b33-213">There are many open-source libraries that are available for validating JWTs, depending on your language of preference.</span></span> <span data-ttu-id="66b33-214">Firma Microsoft zaleca eksploracji te opcje, a nie implementacji logiki weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-214">We recommend exploring those options rather than implementing your own validation logic.</span></span> <span data-ttu-id="66b33-215">Informacje w tym miejscu będzie przydatna w ustaleniem, jak poprawnie używać tych bibliotek.</span><span class="sxs-lookup"><span data-stu-id="66b33-215">The information here will be useful in figuring out how to properly use those libraries.</span></span>

<span data-ttu-id="66b33-216">Usługa Azure AD B2C ma OpenID Connect punktu końcowego metadanych, dzięki czemu aplikacja może pobrać informacji na temat usługi Azure AD B2C w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="66b33-216">Azure AD B2C has an OpenID Connect metadata endpoint, which allows an app to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="66b33-217">Informacje te obejmują punkty końcowe, zawartość tokenu i klucze podpisywania tokenu.</span><span class="sxs-lookup"><span data-stu-id="66b33-217">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="66b33-218">Brak dokument metadanych JSON dla każdej zasady w dzierżawie usługi B2C.</span><span class="sxs-lookup"><span data-stu-id="66b33-218">There is a JSON metadata document for each policy in your B2C tenant.</span></span> <span data-ttu-id="66b33-219">Na przykład dokument metadanych dla `b2c_1_sign_in` zasad w `fabrikamb2c.onmicrosoft.com` znajduje się pod adresem:</span><span class="sxs-lookup"><span data-stu-id="66b33-219">For example, the metadata document for the `b2c_1_sign_in` policy in `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in`

<span data-ttu-id="66b33-220">Jedna z właściwości tego dokumentu konfiguracji jest `jwks_uri`, którego wartość jest takie same zasady:</span><span class="sxs-lookup"><span data-stu-id="66b33-220">One of the properties of this configuration document is `jwks_uri`, whose value for the same policy would be:</span></span>

<span data-ttu-id="66b33-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span><span class="sxs-lookup"><span data-stu-id="66b33-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span></span>

<span data-ttu-id="66b33-222">Aby określić zasady, których użyto w identyfikatorze podpisywania tokenu i skąd można pobrać metadanych, masz dwie opcje.</span><span class="sxs-lookup"><span data-stu-id="66b33-222">To determine which policy was used in signing an ID token (and from where to fetch the metadata), you have two options.</span></span> <span data-ttu-id="66b33-223">Po pierwsze, nazwa zasady jest dołączona do `acr` oświadczenia w tokenie identyfikator.</span><span class="sxs-lookup"><span data-stu-id="66b33-223">First, the policy name is included in the `acr` claim in the ID token.</span></span> <span data-ttu-id="66b33-224">Informacje o tym, jak można przeanalizować oświadczeń z tokenem identyfikator, zobacz [odwołania do tokenu usługi Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="66b33-224">For information on how to parse the claims from an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="66b33-225">Drugą opcją jest do kodowania zasad wartości `state` parametr podczas wystawiania żądania, a następnie dekodowania go, aby określić zasady, które zostało użyte.</span><span class="sxs-lookup"><span data-stu-id="66b33-225">Your other option is to encode the policy in the value of the `state` parameter when you issue the request, and then decode it to determine which policy was used.</span></span> <span data-ttu-id="66b33-226">Każda metoda jest prawidłowa.</span><span class="sxs-lookup"><span data-stu-id="66b33-226">Either method is valid.</span></span>

<span data-ttu-id="66b33-227">Po zostały nabyte dokument metadanych z punktem końcowym metadanych OpenID Connect, możesz użyć klucze publiczne RSA 256 (które znajdują się w tym punkcie końcowym) można zweryfikować podpisu tokenu identyfikator.</span><span class="sxs-lookup"><span data-stu-id="66b33-227">After you've acquired the metadata document from the OpenID Connect metadata endpoint, you can use the RSA 256 public keys (which are located at this endpoint) to validate the signature of the ID token.</span></span> <span data-ttu-id="66b33-228">Może istnieć wiele kluczy wymienione w tym punkcie końcowym w dowolny punkt w czasie, identyfikowanych przez `kid` oświadczeń.</span><span class="sxs-lookup"><span data-stu-id="66b33-228">There might be multiple keys listed at this endpoint at any given point in time, each identified by a `kid` claim.</span></span> <span data-ttu-id="66b33-229">Zawiera także nagłówka Identyfikatora tokenu `kid` oświadczeń, która wskazuje, które z tych kluczy został użyty do podpisania token Identyfikatora.</span><span class="sxs-lookup"><span data-stu-id="66b33-229">The header of the ID token also contains a `kid` claim, which indicates which of these keys was used to sign the ID token.</span></span> <span data-ttu-id="66b33-230">Aby uzyskać więcej informacji, zobacz [odwołania do tokenu usługi Azure AD B2C](active-directory-b2c-reference-tokens.md) (sekcję [sprawdzanie poprawności tokenów](active-directory-b2c-reference-tokens.md#token-validation), w szczególności).</span><span class="sxs-lookup"><span data-stu-id="66b33-230">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md) (the section on [validating tokens](active-directory-b2c-reference-tokens.md#token-validation), in particular).</span></span>
<!--TODO: Improve the information on this-->

<span data-ttu-id="66b33-231">Po upewnieniu podpisu tokenu identyfikator, istnieje kilka oświadczenia, które należy sprawdzić.</span><span class="sxs-lookup"><span data-stu-id="66b33-231">After you've validated the signature of the ID token, there are several claims that you need to verify.</span></span> <span data-ttu-id="66b33-232">Na wystąpienie:</span><span class="sxs-lookup"><span data-stu-id="66b33-232">For instance:</span></span>

* <span data-ttu-id="66b33-233">Należy sprawdzić, czy `nonce` oświadczeń zapobiec atakom powtórzeń tokenów.</span><span class="sxs-lookup"><span data-stu-id="66b33-233">You should validate the `nonce` claim to prevent token replay attacks.</span></span> <span data-ttu-id="66b33-234">Jego wartość musi być określony w żądaniu logowania.</span><span class="sxs-lookup"><span data-stu-id="66b33-234">Its value should be what you specified in the sign-in request.</span></span>
* <span data-ttu-id="66b33-235">Należy sprawdzić, czy `aud` oświadczeń upewnić się, czy identyfikator token został wystawiony dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-235">You should validate the `aud` claim to ensure that the ID token was issued for your app.</span></span> <span data-ttu-id="66b33-236">Jego wartość powinna być identyfikator aplikacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-236">Its value should be the application ID of your app.</span></span>
* <span data-ttu-id="66b33-237">Należy sprawdzić, czy `iat` i `exp` oświadczeń upewnić się, że identyfikator token nie wygasł.</span><span class="sxs-lookup"><span data-stu-id="66b33-237">You should validate the `iat` and `exp` claims to ensure that the ID token has not expired.</span></span>

<span data-ttu-id="66b33-238">Istnieje kilka więcej operacji sprawdzania poprawności, które należy wykonać.</span><span class="sxs-lookup"><span data-stu-id="66b33-238">There are also several more validations that you should perform.</span></span> <span data-ttu-id="66b33-239">Te ustawienia zostały opisane szczegółowo w [OpenID Connect podstawowych specyfikacji](http://openid.net/specs/openid-connect-core-1_0.html).  Można również sprawdzić dodatkowe roszczenia, w zależności od danego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="66b33-239">These are described in detail in the [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  You might also want to validate additional claims, depending on your scenario.</span></span> <span data-ttu-id="66b33-240">Niektóre typowe operacje sprawdzania poprawności obejmują:</span><span class="sxs-lookup"><span data-stu-id="66b33-240">Some common validations include:</span></span>

* <span data-ttu-id="66b33-241">Zapewnienie, że dla aplikacji po zarejestrowaniu użytkownika i/lub organizacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-241">Ensuring that the user/organization has signed up for the app.</span></span>
* <span data-ttu-id="66b33-242">Zapewnienie, że użytkownik ma odpowiednie autoryzacji/uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="66b33-242">Ensuring that the user has proper authorization/privileges.</span></span>
* <span data-ttu-id="66b33-243">Zapewnienie, że niektóre siły uwierzytelniania wystąpił, takich jak uwierzytelnianie wieloskładnikowe Azure.</span><span class="sxs-lookup"><span data-stu-id="66b33-243">Ensuring that a certain strength of authentication has occurred, such as Azure Multi-Factor Authentication.</span></span>

<span data-ttu-id="66b33-244">Aby uzyskać więcej informacji na oświadczenia w tokenie identyfikator, zobacz [odwołania do tokenu usługi Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="66b33-244">For more information on the claims in an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>

<span data-ttu-id="66b33-245">Po sprawdzeniu poprawności tokenu identyfikator, można rozpocząć sesji z użytkownikiem.</span><span class="sxs-lookup"><span data-stu-id="66b33-245">After you have validated the ID token, you can begin a session with the user.</span></span> <span data-ttu-id="66b33-246">Oświadczenia w tokenie identyfikator służy do uzyskiwania informacji o użytkowniku w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-246">You can use the claims in the ID token to obtain information about the user in your app.</span></span> <span data-ttu-id="66b33-247">Zastosowania te informacje obejmują ekranu, rekordów i autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-247">Uses for this information include display, records, and authorization.</span></span>

## <a name="get-a-token"></a><span data-ttu-id="66b33-248">Uzyskaj token</span><span class="sxs-lookup"><span data-stu-id="66b33-248">Get a token</span></span>
<span data-ttu-id="66b33-249">Jeśli potrzebujesz aplikacji sieci web można wykonać tylko zasady można pominąć kilka kolejnych sekcjach.</span><span class="sxs-lookup"><span data-stu-id="66b33-249">If you need your web app to only execute policies, you can skip the next few sections.</span></span> <span data-ttu-id="66b33-250">Sekcje te są stosowane tylko do sieci web, aplikacje, które należy podjąć uwierzytelnione wywołania interfejsu API sieci web i są chronione przez usługę Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="66b33-250">These sections are applicable only to web apps that need to make authenticated calls to a web API and are also protected by Azure AD B2C.</span></span>

<span data-ttu-id="66b33-251">Możesz zrealizować kod autoryzacji, które zostało zakupione (przy użyciu `response_type=code+id_token`) dla tokenu do żądanego zasobu, wysyłając `POST` żądanie `/token` punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="66b33-251">You can redeem the authorization code that you acquired (by using `response_type=code+id_token`) for a token to the desired resource by sending a `POST` request to the `/token` endpoint.</span></span> <span data-ttu-id="66b33-252">Obecnie tylko zasób, jakiej może żądać tokenu dla jest własnych aplikacji zaplecza interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="66b33-252">Currently, the only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="66b33-253">Konwencja dla żądania tokenu do siebie ma użyć Identyfikatora klienta aplikacji jako zakres:</span><span class="sxs-lookup"><span data-stu-id="66b33-253">The convention for requesting a token to yourself is to use your app's client ID as the scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>

```

| <span data-ttu-id="66b33-254">Parametr</span><span class="sxs-lookup"><span data-stu-id="66b33-254">Parameter</span></span> | <span data-ttu-id="66b33-255">Wymagane?</span><span class="sxs-lookup"><span data-stu-id="66b33-255">Required?</span></span> | <span data-ttu-id="66b33-256">Opis</span><span class="sxs-lookup"><span data-stu-id="66b33-256">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="66b33-257">P</span><span class="sxs-lookup"><span data-stu-id="66b33-257">p</span></span> |<span data-ttu-id="66b33-258">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-258">Required</span></span> |<span data-ttu-id="66b33-259">Zasady, które zostało użyte do uzyskania kod autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-259">The policy that was used to acquire the authorization code.</span></span> <span data-ttu-id="66b33-260">Nie można użyć różnych zasad w tym żądaniu.</span><span class="sxs-lookup"><span data-stu-id="66b33-260">You cannot use a different policy in this request.</span></span> <span data-ttu-id="66b33-261">Należy pamiętać, Dodaj ten parametr ciągu zapytania nie `POST` treści.</span><span class="sxs-lookup"><span data-stu-id="66b33-261">Note that you add this parameter to the query string, not to the `POST` body.</span></span> |
| <span data-ttu-id="66b33-262">client_id</span><span class="sxs-lookup"><span data-stu-id="66b33-262">client_id</span></span> |<span data-ttu-id="66b33-263">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-263">Required</span></span> |<span data-ttu-id="66b33-264">Identyfikator aplikacji, która [portalu Azure](https://portal.azure.com/) przypisany do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-264">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="66b33-265">Typ grant_type</span><span class="sxs-lookup"><span data-stu-id="66b33-265">grant_type</span></span> |<span data-ttu-id="66b33-266">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-266">Required</span></span> |<span data-ttu-id="66b33-267">Typ grant, który musi być `authorization_code` dla przepływu kodu autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-267">The type of grant, which must be `authorization_code` for the authorization code flow.</span></span> |
| <span data-ttu-id="66b33-268">Zakres</span><span class="sxs-lookup"><span data-stu-id="66b33-268">scope</span></span> |<span data-ttu-id="66b33-269">Zalecane</span><span class="sxs-lookup"><span data-stu-id="66b33-269">Recommended</span></span> |<span data-ttu-id="66b33-270">Rozdzieloną spacjami listę zakresów.</span><span class="sxs-lookup"><span data-stu-id="66b33-270">A space-separated list of scopes.</span></span> <span data-ttu-id="66b33-271">Wartość pojedynczy zakres wskazuje do usługi Azure AD, oba uprawnienia, które są żądane.</span><span class="sxs-lookup"><span data-stu-id="66b33-271">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="66b33-272">`openid` Zakresu wskazuje uprawnienia, aby zalogować użytkownika i Pobierz dane o użytkowniku w formie parametrów w żądaniu.</span><span class="sxs-lookup"><span data-stu-id="66b33-272">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of id_token parameters.</span></span> <span data-ttu-id="66b33-273">Może służyć do uzyskania tokenów do własnych aplikacji zaplecza interfejsu API sieci web, która jest reprezentowana przez ten sam identyfikator aplikacji, co klient.</span><span class="sxs-lookup"><span data-stu-id="66b33-273">It can be used to get tokens to your app's own back-end web API, which is represented by the same application ID as the client.</span></span> <span data-ttu-id="66b33-274">`offline_access` Zakresu wskazuje, że aplikacji będą potrzebne token odświeżania długotrwałe dostępu do zasobów.</span><span class="sxs-lookup"><span data-stu-id="66b33-274">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="66b33-275">Kod</span><span class="sxs-lookup"><span data-stu-id="66b33-275">code</span></span> |<span data-ttu-id="66b33-276">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-276">Required</span></span> |<span data-ttu-id="66b33-277">Uzyskanego w pierwszego etap przepływu kodu autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-277">The authorization code that you acquired in the first leg of the flow.</span></span> |
| <span data-ttu-id="66b33-278">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="66b33-278">redirect_uri</span></span> |<span data-ttu-id="66b33-279">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-279">Required</span></span> |<span data-ttu-id="66b33-280">`redirect_uri` Parametr aplikacji, w którym odebrano kod autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-280">The `redirect_uri` parameter of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="66b33-281">client_secret</span><span class="sxs-lookup"><span data-stu-id="66b33-281">client_secret</span></span> |<span data-ttu-id="66b33-282">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-282">Required</span></span> |<span data-ttu-id="66b33-283">Klucz tajny aplikacji, która wygenerowała w [portalu Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="66b33-283">The application secret that you generated in the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="66b33-284">Ten klucz tajny aplikacji jest ważny artefaktu.</span><span class="sxs-lookup"><span data-stu-id="66b33-284">This application secret is an important security artifact.</span></span> <span data-ttu-id="66b33-285">Użytkownik powinien Zapisz w bezpiecznej lokalizacji na serwerze.</span><span class="sxs-lookup"><span data-stu-id="66b33-285">You should store it securely on your server.</span></span> <span data-ttu-id="66b33-286">Należy również Obróć ten klucz tajny klienta w regularnych odstępach czasu.</span><span class="sxs-lookup"><span data-stu-id="66b33-286">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="66b33-287">Odpowiedź oznaczająca Powodzenie tokenu wygląda następująco:</span><span class="sxs-lookup"><span data-stu-id="66b33-287">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="66b33-288">Parametr</span><span class="sxs-lookup"><span data-stu-id="66b33-288">Parameter</span></span> | <span data-ttu-id="66b33-289">Opis</span><span class="sxs-lookup"><span data-stu-id="66b33-289">Description</span></span> |
| --- | --- |
| <span data-ttu-id="66b33-290">not_before</span><span class="sxs-lookup"><span data-stu-id="66b33-290">not_before</span></span> |<span data-ttu-id="66b33-291">Czas, w którym token jest uznawany za ważny w czasie epoki.</span><span class="sxs-lookup"><span data-stu-id="66b33-291">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="66b33-292">token_type</span><span class="sxs-lookup"><span data-stu-id="66b33-292">token_type</span></span> |<span data-ttu-id="66b33-293">Wartość typu tokenu.</span><span class="sxs-lookup"><span data-stu-id="66b33-293">The token type value.</span></span> <span data-ttu-id="66b33-294">Jedynym typem, który obsługuje usługę Azure AD jest `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="66b33-294">The only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="66b33-295">' access_token '</span><span class="sxs-lookup"><span data-stu-id="66b33-295">access_token</span></span> |<span data-ttu-id="66b33-296">Podpisany token JWT żądana.</span><span class="sxs-lookup"><span data-stu-id="66b33-296">The signed JWT token that you requested.</span></span> |
| <span data-ttu-id="66b33-297">Zakres</span><span class="sxs-lookup"><span data-stu-id="66b33-297">scope</span></span> |<span data-ttu-id="66b33-298">Zakresy, dla których token jest prawidłowy.</span><span class="sxs-lookup"><span data-stu-id="66b33-298">The scopes for which the token is valid.</span></span> <span data-ttu-id="66b33-299">Mogą być one używane do buforowania tokeny na potrzeby późniejszego użycia.</span><span class="sxs-lookup"><span data-stu-id="66b33-299">These can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="66b33-300">expires_in</span><span class="sxs-lookup"><span data-stu-id="66b33-300">expires_in</span></span> |<span data-ttu-id="66b33-301">Długość czasu, przez który token dostępu jest nieprawidłowy (w sekundach).</span><span class="sxs-lookup"><span data-stu-id="66b33-301">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="66b33-302">refresh_token</span><span class="sxs-lookup"><span data-stu-id="66b33-302">refresh_token</span></span> |<span data-ttu-id="66b33-303">Token odświeżania OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="66b33-303">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="66b33-304">Aplikacja może używać ten token, aby uzyskać dodatkowe tokeny, po wygaśnięciu tokenu bieżącego.</span><span class="sxs-lookup"><span data-stu-id="66b33-304">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="66b33-305">Odśwież tokeny są to długotrwałe i pozwala zachować dostęp do zasobów przez dłuższy czas.</span><span class="sxs-lookup"><span data-stu-id="66b33-305">Refresh tokens are long-lived and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="66b33-306">Aby uzyskać więcej informacji, zapoznaj się [odwołania do tokenu usługi B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="66b33-306">For more details, refer to the [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="66b33-307">Uwaga musi użycie zakresu `offline_access` autoryzacji i żądania tokenów w celu odbierania token odświeżania.</span><span class="sxs-lookup"><span data-stu-id="66b33-307">Note that you must have used the scope `offline_access` in both the authorization and token requests in order to receive a refresh token.</span></span> |

<span data-ttu-id="66b33-308">Błąd odpowiedzi następującą postać:</span><span class="sxs-lookup"><span data-stu-id="66b33-308">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="66b33-309">Parametr</span><span class="sxs-lookup"><span data-stu-id="66b33-309">Parameter</span></span> | <span data-ttu-id="66b33-310">Opis</span><span class="sxs-lookup"><span data-stu-id="66b33-310">Description</span></span> |
| --- | --- |
| <span data-ttu-id="66b33-311">error</span><span class="sxs-lookup"><span data-stu-id="66b33-311">error</span></span> |<span data-ttu-id="66b33-312">Ciąg kod błędu, który może służyć do klasyfikowania typy błędów, które występować i który może służyć do reagowania na błędy.</span><span class="sxs-lookup"><span data-stu-id="66b33-312">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="66b33-313">error_description</span><span class="sxs-lookup"><span data-stu-id="66b33-313">error_description</span></span> |<span data-ttu-id="66b33-314">Komunikat o błędzie, które mogą ułatwić dewelopera Określ przyczynę błędu uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="66b33-314">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="use-the-token"></a><span data-ttu-id="66b33-315">Użyj tokenu</span><span class="sxs-lookup"><span data-stu-id="66b33-315">Use the token</span></span>
<span data-ttu-id="66b33-316">Teraz, zostały pomyślnie uzyskano tokenu dostępu, można użyć tokenu w żądaniach na danym zapleczu interfejsów API sieci web przez włączenie jej w `Authorization` nagłówka:</span><span class="sxs-lookup"><span data-stu-id="66b33-316">Now that you've successfully acquired an access token, you can use the token in requests to your back-end web APIs by including it in the `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="refresh-the-token"></a><span data-ttu-id="66b33-317">Token odświeżania</span><span class="sxs-lookup"><span data-stu-id="66b33-317">Refresh the token</span></span>
<span data-ttu-id="66b33-318">Identyfikator tokeny są krótkim okresie.</span><span class="sxs-lookup"><span data-stu-id="66b33-318">ID tokens are short-lived.</span></span> <span data-ttu-id="66b33-319">Należy je odświeżyć, po wygaśnięciu, aby kontynuować, będą mogli uzyskać dostęp do zasobów.</span><span class="sxs-lookup"><span data-stu-id="66b33-319">You must refresh them after they expire to continue being able to access resources.</span></span> <span data-ttu-id="66b33-320">Możesz to zrobić poprzez przesłanie innego `POST` żądanie `/token` punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="66b33-320">You can do so by submitting another `POST` request to the `/token` endpoint.</span></span> <span data-ttu-id="66b33-321">Podaj w tej chwili `refresh_token` parametru zamiast `code` parametru:</span><span class="sxs-lookup"><span data-stu-id="66b33-321">This time, provide the `refresh_token` parameter instead of the `code` parameter:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=openid offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>
```

| <span data-ttu-id="66b33-322">Parametr</span><span class="sxs-lookup"><span data-stu-id="66b33-322">Parameter</span></span> | <span data-ttu-id="66b33-323">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-323">Required</span></span> | <span data-ttu-id="66b33-324">Opis</span><span class="sxs-lookup"><span data-stu-id="66b33-324">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="66b33-325">P</span><span class="sxs-lookup"><span data-stu-id="66b33-325">p</span></span> |<span data-ttu-id="66b33-326">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-326">Required</span></span> |<span data-ttu-id="66b33-327">Zasady, które zostało użyte do uzyskania oryginalnego token odświeżania.</span><span class="sxs-lookup"><span data-stu-id="66b33-327">The policy that was used to acquire the original refresh token.</span></span> <span data-ttu-id="66b33-328">Nie można użyć różnych zasad w tym żądaniu.</span><span class="sxs-lookup"><span data-stu-id="66b33-328">You cannot use a different policy in this request.</span></span> <span data-ttu-id="66b33-329">Należy pamiętać, Dodaj ten parametr, ciąg zapytania, a nie do treść wpisu.</span><span class="sxs-lookup"><span data-stu-id="66b33-329">Note that you add this parameter to the query string, not to the POST body.</span></span> |
| <span data-ttu-id="66b33-330">client_id</span><span class="sxs-lookup"><span data-stu-id="66b33-330">client_id</span></span> |<span data-ttu-id="66b33-331">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-331">Required</span></span> |<span data-ttu-id="66b33-332">Identyfikator aplikacji, która [portalu Azure](https://portal.azure.com/) przypisany do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-332">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="66b33-333">Typ grant_type</span><span class="sxs-lookup"><span data-stu-id="66b33-333">grant_type</span></span> |<span data-ttu-id="66b33-334">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-334">Required</span></span> |<span data-ttu-id="66b33-335">Typ grant, który musi być token odświeżania dla tego etap przepływu kodu autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-335">The type of grant, which must be a refresh token for this leg of the authorization code flow.</span></span> |
| <span data-ttu-id="66b33-336">Zakres</span><span class="sxs-lookup"><span data-stu-id="66b33-336">scope</span></span> |<span data-ttu-id="66b33-337">Zalecane</span><span class="sxs-lookup"><span data-stu-id="66b33-337">Recommended</span></span> |<span data-ttu-id="66b33-338">Rozdzieloną spacjami listę zakresów.</span><span class="sxs-lookup"><span data-stu-id="66b33-338">A space-separated list of scopes.</span></span> <span data-ttu-id="66b33-339">Wartość pojedynczy zakres wskazuje do usługi Azure AD, oba uprawnienia, które są żądane.</span><span class="sxs-lookup"><span data-stu-id="66b33-339">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="66b33-340">`openid` Uprawnienia, aby zalogować użytkownika i Pobierz dane o użytkowniku w formie tokenów identyfikator wskazuje zakres.</span><span class="sxs-lookup"><span data-stu-id="66b33-340">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens.</span></span> <span data-ttu-id="66b33-341">Może służyć do uzyskania tokenów do własnych aplikacji zaplecza interfejsu API sieci web, która jest reprezentowana przez ten sam identyfikator aplikacji, co klient.</span><span class="sxs-lookup"><span data-stu-id="66b33-341">It can be used to get tokens to your app's own back-end web API, which is represented by the same application ID as the client.</span></span> <span data-ttu-id="66b33-342">`offline_access` Zakresu wskazuje, że aplikacji będą potrzebne token odświeżania długotrwałe dostępu do zasobów.</span><span class="sxs-lookup"><span data-stu-id="66b33-342">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="66b33-343">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="66b33-343">redirect_uri</span></span> |<span data-ttu-id="66b33-344">Zalecane</span><span class="sxs-lookup"><span data-stu-id="66b33-344">Recommended</span></span> |<span data-ttu-id="66b33-345">`redirect_uri` Parametr aplikacji, w którym odebrano kod autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-345">The `redirect_uri` parameter of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="66b33-346">refresh_token</span><span class="sxs-lookup"><span data-stu-id="66b33-346">refresh_token</span></span> |<span data-ttu-id="66b33-347">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-347">Required</span></span> |<span data-ttu-id="66b33-348">Oryginalny token odświeżania uzyskanego w drugi etap przepływu.</span><span class="sxs-lookup"><span data-stu-id="66b33-348">The original refresh token that you acquired in the second leg of the flow.</span></span> <span data-ttu-id="66b33-349">Uwaga musi użycie zakresu `offline_access` autoryzacji i żądania tokenów w celu odbierania token odświeżania.</span><span class="sxs-lookup"><span data-stu-id="66b33-349">Note that you must have used the scope `offline_access` in both the authorization and token requests in order to receive a refresh token.</span></span> |
| <span data-ttu-id="66b33-350">client_secret</span><span class="sxs-lookup"><span data-stu-id="66b33-350">client_secret</span></span> |<span data-ttu-id="66b33-351">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-351">Required</span></span> |<span data-ttu-id="66b33-352">Klucz tajny aplikacji, która wygenerowała w [portalu Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="66b33-352">The application secret that you generated in the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="66b33-353">Ten klucz tajny aplikacji jest ważny artefaktu.</span><span class="sxs-lookup"><span data-stu-id="66b33-353">This application secret is an important security artifact.</span></span> <span data-ttu-id="66b33-354">Użytkownik powinien Zapisz w bezpiecznej lokalizacji na serwerze.</span><span class="sxs-lookup"><span data-stu-id="66b33-354">You should store it securely on your server.</span></span> <span data-ttu-id="66b33-355">Należy również Obróć ten klucz tajny klienta w regularnych odstępach czasu.</span><span class="sxs-lookup"><span data-stu-id="66b33-355">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="66b33-356">Odpowiedź oznaczająca Powodzenie tokenu wygląda następująco:</span><span class="sxs-lookup"><span data-stu-id="66b33-356">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="66b33-357">Parametr</span><span class="sxs-lookup"><span data-stu-id="66b33-357">Parameter</span></span> | <span data-ttu-id="66b33-358">Opis</span><span class="sxs-lookup"><span data-stu-id="66b33-358">Description</span></span> |
| --- | --- |
| <span data-ttu-id="66b33-359">not_before</span><span class="sxs-lookup"><span data-stu-id="66b33-359">not_before</span></span> |<span data-ttu-id="66b33-360">Czas, w którym token jest uznawany za ważny w czasie epoki.</span><span class="sxs-lookup"><span data-stu-id="66b33-360">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="66b33-361">token_type</span><span class="sxs-lookup"><span data-stu-id="66b33-361">token_type</span></span> |<span data-ttu-id="66b33-362">Wartość typu tokenu.</span><span class="sxs-lookup"><span data-stu-id="66b33-362">The token type value.</span></span> <span data-ttu-id="66b33-363">Jedynym typem, który obsługuje usługę Azure AD jest `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="66b33-363">The only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="66b33-364">' access_token '</span><span class="sxs-lookup"><span data-stu-id="66b33-364">access_token</span></span> |<span data-ttu-id="66b33-365">Podpisany token JWT żądana.</span><span class="sxs-lookup"><span data-stu-id="66b33-365">The signed JWT token that you requested.</span></span> |
| <span data-ttu-id="66b33-366">Zakres</span><span class="sxs-lookup"><span data-stu-id="66b33-366">scope</span></span> |<span data-ttu-id="66b33-367">Zakres, który token jest prawidłowy, która może służyć do buforowania tokeny na potrzeby późniejszego użycia.</span><span class="sxs-lookup"><span data-stu-id="66b33-367">The scope that the token is valid for, which can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="66b33-368">expires_in</span><span class="sxs-lookup"><span data-stu-id="66b33-368">expires_in</span></span> |<span data-ttu-id="66b33-369">Długość czasu, przez który token dostępu jest nieprawidłowy (w sekundach).</span><span class="sxs-lookup"><span data-stu-id="66b33-369">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="66b33-370">refresh_token</span><span class="sxs-lookup"><span data-stu-id="66b33-370">refresh_token</span></span> |<span data-ttu-id="66b33-371">Token odświeżania OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="66b33-371">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="66b33-372">Aplikacja może używać ten token, aby uzyskać dodatkowe tokeny, po wygaśnięciu tokenu bieżącego.</span><span class="sxs-lookup"><span data-stu-id="66b33-372">The app can use this token to acquire additional tokens after the current token expires.</span></span>  <span data-ttu-id="66b33-373">Odśwież tokeny są to długotrwałe i pozwala zachować dostęp do zasobów przez dłuższy czas.</span><span class="sxs-lookup"><span data-stu-id="66b33-373">Refresh tokens are long-lived and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="66b33-374">Aby uzyskać więcej szczegółów, zobacz [odwołania do tokenu usługi B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="66b33-374">For more detail, refer to the [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="66b33-375">Błąd odpowiedzi następującą postać:</span><span class="sxs-lookup"><span data-stu-id="66b33-375">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="66b33-376">Parametr</span><span class="sxs-lookup"><span data-stu-id="66b33-376">Parameter</span></span> | <span data-ttu-id="66b33-377">Opis</span><span class="sxs-lookup"><span data-stu-id="66b33-377">Description</span></span> |
| --- | --- |
| <span data-ttu-id="66b33-378">error</span><span class="sxs-lookup"><span data-stu-id="66b33-378">error</span></span> |<span data-ttu-id="66b33-379">Ciąg kod błędu, który może służyć do klasyfikowania typy błędów, które występować i który może służyć do reagowania na błędy.</span><span class="sxs-lookup"><span data-stu-id="66b33-379">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="66b33-380">error_description</span><span class="sxs-lookup"><span data-stu-id="66b33-380">error_description</span></span> |<span data-ttu-id="66b33-381">Komunikat o błędzie, które mogą ułatwić dewelopera Określ przyczynę błędu uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="66b33-381">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="send-a-sign-out-request"></a><span data-ttu-id="66b33-382">Wyślij żądanie wylogowania</span><span class="sxs-lookup"><span data-stu-id="66b33-382">Send a sign-out request</span></span>
<span data-ttu-id="66b33-383">Jeśli chcesz zalogować użytkownika poza aplikacją nie jest wystarczająco, aby wyczyścić pliki cookie aplikacji lub w inny sposób zakończenia sesji z użytkownikiem.</span><span class="sxs-lookup"><span data-stu-id="66b33-383">When you want to sign the user out of the app, it is not enough to clear your app's cookies or otherwise end the session with the user.</span></span> <span data-ttu-id="66b33-384">Należy również przekierować użytkownika do usługi Azure AD, aby się wylogować. W przypadku awarii to zrobić, użytkownik może mieć możliwość ponownego uwierzytelnienia do aplikacji bez konieczności ponownego wprowadzania poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="66b33-384">You must also redirect the user to Azure AD to sign out. If you fail to do so, the user might be able to reauthenticate to your app without entering their credentials again.</span></span> <span data-ttu-id="66b33-385">Jest tak, ponieważ mają one nieprawidłowy jednej logowania jednokrotnego sesji z usługą Azure AD.</span><span class="sxs-lookup"><span data-stu-id="66b33-385">This is because they will have a valid single sign-on session with Azure AD.</span></span>

<span data-ttu-id="66b33-386">Po prostu można przekierować użytkownika do `end_session` punktu końcowego, który znajduje się w dokumencie metadanych OpenID Connect opisanego wcześniej w "Zweryfikuj token Identyfikatora" sekcji:</span><span class="sxs-lookup"><span data-stu-id="66b33-386">You can simply redirect the user to the `end_session` endpoint that is listed in the OpenID Connect metadata document described earlier in the "Validate the ID token" section:</span></span>

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/logout?
p=b2c_1_sign_in
&post_logout_redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
```

| <span data-ttu-id="66b33-387">Parametr</span><span class="sxs-lookup"><span data-stu-id="66b33-387">Parameter</span></span> | <span data-ttu-id="66b33-388">Wymagane?</span><span class="sxs-lookup"><span data-stu-id="66b33-388">Required?</span></span> | <span data-ttu-id="66b33-389">Opis</span><span class="sxs-lookup"><span data-stu-id="66b33-389">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="66b33-390">P</span><span class="sxs-lookup"><span data-stu-id="66b33-390">p</span></span> |<span data-ttu-id="66b33-391">Wymagane</span><span class="sxs-lookup"><span data-stu-id="66b33-391">Required</span></span> |<span data-ttu-id="66b33-392">Zasada, która ma być używany do podpisywania użytkownika z aplikacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-392">The policy that you want to use to sign the user out of your application.</span></span> |
| <span data-ttu-id="66b33-393">post_logout_redirect_uri</span><span class="sxs-lookup"><span data-stu-id="66b33-393">post_logout_redirect_uri</span></span> |<span data-ttu-id="66b33-394">Zalecane</span><span class="sxs-lookup"><span data-stu-id="66b33-394">Recommended</span></span> |<span data-ttu-id="66b33-395">Adres URL, który użytkownik powinien być przekierowywany użytkownik po pomyślnym wylogowania. Jeśli nie zostanie włączony, usługi Azure AD B2C pokazuje użytkownikowi zostanie wyświetlony komunikat ogólny.</span><span class="sxs-lookup"><span data-stu-id="66b33-395">The URL that the user should be redirected to after successful sign-out. If it is not included, Azure AD B2C shows the user a generic message.</span></span> |

> [!NOTE]
> <span data-ttu-id="66b33-396">Mimo że kierowanie użytkownikowi `end_session` punktu końcowego spowoduje wyczyszczenie niektóre użytkownika pojedynczego logowania jednokrotnego stanu z usługi Azure AD B2C, nie podpisze użytkownika poza swoją sesję dostawca tożsamości społecznościowych.</span><span class="sxs-lookup"><span data-stu-id="66b33-396">Although directing the user to the `end_session` endpoint will clear some of the user's single sign-on state with Azure AD B2C, it will not sign the user out of their social identity provider (IDP) session.</span></span> <span data-ttu-id="66b33-397">Jeśli użytkownik wybierze tego samego IDP podczas kolejnych logowanie, ich będzie można ponownie uwierzytelnić, bez konieczności wprowadzania poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="66b33-397">If the user selects the same IDP during a subsequent sign-in, they will be reauthenticated, without entering their credentials.</span></span> <span data-ttu-id="66b33-398">Jeśli użytkownik chce, aby wylogować się z aplikacji B2C, go nie musi oznaczać, że chcą, aby wylogować się z kontem w serwisie Facebook.</span><span class="sxs-lookup"><span data-stu-id="66b33-398">If a user wants to sign out of your B2C application, it does not necessarily mean they want to sign out of their Facebook account.</span></span> <span data-ttu-id="66b33-399">Jednak w przypadku lokalnego konta użytkownika sesja zostanie zakończona poprawnie.</span><span class="sxs-lookup"><span data-stu-id="66b33-399">However, in the case of local accounts, the user's session will be ended properly.</span></span>
> 
> 

## <a name="use-your-own-b2c-tenant"></a><span data-ttu-id="66b33-400">Użyj dzierżawy usługi B2C</span><span class="sxs-lookup"><span data-stu-id="66b33-400">Use your own B2C tenant</span></span>
<span data-ttu-id="66b33-401">Jeśli chcesz wypróbować te żądania we własnym zakresie, musi najpierw wykonać następujące trzy kroki, a następnie zastąp przykładowe wartości opisanych wcześniej własnymi:</span><span class="sxs-lookup"><span data-stu-id="66b33-401">If you want to try these requests for yourself, you must first perform these three steps, and then replace the example values described earlier with your own:</span></span>

1. <span data-ttu-id="66b33-402">[Tworzenie dzierżawy B2C](active-directory-b2c-get-started.md)i użyj nazwy dzierżawy w żądaniach.</span><span class="sxs-lookup"><span data-stu-id="66b33-402">[Create a B2C tenant](active-directory-b2c-get-started.md), and use the name of your tenant in the requests.</span></span>
2. <span data-ttu-id="66b33-403">[Tworzenie aplikacji](active-directory-b2c-app-registration.md) uzyskać identyfikator aplikacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-403">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID.</span></span> <span data-ttu-id="66b33-404">Dołącz aplikacji sieci web aplikacji/składnika web API.</span><span class="sxs-lookup"><span data-stu-id="66b33-404">Include a web app/web API in your app.</span></span> <span data-ttu-id="66b33-405">Opcjonalnie: Utwórz klucz tajny aplikacji.</span><span class="sxs-lookup"><span data-stu-id="66b33-405">Optionally, create an application secret.</span></span>
3. <span data-ttu-id="66b33-406">[Tworzenie zasad](active-directory-b2c-reference-policies.md) można uzyskać nazwy zasad.</span><span class="sxs-lookup"><span data-stu-id="66b33-406">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>

