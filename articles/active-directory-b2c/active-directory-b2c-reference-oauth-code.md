---
title: "Przepływu kodu autoryzacji — usługi Azure AD B2C | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak tworzyć aplikacje sieci web przy użyciu protokołu uwierzytelniania usługi Azure AD B2C i OpenID Connect."
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: c371aaab-813a-4317-97df-b62e2f53d865
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: dfc4f2e84704307ccbea6141c0dbc8d089733b22
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/29/2017
---
# <a name="azure-active-directory-b2c-oauth-20-authorization-code-flow"></a><span data-ttu-id="52bc2-103">Azure Active Directory B2C: Przepływu kodu autoryzacji protokołu OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="52bc2-103">Azure Active Directory B2C: OAuth 2.0 authorization code flow</span></span>
<span data-ttu-id="52bc2-104">Udzielania kodu autoryzacji protokołu OAuth 2.0 w aplikacjach na urządzeniu służy do uzyskiwania dostępu do chronionych zasobów, takich jak interfejsów API sieci web.</span><span class="sxs-lookup"><span data-stu-id="52bc2-104">You can use the OAuth 2.0 authorization code grant in apps installed on a device to gain access to protected resources, such as web APIs.</span></span> <span data-ttu-id="52bc2-105">Za pomocą usługi Azure Active Directory B2C (Azure AD B2C) implementacji protokołu OAuth 2.0, można dodać rejestrację, logowanie i innych Zarządzanie tożsamościami zadań do aplikacji mobilnych i klasycznych.</span><span class="sxs-lookup"><span data-stu-id="52bc2-105">By using the Azure Active Directory B2C (Azure AD B2C) implementation of OAuth 2.0, you can add sign-up, sign-in, and other identity management tasks to your mobile and desktop apps.</span></span> <span data-ttu-id="52bc2-106">W tym artykule jest niezależny od języka.</span><span class="sxs-lookup"><span data-stu-id="52bc2-106">This article is language-independent.</span></span> <span data-ttu-id="52bc2-107">W artykule możemy opisują sposób wysyłania i odbierania wiadomości HTTP bez korzystania z żadnych bibliotek open source.</span><span class="sxs-lookup"><span data-stu-id="52bc2-107">In the article, we describe how to send and receive HTTP messages without using any open-source libraries.</span></span>

<!-- TODO: Need link to libraries -->

<span data-ttu-id="52bc2-108">Przepływu kodu autoryzacji protokołu OAuth 2.0 jest opisany w [sekcji 4.1 specyfikacji protokołu OAuth 2.0](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="52bc2-108">The OAuth 2.0 authorization code flow is described in [section 4.1 of the OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="52bc2-109">Służy do uwierzytelniania i autoryzacji w większości typów aplikacji, w tym [sieci web apps](active-directory-b2c-apps.md#web-apps) i [natywnie zainstalowane aplikacje](active-directory-b2c-apps.md#mobile-and-native-apps).</span><span class="sxs-lookup"><span data-stu-id="52bc2-109">You can use it for authentication and authorization in most app types, including [web apps](active-directory-b2c-apps.md#web-apps) and [natively installed apps](active-directory-b2c-apps.md#mobile-and-native-apps).</span></span> <span data-ttu-id="52bc2-110">Można bezpiecznie uzyskać przepływu kodu autoryzacji protokołu OAuth 2.0 *tokenów dostępu* dla aplikacji, które mogą służyć do dostępu do zasobów, które są zabezpieczone przez [serwera autoryzacji](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="52bc2-110">You can use the OAuth 2.0 authorization code flow to securely acquire *access tokens* for your apps, which can be used to access resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span>

<span data-ttu-id="52bc2-111">Ten artykuł skupia się na **klientów publicznych** przepływu kodu autoryzacji protokołu OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="52bc2-111">This article focuses on the **public clients** OAuth 2.0 authorization code flow.</span></span> <span data-ttu-id="52bc2-112">Publiczny klient jest w dowolnej aplikacji klienta, która nie może być zaufany, aby bezpiecznie zachowanie spójności tajnego hasła.</span><span class="sxs-lookup"><span data-stu-id="52bc2-112">A public client is any client application that cannot be trusted to securely maintain the integrity of a secret password.</span></span> <span data-ttu-id="52bc2-113">Obejmuje to aplikacje mobilne, aplikacje komputerowe i zasadniczo dowolnej aplikacji, która jest uruchamiana na urządzeniu oraz musi uzyskać tokeny dostępu.</span><span class="sxs-lookup"><span data-stu-id="52bc2-113">This includes mobile apps, desktop apps, and essentially any application that runs on a device and needs to get access tokens.</span></span> 

> [!NOTE]
> <span data-ttu-id="52bc2-114">Aby dodać Zarządzanie tożsamościami do aplikacji sieci web przy użyciu usługi Azure AD B2C, użyj [OpenID Connect](active-directory-b2c-reference-oidc.md) zamiast protokołu OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="52bc2-114">To add identity management to a web app by using Azure AD B2C, use [OpenID Connect](active-directory-b2c-reference-oidc.md) instead of OAuth 2.0.</span></span>

<span data-ttu-id="52bc2-115">Usługa Azure AD B2C rozszerza tego standardu OAuth 2.0 przechodzi do więcej niż prostego uwierzytelniania i autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="52bc2-115">Azure AD B2C extends the standard OAuth 2.0 flows to do more than simple authentication and authorization.</span></span> <span data-ttu-id="52bc2-116">Podaj [parametru zasad](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="52bc2-116">It introduces the [policy parameter](active-directory-b2c-reference-policies.md).</span></span> <span data-ttu-id="52bc2-117">Wbudowane zasady umożliwia OAuth 2.0 Dodawanie użytkowników do aplikacji, takich jak konta, logowania i zarządzania profilami.</span><span class="sxs-lookup"><span data-stu-id="52bc2-117">With built-in policies, you can use OAuth 2.0 to add user experiences to your app, such as sign-up, sign-in, and profile management.</span></span> <span data-ttu-id="52bc2-118">W tym artykule zostanie przedstawiony zostanie sposób użycia protokołu OAuth 2.0 i zasady do wdrożenia każdego z tych środowisk w natywnej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="52bc2-118">In this article, we show you how to use OAuth 2.0 and policies to implement each of these experiences in your native applications.</span></span> <span data-ttu-id="52bc2-119">Możemy również opisano, jak pobieranie tokenów dostępu do uzyskiwania dostępu do interfejsów API sieci web.</span><span class="sxs-lookup"><span data-stu-id="52bc2-119">We also show you how to get access tokens for accessing web APIs.</span></span>

<span data-ttu-id="52bc2-120">W żądaniach przykład HTTP w tym artykule, korzystamy z naszych katalog usługi Azure AD B2C przykładu **fabrikamb2c.onmicrosoft.com**. Możemy również użyć naszych przykładowej aplikacji i zasad.</span><span class="sxs-lookup"><span data-stu-id="52bc2-120">In the example HTTP requests in this article, we use our sample Azure AD B2C directory, **fabrikamb2c.onmicrosoft.com**. We also use our sample application and policies.</span></span> <span data-ttu-id="52bc2-121">Można spróbować żądania samodzielnie przy użyciu tych wartości, lub należy je zastąpić własne wartości.</span><span class="sxs-lookup"><span data-stu-id="52bc2-121">You can try the requests yourself by using these values, or you can replace them with your own values.</span></span>
<span data-ttu-id="52bc2-122">Dowiedz się, jak [uzyskać własnego katalogu usługi Azure AD B2C, aplikacji i zasad](#use-your-own-azure-ad-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="52bc2-122">Learn how to [get your own Azure AD B2C directory, application, and policies](#use-your-own-azure-ad-b2c-directory).</span></span>

## <a name="1-get-an-authorization-code"></a><span data-ttu-id="52bc2-123">1. Pobierz kod autoryzacji</span><span class="sxs-lookup"><span data-stu-id="52bc2-123">1. Get an authorization code</span></span>
<span data-ttu-id="52bc2-124">Przepływu kodu autoryzacji rozpoczyna się od klienta kierowanie użytkownikowi `/authorize` punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="52bc2-124">The authorization code flow begins with the client directing the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="52bc2-125">Jest interaktywny część przepływu, gdy użytkownik wykona akcję.</span><span class="sxs-lookup"><span data-stu-id="52bc2-125">This is the interactive part of the flow, where the user takes action.</span></span> <span data-ttu-id="52bc2-126">W tym żądaniu klienta wskazuje w `scope` parametru uprawnienia, które należy uzyskać od użytkownika.</span><span class="sxs-lookup"><span data-stu-id="52bc2-126">In this request, the client indicates in the `scope` parameter the permissions that it needs to acquire from the user.</span></span> <span data-ttu-id="52bc2-127">W `p` parametr wskazuje zasad do wykonania.</span><span class="sxs-lookup"><span data-stu-id="52bc2-127">In the `p` parameter, it indicates the policy to execute.</span></span> <span data-ttu-id="52bc2-128">Poniższe trzy przykłady (podziałami wierszy dla czytelności) każdego używają różnych zasad.</span><span class="sxs-lookup"><span data-stu-id="52bc2-128">The following three examples (with line breaks for readability) each use a different policy.</span></span>

### <a name="use-a-sign-in-policy"></a><span data-ttu-id="52bc2-129">Użyj zasad logowania</span><span class="sxs-lookup"><span data-stu-id="52bc2-129">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_in
```

### <a name="use-a-sign-up-policy"></a><span data-ttu-id="52bc2-130">Użyj zasad rejestracji</span><span class="sxs-lookup"><span data-stu-id="52bc2-130">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_up
```

### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="52bc2-131">Użyj zasad edycji profilu</span><span class="sxs-lookup"><span data-stu-id="52bc2-131">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_edit_profile
```

| <span data-ttu-id="52bc2-132">Parametr</span><span class="sxs-lookup"><span data-stu-id="52bc2-132">Parameter</span></span> | <span data-ttu-id="52bc2-133">Wymagane?</span><span class="sxs-lookup"><span data-stu-id="52bc2-133">Required?</span></span> | <span data-ttu-id="52bc2-134">Opis</span><span class="sxs-lookup"><span data-stu-id="52bc2-134">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="52bc2-135">client_id</span><span class="sxs-lookup"><span data-stu-id="52bc2-135">client_id</span></span> |<span data-ttu-id="52bc2-136">Wymagane</span><span class="sxs-lookup"><span data-stu-id="52bc2-136">Required</span></span> |<span data-ttu-id="52bc2-137">Identyfikator aplikacji przypisany do aplikacji w [portalu Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="52bc2-137">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="52bc2-138">response_type</span><span class="sxs-lookup"><span data-stu-id="52bc2-138">response_type</span></span> |<span data-ttu-id="52bc2-139">Wymagane</span><span class="sxs-lookup"><span data-stu-id="52bc2-139">Required</span></span> |<span data-ttu-id="52bc2-140">Typ odpowiedzi, który musi zawierać `code` dla przepływu kodu autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="52bc2-140">The response type, which must include `code` for the authorization code flow.</span></span> |
| <span data-ttu-id="52bc2-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="52bc2-141">redirect_uri</span></span> |<span data-ttu-id="52bc2-142">Wymagane</span><span class="sxs-lookup"><span data-stu-id="52bc2-142">Required</span></span> |<span data-ttu-id="52bc2-143">Identyfikator URI aplikacji, w którym wysyłanych i odbieranych przez aplikację uwierzytelniania odpowiedzi przekierowania.</span><span class="sxs-lookup"><span data-stu-id="52bc2-143">The redirect URI of your app, where authentication responses are sent and received by your app.</span></span> <span data-ttu-id="52bc2-144">Go musi dokładnie odpowiadać jeden przekierowania URI, który został zarejestrowany w portalu, z wyjątkiem tego, że musi być zakodowane w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="52bc2-144">It must exactly match one of the redirect URIs that you registered in the portal, except that it must be URL-encoded.</span></span> |
| <span data-ttu-id="52bc2-145">Zakres</span><span class="sxs-lookup"><span data-stu-id="52bc2-145">scope</span></span> |<span data-ttu-id="52bc2-146">Wymagane</span><span class="sxs-lookup"><span data-stu-id="52bc2-146">Required</span></span> |<span data-ttu-id="52bc2-147">Rozdzieloną spacjami listę zakresów.</span><span class="sxs-lookup"><span data-stu-id="52bc2-147">A space-separated list of scopes.</span></span> <span data-ttu-id="52bc2-148">Wskazuje wartość pojedynczy zakres Azure Active Directory (Azure AD) oba te uprawnienia, które są żądane.</span><span class="sxs-lookup"><span data-stu-id="52bc2-148">A single scope value indicates to Azure Active Directory (Azure AD) both of the permissions that are being requested.</span></span> <span data-ttu-id="52bc2-149">Przy użyciu Identyfikatora klienta, jak zakres wskazuje, że Twoja aplikacja powinna tokenu dostępu, który może służyć przed własnych usług lub interfejsu API sieci web, reprezentowany przez ten sam identyfikator klienta.</span><span class="sxs-lookup"><span data-stu-id="52bc2-149">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="52bc2-150">`offline_access` Zakresu wskazuje, że aplikacja wymaga token odświeżania długotrwałe dostępu do zasobów.</span><span class="sxs-lookup"><span data-stu-id="52bc2-150">The `offline_access` scope indicates that your app needs a refresh token for long-lived access to resources.</span></span> <span data-ttu-id="52bc2-151">Można też użyć `openid` zakresu żądania tokenu identyfikator od usługi Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="52bc2-151">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="52bc2-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="52bc2-152">response_mode</span></span> |<span data-ttu-id="52bc2-153">Zalecane</span><span class="sxs-lookup"><span data-stu-id="52bc2-153">Recommended</span></span> |<span data-ttu-id="52bc2-154">Metoda używana do odesłania wynikowy kod autoryzacji do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="52bc2-154">The method that you use to send the resulting authorization code back to your app.</span></span> <span data-ttu-id="52bc2-155">Można ją `query`, `form_post`, lub `fragment`.</span><span class="sxs-lookup"><span data-stu-id="52bc2-155">It can be `query`, `form_post`, or `fragment`.</span></span> |
| <span data-ttu-id="52bc2-156">state</span><span class="sxs-lookup"><span data-stu-id="52bc2-156">state</span></span> |<span data-ttu-id="52bc2-157">Zalecane</span><span class="sxs-lookup"><span data-stu-id="52bc2-157">Recommended</span></span> |<span data-ttu-id="52bc2-158">Wartość zawarte w żądaniu, który jest zwracany w odpowiedzi tokenu.</span><span class="sxs-lookup"><span data-stu-id="52bc2-158">A value included in the request that is returned in the token response.</span></span> <span data-ttu-id="52bc2-159">Można go ciągiem zawartość, która ma być używany.</span><span class="sxs-lookup"><span data-stu-id="52bc2-159">It can be a string of any content that you want to use.</span></span> <span data-ttu-id="52bc2-160">Zwykle losowo wygenerowany unikatową wartość jest używany, aby zapobiec fałszerstwie żądania międzywitrynowego.</span><span class="sxs-lookup"><span data-stu-id="52bc2-160">Usually, a randomly generated unique value is  used, to prevent cross-site request forgery attacks.</span></span> <span data-ttu-id="52bc2-161">Stan jest również używany do kodowania informacje o stanie użytkownika w aplikacji przed wystąpieniem żądania uwierzytelnienia.</span><span class="sxs-lookup"><span data-stu-id="52bc2-161">The state also is used to encode information about the user's state in the app before the authentication request occurred.</span></span> <span data-ttu-id="52bc2-162">Na przykład strona, do której użytkownik został na lub zasady, które było wykonywane.</span><span class="sxs-lookup"><span data-stu-id="52bc2-162">For example, the page the user was on, or the policy that was being executed.</span></span> |
| <span data-ttu-id="52bc2-163">P</span><span class="sxs-lookup"><span data-stu-id="52bc2-163">p</span></span> |<span data-ttu-id="52bc2-164">Wymagane</span><span class="sxs-lookup"><span data-stu-id="52bc2-164">Required</span></span> |<span data-ttu-id="52bc2-165">Zasada, która jest wykonywana.</span><span class="sxs-lookup"><span data-stu-id="52bc2-165">The policy that is executed.</span></span> <span data-ttu-id="52bc2-166">Jest to nazwa zasad, który jest tworzony w katalogu usługi Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="52bc2-166">It's the name of a policy that is created in your Azure AD B2C directory.</span></span> <span data-ttu-id="52bc2-167">Wartość Nazwa zasad powinny rozpoczynać się od **b2c\_1\_**.</span><span class="sxs-lookup"><span data-stu-id="52bc2-167">The policy name value should begin with **b2c\_1\_**.</span></span> <span data-ttu-id="52bc2-168">Aby dowiedzieć się więcej na temat zasad, zobacz [wbudowane zasady usługi Azure AD B2C](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="52bc2-168">To learn more about policies, see [Azure AD B2C built-in policies](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="52bc2-169">wiersz</span><span class="sxs-lookup"><span data-stu-id="52bc2-169">prompt</span></span> |<span data-ttu-id="52bc2-170">Optional (Opcjonalność)</span><span class="sxs-lookup"><span data-stu-id="52bc2-170">Optional</span></span> |<span data-ttu-id="52bc2-171">Typ interakcji z użytkownikiem, który jest wymagany.</span><span class="sxs-lookup"><span data-stu-id="52bc2-171">The type of user interaction that is required.</span></span> <span data-ttu-id="52bc2-172">Obecnie jest jedyną poprawną wartością `login`, która wymusza na użytkowniku, aby wprowadzić swoje poświadczenia dla tego żądania.</span><span class="sxs-lookup"><span data-stu-id="52bc2-172">Currently, the only valid value is `login`, which forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="52bc2-173">Logowanie jednokrotne nie zacznie obowiązywać.</span><span class="sxs-lookup"><span data-stu-id="52bc2-173">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="52bc2-174">W tym momencie użytkownik jest proszony o ukończenia przepływu pracy zasad.</span><span class="sxs-lookup"><span data-stu-id="52bc2-174">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="52bc2-175">Może to obejmować wprowadzić swoją nazwę użytkownika i hasło, użytkownik zalogować społecznościowych tożsamości, podczas tworzenia katalogu lub dowolnej liczby kroków.</span><span class="sxs-lookup"><span data-stu-id="52bc2-175">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps.</span></span> <span data-ttu-id="52bc2-176">Akcje użytkownika zależą od tego, jak zdefiniowano zasad.</span><span class="sxs-lookup"><span data-stu-id="52bc2-176">User actions depend on how the policy is defined.</span></span>

<span data-ttu-id="52bc2-177">Po wypełnieniu zasad przez użytkownika, usługi Azure AD zwraca odpowiedź do aplikacji przy wartości używane dla `redirect_uri`.</span><span class="sxs-lookup"><span data-stu-id="52bc2-177">After the user completes the policy, Azure AD returns a response to your app at the value you used for `redirect_uri`.</span></span> <span data-ttu-id="52bc2-178">Używa metody określonej w `response_mode` parametru.</span><span class="sxs-lookup"><span data-stu-id="52bc2-178">It uses the method specified in the `response_mode` parameter.</span></span> <span data-ttu-id="52bc2-179">Odpowiedź jest dokładnie taka sama dla każdego z scenariuszy akcji użytkownika, niezależnie od zasady, które zostało wykonane.</span><span class="sxs-lookup"><span data-stu-id="52bc2-179">The response is exactly the same for each of the user action scenarios, independent of the policy that was executed.</span></span>

<span data-ttu-id="52bc2-180">Odpowiedź oznaczająca Powodzenie, która używa `response_mode=query` wygląda podobnie do następującej:</span><span class="sxs-lookup"><span data-stu-id="52bc2-180">A successful response that uses `response_mode=query` looks like this:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...        // the authorization_code, truncated
&state=arbitrary_data_you_can_receive_in_the_response                // the value provided in the request
```

| <span data-ttu-id="52bc2-181">Parametr</span><span class="sxs-lookup"><span data-stu-id="52bc2-181">Parameter</span></span> | <span data-ttu-id="52bc2-182">Opis</span><span class="sxs-lookup"><span data-stu-id="52bc2-182">Description</span></span> |
| --- | --- |
| <span data-ttu-id="52bc2-183">Kod</span><span class="sxs-lookup"><span data-stu-id="52bc2-183">code</span></span> |<span data-ttu-id="52bc2-184">Kod autoryzacji żądanej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="52bc2-184">The authorization code that the app requested.</span></span> <span data-ttu-id="52bc2-185">Aplikację można użyć kodu autoryzacji do żądania tokenu dostępu dla zasobu docelowego.</span><span class="sxs-lookup"><span data-stu-id="52bc2-185">The app can use the authorization code to request an access token for a target resource.</span></span> <span data-ttu-id="52bc2-186">Kody autoryzacji są bardzo krótkim okresie.</span><span class="sxs-lookup"><span data-stu-id="52bc2-186">Authorization codes are very short-lived.</span></span> <span data-ttu-id="52bc2-187">Zazwyczaj wygasną po około 10 minut.</span><span class="sxs-lookup"><span data-stu-id="52bc2-187">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="52bc2-188">state</span><span class="sxs-lookup"><span data-stu-id="52bc2-188">state</span></span> |<span data-ttu-id="52bc2-189">Zobacz pełny opis tabeli w poprzedniej sekcji.</span><span class="sxs-lookup"><span data-stu-id="52bc2-189">See the full description in the table in the preceding section.</span></span> <span data-ttu-id="52bc2-190">Jeśli `state` parametru jest zawarte w żądaniu, tę samą wartość powinna być widoczna w odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="52bc2-190">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="52bc2-191">Aplikację należy sprawdzić, czy `state` wartości żądań i odpowiedzi są identyczne.</span><span class="sxs-lookup"><span data-stu-id="52bc2-191">The app should verify that the `state` values in the request and response are identical.</span></span> |

<span data-ttu-id="52bc2-192">Odpowiedzi na błędy również mogą być wysyłane identyfikator URI przekierowania, dzięki czemu aplikacja może je odpowiednią obsługę:</span><span class="sxs-lookup"><span data-stu-id="52bc2-192">Error responses also can be sent to the redirect URI so that the app can handle them appropriately:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
error=access_denied
&error_description=The+user+has+cancelled+entering+self-asserted+information
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="52bc2-193">Parametr</span><span class="sxs-lookup"><span data-stu-id="52bc2-193">Parameter</span></span> | <span data-ttu-id="52bc2-194">Opis</span><span class="sxs-lookup"><span data-stu-id="52bc2-194">Description</span></span> |
| --- | --- |
| <span data-ttu-id="52bc2-195">error</span><span class="sxs-lookup"><span data-stu-id="52bc2-195">error</span></span> |<span data-ttu-id="52bc2-196">Ciąg kodu błędu, który służy do klasyfikowania typów błędów występujących.</span><span class="sxs-lookup"><span data-stu-id="52bc2-196">An error code string that you can use to classify the types of errors that occur.</span></span> <span data-ttu-id="52bc2-197">Możesz również umożliwia ciąg reagowania na błędy.</span><span class="sxs-lookup"><span data-stu-id="52bc2-197">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="52bc2-198">error_description</span><span class="sxs-lookup"><span data-stu-id="52bc2-198">error_description</span></span> |<span data-ttu-id="52bc2-199">Komunikat o błędzie, które mogą pomóc Określ przyczynę błędu uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="52bc2-199">A specific error message that can help you identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="52bc2-200">state</span><span class="sxs-lookup"><span data-stu-id="52bc2-200">state</span></span> |<span data-ttu-id="52bc2-201">Zobacz pełną opisu w powyższej tabeli.</span><span class="sxs-lookup"><span data-stu-id="52bc2-201">See the full description in the preceding table.</span></span> <span data-ttu-id="52bc2-202">Jeśli `state` parametru jest zawarte w żądaniu, tę samą wartość powinna być widoczna w odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="52bc2-202">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="52bc2-203">Aplikację należy sprawdzić, czy `state` wartości żądań i odpowiedzi są identyczne.</span><span class="sxs-lookup"><span data-stu-id="52bc2-203">The app should verify that the `state` values in the request and response are identical.</span></span> |

## <a name="2-get-a-token"></a><span data-ttu-id="52bc2-204">2. Uzyskaj token</span><span class="sxs-lookup"><span data-stu-id="52bc2-204">2. Get a token</span></span>
<span data-ttu-id="52bc2-205">Teraz, gdy zostały nabyte kod autoryzacji, można wykorzystać `code` dla tokenu do danego zasobu poprzez wysłanie żądania POST do `/token` punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="52bc2-205">Now that you've acquired an authorization code, you can redeem the `code` for a token to the intended resource by sending a POST request to the `/token` endpoint.</span></span> <span data-ttu-id="52bc2-206">W usłudze Azure AD B2C tylko zasób, jakiej może żądać tokenu dla jest własnych aplikacji zaplecza interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="52bc2-206">In Azure AD B2C, the only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="52bc2-207">Konwencja, która jest używana dla żądania tokenu do siebie ma użyć Identyfikatora klienta aplikacji jako zakres:</span><span class="sxs-lookup"><span data-stu-id="52bc2-207">The convention that's used for requesting a token to yourself is to use your app's client ID as the scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob

```

| <span data-ttu-id="52bc2-208">Parametr</span><span class="sxs-lookup"><span data-stu-id="52bc2-208">Parameter</span></span> | <span data-ttu-id="52bc2-209">Wymagane?</span><span class="sxs-lookup"><span data-stu-id="52bc2-209">Required?</span></span> | <span data-ttu-id="52bc2-210">Opis</span><span class="sxs-lookup"><span data-stu-id="52bc2-210">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="52bc2-211">P</span><span class="sxs-lookup"><span data-stu-id="52bc2-211">p</span></span> |<span data-ttu-id="52bc2-212">Wymagane</span><span class="sxs-lookup"><span data-stu-id="52bc2-212">Required</span></span> |<span data-ttu-id="52bc2-213">Zasady, które zostało użyte do uzyskania kod autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="52bc2-213">The policy that was used to acquire the authorization code.</span></span> <span data-ttu-id="52bc2-214">Nie można użyć różnych zasad w tym żądaniu.</span><span class="sxs-lookup"><span data-stu-id="52bc2-214">You cannot use a different policy in this request.</span></span> <span data-ttu-id="52bc2-215">Należy pamiętać, aby dodać ten parametr, aby *ciągu zapytania*, a nie w treści POST.</span><span class="sxs-lookup"><span data-stu-id="52bc2-215">Note that you add this parameter to the *query string*, not in the POST body.</span></span> |
| <span data-ttu-id="52bc2-216">client_id</span><span class="sxs-lookup"><span data-stu-id="52bc2-216">client_id</span></span> |<span data-ttu-id="52bc2-217">Wymagane</span><span class="sxs-lookup"><span data-stu-id="52bc2-217">Required</span></span> |<span data-ttu-id="52bc2-218">Identyfikator aplikacji przypisany do aplikacji w [portalu Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="52bc2-218">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="52bc2-219">Typ grant_type</span><span class="sxs-lookup"><span data-stu-id="52bc2-219">grant_type</span></span> |<span data-ttu-id="52bc2-220">Wymagane</span><span class="sxs-lookup"><span data-stu-id="52bc2-220">Required</span></span> |<span data-ttu-id="52bc2-221">Typ grant.</span><span class="sxs-lookup"><span data-stu-id="52bc2-221">The type of grant.</span></span> <span data-ttu-id="52bc2-222">Dla przepływu kodu autoryzacji, musi być typu przydziału `authorization_code`.</span><span class="sxs-lookup"><span data-stu-id="52bc2-222">For the authorization code flow, the grant type must be `authorization_code`.</span></span> |
| <span data-ttu-id="52bc2-223">Zakres</span><span class="sxs-lookup"><span data-stu-id="52bc2-223">scope</span></span> |<span data-ttu-id="52bc2-224">Zalecane</span><span class="sxs-lookup"><span data-stu-id="52bc2-224">Recommended</span></span> |<span data-ttu-id="52bc2-225">Rozdzieloną spacjami listę zakresów.</span><span class="sxs-lookup"><span data-stu-id="52bc2-225">A space-separated list of scopes.</span></span> <span data-ttu-id="52bc2-226">Wskazuje wartość pojedynczy zakres do usługi Azure AD zarówno uprawnienia, które są żądane.</span><span class="sxs-lookup"><span data-stu-id="52bc2-226">A single scope value indicates to Azure AD both of the permissions that are being requested.</span></span> <span data-ttu-id="52bc2-227">Przy użyciu Identyfikatora klienta, jak zakres wskazuje, że Twoja aplikacja powinna tokenu dostępu, który może służyć przed własnych usług lub interfejsu API sieci web, reprezentowany przez ten sam identyfikator klienta.</span><span class="sxs-lookup"><span data-stu-id="52bc2-227">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="52bc2-228">`offline_access` Zakresu wskazuje, że aplikacja wymaga token odświeżania długotrwałe dostępu do zasobów.</span><span class="sxs-lookup"><span data-stu-id="52bc2-228">The `offline_access` scope indicates that your app needs a refresh token for long-lived access to resources.</span></span>  <span data-ttu-id="52bc2-229">Można też użyć `openid` zakresu żądania tokenu identyfikator od usługi Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="52bc2-229">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="52bc2-230">Kod</span><span class="sxs-lookup"><span data-stu-id="52bc2-230">code</span></span> |<span data-ttu-id="52bc2-231">Wymagane</span><span class="sxs-lookup"><span data-stu-id="52bc2-231">Required</span></span> |<span data-ttu-id="52bc2-232">Uzyskanego w pierwszego etap przepływu kodu autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="52bc2-232">The authorization code that you acquired in the first leg of the flow.</span></span> |
| <span data-ttu-id="52bc2-233">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="52bc2-233">redirect_uri</span></span> |<span data-ttu-id="52bc2-234">Wymagane</span><span class="sxs-lookup"><span data-stu-id="52bc2-234">Required</span></span> |<span data-ttu-id="52bc2-235">Identyfikator URI przekierowania w aplikacji, w którym odebrano kod autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="52bc2-235">The redirect URI of the application where you received the authorization code.</span></span> |

<span data-ttu-id="52bc2-236">Odpowiedź oznaczająca Powodzenie tokenu wygląda następująco:</span><span class="sxs-lookup"><span data-stu-id="52bc2-236">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="52bc2-237">Parametr</span><span class="sxs-lookup"><span data-stu-id="52bc2-237">Parameter</span></span> | <span data-ttu-id="52bc2-238">Opis</span><span class="sxs-lookup"><span data-stu-id="52bc2-238">Description</span></span> |
| --- | --- |
| <span data-ttu-id="52bc2-239">not_before</span><span class="sxs-lookup"><span data-stu-id="52bc2-239">not_before</span></span> |<span data-ttu-id="52bc2-240">Czas, w którym token jest uznawany za ważny w czasie epoki.</span><span class="sxs-lookup"><span data-stu-id="52bc2-240">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="52bc2-241">token_type</span><span class="sxs-lookup"><span data-stu-id="52bc2-241">token_type</span></span> |<span data-ttu-id="52bc2-242">Wartość typu tokenu.</span><span class="sxs-lookup"><span data-stu-id="52bc2-242">The token type value.</span></span> <span data-ttu-id="52bc2-243">Jedynym typem, który obsługuje usługę Azure AD jest elementu nośnego.</span><span class="sxs-lookup"><span data-stu-id="52bc2-243">The only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="52bc2-244">' access_token '</span><span class="sxs-lookup"><span data-stu-id="52bc2-244">access_token</span></span> |<span data-ttu-id="52bc2-245">Podpisem JSON Web Token (JWT) żądanych.</span><span class="sxs-lookup"><span data-stu-id="52bc2-245">The signed JSON Web Token (JWT) that you requested.</span></span> |
| <span data-ttu-id="52bc2-246">Zakres</span><span class="sxs-lookup"><span data-stu-id="52bc2-246">scope</span></span> |<span data-ttu-id="52bc2-247">Token jest prawidłowy dla zakresów.</span><span class="sxs-lookup"><span data-stu-id="52bc2-247">The scopes that the token is valid for.</span></span> <span data-ttu-id="52bc2-248">Możesz również zakresów można użyć do pamięci podręcznej tokenów do późniejszego użycia.</span><span class="sxs-lookup"><span data-stu-id="52bc2-248">You also can use scopes to cache tokens for later use.</span></span> |
| <span data-ttu-id="52bc2-249">expires_in</span><span class="sxs-lookup"><span data-stu-id="52bc2-249">expires_in</span></span> |<span data-ttu-id="52bc2-250">Długość czasu, przez który token jest prawidłowy (w sekundach).</span><span class="sxs-lookup"><span data-stu-id="52bc2-250">The length of time that the token is valid (in seconds).</span></span> |
| <span data-ttu-id="52bc2-251">refresh_token</span><span class="sxs-lookup"><span data-stu-id="52bc2-251">refresh_token</span></span> |<span data-ttu-id="52bc2-252">Token odświeżania OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="52bc2-252">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="52bc2-253">Aplikacja może używać ten token, aby uzyskać dodatkowe tokeny, po wygaśnięciu tokenu bieżącego.</span><span class="sxs-lookup"><span data-stu-id="52bc2-253">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="52bc2-254">Tokeny odświeżania są długotrwałe.</span><span class="sxs-lookup"><span data-stu-id="52bc2-254">Refresh tokens are long-lived.</span></span> <span data-ttu-id="52bc2-255">Można używać ich, aby zachować dostęp do zasobów przez dłuższy czas.</span><span class="sxs-lookup"><span data-stu-id="52bc2-255">You can use them to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="52bc2-256">Aby uzyskać więcej informacji, zobacz [odwołania do tokenu usługi Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="52bc2-256">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="52bc2-257">Odpowiedzi na błędy wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="52bc2-257">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="52bc2-258">Parametr</span><span class="sxs-lookup"><span data-stu-id="52bc2-258">Parameter</span></span> | <span data-ttu-id="52bc2-259">Opis</span><span class="sxs-lookup"><span data-stu-id="52bc2-259">Description</span></span> |
| --- | --- |
| <span data-ttu-id="52bc2-260">error</span><span class="sxs-lookup"><span data-stu-id="52bc2-260">error</span></span> |<span data-ttu-id="52bc2-261">Ciąg kodu błędu, który służy do klasyfikowania typów błędów występujących.</span><span class="sxs-lookup"><span data-stu-id="52bc2-261">An error code string that you can use to classify the types of errors that occur.</span></span> <span data-ttu-id="52bc2-262">Możesz również umożliwia ciąg reagowania na błędy.</span><span class="sxs-lookup"><span data-stu-id="52bc2-262">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="52bc2-263">error_description</span><span class="sxs-lookup"><span data-stu-id="52bc2-263">error_description</span></span> |<span data-ttu-id="52bc2-264">Komunikat o błędzie, które mogą pomóc Określ przyczynę błędu uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="52bc2-264">A specific error message that can help you identify the root cause of an authentication error.</span></span> |

## <a name="3-use-the-token"></a><span data-ttu-id="52bc2-265">3. Użyj tokenu</span><span class="sxs-lookup"><span data-stu-id="52bc2-265">3. Use the token</span></span>
<span data-ttu-id="52bc2-266">Teraz, zostały pomyślnie uzyskano tokenu dostępu, można użyć tokenu w żądaniach na danym zapleczu interfejsów API sieci web przez włączenie jej w `Authorization` nagłówka:</span><span class="sxs-lookup"><span data-stu-id="52bc2-266">Now that you've successfully acquired an access token, you can use the token in requests to your back-end web APIs by including it in the `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="4-refresh-the-token"></a><span data-ttu-id="52bc2-267">4. Token odświeżania</span><span class="sxs-lookup"><span data-stu-id="52bc2-267">4. Refresh the token</span></span>
<span data-ttu-id="52bc2-268">Tokeny dostępu i identyfikator tokeny są krótkim okresie.</span><span class="sxs-lookup"><span data-stu-id="52bc2-268">Access tokens and ID tokens are short-lived.</span></span> <span data-ttu-id="52bc2-269">Po wygasną, należy odświeżyć je, aby uzyskać dostęp do zasobów.</span><span class="sxs-lookup"><span data-stu-id="52bc2-269">After they expire, you must refresh them to continue to access resources.</span></span> <span data-ttu-id="52bc2-270">W tym celu należy przesłać kolejne żądanie POST `/token` punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="52bc2-270">To do this, submit another POST request to the `/token` endpoint.</span></span> <span data-ttu-id="52bc2-271">Podaj w tej chwili `refresh_token` zamiast `code`:</span><span class="sxs-lookup"><span data-stu-id="52bc2-271">This time, provide the `refresh_token` instead of the `code`:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob
```

| <span data-ttu-id="52bc2-272">Parametr</span><span class="sxs-lookup"><span data-stu-id="52bc2-272">Parameter</span></span> | <span data-ttu-id="52bc2-273">Wymagane?</span><span class="sxs-lookup"><span data-stu-id="52bc2-273">Required?</span></span> | <span data-ttu-id="52bc2-274">Opis</span><span class="sxs-lookup"><span data-stu-id="52bc2-274">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="52bc2-275">P</span><span class="sxs-lookup"><span data-stu-id="52bc2-275">p</span></span> |<span data-ttu-id="52bc2-276">Wymagane</span><span class="sxs-lookup"><span data-stu-id="52bc2-276">Required</span></span> |<span data-ttu-id="52bc2-277">Zasady, które zostało użyte do uzyskania oryginalnego token odświeżania.</span><span class="sxs-lookup"><span data-stu-id="52bc2-277">The policy that was used to acquire the original refresh token.</span></span> <span data-ttu-id="52bc2-278">Nie można użyć różnych zasad w tym żądaniu.</span><span class="sxs-lookup"><span data-stu-id="52bc2-278">You cannot use a different policy in this request.</span></span> <span data-ttu-id="52bc2-279">Należy pamiętać, aby dodać ten parametr, aby *ciągu zapytania*, a nie w treści POST.</span><span class="sxs-lookup"><span data-stu-id="52bc2-279">Note that you add this parameter to the *query string*, not in the POST body.</span></span> |
| <span data-ttu-id="52bc2-280">client_id</span><span class="sxs-lookup"><span data-stu-id="52bc2-280">client_id</span></span> |<span data-ttu-id="52bc2-281">Zalecane</span><span class="sxs-lookup"><span data-stu-id="52bc2-281">Recommended</span></span> |<span data-ttu-id="52bc2-282">Identyfikator aplikacji przypisany do aplikacji w [portalu Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="52bc2-282">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="52bc2-283">Typ grant_type</span><span class="sxs-lookup"><span data-stu-id="52bc2-283">grant_type</span></span> |<span data-ttu-id="52bc2-284">Wymagane</span><span class="sxs-lookup"><span data-stu-id="52bc2-284">Required</span></span> |<span data-ttu-id="52bc2-285">Typ grant.</span><span class="sxs-lookup"><span data-stu-id="52bc2-285">The type of grant.</span></span> <span data-ttu-id="52bc2-286">Dla tej gałęzi przepływu kodu autoryzacji musi być typu przydziału `refresh_token`.</span><span class="sxs-lookup"><span data-stu-id="52bc2-286">For this leg of the authorization code flow, the grant type must be `refresh_token`.</span></span> |
| <span data-ttu-id="52bc2-287">Zakres</span><span class="sxs-lookup"><span data-stu-id="52bc2-287">scope</span></span> |<span data-ttu-id="52bc2-288">Zalecane</span><span class="sxs-lookup"><span data-stu-id="52bc2-288">Recommended</span></span> |<span data-ttu-id="52bc2-289">Rozdzieloną spacjami listę zakresów.</span><span class="sxs-lookup"><span data-stu-id="52bc2-289">A space-separated list of scopes.</span></span> <span data-ttu-id="52bc2-290">Wskazuje wartość pojedynczy zakres do usługi Azure AD zarówno uprawnienia, które są żądane.</span><span class="sxs-lookup"><span data-stu-id="52bc2-290">A single scope value indicates to Azure AD both of the permissions that are being requested.</span></span> <span data-ttu-id="52bc2-291">Przy użyciu Identyfikatora klienta, jak zakres wskazuje, że Twoja aplikacja powinna tokenu dostępu, który może służyć przed własnych usług lub interfejsu API sieci web, reprezentowany przez ten sam identyfikator klienta.</span><span class="sxs-lookup"><span data-stu-id="52bc2-291">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="52bc2-292">`offline_access` Zakresu wskazuje, że aplikacji będą potrzebne token odświeżania długotrwałe dostępu do zasobów.</span><span class="sxs-lookup"><span data-stu-id="52bc2-292">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span>  <span data-ttu-id="52bc2-293">Można też użyć `openid` zakresu żądania tokenu identyfikator od usługi Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="52bc2-293">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="52bc2-294">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="52bc2-294">redirect_uri</span></span> |<span data-ttu-id="52bc2-295">Optional (Opcjonalność)</span><span class="sxs-lookup"><span data-stu-id="52bc2-295">Optional</span></span> |<span data-ttu-id="52bc2-296">Identyfikator URI przekierowania w aplikacji, w którym odebrano kod autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="52bc2-296">The redirect URI of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="52bc2-297">refresh_token</span><span class="sxs-lookup"><span data-stu-id="52bc2-297">refresh_token</span></span> |<span data-ttu-id="52bc2-298">Wymagane</span><span class="sxs-lookup"><span data-stu-id="52bc2-298">Required</span></span> |<span data-ttu-id="52bc2-299">Oryginalny token odświeżania uzyskanego w drugi etap przepływu.</span><span class="sxs-lookup"><span data-stu-id="52bc2-299">The original refresh token that you acquired in the second leg of the flow.</span></span> |

<span data-ttu-id="52bc2-300">Odpowiedź oznaczająca Powodzenie tokenu wygląda następująco:</span><span class="sxs-lookup"><span data-stu-id="52bc2-300">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="52bc2-301">Parametr</span><span class="sxs-lookup"><span data-stu-id="52bc2-301">Parameter</span></span> | <span data-ttu-id="52bc2-302">Opis</span><span class="sxs-lookup"><span data-stu-id="52bc2-302">Description</span></span> |
| --- | --- |
| <span data-ttu-id="52bc2-303">not_before</span><span class="sxs-lookup"><span data-stu-id="52bc2-303">not_before</span></span> |<span data-ttu-id="52bc2-304">Czas, w którym token jest uznawany za ważny w czasie epoki.</span><span class="sxs-lookup"><span data-stu-id="52bc2-304">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="52bc2-305">token_type</span><span class="sxs-lookup"><span data-stu-id="52bc2-305">token_type</span></span> |<span data-ttu-id="52bc2-306">Wartość typu tokenu.</span><span class="sxs-lookup"><span data-stu-id="52bc2-306">The token type value.</span></span> <span data-ttu-id="52bc2-307">Jedynym typem, który obsługuje usługę Azure AD jest elementu nośnego.</span><span class="sxs-lookup"><span data-stu-id="52bc2-307">The only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="52bc2-308">' access_token '</span><span class="sxs-lookup"><span data-stu-id="52bc2-308">access_token</span></span> |<span data-ttu-id="52bc2-309">Podpisany token JWT żądanych.</span><span class="sxs-lookup"><span data-stu-id="52bc2-309">The signed JWT that you requested.</span></span> |
| <span data-ttu-id="52bc2-310">Zakres</span><span class="sxs-lookup"><span data-stu-id="52bc2-310">scope</span></span> |<span data-ttu-id="52bc2-311">Token jest prawidłowy dla zakresów.</span><span class="sxs-lookup"><span data-stu-id="52bc2-311">The scopes that the token is valid for.</span></span> <span data-ttu-id="52bc2-312">Również zakresów można użyć do tokenów pamięci podręcznej do późniejszego użycia.</span><span class="sxs-lookup"><span data-stu-id="52bc2-312">You also can use the scopes to cache tokens for later use.</span></span> |
| <span data-ttu-id="52bc2-313">expires_in</span><span class="sxs-lookup"><span data-stu-id="52bc2-313">expires_in</span></span> |<span data-ttu-id="52bc2-314">Długość czasu, przez który token jest prawidłowy (w sekundach).</span><span class="sxs-lookup"><span data-stu-id="52bc2-314">The length of time that the token is valid (in seconds).</span></span> |
| <span data-ttu-id="52bc2-315">refresh_token</span><span class="sxs-lookup"><span data-stu-id="52bc2-315">refresh_token</span></span> |<span data-ttu-id="52bc2-316">Token odświeżania OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="52bc2-316">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="52bc2-317">Aplikacja może używać ten token, aby uzyskać dodatkowe tokeny, po wygaśnięciu tokenu bieżącego.</span><span class="sxs-lookup"><span data-stu-id="52bc2-317">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="52bc2-318">Odśwież tokeny są to długotrwałe i pozwala zachować dostęp do zasobów przez dłuższy czas.</span><span class="sxs-lookup"><span data-stu-id="52bc2-318">Refresh tokens are long-lived, and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="52bc2-319">Aby uzyskać więcej informacji, zobacz [odwołania do tokenu usługi Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="52bc2-319">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="52bc2-320">Odpowiedzi na błędy wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="52bc2-320">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="52bc2-321">Parametr</span><span class="sxs-lookup"><span data-stu-id="52bc2-321">Parameter</span></span> | <span data-ttu-id="52bc2-322">Opis</span><span class="sxs-lookup"><span data-stu-id="52bc2-322">Description</span></span> |
| --- | --- |
| <span data-ttu-id="52bc2-323">error</span><span class="sxs-lookup"><span data-stu-id="52bc2-323">error</span></span> |<span data-ttu-id="52bc2-324">Ciąg kodu błędu, który służy do klasyfikowania typy błędów występujących.</span><span class="sxs-lookup"><span data-stu-id="52bc2-324">An error code string that you can use to classify types of errors that occur.</span></span> <span data-ttu-id="52bc2-325">Możesz również umożliwia ciąg reagowania na błędy.</span><span class="sxs-lookup"><span data-stu-id="52bc2-325">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="52bc2-326">error_description</span><span class="sxs-lookup"><span data-stu-id="52bc2-326">error_description</span></span> |<span data-ttu-id="52bc2-327">Komunikat o błędzie, które mogą pomóc Określ przyczynę błędu uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="52bc2-327">A specific error message that can help you identify the root cause of an authentication error.</span></span> |

## <a name="use-your-own-azure-ad-b2c-directory"></a><span data-ttu-id="52bc2-328">Użyj katalogu usługi Azure AD B2C</span><span class="sxs-lookup"><span data-stu-id="52bc2-328">Use your own Azure AD B2C directory</span></span>
<span data-ttu-id="52bc2-329">Aby samodzielnie wypróbować te żądania, wykonaj następujące kroki.</span><span class="sxs-lookup"><span data-stu-id="52bc2-329">To try these requests yourself, complete the following steps.</span></span> <span data-ttu-id="52bc2-330">Zastąp przykładowe wartości, używane w tym artykule i własne wartości.</span><span class="sxs-lookup"><span data-stu-id="52bc2-330">Replace the example values we used in this article with your own values.</span></span>

1. <span data-ttu-id="52bc2-331">[Utwórz katalog usługi Azure AD B2C](active-directory-b2c-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="52bc2-331">[Create an Azure AD B2C directory](active-directory-b2c-get-started.md).</span></span> <span data-ttu-id="52bc2-332">Użyj nazwy katalogu w żądaniach.</span><span class="sxs-lookup"><span data-stu-id="52bc2-332">Use the name of your directory in the requests.</span></span>
2. <span data-ttu-id="52bc2-333">[Tworzenie aplikacji](active-directory-b2c-app-registration.md) uzyskać identyfikator aplikacji i identyfikator URI przekierowania.</span><span class="sxs-lookup"><span data-stu-id="52bc2-333">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID and a redirect URI.</span></span> <span data-ttu-id="52bc2-334">Uwzględnij klienta natywnego w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="52bc2-334">Include a native client in your app.</span></span>
3. <span data-ttu-id="52bc2-335">[Tworzenie zasad](active-directory-b2c-reference-policies.md) można uzyskać nazwy zasad.</span><span class="sxs-lookup"><span data-stu-id="52bc2-335">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>

