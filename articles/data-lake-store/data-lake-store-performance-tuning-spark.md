---
title: "aaaAzure danych Lake Spark wydajności dostrajanie wytyczne sklepu | Dokumentacja firmy Microsoft"
description: "Dostosowywanie wskazówki dotyczące wydajności Spark usługi Azure Data Lake Store"
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: stewu
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 12/19/2016
ms.author: stewu
ms.openlocfilehash: da1d172e9cb1199ad95605ea1718e78559f79650
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="performance-tuning-guidance-for-spark-on-hdinsight-and-azure-data-lake-store"></a><span data-ttu-id="2a915-103">Wskazówki dotyczące platforma Spark w usłudze HDInsight i usługi Azure Data Lake Store dostrajania wydajności</span><span class="sxs-lookup"><span data-stu-id="2a915-103">Performance tuning guidance for Spark on HDInsight and Azure Data Lake Store</span></span>

<span data-ttu-id="2a915-104">Dostrajanie wydajności na Spark, konieczne jest tooconsider hello liczba aplikacje działające w klastrze.</span><span class="sxs-lookup"><span data-stu-id="2a915-104">When tuning performance on Spark, you need tooconsider hello number of apps that will be running on your cluster.</span></span>  <span data-ttu-id="2a915-105">Domyślnie program można uruchomić 4 aplikacji równocześnie na klaster HDI (Uwaga: hello domyślne ustawienie to toochange podmiotu).</span><span class="sxs-lookup"><span data-stu-id="2a915-105">By default, you can run 4 apps concurrently on your HDI cluster (Note: hello default setting is subject toochange).</span></span>  <span data-ttu-id="2a915-106">Użytkownik może zdecydować toouse mniej aplikacji może zastąpić ustawienia domyślne hello i użyć więcej hello klastra dla tych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2a915-106">You may decide toouse fewer apps so you can override hello default settings and use more of hello cluster for those apps.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="2a915-107">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="2a915-107">Prerequisites</span></span>

* <span data-ttu-id="2a915-108">**Subskrypcja platformy Azure**.</span><span class="sxs-lookup"><span data-stu-id="2a915-108">**An Azure subscription**.</span></span> <span data-ttu-id="2a915-109">Zobacz temat [Uzyskiwanie bezpłatnej wersji próbnej platformy Azure](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="2a915-109">See [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="2a915-110">**Konto usługi Azure Data Lake Store**.</span><span class="sxs-lookup"><span data-stu-id="2a915-110">**An Azure Data Lake Store account**.</span></span> <span data-ttu-id="2a915-111">Aby uzyskać instrukcje dotyczące jednego, zobacz toocreate [wprowadzenie do usługi Azure Data Lake Store](data-lake-store-get-started-portal.md)</span><span class="sxs-lookup"><span data-stu-id="2a915-111">For instructions on how toocreate one, see [Get started with Azure Data Lake Store](data-lake-store-get-started-portal.md)</span></span>
* <span data-ttu-id="2a915-112">**Klaster HDInsight Azure** z tooa dostępu do konta usługi Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="2a915-112">**Azure HDInsight cluster** with access tooa Data Lake Store account.</span></span> <span data-ttu-id="2a915-113">Zobacz [tworzenia klastra usługi HDInsight z usługą Data Lake Store](data-lake-store-hdinsight-hadoop-use-portal.md).</span><span class="sxs-lookup"><span data-stu-id="2a915-113">See [Create an HDInsight cluster with Data Lake Store](data-lake-store-hdinsight-hadoop-use-portal.md).</span></span> <span data-ttu-id="2a915-114">Upewnij się, że włączenie pulpitu zdalnego dla klastra hello.</span><span class="sxs-lookup"><span data-stu-id="2a915-114">Make sure you enable Remote Desktop for hello cluster.</span></span>
* <span data-ttu-id="2a915-115">**Uruchomiona klastra Spark w usłudze Azure Data Lake Store**.</span><span class="sxs-lookup"><span data-stu-id="2a915-115">**Running Spark cluster on Azure Data Lake Store**.</span></span>  <span data-ttu-id="2a915-116">Aby uzyskać więcej informacji, zobacz [dane tooanalyze klastra HDInsight korzystanie z platformy Spark w usłudze Data Lake Store](https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-spark-use-with-data-lake-store)</span><span class="sxs-lookup"><span data-stu-id="2a915-116">For more information, see [Use HDInsight Spark cluster tooanalyze data in Data Lake Store](https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-spark-use-with-data-lake-store)</span></span>
* <span data-ttu-id="2a915-117">**Wytyczne dotyczące ADLS dostrajania wydajności**.</span><span class="sxs-lookup"><span data-stu-id="2a915-117">**Performance tuning guidelines on ADLS**.</span></span>  <span data-ttu-id="2a915-118">Pojęcia dotyczące ogólnej wydajności, aby zapoznać [Data Lake magazynu dostrajanie wytyczne dotyczące wydajności](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-performance-tuning-guidance)</span><span class="sxs-lookup"><span data-stu-id="2a915-118">For general performance concepts, see [Data Lake Store Performance Tuning Guidance](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-performance-tuning-guidance)</span></span> 

## <a name="parameters"></a><span data-ttu-id="2a915-119">Parametry</span><span class="sxs-lookup"><span data-stu-id="2a915-119">Parameters</span></span>

<span data-ttu-id="2a915-120">Podczas uruchamiania zadań Spark, Oto hello najważniejszych ustawień, które mogą być wydajności tooincrease Zaczekaj na ADLS:</span><span class="sxs-lookup"><span data-stu-id="2a915-120">When running Spark jobs, here are hello most important settings that can be tuned tooincrease performance on ADLS:</span></span>

* <span data-ttu-id="2a915-121">**Liczba modułów** — Witaj liczba równoczesnych zadań, które mogą być wykonywane.</span><span class="sxs-lookup"><span data-stu-id="2a915-121">**Num-executors** - hello number of concurrent tasks that can be executed.</span></span>

* <span data-ttu-id="2a915-122">**Moduł wykonujący pamięci** -hello ilość pamięci przydzielonej tooeach Moduł wykonujący.</span><span class="sxs-lookup"><span data-stu-id="2a915-122">**Executor-memory** - hello amount of memory allocated tooeach executor.</span></span>

* <span data-ttu-id="2a915-123">**Moduł wykonujący rdzeni** -hello liczba rdzeni przydzielone tooeach Moduł wykonujący.</span><span class="sxs-lookup"><span data-stu-id="2a915-123">**Executor-cores** - hello number of cores allocated tooeach executor.</span></span>                     

<span data-ttu-id="2a915-124">**Liczba modułów** modułów Num ustawi hello maksymalna liczba zadań, które można uruchomić równolegle.</span><span class="sxs-lookup"><span data-stu-id="2a915-124">**Num-executors** Num-executors will set hello maximum number of tasks that can run in parallel.</span></span>  <span data-ttu-id="2a915-125">Rzeczywista liczba zadań, które można uruchomić równolegle Hello jest ograniczone przez hello pamięć i zasoby Procesora dostępne w klastrze.</span><span class="sxs-lookup"><span data-stu-id="2a915-125">hello actual number of tasks that can run in parallel is bounded by hello memory and CPU resources available in your cluster.</span></span>

<span data-ttu-id="2a915-126">**Moduł wykonujący pamięci** to hello ilość pamięci, która jest przydzielane tooeach Moduł wykonujący.</span><span class="sxs-lookup"><span data-stu-id="2a915-126">**Executor-memory** This is hello amount of memory that is being allocated tooeach executor.</span></span>  <span data-ttu-id="2a915-127">wymagane dla każdego modułu wykonującego pamięci Hello jest zależna od hello zadania.</span><span class="sxs-lookup"><span data-stu-id="2a915-127">hello memory needed for each executor is dependent on hello job.</span></span>  <span data-ttu-id="2a915-128">W przypadku złożonych operacji hello pamięci musi toobe wyższy.</span><span class="sxs-lookup"><span data-stu-id="2a915-128">For complex operations, hello memory needs toobe higher.</span></span>  <span data-ttu-id="2a915-129">Proste operacje, takie jak odczytu i zapisu wymagania dotyczące pamięci będzie niższa.</span><span class="sxs-lookup"><span data-stu-id="2a915-129">For simple operations like read and write, memory requirements will be lower.</span></span>  <span data-ttu-id="2a915-130">ilość pamięci dla każdego modułu wykonującego Hello można wyświetlić w narzędzia Ambari.</span><span class="sxs-lookup"><span data-stu-id="2a915-130">hello amount of memory for each executor can be viewed in Ambari.</span></span>  <span data-ttu-id="2a915-131">W Ambari Przejdź tooSpark i wyświetl kartę Configs hello.</span><span class="sxs-lookup"><span data-stu-id="2a915-131">In Ambari, navigate tooSpark and view hello Configs tab.</span></span>  

<span data-ttu-id="2a915-132">**Moduł wykonujący rdzeni** to ustawia hello liczbę rdzeni na moduł wykonujący określającą hello liczba równoległych wątków, które mogą być uruchamiane na moduł wykonujący.</span><span class="sxs-lookup"><span data-stu-id="2a915-132">**Executor-cores** This sets hello amount of cores used per executor, which determines hello number of parallel threads that can be run per executor.</span></span>  <span data-ttu-id="2a915-133">Na przykład jeśli moduł wykonujący rdzeni = 2, a następnie każdy moduł wykonujący można uruchamiać zadania równoległych 2 hello Moduł wykonujący.</span><span class="sxs-lookup"><span data-stu-id="2a915-133">For example, if executor-cores = 2, then each executor can run 2 parallel tasks in hello executor.</span></span>  <span data-ttu-id="2a915-134">Program Hello — rdzenie potrzebne będzie zależało od hello zadania.</span><span class="sxs-lookup"><span data-stu-id="2a915-134">hello executor-cores needed will be dependent on hello job.</span></span>  <span data-ttu-id="2a915-135">Duże zadania We/Wy nie wymaga dużej ilości pamięci poszczególnych zadań, dzięki czemu można każdy moduł wykonujący może obsługiwać więcej zadań równoległych.</span><span class="sxs-lookup"><span data-stu-id="2a915-135">I/O heavy jobs do not require a large amount of memory per task so each executor can handle more parallel tasks.</span></span>

<span data-ttu-id="2a915-136">Domyślnie dwa rdzenie YARN wirtualnych są definiowane dla każdego rdzeni fizycznych uruchomionej w usłudze HDInsight Spark.</span><span class="sxs-lookup"><span data-stu-id="2a915-136">By default, two virtual YARN cores are defined for each physical core when running Spark on HDInsight.</span></span>  <span data-ttu-id="2a915-137">Liczba ta zapewnia kompromis concurrecy oraz ilości wiele wątków do przełączania kontekstu.</span><span class="sxs-lookup"><span data-stu-id="2a915-137">This number provides a good balance of concurrecy and amount of context switching from multiple threads.</span></span>  

## <a name="guidance"></a><span data-ttu-id="2a915-138">Wskazówki</span><span class="sxs-lookup"><span data-stu-id="2a915-138">Guidance</span></span>

<span data-ttu-id="2a915-139">Podczas uruchamiania Spark toowork analityczne obciążeń z danymi w usłudze Data Lake Store, zalecane jest użycie hello najnowszych HDInsight wersji tooget hello najlepszą wydajność z usługą Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="2a915-139">While running Spark analytic workloads toowork with data in Data Lake Store, we recommend that you use hello most recent HDInsight version tooget hello best performance with Data Lake Store.</span></span> <span data-ttu-id="2a915-140">Gdy zadanie jest bardziej intensywne operacje We/Wy, niektóre parametry mogą być skonfigurowany tooimprove wydajności.</span><span class="sxs-lookup"><span data-stu-id="2a915-140">When your job is more I/O intensive, then certain parameters can be configured tooimprove performance.</span></span>  <span data-ttu-id="2a915-141">Azure Data Lake Store jest platformy wysokiej skalowalności magazynu, który może obsługiwać wysokiej przepływności.</span><span class="sxs-lookup"><span data-stu-id="2a915-141">Azure Data Lake Store is a highly scalable storage platform that can handle high throughput.</span></span>  <span data-ttu-id="2a915-142">Jeśli zadanie hello zawiera głównie odczytu lub zapisu, następnie zwiększenie współbieżności dla operacji We/Wy tooand z usługi Azure Data Lake Store może zwiększyć wydajność.</span><span class="sxs-lookup"><span data-stu-id="2a915-142">If hello job mainly consists of read or writes, then increasing concurrency for I/O tooand from Azure Data Lake Store could increase performance.</span></span>

<span data-ttu-id="2a915-143">Istnieje kilka sposobów ogólne tooincrease współbieżności zadań intensywne operacje We/Wy.</span><span class="sxs-lookup"><span data-stu-id="2a915-143">There are a few general ways tooincrease concurrency for I/O intensive jobs.</span></span>

<span data-ttu-id="2a915-144">**Krok 1: Określanie, jak wiele aplikacji uruchomionych w klastrze** — należy wiedzieć, jak wiele aplikacji są uruchomione w klastrze hello hello bieżącym włącznie.</span><span class="sxs-lookup"><span data-stu-id="2a915-144">**Step 1: Determine how many apps are running on your cluster** – You should know how many apps are running on hello cluster including hello current one.</span></span>  <span data-ttu-id="2a915-145">wartości domyślne powitania dla każdego Spark ustawienia obowiązuje założenie, które istnieją 4 równoczesne działanie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2a915-145">hello default values for each Spark setting assumes that there are 4 apps running concurrently.</span></span>  <span data-ttu-id="2a915-146">W związku z tym będzie mieć tylko 25% klastra hello dostępne dla każdej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2a915-146">Therefore, you will only have 25% of hello cluster available for each app.</span></span>  <span data-ttu-id="2a915-147">tooget lepszą wydajność, można zastąpić wartości domyślne hello zmieniając hello liczba modułów.</span><span class="sxs-lookup"><span data-stu-id="2a915-147">tooget better performance, you can override hello defaults by changing hello number of executors.</span></span>  

<span data-ttu-id="2a915-148">**Krok 2: Ustawić modułu wykonującego pamięci** — Witaj po pierwsze tooset jest moduł wykonujący hello pamięci.</span><span class="sxs-lookup"><span data-stu-id="2a915-148">**Step 2: Set executor-memory** – hello first thing tooset is hello executor-memory.</span></span>  <span data-ttu-id="2a915-149">pamięć Hello będzie zależna od zadania hello czy toorun będzie.</span><span class="sxs-lookup"><span data-stu-id="2a915-149">hello memory will be dependent on hello job that you are going toorun.</span></span>  <span data-ttu-id="2a915-150">Można zwiększyć współbieżność przydzielając mniejszą ilość pamięci na moduł wykonujący.</span><span class="sxs-lookup"><span data-stu-id="2a915-150">You can increase concurrency by allocating less memory per executor.</span></span>  <span data-ttu-id="2a915-151">Jeśli widzisz poza wyjątkami pamięci podczas uruchamiania zadania, należy zwiększyć wartość tego parametru hello.</span><span class="sxs-lookup"><span data-stu-id="2a915-151">If you see out of memory exceptions when you run your job, then you should increase hello value for this parameter.</span></span>  <span data-ttu-id="2a915-152">Jeden alternatywą jest tooget większej ilości pamięci za pomocą klastra, który ma większych ilości pamięci lub zwiększyć rozmiar hello klastra.</span><span class="sxs-lookup"><span data-stu-id="2a915-152">One alternative is tooget more memory by using a cluster that has higher amounts of memory or increasing hello size of your cluster.</span></span>  <span data-ttu-id="2a915-153">Więcej pamięci umożliwi więcej toobe modułów używane, co oznacza więcej współbieżności.</span><span class="sxs-lookup"><span data-stu-id="2a915-153">More memory will enable more executors toobe used, which means more concurrency.</span></span>

<span data-ttu-id="2a915-154">**Krok 3: Ustawianie rdzeni Moduł wykonujący** — we/wy intensywnych obciążeń, które nie mają złożonych operacji, jest dobrym toostart z dużej liczby rdzeni Moduł wykonujący tooincrease hello liczbę równoległych zadań na moduł wykonujący.</span><span class="sxs-lookup"><span data-stu-id="2a915-154">**Step 3: Set executor-cores** – For I/O intensive workloads that do not have complex operations, it’s good toostart with a high number of executor-cores tooincrease hello number of parallel tasks per executor.</span></span>  <span data-ttu-id="2a915-155">Ustawienie too4 rdzeni Moduł wykonujący stanowi dobry początek.</span><span class="sxs-lookup"><span data-stu-id="2a915-155">Setting executor-cores too4 is a good start.</span></span>   

    executor-cores = 4
<span data-ttu-id="2a915-156">Zwiększenie liczby hello rdzeni Moduł wykonujący zapewni więcej równoległości, możesz eksperymentować z różnych rdzeni Moduł wykonujący.</span><span class="sxs-lookup"><span data-stu-id="2a915-156">Increasing hello number of executor-cores will give you more parallelism so you can experiment with different executor-cores.</span></span>  <span data-ttu-id="2a915-157">Dla zadania, których bardziej złożonych operacji należy zmniejszyć hello liczba rdzeni w moduł wykonujący.</span><span class="sxs-lookup"><span data-stu-id="2a915-157">For jobs that have more complex operations, you should reduce hello number of cores per executor.</span></span>  <span data-ttu-id="2a915-158">Jeśli moduł wykonujący rdzeni jest wyższa niż 4, następnie wyrzucanie elementów bezużytecznych mogą się nieefektywne i obniżyć wydajność.</span><span class="sxs-lookup"><span data-stu-id="2a915-158">If executor-cores is set higher than 4, then garbage collection may become inefficient and degrade performance.</span></span>

<span data-ttu-id="2a915-159">**Krok 4: Określanie ilości pamięci YARN w klastrze** — te informacje są dostępne w narzędzia Ambari.</span><span class="sxs-lookup"><span data-stu-id="2a915-159">**Step 4: Determine amount of YARN memory in cluster** – This information is available in Ambari.</span></span>  <span data-ttu-id="2a915-160">Przejdź tooYARN, a następnie Wyświetl kartę Configs hello.  Witaj YARN pamięci jest wyświetlany w tym oknie.</span><span class="sxs-lookup"><span data-stu-id="2a915-160">Navigate tooYARN and view hello Configs tab.  hello YARN memory is displayed in this window.</span></span>  
<span data-ttu-id="2a915-161">Uwaga: podczas pracy w oknie hello jest również widoczna hello domyślny YARN kontenera rozmiar.</span><span class="sxs-lookup"><span data-stu-id="2a915-161">Note: while you are in hello window, you can also see hello default YARN container size.</span></span>  <span data-ttu-id="2a915-162">rozmiar kontenera YARN Hello jest hello taki sam jak ilość pamięci na parametru Moduł wykonujący.</span><span class="sxs-lookup"><span data-stu-id="2a915-162">hello YARN container size is hello same as memory per executor paramter.</span></span>

    Total YARN memory = nodes * YARN memory per node
<span data-ttu-id="2a915-163">**Krok 5: Oblicz num modułów**</span><span class="sxs-lookup"><span data-stu-id="2a915-163">**Step 5: Calculate num-executors**</span></span>

<span data-ttu-id="2a915-164">**Oblicz ograniczenie pamięci** — parametr num modułów hello jest ograniczony przez pamięci lub procesora CPU.</span><span class="sxs-lookup"><span data-stu-id="2a915-164">**Calculate memory constraint** - hello num-executors parameter is constrained either by memory or by CPU.</span></span>  <span data-ttu-id="2a915-165">Ograniczenie pamięci Hello jest określana przez hello ilość dostępnej pamięci YARN dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2a915-165">hello memory constraint is determined by hello amount of available YARN memory for your application.</span></span>  <span data-ttu-id="2a915-166">Należy podjąć YARN pamięć i przez moduł wykonujący pamięci.</span><span class="sxs-lookup"><span data-stu-id="2a915-166">You should take total YARN memory and divide that by executor-memory.</span></span>  <span data-ttu-id="2a915-167">ograniczenie Hello musi toobe cofnąć skalowania dla wielu aplikacji hello, możemy podzielić przez hello liczba aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2a915-167">hello constraint needs toobe de-scaled for hello number of apps so we divide by hello number of apps.</span></span>

    Memory constraint = (total YARN memory / executor memory) / # of apps   
<span data-ttu-id="2a915-168">**Obliczanie Procesora ograniczenia** -hello ograniczenie procesora CPU jest obliczany jako hello całkowita liczba rdzeni wirtualnego rozdzielonych hello liczba rdzeni w moduł wykonujący.</span><span class="sxs-lookup"><span data-stu-id="2a915-168">**Calculate CPU constraint** - hello CPU constraint is calculated as hello total virtual cores divided by hello number of cores per executor.</span></span>  <span data-ttu-id="2a915-169">Istnieją 2 rdzenie wirtualnych dla poszczególnych rdzeni fizycznych.</span><span class="sxs-lookup"><span data-stu-id="2a915-169">There are 2 virtual cores for each physical core.</span></span>  <span data-ttu-id="2a915-170">Ograniczenie pamięci toohello podobne, mamy dzielenia przez hello liczba aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2a915-170">Similar toohello memory constraint, we have divide by hello number of apps.</span></span>

    virtual cores = (nodes in cluster * # of physical cores in node * 2)
    CPU constraint = (total virtual cores / # of cores per executor) / # of apps
<span data-ttu-id="2a915-171">**Ustaw modułów num** — parametr num modułów hello jest określana przez pobranie hello minimum hello pamięci ograniczenia i ograniczenia hello procesora CPU.</span><span class="sxs-lookup"><span data-stu-id="2a915-171">**Set num-executors** – hello num-executors parameter is determined by taking hello minimum of hello memory constraint and hello CPU constraint.</span></span> 

    num-executors = Min (total virtual Cores / # of cores per executor, available YARN memory / executor-memory)   
<span data-ttu-id="2a915-172">Ustawienie większej liczby modułów num nie zawsze poprawia wydajność.</span><span class="sxs-lookup"><span data-stu-id="2a915-172">Setting a higher number of num-executors does not necessarily increase performance.</span></span>  <span data-ttu-id="2a915-173">Należy rozważyć dodanie więcej modułów spowoduje dodanie czy bardzo ogólnych, dla każdego dodatkowego Moduł wykonujący, które potencjalnie może zmniejszyć wydajność.</span><span class="sxs-lookup"><span data-stu-id="2a915-173">You should consider that adding more executors will add extra overhead for each additional executor, which can potentially degrade performance.</span></span>  <span data-ttu-id="2a915-174">Liczba modułów jest ograniczone przez hello zasobów klastra.</span><span class="sxs-lookup"><span data-stu-id="2a915-174">Num-executors is bounded by hello cluster resources.</span></span>    

## <a name="example-calculation"></a><span data-ttu-id="2a915-175">Przykład obliczeń</span><span class="sxs-lookup"><span data-stu-id="2a915-175">Example Calculation</span></span>

<span data-ttu-id="2a915-176">Załóżmy, że masz obecnie klaster składa się z 8 węzłów D4v2 2 uruchomionej aplikacji hello w tym co ma toorun.</span><span class="sxs-lookup"><span data-stu-id="2a915-176">Let’s say you currently have a cluster composed of 8 D4v2 nodes that is running 2 apps including hello one you are going toorun.</span></span>  

<span data-ttu-id="2a915-177">**Krok 1: Określanie, jak wiele aplikacji uruchomionych w klastrze** — wiesz, że masz 2 aplikacji w klastrze, w tym hello, co ma toorun.</span><span class="sxs-lookup"><span data-stu-id="2a915-177">**Step 1: Determine how many apps are running on your cluster** – you know that you have 2 apps on your cluster, including hello one you are going toorun.</span></span>  

<span data-ttu-id="2a915-178">**Krok 2: Ustawić modułu wykonującego pamięci** — na przykład możemy ustalić, czy 6 GB pamięci Moduł wykonujący są wystarczające dla zadania intensywne operacje We/Wy.</span><span class="sxs-lookup"><span data-stu-id="2a915-178">**Step 2: Set executor-memory** – for this example, we determine that 6GB of executor-memory will be sufficient for I/O intensive job.</span></span>  

    executor-memory = 6GB
<span data-ttu-id="2a915-179">**Krok 3: Ustawianie rdzeni Moduł wykonujący** — ponieważ jest to zadanie intensywne operacje We/Wy, możemy ustawić hello liczba rdzeni dla każdego too4 Moduł wykonujący.</span><span class="sxs-lookup"><span data-stu-id="2a915-179">**Step 3: Set executor-cores** – Since this is an I/O intensive job, we can set hello number of cores for each executor too4.</span></span>  <span data-ttu-id="2a915-180">Ustawienie rdzeni w jednym toolarger Moduł wykonujący niż 4 może spowodować problemy z kolekcji pamięci.</span><span class="sxs-lookup"><span data-stu-id="2a915-180">Setting cores per executor toolarger than 4 may cause garbage collection problems.</span></span>  

    executor-cores = 4
<span data-ttu-id="2a915-181">**Krok 4: Określanie ilości pamięci YARN w klastrze** — możemy przejść toofind tooAmbari się, że każdy D4v2 ma 25 GB pamięci YARN.</span><span class="sxs-lookup"><span data-stu-id="2a915-181">**Step 4: Determine amount of YARN memory in cluster** – We navigate tooAmbari toofind out that each D4v2 has 25GB of YARN memory.</span></span>  <span data-ttu-id="2a915-182">Ponieważ 8 węzłów, dostępnej pamięci YARN hello jest mnożona przez 8.</span><span class="sxs-lookup"><span data-stu-id="2a915-182">Since there are 8 nodes, hello available YARN memory is multiplied by 8.</span></span>

    Total YARN memory = nodes * YARN memory* per node
    Total YARN memory = 8 nodes * 25GB = 200GB
<span data-ttu-id="2a915-183">**Krok 5: Oblicz modułów num** — parametr num modułów hello jest określana przez pobranie hello minimalna hello pamięci ograniczenia i ograniczenie Procesora hello rozdzielonych hello # aplikacje działające na Spark.</span><span class="sxs-lookup"><span data-stu-id="2a915-183">**Step 5: Calculate num-executors** – hello num-executors parameter is determined by taking hello minimum of hello memory constraint and hello CPU constraint divided by hello # of apps running on Spark.</span></span>    

<span data-ttu-id="2a915-184">**Oblicz ograniczenie pamięci** — ograniczenie pamięci hello jest obliczany jako hello całkowita pamięć YARN podzielona przez ilość pamięci hello na moduł wykonujący.</span><span class="sxs-lookup"><span data-stu-id="2a915-184">**Calculate memory constraint** – hello memory constraint is calculated as hello total YARN memory divided by hello memory per executor.</span></span>

    Memory constraint = (total YARN memory / executor memory) / # of apps   
    Memory constraint = (200GB / 6GB) / 2   
    Memory constraint = 16 (rounded)
<span data-ttu-id="2a915-185">**Obliczanie Procesora ograniczenia** -hello ograniczenie procesora CPU jest liczony jako hello yarn całkowita liczba rdzeni rozdzielonych hello liczba rdzeni w moduł wykonujący.</span><span class="sxs-lookup"><span data-stu-id="2a915-185">**Calculate CPU constraint** - hello CPU constraint is calculated as hello total yarn cores divided by hello number of cores per executor.</span></span>
    
    YARN cores = nodes in cluster * # of cores per node * 2   
    YARN cores = 8 nodes * 8 cores per D14 * 2 = 128
    CPU constraint = (total YARN cores / # of cores per executor) / # of apps
    CPU constraint = (128 / 4) / 2
    CPU constraint = 16
<span data-ttu-id="2a915-186">**Zestaw num modułów**</span><span class="sxs-lookup"><span data-stu-id="2a915-186">**Set num-executors**</span></span>

    num-executors = Min (memory constraint, CPU constraint)
    num-executors = Min (16, 16)
    num-executors = 16    

