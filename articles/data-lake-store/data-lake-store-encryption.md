---
title: "aaaEncryption w usłudze Azure Data Lake Store | Dokumentacja firmy Microsoft"
description: "Omówienie sposobu działania szyfrowania i wymiany kluczy w usłudze Azure Data Lake Store"
services: data-lake-store
documentationcenter: 
author: yagupta
manager: 
editor: 
ms.assetid: 
ms.service: data-lake-store
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 4/14/2017
ms.author: yagupta
ms.openlocfilehash: a9f3a2dce8232deba93005594d1e6a21e9c0cbee
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="encryption-of-data-in-azure-data-lake-store"></a><span data-ttu-id="dca60-103">Szyfrowanie danych w usłudze Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="dca60-103">Encryption of data in Azure Data Lake Store</span></span>

<span data-ttu-id="dca60-104">Szyfrowanie w usłudze Azure Data Lake Store pomaga chronić dane, implementować zasady bezpieczeństwa w przedsiębiorstwie i spełniać prawne wymagania dotyczące zgodności.</span><span class="sxs-lookup"><span data-stu-id="dca60-104">Encryption in Azure Data Lake Store helps you protect your data, implement enterprise security policies, and meet regulatory compliance requirements.</span></span> <span data-ttu-id="dca60-105">Ten artykuł zawiera omówienie projektowania hello i omówiono niektóre aspekty techniczne hello implementacji.</span><span class="sxs-lookup"><span data-stu-id="dca60-105">This article provides an overview of hello design, and discusses some of hello technical aspects of implementation.</span></span>

<span data-ttu-id="dca60-106">Usługa Data Lake Store obsługuje szyfrowanie danych zarówno magazynowanych, jak i przesyłanych.</span><span class="sxs-lookup"><span data-stu-id="dca60-106">Data Lake Store supports encryption of data both at rest and in transit.</span></span> <span data-ttu-id="dca60-107">W przypadku danych magazynowanych usługa Data Lake Store obsługuje domyślnie włączone szyfrowanie przezroczyste.</span><span class="sxs-lookup"><span data-stu-id="dca60-107">For data at rest, Data Lake Store supports "on by default," transparent encryption.</span></span> <span data-ttu-id="dca60-108">Poniżej przedstawiono bardziej szczegółowe wyjaśnienie tych terminów:</span><span class="sxs-lookup"><span data-stu-id="dca60-108">Here is what these terms mean in a bit more detail:</span></span>

* <span data-ttu-id="dca60-109">**Na domyślnie**: podczas tworzenia nowego konta usługi Data Lake Store hello domyślne ustawienie włącza szyfrowanie.</span><span class="sxs-lookup"><span data-stu-id="dca60-109">**On by default**: When you create a new Data Lake Store account, hello default setting enables encryption.</span></span> <span data-ttu-id="dca60-110">Później dane przechowywane w usłudze Data Lake Store jest zawsze zaszyfrowane wcześniejsze toostoring na nośniku trwałe.</span><span class="sxs-lookup"><span data-stu-id="dca60-110">Thereafter, data that is stored in Data Lake Store is always encrypted prior toostoring on persistent media.</span></span> <span data-ttu-id="dca60-111">Jest to zachowanie hello wszystkich danych i nie można zmienić po utworzeniu konta.</span><span class="sxs-lookup"><span data-stu-id="dca60-111">This is hello behavior for all data, and it cannot be changed after an account is created.</span></span>
* <span data-ttu-id="dca60-112">**Przezroczysty**: Data Lake Store automatycznie szyfruje toopersisting wcześniejszych danych i odszyfrowuje tooretrieval wcześniejszych danych.</span><span class="sxs-lookup"><span data-stu-id="dca60-112">**Transparent**: Data Lake Store automatically encrypts data prior toopersisting, and decrypts data prior tooretrieval.</span></span> <span data-ttu-id="dca60-113">szyfrowanie Hello jest skonfigurowany i zarządzane na powitania poziom usługi Data Lake Store przez administratora.</span><span class="sxs-lookup"><span data-stu-id="dca60-113">hello encryption is configured and managed at hello Data Lake Store level by an administrator.</span></span> <span data-ttu-id="dca60-114">Nie są zmienione dane toohello dostęp do interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="dca60-114">No changes are made toohello data access APIs.</span></span> <span data-ttu-id="dca60-115">W związku z tym z powodu szyfrowania nie ma konieczności wprowadzania żadnych zmian w aplikacjach i usługach, które współdziałają z usługą Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="dca60-115">Thus, no changes are required in applications and services that interact with Data Lake Store because of encryption.</span></span>

<span data-ttu-id="dca60-116">Dane przesyłane (inaczej dane w ruchu) również są zawsze szyfrowane w usłudze Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="dca60-116">Data in transit (also known as data in motion) is also always encrypted in Data Lake Store.</span></span> <span data-ttu-id="dca60-117">Ponadto tooencrypting danych przed toostoring toopersistent nośnika hello zawsze ochrona danych podczas przesyłania przy użyciu protokołu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="dca60-117">In addition tooencrypting data prior toostoring toopersistent media, hello data is also always secured in transit by using HTTPS.</span></span> <span data-ttu-id="dca60-118">HTTPS jest hello tylko protokół, który jest obsługiwany w przypadku powitalne interfejsy Data Lake magazynu REST.</span><span class="sxs-lookup"><span data-stu-id="dca60-118">HTTPS is hello only protocol that is supported for hello Data Lake Store REST interfaces.</span></span> <span data-ttu-id="dca60-119">Witaj poniższym diagramie przedstawiono sposób dane szyfrowane staje się w usłudze Data Lake Store:</span><span class="sxs-lookup"><span data-stu-id="dca60-119">hello following diagram shows how data becomes encrypted in Data Lake Store:</span></span>

![Diagram szyfrowania danych w usłudze Data Lake Store](./media/data-lake-store-encryption/fig1.png)


## <a name="set-up-encryption-with-data-lake-store"></a><span data-ttu-id="dca60-121">Konfigurowanie szyfrowania przy użyciu usługi Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="dca60-121">Set up encryption with Data Lake Store</span></span>

<span data-ttu-id="dca60-122">Szyfrowanie w usłudze Data Lake Store konfiguruje się podczas tworzenia konta i zawsze jest domyślnie włączone.</span><span class="sxs-lookup"><span data-stu-id="dca60-122">Encryption for Data Lake Store is set up during account creation, and it is always enabled by default.</span></span> <span data-ttu-id="dca60-123">Możesz zarządzać kluczami hello, samodzielnie, lub zezwolić toomanage usługi Data Lake Store je automatycznie (jest to domyślny hello).</span><span class="sxs-lookup"><span data-stu-id="dca60-123">You can either manage hello keys yourself, or allow Data Lake Store toomanage them for you (this is hello default).</span></span>

<span data-ttu-id="dca60-124">Aby uzyskać więcej informacji, zobacz [Wprowadzenie](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span><span class="sxs-lookup"><span data-stu-id="dca60-124">For more information, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

## <a name="how-encryption-works-in-data-lake-store"></a><span data-ttu-id="dca60-125">Jak działa szyfrowanie w usłudze Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="dca60-125">How encryption works in Data Lake Store</span></span>

<span data-ttu-id="dca60-126">Witaj następujące informacje dotyczą sposobu toomanage główny szyfrowania kluczy, a także opisano hello trzy różne typy klawisze, których można używać szyfrowania danych dla usługi Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="dca60-126">hello following information covers how toomanage master encryption keys, and it explains hello three different types of keys you can use in data encryption for Data Lake Store.</span></span>

### <a name="master-encryption-keys"></a><span data-ttu-id="dca60-127">Główne klucze szyfrowania</span><span class="sxs-lookup"><span data-stu-id="dca60-127">Master encryption keys</span></span>

<span data-ttu-id="dca60-128">Usługa Data Lake Store udostępnia dwa tryby zarządzania głównymi kluczami szyfrowania.</span><span class="sxs-lookup"><span data-stu-id="dca60-128">Data Lake Store provides two modes for management of master encryption keys (MEKs).</span></span> <span data-ttu-id="dca60-129">Teraz załóżmy, że klucz główny szyfrowania hello jest hello klucz najwyższego poziomu.</span><span class="sxs-lookup"><span data-stu-id="dca60-129">For now, assume that hello master encryption key is hello top-level key.</span></span> <span data-ttu-id="dca60-130">Klucz główny szyfrowania toohello dostępu jest wymagany toodecrypt wszystkie dane przechowywane w usłudze Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="dca60-130">Access toohello master encryption key is required toodecrypt any data stored in Data Lake Store.</span></span>

<span data-ttu-id="dca60-131">Hello dwa tryby zarządzania klucz główny szyfrowania hello są następujące:</span><span class="sxs-lookup"><span data-stu-id="dca60-131">hello two modes for managing hello master encryption key are as follows:</span></span>

*   <span data-ttu-id="dca60-132">Klucze zarządzane przez usługę</span><span class="sxs-lookup"><span data-stu-id="dca60-132">Service managed keys</span></span>
*   <span data-ttu-id="dca60-133">Klucze zarządzane przez klienta</span><span class="sxs-lookup"><span data-stu-id="dca60-133">Customer managed keys</span></span>

<span data-ttu-id="dca60-134">W obu trybach klucz główny szyfrowania hello jest chroniona przez zapisanie go w usłudze Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="dca60-134">In both modes, hello master encryption key is secured by storing it in Azure Key Vault.</span></span> <span data-ttu-id="dca60-135">Key Vault jest usługą pełni zarządzany i wysokim poziomie zabezpieczeń na platformie Azure, które mogą być używane toosafeguard kluczy kryptograficznych.</span><span class="sxs-lookup"><span data-stu-id="dca60-135">Key Vault is a fully managed, highly secure service on Azure that can be used toosafeguard cryptographic keys.</span></span> <span data-ttu-id="dca60-136">Aby uzyskać więcej informacji, zobacz [Key Vault](https://azure.microsoft.com/services/key-vault).</span><span class="sxs-lookup"><span data-stu-id="dca60-136">For more information, see [Key Vault](https://azure.microsoft.com/services/key-vault).</span></span>

<span data-ttu-id="dca60-137">Oto krótkie porównanie możliwości oferowane przez dwa tryby hello Zarządzanie hello MEKs.</span><span class="sxs-lookup"><span data-stu-id="dca60-137">Here is a brief comparison of capabilities provided by hello two modes of managing hello MEKs.</span></span>

|  | <span data-ttu-id="dca60-138">Klucze zarządzane przez usługę</span><span class="sxs-lookup"><span data-stu-id="dca60-138">Service managed keys</span></span> | <span data-ttu-id="dca60-139">Klucze zarządzane przez klienta</span><span class="sxs-lookup"><span data-stu-id="dca60-139">Customer managed keys</span></span> |
| --- | --- | --- |
|<span data-ttu-id="dca60-140">W jaki sposób przechowywane są dane?</span><span class="sxs-lookup"><span data-stu-id="dca60-140">How is data stored?</span></span>|<span data-ttu-id="dca60-141">Zawsze zaszyfrowane toobeing wcześniejsze przechowywane.</span><span class="sxs-lookup"><span data-stu-id="dca60-141">Always encrypted prior toobeing stored.</span></span>|<span data-ttu-id="dca60-142">Zawsze zaszyfrowane toobeing wcześniejsze przechowywane.</span><span class="sxs-lookup"><span data-stu-id="dca60-142">Always encrypted prior toobeing stored.</span></span>|
|<span data-ttu-id="dca60-143">Gdzie są przechowywane hello klucza szyfrowania</span><span class="sxs-lookup"><span data-stu-id="dca60-143">Where is hello Master Encryption Key stored?</span></span>|<span data-ttu-id="dca60-144">Usługa Key Vault</span><span class="sxs-lookup"><span data-stu-id="dca60-144">Key Vault</span></span>|<span data-ttu-id="dca60-145">Usługa Key Vault</span><span class="sxs-lookup"><span data-stu-id="dca60-145">Key Vault</span></span>|
|<span data-ttu-id="dca60-146">Wszystkie klucze przechowywane w hello wyczyść szyfrowania znajdują się poza Key Vault?</span><span class="sxs-lookup"><span data-stu-id="dca60-146">Are any encryption keys stored in hello clear outside of Key Vault?</span></span> |<span data-ttu-id="dca60-147">Nie</span><span class="sxs-lookup"><span data-stu-id="dca60-147">No</span></span>|<span data-ttu-id="dca60-148">Nie</span><span class="sxs-lookup"><span data-stu-id="dca60-148">No</span></span>|
|<span data-ttu-id="dca60-149">Witaj MEK można pobrać przez usługi Key Vault?</span><span class="sxs-lookup"><span data-stu-id="dca60-149">Can hello MEK be retrieved by Key Vault?</span></span>|<span data-ttu-id="dca60-150">Nie.</span><span class="sxs-lookup"><span data-stu-id="dca60-150">No.</span></span> <span data-ttu-id="dca60-151">Po hello MEK jest przechowywany w magazynie kluczy można można używać tylko do szyfrowania i odszyfrowywania.</span><span class="sxs-lookup"><span data-stu-id="dca60-151">After hello MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|<span data-ttu-id="dca60-152">Nie.</span><span class="sxs-lookup"><span data-stu-id="dca60-152">No.</span></span> <span data-ttu-id="dca60-153">Po hello MEK jest przechowywany w magazynie kluczy można można używać tylko do szyfrowania i odszyfrowywania.</span><span class="sxs-lookup"><span data-stu-id="dca60-153">After hello MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|
|<span data-ttu-id="dca60-154">Kto jest właścicielem wystąpienia usługi Key Vault hello i hello MEK?</span><span class="sxs-lookup"><span data-stu-id="dca60-154">Who owns hello Key Vault instance and hello MEK?</span></span>|<span data-ttu-id="dca60-155">Witaj usługi Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="dca60-155">hello Data Lake Store service</span></span>|<span data-ttu-id="dca60-156">Jesteś właścicielem hello wystąpienia usługi Key Vault, która należy do subskrypcji platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="dca60-156">You own hello Key Vault instance, which belongs in your own Azure subscription.</span></span> <span data-ttu-id="dca60-157">Hello MEK w magazynie kluczy mogą być zarządzane przez oprogramowania lub sprzętu.</span><span class="sxs-lookup"><span data-stu-id="dca60-157">hello MEK in Key Vault can be managed by software or hardware.</span></span>|
|<span data-ttu-id="dca60-158">Możesz cofnąć dostęp toohello MEK dla hello usługi Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="dca60-158">Can you revoke access toohello MEK for hello Data Lake Store service?</span></span>|<span data-ttu-id="dca60-159">Nie</span><span class="sxs-lookup"><span data-stu-id="dca60-159">No</span></span>|<span data-ttu-id="dca60-160">Tak.</span><span class="sxs-lookup"><span data-stu-id="dca60-160">Yes.</span></span> <span data-ttu-id="dca60-161">Zarządzanie listami kontroli dostępu w magazynie klucz i Usuń tożsamość usługi toohello wpisów kontroli dostępu dla hello usługi Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="dca60-161">You can manage access control lists in Key Vault, and remove access control entries toohello service identity for hello Data Lake Store service.</span></span>|
|<span data-ttu-id="dca60-162">Można trwale usunąć hello MEK?</span><span class="sxs-lookup"><span data-stu-id="dca60-162">Can you permanently delete hello MEK?</span></span>|<span data-ttu-id="dca60-163">Nie</span><span class="sxs-lookup"><span data-stu-id="dca60-163">No</span></span>|<span data-ttu-id="dca60-164">Tak.</span><span class="sxs-lookup"><span data-stu-id="dca60-164">Yes.</span></span> <span data-ttu-id="dca60-165">Po usunięciu hello MEK z magazynu kluczy danych hello w hello konta usługi Data Lake Store nie można odszyfrować wszystkim osobom hello usługą Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="dca60-165">If you delete hello MEK from Key Vault, hello data in hello Data Lake Store account cannot be decrypted by anyone, including hello Data Lake Store service.</span></span> <br><br> <span data-ttu-id="dca60-166">Jeśli jawnie kopii zapasowej poprzedniego toodeleting MEK hello go z magazynu kluczy, hello MEK można przywrócić, a następnie można odzyskać dane hello.</span><span class="sxs-lookup"><span data-stu-id="dca60-166">If you have explicitly backed up hello MEK prior toodeleting it from Key Vault, hello MEK can be restored, and hello data can then be recovered.</span></span> <span data-ttu-id="dca60-167">Jednak jeśli nie kopii zapasowej poprzedniego toodeleting MEK hello go z magazynu kluczy, hello w hello konta usługi Data Lake Store może nigdy nie można odszyfrować danych później.</span><span class="sxs-lookup"><span data-stu-id="dca60-167">However, if you have not backed up hello MEK prior toodeleting it from Key Vault, hello data in hello Data Lake Store account can never be decrypted thereafter.</span></span>|


<span data-ttu-id="dca60-168">Jako uzupełnienie tej różnicy, który zarządza hello MEK i hello Key Vault wystąpienia w której się znajduje, hello reszty projektu hello jest hello takie same dla obu trybów.</span><span class="sxs-lookup"><span data-stu-id="dca60-168">Aside from this difference of who manages hello MEK and hello Key Vault instance in which it resides, hello rest of hello design is hello same for both modes.</span></span>

<span data-ttu-id="dca60-169">Po wybraniu trybu hello hello kluczy szyfrowania głównego jest ważne tooremember hello poniżej:</span><span class="sxs-lookup"><span data-stu-id="dca60-169">It's important tooremember hello following when you choose hello mode for hello master encryption keys:</span></span>

*   <span data-ttu-id="dca60-170">Można wybrać, czy klient toouse zarządzanych kluczy lub kluczy usługi zarządzania podczas obsługi administracyjnej konto usługi Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="dca60-170">You can choose whether toouse customer managed keys or service managed keys when you provision a Data Lake Store account.</span></span>
*   <span data-ttu-id="dca60-171">Po udostępnieniu konto usługi Data Lake Store, nie można zmienić trybu hello.</span><span class="sxs-lookup"><span data-stu-id="dca60-171">After a Data Lake Store account is provisioned, hello mode cannot be changed.</span></span>

### <a name="encryption-and-decryption-of-data"></a><span data-ttu-id="dca60-172">Szyfrowanie i odszyfrowywanie danych</span><span class="sxs-lookup"><span data-stu-id="dca60-172">Encryption and decryption of data</span></span>

<span data-ttu-id="dca60-173">Istnieją trzy typy kluczy, które są używane w projekcie hello szyfrowania danych.</span><span class="sxs-lookup"><span data-stu-id="dca60-173">There are three types of keys that are used in hello design of data encryption.</span></span> <span data-ttu-id="dca60-174">Witaj w poniższej tabeli przedstawiono podsumowanie:</span><span class="sxs-lookup"><span data-stu-id="dca60-174">hello following table provides a summary:</span></span>

| <span data-ttu-id="dca60-175">Klucz</span><span class="sxs-lookup"><span data-stu-id="dca60-175">Key</span></span>                   | <span data-ttu-id="dca60-176">Skrót</span><span class="sxs-lookup"><span data-stu-id="dca60-176">Abbreviation</span></span> | <span data-ttu-id="dca60-177">Skojarzony z</span><span class="sxs-lookup"><span data-stu-id="dca60-177">Associated with</span></span> | <span data-ttu-id="dca60-178">Lokalizacja magazynu</span><span class="sxs-lookup"><span data-stu-id="dca60-178">Storage location</span></span>                             | <span data-ttu-id="dca60-179">Typ</span><span class="sxs-lookup"><span data-stu-id="dca60-179">Type</span></span>       | <span data-ttu-id="dca60-180">Uwagi</span><span class="sxs-lookup"><span data-stu-id="dca60-180">Notes</span></span>                                                                                                   |
|-----------------------|--------------|-----------------|----------------------------------------------|------------|---------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="dca60-181">Główny klucz szyfrowania</span><span class="sxs-lookup"><span data-stu-id="dca60-181">Master Encryption Key</span></span> | <span data-ttu-id="dca60-182">GKS</span><span class="sxs-lookup"><span data-stu-id="dca60-182">MEK</span></span>          | <span data-ttu-id="dca60-183">Konto usługi Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="dca60-183">A Data Lake Store account</span></span> | <span data-ttu-id="dca60-184">Usługa Key Vault</span><span class="sxs-lookup"><span data-stu-id="dca60-184">Key Vault</span></span>                              | <span data-ttu-id="dca60-185">Asymetryczny</span><span class="sxs-lookup"><span data-stu-id="dca60-185">Asymmetric</span></span> | <span data-ttu-id="dca60-186">Może nim zarządzać usługa Data Lake Store lub można to robić samodzielnie.</span><span class="sxs-lookup"><span data-stu-id="dca60-186">It can be managed by Data Lake Store or you.</span></span>                                                              |
| <span data-ttu-id="dca60-187">Klucz szyfrowania danych</span><span class="sxs-lookup"><span data-stu-id="dca60-187">Data Encryption Key</span></span>   | <span data-ttu-id="dca60-188">KSD</span><span class="sxs-lookup"><span data-stu-id="dca60-188">DEK</span></span>          | <span data-ttu-id="dca60-189">Konto usługi Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="dca60-189">A Data Lake Store account</span></span> | <span data-ttu-id="dca60-190">Magazyn trwały zarządzany przez usługę Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="dca60-190">Persistent storage, managed by Data Lake Store service</span></span> | <span data-ttu-id="dca60-191">Symetryczny</span><span class="sxs-lookup"><span data-stu-id="dca60-191">Symmetric</span></span>  | <span data-ttu-id="dca60-192">Witaj klucza szyfrowania danych jest szyfrowany za hello MEK.</span><span class="sxs-lookup"><span data-stu-id="dca60-192">hello DEK is encrypted by hello MEK.</span></span> <span data-ttu-id="dca60-193">Witaj, zaszyfrowanego klucza szyfrowania danych jest co to są przechowywane na nośnikach trwałych.</span><span class="sxs-lookup"><span data-stu-id="dca60-193">hello encrypted DEK is what is stored on persistent media.</span></span> |
| <span data-ttu-id="dca60-194">Klucz szyfrowania bloków</span><span class="sxs-lookup"><span data-stu-id="dca60-194">Block Encryption Key</span></span>  | <span data-ttu-id="dca60-195">KSB</span><span class="sxs-lookup"><span data-stu-id="dca60-195">BEK</span></span>          | <span data-ttu-id="dca60-196">Blok danych</span><span class="sxs-lookup"><span data-stu-id="dca60-196">A block of data</span></span> | <span data-ttu-id="dca60-197">Brak</span><span class="sxs-lookup"><span data-stu-id="dca60-197">None</span></span>                                         | <span data-ttu-id="dca60-198">Symetryczny</span><span class="sxs-lookup"><span data-stu-id="dca60-198">Symmetric</span></span>  | <span data-ttu-id="dca60-199">Witaj BEK jest pochodną hello klucza szyfrowania danych i hello bloku danych.</span><span class="sxs-lookup"><span data-stu-id="dca60-199">hello BEK is derived from hello DEK and hello data block.</span></span>                                                      |

<span data-ttu-id="dca60-200">powitania po diagram ilustruje te pojęcia:</span><span class="sxs-lookup"><span data-stu-id="dca60-200">hello following diagram illustrates these concepts:</span></span>

![Klucze używane do szyfrowania danych](./media/data-lake-store-encryption/fig2.png)

#### <a name="pseudo-algorithm-when-a-file-is-toobe-decrypted"></a><span data-ttu-id="dca60-202">Pseudo algorytmu, gdy plik jest odszyfrowywany toobe:</span><span class="sxs-lookup"><span data-stu-id="dca60-202">Pseudo algorithm when a file is toobe decrypted:</span></span>
1.  <span data-ttu-id="dca60-203">Sprawdź, czy hello klucza szyfrowania danych dla konta usługi Data Lake Store hello jest buforowany i gotowa do użycia.</span><span class="sxs-lookup"><span data-stu-id="dca60-203">Check if hello DEK for hello Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="dca60-204">Jeśli nie, odczytać hello zaszyfrowany klucz szyfrowania danych z magazynu trwałego i wysłać go odszyfrować toobe magazynu tooKey.</span><span class="sxs-lookup"><span data-stu-id="dca60-204">If not, then read hello encrypted DEK from persistent storage, and send it tooKey Vault toobe decrypted.</span></span> <span data-ttu-id="dca60-205">Pamięć podręczna hello odszyfrować klucza szyfrowania danych w pamięci.</span><span class="sxs-lookup"><span data-stu-id="dca60-205">Cache hello decrypted DEK in memory.</span></span> <span data-ttu-id="dca60-206">Jest teraz gotowy toouse.</span><span class="sxs-lookup"><span data-stu-id="dca60-206">It is now ready toouse.</span></span>
2.  <span data-ttu-id="dca60-207">Dla każdego bloku danych w pliku hello:</span><span class="sxs-lookup"><span data-stu-id="dca60-207">For every block of data in hello file:</span></span>
    - <span data-ttu-id="dca60-208">Odczyt hello zaszyfrowanego bloku danych z magazynu trwałego.</span><span class="sxs-lookup"><span data-stu-id="dca60-208">Read hello encrypted block of data from persistent storage.</span></span>
    - <span data-ttu-id="dca60-209">Generowanie hello BEK z hello klucza szyfrowania danych i hello zaszyfrowanego bloku danych.</span><span class="sxs-lookup"><span data-stu-id="dca60-209">Generate hello BEK from hello DEK and hello encrypted block of data.</span></span>
    - <span data-ttu-id="dca60-210">Użyj hello BEK toodecrypt danych.</span><span class="sxs-lookup"><span data-stu-id="dca60-210">Use hello BEK toodecrypt data.</span></span>


#### <a name="pseudo-algorithm-when-a-block-of-data-is-toobe-encrypted"></a><span data-ttu-id="dca60-211">Algorytm pseudo toobe szyfrowane po bloku danych:</span><span class="sxs-lookup"><span data-stu-id="dca60-211">Pseudo algorithm when a block of data is toobe encrypted:</span></span>
1.  <span data-ttu-id="dca60-212">Sprawdź, czy hello klucza szyfrowania danych dla konta usługi Data Lake Store hello jest buforowany i gotowa do użycia.</span><span class="sxs-lookup"><span data-stu-id="dca60-212">Check if hello DEK for hello Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="dca60-213">Jeśli nie, odczytać hello zaszyfrowany klucz szyfrowania danych z magazynu trwałego i wysłać go odszyfrować toobe magazynu tooKey.</span><span class="sxs-lookup"><span data-stu-id="dca60-213">If not, then read hello encrypted DEK from persistent storage, and send it tooKey Vault toobe decrypted.</span></span> <span data-ttu-id="dca60-214">Pamięć podręczna hello odszyfrować klucza szyfrowania danych w pamięci.</span><span class="sxs-lookup"><span data-stu-id="dca60-214">Cache hello decrypted DEK in memory.</span></span> <span data-ttu-id="dca60-215">Jest teraz gotowy toouse.</span><span class="sxs-lookup"><span data-stu-id="dca60-215">It is now ready toouse.</span></span>
2.  <span data-ttu-id="dca60-216">Generuj unikatowy BEK hello bloku danych z hello klucza szyfrowania danych.</span><span class="sxs-lookup"><span data-stu-id="dca60-216">Generate a unique BEK for hello block of data from hello DEK.</span></span>
3.  <span data-ttu-id="dca60-217">Szyfrowanie hello bloku danych z hello BEK, przy użyciu szyfrowania AES 256.</span><span class="sxs-lookup"><span data-stu-id="dca60-217">Encrypt hello data block with hello BEK, by using AES-256 encryption.</span></span>
4.  <span data-ttu-id="dca60-218">Blok zaszyfrowanych danych hello magazynu danych na magazynu trwałego.</span><span class="sxs-lookup"><span data-stu-id="dca60-218">Store hello encrypted data block of data on persistent storage.</span></span>

> [!NOTE] 
> <span data-ttu-id="dca60-219">Ze względu na wydajność wyczyść klucza szyfrowania danych w hello hello są buforowane w pamięci przez krótki czas i natychmiastowe jest później usunięte.</span><span class="sxs-lookup"><span data-stu-id="dca60-219">For performance reasons, hello DEK in hello clear is cached in memory for a short time, and is immediately erased afterward.</span></span> <span data-ttu-id="dca60-220">Na nośniku trwałe zawsze znajduje się szyfrowane przez hello MEK.</span><span class="sxs-lookup"><span data-stu-id="dca60-220">On persistent media, it is always stored encrypted by hello MEK.</span></span>

## <a name="key-rotation"></a><span data-ttu-id="dca60-221">Wymiana kluczy</span><span class="sxs-lookup"><span data-stu-id="dca60-221">Key rotation</span></span>

<span data-ttu-id="dca60-222">Korzystając z kluczy zarządzany przez klienta, można obracać hello MEK.</span><span class="sxs-lookup"><span data-stu-id="dca60-222">When you are using customer-managed keys, you can rotate hello MEK.</span></span> <span data-ttu-id="dca60-223">toolearn tooset konto usługi Data Lake Store z kluczami zarządzany przez klienta, zobacz temat [wprowadzenie](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span><span class="sxs-lookup"><span data-stu-id="dca60-223">toolearn how tooset up a Data Lake Store account with customer-managed keys, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

### <a name="prerequisites"></a><span data-ttu-id="dca60-224">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="dca60-224">Prerequisites</span></span>

<span data-ttu-id="dca60-225">Po skonfigurowaniu konta usługi Data Lake Store hello wybrano toouse własnych kluczy.</span><span class="sxs-lookup"><span data-stu-id="dca60-225">When you set up hello Data Lake Store account, you have chosen toouse your own keys.</span></span> <span data-ttu-id="dca60-226">Nie można zmienić tej opcji, po utworzeniu konta hello.</span><span class="sxs-lookup"><span data-stu-id="dca60-226">This option cannot be changed after hello account has been created.</span></span> <span data-ttu-id="dca60-227">Witaj następujących krokach założono używasz klucze zarządzany przez klienta (oznacza to, że wybrano własnych kluczy z usługi Key Vault).</span><span class="sxs-lookup"><span data-stu-id="dca60-227">hello following steps assume that you are using customer-managed keys (that is, you have chosen your own keys from Key Vault).</span></span>

<span data-ttu-id="dca60-228">Należy pamiętać, że jeśli używasz hello domyślne opcje szyfrowania danych są zawsze szyfrowane przy użyciu kluczy zarządzanych przez usługi Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="dca60-228">Note that if you use hello default options for encryption, your data is always encrypted by using keys managed by Data Lake Store.</span></span> <span data-ttu-id="dca60-229">W przypadku tej opcji nie masz hello możliwości toorotate kluczy, ponieważ są one zarządzane przez usługi Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="dca60-229">In this option, you don't have hello ability toorotate keys, as they are managed by Data Lake Store.</span></span>

### <a name="how-toorotate-hello-mek-in-data-lake-store"></a><span data-ttu-id="dca60-230">Jak toorotate hello MEK w usłudze Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="dca60-230">How toorotate hello MEK in Data Lake Store</span></span>

1. <span data-ttu-id="dca60-231">Zaloguj się toohello [portalu Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="dca60-231">Sign in toohello [Azure portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="dca60-232">Przeglądaj toohello Key Vault wystąpienie, które są przechowywane klucze skojarzone z kontem usługi Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="dca60-232">Browse toohello Key Vault instance that stores your keys associated with your Data Lake Store account.</span></span> <span data-ttu-id="dca60-233">Wybierz pozycję **Klucze**.</span><span class="sxs-lookup"><span data-stu-id="dca60-233">Select **Keys**.</span></span>

    ![Zrzut ekranu usługi Key Vault](./media/data-lake-store-encryption/keyvault.png)

3.  <span data-ttu-id="dca60-235">Wybierz klucz hello skojarzony z Twoim kontem usługi Data Lake Store i utworzyć nową wersję tego klucza.</span><span class="sxs-lookup"><span data-stu-id="dca60-235">Select hello key associated with your Data Lake Store account, and create a new version of this key.</span></span> <span data-ttu-id="dca60-236">Należy pamiętać, że Data Lake Store aktualnie obsługuje tylko rotacją kluczy tooa nowa wersja klucza.</span><span class="sxs-lookup"><span data-stu-id="dca60-236">Note that Data Lake Store currently only supports key rotation tooa new version of a key.</span></span> <span data-ttu-id="dca60-237">Nie obsługuje on obracania tooa inny klucz.</span><span class="sxs-lookup"><span data-stu-id="dca60-237">It doesn't support rotating tooa different key.</span></span>

   ![Zrzut ekranu okna Klucze z wyróżnionym przyciskiem Nowa wersja](./media/data-lake-store-encryption/keynewversion.png)

4.  <span data-ttu-id="dca60-239">Konto magazynu Data Lake Store toohello Przeglądaj i wybierz **szyfrowania**.</span><span class="sxs-lookup"><span data-stu-id="dca60-239">Browse toohello Data Lake Store storage account, and select **Encryption**.</span></span>

    ![Zrzut ekranu okna konta magazynu usługi Data Lake Store z wyróżnioną pozycją Szyfrowanie](./media/data-lake-store-encryption/select-encryption.png)

5.  <span data-ttu-id="dca60-241">Komunikat informuje, czy dostępna jest nowa wersja klucza hello klucza.</span><span class="sxs-lookup"><span data-stu-id="dca60-241">A message notifies you that a new key version of hello key is available.</span></span> <span data-ttu-id="dca60-242">Kliknij przycisk **Obróć klucza** tooupdate hello klucza toohello nowej wersji.</span><span class="sxs-lookup"><span data-stu-id="dca60-242">Click **Rotate Key** tooupdate hello key toohello new version.</span></span>

    ![Zrzut ekranu okna usługi Data Lake Store z komunikatem i wyróżnioną pozycją Wymień klucz](./media/data-lake-store-encryption/rotatekey.png)

<span data-ttu-id="dca60-244">Ta operacja powinno zająć mniej niż dwóch minut, i nie ma bez przestojów oczekiwanego powodu tookey obrotu.</span><span class="sxs-lookup"><span data-stu-id="dca60-244">This operation should take less than two minutes, and there is no expected downtime due tookey rotation.</span></span> <span data-ttu-id="dca60-245">Po zakończeniu operacji hello hello nowej wersji klucza hello jest używany.</span><span class="sxs-lookup"><span data-stu-id="dca60-245">After hello operation is complete, hello new version of hello key is in use.</span></span>
