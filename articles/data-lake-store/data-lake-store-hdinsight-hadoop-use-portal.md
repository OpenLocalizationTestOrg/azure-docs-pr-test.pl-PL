---
title: "Tworzenie klastrów usługi HDInsight Azure z usługą Data Lake Store za pomocą portalu Azure | Dokumentacja firmy Microsoft"
description: "Użyj portalu Azure, aby utworzyć i klastry usługi HDInsight za pomocą usługi Azure Data Lake Store"
services: data-lake-store,hdinsight
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
ms.assetid: a8c45a83-a8e3-4227-8b02-1bc1e1de6767
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 08/14/2017
ms.author: nitinme
ms.openlocfilehash: 9dd56efb89e07ea61ae431d1ea2accd721cd6502
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/18/2017
---
# <a name="create-hdinsight-clusters-with-data-lake-store-by-using-the-azure-portal"></a><span data-ttu-id="b71b2-103">Tworzenie klastrów usługi HDInsight z usługą Data Lake Store za pomocą portalu Azure</span><span class="sxs-lookup"><span data-stu-id="b71b2-103">Create HDInsight clusters with Data Lake Store by using the Azure portal</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="b71b2-104">Korzystanie z witryny Azure Portal</span><span class="sxs-lookup"><span data-stu-id="b71b2-104">Use the Azure portal</span></span>](data-lake-store-hdinsight-hadoop-use-portal.md)
> * [<span data-ttu-id="b71b2-105">Przy użyciu programu PowerShell (do magazynu domyślnego)</span><span class="sxs-lookup"><span data-stu-id="b71b2-105">Use PowerShell (for default storage)</span></span>](data-lake-store-hdinsight-hadoop-use-powershell-for-default-storage.md)
> * [<span data-ttu-id="b71b2-106">Przy użyciu programu PowerShell (dla dodatkowego magazynu)</span><span class="sxs-lookup"><span data-stu-id="b71b2-106">Use PowerShell (for additional storage)</span></span>](data-lake-store-hdinsight-hadoop-use-powershell.md)
> * [<span data-ttu-id="b71b2-107">Użyj Menedżera zasobów</span><span class="sxs-lookup"><span data-stu-id="b71b2-107">Use Resource Manager</span></span>](data-lake-store-hdinsight-hadoop-use-resource-manager-template.md)
>
>

<span data-ttu-id="b71b2-108">Dowiedz się, jak utworzyć klaster usługi HDInsight przy użyciu konta usługi Azure Data Lake Store jako domyślnego magazynu lub dodatkowego magazynu za pomocą portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="b71b2-108">Learn how to use the Azure portal to create a HDInsight cluster with an Azure Data Lake Store account as the default storage or an additional storage.</span></span> <span data-ttu-id="b71b2-109">Mimo że dodatkowe miejsce do magazynowania jest opcjonalne dla klastra usługi HDInsight, zalecane jest przechowywanie danych biznesowych w ramach kont dodatkowego miejsca do magazynowania.</span><span class="sxs-lookup"><span data-stu-id="b71b2-109">Even though additional storage is optional for a HDInsight cluster, it is recommended to store your business data in the additional storage accounts.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="b71b2-110">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="b71b2-110">Prerequisites</span></span>
<span data-ttu-id="b71b2-111">Przed rozpoczęciem tego samouczka, upewnij się, że zostały spełnione następujące wymagania:</span><span class="sxs-lookup"><span data-stu-id="b71b2-111">Before you begin this tutorial, ensure that you've met the following requirements:</span></span>

* <span data-ttu-id="b71b2-112">**Subskrypcja platformy Azure**.</span><span class="sxs-lookup"><span data-stu-id="b71b2-112">**An Azure subscription**.</span></span> <span data-ttu-id="b71b2-113">Przejdź do [Azure Pobierz bezpłatną wersję próbną](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="b71b2-113">Go to [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="b71b2-114">**Konto usługi Azure Data Lake Store**.</span><span class="sxs-lookup"><span data-stu-id="b71b2-114">**An Azure Data Lake Store account**.</span></span> <span data-ttu-id="b71b2-115">Postępuj zgodnie z instrukcjami z [wprowadzenie do usługi Azure Data Lake Store za pomocą portalu Azure](data-lake-store-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="b71b2-115">Follow the instructions from [Get started with Azure Data Lake Store by using the Azure portal](data-lake-store-get-started-portal.md).</span></span> <span data-ttu-id="b71b2-116">Należy także utworzyć folderem głównym na koncie.</span><span class="sxs-lookup"><span data-stu-id="b71b2-116">You must also create a root folder on the account.</span></span>  <span data-ttu-id="b71b2-117">W tym samouczku folderu głównego o nazwie __/klastrów__ jest używany.</span><span class="sxs-lookup"><span data-stu-id="b71b2-117">In this tutorial, a root folder called __/clusters__ is used.</span></span>
* <span data-ttu-id="b71b2-118">**Nazwy głównej usługi Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="b71b2-118">**An Azure Active Directory service principal**.</span></span> <span data-ttu-id="b71b2-119">Ten samouczek zawiera instrukcje dotyczące sposobu tworzenia usługę podmiotu zabezpieczeń w usłudze Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="b71b2-119">This tutorial provides instructions on how to create a service principal in Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="b71b2-120">Jednak można utworzyć nazwy głównej usługi, musi być administratorem usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b71b2-120">However, to create a service principal, you must be an Azure AD administrator.</span></span> <span data-ttu-id="b71b2-121">Jeśli jesteś administratorem, możesz pominąć te wymagania wstępne i kontynuować samouczka.</span><span class="sxs-lookup"><span data-stu-id="b71b2-121">If you are an administrator, you can skip this prerequisite and proceed with the tutorial.</span></span>

    >[!NOTE]
    ><span data-ttu-id="b71b2-122">Usługi można utworzyć podmiot, tylko wtedy, gdy administrator usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b71b2-122">You can create a service principal only if you are an Azure AD administrator.</span></span> <span data-ttu-id="b71b2-123">Administrator usługi Azure AD należy utworzyć usługę podmiotu zabezpieczeń przed utworzeniem klastra usługi HDInsight z usługą Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b71b2-123">Your Azure AD administrator must create a service principal before you can create an HDInsight cluster with Data Lake Store.</span></span> <span data-ttu-id="b71b2-124">Także nazwy głównej usługi muszą zostać utworzone przy użyciu certyfikatu zgodnie z opisem w [Tworzenie nazwy głównej usługi o certyfikat](../azure-resource-manager/resource-group-authenticate-service-principal.md#create-service-principal-with-self-signed-certificate).</span><span class="sxs-lookup"><span data-stu-id="b71b2-124">Also, the service principal must be created with a certificate, as described at [Create a service principal with certificate](../azure-resource-manager/resource-group-authenticate-service-principal.md#create-service-principal-with-self-signed-certificate).</span></span>
    >

## <a name="create-an-hdinsight-cluster"></a><span data-ttu-id="b71b2-125">Tworzenie klastra usługi HDInsight</span><span class="sxs-lookup"><span data-stu-id="b71b2-125">Create an HDInsight cluster</span></span>

<span data-ttu-id="b71b2-126">W tej sekcji utworzysz klaster usługi HDInsight przy użyciu kont usługi Data Lake Store jako domyślną lub dodatkowe miejsce do magazynowania.</span><span class="sxs-lookup"><span data-stu-id="b71b2-126">In this section, you create a HDInsight cluster with Data Lake Store accounts as the default or the additional storage.</span></span> <span data-ttu-id="b71b2-127">Ten artykuł dotyczy tylko część konfigurowania kont usługi Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b71b2-127">This article only focuses the part of configuring Data Lake Store accounts.</span></span>  <span data-ttu-id="b71b2-128">Aby informacji o tworzeniu klastra ogólne i procedury, zobacz [klastrów utworzyć Hadoop w HDInsight](../hdinsight/hdinsight-hadoop-provision-linux-clusters.md).</span><span class="sxs-lookup"><span data-stu-id="b71b2-128">For the general cluster creation information and procedures, see [Create Hadoop clusters in HDInsight](../hdinsight/hdinsight-hadoop-provision-linux-clusters.md).</span></span>

### <a name="create-a-cluster-with-data-lake-store-as-default-storage"></a><span data-ttu-id="b71b2-129">Tworzenie klastra z usługą Data Lake Store jako domyślnego magazynu</span><span class="sxs-lookup"><span data-stu-id="b71b2-129">Create a cluster with Data Lake Store as default storage</span></span>

<span data-ttu-id="b71b2-130">**Aby utworzyć klaster usługi HDInsight z usługi Data Lake Store jako domyślne konto magazynu**</span><span class="sxs-lookup"><span data-stu-id="b71b2-130">**To create a HDInsight cluster with a Data Lake Store as the default storage account**</span></span>

1. <span data-ttu-id="b71b2-131">Zaloguj się w witrynie [Azure Portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="b71b2-131">Sign in to the [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="b71b2-132">Postępuj zgodnie z [Tworzenie klastrów](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) ogólne informacje dotyczące tworzenia klastrów usługi HDInsight.</span><span class="sxs-lookup"><span data-stu-id="b71b2-132">Follow [Create clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) for the general information on creating HDInsight clusters.</span></span>
3. <span data-ttu-id="b71b2-133">Na **magazynu** bloku, w obszarze **typu podstawowego magazynu**, wybierz pozycję **usługi Data Lake Store**, a następnie wprowadź następujące informacje:</span><span class="sxs-lookup"><span data-stu-id="b71b2-133">On the **Storage** blade, under **Primary storage type**, select **Data Lake Store**, and then enter the following information:</span></span>

    <span data-ttu-id="b71b2-134">![Dodaj nazwy głównej usługi w klastrze usługi HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.adls.storage.png "Dodaj nazwy głównej usługi w klastrze usługi HDInsight")</span><span class="sxs-lookup"><span data-stu-id="b71b2-134">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.adls.storage.png "Add service principal to HDInsight cluster")</span></span>

    - <span data-ttu-id="b71b2-135">**Konto usługi Data Lake Store wybierz**: Wybierz istniejące konto usługi Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b71b2-135">**Select Data Lake Store account**: Select an existing Data Lake Store account.</span></span> <span data-ttu-id="b71b2-136">Istniejące konto usługi Data Lake Store jest wymagany.</span><span class="sxs-lookup"><span data-stu-id="b71b2-136">An existing Data Lake Store account is required.</span></span>  <span data-ttu-id="b71b2-137">Zobacz [wymagania wstępne](#prereuisites).</span><span class="sxs-lookup"><span data-stu-id="b71b2-137">See [Prerequisites](#prereuisites).</span></span>
    - <span data-ttu-id="b71b2-138">**Ścieżka katalogu głównego**: wprowadź ścieżkę, w którym mają być przechowywane pliki specyficznych dla klastra.</span><span class="sxs-lookup"><span data-stu-id="b71b2-138">**Root path**: Enter a path where the cluster-specific files are to be stored.</span></span> <span data-ttu-id="b71b2-139">Zrzut ekranu, to __/klastrów/myhdiadlcluster/__, w którym __/klastrów__ musi istnieć folder, a Portal tworzy *myhdicluster* folderu.</span><span class="sxs-lookup"><span data-stu-id="b71b2-139">On the screenshot, it is __/clusters/myhdiadlcluster/__, in which the __/clusters__ folder must exist, and the Portal creates *myhdicluster* folder.</span></span>  <span data-ttu-id="b71b2-140">*Myhdicluster* jest nazwą klastra.</span><span class="sxs-lookup"><span data-stu-id="b71b2-140">The *myhdicluster* is the cluster name.</span></span>
    - <span data-ttu-id="b71b2-141">**Dostęp do usługi Data Lake Store**: Konfigurowanie dostępu między konta usługi Data Lake Store i klaster usługi HDInsight.</span><span class="sxs-lookup"><span data-stu-id="b71b2-141">**Data Lake Store access**: Configure access between the Data Lake Store account and HDInsight cluster.</span></span> <span data-ttu-id="b71b2-142">Aby uzyskać instrukcje, zobacz [dostępu Konfiguruj Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="b71b2-142">For instructions, see [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>
    - <span data-ttu-id="b71b2-143">**Dodatkowe konta magazynu**: kont Dodawanie konta magazynu Azure jako dodatkowy magazyn dla klastra.</span><span class="sxs-lookup"><span data-stu-id="b71b2-143">**Additional storage accounts**: Add Azure Storage Accounts as additional storage accounts for the cluster.</span></span> <span data-ttu-id="b71b2-144">Aby dodać dodatkowe magazyny Lake danych odbywa się przez nadanie uprawnień klastra na danych więcej kont usługi Data Lake Store podczas konfigurowania konta usługi Data Lake Store jako typu podstawowego magazynu.</span><span class="sxs-lookup"><span data-stu-id="b71b2-144">To add additional Data Lake Stores is done by giving the cluster permissions on data in more Data Lake Store accounts while configuring a Data Lake Store account as the primary storage type.</span></span> <span data-ttu-id="b71b2-145">Zobacz [Konfigurowanie dostępu do usługi Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="b71b2-145">See [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>

4. <span data-ttu-id="b71b2-146">Na **dostępu do usługi Data Lake Store**, kliknij przycisk **wybierz**, a następnie kontynuuj tworzenia klastra, zgodnie z opisem w [klastrów utworzyć Hadoop w HDInsight](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md).</span><span class="sxs-lookup"><span data-stu-id="b71b2-146">On the **Data Lake Store access**, click **Select**, and then continue with cluster creation as described in [Create Hadoop clusters in HDInsight](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md).</span></span>


### <a name="create-a-cluster-with-data-lake-store-as-additional-storage"></a><span data-ttu-id="b71b2-147">Tworzenie klastra z usługą Data Lake Store jako dodatkowego miejsca do magazynowania</span><span class="sxs-lookup"><span data-stu-id="b71b2-147">Create a cluster with Data Lake Store as additional storage</span></span>

<span data-ttu-id="b71b2-148">Poniższe instrukcje tworzenia klastra usługi HDInsight z konta usługi Azure Storage jako domyślny magazyn i konto usługi Data Lake Store jako dodatkowego magazynu.</span><span class="sxs-lookup"><span data-stu-id="b71b2-148">The following instructions create a HDInsight cluster with an Azure Storage account as the default storage, and a Data Lake Store account as an additional storage.</span></span>
<span data-ttu-id="b71b2-149">**Aby utworzyć klaster usługi HDInsight z usługi Data Lake Store jako domyślne konto magazynu**</span><span class="sxs-lookup"><span data-stu-id="b71b2-149">**To create a HDInsight cluster with a Data Lake Store as the default storage account**</span></span>

1. <span data-ttu-id="b71b2-150">Zaloguj się w witrynie [Azure Portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="b71b2-150">Sign in to the [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="b71b2-151">Postępuj zgodnie z [Tworzenie klastrów](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) ogólne informacje dotyczące tworzenia klastrów usługi HDInsight.</span><span class="sxs-lookup"><span data-stu-id="b71b2-151">Follow [Create clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) for the general information on creating HDInsight clusters.</span></span>
3. <span data-ttu-id="b71b2-152">Na **magazynu** bloku, w obszarze **typu podstawowego magazynu**, wybierz pozycję **usługi Azure Storage**, a następnie wprowadź następujące informacje:</span><span class="sxs-lookup"><span data-stu-id="b71b2-152">On the **Storage** blade, under **Primary storage type**, select **Azure Storage**, and then enter the following information:</span></span>

    <span data-ttu-id="b71b2-153">![Dodaj nazwy głównej usługi w klastrze usługi HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.png "Dodaj nazwy głównej usługi w klastrze usługi HDInsight")</span><span class="sxs-lookup"><span data-stu-id="b71b2-153">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.png "Add service principal to HDInsight cluster")</span></span>

    - <span data-ttu-id="b71b2-154">**Wybór metody**: użyj jednej z następujących opcji:</span><span class="sxs-lookup"><span data-stu-id="b71b2-154">**Selection method**: use one of the following options:</span></span>

        * <span data-ttu-id="b71b2-155">Aby określić konto magazynu, który jest częścią subskrypcji platformy Azure, wybierz **Moje subskrypcje**, a następnie wybierz konto magazynu.</span><span class="sxs-lookup"><span data-stu-id="b71b2-155">To specify a storage account that is part of your Azure subscription, select **My subscriptions**, and then select the storage account.</span></span>
        * <span data-ttu-id="b71b2-156">Aby określić konto magazynu, który znajduje się poza subskrypcją platformy Azure, wybierz **klucz dostępu**, a następnie podaj informacje dotyczące konta magazynu zewnętrznego.</span><span class="sxs-lookup"><span data-stu-id="b71b2-156">To specify a storage account that is outside your Azure subscription, select **Access key**, and then provide the information for the outside storage account.</span></span>

    - <span data-ttu-id="b71b2-157">**Domyślny kontener**: Użyj wartości domyślnej lub określ własną nazwę.</span><span class="sxs-lookup"><span data-stu-id="b71b2-157">**Default container**: use either the default value or specify your own name.</span></span>

    - <span data-ttu-id="b71b2-158">Dodatkowych kont magazynu: dodać więcej kont magazynu Azure jako dodatkowe miejsce do magazynowania.</span><span class="sxs-lookup"><span data-stu-id="b71b2-158">Additional Storage accounts: add more Azure Storage accounts as the additional storage.</span></span>
    - <span data-ttu-id="b71b2-159">Dostęp do usługi Data Lake Store: Konfigurowanie dostępu między konta usługi Data Lake Store i klaster usługi HDInsight.</span><span class="sxs-lookup"><span data-stu-id="b71b2-159">Data Lake Store access: configure access between the Data Lake Store account and HDInsight cluster.</span></span> <span data-ttu-id="b71b2-160">Instrukcje można znaleźć [dostępu Konfiguruj Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="b71b2-160">For instructions see [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>

## <a name="configure-data-lake-store-access"></a><span data-ttu-id="b71b2-161">Konfigurowanie dostępu do usługi Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b71b2-161">Configure Data Lake Store access</span></span> 

<span data-ttu-id="b71b2-162">W tej sekcji skonfigurujesz dostęp do usługi Data Lake Store z klastrów usługi HDInsight przy użyciu nazwy głównej usługi Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b71b2-162">In this section, you configure Data Lake Store access from HDInsight clusters using an Azure Active Directory service principal.</span></span> 

### <a name="specify-a-service-principal"></a><span data-ttu-id="b71b2-163">Określ nazwy głównej usługi</span><span class="sxs-lookup"><span data-stu-id="b71b2-163">Specify a service principal</span></span>

<span data-ttu-id="b71b2-164">W portalu Azure możesz użyć istniejącej nazwy głównej usługi lub Utwórz nową.</span><span class="sxs-lookup"><span data-stu-id="b71b2-164">From the Azure portal, you can either use an existing service principal or create a new one.</span></span>

<span data-ttu-id="b71b2-165">**Aby utworzyć nazwy głównej usługi z portalu Azure**</span><span class="sxs-lookup"><span data-stu-id="b71b2-165">**To create a service principal from the Azure portal**</span></span>

1. <span data-ttu-id="b71b2-166">Kliknij przycisk **dostępu do usługi Data Lake Store** z bloku magazynu.</span><span class="sxs-lookup"><span data-stu-id="b71b2-166">Click **Data Lake Store access** from the Store blade.</span></span>
2. <span data-ttu-id="b71b2-167">Na **dostępu do usługi Data Lake Store** bloku, kliknij przycisk **Utwórz nowy**.</span><span class="sxs-lookup"><span data-stu-id="b71b2-167">On the **Data Lake Store access** blade, click **Create new**.</span></span>
3. <span data-ttu-id="b71b2-168">Kliknij przycisk **nazwy głównej usługi**, a następnie postępuj zgodnie z instrukcjami, aby utworzyć nazwy głównej usługi.</span><span class="sxs-lookup"><span data-stu-id="b71b2-168">Click **Service Principal**, and then follow the instructions to create a service principal.</span></span>
4. <span data-ttu-id="b71b2-169">Pobierz certyfikat, jeśli zdecydujesz się używać go w przyszłości.</span><span class="sxs-lookup"><span data-stu-id="b71b2-169">Download the certificate if you decide to use it again in the future.</span></span> <span data-ttu-id="b71b2-170">Pobieranie certyfikatu jest przydatne, jeśli chcesz użyć tej samej nazwy głównej usługi podczas tworzenia dodatkowych klastrów usługi HDInsight.</span><span class="sxs-lookup"><span data-stu-id="b71b2-170">Downloading the certificate is useful if you want to use the same service principal when you create additional HDInsight clusters.</span></span>

    <span data-ttu-id="b71b2-171">![Dodaj nazwy głównej usługi w klastrze usługi HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.2.png "Dodaj nazwy głównej usługi w klastrze usługi HDInsight")</span><span class="sxs-lookup"><span data-stu-id="b71b2-171">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.2.png "Add service principal to HDInsight cluster")</span></span>

4. <span data-ttu-id="b71b2-172">Kliknij przycisk **dostępu** Aby skonfigurować dostęp do folderu.</span><span class="sxs-lookup"><span data-stu-id="b71b2-172">Click **Access** to configure the folder access.</span></span>  <span data-ttu-id="b71b2-173">Zobacz [skonfigurować uprawnienia do pliku](#configure-file-permissions).</span><span class="sxs-lookup"><span data-stu-id="b71b2-173">See [Configure file permissions](#configure-file-permissions).</span></span>


<span data-ttu-id="b71b2-174">**Aby użyć istniejącej nazwy głównej usługi z portalu Azure**</span><span class="sxs-lookup"><span data-stu-id="b71b2-174">**To use an existing service principal from the Azure portal**</span></span>

1. <span data-ttu-id="b71b2-175">Kliknij przycisk **dostępu do usługi Data Lake Store**.</span><span class="sxs-lookup"><span data-stu-id="b71b2-175">Click **Data Lake Store access**.</span></span>
1. <span data-ttu-id="b71b2-176">Na **dostępu do usługi Data Lake Store** bloku, kliknij przycisk **Użyj istniejącego**.</span><span class="sxs-lookup"><span data-stu-id="b71b2-176">On the **Data Lake Store access** blade, click **Use existing**.</span></span>
2. <span data-ttu-id="b71b2-177">Kliknij przycisk **nazwy głównej usługi**, a następnie wybierz nazwę główną usługi.</span><span class="sxs-lookup"><span data-stu-id="b71b2-177">Click **Service Principal**, and then select a service principal.</span></span> 
3. <span data-ttu-id="b71b2-178">Przekaż certyfikat (pfx) jest skojarzona z Twojej nazwy głównej usługi wybrany, a następnie wprowadź hasło certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="b71b2-178">Upload the certificate (.pfx file) that's associated with your selected service principal, and then enter the certificate password.</span></span>

    <span data-ttu-id="b71b2-179">![Dodaj nazwy głównej usługi w klastrze usługi HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.5.png "Dodaj nazwy głównej usługi w klastrze usługi HDInsight")</span><span class="sxs-lookup"><span data-stu-id="b71b2-179">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.5.png "Add service principal to HDInsight cluster")</span></span>

4. <span data-ttu-id="b71b2-180">Kliknij przycisk **dostępu** Aby skonfigurować dostęp do folderu.</span><span class="sxs-lookup"><span data-stu-id="b71b2-180">Click **Access** to configure the folder access.</span></span>  <span data-ttu-id="b71b2-181">Zobacz [skonfigurować uprawnienia do pliku](#configure-file-permissions).</span><span class="sxs-lookup"><span data-stu-id="b71b2-181">See [Configure file permissions](#configure-file-permissions).</span></span>


### <span data-ttu-id="b71b2-182"><a name="configure-file-permissions"></a>Skonfiguruj uprawnienia do pliku</span><span class="sxs-lookup"><span data-stu-id="b71b2-182"><a name="configure-file-permissions"></a>Configure file permissions</span></span>

<span data-ttu-id="b71b2-183">Konfiguruje są różne w zależności od tego, czy konto jest używane jako magazyn domyślne konto magazynu dodatkowe:</span><span class="sxs-lookup"><span data-stu-id="b71b2-183">The configures are different depending on whether the account is used as the default storage or an additional storage account:</span></span>

- <span data-ttu-id="b71b2-184">Używane jako domyślnego magazynu</span><span class="sxs-lookup"><span data-stu-id="b71b2-184">Used as default storage</span></span>

    - <span data-ttu-id="b71b2-185">uprawnienia na poziomie głównym konta usługi Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b71b2-185">permission at the root level of the Data Lake Store account</span></span>
    - <span data-ttu-id="b71b2-186">uprawnienia na poziomie głównym magazynu klastra usługi HDInsight.</span><span class="sxs-lookup"><span data-stu-id="b71b2-186">permission at the root level of the HDInsight cluster storage.</span></span> <span data-ttu-id="b71b2-187">Na przykład __/klastrów__ folderu używanego wcześniej w samouczku.</span><span class="sxs-lookup"><span data-stu-id="b71b2-187">For example, the __/clusters__ folder used earlier in the tutorial.</span></span>
- <span data-ttu-id="b71b2-188">Użyj jako dodatkowego magazynu</span><span class="sxs-lookup"><span data-stu-id="b71b2-188">Use as an additional storage</span></span>

    - <span data-ttu-id="b71b2-189">Uprawnienia w foldery, w której należy plik dostępu.</span><span class="sxs-lookup"><span data-stu-id="b71b2-189">Permission at the folders where you need file access.</span></span>

<span data-ttu-id="b71b2-190">**Aby przypisać uprawnienia na poziomie głównym konta usługi Data Lake Store**</span><span class="sxs-lookup"><span data-stu-id="b71b2-190">**To assign permission at the Data Lake Store account root level**</span></span>

1. <span data-ttu-id="b71b2-191">Na **dostępu do usługi Data Lake Store** bloku, kliknij przycisk **dostępu**.</span><span class="sxs-lookup"><span data-stu-id="b71b2-191">On the **Data Lake Store access** blade, click **Access**.</span></span> <span data-ttu-id="b71b2-192">**Wybierz uprawnienia do pliku** bloku jest otwarty.</span><span class="sxs-lookup"><span data-stu-id="b71b2-192">The **Select file permissions** blade is opened.</span></span> <span data-ttu-id="b71b2-193">Wyświetlane są wszystkie konta usługi Data Lake Store w ramach subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="b71b2-193">It lists all the Data Lake Store accounts in your subscription.</span></span>
2. <span data-ttu-id="b71b2-194">Umieść kursor (nie klikaj) myszy nad nazwą konta usługi Data Lake Store, aby uwidocznić pole wyboru, zaznacz pole wyboru.</span><span class="sxs-lookup"><span data-stu-id="b71b2-194">Hover (do not click) the mouse over the name of the Data Lake Store account to make the check box visible, then select the check box.</span></span>

    <span data-ttu-id="b71b2-195">![Dodaj nazwy głównej usługi w klastrze usługi HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3.png "Dodaj nazwy głównej usługi w klastrze usługi HDInsight")</span><span class="sxs-lookup"><span data-stu-id="b71b2-195">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3.png "Add service principal to HDInsight cluster")</span></span>

  <span data-ttu-id="b71b2-196">Domyślnie __odczytu__, __zapisu__, AND __EXECUTE__ wybrane są.</span><span class="sxs-lookup"><span data-stu-id="b71b2-196">By default, __READ__, __WRITE__, AND __EXECUTE__ are all selected.</span></span>

3. <span data-ttu-id="b71b2-197">Kliknij przycisk **wybierz** w dolnej części strony.</span><span class="sxs-lookup"><span data-stu-id="b71b2-197">Click **Select** on the bottom of the page.</span></span>
4. <span data-ttu-id="b71b2-198">Kliknij przycisk **Uruchom** na potrzeby przypisywania uprawnień.</span><span class="sxs-lookup"><span data-stu-id="b71b2-198">Click **Run** to assign permission.</span></span>
5. <span data-ttu-id="b71b2-199">Kliknij przycisk **Gotowe**.</span><span class="sxs-lookup"><span data-stu-id="b71b2-199">Click **Done**.</span></span>

<span data-ttu-id="b71b2-200">**Aby przypisać uprawnienia na poziomie głównym klastra usługi HDInsight**</span><span class="sxs-lookup"><span data-stu-id="b71b2-200">**To assign permission at the HDInsight cluster root level**</span></span>

1. <span data-ttu-id="b71b2-201">Na **dostępu do usługi Data Lake Store** bloku, kliknij przycisk **dostępu**.</span><span class="sxs-lookup"><span data-stu-id="b71b2-201">On the **Data Lake Store access** blade, click **Access**.</span></span> <span data-ttu-id="b71b2-202">**Wybierz uprawnienia do pliku** bloku jest otwarty.</span><span class="sxs-lookup"><span data-stu-id="b71b2-202">The **Select file permissions** blade is opened.</span></span> <span data-ttu-id="b71b2-203">Wyświetlane są wszystkie konta usługi Data Lake Store w ramach subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="b71b2-203">It lists all the Data Lake Store accounts in your subscription.</span></span>
1. <span data-ttu-id="b71b2-204">Z **wybierz uprawnienia do pliku** bloku, kliknij nazwę usługi Data Lake Store, aby wyświetlić jego zawartości.</span><span class="sxs-lookup"><span data-stu-id="b71b2-204">From the **Select file permissions** blade, click the Data Lake Store name to show its content.</span></span>
2. <span data-ttu-id="b71b2-205">Wybierz katalogu głównego magazynu klastra usługi HDInsight, zaznaczając pole wyboru po lewej stronie folderu.</span><span class="sxs-lookup"><span data-stu-id="b71b2-205">Select the HDInsight cluster storage root by selecting the checkbox on the left of the folder.</span></span> <span data-ttu-id="b71b2-206">Zgodnie z zrzut ekranu starszym katalogu głównego magazynu klastra jest __/klastrów__ folder określony podczas zaznaczania usługi Data Lake Store jako domyślnego magazynu.</span><span class="sxs-lookup"><span data-stu-id="b71b2-206">According to the screenshot earlier, the cluster storage root is __/clusters__ folder that you specified while selecting the Data Lake Store as default storage.</span></span>
3. <span data-ttu-id="b71b2-207">Ustaw uprawnienia do folderu.</span><span class="sxs-lookup"><span data-stu-id="b71b2-207">Set the permissions on the folder.</span></span>  <span data-ttu-id="b71b2-208">Domyślnie do odczytu, zapisu i wykonywania wybrane są.</span><span class="sxs-lookup"><span data-stu-id="b71b2-208">By default, read, write, and execute are all selected.</span></span>
4. <span data-ttu-id="b71b2-209">Kliknij przycisk **wybierz** w dolnej części strony.</span><span class="sxs-lookup"><span data-stu-id="b71b2-209">Click **Select** on the bottom of the page.</span></span>
5. <span data-ttu-id="b71b2-210">Kliknij pozycję **Run** (Uruchom).</span><span class="sxs-lookup"><span data-stu-id="b71b2-210">Click **Run**.</span></span>
6. <span data-ttu-id="b71b2-211">Kliknij przycisk **Gotowe**.</span><span class="sxs-lookup"><span data-stu-id="b71b2-211">Click **Done**.</span></span>

<span data-ttu-id="b71b2-212">Jeśli korzystasz z usługi Data Lake Store jako dodatkowego magazynu, należy przypisać uprawnienia tylko do folderów, które chcesz uzyskać dostęp z klastrem usługi HDInsight.</span><span class="sxs-lookup"><span data-stu-id="b71b2-212">If you are using Data Lake Store as additional storage, you must assign permission only for the folders that you want to access from the HDInsight cluster.</span></span> <span data-ttu-id="b71b2-213">Na przykład na poniższym zrzucie ekranu, należy zapewnić dostęp tylko do **hdiaddonstorage** folderu w ramach konta usługi Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b71b2-213">For example, in the screenshot below, you provide access only to **hdiaddonstorage** folder in a Data Lake Store account.</span></span>

<span data-ttu-id="b71b2-214">![Przypisz uprawnienia główna usługi klastra usługi HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3-1.png "przypisać uprawnienia głównej usługi w klastrze usługi HDInsight")</span><span class="sxs-lookup"><span data-stu-id="b71b2-214">![Assign service principal permissions to the HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3-1.png "Assign service principal permissions to the HDInsight cluster")</span></span>


## <a name="verify-cluster-set-up"></a><span data-ttu-id="b71b2-215">Sprawdź ustawienia klastra</span><span class="sxs-lookup"><span data-stu-id="b71b2-215">Verify cluster set up</span></span>

<span data-ttu-id="b71b2-216">Po zakończeniu instalacji klastra, w bloku klastra sprawdź wyniki, wykonując jedną lub obie następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="b71b2-216">After the cluster setup is complete, on the cluster blade, verify your results by doing either or both of the following steps:</span></span>

* <span data-ttu-id="b71b2-217">Aby zweryfikować konta usługi Data Lake Store określonego skojarzony magazyn dla klastra, kliknij przycisk **kont magazynu** w okienku po lewej stronie.</span><span class="sxs-lookup"><span data-stu-id="b71b2-217">To verify that the associated storage for the cluster is the Data Lake Store account that you specified, click **Storage accounts** in the left pane.</span></span>

    <span data-ttu-id="b71b2-218">![Dodaj nazwy głównej usługi w klastrze usługi HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6-1.png "Dodaj nazwy głównej usługi w klastrze usługi HDInsight")</span><span class="sxs-lookup"><span data-stu-id="b71b2-218">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6-1.png "Add service principal to HDInsight cluster")</span></span>

* <span data-ttu-id="b71b2-219">Aby sprawdzić, czy nazwy głównej usługi jest prawidłowo skojarzony z klastrem usługi HDInsight, kliknij przycisk **dostępu do usługi Data Lake Store** w okienku po lewej stronie.</span><span class="sxs-lookup"><span data-stu-id="b71b2-219">To verify that the service principal is correctly associated with the HDInsight cluster, click **Data Lake Store access** in the left pane.</span></span>

    <span data-ttu-id="b71b2-220">![Dodaj nazwy głównej usługi w klastrze usługi HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6.png "Dodaj nazwy głównej usługi w klastrze usługi HDInsight")</span><span class="sxs-lookup"><span data-stu-id="b71b2-220">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6.png "Add service principal to HDInsight cluster")</span></span>


## <a name="examples"></a><span data-ttu-id="b71b2-221">Przykłady</span><span class="sxs-lookup"><span data-stu-id="b71b2-221">Examples</span></span>

<span data-ttu-id="b71b2-222">Po skonfigurowaniu klastra z usługą Data Lake Store jako magazynu dotyczą te przykłady sposobu korzystania z klastra usługi HDInsight do analizy danych, który jest przechowywany w usłudze Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b71b2-222">After you have set up the cluster with Data Lake Store as your storage, refer to these examples of how to use HDInsight cluster to analyze the data that's stored in Data Lake Store.</span></span>

### <a name="run-a-hive-query-against-data-in-a-data-lake-store-as-primary-storage"></a><span data-ttu-id="b71b2-223">Uruchomienie zapytania programu Hive względem danych w usłudze Data Lake Store (jako podstawowy magazyn)</span><span class="sxs-lookup"><span data-stu-id="b71b2-223">Run a Hive query against data in a Data Lake Store (as primary storage)</span></span>

<span data-ttu-id="b71b2-224">Aby uruchomić zapytanie Hive, użyj interfejsu widoki Hive w portalu Ambari.</span><span class="sxs-lookup"><span data-stu-id="b71b2-224">To run a Hive query, use the Hive views interface in the Ambari portal.</span></span> <span data-ttu-id="b71b2-225">Aby uzyskać instrukcje dotyczące sposobu używania widoki Hive narzędzia Ambari, zobacz [użyć widoku Hive z usługą Hadoop w usłudze HDInsight](../hdinsight/hdinsight-hadoop-use-hive-ambari-view.md).</span><span class="sxs-lookup"><span data-stu-id="b71b2-225">For instructions on how to use Ambari Hive views, see [Use the Hive View with Hadoop in HDInsight](../hdinsight/hdinsight-hadoop-use-hive-ambari-view.md).</span></span>

<span data-ttu-id="b71b2-226">Podczas pracy z danymi w usłudze Data Lake Store, istnieje kilka ciągów, aby zmienić.</span><span class="sxs-lookup"><span data-stu-id="b71b2-226">When you work with data in a Data Lake Store, there are a few strings to change.</span></span>

<span data-ttu-id="b71b2-227">Jeśli używasz, na przykład klaster utworzony za pomocą usługi Data Lake Store jako podstawowy magazyn jest ścieżka do danych: *adl: / / < data_lake_store_account_name > /azuredatalakestore.net/path/to/file*.</span><span class="sxs-lookup"><span data-stu-id="b71b2-227">If you use, for example, the cluster that you created with Data Lake Store as primary storage, the path to the data is: *adl://<data_lake_store_account_name>/azuredatalakestore.net/path/to/file*.</span></span> <span data-ttu-id="b71b2-228">Zapytania programu Hive, aby utworzyć tabelę z przykładowych danych, które są przechowywane na koncie usługi Data Lake Store wygląda następująca instrukcja:</span><span class="sxs-lookup"><span data-stu-id="b71b2-228">A Hive query to create a table from sample data that's stored in the Data Lake Store account looks like the following statement:</span></span>

    CREATE EXTERNAL TABLE websitelog (str string) LOCATION 'adl://hdiadlsstorage.azuredatalakestore.net/clusters/myhdiadlcluster/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/'

<span data-ttu-id="b71b2-229">Opisy:</span><span class="sxs-lookup"><span data-stu-id="b71b2-229">Descriptions:</span></span>
* <span data-ttu-id="b71b2-230">`adl://hdiadlstorage.azuredatalakestore.net/`jest elementem głównym na koncie usługi Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b71b2-230">`adl://hdiadlstorage.azuredatalakestore.net/` is the root of the Data Lake Store account.</span></span>
* <span data-ttu-id="b71b2-231">`/clusters/myhdiadlcluster`jest elementem głównym danych klastra, które można określić podczas tworzenia klastra.</span><span class="sxs-lookup"><span data-stu-id="b71b2-231">`/clusters/myhdiadlcluster` is the root of the cluster data that you specified while creating the cluster.</span></span>
* <span data-ttu-id="b71b2-232">`/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/`jest to lokalizacja przykładowy plik, który został użyty w zapytaniu.</span><span class="sxs-lookup"><span data-stu-id="b71b2-232">`/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/` is the location of the sample file that you used in the query.</span></span>

### <a name="run-a-hive-query-against-data-in-a-data-lake-store-as-additional-storage"></a><span data-ttu-id="b71b2-233">Uruchamianie zapytań programu Hive względem danych w usłudze Data Lake Store (jako dodatkowego magazynu)</span><span class="sxs-lookup"><span data-stu-id="b71b2-233">Run a Hive query against data in a Data Lake Store (as additional storage)</span></span>

<span data-ttu-id="b71b2-234">Jeśli utworzony klaster używa magazynu obiektów Blob jako domyślny magazyn, przykładowych danych nie znajduje się na koncie Azure Data Lake Store, który jest używany jako dodatkowy magazyn.</span><span class="sxs-lookup"><span data-stu-id="b71b2-234">If the cluster that you created uses Blob storage as default storage, the sample data is not contained in the Azure Data Lake Store account that's used as additional storage.</span></span> <span data-ttu-id="b71b2-235">W takim przypadku najpierw przenieść dane z magazynu obiektów Blob do usługi Data Lake Store, a następnie uruchom zapytania, jak pokazano w poprzednim przykładzie.</span><span class="sxs-lookup"><span data-stu-id="b71b2-235">In such a case, first transfer the data from Blob storage to the Data Lake Store, and then run the queries as shown in the preceding example.</span></span>

<span data-ttu-id="b71b2-236">Aby uzyskać informacje dotyczące kopiowania danych z magazynu obiektów Blob do usługi Data Lake Store zobacz następujące artykuły:</span><span class="sxs-lookup"><span data-stu-id="b71b2-236">For information on how to copy data from Blob storage to a Data Lake Store, see the following articles:</span></span>

* [<span data-ttu-id="b71b2-237">Kopiowanie danych między obiektów blob magazynu Azure i usługi Data Lake Store za pomocą narzędzia Distcp</span><span class="sxs-lookup"><span data-stu-id="b71b2-237">Use Distcp to copy data between Azure Storage blobs and Data Lake Store</span></span>](data-lake-store-copy-data-wasb-distcp.md)
* [<span data-ttu-id="b71b2-238">Użyj AdlCopy, aby skopiować dane z obiektów blob magazynu Azure do usługi Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b71b2-238">Use AdlCopy to copy data from Azure Storage blobs to Data Lake Store</span></span>](data-lake-store-copy-data-azure-storage-blob.md)

### <a name="use-data-lake-store-with-a-spark-cluster"></a><span data-ttu-id="b71b2-239">Użyj Data Lake Store z klastra Spark</span><span class="sxs-lookup"><span data-stu-id="b71b2-239">Use Data Lake Store with a Spark cluster</span></span>
<span data-ttu-id="b71b2-240">Klaster Spark służy do uruchomienia zadań Spark na dane, które są przechowywane w usłudze Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b71b2-240">You can use a Spark cluster to run Spark jobs on data that is stored in a Data Lake Store.</span></span> <span data-ttu-id="b71b2-241">Aby uzyskać więcej informacji, zobacz [klastra Spark w usłudze HDInsight używany do analizowania danych w usłudze Data Lake Store](../hdinsight/hdinsight-apache-spark-use-with-data-lake-store.md).</span><span class="sxs-lookup"><span data-stu-id="b71b2-241">For more information, see [Use HDInsight Spark cluster to analyze data in Data Lake Store](../hdinsight/hdinsight-apache-spark-use-with-data-lake-store.md).</span></span>


### <a name="use-data-lake-store-in-a-storm-topology"></a><span data-ttu-id="b71b2-242">Użyj Data Lake Store w topologii Storm</span><span class="sxs-lookup"><span data-stu-id="b71b2-242">Use Data Lake Store in a Storm topology</span></span>
<span data-ttu-id="b71b2-243">Data Lake Store służy do zapisywania danych z topologii Storm.</span><span class="sxs-lookup"><span data-stu-id="b71b2-243">You can use the Data Lake Store to write data from a Storm topology.</span></span> <span data-ttu-id="b71b2-244">Aby uzyskać instrukcje dotyczące sposobu uzyskania tego scenariusza, zobacz [użycia usługi Azure Data Lake Store z systemu Apache Storm z usługą HDInsight](../hdinsight/hdinsight-storm-write-data-lake-store.md).</span><span class="sxs-lookup"><span data-stu-id="b71b2-244">For instructions on how to achieve this scenario, see [Use Azure Data Lake Store with Apache Storm with HDInsight](../hdinsight/hdinsight-storm-write-data-lake-store.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="b71b2-245">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="b71b2-245">See also</span></span>
* [<span data-ttu-id="b71b2-246">Środowiska PowerShell: Tworzenie klastra usługi HDInsight do użycia usługi Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b71b2-246">PowerShell: Create an HDInsight cluster to use Data Lake Store</span></span>](data-lake-store-hdinsight-hadoop-use-powershell.md)

[makecert]: https://msdn.microsoft.com/library/windows/desktop/ff548309(v=vs.85).aspx
[pvk2pfx]: https://msdn.microsoft.com/library/windows/desktop/ff550672(v=vs.85).aspx
