---
title: "aaaAzure wytyczne dostrajania wydajności sklepu Lake danych | Dokumentacja firmy Microsoft"
description: "Dostosowywanie wskazówki dotyczące wydajności usługi Azure Data Lake Store"
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: cgronlun
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 06/30/2017
ms.author: stewu
ms.openlocfilehash: 939faa068c0f81d18d9533956f4d336bc4d0cbe3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-azure-data-lake-store-for-performance"></a><span data-ttu-id="18b05-103">Dostrajanie wydajności usługi Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="18b05-103">Tuning Azure Data Lake Store for performance</span></span>

<span data-ttu-id="18b05-104">Data Lake Store obsługuje wysokiej przepustowości dla analizy intensywne operacje We/Wy i przenoszenia danych.</span><span class="sxs-lookup"><span data-stu-id="18b05-104">Data Lake Store supports high-throughput for I/O intensive analytics and data movement.</span></span>  <span data-ttu-id="18b05-105">W usłudze Azure Data Lake Store przy użyciu wszystkich dostępnych przepływności — Witaj ilość danych, które mogły być odczytywane i zapisywane na sekundę — jest ważna tooget hello najlepszą wydajność.</span><span class="sxs-lookup"><span data-stu-id="18b05-105">In Azure Data Lake Store, using all available throughput – hello amount of data that can be read or written per second – is important tooget hello best performance.</span></span>  <span data-ttu-id="18b05-106">To jest osiągane, wykonując dowolną liczbę operacji odczytu i zapisu równoległe, jak to możliwe.</span><span class="sxs-lookup"><span data-stu-id="18b05-106">This is achieved by performing as many reads and writes in parallel as possible.</span></span>

![Wydajność usługi Data Lake Store](./media/data-lake-store-performance-tuning-guidance/throughput.png)

<span data-ttu-id="18b05-108">Azure Data Lake Store można skalować przepływność tooprovide hello niezbędne dla wszystkich scenariuszy analizy.</span><span class="sxs-lookup"><span data-stu-id="18b05-108">Azure Data Lake Store can scale tooprovide hello necessary throughput for all analytics scenario.</span></span> <span data-ttu-id="18b05-109">Domyślnie konto usługi Azure Data Lake Store zapewnia automatycznie za mało przepływności toomeet hello potrzebom szerokiego kategorii przypadków użycia.</span><span class="sxs-lookup"><span data-stu-id="18b05-109">By default, an Azure Data Lake Store account provides automatically enough throughput toomeet hello needs of a broad category of use cases.</span></span> <span data-ttu-id="18b05-110">W przypadkach hello gdzie klienci funkcjonowaniem hello domyślny limit hello koncie ADLS może być skonfigurowany tooprovide więcej przepustowości kontaktując się z pomocą techniczną firmy Microsoft.</span><span class="sxs-lookup"><span data-stu-id="18b05-110">For hello cases where customers run into hello default limit, hello ADLS account can be configured tooprovide more throughput by contacting Microsoft support.</span></span>

## <a name="data-ingestion"></a><span data-ttu-id="18b05-111">Wprowadzanie danych</span><span class="sxs-lookup"><span data-stu-id="18b05-111">Data ingestion</span></span>

<span data-ttu-id="18b05-112">Podczas pobierania danych z tooADLS systemu źródłowego, ważne jest tooconsider, który hello sprzętu źródłowego, sprzęt sieciowy źródła i tooADLS łączności sieciowej może być "wąskim gardłem" hello.</span><span class="sxs-lookup"><span data-stu-id="18b05-112">When ingesting data from a source system tooADLS, it is important tooconsider that hello source hardware, source network hardware, and network connectivity tooADLS can be hello bottleneck.</span></span>  

![Wydajność usługi Data Lake Store](./media/data-lake-store-performance-tuning-guidance/bottleneck.png)

<span data-ttu-id="18b05-114">Jest ważne tooensure, który hello przenoszenia danych nie ma wpływu na te czynniki.</span><span class="sxs-lookup"><span data-stu-id="18b05-114">It is important tooensure that hello data movement is not affected by these factors.</span></span>

### <a name="source-hardware"></a><span data-ttu-id="18b05-115">Źródło sprzętu</span><span class="sxs-lookup"><span data-stu-id="18b05-115">Source Hardware</span></span>

<span data-ttu-id="18b05-116">Czy korzystasz z maszyny lokalnej lub maszyn wirtualnych na platformie Azure, należy wybrać uważnie hello jest odpowiedni sprzęt.</span><span class="sxs-lookup"><span data-stu-id="18b05-116">Whether you are using on-premises machines or VMs in Azure, you should carefully select hello appropriate hardware.</span></span> <span data-ttu-id="18b05-117">Sprzętu z dysku źródłowego preferowane tooHDDs dyski SSD i wybierz sprzętu dysku z jednostkami szybsze.</span><span class="sxs-lookup"><span data-stu-id="18b05-117">For Source Disk Hardware, prefer SSDs tooHDDs and pick disk hardware with faster spindles.</span></span> <span data-ttu-id="18b05-118">Dla źródła sprzętu sieciowego należy używać hello najszybsze karty sieciowe.</span><span class="sxs-lookup"><span data-stu-id="18b05-118">For Source Network Hardware, use hello fastest NICs possible.</span></span>  <span data-ttu-id="18b05-119">Na platformie Azure firma Microsoft zaleca D14 maszynach wirtualnych platformy Azure, którym hello odpowiedniego zaawansowanym dysku i sprzęt sieciowy.</span><span class="sxs-lookup"><span data-stu-id="18b05-119">On Azure, we recommend Azure D14 VMs which have hello appropriately powerful disk and networking hardware.</span></span>

### <a name="network-connectivity-tooazure-data-lake-store"></a><span data-ttu-id="18b05-120">Sieciowe połączenie tooAzure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="18b05-120">Network Connectivity tooAzure Data Lake Store</span></span>

<span data-ttu-id="18b05-121">Hello połączenie sieciowe między źródła danych i usługi Azure Data Lake store może być czasem hello "wąskie gardło".</span><span class="sxs-lookup"><span data-stu-id="18b05-121">hello network connectivity between your source data and Azure Data Lake store can sometimes be hello bottleneck.</span></span> <span data-ttu-id="18b05-122">Jeśli źródło danych działa lokalnie, należy rozważyć użycie dedykowanego łącza z [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span><span class="sxs-lookup"><span data-stu-id="18b05-122">When your source data is On-Premises, consider using a dedicated link with [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span></span> <span data-ttu-id="18b05-123">Jeśli źródło danych jest na platformie Azure, wydajność hello jest najlepsza, gdy dane hello są hello tego samego regionu Azure hello usługi Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="18b05-123">If your source data is in Azure, hello performance will be best when hello data is in hello same Azure region as hello Data Lake Store.</span></span>

### <a name="configure-data-ingestion-tools-for-maximum-parallelization"></a><span data-ttu-id="18b05-124">Konfigurowanie narzędzia wprowadzanie danych do maksymalnego paralelizacja</span><span class="sxs-lookup"><span data-stu-id="18b05-124">Configure Data Ingestion tools for maximum parallelization</span></span>

<span data-ttu-id="18b05-125">Po usunąć hello źródła sprzętu i wąskich gardeł łączności powyżej sieci są gotowe tooconfigure narzędziami wprowadzanie.</span><span class="sxs-lookup"><span data-stu-id="18b05-125">Once you have addressed hello source hardware and network connectivity bottlenecks above, you are ready tooconfigure your ingestion tools.</span></span> <span data-ttu-id="18b05-126">Hello poniższej tabeli zestawiono hello ustawień klucza dla kilku popularnych wprowadzanie narzędzi i zapewnia szczegółowe wydajność dostrajanie artykułów dla nich.</span><span class="sxs-lookup"><span data-stu-id="18b05-126">hello following table summarizes hello key settings for several popular ingestion tools and provides in-depth performance tuning articles for them.</span></span>  <span data-ttu-id="18b05-127">odwiedź witrynę toolearn więcej na temat narzędzia toouse dla danego scenariusza [artykułu](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span><span class="sxs-lookup"><span data-stu-id="18b05-127">toolearn more about which tool toouse for your scenario, visit this [article](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span></span>

| <span data-ttu-id="18b05-128">Narzędzie</span><span class="sxs-lookup"><span data-stu-id="18b05-128">Tool</span></span>               | <span data-ttu-id="18b05-129">Ustawienia</span><span class="sxs-lookup"><span data-stu-id="18b05-129">Settings</span></span>     | <span data-ttu-id="18b05-130">Więcej informacji</span><span class="sxs-lookup"><span data-stu-id="18b05-130">More Details</span></span>                                                                 |
|--------------------|------------------------------------------------------|------------------------------|
| <span data-ttu-id="18b05-131">PowerShell</span><span class="sxs-lookup"><span data-stu-id="18b05-131">Powershell</span></span>       | <span data-ttu-id="18b05-132">PerFileThreadCount, ConcurrentFileCount</span><span class="sxs-lookup"><span data-stu-id="18b05-132">PerFileThreadCount, ConcurrentFileCount</span></span> |  [<span data-ttu-id="18b05-133">Link</span><span class="sxs-lookup"><span data-stu-id="18b05-133">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-get-started-powershell#performance-guidance-while-using-powershell)   |
| <span data-ttu-id="18b05-134">AdlCopy</span><span class="sxs-lookup"><span data-stu-id="18b05-134">AdlCopy</span></span>    | <span data-ttu-id="18b05-135">Usługa Azure Data Lake Analytics jednostki</span><span class="sxs-lookup"><span data-stu-id="18b05-135">Azure Data Lake Analytics units</span></span>  |   [<span data-ttu-id="18b05-136">Link</span><span class="sxs-lookup"><span data-stu-id="18b05-136">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-azure-storage-blob#performance-considerations-for-using-adlcopy)         |
| <span data-ttu-id="18b05-137">Narzędzia DistCp</span><span class="sxs-lookup"><span data-stu-id="18b05-137">DistCp</span></span>            | <span data-ttu-id="18b05-138">-m (mapowanie)</span><span class="sxs-lookup"><span data-stu-id="18b05-138">-m (mapper)</span></span>   | [<span data-ttu-id="18b05-139">Link</span><span class="sxs-lookup"><span data-stu-id="18b05-139">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-wasb-distcp#performance-considerations-while-using-distcp)                             |
| <span data-ttu-id="18b05-140">Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="18b05-140">Azure Data Factory</span></span>| <span data-ttu-id="18b05-141">parallelCopies</span><span class="sxs-lookup"><span data-stu-id="18b05-141">parallelCopies</span></span>    | [<span data-ttu-id="18b05-142">Link</span><span class="sxs-lookup"><span data-stu-id="18b05-142">Link</span></span>](../data-factory/data-factory-copy-activity-performance.md)                          |
| <span data-ttu-id="18b05-143">Sqoop</span><span class="sxs-lookup"><span data-stu-id="18b05-143">Sqoop</span></span>           | <span data-ttu-id="18b05-144">FS.Azure.Block.size, -m (mapowanie)</span><span class="sxs-lookup"><span data-stu-id="18b05-144">fs.azure.block.size, -m (mapper)</span></span>    |   [<span data-ttu-id="18b05-145">Link</span><span class="sxs-lookup"><span data-stu-id="18b05-145">Link</span></span>](https://blogs.msdn.microsoft.com/bigdatasupport/2015/02/17/sqoop-job-performance-tuning-in-hdinsight-hadoop/)        |

## <a name="structure-your-data-set"></a><span data-ttu-id="18b05-146">Struktury zestawu danych</span><span class="sxs-lookup"><span data-stu-id="18b05-146">Structure your data set</span></span>

<span data-ttu-id="18b05-147">Gdy dane są przechowywane w usłudze Data Lake Store, rozmiar pliku hello, liczbę plików i struktury folderów będzie mieć wpływ na wydajność.</span><span class="sxs-lookup"><span data-stu-id="18b05-147">When data is stored in Data Lake Store, hello file size, number of files, and folder structure have an impact on performance.</span></span>  <span data-ttu-id="18b05-148">Witaj poniższej sekcji opisano najlepsze rozwiązania w następujących obszarach.</span><span class="sxs-lookup"><span data-stu-id="18b05-148">hello following section describes best practices in these areas.</span></span>  

### <a name="file-size"></a><span data-ttu-id="18b05-149">Rozmiar pliku</span><span class="sxs-lookup"><span data-stu-id="18b05-149">File size</span></span>

<span data-ttu-id="18b05-150">Aparaty analizy, takie jak usługi HDInsight i usługą Azure Data Lake Analytics ma zwykle, obciążenie dla plików.</span><span class="sxs-lookup"><span data-stu-id="18b05-150">Typically, analytics engines such as HDInsight and Azure Data Lake Analytics have a per-file overhead.</span></span>  <span data-ttu-id="18b05-151">Jeśli dane są przechowywane jako wiele małych plików, może to negatywnie wpłynąć na wydajność.</span><span class="sxs-lookup"><span data-stu-id="18b05-151">If you store your data as many small files, this can negatively affect performance.</span></span>  

<span data-ttu-id="18b05-152">Ogólnie rzecz biorąc organizowania danych w większe pliki o rozmiarze w celu poprawy wydajności.</span><span class="sxs-lookup"><span data-stu-id="18b05-152">In general, organize your data into larger sized files for better performance.</span></span>  <span data-ttu-id="18b05-153">Jako zasadą organizowanie zestawów danych w plikach 256MB lub większy.</span><span class="sxs-lookup"><span data-stu-id="18b05-153">As a rule of thumb, organize data sets in files of 256MB or larger.</span></span> <span data-ttu-id="18b05-154">W niektórych przypadkach, takich jak obrazy i danych binarnych nie jest możliwe tooprocess ich równolegle.</span><span class="sxs-lookup"><span data-stu-id="18b05-154">In some cases such as images and binary data, it is not possible tooprocess them in parallel.</span></span>  <span data-ttu-id="18b05-155">W takich przypadkach zaleca tookeep poszczególnych plików mniej niż 2GB.</span><span class="sxs-lookup"><span data-stu-id="18b05-155">In these cases, it is recommended tookeep individual files under 2GB.</span></span>

<span data-ttu-id="18b05-156">Czasami potoki danych mają ograniczoną kontrolę nad hello nieprzetworzone dane, które zawiera wiele małych plików.</span><span class="sxs-lookup"><span data-stu-id="18b05-156">Sometimes, data pipelines have limited control over hello raw data which has lots of small files.</span></span>  <span data-ttu-id="18b05-157">Zalecane jest toohave "gotowania" procesu, który generuje większe pliki toouse do podrzędnych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="18b05-157">It is recommended toohave a “cooking” process that generates larger files toouse for downstream applications.</span></span>  

### <a name="organizing-time-series-data-in-folders"></a><span data-ttu-id="18b05-158">Organizowanie danych szeregów czasowych w folderach</span><span class="sxs-lookup"><span data-stu-id="18b05-158">Organizing Time Series data in folders</span></span>

<span data-ttu-id="18b05-159">W przypadku obciążeń Hive i ADLA partycji oczyszczania danych szeregu czasowego może pomóc niektórych kwerend odczytać tylko podzestaw danych hello, co zwiększa wydajność.</span><span class="sxs-lookup"><span data-stu-id="18b05-159">For Hive and ADLA workloads, partition pruning of time-series data can help some queries read only a subset of hello data which improves performance.</span></span>    

<span data-ttu-id="18b05-160">Potoki, które pozyskiwania danych szeregu czasowego, często umieść ich pliki z bardzo strukturalnych nazewnictwa plików i folderów.</span><span class="sxs-lookup"><span data-stu-id="18b05-160">Those pipelines that ingest time-series data, often place their files with a very structured naming for files and folders.</span></span> <span data-ttu-id="18b05-161">Poniżej znajdują się bardzo typowym przykładem, który widzimy dla danych, które mają strukturę według daty:</span><span class="sxs-lookup"><span data-stu-id="18b05-161">Below is a very common example we see for data that is structured by date:</span></span>

    \DataSet\YYYY\MM\DD\datafile_YYYY_MM_DD.tsv

<span data-ttu-id="18b05-162">Należy zauważyć, że są wyświetlane informacje datetime hello folderów oraz w nazwie pliku hello.</span><span class="sxs-lookup"><span data-stu-id="18b05-162">Notice that hello datetime information appears both as folders and in hello filename.</span></span>

<span data-ttu-id="18b05-163">Daty i godziny hello Oto wspólnego wzorca</span><span class="sxs-lookup"><span data-stu-id="18b05-163">For date and time, hello following is a common pattern</span></span>

    \DataSet\YYYY\MM\DD\HH\mm\datafile_YYYY_MM_DD_HH_mm.tsv

<span data-ttu-id="18b05-164">Ponownie hello wybrane z organizacją folderu i pliku hello powinien optymalizować hello większych plików i uzasadnione liczba plików w każdym folderze.</span><span class="sxs-lookup"><span data-stu-id="18b05-164">Again, hello choice you make with hello folder and file organization should optimize for hello larger file sizes and a reasonable number of files in each folder.</span></span>

## <a name="optimizing-io-intensive-jobs-on-hadoop-and-spark-workloads-on-hdinsight"></a><span data-ttu-id="18b05-165">Optymalizacja znacznym zadania we/wy na obciążenie Hadoop i Spark w usłudze HDInsight</span><span class="sxs-lookup"><span data-stu-id="18b05-165">Optimizing I/O intensive jobs on Hadoop and Spark workloads on HDInsight</span></span>

<span data-ttu-id="18b05-166">Zadania dzielą się na powitania następujące trzy kategorie:</span><span class="sxs-lookup"><span data-stu-id="18b05-166">Jobs fall into one of hello following three categories:</span></span>

* <span data-ttu-id="18b05-167">**Procesora CPU.**</span><span class="sxs-lookup"><span data-stu-id="18b05-167">**CPU intensive.**</span></span>  <span data-ttu-id="18b05-168">Te zadania mają obliczeń długie czasy wraz z minimalnym czasem we/wy.</span><span class="sxs-lookup"><span data-stu-id="18b05-168">These jobs have long computation times with minimal I/O times.</span></span>  <span data-ttu-id="18b05-169">Przykładami uczenie maszynowe i przetwarzania zadań języka naturalnego.</span><span class="sxs-lookup"><span data-stu-id="18b05-169">Examples include machine learning and natural language processing jobs.</span></span>  
* <span data-ttu-id="18b05-170">**Pamięci.**</span><span class="sxs-lookup"><span data-stu-id="18b05-170">**Memory intensive.**</span></span>  <span data-ttu-id="18b05-171">Te zadania korzystają z dużej ilości pamięci.</span><span class="sxs-lookup"><span data-stu-id="18b05-171">These jobs use lots of memory.</span></span>  <span data-ttu-id="18b05-172">Przykładami PageRank i zadania usługi analiza w czasie rzeczywistym.</span><span class="sxs-lookup"><span data-stu-id="18b05-172">Examples include PageRank and real-time analytics jobs.</span></span>  
* <span data-ttu-id="18b05-173">**Operacji We/Wy.**</span><span class="sxs-lookup"><span data-stu-id="18b05-173">**I/O intensive.**</span></span>  <span data-ttu-id="18b05-174">Te zadania spędzają większość czasu wykonywania operacji We/Wy.</span><span class="sxs-lookup"><span data-stu-id="18b05-174">These jobs spend most of their time doing I/O.</span></span>  <span data-ttu-id="18b05-175">Typowym przykładem jest zadanie kopiowania, które tylko do odczytu i zapisu.</span><span class="sxs-lookup"><span data-stu-id="18b05-175">A common example is a copy job which does only read and write operations.</span></span>  <span data-ttu-id="18b05-176">Inne przykłady zadania przygotowywania danych, które odczyt dużą ilość danych, wykonuje pewne przekształcania danych, a następnie zapisuje hello magazynu zapasowego toohello danych.</span><span class="sxs-lookup"><span data-stu-id="18b05-176">Other examples include data preparation jobs that read a lot of data, performs some data transformation, and then writes hello data back toohello store.</span></span>  

<span data-ttu-id="18b05-177">następujące wskazówki Hello jest tylko odpowiednie tooI/O znacznym zadania.</span><span class="sxs-lookup"><span data-stu-id="18b05-177">hello following guidance is only applicable tooI/O intensive jobs.</span></span>

### <a name="general-considerations-for-an-hdinsight-cluster"></a><span data-ttu-id="18b05-178">Ogólne zagadnienia dotyczące klastra usługi HDInsight</span><span class="sxs-lookup"><span data-stu-id="18b05-178">General Considerations for an HDInsight cluster</span></span>

* <span data-ttu-id="18b05-179">**Wersje usługi HDInsight.**</span><span class="sxs-lookup"><span data-stu-id="18b05-179">**HDInsight versions.**</span></span> <span data-ttu-id="18b05-180">Aby uzyskać najlepszą wydajność Użyj hello najnowszej wersji usługi hdinsight.</span><span class="sxs-lookup"><span data-stu-id="18b05-180">For best performance, use hello latest release of HDInsight.</span></span>
* <span data-ttu-id="18b05-181">**Regiony.**</span><span class="sxs-lookup"><span data-stu-id="18b05-181">**Regions.**</span></span> <span data-ttu-id="18b05-182">Umieść hello Data Lake Store w hello tego samego regionu hello klastra usługi HDInsight.</span><span class="sxs-lookup"><span data-stu-id="18b05-182">Place hello Data Lake Store in hello same region as hello HDInsight cluster.</span></span>  

<span data-ttu-id="18b05-183">Klaster usługi HDInsight składa się z dwóch węzłów głównych i niektóre węzły procesów roboczych.</span><span class="sxs-lookup"><span data-stu-id="18b05-183">An HDInsight cluster is composed of two head nodes and some worker nodes.</span></span> <span data-ttu-id="18b05-184">Każdego węzła procesu roboczego zawiera określonej liczby rdzeni i ilości pamięci, który jest określany przez hello typu maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="18b05-184">Each worker node provides a specific number of cores and memory, which is determined by hello VM-type.</span></span>  <span data-ttu-id="18b05-185">Podczas wykonywania zadania, YARN jest moduł negocjowania zasobów hello przydzielanej hello dostępnej pamięci i kontenery toocreate rdzeni.</span><span class="sxs-lookup"><span data-stu-id="18b05-185">When running a job, YARN is hello resource negotiator that allocates hello available memory and cores toocreate containers.</span></span>  <span data-ttu-id="18b05-186">Każdy kontener uruchamia hello zadania wymagane toocomplete hello zadania.</span><span class="sxs-lookup"><span data-stu-id="18b05-186">Each container runs hello tasks needed toocomplete hello job.</span></span>  <span data-ttu-id="18b05-187">Kontenery szybko uruchomić tooprocess równoległych zadań.</span><span class="sxs-lookup"><span data-stu-id="18b05-187">Containers run in parallel tooprocess tasks quickly.</span></span> <span data-ttu-id="18b05-188">W związku z tym lepsza wydajność, uruchamiając dowolną liczbę kontenerów równoległych, jak to możliwe.</span><span class="sxs-lookup"><span data-stu-id="18b05-188">Therefore, performance is improved by running as many parallel containers as possible.</span></span>

<span data-ttu-id="18b05-189">Istnieją trzy warstwy w ramach klastra usługi HDInsight, które mogą być tooincrease Zaczekaj hello liczbę kontenerów i korzystać wszystkie dostępne przepływności.</span><span class="sxs-lookup"><span data-stu-id="18b05-189">There are three layers within an HDInsight cluster that can be tuned tooincrease hello number of containers and use all available throughput.</span></span>  

* <span data-ttu-id="18b05-190">**W warstwie fizycznej**</span><span class="sxs-lookup"><span data-stu-id="18b05-190">**Physical layer**</span></span>
* <span data-ttu-id="18b05-191">**YARN warstwy**</span><span class="sxs-lookup"><span data-stu-id="18b05-191">**YARN layer**</span></span>
* <span data-ttu-id="18b05-192">**Obciążenie warstwy**</span><span class="sxs-lookup"><span data-stu-id="18b05-192">**Workload layer**</span></span>

### <a name="physical-layer"></a><span data-ttu-id="18b05-193">W warstwie fizycznej</span><span class="sxs-lookup"><span data-stu-id="18b05-193">Physical Layer</span></span>

<span data-ttu-id="18b05-194">**Uruchomienie klastra z więcej węzłów i/lub większy rozmiar maszyn wirtualnych.**</span><span class="sxs-lookup"><span data-stu-id="18b05-194">**Run cluster with more nodes and/or larger sized VMs.**</span></span>  <span data-ttu-id="18b05-195">Większego klastra spowoduje włączenie możesz toorun więcej kontenerów YARN pokazane na poniższej ilustracji hello.</span><span class="sxs-lookup"><span data-stu-id="18b05-195">A larger cluster will enable you toorun more YARN containers as shown in hello picture below.</span></span>

![Wydajność usługi Data Lake Store](./media/data-lake-store-performance-tuning-guidance/VM.png)

<span data-ttu-id="18b05-197">**Użyj maszyn wirtualnych z większej przepustowości sieci.**</span><span class="sxs-lookup"><span data-stu-id="18b05-197">**Use VMs with more network bandwidth.**</span></span>  <span data-ttu-id="18b05-198">Hello ilość przepustowości sieci może być wąskiego gardła, jeśli istnieje mniej przepustowości sieci niż przepływności usługi Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="18b05-198">hello amount of network bandwidth can be a bottleneck if there is less network bandwidth than Data Lake Store throughput.</span></span>  <span data-ttu-id="18b05-199">Różnych maszyn wirtualnych będą mieć różne rozmiary przepustowości sieci.</span><span class="sxs-lookup"><span data-stu-id="18b05-199">Different VMs will have varying network bandwidth sizes.</span></span>  <span data-ttu-id="18b05-200">Wybierz maszyny Wirtualnej — typ, który ma hello największa możliwa przepustowości.</span><span class="sxs-lookup"><span data-stu-id="18b05-200">Choose a VM-type that has hello largest possible network bandwidth.</span></span>

### <a name="yarn-layer"></a><span data-ttu-id="18b05-201">YARN warstwy</span><span class="sxs-lookup"><span data-stu-id="18b05-201">YARN Layer</span></span>

<span data-ttu-id="18b05-202">**Używanie mniejszych kontenerów YARN.**</span><span class="sxs-lookup"><span data-stu-id="18b05-202">**Use smaller YARN containers.**</span></span>  <span data-ttu-id="18b05-203">Zmniejszenie rozmiaru hello każdego toocreate kontenera YARN więcej kontenerów z hello tego samego ilość zasobów.</span><span class="sxs-lookup"><span data-stu-id="18b05-203">Reduce hello size of each YARN container toocreate more containers with hello same amount of resources.</span></span>

![Wydajność usługi Data Lake Store](./media/data-lake-store-performance-tuning-guidance/small-containers.png)

<span data-ttu-id="18b05-205">W zależności od obciążenia będą zawsze miały minimalny rozmiar kontenera YARN, który jest wymagany.</span><span class="sxs-lookup"><span data-stu-id="18b05-205">Depending on your workload, there will always be a minimum YARN container size that is needed.</span></span> <span data-ttu-id="18b05-206">W przypadku wybrania za mały kontener Twoje zadania będą uruchamiane w problemów braku pamięci.</span><span class="sxs-lookup"><span data-stu-id="18b05-206">If you pick too small a container, your jobs will run into out-of-memory issues.</span></span> <span data-ttu-id="18b05-207">Zazwyczaj kontenerów YARN nie powinien być mniejszy niż 1GB.</span><span class="sxs-lookup"><span data-stu-id="18b05-207">Typically YARN containers should be no smaller than 1GB.</span></span> <span data-ttu-id="18b05-208">Jest typowe toosee 3GB YARN kontenerów.</span><span class="sxs-lookup"><span data-stu-id="18b05-208">It’s common toosee 3GB YARN containers.</span></span> <span data-ttu-id="18b05-209">Dla niektórych zadań może być konieczne większe kontenery YARN.</span><span class="sxs-lookup"><span data-stu-id="18b05-209">For some workloads, you may need larger YARN containers.</span></span>  

<span data-ttu-id="18b05-210">**Zwiększ rdzeni w jednym YARN kontenera.**</span><span class="sxs-lookup"><span data-stu-id="18b05-210">**Increase cores per YARN container.**</span></span>  <span data-ttu-id="18b05-211">Zwiększ liczbę hello rdzeni przydzielone tooeach kontenera tooincrease hello liczby zadań wykonywanych w każdego kontenera.</span><span class="sxs-lookup"><span data-stu-id="18b05-211">Increase hello number of cores allocated tooeach container tooincrease hello number of parallel tasks that run in each container.</span></span>  <span data-ttu-id="18b05-212">Działa to w przypadku aplikacji, takich jak Spark, których uruchamianie wielu zadań na kontenera.</span><span class="sxs-lookup"><span data-stu-id="18b05-212">This works for applications like Spark which run multiple tasks per container.</span></span>  <span data-ttu-id="18b05-213">Dla aplikacji jak Hive, których uruchamianie pojedynczego wątku każdego kontenera jest lepsze toohave więcej kontenerów, a nie rdzeni na kontenera.</span><span class="sxs-lookup"><span data-stu-id="18b05-213">For applications like Hive which run a single thread in each container, it is better toohave more containers rather than more cores per container.</span></span>   

### <a name="workload-layer"></a><span data-ttu-id="18b05-214">Obciążenie warstwy</span><span class="sxs-lookup"><span data-stu-id="18b05-214">Workload Layer</span></span>

<span data-ttu-id="18b05-215">**Użyj wszystkich dostępnych kontenerów.**</span><span class="sxs-lookup"><span data-stu-id="18b05-215">**Use all available containers.**</span></span>  <span data-ttu-id="18b05-216">Ustaw hello liczbę zadań toobe równa lub większa niż liczba hello dostępne kontenery, tak, aby wszystkie zasoby są wykorzystywane.</span><span class="sxs-lookup"><span data-stu-id="18b05-216">Set hello number of tasks toobe equal or larger than hello number of available containers so that all resources are utilized.</span></span>

![Wydajność usługi Data Lake Store](./media/data-lake-store-performance-tuning-guidance/use-containers.png)

<span data-ttu-id="18b05-218">**Zadania zakończone niepowodzeniem są kosztowne.**</span><span class="sxs-lookup"><span data-stu-id="18b05-218">**Failed tasks are costly.**</span></span> <span data-ttu-id="18b05-219">Jeśli każde zadanie ma dużą ilość danych tooprocess, następnie niepowodzenia zadania powoduje kosztowne ponów próbę.</span><span class="sxs-lookup"><span data-stu-id="18b05-219">If each task has a large amount of data tooprocess, then failure of a task results in an expensive retry.</span></span>  <span data-ttu-id="18b05-220">Dlatego jest lepsze toocreate więcej zadań, z których każdy przetwarza niewielką ilość danych.</span><span class="sxs-lookup"><span data-stu-id="18b05-220">Therefore, it is better toocreate more tasks, each of which processes a small amount of data.</span></span>

<span data-ttu-id="18b05-221">W przypadku dodawania toohello ogólne wytyczne powyżej każda aplikacja ma różne parametry tootune dostępne dla tej konkretnej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="18b05-221">In addition toohello general guidelines above, each application has different parameters available tootune for that specific application.</span></span> <span data-ttu-id="18b05-222">Witaj w poniższej tabeli przedstawiono niektóre z hello parametrów i linki tooget wprowadzenie dostrajania wydajności dla każdej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="18b05-222">hello table below lists some of hello parameters and links tooget started with performance tuning for each application.</span></span>

| <span data-ttu-id="18b05-223">Obciążenie</span><span class="sxs-lookup"><span data-stu-id="18b05-223">Workload</span></span>               | <span data-ttu-id="18b05-224">Parametr tooset zadań</span><span class="sxs-lookup"><span data-stu-id="18b05-224">Parameter tooset tasks</span></span>                                                         |
|--------------------|-------------------------------------------------------------------------------------|
| [<span data-ttu-id="18b05-225">Platforma Spark w HDInisight</span><span class="sxs-lookup"><span data-stu-id="18b05-225">Spark on HDInisight</span></span>](data-lake-store-performance-tuning-spark.md)       | <ul><li><span data-ttu-id="18b05-226">Liczba modułów</span><span class="sxs-lookup"><span data-stu-id="18b05-226">Num-executors</span></span></li><li><span data-ttu-id="18b05-227">Moduł wykonujący pamięci</span><span class="sxs-lookup"><span data-stu-id="18b05-227">Executor-memory</span></span></li><li><span data-ttu-id="18b05-228">Moduł wykonujący rdzeni</span><span class="sxs-lookup"><span data-stu-id="18b05-228">Executor-cores</span></span></li></ul> |
| [<span data-ttu-id="18b05-229">Hive w usłudze HDInsight</span><span class="sxs-lookup"><span data-stu-id="18b05-229">Hive on HDInsight</span></span>](data-lake-store-performance-tuning-hive.md)    | <ul><li><span data-ttu-id="18b05-230">hive.tez.container.size</span><span class="sxs-lookup"><span data-stu-id="18b05-230">hive.tez.container.size</span></span></li></ul>         |
| [<span data-ttu-id="18b05-231">MapReduce w usłudze HDInsight</span><span class="sxs-lookup"><span data-stu-id="18b05-231">MapReduce on HDInsight</span></span>](data-lake-store-performance-tuning-mapreduce.md)            | <ul><li><span data-ttu-id="18b05-232">mapreduce.map.Memory</span><span class="sxs-lookup"><span data-stu-id="18b05-232">Mapreduce.map.memory</span></span></li><li><span data-ttu-id="18b05-233">Mapreduce.job.Maps</span><span class="sxs-lookup"><span data-stu-id="18b05-233">Mapreduce.job.maps</span></span></li><li><span data-ttu-id="18b05-234">mapreduce.Reduce.Memory</span><span class="sxs-lookup"><span data-stu-id="18b05-234">Mapreduce.reduce.memory</span></span></li><li><span data-ttu-id="18b05-235">Mapreduce.job.reduces</span><span class="sxs-lookup"><span data-stu-id="18b05-235">Mapreduce.job.reduces</span></span></li></ul> |
| [<span data-ttu-id="18b05-236">STORM w usłudze HDInsight</span><span class="sxs-lookup"><span data-stu-id="18b05-236">Storm on HDInsight</span></span>](data-lake-store-performance-tuning-storm.md)| <ul><li><span data-ttu-id="18b05-237">Liczba procesów roboczych</span><span class="sxs-lookup"><span data-stu-id="18b05-237">Number of worker processes</span></span></li><li><span data-ttu-id="18b05-238">Liczba wystąpień Moduł wykonujący spout</span><span class="sxs-lookup"><span data-stu-id="18b05-238">Number of spout executor instances</span></span></li><li><span data-ttu-id="18b05-239">Liczba wystąpień Moduł wykonujący bolt</span><span class="sxs-lookup"><span data-stu-id="18b05-239">Number of bolt executor instances</span></span> </li><li><span data-ttu-id="18b05-240">Liczba zadań spout</span><span class="sxs-lookup"><span data-stu-id="18b05-240">Number of spout tasks</span></span></li><li><span data-ttu-id="18b05-241">Liczba zadań bolt</span><span class="sxs-lookup"><span data-stu-id="18b05-241">Number of bolt tasks</span></span></li></ul>|

## <a name="see-also"></a><span data-ttu-id="18b05-242">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="18b05-242">See also</span></span>
* [<span data-ttu-id="18b05-243">Omówienie usługi Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="18b05-243">Overview of Azure Data Lake Store</span></span>](data-lake-store-overview.md)
* [<span data-ttu-id="18b05-244">Rozpoczynanie pracy z usługą Azure Data Lake Analytics</span><span class="sxs-lookup"><span data-stu-id="18b05-244">Get Started with Azure Data Lake Analytics</span></span>](../data-lake-analytics/data-lake-analytics-get-started-portal.md)
