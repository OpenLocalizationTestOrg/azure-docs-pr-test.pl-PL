---
title: "najlepsze rozwiązania zabezpieczeń sieci aaaAzure | Dokumentacja firmy Microsoft"
description: "Dowiedz się niektóre hello najważniejsze funkcje dostępne w Azure toohelp utworzyć bezpiecznego środowiska sieci"
services: virtual-network
documentationcenter: na
author: tracsman
manager: rossort
editor: 
ms.assetid: d169387a-1243-4867-a602-01d6f2d8a2a1
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 01/03/2017
ms.author: jonor
ms.openlocfilehash: b851b2862428a8bd5e7525c85584fc1c14ffcabe
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="microsoft-cloud-services-and-network-security"></a><span data-ttu-id="8240c-103">Chmury Microsoft bezpieczeństwa usług i sieci</span><span class="sxs-lookup"><span data-stu-id="8240c-103">Microsoft cloud services and network security</span></span>
<span data-ttu-id="8240c-104">Usługi w chmurze firmy Microsoft świadczenia usług hiperskali i infrastruktury, funkcje klasy korporacyjnej oraz wiele opcji na potrzeby łączności hybrydowej.</span><span class="sxs-lookup"><span data-stu-id="8240c-104">Microsoft cloud services deliver hyper-scale services and infrastructure, enterprise-grade capabilities, and many choices for hybrid connectivity.</span></span> <span data-ttu-id="8240c-105">Klienci mogą wybrać tooaccess tych usług za pośrednictwem Internetu hello lub z usługi Azure ExpressRoute, który zapewnia łączność w sieci prywatnej.</span><span class="sxs-lookup"><span data-stu-id="8240c-105">Customers can choose tooaccess these services either via hello Internet or with Azure ExpressRoute, which provides private network connectivity.</span></span> <span data-ttu-id="8240c-106">Witaj platformy Microsoft Azure umożliwia klientom tooseamlessly rozszerzają infrastruktury do chmury hello i tworzenia wielu architektur.</span><span class="sxs-lookup"><span data-stu-id="8240c-106">hello Microsoft Azure platform allows customers tooseamlessly extend their infrastructure into hello cloud and build multi-tier architectures.</span></span> <span data-ttu-id="8240c-107">Ponadto stron trzecich można włączyć udoskonalone funkcje oferty usług zabezpieczeń oraz urządzenia wirtualnego.</span><span class="sxs-lookup"><span data-stu-id="8240c-107">Additionally, third parties can enable enhanced capabilities by offering security services and virtual appliances.</span></span> <span data-ttu-id="8240c-108">Ten dokument zawiera omówienie architektury problemów, które klientów należy wziąć pod uwagę podczas korzystania z usługi w chmurze firmy Microsoft dostępne za pośrednictwem usługi ExpressRoute i zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="8240c-108">This white paper provides an overview of security and architectural issues that customers should consider when using Microsoft cloud services accessed via ExpressRoute.</span></span> <span data-ttu-id="8240c-109">Obejmuje ona również tworzenia bardziej bezpieczne usług w sieci wirtualnych platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-109">It also covers creating more secure services in Azure virtual networks.</span></span>

## <a name="fast-start"></a><span data-ttu-id="8240c-110">Szybki start</span><span class="sxs-lookup"><span data-stu-id="8240c-110">Fast start</span></span>
<span data-ttu-id="8240c-111">powitania po logiki wykresu można kierować możesz tooa określonych przykład hello wiele metody zabezpieczeń dostępne z hello platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-111">hello following logic chart can direct you tooa specific example of hello many security techniques available with hello Azure platform.</span></span> <span data-ttu-id="8240c-112">Dla wygody można znaleźć przykład Witaj, który najlepiej odpowiada Twoim przypadku.</span><span class="sxs-lookup"><span data-stu-id="8240c-112">For quick reference, find hello example that best fits your case.</span></span> <span data-ttu-id="8240c-113">Rozwinięte wyjaśnień nadal odczytywania za pośrednictwem hello papieru.</span><span class="sxs-lookup"><span data-stu-id="8240c-113">For expanded explanations, continue reading through hello paper.</span></span>
<span data-ttu-id="8240c-114">[![0]][0]</span><span class="sxs-lookup"><span data-stu-id="8240c-114">[![0]][0]</span></span>

[<span data-ttu-id="8240c-115">Przykład 1: Tworzenie sieci obwodowej (znanej także jako strefa DMZ, strefą zdemilitaryzowaną lub podsiecią ekranowaną) toohelp ochrona aplikacji przy użyciu grup zabezpieczeń sieci (NSG).</span><span class="sxs-lookup"><span data-stu-id="8240c-115">Example 1: Build a perimeter network (also known as DMZ, demilitarized zone, or screened subnet) toohelp protect applications with network security groups (NSGs).</span></span>](#example-1-build-a-perimeter-network-to-help-protect-applications-with-nsgs)</br><span data-ttu-id="8240c-116">
[Przykład 2: Tworzenie obwodu toohelp sieci chronić aplikacje z zaporą i grup NSG.](#example-2-build-a-perimeter-network-to-help-protect-applications-with-a-firewall-and-nsgs)</span><span class="sxs-lookup"><span data-stu-id="8240c-116">
[Example 2: Build a perimeter network toohelp protect applications with a firewall and NSGs.](#example-2-build-a-perimeter-network-to-help-protect-applications-with-a-firewall-and-nsgs)</span></span></br><span data-ttu-id="8240c-117">
[Przykład 3: Tworzenie obwodu toohelp sieci ochrony sieci z zapory, trasy zdefiniowane przez użytkownika (przez) i grupy NSG.](#example-3-build-a-perimeter-network-to-help-protect-networks-with-a-firewall-and-udr-and-nsg)</span><span class="sxs-lookup"><span data-stu-id="8240c-117">
[Example 3: Build a perimeter network toohelp protect networks with a firewall, user-defined route (UDR), and NSG.](#example-3-build-a-perimeter-network-to-help-protect-networks-with-a-firewall-and-udr-and-nsg)</span></span></br><span data-ttu-id="8240c-118">
[Przykład 4: Dodaj połączenie hybrydowe z urządzenia do lokacji, wirtualne wirtualnej sieci prywatnej (VPN).](#example-4-add-a-hybrid-connection-with-a-site-to-site-virtual-appliance-vpn)</span><span class="sxs-lookup"><span data-stu-id="8240c-118">
[Example 4: Add a hybrid connection with a site-to-site, virtual appliance virtual private network (VPN).](#example-4-add-a-hybrid-connection-with-a-site-to-site-virtual-appliance-vpn)</span></span></br><span data-ttu-id="8240c-119">
[Przykład 5: Dodaj połączenie hybrydowe lokacja lokacja, Brama sieci VPN platformy Azure.](#example-5-add-a-hybrid-connection-with-a-site-to-site-azure-vpn-gateway)</span><span class="sxs-lookup"><span data-stu-id="8240c-119">
[Example 5: Add a hybrid connection with a site-to-site, Azure VPN gateway.](#example-5-add-a-hybrid-connection-with-a-site-to-site-azure-vpn-gateway)</span></span></br><span data-ttu-id="8240c-120">
[Przykład 6: Dodaj połączenie hybrydowe z usługi ExpressRoute.](#example-6-add-a-hybrid-connection-with-expressroute)</span><span class="sxs-lookup"><span data-stu-id="8240c-120">
[Example 6: Add a hybrid connection with ExpressRoute.](#example-6-add-a-hybrid-connection-with-expressroute)</span></span></br>
<span data-ttu-id="8240c-121">Przykłady dodawania połączeń między sieciami wirtualnymi, wysokiej dostępności i łańcucha usługi zostanie dodany toothis dokumentu za pośrednictwem hello następnych kilku miesięcy.</span><span class="sxs-lookup"><span data-stu-id="8240c-121">Examples for adding connections between virtual networks, high availability, and service chaining will be added toothis document over hello next few months.</span></span>

## <a name="microsoft-compliance-and-infrastructure-protection"></a><span data-ttu-id="8240c-122">Ochrona zgodności i infrastruktury firmy Microsoft</span><span class="sxs-lookup"><span data-stu-id="8240c-122">Microsoft compliance and infrastructure protection</span></span>
<span data-ttu-id="8240c-123">organizacje toohelp wykonania national charakteru regionalnego, i branżowe regulujące hello zbierania i używania danych poszczególnych osób, firma Microsoft oferuje ponad 40 certyfikaty oraz poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="8240c-123">toohelp organizations comply with national, regional, and industry-specific requirements governing hello collection and use of individuals’ data, Microsoft offers over 40 certifications and attestations.</span></span> <span data-ttu-id="8240c-124">Witaj najbardziej kompleksowy zestaw dowolnego dostawcy usług w chmurze.</span><span class="sxs-lookup"><span data-stu-id="8240c-124">hello most comprehensive set of any cloud service provider.</span></span>

<span data-ttu-id="8240c-125">Aby uzyskać więcej informacji, zobacz informacje o zgodności hello na powitania [Microsoft Trust Center][TrustCenter].</span><span class="sxs-lookup"><span data-stu-id="8240c-125">For more information, see hello compliance information on hello [Microsoft Trust Center][TrustCenter].</span></span>

<span data-ttu-id="8240c-126">Firma Microsoft udostępnia kompleksowe rozwiązanie tooprotect infrastrukturę potrzebną toorun hiperskali globalne usługi w chmurze.</span><span class="sxs-lookup"><span data-stu-id="8240c-126">Microsoft has a comprehensive approach tooprotect cloud infrastructure needed toorun hyper-scale global services.</span></span> <span data-ttu-id="8240c-127">Infrastruktury chmury firmy Microsoft obejmuje sprzętu, oprogramowania, sieci i administracyjnych i operatorów, oprócz toohello fizycznych w centrach danych.</span><span class="sxs-lookup"><span data-stu-id="8240c-127">Microsoft cloud infrastructure includes hardware, software, networks, and administrative and operations staff, in addition toohello physical data centers.</span></span>

<span data-ttu-id="8240c-128">![2]</span><span class="sxs-lookup"><span data-stu-id="8240c-128">![2]</span></span>

<span data-ttu-id="8240c-129">Takie podejście zapewnia bardziej bezpieczną podstawę dla klientów toodeploy usług w hello firmy Microsoft w chmurze.</span><span class="sxs-lookup"><span data-stu-id="8240c-129">This approach provides a more secure foundation for customers toodeploy their services in hello Microsoft cloud.</span></span> <span data-ttu-id="8240c-130">Witaj, następnym krokiem jest przeznaczony dla klientów toodesign i Utwórz tooprotect architektury zabezpieczeń tych usług.</span><span class="sxs-lookup"><span data-stu-id="8240c-130">hello next step is for customers toodesign and create a security architecture tooprotect these services.</span></span>

## <a name="traditional-security-architectures-and-perimeter-networks"></a><span data-ttu-id="8240c-131">Tradycyjne zabezpieczenia architektury i sieci obwodowej</span><span class="sxs-lookup"><span data-stu-id="8240c-131">Traditional security architectures and perimeter networks</span></span>
<span data-ttu-id="8240c-132">Mimo że Microsoft intensywnie inwestuje w ochrona powitalnych infrastruktury chmury, klienci muszą również ochronę ich usługi w chmurze i grup zasobów.</span><span class="sxs-lookup"><span data-stu-id="8240c-132">Although Microsoft invests heavily in protecting hello cloud infrastructure, customers must also protect their cloud services and resource groups.</span></span> <span data-ttu-id="8240c-133">Toosecurity wielowarstwowe podejście zapewnia najlepszą ochronę hello.</span><span class="sxs-lookup"><span data-stu-id="8240c-133">A multilayered approach toosecurity provides hello best defense.</span></span> <span data-ttu-id="8240c-134">Strefy zabezpieczeń sieci obwodowej chroni wewnętrznych zasobów sieciowych z niezaufaną siecią.</span><span class="sxs-lookup"><span data-stu-id="8240c-134">A perimeter network security zone protects internal network resources from an untrusted network.</span></span> <span data-ttu-id="8240c-135">Sieć obwodowa odwołuje się krawędzie toohello lub części hello sieci, które znajdują się między hello Internet i enterprise hello chronione infrastruktury IT.</span><span class="sxs-lookup"><span data-stu-id="8240c-135">A perimeter network refers toohello edges or parts of hello network that sit between hello Internet and hello protected enterprise IT infrastructure.</span></span>

<span data-ttu-id="8240c-136">W sieciach typowego przedsiębiorstwa infrastrukturze podstawowej hello jest silnie wzmocnionego w granicach hello, z wielu warstw zabezpieczeń urządzeń.</span><span class="sxs-lookup"><span data-stu-id="8240c-136">In typical enterprise networks, hello core infrastructure is heavily fortified at hello perimeters, with multiple layers of security devices.</span></span> <span data-ttu-id="8240c-137">granic Hello każdej warstwy składa się z urządzeniami i punkty wymuszania zasad.</span><span class="sxs-lookup"><span data-stu-id="8240c-137">hello boundary of each layer consists of devices and policy enforcement points.</span></span> <span data-ttu-id="8240c-138">Każda warstwa może zawierać kombinację powitania po urządzeń zabezpieczeń sieciowych: zapór, zapobiegania przeprowadzenie ataku typu "odmowa usługi" (DoS), wykrywania nieautoryzowanego dostępu lub systemy ochrony (Identyfikatory/IP) i urządzenia sieci VPN.</span><span class="sxs-lookup"><span data-stu-id="8240c-138">Each layer can include a combination of hello following network security devices: firewalls, Denial of Service (DoS) prevention, Intrusion Detection or Protection Systems (IDS/IPS), and VPN devices.</span></span> <span data-ttu-id="8240c-139">Wymuszanie zasad może zająć formularza hello zasad zapory, listy kontroli dostępu (ACL) lub specyficznego routingu.</span><span class="sxs-lookup"><span data-stu-id="8240c-139">Policy enforcement can take hello form of firewall policies, access control lists (ACLs), or specific routing.</span></span> <span data-ttu-id="8240c-140">Hello pierwszą linię obrony w sieci hello, bezpośrednio akceptować ruch przychodzący z hello Internetu, to kombinacja tych mechanizmów tooblock ataków i szkodliwy ruch umożliwiając dalsze uprawnionych żądań do hello sieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-140">hello first line of defense in hello network, directly accepting incoming traffic from hello Internet, is a combination of these mechanisms tooblock attacks and harmful traffic while allowing legitimate requests further into hello network.</span></span> <span data-ttu-id="8240c-141">Ten ruch trasy bezpośrednio tooresources w sieci obwodowej hello.</span><span class="sxs-lookup"><span data-stu-id="8240c-141">This traffic routes directly tooresources in hello perimeter network.</span></span> <span data-ttu-id="8240c-142">Ten zasób może następnie "komunikować" tooresources więcej danych w sieci hello, przejeżdżających przez hello granic dalej do sprawdzania poprawności pierwszy.</span><span class="sxs-lookup"><span data-stu-id="8240c-142">That resource may then “talk” tooresources deeper in hello network, transiting hello next boundary for validation first.</span></span> <span data-ttu-id="8240c-143">Warstwa peryferyjnych Hello jest nazywany hello sieci obwodowej, ponieważ ta część sieci hello jest narażonych toohello Internetu, zazwyczaj z jakiegoś ochrony po obu stronach.</span><span class="sxs-lookup"><span data-stu-id="8240c-143">hello outermost layer is called hello perimeter network because this part of hello network is exposed toohello Internet, usually with some form of protection on both sides.</span></span> <span data-ttu-id="8240c-144">Hello poniższej ilustracji przedstawiono przykład sieci obwodowej pojedynczej podsieci w sieci firmowej, z dwóch granic zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="8240c-144">hello following figure shows an example of a single subnet perimeter network in a corporate network, with two security boundaries.</span></span>

<span data-ttu-id="8240c-145">![3]</span><span class="sxs-lookup"><span data-stu-id="8240c-145">![3]</span></span>

<span data-ttu-id="8240c-146">Istnieje wiele tooimplement architektury używane sieci obwodowej.</span><span class="sxs-lookup"><span data-stu-id="8240c-146">There are many architectures used tooimplement a perimeter network.</span></span> <span data-ttu-id="8240c-147">Te architektury można w zakresie od sieci obwodowej wieloma podsieciami tooa usługi równoważenia obciążenia proste zróżnicowane mechanizmów w każdej granicy tooblock ruchu i ochrony hello głębiej warstw hello sieci firmowej.</span><span class="sxs-lookup"><span data-stu-id="8240c-147">These architectures can range from a simple load balancer tooa multiple-subnet perimeter network with varied mechanisms at each boundary tooblock traffic and protect hello deeper layers of hello corporate network.</span></span> <span data-ttu-id="8240c-148">Jak sieci obwodowej hello jest wbudowana zależy od hello specyficznych potrzeb organizacji hello i jego ogólnej tolerancji ryzyka.</span><span class="sxs-lookup"><span data-stu-id="8240c-148">How hello perimeter network is built depends on hello specific needs of hello organization and its overall risk tolerance.</span></span>

<span data-ttu-id="8240c-149">Klienci przenieść ich obciążeń chmury toopublic, jest podobne możliwości toosupport krytyczne dla architektury sieci obwodowej zgodności Azure toomeet i wymagania dotyczące zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="8240c-149">As customers move their workloads toopublic clouds, it is critical toosupport similar capabilities for perimeter network architecture in Azure toomeet compliance and security requirements.</span></span> <span data-ttu-id="8240c-150">Ten dokument zawiera wskazówki, w jaki sposób klienci mogą tworzyć środowisku bezpiecznej sieci na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-150">This document provides guidelines on how customers can build a secure network environment in Azure.</span></span> <span data-ttu-id="8240c-151">Skupiono się w sieci obwodowej hello, ale również zawiera kompleksowe omówienie wiele aspektów zabezpieczeń sieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-151">It focuses on hello perimeter network, but also includes a comprehensive discussion of many aspects of network security.</span></span> <span data-ttu-id="8240c-152">Witaj następujące pytania o tej dyskusji:</span><span class="sxs-lookup"><span data-stu-id="8240c-152">hello following questions inform this discussion:</span></span>

* <span data-ttu-id="8240c-153">Jak można wbudować sieci obwodowej na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="8240c-153">How can a perimeter network in Azure be built?</span></span>
* <span data-ttu-id="8240c-154">Co to są sieci obwodowej hello hello Azure funkcje dostępne toobuild?</span><span class="sxs-lookup"><span data-stu-id="8240c-154">What are some of hello Azure features available toobuild hello perimeter network?</span></span>
* <span data-ttu-id="8240c-155">Jak można chronić obciążeń zaplecza</span><span class="sxs-lookup"><span data-stu-id="8240c-155">How can back-end workloads be protected?</span></span>
* <span data-ttu-id="8240c-156">W jaki sposób obciążeń toohello komunikacji kontrolowane przez Internet na platformie Azure?</span><span class="sxs-lookup"><span data-stu-id="8240c-156">How are Internet communications controlled toohello workloads in Azure?</span></span>
* <span data-ttu-id="8240c-157">Jak sieci lokalne powitania mogą być chronione od wdrożenia na platformie Azure?</span><span class="sxs-lookup"><span data-stu-id="8240c-157">How can hello on-premises networks be protected from deployments in Azure?</span></span>
* <span data-ttu-id="8240c-158">Podczas funkcje zabezpieczeń platformy Azure natywnego powinny być używane lub innych urządzeń lub usług?</span><span class="sxs-lookup"><span data-stu-id="8240c-158">When should native Azure security features be used versus third-party appliances or services?</span></span>

<span data-ttu-id="8240c-159">powitania po diagram przedstawia różnych warstw zabezpieczeń, które platforma Azure udostępnia toocustomers.</span><span class="sxs-lookup"><span data-stu-id="8240c-159">hello following diagram shows various layers of security Azure provides toocustomers.</span></span> <span data-ttu-id="8240c-160">Te warstwy są natywne w hello samą platformą Azure i funkcje zdefiniowane przez klientów:</span><span class="sxs-lookup"><span data-stu-id="8240c-160">These layers are both native in hello Azure platform itself and customer-defined features:</span></span>

<span data-ttu-id="8240c-161">![4]</span><span class="sxs-lookup"><span data-stu-id="8240c-161">![4]</span></span>

<span data-ttu-id="8240c-162">Przychodzące z hello Internet, DDoS Azure pomaga chronić przed atakami na dużą skalę przed Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-162">Inbound from hello Internet, Azure DDoS helps protect against large-scale attacks against Azure.</span></span> <span data-ttu-id="8240c-163">Kolejna warstwa Hello jest zdefiniowany przez klienta publicznych adresów IP (punkty końcowe), które są używane toodetermine ruchu, które można przekazać za pośrednictwem sieci wirtualnej usługi toohello hello chmury.</span><span class="sxs-lookup"><span data-stu-id="8240c-163">hello next layer is customer-defined public IP addresses (endpoints), which are used toodetermine which traffic can pass through hello cloud service toohello virtual network.</span></span> <span data-ttu-id="8240c-164">Azure macierzystego wirtualnego izolacji sieci zapewnia pełnej izolacji od innych sieci i czy ruch przepływa tylko za pośrednictwem ścieżki użytkownika skonfigurowane i.</span><span class="sxs-lookup"><span data-stu-id="8240c-164">Native Azure virtual network isolation ensures complete isolation from all other networks and that traffic only flows through user configured paths and methods.</span></span> <span data-ttu-id="8240c-165">Tych ścieżek i metody są hello kolejnej warstwy, których grup NSG, przez i wirtualnych urządzeń sieciowych mogą być używane toocreate zabezpieczeń granice tooprotect hello wdrożenia aplikacji w sieci hello chronione.</span><span class="sxs-lookup"><span data-stu-id="8240c-165">These paths and methods are hello next layer, where NSGs, UDR, and network virtual appliances can be used toocreate security boundaries tooprotect hello application deployments in hello protected network.</span></span>

<span data-ttu-id="8240c-166">Witaj Następna sekcja zawiera omówienie sieci wirtualnych platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-166">hello next section provides an overview of Azure virtual networks.</span></span> <span data-ttu-id="8240c-167">Te sieci wirtualne są tworzone przez klientów i są w ich wdrożonych obciążeń podłączonych do.</span><span class="sxs-lookup"><span data-stu-id="8240c-167">These virtual networks are created by customers, and are what their deployed workloads are connected to.</span></span> <span data-ttu-id="8240c-168">Sieci wirtualne są podstawy hello wszystkie funkcje zabezpieczeń sieci hello wymaganych tooestablish wdrożeń klienta obwodowej sieci tooprotect na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-168">Virtual networks are hello basis of all hello network security features required tooestablish a perimeter network tooprotect customer deployments in Azure.</span></span>

## <a name="overview-of-azure-virtual-networks"></a><span data-ttu-id="8240c-169">Omówienie sieci wirtualnych platformy Azure</span><span class="sxs-lookup"><span data-stu-id="8240c-169">Overview of Azure virtual networks</span></span>
<span data-ttu-id="8240c-170">Zanim ruchu internetowego można pobrać toohello sieci wirtualnych platformy Azure, istnieją dwie warstwy dostępu do właściwych toohello zabezpieczeń platformy Azure:</span><span class="sxs-lookup"><span data-stu-id="8240c-170">Before Internet traffic can get toohello Azure virtual networks, there are two layers of security inherent toohello Azure platform:</span></span>

1.    <span data-ttu-id="8240c-171">**Ochrona przed atakami DDoS**: ochrona przed atakami DDoS to warstwa hello Azure sieci fizycznej, która chroni przed atakami na dużą skalę internetowego hello samą platformą Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-171">**DDoS protection**: DDoS protection is a layer of hello Azure physical network that protects hello Azure platform itself from large-scale Internet-based attacks.</span></span> <span data-ttu-id="8240c-172">Tego rodzaju ataki Użyj wielu węzłów "bot" w toooverwhelm próba usługi internetowe.</span><span class="sxs-lookup"><span data-stu-id="8240c-172">These attacks use multiple “bot” nodes in an attempt toooverwhelm an Internet service.</span></span> <span data-ttu-id="8240c-173">Platforma Azure ma niezawodne siatki ochrony przed atakami DDoS na wszystkie połączenia przychodzące, wychodzące i Azure między regionu.</span><span class="sxs-lookup"><span data-stu-id="8240c-173">Azure has a robust DDoS protection mesh on all inbound, outbound, and cross-Azure region connectivity.</span></span> <span data-ttu-id="8240c-174">Ta warstwa ochrony przed atakami DDoS nie ma żadnych atrybutów można skonfigurować użytkownika i nie jest dostępny toohello klienta.</span><span class="sxs-lookup"><span data-stu-id="8240c-174">This DDoS protection layer has no user configurable attributes and is not accessible toohello customer.</span></span> <span data-ttu-id="8240c-175">warstwę ochrony przed atakami DDoS Hello chroni Azure jako platformę przed atakami na dużą skalę, również monitoruje ruchu wyjściowego powiązane i regionu Azure między ruchu.</span><span class="sxs-lookup"><span data-stu-id="8240c-175">hello DDoS protection layer protects Azure as a platform from large-scale attacks, it also monitors out-bound traffic and cross-Azure region traffic.</span></span> <span data-ttu-id="8240c-176">Przy użyciu wirtualnych urządzeń sieciowych na powitania sieci wirtualnej, dodatkowe warstwy odporności można skonfigurować przez powitania klienta przed mniejszych ataki skalowania, które nie rzeczy przed wyjazdem hello platformy ochrony na poziomie.</span><span class="sxs-lookup"><span data-stu-id="8240c-176">Using network virtual appliances on hello VNet, additional layers of resilience can be configured by hello customer against a smaller scale attack that doesn't trip hello platform level protection.</span></span> <span data-ttu-id="8240c-177">Przykład DDoS w akcji; Jeśli internetowy adres IP zaatakowany przez na dużą skalę ataków DDoS, Azure może wykryć źródeł hello hello ataków i wyczyść hello naruszeń ruchu przed osiągnięciem jego przeznaczenia.</span><span class="sxs-lookup"><span data-stu-id="8240c-177">An example of DDoS in action; if an internet facing IP address was attacked by a large-scale DDoS attack, Azure would detect hello sources of hello attacks and scrub hello offending traffic before it reached its intended destination.</span></span> <span data-ttu-id="8240c-178">W większości przypadków, hello zaatakowane punkt końcowy nie ma wpływu na atak powitania.</span><span class="sxs-lookup"><span data-stu-id="8240c-178">In almost all cases, hello attacked endpoint isn't affected by hello attack.</span></span> <span data-ttu-id="8240c-179">W rzadkich przypadkach hello dotyczy punkt końcowy żaden ruch jest tooother odpowiednich punktów końcowych, tylko atak powitania punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="8240c-179">In hello rare cases that an endpoint is affected, no traffic is affected tooother endpoints, only hello attacked endpoint.</span></span> <span data-ttu-id="8240c-180">W związku z tym innych klientów i usług zobaczy bez wpływu na tym ataki.</span><span class="sxs-lookup"><span data-stu-id="8240c-180">Thus other customers and services would see no impact from that attack.</span></span> <span data-ttu-id="8240c-181">Jest toonote krytyczny, który Azure DDoS tylko szuka ataków na dużą skalę.</span><span class="sxs-lookup"><span data-stu-id="8240c-181">It's critical toonote that Azure DDoS is only looking for large-scale attacks.</span></span> <span data-ttu-id="8240c-182">Istnieje możliwość, że określone usługi można przeciążony przed przekroczenia progów ochrony na poziomie platformy hello.</span><span class="sxs-lookup"><span data-stu-id="8240c-182">It is possible that your specific service could be overwhelmed before hello platform level protection thresholds are exceeded.</span></span> <span data-ttu-id="8240c-183">Na przykład witryny sieci web na jednym serwerze A0 IIS, można podjąć w trybie offline takiego ataku przed zagrożeniem platformy Azure poziom ochrony przed atakami DDoS.</span><span class="sxs-lookup"><span data-stu-id="8240c-183">For example, a web site on a single A0 IIS server, could be taken offline by a DDoS attack before Azure platform level DDoS protection registered a threat.</span></span>

2.  <span data-ttu-id="8240c-184">**Publiczne adresy IP**: publicznego adresu IP adresów (włączone za pośrednictwem punktów końcowych usługi, publiczny adres IP adresy bramy aplikacji i innych funkcji platformy Azure, udostępniające publicznego adresu IP adres toohello kierowane tooyour zasobu internetowego) umożliwiają usługi w chmurze lub grupy zasobów toohave publiczne adresy Internet IP i portów.</span><span class="sxs-lookup"><span data-stu-id="8240c-184">**Public IP Addresses**: Public IP addresses (enabled via service endpoints, Public IP addresses, Application Gateway, and other Azure features that present a public IP address toohello internet routed tooyour resource) allow cloud services or resource groups toohave public Internet IP addresses and ports exposed.</span></span> <span data-ttu-id="8240c-185">punkt końcowy Hello używa translatora adresów sieciowych (NAT) tooroute ruchu toohello wewnętrzny adres i port na powitania sieci wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-185">hello endpoint uses Network Address Translation (NAT) tooroute traffic toohello internal address and port on hello Azure virtual network.</span></span> <span data-ttu-id="8240c-186">Ta ścieżka jest podstawowy sposobem toopass zewnętrznego ruchu w sieci wirtualnej hello hello.</span><span class="sxs-lookup"><span data-stu-id="8240c-186">This path is hello primary way for external traffic toopass into hello virtual network.</span></span> <span data-ttu-id="8240c-187">Hello publiczne adresy IP są konfigurowalne toodetermine, których ruch jest przekazywany w i jak i gdzie jest translacja na toohello sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="8240c-187">hello Public IP addresses are configurable toodetermine which traffic is passed in, and how and where it's translated on toohello virtual network.</span></span>

<span data-ttu-id="8240c-188">Gdy ruch osiągnie hello sieci wirtualnej, istnieje wiele funkcji, które są dostarczane do gry.</span><span class="sxs-lookup"><span data-stu-id="8240c-188">Once traffic reaches hello virtual network, there are many features that come into play.</span></span> <span data-ttu-id="8240c-189">Sieci wirtualnych platformy Azure są hello podstawę tooattach klientów, ich obciążeń i których dotyczy podstawowych zabezpieczeń na poziomie sieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-189">Azure virtual networks are hello foundation for customers tooattach their workloads and where basic network-level security applies.</span></span> <span data-ttu-id="8240c-190">Jest siecią prywatną (w nakładce sieci wirtualnej) w systemie Azure dla klientów z hello następujące funkcje i właściwości:</span><span class="sxs-lookup"><span data-stu-id="8240c-190">It is a private network (a virtual network overlay) in Azure for customers with hello following features and characteristics:</span></span>

* <span data-ttu-id="8240c-191">**Izolacja ruchu**: sieć wirtualna jest granica izolacji ruchu hello na powitania platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-191">**Traffic isolation**: A virtual network is hello traffic isolation boundary on hello Azure platform.</span></span> <span data-ttu-id="8240c-192">Maszynach wirtualnych (VM) w jednej sieci wirtualnej nie może komunikować się bezpośrednio tooVMs w innej sieci wirtualnej, nawet jeśli obie sieci wirtualne są tworzone przez hello tego samego klienta.</span><span class="sxs-lookup"><span data-stu-id="8240c-192">Virtual machines (VMs) in one virtual network cannot communicate directly tooVMs in a different virtual network, even if both virtual networks are created by hello same customer.</span></span> <span data-ttu-id="8240c-193">Izolacja jest krytyczne właściwość, która zapewnia klienta maszyn wirtualnych i komunikacja pozostanie prywatnej sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="8240c-193">Isolation is a critical property that ensures customer VMs and communication remains private within a virtual network.</span></span>

>[!NOTE]
><span data-ttu-id="8240c-194">Izolacja ruchu odwołuje się tylko tootraffic *przychodzących* toohello sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="8240c-194">Traffic isolation refers only tootraffic *inbound* toohello virtual network.</span></span> <span data-ttu-id="8240c-195">Domyślne ruch wychodzący z toohello sieci wirtualnej hello internet jest dozwolone, ale w razie potrzeby przez grupy NSG można zapobiec.</span><span class="sxs-lookup"><span data-stu-id="8240c-195">By default outbound traffic from hello VNet toohello internet is allowed, but can be prevented if desired by NSGs.</span></span>
>
>

* <span data-ttu-id="8240c-196">**Topologia wielowarstwowa**: sieci wirtualne umożliwiają klientom topologii wielowarstwowej toodefine przydzielając podsieci i wyznaczenie przestrzeni adresowych osobne dla różnych elementów lub "warstwy" ich obciążeń.</span><span class="sxs-lookup"><span data-stu-id="8240c-196">**Multi-tier topology**: Virtual networks allow customers toodefine multi-tier topology by allocating subnets and designating separate address spaces for different elements or “tiers” of their workloads.</span></span> <span data-ttu-id="8240c-197">Tych grup logicznych i topologii Włącz zasady dostępu różnych toodefine klientów na podstawie typów obciążenia hello, a także kontrolować ruch między warstwami hello.</span><span class="sxs-lookup"><span data-stu-id="8240c-197">These logical groupings and topologies enable customers toodefine different access policy based on hello workload types, and also control traffic flows between hello tiers.</span></span>
* <span data-ttu-id="8240c-198">**Łączność między lokalizacjami**: klientów może nawiązać łączności między lokalizacjami między sieci wirtualnej i wieloma lokacjami lokalnymi lub innych sieci wirtualnych na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-198">**Cross-premises connectivity**: Customers can establish cross-premises connectivity between a virtual network and multiple on-premises sites or other virtual networks in Azure.</span></span> <span data-ttu-id="8240c-199">tooconstruct połączenia, klienci mogą użyć sieci wirtualnej komunikacji równorzędnej, bram sieci VPN platformy Azure, wirtualnych urządzeń sieciowych innych firm lub ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="8240c-199">tooconstruct a connection, customers can use VNet Peering, Azure VPN Gateways, third-party network virtual appliances, or ExpressRoute.</span></span> <span data-ttu-id="8240c-200">Azure obsługuje za pomocą standardowych protokołów IPsec i IKE i prywatne połączenie ExpressRoute sieci VPN typu lokacja lokacja (S2S).</span><span class="sxs-lookup"><span data-stu-id="8240c-200">Azure supports site-to-site (S2S) VPNs using standard IPsec/IKE protocols and ExpressRoute private connectivity.</span></span>
* <span data-ttu-id="8240c-201">**Grupa NSG** umożliwia klientom toocreate zasady (kontroli dostępu ACL) na potrzeby hello poziom szczegółowości: sieci interfejsy poszczególnych maszyn wirtualnych i podsieci wirtualne.</span><span class="sxs-lookup"><span data-stu-id="8240c-201">**NSG** allows customers toocreate rules (ACLs) at hello desired level of granularity: network interfaces, individual VMs, or virtual subnets.</span></span> <span data-ttu-id="8240c-202">Klientów można kontrolować dostęp przez zezwalanie na dostęp lub odmawianie komunikacji między hello obciążeń w ramach sieci wirtualnej, od systemów w sieci klienta za pośrednictwem łączności między lokalizacjami lub bezpośrednia komunikacja z Internetem.</span><span class="sxs-lookup"><span data-stu-id="8240c-202">Customers can control access by permitting or denying communication between hello workloads within a virtual network, from systems on customer’s networks via cross-premises connectivity, or direct Internet communication.</span></span>
* <span data-ttu-id="8240c-203">**PRZEZ** i **przesyłania dalej protokołu IP** umożliwiają klientom toodefine hello ścieżki do komunikacji między warstwami innej sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="8240c-203">**UDR** and **IP Forwarding** allow customers toodefine hello communication paths between different tiers within a virtual network.</span></span> <span data-ttu-id="8240c-204">Klienci mogą wdrażać zaporą, Identyfikatory/adresów IP i inne urządzenia wirtualnego oraz kierować ruchem sieciowym za pomocą tych urządzeń zabezpieczeń do wymuszania zasad granic zabezpieczeń, inspekcji i inspekcji.</span><span class="sxs-lookup"><span data-stu-id="8240c-204">Customers can deploy a firewall, IDS/IPS, and other virtual appliances, and route network traffic through these security appliances for security boundary policy enforcement, auditing, and inspection.</span></span>
* <span data-ttu-id="8240c-205">**Sieci wirtualnych urządzeń** w portalu Azure Marketplace hello: urządzenia zabezpieczeń, takie jak zapory, moduły równoważenia obciążenia i Identyfikatory/adresów IP są dostępne w portalu Azure Marketplace hello i hello Galeria obrazów maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="8240c-205">**Network virtual appliances** in hello Azure Marketplace: Security appliances such as firewalls, load balancers, and IDS/IPS are available in hello Azure Marketplace and hello VM Image Gallery.</span></span> <span data-ttu-id="8240c-206">Klienci mogą wdrożyć te urządzenia w sieciach wirtualnych, a w szczególności na ich bezpieczne środowisko sieciowe zabezpieczeń granic (w tym podsieci sieci obwodowej hello) toocomplete wielowarstwowych.</span><span class="sxs-lookup"><span data-stu-id="8240c-206">Customers can deploy these appliances into their virtual networks, and specifically, at their security boundaries (including hello perimeter network subnets) toocomplete a multi-tiered secure network environment.</span></span>

<span data-ttu-id="8240c-207">Z tych funkcji i możliwości przykładem sposobu architektury sieci obwodowej mogła zostać zbudowana na platformie Azure jest powitania po diagramu:</span><span class="sxs-lookup"><span data-stu-id="8240c-207">With these features and capabilities, one example of how a perimeter network architecture could be constructed in Azure is hello following diagram:</span></span>

<span data-ttu-id="8240c-208">![5]</span><span class="sxs-lookup"><span data-stu-id="8240c-208">![5]</span></span>

## <a name="perimeter-network-characteristics-and-requirements"></a><span data-ttu-id="8240c-209">Właściwości sieci obwodowej i wymagania</span><span class="sxs-lookup"><span data-stu-id="8240c-209">Perimeter network characteristics and requirements</span></span>
<span data-ttu-id="8240c-210">sieć obwodowa Hello jest hello fronton sieci hello, bezpośrednio relacje komunikacji z hello Internet.</span><span class="sxs-lookup"><span data-stu-id="8240c-210">hello perimeter network is hello front end of hello network, directly interfacing communication from hello Internet.</span></span> <span data-ttu-id="8240c-211">pakiety przychodzące Hello powinny przepływać przez hello urządzenia zabezpieczeń, takie jak zapory hello, identyfikatorów i adresów IP, przed osiągnięciem hello serwerami zaplecza.</span><span class="sxs-lookup"><span data-stu-id="8240c-211">hello incoming packets should flow through hello security appliances, such as hello firewall, IDS, and IPS, before reaching hello back-end servers.</span></span> <span data-ttu-id="8240c-212">Pakiety powiązane z Internetu od obciążeń hello również mogą przepływać przez hello urządzenia zabezpieczeń w sieci obwodowej hello do wymuszania zasad inspekcji i inspekcji, przed opuszczeniem hello sieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-212">Internet-bound packets from hello workloads can also flow through hello security appliances in hello perimeter network for policy enforcement, inspection, and auditing purposes, before leaving hello network.</span></span> <span data-ttu-id="8240c-213">Ponadto sieci obwodowej hello może obsługiwać bramy sieci VPN między lokalizacjami między sieci wirtualne klienta i sieci lokalnej.</span><span class="sxs-lookup"><span data-stu-id="8240c-213">Additionally, hello perimeter network can host cross-premises VPN gateways between customer virtual networks and on-premises networks.</span></span>

### <a name="perimeter-network-characteristics"></a><span data-ttu-id="8240c-214">Właściwości sieci obwodowej</span><span class="sxs-lookup"><span data-stu-id="8240c-214">Perimeter network characteristics</span></span>
<span data-ttu-id="8240c-215">Odwołanie do powyższej ilustracji hello, czynniki hello sieci obwodowej dobrej są następujące:</span><span class="sxs-lookup"><span data-stu-id="8240c-215">Referencing hello previous figure, some of hello characteristics of a good perimeter network are as follows:</span></span>

* <span data-ttu-id="8240c-216">Internetowy:</span><span class="sxs-lookup"><span data-stu-id="8240c-216">Internet-facing:</span></span>
  * <span data-ttu-id="8240c-217">podsieć sieci obwodowej Hello sam jest skierowane do Internetu, bezpośrednio komunikacji z hello Internet.</span><span class="sxs-lookup"><span data-stu-id="8240c-217">hello perimeter network subnet itself is Internet-facing, directly communicating with hello Internet.</span></span>
  * <span data-ttu-id="8240c-218">Publiczne adresy IP, adresy VIP i/lub punktów końcowych usługi przekazywania sieci frontonu toohello ruch do Internetu i urządzeń.</span><span class="sxs-lookup"><span data-stu-id="8240c-218">Public IP addresses, VIPs, and/or service endpoints pass Internet traffic toohello front-end network and devices.</span></span>
  * <span data-ttu-id="8240c-219">Ruchu przychodzącego ruchu z powitalne Internet przechodzi przez urządzenia zabezpieczeń przed innymi zasobami na powitania sieć frontonu.</span><span class="sxs-lookup"><span data-stu-id="8240c-219">Inbound traffic from hello Internet passes through security devices before other resources on hello front-end network.</span></span>
  * <span data-ttu-id="8240c-220">Włączenie zabezpieczeń dla ruchu wychodzącego ruch przechodzi przez urządzeń zabezpieczeń, co hello ostatni krok przed przekazaniem toohello Internet.</span><span class="sxs-lookup"><span data-stu-id="8240c-220">If outbound security is enabled, traffic passes through security devices, as hello final step, before passing toohello Internet.</span></span>
* <span data-ttu-id="8240c-221">Sieć chroniona:</span><span class="sxs-lookup"><span data-stu-id="8240c-221">Protected network:</span></span>
  * <span data-ttu-id="8240c-222">Brak bezpośredniego ścieżka z hello Internet toohello podstawowej infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="8240c-222">There is no direct path from hello Internet toohello core infrastructure.</span></span>
  * <span data-ttu-id="8240c-223">Kanały toohello podstawowej infrastruktury muszą przejść za pomocą urządzeń zabezpieczeń, takich jak grupy NSG, zapory lub urządzenia sieci VPN.</span><span class="sxs-lookup"><span data-stu-id="8240c-223">Channels toohello core infrastructure must traverse through security devices such as NSGs, firewalls, or VPN devices.</span></span>
  * <span data-ttu-id="8240c-224">Inne urządzenia nie musi zestawiania Internet i hello infrastrukturze podstawowej.</span><span class="sxs-lookup"><span data-stu-id="8240c-224">Other devices must not bridge Internet and hello core infrastructure.</span></span>
  * <span data-ttu-id="8240c-225">Urządzenia zabezpieczeń zarówno hello internetowy i hello sieci chronionego ukierunkowane granice hello sieci obwodowej (na przykład Witaj dwie zapory ikony hello poprzedniej rysunku) faktycznie może być pojedynczego urządzenia wirtualnego przy użyciu reguł zróżnicowanych lub interfejsy dla każdej granicy.</span><span class="sxs-lookup"><span data-stu-id="8240c-225">Security devices on both hello Internet-facing and hello protected network facing boundaries of hello perimeter network (for example, hello two firewall icons shown in hello previous figure) may actually be a single virtual appliance with differentiated rules or interfaces for each boundary.</span></span> <span data-ttu-id="8240c-226">Na przykład jeden urządzenie fizyczne, logicznie rozdzielone, obsługi hello obciążenia dla obu granice hello sieci obwodowej.</span><span class="sxs-lookup"><span data-stu-id="8240c-226">For example, one physical device, logically separated, handling hello load for both boundaries of hello perimeter network.</span></span>
* <span data-ttu-id="8240c-227">Inne typowe wskazówki i ograniczenia:</span><span class="sxs-lookup"><span data-stu-id="8240c-227">Other common practices and constraints:</span></span>
  * <span data-ttu-id="8240c-228">Obciążeń nie mogą przechowywać newralgicznych danych biznesowych.</span><span class="sxs-lookup"><span data-stu-id="8240c-228">Workloads must not store business critical information.</span></span>
  * <span data-ttu-id="8240c-229">Konfiguracje sieci tooperimeter dostępu i aktualizacje i wdrożeniami są ograniczone tooonly uprawnień administratorów.</span><span class="sxs-lookup"><span data-stu-id="8240c-229">Access and updates tooperimeter network configurations and deployments are limited tooonly authorized administrators.</span></span>

### <a name="perimeter-network-requirements"></a><span data-ttu-id="8240c-230">Wymagania dotyczące sieci obwodowej</span><span class="sxs-lookup"><span data-stu-id="8240c-230">Perimeter network requirements</span></span>
<span data-ttu-id="8240c-231">tooenable te właściwości, skorzystaj z następujących wskazówek w sieci wirtualnej wymagania tooimplement sieci obwodowej powiodło się:</span><span class="sxs-lookup"><span data-stu-id="8240c-231">tooenable these characteristics, follow these guidelines on virtual network requirements tooimplement a successful perimeter network:</span></span>

* <span data-ttu-id="8240c-232">**Architektura podsieci:** sieci wirtualnej hello Określ tak, aby w całej podsieci dedykowanego jako hello sieci obwodowej, oddzielona od innych podsieci w hello sam sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="8240c-232">**Subnet architecture:** Specify hello virtual network such that an entire subnet is dedicated as hello perimeter network, separated from other subnets in hello same virtual network.</span></span> <span data-ttu-id="8240c-233">Ta separacja zapewnia hello ruchu między hello sieci obwodowej oraz innych przepływów warstw wewnętrznego lub prywatnego podsieci za pośrednictwem zapory lub urządzenia wirtualnego Identyfikatory/adresów IP.</span><span class="sxs-lookup"><span data-stu-id="8240c-233">This separation ensures hello traffic between hello perimeter network and other internal or private subnet tiers flows through a firewall or IDS/IPS virtual appliance.</span></span>  <span data-ttu-id="8240c-234">Trasy zdefiniowane przez użytkownika na powitania granicę, którą podsieci są wymagane tooforward urządzenie wirtualne toohello ruchu.</span><span class="sxs-lookup"><span data-stu-id="8240c-234">User-defined routes on hello boundary subnets are required tooforward this traffic toohello virtual appliance.</span></span>
* <span data-ttu-id="8240c-235">**Grupa NSG:** hello podsieci sieci obwodowej, sam powinien być otwarty tooallow komunikację z hello Internet, ale nie oznacza klientów należy pomijanie grup NSG.</span><span class="sxs-lookup"><span data-stu-id="8240c-235">**NSG:** hello perimeter network subnet itself should be open tooallow communication with hello Internet, but that does not mean customers should be bypassing NSGs.</span></span> <span data-ttu-id="8240c-236">Postępuj zgodnie z typowych zabezpieczeń rozwiązań toominimize hello sieci powierzchnie widoczne toohello Internet.</span><span class="sxs-lookup"><span data-stu-id="8240c-236">Follow common security practices toominimize hello network surfaces exposed toohello Internet.</span></span> <span data-ttu-id="8240c-237">Zablokowanie zakresów adresów zdalnego hello dozwolone tooaccess hello wdrożenia lub hello określonej aplikacji protokoły i porty, które są otwarte.</span><span class="sxs-lookup"><span data-stu-id="8240c-237">Lock down hello remote address ranges allowed tooaccess hello deployments or hello specific application protocols and ports that are open.</span></span> <span data-ttu-id="8240c-238">Może to być sytuacji, w których pełną blokowanie nie jest możliwe.</span><span class="sxs-lookup"><span data-stu-id="8240c-238">There may be circumstances, however, in which a complete lock-down is not possible.</span></span> <span data-ttu-id="8240c-239">Na przykład, jeśli klienci mają zewnętrznej witryny sieci Web na platformie Azure, sieci obwodowej hello powinna zezwalać na powitania przychodzących żądań sieci web z publicznych adresów IP, ale należy otwierać tylko porty aplikacji sieci web hello: ruch TCP na porcie 80 i/lub TCP na porcie 443.</span><span class="sxs-lookup"><span data-stu-id="8240c-239">For example, if customers have an external website in Azure, hello perimeter network should allow hello incoming web requests from any public IP addresses, but should only open hello web application ports: TCP on port 80 and/or TCP on port 443.</span></span>
* <span data-ttu-id="8240c-240">**Tabela routingu:** hello podsieci sieci obwodowej, sama powinno być możliwe toocommunicate toohello Internet bezpośrednio, ale nie należy zezwalać tooand bezpośrednia komunikacja z tyłu zakończenia lub lokalnej sieci hello bez przechodzenia przez zaporę lub urządzenia zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="8240c-240">**Routing table:** hello perimeter network subnet itself should be able toocommunicate toohello Internet directly, but should not allow direct communication tooand from hello back end or on-premises networks without going through a firewall or security appliance.</span></span>
* <span data-ttu-id="8240c-241">**Konfiguracja urządzenia zabezpieczeń:** tooroute i inspekcję pakietów między hello sieci obwodowej i rest hello sieci hello chronione, hello urządzenia zabezpieczeń, takie jak zapory, Identyfikatory, i adresy IP urządzeń mogą być wieloadresowych.</span><span class="sxs-lookup"><span data-stu-id="8240c-241">**Security appliance configuration:** tooroute and inspect packets between hello perimeter network and hello rest of hello protected networks, hello security appliances such as firewall, IDS, and IPS devices may be multi-homed.</span></span> <span data-ttu-id="8240c-242">Mogą mieć oddzielnych kart sieciowych dla sieci obwodowej hello i hello podsieci wewnętrznej.</span><span class="sxs-lookup"><span data-stu-id="8240c-242">They may have separate NICs for hello perimeter network and hello back-end subnets.</span></span> <span data-ttu-id="8240c-243">karty sieciowe Hello w sieci obwodowej hello komunikować się bezpośrednio tooand z hello Internet, o hello odpowiednich grup NSG i obwód hello sieci tabeli routingu.</span><span class="sxs-lookup"><span data-stu-id="8240c-243">hello NICs in hello perimeter network communicate directly tooand from hello Internet, with hello corresponding NSGs and hello perimeter network routing table.</span></span> <span data-ttu-id="8240c-244">karty sieciowe Hello łączenie podsieci wewnętrznej toohello mają bardziej ograniczone grup NSG i tabelach routingu hello odpowiednie podsieci wewnętrznej.</span><span class="sxs-lookup"><span data-stu-id="8240c-244">hello NICs connecting toohello back-end subnets have more restricted NSGs and routing tables of hello corresponding back-end subnets.</span></span>
* <span data-ttu-id="8240c-245">**Funkcje urządzenia zabezpieczeń:** urządzenia zabezpieczeń hello wdrożonego w sieci obwodowej hello zwykle wykonać hello następujące funkcje:</span><span class="sxs-lookup"><span data-stu-id="8240c-245">**Security appliance functionality:** hello security appliances deployed in hello perimeter network typically perform hello following functionality:</span></span>
  * <span data-ttu-id="8240c-246">Zapora: Wymuszania reguł zapory lub zasady kontroli dostępu hello żądań przychodzących.</span><span class="sxs-lookup"><span data-stu-id="8240c-246">Firewall: Enforcing firewall rules or access control policies for hello incoming requests.</span></span>
  * <span data-ttu-id="8240c-247">Zagrożenia i zapobiegania: wykrywanie i zmniejszenia złośliwych ataków z hello Internet.</span><span class="sxs-lookup"><span data-stu-id="8240c-247">Threat detection and prevention: Detecting and mitigating malicious attacks from hello Internet.</span></span>
  * <span data-ttu-id="8240c-248">Inspekcja i rejestrowanie: Obsługa szczegółowe dzienniki inspekcji i analizy.</span><span class="sxs-lookup"><span data-stu-id="8240c-248">Auditing and logging: Maintaining detailed logs for auditing and analysis.</span></span>
  * <span data-ttu-id="8240c-249">Odwrotny serwer proxy: przekierowywanie hello przychodzących żądań toohello odpowiadających serwerów zaplecza.</span><span class="sxs-lookup"><span data-stu-id="8240c-249">Reverse proxy: Redirecting hello incoming requests toohello corresponding back-end servers.</span></span> <span data-ttu-id="8240c-250">Przekierowanie obejmuje mapowania i zwykle translacji adresów docelowego hello na urządzeniach z frontonu hello zapory, toohello adresów serwerów zaplecza.</span><span class="sxs-lookup"><span data-stu-id="8240c-250">This redirection involves mapping and translating hello destination addresses on hello front-end devices, typically firewalls, toohello back-end server addresses.</span></span>
  * <span data-ttu-id="8240c-251">Przekazuj serwera proxy: zapewnianie NAT i przeprowadzania inspekcji dla komunikacji inicjowane przy użyciu hello toohello wirtualnej sieci Internet.</span><span class="sxs-lookup"><span data-stu-id="8240c-251">Forward proxy: Providing NAT and performing auditing for communication initiated from within hello virtual network toohello Internet.</span></span>
  * <span data-ttu-id="8240c-252">Router: Przesyłania ruchu przychodzącego i między podsieciami wewnątrz hello sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="8240c-252">Router: Forwarding incoming and cross-subnet traffic inside hello virtual network.</span></span>
  * <span data-ttu-id="8240c-253">Urządzenia sieci VPN: działa jako hello między lokalizacjami bramy sieci VPN dla między lokalizacjami połączenie sieci VPN między sieciami lokalnymi klientów i sieci wirtualnych platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-253">VPN device: Acting as hello cross-premises VPN gateways for cross-premises VPN connectivity between customer on-premises networks and Azure virtual networks.</span></span>
  * <span data-ttu-id="8240c-254">Serwer sieci VPN: akceptowanie połączenie wirtualnej sieci tooAzure klientów sieci VPN.</span><span class="sxs-lookup"><span data-stu-id="8240c-254">VPN server: Accepting VPN clients connecting tooAzure virtual networks.</span></span>

> [!TIP]
> <span data-ttu-id="8240c-255">Zachowaj hello następujące dwa oddzielne grup: hello osoby autoryzowane tooaccess hello obwodowej sieci zabezpieczeń narzędzi i hello osoby autoryzowane jako administratorzy programowanie, wdrożenia i działania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="8240c-255">Keep hello following two groups separate: hello individuals authorized tooaccess hello perimeter network security gear and hello individuals authorized as application development, deployment, or operations administrators.</span></span> <span data-ttu-id="8240c-256">Oddzieleniu tych grup umożliwia podział obowiązków i uniemożliwia jedna osoba z pominięciem aplikacji, zabezpieczeń i kontroli zabezpieczeń sieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-256">Keeping these groups separate allows for a segregation of duties and prevents a single person from bypassing both applications security and network security controls.</span></span>
>
>

### <a name="questions-toobe-asked-when-building-network-boundaries"></a><span data-ttu-id="8240c-257">Toobe pytania zadawane podczas tworzenia granic sieci</span><span class="sxs-lookup"><span data-stu-id="8240c-257">Questions toobe asked when building network boundaries</span></span>
<span data-ttu-id="8240c-258">W tej sekcji, chyba że wyraźnie wymienionych hello termin "sieci" odnosi się tooprivate Azure sieci wirtualnych utworzonych przez administratora subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="8240c-258">In this section, unless specifically mentioned, hello term "networks" refers tooprivate Azure virtual networks created by a subscription administrator.</span></span> <span data-ttu-id="8240c-259">termin Hello nie odwołuje się toohello podstawowe sieci fizyczne w systemie Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-259">hello term doesn't refer toohello underlying physical networks within Azure.</span></span>

<span data-ttu-id="8240c-260">Ponadto sieci wirtualnych platformy Azure są często używane tooextend tradycyjnych, lokalnie sieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-260">Also, Azure virtual networks are often used tooextend traditional on-premises networks.</span></span> <span data-ttu-id="8240c-261">Jest to możliwe tooincorporate lokacja lokacja lub hybrydowego ExpressRoute networking solutions z architektury sieci obwodowej.</span><span class="sxs-lookup"><span data-stu-id="8240c-261">It is possible tooincorporate either site-to-site or ExpressRoute hybrid networking solutions with perimeter network architectures.</span></span> <span data-ttu-id="8240c-262">To łącze hybrydowego jest ważną kwestią tworzenia granic zabezpieczeń sieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-262">This hybrid link is an important consideration in building network security boundaries.</span></span>

<span data-ttu-id="8240c-263">Witaj następujące trzy pytania są krytyczne tooanswer gdy tworzysz sieci z siecią obwodową a wielu granic zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="8240c-263">hello following three questions are critical tooanswer when you're building a network with a perimeter network and multiple security boundaries.</span></span>

#### <a name="1-how-many-boundaries-are-needed"></a><span data-ttu-id="8240c-264">1) ile granice są potrzebne?</span><span class="sxs-lookup"><span data-stu-id="8240c-264">1) How many boundaries are needed?</span></span>
<span data-ttu-id="8240c-265">pierwszy punkt decyzji Hello jest toodecide ile granic zabezpieczeń są potrzebne w danej sytuacji:</span><span class="sxs-lookup"><span data-stu-id="8240c-265">hello first decision point is toodecide how many security boundaries are needed in a given scenario:</span></span>

* <span data-ttu-id="8240c-266">Pojedyncza granica: jeden w sieci obwodowej frontonu hello, między hello sieci wirtualnej i hello Internet.</span><span class="sxs-lookup"><span data-stu-id="8240c-266">A single boundary: One on hello front-end perimeter network, between hello virtual network and hello Internet.</span></span>
* <span data-ttu-id="8240c-267">Granice dwóch: jedną na powitania po stronie Internetu hello sieci obwodowej, a drugą między podsieci sieci obwodowej hello i podsieci wewnętrznej hello w hello sieci wirtualnych platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-267">Two boundaries: One on hello Internet side of hello perimeter network, and another between hello perimeter network subnet and hello back-end subnets in hello Azure virtual networks.</span></span>
* <span data-ttu-id="8240c-268">Trzy granice: na stronie Internetu hello hello sieci obwodowej, między siecią obwodową hello i podsieci wewnętrznej, a drugi między podsieciami zaplecza hello i hello sieci lokalnej.</span><span class="sxs-lookup"><span data-stu-id="8240c-268">Three boundaries: One on hello Internet side of hello perimeter network, one between hello perimeter network and back-end subnets, and one between hello back-end subnets and hello on-premises network.</span></span>
* <span data-ttu-id="8240c-269">Granice N: Numer zmiennej.</span><span class="sxs-lookup"><span data-stu-id="8240c-269">N boundaries: A variable number.</span></span> <span data-ttu-id="8240c-270">W zależności od wymagań dotyczących zabezpieczeń nie istnieje limit nie toohello liczba granic zabezpieczeń, które mogą być stosowane w danej sieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-270">Depending on security requirements, there is no limit toohello number of security boundaries that can be applied in a given network.</span></span>

<span data-ttu-id="8240c-271">Witaj liczbę i rodzaj potrzebne różnią się granic na podstawie firmy ryzyko uszkodzenia i hello danego scenariusza implementowana.</span><span class="sxs-lookup"><span data-stu-id="8240c-271">hello number and type of boundaries needed vary based on a company’s risk tolerance and hello specific scenario being implemented.</span></span> <span data-ttu-id="8240c-272">Ta decyzja często staje się wraz z wielu grup w organizacji, często tym zespół ryzyka i zgodności, sieć i zespołu platformy i zespół deweloperów aplikacji.</span><span class="sxs-lookup"><span data-stu-id="8240c-272">This decision is often made together with multiple groups within an organization, often including a risk and compliance team, a network and platform team, and an application development team.</span></span> <span data-ttu-id="8240c-273">Osobom wiedzę na temat zabezpieczeń, hello danych związane i technologie hello używany powinien mieć powiedzieć w tej decyzji tooensure hello zabezpieczeń odpowiednich zasobów dla każdego wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="8240c-273">People with knowledge of security, hello data involved, and hello technologies being used should have a say in this decision tooensure hello appropriate security stance for each implementation.</span></span>

> [!TIP]
> <span data-ttu-id="8240c-274">Użyj hello najmniejsza liczba granic, które spełniają wymagania dotyczące zabezpieczeń hello w danej sytuacji.</span><span class="sxs-lookup"><span data-stu-id="8240c-274">Use hello smallest number of boundaries that satisfy hello security requirements for a given situation.</span></span> <span data-ttu-id="8240c-275">O granicach więcej operacji i rozwiązywania problemów można trudniej, a także hello wiele granic zasad zarządzania obciążenie związane z zarządzaniem hello wraz z upływem czasu.</span><span class="sxs-lookup"><span data-stu-id="8240c-275">With more boundaries, operations and troubleshooting can be more difficult, as well as hello management overhead involved with managing hello multiple boundary policies over time.</span></span> <span data-ttu-id="8240c-276">Jednak za mało granic zwiększenie ryzyka.</span><span class="sxs-lookup"><span data-stu-id="8240c-276">However, insufficient boundaries increase risk.</span></span> <span data-ttu-id="8240c-277">Znajdowanie hello saldo jest krytyczne.</span><span class="sxs-lookup"><span data-stu-id="8240c-277">Finding hello balance is critical.</span></span>
>
>

<span data-ttu-id="8240c-278">![6]</span><span class="sxs-lookup"><span data-stu-id="8240c-278">![6]</span></span>

<span data-ttu-id="8240c-279">Hello powyższej ilustracji przedstawiono ogólny widok sieci granicznej zabezpieczeń trzy.</span><span class="sxs-lookup"><span data-stu-id="8240c-279">hello preceding figure shows a high-level view of a three security boundary network.</span></span> <span data-ttu-id="8240c-280">granice Hello należą do zakresu od sieci obwodowej hello i hello Internet, hello Azure frontonu i zaplecza podsieci prywatne i hello Azure zaplecza podsieci i sieci firmowej lokalne powitania.</span><span class="sxs-lookup"><span data-stu-id="8240c-280">hello boundaries are between hello perimeter network and hello Internet, hello Azure front-end and back-end private subnets, and hello Azure back-end subnet and hello on-premises corporate network.</span></span>

#### <a name="2-where-are-hello-boundaries-located"></a><span data-ttu-id="8240c-281">2) granice hello lokalizację?</span><span class="sxs-lookup"><span data-stu-id="8240c-281">2) Where are hello boundaries located?</span></span>
<span data-ttu-id="8240c-282">Po hello liczba granice są ustalane, gdzie tooimplement jest ich hello dalej podjęcie decyzji.</span><span class="sxs-lookup"><span data-stu-id="8240c-282">Once hello number of boundaries are decided, where tooimplement them is hello next decision point.</span></span> <span data-ttu-id="8240c-283">Zazwyczaj są trzy opcje:</span><span class="sxs-lookup"><span data-stu-id="8240c-283">There are generally three choices:</span></span>

* <span data-ttu-id="8240c-284">Przy użyciu Internetowych usług pośredniczących (na przykład oparte na chmurze Zapora aplikacji sieci Web, który nie został omówiony w niniejszym dokumencie)</span><span class="sxs-lookup"><span data-stu-id="8240c-284">Using an Internet-based intermediary service (for example, a cloud-based Web application firewall, which is not discussed in this document)</span></span>
* <span data-ttu-id="8240c-285">Przy użyciu funkcji macierzystego i/lub wirtualnych urządzeń sieciowych na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="8240c-285">Using native features and/or network virtual appliances in Azure</span></span>
* <span data-ttu-id="8240c-286">Za pomocą urządzeń fizycznych na powitania sieci lokalnej</span><span class="sxs-lookup"><span data-stu-id="8240c-286">Using physical devices on hello on-premises network</span></span>

<span data-ttu-id="8240c-287">W sieciach czysto Azure opcje hello są natywnego funkcje platformy Azure (na przykład równoważenia obciążenia Azure) lub wirtualnych urządzeń sieciowych z hello sformatowanego partnera ekosystemu platformy Azure (na przykład zapory Check Point).</span><span class="sxs-lookup"><span data-stu-id="8240c-287">On purely Azure networks, hello options are native Azure features (for example, Azure Load Balancers) or network virtual appliances from hello rich partner ecosystem of Azure (for example, Check Point firewalls).</span></span>

<span data-ttu-id="8240c-288">Jeśli granica jest potrzebny platformy Azure i siecią lokalną, hello urządzeń zabezpieczeń może znajdować się po obu stronach połączenia hello (lub obu stronach).</span><span class="sxs-lookup"><span data-stu-id="8240c-288">If a boundary is needed between Azure and an on-premises network, hello security devices can reside on either side of hello connection (or both sides).</span></span> <span data-ttu-id="8240c-289">W związku z tym decyzji muszą być wprowadzane na powitania lokalizacji tooplace zabezpieczeń sprzęcie.</span><span class="sxs-lookup"><span data-stu-id="8240c-289">Thus a decision must be made on hello location tooplace security gear.</span></span>

<span data-ttu-id="8240c-290">Hello poprzedniej ilustracji sieci Internet obwodowej hello granice przodu do tyłu zakończenia hello całkowicie znajdują się w obrębie platformy Azure i musi być natywnego funkcje platformy Azure lub wirtualnych urządzeń sieciowych.</span><span class="sxs-lookup"><span data-stu-id="8240c-290">In hello previous figure, hello Internet-to-perimeter network and hello front-to-back-end boundaries are entirely contained within Azure, and must be either native Azure features or network virtual appliances.</span></span> <span data-ttu-id="8240c-291">Urządzenia zabezpieczeń w hello granicę między Azure (podsieci wewnętrznej) oraz sieci firmowej hello można na hello Azure po stronie lub po stronie lokalne powitania lub nawet kombinację urządzeń po obu stronach.</span><span class="sxs-lookup"><span data-stu-id="8240c-291">Security devices on hello boundary between Azure (back-end subnet) and hello corporate network could be either on hello Azure side or hello on-premises side, or even a combination of devices on both sides.</span></span> <span data-ttu-id="8240c-292">Może to być istotne zalety i wady opcji tooeither poważnie rozważane.</span><span class="sxs-lookup"><span data-stu-id="8240c-292">There can be significant advantages and disadvantages tooeither option that must be seriously considered.</span></span>

<span data-ttu-id="8240c-293">Na przykład przy użyciu istniejącego sprzętu zabezpieczeń fizycznych na powitania w lokalnym sieci po stronie ma hello zaletę, że niezbędna jest żadnych nowych narzędzi.</span><span class="sxs-lookup"><span data-stu-id="8240c-293">For example, using existing physical security gear on hello on-premises network side has hello advantage that no new gear is needed.</span></span> <span data-ttu-id="8240c-294">Wystarczy ponownej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="8240c-294">It just needs reconfiguration.</span></span> <span data-ttu-id="8240c-295">Wadą Hello jest jednak, że cały ruch musi wrócić z toobe sieci lokalnej Azure toohello widziana przez hello narzędzi zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="8240c-295">hello disadvantage, however, is that all traffic must come back from Azure toohello on-premises network toobe seen by hello security gear.</span></span> <span data-ttu-id="8240c-296">W związku z tym ruchu Azure do platformy Azure może pociągnąć za sobą znaczne opóźnienia i wpłynąć na wydajność i środowisko aplikacji, jeśli jego wymuszono wstecz toohello lokalnej sieci do wymuszania zasad zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="8240c-296">Thus Azure-to-Azure traffic could incur significant latency, and affect application performance and user experience, if it was forced back toohello on-premises network for security policy enforcement.</span></span>

#### <a name="3-how-are-hello-boundaries-implemented"></a><span data-ttu-id="8240c-297">3) granice hello implementowania?</span><span class="sxs-lookup"><span data-stu-id="8240c-297">3) How are hello boundaries implemented?</span></span>
<span data-ttu-id="8240c-298">Każda granica zabezpieczeń prawdopodobnie będzie miała wymagania różne możliwości (na przykład identyfikatorów i reguły zapory na powitania po stronie Internetu hello sieci obwodowej, ale tylko listy ACL między siecią obwodową hello i podsieci wewnętrznej).</span><span class="sxs-lookup"><span data-stu-id="8240c-298">Each security boundary will likely have different capability requirements (for example, IDS and firewall rules on hello Internet side of hello perimeter network, but only ACLs between hello perimeter network and back-end subnet).</span></span> <span data-ttu-id="8240c-299">Wcześniejsze podjęcie decyzji dotyczących urządzenia, które (lub ile urządzeń), zależy od toouse hello wymagań scenariusza i zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="8240c-299">Deciding on which device (or how many devices) toouse depends on hello scenario and security requirements.</span></span> <span data-ttu-id="8240c-300">W następującej sekcji hello przykłady 1, 2 i 3 omówiono niektóre opcje, które mogłyby zostać użyte.</span><span class="sxs-lookup"><span data-stu-id="8240c-300">In hello following section, examples 1, 2, and 3 discuss some options that could be used.</span></span> <span data-ttu-id="8240c-301">Przeglądanie hello funkcji natywnego sieć platformy Azure i urządzenia hello dostępnej na platformie Azure z ekosystemem partnerów hello pokazuje toosolve dostępne opcje tysięcy hello praktycznie dowolne scenariusza.</span><span class="sxs-lookup"><span data-stu-id="8240c-301">Reviewing hello Azure native network features and hello devices available in Azure from hello partner ecosystem shows hello myriad options available toosolve virtually any scenario.</span></span>

<span data-ttu-id="8240c-302">Inną kwestią implementacji klucza jest sposób tooconnect hello lokalnej sieci platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-302">Another key implementation decision point is how tooconnect hello on-premises network with Azure.</span></span> <span data-ttu-id="8240c-303">Należy użyć hello Azure wirtualnej bramy lub urządzenie wirtualne sieci?</span><span class="sxs-lookup"><span data-stu-id="8240c-303">Should you use hello Azure virtual gateway or a network virtual appliance?</span></span> <span data-ttu-id="8240c-304">Te opcje omówiono bardziej szczegółowo na powitania po sekcji (przykłady 4, 5 i 6).</span><span class="sxs-lookup"><span data-stu-id="8240c-304">These options are discussed in greater detail in hello following section (examples 4, 5, and 6).</span></span>

<span data-ttu-id="8240c-305">Ponadto ruchu między sieciami wirtualnymi w obrębie platformy Azure mogą być wymagane.</span><span class="sxs-lookup"><span data-stu-id="8240c-305">Additionally, traffic between virtual networks within Azure may be needed.</span></span> <span data-ttu-id="8240c-306">Te scenariusze zostanie dodana w przyszłych hello.</span><span class="sxs-lookup"><span data-stu-id="8240c-306">These scenarios will be added in hello future.</span></span>

<span data-ttu-id="8240c-307">Jeśli znasz już odpowiedzi hello toohello wstecz pytania, hello [szybkiego startu](#fast-start) sekcji mogą ułatwić identyfikację, przykłady, które są najbardziej odpowiednie dla danego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="8240c-307">Once you know hello answers toohello previous questions, hello [Fast Start](#fast-start) section can help identify which examples are most appropriate for a given scenario.</span></span>

## <a name="examples-building-security-boundaries-with-azure-virtual-networks"></a><span data-ttu-id="8240c-308">Przykłady: Tworzenie granic zabezpieczeń z sieci wirtualnych platformy Azure</span><span class="sxs-lookup"><span data-stu-id="8240c-308">Examples: Building security boundaries with Azure virtual networks</span></span>
### <a name="example-1-build-a-perimeter-network-toohelp-protect-applications-with-nsgs"></a><span data-ttu-id="8240c-309">Przykład 1 kompilacji toohelp sieci obwodowej ochrony aplikacji za pomocą grup NSG</span><span class="sxs-lookup"><span data-stu-id="8240c-309">Example 1 Build a perimeter network toohelp protect applications with NSGs</span></span>
<span data-ttu-id="8240c-310">[Kopii tooFast start](#fast-start) | [szczegółowy kompilacji instrukcje w tym przykładzie][Example1]</span><span class="sxs-lookup"><span data-stu-id="8240c-310">[Back tooFast start](#fast-start) | [Detailed build instructions for this example][Example1]</span></span>

<span data-ttu-id="8240c-311">[![7]][7]</span><span class="sxs-lookup"><span data-stu-id="8240c-311">[![7]][7]</span></span>

#### <a name="environment-description"></a><span data-ttu-id="8240c-312">Opis elementu środowiska</span><span class="sxs-lookup"><span data-stu-id="8240c-312">Environment description</span></span>
<span data-ttu-id="8240c-313">W tym przykładzie jest subskrypcji, która zawiera hello następujące zasoby:</span><span class="sxs-lookup"><span data-stu-id="8240c-313">In this example, there is a subscription that contains hello following resources:</span></span>

- <span data-ttu-id="8240c-314">Pojedyncza grupa zasobów</span><span class="sxs-lookup"><span data-stu-id="8240c-314">A single resource group</span></span>
- <span data-ttu-id="8240c-315">Sieć wirtualną z dwiema podsieciami: "FrontEnd" i "Wewnętrzna"</span><span class="sxs-lookup"><span data-stu-id="8240c-315">A virtual network with two subnets: “FrontEnd” and “BackEnd”</span></span>
- <span data-ttu-id="8240c-316">Grupy zabezpieczeń sieci jest stosowane tooboth podsieci</span><span class="sxs-lookup"><span data-stu-id="8240c-316">A Network Security Group that is applied tooboth subnets</span></span>
- <span data-ttu-id="8240c-317">Windows server, który reprezentuje serwer sieci web aplikacji ("IIS01")</span><span class="sxs-lookup"><span data-stu-id="8240c-317">A Windows server that represents an application web server (“IIS01”)</span></span>
- <span data-ttu-id="8240c-318">Dwa serwery systemu Windows, które reprezentują serwery zaplecza aplikacji ("AppVM01", "AppVM02")</span><span class="sxs-lookup"><span data-stu-id="8240c-318">Two Windows servers that represent application back-end servers (“AppVM01”, “AppVM02”)</span></span>
- <span data-ttu-id="8240c-319">Windows server, który reprezentuje serwer DNS ("DNS01")</span><span class="sxs-lookup"><span data-stu-id="8240c-319">A Windows server that represents a DNS server (“DNS01”)</span></span>
- <span data-ttu-id="8240c-320">Publicznego adresu IP skojarzonego z serwerem sieci web aplikacji hello</span><span class="sxs-lookup"><span data-stu-id="8240c-320">A public IP associated with hello application web server</span></span>

<span data-ttu-id="8240c-321">Skrypty i szablonu usługi Azure Resource Manager, zobacz hello [szczegółowe instrukcje kompilacji][Example1].</span><span class="sxs-lookup"><span data-stu-id="8240c-321">For scripts and an Azure Resource Manager template, see hello [detailed build instructions][Example1].</span></span>

#### <a name="nsg-description"></a><span data-ttu-id="8240c-322">Opis grupy NSG</span><span class="sxs-lookup"><span data-stu-id="8240c-322">NSG description</span></span>
<span data-ttu-id="8240c-323">W tym przykładzie grupy NSG jest wbudowana i następnie ładowane przy użyciu sześciu reguł.</span><span class="sxs-lookup"><span data-stu-id="8240c-323">In this example, an NSG group is built and then loaded with six rules.</span></span>

> [!TIP]
> <span data-ttu-id="8240c-324">Ogólnie rzecz biorąc, należy utworzyć określone reguł "Zezwalaj" najpierw następuje hello bardziej ogólnym reguły "odmowy".</span><span class="sxs-lookup"><span data-stu-id="8240c-324">Generally speaking, you should create your specific “Allow” rules first, followed by hello more generic “Deny” rules.</span></span> <span data-ttu-id="8240c-325">priorytet Hello nakazują reguły są sprawdzane jako pierwsze.</span><span class="sxs-lookup"><span data-stu-id="8240c-325">hello given priority dictates which rules are evaluated first.</span></span> <span data-ttu-id="8240c-326">Po znalezieniu tooapply tooa określonej reguły ruchu nie dodatkowe reguły są sprawdzane.</span><span class="sxs-lookup"><span data-stu-id="8240c-326">Once traffic is found tooapply tooa specific rule, no further rules are evaluated.</span></span> <span data-ttu-id="8240c-327">Reguły NSG można zastosować w albo hello kierunek ruchu przychodzącego lub wychodzącego (z perspektywy hello hello podsieci).</span><span class="sxs-lookup"><span data-stu-id="8240c-327">NSG rules can apply in either hello inbound or outbound direction (from hello perspective of hello subnet).</span></span>
>
>

<span data-ttu-id="8240c-328">Deklaratywnie hello następujące reguły są tworzone dla ruchu przychodzącego:</span><span class="sxs-lookup"><span data-stu-id="8240c-328">Declaratively, hello following rules are being built for inbound traffic:</span></span>

1. <span data-ttu-id="8240c-329">Wewnętrzny ruch DNS (port 53) jest dozwolone.</span><span class="sxs-lookup"><span data-stu-id="8240c-329">Internal DNS traffic (port 53) is allowed.</span></span>
2. <span data-ttu-id="8240c-330">Ruch protokołu RDP (port 3389) z tooany Internet hello maszyny wirtualnej jest dozwolony.</span><span class="sxs-lookup"><span data-stu-id="8240c-330">RDP traffic (port 3389) from hello Internet tooany Virtual Machine is allowed.</span></span>
3. <span data-ttu-id="8240c-331">Ruch HTTP (port 80) z serwera tooweb internetowej hello (IIS01) jest dozwolony.</span><span class="sxs-lookup"><span data-stu-id="8240c-331">HTTP traffic (port 80) from hello Internet tooweb server (IIS01) is allowed.</span></span>
4. <span data-ttu-id="8240c-332">Cały ruch z IIS01 tooAppVM1 (wszystkich portów) jest dozwolone.</span><span class="sxs-lookup"><span data-stu-id="8240c-332">Any traffic (all ports) from IIS01 tooAppVM1 is allowed.</span></span>
5. <span data-ttu-id="8240c-333">Odmowa cały ruch (wszystkie porty) z hello Internet toohello całej sieci wirtualnej (obie podsieci).</span><span class="sxs-lookup"><span data-stu-id="8240c-333">Any traffic (all ports) from hello Internet toohello entire virtual network (both subnets) is denied.</span></span>
6. <span data-ttu-id="8240c-334">Odmowa cały ruch (wszystkie porty) z hello podsieci frontonu toohello zaplecza podsieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-334">Any traffic (all ports) from hello front-end subnet toohello back-end subnet is denied.</span></span>

<span data-ttu-id="8240c-335">Z tych podsieci tooeach powiązane zasady, jeśli żądanie HTTP zostało ruch przychodzący z serwera sieci web toohello Internet hello zarówno 3 reguły (Zezwalaj) i 5 (odmówić go) powinna zostać zastosowana.</span><span class="sxs-lookup"><span data-stu-id="8240c-335">With these rules bound tooeach subnet, if an HTTP request was inbound from hello Internet toohello web server, both rules 3 (allow) and 5 (deny) would apply.</span></span> <span data-ttu-id="8240c-336">Jednak ponieważ reguła 3 ma wyższy priorytet, tylko będą miały zastosowania i reguły 5 nie przybyły do odtwarzania.</span><span class="sxs-lookup"><span data-stu-id="8240c-336">But because rule 3 has a higher priority, only it would apply, and rule 5 would not come into play.</span></span> <span data-ttu-id="8240c-337">W związku z tym żądania HTTP hello mogliby toohello serwera sieci web.</span><span class="sxs-lookup"><span data-stu-id="8240c-337">Thus hello HTTP request would be allowed toohello web server.</span></span> <span data-ttu-id="8240c-338">Jeśli ten sam ruch próbował tooreach hello DNS01 serwera, zasada 5 (odmówić go) będzie hello pierwszy tooapply i ruchu hello nie mogliby toopass toohello serwera.</span><span class="sxs-lookup"><span data-stu-id="8240c-338">If that same traffic was trying tooreach hello DNS01 server, rule 5 (deny) would be hello first tooapply, and hello traffic would not be allowed toopass toohello server.</span></span> <span data-ttu-id="8240c-339">Reguła 6 (odmówić go) bloki hello podsieci frontonu z mówić podsieci wewnętrznej toohello (z wyjątkiem dozwolonego ruchu w regułach 1 i 4).</span><span class="sxs-lookup"><span data-stu-id="8240c-339">Rule 6 (deny) blocks hello front-end subnet from talking toohello back-end subnet (except for allowed traffic in rules 1 and 4).</span></span> <span data-ttu-id="8240c-340">Ten zestaw reguł chroni hello sieci wewnętrznej, w przypadku, gdy osoba atakująca obniża hello aplikacja sieci web frontonu hello.</span><span class="sxs-lookup"><span data-stu-id="8240c-340">This rule-set protects hello back-end network in case an attacker compromises hello web application on hello front end.</span></span> <span data-ttu-id="8240c-341">Osoba atakująca Hello będzie ograniczona "chronionych" sieciowej zaplecza toohello dostępu (tylko tooresources udostępniane na serwerze AppVM01 hello).</span><span class="sxs-lookup"><span data-stu-id="8240c-341">hello attacker would have limited access toohello back-end “protected” network (only tooresources exposed on hello AppVM01 server).</span></span>

<span data-ttu-id="8240c-342">Brak domyślnej regule wychodzącej, która umożliwia ruchu wychodzącego toohello Internet.</span><span class="sxs-lookup"><span data-stu-id="8240c-342">There is a default outbound rule that allows traffic out toohello Internet.</span></span> <span data-ttu-id="8240c-343">Na przykład firma Microsoft zezwala na ruch wychodzący i nie modyfikowanie reguł wychodzących.</span><span class="sxs-lookup"><span data-stu-id="8240c-343">For this example, we’re allowing outbound traffic and not modifying any outbound rules.</span></span> <span data-ttu-id="8240c-344">toolock dół ruchu w obu kierunkach, routing zdefiniowane przez użytkownika jest wymagana (Zobacz przykład 3).</span><span class="sxs-lookup"><span data-stu-id="8240c-344">toolock down traffic in both directions, user-defined routing is required (see example 3).</span></span>

#### <a name="conclusion"></a><span data-ttu-id="8240c-345">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="8240c-345">Conclusion</span></span>
<span data-ttu-id="8240c-346">W tym przykładzie jest względnie proste i bezpośrednie sposobem izolowanie podsieci wewnętrznej hello z ruchu przychodzącego.</span><span class="sxs-lookup"><span data-stu-id="8240c-346">This example is a relatively simple and straightforward way of isolating hello back-end subnet from inbound traffic.</span></span> <span data-ttu-id="8240c-347">Aby uzyskać więcej informacji, zobacz hello [szczegółowe instrukcje kompilacji][Example1].</span><span class="sxs-lookup"><span data-stu-id="8240c-347">For more information, see hello [detailed build instructions][Example1].</span></span> <span data-ttu-id="8240c-348">Instrukcje te obejmują:</span><span class="sxs-lookup"><span data-stu-id="8240c-348">These instructions include:</span></span>

* <span data-ttu-id="8240c-349">Jak toobuild obwodowej tej sieci z klasycznym skryptów programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8240c-349">How toobuild this perimeter network with classic PowerShell scripts.</span></span>
* <span data-ttu-id="8240c-350">Jak toobuild obwodowej tej sieci z szablonem usługi Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="8240c-350">How toobuild this perimeter network with an Azure Resource Manager template.</span></span>
* <span data-ttu-id="8240c-351">Szczegółowy opis każdego polecenia NSG.</span><span class="sxs-lookup"><span data-stu-id="8240c-351">Detailed descriptions of each NSG command.</span></span>
* <span data-ttu-id="8240c-352">Scenariusze przepływu ruchu szczegółowe, przedstawiający sposób ruch jest dozwolony lub zabroniony w każdej warstwie.</span><span class="sxs-lookup"><span data-stu-id="8240c-352">Detailed traffic flow scenarios, showing how traffic is allowed or denied in each layer.</span></span>


### <a name="example-2-build-a-perimeter-network-toohelp-protect-applications-with-a-firewall-and-nsgs"></a><span data-ttu-id="8240c-353">Przykład 2 kompilacji toohelp sieci obwodowej chronić aplikacje z zaporą i grupy NSG</span><span class="sxs-lookup"><span data-stu-id="8240c-353">Example 2 Build a perimeter network toohelp protect applications with a firewall and NSGs</span></span>
<span data-ttu-id="8240c-354">[Kopii tooFast start](#fast-start) | [szczegółowy kompilacji instrukcje w tym przykładzie][Example2]</span><span class="sxs-lookup"><span data-stu-id="8240c-354">[Back tooFast start](#fast-start) | [Detailed build instructions for this example][Example2]</span></span>

<span data-ttu-id="8240c-355">[![8]][8]</span><span class="sxs-lookup"><span data-stu-id="8240c-355">[![8]][8]</span></span>

#### <a name="environment-description"></a><span data-ttu-id="8240c-356">Opis elementu środowiska</span><span class="sxs-lookup"><span data-stu-id="8240c-356">Environment description</span></span>
<span data-ttu-id="8240c-357">W tym przykładzie jest subskrypcji, która zawiera hello następujące zasoby:</span><span class="sxs-lookup"><span data-stu-id="8240c-357">In this example, there is a subscription that contains hello following resources:</span></span>

* <span data-ttu-id="8240c-358">Pojedyncza grupa zasobów</span><span class="sxs-lookup"><span data-stu-id="8240c-358">A single resource group</span></span>
* <span data-ttu-id="8240c-359">Sieć wirtualną z dwiema podsieciami: "FrontEnd" i "Wewnętrzna"</span><span class="sxs-lookup"><span data-stu-id="8240c-359">A virtual network with two subnets: “FrontEnd” and “BackEnd”</span></span>
* <span data-ttu-id="8240c-360">Grupy zabezpieczeń sieci jest stosowane tooboth podsieci</span><span class="sxs-lookup"><span data-stu-id="8240c-360">A Network Security Group that is applied tooboth subnets</span></span>
* <span data-ttu-id="8240c-361">Urządzenie wirtualne sieci, w tym przypadku a zapory, podłączone podsieci frontonu toohello</span><span class="sxs-lookup"><span data-stu-id="8240c-361">A network virtual appliance, in this case a firewall, connected toohello front-end subnet</span></span>
* <span data-ttu-id="8240c-362">Windows server, który reprezentuje serwer sieci web aplikacji ("IIS01")</span><span class="sxs-lookup"><span data-stu-id="8240c-362">A Windows server that represents an application web server (“IIS01”)</span></span>
* <span data-ttu-id="8240c-363">Dwa serwery systemu Windows, które reprezentują serwery zaplecza aplikacji ("AppVM01", "AppVM02")</span><span class="sxs-lookup"><span data-stu-id="8240c-363">Two Windows servers that represent application back-end servers (“AppVM01”, “AppVM02”)</span></span>
* <span data-ttu-id="8240c-364">Windows server, który reprezentuje serwer DNS ("DNS01")</span><span class="sxs-lookup"><span data-stu-id="8240c-364">A Windows server that represents a DNS server (“DNS01”)</span></span>

<span data-ttu-id="8240c-365">Skrypty i szablonu usługi Azure Resource Manager, zobacz hello [szczegółowe instrukcje kompilacji][Example2].</span><span class="sxs-lookup"><span data-stu-id="8240c-365">For scripts and an Azure Resource Manager template, see hello [detailed build instructions][Example2].</span></span>

#### <a name="nsg-description"></a><span data-ttu-id="8240c-366">Opis grupy NSG</span><span class="sxs-lookup"><span data-stu-id="8240c-366">NSG description</span></span>
<span data-ttu-id="8240c-367">W tym przykładzie grupy NSG jest wbudowana i następnie ładowane przy użyciu sześciu reguł.</span><span class="sxs-lookup"><span data-stu-id="8240c-367">In this example, an NSG group is built and then loaded with six rules.</span></span>

> [!TIP]
> <span data-ttu-id="8240c-368">Ogólnie rzecz biorąc, należy utworzyć określone reguł "Zezwalaj" najpierw następuje hello bardziej ogólnym reguły "odmowy".</span><span class="sxs-lookup"><span data-stu-id="8240c-368">Generally speaking, you should create your specific “Allow” rules first, followed by hello more generic “Deny” rules.</span></span> <span data-ttu-id="8240c-369">priorytet Hello nakazują reguły są sprawdzane jako pierwsze.</span><span class="sxs-lookup"><span data-stu-id="8240c-369">hello given priority dictates which rules are evaluated first.</span></span> <span data-ttu-id="8240c-370">Po znalezieniu tooapply tooa określonej reguły ruchu nie dodatkowe reguły są sprawdzane.</span><span class="sxs-lookup"><span data-stu-id="8240c-370">Once traffic is found tooapply tooa specific rule, no further rules are evaluated.</span></span> <span data-ttu-id="8240c-371">Reguły NSG można zastosować w albo hello kierunek ruchu przychodzącego lub wychodzącego (z perspektywy hello hello podsieci).</span><span class="sxs-lookup"><span data-stu-id="8240c-371">NSG rules can apply in either hello inbound or outbound direction (from hello perspective of hello subnet).</span></span>
>
>

<span data-ttu-id="8240c-372">Deklaratywnie hello następujące reguły są tworzone dla ruchu przychodzącego:</span><span class="sxs-lookup"><span data-stu-id="8240c-372">Declaratively, hello following rules are being built for inbound traffic:</span></span>

1. <span data-ttu-id="8240c-373">Wewnętrzny ruch DNS (port 53) jest dozwolone.</span><span class="sxs-lookup"><span data-stu-id="8240c-373">Internal DNS traffic (port 53) is allowed.</span></span>
2. <span data-ttu-id="8240c-374">Ruch protokołu RDP (port 3389) z tooany Internet hello maszyny wirtualnej jest dozwolony.</span><span class="sxs-lookup"><span data-stu-id="8240c-374">RDP traffic (port 3389) from hello Internet tooany Virtual Machine is allowed.</span></span>
3. <span data-ttu-id="8240c-375">Wszelkie Internet ruchu (wszystkie porty) toohello sieci urządzenie wirtualne (zapory) jest dozwolone.</span><span class="sxs-lookup"><span data-stu-id="8240c-375">Any Internet traffic (all ports) toohello network virtual appliance (firewall) is allowed.</span></span>
4. <span data-ttu-id="8240c-376">Cały ruch z IIS01 tooAppVM1 (wszystkich portów) jest dozwolone.</span><span class="sxs-lookup"><span data-stu-id="8240c-376">Any traffic (all ports) from IIS01 tooAppVM1 is allowed.</span></span>
5. <span data-ttu-id="8240c-377">Odmowa cały ruch (wszystkie porty) z hello Internet toohello całej sieci wirtualnej (obie podsieci).</span><span class="sxs-lookup"><span data-stu-id="8240c-377">Any traffic (all ports) from hello Internet toohello entire virtual network (both subnets) is denied.</span></span>
6. <span data-ttu-id="8240c-378">Odmowa cały ruch (wszystkie porty) z hello podsieci frontonu toohello zaplecza podsieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-378">Any traffic (all ports) from hello front-end subnet toohello back-end subnet is denied.</span></span>

<span data-ttu-id="8240c-379">Z tych podsieci tooeach powiązane zasady, jeśli żądanie HTTP zostało ruch przychodzący z toohello hello zaporę, zarówno 3 reguły (Zezwalaj) i 5 (odmówić go) powinna zostać zastosowana.</span><span class="sxs-lookup"><span data-stu-id="8240c-379">With these rules bound tooeach subnet, if an HTTP request was inbound from hello Internet toohello firewall, both rules 3 (allow) and 5 (deny) would apply.</span></span> <span data-ttu-id="8240c-380">Jednak ponieważ reguła 3 ma wyższy priorytet, tylko będą miały zastosowania i reguły 5 nie przybyły do odtwarzania.</span><span class="sxs-lookup"><span data-stu-id="8240c-380">But because rule 3 has a higher priority, only it would apply, and rule 5 would not come into play.</span></span> <span data-ttu-id="8240c-381">W związku z tym żądaniu hello HTTP będzie dozwolone toohello zapory.</span><span class="sxs-lookup"><span data-stu-id="8240c-381">Thus hello HTTP request would be allowed toohello firewall.</span></span> <span data-ttu-id="8240c-382">Jeśli ten sam ruch próbował tooreach hello IIS01 serwera, nawet jeśli komputer jest w podsieci frontonu hello, zasada 5 (odmówić go) powinna zostać zastosowana, i ruchu hello nie mogliby toopass toohello serwera.</span><span class="sxs-lookup"><span data-stu-id="8240c-382">If that same traffic was trying tooreach hello IIS01 server, even though it’s on hello front-end subnet, rule 5 (deny) would apply, and hello traffic would not be allowed toopass toohello server.</span></span> <span data-ttu-id="8240c-383">Reguła 6 (odmówić go) bloki hello podsieci frontonu z mówić podsieci wewnętrznej toohello (z wyjątkiem dozwolonego ruchu w regułach 1 i 4).</span><span class="sxs-lookup"><span data-stu-id="8240c-383">Rule 6 (deny) blocks hello front-end subnet from talking toohello back-end subnet (except for allowed traffic in rules 1 and 4).</span></span> <span data-ttu-id="8240c-384">Ten zestaw reguł chroni hello sieci wewnętrznej, w przypadku, gdy osoba atakująca obniża hello aplikacja sieci web frontonu hello.</span><span class="sxs-lookup"><span data-stu-id="8240c-384">This rule-set protects hello back-end network in case an attacker compromises hello web application on hello front end.</span></span> <span data-ttu-id="8240c-385">Osoba atakująca Hello będzie ograniczona "chronionych" sieciowej zaplecza toohello dostępu (tylko tooresources udostępniane na serwerze AppVM01 hello).</span><span class="sxs-lookup"><span data-stu-id="8240c-385">hello attacker would have limited access toohello back-end “protected” network (only tooresources exposed on hello AppVM01 server).</span></span>

<span data-ttu-id="8240c-386">Brak domyślnej regule wychodzącej, która umożliwia ruchu wychodzącego toohello Internet.</span><span class="sxs-lookup"><span data-stu-id="8240c-386">There is a default outbound rule that allows traffic out toohello Internet.</span></span> <span data-ttu-id="8240c-387">Na przykład firma Microsoft zezwala na ruch wychodzący i nie modyfikowanie reguł wychodzących.</span><span class="sxs-lookup"><span data-stu-id="8240c-387">For this example, we’re allowing outbound traffic and not modifying any outbound rules.</span></span> <span data-ttu-id="8240c-388">toolock dół ruchu w obu kierunkach, routing zdefiniowane przez użytkownika jest wymagana (Zobacz przykład 3).</span><span class="sxs-lookup"><span data-stu-id="8240c-388">toolock down traffic in both directions, user-defined routing is required (see example 3).</span></span>

#### <a name="firewall-rule-description"></a><span data-ttu-id="8240c-389">Opis reguły zapory</span><span class="sxs-lookup"><span data-stu-id="8240c-389">Firewall rule description</span></span>
<span data-ttu-id="8240c-390">W zaporze hello powinny być tworzone zasady przekazywania.</span><span class="sxs-lookup"><span data-stu-id="8240c-390">On hello firewall, forwarding rules should be created.</span></span> <span data-ttu-id="8240c-391">Ponieważ ten przykład tylko trasy Internet ruchu przychodzącego toohello zapory i następnie toohello serwera sieci web, tylko jeden przekazywania sieci translacji adresów (NAT) reguły jest wymagane.</span><span class="sxs-lookup"><span data-stu-id="8240c-391">Since this example only routes Internet traffic in-bound toohello firewall and then toohello web server, only one forwarding network address translation (NAT) rule is needed.</span></span>

<span data-ttu-id="8240c-392">Hello przekazywania Reguła akceptuje każdego adresu źródłowego dla ruchu przychodzącego, który trafienia zapory hello próby tooreach HTTP (port 80 i 443 dla protokołu HTTPS).</span><span class="sxs-lookup"><span data-stu-id="8240c-392">hello forwarding rule accepts any inbound source address that hits hello firewall trying tooreach HTTP (port 80 or 443 for HTTPS).</span></span> <span data-ttu-id="8240c-393">Ma ona wysyłane poza interfejsu lokalne powitania zapory i Przekierowanie toohello serwera sieci web z hello 10.0.1.5 adres IP.</span><span class="sxs-lookup"><span data-stu-id="8240c-393">It's sent out of hello firewall’s local interface and redirected toohello web server with hello IP Address of 10.0.1.5.</span></span>

#### <a name="conclusion"></a><span data-ttu-id="8240c-394">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="8240c-394">Conclusion</span></span>
<span data-ttu-id="8240c-395">W tym przykładzie jest względnie łatwe ochronie aplikacji za pomocą zapory i izolowanie podsieci wewnętrznej hello z ruchu przychodzącego.</span><span class="sxs-lookup"><span data-stu-id="8240c-395">This example is a relatively straightforward way of protecting your application with a firewall and isolating hello back-end subnet from inbound traffic.</span></span> <span data-ttu-id="8240c-396">Aby uzyskać więcej informacji, zobacz hello [szczegółowe instrukcje kompilacji][Example2].</span><span class="sxs-lookup"><span data-stu-id="8240c-396">For more information, see hello [detailed build instructions][Example2].</span></span> <span data-ttu-id="8240c-397">Instrukcje te obejmują:</span><span class="sxs-lookup"><span data-stu-id="8240c-397">These instructions include:</span></span>

* <span data-ttu-id="8240c-398">Jak toobuild obwodowej tej sieci z klasycznym skryptów programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8240c-398">How toobuild this perimeter network with classic PowerShell scripts.</span></span>
* <span data-ttu-id="8240c-399">Jak toobuild w tym przykładzie z szablonem usługi Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="8240c-399">How toobuild this example with an Azure Resource Manager template.</span></span>
* <span data-ttu-id="8240c-400">Szczegółowy opis każdego polecenia i zapory reguły NSG.</span><span class="sxs-lookup"><span data-stu-id="8240c-400">Detailed descriptions of each NSG command and firewall rule.</span></span>
* <span data-ttu-id="8240c-401">Scenariusze przepływu ruchu szczegółowe, przedstawiający sposób ruch jest dozwolony lub zabroniony w każdej warstwie.</span><span class="sxs-lookup"><span data-stu-id="8240c-401">Detailed traffic flow scenarios, showing how traffic is allowed or denied in each layer.</span></span>

### <a name="example-3-build-a-perimeter-network-toohelp-protect-networks-with-a-firewall-and-udr-and-nsg"></a><span data-ttu-id="8240c-402">Przykład 3 kompilacji toohelp sieci obwodowej ochrony sieci zapory i przez i grupy NSG</span><span class="sxs-lookup"><span data-stu-id="8240c-402">Example 3 Build a perimeter network toohelp protect networks with a firewall and UDR and NSG</span></span>
<span data-ttu-id="8240c-403">[Kopii tooFast start](#fast-start) | [szczegółowy kompilacji instrukcje w tym przykładzie][Example3]</span><span class="sxs-lookup"><span data-stu-id="8240c-403">[Back tooFast start](#fast-start) | [Detailed build instructions for this example][Example3]</span></span>

<span data-ttu-id="8240c-404">[![9]][9]</span><span class="sxs-lookup"><span data-stu-id="8240c-404">[![9]][9]</span></span>

#### <a name="environment-description"></a><span data-ttu-id="8240c-405">Opis elementu środowiska</span><span class="sxs-lookup"><span data-stu-id="8240c-405">Environment description</span></span>
<span data-ttu-id="8240c-406">W tym przykładzie jest subskrypcji, która zawiera hello następujące zasoby:</span><span class="sxs-lookup"><span data-stu-id="8240c-406">In this example, there is a subscription that contains hello following resources:</span></span>

* <span data-ttu-id="8240c-407">Pojedyncza grupa zasobów</span><span class="sxs-lookup"><span data-stu-id="8240c-407">A single resource group</span></span>
* <span data-ttu-id="8240c-408">Sieć wirtualną przy użyciu trzech podsieci: "SecNet", "Fronton" i "Wewnętrzna"</span><span class="sxs-lookup"><span data-stu-id="8240c-408">A virtual network with three subnets: “SecNet”, “FrontEnd”, and “BackEnd”</span></span>
* <span data-ttu-id="8240c-409">Urządzenie wirtualne sieci, w tym przypadku, a Zapora połączona toohello SecNet podsieci</span><span class="sxs-lookup"><span data-stu-id="8240c-409">A network virtual appliance, in this case a firewall, connected toohello SecNet subnet</span></span>
* <span data-ttu-id="8240c-410">Windows server, który reprezentuje serwer sieci web aplikacji ("IIS01")</span><span class="sxs-lookup"><span data-stu-id="8240c-410">A Windows server that represents an application web server (“IIS01”)</span></span>
* <span data-ttu-id="8240c-411">Dwa serwery systemu Windows, które reprezentują serwery zaplecza aplikacji ("AppVM01", "AppVM02")</span><span class="sxs-lookup"><span data-stu-id="8240c-411">Two Windows servers that represent application back-end servers (“AppVM01”, “AppVM02”)</span></span>
* <span data-ttu-id="8240c-412">Windows server, który reprezentuje serwer DNS ("DNS01")</span><span class="sxs-lookup"><span data-stu-id="8240c-412">A Windows server that represents a DNS server (“DNS01”)</span></span>

<span data-ttu-id="8240c-413">Skrypty i szablonu usługi Azure Resource Manager, zobacz hello [szczegółowe instrukcje kompilacji][Example3].</span><span class="sxs-lookup"><span data-stu-id="8240c-413">For scripts and an Azure Resource Manager template, see hello [detailed build instructions][Example3].</span></span>

#### <a name="udr-description"></a><span data-ttu-id="8240c-414">Opis elementu przez</span><span class="sxs-lookup"><span data-stu-id="8240c-414">UDR description</span></span>
<span data-ttu-id="8240c-415">Domyślnie program hello następujące trasy systemowe są zdefiniowane jako:</span><span class="sxs-lookup"><span data-stu-id="8240c-415">By default, hello following system routes are defined as:</span></span>

        Effective routes :
         Address Prefix    Next hop type    Next hop IP address Status   Source     
         --------------    -------------    ------------------- ------   ------     
         {10.0.0.0/16}     VNETLocal                            Active   Default    
         {0.0.0.0/0}       Internet                             Active   Default    
         {10.0.0.0/8}      Null                                 Active   Default    
         {100.64.0.0/10}   Null                                 Active   Default    
         {172.16.0.0/12}   Null                                 Active   Default    
         {192.168.0.0/16}  Null                                 Active   Default

<span data-ttu-id="8240c-416">Witaj VNETLocal jest zawsze prefiksy adresów zdefiniowanych, wchodzące w skład hello sieci wirtualnej dla określonej sieci (czyli jego zmiany z sieci toovirtual sieci wirtualnej, w zależności od tego, jak zdefiniowano każdej określonej sieci wirtualnej).</span><span class="sxs-lookup"><span data-stu-id="8240c-416">hello VNETLocal is always one or more defined address prefixes that make up hello virtual network for that specific network (that is, it changes from virtual network toovirtual network, depending on how each specific virtual network is defined).</span></span> <span data-ttu-id="8240c-417">trasy systemowe pozostałych Hello są statyczne i domyślne jak wskazano w tabeli hello.</span><span class="sxs-lookup"><span data-stu-id="8240c-417">hello remaining system routes are static and default as indicated in hello table.</span></span>

<span data-ttu-id="8240c-418">W tym przykładzie dwie tabele routingu są tworzone, jeden dla hello podsieci frontonu i zaplecza.</span><span class="sxs-lookup"><span data-stu-id="8240c-418">In this example, two routing tables are created, one each for hello front-end and back-end subnets.</span></span> <span data-ttu-id="8240c-419">Każda tabela tras statycznych, które są odpowiednie dla podanej podsieci hello jest załadowana.</span><span class="sxs-lookup"><span data-stu-id="8240c-419">Each table is loaded with static routes appropriate for hello given subnet.</span></span> <span data-ttu-id="8240c-420">W tym przykładzie każda tabela zawiera trzy tras, na których kierować cały ruch (0.0.0.0/0) za pośrednictwem zapory hello (następnego przeskoku = adres IP urządzenia wirtualnego):</span><span class="sxs-lookup"><span data-stu-id="8240c-420">In this example, each table has three routes that direct all traffic (0.0.0.0/0) through hello firewall (Next hop = Virtual Appliance IP address):</span></span>

1. <span data-ttu-id="8240c-421">Ruchu w podsieci lokalnej z następnego przeskoku zdefiniowane tooallow podsieci lokalnej ruchu toobypass hello zapory.</span><span class="sxs-lookup"><span data-stu-id="8240c-421">Local subnet traffic with no Next Hop defined tooallow local subnet traffic toobypass hello firewall.</span></span>
2. <span data-ttu-id="8240c-422">Ruchu w sieci wirtualnej z przeskoku dalej zdefiniowany jako zapory.</span><span class="sxs-lookup"><span data-stu-id="8240c-422">Virtual network traffic with a Next Hop defined as firewall.</span></span> <span data-ttu-id="8240c-423">Ta następnego przeskoku przesłania hello domyślna reguła, która umożliwia bezpośrednio tooroute ruchu lokalną sieć wirtualną.</span><span class="sxs-lookup"><span data-stu-id="8240c-423">This next hop overrides hello default rule that allows local virtual network traffic tooroute directly.</span></span>
3. <span data-ttu-id="8240c-424">Wszystkie pozostałe ruchu (0/0) z następnego przeskoku zdefiniowany jako hello zapory.</span><span class="sxs-lookup"><span data-stu-id="8240c-424">All remaining traffic (0/0) with a Next Hop defined as hello firewall.</span></span>

> [!TIP]
> <span data-ttu-id="8240c-425">Nie ma wpisu podsieci lokalnej hello w hello przez podziały podsieci lokalnej komunikacji.</span><span class="sxs-lookup"><span data-stu-id="8240c-425">Not having hello local subnet entry in hello UDR breaks local subnet communications.</span></span>
>
> * <span data-ttu-id="8240c-426">W naszym przykładzie 10.0.1.0/24 wskazanie tooVNETLocal jest krytyczny!</span><span class="sxs-lookup"><span data-stu-id="8240c-426">In our example, 10.0.1.0/24 pointing tooVNETLocal is critical!</span></span> <span data-ttu-id="8240c-427">Bez tego pakietu, pozostawiając powitania serwera sieci Web (10.0.1.4) przeznaczone tooanother serwer lokalny (na przykład) 10.0.1.25 wystąpi błąd, ponieważ zostaną wysłane toohello NVA.</span><span class="sxs-lookup"><span data-stu-id="8240c-427">Without it, packet leaving hello Web Server (10.0.1.4) destined tooanother local server (for example) 10.0.1.25 will fail as they will be sent toohello NVA.</span></span> <span data-ttu-id="8240c-428">Hello NVA wysyła on toohello podsieci i podsieci hello zostanie ponownie toohello NVA w pętli nieskończonej.</span><span class="sxs-lookup"><span data-stu-id="8240c-428">hello NVA will send it toohello subnet, and hello subnet will resend it toohello NVA in an infinite loop.</span></span>
> * <span data-ttu-id="8240c-429">ryzyko Hello Pętla routingu są zazwyczaj wyższe na urządzeniach z wieloma kartami sieciowymi, które są połączone tooseparate podsieci, które jest często tradycyjnych, lokalnie urządzeń.</span><span class="sxs-lookup"><span data-stu-id="8240c-429">hello chances of a routing loop are typically higher on appliances with multiple NICs that are connected tooseparate subnets, which is often of traditional, on-premises appliances.</span></span>
>
>

<span data-ttu-id="8240c-430">Po utworzeniu hello tabele routingu, muszą być powiązane tootheir podsieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-430">Once hello routing tables are created, they must be bound tootheir subnets.</span></span> <span data-ttu-id="8240c-431">Witaj podsieci frontonu tabeli routingu, utworzonej i powiązany toohello podsieci, będzie wyglądać te dane wyjściowe:</span><span class="sxs-lookup"><span data-stu-id="8240c-431">hello front-end subnet routing table, once created and bound toohello subnet, would look like this output:</span></span>

        Effective routes :
         Address Prefix    Next hop type    Next hop IP address Status   Source     
         --------------    -------------    ------------------- ------   ------     
         {10.0.1.0/24}     VNETLocal                            Active
         {10.0.0.0/16}     VirtualAppliance 10.0.0.4            Active    
         {0.0.0.0/0}       VirtualAppliance 10.0.0.4            Active

> [!NOTE]
> <span data-ttu-id="8240c-432">PRZEZ teraz mogą być zastosowane toohello podsieć bramy, na które hello ExpressRoute obwód jest połączony.</span><span class="sxs-lookup"><span data-stu-id="8240c-432">UDR can now be applied toohello gateway subnet on which hello ExpressRoute circuit is connected.</span></span>
>
> <span data-ttu-id="8240c-433">W przykładach 3 i 4 przedstawiono przykładowe jak tooenable sieci obwodowej sieci ExpressRoute lub sieci lokacja lokacja.</span><span class="sxs-lookup"><span data-stu-id="8240c-433">Examples of how tooenable your perimeter network with ExpressRoute or site-to-site networking are shown in examples 3 and 4.</span></span>
>
>

#### <a name="ip-forwarding-description"></a><span data-ttu-id="8240c-434">Opis usługi przesyłania dalej protokołu IP</span><span class="sxs-lookup"><span data-stu-id="8240c-434">IP Forwarding description</span></span>
<span data-ttu-id="8240c-435">Przekazywanie adresów IP jest tooUDR funkcji pomocnika.</span><span class="sxs-lookup"><span data-stu-id="8240c-435">IP Forwarding is a companion feature tooUDR.</span></span> <span data-ttu-id="8240c-436">Przekazywanie adresów IP to ustawienie na urządzenie wirtualne, które umożliwia jej tooreceive ruchu kierowanego nie specjalnie toohello urządzenia, a następnie przesyła ten ruch tooits ostatecznym miejscem przeznaczenia.</span><span class="sxs-lookup"><span data-stu-id="8240c-436">IP Forwarding is a setting on a virtual appliance that allows it tooreceive traffic not specifically addressed toohello appliance, and then forward that traffic tooits ultimate destination.</span></span>

<span data-ttu-id="8240c-437">Na przykład jeśli AppVM01 sprawia, że serwer DNS01 toohello żądania, przez czy trasy Zapora toohello ruchu.</span><span class="sxs-lookup"><span data-stu-id="8240c-437">For example, if AppVM01 makes a request toohello DNS01 server, UDR would route this traffic toohello firewall.</span></span> <span data-ttu-id="8240c-438">Włączone przekazywanie adresów IP hello ruchu dla miejsca docelowego DNS01 hello (10.0.2.4) jest akceptowane przez urządzenia hello (10.0.0.4) i przesyłane dalej ostatecznym miejscem przeznaczenia tooits (10.0.2.4).</span><span class="sxs-lookup"><span data-stu-id="8240c-438">With IP Forwarding enabled, hello traffic for hello DNS01 destination (10.0.2.4) is accepted by hello appliance (10.0.0.4) and then forwarded tooits ultimate destination (10.0.2.4).</span></span> <span data-ttu-id="8240c-439">Bez przesyłania dalej protokołu IP włączone na zaporze hello ruch może nie zostać zaakceptowane przez hello urządzenia nawet hello tabeli tras ma zapory hello jako hello następnego przeskoku.</span><span class="sxs-lookup"><span data-stu-id="8240c-439">Without IP Forwarding enabled on hello firewall, traffic would not be accepted by hello appliance even though hello route table has hello firewall as hello next hop.</span></span> <span data-ttu-id="8240c-440">toouse urządzenie wirtualne jest krytyczne tooremember tooenable IP przekazywania oraz przez.</span><span class="sxs-lookup"><span data-stu-id="8240c-440">toouse a virtual appliance, it’s critical tooremember tooenable IP Forwarding along with UDR.</span></span>

#### <a name="nsg-description"></a><span data-ttu-id="8240c-441">Opis grupy NSG</span><span class="sxs-lookup"><span data-stu-id="8240c-441">NSG description</span></span>
<span data-ttu-id="8240c-442">W tym przykładzie grupa NSG jest wbudowana i następnie ładowane przy użyciu jednej reguły.</span><span class="sxs-lookup"><span data-stu-id="8240c-442">In this example, an NSG group is built and then loaded with a single rule.</span></span> <span data-ttu-id="8240c-443">Ta grupa jest następnie powiązany tylko toohello frontonu i zaplecza podsieci (nie hello SecNet).</span><span class="sxs-lookup"><span data-stu-id="8240c-443">This group is then bound only toohello front-end and back-end subnets (not hello SecNet).</span></span> <span data-ttu-id="8240c-444">Deklaratywnie budowanego hello następujące reguły:</span><span class="sxs-lookup"><span data-stu-id="8240c-444">Declaratively hello following rule is being built:</span></span>

* <span data-ttu-id="8240c-445">Odmowa cały ruch (wszystkie porty) z hello Internet toohello całej sieci wirtualnej (wszystkie podsieci).</span><span class="sxs-lookup"><span data-stu-id="8240c-445">Any traffic (all ports) from hello Internet toohello entire virtual network (all subnets) is denied.</span></span>

<span data-ttu-id="8240c-446">Mimo że grupy NSG są używane w tym przykładzie, głównym celem jest jako dodatkowej warstwy obrony przed ręcznej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="8240c-446">Although NSGs are used in this example, its main purpose is as a secondary layer of defense against manual misconfiguration.</span></span> <span data-ttu-id="8240c-447">Witaj celem jest tooblock cały ruch przychodzący z hello Internet tooeither hello podsieci frontonu lub zaplecza.</span><span class="sxs-lookup"><span data-stu-id="8240c-447">hello goal is tooblock all inbound traffic from hello Internet tooeither hello front-end or back-end subnets.</span></span> <span data-ttu-id="8240c-448">Ruch powinny przepływać tylko za pośrednictwem zapory toohello podsieci SecNet hello (i następnie w razie potrzeby podsieci frontonu lub zaplecza toohello).</span><span class="sxs-lookup"><span data-stu-id="8240c-448">Traffic should only flow through hello SecNet subnet toohello firewall (and then, if appropriate, on toohello front-end or back-end subnets).</span></span> <span data-ttu-id="8240c-449">Plus przy użyciu reguł przez hello w miejscu, cały ruch, że na powitania podsieci frontonu lub zaplecza czy przekierowanie limit toohello zapory (Dziękujemy tooUDR).</span><span class="sxs-lookup"><span data-stu-id="8240c-449">Plus, with hello UDR rules in place, any traffic that did make it into hello front-end or back-end subnets would be directed out toohello firewall (thanks tooUDR).</span></span> <span data-ttu-id="8240c-450">Zapora Hello będzie wyświetlać ten ruch asymetrycznego przepływu i spowoduje pominięcie hello ruchu wychodzącego.</span><span class="sxs-lookup"><span data-stu-id="8240c-450">hello firewall would see this traffic as an asymmetric flow and would drop hello outbound traffic.</span></span> <span data-ttu-id="8240c-451">W związku z tym są trzy warstwy zabezpieczeń Ochrona powitalnych podsieci:</span><span class="sxs-lookup"><span data-stu-id="8240c-451">Thus there are three layers of security protecting hello subnets:</span></span>

* <span data-ttu-id="8240c-452">Nie publiczny adres IP frontonu lub wewnętrznej bazy danych kart sieciowych.</span><span class="sxs-lookup"><span data-stu-id="8240c-452">No Public IP addresses on any FrontEnd or BackEnd NICs.</span></span>
* <span data-ttu-id="8240c-453">Grupy NSG uniemożliwienie ruchu hello Internet.</span><span class="sxs-lookup"><span data-stu-id="8240c-453">NSGs denying traffic from hello Internet.</span></span>
* <span data-ttu-id="8240c-454">Witaj zapory usunięcie asymetrycznego ruchu.</span><span class="sxs-lookup"><span data-stu-id="8240c-454">hello firewall dropping asymmetric traffic.</span></span>

<span data-ttu-id="8240c-455">Jeden punkt interesujące dotyczące hello NSG, w tym przykładzie jest zawiera tylko jedną regułę, czyli toodeny Internet ruchu toohello całej sieci wirtualnej, tym hello zabezpieczeń podsieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-455">One interesting point regarding hello NSG in this example is that it contains only one rule, which is toodeny Internet traffic toohello entire virtual network, including hello Security subnet.</span></span> <span data-ttu-id="8240c-456">Jednak ponieważ hello grupa NSG jest tylko powiązany toohello frontonu i zaplecza podsieci, reguła hello nie jest przetwarzane na ruch ruchu przychodzącego toohello zabezpieczeń podsieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-456">However, since hello NSG is only bound toohello front-end and back-end subnets, hello rule isn’t processed on traffic inbound toohello Security subnet.</span></span> <span data-ttu-id="8240c-457">W związku z tym podsieci zabezpieczeń toohello przepływa ruch.</span><span class="sxs-lookup"><span data-stu-id="8240c-457">As a result, traffic flows toohello Security subnet.</span></span>

#### <a name="firewall-rules"></a><span data-ttu-id="8240c-458">Reguły zapory</span><span class="sxs-lookup"><span data-stu-id="8240c-458">Firewall rules</span></span>
<span data-ttu-id="8240c-459">W zaporze hello powinny być tworzone zasady przekazywania.</span><span class="sxs-lookup"><span data-stu-id="8240c-459">On hello firewall, forwarding rules should be created.</span></span> <span data-ttu-id="8240c-460">Ponieważ Zapora hello jest blokowanie lub przekazywania wszystkich przychodzące, wychodzące i ruchu w sieci wirtualnej w obrębie, wiele reguł zapory są wymagane.</span><span class="sxs-lookup"><span data-stu-id="8240c-460">Since hello firewall is blocking or forwarding all inbound, outbound, and intra-virtual network traffic, many firewall rules are needed.</span></span> <span data-ttu-id="8240c-461">Ponadto cały ruch przychodzący trafienia hello usługi zabezpieczeń publicznego adresu IP (różne porty), toobe przetworzony przez zaporę Windows hello.</span><span class="sxs-lookup"><span data-stu-id="8240c-461">Also, all inbound traffic hits hello Security Service public IP address (on different ports), toobe processed by hello firewall.</span></span> <span data-ttu-id="8240c-462">Najlepszym rozwiązaniem jest toodiagram hello logicznej przepływów przed rozpoczęciem konfigurowania hello podsieci i reguły zapory, tooavoid zmian później.</span><span class="sxs-lookup"><span data-stu-id="8240c-462">A best practice is toodiagram hello logical flows before setting up hello subnets and firewall rules, tooavoid rework later.</span></span> <span data-ttu-id="8240c-463">Witaj poniższej ilustracji jest widok logiczny hello reguły zapory w tym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="8240c-463">hello following figure is a logical view of hello firewall rules for this example:</span></span>

<span data-ttu-id="8240c-464">![10]</span><span class="sxs-lookup"><span data-stu-id="8240c-464">![10]</span></span>

> [!NOTE]
> <span data-ttu-id="8240c-465">Oparte na powitania używanych przez urządzenie wirtualne sieci, hello porty zarządzania różnią się.</span><span class="sxs-lookup"><span data-stu-id="8240c-465">Based on hello Network Virtual Appliance used, hello management ports vary.</span></span> <span data-ttu-id="8240c-466">W tym przykładzie zapory NextGen Barracuda odwołuje się, który używa portów 22, 801 i 807.</span><span class="sxs-lookup"><span data-stu-id="8240c-466">In this example, a Barracuda NextGen Firewall is referenced, which uses ports 22, 801, and 807.</span></span> <span data-ttu-id="8240c-467">Zapoznaj się hello urządzenia dostawcy dokumentacji toofind hello porty używane do zarządzania hello urządzenie używane.</span><span class="sxs-lookup"><span data-stu-id="8240c-467">Consult hello appliance vendor documentation toofind hello exact ports used for management of hello device being used.</span></span>
>
>

#### <a name="firewall-rules-description"></a><span data-ttu-id="8240c-468">Opis reguł zapory</span><span class="sxs-lookup"><span data-stu-id="8240c-468">Firewall rules description</span></span>
<span data-ttu-id="8240c-469">W hello poprzedzających diagram logiczny hello zabezpieczeń podsieci nie jest wyświetlane, ponieważ Zapora hello jest hello tylko zasobów tej podsieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-469">In hello preceding logical diagram, hello security subnet is not shown because hello firewall is hello only resource on that subnet.</span></span> <span data-ttu-id="8240c-470">Hello diagram jest pokazywany hello reguły zapory i sposób ich logicznie akceptować lub odrzucać przepływów ruchu sieciowego, nie hello routingiem ścieżkę.</span><span class="sxs-lookup"><span data-stu-id="8240c-470">hello diagram is showing hello firewall rules and how they logically allow or deny traffic flows, not hello actual routed path.</span></span> <span data-ttu-id="8240c-471">Ponadto zewnętrzne porty hello wybrany na potrzeby hello na ruch RDP są wyższe ranged portów (8014 — 8026) i zostały wybrane tooloosely są wyrównane z hello ostatni dwa oktety hello lokalny adres IP dla czytelności łatwiejsze (na przykład serwer lokalny adres 10.0.1.4 jest skojarzony z portu zewnętrznego 8014).</span><span class="sxs-lookup"><span data-stu-id="8240c-471">Also, hello external ports selected for hello RDP traffic are higher ranged ports (8014 – 8026) and were selected tooloosely align with hello last two octets of hello local IP address for easier readability (for example, local server address 10.0.1.4 is associated with external port 8014).</span></span> <span data-ttu-id="8240c-472">Wszystkie porty wyższej niekolidujących, mogą zostać wykorzystane.</span><span class="sxs-lookup"><span data-stu-id="8240c-472">Any higher non-conflicting ports, however, could be used.</span></span>

<span data-ttu-id="8240c-473">W tym przykładzie potrzebne są nam siedem typów zasad:</span><span class="sxs-lookup"><span data-stu-id="8240c-473">For this example, we need seven types of rules:</span></span>

* <span data-ttu-id="8240c-474">Reguły zewnętrzne (dla ruchu przychodzącego):</span><span class="sxs-lookup"><span data-stu-id="8240c-474">External rules (for inbound traffic):</span></span>
  1. <span data-ttu-id="8240c-475">Reguły zapory zarządzania: ten przekierowania aplikacji reguła zezwala toopass ruchu porty zarządzania toohello hello sieci wirtualne urządzenia.</span><span class="sxs-lookup"><span data-stu-id="8240c-475">Firewall management rule: This App Redirect rule allows traffic toopass toohello management ports of hello network virtual appliance.</span></span>
  2. <span data-ttu-id="8240c-476">Zasady protokołu RDP (na każdym serwerze z systemem Windows): następujące cztery reguły (po jednym dla każdego serwera) Zezwalaj na zarządzanie hello poszczególnych serwerów za pomocą protokołu RDP.</span><span class="sxs-lookup"><span data-stu-id="8240c-476">RDP rules (for each Windows server): These four rules (one for each server) allow management of hello individual servers via RDP.</span></span> <span data-ttu-id="8240c-477">cztery reguły protokołu RDP Hello może zostać zwinięty również do jednej reguły, w zależności od możliwości hello urządzenie wirtualne sieci hello jest używany.</span><span class="sxs-lookup"><span data-stu-id="8240c-477">hello four RDP rules could also be collapsed into one rule, depending on hello capabilities of hello network virtual appliance being used.</span></span>
  3. <span data-ttu-id="8240c-478">Reguły ruchu aplikacji: istnieją dwa z tych zasad, hello najpierw transmisji hello frontonu sieci web i hello drugi transmisji hello zaplecza (na przykład warstwa sieci web serwera toodata).</span><span class="sxs-lookup"><span data-stu-id="8240c-478">Application traffic rules: There are two of these rules, hello first for hello front-end web traffic, and hello second for hello back-end traffic (for example, web server toodata tier).</span></span> <span data-ttu-id="8240c-479">Konfiguracja Hello tych reguł zależy od tego, hello architektury sieci (w którym są umieszczane serwerów) oraz ruch (które ruchu hello kierunek przepływu i które porty są używane).</span><span class="sxs-lookup"><span data-stu-id="8240c-479">hello configuration of these rules depends on hello network architecture (where your servers are placed) and traffic flows (which direction hello traffic flows, and which ports are used).</span></span>
     * <span data-ttu-id="8240c-480">Pierwsza reguła Hello zezwala serwerowi aplikacji hello tooreach hello rzeczywistej aplikacji ruchu.</span><span class="sxs-lookup"><span data-stu-id="8240c-480">hello first rule allows hello actual application traffic tooreach hello application server.</span></span> <span data-ttu-id="8240c-481">Hello inne reguły zezwalają na potrzeby zabezpieczeń i zarządzania, reguły ruchu aplikacji są co Pozwól zewnętrznych tooaccess użytkowników lub usług aplikacji hello.</span><span class="sxs-lookup"><span data-stu-id="8240c-481">While hello other rules allow for security and management, application traffic rules are what allow external users or services tooaccess hello applications.</span></span> <span data-ttu-id="8240c-482">Ten przykład jest jednym serwerze sieci web na porcie 80.</span><span class="sxs-lookup"><span data-stu-id="8240c-482">For this example, there is a single web server on port 80.</span></span> <span data-ttu-id="8240c-483">W związku z tym pojedynczą aplikacji regułę zapory przekierowuje ruch przychodzący toohello IP zewnętrznego, toohello serwerów wewnętrzny adres IP sieci web.</span><span class="sxs-lookup"><span data-stu-id="8240c-483">Thus a single firewall application rule redirects inbound traffic toohello external IP, toohello web servers internal IP address.</span></span> <span data-ttu-id="8240c-484">Czy można przetłumaczyć Hello przekierowanie ruchu sesji za pośrednictwem NAT toohello wewnętrznego serwera.</span><span class="sxs-lookup"><span data-stu-id="8240c-484">hello redirected traffic session would be translated via NAT toohello internal server.</span></span>
     * <span data-ttu-id="8240c-485">drugą regułę Hello jest hello reguły zaplecza tooallow hello web tootalk toohello AppVM01 serwera (ale nie AppVM02) za pomocą dowolnego portu.</span><span class="sxs-lookup"><span data-stu-id="8240c-485">hello second rule is hello back-end rule tooallow hello web server tootalk toohello AppVM01 server (but not AppVM02) via any port.</span></span>
* <span data-ttu-id="8240c-486">Reguły wewnętrzne (dla ruchu w sieci wirtualnej w obrębie)</span><span class="sxs-lookup"><span data-stu-id="8240c-486">Internal rules (for intra-virtual network traffic)</span></span>
  1. <span data-ttu-id="8240c-487">Reguła ruchu wychodzącego tooInternet: Ta reguła zezwala na ruch z żadną siecią toopass toohello wybrane sieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-487">Outbound tooInternet rule: This rule allows traffic from any network toopass toohello selected networks.</span></span> <span data-ttu-id="8240c-488">Ta reguła jest zwykle domyślna reguła już na powitania zapory, ale w stanie wyłączenia.</span><span class="sxs-lookup"><span data-stu-id="8240c-488">This rule is usually a default rule already on hello firewall, but in a disabled state.</span></span> <span data-ttu-id="8240c-489">Ta reguła powinna być włączona w tym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="8240c-489">This rule should be enabled for this example.</span></span>
  2. <span data-ttu-id="8240c-490">Reguła DNS: ta zasada umożliwia tylko DNS (port 53) ruchu toopass toohello serwera DNS.</span><span class="sxs-lookup"><span data-stu-id="8240c-490">DNS rule: This rule allows only DNS (port 53) traffic toopass toohello DNS server.</span></span> <span data-ttu-id="8240c-491">Dla tego środowiska większość ruchu z wewnętrznego hello frontonu toohello jest zablokowany.</span><span class="sxs-lookup"><span data-stu-id="8240c-491">For this environment, most traffic from hello front end toohello back end is blocked.</span></span> <span data-ttu-id="8240c-492">Ta zasada umożliwia w szczególności DNS z żadnych podsieci lokalnej.</span><span class="sxs-lookup"><span data-stu-id="8240c-492">This rule specifically allows DNS from any local subnet.</span></span>
  3. <span data-ttu-id="8240c-493">Reguła toosubnet podsieci: Ta reguła jest tooallow dowolnego serwera na powitania podsieci wewnętrznej tooconnect tooany serwera na powitania podsieci frontonu (ale nie hello odwrotnej).</span><span class="sxs-lookup"><span data-stu-id="8240c-493">Subnet toosubnet rule: This rule is tooallow any server on hello back-end subnet tooconnect tooany server on hello front-end subnet (but not hello reverse).</span></span>
* <span data-ttu-id="8240c-494">Reguła awaryjnego (dla ruchu, który nie spełnia żadnego z poprzednich hello):</span><span class="sxs-lookup"><span data-stu-id="8240c-494">Fail-safe rule (for traffic that doesn’t meet any of hello previous):</span></span>
  1. <span data-ttu-id="8240c-495">Odmów wszystkie reguły ruchu: Ta reguła odmowy zawsze powinna być hello reguły końcowego (w zakresie priorytet) i jako taki przypadku przepływ ruchu niepowodzenia toomatch żadnego hello poprzedzających reguły zostanie usunięte przez tę regułę.</span><span class="sxs-lookup"><span data-stu-id="8240c-495">Deny all traffic rule: This deny rule should always be hello final rule (in terms of priority), and as such if a traffic flow fails toomatch any of hello preceding rules it is dropped by this rule.</span></span> <span data-ttu-id="8240c-496">Ta reguła jest regułą domyślnego i zwykle w miejscu i aktywne.</span><span class="sxs-lookup"><span data-stu-id="8240c-496">This rule is a default rule and usually in-place and active.</span></span> <span data-ttu-id="8240c-497">Modyfikacje nie są zazwyczaj potrzebne toothis reguły.</span><span class="sxs-lookup"><span data-stu-id="8240c-497">No modifications are usually needed toothis rule.</span></span>

> [!TIP]
> <span data-ttu-id="8240c-498">Na powitania reguły, toosimplify ruchu drugiej aplikacji, w tym przykładzie jest dozwolone dowolnego portu.</span><span class="sxs-lookup"><span data-stu-id="8240c-498">On hello second application traffic rule, toosimplify this example, any port is allowed.</span></span> <span data-ttu-id="8240c-499">W rzeczywistym scenariuszu hello najbardziej określonych zakresów port i adres powinien być używany tooreduce hello ataku tej reguły.</span><span class="sxs-lookup"><span data-stu-id="8240c-499">In a real scenario, hello most specific port and address ranges should be used tooreduce hello attack surface of this rule.</span></span>
>
>

<span data-ttu-id="8240c-500">Po utworzeniu reguły poprzedniej hello, ważne jest tooreview hello priorytetu ruchu tooensure każdej reguły jest dozwolony lub odrzucany zgodnie z potrzebami.</span><span class="sxs-lookup"><span data-stu-id="8240c-500">Once hello previous rules are created, it’s important tooreview hello priority of each rule tooensure traffic is allowed or denied as desired.</span></span> <span data-ttu-id="8240c-501">W tym przykładzie są reguły hello w kolejności priorytetu.</span><span class="sxs-lookup"><span data-stu-id="8240c-501">For this example, hello rules are in priority order.</span></span>

#### <a name="conclusion"></a><span data-ttu-id="8240c-502">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="8240c-502">Conclusion</span></span>
<span data-ttu-id="8240c-503">W tym przykładzie jest bardziej złożonych ale sposób ochrony i izolowanie hello sieci niż w poprzednich przykładach hello ukończenia.</span><span class="sxs-lookup"><span data-stu-id="8240c-503">This example is a more complex but complete way of protecting and isolating hello network than hello previous examples.</span></span> <span data-ttu-id="8240c-504">(Przykład 2 chroni tylko aplikacji hello oraz przykład 1 po prostu wyodrębnia podsieci).</span><span class="sxs-lookup"><span data-stu-id="8240c-504">(Example 2 protects just hello application, and Example 1 just isolates subnets).</span></span> <span data-ttu-id="8240c-505">Ten projekt umożliwia monitorowanie ruchu w obu kierunkach i chroni nie tylko hello przychodzących aplikacji serwera, ale wymusza zasady zabezpieczeń sieci dla wszystkich serwerów w tej sieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-505">This design allows for monitoring traffic in both directions, and protects not just hello inbound application server but enforces network security policy for all servers on this network.</span></span> <span data-ttu-id="8240c-506">Ponadto w zależności od urządzenia hello używane pełne ruchu inspekcji i rozpoznawanie można osiągnąć.</span><span class="sxs-lookup"><span data-stu-id="8240c-506">Also, depending on hello appliance used, full traffic auditing and awareness can be achieved.</span></span> <span data-ttu-id="8240c-507">Aby uzyskać więcej informacji, zobacz hello [szczegółowe instrukcje kompilacji][Example3].</span><span class="sxs-lookup"><span data-stu-id="8240c-507">For more information, see hello [detailed build instructions][Example3].</span></span> <span data-ttu-id="8240c-508">Instrukcje te obejmują:</span><span class="sxs-lookup"><span data-stu-id="8240c-508">These instructions include:</span></span>

* <span data-ttu-id="8240c-509">Jak toobuild obwodowej ten przykład sieci z klasycznym skryptów programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8240c-509">How toobuild this example perimeter network with classic PowerShell scripts.</span></span>
* <span data-ttu-id="8240c-510">Jak toobuild w tym przykładzie z szablonem usługi Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="8240c-510">How toobuild this example with an Azure Resource Manager template.</span></span>
* <span data-ttu-id="8240c-511">Szczegółowe opisy każdej przez NSG polecenia, a reguły zapory.</span><span class="sxs-lookup"><span data-stu-id="8240c-511">Detailed descriptions of each UDR, NSG command, and firewall rule.</span></span>
* <span data-ttu-id="8240c-512">Scenariusze przepływu ruchu szczegółowe, przedstawiający sposób ruch jest dozwolony lub zabroniony w każdej warstwie.</span><span class="sxs-lookup"><span data-stu-id="8240c-512">Detailed traffic flow scenarios, showing how traffic is allowed or denied in each layer.</span></span>

### <a name="example-4-add-a-hybrid-connection-with-a-site-to-site-virtual-appliance-vpn"></a><span data-ttu-id="8240c-513">Przykład 4 Dodaj połączenie hybrydowe z lokacja lokacja, wirtualne urządzenia sieci VPN</span><span class="sxs-lookup"><span data-stu-id="8240c-513">Example 4 Add a hybrid connection with a site-to-site, virtual appliance VPN</span></span>
<span data-ttu-id="8240c-514">[Kopii tooFast start](#fast-start) | Szczegółowe instrukcje kompilacji jest dostępny wkrótce</span><span class="sxs-lookup"><span data-stu-id="8240c-514">[Back tooFast start](#fast-start) | Detailed build instructions available soon</span></span>

<span data-ttu-id="8240c-515">[![11]][11]</span><span class="sxs-lookup"><span data-stu-id="8240c-515">[![11]][11]</span></span>

#### <a name="environment-description"></a><span data-ttu-id="8240c-516">Opis elementu środowiska</span><span class="sxs-lookup"><span data-stu-id="8240c-516">Environment description</span></span>
<span data-ttu-id="8240c-517">Sieci hybrydowe przy użyciu urządzenie wirtualne sieci (NVA) można dodać tooany typów sieci obwodowej hello opisanego w przykładach 1, 2 lub 3.</span><span class="sxs-lookup"><span data-stu-id="8240c-517">Hybrid networking using a network virtual appliance (NVA) can be added tooany of hello perimeter network types described in examples 1, 2, or 3.</span></span>

<span data-ttu-id="8240c-518">Jak pokazano na poprzedniej ilustracji hello, połączenie sieci VPN za pośrednictwem hello Internet (site-to-site) jest używane tooconnect tooan sieci lokalnej sieci wirtualnej platformy Azure za pośrednictwem NVA.</span><span class="sxs-lookup"><span data-stu-id="8240c-518">As shown in hello previous figure, a VPN connection over hello Internet (site-to-site) is used tooconnect an on-premises network tooan Azure virtual network via an NVA.</span></span>

> [!NOTE]
> <span data-ttu-id="8240c-519">Jeśli używasz usługi ExpressRoute z włączoną opcją publicznej komunikacji równorzędnej platformy Azure hello, należy utworzyć tras statycznych.</span><span class="sxs-lookup"><span data-stu-id="8240c-519">If you use ExpressRoute with hello Azure Public Peering option enabled, a static route should be created.</span></span> <span data-ttu-id="8240c-520">Tej trasy statyczne powinny kierować toohello adres IP sieci VPN NVA firmowej Internetu, a nie za pomocą hello połączenia ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="8240c-520">This static route should route toohello NVA VPN IP address out your corporate Internet and not via hello ExpressRoute connection.</span></span> <span data-ttu-id="8240c-521">Hello NAT wymagane na hello Azure publicznej komunikacji równorzędnej ExpressRoute opcji mogą być dzielone hello sesji sieci VPN.</span><span class="sxs-lookup"><span data-stu-id="8240c-521">hello NAT required on hello ExpressRoute Azure Public Peering option can break hello VPN session.</span></span>
>
>

<span data-ttu-id="8240c-522">Po NVA hello powitalne sieci VPN jest już na miejscu, staje się hello Centrum dla wszystkich sieci i podsieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-522">Once hello VPN is in place, hello NVA becomes hello central hub for all networks and subnets.</span></span> <span data-ttu-id="8240c-523">zasady przekazywania zapory Hello określić, jaki ruch przepływy są dozwolone, są tłumaczone za pośrednictwem translatora adresów Sieciowych, są przekierowywane lub porzuconych (nawet w przypadku przepływów ruchu sieciowego między hello siecią lokalną a platformą Azure).</span><span class="sxs-lookup"><span data-stu-id="8240c-523">hello firewall forwarding rules determine which traffic flows are allowed, are translated via NAT, are redirected, or are dropped (even for traffic flows between hello on-premises network and Azure).</span></span>

<span data-ttu-id="8240c-524">Ruch należy rozważyć, jak mogą być optymalizowane lub ograniczone przez ten wzorzec projektowania, w zależności od określonych hello przypadek użycia.</span><span class="sxs-lookup"><span data-stu-id="8240c-524">Traffic flows should be considered carefully, as they can be optimized or degraded by this design pattern, depending on hello specific use case.</span></span>

<span data-ttu-id="8240c-525">Przy użyciu środowiska hello wbudowane w przykładzie 3, a następnie dodanie połączenia sieciowego hybrydowego sieci VPN typu lokacja lokacja, tworzy hello następującego projektu:</span><span class="sxs-lookup"><span data-stu-id="8240c-525">Using hello environment built in example 3, and then adding a site-to-site VPN hybrid network connection, produces hello following design:</span></span>

<span data-ttu-id="8240c-526">[![12]][12]</span><span class="sxs-lookup"><span data-stu-id="8240c-526">[![12]][12]</span></span>

<span data-ttu-id="8240c-527">router lokalny Hello lub innego urządzenia sieciowego, zgodny z Twojej NVA dla sieci VPN, będą powitania klienta sieci VPN.</span><span class="sxs-lookup"><span data-stu-id="8240c-527">hello on-premises router, or any other network device that is compatible with your NVA for VPN, would be hello VPN client.</span></span> <span data-ttu-id="8240c-528">To fizyczne urządzenie będzie odpowiedzialny za inicjowanie i utrzymywanie hello połączenia sieci VPN z Twojego NVA.</span><span class="sxs-lookup"><span data-stu-id="8240c-528">This physical device would be responsible for initiating and maintaining hello VPN connection with your NVA.</span></span>

<span data-ttu-id="8240c-529">Logicznie toohello NVA sieci hello wygląda cztery oddzielne "strefy zabezpieczeń" przy użyciu reguł hello na powitania NVA trwa hello Dyrektor głównej ruchu między tych stref:</span><span class="sxs-lookup"><span data-stu-id="8240c-529">Logically toohello NVA, hello network looks like four separate “security zones” with hello rules on hello NVA being hello primary director of traffic between these zones:</span></span>

<span data-ttu-id="8240c-530">![13]</span><span class="sxs-lookup"><span data-stu-id="8240c-530">![13]</span></span>

#### <a name="conclusion"></a><span data-ttu-id="8240c-531">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="8240c-531">Conclusion</span></span>
<span data-ttu-id="8240c-532">Dodanie Hello site-to-site VPN hybrydowego sieci połączenia tooan sieci wirtualnej platformy Azure można rozszerzyć sieć lokalną hello na platformie Azure w bezpieczny sposób.</span><span class="sxs-lookup"><span data-stu-id="8240c-532">hello addition of a site-to-site VPN hybrid network connection tooan Azure virtual network can extend hello on-premises network into Azure in a secure manner.</span></span> <span data-ttu-id="8240c-533">Korzystając z połączenia sieci VPN, ruchu są szyfrowane i kieruje za pośrednictwem hello Internet.</span><span class="sxs-lookup"><span data-stu-id="8240c-533">In using a VPN connection, your traffic is encrypted and routes via hello Internet.</span></span> <span data-ttu-id="8240c-534">Witaj NVA w tym przykładzie zapewnia tooenforce centralnej lokalizacji i zarządzania zasadami zabezpieczeń hello.</span><span class="sxs-lookup"><span data-stu-id="8240c-534">hello NVA in this example provides a central location tooenforce and manage hello security policy.</span></span> <span data-ttu-id="8240c-535">Aby uzyskać więcej informacji, zobacz hello szczegółowe instrukcje (nadchodzącego) kompilacji.</span><span class="sxs-lookup"><span data-stu-id="8240c-535">For more information, see hello detailed build instructions (forthcoming).</span></span> <span data-ttu-id="8240c-536">Instrukcje te obejmują:</span><span class="sxs-lookup"><span data-stu-id="8240c-536">These instructions include:</span></span>

* <span data-ttu-id="8240c-537">Jak toobuild obwodowej ten przykład sieci za pomocą skryptów środowiska PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8240c-537">How toobuild this example perimeter network with PowerShell scripts.</span></span>
* <span data-ttu-id="8240c-538">Jak toobuild w tym przykładzie z szablonem usługi Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="8240c-538">How toobuild this example with an Azure Resource Manager template.</span></span>
* <span data-ttu-id="8240c-539">Scenariusze przepływu ruchu szczegółowe, przedstawiający sposób ruch przechodzi przez ten projekt.</span><span class="sxs-lookup"><span data-stu-id="8240c-539">Detailed traffic flow scenarios, showing how traffic flows through this design.</span></span>

### <a name="example-5-add-a-hybrid-connection-with-a-site-to-site-azure-vpn-gateway"></a><span data-ttu-id="8240c-540">Przykład 5 Dodaj połączenie hybrydowe z bramą sieci VPN platformy Azure do lokacji,</span><span class="sxs-lookup"><span data-stu-id="8240c-540">Example 5 Add a hybrid connection with a site-to-site, Azure VPN gateway</span></span>
<span data-ttu-id="8240c-541">[Kopii tooFast start](#fast-start) | Szczegółowe instrukcje kompilacji jest dostępny wkrótce</span><span class="sxs-lookup"><span data-stu-id="8240c-541">[Back tooFast start](#fast-start) | Detailed build instructions available soon</span></span>

<span data-ttu-id="8240c-542">[![14]][14]</span><span class="sxs-lookup"><span data-stu-id="8240c-542">[![14]][14]</span></span>

#### <a name="environment-description"></a><span data-ttu-id="8240c-543">Opis elementu środowiska</span><span class="sxs-lookup"><span data-stu-id="8240c-543">Environment description</span></span>
<span data-ttu-id="8240c-544">Typ sieci obwodowej tooeither opisanego w przykładach 1 lub 2 można dodać sieci hybrydowe przy użyciu bramy sieci VPN platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-544">Hybrid networking using an Azure VPN gateway can be added tooeither perimeter network type described in examples 1 or 2.</span></span>

<span data-ttu-id="8240c-545">Jak pokazano na powyższej ilustracji hello, połączenie sieci VPN za pośrednictwem hello Internet (site-to-site) jest używane tooconnect tooan sieci lokalnej sieci wirtualnej platformy Azure za pośrednictwem bramy sieci VPN platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-545">As shown in hello preceding figure, a VPN connection over hello Internet (site-to-site) is used tooconnect an on-premises network tooan Azure virtual network via an Azure VPN gateway.</span></span>

> [!NOTE]
> <span data-ttu-id="8240c-546">Jeśli używasz usługi ExpressRoute z włączoną opcją publicznej komunikacji równorzędnej platformy Azure hello, należy utworzyć tras statycznych.</span><span class="sxs-lookup"><span data-stu-id="8240c-546">If you use ExpressRoute with hello Azure Public Peering option enabled, a static route should be created.</span></span> <span data-ttu-id="8240c-547">Tej trasy statyczne powinny kierować toohello adres IP sieci VPN NVA firmowej Internetu, a nie za pośrednictwem sieci WAN ExpressRoute hello.</span><span class="sxs-lookup"><span data-stu-id="8240c-547">This  static route should route toohello NVA VPN IP address out your corporate Internet and not via hello ExpressRoute WAN.</span></span> <span data-ttu-id="8240c-548">Hello NAT wymagane na hello Azure publicznej komunikacji równorzędnej ExpressRoute opcji mogą być dzielone hello sesji sieci VPN.</span><span class="sxs-lookup"><span data-stu-id="8240c-548">hello NAT required on hello ExpressRoute Azure Public Peering option can break hello VPN session.</span></span>
>
>

<span data-ttu-id="8240c-549">Witaj poniższej ilustracji przedstawiono Witaj dwie sieci krawędzie w tym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="8240c-549">hello following figure shows hello two network edges in this example.</span></span> <span data-ttu-id="8240c-550">Na pierwszym krawędzi hello hello NVA i grup NSG kontrolować ruch do sieci w obrębie platformy Azure i między Azure i hello Internet.</span><span class="sxs-lookup"><span data-stu-id="8240c-550">On hello first edge, hello NVA and NSGs control traffic flows for intra-Azure networks and between Azure and hello Internet.</span></span> <span data-ttu-id="8240c-551">drugi krawędź Hello jest bramy sieci VPN platformy Azure hello, czyli krawędzi oddzielne sieci między lokalną i platformą Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-551">hello second edge is hello Azure VPN gateway, which is a separate and isolated network edge between on-premises and Azure.</span></span>

<span data-ttu-id="8240c-552">Ruch należy rozważyć, jak mogą być optymalizowane lub ograniczone przez ten wzorzec projektowania, w zależności od określonych hello przypadek użycia.</span><span class="sxs-lookup"><span data-stu-id="8240c-552">Traffic flows should be considered carefully, as they can be optimized or degraded by this design pattern, depending on hello specific use case.</span></span>

<span data-ttu-id="8240c-553">Przy użyciu środowiska hello wbudowane w przykładzie 1, a następnie dodanie połączenia sieciowego hybrydowego sieci VPN typu lokacja lokacja, tworzy hello następującego projektu:</span><span class="sxs-lookup"><span data-stu-id="8240c-553">Using hello environment built in example 1, and then adding a site-to-site VPN hybrid network connection, produces hello following design:</span></span>

<span data-ttu-id="8240c-554">[![15]][15]</span><span class="sxs-lookup"><span data-stu-id="8240c-554">[![15]][15]</span></span>

#### <a name="conclusion"></a><span data-ttu-id="8240c-555">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="8240c-555">Conclusion</span></span>
<span data-ttu-id="8240c-556">Dodanie Hello site-to-site VPN hybrydowego sieci połączenia tooan sieci wirtualnej platformy Azure można rozszerzyć sieć lokalną hello na platformie Azure w bezpieczny sposób.</span><span class="sxs-lookup"><span data-stu-id="8240c-556">hello addition of a site-to-site VPN hybrid network connection tooan Azure virtual network can extend hello on-premises network into Azure in a secure manner.</span></span> <span data-ttu-id="8240c-557">Przy użyciu bramy sieci VPN platformy Azure z natywnego hello, ruchu jest IPSec szyfrowane i tras za pomocą hello Internet.</span><span class="sxs-lookup"><span data-stu-id="8240c-557">Using hello native Azure VPN gateway, your traffic is IPSec encrypted and routes via hello Internet.</span></span> <span data-ttu-id="8240c-558">Ponadto przy użyciu bramy sieci VPN platformy Azure hello zapewnić to opcja tanie (nie dodatkowych licencji koszt tak jak w przypadku innych firm NVAs).</span><span class="sxs-lookup"><span data-stu-id="8240c-558">Also, using hello Azure VPN gateway can provide a lower-cost option (no additional licensing cost as with third-party NVAs).</span></span> <span data-ttu-id="8240c-559">Ta opcja jest najbardziej ekonomiczne w przykładzie 1, gdzie są używane nie NVA.</span><span class="sxs-lookup"><span data-stu-id="8240c-559">This option is most economical in example 1, where no NVA is used.</span></span> <span data-ttu-id="8240c-560">Aby uzyskać więcej informacji, zobacz hello szczegółowe instrukcje (nadchodzącego) kompilacji.</span><span class="sxs-lookup"><span data-stu-id="8240c-560">For more information, see hello detailed build instructions (forthcoming).</span></span> <span data-ttu-id="8240c-561">Instrukcje te obejmują:</span><span class="sxs-lookup"><span data-stu-id="8240c-561">These instructions include:</span></span>

* <span data-ttu-id="8240c-562">Jak toobuild obwodowej ten przykład sieci za pomocą skryptów środowiska PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8240c-562">How toobuild this example perimeter network with PowerShell scripts.</span></span>
* <span data-ttu-id="8240c-563">Jak toobuild w tym przykładzie z szablonem usługi Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="8240c-563">How toobuild this example with an Azure Resource Manager template.</span></span>
* <span data-ttu-id="8240c-564">Scenariusze przepływu ruchu szczegółowe, przedstawiający sposób ruch przechodzi przez ten projekt.</span><span class="sxs-lookup"><span data-stu-id="8240c-564">Detailed traffic flow scenarios, showing how traffic flows through this design.</span></span>

### <a name="example-6-add-a-hybrid-connection-with-expressroute"></a><span data-ttu-id="8240c-565">Przykład 6 Dodaj połączenie hybrydowe z usługi ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="8240c-565">Example 6 Add a hybrid connection with ExpressRoute</span></span>
<span data-ttu-id="8240c-566">[Kopii tooFast start](#fast-start) | Szczegółowe instrukcje kompilacji jest dostępny wkrótce</span><span class="sxs-lookup"><span data-stu-id="8240c-566">[Back tooFast start](#fast-start) | Detailed build instructions available soon</span></span>

<span data-ttu-id="8240c-567">[![16]][16]</span><span class="sxs-lookup"><span data-stu-id="8240c-567">[![16]][16]</span></span>

#### <a name="environment-description"></a><span data-ttu-id="8240c-568">Opis elementu środowiska</span><span class="sxs-lookup"><span data-stu-id="8240c-568">Environment description</span></span>
<span data-ttu-id="8240c-569">Sieci hybrydowe przy użyciu usługi ExpressRoute prywatnej komunikacji równorzędnej połączenia może być dodany typ sieci obwodowej tooeither opisanego w przykładach 1 lub 2.</span><span class="sxs-lookup"><span data-stu-id="8240c-569">Hybrid networking using an ExpressRoute private peering connection can be added tooeither perimeter network type described in examples 1 or 2.</span></span>

<span data-ttu-id="8240c-570">Jak pokazano na powyższej ilustracji hello, prywatnej komunikacji równorzędnej ExpressRoute zawiera bezpośrednie połączenie między siecią lokalną a hello sieci wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-570">As shown in hello preceding figure, ExpressRoute private peering provides a direct connection between your on-premises network and hello Azure virtual network.</span></span> <span data-ttu-id="8240c-571">Ruch tranzytu tylko hello usługi dostawcy sieci i hello Microsoft Azure, nigdy nie dotknięcie hello Internet.</span><span class="sxs-lookup"><span data-stu-id="8240c-571">Traffic transits only hello service provider network and hello Microsoft Azure network, never touching hello Internet.</span></span>

> [!TIP]
> <span data-ttu-id="8240c-572">Przy użyciu usługi ExpressRoute przechowuje ruchu w sieci firmowej poza hello Internet.</span><span class="sxs-lookup"><span data-stu-id="8240c-572">Using ExpressRoute keeps corporate network traffic off hello Internet.</span></span> <span data-ttu-id="8240c-573">Pozwala także umów dotyczących poziomu usług z dostawcy usługi ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="8240c-573">It also allows for service level agreements from your ExpressRoute provider.</span></span> <span data-ttu-id="8240c-574">Hello Azure bramy można przekazać się too10 GB/s z usługi ExpressRoute, natomiast hello Azure bramy maksymalną przepustowość sieci VPN typu lokacja lokacja, jest 200 MB/s.</span><span class="sxs-lookup"><span data-stu-id="8240c-574">hello Azure Gateway can pass up too10 Gbps with ExpressRoute, whereas with site-to-site VPNs, hello Azure Gateway maximum throughput is 200 Mbps.</span></span>
>
>

<span data-ttu-id="8240c-575">Jak w powitania po diagramu z tej opcji hello środowiska ma teraz dwie krawędzie sieci.</span><span class="sxs-lookup"><span data-stu-id="8240c-575">As seen in hello following diagram, with this option hello environment now has two network edges.</span></span> <span data-ttu-id="8240c-576">Witaj NVA i NSG kontroli ruch do sieci w obrębie platformy Azure i platformy Azure i hello Internetu, gdy bramy hello jest krawędzi oddzielne sieci między lokalną i platformą Azure.</span><span class="sxs-lookup"><span data-stu-id="8240c-576">hello NVA and NSG control traffic flows for intra-Azure networks and between Azure and hello Internet, while hello gateway is a separate and isolated network edge between on-premises and Azure.</span></span>

<span data-ttu-id="8240c-577">Ruch należy rozważyć, jak mogą być optymalizowane lub ograniczone przez ten wzorzec projektowania, w zależności od określonych hello przypadek użycia.</span><span class="sxs-lookup"><span data-stu-id="8240c-577">Traffic flows should be considered carefully, as they can be optimized or degraded by this design pattern, depending on hello specific use case.</span></span>

<span data-ttu-id="8240c-578">Przy użyciu środowiska hello wbudowane w przykładzie 1, a następnie dodanie połączenia sieciowego hybrydowego usługi ExpressRoute, tworzy hello następującego projektu:</span><span class="sxs-lookup"><span data-stu-id="8240c-578">Using hello environment built in example 1, and then adding an ExpressRoute hybrid network connection, produces hello following design:</span></span>

<span data-ttu-id="8240c-579">[![17]][17]</span><span class="sxs-lookup"><span data-stu-id="8240c-579">[![17]][17]</span></span>

#### <a name="conclusion"></a><span data-ttu-id="8240c-580">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="8240c-580">Conclusion</span></span>
<span data-ttu-id="8240c-581">Dodanie Hello połączenie sieciowe w komunikacji równorzędnej ExpressRoute prywatnego można rozszerzyć sieć lokalną hello na platformie Azure w bezpieczny, dolna opóźnienia nowszego wykonywania sposób.</span><span class="sxs-lookup"><span data-stu-id="8240c-581">hello addition of an ExpressRoute Private Peering network connection can extend hello on-premises network into Azure in a secure, lower latency, higher performing manner.</span></span> <span data-ttu-id="8240c-582">Ponadto przy użyciu hello natywnego bramy Azure, jak w poniższym przykładzie zapewnia opcję tanie (Brak dodatkowych licencjonowania, podobnie jak w przypadku innych firm NVAs).</span><span class="sxs-lookup"><span data-stu-id="8240c-582">Also, using hello native Azure Gateway, as in this example, provides a lower-cost option (no additional licensing as with third-party NVAs).</span></span> <span data-ttu-id="8240c-583">Aby uzyskać więcej informacji, zobacz hello szczegółowe instrukcje (nadchodzącego) kompilacji.</span><span class="sxs-lookup"><span data-stu-id="8240c-583">For more information, see hello detailed build instructions (forthcoming).</span></span> <span data-ttu-id="8240c-584">Instrukcje te obejmują:</span><span class="sxs-lookup"><span data-stu-id="8240c-584">These instructions include:</span></span>

* <span data-ttu-id="8240c-585">Jak toobuild obwodowej ten przykład sieci za pomocą skryptów środowiska PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8240c-585">How toobuild this example perimeter network with PowerShell scripts.</span></span>
* <span data-ttu-id="8240c-586">Jak toobuild w tym przykładzie z szablonem usługi Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="8240c-586">How toobuild this example with an Azure Resource Manager template.</span></span>
* <span data-ttu-id="8240c-587">Scenariusze przepływu ruchu szczegółowe, przedstawiający sposób ruch przechodzi przez ten projekt.</span><span class="sxs-lookup"><span data-stu-id="8240c-587">Detailed traffic flow scenarios, showing how traffic flows through this design.</span></span>

## <a name="references"></a><span data-ttu-id="8240c-588">Dokumentacja</span><span class="sxs-lookup"><span data-stu-id="8240c-588">References</span></span>
### <a name="helpful-websites-and-documentation"></a><span data-ttu-id="8240c-589">Przydatne witryn sieci Web i dokumentacji</span><span class="sxs-lookup"><span data-stu-id="8240c-589">Helpful websites and documentation</span></span>
* <span data-ttu-id="8240c-590">Dostęp do platformy Azure z usługą Azure Resource Manager:</span><span class="sxs-lookup"><span data-stu-id="8240c-590">Access Azure with Azure Resource Manager:</span></span>
* <span data-ttu-id="8240c-591">Uzyskiwanie dostępu do platformy Azure przy użyciu programu PowerShell: [https://docs.microsoft.com/powershell/azureps-cmdlets-docs/](/powershell/azure/overview)</span><span class="sxs-lookup"><span data-stu-id="8240c-591">Accessing Azure with PowerShell: [https://docs.microsoft.com/powershell/azureps-cmdlets-docs/](/powershell/azure/overview)</span></span>
* <span data-ttu-id="8240c-592">Dokumentacja sieci wirtualnych: [https://docs.microsoft.com/azure/virtual-network/](https://docs.microsoft.com/azure/virtual-network/)</span><span class="sxs-lookup"><span data-stu-id="8240c-592">Virtual networking documentation: [https://docs.microsoft.com/azure/virtual-network/](https://docs.microsoft.com/azure/virtual-network/)</span></span>
* <span data-ttu-id="8240c-593">Dokumentacja grupy zabezpieczeń sieci: [https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg](virtual-network/virtual-networks-nsg.md)</span><span class="sxs-lookup"><span data-stu-id="8240c-593">Network security group documentation: [https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg](virtual-network/virtual-networks-nsg.md)</span></span>
* <span data-ttu-id="8240c-594">Zdefiniowane przez użytkownika routingu dokumentacji: [https://docs.microsoft.com/azure/virtual-network/virtual-networks-udr-overview](virtual-network/virtual-networks-udr-overview.md)</span><span class="sxs-lookup"><span data-stu-id="8240c-594">User-defined routing documentation: [https://docs.microsoft.com/azure/virtual-network/virtual-networks-udr-overview](virtual-network/virtual-networks-udr-overview.md)</span></span>
* <span data-ttu-id="8240c-595">Azure bram wirtualnego: [https://docs.microsoft.com/azure/vpn-gateway/](https://docs.microsoft.com/azure/vpn-gateway/)</span><span class="sxs-lookup"><span data-stu-id="8240c-595">Azure virtual gateways: [https://docs.microsoft.com/azure/vpn-gateway/](https://docs.microsoft.com/azure/vpn-gateway/)</span></span>
* <span data-ttu-id="8240c-596">Sieci VPN typu lokacja lokacja: [https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell](vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="8240c-596">Site-to-Site VPNs: [https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell](vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md)</span></span>
* <span data-ttu-id="8240c-597">Dokumentacja usługi ExpressRoute (być toocheck się się w sekcji "Wprowadzenie" i "How" hello): [https://docs.microsoft.com/azure/expressroute/](https://docs.microsoft.com/azure/expressroute/)</span><span class="sxs-lookup"><span data-stu-id="8240c-597">ExpressRoute documentation (be sure toocheck out hello “Getting Started” and “How To” sections): [https://docs.microsoft.com/azure/expressroute/](https://docs.microsoft.com/azure/expressroute/)</span></span>

<!--Image References-->
[0]: ./media/best-practices-network-security/flowchart.png "Schemat blokowy opcji zabezpieczeń"
[2]: ./media/best-practices-network-security/azuresecurityfeatures.png "funkcje zabezpieczeń platformy azure"
[3]: ./media/best-practices-network-security/dmzcorporate.png "DMZ A w sieci firmowej"
[4]: ./media/best-practices-network-security/azuresecurityarchitecture.png "architektury zabezpieczeń platformy azure"
[5]: ./media/best-practices-network-security/dmzazure.png "DMZ w sieci wirtualnej platformy Azure"
[6]: ./media/best-practices-network-security/dmzhybrid.png "sieci hybrydowe za pomocą trzech granic zabezpieczeń"
[7]: ./media/best-practices-network-security/example1design.png "Przychodzący DMZ z grupy NSG"
[8]: ./media/best-practices-network-security/example2design.png "Przychodzący DMZ NVA i grupy NSG"
[9]: ./media/best-practices-network-security/example3design.png "Dwukierunkowe DMZ NVA, NSG i przez"
[10]: ./media/best-practices-network-security/example3firewalllogical.png "widok logiczny hello reguły zapory"
[11]: ./media/best-practices-network-security/example3designoptions.png "DMZ z NVA połączonych sieci hybrydowe"
[12]: ./media/best-practices-network-security/example4designs2s.png "DMZ z NVA nawiązano połączenie przy użyciu sieci VPN lokacja lokacja"
[13]: ./media/best-practices-network-security/example4networklogical.png "sieci logicznej z punktu widzenia NVA"
[14]: ./media/best-practices-network-security/example5designoptions.png "DMZ Azure bramy połączonej sieci hybrydowe lokacja lokacja"
[15]: ./media/best-practices-network-security/example5designs2s.png "DMZ Azure bramy przy użyciu sieci VPN lokacja lokacja"
[16]: ./media/best-practices-network-security/example6designoptions.png "DMZ Azure bramy połączonej sieci hybrydowe usługi ExpressRoute"
[17]: ./media/best-practices-network-security/example6designexpressroute.png "DMZ Azure bramy przy użyciu połączenia ExpressRoute"

<!--Link References-->
[TrustCenter]: https://azure.microsoft.com/support/trust-center/compliance/
[Example1]: ./virtual-network/virtual-networks-dmz-nsg.md
[Example2]: ./virtual-network/virtual-networks-dmz-nsg-fw-asm.md
[Example3]: ./virtual-network/virtual-networks-dmz-nsg-fw-udr-asm.md
[Example4]: ./virtual-network/virtual-networks-hybrid-s2s-nva-asm.md
[Example5]: ./virtual-network/virtual-networks-hybrid-s2s-agw-asm.md
[Example6]: ./virtual-network/virtual-networks-hybrid-expressroute-asm.md
[Example7]: ./virtual-network/virtual-networks-vnet2vnet-direct-asm.md
[Example8]: ./virtual-network/virtual-networks-vnet2vnet-transit-asm.md
