---
title: Przewodnik projektowania tabeli magazynu aaaAzure | Dokumentacja firmy Microsoft
description: "Projektowania skalowalności i wydajności tabel Azure Table Storage"
services: cosmos-db
documentationcenter: na
author: mimig1
manager: tadb
editor: tysonn
ms.assetid: 8e228b0c-2998-4462-8101-9f16517393ca
ms.service: cosmos-db
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage
ms.date: 02/28/2017
ms.author: mimig
ms.openlocfilehash: 059f05a1d20e4d9537034b7ca133c5334bbefa04
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="azure-storage-table-design-guide-designing-scalable-and-performant-tables"></a><span data-ttu-id="eff6d-103">Przewodnik projektowania tabeli magazynu systemu Azure: Projektowanie skalowalności i wydajności tabele</span><span class="sxs-lookup"><span data-stu-id="eff6d-103">Azure Storage Table Design Guide: Designing Scalable and Performant Tables</span></span>
[!INCLUDE [storage-table-cosmos-db-tip-include](../../includes/storage-table-cosmos-db-tip-include.md)]

<span data-ttu-id="eff6d-104">toodesign skalowalności i wydajności tabele należy wziąć pod uwagę wiele czynników, takich jak wydajności, skalowalności i kosztów.</span><span class="sxs-lookup"><span data-stu-id="eff6d-104">toodesign scalable and performant tables you must consider a number of factors such as performance, scalability, and cost.</span></span> <span data-ttu-id="eff6d-105">Wcześniej zaprojektowany schematy relacyjnych baz danych, tych zagadnień będzie znanych tooyou, ale istnieją podobieństwa relacyjne modele i modelu magazynu usługi tabel Azure hello, jest również wiele ważnych różnice.</span><span class="sxs-lookup"><span data-stu-id="eff6d-105">If you have previously designed schemas for relational databases, these considerations will be familiar tooyou, but while there are some similarities between hello Azure Table service storage model and relational models, there are also many important differences.</span></span> <span data-ttu-id="eff6d-106">Różnice te zwykle prowadzić toovery różnych projektów, który może wyglądać toosomeone counter-intuitive lub jest on nieprawidłowy zapoznać się z relacyjnych baz danych, ale które wprowadzaj wiedział, w przypadku projektowania magazynu klucza i wartości NoSQL, takie jak hello usługi tabel Azure.</span><span class="sxs-lookup"><span data-stu-id="eff6d-106">These differences typically lead toovery different designs that may look counter-intuitive or wrong toosomeone familiar with relational databases, but which do make good sense if you are designing for a NoSQL key/value store such as hello Azure Table service.</span></span> <span data-ttu-id="eff6d-107">Wiele sieci różnice projekt będzie odzwierciedlać hello fakt, że usługa tabel hello jest zaprojektowana toosupport skali chmury aplikacji, które może zawierać miliardów jednostek (wiersze w terminologii relacyjnej bazy danych), danych lub w przypadku zestawów danych, który musi obsługiwać wysokie woluminy transakcji: w związku z tym należy toothink inaczej, o jaki sposób przechowywania danych i zrozumienie, jak działa hello usługi tabel.</span><span class="sxs-lookup"><span data-stu-id="eff6d-107">Many of your design differences will reflect hello fact that hello Table service is designed toosupport cloud-scale applications that can contain billions of entities (rows in relational database terminology) of data or for datasets that must support very high transaction volumes: therefore, you need toothink differently about how you store your data and understand how hello Table service works.</span></span> <span data-ttu-id="eff6d-108">Magazyn danych NoSQL przemyślany można włączyć tooscale Twojego rozwiązania, znacznie więcej (i koszt będzie niższy koszt) niż rozwiązania, które korzysta z relacyjnej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-108">A well designed NoSQL data store can enable your solution tooscale much further (and at a lower cost) than a solution that uses a relational database.</span></span> <span data-ttu-id="eff6d-109">Ten przewodnik pomaga w tych tematach.</span><span class="sxs-lookup"><span data-stu-id="eff6d-109">This guide helps you with these topics.</span></span>  

## <a name="about-hello-azure-table-service"></a><span data-ttu-id="eff6d-110">O hello usługi tabel Azure</span><span class="sxs-lookup"><span data-stu-id="eff6d-110">About hello Azure Table service</span></span>
<span data-ttu-id="eff6d-111">W tej sekcji opisano niektóre z hello funkcji klucza hello tabeli usługi, które są szczególnie istotne toodesigning wydajności i skalowalności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-111">This section highlights some of hello key features of hello Table service that are especially relevant toodesigning for performance and scalability.</span></span> <span data-ttu-id="eff6d-112">Jeśli jesteś tooAzure nowego magazynu i hello usługi tabel, najpierw przeczytać artykuł [tooMicrosoft wprowadzenie usługi Azure Storage](../storage/common/storage-introduction.md) i [Rozpoczynanie pracy z magazynem tabel Azure przy użyciu platformy .NET](table-storage-how-to-use-dotnet.md) przed odczytaniem hello pozostałej części tej artykuł.</span><span class="sxs-lookup"><span data-stu-id="eff6d-112">If you are new tooAzure Storage and hello Table service, first read [Introduction tooMicrosoft Azure Storage](../storage/common/storage-introduction.md) and [Get started with Azure Table Storage using .NET](table-storage-how-to-use-dotnet.md) before reading hello remainder of this article.</span></span> <span data-ttu-id="eff6d-113">Mimo że hello ten przewodnik koncentruje się na powitania usługi tabel, obejmuje niektóre omówienie hello kolejek platformy Azure i usługi obiektów Blob i sposobu ich wykorzystania wraz z hello usługi tabel w rozwiązaniu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-113">Although hello focus of this guide is on hello Table service, it will include some discussion of hello Azure Queue and Blob services, and how you might use them along with hello Table service in a solution.</span></span>  

<span data-ttu-id="eff6d-114">Co to jest usługa tabel hello?</span><span class="sxs-lookup"><span data-stu-id="eff6d-114">What is hello Table service?</span></span> <span data-ttu-id="eff6d-115">Jak może spodziewać się od nazwy hello, hello usługi tabel używa danych toostore tabelarycznej.</span><span class="sxs-lookup"><span data-stu-id="eff6d-115">As you might expect from hello name, hello Table service uses a tabular format toostore data.</span></span> <span data-ttu-id="eff6d-116">W terminologii hello każdego wiersza tabeli hello reprezentuje jednostkę, a magazynu kolumn hello hello różne właściwości tego obiektu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-116">In hello standard terminology, each row of hello table represents an entity, and hello columns store hello various properties of that entity.</span></span> <span data-ttu-id="eff6d-117">Każdy podmiot zawiera pary kluczy toouniquely go zidentyfikować, a kolumny znaczników czasu, który hello usługi tabel używa tootrack datę ostatniej aktualizacji jednostki hello (dzieje się to automatycznie i nie można ręcznie zastąpić sygnatury czasowej hello z dowolną wartością).</span><span class="sxs-lookup"><span data-stu-id="eff6d-117">Every entity has a pair of keys toouniquely identify it, and a timestamp column that hello Table service uses tootrack when hello entity was last updated (this happens automatically and you cannot manually overwrite hello timestamp with an arbitrary value).</span></span> <span data-ttu-id="eff6d-118">Witaj usługi tabel używa to sygnatura czasowa ostatniej modyfikacji (LMT) toomanage optymistycznej współbieżności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-118">hello Table service uses this last-modified timestamp (LMT) toomanage optimistic concurrency.</span></span>  

> [!NOTE]
> <span data-ttu-id="eff6d-119">Operacje interfejsu API REST usługi tabeli Hello również zwrócić **ETag** wartość, która dziedziczy hello last-modified timestamp (LMT).</span><span class="sxs-lookup"><span data-stu-id="eff6d-119">hello Table service REST API operations also return an **ETag** value that it derives from hello last-modified timestamp (LMT).</span></span> <span data-ttu-id="eff6d-120">W tym dokumencie użyjemy hello warunki ETag i LMT zamiennie ponieważ odnoszą toohello sam podstawowy danych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-120">In this document we will use hello terms ETag and LMT interchangeably because they refer toohello same underlying data.</span></span>  
> 
> 

<span data-ttu-id="eff6d-121">Witaj poniższy przykład przedstawia toostore projektu prostą tabelę pracowników i dział jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-121">hello following example shows a simple table design toostore employee and department entities.</span></span> <span data-ttu-id="eff6d-122">Wiele przykładów hello pokazano w dalszej części tego przewodnika są oparte na ten projekt proste.</span><span class="sxs-lookup"><span data-stu-id="eff6d-122">Many of hello examples shown later in this guide are based on this simple design.</span></span>  

<table>
<tr>
<th><span data-ttu-id="eff6d-123">PartitionKey</span><span class="sxs-lookup"><span data-stu-id="eff6d-123">PartitionKey</span></span></th>
<th><span data-ttu-id="eff6d-124">RowKey</span><span class="sxs-lookup"><span data-stu-id="eff6d-124">RowKey</span></span></th>
<th><span data-ttu-id="eff6d-125">Znacznik czasu</span><span class="sxs-lookup"><span data-stu-id="eff6d-125">Timestamp</span></span></th>
<th></th>
</tr>
<tr>
<td><span data-ttu-id="eff6d-126">Marketing</span><span class="sxs-lookup"><span data-stu-id="eff6d-126">Marketing</span></span></td>
<td><span data-ttu-id="eff6d-127">00001</span><span class="sxs-lookup"><span data-stu-id="eff6d-127">00001</span></span></td>
<td><span data-ttu-id="eff6d-128">2014-08-22T00:50:32Z</span><span class="sxs-lookup"><span data-stu-id="eff6d-128">2014-08-22T00:50:32Z</span></span></td>
<td>
<table>
<tr>
<th><span data-ttu-id="eff6d-129">Imię</span><span class="sxs-lookup"><span data-stu-id="eff6d-129">FirstName</span></span></th>
<th><span data-ttu-id="eff6d-130">Nazwisko</span><span class="sxs-lookup"><span data-stu-id="eff6d-130">LastName</span></span></th>
<th><span data-ttu-id="eff6d-131">Wiek</span><span class="sxs-lookup"><span data-stu-id="eff6d-131">Age</span></span></th>
<th><span data-ttu-id="eff6d-132">Adres e-mail</span><span class="sxs-lookup"><span data-stu-id="eff6d-132">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="eff6d-133">ADAM</span><span class="sxs-lookup"><span data-stu-id="eff6d-133">Don</span></span></td>
<td><span data-ttu-id="eff6d-134">Hall</span><span class="sxs-lookup"><span data-stu-id="eff6d-134">Hall</span></span></td>
<td><span data-ttu-id="eff6d-135">34</span><span class="sxs-lookup"><span data-stu-id="eff6d-135">34</span></span></td>
<td>donh@contoso.com</td>
</tr>
</table>
</tr>
<tr>
<td><span data-ttu-id="eff6d-136">Marketing</span><span class="sxs-lookup"><span data-stu-id="eff6d-136">Marketing</span></span></td>
<td><span data-ttu-id="eff6d-137">00002</span><span class="sxs-lookup"><span data-stu-id="eff6d-137">00002</span></span></td>
<td><span data-ttu-id="eff6d-138">2014-08-22T00:50:34Z</span><span class="sxs-lookup"><span data-stu-id="eff6d-138">2014-08-22T00:50:34Z</span></span></td>
<td>
<table>
<tr>
<th><span data-ttu-id="eff6d-139">Imię</span><span class="sxs-lookup"><span data-stu-id="eff6d-139">FirstName</span></span></th>
<th><span data-ttu-id="eff6d-140">Nazwisko</span><span class="sxs-lookup"><span data-stu-id="eff6d-140">LastName</span></span></th>
<th><span data-ttu-id="eff6d-141">Wiek</span><span class="sxs-lookup"><span data-stu-id="eff6d-141">Age</span></span></th>
<th><span data-ttu-id="eff6d-142">Adres e-mail</span><span class="sxs-lookup"><span data-stu-id="eff6d-142">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="eff6d-143">Cze</span><span class="sxs-lookup"><span data-stu-id="eff6d-143">Jun</span></span></td>
<td><span data-ttu-id="eff6d-144">CaO</span><span class="sxs-lookup"><span data-stu-id="eff6d-144">Cao</span></span></td>
<td><span data-ttu-id="eff6d-145">47</span><span class="sxs-lookup"><span data-stu-id="eff6d-145">47</span></span></td>
<td>junc@contoso.com</td>
</tr>
</table>
</tr>
<tr>
<td><span data-ttu-id="eff6d-146">Marketing</span><span class="sxs-lookup"><span data-stu-id="eff6d-146">Marketing</span></span></td>
<td><span data-ttu-id="eff6d-147">Dział</span><span class="sxs-lookup"><span data-stu-id="eff6d-147">Department</span></span></td>
<td><span data-ttu-id="eff6d-148">2014-08-22T00:50:30Z</span><span class="sxs-lookup"><span data-stu-id="eff6d-148">2014-08-22T00:50:30Z</span></span></td>
<td>
<table>
<tr>
<th><span data-ttu-id="eff6d-149">DepartmentName</span><span class="sxs-lookup"><span data-stu-id="eff6d-149">DepartmentName</span></span></th>
<th><span data-ttu-id="eff6d-150">EmployeeCount</span><span class="sxs-lookup"><span data-stu-id="eff6d-150">EmployeeCount</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="eff6d-151">Marketing</span><span class="sxs-lookup"><span data-stu-id="eff6d-151">Marketing</span></span></td>
<td><span data-ttu-id="eff6d-152">153</span><span class="sxs-lookup"><span data-stu-id="eff6d-152">153</span></span></td>
</tr>
</table>
</td>
</tr>
<tr>
<td><span data-ttu-id="eff6d-153">Sprzedaż</span><span class="sxs-lookup"><span data-stu-id="eff6d-153">Sales</span></span></td>
<td><span data-ttu-id="eff6d-154">00010</span><span class="sxs-lookup"><span data-stu-id="eff6d-154">00010</span></span></td>
<td><span data-ttu-id="eff6d-155">2014-08-22T00:50:44Z</span><span class="sxs-lookup"><span data-stu-id="eff6d-155">2014-08-22T00:50:44Z</span></span></td>
<td>
<table>
<tr>
<th><span data-ttu-id="eff6d-156">Imię</span><span class="sxs-lookup"><span data-stu-id="eff6d-156">FirstName</span></span></th>
<th><span data-ttu-id="eff6d-157">Nazwisko</span><span class="sxs-lookup"><span data-stu-id="eff6d-157">LastName</span></span></th>
<th><span data-ttu-id="eff6d-158">Wiek</span><span class="sxs-lookup"><span data-stu-id="eff6d-158">Age</span></span></th>
<th><span data-ttu-id="eff6d-159">Adres e-mail</span><span class="sxs-lookup"><span data-stu-id="eff6d-159">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="eff6d-160">Krzysztof</span><span class="sxs-lookup"><span data-stu-id="eff6d-160">Ken</span></span></td>
<td><span data-ttu-id="eff6d-161">Kwok</span><span class="sxs-lookup"><span data-stu-id="eff6d-161">Kwok</span></span></td>
<td><span data-ttu-id="eff6d-162">23</span><span class="sxs-lookup"><span data-stu-id="eff6d-162">23</span></span></td>
<td>kenk@contoso.com</td>
</tr>
</table>
</td>
</tr>
</table>


<span data-ttu-id="eff6d-163">Do tej pory to wygląda bardzo podobnie tabeli tooa relacyjnej bazy danych z podstawowych różnic hello jest hello obowiązkowe kolumn, oraz hello toostore możliwości jednostki wiele typów w hello tej samej tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-163">So far, this looks very similar tooa table in a relational database with hello key differences being hello mandatory columns, and hello ability toostore multiple entity types in hello same table.</span></span> <span data-ttu-id="eff6d-164">Ponadto, zdefiniowane przez użytkownika właściwości każdej z hello takich jak **imię** lub **wieku** ma typ danych, takie jak liczba całkowita lub ciąg, tylko kolumny w relacyjnej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-164">In addition, each of hello user-defined properties such as **FirstName** or **Age** has a data type, such as integer or string, just like a column in a relational database.</span></span> <span data-ttu-id="eff6d-165">Mimo że w przeciwieństwie do relacyjnej bazy danych bez schematu hello rodzaj hello tabeli usługi oznacza, że właściwość nie wymagają hello sam typ danych dla każdej jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-165">Although unlike in a relational database, hello schema-less nature of hello Table service means that a property need not have hello same data type on each entity.</span></span> <span data-ttu-id="eff6d-166">toostore złożone typy danych w jednej właściwości, musi mieć format serializacji takich jak JSON i XML.</span><span class="sxs-lookup"><span data-stu-id="eff6d-166">toostore complex data types in a single property, you must use a serialized format such as JSON or XML.</span></span> <span data-ttu-id="eff6d-167">Aby uzyskać więcej informacji dotyczących typów danych usługi, takie jak obsługiwane tabeli hello, zakres dat obsługiwanych reguły nazewnictwa i ograniczenia rozmiaru, zobacz [hello opis modelu danych usługi tabel](http://msdn.microsoft.com/library/azure/dd179338.aspx).</span><span class="sxs-lookup"><span data-stu-id="eff6d-167">For more information about hello table service such as supported data types, supported date ranges, naming rules, and size constraints, see [Understanding hello Table Service Data Model](http://msdn.microsoft.com/library/azure/dd179338.aspx).</span></span>

<span data-ttu-id="eff6d-168">Jak pokażemy, wybór **PartitionKey** i **RowKey** jest projektowaniu tabel podstawowych toogood.</span><span class="sxs-lookup"><span data-stu-id="eff6d-168">As you will see, your choice of **PartitionKey** and **RowKey** is fundamental toogood table design.</span></span> <span data-ttu-id="eff6d-169">Każdy podmiot przechowywane w tabeli musi mieć unikatową kombinację **PartitionKey** i **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="eff6d-169">Every entity stored in a table must have a unique combination of **PartitionKey** and **RowKey**.</span></span> <span data-ttu-id="eff6d-170">Podobnie jak w przypadku kluczy w tabeli relacyjnej bazy danych, hello **PartitionKey** i **RowKey** wartości są indeksowane toocreate indeks klastrowany, który umożliwia szybkie wyszukania; hello usługi tabel tworzy jednak żadnego indeksów pomocniczych, dzięki czemu są one hello tylko dwóch właściwości indeksowanych (niektóre wzorców hello w dalszej części Pokaż jak obejść to ograniczenie widoczna).</span><span class="sxs-lookup"><span data-stu-id="eff6d-170">As with keys in a relational database table, hello **PartitionKey** and **RowKey** values are indexed toocreate a clustered index that enables fast look-ups; however, hello Table service does not create any secondary indexes so these are hello only two indexed properties (some of hello patterns described later show how you can work around this apparent limitation).</span></span>  

<span data-ttu-id="eff6d-171">Tabela składa się z co najmniej jedną partycję, i jak pokażemy, wiele hello projektowanie decyzji będzie wokół wybranie odpowiedniej **PartitionKey** i **RowKey** toooptimize rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-171">A table is made up of one or more partitions, and as you will see, many of hello design decisions you make will be around choosing a suitable **PartitionKey** and **RowKey** toooptimize your solution.</span></span> <span data-ttu-id="eff6d-172">Rozwiązanie może składać się z tylko pojedynczej tabeli, która zawiera wszystkie obiekty podzielony na partycje, ale zazwyczaj rozwiązanie będzie mieć wielu tabel.</span><span class="sxs-lookup"><span data-stu-id="eff6d-172">A solution could consist of just a single table that contains all your entities organized into partitions, but typically a solution will have multiple tables.</span></span> <span data-ttu-id="eff6d-173">Tabele ułatwiają toologically organizowanie jednostek, ułatwiają zarządzanie dostępem do toohello danych za pomocą listy kontroli dostępu i może usunąć całą tabelę przy użyciu operacji pojedynczy magazyn.</span><span class="sxs-lookup"><span data-stu-id="eff6d-173">Tables help you toologically organize your entities, help you manage access toohello data using access control lists, and you can drop an entire table using a single storage operation.</span></span>  

### <a name="table-partitions"></a><span data-ttu-id="eff6d-174">Partycje tabel</span><span class="sxs-lookup"><span data-stu-id="eff6d-174">Table partitions</span></span>
<span data-ttu-id="eff6d-175">Nazwa konta Hello, nazwę tabeli i **PartitionKey** wspólnie identyfikują hello partycji w ramach której usługa tabel hello przechowuje hello jednostki usługi magazynu hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-175">hello account name, table name and **PartitionKey** together identify hello partition within hello storage service where hello table service stores hello entity.</span></span> <span data-ttu-id="eff6d-176">Oraz stanowi część hello schematu dla jednostek adresowania, partycje definiowania zakresu dla transakcji (zobacz [transakcji grupy jednostek](#entity-group-transactions) poniżej) i jak usługa tabel hello skaluje podstawę hello formularza.</span><span class="sxs-lookup"><span data-stu-id="eff6d-176">As well as being part of hello addressing scheme for entities, partitions define a scope for transactions (see [Entity Group Transactions](#entity-group-transactions) below), and form hello basis of how hello table service scales.</span></span> <span data-ttu-id="eff6d-177">Aby uzyskać więcej informacji na partycje, zobacz [cele dotyczące wydajności i skalowalności magazynu Azure](../storage/common/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="eff6d-177">For more information on partitions see [Azure Storage Scalability and Performance Targets](../storage/common/storage-scalability-targets.md).</span></span>  

<span data-ttu-id="eff6d-178">W hello usługi tabel, oddzielnego węzła usług jedną lub więcej Wypełnij partycje i hello skali usługi przez dynamiczne równoważenie obciążenia partycji w węzłach.</span><span class="sxs-lookup"><span data-stu-id="eff6d-178">In hello Table service, an individual node services one or more complete partitions and hello service scales by dynamically load-balancing partitions across nodes.</span></span> <span data-ttu-id="eff6d-179">Jeśli węzeł ma pod obciążeniem, usługa tabel hello można *podzielić* hello zakresu partycji obsługiwanych przez ten węzeł na różnych węzłach; gdy zaspokojenie ruchu, usługa hello może *scalania* partycji hello zakresów z quiet węzły ponownie do jednego węzła.</span><span class="sxs-lookup"><span data-stu-id="eff6d-179">If a node is under load, hello table service can *split* hello range of partitions serviced by that node onto different nodes; when traffic subsides, hello service can *merge* hello partition ranges from quiet nodes back onto a single node.</span></span>  

<span data-ttu-id="eff6d-180">Aby uzyskać więcej informacji na temat hello wewnętrzny szczegóły hello usługa tabel, a w szczególności, w jaki sposób usługa hello zarządza partycji, zobacz dokument hello [Microsoft Azure Storage: A wysoce dostępna usługa magazynu w chmurze with Strong Consistency](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx).</span><span class="sxs-lookup"><span data-stu-id="eff6d-180">For more information about hello internal details of hello Table service, and in particular how hello service manages partitions, see hello paper [Microsoft Azure Storage: A Highly Available Cloud Storage Service with Strong Consistency](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx).</span></span>  

### <a name="entity-group-transactions"></a><span data-ttu-id="eff6d-181">Grupowanie jednostki transakcji</span><span class="sxs-lookup"><span data-stu-id="eff6d-181">Entity Group Transactions</span></span>
<span data-ttu-id="eff6d-182">W hello usługi tabel transakcji grupy jednostek (EGTs) są hello tylko wbudowany mechanizm atomic aktualizacje na wiele jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-182">In hello Table service, Entity Group Transactions (EGTs) are hello only built-in mechanism for performing atomic updates across multiple entities.</span></span> <span data-ttu-id="eff6d-183">EGTs są również określonego tooas *partii transakcji* w części dokumentacji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-183">EGTs are also referred tooas *batch transactions* in some documentation.</span></span> <span data-ttu-id="eff6d-184">EGTs może działać tylko na jednostek przechowywanych w hello tej samej partycji (hello udział w tym samym kluczem partycji w danej tabeli), więc w dowolnym momencie należy atomic zachowanie transakcyjnego przez wiele jednostek należy tooensure tych jednostek, w której znajdują się hello tej samej partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-184">EGTs can only operate on entities stored in hello same partition (share hello same partition key in a given table), so anytime you need atomic transactional behavior across multiple entities you need tooensure that those entities are in hello same partition.</span></span> <span data-ttu-id="eff6d-185">Jest to często przyczynę zachowania wiele typów jednostek w hello sama tabela (i partycji) i nie używa wielu tabel dla typów jednostek różnych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-185">This is often a reason for keeping multiple entity types in hello same table (and partition) and not using multiple tables for different entity types.</span></span> <span data-ttu-id="eff6d-186">Pojedynczy EGT może pracować na maksymalnie 100 jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-186">A single EGT can operate on at most 100 entities.</span></span>  <span data-ttu-id="eff6d-187">Jeśli prześlesz wiele równoczesnych EGTs przetworzenia jest ważne tooensure tych EGTs nie działają na jednostek, które są wspólne w EGTs, ponieważ w przeciwnym razie przetwarzania może być opóźnione.</span><span class="sxs-lookup"><span data-stu-id="eff6d-187">If you submit multiple concurrent EGTs for processing it is important tooensure  those EGTs do not operate on entities that are common across EGTs as otherwise processing can be delayed.</span></span>

<span data-ttu-id="eff6d-188">EGTs również wprowadzać potencjalną zależność dla tooevaluate w projekcie: przy użyciu więcej partycji spowoduje zwiększenie skalowalności hello aplikacji, ponieważ platforma Azure ma więcej możliwości Równoważenie obciążenia żądań w węzłach, ale może to ograniczyć hello możliwość transakcji atomic tooperform aplikacji i obsługa wysoki poziom spójności danych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-188">EGTs also introduce a potential trade-off for you tooevaluate in your design: using more partitions will increase hello scalability of your application because Azure has more opportunities for load balancing requests across nodes, but this might limit hello ability of your application tooperform atomic transactions and maintain strong consistency for your data.</span></span> <span data-ttu-id="eff6d-189">Ponadto istnieją wartości docelowe skalowalności określonych na poziomie hello partycji, która może ograniczyć przepustowość hello transakcji można oczekiwać, że dla jednego węzła: Aby uzyskać więcej informacji o wartości docelowe skalowalności powitania dla konta magazynu platformy Azure i hello tabeli usługi, zobacz [cele dotyczące wydajności i skalowalności magazynu Azure](../storage/common/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="eff6d-189">Furthermore, there are specific scalability targets at hello level of a partition that might limit hello throughput of transactions you can expect for a single node: for more information about hello scalability targets for Azure storage accounts and hello table service, see [Azure Storage Scalability and Performance Targets](../storage/common/storage-scalability-targets.md).</span></span> <span data-ttu-id="eff6d-190">Kolejnych sekcjach niniejszego przewodnika omówiono w nim różne projektowania strategii, które ułatwiają zarządzanie kompromis, takich jak ta i omówienia najlepszy sposób toochoose klucz partycji na podstawie hello określone wymagania aplikacji klienta.</span><span class="sxs-lookup"><span data-stu-id="eff6d-190">Later sections of this guide discuss various design strategies that help you manage trade-offs such as this one, and discuss how best toochoose your partition key based on hello specific requirements of your client application.</span></span>  

### <a name="capacity-considerations"></a><span data-ttu-id="eff6d-191">Zagadnienia dotyczące wydajności</span><span class="sxs-lookup"><span data-stu-id="eff6d-191">Capacity considerations</span></span>
<span data-ttu-id="eff6d-192">Witaj Poniższa tabela zawiera niektóre hello wartości klucza toobe uwagę podczas projektowania rozwiązania usługi tabeli:</span><span class="sxs-lookup"><span data-stu-id="eff6d-192">hello following table includes some of hello key values toobe aware of when you are designing a Table service solution:</span></span>  

| <span data-ttu-id="eff6d-193">Łączna pojemność konta magazynu platformy Azure</span><span class="sxs-lookup"><span data-stu-id="eff6d-193">Total capacity of an Azure storage account</span></span> | <span data-ttu-id="eff6d-194">500 TB.</span><span class="sxs-lookup"><span data-stu-id="eff6d-194">500 TB</span></span> |
| --- | --- |
| <span data-ttu-id="eff6d-195">Liczba tabel na koncie magazynu Azure</span><span class="sxs-lookup"><span data-stu-id="eff6d-195">Number of tables in an Azure storage account</span></span> |<span data-ttu-id="eff6d-196">Ograniczone tylko przez hello pojemności konta magazynu hello</span><span class="sxs-lookup"><span data-stu-id="eff6d-196">Limited only by hello capacity of hello storage account</span></span> |
| <span data-ttu-id="eff6d-197">Liczba partycji w tabeli</span><span class="sxs-lookup"><span data-stu-id="eff6d-197">Number of partitions in a table</span></span> |<span data-ttu-id="eff6d-198">Ograniczone tylko przez hello pojemności konta magazynu hello</span><span class="sxs-lookup"><span data-stu-id="eff6d-198">Limited only by hello capacity of hello storage account</span></span> |
| <span data-ttu-id="eff6d-199">Liczba jednostek w partycji</span><span class="sxs-lookup"><span data-stu-id="eff6d-199">Number of entities in a partition</span></span> |<span data-ttu-id="eff6d-200">Ograniczone tylko przez hello pojemności konta magazynu hello</span><span class="sxs-lookup"><span data-stu-id="eff6d-200">Limited only by hello capacity of hello storage account</span></span> |
| <span data-ttu-id="eff6d-201">Rozmiar pojedynczą jednostkę</span><span class="sxs-lookup"><span data-stu-id="eff6d-201">Size of an individual entity</span></span> |<span data-ttu-id="eff6d-202">Konfigurowanie MB too1 maksymalnie 255 właściwości (w tym hello **PartitionKey**, **RowKey**, i **sygnatury czasowej**)</span><span class="sxs-lookup"><span data-stu-id="eff6d-202">Up too1 MB with a maximum of 255 properties (including hello **PartitionKey**, **RowKey**, and **Timestamp**)</span></span> |
| <span data-ttu-id="eff6d-203">Rozmiar hello **PartitionKey**</span><span class="sxs-lookup"><span data-stu-id="eff6d-203">Size of hello **PartitionKey**</span></span> |<span data-ttu-id="eff6d-204">Ciąg się o rozmiarze too1 KB</span><span class="sxs-lookup"><span data-stu-id="eff6d-204">A string up too1 KB in size</span></span> |
| <span data-ttu-id="eff6d-205">Rozmiar hello **RowKey**</span><span class="sxs-lookup"><span data-stu-id="eff6d-205">Size of hello **RowKey**</span></span> |<span data-ttu-id="eff6d-206">Ciąg się o rozmiarze too1 KB</span><span class="sxs-lookup"><span data-stu-id="eff6d-206">A string up too1 KB in size</span></span> |
| <span data-ttu-id="eff6d-207">Rozmiar grupy jednostki transakcji</span><span class="sxs-lookup"><span data-stu-id="eff6d-207">Size of an Entity Group Transaction</span></span> |<span data-ttu-id="eff6d-208">Transakcja może zawierać co najwyżej 100 jednostek i hello ładunek musi być mniejszy niż 4 MB.</span><span class="sxs-lookup"><span data-stu-id="eff6d-208">A transaction can include at most 100 entities and hello payload must be less than 4 MB in size.</span></span> <span data-ttu-id="eff6d-209">EGT można aktualizować tylko jednostki jeden raz.</span><span class="sxs-lookup"><span data-stu-id="eff6d-209">An EGT can only update an entity once.</span></span> |

<span data-ttu-id="eff6d-210">Aby uzyskać więcej informacji, zobacz [hello opis modelu danych usługi tabel](http://msdn.microsoft.com/library/azure/dd179338.aspx).</span><span class="sxs-lookup"><span data-stu-id="eff6d-210">For more information, see [Understanding hello Table Service Data Model](http://msdn.microsoft.com/library/azure/dd179338.aspx).</span></span>  

### <a name="cost-considerations"></a><span data-ttu-id="eff6d-211">Zagadnienia dotyczące kosztu</span><span class="sxs-lookup"><span data-stu-id="eff6d-211">Cost considerations</span></span>
<span data-ttu-id="eff6d-212">Magazyn tabel jest względnie niedrogie, ale w ramach próbnego dowolnego rozwiązania, które korzysta z usługi tabeli hello, należy uwzględnić szacowane koszty dla obu zdolności użycia i hello ilości transakcji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-212">Table storage is relatively inexpensive, but you should include cost estimates for both capacity usage and hello quantity of transactions as part of your evaluation of any solution that uses hello Table service.</span></span> <span data-ttu-id="eff6d-213">Jednak w wielu scenariuszach przechowywanie danych nieznormalizowany lub zduplikowane w kolejności tooimprove hello wydajności i skalowalności rozwiązania jest tootake podejście prawidłowe.</span><span class="sxs-lookup"><span data-stu-id="eff6d-213">However, in many scenarios storing denormalized or duplicate data in order tooimprove hello performance or scalability of your solution is a valid approach tootake.</span></span> <span data-ttu-id="eff6d-214">Aby uzyskać więcej informacji o cenach, zobacz [cennik usługi Azure Storage](https://azure.microsoft.com/pricing/details/storage/).</span><span class="sxs-lookup"><span data-stu-id="eff6d-214">For more information about pricing, see [Azure Storage Pricing](https://azure.microsoft.com/pricing/details/storage/).</span></span>  

## <a name="guidelines-for-table-design"></a><span data-ttu-id="eff6d-215">Wskazówki dotyczące projektowania tabeli</span><span class="sxs-lookup"><span data-stu-id="eff6d-215">Guidelines for table design</span></span>
<span data-ttu-id="eff6d-216">Te listy Podsumuj niektóre hello wytycznych klucza, który należy mieć na uwadze podczas projektowania tabel, a w tym przewodniku zajmie się nimi wszystkie szczegółowo w dalszej części.</span><span class="sxs-lookup"><span data-stu-id="eff6d-216">These lists summarize some of hello key guidelines you should keep in mind when you are designing your tables, and this guide will address them all in more detail later in.</span></span> <span data-ttu-id="eff6d-217">Niniejsze wytyczne bardzo różnią się od hello wskazówki, które zwykle należy wykonać dla projektu relacyjnej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-217">These guidelines are very different from hello guidelines you would typically follow for relational database design.</span></span>  

<span data-ttu-id="eff6d-218">Projektowanie sieci toobe rozwiązania usługi tabeli *odczytu* wydajne:</span><span class="sxs-lookup"><span data-stu-id="eff6d-218">Designing your Table service solution toobe *read* efficient:</span></span>

* <span data-ttu-id="eff6d-219">***Projekt do wykonywania zapytań w aplikacjach ciężki odczytu.***</span><span class="sxs-lookup"><span data-stu-id="eff6d-219">***Design for querying in read-heavy applications.***</span></span> <span data-ttu-id="eff6d-220">Podczas projektowania tabel pomyśleć o zapytań hello (szczególnie hello opóźnienia poufnych z nich), które będą wykonywane przed zaplanowaniem będzie aktualizowania jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-220">When you are designing your tables, think about hello queries (especially hello latency sensitive ones) that you will execute before you think about how you will update your entities.</span></span> <span data-ttu-id="eff6d-221">Powoduje to zwykle rozwiązania wydajne i wydajności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-221">This typically results in an efficient and performant solution.</span></span>  
* <span data-ttu-id="eff6d-222">***Określ zarówno PartitionKey i RowKey zapytania.***</span><span class="sxs-lookup"><span data-stu-id="eff6d-222">***Specify both PartitionKey and RowKey in your queries.***</span></span> <span data-ttu-id="eff6d-223">*Polecenie zapytania* takich jak te są hello najbardziej efektywny zapytania usługi tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-223">*Point queries* such as these are hello most efficient table service queries.</span></span>  
* <span data-ttu-id="eff6d-224">***Warto przechowywać kopie jednostek.***</span><span class="sxs-lookup"><span data-stu-id="eff6d-224">***Consider storing duplicate copies of entities.***</span></span> <span data-ttu-id="eff6d-225">Magazyn tabel jest tanie dlatego należy rozważyć przechowywania hello tej samej jednostki zbyt wiele razy (z różnymi kluczami) tooenable efektywniejsze kwerendy.</span><span class="sxs-lookup"><span data-stu-id="eff6d-225">Table storage is cheap so consider storing hello same entity multiple times (with different keys) tooenable more efficient queries.</span></span>  
* <span data-ttu-id="eff6d-226">***Należy rozważyć denormalizing danych.***</span><span class="sxs-lookup"><span data-stu-id="eff6d-226">***Consider denormalizing your data.***</span></span> <span data-ttu-id="eff6d-227">Magazyn tabel jest tanie dlatego należy rozważyć denormalizing danych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-227">Table storage is cheap so consider denormalizing your data.</span></span> <span data-ttu-id="eff6d-228">Na przykład przechowywanie podsumowania jednostek, tak, aby zapytania dotyczące agregowanie danych wymagane jest tylko tooaccess pojedynczej jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-228">For example, store summary entities so that queries for aggregate data only need tooaccess a single entity.</span></span>  
* <span data-ttu-id="eff6d-229">***Użyj wartości klucza złożonego.***</span><span class="sxs-lookup"><span data-stu-id="eff6d-229">***Use compound key values.***</span></span> <span data-ttu-id="eff6d-230">Witaj tylko masz są klucze **PartitionKey** i **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="eff6d-230">hello only keys you have are **PartitionKey** and **RowKey**.</span></span> <span data-ttu-id="eff6d-231">Na przykład użyć tooentities ścieżki kluczem dostępu alternatywnego tooenable wartości klucza złożonego.</span><span class="sxs-lookup"><span data-stu-id="eff6d-231">For example, use compound key values tooenable alternate keyed access paths tooentities.</span></span>  
* <span data-ttu-id="eff6d-232">***Użyj projekcji zapytań.***</span><span class="sxs-lookup"><span data-stu-id="eff6d-232">***Use query projection.***</span></span> <span data-ttu-id="eff6d-233">Można zmniejszyć hello ilość danych za pośrednictwem sieci hello przy użyciu kwerend wybierających tylko pola hello potrzebne.</span><span class="sxs-lookup"><span data-stu-id="eff6d-233">You can reduce hello amount of data that you transfer over hello network by using queries that select just hello fields you need.</span></span>  

<span data-ttu-id="eff6d-234">Projektowanie sieci toobe rozwiązania usługi tabeli *zapisu* wydajne:</span><span class="sxs-lookup"><span data-stu-id="eff6d-234">Designing your Table service solution toobe *write* efficient:</span></span>  

* <span data-ttu-id="eff6d-235">***Nie należy tworzyć gorących partycji.***</span><span class="sxs-lookup"><span data-stu-id="eff6d-235">***Do not create hot partitions.***</span></span> <span data-ttu-id="eff6d-236">Wybierz klucze, które pozwalają toospread Twojego żądania między wieloma partycjami w dowolnym momencie czasu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-236">Choose keys that enable you toospread your requests across multiple partitions at any point of time.</span></span>  
* <span data-ttu-id="eff6d-237">***Unikaj największego ruchu.***</span><span class="sxs-lookup"><span data-stu-id="eff6d-237">***Avoid spikes in traffic.***</span></span> <span data-ttu-id="eff6d-238">Wygładzanie hello ruchu w odpowiednim przedziale czasu i uniknąć największego ruchu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-238">Smooth hello traffic over a reasonable period of time and avoid spikes in traffic.</span></span>
* <span data-ttu-id="eff6d-239">***Nie należy tworzyć niekoniecznie osobnej tabeli dla każdego typu jednostki.***</span><span class="sxs-lookup"><span data-stu-id="eff6d-239">***Don't necessarily create a separate table for each type of entity.***</span></span> <span data-ttu-id="eff6d-240">Jeśli wymagane jest atomic transakcji między typami jednostek, te wiele typów jednostek można przechowywać w hello sam partycji w hello tej samej tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-240">When you require atomic transactions across entity types, you can store these multiple entity types in hello same partition in hello same table.</span></span>
* <span data-ttu-id="eff6d-241">***Należy wziąć pod uwagę hello maksymalną przepływność, którą należy osiągnąć.***</span><span class="sxs-lookup"><span data-stu-id="eff6d-241">***Consider hello maximum throughput you must achieve.***</span></span> <span data-ttu-id="eff6d-242">Należy znać docelowe skalowalności hello hello usługi tabel i upewnij się, że projektu nie spowoduje tooexceed je.</span><span class="sxs-lookup"><span data-stu-id="eff6d-242">You must be aware of hello scalability targets for hello Table service and ensure that your design will not cause you tooexceed them.</span></span>  

<span data-ttu-id="eff6d-243">Omówione w tym przewodniku, zobaczysz przykłady, których praktycznego wdrożenia wszystkich tych zasad.</span><span class="sxs-lookup"><span data-stu-id="eff6d-243">As you read this guide, you will see examples that put all of these principles into practice.</span></span>  

## <a name="design-for-querying"></a><span data-ttu-id="eff6d-244">Projekt do wykonywania zapytań</span><span class="sxs-lookup"><span data-stu-id="eff6d-244">Design for querying</span></span>
<span data-ttu-id="eff6d-245">Tabela rozwiązań usług mogą być odczytywane obciążający, intensywnie zapisu lub mieszane hello dwa.</span><span class="sxs-lookup"><span data-stu-id="eff6d-245">Table service solutions may be read intensive, write intensive, or a mix of hello two.</span></span> <span data-ttu-id="eff6d-246">W tej sekcji koncentruje się na powitania rzeczy toobear pamiętać podczas projektowania sieci toosupport usługi tabeli operacje odczytu dla wydajnie.</span><span class="sxs-lookup"><span data-stu-id="eff6d-246">This section focuses on hello things toobear in mind when you are designing your Table service toosupport read operations efficiently.</span></span> <span data-ttu-id="eff6d-247">Projekt, że obsługuje operacje odczytu wydajnie również jest zazwyczaj wydajne dla operacji zapisu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-247">Typically, a design that supports read operations efficiently is also efficient for write operations.</span></span> <span data-ttu-id="eff6d-248">Istnieją dodatkowe zagadnienia toobear pamiętać podczas projektowania toosupport zapisu, omówiona w następnej sekcji hello [projektu do modyfikacji danych](#design-for-data-modification).</span><span class="sxs-lookup"><span data-stu-id="eff6d-248">However, there are additional considerations toobear in mind when designing toosupport write operations, discussed in hello next section, [Design for data modification](#design-for-data-modification).</span></span>

<span data-ttu-id="eff6d-249">Dobry punkt wyjścia dla projektowania tooenable rozwiązania usługi z tabeli danych tooread wydajnie jest tooask "jakie zapytania zostanie Moje aplikacji muszą tooexecute tooretrieve hello dane z usługi tabel hello?"</span><span class="sxs-lookup"><span data-stu-id="eff6d-249">A good starting point for designing your Table service solution tooenable you tooread data efficiently is tooask "What queries will my application need tooexecute tooretrieve hello data it needs from hello Table service?"</span></span>  

> [!NOTE]
> <span data-ttu-id="eff6d-250">Z hello usługi tabel, jest ważne, tooget hello na początku projektu jest poprawna, ponieważ jest trudne i drogie toochange go później.</span><span class="sxs-lookup"><span data-stu-id="eff6d-250">With hello Table service, it's important tooget hello design correct up front because it's difficult and expensive toochange it later.</span></span> <span data-ttu-id="eff6d-251">Na przykład relacyjnej bazy danych jest często tooaddress możliwe problemy z wydajnością po prostu dodając indeksuje tooan istniejącej bazy danych: nie jest opcją z hello usługi tabel.</span><span class="sxs-lookup"><span data-stu-id="eff6d-251">For example, in a relational database it's often possible tooaddress performance issues simply by adding indexes tooan existing database: this is not an option with hello Table service.</span></span>  
> 
> 

<span data-ttu-id="eff6d-252">W tej sekcji koncentruje się na powitania kluczowych zagadnień, które muszą spełnić przy projektowaniu tabel do wykonywania zapytań.</span><span class="sxs-lookup"><span data-stu-id="eff6d-252">This section focuses on hello key issues you must address when you design your tables for querying.</span></span> <span data-ttu-id="eff6d-253">Tematy Hello opisanych w tej sekcji obejmują:</span><span class="sxs-lookup"><span data-stu-id="eff6d-253">hello topics covered in this section include:</span></span>

* [<span data-ttu-id="eff6d-254">Jak wybór PartitionKey i RowKey ma wpływ na wydajność zapytań</span><span class="sxs-lookup"><span data-stu-id="eff6d-254">How your choice of PartitionKey and RowKey impacts query performance</span></span>](#how-your-choice-of-partitionkey-and-rowkey-impacts-query-performance)
* [<span data-ttu-id="eff6d-255">Wybieranie odpowiedniego PartitionKey</span><span class="sxs-lookup"><span data-stu-id="eff6d-255">Choosing an appropriate PartitionKey</span></span>](#choosing-an-appropriate-partitionkey)
* [<span data-ttu-id="eff6d-256">Optymalizacja zapytania dotyczące hello usługi tabel</span><span class="sxs-lookup"><span data-stu-id="eff6d-256">Optimizing queries for hello Table service</span></span>](#optimizing-queries-for-the-table-service)
* [<span data-ttu-id="eff6d-257">Sortowanie danych w hello usługi tabel</span><span class="sxs-lookup"><span data-stu-id="eff6d-257">Sorting data in hello Table service</span></span>](#sorting-data-in-the-table-service)

### <a name="how-your-choice-of-partitionkey-and-rowkey-impacts-query-performance"></a><span data-ttu-id="eff6d-258">Jak wybór PartitionKey i RowKey ma wpływ na wydajność zapytań</span><span class="sxs-lookup"><span data-stu-id="eff6d-258">How your choice of PartitionKey and RowKey impacts query performance</span></span>
<span data-ttu-id="eff6d-259">Witaj następujących przykładach przyjmuje usługi tabel hello jest przechowywanie jednostek pracowników z hello następujące struktury (Większość przykładów hello Pomiń hello **sygnatury czasowej** właściwości dla jasności):</span><span class="sxs-lookup"><span data-stu-id="eff6d-259">hello following examples assume hello table service is storing employee entities with hello following structure (most of hello examples omit hello **Timestamp** property for clarity):</span></span>  

| <span data-ttu-id="eff6d-260">*Nazwa kolumny*</span><span class="sxs-lookup"><span data-stu-id="eff6d-260">*Column name*</span></span> | <span data-ttu-id="eff6d-261">*Typ danych*</span><span class="sxs-lookup"><span data-stu-id="eff6d-261">*Data type*</span></span> |
| --- | --- |
| <span data-ttu-id="eff6d-262">**PartitionKey** (nazwa działu)</span><span class="sxs-lookup"><span data-stu-id="eff6d-262">**PartitionKey** (Department Name)</span></span> |<span data-ttu-id="eff6d-263">Ciąg</span><span class="sxs-lookup"><span data-stu-id="eff6d-263">String</span></span> |
| <span data-ttu-id="eff6d-264">**RowKey** (identyfikator pracownika)</span><span class="sxs-lookup"><span data-stu-id="eff6d-264">**RowKey** (Employee Id)</span></span> |<span data-ttu-id="eff6d-265">Ciąg</span><span class="sxs-lookup"><span data-stu-id="eff6d-265">String</span></span> |
| <span data-ttu-id="eff6d-266">**Imię**</span><span class="sxs-lookup"><span data-stu-id="eff6d-266">**FirstName**</span></span> |<span data-ttu-id="eff6d-267">Ciąg</span><span class="sxs-lookup"><span data-stu-id="eff6d-267">String</span></span> |
| <span data-ttu-id="eff6d-268">**Nazwisko**</span><span class="sxs-lookup"><span data-stu-id="eff6d-268">**LastName**</span></span> |<span data-ttu-id="eff6d-269">Ciąg</span><span class="sxs-lookup"><span data-stu-id="eff6d-269">String</span></span> |
| <span data-ttu-id="eff6d-270">**Okres ważności**</span><span class="sxs-lookup"><span data-stu-id="eff6d-270">**Age**</span></span> |<span data-ttu-id="eff6d-271">Liczba całkowita</span><span class="sxs-lookup"><span data-stu-id="eff6d-271">Integer</span></span> |
| <span data-ttu-id="eff6d-272">**EmailAddress**</span><span class="sxs-lookup"><span data-stu-id="eff6d-272">**EmailAddress**</span></span> |<span data-ttu-id="eff6d-273">Ciąg</span><span class="sxs-lookup"><span data-stu-id="eff6d-273">String</span></span> |

<span data-ttu-id="eff6d-274">Witaj wcześniejszej sekcji [Omówienie usługi Azure tabeli](#overview) opisano niektóre hello główne funkcje hello usługi tabel Azure, które mają bezpośredni wpływ na projektowanie dla zapytania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-274">hello earlier section [Azure Table service overview](#overview) describes some of hello key features of hello Azure Table service that have a direct influence on designing for query.</span></span> <span data-ttu-id="eff6d-275">Wynikiem tych hello następujące ogólne wskazówki dotyczące projektowania zapytań usługi tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-275">These result in hello following general guidelines for designing Table service queries.</span></span> <span data-ttu-id="eff6d-276">Należy pamiętać, że składnia filtru hello używane w poniższych przykładach hello z hello tabeli usługi interfejsu API REST, aby uzyskać więcej informacji, zobacz [jednostek zapytania](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span><span class="sxs-lookup"><span data-stu-id="eff6d-276">Note that hello filter syntax used in hello examples below is from hello Table service REST API, for more information see [Query Entities](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span></span>  

* <span data-ttu-id="eff6d-277">A ***zapytania punktu*** jest najbardziej wydajnym toouse wyszukiwania hello i jest zalecany toobe wyszukiwań dużych lub wyszukiwań wymagające najniższym opóźnieniu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-277">A ***Point Query*** is hello most efficient lookup toouse and is recommended toobe used for high-volume lookups or lookups requiring lowest latency.</span></span> <span data-ttu-id="eff6d-278">Takie zapytanie może używać hello indeksów toolocate pojedynczą jednostkę bardzo wydajnie, określając zarówno hello **PartitionKey** i **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-278">Such a query can use hello indexes toolocate an individual entity very efficiently by specifying both hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="eff6d-279">Na przykład: $filter = (PartitionKey eq 'Sales') i (RowKey eq "2")</span><span class="sxs-lookup"><span data-stu-id="eff6d-279">For example: $filter=(PartitionKey eq 'Sales') and (RowKey eq '2')</span></span>  
* <span data-ttu-id="eff6d-280">Drugi najlepiej jest ***kwerendy zakresu*** używającą hello **PartitionKey** i filtry w zakresie **RowKey** wartości tooreturn więcej niż jednej jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-280">Second best is a ***Range Query*** that uses hello **PartitionKey** and filters on a range of **RowKey** values tooreturn more than one entity.</span></span> <span data-ttu-id="eff6d-281">Witaj **PartitionKey** wartość identyfikuje określonej partycji i hello **RowKey** identyfikuje podzbiór hello jednostki w tej partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-281">hello **PartitionKey** value identifies a specific partition, and hello **RowKey** values identify a subset of hello entities in that partition.</span></span> <span data-ttu-id="eff6d-282">Na przykład: $filter = PartitionKey eq "Sprzedaży i RowKey ge" i RowKey lt 'T "</span><span class="sxs-lookup"><span data-stu-id="eff6d-282">For example: $filter=PartitionKey eq 'Sales' and RowKey ge 'S' and RowKey lt 'T'</span></span>  
* <span data-ttu-id="eff6d-283">Trzeci najlepiej ***skanowania partycji*** używającą hello **PartitionKey** i filtry w innej właściwości niekluczowe i mogą zwracać więcej niż jednej jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-283">Third best is a ***Partition Scan*** that uses hello **PartitionKey** and filters on another non-key property and that may return more than one entity.</span></span> <span data-ttu-id="eff6d-284">Witaj **PartitionKey** wartość identyfikuje określonej partycji, a właściwość hello wartości wybranych dla podzbioru hello jednostek w tej partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-284">hello **PartitionKey** value identifies a specific partition, and hello property values select for a subset of hello entities in that partition.</span></span> <span data-ttu-id="eff6d-285">Na przykład: $filter = PartitionKey eq "Sprzedaży" i nazwisko eq 'Smith'</span><span class="sxs-lookup"><span data-stu-id="eff6d-285">For example: $filter=PartitionKey eq 'Sales' and LastName eq 'Smith'</span></span>  
* <span data-ttu-id="eff6d-286">A ***skanowania tabeli*** nie obejmuje hello **PartitionKey** i jest bardzo mało wydajne, ponieważ wszystkie partycje hello, tworzące tabelę z kolei do żadnych zgodnych jednostek wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-286">A ***Table Scan*** does not include hello **PartitionKey** and is very inefficient because it searches all of hello partitions that make up your table in turn for any matching entities.</span></span> <span data-ttu-id="eff6d-287">Zostanie przeprowadzone skanowanie tabeli niezależnie od tego, czy filtr używa hello **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="eff6d-287">It will perform a table scan regardless of whether or not your filter uses hello **RowKey**.</span></span> <span data-ttu-id="eff6d-288">Na przykład: $filter = nazwisko eq 'Nowak'</span><span class="sxs-lookup"><span data-stu-id="eff6d-288">For example: $filter=LastName eq 'Jones'</span></span>  
* <span data-ttu-id="eff6d-289">Zapytań zwracających wiele jednostek zwrócić posortowane w **PartitionKey** i **RowKey** kolejności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-289">Queries that return multiple entities return them sorted in **PartitionKey** and **RowKey** order.</span></span> <span data-ttu-id="eff6d-290">Wybierz tooavoid ponowne sortowanie hello jednostek w kliencie hello **RowKey** definiuje hello najczęściej kolejności sortowania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-290">tooavoid resorting hello entities in hello client, choose a **RowKey** that defines hello most common sort order.</span></span>  

<span data-ttu-id="eff6d-291">Należy pamiętać, że za pomocą "**lub**" toospecify na podstawie filtru **RowKey** wartości powoduje skanowania partycji i nie jest traktowana jako kwerendy zakresu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-291">Note that using an "**or**" toospecify a filter based on **RowKey** values results in a partition scan and is not treated as a range query.</span></span> <span data-ttu-id="eff6d-292">W związku z tym należy unikać zapytań, które używać filtrów, takich jak: $filter = PartitionKey eq 'Sales' i (RowKey eq "121" lub RowKey eq "322")</span><span class="sxs-lookup"><span data-stu-id="eff6d-292">Therefore, you should avoid queries that use filters such as: $filter=PartitionKey eq 'Sales' and (RowKey eq '121' or RowKey eq '322')</span></span>  

<span data-ttu-id="eff6d-293">Aby uzyskać przykładów kodu po stronie klienta, które używają hello biblioteki klienta usługi Storage tooexecute wydajność zapytań zobacz:</span><span class="sxs-lookup"><span data-stu-id="eff6d-293">For examples of client-side code that use hello Storage Client Library tooexecute efficient queries, see:</span></span>  

* [<span data-ttu-id="eff6d-294">Wykonywanie zapytania punktu, przy użyciu hello biblioteki klienta usługi Storage</span><span class="sxs-lookup"><span data-stu-id="eff6d-294">Executing a point query using hello Storage Client Library</span></span>](#executing-a-point-query-using-the-storage-client-library)
* [<span data-ttu-id="eff6d-295">Trwa pobieranie wiele jednostek za pomocą LINQ</span><span class="sxs-lookup"><span data-stu-id="eff6d-295">Retrieving multiple entities using LINQ</span></span>](#retrieving-multiple-entities-using-linq)
* [<span data-ttu-id="eff6d-296">Projekcja po stronie serwera</span><span class="sxs-lookup"><span data-stu-id="eff6d-296">Server-side projection</span></span>](#server-side-projection)  

<span data-ttu-id="eff6d-297">Przykłady kodu po stronie klienta, który może obsługiwać wiele jednostek typy przechowywane w hello sam tabeli, zobacz:</span><span class="sxs-lookup"><span data-stu-id="eff6d-297">For examples of client-side code that can handle multiple entity types stored in hello same table, see:</span></span>  

* [<span data-ttu-id="eff6d-298">Praca z typami jednostek heterogenicznych</span><span class="sxs-lookup"><span data-stu-id="eff6d-298">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)  

### <a name="choosing-an-appropriate-partitionkey"></a><span data-ttu-id="eff6d-299">Wybieranie odpowiedniego PartitionKey</span><span class="sxs-lookup"><span data-stu-id="eff6d-299">Choosing an appropriate PartitionKey</span></span>
<span data-ttu-id="eff6d-300">Wybór **PartitionKey** zrównoważenia hello potrzeby tooenables hello użycie EGTs (tooensure spójności) przed toodistribute wymaganie hello jednostek wiele partycji (tooensure skalowalna).</span><span class="sxs-lookup"><span data-stu-id="eff6d-300">Your choice of **PartitionKey** should balance hello need tooenables hello use of EGTs (tooensure consistency) against hello requirement toodistribute your entities across multiple partitions (tooensure a scalable solution).</span></span>  

<span data-ttu-id="eff6d-301">W jednym extreme można przechowywać wszystkie obiekty w jednej partycji, ale to może ograniczać skalowalność hello rozwiązania i może uniemożliwić usługi tabel hello stanie równoważenie tooload żądań.</span><span class="sxs-lookup"><span data-stu-id="eff6d-301">At one extreme, you could store all your entities in a single partition, but this may limit hello scalability of your solution and would prevent hello table service from being able tooload-balance requests.</span></span> <span data-ttu-id="eff6d-302">Na powitania y. można przechowywać jednej jednostki dla każdej partycji, będzie wysoce skalowalna i co pozwala żądania tooload saldo usług tabeli hello, ale co może uniemożliwić używanie jednostek grupy transakcji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-302">At hello other extreme, you could store one entity per partition, which would be highly scalable and which enables hello table service tooload-balance requests, but which would prevent you from using entity group transactions.</span></span>  

<span data-ttu-id="eff6d-303">Idealnym **PartitionKey** to taki, który umożliwia wydajne zapytania toouse i ma wystarczające tooensure partycje rozwiązania do skalowania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-303">An ideal **PartitionKey** is one that enables you toouse efficient queries and that has sufficient partitions tooensure your solution is scalable.</span></span> <span data-ttu-id="eff6d-304">Zazwyczaj można zauważyć, że obiekty odpowiednie właściwości, która dystrybuuje jednostek na partycji wystarczającą.</span><span class="sxs-lookup"><span data-stu-id="eff6d-304">Typically, you will find that your entities will have a suitable property that distributes your entities across sufficient partitions.</span></span>

> [!NOTE]
> <span data-ttu-id="eff6d-305">Na przykład w systemie, która przechowuje informacje dotyczące użytkowników lub pracowników, nazwa użytkownika może być dobrym PartitionKey.</span><span class="sxs-lookup"><span data-stu-id="eff6d-305">For example, in a system that stores information about users or employees, UserID may be a good PartitionKey.</span></span> <span data-ttu-id="eff6d-306">Może mieć kilka jednostki, które korzystają z danym UserID jako klucza partycji hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-306">You may have several entities that use a given UserID as hello partition key.</span></span> <span data-ttu-id="eff6d-307">Każda jednostka, która przechowuje dane o użytkowniku są pogrupowane w jednej partycji, a więc te jednostki są dostępne przy użyciu transakcji grupy jednostek, przy zachowaniu wysokiej skalowalności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-307">Each entity that stores data about a user is grouped into a single partition, and so these entities are accessible via entity group transactions, while still being highly scalable.</span></span>
> 
> 

<span data-ttu-id="eff6d-308">Istnieją dodatkowe zagadnienia w wybranym **PartitionKey** dotyczących toohow będzie Wstawianie, aktualizowanie i usuwanie jednostek: zobacz sekcję hello [projektu do modyfikacji danych](#design-for-data-modification) poniżej.</span><span class="sxs-lookup"><span data-stu-id="eff6d-308">There are additional considerations in your choice of **PartitionKey** that relate toohow you will insert, update, and delete entities: see hello section [Design for data modification](#design-for-data-modification) below.</span></span>  

### <a name="optimizing-queries-for-hello-table-service"></a><span data-ttu-id="eff6d-309">Optymalizacja zapytania dotyczące hello usługi tabel</span><span class="sxs-lookup"><span data-stu-id="eff6d-309">Optimizing queries for hello Table service</span></span>
<span data-ttu-id="eff6d-310">Witaj usługi tabel automatycznie indeksuje jednostek przy użyciu hello **PartitionKey** i **RowKey** wartości w jeden indeks klastrowany, dlatego hello przyczyny, że punkt zapytania są hello toouse najbardziej efektywny .</span><span class="sxs-lookup"><span data-stu-id="eff6d-310">hello Table service automatically indexes your entities using hello **PartitionKey** and **RowKey** values in a single clustered index, hence hello reason that point queries are hello most efficient toouse.</span></span> <span data-ttu-id="eff6d-311">Istnieją jednak nie indeksów inną niż hello indeksu klastrowanego na powitania **PartitionKey** i **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="eff6d-311">However, there are no indexes other than that on hello clustered index on hello **PartitionKey** and **RowKey**.</span></span>

<span data-ttu-id="eff6d-312">Wiele projektów musi spełniać wymagania wyszukiwanie tooenable jednostek na podstawie wielu kryteriów.</span><span class="sxs-lookup"><span data-stu-id="eff6d-312">Many designs must meet requirements tooenable lookup of entities based on multiple criteria.</span></span> <span data-ttu-id="eff6d-313">Na przykład Lokalizowanie jednostek pracownika opartych na wiadomości e-mail, identyfikator lub nazwisko.</span><span class="sxs-lookup"><span data-stu-id="eff6d-313">For example, locating employee entities based on email, employee id, or last name.</span></span> <span data-ttu-id="eff6d-314">Witaj następujących wzorce w sekcji hello [wzorce projektowe tabeli](#table-design-patterns) adresów tego rodzaju wymaganie oraz opisano sposoby obchodzić fakt hello usługi tabel hello nie zapewnia indeksów pomocniczych:</span><span class="sxs-lookup"><span data-stu-id="eff6d-314">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address these types of requirement and describe ways of working around hello fact that hello Table service does not provide secondary indexes:</span></span>  

* <span data-ttu-id="eff6d-315">[Wzorzec pomocniczy indeks partycji wewnątrz](#intra-partition-secondary-index-pattern) -przechowywać wiele kopii każdej jednostki przy użyciu różnych **RowKey** wartości (w hello tej samej partycji) tooenable szybkie i wydajne wyszukiwanie i sortowanie alternatywne porządkuje przy użyciu różne **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-315">[Intra-partition secondary index pattern](#intra-partition-secondary-index-pattern) - Store multiple copies of each entity using different **RowKey** values (in hello same partition) tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  
* <span data-ttu-id="eff6d-316">[Wzorzec między partycji pomocniczy indeks](#inter-partition-secondary-index-pattern) — przechowywać wiele kopii każdej jednostki przy użyciu różnych wartości RowKey w osobnych partycji lub w oddzielnych tabelach tooenable szybkie i wydajne wyszukiwanie i sortowanie alternatywne porządkuje przy użyciu różnych **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-316">[Inter-partition secondary index pattern](#inter-partition-secondary-index-pattern) - Store multiple copies of each entity using different RowKey values in separate partitions or in separate tables tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  
* <span data-ttu-id="eff6d-317">[Wzorzec jednostek indeksu](#index-entities-pattern) — Obsługa indeksu jednostek tooenable wydajne wyszukiwanie zwracających list jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-317">[Index Entities Pattern](#index-entities-pattern) - Maintain index entities tooenable efficient searches that return lists of entities.</span></span>  

### <a name="sorting-data-in-hello-table-service"></a><span data-ttu-id="eff6d-318">Sortowanie danych w hello usługi tabel</span><span class="sxs-lookup"><span data-stu-id="eff6d-318">Sorting data in hello Table service</span></span>
<span data-ttu-id="eff6d-319">Hello usługi tabel zwraca jednostki sortowane w kolejności rosnącej według **PartitionKey** , a następnie według **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="eff6d-319">hello Table service returns entities sorted in ascending order based on **PartitionKey** and then by **RowKey**.</span></span> <span data-ttu-id="eff6d-320">Klucze te są wartości ciągu i tooensure, który wartości liczbowe sortowanie prawidłowo, należy przekonwertować tooa stałej długości i uzupełniania zer.</span><span class="sxs-lookup"><span data-stu-id="eff6d-320">These keys are string values and tooensure that numeric values sort correctly, you should convert them tooa fixed length and pad them with zeroes.</span></span> <span data-ttu-id="eff6d-321">Na przykład, jeśli hello pracownika wartość identyfikatora można użyć jako hello **RowKey** jest wartość całkowita należy przekonwertować identyfikator **123** za**00000123**.</span><span class="sxs-lookup"><span data-stu-id="eff6d-321">For example, if hello employee id value you use as hello **RowKey** is an integer value, you should convert employee id **123** too**00000123**.</span></span>  

<span data-ttu-id="eff6d-322">Wiele aplikacji ma wymagania dotyczące danych toouse posortowane w różnej kolejności: na przykład sortowanie pracowników według nazwy lub przez przyłączenie daty.</span><span class="sxs-lookup"><span data-stu-id="eff6d-322">Many applications have requirements toouse data sorted in different orders: for example, sorting employees by name, or by joining date.</span></span> <span data-ttu-id="eff6d-323">Witaj następujących wzorce w sekcji hello [wzorce projektowe tabeli](#table-design-patterns) adresów, jak porządki sortowania tooalternate obiekty:</span><span class="sxs-lookup"><span data-stu-id="eff6d-323">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address how tooalternate sort orders for your entities:</span></span>  

* <span data-ttu-id="eff6d-324">[Wzorzec pomocniczy indeks wewnątrz partycji](#intra-partition-secondary-index-pattern) -przechowywać wiele kopii każdej jednostki przy użyciu różnych wartości RowKey (w hello tej samej partycji) tooenable szybkie i wydajne wyszukiwanie i sortowanie alternatywne porządkuje przy użyciu innej wartości RowKey.</span><span class="sxs-lookup"><span data-stu-id="eff6d-324">[Intra-partition secondary index pattern](#intra-partition-secondary-index-pattern) - Store multiple copies of each entity using different RowKey values (in hello same partition) tooenable fast and efficient lookups and alternate sort orders by using different RowKey values.</span></span>  
* <span data-ttu-id="eff6d-325">[Wzorzec między partycji pomocniczy indeks](#inter-partition-secondary-index-pattern) — przechowywać wiele kopii każdej jednostki przy użyciu różnych RowKey wartości w osobnych partycji w oddzielnych tabelach tooenable szybkie i wydajne wyszukiwanie i sortowanie alternatywne porządkuje przy użyciu różnych RowKey wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-325">[Inter-partition secondary index pattern](#inter-partition-secondary-index-pattern) - Store multiple copies of each entity using different RowKey values in separate partitions in separate tables tooenable fast and efficient lookups and alternate sort orders by using different RowKey values.</span></span>
* <span data-ttu-id="eff6d-326">[Wzorzec końcowego fragmentu dziennika](#log-tail-pattern) -hello pobrać  *n*  jednostek ostatnio dodany tooa partycji przy użyciu **RowKey** wartość sortujące odwrotnej daty i czasu kolejności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-326">[Log tail pattern](#log-tail-pattern) - Retrieve hello *n* entities most recently added tooa partition by using a **RowKey** value that sorts in reverse date and time order.</span></span>  

## <a name="design-for-data-modification"></a><span data-ttu-id="eff6d-327">Projekt do modyfikacji danych</span><span class="sxs-lookup"><span data-stu-id="eff6d-327">Design for data modification</span></span>
<span data-ttu-id="eff6d-328">W tej sekcji koncentruje się na informacjach dotyczących projektowania hello optymalizacji operacji wstawienia, aktualizacje i usuwa.</span><span class="sxs-lookup"><span data-stu-id="eff6d-328">This section focuses on hello design considerations for optimizing inserts, updates, and deletes.</span></span> <span data-ttu-id="eff6d-329">W niektórych przypadkach należy tooevaluate hello kompromis między projekty, które Optymalizuj dla zapytaniach dotyczących projektów, które Optymalizuj dla modyfikacji danych tak samo, jak w projektach relacyjnych baz danych (chociaż techniki hello zarządzania hello projektu możliwości różnią się relacyjnej bazy danych).</span><span class="sxs-lookup"><span data-stu-id="eff6d-329">In some cases, you will need tooevaluate hello trade-off between designs that optimize for querying against designs that optimize for data modification just as you do in designs for relational databases (although hello techniques for managing hello design trade-offs are different in a relational database).</span></span> <span data-ttu-id="eff6d-330">Witaj sekcji [wzorce projektowe tabeli](#table-design-patterns) opisano niektóre wzorce projektowe szczegółowe dla hello usługi tabel i opisano niektóre te kompromisy.</span><span class="sxs-lookup"><span data-stu-id="eff6d-330">hello section [Table Design Patterns](#table-design-patterns) describes some detailed design patterns for hello Table service and highlights some these trade-offs.</span></span> <span data-ttu-id="eff6d-331">W praktyce znajdziesz, że wiele projektów, zoptymalizowana pod kątem zapytań jednostek również działać efektywne w przypadku modyfikowania jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-331">In practice, you will find that many designs optimized for querying entities also work well for modifying entities.</span></span>  

### <a name="optimizing-hello-performance-of-insert-update-and-delete-operations"></a><span data-ttu-id="eff6d-332">Optymalizacja wydajności hello wstawiania, aktualizowania i usuwania operacji</span><span class="sxs-lookup"><span data-stu-id="eff6d-332">Optimizing hello performance of insert, update, and delete operations</span></span>
<span data-ttu-id="eff6d-333">tooupdate lub usuwania jednostki, musi być możliwe tooidentify go za pomocą hello **PartitionKey** i **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-333">tooupdate or delete an entity, you must be able tooidentify it by using hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="eff6d-334">W tym zakresie wybór **PartitionKey** i **RowKey** dla modyfikowanie jednostek należy stosować podobnych kryteriów tooyour wybór toosupport punktu zapytania, ponieważ ma tooidentify jednostek jako najbardziej wydajny sposób.</span><span class="sxs-lookup"><span data-stu-id="eff6d-334">In this respect, your choice of **PartitionKey** and **RowKey** for modifying entities should follow similar criteria tooyour choice toosupport point queries because you want tooidentify entities as efficiently as possible.</span></span> <span data-ttu-id="eff6d-335">Nie ma toouse nieefektywne partycji lub tabeli skanowania toolocate jednostki w kolejności toodiscover hello **PartitionKey** i **RowKey** wartości muszą tooupdate lub usuń go.</span><span class="sxs-lookup"><span data-stu-id="eff6d-335">You do not want toouse an inefficient partition or table scan toolocate an entity in order toodiscover hello **PartitionKey** and **RowKey** values you need tooupdate or delete it.</span></span>  

<span data-ttu-id="eff6d-336">Witaj następujących wzorce w sekcji hello [wzorce projektowe tabeli](#table-design-patterns) adresów optymalizacji wydajności hello lub Twoje insert, update i operacji usunięcia:</span><span class="sxs-lookup"><span data-stu-id="eff6d-336">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address optimizing hello performance or your insert, update, and delete operations:</span></span>  

* <span data-ttu-id="eff6d-337">[Dużą usunąć wzorzec](#high-volume-delete-pattern) -usunięcie hello Włącz dużą liczbę jednostek przez zapisanie wszystkich jednostek hello do usunięcia jednoczesnych w ich własnych osobnej tabeli; usuwania jednostek hello przez usunięcie hello tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-337">[High volume delete pattern](#high-volume-delete-pattern) - Enable hello deletion of a high volume of entities by storing all hello entities for simultaneous deletion in their own separate table; you delete hello entities by deleting hello table.</span></span>  
* <span data-ttu-id="eff6d-338">[Wzorzec serii danych](#data-series-pattern) -magazynu pełnych danych serii w pojedynczej jednostki toominimize hello liczba żądań wprowadzania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-338">[Data series pattern](#data-series-pattern) - Store complete data series in a single entity toominimize hello number of requests you make.</span></span>  
* <span data-ttu-id="eff6d-339">[Wzorzec szeroki jednostek](#wide-entities-pattern) -wiele jednostek logicznych toostore jednostek fizycznych za pomocą więcej niż 252 właściwości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-339">[Wide entities pattern](#wide-entities-pattern) - Use multiple physical entities toostore logical entities with more than 252 properties.</span></span>  
* <span data-ttu-id="eff6d-340">[Wzorzec dużych jednostek](#large-entities-pattern) -Użyj obiektu blob magazynu toostore właściwość dużej wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-340">[Large entities pattern](#large-entities-pattern) - Use blob storage toostore large property values.</span></span>  

### <a name="ensuring-consistency-in-your-stored-entities"></a><span data-ttu-id="eff6d-341">Zapewnienie spójności w jednostki przechowywanej</span><span class="sxs-lookup"><span data-stu-id="eff6d-341">Ensuring consistency in your stored entities</span></span>
<span data-ttu-id="eff6d-342">Witaj innych klucza czynnik, który ma wpływ na wybór kluczy dla optymalizacji modyfikacji danych jest sposób tooensure spójności za pomocą atomic transakcji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-342">hello other key factor that influences your choice of keys for optimizing data modifications is how tooensure consistency by using atomic transactions.</span></span> <span data-ttu-id="eff6d-343">Toooperate EGT można używać tylko na jednostek przechowywanych w hello tej samej partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-343">You can only use an EGT toooperate on entities stored in hello same partition.</span></span>  

<span data-ttu-id="eff6d-344">Witaj następujących wzorce w sekcji hello [wzorce projektowe tabeli](#table-design-patterns) adresu zarządzania spójności:</span><span class="sxs-lookup"><span data-stu-id="eff6d-344">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address managing consistency:</span></span>  

* <span data-ttu-id="eff6d-345">[Wzorzec pomocniczy indeks partycji wewnątrz](#intra-partition-secondary-index-pattern) -przechowywać wiele kopii każdej jednostki przy użyciu różnych **RowKey** wartości (w hello tej samej partycji) tooenable szybkie i wydajne wyszukiwanie i sortowanie alternatywne porządkuje przy użyciu różne **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-345">[Intra-partition secondary index pattern](#intra-partition-secondary-index-pattern) - Store multiple copies of each entity using different **RowKey** values (in hello same partition) tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  
* <span data-ttu-id="eff6d-346">[Wzorzec między partycji pomocniczy indeks](#inter-partition-secondary-index-pattern) — przechowywać wiele kopii każdej jednostki przy użyciu różnych wartości RowKey w osobnych partycji lub w oddzielnych tabelach tooenable szybkie i wydajne wyszukiwanie i sortowanie alternatywne porządkuje przy użyciu różnych **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-346">[Inter-partition secondary index pattern](#inter-partition-secondary-index-pattern) - Store multiple copies of each entity using different RowKey values in separate partitions or in separate tables tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  
* <span data-ttu-id="eff6d-347">[Wzorzec transakcji po pewnym czasie spójne](#eventually-consistent-transactions-pattern) -włączyć spójności po pewnym czasie działania przez granice partycji lub granice systemu magazynu za pomocą kolejek platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="eff6d-347">[Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) - Enable eventually consistent behavior across partition boundaries or storage system boundaries by using Azure queues.</span></span>
* <span data-ttu-id="eff6d-348">[Wzorzec jednostek indeksu](#index-entities-pattern) — Obsługa indeksu jednostek tooenable wydajne wyszukiwanie zwracających list jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-348">[Index Entities Pattern](#index-entities-pattern) - Maintain index entities tooenable efficient searches that return lists of entities.</span></span>  
* <span data-ttu-id="eff6d-349">[Wzorzec denormalization](#denormalization-pattern) — łączenie dane dotyczące razem w tooenable pojedynczej jednostki tooretrieve hello wszystkie dane, które należy za pomocą kwerendy pojedynczy punkt.</span><span class="sxs-lookup"><span data-stu-id="eff6d-349">[Denormalization pattern](#denormalization-pattern) - Combine related data together in a single entity tooenable you tooretrieve all hello data you need with a single point query.</span></span>  
* <span data-ttu-id="eff6d-350">[Wzorzec serii danych](#data-series-pattern) -magazynu pełnych danych serii w pojedynczej jednostki toominimize hello liczba żądań wprowadzania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-350">[Data series pattern](#data-series-pattern) - Store complete data series in a single entity toominimize hello number of requests you make.</span></span>  

<span data-ttu-id="eff6d-351">Informacje o transakcjach grupy jednostek, sekcji hello [transakcji grupy jednostek](#entity-group-transactions).</span><span class="sxs-lookup"><span data-stu-id="eff6d-351">For information about entity group transactions, see hello section [Entity Group Transactions](#entity-group-transactions).</span></span>  

### <a name="ensuring-your-design-for-efficient-modifications-facilitates-efficient-queries"></a><span data-ttu-id="eff6d-352">Zapewnienie projektu wydajne modyfikacji ułatwia efektywne zapytań</span><span class="sxs-lookup"><span data-stu-id="eff6d-352">Ensuring your design for efficient modifications facilitates efficient queries</span></span>
<span data-ttu-id="eff6d-353">W wielu przypadkach to projekt wydajne podczas badania powoduje efektywne modyfikacje, ale zawsze powinni sprawdzić, czy dotyczy hello konkretnego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="eff6d-353">In many cases, a design for efficient querying results in efficient modifications, but you should always evaluate whether this is hello case for your specific scenario.</span></span> <span data-ttu-id="eff6d-354">Niektóre wzorców hello w sekcji hello [wzorce projektowe tabeli](#table-design-patterns) jawnie oceń kompromis między sprawdzanie i modyfikowanie jednostek i zawsze należy uwzględnić hello numeru każdego typu konta działania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-354">Some of hello patterns in hello section [Table Design Patterns](#table-design-patterns) explicitly evaluate trade-offs between querying and modifying entities, and you should always take into account hello number of each type of operation.</span></span>  

<span data-ttu-id="eff6d-355">Witaj następujących wzorce w sekcji hello [wzorce projektowe tabeli](#table-design-patterns) kompromis między projektowania zapytań wydajne i projektowania modyfikacji danych wydajne rozwiązania:</span><span class="sxs-lookup"><span data-stu-id="eff6d-355">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address trade-offs between designing for efficient queries and designing for efficient data modification:</span></span>  

* <span data-ttu-id="eff6d-356">[Wzorca klucza złożonego](#compound-key-pattern) -Użyj złożone **RowKey** dane z zapytania pojedynczy punkt dotyczące wartości tooenable toolookup klienta.</span><span class="sxs-lookup"><span data-stu-id="eff6d-356">[Compound key pattern](#compound-key-pattern) - Use compound **RowKey** values tooenable a client toolookup related data with a single point query.</span></span>  
* <span data-ttu-id="eff6d-357">[Wzorzec końcowego fragmentu dziennika](#log-tail-pattern) -hello pobrać  *n*  jednostek ostatnio dodany tooa partycji przy użyciu **RowKey** wartość sortujące odwrotnej daty i czasu kolejności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-357">[Log tail pattern](#log-tail-pattern) - Retrieve hello *n* entities most recently added tooa partition by using a **RowKey** value that sorts in reverse date and time order.</span></span>  

## <a name="encrypting-table-data"></a><span data-ttu-id="eff6d-358">Szyfrowanie danych w tabeli</span><span class="sxs-lookup"><span data-stu-id="eff6d-358">Encrypting Table Data</span></span>
<span data-ttu-id="eff6d-359">Witaj biblioteki klienta magazynu Azure .NET obsługuje szyfrowanie właściwości jednostki ciągu wstawiania i zamienianie operacji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-359">hello .NET Azure Storage Client Library supports encryption of string entity properties for insert and replace operations.</span></span> <span data-ttu-id="eff6d-360">ciągi Hello szyfrowane są przechowywane w usłudze hello jako właściwości binarnych, a zostaną one przetworzone toostrings wstecz po odszyfrowywania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-360">hello encrypted strings are stored on hello service as binary properties, and they are converted back toostrings after decryption.</span></span>    

<span data-ttu-id="eff6d-361">W przypadku tabel Ponadto toohello zasady szyfrowania, użytkownicy muszą określić toobe właściwości hello szyfrowane.</span><span class="sxs-lookup"><span data-stu-id="eff6d-361">For tables, in addition toohello encryption policy, users must specify hello properties toobe encrypted.</span></span> <span data-ttu-id="eff6d-362">Można to zrobić, określając atrybutu [EncryptProperty] (dla jednostki POCO, które pochodzą z TableEntity) lub szyfrowania, program rozpoznawania nazw w opcjach żądania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-362">This can be done by either specifying an [EncryptProperty] attribute (for POCO entities that derive from TableEntity) or an encryption resolver in request options.</span></span> <span data-ttu-id="eff6d-363">Rozwiązywanie problemów z szyfrowania jest delegata, który ma klucz partycji, klucz wiersza i nazwy właściwości i zwraca wartość Boolean wskazującą, czy ma być szyfrowana tej właściwości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-363">An encryption resolver is a delegate that takes a partition key, row key, and property name and returns a Boolean that indicates whether that property should be encrypted.</span></span> <span data-ttu-id="eff6d-364">Podczas szyfrowania powitania klienta biblioteki użyje tego toodecide informacji czy właściwość powinny być szyfrowane podczas przesyłania toohello zapisu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-364">During encryption, hello client library will use this information toodecide whether a property should be encrypted while writing toohello wire.</span></span> <span data-ttu-id="eff6d-365">Delegat Hello udostępnia także możliwość hello logiki wokół jak właściwości są szyfrowane.</span><span class="sxs-lookup"><span data-stu-id="eff6d-365">hello delegate also provides for hello possibility of logic around how properties are encrypted.</span></span> <span data-ttu-id="eff6d-366">(Na przykład, jeśli X, następnie szyfrować właściwości A; w przeciwnym razie szyfrowania właściwości A i B.) Należy pamiętać, że jest niekonieczne tooprovide te informacje podczas odczytywania lub zapytanie jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-366">(For example, if X, then encrypt property A; otherwise encrypt properties A and B.) Note that it is not necessary tooprovide this information while reading or querying entities.</span></span>

<span data-ttu-id="eff6d-367">Należy pamiętać, że scalania nie jest obecnie obsługiwany.</span><span class="sxs-lookup"><span data-stu-id="eff6d-367">Note that merge is not currently supported.</span></span> <span data-ttu-id="eff6d-368">Ponieważ podzbiór właściwości może być zaszyfrowany wcześniej za pomocą innego klucza, po prostu scalanie hello nowe właściwości i aktualizowania metadanych hello spowoduje utratę danych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-368">Since a subset of properties may have been encrypted previously using a different key, simply merging hello new properties and updating hello metadata will result in data loss.</span></span> <span data-ttu-id="eff6d-369">Scalanie albo wymaga wprowadzania dodatkowych usługi wywołuje tooread hello istniejące jednostki z usługi hello lub przy użyciu nowego klucza dla właściwości, które nie są odpowiednie ze względu na wydajność.</span><span class="sxs-lookup"><span data-stu-id="eff6d-369">Merging either requires making extra service calls tooread hello pre-existing entity from hello service, or using a new key per property, both of which are not suitable for performance reasons.</span></span>     

<span data-ttu-id="eff6d-370">Informacje o szyfrowaniu danych z tabeli, zobacz [szyfrowania po stronie klienta i usługi Azure Key Vault dla magazynu Microsoft Azure](../storage/common/storage-client-side-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="eff6d-370">For information about encrypting table data, see [Client-Side Encryption and Azure Key Vault for Microsoft Azure Storage](../storage/common/storage-client-side-encryption.md).</span></span>  

## <a name="modelling-relationships"></a><span data-ttu-id="eff6d-371">Relacje modelowania</span><span class="sxs-lookup"><span data-stu-id="eff6d-371">Modelling relationships</span></span>
<span data-ttu-id="eff6d-372">Tworzenie modeli domeny jest krokiem klucza w projekcie hello złożonych systemów.</span><span class="sxs-lookup"><span data-stu-id="eff6d-372">Building domain models is a key step in hello design of complex systems.</span></span> <span data-ttu-id="eff6d-373">Zazwyczaj Użyj hello modelowania jednostek tooidentify procesu, a hello relacji między nimi jako toounderstand sposób hello firm domeny i poinformuj o tym hello projektowania systemu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-373">Typically, you use hello modelling process tooidentify entities and hello relationships between them as a way toounderstand hello business domain and inform hello design of your system.</span></span> <span data-ttu-id="eff6d-374">W tej sekcji koncentruje się na jak niektóre hello popularne typy relacji w toodesigns modeli domeny dla usługi tabel hello tłumaczenia.</span><span class="sxs-lookup"><span data-stu-id="eff6d-374">This section focuses on how you can translate some of hello common relationship types found in domain models toodesigns for hello Table service.</span></span> <span data-ttu-id="eff6d-375">proces Hello mapowanie tooa model danych logicznych fizycznych NoSQL na podstawie — model danych jest bardzo różnią się od używanego podczas projektowania relacyjnej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-375">hello process of mapping from a logical data-model tooa physical NoSQL based data-model is very different from that used when designing a relational database.</span></span> <span data-ttu-id="eff6d-376">Projekt relacyjnych baz danych zwykle zakłada proces normalizacji danych zoptymalizowane pod kątem minimalizując nadmiarowość — i deklaratywne możliwość podczas badania, która streszczenia hello sposobu implementacji działania hello bazy danych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-376">Relational databases design typically assumes a data normalization process optimized for minimizing redundancy – and a declarative querying capability that abstracts how hello implementation of how hello database works.</span></span>  

### <a name="one-to-many-relationships"></a><span data-ttu-id="eff6d-377">Relacje jeden do wielu</span><span class="sxs-lookup"><span data-stu-id="eff6d-377">One-to-many relationships</span></span>
<span data-ttu-id="eff6d-378">Relacje jeden do wielu obiektów domeny biznesowych występować bardzo często: na przykład w jednym dziale ma wielu pracowników.</span><span class="sxs-lookup"><span data-stu-id="eff6d-378">One-to-many relationships between business domain objects occur very frequently: for example, one department has many employees.</span></span> <span data-ttu-id="eff6d-379">Obejmuje kilka relacji jeden do wielu tooimplement sposoby hello usługi tabel każdego z zalet i wad, które mogą być istotne toohello danego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="eff6d-379">There are several ways tooimplement one-to-many relationships in hello Table service each with pros and cons that may be relevant toohello particular scenario.</span></span>  

<span data-ttu-id="eff6d-380">Rozważmy przykład hello z dużych korporacji międzynarodowej dziesiątki tysięcy działów i jednostki pracownika, gdzie każdy dział ma wielu pracowników i pracowników, poszczególnych, związanych z nimi z jednego określonego działu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-380">Consider hello example of a large multi-national corporation with tens of thousands of departments and employee entities where every department has many employees and each employee as associated with one specific department.</span></span> <span data-ttu-id="eff6d-381">Jednym z podejść jest działu oddzielne toostore i jednostek pracownika, takich jak te:</span><span class="sxs-lookup"><span data-stu-id="eff6d-381">One approach is toostore separate department and employee entities such as these:</span></span>  

![][1]

<span data-ttu-id="eff6d-382">W tym przykładzie pokazano niejawnych relacji jeden do wielu między typami hello oparte na powitania **PartitionKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-382">This example shows an implicit one-to-many relationship between hello types based on hello **PartitionKey** value.</span></span> <span data-ttu-id="eff6d-383">Każdy dział może mieć wielu pracowników.</span><span class="sxs-lookup"><span data-stu-id="eff6d-383">Each department can have many employees.</span></span>  

<span data-ttu-id="eff6d-384">W tym przykładzie przedstawiono również jednostki działu, a jej podmioty powiązanego pracownika w hello tej samej partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-384">This example also shows a department entity and its related employee entities in hello same partition.</span></span> <span data-ttu-id="eff6d-385">Można wybrać toouse różnych partycji, tabel lub nawet kont magazynu dla typów jednostek różnych hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-385">You could choose toouse different partitions, tables, or even storage accounts for hello different entity types.</span></span>  

<span data-ttu-id="eff6d-386">Informacje o innym podejściu jest toodenormalize danych i magazynu jednostek tylko pracowników z działu nieznormalizowany danych, jak pokazano w hello poniższy przykład.</span><span class="sxs-lookup"><span data-stu-id="eff6d-386">An alternative approach is toodenormalize your data and store only employee entities with denormalized department data as shown in hello following example.</span></span> <span data-ttu-id="eff6d-387">W tego scenariusza, takie podejście nieznormalizowany mogą nie być hello najlepszym przypadku wymaganie toobe toochange stanie hello szczegóły manager działu ponieważ toodo to należy tooupdate każdy pracownik działu hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-387">In this particular scenario, this denormalized approach may not be hello best if you have a requirement toobe able toochange hello details of a department manager because toodo this you need tooupdate every employee in hello department.</span></span>  

![][2]

<span data-ttu-id="eff6d-388">Aby uzyskać więcej informacji, zobacz hello [wzorzec Denormalization](#denormalization-pattern) dalszej części tego przewodnika.</span><span class="sxs-lookup"><span data-stu-id="eff6d-388">For more information, see hello [Denormalization pattern](#denormalization-pattern) later in this guide.</span></span>  

<span data-ttu-id="eff6d-389">Witaj Poniższa tabela zawiera podsumowanie hello zalet i wad każdej z metod hello opisanych powyżej do przechowywania pracowników i działu obiektów, które mają relacji jeden do wielu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-389">hello following table summarizes hello pros and cons of each of hello approaches outlined above for storing employee and department entities that have a one-to-many relationship.</span></span> <span data-ttu-id="eff6d-390">Należy również rozważyć częstotliwość tooperform różne operacje: może być akceptowane toohave projekt, który zawiera kosztowna operacja, jeśli ta operacja odbywa się tylko rzadko.</span><span class="sxs-lookup"><span data-stu-id="eff6d-390">You should also consider how often you expect tooperform various operations: it may be acceptable toohave a design that includes an expensive operation if that operation only happens infrequently.</span></span>  

<table>
<tr>
<th><span data-ttu-id="eff6d-391">Podejście</span><span class="sxs-lookup"><span data-stu-id="eff6d-391">Approach</span></span></th>
<th><span data-ttu-id="eff6d-392">Specjaliści</span><span class="sxs-lookup"><span data-stu-id="eff6d-392">Pros</span></span></th>
<th><span data-ttu-id="eff6d-393">Wady</span><span class="sxs-lookup"><span data-stu-id="eff6d-393">Cons</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="eff6d-394">Oddzielne typy jednostek, tej samej partycji, tej samej tabeli</span><span class="sxs-lookup"><span data-stu-id="eff6d-394">Separate entity types, same partition, same table</span></span></td>
<td>
<ul>
<li><span data-ttu-id="eff6d-395">Można aktualizować jednostek działu z jednej operacji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-395">You can update a department entity with a single operation.</span></span></li>
<li><span data-ttu-id="eff6d-396">Spójności toomaintain EGT można użyć, jeśli masz toomodify wymaganie jednostki działu zawsze, gdy użytkownik aktualizacji/insert/usuwania jednostki pracownika.</span><span class="sxs-lookup"><span data-stu-id="eff6d-396">You can use an EGT toomaintain consistency if you have a requirement toomodify a department entity whenever you update/insert/delete an employee entity.</span></span> <span data-ttu-id="eff6d-397">Na przykład, jeśli liczba pracowników działów, dla każdego działu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-397">For example if you maintain a departmental employee count for each department.</span></span></li>
</ul>
</td>
<td>
<ul>
<li><span data-ttu-id="eff6d-398">Mogą być potrzebne tooretrieve zarówno pracownika, jak i jednostki działu niektóre działania klienta.</span><span class="sxs-lookup"><span data-stu-id="eff6d-398">You may need tooretrieve both an employee and a department entity for some client activities.</span></span></li>
<li><span data-ttu-id="eff6d-399">Operacje magazynu wprowadzenia w hello sam partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-399">Storage operations happen in hello same partition.</span></span> <span data-ttu-id="eff6d-400">W transakcji wysokiej woluminów może to spowodować punktu aktywnego.</span><span class="sxs-lookup"><span data-stu-id="eff6d-400">At high transaction volumes, this may result in a hotspot.</span></span></li>
<li><span data-ttu-id="eff6d-401">Nie można przenieść pracownika tooa nowy dział przy użyciu EGT.</span><span class="sxs-lookup"><span data-stu-id="eff6d-401">You cannot move an employee tooa new department using an EGT.</span></span></li>
</ul>
</td>
</tr>
<tr>
<td><span data-ttu-id="eff6d-402">Typy oddzielnych jednostek, różnych partycji lub tabel lub kont magazynu</span><span class="sxs-lookup"><span data-stu-id="eff6d-402">Separate entity types, different partitions or tables or storage accounts</span></span></td>
<td>
<ul>
<li><span data-ttu-id="eff6d-403">Należy zaktualizować działu jednostki lub jednostek pracowników z jednej operacji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-403">You can update a department entity or employee entity with a single operation.</span></span></li>
<li><span data-ttu-id="eff6d-404">W transakcji wysokiej woluminów, może to ułatwić rozpowszechniania hello obciążenia między więcej partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-404">At high transaction volumes, this may help spread hello load across more partitions.</span></span></li>
</ul>
</td>
<td>
<ul>
<li><span data-ttu-id="eff6d-405">Mogą być potrzebne tooretrieve zarówno pracownika, jak i jednostki działu niektóre działania klienta.</span><span class="sxs-lookup"><span data-stu-id="eff6d-405">You may need tooretrieve both an employee and a department entity for some client activities.</span></span></li>
<li><span data-ttu-id="eff6d-406">Nie można użyć EGTs toomaintain spójności po możesz aktualizacji/insert/usuwania pracownik i aktualizacji działu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-406">You cannot use EGTs toomaintain consistency when you update/insert/delete an employee and update a department.</span></span> <span data-ttu-id="eff6d-407">Na przykład aktualizowania liczba pracowników w jednostce działu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-407">For example, updating an employee count in a department entity.</span></span></li>
<li><span data-ttu-id="eff6d-408">Nie można przenieść pracownika tooa nowy dział przy użyciu EGT.</span><span class="sxs-lookup"><span data-stu-id="eff6d-408">You cannot move an employee tooa new department using an EGT.</span></span></li>
</ul>
</td>
</tr>
<tr>
<td><span data-ttu-id="eff6d-409">Denormalize do pojedynczej jednostki typu</span><span class="sxs-lookup"><span data-stu-id="eff6d-409">Denormalize into single entity type</span></span></td>
<td>
<ul>
<li><span data-ttu-id="eff6d-410">Można pobrać wszystkich hello informacji z pojedynczym żądaniem.</span><span class="sxs-lookup"><span data-stu-id="eff6d-410">You can retrieve all hello information you need with a single request.</span></span></li>
</ul>
</td>
<td>
<ul>
<li><span data-ttu-id="eff6d-411">Jeśli potrzebujesz informacji działu tooupdate (wymagałoby to możesz tooupdate hello wszystkich pracowników działu) może być kosztowne toomaintain spójności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-411">It may be expensive toomaintain consistency if you need tooupdate department information (this would require you tooupdate all hello employees in a department).</span></span></li>
</ul>
</td>
</tr>
</table>

<span data-ttu-id="eff6d-412">Jak wybrać te opcje, a które specjaliści hello i wad są najbardziej znaczących zależy od scenariuszy określonej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-412">How you choose between these options, and which of hello pros and cons are most significant, depends on your specific application scenarios.</span></span> <span data-ttu-id="eff6d-413">Na przykład jak często należy można modyfikować jednostek działu; wszystkie zapytania pracownika wymaga informacji dodatkowych działów hello; jak blisko czy limity skalowalności toohello na partycji lub Twoje konto magazynu?</span><span class="sxs-lookup"><span data-stu-id="eff6d-413">For example, how often do you modify department entities; do all your employee queries need hello additional departmental information; how close are you toohello scalability limits on your partitions or your storage account?</span></span>  

### <a name="one-to-one-relationships"></a><span data-ttu-id="eff6d-414">Relacje jeden do jednego</span><span class="sxs-lookup"><span data-stu-id="eff6d-414">One-to-one relationships</span></span>
<span data-ttu-id="eff6d-415">Modele domeny może obejmować jeden do jednego relacje między obiektami.</span><span class="sxs-lookup"><span data-stu-id="eff6d-415">Domain models may include one-to-one relationships between entities.</span></span> <span data-ttu-id="eff6d-416">Jeśli potrzebujesz tooimplement relacją w hello usługi tabel, należy wybrać jak toolink Witaj dwie jednostki pokrewne, gdy będziesz potrzebować tooretrieve oba te.</span><span class="sxs-lookup"><span data-stu-id="eff6d-416">If you need tooimplement a one-to-one relationship in hello Table service, you must also choose how toolink hello two related entities when you need tooretrieve them both.</span></span> <span data-ttu-id="eff6d-417">To łącze może być niejawna, oparte na Konwencji w wartości klucza hello lub jawne, przechowując łącze w formie hello **PartitionKey** i **RowKey** wartości w każdej jednostki tooits powiązanego obiektu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-417">This link can be either implicit, based on a convention in hello key values, or explicit by storing a link in hello form of **PartitionKey** and **RowKey** values in each entity tooits related entity.</span></span> <span data-ttu-id="eff6d-418">Aby uzyskać informacje dotyczące tego, czy należy przechowywać hello powiązanych jednostek w tej samej partycji Witaj, zobacz sekcję hello [jeden do wielu relacji](#one-to-many-relationships).</span><span class="sxs-lookup"><span data-stu-id="eff6d-418">For a discussion of whether you should store hello related entities in hello same partition, see hello section [One-to-many relationships](#one-to-many-relationships).</span></span>  

<span data-ttu-id="eff6d-419">Należy pamiętać, że są także uwagi dotyczące implementacji, które mogą prowadzić możesz relacje jeden do jednego tooimplement w usłudze tabel hello:</span><span class="sxs-lookup"><span data-stu-id="eff6d-419">Note that there are also implementation considerations that might lead you tooimplement one-to-one relationships in hello Table service:</span></span>  

* <span data-ttu-id="eff6d-420">Obsługa dużych jednostek (Aby uzyskać więcej informacji, zobacz [dużych jednostek wzorzec](#large-entities-pattern)).</span><span class="sxs-lookup"><span data-stu-id="eff6d-420">Handling large entities (for more information, see [Large Entities Pattern](#large-entities-pattern)).</span></span>  
* <span data-ttu-id="eff6d-421">Wdrożenie kontroli dostępu (Aby uzyskać więcej informacji, zobacz [kontrolowanie dostępu przy użyciu sygnatury dostępu współdzielonego](#controlling-access-with-shared-access-signatures)).</span><span class="sxs-lookup"><span data-stu-id="eff6d-421">Implementing access controls (for more information, see [Controlling access with Shared Access Signatures](#controlling-access-with-shared-access-signatures)).</span></span>  

### <a name="join-in-hello-client"></a><span data-ttu-id="eff6d-422">Sprzężenia w powitania klienta</span><span class="sxs-lookup"><span data-stu-id="eff6d-422">Join in hello client</span></span>
<span data-ttu-id="eff6d-423">Mimo że istnieją sposoby toomodel relacje w hello usługi tabel, należy nie zapomnij czy hello dwa główne powody przy użyciu usługi tabel hello skalowalność i wydajność.</span><span class="sxs-lookup"><span data-stu-id="eff6d-423">Although there are ways toomodel relationships in hello Table service, you should not forget that hello two prime reasons for using hello Table service are scalability and performance.</span></span> <span data-ttu-id="eff6d-424">Jeśli okaże się, że są modelowania wielu relacji naruszających hello wydajności i skalowalności rozwiązania, należy poprosić użytkownika, jeśli jest konieczne toobuild hello wszystkie relacje danych w projekcie tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-424">If you find you are modelling many relationships that compromise hello performance and scalability of your solution, you should ask yourself if it is necessary toobuild all hello data relationships into your table design.</span></span> <span data-ttu-id="eff6d-425">Mogą być stanie toosimplify hello projektu i zwiększyć hello skalowalność i wydajność rozwiązania, jeśli umożliwisz aplikacja kliencka wykonać wszelkie niezbędne sprzężenia.</span><span class="sxs-lookup"><span data-stu-id="eff6d-425">You may be able toosimplify hello design and improve hello scalability and performance of your solution if you let your client application perform any necessary joins.</span></span>  

<span data-ttu-id="eff6d-426">Na przykład jeśli małych tabel, które zawierają dane, które nie zmienia się bardzo często, następnie można pobrać dane raz i pamięci podręcznej go na powitania klienta.</span><span class="sxs-lookup"><span data-stu-id="eff6d-426">For example, if you have small tables that contain data that does not change very often, then you can retrieve this data once and cache it on hello client.</span></span> <span data-ttu-id="eff6d-427">To uniknąć wielokrotnego dwukierunkowe przesyłanie danych tooretrieve hello tych samych danych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-427">This can avoid repeated roundtrips tooretrieve hello same data.</span></span> <span data-ttu-id="eff6d-428">W przykładach hello, które firma Microsoft sprawdzono, w tym przewodniku hello zestaw działów w organizacji małych jest prawdopodobnie toobe małe i zmień rzadko co odpowiednimi kandydatami dla danych, który aplikacja kliencka można pobrać raz i pamięci podręcznej jako wyszukiwania danych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-428">In hello examples we have looked at in this guide, hello set of departments in a small organization is likely toobe small and change infrequently making it a good candidate for data that client application can download once and cache as look up data.</span></span>  

### <a name="inheritance-relationships"></a><span data-ttu-id="eff6d-429">Relacje dziedziczenia</span><span class="sxs-lookup"><span data-stu-id="eff6d-429">Inheritance relationships</span></span>
<span data-ttu-id="eff6d-430">Jeśli aplikacja kliencka używa zestaw klas, które stanowią część jednostki biznesowe toorepresent relacji dziedziczenia, można łatwo utrwalić tych jednostek w hello usługi tabel.</span><span class="sxs-lookup"><span data-stu-id="eff6d-430">If your client application uses a set of classes that form part of an inheritance relationship toorepresent business entities, you can easily persist those entities in hello Table service.</span></span> <span data-ttu-id="eff6d-431">Na przykład może być hello następującego zestawu klas zdefiniowanych w aplikacji klienta gdzie **osoby** jest klasą abstrakcyjną.</span><span class="sxs-lookup"><span data-stu-id="eff6d-431">For example, you might have hello following set of classes defined in your client application where **Person** is an abstract class.</span></span>

![][3]

<span data-ttu-id="eff6d-432">Można ją utrwalić wystąpienia Witaj dwie klasy w hello usługi tabel za pomocą pojedynczej tabeli osoby za pomocą jednostek tego wyglądają następująco:</span><span class="sxs-lookup"><span data-stu-id="eff6d-432">You can persist instances of hello two concrete classes in hello Table service using a single Person table using entities in that look like this:</span></span>  

![][4]

<span data-ttu-id="eff6d-433">Aby uzyskać więcej informacji na temat pracy z wieloma typami jednostek w hello sama tabela w kodzie klienta, zobacz sekcję hello [Praca z typami jednostek heterogenicznych](#working-with-heterogeneous-entity-types) dalszej części tego przewodnika.</span><span class="sxs-lookup"><span data-stu-id="eff6d-433">For more information about working with multiple entity types in hello same table in client code, see hello section [Working with heterogeneous entity types](#working-with-heterogeneous-entity-types) later in this guide.</span></span> <span data-ttu-id="eff6d-434">Zapewnia to przykłady sposobu toorecognize hello typu jednostki w kodu klienta.</span><span class="sxs-lookup"><span data-stu-id="eff6d-434">This provides examples of how toorecognize hello entity type in client code.</span></span>  

## <a name="table-design-patterns"></a><span data-ttu-id="eff6d-435">Wzorce projektowe tabeli</span><span class="sxs-lookup"><span data-stu-id="eff6d-435">Table Design Patterns</span></span>
<span data-ttu-id="eff6d-436">W poprzednich sekcjach jak już wspomniano niektóre szczegółowe dyskusjach na temat sposób toooptimize tabeli projektowania dla obu podczas pobierania danych jednostki, za pomocą zapytań i wstawiania, aktualizowania i usuwania danych jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-436">In previous sections, you have seen some detailed discussions about how toooptimize your table design for both retrieving entity data using queries and for inserting, updating, and deleting entity data.</span></span> <span data-ttu-id="eff6d-437">W tej sekcji opisano niektóre wzorców, które są odpowiednie do użytku z rozwiązań usług tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-437">This section describes some patterns appropriate for use with Table service solutions.</span></span> <span data-ttu-id="eff6d-438">Ponadto zobaczysz, jak praktycznie rozwiązać niektóre problemy hello i kompromisy wywoływane wcześniej w tym przewodniku.</span><span class="sxs-lookup"><span data-stu-id="eff6d-438">In addition, you will see how you can practically address some of hello issues and trade-offs raised previously in this guide.</span></span> <span data-ttu-id="eff6d-439">Witaj Poniższy diagram przedstawia relacje hello hello różnych wzorców:</span><span class="sxs-lookup"><span data-stu-id="eff6d-439">hello following diagram summarizes hello relationships between hello different patterns:</span></span>  

![][5]

<span data-ttu-id="eff6d-440">mapy wzorzec Hello powyżej omówiono niektóre relacje między wzorce (niebieski) i wzorce przed (kolor pomarańczowy), które są opisane w tym przewodniku.</span><span class="sxs-lookup"><span data-stu-id="eff6d-440">hello pattern map above highlights some relationships between patterns (blue) and anti-patterns (orange) that are documented in this guide.</span></span> <span data-ttu-id="eff6d-441">Oczywiście istnieje wielu wzorców, które warto uwzględnieniu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-441">There are of course many other patterns that are worth considering.</span></span> <span data-ttu-id="eff6d-442">Na przykład jednego ze scenariuszy klucza hello usługi tabeli jest toouse hello [Zmaterializowany wzorzec widoku](https://msdn.microsoft.com/library/azure/dn589782.aspx) z hello [polecenia zapytania odpowiedzialność podział (CQRS)](https://msdn.microsoft.com/library/azure/jj554200.aspx) wzorca.</span><span class="sxs-lookup"><span data-stu-id="eff6d-442">For example, one of hello key scenarios for Table Service is toouse hello [Materialized View Pattern](https://msdn.microsoft.com/library/azure/dn589782.aspx) from hello [Command Query Responsibility Segregation (CQRS)](https://msdn.microsoft.com/library/azure/jj554200.aspx) pattern.</span></span>  

### <a name="intra-partition-secondary-index-pattern"></a><span data-ttu-id="eff6d-443">Wzorzec pomocniczy indeks wewnątrz partycji</span><span class="sxs-lookup"><span data-stu-id="eff6d-443">Intra-partition secondary index pattern</span></span>
<span data-ttu-id="eff6d-444">Przechowywać wiele kopii każdej jednostki przy użyciu różnych **RowKey** wartości (w hello tej samej partycji) tooenable szybkie i wydajne wyszukiwanie i sortowanie alternatywne porządkuje przy użyciu różnych **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-444">Store multiple copies of each entity using different **RowKey** values (in hello same partition) tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span> <span data-ttu-id="eff6d-445">Aktualizacje między kopie były spójne przy użyciu EGT firmy.</span><span class="sxs-lookup"><span data-stu-id="eff6d-445">Updates between copies can be kept consistent using EGT's.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="eff6d-446">Kontekst, jak i problemu</span><span class="sxs-lookup"><span data-stu-id="eff6d-446">Context and problem</span></span>
<span data-ttu-id="eff6d-447">Witaj usługi tabel automatycznie indeksuje jednostek przy użyciu hello **PartitionKey** i **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-447">hello Table service automatically indexes entities using hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="eff6d-448">Dzięki temu tooretrieve aplikacji klienta efektywne wykorzystanie te wartości jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-448">This enables a client application tooretrieve an entity efficiently using these values.</span></span> <span data-ttu-id="eff6d-449">Na przykład przy użyciu hello struktura tabeli pokazano poniżej, aplikacja kliencka można użyć punktu tooretrieve zapytania jednostki pracownika przy użyciu nazwy działu hello i identyfikator pracownika hello (hello **PartitionKey** i  **RowKey** wartości).</span><span class="sxs-lookup"><span data-stu-id="eff6d-449">For example, using hello table structure shown below, a client application can use a point query tooretrieve an individual employee entity by using hello department name and hello employee id (hello **PartitionKey** and **RowKey** values).</span></span> <span data-ttu-id="eff6d-450">Klient może również pobierać jednostki sortowane według identyfikatora pracownika każdego działu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-450">A client can also retrieve entities sorted by employee id within each department.</span></span>

![][6]

<span data-ttu-id="eff6d-451">Jeśli chcesz toofind stanie toobe jednostki pracowników na podstawie wartości hello innej właściwości, takie jak adres e-mail, należy użyć mniej wydajne toofind skanowania partycji dopasowania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-451">If you also want toobe able toofind an employee entity based on hello value of another property, such as email address, you must use a less efficient partition scan toofind a match.</span></span> <span data-ttu-id="eff6d-452">Jest to spowodowane hello tabeli Usługa nie zapewnia indeksów pomocniczych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-452">This is because hello table service does not provide secondary indexes.</span></span> <span data-ttu-id="eff6d-453">Ponadto istnieje toorequest nie opcji listy pracowników posortowanych w kolejności innej niż **RowKey** kolejności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-453">In addition, there is no option toorequest a list of employees sorted in a different order than **RowKey** order.</span></span>  

#### <a name="solution"></a><span data-ttu-id="eff6d-454">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="eff6d-454">Solution</span></span>
<span data-ttu-id="eff6d-455">toowork wokół hello braku indeksów pomocniczych, można przechowywać kopie każdego obiektu z każdej kopii przy użyciu innego **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-455">toowork around hello lack of secondary indexes, you can store multiple copies of each entity with each copy using a different **RowKey** value.</span></span> <span data-ttu-id="eff6d-456">Jeśli przechowujesz jednostki o strukturze hello pokazano poniżej, pozwala na efektywne pobieranie jednostek pracowników na podstawie identyfikatora wiadomości e-mail adres lub pracowników. Witaj wartości prefiksu hello **RowKey**, "empid_" i "email_" pozwalają tooquery dla pojedynczego pracownika lub zakres pracowników przy użyciu zakresu adresów e-mail ani identyfikatorów pracownika.</span><span class="sxs-lookup"><span data-stu-id="eff6d-456">If you store an entity with hello structures shown below, you can efficiently retrieve employee entities based on email address or employee id. hello prefix values for hello **RowKey**, "empid_" and "email_" enable you tooquery for a single employee or a range of employees by using a range of email addresses or employee ids.</span></span>  

![][7]

<span data-ttu-id="eff6d-457">Hello następujące dwa kryteria filtrowania (jeden wyszukiwanie według identyfikatora pracowników i jedną wyszukiwanie według adresu e-mail) zarówno Określ punkt zapytania:</span><span class="sxs-lookup"><span data-stu-id="eff6d-457">hello following two filter criteria (one looking up by employee id and one looking up by email address) both specify point queries:</span></span>  

* <span data-ttu-id="eff6d-458">$filter = (PartitionKey eq 'Sales') i (RowKey eq "empid_000223")</span><span class="sxs-lookup"><span data-stu-id="eff6d-458">$filter=(PartitionKey eq 'Sales') and (RowKey eq 'empid_000223')</span></span>  
* <span data-ttu-id="eff6d-459">$filter = (PartitionKey eq 'Sales') i (RowKey eq 'email_jonesj@contoso.com")</span><span class="sxs-lookup"><span data-stu-id="eff6d-459">$filter=(PartitionKey eq 'Sales') and (RowKey eq 'email_jonesj@contoso.com')</span></span>  

<span data-ttu-id="eff6d-460">Po wykonaniu zapytania dla zakresu jednostek pracownika, można określić zakres sortowane w kolejności identyfikator pracownika, lub zakresem sortowane w kolejności adresu e-mail przez wysyłanie zapytań dla jednostek o prefiksu hello w hello **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="eff6d-460">If you query for a range of employee entities, you can specify a range sorted in employee id order, or a range sorted in email address order by querying for entities with hello appropriate prefix in hello **RowKey**.</span></span>  

* <span data-ttu-id="eff6d-461">Użyj wszystkich pracowników działu sprzedaży hello hello z identyfikator pracownika w hello zakresu 000100 too000199 toofind: $filter = (PartitionKey eq 'Sales') i (RowKey ge "empid_000100") i (RowKey le "empid_000199")</span><span class="sxs-lookup"><span data-stu-id="eff6d-461">toofind all hello employees in hello Sales department with an employee id in hello range 000100 too000199 use: $filter=(PartitionKey eq 'Sales') and (RowKey ge 'empid_000100') and (RowKey le 'empid_000199')</span></span>  
* <span data-ttu-id="eff6d-462">"element" należy użyć list toofind wszystkie hello pracownicy działu sprzedaży hello posiadających adres e-mail w programie hello: $filter = (PartitionKey eq 'Sales') i (RowKey ge "email_a") i (lt RowKey "email_b")</span><span class="sxs-lookup"><span data-stu-id="eff6d-462">toofind all hello employees in hello Sales department with an email address starting with hello letter 'a' use: $filter=(PartitionKey eq 'Sales') and (RowKey ge 'email_a') and (RowKey lt 'email_b')</span></span>  
  
  <span data-ttu-id="eff6d-463">Należy pamiętać, że składnia filtru hello używane w powyższych przykładach hello z hello tabeli usługi interfejsu API REST, aby uzyskać więcej informacji, zobacz [jednostek zapytania](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span><span class="sxs-lookup"><span data-stu-id="eff6d-463">Note that hello filter syntax used in hello examples above is from hello Table service REST API, for more information see [Query Entities](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="eff6d-464">Problemy i zagadnienia</span><span class="sxs-lookup"><span data-stu-id="eff6d-464">Issues and considerations</span></span>
<span data-ttu-id="eff6d-465">Należy wziąć pod uwagę następujące punkty podczas podejmowania decyzji o hello jak tooimplement tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-465">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="eff6d-466">Magazyn tabel jest stosunkowo tanie toouse, więc koszt koszty przechowywania danych zduplikowane hello nie powinno być głównym problemem.</span><span class="sxs-lookup"><span data-stu-id="eff6d-466">Table storage is relatively cheap toouse so hello cost overhead of storing duplicate data should not be a major concern.</span></span> <span data-ttu-id="eff6d-467">Jednak należy zawsze ocenić hello koszt projektu, w zależności od wymagań przewidywanego magazynu i dodawać tylko zduplikowanych wpisów toosupport hello zapytania, który aplikacja kliencka będzie wykonywać.</span><span class="sxs-lookup"><span data-stu-id="eff6d-467">However, you should always evaluate hello cost of your design based on your anticipated storage requirements and only add duplicate entities toosupport hello queries your client application will execute.</span></span>  
* <span data-ttu-id="eff6d-468">Jednostek pomocniczy indeks hello są przechowywane w hello sam partycji hello oryginalnej jednostki, dlatego należy upewnić się, nie przekraczają wartości docelowe skalowalności powitania dla poszczególnych partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-468">Because hello secondary index entities are stored in hello same partition as hello original entities, you should ensure that you do not exceed hello scalability targets for an individual partition.</span></span>  
* <span data-ttu-id="eff6d-469">Można zachować zduplikowane obiekty zgodne ze sobą za pomocą EGTs tooupdate Witaj dwie kopie jednostki hello atomowo.</span><span class="sxs-lookup"><span data-stu-id="eff6d-469">You can keep your duplicate entities consistent with each other by using EGTs tooupdate hello two copies of hello entity atomically.</span></span> <span data-ttu-id="eff6d-470">Oznacza to, że wszystkie kopie jednostki należy przechowywać w hello tej samej partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-470">This implies that you should store all copies of an entity in hello same partition.</span></span> <span data-ttu-id="eff6d-471">Aby uzyskać więcej informacji, zobacz sekcję hello [przy użyciu transakcji grupy jednostek](#entity-group-transactions).</span><span class="sxs-lookup"><span data-stu-id="eff6d-471">For more information, see hello section [Using Entity Group Transactions](#entity-group-transactions).</span></span>  
* <span data-ttu-id="eff6d-472">wartość używana dla hello Hello **RowKey** musi być unikatowa dla każdej jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-472">hello value used for hello **RowKey** must be unique for each entity.</span></span> <span data-ttu-id="eff6d-473">Rozważ użycie wartości klucza złożonego.</span><span class="sxs-lookup"><span data-stu-id="eff6d-473">Consider using compound key values.</span></span>  
* <span data-ttu-id="eff6d-474">Dopełnienie wartości liczbowe w hello **RowKey** (na przykład identyfikator pracownika hello 000223), umożliwia Popraw sortowania i filtrowania na podstawie górną i dolną granicę.</span><span class="sxs-lookup"><span data-stu-id="eff6d-474">Padding numeric values in hello **RowKey** (for example, hello employee id 000223), enables correct sorting and filtering based on upper and lower bounds.</span></span>  
* <span data-ttu-id="eff6d-475">Koniecznie niepotrzebne tooduplicate hello wszystkich właściwości jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-475">You do not necessarily need tooduplicate all hello properties of your entity.</span></span> <span data-ttu-id="eff6d-476">Na przykład, jeśli hello adres zapytań, które wiadomości e-mail przy użyciu hello jednostek hello wyszukiwania w hello **RowKey** nigdy nie trzeba wiek hello pracownika, te jednostki można mieć hello następujące struktury:</span><span class="sxs-lookup"><span data-stu-id="eff6d-476">For example, if hello queries that lookup hello entities using hello email address in hello **RowKey** never need hello employee's age, these entities could have hello following structure:</span></span>

![][8]

* <span data-ttu-id="eff6d-477">Jest zwykle lepiej toostore zduplikowane dane i zapewnić, że można pobrać wszystkich hello dane z pojedynczego zapytania, niż toolocate jedno zapytanie toouse jednostki i innym hello toolookup wymagane dane.</span><span class="sxs-lookup"><span data-stu-id="eff6d-477">It is typically better toostore duplicate data and ensure that you can retrieve all hello data you need with a single query, than toouse one query toolocate an entity and another toolookup hello required data.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="eff6d-478">Gdy toouse tego wzorca</span><span class="sxs-lookup"><span data-stu-id="eff6d-478">When toouse this pattern</span></span>
<span data-ttu-id="eff6d-479">Za pomocą tego wzorca gdy aplikacja kliencka musi tooretrieve jednostek przy użyciu różnych różne klucze, gdy klient musi tooretrieve jednostek w różnych sortowania, a można zidentyfikować każdej jednostki przy użyciu różnych unikatowe wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-479">Use this pattern when your client application needs tooretrieve entities using a variety of different keys, when your client needs tooretrieve entities in different sort orders, and where you can identify each entity using a variety of unique values.</span></span> <span data-ttu-id="eff6d-480">Jednak należy się upewnić, że nie przekraczają limity skalowalności partycji hello przeprowadzania wyszukiwania jednostki przy użyciu różnych hello **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-480">However, you should be sure that you do not exceed hello partition scalability limits when you are performing entity lookups using hello different **RowKey** values.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="eff6d-481">Wskazówki i wzorce pokrewne</span><span class="sxs-lookup"><span data-stu-id="eff6d-481">Related patterns and guidance</span></span>
<span data-ttu-id="eff6d-482">Witaj następujące wskazówki i wzorce mogą także mieć znaczenie w przypadku implementacja tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-482">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="eff6d-483">Wzorzec pomocniczy indeks między partycji</span><span class="sxs-lookup"><span data-stu-id="eff6d-483">Inter-partition secondary index pattern</span></span>](#inter-partition-secondary-index-pattern)
* [<span data-ttu-id="eff6d-484">Wzorca złożonego klucza</span><span class="sxs-lookup"><span data-stu-id="eff6d-484">Compound key pattern</span></span>](#compound-key-pattern)
* [<span data-ttu-id="eff6d-485">Grupowanie jednostki transakcji</span><span class="sxs-lookup"><span data-stu-id="eff6d-485">Entity Group Transactions</span></span>](#entity-group-transactions)
* [<span data-ttu-id="eff6d-486">Praca z typami jednostek heterogenicznych</span><span class="sxs-lookup"><span data-stu-id="eff6d-486">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)

### <a name="inter-partition-secondary-index-pattern"></a><span data-ttu-id="eff6d-487">Wzorzec pomocniczy indeks między partycji</span><span class="sxs-lookup"><span data-stu-id="eff6d-487">Inter-partition secondary index pattern</span></span>
<span data-ttu-id="eff6d-488">Przechowywać wiele kopii każdej jednostki przy użyciu różnych **RowKey** wartości w osobnych partycji lub w oddzielnych tabelach tooenable szybkie i wydajne wyszukiwań i alternatywne sortowania przy użyciu różnych **RowKey**wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-488">Store multiple copies of each entity using different **RowKey** values in separate partitions or in separate tables tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="eff6d-489">Kontekst, jak i problemu</span><span class="sxs-lookup"><span data-stu-id="eff6d-489">Context and problem</span></span>
<span data-ttu-id="eff6d-490">Witaj usługi tabel automatycznie indeksuje jednostek przy użyciu hello **PartitionKey** i **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-490">hello Table service automatically indexes entities using hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="eff6d-491">Dzięki temu tooretrieve aplikacji klienta efektywne wykorzystanie te wartości jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-491">This enables a client application tooretrieve an entity efficiently using these values.</span></span> <span data-ttu-id="eff6d-492">Na przykład przy użyciu hello struktura tabeli pokazano poniżej, aplikacja kliencka można użyć punktu tooretrieve zapytania jednostki pracownika przy użyciu nazwy działu hello i identyfikator pracownika hello (hello **PartitionKey** i  **RowKey** wartości).</span><span class="sxs-lookup"><span data-stu-id="eff6d-492">For example, using hello table structure shown below, a client application can use a point query tooretrieve an individual employee entity by using hello department name and hello employee id (hello **PartitionKey** and **RowKey** values).</span></span> <span data-ttu-id="eff6d-493">Klient może również pobierać jednostki sortowane według identyfikatora pracownika każdego działu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-493">A client can also retrieve entities sorted by employee id within each department.</span></span>  

![][9]

<span data-ttu-id="eff6d-494">Jeśli chcesz toofind stanie toobe jednostki pracowników na podstawie wartości hello innej właściwości, takie jak adres e-mail, należy użyć mniej wydajne toofind skanowania partycji dopasowania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-494">If you also want toobe able toofind an employee entity based on hello value of another property, such as email address, you must use a less efficient partition scan toofind a match.</span></span> <span data-ttu-id="eff6d-495">Jest to spowodowane hello tabeli Usługa nie zapewnia indeksów pomocniczych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-495">This is because hello table service does not provide secondary indexes.</span></span> <span data-ttu-id="eff6d-496">Ponadto istnieje toorequest nie opcji listy pracowników posortowanych w kolejności innej niż **RowKey** kolejności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-496">In addition, there is no option toorequest a list of employees sorted in a different order than **RowKey** order.</span></span>  

<span data-ttu-id="eff6d-497">Są przewidywanie bardzo dużą liczbę transakcji względem tych obiektów, a ryzyko hello toominimize hello ograniczanie klienta usługi tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-497">You are anticipating a very high volume of transactions against these entities and want toominimize hello risk of hello Table service throttling your client.</span></span>  

#### <a name="solution"></a><span data-ttu-id="eff6d-498">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="eff6d-498">Solution</span></span>
<span data-ttu-id="eff6d-499">toowork wokół hello braku indeksów pomocniczych, można przechowywać wiele kopii każdej jednostki z każdym Kopiuj, używając innego **PartitionKey** i **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-499">toowork around hello lack of secondary indexes, you can store multiple copies of each entity with each copy using different **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="eff6d-500">Jeśli przechowujesz jednostki o strukturze hello pokazano poniżej, pozwala na efektywne pobieranie jednostek pracowników na podstawie identyfikatora wiadomości e-mail adres lub pracowników. Witaj wartości prefiksu hello **PartitionKey**, "empid_" i "email_" pozwalają tooidentify, który indeksu, który ma być toouse dla zapytania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-500">If you store an entity with hello structures shown below, you can efficiently retrieve employee entities based on email address or employee id. hello prefix values for hello **PartitionKey**, "empid_" and "email_" enable you tooidentify which index you want toouse for a query.</span></span>  

![][10]

<span data-ttu-id="eff6d-501">Hello następujące dwa kryteria filtrowania (jeden wyszukiwanie według identyfikatora pracowników i jedną wyszukiwanie według adresu e-mail) zarówno Określ punkt zapytania:</span><span class="sxs-lookup"><span data-stu-id="eff6d-501">hello following two filter criteria (one looking up by employee id and one looking up by email address) both specify point queries:</span></span>  

* <span data-ttu-id="eff6d-502">$filter = (PartitionKey eq ' empid_Sales") i (RowKey eq"000223")</span><span class="sxs-lookup"><span data-stu-id="eff6d-502">$filter=(PartitionKey eq 'empid_Sales') and (RowKey eq '000223')</span></span>
* <span data-ttu-id="eff6d-503">$filter = (PartitionKey eq ' email_Sales") i (RowKey eq 'jonesj@contoso.com")</span><span class="sxs-lookup"><span data-stu-id="eff6d-503">$filter=(PartitionKey eq 'email_Sales') and (RowKey eq 'jonesj@contoso.com')</span></span>  

<span data-ttu-id="eff6d-504">Po wykonaniu zapytania dla zakresu jednostek pracownika, można określić zakres sortowane w kolejności identyfikator pracownika, lub zakresem sortowane w kolejności adresu e-mail przez wysyłanie zapytań dla jednostek o prefiksu hello w hello **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="eff6d-504">If you query for a range of employee entities, you can specify a range sorted in employee id order, or a range sorted in email address order by querying for entities with hello appropriate prefix in hello **RowKey**.</span></span>  

* <span data-ttu-id="eff6d-505">Pracownicy działu sprzedaży z identyfikatorem pracowników w zakresie hello hello toofind hello wszystkich pracowników w **000100** za**000199** posortowane w użyciu kolejności identyfikator pracownika: $filter = (PartitionKey eq ' empid_Sales") i (RowKey ge" 000100') i (RowKey le "000199")</span><span class="sxs-lookup"><span data-stu-id="eff6d-505">toofind all hello employees in hello Sales department with an employee id in hello range **000100** too**000199** sorted in employee id order use: $filter=(PartitionKey eq 'empid_Sales') and (RowKey ge '000100') and (RowKey le '000199')</span></span>  
* <span data-ttu-id="eff6d-506">toofind wszystkie hello pracowników działu sprzedaży hello adres e-mail, który rozpoczyna się od "" posortowane w wiadomości e-mail adres kolejności użycia: $filter = (PartitionKey eq ' email_Sales") i (RowKey ge"") i (RowKey lt 'b')</span><span class="sxs-lookup"><span data-stu-id="eff6d-506">toofind all hello employees in hello Sales department with an email address that starts with 'a' sorted in email address order use: $filter=(PartitionKey eq 'email_Sales') and (RowKey ge 'a') and (RowKey lt 'b')</span></span>  

<span data-ttu-id="eff6d-507">Należy pamiętać, że składnia filtru hello używane w powyższych przykładach hello z hello tabeli usługi interfejsu API REST, aby uzyskać więcej informacji, zobacz [jednostek zapytania](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span><span class="sxs-lookup"><span data-stu-id="eff6d-507">Note that hello filter syntax used in hello examples above is from hello Table service REST API, for more information see [Query Entities](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="eff6d-508">Problemy i zagadnienia</span><span class="sxs-lookup"><span data-stu-id="eff6d-508">Issues and considerations</span></span>
<span data-ttu-id="eff6d-509">Należy wziąć pod uwagę następujące punkty podczas podejmowania decyzji o hello jak tooimplement tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-509">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="eff6d-510">Możesz zachować zduplikowane obiekty ostatecznie zgodne ze sobą za pomocą hello [wzorzec transakcji po pewnym czasie spójne](#eventually-consistent-transactions-pattern) toomaintain hello indeksu podstawowych i pomocniczych podmiotów.</span><span class="sxs-lookup"><span data-stu-id="eff6d-510">You can keep your duplicate entities eventually consistent with each other by using hello [Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) toomaintain hello primary and secondary index entities.</span></span>  
* <span data-ttu-id="eff6d-511">Magazyn tabel jest stosunkowo tanie toouse, więc koszt koszty przechowywania danych zduplikowane hello nie powinno być głównym problemem.</span><span class="sxs-lookup"><span data-stu-id="eff6d-511">Table storage is relatively cheap toouse so hello cost overhead of storing duplicate data should not be a major concern.</span></span> <span data-ttu-id="eff6d-512">Jednak należy zawsze ocenić hello koszt projektu, w zależności od wymagań przewidywanego magazynu i dodawać tylko zduplikowanych wpisów toosupport hello zapytania, który aplikacja kliencka będzie wykonywać.</span><span class="sxs-lookup"><span data-stu-id="eff6d-512">However, you should always evaluate hello cost of your design based on your anticipated storage requirements and only add duplicate entities toosupport hello queries your client application will execute.</span></span>  
* <span data-ttu-id="eff6d-513">wartość używana dla hello Hello **RowKey** musi być unikatowa dla każdej jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-513">hello value used for hello **RowKey** must be unique for each entity.</span></span> <span data-ttu-id="eff6d-514">Rozważ użycie wartości klucza złożonego.</span><span class="sxs-lookup"><span data-stu-id="eff6d-514">Consider using compound key values.</span></span>  
* <span data-ttu-id="eff6d-515">Dopełnienie wartości liczbowe w hello **RowKey** (na przykład identyfikator pracownika hello 000223), umożliwia Popraw sortowania i filtrowania na podstawie górną i dolną granicę.</span><span class="sxs-lookup"><span data-stu-id="eff6d-515">Padding numeric values in hello **RowKey** (for example, hello employee id 000223), enables correct sorting and filtering based on upper and lower bounds.</span></span>  
* <span data-ttu-id="eff6d-516">Koniecznie niepotrzebne tooduplicate hello wszystkich właściwości jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-516">You do not necessarily need tooduplicate all hello properties of your entity.</span></span> <span data-ttu-id="eff6d-517">Na przykład, jeśli hello adres zapytań, które wiadomości e-mail przy użyciu hello jednostek hello wyszukiwania w hello **RowKey** nigdy nie trzeba wiek hello pracownika, te jednostki można mieć hello następujące struktury:</span><span class="sxs-lookup"><span data-stu-id="eff6d-517">For example, if hello queries that lookup hello entities using hello email address in hello **RowKey** never need hello employee's age, these entities could have hello following structure:</span></span>
  
  ![][11]
* <span data-ttu-id="eff6d-518">Jest zwykle lepsze toostore zduplikowane dane i upewnij się, że można pobrać wszystkich hello dane z pojedynczego zapytania niż toolocate jedno zapytanie toouse jednostki przy użyciu hello pomocniczy indeks i innym toolookup hello wymagane dane hello podstawowego indeksu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-518">It is typically better toostore duplicate data and ensure that you can retrieve all hello data you need with a single query than toouse one query toolocate an entity using hello secondary index and another toolookup hello required data in hello primary index.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="eff6d-519">Gdy toouse tego wzorca</span><span class="sxs-lookup"><span data-stu-id="eff6d-519">When toouse this pattern</span></span>
<span data-ttu-id="eff6d-520">Za pomocą tego wzorca gdy aplikacja kliencka musi tooretrieve jednostek przy użyciu różnych różne klucze, gdy klient musi tooretrieve jednostek w różnych sortowania, a można zidentyfikować każdej jednostki przy użyciu różnych unikatowe wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-520">Use this pattern when your client application needs tooretrieve entities using a variety of different keys, when your client needs tooretrieve entities in different sort orders, and where you can identify each entity using a variety of unique values.</span></span> <span data-ttu-id="eff6d-521">Ten wzorzec należy użyć tooavoid przekracza limity skalowalności partycji hello przeprowadzania wyszukiwania jednostki przy użyciu różnych hello **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-521">Use this pattern when you want tooavoid exceeding hello partition scalability limits when you are performing entity lookups using hello different **RowKey** values.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="eff6d-522">Wskazówki i wzorce pokrewne</span><span class="sxs-lookup"><span data-stu-id="eff6d-522">Related patterns and guidance</span></span>
<span data-ttu-id="eff6d-523">Witaj następujące wskazówki i wzorce mogą także mieć znaczenie w przypadku implementacja tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-523">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="eff6d-524">Wzorzec ostatecznie spójne transakcji</span><span class="sxs-lookup"><span data-stu-id="eff6d-524">Eventually consistent transactions pattern</span></span>](#eventually-consistent-transactions-pattern)  
* [<span data-ttu-id="eff6d-525">Wzorzec pomocniczy indeks wewnątrz partycji</span><span class="sxs-lookup"><span data-stu-id="eff6d-525">Intra-partition secondary index pattern</span></span>](#intra-partition-secondary-index-pattern)  
* [<span data-ttu-id="eff6d-526">Wzorca złożonego klucza</span><span class="sxs-lookup"><span data-stu-id="eff6d-526">Compound key pattern</span></span>](#compound-key-pattern)  
* [<span data-ttu-id="eff6d-527">Grupowanie jednostki transakcji</span><span class="sxs-lookup"><span data-stu-id="eff6d-527">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="eff6d-528">Praca z typami jednostek heterogenicznych</span><span class="sxs-lookup"><span data-stu-id="eff6d-528">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)  

### <a name="eventually-consistent-transactions-pattern"></a><span data-ttu-id="eff6d-529">Wzorzec ostatecznie spójne transakcji</span><span class="sxs-lookup"><span data-stu-id="eff6d-529">Eventually consistent transactions pattern</span></span>
<span data-ttu-id="eff6d-530">Włączyć spójności po pewnym czasie działania przez granice partycji lub granice systemu magazynu za pomocą kolejek platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="eff6d-530">Enable eventually consistent behavior across partition boundaries or storage system boundaries by using Azure queues.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="eff6d-531">Kontekst, jak i problemu</span><span class="sxs-lookup"><span data-stu-id="eff6d-531">Context and problem</span></span>
<span data-ttu-id="eff6d-532">EGTs umożliwiają atomic transakcji między wiele jednostek, które współużytkują hello tego samego klucza partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-532">EGTs enable atomic transactions across multiple entities that share hello same partition key.</span></span> <span data-ttu-id="eff6d-533">Względu na wydajność i skalowalność, możesz określić toostore jednostek, które mają wymagań spójności w osobnych partycji lub w systemie magazynu oddzielne: w takiej sytuacji nie można użyć EGTs toomaintain spójności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-533">For performance and scalability reasons, you might decide toostore entities that have consistency requirements in separate partitions or in a separate storage system: in such a scenario, you cannot use EGTs toomaintain consistency.</span></span> <span data-ttu-id="eff6d-534">Na przykład może być wymaganie toomaintain spójność ostateczna między:</span><span class="sxs-lookup"><span data-stu-id="eff6d-534">For example, you might have a requirement toomaintain eventual consistency between:</span></span>  

* <span data-ttu-id="eff6d-535">Jednostek przechowywanych w dwóch różnych partycji w hello takie same, w różnych tabel w tabeli w różnych kont magazynu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-535">Entities stored in two different partitions in hello same table, in different tables, in in different storage accounts.</span></span>  
* <span data-ttu-id="eff6d-536">Jednostki przechowywane w hello usługi tabel a obiektu blob hello usługi Blob.</span><span class="sxs-lookup"><span data-stu-id="eff6d-536">An entity stored in hello Table service and a blob stored in hello Blob service.</span></span>  
* <span data-ttu-id="eff6d-537">Jednostka przechowywane w usłudze tabel hello i pliku w systemie plików.</span><span class="sxs-lookup"><span data-stu-id="eff6d-537">An entity stored in hello Table service and a file in a file system.</span></span>  
* <span data-ttu-id="eff6d-538">Jednostki magazynu w hello usługi tabel jeszcze zaindeksowane przy użyciu usługi Azure Search hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-538">An entity store in hello Table service yet indexed using hello Azure Search service.</span></span>  

#### <a name="solution"></a><span data-ttu-id="eff6d-539">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="eff6d-539">Solution</span></span>
<span data-ttu-id="eff6d-540">Korzystanie z kolejek platformy Azure, można zaimplementować rozwiązania, które zapewnia spójność ostateczna przez dwa lub więcej partycji ani systemów pamięci masowej.</span><span class="sxs-lookup"><span data-stu-id="eff6d-540">By using Azure queues, you can implement a solution that delivers eventual consistency across two or more partitions or storage systems.</span></span>
<span data-ttu-id="eff6d-541">tooillustrate tego podejścia, założono, że masz starego jednostek pracownika wymaganie toobe tooarchive stanie.</span><span class="sxs-lookup"><span data-stu-id="eff6d-541">tooillustrate this approach, assume you have a requirement toobe able tooarchive old employee entities.</span></span> <span data-ttu-id="eff6d-542">Stary jednostki pracownika rzadko będą pytani i powinny być wykluczone z żadnych działań, które zajmują się bieżący pracowników.</span><span class="sxs-lookup"><span data-stu-id="eff6d-542">Old employee entities are rarely queried and should be excluded from any activities that deal with current employees.</span></span> <span data-ttu-id="eff6d-543">tooimplement to wymaganie, aktywnych pracowników są przechowywane w hello **bieżącego** tabeli i starego pracowników w hello **archiwum** tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-543">tooimplement this requirement you store active employees in hello **Current** table and old employees in hello **Archive** table.</span></span> <span data-ttu-id="eff6d-544">Archiwizowanie pracownika wymaga toodelete hello jednostka z hello **bieżącego** tabeli i Dodaj hello jednostki toohello **archiwum** tabeli, ale nie można użyć tooperform EGT tych dwóch operacji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-544">Archiving an employee requires you toodelete hello entity from hello **Current** table and add hello entity toohello **Archive** table, but you cannot use an EGT tooperform these two operations.</span></span> <span data-ttu-id="eff6d-545">ryzyko hello tooavoid czy awaria powoduje tooappear jednostki w obu lub ani tabel, operacja archiwizacji hello muszą być zgodne po pewnym czasie.</span><span class="sxs-lookup"><span data-stu-id="eff6d-545">tooavoid hello risk that a failure causes an entity tooappear in both or neither tables, hello archive operation must be eventually consistent.</span></span> <span data-ttu-id="eff6d-546">Witaj Poniższy diagram sekwencji przedstawiono kroki hello w tej operacji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-546">hello following sequence diagram outlines hello steps in this operation.</span></span> <span data-ttu-id="eff6d-547">Więcej szczegółów podano ścieżek wyjątków w hello następujący tekst.</span><span class="sxs-lookup"><span data-stu-id="eff6d-547">More detail is provided for exception paths in hello text following.</span></span>  

![][12]

<span data-ttu-id="eff6d-548">Klient inicjuje operację archiwum hello umieszczając wiadomości w kolejce systemu Azure, w tym przykładzie tooarchive pracownika #456.</span><span class="sxs-lookup"><span data-stu-id="eff6d-548">A client initiates hello archive operation by placing a message on an Azure queue, in this example tooarchive employee #456.</span></span> <span data-ttu-id="eff6d-549">Rolę procesu roboczego sonduje kolejkę hello nowe wiadomości; Po znalezieniu jednego odczytuje wiadomość hello i pozostawia ukryte kopiowania na powitania kolejki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-549">A worker role polls hello queue for new messages; when it finds one, it reads hello message and leaves a hidden copy on hello queue.</span></span> <span data-ttu-id="eff6d-550">obok roli procesu roboczego Hello pobiera kopię hello jednostki z hello **bieżącego** tabeli, wstawia kopię hello **archiwum** tabeli, a następnie usuwa hello oryginalnego z hello **bieżącego**tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-550">hello worker role next fetches a copy of hello entity from hello **Current** table, inserts a copy in hello **Archive** table, and then deletes hello original from hello **Current** table.</span></span> <span data-ttu-id="eff6d-551">Jeśli nie wystąpiły błędy z poprzednich kroków hello, roli procesu roboczego hello usuwa ukryte wiadomość hello z hello kolejki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-551">Finally, if there were no errors from hello previous steps, hello worker role deletes hello hidden message from hello queue.</span></span>  

<span data-ttu-id="eff6d-552">W tym przykładzie krok 4 wstawia hello pracowników do hello **archiwum** tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-552">In this example, step 4 inserts hello employee into hello **Archive** table.</span></span> <span data-ttu-id="eff6d-553">Go można dodać obiektu blob tooa pracownika hello w hello usługa Blob lub pliku w systemie plików.</span><span class="sxs-lookup"><span data-stu-id="eff6d-553">It could add hello employee tooa blob in hello Blob service or a file in a file system.</span></span>  

#### <a name="recovering-from-failures"></a><span data-ttu-id="eff6d-554">Odzyskiwanie z błędami</span><span class="sxs-lookup"><span data-stu-id="eff6d-554">Recovering from failures</span></span>
<span data-ttu-id="eff6d-555">Ważne jest, że hello czynności w krokach **4** i **5** musi być *idempotentności* w przypadku roli procesu roboczego hello musi toorestart hello archiwum operacji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-555">It is important that hello operations in steps **4** and **5** must be *idempotent* in case hello worker role needs toorestart hello archive operation.</span></span> <span data-ttu-id="eff6d-556">Jeśli używasz usługi tabel hello w kroku **4** należy użyć operacji "Wstawianie lub zastępowanie"; kroku **5** należy użyć "usunąć, jeśli istnieje" operacji w bibliotece klienta hello są używane.</span><span class="sxs-lookup"><span data-stu-id="eff6d-556">If you are using hello Table service, for step **4** you should use an "insert or replace" operation; for step **5** you should use a "delete if exists" operation in hello client library you are using.</span></span> <span data-ttu-id="eff6d-557">Jeśli korzystasz z innego systemu magazynu, należy użyć operacji odpowiednie idempotentności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-557">If you are using another storage system, you must use an appropriate idempotent operation.</span></span>  

<span data-ttu-id="eff6d-558">Jeśli hello roli proces roboczy nigdy nie wykonuje kroku **6**, następnie po wiadomość hello limitu czasu pojawi się w kolejce hello gotowe do tooreprocess tootry roli procesu roboczego hello go.</span><span class="sxs-lookup"><span data-stu-id="eff6d-558">If hello worker role never completes step **6**, then after a timeout hello message reappears on hello queue ready for hello worker role tootry tooreprocess it.</span></span> <span data-ttu-id="eff6d-559">Rola proces roboczy Hello można sprawdzić, ile razy wiadomość w kolejce hello została przeczytana i w razie potrzeby flagi jest komunikat "skażone" do badania wysyłając tooa oddzielnych kolejki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-559">hello worker role can check how many times a message on hello queue has been read and, if necessary, flag it is a "poison" message for investigation by sending it tooa separate queue.</span></span> <span data-ttu-id="eff6d-560">Aby uzyskać więcej informacji na temat odczytywania wiadomości w kolejce i sprawdzanie hello usuwania z kolejki liczby, zobacz [pobrać wiadomości](https://msdn.microsoft.com/library/azure/dd179474.aspx).</span><span class="sxs-lookup"><span data-stu-id="eff6d-560">For more information about reading queue messages and checking hello dequeue count, see [Get Messages](https://msdn.microsoft.com/library/azure/dd179474.aspx).</span></span>  

<span data-ttu-id="eff6d-561">Błędy z usługi tabeli i kolejki hello są błędów przejściowych i aplikacja kliencka powinna zawierać toohandle logiki ponawiania odpowiedniego je.</span><span class="sxs-lookup"><span data-stu-id="eff6d-561">Some errors from hello Table and Queue services are transient errors, and your client application should include suitable retry logic toohandle them.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="eff6d-562">Problemy i zagadnienia</span><span class="sxs-lookup"><span data-stu-id="eff6d-562">Issues and considerations</span></span>
<span data-ttu-id="eff6d-563">Należy wziąć pod uwagę następujące punkty podczas podejmowania decyzji o hello jak tooimplement tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-563">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="eff6d-564">To rozwiązanie nie wymaga izolacji transakcji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-564">This solution does not provide for transaction isolation.</span></span> <span data-ttu-id="eff6d-565">Na przykład klient może odczytać hello **bieżącego** i **archiwum** tabel, gdy rola proces roboczy hello między krokami **4** i **5**i zobaczyć niespójne widok hello danych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-565">For example, a client could read hello **Current** and **Archive** tables when hello worker role was between steps **4** and **5**, and see an inconsistent view of hello data.</span></span> <span data-ttu-id="eff6d-566">Należy pamiętać, że hello dane będą zgodne po pewnym czasie.</span><span class="sxs-lookup"><span data-stu-id="eff6d-566">Note that hello data will be consistent eventually.</span></span>  
* <span data-ttu-id="eff6d-567">Należy upewnić się, że kroki 4 i 5 są idempotentności w spójność ostateczna tooensure kolejności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-567">You must be sure that steps 4 and 5 are idempotent in order tooensure eventual consistency.</span></span>  
* <span data-ttu-id="eff6d-568">Można skalować rozwiązania hello przy użyciu wielu kolejek i wystąpień roli procesu roboczego.</span><span class="sxs-lookup"><span data-stu-id="eff6d-568">You can scale hello solution by using multiple queues and worker role instances.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="eff6d-569">Gdy toouse tego wzorca</span><span class="sxs-lookup"><span data-stu-id="eff6d-569">When toouse this pattern</span></span>
<span data-ttu-id="eff6d-570">Ten wzorzec należy użyć tooguarantee spójność ostateczna między jednostkami, które istnieją w różnych partycji lub tabele.</span><span class="sxs-lookup"><span data-stu-id="eff6d-570">Use this pattern when you want tooguarantee eventual consistency between entities that exist in different partitions or tables.</span></span> <span data-ttu-id="eff6d-571">Ten wzorzec tooensure spójność ostateczna dla operacji można rozszerzyć na powitania tabeli usługi i usługa Blob hello i innych źródeł danych magazynu Azure, takich jak system plików bazy danych lub hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-571">You can extend this pattern tooensure eventual consistency for operations across hello Table service and hello Blob service and other non-Azure Storage data sources such as database or hello file system.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="eff6d-572">Wskazówki i wzorce pokrewne</span><span class="sxs-lookup"><span data-stu-id="eff6d-572">Related patterns and guidance</span></span>
<span data-ttu-id="eff6d-573">Witaj następujące wskazówki i wzorce mogą także mieć znaczenie w przypadku implementacja tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-573">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="eff6d-574">Grupowanie jednostki transakcji</span><span class="sxs-lookup"><span data-stu-id="eff6d-574">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="eff6d-575">Scalanie lub Zastąp</span><span class="sxs-lookup"><span data-stu-id="eff6d-575">Merge or replace</span></span>](#merge-or-replace)  

> [!NOTE]
> <span data-ttu-id="eff6d-576">Jeśli izolacji transakcji jest ważne tooyour rozwiązanie, należy rozważyć zmodyfikowanie tooenable Twojego tabel należy toouse EGTs.</span><span class="sxs-lookup"><span data-stu-id="eff6d-576">If transaction isolation is important tooyour solution, you should consider redesigning your tables tooenable you toouse EGTs.</span></span>  
> 
> 

### <a name="index-entities-pattern"></a><span data-ttu-id="eff6d-577">Wzorzec jednostek indeksu</span><span class="sxs-lookup"><span data-stu-id="eff6d-577">Index Entities Pattern</span></span>
<span data-ttu-id="eff6d-578">Obsługa indeksu jednostek tooenable wydajne wyszukiwanie zwracających list jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-578">Maintain index entities tooenable efficient searches that return lists of entities.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="eff6d-579">Kontekst, jak i problemu</span><span class="sxs-lookup"><span data-stu-id="eff6d-579">Context and problem</span></span>
<span data-ttu-id="eff6d-580">Witaj usługi tabel automatycznie indeksuje jednostek przy użyciu hello **PartitionKey** i **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-580">hello Table service automatically indexes entities using hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="eff6d-581">Dzięki temu tooretrieve aplikacji klienckich jednostki efektywne wykorzystanie zapytania punktu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-581">This enables a client application tooretrieve an entity efficiently using a point query.</span></span> <span data-ttu-id="eff6d-582">Na przykład za pomocą hello struktura tabeli pokazano poniżej, aplikacja kliencka pozwala na efektywne pobieranie jednostki pracownika przy użyciu nazwy działu hello i identyfikator pracownika hello (hello **PartitionKey** i **RowKey** ).</span><span class="sxs-lookup"><span data-stu-id="eff6d-582">For example, using hello table structure shown below, a client application can efficiently retrieve an individual employee entity by using hello department name and hello employee id (hello **PartitionKey** and **RowKey**).</span></span>  

![][13]

<span data-ttu-id="eff6d-583">Jeśli chcesz toobe tooretrieve stanie listę jednostek pracowników na podstawie hello wartości innej właściwości nie jest unikatowa, takie jak nazwisko, należy użyć mniej wydajne partycji skanowania dopasowań toofind zamiast toolook indeksu je bezpośrednio w górę.</span><span class="sxs-lookup"><span data-stu-id="eff6d-583">If you also want toobe able tooretrieve a list of employee entities based on hello value of another non-unique property, such as their last name, you must use a less efficient partition scan toofind matches rather than using an index toolook them up directly.</span></span> <span data-ttu-id="eff6d-584">Jest to spowodowane hello tabeli Usługa nie zapewnia indeksów pomocniczych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-584">This is because hello table service does not provide secondary indexes.</span></span>  

#### <a name="solution"></a><span data-ttu-id="eff6d-585">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="eff6d-585">Solution</span></span>
<span data-ttu-id="eff6d-586">Wyszukiwanie tooenable przez nazwisko ze strukturą entity hello pokazanym powyżej muszą zachować listę identyfikatorów pracownika.</span><span class="sxs-lookup"><span data-stu-id="eff6d-586">tooenable lookup by last name with hello entity structure shown above, you must maintain lists of employee ids.</span></span> <span data-ttu-id="eff6d-587">Ma tooretrieve hello pracownika jednostki o określonej nazwie ostatniego, takich jak Nowak, należy w pierwszej kolejności zlokalizować hello listę identyfikatorów pracowników dla pracowników z Nowak jako nazwisk i następnie pobrać tych jednostek pracownika.</span><span class="sxs-lookup"><span data-stu-id="eff6d-587">If you want tooretrieve hello employee entities with a particular last name, such as Jones, you must first locate hello list of employee ids for employees with Jones as their last name, and then retrieve those employee entities.</span></span> <span data-ttu-id="eff6d-588">Istnieją trzy główne opcje przechowywania hello listy identyfikatorów pracowników:</span><span class="sxs-lookup"><span data-stu-id="eff6d-588">There are three main options for storing hello lists of employee ids:</span></span>  

* <span data-ttu-id="eff6d-589">Użyj magazynu obiektów blob.</span><span class="sxs-lookup"><span data-stu-id="eff6d-589">Use blob storage.</span></span>  
* <span data-ttu-id="eff6d-590">Utwórz jednostki indeksu w hello sam partycji hello pracownika jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-590">Create index entities in hello same partition as hello employee entities.</span></span>  
* <span data-ttu-id="eff6d-591">Utwórz jednostki indeksu w oddzielnej partycji lub tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-591">Create index entities in a separate partition or table.</span></span>  

<span data-ttu-id="eff6d-592"><u>Opcja #1: Magazyn obiektów blob służy</u></span><span class="sxs-lookup"><span data-stu-id="eff6d-592"><u>Option #1: Use blob storage</u></span></span>  

<span data-ttu-id="eff6d-593">Witaj pierwszej opcji utworzenie obiektu blob każdy unikatowy nazwisko, a w każdym magazynu obiektów blob listę hello **PartitionKey** (dział) i **RowKey** (identyfikator pracownika) wartości dla pracowników, którzy mają to ostatnia Nazwa.</span><span class="sxs-lookup"><span data-stu-id="eff6d-593">For hello first option, you create a blob for every unique last name, and in each blob store a list of hello **PartitionKey** (department) and **RowKey** (employee id) values for employees that have that last name.</span></span> <span data-ttu-id="eff6d-594">Podczas dodawania lub usuwania pracownika należy się upewnić, że zawartość hello hello odpowiedniego obiektu blob jest ostatecznie zgodne z hello pracownika jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-594">When you add or delete an employee you should ensure that hello content of hello relevant blob is eventually consistent with hello employee entities.</span></span>  

<span data-ttu-id="eff6d-595"><u>Opcja #2:</u> Utwórz indeks jednostek w hello tej samej partycji</span><span class="sxs-lookup"><span data-stu-id="eff6d-595"><u>Option #2:</u> Create index entities in hello same partition</span></span>  

<span data-ttu-id="eff6d-596">Druga opcja hello można użyć indeksu podmiotom przechowywania hello następujące dane:</span><span class="sxs-lookup"><span data-stu-id="eff6d-596">For hello second option, use index entities that store hello following data:</span></span>  

![][14]

<span data-ttu-id="eff6d-597">Witaj **EmployeeIDs** właściwość zawiera listę identyfikatorów pracowników dla pracowników z nazwisko hello przechowywane w hello **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="eff6d-597">hello **EmployeeIDs** property contains a list of employee ids for employees with hello last name stored in hello **RowKey**.</span></span>  

<span data-ttu-id="eff6d-598">Hello poniższe kroki wchodzą w skład procesu hello, jakie należy wykonać podczas dodawania nowych pracowników, jeśli używasz hello drugiej opcji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-598">hello following steps outline hello process you should follow when you are adding a new employee if you are using hello second option.</span></span> <span data-ttu-id="eff6d-599">W tym przykładzie dodajemy pracownika z identyfikatorem 000152 i nazwisko Nowak działu sprzedaży hello:</span><span class="sxs-lookup"><span data-stu-id="eff6d-599">In this example, we are adding an employee with Id 000152 and a last name Jones in hello Sales department:</span></span>  

1. <span data-ttu-id="eff6d-600">Pobrać jednostki indeksu hello o **PartitionKey** wartość "Sprzedaż" i hello **RowKey** wartość "Nowak".</span><span class="sxs-lookup"><span data-stu-id="eff6d-600">Retrieve hello index entity with a **PartitionKey** value "Sales" and hello **RowKey** value "Jones."</span></span> <span data-ttu-id="eff6d-601">Zapisz hello ETag toouse tej jednostki w kroku 2.</span><span class="sxs-lookup"><span data-stu-id="eff6d-601">Save hello ETag of this entity toouse in step 2.</span></span>  
2. <span data-ttu-id="eff6d-602">Utwórz jednostki transakcji grupy (to znaczy operacji zbiorczej), która wstawia nową jednostkę pracownika hello (**PartitionKey** wartość "Sprzedaż" i **RowKey** wartość "000152"), i aktualizacje hello jednostki indeksu ( **PartitionKey** wartość "Sprzedaż" i **RowKey** wartość "Nowak"), dodając hello nowych pracowników identyfikator toohello listy w polu EmployeeIDs hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-602">Create an entity group transaction (that is, a batch operation) that inserts hello new employee entity (**PartitionKey** value "Sales" and **RowKey** value "000152"), and updates hello index entity (**PartitionKey** value "Sales" and **RowKey** value "Jones") by adding hello new employee id toohello list in hello EmployeeIDs field.</span></span> <span data-ttu-id="eff6d-603">Aby uzyskać więcej informacji o transakcji grupy jednostek, zobacz [transakcji grupy jednostek](#entity-group-transactions).</span><span class="sxs-lookup"><span data-stu-id="eff6d-603">For more information about entity group transactions, see [Entity Group Transactions](#entity-group-transactions).</span></span>  
3. <span data-ttu-id="eff6d-604">Jeśli transakcji grupy jednostki hello zakończy się niepowodzeniem z powodu błędu optymistycznej współbieżności (ktoś właśnie zmodyfikował jednostki indeksu hello), wymagana będzie toostart za pośrednictwem w kroku 1 ponownie.</span><span class="sxs-lookup"><span data-stu-id="eff6d-604">If hello entity group transaction fails because of an optimistic concurrency error (someone else has just modified hello index entity), then you need toostart over at step 1 again.</span></span>  

<span data-ttu-id="eff6d-605">Jeśli używasz hello druga opcja, można użyć podobne toodeleting podejście pracownika.</span><span class="sxs-lookup"><span data-stu-id="eff6d-605">You can use a similar approach toodeleting an employee if you are using hello second option.</span></span> <span data-ttu-id="eff6d-606">Zmiana jego nazwisko jest nieco bardziej skomplikowane, ponieważ będą potrzebne tooexecute transakcji grupy jednostki, która aktualizuje trzy jednostki: hello jednostki pracownika, hello jednostki indeksu dla starego nazwisko hello i hello jednostki indeksu dla nowej nazwy ostatniego hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-606">Changing an employee's last name is slightly more complex because you will need tooexecute an entity group transaction that updates three entities: hello employee entity, hello index entity for hello old last name, and hello index entity for hello new last name.</span></span> <span data-ttu-id="eff6d-607">Każda jednostka musi pobrać przed wprowadzeniem jakichkolwiek zmian w kolejności wartości ETag hello tooretrieve można następnie użyć tooperform hello aktualizacji za pomocą optymistycznej współbieżności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-607">You must retrieve each entity before making any changes in order tooretrieve hello ETag values that you can then use tooperform hello updates using optimistic concurrency.</span></span>  

<span data-ttu-id="eff6d-608">Witaj poniższe kroki wchodzą w skład procesu hello, które należy wykonać, gdy będziesz potrzebować toolook wszystkich pracowników hello o danej nazwie ostatniego w dziale, jeśli używasz hello druga opcja.</span><span class="sxs-lookup"><span data-stu-id="eff6d-608">hello following steps outline hello process you should follow when you need toolook up all hello employees with a given last name in a department if you are using hello second option.</span></span> <span data-ttu-id="eff6d-609">W tym przykładzie czekamy wszystkich pracowników hello z nazwisko Nowak działu sprzedaży hello:</span><span class="sxs-lookup"><span data-stu-id="eff6d-609">In this example, we are looking up all hello employees with last name Jones in hello Sales department:</span></span>  

1. <span data-ttu-id="eff6d-610">Pobrać jednostki indeksu hello o **PartitionKey** wartość "Sprzedaż" i hello **RowKey** wartość "Nowak".</span><span class="sxs-lookup"><span data-stu-id="eff6d-610">Retrieve hello index entity with a **PartitionKey** value "Sales" and hello **RowKey** value "Jones."</span></span>  
2. <span data-ttu-id="eff6d-611">Przeanalizować hello listę identyfikatorów, w polu EmployeeIDs hello pracowników.</span><span class="sxs-lookup"><span data-stu-id="eff6d-611">Parse hello list of employee Ids in hello EmployeeIDs field.</span></span>  
3. <span data-ttu-id="eff6d-612">Aby uzyskać dodatkowe informacje na temat każdego z tych pracowników (na przykład ich adresów e-mail), należy pobrać poszczególnych jednostek pracownika hello przy użyciu **PartitionKey** wartość "Sprzedaż" i **RowKey** wartości z Lista Hello pracowników, który został uzyskany w kroku 2.</span><span class="sxs-lookup"><span data-stu-id="eff6d-612">If you need additional information about each of these employees (such as their email addresses), retrieve each of hello employee entities using **PartitionKey** value "Sales" and **RowKey** values from hello list of employees you obtained in step 2.</span></span>  

<span data-ttu-id="eff6d-613"><u>Opcja #3:</u> Utwórz indeks jednostki w oddzielnej partycji lub tabeli</span><span class="sxs-lookup"><span data-stu-id="eff6d-613"><u>Option #3:</u> Create index entities in a separate partition or table</span></span>  

<span data-ttu-id="eff6d-614">Trzecia opcja hello można użyć indeksu podmiotom przechowywania hello następujące dane:</span><span class="sxs-lookup"><span data-stu-id="eff6d-614">For hello third option, use index entities that store hello following data:</span></span>  

![][15]

<span data-ttu-id="eff6d-615">Witaj **EmployeeIDs** właściwość zawiera listę identyfikatorów pracowników dla pracowników z nazwisko hello przechowywane w hello **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="eff6d-615">hello **EmployeeIDs** property contains a list of employee ids for employees with hello last name stored in hello **RowKey**.</span></span>  

<span data-ttu-id="eff6d-616">Z hello trzecia opcja nie można użyć EGTs toomaintain spójności, ponieważ jednostki indeksu hello znajdują się w oddzielnej partycji z hello pracownika jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-616">With hello third option, you cannot use EGTs toomaintain consistency because hello index entities are in a separate partition from hello employee entities.</span></span> <span data-ttu-id="eff6d-617">Należy się upewnić, że jednostek indeksu hello są ostatecznie zgodne z hello pracownika jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-617">You should ensure that hello index entities are eventually consistent with hello employee entities.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="eff6d-618">Problemy i zagadnienia</span><span class="sxs-lookup"><span data-stu-id="eff6d-618">Issues and considerations</span></span>
<span data-ttu-id="eff6d-619">Należy wziąć pod uwagę następujące punkty podczas podejmowania decyzji o hello jak tooimplement tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-619">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="eff6d-620">To rozwiązanie wymaga co najmniej dwa zapytania tooretrieve dopasowania jednostek: jedna tooquery hello indeksu jednostek tooobtain hello lista **RowKey** wartości, a następnie wykonuje zapytanie tooretrieve każdej jednostki w liście hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-620">This solution requires at least two queries tooretrieve matching entities: one tooquery hello index entities tooobtain hello list of **RowKey** values, and then queries tooretrieve each entity in hello list.</span></span>  
* <span data-ttu-id="eff6d-621">Biorąc pod uwagę, że maksymalnie rozmiar równy 1 MB, opcja #2 zawiera poszczególne jednostki i opcji #3 w rozwiązaniu hello założono hello listę pracowników identyfikatorów dowolnym danym nazwisko nigdy nie jest większa niż 1 MB.</span><span class="sxs-lookup"><span data-stu-id="eff6d-621">Given that an individual entity has a maximum size of 1 MB, option #2 and option #3 in hello solution assume that hello list of employee ids for any given last name is never greater than 1 MB.</span></span> <span data-ttu-id="eff6d-622">Jeśli hello listę identyfikatorów pracowników jest prawdopodobnie toobe większa niż 1 MB, rozmiar, użyj opcji #1 i przechowywać dane indeksu hello w magazynie obiektów blob.</span><span class="sxs-lookup"><span data-stu-id="eff6d-622">If hello list of employee ids is likely toobe greater than 1 MB in size, use option #1 and store hello index data in blob storage.</span></span>  
* <span data-ttu-id="eff6d-623">Jeśli używasz opcji #2 (przy użyciu toohandle EGTs Dodawanie i usuwanie pracowników i zmienianie jego nazwisko) możesz należy sprawdzić, czy wolumin hello transakcji będzie podejścia hello limity skalowalności w danej partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-623">If you use option #2 (using EGTs toohandle adding and deleting employees, and changing an employee's last name) you must evaluate if hello volume of transactions will approach hello scalability limits in a given partition.</span></span> <span data-ttu-id="eff6d-624">Jeśli hello tak jest, należy rozważyć rozwiązanie po pewnym czasie spójne (#1 lub opcję #3), które używa kolejek toohandle hello aktualizacji żądań i umożliwia toostore możesz jednostek indeksu w oddzielnej partycji z hello pracownika jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-624">If this is hello case, you should consider an eventually consistent solution (option #1 or option #3) that uses queues toohandle hello update requests and enables you toostore your index entities in a separate partition from hello employee entities.</span></span>  
* <span data-ttu-id="eff6d-625">Opcja #2 w tym rozwiązaniu założono, że toolook się według nazwisk działu: na przykład chcesz tooretrieve listę pracownikom nazwisko Nowak hello działu sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="eff6d-625">Option #2 in this solution assumes that you want toolook up by last name within a department: for example, you want tooretrieve a list of employees with a last name Jones in hello Sales department.</span></span> <span data-ttu-id="eff6d-626">Jeśli chcesz, aby mogli toolook toobe wszystkich pracowników hello z nazwisko Kowalski w całej organizacji hello, należy użyć opcji #1 lub opcja #3.</span><span class="sxs-lookup"><span data-stu-id="eff6d-626">If you want toobe able toolook up all hello employees with a last name Jones across hello whole organization, use either option #1 or option #3.</span></span>
* <span data-ttu-id="eff6d-627">Można implementować rozwiązania na podstawie kolejki, które zapewnia spójność ostateczna (zobacz hello [wzorzec transakcji po pewnym czasie spójne](#eventually-consistent-transactions-pattern) więcej szczegółów).</span><span class="sxs-lookup"><span data-stu-id="eff6d-627">You can implement a queue-based solution that delivers eventual consistency (see hello [Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) for more details).</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="eff6d-628">Gdy toouse tego wzorca</span><span class="sxs-lookup"><span data-stu-id="eff6d-628">When toouse this pattern</span></span>
<span data-ttu-id="eff6d-629">Ten wzorzec należy użyć toolookup zestawu jednostek, że wszystkie mają wspólne wartość właściwości, na przykład wszystkich pracowników z hello nazwisko Nowak.</span><span class="sxs-lookup"><span data-stu-id="eff6d-629">Use this pattern when you want toolookup a set of entities that all share a common property value, such as all employees with hello last name Jones.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="eff6d-630">Wskazówki i wzorce pokrewne</span><span class="sxs-lookup"><span data-stu-id="eff6d-630">Related patterns and guidance</span></span>
<span data-ttu-id="eff6d-631">Witaj następujące wskazówki i wzorce mogą także mieć znaczenie w przypadku implementacja tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-631">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="eff6d-632">Wzorca złożonego klucza</span><span class="sxs-lookup"><span data-stu-id="eff6d-632">Compound key pattern</span></span>](#compound-key-pattern)  
* [<span data-ttu-id="eff6d-633">Wzorzec ostatecznie spójne transakcji</span><span class="sxs-lookup"><span data-stu-id="eff6d-633">Eventually consistent transactions pattern</span></span>](#eventually-consistent-transactions-pattern)  
* [<span data-ttu-id="eff6d-634">Grupowanie jednostki transakcji</span><span class="sxs-lookup"><span data-stu-id="eff6d-634">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="eff6d-635">Praca z typami jednostek heterogenicznych</span><span class="sxs-lookup"><span data-stu-id="eff6d-635">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)  

### <a name="denormalization-pattern"></a><span data-ttu-id="eff6d-636">Wzorzec denormalization</span><span class="sxs-lookup"><span data-stu-id="eff6d-636">Denormalization pattern</span></span>
<span data-ttu-id="eff6d-637">Łączenie danych powiązanych ze sobą w tooenable pojedynczej jednostki tooretrieve hello wszystkie dane, które należy za pomocą kwerendy pojedynczy punkt.</span><span class="sxs-lookup"><span data-stu-id="eff6d-637">Combine related data together in a single entity tooenable you tooretrieve all hello data you need with a single point query.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="eff6d-638">Kontekst, jak i problemu</span><span class="sxs-lookup"><span data-stu-id="eff6d-638">Context and problem</span></span>
<span data-ttu-id="eff6d-639">W relacyjnej bazie danych zwykle normalizacji danych tooremove duplikatów, co w zapytaniach, które pobierają dane z wielu tabel.</span><span class="sxs-lookup"><span data-stu-id="eff6d-639">In a relational database, you typically normalize data tooremove duplication resulting in queries that retrieve data from multiple tables.</span></span> <span data-ttu-id="eff6d-640">Jeśli normalizacji danych w tabelach platformy Azure, musisz wprowadzić wiele rund z powitania klienta toohello serwera tooretrieve powiązanych danych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-640">If you normalize your data in Azure tables, you must make multiple round trips from hello client toohello server tooretrieve your related data.</span></span> <span data-ttu-id="eff6d-641">Na przykład z hello struktura tabeli pokazano poniżej możesz potrzebne dwa zaokrąglona rund tooretrieve hello szczegółów dla działu: jeden toofetch hello działu jednostki, która zawiera identyfikator menedżera hello i szczegóły innego żądania toofetch hello menedżera pracownika Jednostka.</span><span class="sxs-lookup"><span data-stu-id="eff6d-641">For example, with hello table structure shown below you need two round trips tooretrieve hello details for a department: one toofetch hello department entity that includes hello manager's id, and then another request toofetch hello manager's details in an employee entity.</span></span>  

![][16]

#### <a name="solution"></a><span data-ttu-id="eff6d-642">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="eff6d-642">Solution</span></span>
<span data-ttu-id="eff6d-643">Zamiast hello danych są przechowywane w dwóch oddzielnych jednostek, denormalize hello danych i przechowywać kopię szczegóły Menedżera hello w jednostce działu hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-643">Instead of storing hello data in two separate entities, denormalize hello data and keep a copy of hello manager's details in hello department entity.</span></span> <span data-ttu-id="eff6d-644">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="eff6d-644">For example:</span></span>  

![][17]

<span data-ttu-id="eff6d-645">Z jednostkami działu przechowywane z tymi właściwościami można teraz pobrać wszystkie szczegóły hello potrzebnych o dział przy użyciu zapytania punktu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-645">With department entities stored with these properties, you can now retrieve all hello details you need about a department using a point query.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="eff6d-646">Problemy i zagadnienia</span><span class="sxs-lookup"><span data-stu-id="eff6d-646">Issues and considerations</span></span>
<span data-ttu-id="eff6d-647">Należy wziąć pod uwagę następujące punkty podczas podejmowania decyzji o hello jak tooimplement tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-647">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="eff6d-648">Brak niektórych koszt nakładów pracy związanych z przechowywaniem niektóre dane dwa razy.</span><span class="sxs-lookup"><span data-stu-id="eff6d-648">There is some cost overhead associated with storing some data twice.</span></span> <span data-ttu-id="eff6d-649">Witaj poprawiać wydajność (wynikające z mniej usługi magazynu toohello żądania) zwykle przeważa nad hello brzegowego wzrost kosztów magazynowania (i częściowo przesunięcia ten koszt przez redukcję hello liczba transakcji, które wymagają toofetch hello szczegóły działu).</span><span class="sxs-lookup"><span data-stu-id="eff6d-649">hello performance benefit (resulting from fewer requests toohello storage service) typically outweighs hello marginal increase in storage costs (and this cost is partially offset by a reduction in hello number of transactions you require toofetch hello details of a department).</span></span>  
* <span data-ttu-id="eff6d-650">Trzeba zachować spójność hello Witaj dwie jednostki, których są przechowywane informacje o menedżerach.</span><span class="sxs-lookup"><span data-stu-id="eff6d-650">You must maintain hello consistency of hello two entities that store information about managers.</span></span> <span data-ttu-id="eff6d-651">Można obsługiwać hello spójności problem przy użyciu EGTs tooupdate wiele jednostek w ramach jednej transakcji atomic: w tym przypadku hello działu jednostki i jednostki pracownika hello Menedżer działu hello są przechowywane w hello tej samej partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-651">You can handle hello consistency issue by using EGTs tooupdate multiple entities in a single atomic transaction: in this case, hello department entity, and hello employee entity for hello department manager are stored in hello same partition.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="eff6d-652">Gdy toouse tego wzorca</span><span class="sxs-lookup"><span data-stu-id="eff6d-652">When toouse this pattern</span></span>
<span data-ttu-id="eff6d-653">Gdy potrzebne są często toolook powiązane informacje, należy użyć tego wzorca.</span><span class="sxs-lookup"><span data-stu-id="eff6d-653">Use this pattern when you frequently need toolook up related information.</span></span> <span data-ttu-id="eff6d-654">Ten wzorzec zmniejsza hello liczba zapytań, klient musi wprowadzać tooretrieve hello danych, które wymaga.</span><span class="sxs-lookup"><span data-stu-id="eff6d-654">This pattern reduces hello number of queries your client must make tooretrieve hello data it requires.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="eff6d-655">Wskazówki i wzorce pokrewne</span><span class="sxs-lookup"><span data-stu-id="eff6d-655">Related patterns and guidance</span></span>
<span data-ttu-id="eff6d-656">Witaj następujące wskazówki i wzorce mogą także mieć znaczenie w przypadku implementacja tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-656">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="eff6d-657">Wzorca złożonego klucza</span><span class="sxs-lookup"><span data-stu-id="eff6d-657">Compound key pattern</span></span>](#compound-key-pattern)  
* [<span data-ttu-id="eff6d-658">Grupowanie jednostki transakcji</span><span class="sxs-lookup"><span data-stu-id="eff6d-658">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="eff6d-659">Praca z typami jednostek heterogenicznych</span><span class="sxs-lookup"><span data-stu-id="eff6d-659">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)

### <a name="compound-key-pattern"></a><span data-ttu-id="eff6d-660">Wzorca złożonego klucza</span><span class="sxs-lookup"><span data-stu-id="eff6d-660">Compound key pattern</span></span>
<span data-ttu-id="eff6d-661">Użyj złożone **RowKey** dane z zapytania pojedynczy punkt dotyczące wartości tooenable toolookup klienta.</span><span class="sxs-lookup"><span data-stu-id="eff6d-661">Use compound **RowKey** values tooenable a client toolookup related data with a single point query.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="eff6d-662">Kontekst, jak i problemu</span><span class="sxs-lookup"><span data-stu-id="eff6d-662">Context and problem</span></span>
<span data-ttu-id="eff6d-663">W relacyjnej bazie danych, jest dość fizycznych toouse sprzężenia w zapytaniach tooreturn powiązane elementy danych toohello klienta w jednym zapytaniu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-663">In a relational database, it is quite natural toouse joins in queries tooreturn related pieces of data toohello client in a single query.</span></span> <span data-ttu-id="eff6d-664">Na przykład można użyć toolook identyfikator pracownika hello listę powiązanych jednostek zawierających wydajności i przeglądanie danych dla określonego pracownika.</span><span class="sxs-lookup"><span data-stu-id="eff6d-664">For example, you might use hello employee id toolook up a list of related entities that contain performance and review data for that employee.</span></span>  

<span data-ttu-id="eff6d-665">Przyjęto założenie, że pracownik jednostki są przechowywane w usłudze tabeli hello przy użyciu następującej struktury hello:</span><span class="sxs-lookup"><span data-stu-id="eff6d-665">Assume you are storing employee entities in hello Table service using hello following structure:</span></span>  

![][18]

<span data-ttu-id="eff6d-666">Należy również toostore danych historycznych dotyczących tooreviews i wydajności dla każdego pracownika hello roku działał dla Twojej organizacji i stanie tooaccess toobe te informacje są niezbędne w roku.</span><span class="sxs-lookup"><span data-stu-id="eff6d-666">You also need toostore historical data relating tooreviews and performance for each year hello employee has worked for your organization and you need toobe able tooaccess this information by year.</span></span> <span data-ttu-id="eff6d-667">Jedną z opcji jest toocreate innej tabeli, która przechowuje jednostek z następującej struktury hello:</span><span class="sxs-lookup"><span data-stu-id="eff6d-667">One option is toocreate another table that stores entities with hello following structure:</span></span>  

![][19]

<span data-ttu-id="eff6d-668">Należy zauważyć, że ta podejścia można może zadecydować tooduplicate niektóre informacje (takie jak imię i nazwisko) hello nowe jednostki tooenable tooretrieve możesz danych za pomocą pojedynczego żądania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-668">Notice that with this approach you may decide tooduplicate some information (such as first name and last name) in hello new entity tooenable you tooretrieve your data with a single request.</span></span> <span data-ttu-id="eff6d-669">Nie można jednak obsługa wysoki poziom spójności, ponieważ nie można użyć atomowo EGT tooupdate Witaj dwie jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-669">However, you cannot maintain strong consistency because you cannot use an EGT tooupdate hello two entities atomically.</span></span>  

#### <a name="solution"></a><span data-ttu-id="eff6d-670">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="eff6d-670">Solution</span></span>
<span data-ttu-id="eff6d-671">Przechowywanie nowy typ jednostek w oryginalnej tabeli przy użyciu jednostek z następującej struktury hello:</span><span class="sxs-lookup"><span data-stu-id="eff6d-671">Store a new entity type in your original table using entities with hello following structure:</span></span>  

![][20]

<span data-ttu-id="eff6d-672">Zwróć uwagę, jak hello **RowKey** teraz klucza złożonego składa się z hello identyfikator i hello rok hello przeglądanie danych, który umożliwia tooretrieve hello pracownika wydajności i przejrzyj dane z pojedynczego żądania dla pojedynczej jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-672">Notice how hello **RowKey** is now a compound key made up of hello employee id and hello year of hello review data that enables you tooretrieve hello employee's performance and review data with a single request for a single entity.</span></span>  

<span data-ttu-id="eff6d-673">Witaj poniższy przykład przedstawia, jak można pobrać wszystkich danych przeglądu powitania dla danego pracownika (na przykład 000123 pracownik działu sprzedaży hello):</span><span class="sxs-lookup"><span data-stu-id="eff6d-673">hello following example outlines how you can retrieve all hello review data for a particular employee (such as employee 000123 in hello Sales department):</span></span>  

<span data-ttu-id="eff6d-674">$filter = (PartitionKey eq 'Sales') i (RowKey ge "empid_000123") i (lt RowKey "empid_000124") & $select = RowKey, Menedżer klasyfikacji, Klasyfikacja równorzędnej, komentarze</span><span class="sxs-lookup"><span data-stu-id="eff6d-674">$filter=(PartitionKey eq 'Sales') and (RowKey ge 'empid_000123') and (RowKey lt 'empid_000124')&$select=RowKey,Manager Rating,Peer Rating,Comments</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="eff6d-675">Problemy i zagadnienia</span><span class="sxs-lookup"><span data-stu-id="eff6d-675">Issues and considerations</span></span>
<span data-ttu-id="eff6d-676">Należy wziąć pod uwagę następujące punkty podczas podejmowania decyzji o hello jak tooimplement tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-676">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="eff6d-677">Należy użyć odpowiedniego separatora, dzięki którym hello łatwe tooparse **RowKey** wartość: na przykład **000123_2012**.</span><span class="sxs-lookup"><span data-stu-id="eff6d-677">You should use a suitable separator character that makes it easy tooparse hello **RowKey** value: for example, **000123_2012**.</span></span>  
* <span data-ttu-id="eff6d-678">Są także zapisanie tej jednostki w hello sam partycji inne jednostki, które zawierają dane związane z hello samego pracownika, co oznacza, można użyć EGTs toomaintain wysoki poziom spójności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-678">You are also storing this entity in hello same partition as other entities that contain related data for hello same employee, which means you can use EGTs toomaintain strong consistency.</span></span>
* <span data-ttu-id="eff6d-679">Należy rozważyć, jak często będą zapytania hello toodetermine danych czy ten wzorzec jest odpowiednia.</span><span class="sxs-lookup"><span data-stu-id="eff6d-679">You should consider how frequently you will query hello data toodetermine whether this pattern is appropriate.</span></span>  <span data-ttu-id="eff6d-680">Na przykład jeśli będą uzyskiwać dostęp do rzadko hello przeglądanie danych i hello głównego danych o pracownikach często należy go przechowywać jako osobne jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-680">For example, if you will access hello review data infrequently and hello main employee data often you should keep them as separate entities.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="eff6d-681">Gdy toouse tego wzorca</span><span class="sxs-lookup"><span data-stu-id="eff6d-681">When toouse this pattern</span></span>
<span data-ttu-id="eff6d-682">Użyj tego wzorca należy toostore jedną lub więcej jednostek powiązanych z tej kwerendy można często.</span><span class="sxs-lookup"><span data-stu-id="eff6d-682">Use this pattern when you need toostore one or more related entities that you query frequently.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="eff6d-683">Wskazówki i wzorce pokrewne</span><span class="sxs-lookup"><span data-stu-id="eff6d-683">Related patterns and guidance</span></span>
<span data-ttu-id="eff6d-684">Witaj następujące wskazówki i wzorce mogą także mieć znaczenie w przypadku implementacja tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-684">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="eff6d-685">Grupowanie jednostki transakcji</span><span class="sxs-lookup"><span data-stu-id="eff6d-685">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="eff6d-686">Praca z typami jednostek heterogenicznych</span><span class="sxs-lookup"><span data-stu-id="eff6d-686">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)  
* [<span data-ttu-id="eff6d-687">Wzorzec ostatecznie spójne transakcji</span><span class="sxs-lookup"><span data-stu-id="eff6d-687">Eventually consistent transactions pattern</span></span>](#eventually-consistent-transactions-pattern)  

### <a name="log-tail-pattern"></a><span data-ttu-id="eff6d-688">Wzorzec końcowego fragmentu dziennika</span><span class="sxs-lookup"><span data-stu-id="eff6d-688">Log tail pattern</span></span>
<span data-ttu-id="eff6d-689">Pobrać hello  *n*  jednostek ostatnio dodany tooa partycji przy użyciu **RowKey** wartość sortujące odwrotnej daty i czasu kolejności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-689">Retrieve hello *n* entities most recently added tooa partition by using a **RowKey** value that sorts in reverse date and time order.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="eff6d-690">Kontekst, jak i problemu</span><span class="sxs-lookup"><span data-stu-id="eff6d-690">Context and problem</span></span>
<span data-ttu-id="eff6d-691">Typowym wymaganiem jest możliwe tooretrieve hello ostatnio utworzony jednostki, na przykład hello dziesięć najnowszych wydatków oświadczenia złożone przez pracownika.</span><span class="sxs-lookup"><span data-stu-id="eff6d-691">A common requirement is be able tooretrieve hello most recently created entities, for example hello ten most recent expense claims submitted by an employee.</span></span> <span data-ttu-id="eff6d-692">Pomocy technicznej wysyła zapytanie do tabeli **$top** najpierw zapytania hello tooreturn operacji  *n*  jednostek z zestawu: Brak Brak kwerendy równoważne operacji tooreturn hello ostatniego n jednostek w zestawie.</span><span class="sxs-lookup"><span data-stu-id="eff6d-692">Table queries support a **$top** query operation tooreturn hello first *n* entities from a set: there is no equivalent query operation tooreturn hello last n entities in a set.</span></span>  

#### <a name="solution"></a><span data-ttu-id="eff6d-693">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="eff6d-693">Solution</span></span>
<span data-ttu-id="eff6d-694">Przy użyciu jednostek hello magazynu **RowKey** czy naturalnie sortuje odwrotnie daty/godziny kolejności przy użyciu, dzięki czemu najnowszy wpis hello jest zawsze hello pierwszej tabeli hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-694">Store hello entities using a **RowKey** that naturally sorts in reverse date/time order by using so hello most recent entry is always hello first one in hello table.</span></span>  

<span data-ttu-id="eff6d-695">Na przykład tooretrieve stanie toobe hello 10 najnowszych oświadczeń wydatków przesłane przez pracownika, można użyć wartości osi w odwrotnej pochodną hello bieżącej daty/godziny.</span><span class="sxs-lookup"><span data-stu-id="eff6d-695">For example, toobe able tooretrieve hello ten most recent expense claims submitted by an employee, you can use a reverse tick value derived from hello current date/time.</span></span> <span data-ttu-id="eff6d-696">Witaj poniższy przykład kodu C# pokazuje jednokierunkowej toocreate odpowiednią wartość "odwrócony Takty" dla **RowKey** który sortuje od hello najnowszych toohello najstarsze:</span><span class="sxs-lookup"><span data-stu-id="eff6d-696">hello following C# code sample shows one way toocreate a suitable "inverted ticks" value for a **RowKey** that sorts from hello most recent toohello oldest:</span></span>  

`string invertedTicks = string.Format("{0:D19}", DateTime.MaxValue.Ticks - DateTime.UtcNow.Ticks);`  

<span data-ttu-id="eff6d-697">Możesz odzyskać toohello wartość daty i godziny przy użyciu hello następującego kodu:</span><span class="sxs-lookup"><span data-stu-id="eff6d-697">You can get back toohello date time value using hello following code:</span></span>  

`DateTime dt = new DateTime(DateTime.MaxValue.Ticks - Int64.Parse(invertedTicks));`  

<span data-ttu-id="eff6d-698">Zapytanie tabeli Hello wygląda następująco:</span><span class="sxs-lookup"><span data-stu-id="eff6d-698">hello table query looks like this:</span></span>  

`https://myaccount.table.core.windows.net/EmployeeExpense(PartitionKey='empid')?$top=10`  

#### <a name="issues-and-considerations"></a><span data-ttu-id="eff6d-699">Problemy i zagadnienia</span><span class="sxs-lookup"><span data-stu-id="eff6d-699">Issues and considerations</span></span>
<span data-ttu-id="eff6d-700">Należy wziąć pod uwagę następujące punkty podczas podejmowania decyzji o hello jak tooimplement tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-700">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="eff6d-701">Należy konsoli wartości osi w odwrotnej hello zer wartość ciągu hello tooensure Sortuje zgodnie z oczekiwaniami.</span><span class="sxs-lookup"><span data-stu-id="eff6d-701">You must pad hello reverse tick value with leading zeroes tooensure hello string value sorts as expected.</span></span>  
* <span data-ttu-id="eff6d-702">Należy pamiętać o wartości docelowe skalowalności hello na poziomie hello partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-702">You must be aware of hello scalability targets at hello level of a partition.</span></span> <span data-ttu-id="eff6d-703">Uważaj, aby nie tworzyć partycji punktu aktywnego.</span><span class="sxs-lookup"><span data-stu-id="eff6d-703">Be careful not create hot spot partitions.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="eff6d-704">Gdy toouse tego wzorca</span><span class="sxs-lookup"><span data-stu-id="eff6d-704">When toouse this pattern</span></span>
<span data-ttu-id="eff6d-705">Użyj wzorca to, gdy będziesz potrzebować tooaccess jednostek w kolejności odwrotnej daty/godziny lub tooaccess hello ostatnio dodane jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-705">Use this pattern when you need tooaccess entities in reverse date/time order or when you need tooaccess hello most recently added entities.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="eff6d-706">Wskazówki i wzorce pokrewne</span><span class="sxs-lookup"><span data-stu-id="eff6d-706">Related patterns and guidance</span></span>
<span data-ttu-id="eff6d-707">Witaj następujące wskazówki i wzorce mogą także mieć znaczenie w przypadku implementacja tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-707">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="eff6d-708">Dołączenie wartości / append przed wzorca</span><span class="sxs-lookup"><span data-stu-id="eff6d-708">Prepend / append anti-pattern</span></span>](#prepend-append-anti-pattern)  
* [<span data-ttu-id="eff6d-709">Pobieranie jednostki</span><span class="sxs-lookup"><span data-stu-id="eff6d-709">Retrieving entities</span></span>](#retrieving-entities)  

### <a name="high-volume-delete-pattern"></a><span data-ttu-id="eff6d-710">Wzorzec delete dużych obciążeń</span><span class="sxs-lookup"><span data-stu-id="eff6d-710">High volume delete pattern</span></span>
<span data-ttu-id="eff6d-711">Włącz usuwanie hello dużą liczbę jednostek przez zapisanie wszystkich jednostek hello do usunięcia jednoczesnych w ich własnych osobnej tabeli; Możesz usunąć jednostek hello przez usunięcie hello tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-711">Enable hello deletion of a high volume of entities by storing all hello entities for simultaneous deletion in their own separate table; you delete hello entities by deleting hello table.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="eff6d-712">Kontekst, jak i problemu</span><span class="sxs-lookup"><span data-stu-id="eff6d-712">Context and problem</span></span>
<span data-ttu-id="eff6d-713">Wiele aplikacji Usuń stare dane, które nie będzie już potrzebował aplikacji klienckiej dostępne tooa toobe lub tej aplikacji hello ma zarchiwizowane tooanother nośniku.</span><span class="sxs-lookup"><span data-stu-id="eff6d-713">Many applications delete old data which no longer needs toobe available tooa client application, or that hello application has archived tooanother storage medium.</span></span> <span data-ttu-id="eff6d-714">Zwykle określenie tych danych w dniu: na przykład masz rekordu toodelete wymaganie wszystkich żądań logowania, które są starsze niż 60 dni.</span><span class="sxs-lookup"><span data-stu-id="eff6d-714">You typically identify such data by a date: for example, you have a requirement toodelete records of all login requests that are more than 60 days old.</span></span>  

<span data-ttu-id="eff6d-715">Jeden projekt możliwe jest toouse hello Data i godzina żądania logowania hello hello **RowKey**:</span><span class="sxs-lookup"><span data-stu-id="eff6d-715">One possible design is toouse hello date and time of hello login request in hello **RowKey**:</span></span>  

![][21]

<span data-ttu-id="eff6d-716">Takie podejście pozwala uniknąć hotspotami partycji, ponieważ aplikacja hello można Wstawianie i usuwanie jednostek logowania dla każdego użytkownika w oddzielnej partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-716">This approach avoids partition hotspots because hello application can insert and delete login entities for each user in a separate partition.</span></span> <span data-ttu-id="eff6d-717">Jednak takie podejście może być kosztowne i czasochłonne, jeśli masz dużą liczbę jednostek, ponieważ najpierw należy tooperform tabeli skanowanie w kolejności tooidentify wszystkie toodelete jednostek hello oraz musisz usunąć każdej jednostki stary.</span><span class="sxs-lookup"><span data-stu-id="eff6d-717">However, this approach may be costly and time consuming if you have a large number of entities because first you need tooperform a table scan in order tooidentify all hello entities toodelete, and then you must delete each old entity.</span></span> <span data-ttu-id="eff6d-718">Należy pamiętać, że można zmniejszyć hello liczby rund toohello serwera wymagane toodelete hello starego jednostek przez przetwarzanie wsadowe wiele żądań delete służących do EGTs.</span><span class="sxs-lookup"><span data-stu-id="eff6d-718">Note that you can reduce hello number of round trips toohello server required toodelete hello old entities by batching multiple delete requests into EGTs.</span></span>  

#### <a name="solution"></a><span data-ttu-id="eff6d-719">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="eff6d-719">Solution</span></span>
<span data-ttu-id="eff6d-720">Użyj osobnej tabeli dla każdego dnia prób logowania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-720">Use a separate table for each day of login attempts.</span></span> <span data-ttu-id="eff6d-721">Hello jednostki projektu powyżej hotspotami tooavoid można używać podczas wstawiania jednostek i usuwania starych jednostek jest teraz po prostu kwestia usuwanie codziennie w jednej tabeli (operację jednego magazynu) zamiast znajdowania i usuwania, a setki tysięcy logowania poszczególnych jednostek każdego dnia.</span><span class="sxs-lookup"><span data-stu-id="eff6d-721">You can use hello entity design above tooavoid hotspots when you are inserting entities, and deleting old entities is now simply a question of deleting one table every day (a single storage operation) instead of finding and deleting hundreds and thousands of individual login entities every day.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="eff6d-722">Problemy i zagadnienia</span><span class="sxs-lookup"><span data-stu-id="eff6d-722">Issues and considerations</span></span>
<span data-ttu-id="eff6d-723">Należy wziąć pod uwagę następujące punkty podczas podejmowania decyzji o hello jak tooimplement tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-723">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="eff6d-724">Projekt obsługuje inne sposoby aplikacja będzie korzystać z hello dane, takie jak wyszukiwanie konkretnych obiektów połączeń przy użyciu innych danych lub generowania agregują informacje?</span><span class="sxs-lookup"><span data-stu-id="eff6d-724">Does your design support other ways your application will use hello data such as looking up specific entities, linking with other data, or generating aggregate information?</span></span>  
* <span data-ttu-id="eff6d-725">Projektu uniknąć punkty aktywne wstawiając nowych jednostek</span><span class="sxs-lookup"><span data-stu-id="eff6d-725">Does your design avoid hot spots when you are inserting new entities?</span></span>  
* <span data-ttu-id="eff6d-726">Oczekiwane opóźnienia, jeśli chcesz, aby tooreuse hello takie same nazwy tabeli po jej usunięciu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-726">Expect a delay if you want tooreuse hello same table name after deleting it.</span></span> <span data-ttu-id="eff6d-727">Konieczne jest lepsze tooalways Użyj unikatowej tabeli nazw.</span><span class="sxs-lookup"><span data-stu-id="eff6d-727">It's better tooalways use unique table names.</span></span>  
* <span data-ttu-id="eff6d-728">Oczekiwać, że niektóre ograniczenia przepustowości przy pierwszym użyciu nową tabelę podczas hello usługi tabel uzyskuje informacje o hello wzorce dostępu i rozpowszechnia hello partycji w węzłach.</span><span class="sxs-lookup"><span data-stu-id="eff6d-728">Expect some throttling when you first use a new table while hello Table service learns hello access patterns and distributes hello partitions across nodes.</span></span> <span data-ttu-id="eff6d-729">Należy rozważyć, jak często należy toocreate nowe tabele.</span><span class="sxs-lookup"><span data-stu-id="eff6d-729">You should consider how frequently you need toocreate new tables.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="eff6d-730">Gdy toouse tego wzorca</span><span class="sxs-lookup"><span data-stu-id="eff6d-730">When toouse this pattern</span></span>
<span data-ttu-id="eff6d-731">Użyj tego wzorca, jeśli masz dużą liczbę jednostek, które należy usunąć na powitania tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="eff6d-731">Use this pattern when you have a high volume of entities that you must delete at hello same time.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="eff6d-732">Wskazówki i wzorce pokrewne</span><span class="sxs-lookup"><span data-stu-id="eff6d-732">Related patterns and guidance</span></span>
<span data-ttu-id="eff6d-733">Witaj następujące wskazówki i wzorce mogą także mieć znaczenie w przypadku implementacja tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-733">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="eff6d-734">Grupowanie jednostki transakcji</span><span class="sxs-lookup"><span data-stu-id="eff6d-734">Entity Group Transactions</span></span>](#entity-group-transactions)
* [<span data-ttu-id="eff6d-735">Modyfikowanie jednostek</span><span class="sxs-lookup"><span data-stu-id="eff6d-735">Modifying entities</span></span>](#modifying-entities)  

### <a name="data-series-pattern"></a><span data-ttu-id="eff6d-736">Wzorzec serii danych</span><span class="sxs-lookup"><span data-stu-id="eff6d-736">Data series pattern</span></span>
<span data-ttu-id="eff6d-737">Seria pełnych danych magazynu w pojedynczej jednostki toominimize hello liczbę żądań, które należy wykonać.</span><span class="sxs-lookup"><span data-stu-id="eff6d-737">Store complete data series in a single entity toominimize hello number of requests you make.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="eff6d-738">Kontekst, jak i problemu</span><span class="sxs-lookup"><span data-stu-id="eff6d-738">Context and problem</span></span>
<span data-ttu-id="eff6d-739">Typowy scenariusz dotyczy toostore aplikacji serii danych, że zwykle wymaga ona tooretrieve jednocześnie.</span><span class="sxs-lookup"><span data-stu-id="eff6d-739">A common scenario is for an application toostore a series of data that it typically needs tooretrieve all at once.</span></span> <span data-ttu-id="eff6d-740">Na przykład aplikacji może rejestrować liczbę wiadomości Błyskawiczne każdy pracownik wysyła co godzinę, a następnie użyj tego tooplot informacje, ile wiadomości wysyłane poszczególnych użytkowników za pośrednictwem hello poprzednich 24 godzin.</span><span class="sxs-lookup"><span data-stu-id="eff6d-740">For example, your application might record how many IM messages each employee sends every hour, and then use this information tooplot how many messages each user sent over hello preceding 24 hours.</span></span> <span data-ttu-id="eff6d-741">Jeden projekt może być toostore 24 jednostki dla każdej pracowników:</span><span class="sxs-lookup"><span data-stu-id="eff6d-741">One design might be toostore 24 entities for each employee:</span></span>  

![][22]

<span data-ttu-id="eff6d-742">Ten projekt można łatwo zlokalizować i aktualizować hello tooupdate jednostki dla każdego pracownika zawsze, gdy aplikacja hello musi wartości liczby wiadomość hello tooupdate.</span><span class="sxs-lookup"><span data-stu-id="eff6d-742">With this design, you can easily locate and update hello entity tooupdate for each employee whenever hello application needs tooupdate hello message count value.</span></span> <span data-ttu-id="eff6d-743">Jednak tooretrieve hello tooplot informacji wykres aktywności hello hello poprzednie 24 godziny, należy pobrać 24 jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-743">However, tooretrieve hello information tooplot a chart of hello activity for hello preceding 24 hours, you must retrieve 24 entities.</span></span>  

#### <a name="solution"></a><span data-ttu-id="eff6d-744">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="eff6d-744">Solution</span></span>
<span data-ttu-id="eff6d-745">Użyj następującego projektu wraz z liczbą wiadomość hello toostore oddzielne właściwości dla każdej godziny hello:</span><span class="sxs-lookup"><span data-stu-id="eff6d-745">Use hello following design with a separate property toostore hello message count for each hour:</span></span>  

![][23]

<span data-ttu-id="eff6d-746">Ten projekt można użyć liczbą wiadomość hello tooupdate operacji scalania dla pracowników na określone godziny.</span><span class="sxs-lookup"><span data-stu-id="eff6d-746">With this design, you can use a merge operation tooupdate hello message count for an employee for a specific hour.</span></span> <span data-ttu-id="eff6d-747">Teraz można pobrać wszystkich informacji hello potrzebne tooplot hello wykresu przy użyciu żądania dla pojedynczej jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-747">Now, you can retrieve all hello information you need tooplot hello chart using a request for a single entity.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="eff6d-748">Problemy i zagadnienia</span><span class="sxs-lookup"><span data-stu-id="eff6d-748">Issues and considerations</span></span>
<span data-ttu-id="eff6d-749">Należy wziąć pod uwagę następujące punkty podczas podejmowania decyzji o hello jak tooimplement tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-749">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="eff6d-750">Jeśli pełnych danych serii nie pasuje do pojedynczej jednostki (jednostka może mieć właściwości too252), należy użyć magazynu danych alternatywnych, takich jak obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="eff6d-750">If your complete data series does not fit into a single entity (an entity can have up too252 properties), use an alternative data store such as a blob.</span></span>  
* <span data-ttu-id="eff6d-751">Jeśli wielu klientów jednocześnie aktualizowania jednostki, konieczne będzie toouse hello **ETag** tooimplement optymistycznej współbieżności.</span><span class="sxs-lookup"><span data-stu-id="eff6d-751">If you have multiple clients updating an entity simultaneously, you will need toouse hello **ETag** tooimplement optimistic concurrency.</span></span> <span data-ttu-id="eff6d-752">Jeśli wielu klientów, może wystąpić wysokiej rywalizacji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-752">If you have many clients, you may experience high contention.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="eff6d-753">Gdy toouse tego wzorca</span><span class="sxs-lookup"><span data-stu-id="eff6d-753">When toouse this pattern</span></span>
<span data-ttu-id="eff6d-754">Użyj tego wzorca należy tooupdate i pobrać serii danych skojarzonych z pojedynczą jednostkę.</span><span class="sxs-lookup"><span data-stu-id="eff6d-754">Use this pattern when you need tooupdate and retrieve a data series associated with an individual entity.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="eff6d-755">Wskazówki i wzorce pokrewne</span><span class="sxs-lookup"><span data-stu-id="eff6d-755">Related patterns and guidance</span></span>
<span data-ttu-id="eff6d-756">Witaj następujące wskazówki i wzorce mogą także mieć znaczenie w przypadku implementacja tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-756">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="eff6d-757">Wzorzec dużych jednostek</span><span class="sxs-lookup"><span data-stu-id="eff6d-757">Large entities pattern</span></span>](#large-entities-pattern)  
* [<span data-ttu-id="eff6d-758">Scalanie lub Zastąp</span><span class="sxs-lookup"><span data-stu-id="eff6d-758">Merge or replace</span></span>](#merge-or-replace)  
* <span data-ttu-id="eff6d-759">[Wzorzec transakcji po pewnym czasie spójne](#eventually-consistent-transactions-pattern) (jeśli są przechowywane hello serii danych w obiekcie blob)</span><span class="sxs-lookup"><span data-stu-id="eff6d-759">[Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) (if you are storing hello data series in a blob)</span></span>  

### <a name="wide-entities-pattern"></a><span data-ttu-id="eff6d-760">Wzorzec szeroki jednostek</span><span class="sxs-lookup"><span data-stu-id="eff6d-760">Wide entities pattern</span></span>
<span data-ttu-id="eff6d-761">Wiele jednostek logicznych toostore jednostek fizycznych za pomocą więcej niż 252 właściwości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-761">Use multiple physical entities toostore logical entities with more than 252 properties.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="eff6d-762">Kontekst, jak i problemu</span><span class="sxs-lookup"><span data-stu-id="eff6d-762">Context and problem</span></span>
<span data-ttu-id="eff6d-763">Pojedynczą jednostkę może mieć maksymalnie 252 właściwości (z wyjątkiem właściwości systemu obowiązkowe hello) i nie można przechowywać więcej niż 1 MB danych, w sumie.</span><span class="sxs-lookup"><span data-stu-id="eff6d-763">An individual entity can have no more than 252 properties (excluding hello mandatory system properties) and cannot store more than 1 MB of data in total.</span></span> <span data-ttu-id="eff6d-764">W relacyjnej bazie danych zwykle jak round żadnych limitów dotyczących hello rozmiar wiersza przez dodanie nowej tabeli i wymuszania między nimi relacji 1-do-1.</span><span class="sxs-lookup"><span data-stu-id="eff6d-764">In a relational database, you would typically get round any limits on hello size of a row by adding a new table and enforcing a 1-to-1 relationship between them.</span></span>  

#### <a name="solution"></a><span data-ttu-id="eff6d-765">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="eff6d-765">Solution</span></span>
<span data-ttu-id="eff6d-766">Usługa tabel hello można przechowywać wiele jednostek toorepresent obiekt pojedynczego dużych firm z więcej niż 252 właściwości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-766">Using hello Table service, you can store multiple entities toorepresent a single large business object with more than 252 properties.</span></span> <span data-ttu-id="eff6d-767">Na przykład jeśli chcesz toostore liczbę hello liczbę wiadomości Błyskawicznych wysyłane przez każdy pracownik dla hello ostatnich 365 dni, można użyć powitania po projekt, który używa dwie jednostki z różnych schematów:</span><span class="sxs-lookup"><span data-stu-id="eff6d-767">For example, if you want toostore a count of hello number of IM messages sent by each employee for hello last 365 days, you could use hello following design that uses two entities with different schemas:</span></span>  

![][24]

<span data-ttu-id="eff6d-768">Jeśli potrzebujesz toomake zmiany, która wymaga zaktualizowania zarówno tookeep jednostek, ich synchronizowane ze sobą służy EGT.</span><span class="sxs-lookup"><span data-stu-id="eff6d-768">If you need toomake a change that requires updating both entities tookeep them synchronized with each other you can use an EGT.</span></span> <span data-ttu-id="eff6d-769">W przeciwnym razie można liczbę operacji wiadomość hello tooupdate pojedynczego scalania dla określonego dnia.</span><span class="sxs-lookup"><span data-stu-id="eff6d-769">Otherwise, you can use a single merge operation tooupdate hello message count for a specific day.</span></span> <span data-ttu-id="eff6d-770">wszystkie hello danych dla poszczególnych pracowników, należy pobrać obie te jednostki, co można zrobić za pomocą dwóch wydajne żądania, które używają obu tooretrieve **PartitionKey** i **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-770">tooretrieve all hello data for an individual employee you must retrieve both entities, which you can do with two efficient requests that use both a **PartitionKey** and a **RowKey** value.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="eff6d-771">Problemy i zagadnienia</span><span class="sxs-lookup"><span data-stu-id="eff6d-771">Issues and considerations</span></span>
<span data-ttu-id="eff6d-772">Należy wziąć pod uwagę następujące punkty podczas podejmowania decyzji o hello jak tooimplement tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-772">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="eff6d-773">Pobieranie całą jednostkę logiczną obejmuje co najmniej dwóch transakcji magazynowych: jeden tooretrieve Jednostka fizyczna.</span><span class="sxs-lookup"><span data-stu-id="eff6d-773">Retrieving a complete logical entity involves at least two storage transactions: one tooretrieve each physical entity.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="eff6d-774">Gdy toouse tego wzorca</span><span class="sxs-lookup"><span data-stu-id="eff6d-774">When toouse this pattern</span></span>
<span data-ttu-id="eff6d-775">Usługa tabel którego rozmiaru lub liczby właściwości przekracza limity hello pojedynczą jednostkę w hello jednostek toostore muszą używać tego wzorca.</span><span class="sxs-lookup"><span data-stu-id="eff6d-775">Use this pattern when  need toostore entities whose size or number of properties exceeds hello limits for an individual entity in hello Table service.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="eff6d-776">Wskazówki i wzorce pokrewne</span><span class="sxs-lookup"><span data-stu-id="eff6d-776">Related patterns and guidance</span></span>
<span data-ttu-id="eff6d-777">Witaj następujące wskazówki i wzorce mogą także mieć znaczenie w przypadku implementacja tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-777">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="eff6d-778">Grupowanie jednostki transakcji</span><span class="sxs-lookup"><span data-stu-id="eff6d-778">Entity Group Transactions</span></span>](#entity-group-transactions)
* [<span data-ttu-id="eff6d-779">Scalanie lub Zastąp</span><span class="sxs-lookup"><span data-stu-id="eff6d-779">Merge or replace</span></span>](#merge-or-replace)

### <a name="large-entities-pattern"></a><span data-ttu-id="eff6d-780">Wzorzec dużych jednostek</span><span class="sxs-lookup"><span data-stu-id="eff6d-780">Large entities pattern</span></span>
<span data-ttu-id="eff6d-781">Użyj wartości właściwości dużych toostore magazynu obiektów blob.</span><span class="sxs-lookup"><span data-stu-id="eff6d-781">Use blob storage toostore large property values.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="eff6d-782">Kontekst, jak i problemu</span><span class="sxs-lookup"><span data-stu-id="eff6d-782">Context and problem</span></span>
<span data-ttu-id="eff6d-783">Poszczególne jednostki nie można przechowywać więcej niż 1 MB danych w całości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-783">An individual entity cannot store more than 1 MB of data in total.</span></span> <span data-ttu-id="eff6d-784">Jeśli jeden lub kilka właściwości przechowywane wartości powodujące hello całkowity rozmiar tooexceed Twojego jednostki, ta wartość, nie można przechowywać hello całej jednostki w hello usługi tabel.</span><span class="sxs-lookup"><span data-stu-id="eff6d-784">If one or several of your properties store values that cause hello total size of your entity tooexceed this value, you cannot store hello entire entity in hello Table service.</span></span>  

#### <a name="solution"></a><span data-ttu-id="eff6d-785">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="eff6d-785">Solution</span></span>
<span data-ttu-id="eff6d-786">Jeśli jednostki przekracza 1 MB rozmiar, ponieważ co najmniej jednej właściwości zawierają dużą ilość danych, można przechowywać dane w hello usługa Blob i następnie zapisać hello adres obiektu blob hello we właściwości w obiekcie hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-786">If your entity exceeds 1 MB in size because one or more properties contain a large amount of data, you can store data in hello Blob service and then store hello address of hello blob in a property in hello entity.</span></span> <span data-ttu-id="eff6d-787">Na przykład można przechowywać hello zdjęcie pracownika w magazynie obiektów blob i przechowywać zdjęcie toohello łącze w hello **fotografii** właściwości jednostki pracowników:</span><span class="sxs-lookup"><span data-stu-id="eff6d-787">For example, you can store hello photo of an employee in blob storage and store a link toohello photo in hello **Photo** property of your employee entity:</span></span>  

![][25]

#### <a name="issues-and-considerations"></a><span data-ttu-id="eff6d-788">Problemy i zagadnienia</span><span class="sxs-lookup"><span data-stu-id="eff6d-788">Issues and considerations</span></span>
<span data-ttu-id="eff6d-789">Należy wziąć pod uwagę następujące punkty podczas podejmowania decyzji o hello jak tooimplement tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-789">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="eff6d-790">spójność ostateczna toomaintain między hello jednostki w hello usługi tabel i danych hello hello usługa Blob, użyj hello [wzorzec transakcji po pewnym czasie spójne](#eventually-consistent-transactions-pattern) toomaintain jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-790">toomaintain eventual consistency between hello entity in hello Table service and hello data in hello Blob service, use hello [Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) toomaintain your entities.</span></span>
* <span data-ttu-id="eff6d-791">Pobieranie całą jednostkę obejmuje co najmniej dwóch transakcji magazynowych: jedną jednostkę hello tooretrieve i hello tooretrieve jednego obiektu blob danych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-791">Retrieving a complete entity involves at least two storage transactions: one tooretrieve hello entity and one tooretrieve hello blob data.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="eff6d-792">Gdy toouse tego wzorca</span><span class="sxs-lookup"><span data-stu-id="eff6d-792">When toouse this pattern</span></span>
<span data-ttu-id="eff6d-793">Ten wzorzec należy używać wtedy, gdy konieczne toostore jednostek, którego rozmiar przekracza limity hello pojedynczą jednostkę w usłudze tabel hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-793">Use this pattern when you need toostore entities whose size exceeds hello limits for an individual entity in hello Table service.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="eff6d-794">Wskazówki i wzorce pokrewne</span><span class="sxs-lookup"><span data-stu-id="eff6d-794">Related patterns and guidance</span></span>
<span data-ttu-id="eff6d-795">Witaj następujące wskazówki i wzorce mogą także mieć znaczenie w przypadku implementacja tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-795">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="eff6d-796">Wzorzec ostatecznie spójne transakcji</span><span class="sxs-lookup"><span data-stu-id="eff6d-796">Eventually consistent transactions pattern</span></span>](#eventually-consistent-transactions-pattern)  
* [<span data-ttu-id="eff6d-797">Wzorzec szeroki jednostek</span><span class="sxs-lookup"><span data-stu-id="eff6d-797">Wide entities pattern</span></span>](#wide-entities-pattern)

<a name="prepend-append-anti-pattern"></a>

### <a name="prependappend-anti-pattern"></a><span data-ttu-id="eff6d-798">Dołączenie wartości Dołącz przed wzorca</span><span class="sxs-lookup"><span data-stu-id="eff6d-798">Prepend/append anti-pattern</span></span>
<span data-ttu-id="eff6d-799">Zwiększenie skalowalności, jeśli masz dużą liczbę operacji wstawienia przez rozłożenie wstawia hello wiele partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-799">Increase scalability when you have a high volume of inserts by spreading hello inserts across multiple partitions.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="eff6d-800">Kontekst, jak i problemu</span><span class="sxs-lookup"><span data-stu-id="eff6d-800">Context and problem</span></span>
<span data-ttu-id="eff6d-801">Dołączanie lub dołączanie jednostek tooyour przechowywane jednostek zwykle powoduje dodanie nowych jednostek toohello najpierw aplikacji hello lub ostatni partycji sekwencji partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-801">Prepending or appending entities tooyour stored entities typically results in hello application adding new entities toohello first or last partition of a sequence of partitions.</span></span> <span data-ttu-id="eff6d-802">W takim przypadku wszystkie wstawia hello w danym momencie są odbywa się w hello wstawia tej samej partycji, tworzenie punkt aktywny, która uniemożliwia hello tabeli usługi równoważenia obciążenia w wielu węzłach i może doprowadzić do Twojej aplikacji toohit hello skalowalności obiekty docelowe dla partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-802">In this case, all of hello inserts at any given time are taking place in hello same partition, creating a hotspot that prevents hello table service from load balancing inserts across multiple nodes, and possibly causing your application toohit hello scalability targets for partition.</span></span> <span data-ttu-id="eff6d-803">Na przykład jeśli masz aplikację, która dzienniki sieci i zasobów dostępu przez pracowników, może spowodować struktury jednostek, jak pokazano poniżej, a następnie hello staje się punkt aktywny, jeśli wielkość hello transakcji osiągnie hello skalowalność docelową dla partycji bieżącej godziny poszczególnych partycji:</span><span class="sxs-lookup"><span data-stu-id="eff6d-803">For example, if you have an application that logs network and resource access by employees, then an entity structure as shown below could result in hello current hour's partition becoming a hotspot if hello volume of transactions reaches hello scalability target for an individual partition:</span></span>  

![][26]

#### <a name="solution"></a><span data-ttu-id="eff6d-804">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="eff6d-804">Solution</span></span>
<span data-ttu-id="eff6d-805">Witaj następującej struktury jednostek alternatywnych pozwala uniknąć punkt aktywny na określonej partycji jako zdarzenia Dzienniki aplikacji hello:</span><span class="sxs-lookup"><span data-stu-id="eff6d-805">hello following alternative entity structure avoids a hotspot on any particular partition as hello application logs events:</span></span>  

![][27]

<span data-ttu-id="eff6d-806">Zwróć uwagę, z tym przykładem sposobu zarówno hello **PartitionKey** i **RowKey** są klucze złożone.</span><span class="sxs-lookup"><span data-stu-id="eff6d-806">Notice with this example how both hello **PartitionKey** and **RowKey** are compound keys.</span></span> <span data-ttu-id="eff6d-807">Witaj **PartitionKey** używa hello działu, jak i rejestrowania hello toodistribute identyfikator pracownika na wiele partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-807">hello **PartitionKey** uses both hello department and employee id toodistribute hello logging across multiple partitions.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="eff6d-808">Problemy i zagadnienia</span><span class="sxs-lookup"><span data-stu-id="eff6d-808">Issues and considerations</span></span>
<span data-ttu-id="eff6d-809">Należy wziąć pod uwagę następujące punkty podczas podejmowania decyzji o hello jak tooimplement tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-809">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="eff6d-810">Wykonuje hello alternatywnych klucza strukturę, która pozwala uniknąć tworzenia dynamicznej partycji w operacji wstawienia wydajnie kwerend hello pomocy technicznej aplikacji klienckiej sprawia, że?</span><span class="sxs-lookup"><span data-stu-id="eff6d-810">Does hello alternative key structure that avoids creating hot partitions on inserts efficiently support hello queries your client application makes?</span></span>  
* <span data-ttu-id="eff6d-811">Przewidywany woluminu transakcji oznacza są prawdopodobnie tooreach hello wartości docelowe skalowalności dla poszczególnych partycji i jest ograniczany przez usługę magazynu hello?</span><span class="sxs-lookup"><span data-stu-id="eff6d-811">Does your anticipated volume of transactions mean that you are likely tooreach hello scalability targets for an individual partition and be throttled by hello storage service?</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="eff6d-812">Gdy toouse tego wzorca</span><span class="sxs-lookup"><span data-stu-id="eff6d-812">When toouse this pattern</span></span>
<span data-ttu-id="eff6d-813">Unikaj hello dołączy Dołącz wzorzec przed gdy woluminu transakcji jest prawdopodobnie tooresult w ograniczania przez usługę magazynu hello, gdy uzyskujesz dostęp do partycji gorących.</span><span class="sxs-lookup"><span data-stu-id="eff6d-813">Avoid hello prepend/append anti-pattern when your volume of transactions is likely tooresult in throttling by hello storage service when you access a hot partition.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="eff6d-814">Wskazówki i wzorce pokrewne</span><span class="sxs-lookup"><span data-stu-id="eff6d-814">Related patterns and guidance</span></span>
<span data-ttu-id="eff6d-815">Witaj następujące wskazówki i wzorce mogą także mieć znaczenie w przypadku implementacja tego wzorca:</span><span class="sxs-lookup"><span data-stu-id="eff6d-815">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="eff6d-816">Wzorca złożonego klucza</span><span class="sxs-lookup"><span data-stu-id="eff6d-816">Compound key pattern</span></span>](#compound-key-pattern)  
* [<span data-ttu-id="eff6d-817">Wzorzec końcowego fragmentu dziennika</span><span class="sxs-lookup"><span data-stu-id="eff6d-817">Log tail pattern</span></span>](#log-tail-pattern)  
* [<span data-ttu-id="eff6d-818">Modyfikowanie jednostek</span><span class="sxs-lookup"><span data-stu-id="eff6d-818">Modifying entities</span></span>](#modifying-entities)  

### <a name="log-data-anti-pattern"></a><span data-ttu-id="eff6d-819">Wzorzec przed dane dziennika</span><span class="sxs-lookup"><span data-stu-id="eff6d-819">Log data anti-pattern</span></span>
<span data-ttu-id="eff6d-820">Zwykle należy używać hello usługa Blob zamiast hello danych dziennika toostore usługi tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-820">Typically, you should use hello Blob service instead of hello Table service toostore log data.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="eff6d-821">Kontekst, jak i problemu</span><span class="sxs-lookup"><span data-stu-id="eff6d-821">Context and problem</span></span>
<span data-ttu-id="eff6d-822">Typowy przypadek użycia dla danych dziennika jest tooretrieve wybrane wpisy dziennika dla zakresu określonej daty/godziny: na przykład chcesz toofind hello wszystkie komunikaty o błędach i krytyczne zarejestrowane przez aplikację między 15:04 i 15:06 w określonym dniu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-822">A common use case for log data is tooretrieve a selection of log entries for a specific date/time range: for example, you want toofind all hello error and critical messages that your application logged between 15:04 and 15:06 on a specific date.</span></span> <span data-ttu-id="eff6d-823">Nie ma toouse hello Data i godzina hello dziennika komunikatów toodetermine hello partycji zapisywania dziennika jednostki do: czy wyniki w dynamicznej partycji, ponieważ w danym momencie, muszą współdzielić wszystkich jednostek dziennika hello hello sam **PartitionKey** wartość (zobacz sekcja hello [Prepend/dołączanie wzorzec przed](#prepend-append-anti-pattern)).</span><span class="sxs-lookup"><span data-stu-id="eff6d-823">You do not want toouse hello date and time of hello log message toodetermine hello partition you save log entities to: that results in a hot partition because at any given time, all hello log entities will share hello same **PartitionKey** value (see hello section [Prepend/append anti-pattern](#prepend-append-anti-pattern)).</span></span> <span data-ttu-id="eff6d-824">Na przykład hello następującego schematu jednostki dla komunikatu dziennika wyniki gorących partycji, ponieważ aplikacja hello zapisuje komunikaty dziennika toohello partycji dla hello bieżącą datę i godzinę:</span><span class="sxs-lookup"><span data-stu-id="eff6d-824">For example, hello following entity schema for a log message results in a hot partition because hello application writes all log messages toohello partition for hello current date and hour:</span></span>  

![][28]

<span data-ttu-id="eff6d-825">W tym przykładzie hello **RowKey** hello Data i godzina tooensure wiadomości dziennika hello komunikaty dziennika są przechowywane, sortowane w kolejności daty/godziny i zawierają identyfikator komunikatu w przypadku, gdy wiele komunikatów dziennika udostępnianie hello same daty i godziny.</span><span class="sxs-lookup"><span data-stu-id="eff6d-825">In this example, hello **RowKey** includes hello date and time of hello log message tooensure that log messages are stored sorted in date/time order, and includes a message id in case multiple log messages share hello same date and time.</span></span>  

<span data-ttu-id="eff6d-826">Innym rozwiązaniem jest toouse **PartitionKey** która sprawia, że aplikacja hello zapisuje komunikaty w zakresie partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-826">Another approach is toouse a **PartitionKey** that ensures that hello application writes messages across a range of partitions.</span></span> <span data-ttu-id="eff6d-827">Na przykład jeśli hello źródło komunikatu dziennika hello udostępnia toodistribute sposób wiadomości między wiele partycji, można użyć powitania po schemat podmiotu:</span><span class="sxs-lookup"><span data-stu-id="eff6d-827">For example, if hello source of hello log message provides a way toodistribute messages across many partitions, you could use hello following entity schema:</span></span>  

![][29]

<span data-ttu-id="eff6d-828">Jednak hello problem z tym schemacie jest tym tooretrieve hello wszystkie komunikaty dziennika dla określonego okresu musi przeszukać każdej partycji w tabeli hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-828">However, hello problem with this schema is that tooretrieve all hello log messages for a specific time span you must search every partition in hello table.</span></span>

#### <a name="solution"></a><span data-ttu-id="eff6d-829">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="eff6d-829">Solution</span></span>
<span data-ttu-id="eff6d-830">Hello poprzedniej sekcji wyróżnione hello problem w trakcie toouse hello wpisów dziennika toostore usługi tabeli i sugerowane dwa niezadowalające, projektów usług.</span><span class="sxs-lookup"><span data-stu-id="eff6d-830">hello previous section highlighted hello problem of trying toouse hello Table service toostore log entries and suggested two, unsatisfactory, designs.</span></span> <span data-ttu-id="eff6d-831">Jedno rozwiązanie, które doprowadziły tooa gorących partycji o hello ryzyko niską wydajnością, zapisywanie wiadomości dziennika. Hello innego rozwiązania dało w wyniku zapytania niską wydajność ze względu na powitania wymaganie tooscan każdej partycji w wiadomości powitania tabeli tooretrieve dziennika dla zakresu określonego czasu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-831">One solution led tooa hot partition with hello risk of poor performance writing log messages; hello other solution resulted in poor query performance because of hello requirement tooscan every partition in hello table tooretrieve log messages for a specific time span.</span></span> <span data-ttu-id="eff6d-832">Magazyn obiektów blob oferuje lepszym rozwiązaniem dla tego typu scenariuszy i jak Azure analityka magazynu magazynów hello dziennika dane są zbierane.</span><span class="sxs-lookup"><span data-stu-id="eff6d-832">Blob storage offers a better solution for this type of scenario and this is how Azure Storage Analytics stores hello log data it collects.</span></span>  

<span data-ttu-id="eff6d-833">W tej sekcji opisano, jak analityka magazynu przechowuje dane dziennika w magazynie obiektów blob jako ilustracja to danych toostoring podejście, które zwykle zapytania według zakresu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-833">This section outlines how Storage Analytics stores log data in blob storage as an illustration of this approach toostoring data that you typically query by range.</span></span>  

<span data-ttu-id="eff6d-834">Analityka magazynu przechowuje komunikaty dziennika w formacie rozdzielanym w wielu obiektów blob.</span><span class="sxs-lookup"><span data-stu-id="eff6d-834">Storage Analytics stores log messages in a delimited format in multiple blobs.</span></span> <span data-ttu-id="eff6d-835">format rozdzielanej Hello ułatwia dla klienta danych hello tooparse aplikacji hello wiadomości dziennika.</span><span class="sxs-lookup"><span data-stu-id="eff6d-835">hello delimited format makes it easy for a client application tooparse hello data in hello log message.</span></span>  

<span data-ttu-id="eff6d-836">Analityka magazynu używa konwencji nazewnictwa dla obiektów blob, które umożliwia toolocate hello obiektów blob (lub obiektów blob) zawierające komunikaty dziennika hello, dla których w przypadku wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-836">Storage Analytics uses a naming convention for blobs that enables you toolocate hello blob (or blobs) that contain hello log messages for which you are searching.</span></span> <span data-ttu-id="eff6d-837">Na przykład obiektu blob o nazwie "queue/2014/07/31/1800/000001.log" zawiera komunikatów dziennika, które dotyczą usługi kolejek toohello hello godzinę, począwszy od 18:00 w 31 lipca 2014.</span><span class="sxs-lookup"><span data-stu-id="eff6d-837">For example, a blob named "queue/2014/07/31/1800/000001.log" contains log messages that relate toohello queue service for hello hour starting at 18:00 on 31 July 2014.</span></span> <span data-ttu-id="eff6d-838">Witaj "000001" wskazuje, że jest hello pierwszy plik dziennika dla tego okresu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-838">hello "000001" indicates that this is hello first log file for this period.</span></span> <span data-ttu-id="eff6d-839">Analityka magazynu najpierw rejestruje także hello znacznikami czasu hello i ostatniego logowania wiadomości przechowywanych w pliku hello jako część metadane hello obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="eff6d-839">Storage Analytics also records hello timestamps of hello first and last log messages stored in hello file as part of hello blob's metadata.</span></span> <span data-ttu-id="eff6d-840">Witaj interfejsu API dla obiekt blob magazynu umożliwia Znajdź obiekty BLOB w kontenerze na podstawie prefiksu nazwy: toolocate wszystkie obiekty BLOB hello, które zawierają kolejki rejestrowanie danych przez hello godzinę, począwszy od 18:00, możesz użyć hello prefiksu "kolejki/2014/07/31/1800."</span><span class="sxs-lookup"><span data-stu-id="eff6d-840">hello API for blob storage enables you locate blobs in a container based on a name prefix: toolocate all hello blobs that contain queue log data for hello hour starting at 18:00, you can use hello prefix "queue/2014/07/31/1800."</span></span>  

<span data-ttu-id="eff6d-841">Analityka magazynu buforuje wiadomości dziennika wewnętrznie i okresowo aktualizuje hello odpowiednich obiektów blob lub tworzy nowy adres w usłudze hello partii najnowsze wpisy dziennika.</span><span class="sxs-lookup"><span data-stu-id="eff6d-841">Storage Analytics buffers log messages internally and then periodically updates hello appropriate blob or creates a new one with hello latest batch of log entries.</span></span> <span data-ttu-id="eff6d-842">Pozwala to zmniejszyć liczbę hello zapisów wykonaj toohello usługi blob.</span><span class="sxs-lookup"><span data-stu-id="eff6d-842">This reduces hello number of writes it must perform toohello blob service.</span></span>  

<span data-ttu-id="eff6d-843">W przypadku wdrażania rozwiązania podobne w swojej aplikacji, należy rozważyć sposób toomanage hello kompromis między niezawodności (zapisywanie co magazynu tooblob wpisu dziennika zdarza się to) i kosztów i skalowalności (buforowanie aktualizacji aplikacji i zapisywanie ich tooblob magazynu w partiach).</span><span class="sxs-lookup"><span data-stu-id="eff6d-843">If you are implementing a similar solution in your own application, you must consider how toomanage hello trade-off between reliability (writing every log entry tooblob storage as it happens) and cost and scalability (buffering updates in your application and writing them tooblob storage in batches).</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="eff6d-844">Problemy i zagadnienia</span><span class="sxs-lookup"><span data-stu-id="eff6d-844">Issues and considerations</span></span>
<span data-ttu-id="eff6d-845">Należy wziąć pod uwagę następujące punkty podczas podejmowania decyzji o sposobie toostore rejestrowanie danych hello:</span><span class="sxs-lookup"><span data-stu-id="eff6d-845">Consider hello following points when deciding how toostore log data:</span></span>  

* <span data-ttu-id="eff6d-846">Jeśli tworzysz projekt tabeli, pozwalający na uniknięcie potencjalnych gorących partycji, może się okazać, że nie masz dostępu do danych dziennika wydajnie.</span><span class="sxs-lookup"><span data-stu-id="eff6d-846">If you create a table design that avoids potential hot partitions, you may find that you cannot access your log data efficiently.</span></span>  
* <span data-ttu-id="eff6d-847">dane dziennika tooprocess, klient często musi tooload wiele rekordów.</span><span class="sxs-lookup"><span data-stu-id="eff6d-847">tooprocess log data, a client often needs tooload many records.</span></span>  
* <span data-ttu-id="eff6d-848">Mimo że często mają strukturę danych dziennika, magazynu obiektów blob może okazać się lepszym rozwiązaniem.</span><span class="sxs-lookup"><span data-stu-id="eff6d-848">Although log data is often structured, blob storage may be a better solution.</span></span>  

### <a name="implementation-considerations"></a><span data-ttu-id="eff6d-849">Uwagi dotyczące implementacji</span><span class="sxs-lookup"><span data-stu-id="eff6d-849">Implementation considerations</span></span>
<span data-ttu-id="eff6d-850">W tej sekcji omówiono niektóre toobear zagadnienia hello na uwadze podczas implementowania wzorce hello opisanych w poprzednich sekcjach hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-850">This section discusses some of hello considerations toobear in mind when you implement hello patterns described in hello previous sections.</span></span> <span data-ttu-id="eff6d-851">Większość ta sekcja używa przykładów napisane w języku C#, które używają hello biblioteki klienta usługi Storage (wersja 4.3.0 w czasie zapisywania hello).</span><span class="sxs-lookup"><span data-stu-id="eff6d-851">Most of this section uses examples written in C# that use hello Storage Client Library (version 4.3.0 at hello time of writing).</span></span>  

### <a name="retrieving-entities"></a><span data-ttu-id="eff6d-852">Pobieranie jednostki</span><span class="sxs-lookup"><span data-stu-id="eff6d-852">Retrieving entities</span></span>
<span data-ttu-id="eff6d-853">Zgodnie z opisem w sekcji hello [projektowania zapytań](#design-for-querying), hello najbardziej efektywny zapytanie jest zapytaniem punktu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-853">As discussed in hello section [Design for querying](#design-for-querying), hello most efficient query is a point query.</span></span> <span data-ttu-id="eff6d-854">Jednak w niektórych scenariuszach może być konieczne tooretrieve wiele jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-854">However, in some scenarios you may need tooretrieve multiple entities.</span></span> <span data-ttu-id="eff6d-855">W tej sekcji opisano niektóre typowe jednostki tooretrieving podejścia przy użyciu hello biblioteki klienta usługi Storage.</span><span class="sxs-lookup"><span data-stu-id="eff6d-855">This section describes some common approaches tooretrieving entities using hello Storage Client Library.</span></span>  

#### <a name="executing-a-point-query-using-hello-storage-client-library"></a><span data-ttu-id="eff6d-856">Wykonywanie zapytania punktu, przy użyciu hello biblioteki klienta usługi Storage</span><span class="sxs-lookup"><span data-stu-id="eff6d-856">Executing a point query using hello Storage Client Library</span></span>
<span data-ttu-id="eff6d-857">Hello najprostszy sposób tooexecute zapytania punkt jest toouse hello **pobrać** tabeli operacji, jak pokazano w hello następującego fragmentu kodu w języku C#, który pobiera obiekt o **PartitionKey** wartość "sprzedaż" i  **RowKey** wartości "212":</span><span class="sxs-lookup"><span data-stu-id="eff6d-857">hello easiest way tooexecute a point query is toouse hello **Retrieve** table operation as shown in hello following C# code snippet that retrieves an entity with a **PartitionKey** of value "Sales" and a **RowKey** of value "212":</span></span>  

```csharp
TableOperation retrieveOperation = TableOperation.Retrieve<EmployeeEntity>("Sales", "212");
var retrieveResult = employeeTable.Execute(retrieveOperation);
if (retrieveResult.Result != null)
{
    EmployeeEntity employee = (EmployeeEntity)retrieveResult.Result;
    ...
}  
```

<span data-ttu-id="eff6d-858">Zwróć uwagę, jak w tym przykładzie oczekuje hello jednostek pobiera ona toobe typu **EmployeeEntity**.</span><span class="sxs-lookup"><span data-stu-id="eff6d-858">Notice how this example expects hello entity it retrieves toobe of type **EmployeeEntity**.</span></span>  

#### <a name="retrieving-multiple-entities-using-linq"></a><span data-ttu-id="eff6d-859">Trwa pobieranie wiele jednostek za pomocą LINQ</span><span class="sxs-lookup"><span data-stu-id="eff6d-859">Retrieving multiple entities using LINQ</span></span>
<span data-ttu-id="eff6d-860">Możesz pobrać wiele jednostek za pomocą LINQ z biblioteki klienta usługi Storage i określenie zapytania z **gdzie** klauzuli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-860">You can retrieve multiple entities by using LINQ with Storage Client Library and specifying a query with a **where** clause.</span></span> <span data-ttu-id="eff6d-861">tooavoid skanowania tabeli, należy zawsze pamiętać hello **PartitionKey** wartość hello gdzie klauzuli i jeśli jest to możliwe hello **RowKey** wartość tooavoid skanowania tabeli i partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-861">tooavoid a table scan, you should always include hello **PartitionKey** value in hello where clause, and if possible hello **RowKey** value tooavoid table and partition scans.</span></span> <span data-ttu-id="eff6d-862">Witaj tabeli usługa obsługuje ograniczony zestaw toouse operatory porównania (większe, większa niż lub równy mniej niż mniej niż lub równy takie same i nie równa) w hello gdzie klauzuli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-862">hello table service supports a limited set of comparison operators (greater than, greater than or equal, less than, less than or equal, equal, and not equal) toouse in hello where clause.</span></span> <span data-ttu-id="eff6d-863">Witaj poniższy fragment kodu C# znajduje wszystkich pracowników hello których ostatnia nazwa rozpoczyna się od znaku "B" (przy założeniu, że hello **RowKey** magazynów hello nazwisko) działu sprzedaży hello (przy założeniu hello **PartitionKey** przechowuje nazwę działu hello):</span><span class="sxs-lookup"><span data-stu-id="eff6d-863">hello following C# code snippet finds all hello employees whose last name starts with "B" (assuming that hello **RowKey** stores hello last name) in hello sales department (assuming hello **PartitionKey** stores hello department name):</span></span>  

```csharp
TableQuery<EmployeeEntity> employeeQuery = employeeTable.CreateQuery<EmployeeEntity>();
var query = (from employee in employeeQuery
            where employee.PartitionKey == "Sales" &&
            employee.RowKey.CompareTo("B") >= 0 &&
            employee.RowKey.CompareTo("C") < 0
            select employee).AsTableQuery();
var employees = query.Execute();  
```

<span data-ttu-id="eff6d-864">Zwróć uwagę, jak hello zapytania określa **RowKey** i **PartitionKey** tooensure lepszą wydajność.</span><span class="sxs-lookup"><span data-stu-id="eff6d-864">Notice how hello query specifies both a **RowKey** and a **PartitionKey** tooensure better performance.</span></span>  

<span data-ttu-id="eff6d-865">Witaj Poniższy przykładowy kod przedstawia równoważne funkcje przy użyciu interfejsu API fluent hello (Aby uzyskać więcej informacji o interfejsach API fluent ogólnie rzecz biorąc, zobacz [najlepsze rozwiązania dotyczące projektowania Fluent API](http://visualstudiomagazine.com/articles/2013/12/01/best-practices-for-designing-a-fluent-api.aspx)):</span><span class="sxs-lookup"><span data-stu-id="eff6d-865">hello following code sample shows equivalent functionality using hello fluent API (for more information about fluent APIs in general, see [Best Practices for Designing a Fluent API](http://visualstudiomagazine.com/articles/2013/12/01/best-practices-for-designing-a-fluent-api.aspx)):</span></span>  

```csharp
TableQuery<EmployeeEntity> employeeQuery = new TableQuery<EmployeeEntity>().Where(
    TableQuery.CombineFilters(
    TableQuery.CombineFilters(
        TableQuery.GenerateFilterCondition(
    "PartitionKey", QueryComparisons.Equal, "Sales"),
    TableOperators.And,
    TableQuery.GenerateFilterCondition(
    "RowKey", QueryComparisons.GreaterThanOrEqual, "B")
),
TableOperators.And,
TableQuery.GenerateFilterCondition("RowKey", QueryComparisons.LessThan, "C")
    )
);
var employees = employeeTable.ExecuteQuery(employeeQuery);  
```

> [!NOTE]
> <span data-ttu-id="eff6d-866">Witaj próbki zagnieżdżony wielu **CombineFilters** tooinclude metody hello trzy warunki filtru.</span><span class="sxs-lookup"><span data-stu-id="eff6d-866">hello sample nests multiple **CombineFilters** methods tooinclude hello three filter conditions.</span></span>  
> 
> 

#### <a name="retrieving-large-numbers-of-entities-from-a-query"></a><span data-ttu-id="eff6d-867">Pobieranie dużą liczbą jednostek w wyniku zapytania</span><span class="sxs-lookup"><span data-stu-id="eff6d-867">Retrieving large numbers of entities from a query</span></span>
<span data-ttu-id="eff6d-868">Optymalne zapytanie zwraca pojedynczą jednostkę na podstawie **PartitionKey** wartość i **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-868">An optimal query returns an individual entity based on a **PartitionKey** value and a **RowKey** value.</span></span> <span data-ttu-id="eff6d-869">Jednak w niektórych scenariuszach może być tooreturn wymaganie wiele jednostek z hello tej samej partycji lub nawet z wielu partycji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-869">However, in some scenarios you may have a requirement tooreturn many entities from hello same partition or even from many partitions.</span></span>  

<span data-ttu-id="eff6d-870">Należy zawsze pełni przetestować wydajność aplikacji hello w takich scenariuszach.</span><span class="sxs-lookup"><span data-stu-id="eff6d-870">You should always fully test hello performance of your application in such scenarios.</span></span>  

<span data-ttu-id="eff6d-871">Zapytanie usługi tabel hello może zwrócić maksymalnie 1000 jednostek w tym samym czasie i mogą realizować maksymalnie pięć sekund.</span><span class="sxs-lookup"><span data-stu-id="eff6d-871">A query against hello table service may return a maximum of 1,000 entities at one time and may execute for a maximum of five seconds.</span></span> <span data-ttu-id="eff6d-872">Jeśli hello zestaw wyników zawiera więcej niż 1000 jednostek, jeśli zapytanie hello nie została ukończona w ciągu pięciu sekund lub jeśli zapytanie hello przecina granicę partycji hello, zwraca hello usługi tabel tooenable token kontynuacji hello powitania toorequest aplikacji klienta Następny zestaw jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-872">If hello result set contains more than 1,000 entities, if hello query did not complete within five seconds, or if hello query crosses hello partition boundary, hello Table service returns a continuation token tooenable hello client application toorequest hello next set of entities.</span></span> <span data-ttu-id="eff6d-873">Aby uzyskać więcej informacji dotyczących sposobu kontynuacji tokeny pracy, zobacz [limit czasu zapytania i podział na strony](http://msdn.microsoft.com/library/azure/dd135718.aspx).</span><span class="sxs-lookup"><span data-stu-id="eff6d-873">For more information about how continuation tokens work, see [Query Timeout and Pagination](http://msdn.microsoft.com/library/azure/dd135718.aspx).</span></span>  

<span data-ttu-id="eff6d-874">Jeśli używasz hello biblioteki klienta usługi Storage on automatycznie obsługi tokenów kontynuacji dla Ciebie zgodnie z hello usługi tabel zwraca jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-874">If you are using hello Storage Client Library, it can automatically handle continuation tokens for you as it returns entities from hello Table service.</span></span> <span data-ttu-id="eff6d-875">Hello następujące C# przykładowy kod automatycznie przy użyciu hello biblioteki klienta usługi Storage obsługuje tokenów kontynuacji Jeśli usługa tabel hello zwraca je w odpowiedzi:</span><span class="sxs-lookup"><span data-stu-id="eff6d-875">hello following C# code sample using hello Storage Client Library automatically handles continuation tokens if hello table service returns them in a response:</span></span>  

```csharp
string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, "Sales");
TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter);

var employees = employeeTable.ExecuteQuery(employeeQuery);
foreach (var emp in employees)
{
        ...
}  
```

<span data-ttu-id="eff6d-876">Witaj następującego kodu C# obsługuje tokenów kontynuacji jawnie:</span><span class="sxs-lookup"><span data-stu-id="eff6d-876">hello following C# code handles continuation tokens explicitly:</span></span>  

```csharp
string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, "Sales");
TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter);

TableContinuationToken continuationToken = null;

do
{
        var employees = employeeTable.ExecuteQuerySegmented(
        employeeQuery, continuationToken);
    foreach (var emp in employees)
    {
    ...
    }
    continuationToken = employees.ContinuationToken;
} while (continuationToken != null);  
```

<span data-ttu-id="eff6d-877">Za pomocą tokenów kontynuacji jawnie, można kontrolować, gdy aplikacja pobiera hello następnego segmentu danych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-877">By using continuation tokens explicitly, you can control when your application retrieves hello next segment of data.</span></span> <span data-ttu-id="eff6d-878">Na przykład jeśli aplikacja kliencka umożliwia toopage użytkowników za pomocą jednostek hello przechowywane w tabeli, użytkownik może zadecydować nie toopage za pośrednictwem wszystkich jednostek hello pobierane przez zapytanie hello, aplikacja będzie używane tylko hello token tooretrieve kontynuacji dalej segment po hello użytkownik miał stronicowania przez wszystkie jednostki hello w bieżącym segmencie hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-878">For example, if your client application enables users toopage through hello entities stored in a table, a user may decide not toopage through all hello entities retrieved by hello query so your application would only use a continuation token tooretrieve hello next segment when hello user had finished paging through all hello entities in hello current segment.</span></span> <span data-ttu-id="eff6d-879">Takie podejście ma wiele zalet:</span><span class="sxs-lookup"><span data-stu-id="eff6d-879">This approach has several benefits:</span></span>  

* <span data-ttu-id="eff6d-880">Umożliwia toolimit hello ilości danych tooretrieve z hello usługi tabel i przenieść hello sieci.</span><span class="sxs-lookup"><span data-stu-id="eff6d-880">It enables you toolimit hello amount of data tooretrieve from hello Table service and that you move over hello network.</span></span>  
* <span data-ttu-id="eff6d-881">Dzięki temu można tooperform asynchroniczne We/Wy w .NET.</span><span class="sxs-lookup"><span data-stu-id="eff6d-881">It enables you tooperform asynchronous IO in .NET.</span></span>  
* <span data-ttu-id="eff6d-882">Umożliwia magazynu token toopersistent kontynuacji hello tooserialize tak w przypadku awarii aplikacji hello można kontynuować.</span><span class="sxs-lookup"><span data-stu-id="eff6d-882">It enables you tooserialize hello continuation token toopersistent storage so you can continue in hello event of an application crash.</span></span>  

> [!NOTE]
> <span data-ttu-id="eff6d-883">Token kontynuacji zwykle zwraca segment zawierający 1000 jednostek, chociaż może być mniej.</span><span class="sxs-lookup"><span data-stu-id="eff6d-883">A continuation token typically returns a segment containing 1,000 entities, although it may be fewer.</span></span> <span data-ttu-id="eff6d-884">Dotyczy to również hello Ogranicz hello liczbę wpisów zapytanie zwraca przy użyciu **zająć** tooreturn hello pierwsze n jednostek spełniających kryteria wyszukiwania: Usługa tabel hello może zwrócić segment zawierający mniej niż n jednostek wzdłuż z tooenable token kontynuacji możesz tooretrieve hello pozostałych jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-884">This is also hello case if you limit hello number of entries a query returns by using **Take** tooreturn hello first n entities that match your lookup criteria: hello table service may return a segment containing fewer than n entities along with a continuation token tooenable you tooretrieve hello remaining entities.</span></span>  
> 
> 

<span data-ttu-id="eff6d-885">Witaj następujące C# kod przedstawia sposób toomodify hello liczbę jednostek zwrotu wewnątrz segment:</span><span class="sxs-lookup"><span data-stu-id="eff6d-885">hello following C# code shows how toomodify hello number of entities returned inside a segment:</span></span>  

```csharp
employeeQuery.TakeCount = 50;  
```

#### <a name="server-side-projection"></a><span data-ttu-id="eff6d-886">Projekcja po stronie serwera</span><span class="sxs-lookup"><span data-stu-id="eff6d-886">Server-side projection</span></span>
<span data-ttu-id="eff6d-887">Pojedyncza jednostka ma właściwości too255 i być too1 MB rozmiar.</span><span class="sxs-lookup"><span data-stu-id="eff6d-887">A single entity can have up too255 properties and be up too1 MB in size.</span></span> <span data-ttu-id="eff6d-888">Gdy zapytania tabeli hello i pobrać jednostek, mogą nie być potrzebne wszystkie właściwości hello i uniknąć niepotrzebnego przesyłania danych (toohelp zmniejszenia opóźnienia i kosztów).</span><span class="sxs-lookup"><span data-stu-id="eff6d-888">When you query hello table and retrieve entities, you may not need all hello properties and can avoid transferring data unnecessarily (toohelp reduce latency and cost).</span></span> <span data-ttu-id="eff6d-889">Można użyć właściwości hello tylko tootransfer projekcji po stronie serwera, które należy.</span><span class="sxs-lookup"><span data-stu-id="eff6d-889">You can use server-side projection tootransfer just hello properties you need.</span></span> <span data-ttu-id="eff6d-890">Hello poniższym przykładzie jest po prostu hello pobiera **E-mail** właściwości (wraz z **PartitionKey**, **RowKey**, **sygnatury czasowej**i  **Element ETag**) z wybranych przez zapytanie hello encji hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-890">hello following example is retrieves just hello **Email** property (along with **PartitionKey**, **RowKey**, **Timestamp**, and **ETag**) from hello entities selected by hello query.</span></span>  

```csharp
string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, "Sales");
List<string> columns = new List<string>() { "Email" };
TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter).Select(columns);

var entities = employeeTable.ExecuteQuery(employeeQuery);
foreach (var e in entities)
{
        Console.WriteLine("RowKey: {0}, EmployeeEmail: {1}", e.RowKey, e.Email);
}  
```

<span data-ttu-id="eff6d-891">Zwróć uwagę, jak hello **RowKey** wartość jest dostępna, mimo że nie został uwzględniony w hello lista tooretrieve właściwości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-891">Notice how hello **RowKey** value is available even though it was not included in hello list of properties tooretrieve.</span></span>  

### <a name="modifying-entities"></a><span data-ttu-id="eff6d-892">Modyfikowanie jednostek</span><span class="sxs-lookup"><span data-stu-id="eff6d-892">Modifying entities</span></span>
<span data-ttu-id="eff6d-893">Witaj biblioteki klienta usługi Storage umożliwia toomodify jednostek przechowywany w usłudze tabeli hello przez wstawianie, usuwanie i aktualizowanie jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-893">hello Storage Client Library enables you toomodify your entities stored in hello table service by inserting, deleting, and updating entities.</span></span> <span data-ttu-id="eff6d-894">EGTs toobatch można użyć wielu insert, update i operacji usuwania razem tooreduce hello liczby rund wymagane i zwiększyć wydajność hello rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-894">You can use EGTs toobatch multiple insert, update, and delete operations together tooreduce hello number of round trips required and improve hello performance of your solution.</span></span>  

<span data-ttu-id="eff6d-895">Zwróć uwagę, że wyjątki zgłaszane, gdy hello biblioteki klienta usługi Storage wykonuje EGT zwykle obejmuje indeksu hello hello jednostki, który spowodował hello toofail partii.</span><span class="sxs-lookup"><span data-stu-id="eff6d-895">Note that exceptions thrown when hello Storage Client Library executes an EGT typically include hello index of hello entity that caused hello batch toofail.</span></span> <span data-ttu-id="eff6d-896">Jest to przydatne podczas debugowania kodu korzystającego z EGTs.</span><span class="sxs-lookup"><span data-stu-id="eff6d-896">This is helpful when you are debugging code that uses EGTs.</span></span>  

<span data-ttu-id="eff6d-897">Należy również rozważyć, jak projektu wpływa na sposób obsługi przez aplikację kliencką operacje współbieżności i aktualizacji.</span><span class="sxs-lookup"><span data-stu-id="eff6d-897">You should also consider how your design affects how your client application handles concurrency and update operations.</span></span>  

#### <a name="managing-concurrency"></a><span data-ttu-id="eff6d-898">Zarządzanie współbieżności</span><span class="sxs-lookup"><span data-stu-id="eff6d-898">Managing concurrency</span></span>
<span data-ttu-id="eff6d-899">Domyślnie usługa tabel hello implementuje optymistycznej współbieżności testy na poziomie hello poszczególnych jednostek dla **Wstaw**, **scalania**, i **usunąć** operacje, Chociaż można dla hello tooforce klienta tabeli toobypass usługi kontrole.</span><span class="sxs-lookup"><span data-stu-id="eff6d-899">By default, hello table service implements optimistic concurrency checks at hello level of individual entities for **Insert**, **Merge**, and **Delete** operations, although it is possible for a client tooforce hello table service toobypass these checks.</span></span> <span data-ttu-id="eff6d-900">Aby uzyskać więcej informacji o zarządzaniu współbieżności hello usługi tabel, zobacz [Zarządzanie współbieżność w magazynie platformy Microsoft Azure](../storage/common/storage-concurrency.md).</span><span class="sxs-lookup"><span data-stu-id="eff6d-900">For more information about how hello table service manages concurrency, see  [Managing Concurrency in Microsoft Azure Storage](../storage/common/storage-concurrency.md).</span></span>  

#### <a name="merge-or-replace"></a><span data-ttu-id="eff6d-901">Scalanie lub Zastąp</span><span class="sxs-lookup"><span data-stu-id="eff6d-901">Merge or replace</span></span>
<span data-ttu-id="eff6d-902">Witaj **Zastąp** metody hello **TableOperation** klasy zastąpi całą jednostkę hello w hello usługi tabel.</span><span class="sxs-lookup"><span data-stu-id="eff6d-902">hello **Replace** method of hello **TableOperation** class always replaces hello complete entity in hello Table service.</span></span> <span data-ttu-id="eff6d-903">Jeśli nie zostanie uwzględniony właściwości w żądaniu hello, gdy istnieje tej właściwości w obiekcie hello przechowywane, Żądanie hello Usuwa właściwość z hello przechowywanie jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-903">If you do not include a property in hello request when that property exists in hello stored entity, hello request removes that property from hello stored entity.</span></span> <span data-ttu-id="eff6d-904">Chyba że chcesz tooremove właściwości jawnie z przechowywanych jednostki musi zawierać dla każdej właściwości w żądaniu hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-904">Unless you want tooremove a property explicitly from a stored entity, you must include every property in hello request.</span></span>  

<span data-ttu-id="eff6d-905">Można użyć hello **scalania** metody hello **TableOperation** klasy tooreduce hello ilość danych wysłanie usługi tabel toohello należy tooupdate jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-905">You can use hello **Merge** method of hello **TableOperation** class tooreduce hello amount of data that you send toohello Table service when you want tooupdate an entity.</span></span> <span data-ttu-id="eff6d-906">Witaj **scalania** metoda zastępuje wszystkie właściwości w obiekcie hello przechowywane wartości właściwości z obiektu hello zawarte w żądaniu hello, ale pozostawia nienaruszone wszystkie właściwości w hello przechowywane jednostki, które nie są uwzględnione w żądaniu hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-906">hello **Merge** method replaces any properties in hello stored entity with property values from hello entity included in hello request, but leaves intact any properties in hello stored entity that are not included in hello request.</span></span> <span data-ttu-id="eff6d-907">Jest to przydatne, jeśli masz dużych jednostek i wymagane jest tylko tooupdate niewielkiej liczby właściwości w żądaniu.</span><span class="sxs-lookup"><span data-stu-id="eff6d-907">This is useful if you have large entities and only need tooupdate a small number of properties in a request.</span></span>  

> [!NOTE]
> <span data-ttu-id="eff6d-908">Witaj **Zastąp** i **scalania** metody zawiodą, jeśli hello jednostka nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="eff6d-908">hello **Replace** and **Merge** methods fail if hello entity does not exist.</span></span> <span data-ttu-id="eff6d-909">Alternatywnie, można użyć hello **InsertOrReplace** i **InsertOrMerge** metod, które Utwórz nową jednostkę, jeśli nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="eff6d-909">As an alternative, you can use hello **InsertOrReplace** and **InsertOrMerge** methods that create a new entity if it doesn't exist.</span></span>  
> 
> 

### <a name="working-with-heterogeneous-entity-types"></a><span data-ttu-id="eff6d-910">Praca z typami jednostek heterogenicznych</span><span class="sxs-lookup"><span data-stu-id="eff6d-910">Working with heterogeneous entity types</span></span>
<span data-ttu-id="eff6d-911">Witaj usługi tabel jest *bez schematu* sklepu tabeli, która oznacza, że pojedynczej tabeli można przechowywać jednostek wiele typów, zapewniając elastyczność w projekcie.</span><span class="sxs-lookup"><span data-stu-id="eff6d-911">hello Table service is a *schema-less* table store that means that a single table can store entities of multiple types providing great flexibility in your design.</span></span> <span data-ttu-id="eff6d-912">Witaj poniższy przykład przedstawia przechowywania zarówno pracowników i działu jednostek tabeli:</span><span class="sxs-lookup"><span data-stu-id="eff6d-912">hello following example illustrates a table storing both employee and department entities:</span></span>  

<table>
<tr>
<th><span data-ttu-id="eff6d-913">PartitionKey</span><span class="sxs-lookup"><span data-stu-id="eff6d-913">PartitionKey</span></span></th>
<th><span data-ttu-id="eff6d-914">RowKey</span><span class="sxs-lookup"><span data-stu-id="eff6d-914">RowKey</span></span></th>
<th><span data-ttu-id="eff6d-915">Znacznik czasu</span><span class="sxs-lookup"><span data-stu-id="eff6d-915">Timestamp</span></span></th>
<th></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="eff6d-916">Imię</span><span class="sxs-lookup"><span data-stu-id="eff6d-916">FirstName</span></span></th>
<th><span data-ttu-id="eff6d-917">Nazwisko</span><span class="sxs-lookup"><span data-stu-id="eff6d-917">LastName</span></span></th>
<th><span data-ttu-id="eff6d-918">Wiek</span><span class="sxs-lookup"><span data-stu-id="eff6d-918">Age</span></span></th>
<th><span data-ttu-id="eff6d-919">Adres e-mail</span><span class="sxs-lookup"><span data-stu-id="eff6d-919">Email</span></span></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="eff6d-920">Imię</span><span class="sxs-lookup"><span data-stu-id="eff6d-920">FirstName</span></span></th>
<th><span data-ttu-id="eff6d-921">Nazwisko</span><span class="sxs-lookup"><span data-stu-id="eff6d-921">LastName</span></span></th>
<th><span data-ttu-id="eff6d-922">Wiek</span><span class="sxs-lookup"><span data-stu-id="eff6d-922">Age</span></span></th>
<th><span data-ttu-id="eff6d-923">Adres e-mail</span><span class="sxs-lookup"><span data-stu-id="eff6d-923">Email</span></span></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="eff6d-924">DepartmentName</span><span class="sxs-lookup"><span data-stu-id="eff6d-924">DepartmentName</span></span></th>
<th><span data-ttu-id="eff6d-925">EmployeeCount</span><span class="sxs-lookup"><span data-stu-id="eff6d-925">EmployeeCount</span></span></th>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</table>
</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="eff6d-926">Imię</span><span class="sxs-lookup"><span data-stu-id="eff6d-926">FirstName</span></span></th>
<th><span data-ttu-id="eff6d-927">Nazwisko</span><span class="sxs-lookup"><span data-stu-id="eff6d-927">LastName</span></span></th>
<th><span data-ttu-id="eff6d-928">Wiek</span><span class="sxs-lookup"><span data-stu-id="eff6d-928">Age</span></span></th>
<th><span data-ttu-id="eff6d-929">Adres e-mail</span><span class="sxs-lookup"><span data-stu-id="eff6d-929">Email</span></span></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</td>
</tr>
</table>

<span data-ttu-id="eff6d-930">Należy pamiętać, że każdy obiekt muszą mieć **PartitionKey**, **RowKey**, i **sygnatury czasowej** wartości, którzy mogą mieć dowolny zbiór właściwości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-930">Note that each entity must still have **PartitionKey**, **RowKey**, and **Timestamp** values, but may have any set of properties.</span></span> <span data-ttu-id="eff6d-931">Ponadto nie ma nic tooindicate hello typu jednostki, chyba że zostanie toostore te informacje innym.</span><span class="sxs-lookup"><span data-stu-id="eff6d-931">Furthermore, there is nothing tooindicate hello type of an entity unless you choose toostore that information somewhere.</span></span> <span data-ttu-id="eff6d-932">Dostępne są dwie opcje do identyfikacji typu jednostki hello:</span><span class="sxs-lookup"><span data-stu-id="eff6d-932">There are two options for identifying hello entity type:</span></span>  

* <span data-ttu-id="eff6d-933">Dołączenie wartości hello jednostki typu toohello **RowKey** (lub prawdopodobnie hello **PartitionKey**).</span><span class="sxs-lookup"><span data-stu-id="eff6d-933">Prepend hello entity type toohello **RowKey** (or possibly hello **PartitionKey**).</span></span> <span data-ttu-id="eff6d-934">Na przykład **EMPLOYEE_000123** lub **DEPARTMENT_SALES** jako **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-934">For example, **EMPLOYEE_000123** or **DEPARTMENT_SALES** as **RowKey** values.</span></span>  
* <span data-ttu-id="eff6d-935">Użyj oddzielnych toorecord hello jednostki typu właściwości zgodnie z poniższą tabelą hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-935">Use a separate property toorecord hello entity type as shown in hello table below.</span></span>  

<table>
<tr>
<th><span data-ttu-id="eff6d-936">PartitionKey</span><span class="sxs-lookup"><span data-stu-id="eff6d-936">PartitionKey</span></span></th>
<th><span data-ttu-id="eff6d-937">RowKey</span><span class="sxs-lookup"><span data-stu-id="eff6d-937">RowKey</span></span></th>
<th><span data-ttu-id="eff6d-938">Znacznik czasu</span><span class="sxs-lookup"><span data-stu-id="eff6d-938">Timestamp</span></span></th>
<th></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="eff6d-939">Dla obiektu</span><span class="sxs-lookup"><span data-stu-id="eff6d-939">EntityType</span></span></th>
<th><span data-ttu-id="eff6d-940">Imię</span><span class="sxs-lookup"><span data-stu-id="eff6d-940">FirstName</span></span></th>
<th><span data-ttu-id="eff6d-941">Nazwisko</span><span class="sxs-lookup"><span data-stu-id="eff6d-941">LastName</span></span></th>
<th><span data-ttu-id="eff6d-942">Wiek</span><span class="sxs-lookup"><span data-stu-id="eff6d-942">Age</span></span></th>
<th><span data-ttu-id="eff6d-943">Adres e-mail</span><span class="sxs-lookup"><span data-stu-id="eff6d-943">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="eff6d-944">Pracownika</span><span class="sxs-lookup"><span data-stu-id="eff6d-944">Employee</span></span></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="eff6d-945">Dla obiektu</span><span class="sxs-lookup"><span data-stu-id="eff6d-945">EntityType</span></span></th>
<th><span data-ttu-id="eff6d-946">Imię</span><span class="sxs-lookup"><span data-stu-id="eff6d-946">FirstName</span></span></th>
<th><span data-ttu-id="eff6d-947">Nazwisko</span><span class="sxs-lookup"><span data-stu-id="eff6d-947">LastName</span></span></th>
<th><span data-ttu-id="eff6d-948">Wiek</span><span class="sxs-lookup"><span data-stu-id="eff6d-948">Age</span></span></th>
<th><span data-ttu-id="eff6d-949">Adres e-mail</span><span class="sxs-lookup"><span data-stu-id="eff6d-949">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="eff6d-950">Pracownika</span><span class="sxs-lookup"><span data-stu-id="eff6d-950">Employee</span></span></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="eff6d-951">Dla obiektu</span><span class="sxs-lookup"><span data-stu-id="eff6d-951">EntityType</span></span></th>
<th><span data-ttu-id="eff6d-952">DepartmentName</span><span class="sxs-lookup"><span data-stu-id="eff6d-952">DepartmentName</span></span></th>
<th><span data-ttu-id="eff6d-953">EmployeeCount</span><span class="sxs-lookup"><span data-stu-id="eff6d-953">EmployeeCount</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="eff6d-954">Dział</span><span class="sxs-lookup"><span data-stu-id="eff6d-954">Department</span></span></td>
<td></td>
<td></td>
</tr>
</table>
</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="eff6d-955">Dla obiektu</span><span class="sxs-lookup"><span data-stu-id="eff6d-955">EntityType</span></span></th>
<th><span data-ttu-id="eff6d-956">Imię</span><span class="sxs-lookup"><span data-stu-id="eff6d-956">FirstName</span></span></th>
<th><span data-ttu-id="eff6d-957">Nazwisko</span><span class="sxs-lookup"><span data-stu-id="eff6d-957">LastName</span></span></th>
<th><span data-ttu-id="eff6d-958">Wiek</span><span class="sxs-lookup"><span data-stu-id="eff6d-958">Age</span></span></th>
<th><span data-ttu-id="eff6d-959">Adres e-mail</span><span class="sxs-lookup"><span data-stu-id="eff6d-959">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="eff6d-960">Pracownika</span><span class="sxs-lookup"><span data-stu-id="eff6d-960">Employee</span></span></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</td>
</tr>
</table>

<span data-ttu-id="eff6d-961">Pierwsza opcja Hello, dołączanie hello jednostki typu toohello **RowKey**, jest przydatne, jeśli istnieje możliwość, że dwie jednostki z różnymi typami może być hello sama wartość klucza.</span><span class="sxs-lookup"><span data-stu-id="eff6d-961">hello first option, prepending hello entity type toohello **RowKey**, is useful if there is a possibility that two entities of different types might have hello same key value.</span></span> <span data-ttu-id="eff6d-962">Grup jednostek z tego samego typu razem partycji hello hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-962">It also groups entities of hello same type together in hello partition.</span></span>  

<span data-ttu-id="eff6d-963">Witaj techniki opisane w tej sekcji są szczególnie istotne toohello dyskusji [relacji dziedziczenia](#inheritance-relationships) wcześniej w tym przewodniku w sekcji hello [modelowania relacji](#modelling-relationships).</span><span class="sxs-lookup"><span data-stu-id="eff6d-963">hello techniques discussed in this section are especially relevant toohello discussion [Inheritance relationships](#inheritance-relationships) earlier in this guide in hello section [Modelling relationships](#modelling-relationships).</span></span>  

> [!NOTE]
> <span data-ttu-id="eff6d-964">Należy należy rozważyć umieszczenie numeru wersji w hello obiekty typu wartości tooenable klienta aplikacji tooevolve POCO obiektów i pracy z różnymi wersjami.</span><span class="sxs-lookup"><span data-stu-id="eff6d-964">You should consider including a version number in hello entity type value tooenable client applications tooevolve POCO objects and work with different versions.</span></span>  
> 
> 

<span data-ttu-id="eff6d-965">Witaj pozostałej części tej sekcji opisano niektóre z funkcji hello w hello biblioteki klienta usługi Storage, które ułatwiają Praca z wieloma typami jednostek w hello takie same tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-965">hello remainder of this section describes some of hello features in hello Storage Client Library that facilitate working with multiple entity types in hello same table.</span></span>  

#### <a name="retrieving-heterogeneous-entity-types"></a><span data-ttu-id="eff6d-966">Trwa pobieranie typów jednostek heterogenicznych</span><span class="sxs-lookup"><span data-stu-id="eff6d-966">Retrieving heterogeneous entity types</span></span>
<span data-ttu-id="eff6d-967">Jeśli używasz hello biblioteki klienta usługi Storage, masz trzy opcje do pracy z wielu typów jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-967">If you are using hello Storage Client Library, you have three options for working with multiple entity types.</span></span>  

<span data-ttu-id="eff6d-968">Jeśli znasz hello typ jednostki hello przechowywane z określonym **RowKey** i **PartitionKey** wartości, a następnie można określić typ jednostki hello podczas pobierania jednostki hello, jak pokazano w przykładach hello dwoma poprzednimi który pobrać jednostki typu **EmployeeEntity**: [wykonywania zapytania punktu, przy użyciu hello biblioteki klienta usługi Storage](#executing-a-point-query-using-the-storage-client-library) i [pobierania wiele jednostek za pomocą LINQ](#retrieving-multiple-entities-using-linq).</span><span class="sxs-lookup"><span data-stu-id="eff6d-968">If you know hello type of hello entity stored with a specific **RowKey** and **PartitionKey** values, then you can specify hello entity type when you retrieve hello entity as shown in hello previous two examples that retrieve entities of type **EmployeeEntity**: [Executing a point query using hello Storage Client Library](#executing-a-point-query-using-the-storage-client-library) and [Retrieving multiple entities using LINQ](#retrieving-multiple-entities-using-linq).</span></span>  

<span data-ttu-id="eff6d-969">Druga opcja Hello jest toouse hello **DynamicTableEntity** typu (zbiór właściwości), zamiast do konkretnego typu jednostki POCO (Ta opcja również może zwiększyć wydajność, ponieważ nie istnieje żadne tooserialize potrzeby i zbyt deserializacji hello jednostki. Typy sieci).</span><span class="sxs-lookup"><span data-stu-id="eff6d-969">hello second option is toouse hello **DynamicTableEntity** type (a property bag) instead of a concrete POCO entity type (this option may also improve performance because there is no need tooserialize and deserialize hello entity too.NET types).</span></span> <span data-ttu-id="eff6d-970">Witaj potencjalnie następującego kodu C# pobiera wielu jednostek o różnych typach z hello tabeli, ale zwraca wszystkie jednostki jako **DynamicTableEntity** wystąpień.</span><span class="sxs-lookup"><span data-stu-id="eff6d-970">hello following C# code potentially retrieves multiple entities of different types from hello table, but returns all entities as **DynamicTableEntity** instances.</span></span> <span data-ttu-id="eff6d-971">Następnie używa hello **EntityType** typ hello toodetermine właściwości każdej jednostki:</span><span class="sxs-lookup"><span data-stu-id="eff6d-971">It then uses hello **EntityType** property toodetermine hello type of each entity:</span></span>  

```csharp
string filter = TableQuery.CombineFilters(
    TableQuery.GenerateFilterCondition("PartitionKey",
    QueryComparisons.Equal, "Sales"),
    TableOperators.And,
    TableQuery.CombineFilters(
    TableQuery.GenerateFilterCondition("RowKey",
                    QueryComparisons.GreaterThanOrEqual, "B"),
        TableOperators.And,
        TableQuery.GenerateFilterCondition("RowKey",
        QueryComparisons.LessThan, "F")
    )
);
TableQuery<DynamicTableEntity> entityQuery =
    new TableQuery<DynamicTableEntity>().Where(filter);
var employees = employeeTable.ExecuteQuery(entityQuery);

IEnumerable<DynamicTableEntity> entities = employeeTable.ExecuteQuery(entityQuery);
foreach (var e in entities)
{
EntityProperty entityTypeProperty;
if (e.Properties.TryGetValue("EntityType", out entityTypeProperty))
{
    if (entityTypeProperty.StringValue == "Employee")
    {
        // Use entityTypeProperty, RowKey, PartitionKey, Etag, and Timestamp
        }
    }
}  
```

<span data-ttu-id="eff6d-972">Należy pamiętać, że tooretrieve inne właściwości, należy użyć hello **TryGetValue** metody na powitania **właściwości** właściwości hello **DynamicTableEntity** klasy.</span><span class="sxs-lookup"><span data-stu-id="eff6d-972">Note that tooretrieve other properties you must use hello **TryGetValue** method on hello **Properties** property of hello **DynamicTableEntity** class.</span></span>  

<span data-ttu-id="eff6d-973">Trzecia opcja to toocombine przy użyciu hello **DynamicTableEntity** typu i **EntityResolver** wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="eff6d-973">A third option is toocombine using hello **DynamicTableEntity** type and an **EntityResolver** instance.</span></span> <span data-ttu-id="eff6d-974">Dzięki temu możesz tooresolve toomultiple POCO typów w hello tego samego zapytania.</span><span class="sxs-lookup"><span data-stu-id="eff6d-974">This enables you tooresolve toomultiple POCO types in hello same query.</span></span> <span data-ttu-id="eff6d-975">W tym przykładzie hello **EntityResolver** delegata używa hello **EntityType** toodistinguish właściwości między hello dwa typy jednostek, które hello zapytanie zwraca.</span><span class="sxs-lookup"><span data-stu-id="eff6d-975">In this example, hello **EntityResolver** delegate is using hello **EntityType** property toodistinguish between hello two types of entity that hello query returns.</span></span> <span data-ttu-id="eff6d-976">Hello **rozwiązać** metoda używa hello **rozpoznawania** delegować tooresolve **DynamicTableEntity** wystąpienia zbyt**TableEntity** wystąpień.</span><span class="sxs-lookup"><span data-stu-id="eff6d-976">hello **Resolve** method uses hello **resolver** delegate tooresolve **DynamicTableEntity** instances too**TableEntity** instances.</span></span>  

```csharp
EntityResolver<TableEntity> resolver = (pk, rk, ts, props, etag) =>
{

        TableEntity resolvedEntity = null;
        if (props["EntityType"].StringValue == "Department")
        {
        resolvedEntity = new DepartmentEntity();
        }
        else if (props["EntityType"].StringValue == "Employee")
        {
        resolvedEntity = new EmployeeEntity();
        }
        else throw new ArgumentException("Unrecognized entity", "props");

        resolvedEntity.PartitionKey = pk;
        resolvedEntity.RowKey = rk;
        resolvedEntity.Timestamp = ts;
        resolvedEntity.ETag = etag;
        resolvedEntity.ReadEntity(props, null);
        return resolvedEntity;
};

string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, "Sales");
TableQuery<DynamicTableEntity> entityQuery =
        new TableQuery<DynamicTableEntity>().Where(filter);

var entities = employeeTable.ExecuteQuery(entityQuery, resolver);
foreach (var e in entities)
{
        if (e is DepartmentEntity)
        {
    ...
        }
        if (e is EmployeeEntity)
        {
    ...
        }
}  
```

#### <a name="modifying-heterogeneous-entity-types"></a><span data-ttu-id="eff6d-977">Modyfikowanie jednostek heterogenicznych typów</span><span class="sxs-lookup"><span data-stu-id="eff6d-977">Modifying heterogeneous entity types</span></span>
<span data-ttu-id="eff6d-978">Nie trzeba tooknow typu hello toodelete jednostki go i zawsze o jego wstawieniem hello typu jednostki.</span><span class="sxs-lookup"><span data-stu-id="eff6d-978">You do not need tooknow hello type of an entity toodelete it, and you always know hello type of an entity when you insert it.</span></span> <span data-ttu-id="eff6d-979">Można jednak użyć **DynamicTableEntity** wpisz tooupdate jednostki bez uprzedniego uzyskania informacji o jego typ, a także bez korzystania z klasą jednostki POCO.</span><span class="sxs-lookup"><span data-stu-id="eff6d-979">However, you can use **DynamicTableEntity** type tooupdate an entity without knowing its type and without using a POCO entity class.</span></span> <span data-ttu-id="eff6d-980">Witaj Poniższy przykładowy kod pobiera pojedynczej jednostki i sprawdza hello **EmployeeCount** istnieje właściwość przed zaktualizowaniem go.</span><span class="sxs-lookup"><span data-stu-id="eff6d-980">hello following code sample retrieves a single entity, and checks hello **EmployeeCount** property exists before updating it.</span></span>  

```csharp
TableResult result =
        employeeTable.Execute(TableOperation.Retrieve(partitionKey, rowKey));
DynamicTableEntity department = (DynamicTableEntity)result.Result;

EntityProperty countProperty;

if (!department.Properties.TryGetValue("EmployeeCount", out countProperty))
{
        throw new
        InvalidOperationException("Invalid entity, EmployeeCount property not found.");
}
countProperty.Int32Value += 1;
employeeTable.Execute(TableOperation.Merge(department));  
```

### <a name="controlling-access-with-shared-access-signatures"></a><span data-ttu-id="eff6d-981">Kontrolowanie dostępu przy użyciu sygnatury dostępu współdzielonego</span><span class="sxs-lookup"><span data-stu-id="eff6d-981">Controlling access with Shared Access Signatures</span></span>
<span data-ttu-id="eff6d-982">Można użyć dostępu sygnatury dostępu Współdzielonego tokenów tooenable klienta aplikacji toomodify (i zapytania) jednostek tabeli bezpośrednio, bez tooauthenticate potrzeby hello bezpośrednio z usługi tabel hello.</span><span class="sxs-lookup"><span data-stu-id="eff6d-982">You can use Shared Access Signature (SAS) tokens tooenable client applications toomodify (and query) table entities directly without hello need tooauthenticate directly with hello table service.</span></span> <span data-ttu-id="eff6d-983">Zazwyczaj są trzy podstawowe zalety toousing SAS w aplikacji:</span><span class="sxs-lookup"><span data-stu-id="eff6d-983">Typically, there are three main benefits toousing SAS in your application:</span></span>  

* <span data-ttu-id="eff6d-984">Nie trzeba toodistribute magazynu konta klucza tooan niezabezpieczonych platformy (np. urządzenie przenośne) w kolejności tooallow tooaccess tego urządzenia i zmodyfikować jednostki w hello usługi tabel.</span><span class="sxs-lookup"><span data-stu-id="eff6d-984">You do not need toodistribute your storage account key tooan insecure platform (such as a mobile device) in order tooallow that device tooaccess and modify entities in hello Table service.</span></span>  
* <span data-ttu-id="eff6d-985">Można odciążyć część hello tę sieć web i roli proces roboczy wykonywać w zarządzaniu urządzeniami tooclient jednostek takich jak komputery użytkowników końcowych i urządzeń przenośnych.</span><span class="sxs-lookup"><span data-stu-id="eff6d-985">You can offload some of hello work that web and worker roles perform in managing your entities tooclient devices such as end-user computers and mobile devices.</span></span>  
* <span data-ttu-id="eff6d-986">Można przypisać ograniczone i czas ograniczony zestaw uprawnień tooa klienta (na przykład zezwalania na dostęp tylko do odczytu zasobów toospecific).</span><span class="sxs-lookup"><span data-stu-id="eff6d-986">You can assign a constrained and time limited set of permissions tooa client (such as allowing read-only access toospecific resources).</span></span>  

<span data-ttu-id="eff6d-987">Aby uzyskać więcej informacji o korzystaniu z tokeny sygnatury dostępu Współdzielonego z hello usługi tabel, zobacz [przy użyciu dostępu sygnatur dostępu Współdzielonego](../storage/common/storage-dotnet-shared-access-signature-part-1.md).</span><span class="sxs-lookup"><span data-stu-id="eff6d-987">For more information about using SAS tokens with hello Table service, see [Using Shared Access Signatures (SAS)](../storage/common/storage-dotnet-shared-access-signature-part-1.md).</span></span>  

<span data-ttu-id="eff6d-988">Jednak nadal należy wygenerować tokeny sygnatury dostępu Współdzielonego hello określającymi udzielenie klienta jednostek toohello aplikacji w usłudze tabel hello: należy to zrobić w środowisku, w którym ma bezpieczny dostęp do kluczy konta magazynu tooyour.</span><span class="sxs-lookup"><span data-stu-id="eff6d-988">However, you must still generate hello SAS tokens that grant a client application toohello entities in hello table service: you should do this in an environment that has secure access tooyour storage account keys.</span></span> <span data-ttu-id="eff6d-989">Zazwyczaj używana w sieci web lub procesu roboczego roli toogenerate hello SAS tokeny i dostarczania ich toohello aplikacji klienckich, które wymagają dostępu tooyour jednostek.</span><span class="sxs-lookup"><span data-stu-id="eff6d-989">Typically, you use a web or worker role toogenerate hello SAS tokens and deliver them toohello client applications that need access tooyour entities.</span></span> <span data-ttu-id="eff6d-990">Ponieważ jest nadal koszty związane z generowania i dostarczanie tooclients tokeny sygnatury dostępu Współdzielonego, należy rozważyć tooreduce najlepszego ten narzut, szczególnie w sytuacjach dużego.</span><span class="sxs-lookup"><span data-stu-id="eff6d-990">Because there is still an overhead involved in generating and delivering SAS tokens tooclients, you should consider how best tooreduce this overhead, especially in high-volume scenarios.</span></span>  

<span data-ttu-id="eff6d-991">Jest możliwe toogenerate tokenu sygnatury dostępu Współdzielonego, że przyznaje dostęp do podzbioru tooa hello jednostek w tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-991">It is possible toogenerate a SAS token that grants access tooa subset of hello entities in a table.</span></span> <span data-ttu-id="eff6d-992">Domyślnie, możesz utworzyć token sygnatury dostępu Współdzielonego dla całej tabeli, ale jest również możliwe toospecify tego hello SAS grant tokenu dostępu tooeither zakres **PartitionKey** wartości lub zakres **PartitionKey** i  **RowKey** wartości.</span><span class="sxs-lookup"><span data-stu-id="eff6d-992">By default, you create a SAS token for an entire table, but it is also possible toospecify that hello SAS token grant access tooeither a range of **PartitionKey** values, or a range of **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="eff6d-993">Możesz wybrać toogenerate tokeny sygnatury dostępu Współdzielonego dla poszczególnych użytkowników systemu tak, aby każdy użytkownik tokenu sygnatury dostępu Współdzielonego tylko umożliwia im dostęp do własnych jednostek hello tootheir usługa tabel.</span><span class="sxs-lookup"><span data-stu-id="eff6d-993">You might choose toogenerate SAS tokens for individual users of your system such that each user's SAS token only allows them access tootheir own entities in hello table service.</span></span>  

### <a name="asynchronous-and-parallel-operations"></a><span data-ttu-id="eff6d-994">Operacje asynchroniczne i równoległych</span><span class="sxs-lookup"><span data-stu-id="eff6d-994">Asynchronous and parallel operations</span></span>
<span data-ttu-id="eff6d-995">Pod warunkiem rozpraszania swoje żądania między wieloma partycjami można zwiększyć elastyczność przepływności i klienta przy użyciu asynchronicznej lub równoległego zapytań.</span><span class="sxs-lookup"><span data-stu-id="eff6d-995">Provided you are spreading your requests across multiple partitions, you can improve throughput and client responsiveness by using asynchronous or parallel queries.</span></span>
<span data-ttu-id="eff6d-996">Na przykład może być wystąpień roli dwóch lub więcej procesów roboczych podczas uzyskiwania dostępu do tabel równolegle.</span><span class="sxs-lookup"><span data-stu-id="eff6d-996">For example, you might have two or more worker role instances accessing your tables in parallel.</span></span> <span data-ttu-id="eff6d-997">Może istnieć role poszczególnych pracowników odpowiedzialnych za poszczególne zbiory partycji lub po prostu ma wiele wystąpień roli procesu roboczego, w każdym stanie tooaccess hello wszystkie partycje w tabeli.</span><span class="sxs-lookup"><span data-stu-id="eff6d-997">You could have individual worker roles responsible for particular sets of partitions, or simply have multiple worker role instances, each able tooaccess all hello partitions in a table.</span></span>  

<span data-ttu-id="eff6d-998">W wystąpieniu klienta może zwiększyć przepływność, wykonując operacje magazynu asynchronicznie.</span><span class="sxs-lookup"><span data-stu-id="eff6d-998">Within a client instance, you can improve throughput by executing storage operations asynchronously.</span></span> <span data-ttu-id="eff6d-999">Hello biblioteki klienta usługi Storage umożliwia łatwe toowrite asynchronicznych zapytań i zmiany.</span><span class="sxs-lookup"><span data-stu-id="eff6d-999">hello Storage Client Library makes it easy toowrite asynchronous queries and modifications.</span></span> <span data-ttu-id="eff6d-1000">Na przykład rozpoczynać hello metoda synchroniczna pobiera wszystkie hello jednostek w partycji, jak pokazano w hello następującego kodu C#:</span><span class="sxs-lookup"><span data-stu-id="eff6d-1000">For example, you might start with hello synchronous method that retrieves all hello entities in a partition as shown in hello following C# code:</span></span>  

```csharp
private static void ManyEntitiesQuery(CloudTable employeeTable, string department)
{
        string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, department);
        TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter);

        TableContinuationToken continuationToken = null;

        do
        {
        var employees = employeeTable.ExecuteQuerySegmented(
                employeeQuery, continuationToken);
        foreach (var emp in employees)
    {
        ...
    }
        continuationToken = employees.ContinuationToken;
        } while (continuationToken != null);
}  
```

<span data-ttu-id="eff6d-1001">Można łatwo zmodyfikować ten kod, aby zapytania hello uruchamia asynchronicznie w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="eff6d-1001">You can easily modify this code so that hello query runs asynchronously as follows:</span></span>  

```csharp
private static async Task ManyEntitiesQueryAsync(CloudTable employeeTable, string department)
{
        string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, department);
        TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter);
        TableContinuationToken continuationToken = null;

        do
        {
        var employees = await employeeTable.ExecuteQuerySegmentedAsync(
                employeeQuery, continuationToken);
        foreach (var emp in employees)
        {
            ...
        }
        continuationToken = employees.ContinuationToken;
            } while (continuationToken != null);
}  
```

<span data-ttu-id="eff6d-1002">W tym przykładzie asynchroniczne można wyświetlić hello poniższe zmiany wersji synchroniczne hello:</span><span class="sxs-lookup"><span data-stu-id="eff6d-1002">In this asynchronous example, you can see hello following changes from hello synchronous version:</span></span>  

* <span data-ttu-id="eff6d-1003">Podpis metody Hello zawiera teraz hello **async** modyfikator i zwraca **zadań** wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="eff6d-1003">hello method signature now includes hello **async** modifier and returns a **Task** instance.</span></span>  
* <span data-ttu-id="eff6d-1004">Zamiast wywoływania hello **ExecuteSegmented** wyników tooretrieve metod, hello metody teraz wywołania hello **ExecuteSegmentedAsync** — metoda i używa hello **await** modyfikator tooretrieve powoduje asynchronicznie.</span><span class="sxs-lookup"><span data-stu-id="eff6d-1004">Instead of calling hello **ExecuteSegmented** method tooretrieve results, hello method now calls hello **ExecuteSegmentedAsync** method and uses hello **await** modifier tooretrieve results asynchronously.</span></span>  

<span data-ttu-id="eff6d-1005">Aplikacja kliencka Hello tę metodę mogą wywoływać wielokrotnie (o różnych wartościach dla hello **działu** parametru), i każda kwerenda zostanie uruchomiona w oddzielnym wątku.</span><span class="sxs-lookup"><span data-stu-id="eff6d-1005">hello client application can call this method multiple times (with different values for hello **department** parameter), and each query will run on a separate thread.</span></span>  

<span data-ttu-id="eff6d-1006">Należy pamiętać, że nie ma asynchronicznych wersji hello **Execute** metoda hello **TableQuery** klasy, ponieważ hello **IEnumerable** interfejs nie obsługuje asynchroniczne wyliczenie.</span><span class="sxs-lookup"><span data-stu-id="eff6d-1006">Note that there is no asynchronous version of hello **Execute** method in hello **TableQuery** class because hello **IEnumerable** interface does not support asynchronous enumeration.</span></span>  

<span data-ttu-id="eff6d-1007">Można również wstawiania, aktualizacji i usuwania jednostek asynchronicznie.</span><span class="sxs-lookup"><span data-stu-id="eff6d-1007">You can also insert, update, and delete entities asynchronously.</span></span> <span data-ttu-id="eff6d-1008">Hello poniższy przykład C# pokazuje tooinsert prostą, synchroniczne metodę lub zastępowanie jednostki pracowników:</span><span class="sxs-lookup"><span data-stu-id="eff6d-1008">hello following C# example shows a simple, synchronous method tooinsert or replace an employee entity:</span></span>  

```csharp
private static void SimpleEmployeeUpsert(CloudTable employeeTable,
        EmployeeEntity employee)
{
        TableResult result = employeeTable
        .Execute(TableOperation.InsertOrReplace(employee));
        Console.WriteLine("HTTP Status: {0}", result.HttpStatusCode);
}  
```

<span data-ttu-id="eff6d-1009">Można łatwo zmodyfikować ten kod, dzięki czemu aktualizację hello uruchamia asynchronicznie w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="eff6d-1009">You can easily modify this code so that hello update runs asynchronously as follows:</span></span>  

```csharp
private static async Task SimpleEmployeeUpsertAsync(CloudTable employeeTable,
        EmployeeEntity employee)
{
        TableResult result = await employeeTable
        .ExecuteAsync(TableOperation.InsertOrReplace(employee));
        Console.WriteLine("HTTP Status: {0}", result.HttpStatusCode);
}  
```

<span data-ttu-id="eff6d-1010">W tym przykładzie asynchroniczne można wyświetlić hello poniższe zmiany wersji synchroniczne hello:</span><span class="sxs-lookup"><span data-stu-id="eff6d-1010">In this asynchronous example, you can see hello following changes from hello synchronous version:</span></span>  

* <span data-ttu-id="eff6d-1011">Podpis metody Hello zawiera teraz hello **async** modyfikator i zwraca **zadań** wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="eff6d-1011">hello method signature now includes hello **async** modifier and returns a **Task** instance.</span></span>  
* <span data-ttu-id="eff6d-1012">Zamiast wywoływania hello **Execute** metody tooupdate hello jednostki, hello metody teraz wywołania hello **ExecuteAsync** — metoda i używa hello **await** tooretrieve modyfikator powoduje asynchronicznie.</span><span class="sxs-lookup"><span data-stu-id="eff6d-1012">Instead of calling hello **Execute** method tooupdate hello entity, hello method now calls hello **ExecuteAsync** method and uses hello **await** modifier tooretrieve results asynchronously.</span></span>  

<span data-ttu-id="eff6d-1013">powitania klienta aplikacji można wywołać wiele metod asynchronicznych, takich jak ta, a każde wywołanie metody zostanie uruchomiony w oddzielnym wątku.</span><span class="sxs-lookup"><span data-stu-id="eff6d-1013">hello client application can call multiple asynchronous methods like this one, and each method invocation will run on a separate thread.</span></span>  

### <a name="credits"></a><span data-ttu-id="eff6d-1014">Środki na korzystanie z</span><span class="sxs-lookup"><span data-stu-id="eff6d-1014">Credits</span></span>
<span data-ttu-id="eff6d-1015">Chcielibyśmy hello toothank następujących członków hello Azure zespołu dla ich wkład: Dominic Betts, Jason Hogg, Jean Ghanem, Haridas WSiSW, Jeff Irwin, Vamshidhar Kommineni, Vinay Shah i Serdar Ozler jak również Hollander Tomasz z DX firmy Microsoft.</span><span class="sxs-lookup"><span data-stu-id="eff6d-1015">We would like toothank hello following members of hello Azure team for their contributions: Dominic Betts, Jason Hogg, Jean Ghanem, Jai Haridas, Jeff Irwin, Vamshidhar Kommineni, Vinay Shah and Serdar Ozler as well as  Tom Hollander from Microsoft DX.</span></span> 

<span data-ttu-id="eff6d-1016">Również chcielibyśmy hello toothank czynności Microsoft MVP ich opinie przydatna podczas cykli Przegląd: Igor Papirov i Edward Bakker.</span><span class="sxs-lookup"><span data-stu-id="eff6d-1016">We would also like toothank hello following Microsoft MVP's for their valuable feedback during review cycles: Igor Papirov and Edward Bakker.</span></span>

[1]: ./media/storage-table-design-guide/storage-table-design-IMAGE01.png
[2]: ./media/storage-table-design-guide/storage-table-design-IMAGE02.png
[3]: ./media/storage-table-design-guide/storage-table-design-IMAGE03.png
[4]: ./media/storage-table-design-guide/storage-table-design-IMAGE04.png
[5]: ./media/storage-table-design-guide/storage-table-design-IMAGE05.png
[6]: ./media/storage-table-design-guide/storage-table-design-IMAGE06.png
[7]: ./media/storage-table-design-guide/storage-table-design-IMAGE07.png
[8]: ./media/storage-table-design-guide/storage-table-design-IMAGE08.png
[9]: ./media/storage-table-design-guide/storage-table-design-IMAGE09.png
[10]: ./media/storage-table-design-guide/storage-table-design-IMAGE10.png
[11]: ./media/storage-table-design-guide/storage-table-design-IMAGE11.png
[12]: ./media/storage-table-design-guide/storage-table-design-IMAGE12.png
[13]: ./media/storage-table-design-guide/storage-table-design-IMAGE13.png
[14]: ./media/storage-table-design-guide/storage-table-design-IMAGE14.png
[15]: ./media/storage-table-design-guide/storage-table-design-IMAGE15.png
[16]: ./media/storage-table-design-guide/storage-table-design-IMAGE16.png
[17]: ./media/storage-table-design-guide/storage-table-design-IMAGE17.png
[18]: ./media/storage-table-design-guide/storage-table-design-IMAGE18.png
[19]: ./media/storage-table-design-guide/storage-table-design-IMAGE19.png
[20]: ./media/storage-table-design-guide/storage-table-design-IMAGE20.png
[21]: ./media/storage-table-design-guide/storage-table-design-IMAGE21.png
[22]: ./media/storage-table-design-guide/storage-table-design-IMAGE22.png
[23]: ./media/storage-table-design-guide/storage-table-design-IMAGE23.png
[24]: ./media/storage-table-design-guide/storage-table-design-IMAGE24.png
[25]: ./media/storage-table-design-guide/storage-table-design-IMAGE25.png
[26]: ./media/storage-table-design-guide/storage-table-design-IMAGE26.png
[27]: ./media/storage-table-design-guide/storage-table-design-IMAGE27.png
[28]: ./media/storage-table-design-guide/storage-table-design-IMAGE28.png
[29]: ./media/storage-table-design-guide/storage-table-design-IMAGE29.png

