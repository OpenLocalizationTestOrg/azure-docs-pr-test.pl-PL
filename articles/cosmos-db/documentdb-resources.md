---
title: "Pojęcia i model zasobów w usłudze Azure DB rozwiązania Cosmos | Dokumentacja firmy Microsoft"
description: "Więcej informacji na temat modelu hierarchiczna Azure rozwiązania Cosmos DB baz danych, kolekcji, funkcji zdefiniowanych przez użytkownika (UDF), dokumentów, uprawnienia do zarządzania zasobami i inne."
keywords: Hierarchiczny model, cosmosdb azure, programu Microsoft azure
services: cosmos-db
documentationcenter: 
author: AndrewHoh
manager: jhubbard
editor: monicar
ms.assetid: ef9d5c0c-0867-4317-bb1b-98e219799fd5
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/24/2017
ms.author: anhoh
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 8051742c7c368d1ed84bcd90ab75b20f62105e2f
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/03/2017
---
# <a name="azure-cosmos-db-hierarchical-resource-model-and-core-concepts"></a><span data-ttu-id="b8ff3-104">Podstawowe pojęcia i hierarchiczny model zasobów usługi Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="b8ff3-104">Azure Cosmos DB hierarchical resource model and core concepts</span></span>
<span data-ttu-id="b8ff3-105">Jednostki bazy danych, które bazy danych Azure rozwiązania Cosmos zarządza są określane jako **zasobów**.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-105">The database entities that Azure Cosmos DB manages are referred to as **resources**.</span></span> <span data-ttu-id="b8ff3-106">Każdy zasób jest unikatowo identyfikowana przez logiczny identyfikator URI.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-106">Each resource is uniquely identified by a logical URI.</span></span> <span data-ttu-id="b8ff3-107">Użytkownik może interakcyjnie przeprowadzić zasobów przy użyciu standardowych poleceń HTTP, nagłówki żądań i odpowiedzi i kodów stanu.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-107">You can interact with the resources using standard HTTP verbs, request/response headers and status codes.</span></span> 

<span data-ttu-id="b8ff3-108">Przeczytaj ten artykuł, będziesz mieć możliwość odpowiedzieć na następujące pytania:</span><span class="sxs-lookup"><span data-stu-id="b8ff3-108">By reading this article, you'll be able to answer the following questions:</span></span>

* <span data-ttu-id="b8ff3-109">Co to jest model zasobów DB rozwiązania Cosmos?</span><span class="sxs-lookup"><span data-stu-id="b8ff3-109">What is Cosmos DB's resource model?</span></span>
* <span data-ttu-id="b8ff3-110">Co to są systemu zdefiniowanych zasobów przeciwieństwie zasoby zdefiniowane przez użytkownika?</span><span class="sxs-lookup"><span data-stu-id="b8ff3-110">What are system defined resources as opposed to user defined resources?</span></span>
* <span data-ttu-id="b8ff3-111">Jak rozwiązać zasobu?</span><span class="sxs-lookup"><span data-stu-id="b8ff3-111">How do I address a resource?</span></span>
* <span data-ttu-id="b8ff3-112">Jak pracować z kolekcjami</span><span class="sxs-lookup"><span data-stu-id="b8ff3-112">How do I work with collections?</span></span>
* <span data-ttu-id="b8ff3-113">Jak pracować z procedur składowanych, wyzwalaczy i funkcje zdefiniowane przez użytkownika (UDF)</span><span class="sxs-lookup"><span data-stu-id="b8ff3-113">How do I work with stored procedures, triggers and User Defined Functions (UDFs)?</span></span>

## <a name="hierarchical-resource-model"></a><span data-ttu-id="b8ff3-114">Model hierarchiczna zasobów</span><span class="sxs-lookup"><span data-stu-id="b8ff3-114">Hierarchical resource model</span></span>
<span data-ttu-id="b8ff3-115">Jak na poniższym diagramie przedstawiono hierarchiczna DB rozwiązania Cosmos **model zasobów** składa się z zestawów zasobów w ramach konta bazy danych, każda mogą być adresowane za pomocą logicznych i stabilny identyfikator URI.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-115">As the following diagram illustrates, the Cosmos DB hierarchical **resource model** consists of sets of resources under a database account, each addressable via a logical and stable URI.</span></span> <span data-ttu-id="b8ff3-116">Zestaw zasobów będą określone jako **źródła danych** w tym artykule.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-116">A set of resources will be referred to as a **feed** in this article.</span></span> 

> [!NOTE]
> <span data-ttu-id="b8ff3-117">Azure DB rozwiązania Cosmos oferuje wysoce efektywne protokołu TCP, który jest także RESTful jego model komunikacji dostępne za pośrednictwem [interfejs API klienta .NET usługi DocumentDB](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-117">Azure Cosmos DB offers a highly efficient TCP protocol which is also RESTful in its communication model, available through the [DocumentDB .NET client API](documentdb-sdk-dotnet.md).</span></span>
> 
> 

<span data-ttu-id="b8ff3-118">![Azure DB rozwiązania Cosmos hierarchiczna zasobów modelu][1]</span><span class="sxs-lookup"><span data-stu-id="b8ff3-118">![Azure Cosmos DB hierarchical resource model][1]</span></span>  
<span data-ttu-id="b8ff3-119">**Model hierarchiczna zasobów**</span><span class="sxs-lookup"><span data-stu-id="b8ff3-119">**Hierarchical resource model**</span></span>   

<span data-ttu-id="b8ff3-120">Aby rozpocząć pracę z zasobami, należy najpierw [Tworzenie konta bazy danych](create-documentdb-dotnet.md) przy użyciu subskrypcji platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-120">To start working with resources, you must [create a database account](create-documentdb-dotnet.md) using your Azure subscription.</span></span> <span data-ttu-id="b8ff3-121">Konto bazy danych może składać się z zestawem **baz danych**, każda z nich zawiera wiele **kolekcje**, każdy z które z kolei zawierają **procedury składowane, wyzwalacze, funkcje UDF, dokumenty**i pokrewnych **załączników**.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-121">A database account can consist of a set of **databases**, each containing multiple **collections**, each of which in turn contain **stored procedures, triggers, UDFs, documents** and related **attachments**.</span></span> <span data-ttu-id="b8ff3-122">Bazy danych ma również skojarzonych **użytkowników**, każdy z zestawem **uprawnienia** można uzyskać dostępu do kolekcji, procedur składowanych, wyzwalaczy, funkcji UDF, dokumentów lub załączników.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-122">A database also has associated **users**, each with a set of **permissions** to access collections, stored procedures, triggers, UDFs, documents or attachments.</span></span> <span data-ttu-id="b8ff3-123">Bazy danych, użytkownicy, uprawnienia i kolekcje są zdefiniowane w systemie zasoby z dobrze znanych schematów, dokumentów i załączniki zawierają dowolną, zdefiniowane przez użytkownika zawartość JSON.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-123">While databases, users, permissions and collections are system-defined resources with well-known schemas, documents and attachments contain arbitrary, user defined JSON content.</span></span>  

| <span data-ttu-id="b8ff3-124">Zasób</span><span class="sxs-lookup"><span data-stu-id="b8ff3-124">Resource</span></span> | <span data-ttu-id="b8ff3-125">Opis</span><span class="sxs-lookup"><span data-stu-id="b8ff3-125">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b8ff3-126">Konto bazy danych</span><span class="sxs-lookup"><span data-stu-id="b8ff3-126">Database account</span></span> |<span data-ttu-id="b8ff3-127">Konto bazy danych jest skojarzona z zestawu baz danych i stałą magazynu obiektów blob dla załączników.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-127">A database account is associated with a set of databases and a fixed amount of blob storage for attachments.</span></span> <span data-ttu-id="b8ff3-128">Można utworzyć co najmniej jedno konto bazy danych przy użyciu subskrypcji platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-128">You can create one or more database accounts using your Azure subscription.</span></span> <span data-ttu-id="b8ff3-129">Aby uzyskać więcej informacji można znaleźć w naszych [cennikiem](https://azure.microsoft.com/pricing/details/cosmos-db/).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-129">For more information, visit our [pricing page](https://azure.microsoft.com/pricing/details/cosmos-db/).</span></span> |
| <span data-ttu-id="b8ff3-130">Database (Baza danych)</span><span class="sxs-lookup"><span data-stu-id="b8ff3-130">Database</span></span> |<span data-ttu-id="b8ff3-131">Baza danych jest kontenerem logicznym magazynu dokumentów podzielonym na partycje w kolekcjach.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-131">A database is a logical container of document storage partitioned across collections.</span></span> <span data-ttu-id="b8ff3-132">Istnieje również kontener użytkowników.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-132">It is also a users container.</span></span> |
| <span data-ttu-id="b8ff3-133">Użytkownik</span><span class="sxs-lookup"><span data-stu-id="b8ff3-133">User</span></span> |<span data-ttu-id="b8ff3-134">Logiczne przestrzeń nazw dla zakresu uprawnień.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-134">The logical namespace for scoping permissions.</span></span> |
| <span data-ttu-id="b8ff3-135">Uprawnienie</span><span class="sxs-lookup"><span data-stu-id="b8ff3-135">Permission</span></span> |<span data-ttu-id="b8ff3-136">Token autoryzacji skojarzonych z użytkownikiem, aby uzyskać dostęp do określonego zasobu.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-136">An authorization token associated with a user for access to a specific resource.</span></span> |
| <span data-ttu-id="b8ff3-137">Collection</span><span class="sxs-lookup"><span data-stu-id="b8ff3-137">Collection</span></span> |<span data-ttu-id="b8ff3-138">Kolekcja jest kontenerem dokumentów JSON i skojarzonej logiki aplikacji JavaScript.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-138">A collection is a container of JSON documents and the associated JavaScript application logic.</span></span> <span data-ttu-id="b8ff3-139">Kolekcja to płatna jednostka, której [koszt](performance-levels.md) zależy od poziomu wydajności skojarzonego z tą kolekcją.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-139">A collection is a billable entity, where the [cost](performance-levels.md) is determined by the performance level associated with the collection.</span></span> <span data-ttu-id="b8ff3-140">Kolekcje mogą znajdować się na jednej lub wielu partycjach/serwerach i mogą być skalowane do obsługi praktycznie nieograniczonej ilości magazynu lub przepływności.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-140">Collections can span one or more partitions/servers and can scale to handle practically unlimited volumes of storage or throughput.</span></span> |
| <span data-ttu-id="b8ff3-141">Procedura składowana</span><span class="sxs-lookup"><span data-stu-id="b8ff3-141">Stored Procedure</span></span> |<span data-ttu-id="b8ff3-142">Logika aplikacji napisane w języku JavaScript, który jest zarejestrowany w kolekcji i transakcyjnie wykonywane w ramach aparatu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-142">Application logic written in JavaScript which is registered with a collection and transactionally executed within the database engine.</span></span> |
| <span data-ttu-id="b8ff3-143">Wyzwalacz</span><span class="sxs-lookup"><span data-stu-id="b8ff3-143">Trigger</span></span> |<span data-ttu-id="b8ff3-144">Logiki aplikacji napisane w języku JavaScript wykonane przed lub po każdej operacji insert, Zamień lub Usuń operację.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-144">Application logic written in JavaScript executed before or after either an insert, replace or delete operation.</span></span> |
| <span data-ttu-id="b8ff3-145">FUNKCJI ZDEFINIOWANEJ PRZEZ UŻYTKOWNIKA</span><span class="sxs-lookup"><span data-stu-id="b8ff3-145">UDF</span></span> |<span data-ttu-id="b8ff3-146">Logika aplikacji napisane w języku JavaScript.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-146">Application logic written in JavaScript.</span></span> <span data-ttu-id="b8ff3-147">Funkcje UDF umożliwiają modelu operator niestandardowe zapytania i tym samym rozszerzać język zapytań usługi DocumentDB interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-147">UDFs enable you to model a custom query operator and thereby extend the core DocumentDB API query language.</span></span> |
| <span data-ttu-id="b8ff3-148">Dokument</span><span class="sxs-lookup"><span data-stu-id="b8ff3-148">Document</span></span> |<span data-ttu-id="b8ff3-149">Zdefiniowane przez użytkownika (dowolną) zawartość JSON.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-149">User defined (arbitrary) JSON content.</span></span> <span data-ttu-id="b8ff3-150">Domyślnie Brak schematu musi być zdefiniowany ani indeksów pomocniczych, trzeba podać dla wszystkich dokumentów dodany do kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-150">By default, no schema needs to be defined nor do secondary indices need to be provided for all the documents added to a collection.</span></span> |
| <span data-ttu-id="b8ff3-151">Załącznika</span><span class="sxs-lookup"><span data-stu-id="b8ff3-151">Attachment</span></span> |<span data-ttu-id="b8ff3-152">Załącznik jest specjalny dokument zawierający odniesienia i skojarzone metadane dla obiekt blob/nośnika zewnętrznego.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-152">An attachment is a special document containing references and associated metadata for external blob/media.</span></span> <span data-ttu-id="b8ff3-153">Deweloper można wybrać obiektu blob zarządza DB rozwiązania Cosmos lub zapisz go z dostawcą usług zewnętrznych obiektów blob, np. OneDrive, Dropbox.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-153">The developer can choose to have the blob managed by Cosmos DB or store it with an external blob service provider such as OneDrive, Dropbox, etc.</span></span> |

## <a name="system-vs-user-defined-resources"></a><span data-ttu-id="b8ff3-154">System i zasoby zdefiniowane przez użytkownika</span><span class="sxs-lookup"><span data-stu-id="b8ff3-154">System vs. user defined resources</span></span>
<span data-ttu-id="b8ff3-155">Zasoby, takie jak konta bazy danych, bazy danych, kolekcji, użytkownicy, uprawnienia, procedur składowanych, wyzwalaczy i funkcji UDF — wszystkie mają stałego schematu i są nazywane zasobów systemowych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-155">Resources such as database accounts, databases, collections, users, permissions, stored procedures, triggers, and UDFs - all have a fixed schema and are called system resources.</span></span> <span data-ttu-id="b8ff3-156">Z kolei zasobów, takich jak dokumenty i załączników w schemacie nie obowiązują żadne ograniczenia i przedstawiono zasoby zdefiniowane przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-156">In contrast, resources such as documents and attachments have no restrictions on the schema and are examples of user defined resources.</span></span> <span data-ttu-id="b8ff3-157">Zasoby zdefiniowane rozwiązania Cosmos DB, systemowych i użytkownika są reprezentowane i zarządzane jako zgodne standard JSON.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-157">In Cosmos DB, both system and user defined resources are represented and managed as standard-compliant JSON.</span></span> <span data-ttu-id="b8ff3-158">Wszystkie zasoby systemu lub użytkownika, mają następujące wspólne właściwości.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-158">All resources, system or user defined, have the following common properties.</span></span>

> [!NOTE]
> <span data-ttu-id="b8ff3-159">Należy pamiętać, że wszystkie generowany przez system właściwości w zasobie mają przedrostek znaku podkreślenia (_) w ich reprezentacja JSON.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-159">Note that all system generated properties in a resource are prefixed with an underscore (_) in their JSON representation.</span></span>
> 
> 

<table>
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="b8ff3-160"><strong>Właściwość</strong></span><span class="sxs-lookup"><span data-stu-id="b8ff3-160"><strong>Property</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="b8ff3-161"><strong>Użytkownika można ustawić lub wygenerowany przez system?</strong></span><span class="sxs-lookup"><span data-stu-id="b8ff3-161"><strong>User settable or system generated?</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="b8ff3-162"><strong>Cel</strong></span><span class="sxs-lookup"><span data-stu-id="b8ff3-162"><strong>Purpose</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="b8ff3-163">_rid</span><span class="sxs-lookup"><span data-stu-id="b8ff3-163">_rid</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="b8ff3-164">Wygenerowany przez system</span><span class="sxs-lookup"><span data-stu-id="b8ff3-164">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="b8ff3-165">System generowany unikatowy i hierarchicznego identyfikator zasobu</span><span class="sxs-lookup"><span data-stu-id="b8ff3-165">System generated, unique and hierarchical identifier of the resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="b8ff3-166">_etag</span><span class="sxs-lookup"><span data-stu-id="b8ff3-166">_etag</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="b8ff3-167">Wygenerowany przez system</span><span class="sxs-lookup"><span data-stu-id="b8ff3-167">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="b8ff3-168">etag wymaga optymistyczne sterowanie współbieżnością zasobów</span><span class="sxs-lookup"><span data-stu-id="b8ff3-168">etag of the resource required for optimistic concurrency control</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="b8ff3-169">_ts</span><span class="sxs-lookup"><span data-stu-id="b8ff3-169">_ts</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="b8ff3-170">Wygenerowany przez system</span><span class="sxs-lookup"><span data-stu-id="b8ff3-170">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="b8ff3-171">Zaktualizowano sygnatura czasowa ostatniego zasobu</span><span class="sxs-lookup"><span data-stu-id="b8ff3-171">Last updated timestamp of the resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="b8ff3-172">_self</span><span class="sxs-lookup"><span data-stu-id="b8ff3-172">_self</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="b8ff3-173">Wygenerowany przez system</span><span class="sxs-lookup"><span data-stu-id="b8ff3-173">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="b8ff3-174">Unikatowy identyfikator adresowanego URI zasobu</span><span class="sxs-lookup"><span data-stu-id="b8ff3-174">Unique addressable URI of the resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="b8ff3-175">id</span><span class="sxs-lookup"><span data-stu-id="b8ff3-175">id</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="b8ff3-176">Wygenerowany przez system</span><span class="sxs-lookup"><span data-stu-id="b8ff3-176">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="b8ff3-177">Unikatowa nazwa zasobu (o tej samej wartości klucza partycji) zdefiniowane przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-177">User defined unique name of the resource (with the same partition key value).</span></span> <span data-ttu-id="b8ff3-178">Jeśli użytkownik nie określono identyfikatora, identyfikator będzie wygenerowany przez system</span><span class="sxs-lookup"><span data-stu-id="b8ff3-178">If the user does not specify an id, an id will be system generated</span></span></p></td>
        </tr>
    </tbody>
</table>

### <a name="wire-representation-of-resources"></a><span data-ttu-id="b8ff3-179">Reprezentacja przewodowy zasobów</span><span class="sxs-lookup"><span data-stu-id="b8ff3-179">Wire representation of resources</span></span>
<span data-ttu-id="b8ff3-180">Rozwiązania cosmos DB nie wprowadzić wszystkich rozszerzeń zastrzeżonych do kodowania standard lub specjalne JSON; działa ze standardowych zgodne dokumentów JSON.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-180">Cosmos DB does not mandate any proprietary extensions to the JSON standard or special encodings; it works with standard compliant JSON documents.</span></span>  

### <a name="addressing-a-resource"></a><span data-ttu-id="b8ff3-181">Adresowanie zasobu</span><span class="sxs-lookup"><span data-stu-id="b8ff3-181">Addressing a resource</span></span>
<span data-ttu-id="b8ff3-182">Wszystkie zasoby są adresowanego identyfikatora URI.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-182">All resources are URI addressable.</span></span> <span data-ttu-id="b8ff3-183">Wartość **_self** właściwość zasobu reprezentuje względny identyfikator URI zasobu.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-183">The value of the **_self** property of a resource represents the relative URI of the resource.</span></span> <span data-ttu-id="b8ff3-184">Format identyfikatora URI składa się z /\<źródła danych\>/ {_rid} segmenty ścieżki:</span><span class="sxs-lookup"><span data-stu-id="b8ff3-184">The format of the URI consists of the /\<feed\>/{_rid} path segments:</span></span>  

| <span data-ttu-id="b8ff3-185">Wartość _self</span><span class="sxs-lookup"><span data-stu-id="b8ff3-185">Value of the _self</span></span> | <span data-ttu-id="b8ff3-186">Opis</span><span class="sxs-lookup"><span data-stu-id="b8ff3-186">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b8ff3-187">/DBS</span><span class="sxs-lookup"><span data-stu-id="b8ff3-187">/dbs</span></span> |<span data-ttu-id="b8ff3-188">Źródło danych bazy danych w ramach konta bazy danych</span><span class="sxs-lookup"><span data-stu-id="b8ff3-188">Feed of databases under a database account</span></span> |
| <span data-ttu-id="b8ff3-189">/DBS/ {dbName}</span><span class="sxs-lookup"><span data-stu-id="b8ff3-189">/dbs/{dbName}</span></span> |<span data-ttu-id="b8ff3-190">Baza danych o identyfikatorze odpowiadającym wartości {dbName}</span><span class="sxs-lookup"><span data-stu-id="b8ff3-190">Database with an id matching the value {dbName}</span></span> |
| <span data-ttu-id="b8ff3-191">/colls/ /DBS/ {dbName}</span><span class="sxs-lookup"><span data-stu-id="b8ff3-191">/dbs/{dbName}/colls/</span></span> |<span data-ttu-id="b8ff3-192">Źródło danych kolekcji w bazie danych</span><span class="sxs-lookup"><span data-stu-id="b8ff3-192">Feed of collections under a database</span></span> |
| <span data-ttu-id="b8ff3-193">/colls/ /DBS/ {dbName} {collName}</span><span class="sxs-lookup"><span data-stu-id="b8ff3-193">/dbs/{dbName}/colls/{collName}</span></span> |<span data-ttu-id="b8ff3-194">Kolekcja o identyfikatorze odpowiadającym wartości {collName}</span><span class="sxs-lookup"><span data-stu-id="b8ff3-194">Collection with an id matching the value {collName}</span></span> |
| <span data-ttu-id="b8ff3-195">/colls/ /DBS/ {dbName} {collName} / docs</span><span class="sxs-lookup"><span data-stu-id="b8ff3-195">/dbs/{dbName}/colls/{collName}/docs</span></span> |<span data-ttu-id="b8ff3-196">Źródła danych dokumentów w kolekcji</span><span class="sxs-lookup"><span data-stu-id="b8ff3-196">Feed of documents under a collection</span></span> |
| <span data-ttu-id="b8ff3-197">/docs/ /colls/ {collName} /DBS/ {dbName} {identyfikator}</span><span class="sxs-lookup"><span data-stu-id="b8ff3-197">/dbs/{dbName}/colls/{collName}/docs/{docId}</span></span> |<span data-ttu-id="b8ff3-198">Dokument o identyfikatorze odpowiadającym wartości {doc}</span><span class="sxs-lookup"><span data-stu-id="b8ff3-198">Document with an id matching the value {doc}</span></span> |
| <span data-ttu-id="b8ff3-199">/users/ /DBS/ {dbName}</span><span class="sxs-lookup"><span data-stu-id="b8ff3-199">/dbs/{dbName}/users/</span></span> |<span data-ttu-id="b8ff3-200">Źródło danych użytkowników w bazie danych</span><span class="sxs-lookup"><span data-stu-id="b8ff3-200">Feed of users under a database</span></span> |
| <span data-ttu-id="b8ff3-201">/users/ /DBS/ {dbName} {userId}</span><span class="sxs-lookup"><span data-stu-id="b8ff3-201">/dbs/{dbName}/users/{userId}</span></span> |<span data-ttu-id="b8ff3-202">Użytkownik o identyfikatorze odpowiadającym wartości {użytkownika}</span><span class="sxs-lookup"><span data-stu-id="b8ff3-202">User with an id matching the value {user}</span></span> |
| <span data-ttu-id="b8ff3-203">/users/ /DBS/ {dbName} {userId} / uprawnień</span><span class="sxs-lookup"><span data-stu-id="b8ff3-203">/dbs/{dbName}/users/{userId}/permissions</span></span> |<span data-ttu-id="b8ff3-204">Źródło danych uprawnienia użytkownika</span><span class="sxs-lookup"><span data-stu-id="b8ff3-204">Feed of permissions under a user</span></span> |
| <span data-ttu-id="b8ff3-205">/permissions/ /users/ {userId} /DBS/ {dbName} {permissionId}</span><span class="sxs-lookup"><span data-stu-id="b8ff3-205">/dbs/{dbName}/users/{userId}/permissions/{permissionId}</span></span> |<span data-ttu-id="b8ff3-206">Uprawnienie o identyfikatorze odpowiadającym wartości {uprawnienie}</span><span class="sxs-lookup"><span data-stu-id="b8ff3-206">Permission with an id matching the value {permission}</span></span> |

<span data-ttu-id="b8ff3-207">Każdy zasób ma nazwę unikatowy zdefiniowane przez użytkownika udostępniane za pośrednictwem funkcji właściwość identyfikatora.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-207">Each resource has a unique user defined name exposed via the id property.</span></span> <span data-ttu-id="b8ff3-208">Uwaga: dla dokumentów, jeśli użytkownik nie określa identyfikator naszych obsługiwanych zestawów SDK automatycznie generuje unikatowy identyfikator dla dokumentu.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-208">Note: for documents, if the user does not specify an id, our supported SDKs will automatically generate a unique id for the document.</span></span> <span data-ttu-id="b8ff3-209">Identyfikator jest zdefiniowane przez użytkownika ciąg, maksymalnie 256 znaków, które jest unikatowa w ramach zasobu nadrzędnego określone.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-209">The id is a user defined string, of up to 256 characters that is unique within the context of a specific parent resource.</span></span> 

<span data-ttu-id="b8ff3-210">Każdego zasobu ma również identyfikator zasobu hierarchiczna wygenerowany przez system (zwaną także identyfikatorów RID), który jest dostępny za pośrednictwem właściwości _rid.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-210">Each resource also has a system generated hierarchical resource identifier (also referred to as an RID), which is available via the _rid property.</span></span> <span data-ttu-id="b8ff3-211">Identyfikator RID koduje całej hierarchii zasobu i jest wygodny reprezentacji wewnętrznej używanych do wymuszania integralności referencyjnej w sposób rozproszony.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-211">The RID encodes the entire hierarchy of a given resource and it is a convenient internal representation used to enforce referential integrity in a distributed manner.</span></span> <span data-ttu-id="b8ff3-212">Identyfikator RID jest unikatowy w ramach konta bazy danych i ona jest używana wewnętrznie przez rozwiązania Cosmos bazy danych dla wydajny routing, bez konieczności wyszukiwań krzyżowego partycji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-212">The RID is unique within a database account and it is internally used by Cosmos DB for efficient routing without requiring cross partition lookups.</span></span> <span data-ttu-id="b8ff3-213">Wartości _self i właściwości _rid są zarówno alternatywnych, jak i canonical reprezentacji zasobu.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-213">The values of the _self and the  _rid properties are both alternate and canonical representations of a resource.</span></span> 

<span data-ttu-id="b8ff3-214">Interfejsy API REST obsługują adresowania zasobów i routingu żądań przez zarówno identyfikatora i właściwości _rid.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-214">The REST APIs support addressing of resources and routing of requests by both the id and the _rid properties.</span></span>

## <a name="database-accounts"></a><span data-ttu-id="b8ff3-215">Konta bazy danych</span><span class="sxs-lookup"><span data-stu-id="b8ff3-215">Database accounts</span></span>
<span data-ttu-id="b8ff3-216">Można udostępnić co najmniej jednego rozwiązania Cosmos DB bazy danych konta przy użyciu subskrypcji platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-216">You can provision one or more Cosmos DB database accounts using your Azure subscription.</span></span>

<span data-ttu-id="b8ff3-217">Możesz utworzyć i zarządzać kontami bazy danych DB rozwiązania Cosmos za pośrednictwem portalu Azure pod adresem [http://portal.azure.com/](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-217">You can create and manage Cosmos DB database accounts via the Azure Portal at [http://portal.azure.com/](https://portal.azure.com/).</span></span> <span data-ttu-id="b8ff3-218">Tworzenie i zarządzanie nimi konta bazy danych wymaga dostępu administracyjnego i może zostać wykonane tylko w ramach Twojej subskrypcji platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-218">Creating and managing a database account requires administrative access and can only be performed under your Azure subscription.</span></span> 

### <a name="database-account-properties"></a><span data-ttu-id="b8ff3-219">Właściwości konta bazy danych</span><span class="sxs-lookup"><span data-stu-id="b8ff3-219">Database account properties</span></span>
<span data-ttu-id="b8ff3-220">W ramach inicjowania obsługi i zarządzania nimi konta bazy danych można skonfigurować i przeczytaj następujące właściwości:</span><span class="sxs-lookup"><span data-stu-id="b8ff3-220">As part of provisioning and managing a database account you can configure and read the following properties:</span></span>  

<table border="0" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="b8ff3-221"><strong>Nazwa właściwości</strong></span><span class="sxs-lookup"><span data-stu-id="b8ff3-221"><strong>Property Name</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="b8ff3-222"><strong>Opis</strong></span><span class="sxs-lookup"><span data-stu-id="b8ff3-222"><strong>Description</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="b8ff3-223">Zasady spójności</span><span class="sxs-lookup"><span data-stu-id="b8ff3-223">Consistency Policy</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="b8ff3-224">Ustaw tę właściwość, aby skonfigurować domyślny poziom spójności dla wszystkich zbiorów przy użyciu tego konta bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-224">Set this property to configure the default consistency level for all the collections under your database account.</span></span> <span data-ttu-id="b8ff3-225">Można zmienić poziomu zgodności dla danego żądania przy użyciu nagłówek żądania [x-ms--poziomu spójności].</span><span class="sxs-lookup"><span data-stu-id="b8ff3-225">You can override the consistency level on a per request basis using the [x-ms-consistency-level] request header.</span></span> <p><p><span data-ttu-id="b8ff3-226">Należy pamiętać, że ta właściwość ma zastosowanie tylko do <i>zasoby zdefiniowane przez użytkownika</i>.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-226">Note that this property only applies to the <i>user defined resources</i>.</span></span> <span data-ttu-id="b8ff3-227">System wszystkich zdefiniowanych zasobów są skonfigurowane do obsługi operacji odczytu/zapytania z wysoki poziom spójności.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-227">All system defined resources are configured to support reads/queries with strong consistency.</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="b8ff3-228">Klucze autoryzacji</span><span class="sxs-lookup"><span data-stu-id="b8ff3-228">Authorization Keys</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="b8ff3-229">Są to klucze podstawowe i pomocnicze wzorca i tylko do odczytu zapewniające dostęp administracyjny do wszystkich zasobów w ramach konta bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-229">These are the primary and secondary master and readonly keys that provide administrative access to all of the resources under the database account.</span></span></p></td>
        </tr>
    </tbody>
</table>

<span data-ttu-id="b8ff3-230">Uwaga Oprócz udostępniania, konfigurowanie i zarządzanie nimi konta bazy danych z portalu Azure można również programowo utworzenie i zarządzać przy użyciu konta bazy danych DB rozwiązania Cosmos [interfejsów API REST usługi Azure rozwiązania Cosmos DB](/rest/api/documentdb/) oraz [zestawów SDK klienta](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-230">Note that in addition to provisioning, configuring and managing your database account from the Azure Portal, you can also programmatically create and manage Cosmos DB database accounts by using the [Azure Cosmos DB REST APIs](/rest/api/documentdb/) as well as [client SDKs](documentdb-sdk-dotnet.md).</span></span>  

## <a name="databases"></a><span data-ttu-id="b8ff3-231">Bazy danych</span><span class="sxs-lookup"><span data-stu-id="b8ff3-231">Databases</span></span>
<span data-ttu-id="b8ff3-232">Bazy danych DB rozwiązania Cosmos jest kontenerem logicznym jedną lub więcej kolekcji i użytkowników, jak pokazano na poniższym diagramie.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-232">A Cosmos DB database is a logical container of one or more collections and users, as shown in the following diagram.</span></span> <span data-ttu-id="b8ff3-233">Można utworzyć dowolną liczbę baz danych w ramach konta bazy danych DB rozwiązania Cosmos limitom oferty.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-233">You can create any number of databases under a Cosmos DB database account subject to offer limits.</span></span>  

<span data-ttu-id="b8ff3-234">![Model bazy danych konta i kolekcje hierarchiczne][2]</span><span class="sxs-lookup"><span data-stu-id="b8ff3-234">![Database account and collections hierarchical model][2]</span></span>  
<span data-ttu-id="b8ff3-235">**Baza danych jest kontenerem logicznym użytkowników i kolekcji**</span><span class="sxs-lookup"><span data-stu-id="b8ff3-235">**A Database is a logical container of users and collections**</span></span>

<span data-ttu-id="b8ff3-236">Bazy danych może zawierać nieograniczoną dokumentu magazynu na partycje w kolekcjach.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-236">A database can contain virtually unlimited document storage partitioned within collections.</span></span>

### <a name="elastic-scale-of-a-cosmos-db-database"></a><span data-ttu-id="b8ff3-237">Elastyczne skalowanie bazy danych DB rozwiązania Cosmos</span><span class="sxs-lookup"><span data-stu-id="b8ff3-237">Elastic scale of a Cosmos DB database</span></span>
<span data-ttu-id="b8ff3-238">Baza danych DB rozwiązania Cosmos jest elastyczny domyślnie — od kilka GB do poziomu petabajtów dyski SSD kopię dokumentu, a udostępnionej przepływności.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-238">A Cosmos DB database is elastic by default – ranging from a few GB to petabytes of SSD backed document storage and provisioned throughput.</span></span> 

<span data-ttu-id="b8ff3-239">W przeciwieństwie do bazy danych w tradycyjnych RDBMS bazy danych w bazie danych rozwiązania Cosmos jest poza zakresem na jednym komputerze.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-239">Unlike a database in traditional RDBMS, a database in Cosmos DB is not scoped to a single machine.</span></span> <span data-ttu-id="b8ff3-240">DB rozwiązania Cosmos potrzeb skalowania aplikacji rośnie, można utworzyć więcej kolekcji i baz danych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-240">With Cosmos DB, as your application’s scale needs to grow, you can create more collections, databases, or both.</span></span> <span data-ttu-id="b8ff3-241">W rzeczywistości różne aplikacje firm pierwszy w programie Microsoft korzystają DB rozwiązania Cosmos w skali konsumenta tworząc bardzo dużych baz danych DB rozwiązania Cosmos każdego zawierającego tysiące kolekcje z terabajtów miejsca do magazynowania dokumentu.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-241">Indeed, various first party applications within Microsoft have been using Cosmos DB at a consumer scale by creating extremely large Cosmos DB databases each containing thousands of collections with terabytes of document storage.</span></span> <span data-ttu-id="b8ff3-242">Można zwiększać i zmniejszać bazy danych przez dodanie lub usunięcie kolekcji w celu spełnienia wymagań skali aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-242">You can grow or shrink a database by adding or removing collections to meet your application’s scale requirements.</span></span> 

<span data-ttu-id="b8ff3-243">Można utworzyć dowolną liczbę kolekcji w bazie danych może ulec oferty.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-243">You can create any number of collections within a database subject to the offer.</span></span> <span data-ttu-id="b8ff3-244">Każda kolekcja ma kopii dyski SSD, a zainicjowanej dla Ciebie w zależności od warstwy wydajności wybranej przepływności.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-244">Each collection has SSD backed storage and throughput provisioned for you depending on the selected performance tier.</span></span>

<span data-ttu-id="b8ff3-245">Bazy danych DB rozwiązania Cosmos jest również kontener użytkowników.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-245">A Cosmos DB database is also a container of users.</span></span> <span data-ttu-id="b8ff3-246">Użytkownik, w ruchu jest logiczną przestrzeń nazw dla zestaw uprawnień, który zawiera szczegółowe autoryzacji i dostępu do kolekcji, dokumentów i załączników.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-246">A user, in-turn, is a logical namespace for a set of permissions that provides fine-grained authorization and access to collections, documents and attachments.</span></span>  

<span data-ttu-id="b8ff3-247">Zgodnie z innymi zasobami w model zasobów bazy danych rozwiązania Cosmos baz danych można tworzyć, zastąpiony, usunięty, odczytać lub wyliczyć łatwo za pomocą [interfejsów API REST](/rest/api/documentdb/) lub [zestawów SDK klienta](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-247">As with other resources in the Cosmos DB resource model, databases can be created, replaced, deleted, read or enumerated easily using either the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="b8ff3-248">Rozwiązania cosmos DB zapewnia wysoki poziom spójności odczytu lub zapytanie dotyczące metadanych zasobu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-248">Cosmos DB guarantees strong consistency for reading or querying the metadata of a database resource.</span></span> <span data-ttu-id="b8ff3-249">Automatyczne usunięcie bazy danych zapewnia, że nie masz dostępu do żadnego z kolekcji lub użytkowników w nim zawarte.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-249">Deleting a database automatically ensures that you cannot access any of the collections or users contained within it.</span></span>   

## <a name="collections"></a><span data-ttu-id="b8ff3-250">Kolekcje</span><span class="sxs-lookup"><span data-stu-id="b8ff3-250">Collections</span></span>
<span data-ttu-id="b8ff3-251">Kolekcja DB rozwiązania Cosmos jest kontenerem dokumentów JSON.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-251">A Cosmos DB collection is a container for your JSON documents.</span></span> 

### <a name="elastic-ssd-backed-document-storage"></a><span data-ttu-id="b8ff3-252">Elastyczne SSD kopii magazynu dokumentów</span><span class="sxs-lookup"><span data-stu-id="b8ff3-252">Elastic SSD backed document storage</span></span>
<span data-ttu-id="b8ff3-253">Kolekcja jest bardzo elastyczny — automatycznie rozwoju i zmniejszana, jak dodać lub usunąć dokumentów.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-253">A collection is intrinsically elastic - it automatically grows and shrinks as you add or remove documents.</span></span> <span data-ttu-id="b8ff3-254">Kolekcje są zasoby logicznej i może obejmować co najmniej jednej partycji fizycznej lub serwerów.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-254">Collections are logical resources and can span one or more physical partitions or servers.</span></span> <span data-ttu-id="b8ff3-255">Liczba partycji w ramach kolekcji zależy od rozwiązania Cosmos bazy danych na podstawie rozmiaru pamięci masowej i przepływność kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-255">The number of partitions within a collection is determined by Cosmos DB based on the storage size and the provisioned throughput of your collection.</span></span> <span data-ttu-id="b8ff3-256">Każdej partycji w bazie danych rozwiązania Cosmos ma stałą kopie dysków SSD magazynu skojarzone z nim i są replikowane w celu zapewnienia wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-256">Every partition in Cosmos DB has a fixed amount of SSD-backed storage associated with it, and is replicated for high availability.</span></span> <span data-ttu-id="b8ff3-257">Zarządzanie partycji pełni zarządza bazy danych Azure rozwiązania Cosmos i nie trzeba pisania złożonego kodu lub Zarządzanie partycjami.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-257">Partition management is fully managed by Azure Cosmos DB, and you do not have to write complex code or manage your partitions.</span></span> <span data-ttu-id="b8ff3-258">Kolekcje rozwiązania cosmos bazy danych są **praktycznie nieograniczonej** pod względem pamięci masowej i przepływność.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-258">Cosmos DB collections are **practically unlimited** in terms of storage and throughput.</span></span> 

### <a name="automatic-indexing-of-collections"></a><span data-ttu-id="b8ff3-259">Automatycznego indeksowania w kolekcji</span><span class="sxs-lookup"><span data-stu-id="b8ff3-259">Automatic indexing of collections</span></span>
<span data-ttu-id="b8ff3-260">Rozwiązania cosmos bazy danych jest systemem true bazy danych bez schematu.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-260">Cosmos DB is a true schema-free database system.</span></span> <span data-ttu-id="b8ff3-261">Nie przyjmuje ani nie wymaga żadnego schematu dla dokumentów JSON.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-261">It does not assume or require any schema for the JSON documents.</span></span> <span data-ttu-id="b8ff3-262">Dokumenty podczas dodawania do kolekcji, DB rozwiązania Cosmos automatycznie indeksuje je i są dostępne dla Ciebie do zapytania.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-262">As you add documents to a collection, Cosmos DB automatically indexes them and they are available for you to query.</span></span> <span data-ttu-id="b8ff3-263">Automatyczne indeksowanie dokumentów, bez konieczności schematu lub indeksów pomocniczych jest kluczowych możliwości rozwiązania Cosmos bazy danych i jest włączony technikami konserwacji indeksu zoptymalizowanych pod kątem zapisu, zwolnić blokady i opartą na strukturze dziennika.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-263">Automatic indexing of documents without requiring schema or secondary indexes is a key capability of Cosmos DB and is enabled by write-optimized, lock-free and log-structured index maintenance techniques.</span></span> <span data-ttu-id="b8ff3-264">Rozwiązania cosmos bazy danych obsługuje stałej ilości bardzo szybkiego zapisu służąc nadal spójne zapytania.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-264">Cosmos DB supports sustained volume of extremely fast writes while still serving consistent queries.</span></span> <span data-ttu-id="b8ff3-265">Dokument programu i indeksu magazynu są używane do obliczania magazynu wykorzystanych w ramach każdej kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-265">Both document and index storage are used to calculate the storage consumed by each collection.</span></span> <span data-ttu-id="b8ff3-266">Można kontrolować, magazynu i wydajności kompromisy skojarzone z indeksowania Konfigurując zasady indeksowania dla kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-266">You can control the storage and performance trade-offs associated with indexing by configuring the indexing policy for a collection.</span></span> 

### <a name="configuring-the-indexing-policy-of-a-collection"></a><span data-ttu-id="b8ff3-267">Konfigurowanie zasady indeksowania w kolekcji</span><span class="sxs-lookup"><span data-stu-id="b8ff3-267">Configuring the indexing policy of a collection</span></span>
<span data-ttu-id="b8ff3-268">Zasady indeksowania wszystkich kolekcji pozwala wprowadzić wydajności i magazynu kompromisy skojarzone z indeksowania.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-268">The indexing policy of each collection allows you to make performance and storage trade-offs associated with indexing.</span></span> <span data-ttu-id="b8ff3-269">W ramach konfiguracji indeksowania dostępne są następujące opcje:</span><span class="sxs-lookup"><span data-stu-id="b8ff3-269">The following options are available to you as part of indexing configuration:</span></span>  

* <span data-ttu-id="b8ff3-270">Wybierz, czy kolekcja automatycznie indeksuje wszystkie dokumenty lub nie.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-270">Choose whether the collection automatically indexes all of the documents or not.</span></span> <span data-ttu-id="b8ff3-271">Domyślnie wszystkie dokumenty są automatycznie indeksowane.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-271">By default, all documents are automatically indexed.</span></span> <span data-ttu-id="b8ff3-272">Można wyłączyć automatyczne indeksowanie i selektywnie dodać tylko dokumenty do indeksu.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-272">You can choose to turn off automatic indexing and selectively add only specific documents to the index.</span></span> <span data-ttu-id="b8ff3-273">Z drugiej strony selektywnie można wykluczyć tylko określonych dokumentów.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-273">Conversely, you can selectively choose to exclude only specific documents.</span></span> <span data-ttu-id="b8ff3-274">Można to osiągnąć przez ustawienie automatyczne właściwość jako wartość true lub false na indexingPolicy kolekcji i użycie nagłówka żądania [x-ms-indexingdirective] podczas wstawiania, zastępowanie lub usuwanie dokumentu.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-274">You can achieve this by setting the automatic property to be true or false on the indexingPolicy of a collection and using the [x-ms-indexingdirective] request header while inserting, replacing or deleting a document.</span></span>  
* <span data-ttu-id="b8ff3-275">Określ, czy do dołączania lub wykluczania określonych ścieżek lub wzorce w dokumentach z indeksu.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-275">Choose whether to include or exclude specific paths or patterns in your documents from the index.</span></span> <span data-ttu-id="b8ff3-276">Można to osiągnąć przez ustawienie includedPaths i excludedPaths na indexingPolicy kolekcji odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-276">You can achieve this by setting includedPaths and excludedPaths on the indexingPolicy of a collection respectively.</span></span> <span data-ttu-id="b8ff3-277">Można również skonfigurować magazynu i wydajności kompromisy dla zapytań o zakres i wyznaczania wartości skrótu dla wzorców określonej ścieżki.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-277">You can also configure the storage and performance trade-offs for range and hash queries for specific path patterns.</span></span> 
* <span data-ttu-id="b8ff3-278">Wybór między synchroniczne (zgodne) i aktualizacje asynchroniczne indeksu (lazy).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-278">Choose between synchronous (consistent) and asynchronous (lazy) index updates.</span></span> <span data-ttu-id="b8ff3-279">Domyślnie indeks jest aktualizowana synchronicznie na każdym insert, replace lub usuwania dokumentu do kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-279">By default, the index is updated synchronously on each insert, replace or delete of a document to the collection.</span></span> <span data-ttu-id="b8ff3-280">Dzięki temu zapytania uwzględnić poziomu spójności co odczytuje dokument.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-280">This enables the queries to honor the same consistency level as that of the document reads.</span></span> <span data-ttu-id="b8ff3-281">DB rozwiązania Cosmos jest zoptymalizowany zapisu i obsługuje woluminy utrzymujących zapisów dokumentu oraz konserwacji synchroniczne indeksu i obsługujący spójne kwerendy, można skonfigurować pewne kolekcji, aby zaktualizować ich indeksu w trybie opóźnienia.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-281">While Cosmos DB is write optimized and supports sustained volumes of document writes along with synchronous index maintenance and serving consistent queries, you can configure certain collections to update their index lazily.</span></span> <span data-ttu-id="b8ff3-282">Indeksowanie z opóźnieniem zwiększa wydajność zapisu dalsze i jest idealny dla scenariuszy wprowadzanie zbiorczego głównie ciężki odczytu kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-282">Lazy indexing boosts the write performance further and is ideal for bulk ingestion scenarios for primarily read-heavy collections.</span></span>

<span data-ttu-id="b8ff3-283">Zasady indeksowania można zmienić, wykonując PUT w kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-283">The indexing policy can be changed by executing a PUT on the collection.</span></span> <span data-ttu-id="b8ff3-284">Można to osiągnąć za pośrednictwem [zestawu SDK klienta](documentdb-sdk-dotnet.md), [Azure Portal](https://portal.azure.com) lub [interfejsów API REST](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-284">This can be achieved either through the [client SDK](documentdb-sdk-dotnet.md), the [Azure Portal](https://portal.azure.com) or the [REST APIs](/rest/api/documentdb/).</span></span>

### <a name="querying-a-collection"></a><span data-ttu-id="b8ff3-285">Wykonywanie zapytania kolekcji</span><span class="sxs-lookup"><span data-stu-id="b8ff3-285">Querying a collection</span></span>
<span data-ttu-id="b8ff3-286">Dokumentów w ramach kolekcji może zawierać dowolne schematów i dokumentów w kolekcji można zbadać bez podawania żadnego schematu lub wyprzedzeniem indeksów pomocniczych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-286">The documents within a collection can have arbitrary schemas and you can query documents within a collection without providing any schema or secondary indices upfront.</span></span> <span data-ttu-id="b8ff3-287">Można zbadać za pomocą kolekcji [interfejsu API Azure rozwiązania Cosmos bazy danych DocumentDB: odwołania do składni SQL](https://msdn.microsoft.com/library/azure/dn782250.aspx), zapewniające sformatowanego operatorów hierarchiczna relacyjnych i przestrzennych i rozszerzalność dzięki oparte na języku JavaScript funkcji UDF.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-287">You can query the collection using the [Azure Cosmos DB DocumentDB API: SQL syntax reference](https://msdn.microsoft.com/library/azure/dn782250.aspx), which provides rich hierarchical, relational, and spatial operators and extensibility via JavaScript-based UDFs.</span></span> <span data-ttu-id="b8ff3-288">Gramatyka JSON umożliwia modelowanie dokumentów JSON jako drzewa z etykietami jako węzłami drzewa.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-288">JSON grammar allows for modeling JSON documents as trees with labels as the tree nodes.</span></span> <span data-ttu-id="b8ff3-289">To jest wykorzystywana zarówno przez techniki automatycznego indeksowania usługi DocumentDB interfejsu API, a także dialekt SQL usługi DocumentDB interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-289">This is exploited both by DocumentDB API’s automatic indexing techniques as well as DocumentDB API's SQL dialect.</span></span> <span data-ttu-id="b8ff3-290">Język zapytania interfejsu API DocumetDB składa się z trzech głównych aspektach:</span><span class="sxs-lookup"><span data-stu-id="b8ff3-290">The DocumetDB API query language consists of three main aspects:</span></span>   

1. <span data-ttu-id="b8ff3-291">Niewielki zestaw operacji zapytania, które mapowania naturalnie struktura drzewa, w tym hierarchiczna zapytania i prognozy.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-291">A small set of query operations that map naturally to the tree structure including hierarchical queries and projections.</span></span> 
2. <span data-ttu-id="b8ff3-292">Podzbiór relacyjne operacji, w tym kompozycji, filtr, projekcje, agreguje i self sprzężenia.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-292">A subset of relational operations including composition, filter, projections, aggregates and self joins.</span></span> 
3. <span data-ttu-id="b8ff3-293">Czysty JavaScript na podstawie funkcji UDF, które współpracują z (1) i (2).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-293">Pure JavaScript based UDFs that work with (1) and (2).</span></span>  

<span data-ttu-id="b8ff3-294">Model zapytań DB rozwiązania Cosmos próbuje równowagę między funkcji, wydajności i prostota.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-294">The Cosmos DB query model attempts to strike a balance between functionality, efficiency and simplicity.</span></span> <span data-ttu-id="b8ff3-295">Aparat bazy danych DB rozwiązania Cosmos natywnie kompiluje i wykonuje instrukcje zapytania SQL.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-295">The Cosmos DB database engine natively compiles and executes the SQL query statements.</span></span> <span data-ttu-id="b8ff3-296">Można zbadać kolekcji przy użyciu [interfejsów API REST](/rest/api/documentdb/) lub [zestawów SDK klienta](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-296">You can query a collection using the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="b8ff3-297">Zestaw .NET SDK jest dostarczany z dostawcy LINQ.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-297">The .NET SDK comes with a LINQ provider.</span></span>

> [!TIP]
> <span data-ttu-id="b8ff3-298">Można wypróbować interfejsu API usługi DocumentDB i wykonywania kwerend SQL do naszego zestawu danych w [Plac zabaw dla zapytań](https://www.documentdb.com/sql/demo).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-298">You can try out the DocumentDB API and run SQL queries against our dataset in the [Query Playground](https://www.documentdb.com/sql/demo).</span></span>
> 
> 

## <a name="multi-document-transactions"></a><span data-ttu-id="b8ff3-299">Transakcji wielu dokumentów</span><span class="sxs-lookup"><span data-stu-id="b8ff3-299">Multi-document transactions</span></span>
<span data-ttu-id="b8ff3-300">Transakcji bazy danych Podaj bezpieczne i przewidywalne model programowania zajmujących się równoczesnych zmian danych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-300">Database transactions provide a safe and predictable programming model for dealing with concurrent changes to the data.</span></span> <span data-ttu-id="b8ff3-301">W RDBMS, należy napisać tradycyjny sposób zapisu logiki biznesowej **procedur składowanych** i/lub **wyzwalaczy** i wysyłane do serwera bazy danych dla transakcyjnego wykonywania.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-301">In RDBMS, the traditional way to write business logic is to write **stored-procedures** and/or **triggers** and ship it to the database server for transactional execution.</span></span> <span data-ttu-id="b8ff3-302">W RDBMS programistom jest niezbędnego do dwóch różnych języków programowania:</span><span class="sxs-lookup"><span data-stu-id="b8ff3-302">In RDBMS, the application programmer is required to deal with two disparate programming languages:</span></span> 

* <span data-ttu-id="b8ff3-303">(Nietransakcyjnej) aplikacji programowania języka (np. JavaScript, Python, C#, Java, itp.)</span><span class="sxs-lookup"><span data-stu-id="b8ff3-303">The (non-transactional) application programming language (e.g. JavaScript, Python, C#, Java, etc.)</span></span>
* <span data-ttu-id="b8ff3-304">T-SQL, transakcyjnego języka programowania, które natywnie jest wykonywane przez bazę danych</span><span class="sxs-lookup"><span data-stu-id="b8ff3-304">T-SQL, the transactional programming language which is natively executed by the database</span></span>

<span data-ttu-id="b8ff3-305">Ze względu na jego głębokie zaangażowanie JavaScript i JSON bezpośrednio wewnątrz aparatu bazy danych DB rozwiązania Cosmos zapewnia intuicyjny model programowania do wykonywania logiki aplikacji JavaScript na podstawie bezpośrednio w kolekcjach pod względem procedur składowanych i wyzwalaczy.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-305">By virtue of its deep commitment to JavaScript and JSON directly within the database engine, Cosmos DB provides an intuitive programming model for executing JavaScript based application logic directly on the collections in terms of stored procedures and triggers.</span></span> <span data-ttu-id="b8ff3-306">Dzięki temu dla obu z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="b8ff3-306">This allows for both of the following:</span></span>

* <span data-ttu-id="b8ff3-307">Efektywne wykonanie współbieżności kontrolować odzyskiwania automatycznego indeksowania wykresów obiektów JSON bezpośrednio w aparacie bazy danych</span><span class="sxs-lookup"><span data-stu-id="b8ff3-307">Efficient implementation of concurrency control, recovery, automatic indexing of the JSON object graphs directly in the database engine</span></span>
* <span data-ttu-id="b8ff3-308">Naturalnie wyrażanie przepływu sterowania, zmiennej zakresu przypisania i integracji podstawowych transakcji bazy danych bezpośrednio pod względem JavaScript język programowania, obsługa wyjątków</span><span class="sxs-lookup"><span data-stu-id="b8ff3-308">Naturally expressing control flow, variable scoping, assignment and integration of exception handling primitives with database transactions directly in terms of the JavaScript programming language</span></span>

<span data-ttu-id="b8ff3-309">Logiki JavaScript zarejestrowany na poziomie kolekcji można następnie wystawiania operacje bazy danych na dokumentach danej kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-309">The JavaScript logic registered at a collection level can then issue database operations on the documents of the given collection.</span></span> <span data-ttu-id="b8ff3-310">Rozwiązania cosmos DB niejawnie opakowuje oparty na języku JavaScript procedury składowane i wyzwalacze w ramach transakcje ACID otoczenia, z użyciem izolacji migawki wszystkich dokumentów w kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-310">Cosmos DB implicitly wraps the JavaScript based stored procedures and triggers within an ambient ACID transactions with snapshot isolation across documents within a collection.</span></span> <span data-ttu-id="b8ff3-311">Jeśli w trakcie wykonywania logiki JavaScript zgłosi ona wyjątek, cała transakcja zostaje przerwana.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-311">During the course of its execution, if the JavaScript throws an exception, then the entire transaction is aborted.</span></span> <span data-ttu-id="b8ff3-312">Wynikowa modelu programowania jest bardzo prosty jeszcze zaawansowanych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-312">The resulting programming model is a very simple yet powerful.</span></span> <span data-ttu-id="b8ff3-313">Deweloperzy JavaScript Pobierz model programowania "trwałe" podczas nadal przy użyciu konstrukcji języka znanych i biblioteki w nim elementów podstawowych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-313">JavaScript developers get a “durable” programming model while still using their familiar language constructs and library primitives.</span></span>   

<span data-ttu-id="b8ff3-314">Możliwość wykonania JavaScript bezpośrednio wewnątrz aparatu bazy danych w przestrzeni adresowej jako pula buforów umożliwia wydajności i transakcyjnego wykonywania operacji bazy danych dla dokumentów w kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-314">The ability to execute JavaScript directly within the database engine in the same address space as the buffer pool enables performant and transactional execution of database operations against the documents of a collection.</span></span> <span data-ttu-id="b8ff3-315">Ponadto aparat bazy danych DB rozwiązania Cosmos ułatwia głębokie zaangażowanie JSON i JavaScript eliminuje wszelkie impedancji niezgodność między systemami typu aplikacji i bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-315">Furthermore, Cosmos DB database engine makes a deep commitment to the JSON and JavaScript eliminates any impedance mismatch between the type systems of application and the database.</span></span>   

<span data-ttu-id="b8ff3-316">Po utworzeniu kolekcji, możesz zarejestrować procedur składowanych, wyzwalaczy i funkcji UDF z kolekcji przy użyciu [interfejsów API REST](/rest/api/documentdb/) lub [zestawów SDK klienta](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-316">After creating a collection, you can register stored procedures, triggers and UDFs with a collection using the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="b8ff3-317">Po rejestracji można odwoływać się i ich wykonanie.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-317">After registration, you can reference and execute them.</span></span> <span data-ttu-id="b8ff3-318">Należy rozważyć następujące procedury składowanej napisanych w całości w JavaScript, poniższy kod przyjmuje dwa argumenty (Nazwa książki i nazwisko autora) i tworzy nowy dokument, wysyła zapytanie do dokumentu i następnie aktualizuje go — wszystko w ramach transakcji ACID niejawnej.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-318">Consider the following stored procedure written entirely in JavaScript, the code below takes two arguments (book name and author name) and creates a new document, queries for a document and then updates it – all within an implicit ACID transaction.</span></span> <span data-ttu-id="b8ff3-319">W dowolnym momencie podczas wykonywania Jeśli zgłoszono wyjątek JavaScript, cała transakcja jest przerywana.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-319">At any point during the execution, if a JavaScript exception is thrown, the entire transaction aborts.</span></span>

    function businessLogic(name, author) {
        var context = getContext();
        var collectionManager = context.getCollection();        
        var collectionLink = collectionManager.getSelfLink()

        // create a new document.
        collectionManager.createDocument(collectionLink,
            {id: name, author: author},
            function(err, documentCreated) {
                if(err) throw new Error(err.message);

                // filter documents by author
                var filterQuery = "SELECT * from root r WHERE r.author = 'George R.'";
                collectionManager.queryDocuments(collectionLink,
                    filterQuery,
                    function(err, matchingDocuments) {
                        if(err) throw new Error(err.message);

                        context.getResponse().setBody(matchingDocuments.length);

                        // Replace the author name for all documents that satisfied the query.
                        for (var i = 0; i < matchingDocuments.length; i++) {
                            matchingDocuments[i].author = "George R. R. Martin";
                            // we don’t need to execute a callback because they are in parallel
                            collectionManager.replaceDocument(matchingDocuments[i]._self,
                                matchingDocuments[i]);   
                        }
                    })
            })
    };

<span data-ttu-id="b8ff3-320">Klienta można "wysłać" powyżej logiki JavaScript do bazy danych dla transakcyjnego wykonywania za pośrednictwem protokołu HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-320">The client can “ship” the above JavaScript logic to the database for transactional execution via HTTP POST.</span></span> <span data-ttu-id="b8ff3-321">Aby uzyskać więcej informacji o korzystaniu z metody HTTP, zobacz [RESTful interakcji z zasobami Azure DB rozwiązania Cosmos](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-321">For more information about using HTTP methods, see [RESTful interactions with Azure Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span> 

    client.createStoredProcedureAsync(collection._self, {id: "CRUDProc", body: businessLogic})
       .then(function(createdStoredProcedure) {
            return client.executeStoredProcedureAsync(createdStoredProcedure.resource._self,
                "NoSQL Distilled",
                "Martin Fowler");
        })
        .then(function(result) {
            console.log(result);
        },
        function(error) {
            console.log(error);
        });


<span data-ttu-id="b8ff3-322">Należy zauważyć, że ponieważ bazy danych natywnie obsługuje usługę JSON oraz języka JavaScript, nie jest nie niezgodność typów w systemie, "OR mapowania" ani wymagane magic generowania kodu.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-322">Notice that because the database natively understands JSON and JavaScript, there is no type system mismatch, no “OR mapping” or code generation magic required.</span></span>   

<span data-ttu-id="b8ff3-323">Procedury składowane i wyzwalaczy współdziałają z kolekcji i dokumentów w kolekcji za pomocą modelu dobrze zdefiniowanego obiektu, który udostępnia bieżącego kontekstu kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-323">Stored procedures and triggers interact with a collection and the documents in a collection through a well-defined object model, which exposes the current collection context.</span></span>  

<span data-ttu-id="b8ff3-324">Kolekcje w interfejsie API usługi DocumentDB można utworzyć, usunięto, odczytu lub wyliczeniowego, łatwo za pomocą [interfejsów API REST](/rest/api/documentdb/) lub [zestawów SDK klienta](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-324">Collections in the DocumentDB API can be created, deleted, read or enumerated easily using either the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="b8ff3-325">Zawsze interfejsu API usługi DocumentDB zapewnia wysoki poziom spójności odczytu lub zapytanie dotyczące metadanych kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-325">The DocumentDB API always provides strong consistency for reading or querying the metadata of a collection.</span></span> <span data-ttu-id="b8ff3-326">Usuwanie kolekcji automatycznie gwarantuje, że nie masz dostępu do tych dokumentów, załączniki, procedur składowanych, wyzwalaczy i funkcji UDF w nim zawarte.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-326">Deleting a collection automatically ensures that you cannot access any of the documents, attachments, stored procedures, triggers, and UDFs contained within it.</span></span>   

## <a name="stored-procedures-triggers-and-user-defined-functions-udf"></a><span data-ttu-id="b8ff3-327">Procedur składowanych, wyzwalaczy i funkcji zdefiniowanych użytkownika (UDF)</span><span class="sxs-lookup"><span data-stu-id="b8ff3-327">Stored procedures, triggers and User Defined Functions (UDF)</span></span>
<span data-ttu-id="b8ff3-328">Zgodnie z opisem w poprzedniej sekcji, można napisać logiki aplikacji do uruchamiania bezpośrednio z poziomu transakcji wewnątrz aparatu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-328">As described in the previous section, you can write application logic to run directly within a transaction inside of the database engine.</span></span> <span data-ttu-id="b8ff3-329">Logiki aplikacji mogą być zapisywane w całości w języku JavaScript i mogą być modelowane jako procedury przechowywanej, wyzwalacza lub funkcji zdefiniowanej przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-329">The application logic can be written entirely in JavaScript and can be modeled as a stored procedure, trigger or a UDF.</span></span> <span data-ttu-id="b8ff3-330">Kod JavaScript w ramach procedury składowanej lub wyzwalacza można wstawić, Zastąp, usuwanie, odczytu lub zapytania dokumentów w kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-330">The JavaScript code within a stored procedure or a trigger can insert, replace, delete, read or query documents within a collection.</span></span> <span data-ttu-id="b8ff3-331">Z drugiej strony JavaScript w funkcji zdefiniowanej przez użytkownika nie może wstawić, Zamień lub usuwanie dokumentów.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-331">On the other hand, the JavaScript within a UDF cannot insert, replace, or delete documents.</span></span> <span data-ttu-id="b8ff3-332">Funkcje UDF wyliczyć dokumenty zestawu wyników zapytania i utworzyć inny zestaw wyników.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-332">UDFs enumerate the documents of a query's result set and produce another result set.</span></span> <span data-ttu-id="b8ff3-333">Dla wielu dzierżawców DB rozwiązania Cosmos wymusza ładu zasobów strict rezerwacji na podstawie.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-333">For multi-tenancy, Cosmos DB enforces a strict reservation based resource governance.</span></span> <span data-ttu-id="b8ff3-334">Przechowywane procedury, wyzwalacza lub UDF pobiera stałym quantum zasobów systemu operacyjnego, aby wykonać swoją pracę.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-334">Each stored procedure, trigger or a UDF gets a fixed quantum of operating system resources to do its work.</span></span> <span data-ttu-id="b8ff3-335">Ponadto procedur składowanych, wyzwalaczy i funkcji UDF nie można połączyć z zewnętrznej biblioteki języka JavaScript i traktowane są jako zabronione przekraczających budżetów zasobów przydzielonych do nich.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-335">Furthermore, stored procedures, triggers or UDFs cannot link against external JavaScript libraries and are blacklisted if they exceed the resource budgets allocated to them.</span></span> <span data-ttu-id="b8ff3-336">Możesz zarejestrować, wyrejestruj procedur składowanych, wyzwalaczy i funkcji UDF z kolekcji przy użyciu interfejsów API REST.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-336">You can register, unregister stored procedures, triggers or UDFs with a collection by using the REST APIs.</span></span>  <span data-ttu-id="b8ff3-337">Po rejestracji procedury przechowywanej, wyzwalacza lub funkcji zdefiniowanej przez użytkownika jest wstępnie skompilowany i przechowywane jako kod bajtowy, który jest wykonywany później.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-337">Upon registration a stored procedure, trigger, or a UDF is pre-compiled and stored as byte code which gets executed later.</span></span> <span data-ttu-id="b8ff3-338">Poniższej sekcji przedstawiono, jak SDK JavaScript DB rozwiązania Cosmos można użyć do rejestracji, wykonaj i wyrejestruj procedury składowanej, wyzwalaczy i funkcji zdefiniowanej przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-338">The following section illustrate how you can use the Cosmos DB JavaScript SDK to register, execute, and unregister a stored procedure, trigger, and a UDF.</span></span> <span data-ttu-id="b8ff3-339">Zestaw SDK JavaScript jest proste otoki za pośrednictwem [interfejsów API REST](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-339">The JavaScript SDK is a simple wrapper over the [REST APIs](/rest/api/documentdb/).</span></span> 

### <a name="registering-a-stored-procedure"></a><span data-ttu-id="b8ff3-340">Rejestrowanie procedury składowanej</span><span class="sxs-lookup"><span data-stu-id="b8ff3-340">Registering a stored procedure</span></span>
<span data-ttu-id="b8ff3-341">Rejestracja procedury składowanej tworzy nowy zasób procedury składowanej w kolekcji za pośrednictwem protokołu HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-341">Registration of a stored procedure creates a new stored procedure resource on a collection via HTTP POST.</span></span>  

    var storedProc = {
        id: "validateAndCreate",
        body: function (documentToCreate) {
            documentToCreate.id = documentToCreate.id.toUpperCase();

            var collectionManager = getContext().getCollection();
            collectionManager.createDocument(collectionManager.getSelfLink(),
                documentToCreate,
                function(err, documentCreated) {
                    if(err) throw new Error('Error while creating document: ' + err.message;
                    getContext().getResponse().setBody('success - created ' + 
                            documentCreated.name);
                });
        }
    };

    client.createStoredProcedureAsync(collection._self, storedProc)
        .then(function (createdStoredProcedure) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-stored-procedure"></a><span data-ttu-id="b8ff3-342">Wykonywanie procedury przechowywanej</span><span class="sxs-lookup"><span data-stu-id="b8ff3-342">Executing a stored procedure</span></span>
<span data-ttu-id="b8ff3-343">Wykonywanie procedury składowanej odbywa się przez wystawienie przez przekazywanie parametrów do procedury w treści żądania HTTP POST z istniejącego zasobu procedury składowanej.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-343">Execution of a stored procedure is done by issuing an HTTP POST against an existing stored procedure resource by passing parameters to the procedure in the request body.</span></span>

    var inputDocument = {id : "document1", author: "G. G. Marquez"};
    client.executeStoredProcedureAsync(createdStoredProcedure.resource._self, inputDocument)
        .then(function(executionResult) {
            assert.equal(executionResult, "success - created DOCUMENT1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-stored-procedure"></a><span data-ttu-id="b8ff3-344">Wyrejestrowywanie procedury składowanej</span><span class="sxs-lookup"><span data-stu-id="b8ff3-344">Unregistering a stored procedure</span></span>
<span data-ttu-id="b8ff3-345">Wyrejestrowywanie procedury składowanej po prostu odbywa się przez wystawienie HTTP DELETE przed istniejący zasób procedury składowanej.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-345">Unregistering a stored procedure is simply done by issuing an HTTP DELETE against an existing stored procedure resource.</span></span>   

    client.deleteStoredProcedureAsync(createdStoredProcedure.resource._self)
        .then(function (response) {
            return;
        }, function(error) {
            console.log("Error");
        });


### <a name="registering-a-pre-trigger"></a><span data-ttu-id="b8ff3-346">Rejestrowanie wyzwalacz wstępnego</span><span class="sxs-lookup"><span data-stu-id="b8ff3-346">Registering a pre-trigger</span></span>
<span data-ttu-id="b8ff3-347">Rejestracja wyzwalacz należy utworzyć nowy zasób wyzwalacza w kolekcji za pośrednictwem protokołu HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-347">Registration of a trigger is done by creating a new trigger resource on a collection via HTTP POST.</span></span> <span data-ttu-id="b8ff3-348">Można określić wyzwalacza jest wstępnie lub wyzwalacza post i typ operacji może być skojarzony z (np. Utwórz, Replace, Delete lub wszystkie).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-348">You can specify if the trigger is a pre or a post trigger and the type of operation it can be associated with (e.g. Create, Replace, Delete, or All).</span></span>   

    var preTrigger = {
        id: "upperCaseId",
        body: function() {
                var item = getContext().getRequest().getBody();
                item.id = item.id.toUpperCase();
                getContext().getRequest().setBody(item);
        },
        triggerType: TriggerType.Pre,
        triggerOperation: TriggerOperation.All
    }

    client.createTriggerAsync(collection._self, preTrigger)
        .then(function (createdPreTrigger) {
            console.log("Successfully created trigger");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-pre-trigger"></a><span data-ttu-id="b8ff3-349">Wykonywania wyzwalacza wstępnego</span><span class="sxs-lookup"><span data-stu-id="b8ff3-349">Executing a pre-trigger</span></span>
<span data-ttu-id="b8ff3-350">Odbywa się wykonywania wyzwalacza, określając nazwę istniejącego wyzwalacza w momencie żądania POST/PUT/usuwania zasobu dokumentu za pomocą nagłówek żądania.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-350">Execution of a trigger is done by specifying the name of an existing trigger at the time of issuing the POST/PUT/DELETE request of a document resource via the request header.</span></span>  

    client.createDocumentAsync(collection._self, { id: "doc1", key: "Love in the Time of Cholera" }, { preTriggerInclude: "upperCaseId" })
        .then(function(createdDocument) {
            assert.equal(createdDocument.resource.id, "DOC1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-pre-trigger"></a><span data-ttu-id="b8ff3-351">Wyrejestrowywanie wyzwalacz wstępnego</span><span class="sxs-lookup"><span data-stu-id="b8ff3-351">Unregistering a pre-trigger</span></span>
<span data-ttu-id="b8ff3-352">Wyrejestrowywanie wyzwalacz po prostu odbywa się za pośrednictwem wydania HTTP DELETE przed istniejący zasób wyzwalacza.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-352">Unregistering a trigger is simply done via issuing an HTTP DELETE against an existing trigger resource.</span></span>  

    client.deleteTriggerAsync(createdPreTrigger._self);
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

### <a name="registering-a-udf"></a><span data-ttu-id="b8ff3-353">Rejestrowanie funkcji zdefiniowanej przez użytkownika</span><span class="sxs-lookup"><span data-stu-id="b8ff3-353">Registering a UDF</span></span>
<span data-ttu-id="b8ff3-354">Rejestracja funkcji zdefiniowanej przez użytkownika została wykonana przez utworzenie nowego zasobu funkcji zdefiniowanej przez użytkownika na kolekcję za pośrednictwem protokołu HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-354">Registration of a UDF is done by creating a new UDF resource on a collection via HTTP POST.</span></span>  

    var udf = { 
        id: "mathSqrt",
        body: function(number) {
                return Math.sqrt(number);
        },
    };
    client.createUserDefinedFunctionAsync(collection._self, udf)
        .then(function (createdUdf) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-udf-as-part-of-the-query"></a><span data-ttu-id="b8ff3-355">Wykonywanie UDF w ramach zapytania</span><span class="sxs-lookup"><span data-stu-id="b8ff3-355">Executing a UDF as part of the query</span></span>
<span data-ttu-id="b8ff3-356">Funkcji zdefiniowanej przez użytkownika może być określona jako część zapytania SQL i jest używany jako sposób rozszerzać [język zapytań SQL usługi DocumentDB interfejsu API](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-356">A UDF can be specified as part of the SQL query and is used as a way to extend the core [SQL query language for the DocumentDB API](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span></span>

    var filterQuery = "SELECT udf.mathSqrt(r.Age) AS sqrtAge FROM root r WHERE r.FirstName='John'";
    client.queryDocuments(collection._self, filterQuery).toArrayAsync();
        .then(function(queryResponse) {
            var queryResponseDocuments = queryResponse.feed;
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-udf"></a><span data-ttu-id="b8ff3-357">Wyrejestrowywanie funkcji zdefiniowanej przez użytkownika</span><span class="sxs-lookup"><span data-stu-id="b8ff3-357">Unregistering a UDF</span></span>
<span data-ttu-id="b8ff3-358">Wyrejestrowywanie UDF po prostu odbywa się przez wystawienie HTTP DELETE przed istniejący zasób funkcji zdefiniowanej przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-358">Unregistering a UDF is simply done by issuing an HTTP DELETE against an existing UDF resource.</span></span>  

    client.deleteUserDefinedFunctionAsync(createdUdf._self)
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

<span data-ttu-id="b8ff3-359">Mimo że wstawki powyżej wykazało rejestracji (POST), Wyrejestrowanie (PUT) i odczytu/listy (GET) oraz wykonywania (POST) za pośrednictwem [JavaScript SDK](https://github.com/Azure/azure-documentdb-js), można również użyć [interfejsów API REST](/rest/api/documentdb/) lub innych [ zestawy SDK klienta](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-359">Although the snippets above showed the registration (POST), unregistration (PUT), read/list (GET) and execution (POST) via the [JavaScript SDK](https://github.com/Azure/azure-documentdb-js), you can also use the [REST APIs](/rest/api/documentdb/) or other [client SDKs](documentdb-sdk-dotnet.md).</span></span> 

## <a name="documents"></a><span data-ttu-id="b8ff3-360">Dokumenty</span><span class="sxs-lookup"><span data-stu-id="b8ff3-360">Documents</span></span>
<span data-ttu-id="b8ff3-361">Możesz wstawić, Zastąp, usunąć, odczytu, wyliczenia i zapytania dowolnych dokumentów JSON w kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-361">You can insert, replace, delete, read, enumerate and query arbitrary JSON documents in a collection.</span></span> <span data-ttu-id="b8ff3-362">Rozwiązania cosmos DB nie wprowadzić żadnego schematu i nie wymaga indeksów pomocniczych w celu zapewnienia obsługi zapytań za pośrednictwem dokumentów w kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-362">Cosmos DB does not mandate any schema and does not require secondary indexes in order to support querying over documents in a collection.</span></span> <span data-ttu-id="b8ff3-363">Maksymalny rozmiar dokumentu jest 2 MB.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-363">The maximum size for a document is 2 MB.</span></span>   

<span data-ttu-id="b8ff3-364">Trwa usługi naprawdę otwartej bazy danych, DB rozwiązania Cosmos nie magazynowa wszystkie typy danych specjalne (np. godzina) lub określonego kodowania dla dokumentów JSON.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-364">Being a truly open database service, Cosmos DB does not invent any specialized data types (e.g. date time) or specific encodings for JSON documents.</span></span> <span data-ttu-id="b8ff3-365">Należy pamiętać, że rozwiązania Cosmos bazy danych nie wymaga żadnych specjalnych konwencje JSON do skodyfikować relacje między różnymi dokumentami; Składnia SQL DB rozwiązania Cosmos zapewnia bardzo zaawansowane hierarchicznej i relacyjne kwerenda operatory zapytań i projektu dokumentów bez adnotacji specjalnych lub konieczność skodyfikować relacje dokumentów za pomocą różnych właściwości.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-365">Note that Cosmos DB does not require any special JSON conventions to codify the relationships among various documents; the SQL syntax of Cosmos DB provides very powerful hierarchical and relational query operators to query and project documents without any special annotations or need to codify relationships among documents using distinguished properties.</span></span>  

<span data-ttu-id="b8ff3-366">Zgodnie z wszystkimi innymi zasobami dokumenty mogą być tworzone zastąpiony, usunięty, odczytu, wyliczyć i wyświetlić łatwo przy użyciu interfejsów API REST lub dowolnym [zestawów SDK klienta](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-366">As with all other resources, documents can be created, replaced, deleted, read, enumerated and queried easily using either REST APIs or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="b8ff3-367">Usuwanie dokumentu natychmiast zwolni przydziału odpowiadający wszystkich zagnieżdżonych załączników.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-367">Deleting a document instantly frees up the quota corresponding to all of the nested attachments.</span></span> <span data-ttu-id="b8ff3-368">Poziom spójności odczytu dokumentów następuje zasady spójności na konto bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-368">The read consistency level of documents follows the consistency policy on the database account.</span></span> <span data-ttu-id="b8ff3-369">Ta zasada może być zastąpiona na podstawie danego żądania, w zależności od wymagań spójności danych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-369">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="b8ff3-370">Podczas wykonywania zapytań dotyczących dokumentów, spójności odczytu następuje trybu indeksowania ustawić w kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-370">When querying documents, the read consistency follows the indexing mode set on the collection.</span></span> <span data-ttu-id="b8ff3-371">Dla "spójne" wynika to zasady spójności dla konta.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-371">For “consistent”, this follows the account’s consistency policy.</span></span> 

## <a name="attachments-and-media"></a><span data-ttu-id="b8ff3-372">Załączników i nośników</span><span class="sxs-lookup"><span data-stu-id="b8ff3-372">Attachments and media</span></span>
<span data-ttu-id="b8ff3-373">Rozwiązania cosmos bazy danych służy do przechowywania obiektów blob binary/nośnika za pomocą rozwiązania Cosmos bazy danych (maksymalnie 2 GB na konto) lub do magazynu zdalnego nośnika.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-373">Cosmos DB allows you to store binary blobs/media either with Cosmos DB (maximum of 2 GB per account) or to your own remote media store.</span></span> <span data-ttu-id="b8ff3-374">Można też do reprezentowania metadanych nośnika pod względem specjalny dokument o nazwie załącznika.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-374">It also allows you to represent the metadata of a media in terms of a special document called attachment.</span></span> <span data-ttu-id="b8ff3-375">Załącznik DB rozwiązania Cosmos jest specjalny dokument (JSON), który odwołuje się do nośnika blob przechowywane w innym miejscu.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-375">An attachment in Cosmos DB is a special (JSON) document that references the media/blob stored elsewhere.</span></span> <span data-ttu-id="b8ff3-376">Załącznik jest po prostu specjalny dokument, który przechwytuje metadane nośników przechowywanych w magazynie zdalnym nośnika (np. Lokalizacja, autora itp.).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-376">An attachment is simply a special document that captures the metadata (e.g. location, author etc.) of a media stored in a remote media storage.</span></span> 

<span data-ttu-id="b8ff3-377">Należy wziąć pod uwagę aplikacji odczytu społecznościowych, której używa do przechowywania odręcznego rozwiązania Cosmos bazy danych i metadanych, w tym komentarzy, wyróżnia, zakładki, klasyfikacje, podobne/dislikes itp., skojarzony e-book danego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-377">Consider a social reading application which uses Cosmos DB to store ink annotations, and metadata including comments, highlights, bookmarks, ratings, likes/dislikes etc. associated for an e-book of a given user.</span></span>   

* <span data-ttu-id="b8ff3-378">Książki sam jest przechowywana zawartość w magazynie nośnika albo dostępne jako część konta bazy danych DB rozwiązania Cosmos lub magazynu zdalnego nośnika.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-378">The content of the book itself is stored in the media storage either available as part of Cosmos DB database account or a remote media store.</span></span> 
* <span data-ttu-id="b8ff3-379">Aplikacja może przechowywać metadanych każdego użytkownika jako odrębne dokument — np. metadane Jana Skoroszyt1 są przechowywane w dokumencie odwołuje się /colls/joe/docs/book1.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-379">An application may store each user’s metadata as a distinct document -- e.g. Joe’s metadata for book1 is stored in a document referenced by /colls/joe/docs/book1.</span></span> 
* <span data-ttu-id="b8ff3-380">Załączniki wskazujący zawartości stron księgi danego użytkownika są przechowywane w odpowiedni dokument, np. /colls/joe/docs/book1/chapter1 /colls/joe/docs/book1/chapter2 itp.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-380">Attachments pointing to the content pages of a given book of a user are stored under the corresponding document e.g. /colls/joe/docs/book1/chapter1, /colls/joe/docs/book1/chapter2 etc.</span></span> 

<span data-ttu-id="b8ff3-381">Należy pamiętać, że powyższe przykłady przyjazną identyfikatorów w celu przekazania hierarchii zasobów.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-381">Note that the examples listed above use friendly ids to convey the resource hierarchy.</span></span> <span data-ttu-id="b8ff3-382">Zasoby są dostępne za pośrednictwem interfejsów API REST za pośrednictwem zasobów unikatowych identyfikatorów.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-382">Resources are accessed via the REST APIs through unique resource ids.</span></span> 

<span data-ttu-id="b8ff3-383">Dla nośnika, który jest zarządzany przez rozwiązania Cosmos DB właściwość _media załącznik będzie odwoływać się do nośnika przez jego identyfikator URI.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-383">For the media that is managed by Cosmos DB, the _media property of the attachment will reference the media by its URI.</span></span> <span data-ttu-id="b8ff3-384">Zapewnia rozwiązania cosmos DB odzyskiwanie zbieranie nośnik, po upuszczeniu wszystkich oczekujących odwołań.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-384">Cosmos DB will ensure to garbage collect the media when all of the outstanding references are dropped.</span></span> <span data-ttu-id="b8ff3-385">Rozwiązania cosmos DB automatycznie generuje załącznika podczas przekazywania nowego nośnika i wypełnienie _media wskaż nowo dodanego nośnika.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-385">Cosmos DB automatically generates the attachment when you upload the new media and populates the _media to point to the newly added media.</span></span> <span data-ttu-id="b8ff3-386">Jeśli zdecydujesz się przechowywać nośnika w magazynie obiektów blob zdalnego zarządzany przez użytkownika (np. OneDrive, usługi Azure Storage, DropBox itp.), można nadal używać załączników do odwołania nośnika.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-386">If you choose to store the media in a remote blob store managed by you (e.g. OneDrive, Azure Storage, DropBox etc), you can still use attachments to reference the media.</span></span> <span data-ttu-id="b8ff3-387">W takim przypadku utworzysz załącznik samodzielnie i wypełnić jego właściwość _media.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-387">In this case, you will create the attachment yourself and populate its _media property.</span></span>   

<span data-ttu-id="b8ff3-388">Podobnie jak w przypadku wszystkich innych zasobów, załączniki mogą być tworzone, zastąpione, usunięty, odczytać lub wyliczyć za pomocą interfejsów API REST lub w dowolnej z zestawów SDK klienta.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-388">As with all other resources, attachments can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of the client SDKs.</span></span> <span data-ttu-id="b8ff3-389">Podobnie jak w przypadku dokumentów, poziomu spójności odczytu załączników następuje zasad spójności na konto bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-389">As with documents, the read consistency level of attachments follows the consistency policy on the database account.</span></span> <span data-ttu-id="b8ff3-390">Ta zasada może być zastąpiona na podstawie danego żądania, w zależności od wymagań spójności danych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-390">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="b8ff3-391">Podczas wykonywania zapytania dla załączników, spójności odczytu następuje trybu indeksowania ustawić w kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-391">When querying for attachments, the read consistency follows the indexing mode set on the collection.</span></span> <span data-ttu-id="b8ff3-392">Dla "spójne" wynika to zasady spójności dla konta.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-392">For “consistent”, this follows the account’s consistency policy.</span></span> 
 

## <a name="users"></a><span data-ttu-id="b8ff3-393">Użytkownicy</span><span class="sxs-lookup"><span data-stu-id="b8ff3-393">Users</span></span>
<span data-ttu-id="b8ff3-394">Użytkownik DB rozwiązania Cosmos reprezentuje logiczny obszar nazw, do grupowania uprawnień.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-394">A Cosmos DB user represents a logical namespace for grouping permissions.</span></span> <span data-ttu-id="b8ff3-395">Użytkownik rozwiązania Cosmos DB mogą odpowiadać użytkownika w systemie zarządzania tożsamości lub ról wstępnie zdefiniowanych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-395">A Cosmos DB user may correspond to a user in an identity management system or a predefined application role.</span></span> <span data-ttu-id="b8ff3-396">Rozwiązania Cosmos bazy danych użytkownik po prostu reprezentuje abstrakcję do grupowania zestawu uprawnień w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-396">For Cosmos DB, a user simply represents an abstraction to group a set of permissions under a database.</span></span>   

<span data-ttu-id="b8ff3-397">Wykonywania wielu dzierżawców w aplikacji, można utworzyć użytkowników w bazie danych rozwiązania Cosmos, co odpowiada rzeczywistych użytkowników lub dzierżawcami tej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-397">For implementing multi-tenancy in your application, you can create users in Cosmos DB which corresponds to your actual users or the tenants of your application.</span></span> <span data-ttu-id="b8ff3-398">Następnie można utworzyć uprawnienia dla danego użytkownika, które odpowiadają kontroli dostępu w różnych kolekcjach dokumentów, załączniki, itp.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-398">You can then create permissions for a given user that correspond to the access control over various collections, documents, attachments, etc.</span></span>   

<span data-ttu-id="b8ff3-399">Jak aplikacje, muszą skalować z rozwojem użytkownika, można przyjąć różne sposoby niezależnego fragmentu danych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-399">As your applications need to scale with your user growth, you can adopt various ways to shard your data.</span></span> <span data-ttu-id="b8ff3-400">Każdy z użytkowników może modelu w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="b8ff3-400">You can model each of your users as follows:</span></span>   

* <span data-ttu-id="b8ff3-401">Każdy użytkownik mapuje do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-401">Each user maps to a database.</span></span>
* <span data-ttu-id="b8ff3-402">Każdy użytkownik mapuje do kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-402">Each user maps to a collection.</span></span> 
* <span data-ttu-id="b8ff3-403">Dokumenty odpowiadający wielu użytkowników przejdź do dedykowanych kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-403">Documents corresponding to multiple users go to a dedicated collection.</span></span> 
* <span data-ttu-id="b8ff3-404">Dokumenty odpowiadający wielu użytkowników przejdź do zestaw kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-404">Documents corresponding to multiple users go to a set of collections.</span></span>   

<span data-ttu-id="b8ff3-405">Niezależnie od strategii dzielenia na fragmenty określonych wybierzesz, można modelu rzeczywistych użytkowników jako użytkowników w bazie danych DB rozwiązania Cosmos i skojarzyć szczegółowe uprawnienia do poszczególnych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-405">Regardless of the specific sharding strategy you choose, you can model your actual users as users in Cosmos DB database and associate fine grained permissions to each user.</span></span>  

<span data-ttu-id="b8ff3-406">![Kolekcje użytkowników][3]</span><span class="sxs-lookup"><span data-stu-id="b8ff3-406">![User collections][3]</span></span>  
<span data-ttu-id="b8ff3-407">**Strategii dzielenia na fragmenty i modelowania użytkowników**</span><span class="sxs-lookup"><span data-stu-id="b8ff3-407">**Sharding strategies and modeling users**</span></span>

<span data-ttu-id="b8ff3-408">Podobnie jak wszystkie inne zasoby użytkowników do rozwiązania Cosmos bazy danych można tworzyć, zastąpione, usunięty, odczytać lub wyliczyć za pomocą interfejsów API REST lub w dowolnej z zestawów SDK klienta.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-408">Like all other resources, users in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of the client SDKs.</span></span> <span data-ttu-id="b8ff3-409">Rozwiązania cosmos bazy danych zawsze zapewnia wysoki poziom spójności odczytu lub zapytanie dotyczące metadanych użytkownika zasobu.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-409">Cosmos DB always provides strong consistency for reading or querying the metadata of a user resource.</span></span> <span data-ttu-id="b8ff3-410">Warto wskazujące, to automatycznie usunięcie użytkownika zapewnia, że nie masz dostępu do tych uprawnień w nim zawarte.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-410">It is worth pointing out that deleting a user automatically ensures that you cannot access any of the permissions contained within it.</span></span> <span data-ttu-id="b8ff3-411">Mimo że bazę danych rozwiązania Cosmos zwraca przydziału uprawnień jako część usuwanego użytkownika w tle, usunięto uprawnienia są dostępne natychmiast ponownie do użycia.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-411">Even though the Cosmos DB reclaims the quota of the permissions as part of the deleted user in the background, the deleted permissions is available instantly again for you to use.</span></span>  

## <a name="permissions"></a><span data-ttu-id="b8ff3-412">Uprawnienia</span><span class="sxs-lookup"><span data-stu-id="b8ff3-412">Permissions</span></span>
<span data-ttu-id="b8ff3-413">Z perspektywy kontroli dostępu do zasobów, takich jak konta bazy danych, bazy danych, użytkowników i uprawnienia są traktowane jako *administracyjne* zasobów, ponieważ wymagają one wykonywania uprawnień administracyjnych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-413">From an access control perspective, resources such as database accounts, databases, users and permission are considered *administrative* resources since these require administrative permissions.</span></span> <span data-ttu-id="b8ff3-414">Z drugiej strony, zasobów, w tym kolekcje, dokumenty, załączniki, procedury składowane, wyzwalacze, i funkcje UDF są zakresu w określonej bazie danych i uznane za *zasoby aplikacji*.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-414">On the other hand, resources including the collections, documents, attachments, stored procedures, triggers, and UDFs are scoped under a given database and considered *application resources*.</span></span> <span data-ttu-id="b8ff3-415">Odpowiadającej dwa typy zasobów i role, które uzyskują dostęp do nich (to znaczy administratora i użytkownika), modelu autoryzacji definiuje dwa typy *klucze dostępu*: *klucza głównego* i  *Klucz zasobu*.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-415">Corresponding to the two types of resources and the roles that access them (namely the administrator and user), the authorization model defines two types of *access keys*: *master key* and *resource key*.</span></span> <span data-ttu-id="b8ff3-416">Klucz główny jest część konta bazy danych i został dostarczony do deweloperów (lub administratora) który aprowizacji konta bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-416">The master key is a part of the database account and is provided to the developer (or administrator) who is provisioning the database account.</span></span> <span data-ttu-id="b8ff3-417">Ten klucz główny ma semantykę administrator może służyć do autoryzacji dostępu do zasobów z aplikacją i administracyjnych.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-417">This master key has administrator semantics, in that it can be used to authorize access to both administrative and application resources.</span></span> <span data-ttu-id="b8ff3-418">Z kolei klucz zasobu jest kluczem szczegółowego dostępu, który zezwala na dostęp do *określonych* zasobów aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-418">In contrast, a resource key is a granular access key that allows access to a *specific* application resource.</span></span> <span data-ttu-id="b8ff3-419">W związku z tym umożliwia przechwytywanie relacji między użytkownikiem bazy danych i uprawnienia użytkownika dla określonego zasobu (np. kolekcji, dokumentów, załącznik, procedury składowanej, wyzwalacza lub funkcji zdefiniowanej przez użytkownika).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-419">Thus, it captures the relationship between the user of a database and the permissions the user has for a specific resource (e.g. collection, document, attachment, stored procedure, trigger, or UDF).</span></span>   

<span data-ttu-id="b8ff3-420">Jedynym sposobem na uzyskanie klucza zasobu jest tworzenie zasobu uprawnień danego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-420">The only way to obtain a resource key is by creating a permission resource under a given user.</span></span> <span data-ttu-id="b8ff3-421">Należy pamiętać, że aby było możliwe utworzenie ani pobrać uprawnień, klucz główny należy przedstawić w nagłówku autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-421">Note that In order to create or retrieve a permission, a master key must be presented in the authorization header.</span></span> <span data-ttu-id="b8ff3-422">Zasób uprawnienia wiąże zasobu, dostęp do niej oraz użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-422">A permission resource ties the resource, its access and the user.</span></span> <span data-ttu-id="b8ff3-423">Po utworzeniu zasobu uprawnienia, użytkownik musi tylko do prezentowania klucza zasobów w celu uzyskania dostępu do odpowiednich zasobów.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-423">After creating a permission resource, the user only needs to present the associated resource key in order to gain access to the relevant resource.</span></span> <span data-ttu-id="b8ff3-424">W związku z tym klucz zasobu można wyświetlić jako logicznych i compact reprezentacji zasobu uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-424">Hence, a resource key can be viewed as a logical and compact representation of the permission resource.</span></span>  

<span data-ttu-id="b8ff3-425">Jako ze wszystkimi innymi zasobami uprawnienia do rozwiązania Cosmos bazy danych można tworzyć, zastąpione, usunięty, odczytać lub wyliczyć za pomocą interfejsów API REST lub w dowolnej z zestawów SDK klienta.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-425">As with all other resources, permissions in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of the client SDKs.</span></span> <span data-ttu-id="b8ff3-426">Rozwiązania cosmos bazy danych zawsze zapewnia wysoki poziom spójności odczytu lub zapytanie dotyczące metadanych uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="b8ff3-426">Cosmos DB always provides strong consistency for reading or querying the metadata of a permission.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="b8ff3-427">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="b8ff3-427">Next steps</span></span>
<span data-ttu-id="b8ff3-428">Dowiedz się więcej o pracy z zasobami przy użyciu poleceń HTTP w [RESTful interakcji z zasobami DB rozwiązania Cosmos](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span><span class="sxs-lookup"><span data-stu-id="b8ff3-428">Learn more about working with resources by using HTTP commands in [RESTful interactions with Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span>

[1]: media/documentdb-resources/resources1.png
[2]: media/documentdb-resources/resources2.png
[3]: media/documentdb-resources/resources3.png

