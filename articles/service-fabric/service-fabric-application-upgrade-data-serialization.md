---
title: 'Uaktualnianie aplikacji: serializacja danych | Dokumentacja firmy Microsoft'
description: "Najlepsze rozwiązania dla serializacji danych i jak wpływa na uaktualnienia równoległe aplikacji."
services: service-fabric
documentationcenter: .net
author: vturecek
manager: timlt
editor: 
ms.assetid: a5f36366-a2ab-4ae3-bb08-bc2f9533bc5a
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: vturecek
ms.openlocfilehash: 1b65dfd3813423550631490640a81953864f58e3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="how-data-serialization-affects-an-application-upgrade"></a><span data-ttu-id="38adb-103">Jak serializacja danych wpływa na uaktualnienia aplikacji</span><span class="sxs-lookup"><span data-stu-id="38adb-103">How data serialization affects an application upgrade</span></span>
<span data-ttu-id="38adb-104">W [aplikacji uaktualnienia stopniowego](service-fabric-application-upgrade.md), uaktualnienie hello jest stosowane tooa podzbioru węzłów, domeny uaktualnienia pojedynczo.</span><span class="sxs-lookup"><span data-stu-id="38adb-104">In a [rolling application upgrade](service-fabric-application-upgrade.md), hello upgrade is applied tooa subset of nodes, one upgrade domain at a time.</span></span> <span data-ttu-id="38adb-105">W trakcie tego procesu niektórych domen uaktualnienia znajdują się na powitania nowsza wersja aplikacji, a niektórych domen uaktualnienia znajdują się na powitania starszej wersji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="38adb-105">During this process, some upgrade domains are on hello newer version of your application, and some upgrade domains are on hello older version of your application.</span></span> <span data-ttu-id="38adb-106">Podczas fazy hello hello nowej wersji aplikacji musi być możliwe tooread hello starą wersję danych, a hello starą wersję aplikacji musi być możliwe tooread hello nowej wersji danych.</span><span class="sxs-lookup"><span data-stu-id="38adb-106">During hello rollout, hello new version of your application must be able tooread hello old version of your data, and hello old version of your application must be able tooread hello new version of your data.</span></span> <span data-ttu-id="38adb-107">Jeśli format danych hello nie jest zgodny, uaktualnienie hello do przodu i do tyłu może zakończy się awarią lub gorsza, dane mogą być utracone lub uszkodzony.</span><span class="sxs-lookup"><span data-stu-id="38adb-107">If hello data format is not forward and backward compatible, hello upgrade may fail, or worse, data may be lost or corrupted.</span></span> <span data-ttu-id="38adb-108">W tym artykule opisano, co stanowi formatu danych i oferuje najlepsze rozwiązania dotyczące zapewnienie, że dane są do przodu i do tyłu zgodne.</span><span class="sxs-lookup"><span data-stu-id="38adb-108">This article discusses what constitutes your data format and offers best practices for ensuring that your data is forward and backward compatible.</span></span>

## <a name="what-makes-up-your-data-format"></a><span data-ttu-id="38adb-109">Co tworzą formatu danych?</span><span class="sxs-lookup"><span data-stu-id="38adb-109">What makes up your data format?</span></span>
<span data-ttu-id="38adb-110">W sieci szkieletowej usług Azure dane hello jest utrwalenia i replikacji pochodzi z klasy C#.</span><span class="sxs-lookup"><span data-stu-id="38adb-110">In Azure Service Fabric, hello data that is persisted and replicated comes from your C# classes.</span></span> <span data-ttu-id="38adb-111">Dla aplikacji używających [niezawodnej kolekcje](service-fabric-reliable-services-reliable-collections.md), że dane są obiekty hello w hello niezawodnej słowniki i kolejek.</span><span class="sxs-lookup"><span data-stu-id="38adb-111">For applications that use [Reliable Collections](service-fabric-reliable-services-reliable-collections.md), that data is hello objects in hello reliable dictionaries and queues.</span></span> <span data-ttu-id="38adb-112">Dla aplikacji używających [Reliable Actors](service-fabric-reliable-actors-introduction.md), czyli hello kopii stan hello aktora.</span><span class="sxs-lookup"><span data-stu-id="38adb-112">For applications that use [Reliable Actors](service-fabric-reliable-actors-introduction.md), that is hello backing state for hello actor.</span></span> <span data-ttu-id="38adb-113">Te klasy C#, muszą podlegać serializacji toobe utrwalenia i replikacji.</span><span class="sxs-lookup"><span data-stu-id="38adb-113">These C# classes must be serializable toobe persisted and replicated.</span></span> <span data-ttu-id="38adb-114">W związku z tym hello format danych został zdefiniowany przez hello pola i właściwości, które są serializowane, a także jak ich są serializowane.</span><span class="sxs-lookup"><span data-stu-id="38adb-114">Therefore, hello data format is defined by hello fields and properties that are serialized, as well as how they are serialized.</span></span> <span data-ttu-id="38adb-115">Na przykład w `IReliableDictionary<int, MyClass>` hello dane są serializowane `int` i serializacji `MyClass`.</span><span class="sxs-lookup"><span data-stu-id="38adb-115">For example, in an `IReliableDictionary<int, MyClass>` hello data is a serialized `int` and a serialized `MyClass`.</span></span>

### <a name="code-changes-that-result-in-a-data-format-change"></a><span data-ttu-id="38adb-116">Wynik zmianę formatu danych zmiany kodu</span><span class="sxs-lookup"><span data-stu-id="38adb-116">Code changes that result in a data format change</span></span>
<span data-ttu-id="38adb-117">Ponieważ hello format danych jest określana przez klas C#, klas toohello zmian może spowodować zmianę formatu danych.</span><span class="sxs-lookup"><span data-stu-id="38adb-117">Since hello data format is determined by C# classes, changes toohello classes may cause a data format change.</span></span> <span data-ttu-id="38adb-118">Należy zachować ostrożność tooensure, który może obsługiwać uaktualnienia stopniowego zmianę formatu danych hello.</span><span class="sxs-lookup"><span data-stu-id="38adb-118">Care must be taken tooensure that a rolling upgrade can handle hello data format change.</span></span> <span data-ttu-id="38adb-119">Przykłady, które mogą powodować zmiany formatowania danych:</span><span class="sxs-lookup"><span data-stu-id="38adb-119">Examples that may cause data format changes:</span></span>

* <span data-ttu-id="38adb-120">Dodawanie lub usuwanie pól lub właściwości</span><span class="sxs-lookup"><span data-stu-id="38adb-120">Adding or removing fields or properties</span></span>
* <span data-ttu-id="38adb-121">Zmiana nazwy pola lub właściwości</span><span class="sxs-lookup"><span data-stu-id="38adb-121">Renaming fields or properties</span></span>
* <span data-ttu-id="38adb-122">Zmienianie typów hello pól lub właściwości</span><span class="sxs-lookup"><span data-stu-id="38adb-122">Changing hello types of fields or properties</span></span>
* <span data-ttu-id="38adb-123">Zmiana nazwy klasy hello lub przestrzeni nazw</span><span class="sxs-lookup"><span data-stu-id="38adb-123">Changing hello class name or namespace</span></span>

### <a name="data-contract-as-hello-default-serializer"></a><span data-ttu-id="38adb-124">Kontrakt danych jako domyślnego elementu serializującego hello</span><span class="sxs-lookup"><span data-stu-id="38adb-124">Data Contract as hello default serializer</span></span>
<span data-ttu-id="38adb-125">Serializator Hello jest zazwyczaj odpowiedzialny za odczytywanie danych hello i deserializację go do wersji bieżącej hello, nawet jeśli dane hello jest w starszej lub *nowszej* wersji.</span><span class="sxs-lookup"><span data-stu-id="38adb-125">hello serializer is generally responsible for reading hello data and deserializing it into hello current version, even if hello data is in an older or *newer* version.</span></span> <span data-ttu-id="38adb-126">Witaj domyślnym elementem serializującym jest hello [serializator kontraktu danych](https://msdn.microsoft.com/library/ms733127.aspx), który zawiera reguły dobrze zdefiniowany kontroli wersji.</span><span class="sxs-lookup"><span data-stu-id="38adb-126">hello default serializer is hello [Data Contract serializer](https://msdn.microsoft.com/library/ms733127.aspx), which has well-defined versioning rules.</span></span> <span data-ttu-id="38adb-127">Kolekcje niezawodnej Zezwalaj toobe serializator hello zastąpiona, ale Reliable Actors aktualnie nie.</span><span class="sxs-lookup"><span data-stu-id="38adb-127">Reliable Collections allow hello serializer toobe overridden, but Reliable Actors currently do not.</span></span> <span data-ttu-id="38adb-128">Serializator danych Hello odgrywa ważną rolę w naprawieniu uaktualnienia równoległe.</span><span class="sxs-lookup"><span data-stu-id="38adb-128">hello data serializer plays an important role in enabling rolling upgrades.</span></span> <span data-ttu-id="38adb-129">serializator kontraktu danych Hello jest serializator hello, zalecany dla aplikacji sieci szkieletowej usług.</span><span class="sxs-lookup"><span data-stu-id="38adb-129">hello Data Contract serializer is hello serializer that we recommend for Service Fabric applications.</span></span>

## <a name="how-hello-data-format-affects-a-rolling-upgrade"></a><span data-ttu-id="38adb-130">Jak hello format danych wpływa na uaktualnienia stopniowego</span><span class="sxs-lookup"><span data-stu-id="38adb-130">How hello data format affects a rolling upgrade</span></span>
<span data-ttu-id="38adb-131">Podczas uaktualnienia stopniowego, istnieją dwa główne scenariusze, w którym serializator hello napotkać starszej lub *nowszej* wersji danych:</span><span class="sxs-lookup"><span data-stu-id="38adb-131">During a rolling upgrade, there are two main scenarios where hello serializer may encounter an older or *newer* version of your data:</span></span>

1. <span data-ttu-id="38adb-132">Po węzeł zostanie uaktualniony i uruchamia tworzenie kopii zapasowej, nowe serializator hello załaduje hello danych, które były toodisk utrwalonego za stara wersja hello.</span><span class="sxs-lookup"><span data-stu-id="38adb-132">After a node is upgraded and starts back up, hello new serializer will load hello data that was persisted toodisk by hello old version.</span></span>
2. <span data-ttu-id="38adb-133">Podczas uaktualnienia stopniowego hello hello klastra będzie zawierać kombinację hello starej i nowej wersji kodu.</span><span class="sxs-lookup"><span data-stu-id="38adb-133">During hello rolling upgrade, hello cluster will contain a mix of hello old and new versions of your code.</span></span> <span data-ttu-id="38adb-134">Ponieważ replik może znajdować się w różnych domenach uaktualnienia i replik wysyłania danych tooeach innych, hello nowego lub starego wersji danych może napotkać hello stary i/lub nowych wersji programu szeregującego.</span><span class="sxs-lookup"><span data-stu-id="38adb-134">Since replicas may be placed in different upgrade domains, and replicas send data tooeach other, hello new and/or old version of your data may be encountered by hello new and/or old version of your serializer.</span></span>

> [!NOTE]
> <span data-ttu-id="38adb-135">Witaj, "Nowa wersja" i "starą wersję" w tym miejscu można znaleźć wersji toohello swój kod, który jest uruchomiony.</span><span class="sxs-lookup"><span data-stu-id="38adb-135">hello "new version" and "old version" here refer toohello version of your code that is running.</span></span> <span data-ttu-id="38adb-136">Hello "nowe serializatora" odwołuje się toohello serializator kodu, który jest wykonywany w nowej wersji aplikacji hello.</span><span class="sxs-lookup"><span data-stu-id="38adb-136">hello "new serializer" refers toohello serializer code that is executing in hello new version of your application.</span></span> <span data-ttu-id="38adb-137">Hello "nowe dane" odnosi się toohello serializacji C# klasy z hello nowej wersji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="38adb-137">hello "new data" refers toohello serialized C# class from hello new version of your application.</span></span>
> 
> 

<span data-ttu-id="38adb-138">Witaj dwie wersje kodu i musi mieć format danych, zarówno do przodu i do tyłu zgodne.</span><span class="sxs-lookup"><span data-stu-id="38adb-138">hello two versions of code and data format must be both forward and backward compatible.</span></span> <span data-ttu-id="38adb-139">Jeśli nie są zgodne, hello uaktualnienia stopniowego może zakończyć się niepowodzeniem lub dane mogą zostać utracone.</span><span class="sxs-lookup"><span data-stu-id="38adb-139">If they are not compatible, hello rolling upgrade may fail or data may be lost.</span></span> <span data-ttu-id="38adb-140">uaktualnienie stopniowe Hello może zakończyć się niepowodzeniem, ponieważ kod hello lub serializator może zgłaszać wyjątków lub fault po napotkaniu hello innych wersji.</span><span class="sxs-lookup"><span data-stu-id="38adb-140">hello rolling upgrade may fail because hello code or serializer may throw exceptions or a fault when it encounters hello other version.</span></span> <span data-ttu-id="38adb-141">Dane mogą zostać utracone, jeśli na przykład dodano nową właściwość, ale odrzuca je podczas deserializacji serializator starego hello.</span><span class="sxs-lookup"><span data-stu-id="38adb-141">Data may be lost if, for example, a new property was added but hello old serializer discards it during deserialization.</span></span>

<span data-ttu-id="38adb-142">Kontrakt danych jest hello zalecane rozwiązania za zapewnienie, że dane są zgodne.</span><span class="sxs-lookup"><span data-stu-id="38adb-142">Data Contract is hello recommended solution for ensuring that your data is compatible.</span></span> <span data-ttu-id="38adb-143">Ma ona versioning dobrze zdefiniowane zasady Dodawanie, usuwanie i zmiana pola.</span><span class="sxs-lookup"><span data-stu-id="38adb-143">It has well-defined versioning rules for adding, removing, and changing fields.</span></span> <span data-ttu-id="38adb-144">Ma również obsługę zajmujących się nieznany pól, przechwytywanie procesem hello serializacji i deserializacji i zajmujących się dziedziczenia klas.</span><span class="sxs-lookup"><span data-stu-id="38adb-144">It also has support for dealing with unknown fields, hooking into hello serialization and deserialization process, and dealing with class inheritance.</span></span> <span data-ttu-id="38adb-145">Aby uzyskać więcej informacji, zobacz [kontraktu danych przy użyciu](https://msdn.microsoft.com/library/ms733127.aspx).</span><span class="sxs-lookup"><span data-stu-id="38adb-145">For more information, see [Using Data Contract](https://msdn.microsoft.com/library/ms733127.aspx).</span></span>

## <a name="next-steps"></a><span data-ttu-id="38adb-146">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="38adb-146">Next steps</span></span>
<span data-ttu-id="38adb-147">[Uaktualnianie aplikacji za pomocą Visual Studio](service-fabric-application-upgrade-tutorial.md) przeprowadzi Cię przez proces uaktualnienia aplikacji przy użyciu programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="38adb-147">[Upgrading your Application Using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="38adb-148">[Uaktualnienie z aplikacji przy użyciu programu Powershell](service-fabric-application-upgrade-tutorial-powershell.md) przeprowadzi Cię przez proces uaktualnienia aplikacji przy użyciu programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="38adb-148">[Upgrading your Application Using Powershell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="38adb-149">Kontrolowanie sposobu uaktualnienia aplikacji przy użyciu [uaktualnienia parametrów](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="38adb-149">Control how your application upgrades by using [Upgrade Parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="38adb-150">Dowiedz się, jak toouse zaawansowanych funkcji podczas uaktualniania aplikacji, odnosząc się zbyt[Tematy zaawansowane](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="38adb-150">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced Topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="38adb-151">Rozwiązywania typowych problemów w aplikacji uaktualnień, odnosząc się kroki toohello [Rozwiązywanie problemów z uaktualnieniami aplikacji ](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="38adb-151">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting Application Upgrades ](service-fabric-application-upgrade-troubleshooting.md).</span></span>

