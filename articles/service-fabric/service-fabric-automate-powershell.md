---
title: "Automatyczne zarządzanie aplikacji sieci szkieletowej usług Azure | Dokumentacja firmy Microsoft"
description: "Wdrażanie, uaktualniania, przetestować i usuwanie aplikacji usługi Service Fabric przy użyciu programu PowerShell."
services: service-fabric
documentationcenter: .net
author: rwike77
manager: timlt
editor: 
ms.assetid: f03f4294-571d-4262-8a77-cc8b481b959d
ms.service: service-fabric
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 06/16/2017
ms.author: ryanwi
redirect_url: /azure/service-fabric/service-fabric-deploy-remove-applications
ms.openlocfilehash: fb3c2a77ea887289eebf343e223c190781d0e4c2
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="automate-the-application-lifecycle-using-powershell"></a><span data-ttu-id="1474c-103">Automatyzowanie cyklem życia aplikacji przy użyciu programu PowerShell</span><span class="sxs-lookup"><span data-stu-id="1474c-103">Automate the application lifecycle using PowerShell</span></span>
<span data-ttu-id="1474c-104">Wiele aspektów [cyklem życia aplikacji usługi sieć szkieletowa](service-fabric-application-lifecycle.md) można zautomatyzować.</span><span class="sxs-lookup"><span data-stu-id="1474c-104">Many aspects of the [Service Fabric application lifecycle](service-fabric-application-lifecycle.md) can be automated.</span></span>  <span data-ttu-id="1474c-105">W tym artykule pokazano, jak za pomocą programu PowerShell do automatyzacji typowych zadań związanych z wdrażanie, uaktualnianie, usuwanie i testowanie aplikacji sieci szkieletowej usług Azure.</span><span class="sxs-lookup"><span data-stu-id="1474c-105">This article shows how to use PowerShell to automate common tasks for deploying, upgrading, removing, and testing Azure Service Fabric applications.</span></span>  <span data-ttu-id="1474c-106">Zarządzane i dostępne są również interfejsy API protokołu HTTP do zarządzania aplikacjami.</span><span class="sxs-lookup"><span data-stu-id="1474c-106">Managed and HTTP APIs for app management are also available.</span></span> <span data-ttu-id="1474c-107">Zobacz [cykl życia aplikacji](service-fabric-application-lifecycle.md) Aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="1474c-107">See [app lifecycle](service-fabric-application-lifecycle.md) for more information.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="1474c-108">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="1474c-108">Prerequisites</span></span>
<span data-ttu-id="1474c-109">Przed przeniesieniem do zadań w artykule należy koniecznie:</span><span class="sxs-lookup"><span data-stu-id="1474c-109">Before you move on to the tasks in the article, be sure to:</span></span>

* <span data-ttu-id="1474c-110">Zapoznaj się z sieci szkieletowej usług pojęcia opisane w [techniczne omówienie sieci szkieletowej usług](service-fabric-technical-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1474c-110">Get familiar with the Service Fabric concepts described in [Technical overview of Service Fabric](service-fabric-technical-overview.md).</span></span>
* <span data-ttu-id="1474c-111">[Instalowanie środowiska uruchomieniowego, zestawu SDK i narzędzia](service-fabric-get-started.md), co spowoduje również zainstalowanie **ServiceFabric** modułu programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="1474c-111">[Install the runtime, SDK, and tools](service-fabric-get-started.md), which also installs the **ServiceFabric** PowerShell module.</span></span>
* <span data-ttu-id="1474c-112">[Włączanie wykonywania skryptów programu PowerShell](service-fabric-get-started.md#enable-powershell-script-execution).</span><span class="sxs-lookup"><span data-stu-id="1474c-112">[Enable PowerShell script execution](service-fabric-get-started.md#enable-powershell-script-execution).</span></span>
* <span data-ttu-id="1474c-113">Uruchom klaster lokalny.</span><span class="sxs-lookup"><span data-stu-id="1474c-113">Start a local cluster.</span></span>  <span data-ttu-id="1474c-114">Uruchom nowe okno programu PowerShell jako administrator, a następnie uruchom skrypt instalacji klastra z folderu zestawu SDK:`& "$ENV:ProgramFiles\Microsoft SDKs\Service Fabric\ClusterSetup\DevClusterSetup.ps1"`</span><span class="sxs-lookup"><span data-stu-id="1474c-114">Launch a new PowerShell window as an administrator and then run the cluster setup script from the SDK folder: `& "$ENV:ProgramFiles\Microsoft SDKs\Service Fabric\ClusterSetup\DevClusterSetup.ps1"`</span></span>
* <span data-ttu-id="1474c-115">Przed uruchomieniem żadnych poleceń programu PowerShell w tym artykule, najpierw połączyć się z lokalnym klastrem usługi sieć szkieletowa usług za pomocą [Connect-ServiceFabricCluster](/powershell/module/servicefabric/connect-servicefabriccluster?view=azureservicefabricps):`Connect-ServiceFabricCluster localhost:19000`</span><span class="sxs-lookup"><span data-stu-id="1474c-115">Before you run any PowerShell commands in this article, first connect to the local Service Fabric cluster by using [Connect-ServiceFabricCluster](/powershell/module/servicefabric/connect-servicefabriccluster?view=azureservicefabricps): `Connect-ServiceFabricCluster localhost:19000`</span></span>
* <span data-ttu-id="1474c-116">Następujące zadania wymagają v1 pakiet aplikacji do wdrożenia i pakiet aplikacji w wersji 2 do uaktualnienia.</span><span class="sxs-lookup"><span data-stu-id="1474c-116">The following tasks require a v1 application package to deploy and a v2 application package for upgrade.</span></span> <span data-ttu-id="1474c-117">Pobierz [ **WordCount** Przykładowa aplikacja](http://aka.ms/servicefabricsamples) (znajdujący się w przykładach wprowadzenie).</span><span class="sxs-lookup"><span data-stu-id="1474c-117">Download the [**WordCount** sample application](http://aka.ms/servicefabricsamples) (located in the Getting Started samples).</span></span> <span data-ttu-id="1474c-118">Tworzenie i pakietu aplikacji w programie Visual Studio (kliknij prawym przyciskiem myszy **WordCount** w Eksploratorze rozwiązań i wybierz **pakietu**).</span><span class="sxs-lookup"><span data-stu-id="1474c-118">Build and package the application in Visual Studio (right-click on **WordCount** in Solution Explorer and select **Package**).</span></span> <span data-ttu-id="1474c-119">Skopiuj pakiet v1 w `C:\ServiceFabricSamples\Services\WordCount\WordCount\pkg\Debug` do `C:\Temp\WordCount`.</span><span class="sxs-lookup"><span data-stu-id="1474c-119">Copy the v1 package in `C:\ServiceFabricSamples\Services\WordCount\WordCount\pkg\Debug` to `C:\Temp\WordCount`.</span></span> <span data-ttu-id="1474c-120">Kopiuj `C:\Temp\WordCount` do `C:\Temp\WordCountV2`, tworzenia pakietu aplikacji w wersji 2 do uaktualnienia.</span><span class="sxs-lookup"><span data-stu-id="1474c-120">Copy `C:\Temp\WordCount` to `C:\Temp\WordCountV2`, creating the v2 application package for upgrade.</span></span> <span data-ttu-id="1474c-121">Otwórz `C:\Temp\WordCountV2\ApplicationManifest.xml` w edytorze tekstów.</span><span class="sxs-lookup"><span data-stu-id="1474c-121">Open `C:\Temp\WordCountV2\ApplicationManifest.xml` in a text editor.</span></span> <span data-ttu-id="1474c-122">W **ApplicationManifest** elementu, zmień **ApplicationTypeVersion** atrybut z "1.0.0" do "2.0.0", aby zaktualizować numer wersji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1474c-122">In the **ApplicationManifest** element, change the **ApplicationTypeVersion** attribute from "1.0.0" to "2.0.0" to update the app version number.</span></span> <span data-ttu-id="1474c-123">Zapisać zmienionego pliku ApplicationManifest.xml.</span><span class="sxs-lookup"><span data-stu-id="1474c-123">Save the changed ApplicationManifest.xml file.</span></span>

## <a name="task-deploy-a-service-fabric-application"></a><span data-ttu-id="1474c-124">Zadanie: Wdrażanie aplikacji sieci szkieletowej usług</span><span class="sxs-lookup"><span data-stu-id="1474c-124">Task: Deploy a Service Fabric application</span></span>
<span data-ttu-id="1474c-125">Po wbudowane i spakowanej aplikacji (lub pobrany pakiet aplikacji), możesz wdrożyć aplikację do lokalnego klastra usługi sieć szkieletowa usług.</span><span class="sxs-lookup"><span data-stu-id="1474c-125">After you've built and packaged the application (or downloaded the application package), you can deploy the application into a local Service Fabric cluster.</span></span> <span data-ttu-id="1474c-126">Wdrożenie obejmuje przekazywanie pakietu aplikacji, rejestrowania typu aplikacji i utworzenia wystąpienia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1474c-126">Deployment involves uploading the application package, registering the application type, and creating the application instance.</span></span> <span data-ttu-id="1474c-127">Aby wdrożyć nową aplikację do klastra, wykonaj instrukcje w tej sekcji.</span><span class="sxs-lookup"><span data-stu-id="1474c-127">Use the instructions in this section to deploy a new application to a cluster.</span></span>

### <a name="step-1-upload-the-application-package"></a><span data-ttu-id="1474c-128">Krok 1: Przekaż pakiet aplikacji</span><span class="sxs-lookup"><span data-stu-id="1474c-128">Step 1: Upload the application package</span></span>
<span data-ttu-id="1474c-129">Przekazywanie pakietu aplikacji do magazynu w obrazie umieszcza je w lokalizacji dostęp do wewnętrznych składników usługi Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="1474c-129">Uploading the application package to the image store puts it in a location accessible to internal Service Fabric components.</span></span>  <span data-ttu-id="1474c-130">Pakiet aplikacji zawiera niezbędną konfigurację manifest aplikacji, usługi deklaracje oraz kod, a pakiety danych do tworzenia aplikacji i wystąpień usługi.</span><span class="sxs-lookup"><span data-stu-id="1474c-130">The application package contains the necessary application manifest, service manifests, and code, configuration, and data package(s) to create the application and service instances.</span></span> <span data-ttu-id="1474c-131">Jeśli chcesz sprawdzić lokalnie pakietu aplikacji, użyj [ServiceFabricApplicationPackage testu](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="1474c-131">If you want to verify the app package locally, use the [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span></span>  <span data-ttu-id="1474c-132">[ServiceFabricApplicationPackage kopiowania](/powershell/module/servicefabric/copy-servicefabricapplicationpackage?view=azureservicefabricps) polecenia zostanie przesłany pakiet.</span><span class="sxs-lookup"><span data-stu-id="1474c-132">The [Copy-ServiceFabricApplicationPackage](/powershell/module/servicefabric/copy-servicefabricapplicationpackage?view=azureservicefabricps) command uploads the package.</span></span> <span data-ttu-id="1474c-133">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="1474c-133">For example:</span></span>

```powershell
Copy-ServiceFabricApplicationPackage C:\Temp\WordCount\ -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCount
```

### <a name="step-2-register-the-application-type"></a><span data-ttu-id="1474c-134">Krok 2: Rejestracja typu aplikacji</span><span class="sxs-lookup"><span data-stu-id="1474c-134">Step 2: Register the application type</span></span>
<span data-ttu-id="1474c-135">Rejestracja pakietu aplikacji sprawia, że typ aplikacji i wersji zadeklarowane w manifeście aplikacji dostępne do użycia.</span><span class="sxs-lookup"><span data-stu-id="1474c-135">Registering the application package makes the application type and version declared in the application manifest available for use.</span></span> <span data-ttu-id="1474c-136">Odczyty systemu przekazany pakiet w kroku 1, sprawdź pakiet (odpowiednikiem uruchomiona [ServiceFabricApplicationPackage testu](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) lokalnie), przetwarzają zawartość pakietu i skopiuj przetworzonych pakiet do wewnętrznego systemowego Lokalizacja.</span><span class="sxs-lookup"><span data-stu-id="1474c-136">The system reads the package uploaded in the step 1, verify the package (equivalent to running [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) locally), process the package contents, and copy the processed package to an internal system location.</span></span>  <span data-ttu-id="1474c-137">Uruchom [ServiceFabricApplicationType rejestru](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) polecenia cmdlet:</span><span class="sxs-lookup"><span data-stu-id="1474c-137">Run the [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Register-ServiceFabricApplicationType WordCount
```
<span data-ttu-id="1474c-138">Aby wyświetlić wszystkie typy aplikacji zarejestrowany w klastrze, uruchom [Get-ServiceFabricApplicationType](/powershell/module/servicefabric/get-servicefabricapplicationtype?view=azureservicefabricps) polecenia cmdlet:</span><span class="sxs-lookup"><span data-stu-id="1474c-138">To see all the application types registered in the cluster, run the [Get-ServiceFabricApplicationType](/powershell/module/servicefabric/get-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Get-ServiceFabricApplicationType
```

### <a name="step-3-create-the-application-instance"></a><span data-ttu-id="1474c-139">Krok 3: Tworzenie instancji aplikacji</span><span class="sxs-lookup"><span data-stu-id="1474c-139">Step 3: Create the application instance</span></span>
<span data-ttu-id="1474c-140">Aplikację można wdrożyć przy użyciu dowolnej wersji typu aplikacji, który został pomyślnie zarejestrowany za pomocą [ServiceFabricApplication nowy](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) polecenia.</span><span class="sxs-lookup"><span data-stu-id="1474c-140">An application can be instantiated by using any application type version that has been registered successfully by using the [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) command.</span></span> <span data-ttu-id="1474c-141">Nazwy poszczególnych aplikacji jest zadeklarowane na czas wdrażania i musi zaczynać się od **sieci szkieletowej:** schemat i być unikatowe dla każdego wystąpienia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1474c-141">The name of each application is declared at deploy time and must start with the **fabric:** scheme and be unique for each application instance.</span></span> <span data-ttu-id="1474c-142">Nazwa typu aplikacji i wersja typu aplikacji, które są zadeklarowane w **ApplicationManifest.xml** pliku pakietu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1474c-142">The application type name and application type version are declared in the **ApplicationManifest.xml** file of the application package.</span></span> <span data-ttu-id="1474c-143">Jeśli wszystkie domyślne usługi zostały zdefiniowane w manifeście aplikacji typu aplikacji docelowej, te są tworzone w tym momencie.</span><span class="sxs-lookup"><span data-stu-id="1474c-143">If any default services were defined in the application manifest of the target application type, then those are created at this time.</span></span>

```powershell
New-ServiceFabricApplication fabric:/WordCount WordCount 1.0.0
```

<span data-ttu-id="1474c-144">[Get ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) polecenie wyświetla listę wszystkich wystąpień aplikacji, które zostały pomyślnie utworzone, wraz z ich ogólny stan.</span><span class="sxs-lookup"><span data-stu-id="1474c-144">The [Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) command lists all application instances that were successfully created, along with their overall status.</span></span> <span data-ttu-id="1474c-145">[Get ServiceFabricService](/powershell/module/servicefabric/get-servicefabricservice?view=azureservicefabricps) polecenie wyświetla listę wszystkich wystąpień usługi, które zostały pomyślnie utworzone w ramach wystąpienia danej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1474c-145">The [Get-ServiceFabricService](/powershell/module/servicefabric/get-servicefabricservice?view=azureservicefabricps) command lists all of the service instances that were successfully created within a given application instance.</span></span> <span data-ttu-id="1474c-146">Domyślne usługi (jeśli istnieje) są wyświetlane.</span><span class="sxs-lookup"><span data-stu-id="1474c-146">Default services (if any) are listed.</span></span>

```powershell
Get-ServiceFabricApplication

Get-ServiceFabricApplication | Get-ServiceFabricService
```

## <a name="task-upgrade-a-service-fabric-application"></a><span data-ttu-id="1474c-147">Zadanie: Uaktualnienie aplikacji sieci szkieletowej usług</span><span class="sxs-lookup"><span data-stu-id="1474c-147">Task: Upgrade a Service Fabric application</span></span>
<span data-ttu-id="1474c-148">Można uaktualnić wdrożonej wcześniej aplikacji sieci szkieletowej usług z pakietu aplikacji zaktualizowane.</span><span class="sxs-lookup"><span data-stu-id="1474c-148">You can upgrade a previously deployed Service Fabric application with an updated application package.</span></span> <span data-ttu-id="1474c-149">To zadanie uaktualnienie aplikacji WordCount, który został wdrożony w "zadań: Wdrażanie aplikacji sieci szkieletowej usług."</span><span class="sxs-lookup"><span data-stu-id="1474c-149">This task upgrades the WordCount application that was deployed in "Task: Deploy a Service Fabric application."</span></span> <span data-ttu-id="1474c-150">Zapoznaj się z artykułem [uaktualniania aplikacji sieci szkieletowej usług](service-fabric-application-upgrade.md) Aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="1474c-150">Read through [Service Fabric application upgrade](service-fabric-application-upgrade.md) for more information.</span></span>

<span data-ttu-id="1474c-151">Aby zachować proste, w tym przykładzie rzeczy, numer wersji aplikacji został zaktualizowany w pakiecie aplikacji WordCountV2 utworzone w wymaganiach wstępnych.</span><span class="sxs-lookup"><span data-stu-id="1474c-151">To keep things simple for this example, only the application version number was updated in the WordCountV2 application package created in the prerequisites.</span></span> <span data-ttu-id="1474c-152">Bardziej realistyczne scenariuszu jest stosowane aktualizowanie usługi plików kodu, konfiguracji lub danych, a następnie ponownie skompilować i pakowania aplikacji z numerami zaktualizowanej wersji.</span><span class="sxs-lookup"><span data-stu-id="1474c-152">A more realistic scenario would involve updating your service code, configuration, or data files and then rebuilding and packaging the application with updated version numbers.</span></span>  

### <a name="step-1-upload-the-updated-application-package"></a><span data-ttu-id="1474c-153">Krok 1: Przekaż pakiet aplikacji zaktualizowane</span><span class="sxs-lookup"><span data-stu-id="1474c-153">Step 1: Upload the updated application package</span></span>
<span data-ttu-id="1474c-154">Aplikacja WordCount v1 jest gotowy do uaktualnienia.</span><span class="sxs-lookup"><span data-stu-id="1474c-154">The WordCount v1 application is ready to be upgraded.</span></span> <span data-ttu-id="1474c-155">Jeśli Otwórz okno programu PowerShell jako administrator i wpisz [ **Get-ServiceFabricApplication**](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), zostanie wyświetlony tej wersji 1.0.0 typu aplikacja WordCount jest wdrażana.</span><span class="sxs-lookup"><span data-stu-id="1474c-155">If you open up a PowerShell window as administrator and type [**Get-ServiceFabricApplication**](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), you see that version 1.0.0 of the WordCount application type is deployed.</span></span>  

<span data-ttu-id="1474c-156">Teraz Skopiuj pakiet zaktualizowaną aplikację do magazynu obrazów platformy Service Fabric (gdzie pakiety aplikacji są przechowywane przez usługi sieć szkieletowa).</span><span class="sxs-lookup"><span data-stu-id="1474c-156">Now copy the updated application package to the Service Fabric image store (where the application packages are stored by Service Fabric).</span></span> <span data-ttu-id="1474c-157">Parametr **ApplicationPackagePathInImageStore** informuje o tym, gdzie można znaleźć pakietu aplikacji sieci szkieletowej usług.</span><span class="sxs-lookup"><span data-stu-id="1474c-157">The parameter **ApplicationPackagePathInImageStore** informs Service Fabric where it can find the application package.</span></span> <span data-ttu-id="1474c-158">Polecenie kopiuje pakiet aplikacji do **WordCountV2** w magazynie obrazu:</span><span class="sxs-lookup"><span data-stu-id="1474c-158">The following command copies the application package to **WordCountV2** in the image store:</span></span>  

```powershell
Copy-ServiceFabricApplicationPackage C:\Temp\WordCountV2\ -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCountV2

```
### <a name="step-2-register-the-updated-application-type"></a><span data-ttu-id="1474c-159">Krok 2: Rejestracja typu aplikacji zaktualizowane</span><span class="sxs-lookup"><span data-stu-id="1474c-159">Step 2: Register the updated application type</span></span>
<span data-ttu-id="1474c-160">Następnym krokiem jest można zarejestrować nowej wersji aplikacji w sieci szkieletowej usług, które można wykonać za pomocą [ServiceFabricApplicationType rejestru](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) polecenia cmdlet:</span><span class="sxs-lookup"><span data-stu-id="1474c-160">The next step is to register the new version of the application with Service Fabric, which can be performed by using the [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Register-ServiceFabricApplicationType WordCountV2
```

### <a name="step-3-start-the-upgrade"></a><span data-ttu-id="1474c-161">Krok 3: Uruchom operację uaktualniania</span><span class="sxs-lookup"><span data-stu-id="1474c-161">Step 3: Start the upgrade</span></span>
<span data-ttu-id="1474c-162">Różne parametry uaktualnienia, limity czasu i kryteria kondycji mogą być stosowane do uaktualniania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1474c-162">Various upgrade parameters, timeouts, and health criteria can be applied to application upgrades.</span></span> <span data-ttu-id="1474c-163">Zapoznaj się z artykułem [parametry uaktualniania aplikacji](service-fabric-application-upgrade-parameters.md) i [procesu uaktualniania](service-fabric-application-upgrade.md) dokumentów, aby dowiedzieć się więcej.</span><span class="sxs-lookup"><span data-stu-id="1474c-163">Read through the [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and [upgrade process](service-fabric-application-upgrade.md) documents to learn more.</span></span> <span data-ttu-id="1474c-164">Wszystkie usługi i wystąpień powinna być *dobrej kondycji* po uaktualnieniu.</span><span class="sxs-lookup"><span data-stu-id="1474c-164">All services and instances should be *healthy* after the upgrade.</span></span>  <span data-ttu-id="1474c-165">Ustaw **HealthCheckStableDuration** do 60 sekund (tak, aby co najmniej 20 sekund przed uaktualnienia przechodzi do następnej domeny uaktualnienia usługi są w dobrej kondycji).</span><span class="sxs-lookup"><span data-stu-id="1474c-165">Set the **HealthCheckStableDuration** to 60 seconds (so that the services are healthy for at least 20 seconds before the upgrade proceeds to the next upgrade domain).</span></span>  <span data-ttu-id="1474c-166">Również ustawić **UpgradeDomainTimeout** 1200 sekund i **UpgradeTimeout** 3000 sekund.</span><span class="sxs-lookup"><span data-stu-id="1474c-166">Also set the **UpgradeDomainTimeout** to 1200 seconds and the **UpgradeTimeout** to 3000 seconds.</span></span> <span data-ttu-id="1474c-167">Wreszcie, ustaw **UpgradeFailureAction** do **wycofywania**, który żąda czy sieci szkieletowej usług wycofuje aplikacji do poprzedniej wersji występują błędy podczas uaktualniania.</span><span class="sxs-lookup"><span data-stu-id="1474c-167">Finally, set the **UpgradeFailureAction** to **rollback**, which requests that Service Fabric rolls back the application to the previous version if failures are encountered during upgrade.</span></span>

<span data-ttu-id="1474c-168">Można teraz uruchomić uaktualnienie aplikacji przy użyciu [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) polecenia cmdlet:</span><span class="sxs-lookup"><span data-stu-id="1474c-168">You can now start the application upgrade by using the [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Start-ServiceFabricApplicationUpgrade -ApplicationName fabric:/WordCount -ApplicationTypeVersion 2.0.0 -HealthCheckStableDurationSec 60 -UpgradeDomainTimeoutSec 1200 -UpgradeTimeout 3000  -FailureAction Rollback -Monitored
```

<span data-ttu-id="1474c-169">Należy pamiętać, że nazwa aplikacji jest taka sama jak nazwa aplikacji wdrożonej wcześniej v1.0.0 (fabric: / WordCount).</span><span class="sxs-lookup"><span data-stu-id="1474c-169">Note that the application name is the same as the previously deployed v1.0.0 application name (fabric:/WordCount).</span></span> <span data-ttu-id="1474c-170">Sieć szkieletowa usług używa tej nazwy do identyfikowania, która aplikacja jest wprowadzenie uaktualniony.</span><span class="sxs-lookup"><span data-stu-id="1474c-170">Service Fabric uses this name to identify which application is getting upgraded.</span></span> <span data-ttu-id="1474c-171">Jeśli ustawisz limity czasu się zbyt krótki, może wystąpić komunikat o błędzie limitu czasu, stwierdzający problem.</span><span class="sxs-lookup"><span data-stu-id="1474c-171">If you set the time-outs to be too short, you might encounter a time-out failure message that states the problem.</span></span> <span data-ttu-id="1474c-172">Zapoznaj się [Rozwiązywanie problemów z uaktualnieniami aplikacji](service-fabric-application-upgrade-troubleshooting.md), lub zwiększ wartość limitu czasu.</span><span class="sxs-lookup"><span data-stu-id="1474c-172">Refer to [Troubleshoot application upgrades](service-fabric-application-upgrade-troubleshooting.md), or increase the time-outs.</span></span>

### <a name="step-4-check-upgrade-progress"></a><span data-ttu-id="1474c-173">Krok 4: Postęp uaktualniania wyboru</span><span class="sxs-lookup"><span data-stu-id="1474c-173">Step 4: Check upgrade progress</span></span>
<span data-ttu-id="1474c-174">Możesz monitorować postęp uaktualniania aplikacji przy użyciu [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md), lub za pomocą [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) polecenia cmdlet:</span><span class="sxs-lookup"><span data-stu-id="1474c-174">You can monitor application upgrade progress by using [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md), or by using the [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Get-ServiceFabricApplicationUpgrade fabric:/WordCount
```

<span data-ttu-id="1474c-175">W ciągu kilku minut [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) polecenia cmdlet pokazuje, że wszystkie domeny uaktualnienia zostały uaktualnione (ukończone).</span><span class="sxs-lookup"><span data-stu-id="1474c-175">In a few minutes, the [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet shows that all upgrade domains were upgraded (completed).</span></span>

## <a name="task-test-a-service-fabric-application"></a><span data-ttu-id="1474c-176">Zadanie: Testów aplikacji sieci szkieletowej usług</span><span class="sxs-lookup"><span data-stu-id="1474c-176">Task: Test a Service Fabric application</span></span>
<span data-ttu-id="1474c-177">Aby napisać wysokiej jakości usług, deweloperzy muszą móc wywoływać błędy zawodnych infrastruktury do testowania stabilność swoich usług.</span><span class="sxs-lookup"><span data-stu-id="1474c-177">To write high-quality services, developers need to be able to induce unreliable infrastructure faults to test the stability of their services.</span></span> <span data-ttu-id="1474c-178">Sieć szkieletowa usług zapewnia deweloperom możliwość wywoływać akcje usterek i przetestować usługi w razie awarii za pomocą scenariuszy testowania chaos i pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="1474c-178">Service Fabric gives developers the ability to induce fault actions and test services in the presence of failures by using the chaos and failover test scenarios.</span></span>  <span data-ttu-id="1474c-179">Zapoznaj się z artykułem [wprowadzenie do usługi analiza błędów](service-fabric-testability-overview.md) Aby uzyskać dodatkowe informacje.</span><span class="sxs-lookup"><span data-stu-id="1474c-179">Read through [Introduction to the Fault Analysis Service](service-fabric-testability-overview.md) for additional information.</span></span>

### <a name="step-1-run-the-chaos-test-scenario"></a><span data-ttu-id="1474c-180">Krok 1: Uruchom chaos scenariusza testów</span><span class="sxs-lookup"><span data-stu-id="1474c-180">Step 1: Run the chaos test scenario</span></span>
<span data-ttu-id="1474c-181">Scenariusz testów chaos generuje błędy w ramach całego klastra sieci szkieletowej usług.</span><span class="sxs-lookup"><span data-stu-id="1474c-181">The chaos test scenario generates faults across the entire Service Fabric cluster.</span></span> <span data-ttu-id="1474c-182">Scenariusz kompresuje błędów zwykle widoczne za pośrednictwem miesięcy lub lat do kilku godzin.</span><span class="sxs-lookup"><span data-stu-id="1474c-182">The scenario compresses faults generally seen over months or years to a few hours.</span></span> <span data-ttu-id="1474c-183">Kombinacja przeplotem błędów z wartością wysoką odporność znajduje sytuacjach wyjątkowych, które w przeciwnym razie być pominięte.</span><span class="sxs-lookup"><span data-stu-id="1474c-183">The combination of interleaved faults with a high fault rate finds corner cases that would otherwise be missed.</span></span> <span data-ttu-id="1474c-184">W poniższym przykładzie uruchamiane scenariusza testów chaos przez 60 minut.</span><span class="sxs-lookup"><span data-stu-id="1474c-184">The following example runs the chaos test scenario for 60 minutes.</span></span>

```powershell
$timeToRun = 60
$maxStabilizationTimeSecs = 180
$concurrentFaults = 3
$waitTimeBetweenIterationsSec = 60

Invoke-ServiceFabricChaosTestScenario -TimeToRunMinute $timeToRun -MaxClusterStabilizationTimeoutSec $maxStabilizationTimeSecs -MaxConcurrentFaults $concurrentFaults -EnableMoveReplicaFaults -WaitTimeBetweenIterationsSec $waitTimeBetweenIterationsSec
```

### <a name="step-2-run-the-failover-test-scenario"></a><span data-ttu-id="1474c-185">Krok 2: Uruchom scenariusz test trybu failover</span><span class="sxs-lookup"><span data-stu-id="1474c-185">Step 2: Run the failover test scenario</span></span>
<span data-ttu-id="1474c-186">Przejście w tryb failover przetestuj cele scenariusz partycji określonej usługi, zamiast całego klastra i innych usług pozostawia nie mają wpływu.</span><span class="sxs-lookup"><span data-stu-id="1474c-186">The failover test scenario targets a specific service partition instead of the entire cluster, and it leaves other services unaffected.</span></span> <span data-ttu-id="1474c-187">Scenariusz iterację sekwencję symulowane błędy podczas weryfikowania usługi podczas wykonywania logiki biznesowej.</span><span class="sxs-lookup"><span data-stu-id="1474c-187">The scenario iterates through a sequence of simulated faults in service validation while your business logic runs.</span></span> <span data-ttu-id="1474c-188">Błąd podczas weryfikowania usługi wskazuje problem, który wymaga dalszego badania.</span><span class="sxs-lookup"><span data-stu-id="1474c-188">A failure in service validation indicates an issue that needs further investigation.</span></span> <span data-ttu-id="1474c-189">Test pracy awaryjnej wywołuje tylko jeden błąd w czasie, w przeciwieństwie do scenariusza testów chaos, które może wywołać wiele błędów.</span><span class="sxs-lookup"><span data-stu-id="1474c-189">The failover test induces only one fault at a time, as opposed to the chaos test scenario, which can induce multiple faults.</span></span> <span data-ttu-id="1474c-190">W poniższym przykładzie uruchamiane test pracy awaryjnej przez 60 minut przed sieci szkieletowej: / WordCount/usługi WordCountService usługi.</span><span class="sxs-lookup"><span data-stu-id="1474c-190">The following example runs the failover test for 60 minutes against the fabric:/WordCount/WordCountService service.</span></span>

```powershell
$timeToRun = 60
$maxStabilizationTimeSecs = 180
$waitTimeBetweenFaultsSec = 10
$serviceName = "fabric:/WordCount/WordCountService"

Invoke-ServiceFabricFailoverTestScenario -TimeToRunMinute $timeToRun -MaxServiceStabilizationTimeoutSec $maxStabilizationTimeSecs -WaitTimeBetweenFaultsSec $waitTimeBetweenFaultsSec -ServiceName $serviceName -PartitionKindUniformInt64 -PartitionKey 1
```

## <a name="task-remove-a-service-fabric-application"></a><span data-ttu-id="1474c-191">Zadanie: Usuwanie aplikacji sieci szkieletowej usług</span><span class="sxs-lookup"><span data-stu-id="1474c-191">Task: Remove a Service Fabric application</span></span>
<span data-ttu-id="1474c-192">Można usunąć wystąpienia wdrożonej aplikacji, Usuń typ elastycznie aplikacji z klastra i usuwanie pakietu aplikacji w składniku ImageStore.</span><span class="sxs-lookup"><span data-stu-id="1474c-192">You can delete an instance of a deployed application, remove the provisioned application type from the cluster, and remove the application package from the ImageStore.</span></span>

### <a name="step-1-remove-an-application-instance"></a><span data-ttu-id="1474c-193">Krok 1: Usuwanie wystąpienia aplikacji</span><span class="sxs-lookup"><span data-stu-id="1474c-193">Step 1: Remove an application instance</span></span>
<span data-ttu-id="1474c-194">Wystąpienie aplikacji nie jest już potrzebne, możesz trwale usunąć go za pomocą [ServiceFabricApplication Usuń](/powershell/module/servicefabric/remove-servicefabricapplication?view=azureservicefabricps) polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="1474c-194">When an application instance is no longer needed, you can permanently remove it by using the [Remove-ServiceFabricApplication](/powershell/module/servicefabric/remove-servicefabricapplication?view=azureservicefabricps) cmdlet.</span></span> <span data-ttu-id="1474c-195">To również automatycznie usuwa wszystkie usługi należące do aplikacji, trwałe usunięcie wszystkich stan usługi.</span><span class="sxs-lookup"><span data-stu-id="1474c-195">This also automatically removes all services belonging to the application, permanently removing all service state.</span></span> <span data-ttu-id="1474c-196">Ta operacja jest nieodwracalna i nie można odzyskać stan aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1474c-196">This operation cannot be reversed and application state cannot be recovered.</span></span>

```powershell
Remove-ServiceFabricApplication fabric:/WordCount
```

### <a name="step-2-unregister-the-application-type"></a><span data-ttu-id="1474c-197">Krok 2: Wyrejestruj typ aplikacji</span><span class="sxs-lookup"><span data-stu-id="1474c-197">Step 2: Unregister the application type</span></span>
<span data-ttu-id="1474c-198">W przypadku konkretnej wersji typu aplikacji nie są już potrzebne, wyrejestrować go za pomocą [Unregister-ServiceFabricApplicationType](/powershell/module/servicefabric/unregister-servicefabricapplicationtype?view=azureservicefabricps) polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="1474c-198">When you no longer need a particular version of an application type, unregister it by using the [Unregister-ServiceFabricApplicationType](/powershell/module/servicefabric/unregister-servicefabricapplicationtype?view=azureservicefabricps) cmdlet.</span></span> <span data-ttu-id="1474c-199">Wyrejestrowywanie typy nieużywane wersje miejsca używanego przez pakiet aplikacji w sklepie obrazu.</span><span class="sxs-lookup"><span data-stu-id="1474c-199">Unregistering unused types releases storage space used by the application package in the image store.</span></span> <span data-ttu-id="1474c-200">Typ aplikacji można wyrejestrować tak długo, jak żadne aplikacje nie wystąpienia na nim lub do czasu uaktualnienia aplikacji odwołuje.</span><span class="sxs-lookup"><span data-stu-id="1474c-200">An application type can be unregistered as long as there are no applications instantiated against it or pending application upgrades referencing it.</span></span>

```powershell
Unregister-ServiceFabricApplicationType WordCount 1.0.0
```

### <a name="step-3-remove-the-application-package"></a><span data-ttu-id="1474c-201">Krok 3: Usunięcie pakietu aplikacji</span><span class="sxs-lookup"><span data-stu-id="1474c-201">Step 3: Remove the application package</span></span>
<span data-ttu-id="1474c-202">Po typem aplikacji jest zarejestrowany, pakiet aplikacji można usunąć z magazynu obrazów za pomocą [ServiceFabricApplicationPackage Usuń](/powershell/module/servicefabric/remove-servicefabricapplicationpackage?view=azureservicefabricps) polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="1474c-202">After the application type is unregistered, the application package can be removed from the image store by using the [Remove-ServiceFabricApplicationPackage](/powershell/module/servicefabric/remove-servicefabricapplicationpackage?view=azureservicefabricps) cmdlet.</span></span>

```powershell
Remove-ServiceFabricApplicationPackage -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCount
```

## <a name="next-steps"></a><span data-ttu-id="1474c-203">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="1474c-203">Next steps</span></span>
[<span data-ttu-id="1474c-204">Cykl życia aplikacji w sieci szkieletowej usług</span><span class="sxs-lookup"><span data-stu-id="1474c-204">Service Fabric application lifecycle</span></span>](service-fabric-application-lifecycle.md)

[<span data-ttu-id="1474c-205">Wdrażanie aplikacji</span><span class="sxs-lookup"><span data-stu-id="1474c-205">Deploy an application</span></span>](service-fabric-deploy-remove-applications.md)

[<span data-ttu-id="1474c-206">Uaktualnianie aplikacji</span><span class="sxs-lookup"><span data-stu-id="1474c-206">Application upgrade</span></span>](service-fabric-application-upgrade.md)

[<span data-ttu-id="1474c-207">Polecenia cmdlet systemu Azure sieci szkieletowej usług</span><span class="sxs-lookup"><span data-stu-id="1474c-207">Azure Service Fabric cmdlets</span></span>](/powershell/azure/overview?view=azureservicefabricps)

