---
title: "Analiza zdarzeń sieci szkieletowej usług Azure z usługą Application Insights | Dokumentacja firmy Microsoft"
description: "Więcej informacji na temat wizualizacji i analizowania zdarzeń za pomocą usługi Application Insights, monitorowania i diagnostyki klastrów sieci szkieletowej usług Azure."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/26/2017
ms.author: dekapur
ms.openlocfilehash: 4085a607b800f4f4f155cdc266bc203b0858fd7c
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/03/2017
---
# <a name="event-analysis-and-visualization-with-application-insights"></a><span data-ttu-id="1d754-103">Analiza zdarzeń i wizualizacji z usługą Application Insights</span><span class="sxs-lookup"><span data-stu-id="1d754-103">Event analysis and visualization with Application Insights</span></span>

<span data-ttu-id="1d754-104">Azure Application Insights to rozszerzalna platforma aplikacji monitorowania i diagnostyki.</span><span class="sxs-lookup"><span data-stu-id="1d754-104">Azure Application Insights is an extensible platform for application monitoring and diagnostics.</span></span> <span data-ttu-id="1d754-105">Obejmuje zaawansowane analizy i badania narzędzia, można dostosować pulpit nawigacyjny i wizualizacje i dalsze opcje w tym automatycznego tworzenia alertu.</span><span class="sxs-lookup"><span data-stu-id="1d754-105">It includes a powerful analytics and querying tool, customizable dashboard and visualizations, and further options including automated alerting.</span></span> <span data-ttu-id="1d754-106">Jest zalecana platformy do monitorowania i diagnostyki dla aplikacji platformy Service Fabric i usług.</span><span class="sxs-lookup"><span data-stu-id="1d754-106">It is the recommended platform for monitoring and diagnostics for Service Fabric applications and services.</span></span>

## <a name="setting-up-application-insights"></a><span data-ttu-id="1d754-107">Konfigurowanie usługi Application Insights</span><span class="sxs-lookup"><span data-stu-id="1d754-107">Setting up Application Insights</span></span>

### <a name="creating-an-ai-resource"></a><span data-ttu-id="1d754-108">Tworzenie zasobu AI</span><span class="sxs-lookup"><span data-stu-id="1d754-108">Creating an AI Resource</span></span>

<span data-ttu-id="1d754-109">Aby utworzyć AI zasobu siedzibę za pośrednictwem portalu Azure Marketplace i wyszukaj "Usługi Application Insights".</span><span class="sxs-lookup"><span data-stu-id="1d754-109">To create an AI resource, head over to the Azure Marketplace, and search for "Application Insights".</span></span> <span data-ttu-id="1d754-110">Powinien on wyświetlane jako pierwsze rozwiązanie (znajduje się w kategorii "Web + Mobile").</span><span class="sxs-lookup"><span data-stu-id="1d754-110">It should show up as the first solution (it is under category "Web + Mobile").</span></span> <span data-ttu-id="1d754-111">Kliknij przycisk **Utwórz** podczas szukania na prawo zasobów (Sprawdź, czy ścieżka zgodna obraz poniżej).</span><span class="sxs-lookup"><span data-stu-id="1d754-111">Click **Create** when you are looking at the right resource (confirm that your path matches the image below).</span></span>

![Nowy zasób usługi Application Insights](media/service-fabric-diagnostics-event-analysis-appinsights/create-new-ai-resource.png)

<span data-ttu-id="1d754-113">Konieczne będzie podanie niektórych informacji poprawnie zainicjować zasobu.</span><span class="sxs-lookup"><span data-stu-id="1d754-113">You will need to fill out some information to provision the resource correctly.</span></span> <span data-ttu-id="1d754-114">W *typu aplikacji* pola, użyj "Aplikacja sieci web ASP.NET" Jeśli będziesz używać dowolną sieć szkieletowa usług modele programowania lub publikowanie aplikacji .NET do klastra.</span><span class="sxs-lookup"><span data-stu-id="1d754-114">In the *Application Type* field, use "ASP.NET web application" if you will be using any of Service Fabric's programming models or publishing a .NET application to the cluster.</span></span> <span data-ttu-id="1d754-115">Użyj "Ogólne", jeśli będziesz wdrażać pliki wykonywalne gościa i kontenerów.</span><span class="sxs-lookup"><span data-stu-id="1d754-115">Use "General" if you will be deploying guest executables and containers.</span></span> <span data-ttu-id="1d754-116">Ogólnie rzecz biorąc, domyślnie przy użyciu "Aplikacja sieci web ASP.NET" Aby opcje otwarte w przyszłości.</span><span class="sxs-lookup"><span data-stu-id="1d754-116">In general, default to using "ASP.NET web application" to keep your options open in the future.</span></span> <span data-ttu-id="1d754-117">Nazwa zależy od swoich preferencji, a zarówno grupy zasobów, jak i subskrypcji są włączone po wdrożeniu zasobu.</span><span class="sxs-lookup"><span data-stu-id="1d754-117">The name is up to your preference, and both the resource group and subscription are changeable post-deployment of the resource.</span></span> <span data-ttu-id="1d754-118">Zaleca się, że zasób AI znajduje się w tej samej grupie zasobów co klaster.</span><span class="sxs-lookup"><span data-stu-id="1d754-118">We recommend that your AI resource is in the same resource group as your cluster.</span></span> <span data-ttu-id="1d754-119">Aby uzyskać więcej informacji, zobacz [utworzyć zasobu usługi Application Insights](../application-insights/app-insights-create-new-resource.md)</span><span class="sxs-lookup"><span data-stu-id="1d754-119">If you need more information, please see [Create an Application Insights resource](../application-insights/app-insights-create-new-resource.md)</span></span>

<span data-ttu-id="1d754-120">Należy klucza Instrumentacji AI w celu skonfigurowania AI narzędziem agregacji zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="1d754-120">You need the AI Instrumentation Key to configure AI with your event aggregation tool.</span></span> <span data-ttu-id="1d754-121">Po zasobu AI (zajmuje kilka minut po zweryfikowaniu jest wdrożenie), przejdź do niego i Znajdź **właściwości** sekcji na pasku nawigacyjnym po lewej stronie.</span><span class="sxs-lookup"><span data-stu-id="1d754-121">Once your AI resource is set up (takes a few minutes after the deployment is validated), navigate to it and find the **Properties** section on the left navigation bar.</span></span> <span data-ttu-id="1d754-122">Zostanie otwarty nowy blok pokazujący *klucza INSTRUMENTACJI*.</span><span class="sxs-lookup"><span data-stu-id="1d754-122">A new blade will open up that shows an *INSTRUMENTATION KEY*.</span></span> <span data-ttu-id="1d754-123">Jeśli musisz zmienić subskrypcji lub grupy zasobów zasobu, mogą to robić tutaj również.</span><span class="sxs-lookup"><span data-stu-id="1d754-123">If you need to change the subscription or resource group of the resource, it can be done here as well.</span></span>

### <a name="configuring-ai-with-wad"></a><span data-ttu-id="1d754-124">Konfigurowanie AI z WAD</span><span class="sxs-lookup"><span data-stu-id="1d754-124">Configuring AI with WAD</span></span>

<span data-ttu-id="1d754-125">Istnieją dwa podstawowe sposoby wysyłania danych z WAD do AI Azure, która jest to osiągane przez dodanie zbiornika AI w konfiguracji WAD, zgodnie z opisem w [w tym artykule](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span><span class="sxs-lookup"><span data-stu-id="1d754-125">There are two primary ways to send data from WAD to Azure AI, which is achieved by adding an AI sink to the WAD configuration, as detailed in [this article](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span></span>

#### <a name="add-an-ai-instrumentation-key-when-creating-a-cluster-in-azure-portal"></a><span data-ttu-id="1d754-126">Dodaj klucz Instrumentacji AI, podczas tworzenia klastra w portalu Azure</span><span class="sxs-lookup"><span data-stu-id="1d754-126">Add an AI Instrumentation Key when creating a cluster in Azure portal</span></span>

![Dodawanie AIKey](media/service-fabric-diagnostics-event-analysis-appinsights/azure-enable-diagnostics.png)

<span data-ttu-id="1d754-128">Podczas tworzenia klastra, jeśli włączono diagnostyki "Włączone", zostaną wyświetlone pole opcjonalne, aby wprowadzić klucz Instrumentacji wgląd w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1d754-128">When creating a cluster, if Diagnostics is turned "On", an optional field to enter an Application Insights Instrumentation key will show.</span></span> <span data-ttu-id="1d754-129">Po wklejeniu Twojej IKey AI tutaj zbiornika AI zostanie skonfigurowana automatycznie dla Ciebie w szablonie usługi Resource Manager, który służy do wdrażania klastra.</span><span class="sxs-lookup"><span data-stu-id="1d754-129">If you paste your AI IKey here, the AI sink will be automatically configured for you in the Resource Manager template that is used to deploy your cluster.</span></span>

#### <a name="add-the-ai-sink-to-the-resource-manager-template"></a><span data-ttu-id="1d754-130">Dodaj obiekt Sink AI do szablonu usługi Resource Manager</span><span class="sxs-lookup"><span data-stu-id="1d754-130">Add the AI Sink to the Resource Manager template</span></span>

<span data-ttu-id="1d754-131">W "WadCfg" w szablonie usługi Resource Manager należy dodać "Sink", umieszczając w niej następujące dwie zmiany:</span><span class="sxs-lookup"><span data-stu-id="1d754-131">In the "WadCfg" of the Resource Manager template, add a "Sink" by including the following two changes:</span></span>

1. <span data-ttu-id="1d754-132">Dodaj konfigurację zbiornika:</span><span class="sxs-lookup"><span data-stu-id="1d754-132">Add the sink configuration:</span></span>

    ```json
    "SinksConfig": {
        "Sink": [
            {
                "name": "applicationInsights",
                "ApplicationInsights": "***ADD INSTRUMENTATION KEY HERE***"
            }
        ]
    }

    ```

2. <span data-ttu-id="1d754-133">Dołącz obiekt Sink DiagnosticMonitorConfiguration, dodając następujący wiersz w "DiagnosticMonitorConfiguration" z "WadCfg":</span><span class="sxs-lookup"><span data-stu-id="1d754-133">Include the Sink in the DiagnosticMonitorConfiguration by adding the following line in "DiagnosticMonitorConfiguration" of the "WadCfg":</span></span>

    ```json
    "sinks": "applicationInsights"
    ```

<span data-ttu-id="1d754-134">W obu fragmenty kodu powyżej nazwa "applicationInsights" została użyta do opisywania sink.</span><span class="sxs-lookup"><span data-stu-id="1d754-134">In both the code snippets above, the name "applicationInsights" was used to describe the sink.</span></span> <span data-ttu-id="1d754-135">Nie jest wymagane i tak długo, jak nazwa sink znajduje się w "sink", można ustawić nazwę do dowolnego ciągu.</span><span class="sxs-lookup"><span data-stu-id="1d754-135">This is not a requirement and as long as the name of the sink is included in "sinks", you can set the name to any string.</span></span>

<span data-ttu-id="1d754-136">Obecnie dzienników z klastra będzie wyświetlany jako dane śledzenia w przeglądarce dzienników AI firmy.</span><span class="sxs-lookup"><span data-stu-id="1d754-136">Currently, logs from the cluster will show up as traces in AI's log viewer.</span></span> <span data-ttu-id="1d754-137">Ponieważ większość śladów pochodzących od platformy jest poziom "Informacyjny", możesz również należy rozważyć zmianę konfiguracji zbiornika tylko do wysyłania dzienników typu "Krytyczne" lub "Error".</span><span class="sxs-lookup"><span data-stu-id="1d754-137">Since most of the traces coming from the platform are of level "Informational", you can also consider changing the sink configuration to only send logs of type "Critical" or "Error".</span></span> <span data-ttu-id="1d754-138">Można to zrobić przez dodanie "węzła kanały" do obiektu sink, jak pokazano w [w tym artykule](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span><span class="sxs-lookup"><span data-stu-id="1d754-138">This can be done by adding "Channels" to your sink, as demonstrated in [this article](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span></span>

>[!NOTE]
><span data-ttu-id="1d754-139">Użycie niepoprawne IKey AI w portalu lub w szablonie usługi Resource Manager należy ręcznie zmienić wartość klucza i zaktualizować klaster / Wdróż go ponownie.</span><span class="sxs-lookup"><span data-stu-id="1d754-139">If you use an incorrect AI IKey either in portal or in your Resource Manager template, you will have to manually change the key and update the cluster / redeploy it.</span></span> 

### <a name="configuring-ai-with-eventflow"></a><span data-ttu-id="1d754-140">Konfigurowanie AI z EventFlow</span><span class="sxs-lookup"><span data-stu-id="1d754-140">Configuring AI with EventFlow</span></span>

<span data-ttu-id="1d754-141">Jeśli używasz EventFlow celu agregowania zdarzeń, upewnij się, że importowanie `Microsoft.Diagnostics.EventFlow.Output.ApplicationInsights`pakietu NuGet.</span><span class="sxs-lookup"><span data-stu-id="1d754-141">If you are using EventFlow to aggregate events, make sure to import the `Microsoft.Diagnostics.EventFlow.Output.ApplicationInsights`NuGet package.</span></span> <span data-ttu-id="1d754-142">Następujące musi zostać uwzględniony w *generuje* sekcji *eventFlowConfig.json*:</span><span class="sxs-lookup"><span data-stu-id="1d754-142">The following has to be included in the *outputs* section of the *eventFlowConfig.json*:</span></span>

```json
"outputs": [
    {
        "type": "ApplicationInsights",
        // (replace the following value with your AI resource's instrumentation key)
        "instrumentationKey": "00000000-0000-0000-0000-000000000000"
    }
]
```

<span data-ttu-id="1d754-143">Upewnij się wprowadzić wymagane zmiany w filtry, a także zawierać innych danych wejściowych (wraz z ich odpowiednich pakietów NuGet).</span><span class="sxs-lookup"><span data-stu-id="1d754-143">Make sure to make the required changes in your filters, as well as include any other inputs (along with their respective NuGet packages).</span></span>

## <a name="aisdk"></a><span data-ttu-id="1d754-144">AI. ZESTAW SDK</span><span class="sxs-lookup"><span data-stu-id="1d754-144">AI.SDK</span></span>

<span data-ttu-id="1d754-145">Ogólnie zaleca się użyć EventFlow i WAD jako rozwiązania agregacji, ponieważ umożliwiają one dla bardziej podejściu Diagnostyka i monitorowanie, tj. Jeśli chcesz zmienić Twoje dane wyjściowe z EventFlow wymaga nie zmieniono Twojego rzeczywiste Instrumentacji tylko proste modyfikację do pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="1d754-145">It is generally recommended to use EventFlow and WAD as aggregation solutions, because they allow for a more modular approach to diagnostics and monitoring, i.e. if you want to change your outputs from EventFlow, it requires no change to your actual instrumentation, just a simple modification to your config file.</span></span> <span data-ttu-id="1d754-146">Jeśli jednak podjąć decyzję o inwestycji w za pomocą usługi Application Insights i prawdopodobnie nie można zmienić na innej platformie, należy rozważyć w celu agregowania zdarzeń i wysyłania ich do AI przy użyciu jego AI nowego zestawu SDK.</span><span class="sxs-lookup"><span data-stu-id="1d754-146">If, however, you decide to invest in using Application Insights and are not likely to change to a different platform, you should look into using AI's new SDK for aggregating events and sending them to AI.</span></span> <span data-ttu-id="1d754-147">Oznacza to, przestaną być skonfigurować EventFlow do wysyłania danych do AI, ale zamiast tego zostanie zainstalowany pakiet NuGet usługi Service Fabric ApplicationInsight.</span><span class="sxs-lookup"><span data-stu-id="1d754-147">This means that you will no longer have to configure EventFlow to send your data to AI, but instead will install the ApplicationInsight's Service Fabric NuGet package.</span></span> <span data-ttu-id="1d754-148">Szczegółowe informacje dotyczące pakietu można znaleźć [tutaj](https://github.com/Microsoft/ApplicationInsights-ServiceFabric).</span><span class="sxs-lookup"><span data-stu-id="1d754-148">Details on the package can be found [here](https://github.com/Microsoft/ApplicationInsights-ServiceFabric).</span></span>

<span data-ttu-id="1d754-149">[Obsługa usługi Application Insights Mikrousług i kontenery](https://azure.microsoft.com/app-insights-microservices/) przedstawiono niektóre nowe funkcje działające na (nadal obecnie w wersji beta), które umożliwiają są bardziej rozbudowane możliwości monitorowania poza pole z AI.</span><span class="sxs-lookup"><span data-stu-id="1d754-149">[Application Insights support for Microservices and Containers](https://azure.microsoft.com/app-insights-microservices/) shows you some of the new features that are being worked on (currently still in beta), which allow you to have richer out-of-the-box monitoring options with AI.</span></span> <span data-ttu-id="1d754-150">Obejmują one śledzenia zależności (używanego podczas konstruowania AppMap wszystkich usług i aplikacji w klastrze i komunikację między nimi) oraz lepsze korelacji śladów pochodzących z Twoimi usługami (pomaga w lepiej trafić problemu w przepływie pracy programu aplikacji lub usługi).</span><span class="sxs-lookup"><span data-stu-id="1d754-150">These include dependency tracking (used in building an AppMap of all your services and applications in a cluster and the communication between them), and better correlation of traces coming from your services (helps in better pinpointing an issue in the workflow of an app or service).</span></span>

<span data-ttu-id="1d754-151">Jeśli opracowujesz w .NET i zostanie przy użyciu niektóre usługi sieć szkieletowa programowania modeli i czy chce używać AI jako platformy do wizualizacji i analizowania danych zdarzeń i dzienników, następnie zaleca się możesz przejść za pomocą trasy AI SDK jako monitorowania i diagnos e przepływ pracy.</span><span class="sxs-lookup"><span data-stu-id="1d754-151">If you are developing in .NET and will likely be using some of Service Fabric's programming models, and are willing to use AI as your platform for visualizing and analyzing event and log data, then we recommend that you go via the AI SDK route as your monitoring and diagnostics workflow.</span></span> <span data-ttu-id="1d754-152">Odczyt [to](../application-insights/app-insights-asp-net-more.md) i [to](../application-insights/app-insights-asp-net-trace-logs.md) wprowadzenie gromadzenie i wyświetlanie dzienników przy użyciu AI.</span><span class="sxs-lookup"><span data-stu-id="1d754-152">Read [this](../application-insights/app-insights-asp-net-more.md) and [this](../application-insights/app-insights-asp-net-trace-logs.md) to get started with using AI to collect and display your logs.</span></span>

## <a name="navigating-the-ai-resource-in-azure-portal"></a><span data-ttu-id="1d754-153">Nawigowanie po zasobu AI w portalu Azure</span><span class="sxs-lookup"><span data-stu-id="1d754-153">Navigating the AI resource in Azure portal</span></span>

<span data-ttu-id="1d754-154">Po skonfigurowaniu AI jako dane wyjściowe dla zdarzeń i dzienniki informacji należy zacząć wyświetlani w zasobie AI za kilka minut.</span><span class="sxs-lookup"><span data-stu-id="1d754-154">Once you have configured AI as an output for your events and logs, information should start to show up in your AI resource in a few minutes.</span></span> <span data-ttu-id="1d754-155">Przejdź do zasobu AI, co spowoduje przejście do pulpitu nawigacyjnego zasobów AI.</span><span class="sxs-lookup"><span data-stu-id="1d754-155">Navigate to the AI resource, which will take you to the AI resource dashboard.</span></span> <span data-ttu-id="1d754-156">Kliknij przycisk **wyszukiwania** AI pasku zadań, aby zobaczyć najnowsze dane śledzenia, które otrzymała i można filtrować za ich pośrednictwem.</span><span class="sxs-lookup"><span data-stu-id="1d754-156">Click **Search** in the AI taskbar to see the latest traces that it has received, and to be able to filter through them.</span></span>

<span data-ttu-id="1d754-157">*Eksploratora metryk* stanowi przydatne narzędzie do tworzenia niestandardowych pulpitów nawigacyjnych w oparciu metryki aplikacji, usług i klaster mogą raportowania.</span><span class="sxs-lookup"><span data-stu-id="1d754-157">*Metrics Explorer* is a useful tool for creating custom dashboards based on metrics that your applications, services, and cluster may be reporting.</span></span> <span data-ttu-id="1d754-158">Zobacz [metryki Eksplorowanie w usłudze Application Insights](../application-insights/app-insights-metrics-explorer.md) do skonfigurowania kilku wykresów dla siebie na podstawie danych są zbierane.</span><span class="sxs-lookup"><span data-stu-id="1d754-158">See [Exploring Metrics in Application Insights](../application-insights/app-insights-metrics-explorer.md) to set up a few charts for yourself based on the data you are collecting.</span></span>

<span data-ttu-id="1d754-159">Kliknięcie przycisku **Analytics** spowoduje przejście do portalu Application Insights Analytics, gdzie można zbadać zdarzenia i dane śledzenia z większą zakresu i opcjonalność.</span><span class="sxs-lookup"><span data-stu-id="1d754-159">Clicking **Analytics** will take you to the Application Insights Analytics portal, where you can query events and traces with greater scope and optionality.</span></span> <span data-ttu-id="1d754-160">Dowiedz się więcej o tym w [analizy w usłudze Application Insights](../application-insights/app-insights-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="1d754-160">Read more about this at [Analytics in Application Insights](../application-insights/app-insights-analytics.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="1d754-161">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="1d754-161">Next steps</span></span>

* <span data-ttu-id="1d754-162">[Konfigurowanie alertów w AI](../application-insights/app-insights-alerts.md) Aby otrzymywać powiadomienia o zmianach wprowadzonych w wydajności i użycia</span><span class="sxs-lookup"><span data-stu-id="1d754-162">[Set up Alerts in AI](../application-insights/app-insights-alerts.md) to be notified about changes in performance or usage</span></span>
* <span data-ttu-id="1d754-163">[Inteligentne wykrywania w usłudze Application Insights](../application-insights/app-insights-proactive-diagnostics.md) wykonuje aktywnego analizy telemetrii są wysyłane do AI, aby ostrzec użytkownika o potencjalnych problemów z wydajnością</span><span class="sxs-lookup"><span data-stu-id="1d754-163">[Smart Detection in Application Insights](../application-insights/app-insights-proactive-diagnostics.md) performs a proactive analysis of the telemetry being sent to AI to warn you of potential performance problems</span></span>