---
title: "aaaOverview życia hello Azure Usługa sieci szkieletowej niezawodnych usług | Dokumentacja firmy Microsoft"
description: "Dowiedz się więcej o hello zdarzenia różnych cyklu życia w sieci szkieletowej usług niezawodne usługi"
services: Service-Fabric
documentationcenter: java
author: PavanKunapareddyMSFT
manager: timlt
ms.assetid: 
ms.service: Service-Fabric
ms.devlang: java
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/30/2017
ms.author: pakunapa;
ms.openlocfilehash: 6d48c217d12bc5248c2da57b544aac747cecd872
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="reliable-services-lifecycle-overview"></a><span data-ttu-id="3febb-103">Przegląd cyklu życia niezawodne usługi</span><span class="sxs-lookup"><span data-stu-id="3febb-103">Reliable services lifecycle overview</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="3febb-104">C# w systemie Windows</span><span class="sxs-lookup"><span data-stu-id="3febb-104">C# on Windows</span></span>](service-fabric-reliable-services-lifecycle.md)
> * [<span data-ttu-id="3febb-105">Java w systemie Linux</span><span class="sxs-lookup"><span data-stu-id="3febb-105">Java on Linux</span></span>](service-fabric-reliable-services-lifecycle-java.md)
>
>

<span data-ttu-id="3febb-106">Rozważania na temat cykli hello niezawodnych usług, podstawy hello życia hello są najważniejsze hello.</span><span class="sxs-lookup"><span data-stu-id="3febb-106">When thinking about hello lifecycles of Reliable Services, hello basics of hello lifecycle are hello most important.</span></span> <span data-ttu-id="3febb-107">Ogólnie rzecz biorąc:</span><span class="sxs-lookup"><span data-stu-id="3febb-107">In general:</span></span>

* <span data-ttu-id="3febb-108">Podczas uruchamiania</span><span class="sxs-lookup"><span data-stu-id="3febb-108">During Startup</span></span>
  * <span data-ttu-id="3febb-109">Usługi są wykonane</span><span class="sxs-lookup"><span data-stu-id="3febb-109">Services are constructed</span></span>
  * <span data-ttu-id="3febb-110">Mieć możliwość tooconstruct i zwraca zero lub więcej obiektów nasłuchujących</span><span class="sxs-lookup"><span data-stu-id="3febb-110">They have an opportunity tooconstruct and return zero or more listeners</span></span>
  * <span data-ttu-id="3febb-111">Wszystkie zwracane obiekty nasłuchujące są otwarte, zezwolenie na komunikację z usługą hello</span><span class="sxs-lookup"><span data-stu-id="3febb-111">Any returned listeners are opened, allowing communication with hello service</span></span>
  * <span data-ttu-id="3febb-112">metodzie runAsync usługi Hello jest wywoływana, umożliwiając hello toodo usługi długotrwałe lub pracy w tle</span><span class="sxs-lookup"><span data-stu-id="3febb-112">hello Service's runAsync method is called, allowing hello service toodo long running or background work</span></span>
* <span data-ttu-id="3febb-113">Podczas zamykania</span><span class="sxs-lookup"><span data-stu-id="3febb-113">During shutdown</span></span>
  * <span data-ttu-id="3febb-114">toorunAsync przekazany token anulowania Hello została anulowana, a odbiorników hello są zamknięte</span><span class="sxs-lookup"><span data-stu-id="3febb-114">hello cancellation token passed toorunAsync is canceled, and hello listeners are closed</span></span>
  * <span data-ttu-id="3febb-115">To znaczy po zakończeniu sam obiekt usługi hello jest niszczone</span><span class="sxs-lookup"><span data-stu-id="3febb-115">Once that is complete, hello service object itself is destructed</span></span>

<span data-ttu-id="3febb-116">Szczegóły dotyczące hello są dokładne uporządkowanie tych zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="3febb-116">There are details around hello exact ordering of these events.</span></span> <span data-ttu-id="3febb-117">W szczególności hello kolejność zdarzeń mogą się nieznacznie zmieniać w zależności od tego, czy hello niezawodnej usługi jest Stateless lub Stateful.</span><span class="sxs-lookup"><span data-stu-id="3febb-117">In particular, hello order of events may change slightly depending on whether hello Reliable Service is Stateless or Stateful.</span></span> <span data-ttu-id="3febb-118">Ponadto usługi stanowej, zostały toodeal ze scenariuszem głównej wymiany hello.</span><span class="sxs-lookup"><span data-stu-id="3febb-118">In addition, for stateful services, we have toodeal with hello Primary swap scenario.</span></span> <span data-ttu-id="3febb-119">Podczas tej sekwencji hello rolę podstawową jest przeniesione tooanother repliki (lub wróci) bez usługi hello zamykanie.</span><span class="sxs-lookup"><span data-stu-id="3febb-119">During this sequence, hello role of Primary is transferred tooanother replica (or comes back) without hello service shutting down.</span></span> <span data-ttu-id="3febb-120">Na koniec mamy toothink o warunkach błędu lub niepowodzenie.</span><span class="sxs-lookup"><span data-stu-id="3febb-120">Finally, we have toothink about error or failure conditions.</span></span>

## <a name="stateless-service-startup"></a><span data-ttu-id="3febb-121">Uruchamianie usługi bezstanowej</span><span class="sxs-lookup"><span data-stu-id="3febb-121">Stateless service startup</span></span>
<span data-ttu-id="3febb-122">Witaj cyklem życia usługi bezstanowej jest bardzo prosta.</span><span class="sxs-lookup"><span data-stu-id="3febb-122">hello lifecycle of a stateless service is fairly straightforward.</span></span> <span data-ttu-id="3febb-123">Poniżej przedstawiono kolejność zdarzeń hello:</span><span class="sxs-lookup"><span data-stu-id="3febb-123">Here's hello order of events:</span></span>

1. <span data-ttu-id="3febb-124">Witaj usługi jest tworzony</span><span class="sxs-lookup"><span data-stu-id="3febb-124">hello Service is constructed</span></span>
2. <span data-ttu-id="3febb-125">Następnie w dwie czynności równoległe stanie:</span><span class="sxs-lookup"><span data-stu-id="3febb-125">Then, in parallel two things happen:</span></span>
    - <span data-ttu-id="3febb-126">`StatelessService.createServiceInstanceListeners()`jest wywoływany i wszystkie zwracane obiekty nasłuchujące (`CommunicationListener.openAsync()` jest wywoływane dla każdego odbiornika)</span><span class="sxs-lookup"><span data-stu-id="3febb-126">`StatelessService.createServiceInstanceListeners()` is invoked and any returned listeners are Opened (`CommunicationListener.openAsync()` is called on each listener)</span></span>
    - <span data-ttu-id="3febb-127">Witaj w metodzie runAsync usługi (`StatelessService.runAsync()`) jest nazywany</span><span class="sxs-lookup"><span data-stu-id="3febb-127">hello service's runAsync method (`StatelessService.runAsync()`) is called</span></span>
3. <span data-ttu-id="3febb-128">Jeśli jest obecny, wywoływana jest metoda onOpenAsync tej usługi hello (w szczególności `StatelessService.onOpenAsync()` jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="3febb-128">If present, hello service's own onOpenAsync method is called (Specifically, `StatelessService.onOpenAsync()` is called.</span></span> <span data-ttu-id="3febb-129">To jest rzadko zastąpienia, ale jest ona dostępna).</span><span class="sxs-lookup"><span data-stu-id="3febb-129">This is an uncommon override but it is available).</span></span>

<span data-ttu-id="3febb-130">Jest toonote ważna jest kolejność nie między toocreate wywołania hello i otwórz hello odbiorników i runAsync.</span><span class="sxs-lookup"><span data-stu-id="3febb-130">It is important toonote that there is no ordering between hello calls toocreate and open hello listeners and runAsync.</span></span> <span data-ttu-id="3febb-131">przed rozpoczęciem runAsync odbiorników Hello może zostać otwarty.</span><span class="sxs-lookup"><span data-stu-id="3febb-131">hello listeners may open before runAsync is started.</span></span> <span data-ttu-id="3febb-132">Podobnie runAsync może się okazać wywoływane przed odbiorników komunikacji hello są otwarte lub nawet zostały wykonane.</span><span class="sxs-lookup"><span data-stu-id="3febb-132">Similarly, runAsync may end up invoked before hello communication listeners are open or have even been constructed.</span></span> <span data-ttu-id="3febb-133">Jeśli wymagana jest każdej synchronizacji, jest pozostawiany jako implementujący toohello wykonywania.</span><span class="sxs-lookup"><span data-stu-id="3febb-133">If any synchronization is required, it is left as an exercise toohello implementer.</span></span> <span data-ttu-id="3febb-134">Typowe rozwiązania:</span><span class="sxs-lookup"><span data-stu-id="3febb-134">Common solutions:</span></span>

* <span data-ttu-id="3febb-135">Czasami odbiorników nie może działać, dopóki niektóre informacje o utworzeniu lub pracy wykonanej.</span><span class="sxs-lookup"><span data-stu-id="3febb-135">Sometimes listeners can't function until some other information is created or work done.</span></span> <span data-ttu-id="3febb-136">Dla usług bezstanowych, które zwykle można zrobić pracy w Konstruktorze hello usługi podczas hello `createServiceInstanceListeners()` wywołać, lub jako część konstrukcji hello odbiornika hello, sama.</span><span class="sxs-lookup"><span data-stu-id="3febb-136">For stateless services that work can usually be done in hello service's constructor, during hello `createServiceInstanceListeners()` call, or as a part of hello construction of hello listener itself.</span></span>
* <span data-ttu-id="3febb-137">Czasami hello kodu w runAsync nie chce toostart dopóki odbiorników hello są otwarte.</span><span class="sxs-lookup"><span data-stu-id="3febb-137">Sometimes hello code in runAsync does not want toostart until hello listeners are open.</span></span> <span data-ttu-id="3febb-138">W takim przypadku niezbędne jest dodatkowe koordynacji.</span><span class="sxs-lookup"><span data-stu-id="3febb-138">In this case additional coordination is necessary.</span></span> <span data-ttu-id="3febb-139">Jednym z typowych rozwiązań jest niektórych flagi w odbiorników hello wskazujący, po zakończeniu, który zaznaczono w runAsync przed kontynuowaniem pracy tooactual.</span><span class="sxs-lookup"><span data-stu-id="3febb-139">One common solution is some flag within hello listeners indicating when they have completed, which is checked in runAsync before continuing tooactual work.</span></span>

## <a name="stateless-service-shutdown"></a><span data-ttu-id="3febb-140">Zamykanie usługi bezstanowej</span><span class="sxs-lookup"><span data-stu-id="3febb-140">Stateless service shutdown</span></span>
<span data-ttu-id="3febb-141">Podczas zamykania usługi bezstanowej powitalne tego samego wzorca występuje tylko w odwrotnej:</span><span class="sxs-lookup"><span data-stu-id="3febb-141">When shutting down a stateless service, hello same pattern is followed, just in reverse:</span></span>

1. <span data-ttu-id="3febb-142">Równoległe</span><span class="sxs-lookup"><span data-stu-id="3febb-142">In parallel</span></span>
    - <span data-ttu-id="3febb-143">Są zamykane wszystkie otwarte odbiorników (`CommunicationListener.closeAsync()` jest wywoływane dla każdego odbiornika)</span><span class="sxs-lookup"><span data-stu-id="3febb-143">Any open listeners are Closed (`CommunicationListener.closeAsync()` is called on each listener)</span></span>
    - <span data-ttu-id="3febb-144">token anulowania Hello przekazano zbyt`runAsync()` zostało anulowane (sprawdzanie token anulowania hello `isCancelled` właściwość zwraca wartość true i wywołuje hello token `throwIfCancellationRequested` metoda zgłasza `CancellationException`)</span><span class="sxs-lookup"><span data-stu-id="3febb-144">hello cancellation token passed too`runAsync()` is canceled (checking hello cancellation token's `isCancelled` property returns true, and if called hello token's `throwIfCancellationRequested` method throws a `CancellationException`)</span></span>
2. <span data-ttu-id="3febb-145">Raz `closeAsync()` uzupełnia w każdym odbiornika i `runAsync()` również zakończeniu hello usługi `StatelessService.onCloseAsync()` metoda jest wywoływana, jeśli jest obecny (ponownie jest rzadko zastąpienie).</span><span class="sxs-lookup"><span data-stu-id="3febb-145">Once `closeAsync()` completes on each listener and `runAsync()` also completes, hello service's `StatelessService.onCloseAsync()` method is called, if present (again this is an uncommon override).</span></span>
3. <span data-ttu-id="3febb-146">Po `StatelessService.onCloseAsync()` zakończeniu obiektu usługi hello jest niszczone</span><span class="sxs-lookup"><span data-stu-id="3febb-146">After `StatelessService.onCloseAsync()` completes, hello service object is destructed</span></span>

## <a name="notes-on-service-lifecycle"></a><span data-ttu-id="3febb-147">Uwagi dotyczące cyklu życia usług</span><span class="sxs-lookup"><span data-stu-id="3febb-147">Notes on service lifecycle</span></span>
* <span data-ttu-id="3febb-148">Zarówno hello `runAsync()` — metoda i hello `createServiceInstanceListeners` wywołania są opcjonalne.</span><span class="sxs-lookup"><span data-stu-id="3febb-148">Both hello `runAsync()` method and hello `createServiceInstanceListeners` calls are optional.</span></span> <span data-ttu-id="3febb-149">Usługa może mieć ich, zarówno lub nie.</span><span class="sxs-lookup"><span data-stu-id="3febb-149">A service may have one of them, both, or neither.</span></span> <span data-ttu-id="3febb-150">Na przykład, jeśli usługa hello ma jego pracy w wywołaniach toouser odpowiedzi, jest niepotrzebna dla niego tooimplement `runAsync()`.</span><span class="sxs-lookup"><span data-stu-id="3febb-150">For example, if hello service does all its work in response toouser calls, there is no need for it tooimplement `runAsync()`.</span></span> <span data-ttu-id="3febb-151">Wymagane są tylko hello odbiorników komunikacji i ich skojarzonego kodu.</span><span class="sxs-lookup"><span data-stu-id="3febb-151">Only hello communication listeners and their associated code are necessary.</span></span> <span data-ttu-id="3febb-152">Podobnie tworzenie i zwracanie odbiorników komunikacji jest opcjonalne, ponieważ usługa hello może mieć tylko tła pracy toodo i dlatego tylko musi tooimplement`runAsync()`</span><span class="sxs-lookup"><span data-stu-id="3febb-152">Similarly, creating and returning communication listeners is optional, as hello service may have only background work toodo, and so only needs tooimplement `runAsync()`</span></span>
* <span data-ttu-id="3febb-153">Jest on prawidłowy dla toocomplete usługi `runAsync()` pomyślnie i z powrotem od niego.</span><span class="sxs-lookup"><span data-stu-id="3febb-153">It is valid for a service toocomplete `runAsync()` successfully and return from it.</span></span> <span data-ttu-id="3febb-154">To nie jest uznawane za stanu błędu i stanowić Praca w tle hello kończenia usługi hello.</span><span class="sxs-lookup"><span data-stu-id="3febb-154">This is not considered a failure condition and would represent hello background work of hello service completing.</span></span> <span data-ttu-id="3febb-155">Dla stanowych usług niezawodnej `runAsync()` może zostać wywołana, jeśli usługa hello nastąpiło obniżenie poziomu z podstawowego i podwyższenia poziomu tooprimary Wstecz.</span><span class="sxs-lookup"><span data-stu-id="3febb-155">For stateful reliable services `runAsync()` would be called again if hello service were demoted from primary and then promoted back tooprimary.</span></span>
* <span data-ttu-id="3febb-156">Jeśli zamknie usługę `runAsync()` przez zgłaszanie nieoczekiwany wyjątek, to jest błąd obiektu usługi hello jest zamknięta i zgłoszony błąd kondycji.</span><span class="sxs-lookup"><span data-stu-id="3febb-156">If a service exits from `runAsync()` by throwing some unexpected exception, this is a failure and hello service object is shut down and a health error reported.</span></span>
* <span data-ttu-id="3febb-157">Gdy nie ma żadnego limitu czasu na zwracanie z tych metod, natychmiast utraty hello możliwości toowrite i z tego powodu nie można ukończyć rzeczywistą pracę.</span><span class="sxs-lookup"><span data-stu-id="3febb-157">While there is no time limit on returning from these methods, you immediately lose hello ability toowrite and therefore cannot complete any real work.</span></span> <span data-ttu-id="3febb-158">Należy zwrócić możliwie jak najszybciej po otrzymaniu żądania anulowania hello jest zalecane.</span><span class="sxs-lookup"><span data-stu-id="3febb-158">It is recommended that you return as quickly as possible upon receiving hello cancellation request.</span></span> <span data-ttu-id="3febb-159">Jeśli usługa nie odpowiada wywołania toothese interfejsu API w rozsądnym czasie, Service Fabric może wymusić przerwanie usługi.</span><span class="sxs-lookup"><span data-stu-id="3febb-159">If your service does not respond toothese API calls in a reasonable amount of time Service Fabric may forcibly terminate your service.</span></span> <span data-ttu-id="3febb-160">Zwykle to tylko odbywa się podczas uaktualniania aplikacji lub gdy usługa jest usuwana.</span><span class="sxs-lookup"><span data-stu-id="3febb-160">Usually this only happens during application upgrades or when a service is being deleted.</span></span> <span data-ttu-id="3febb-161">Tego limitu czasu wynosi 15 minut domyślnie.</span><span class="sxs-lookup"><span data-stu-id="3febb-161">This timeout is 15 minutes by default.</span></span>
* <span data-ttu-id="3febb-162">Błędy w hello `onCloseAsync()` doprowadzi do ścieżki `onAbort()` wywoływana, która jest możliwość optymalnych ostatniej szansy hello usługi tooclean w górę i zwolnić wszystkie zasoby, które zostały przejęte one.</span><span class="sxs-lookup"><span data-stu-id="3febb-162">Failures in hello `onCloseAsync()` path result in `onAbort()` being called which is a last-chance best-effort opportunity for hello service tooclean up and release any resources that they have claimed.</span></span>

> [!NOTE]
> <span data-ttu-id="3febb-163">Niezawodne usługi stanowej nie są obsługiwane w języku java jeszcze.</span><span class="sxs-lookup"><span data-stu-id="3febb-163">Stateful reliable services are not supported in java yet.</span></span>
>
>

## <a name="next-steps"></a><span data-ttu-id="3febb-164">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="3febb-164">Next steps</span></span>
* [<span data-ttu-id="3febb-165">Wprowadzenie tooReliable usług</span><span class="sxs-lookup"><span data-stu-id="3febb-165">Introduction tooReliable Services</span></span>](service-fabric-reliable-services-introduction.md)
* [<span data-ttu-id="3febb-166">Niezawodne usługi szybki start</span><span class="sxs-lookup"><span data-stu-id="3febb-166">Reliable Services quick start</span></span>](service-fabric-reliable-services-quick-start.md)
* [<span data-ttu-id="3febb-167">Niezawodne usługi advanced użycia</span><span class="sxs-lookup"><span data-stu-id="3febb-167">Reliable Services advanced usage</span></span>](service-fabric-reliable-services-advanced-usage.md)
