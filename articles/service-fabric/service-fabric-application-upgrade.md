---
title: Uaktualnianie aplikacji Fabric aaaService | Dokumentacja firmy Microsoft
description: "Ten artykuł zawiera tooupgrading wprowadzenie aplikacji usługi Service Fabric, w tym wyboru między trybami uaktualniania i zostanie wykonana kontroli kondycji."
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: 803c9c63-373a-4d6a-8ef2-ea97e16e88dd
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 6f649ef4a5c0afab682522bcba7d2d66a4268ead
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-application-upgrade"></a><span data-ttu-id="2750a-103">Uaktualnianie aplikacji usługi Service Fabric</span><span class="sxs-lookup"><span data-stu-id="2750a-103">Service Fabric application upgrade</span></span>
<span data-ttu-id="2750a-104">Aplikacja Azure Service Fabric jest kolekcja usług.</span><span class="sxs-lookup"><span data-stu-id="2750a-104">An Azure Service Fabric application is a collection of services.</span></span> <span data-ttu-id="2750a-105">Podczas uaktualniania usługi sieć szkieletowa porównuje hello nowe [manifest aplikacji](service-fabric-application-model.md#describe-an-application) z poprzednią wersją hello i określa, które usługi w aplikacji hello wymagają aktualizacji.</span><span class="sxs-lookup"><span data-stu-id="2750a-105">During an upgrade, Service Fabric compares hello new [application manifest](service-fabric-application-model.md#describe-an-application) with hello previous version and determines which services in hello application require updates.</span></span> <span data-ttu-id="2750a-106">Sieć szkieletowa usług porównuje wersję hello numery w usłudze hello manifesty z numerami wersji hello hello poprzedniej wersji.</span><span class="sxs-lookup"><span data-stu-id="2750a-106">Service Fabric compares hello version numbers in hello service manifests with hello version numbers in hello previous version.</span></span> <span data-ttu-id="2750a-107">Jeśli usługa nie została zmieniona, czy usługa nie jest uaktualniony.</span><span class="sxs-lookup"><span data-stu-id="2750a-107">If a service has not changed, that service is not upgraded.</span></span>

## <a name="rolling-upgrades-overview"></a><span data-ttu-id="2750a-108">Omówienie uaktualnienia stopniowego</span><span class="sxs-lookup"><span data-stu-id="2750a-108">Rolling upgrades overview</span></span>
<span data-ttu-id="2750a-109">W uaktualnienia stopniowego aplikacji hello uaktualnienia jest wykonywane w etapach.</span><span class="sxs-lookup"><span data-stu-id="2750a-109">In a rolling application upgrade, hello upgrade is performed in stages.</span></span> <span data-ttu-id="2750a-110">Na każdym etapie uaktualnianie hello jest stosowane tooa podzbioru węzłów w klastrze hello o nazwie domeny aktualizacji.</span><span class="sxs-lookup"><span data-stu-id="2750a-110">At each stage, hello upgrade is applied tooa subset of nodes in hello cluster, called an update domain.</span></span> <span data-ttu-id="2750a-111">W związku z tym aplikacji hello pozostaje dostępne w całej hello uaktualnienia.</span><span class="sxs-lookup"><span data-stu-id="2750a-111">As a result, hello application remains available throughout hello upgrade.</span></span> <span data-ttu-id="2750a-112">Podczas uaktualniania hello hello klastra może zawierać kombinację hello starej i nowej wersji.</span><span class="sxs-lookup"><span data-stu-id="2750a-112">During hello upgrade, hello cluster may contain a mix of hello old and new versions.</span></span>

<span data-ttu-id="2750a-113">Z tego powodu Witaj dwie wersje muszą być do przodu i do tyłu zgodne.</span><span class="sxs-lookup"><span data-stu-id="2750a-113">For that reason, hello two versions must be forward and backward compatible.</span></span> <span data-ttu-id="2750a-114">Jeśli nie są zgodne, administrator aplikacji hello jest odpowiedzialny za przemieszczania dostępności fazy toomaintain uaktualnienia.</span><span class="sxs-lookup"><span data-stu-id="2750a-114">If they are not compatible, hello application administrator is responsible for staging a multiple-phase upgrade toomaintain availability.</span></span> <span data-ttu-id="2750a-115">Uaktualnianie fazy hello pierwszym krokiem jest uaktualnienie tooan pośrednich wersji aplikacji hello, która jest zgodna z poprzednią wersją hello.</span><span class="sxs-lookup"><span data-stu-id="2750a-115">In a multiple-phase upgrade, hello first step is upgrading tooan intermediate version of hello application that is compatible with hello previous version.</span></span> <span data-ttu-id="2750a-116">drugi etap Hello jest tooupgrade hello ostateczną wersją dzieli zgodności z wersją przed aktualizacją hello, ale jest niezgodny z wersją pośredniego hello.</span><span class="sxs-lookup"><span data-stu-id="2750a-116">hello second step is tooupgrade hello final version that breaks compatibility with hello pre-update version, but is compatible with hello intermediate version.</span></span>

<span data-ttu-id="2750a-117">Domen aktualizacji są określone w manifeście klastra hello podczas konfigurowania klastra hello.</span><span class="sxs-lookup"><span data-stu-id="2750a-117">Update domains are specified in hello cluster manifest when you configure hello cluster.</span></span> <span data-ttu-id="2750a-118">Aktualizacja domeny nie otrzymywać aktualizacje w określonej kolejności.</span><span class="sxs-lookup"><span data-stu-id="2750a-118">Update domains do not receive updates in a particular order.</span></span> <span data-ttu-id="2750a-119">Domena aktualizacji jest jednostka logiczna wdrożenia dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2750a-119">An update domain is a logical unit of deployment for an application.</span></span> <span data-ttu-id="2750a-120">Domen aktualizacji Zezwalaj hello tooremain usług o wysokiej dostępności podczas uaktualniania.</span><span class="sxs-lookup"><span data-stu-id="2750a-120">Update domains allow hello services tooremain at high availability during an upgrade.</span></span>

<span data-ttu-id="2750a-121">Uaktualnienia stopniowego nie są możliwe w przypadku uaktualniania hello tooall zastosowane węzłów w klastrze hello sytuacja hello aplikacji hello ma tylko jedną domenę aktualizacji.</span><span class="sxs-lookup"><span data-stu-id="2750a-121">Non-rolling upgrades are possible if hello upgrade is applied tooall nodes in hello cluster, which is hello case when hello application has only one update domain.</span></span> <span data-ttu-id="2750a-122">Ta metoda nie jest zalecane, ponieważ usługa hello ulegnie awarii i nie jest dostępny w czasie hello uaktualnienia.</span><span class="sxs-lookup"><span data-stu-id="2750a-122">This approach is not recommended, since hello service goes down and isn't available at hello time of upgrade.</span></span> <span data-ttu-id="2750a-123">Ponadto Azure nie daje żadnej gwarancji, po skonfigurowaniu klastra z tylko jedną aktualizację domeny.</span><span class="sxs-lookup"><span data-stu-id="2750a-123">Additionally, Azure doesn't provide any guarantees when a cluster is set up with only one update domain.</span></span>

## <a name="health-checks-during-upgrades"></a><span data-ttu-id="2750a-124">Sprawdzanie kondycji podczas uaktualniania</span><span class="sxs-lookup"><span data-stu-id="2750a-124">Health checks during upgrades</span></span>
<span data-ttu-id="2750a-125">W przypadku uaktualnienia zasady dotyczące kondycji mają toobe ustawić lub mogą zostać użyte wartości domyślne.</span><span class="sxs-lookup"><span data-stu-id="2750a-125">For an upgrade, health policies have toobe set (or default values may be used).</span></span> <span data-ttu-id="2750a-126">Uaktualnienie jest określane jako powiodło się po uaktualnieniu wszystkich domen aktualizacji w ramach hello określić limity czasu i aktualizacji wszystkich domen zostaną uznane za dobrej kondycji.</span><span class="sxs-lookup"><span data-stu-id="2750a-126">An upgrade is termed successful when all update domains are upgraded within hello specified time-outs, and when all update domains are deemed healthy.</span></span>  <span data-ttu-id="2750a-127">Domeny aktualizacji w dobrej kondycji oznacza, że wszystkie sprawdzenia kondycji hello określonym w zasadach kondycji hello przekazany tej domeny aktualizacji hello.</span><span class="sxs-lookup"><span data-stu-id="2750a-127">A healthy update domain means that hello update domain passed all hello health checks specified in hello health policy.</span></span> <span data-ttu-id="2750a-128">Na przykład zasadę może wprowadzić, że wszystkie usługi w ramach wystąpienia aplikacji musi być *dobrej kondycji*, jak kondycji jest definiowana za pomocą sieci szkieletowej usług.</span><span class="sxs-lookup"><span data-stu-id="2750a-128">For example, a health policy may mandate that all services within an application instance must be *healthy*, as health is defined by Service Fabric.</span></span>

<span data-ttu-id="2750a-129">Zasady dotyczące kondycji i kontroli podczas uaktualniania przez sieć szkieletowa usług są niezależne od usług i aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2750a-129">Health policies and checks during upgrade by Service Fabric are service and application agnostic.</span></span> <span data-ttu-id="2750a-130">Oznacza to, że są wykonywane żadne testy specyficzne dla usługi.</span><span class="sxs-lookup"><span data-stu-id="2750a-130">That is, no service-specific tests are done.</span></span>  <span data-ttu-id="2750a-131">Na przykład usługa może mieć wymaganie przepływności, ale usługi sieć szkieletowa nie ma hello informacji toocheck przepływności.</span><span class="sxs-lookup"><span data-stu-id="2750a-131">For example, your service might have a throughput requirement, but Service Fabric does not have hello information toocheck throughput.</span></span> <span data-ttu-id="2750a-132">Zobacz toohello [artykuły kondycji](service-fabric-health-introduction.md) hello kontroli, które są wykonywane.</span><span class="sxs-lookup"><span data-stu-id="2750a-132">Refer toohello [health articles](service-fabric-health-introduction.md) for hello checks that are performed.</span></span> <span data-ttu-id="2750a-133">Witaj testów, które mają miejsce podczas testów uaktualniania include dla tego, czy pakiet aplikacji hello skopiowano poprawnie, czy wystąpienie hello została uruchomiona i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="2750a-133">hello checks that happen during an upgrade include tests for whether hello application package was copied correctly, whether hello instance was started, and so on.</span></span>

<span data-ttu-id="2750a-134">Kondycja aplikacji Hello jest agregacją jednostek podrzędnych hello aplikacji hello.</span><span class="sxs-lookup"><span data-stu-id="2750a-134">hello application health is an aggregation of hello child entities of hello application.</span></span> <span data-ttu-id="2750a-135">Innymi słowy sieć szkieletowa usług oblicza hello kondycji aplikacji hello za pośrednictwem hello kondycji, który jest zgłaszany w aplikacji hello.</span><span class="sxs-lookup"><span data-stu-id="2750a-135">In short, Service Fabric evaluates hello health of hello application through hello health that is reported on hello application.</span></span> <span data-ttu-id="2750a-136">Oblicza również hello kondycję wszystkich usług hello aplikacji hello w ten sposób.</span><span class="sxs-lookup"><span data-stu-id="2750a-136">It also evaluates hello health of all hello services for hello application this way.</span></span> <span data-ttu-id="2750a-137">Dodatkowe sieci szkieletowej usług oblicza kondycję hello usług aplikacji hello agregowania kondycji hello ich elementy podrzędne, takie jak hello repliki usługi.</span><span class="sxs-lookup"><span data-stu-id="2750a-137">Service Fabric further evaluates hello health of hello application services by aggregating hello health of their children, such as hello service replica.</span></span> <span data-ttu-id="2750a-138">Po spełnieniu zasady kondycji aplikacji hello hello uaktualnienia można kontynuować.</span><span class="sxs-lookup"><span data-stu-id="2750a-138">Once hello application health policy is satisfied, hello upgrade can proceed.</span></span> <span data-ttu-id="2750a-139">Naruszenia zasad dotyczących kondycji hello uaktualniania aplikacji hello kończy się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="2750a-139">If hello health policy is violated, hello application upgrade fails.</span></span>

## <a name="upgrade-modes"></a><span data-ttu-id="2750a-140">Tryby uaktualnienia</span><span class="sxs-lookup"><span data-stu-id="2750a-140">Upgrade modes</span></span>
<span data-ttu-id="2750a-141">Tryb Hello, zalecane w przypadku uaktualniania aplikacji jest monitorowane hello tryb, w którym jest tryb hello najczęściej używanych.</span><span class="sxs-lookup"><span data-stu-id="2750a-141">hello mode that we recommend for application upgrade is hello monitored mode, which is hello commonly used mode.</span></span> <span data-ttu-id="2750a-142">Tryb monitorowanych przeprowadzają jedna aktualizacja domeny uaktualnienia hello i jeśli sprawdza wszystkie dane kondycji przebiegu (na powitania zasady określone), przenosi toohello dalej domeny aktualizacji automatycznie.</span><span class="sxs-lookup"><span data-stu-id="2750a-142">Monitored mode performs hello upgrade on one update domain, and if all health checks pass (per hello policy specified), moves on toohello next update domain automatically.</span></span>  <span data-ttu-id="2750a-143">Niepowodzenie sprawdzania kondycji i/lub osiągnięcia limitów czasu, uaktualnienie hello albo jest przywracana hello aktualizacji domeny, czy tryb hello jest ręczne toounmonitored zmienione.</span><span class="sxs-lookup"><span data-stu-id="2750a-143">If health checks fail and/or time-outs are reached, hello upgrade is either rolled back for hello update domain, or hello mode is changed toounmonitored manual.</span></span> <span data-ttu-id="2750a-144">Można skonfigurować hello toochoose uaktualnienia, jeden z tych dwóch trybów uaktualnienia nie powiodło się.</span><span class="sxs-lookup"><span data-stu-id="2750a-144">You can configure hello upgrade toochoose one of those two modes for failed upgrades.</span></span> 

<span data-ttu-id="2750a-145">Niemonitorowane ręczny tryb wymaga ręcznej interwencji po każdym uaktualnienia w domenie aktualizacji, tookick poza uaktualniania hello na powitania dalej domeny aktualizacji.</span><span class="sxs-lookup"><span data-stu-id="2750a-145">Unmonitored manual mode needs manual intervention after every upgrade on an update domain, tookick off hello upgrade on hello next update domain.</span></span> <span data-ttu-id="2750a-146">Nie sieci szkieletowej usług kondycji są sprawdzane.</span><span class="sxs-lookup"><span data-stu-id="2750a-146">No Service Fabric health checks are performed.</span></span> <span data-ttu-id="2750a-147">Hello administrator sprawdza hello kondycji lub stanu przed rozpoczęciem uaktualniania hello hello dalej domeny aktualizacji.</span><span class="sxs-lookup"><span data-stu-id="2750a-147">hello administrator performs hello health or status checks before starting hello upgrade in hello next update domain.</span></span>

## <a name="upgrade-default-services"></a><span data-ttu-id="2750a-148">Uaktualnij usługi domyślne</span><span class="sxs-lookup"><span data-stu-id="2750a-148">Upgrade default services</span></span>
<span data-ttu-id="2750a-149">Podczas procesu uaktualniania hello aplikacji można uaktualnić usługi domyślnej aplikacji sieci szkieletowej usług.</span><span class="sxs-lookup"><span data-stu-id="2750a-149">Default services within Service Fabric application can be upgraded during hello upgrade process of an application.</span></span> <span data-ttu-id="2750a-150">Domyślne usługi są zdefiniowane w hello [manifest aplikacji](service-fabric-application-model.md#describe-an-application).</span><span class="sxs-lookup"><span data-stu-id="2750a-150">Default services are defined in hello [application manifest](service-fabric-application-model.md#describe-an-application).</span></span> <span data-ttu-id="2750a-151">Standardowe reguły Hello uaktualniania usług domyślnych są następujące:</span><span class="sxs-lookup"><span data-stu-id="2750a-151">hello standard rules of upgrading default services are:</span></span>

1. <span data-ttu-id="2750a-152">Domyślne usługi w nowych hello [manifest aplikacji](service-fabric-application-model.md#describe-an-application) które nie istnieją w klastrze hello są tworzone.</span><span class="sxs-lookup"><span data-stu-id="2750a-152">Default services in hello new [application manifest](service-fabric-application-model.md#describe-an-application) that do not exist in hello cluster are created.</span></span>
> [!TIP]
> <span data-ttu-id="2750a-153">[EnableDefaultServicesUpgrade](service-fabric-cluster-fabric-settings.md#fabric-settings-that-you-can-customize) potrzeb toobe określonych hello tooenable tootrue reguły.</span><span class="sxs-lookup"><span data-stu-id="2750a-153">[EnableDefaultServicesUpgrade](service-fabric-cluster-fabric-settings.md#fabric-settings-that-you-can-customize) needs toobe set tootrue tooenable hello following rules.</span></span> <span data-ttu-id="2750a-154">Ta funkcja jest obsługiwana w wersji 5.5.</span><span class="sxs-lookup"><span data-stu-id="2750a-154">This feature is supported from v5.5.</span></span>

2. <span data-ttu-id="2750a-155">Domyślne usługi istniejących w obu poprzednich [manifest aplikacji](service-fabric-application-model.md#describe-an-application) i nowej wersji zostały zaktualizowane.</span><span class="sxs-lookup"><span data-stu-id="2750a-155">Default services existing in both previous [application manifest](service-fabric-application-model.md#describe-an-application) and new version are updated.</span></span> <span data-ttu-id="2750a-156">Opisy usług w nowej wersji hello zastąpiłaby znajdującymi się już hello klastra.</span><span class="sxs-lookup"><span data-stu-id="2750a-156">Service descriptions in hello new version would overwrite those already in hello cluster.</span></span> <span data-ttu-id="2750a-157">Uaktualnianie aplikacji czy wycofywania automatycznie po aktualizacji awaria usługi domyślne.</span><span class="sxs-lookup"><span data-stu-id="2750a-157">Application upgrade would rollback automatically upon updating default service failure.</span></span>
3. <span data-ttu-id="2750a-158">Domyślne usługi w poprzednim hello [manifest aplikacji](service-fabric-application-model.md#describe-an-application) , ale nie w nowej wersji hello są usuwane.</span><span class="sxs-lookup"><span data-stu-id="2750a-158">Default services in hello previous [application manifest](service-fabric-application-model.md#describe-an-application) but not in hello new version are deleted.</span></span> <span data-ttu-id="2750a-159">**Należy zwrócić uwagę, to usunięcie usług domyślnych nie można przywrócić.**</span><span class="sxs-lookup"><span data-stu-id="2750a-159">**Note that this deleting default services can not be reverted.**</span></span>

<span data-ttu-id="2750a-160">W przypadku aplikacji uaktualniania zostanie wycofana, usługi domyślne są toohello przywróconego stanu przed rozpoczęciem uaktualniania.</span><span class="sxs-lookup"><span data-stu-id="2750a-160">In case of an application upgrade is rolled back, default services are reverted toohello status before upgrade started.</span></span> <span data-ttu-id="2750a-161">Ale usługami usunięto nigdy nie mogą być tworzone.</span><span class="sxs-lookup"><span data-stu-id="2750a-161">But deleted services can never be created.</span></span>

## <a name="application-upgrade-flowchart"></a><span data-ttu-id="2750a-162">Schemat blokowy uaktualniania aplikacji</span><span class="sxs-lookup"><span data-stu-id="2750a-162">Application upgrade flowchart</span></span>
<span data-ttu-id="2750a-163">Schemat blokowy Hello dalej w tym temacie pomogą zrozumieć hello procesu uaktualniania aplikacji sieci szkieletowej usług.</span><span class="sxs-lookup"><span data-stu-id="2750a-163">hello flowchart following this paragraph can help you understand hello upgrade process of a Service Fabric application.</span></span> <span data-ttu-id="2750a-164">W szczególności przepływu hello w tym artykule opisano sposób hello limity czasu, w tym *HealthCheckStableDuration*, *HealthCheckRetryTimeout*, i *UpgradeHealthCheckInterval*, kontrolować hello uaktualnienia w domenie jedna aktualizacja jest uznawany za powodzenie lub niepowodzenie.</span><span class="sxs-lookup"><span data-stu-id="2750a-164">In particular, hello flow describes how hello time-outs, including *HealthCheckStableDuration*, *HealthCheckRetryTimeout*, and *UpgradeHealthCheckInterval*, help control when hello upgrade in one update domain is considered a success or a failure.</span></span>

![proces uaktualniania Hello aplikacji sieci szkieletowej usług][image]

## <a name="next-steps"></a><span data-ttu-id="2750a-166">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="2750a-166">Next steps</span></span>
<span data-ttu-id="2750a-167">[Uaktualnianie aplikacji za pomocą Visual Studio](service-fabric-application-upgrade-tutorial.md) przeprowadzi Cię przez proces uaktualnienia aplikacji przy użyciu programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="2750a-167">[Upgrading your Application Using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="2750a-168">[Uaktualnienie z aplikacji przy użyciu programu Powershell](service-fabric-application-upgrade-tutorial-powershell.md) przeprowadzi Cię przez proces uaktualnienia aplikacji przy użyciu programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="2750a-168">[Upgrading your Application Using Powershell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="2750a-169">Kontrolowanie sposobu uaktualnienia aplikacji przy użyciu [uaktualnienia parametrów](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="2750a-169">Control how your application upgrades by using [Upgrade Parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="2750a-170">Uzyskania uaktualnień aplikacji zgodnych przez uczenia jak toouse [szeregowanie danych](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="2750a-170">Make your application upgrades compatible by learning how toouse [Data Serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="2750a-171">Dowiedz się, jak toouse zaawansowanych funkcji podczas uaktualniania aplikacji, odnosząc się zbyt[Tematy zaawansowane](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="2750a-171">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced Topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="2750a-172">Rozwiązywania typowych problemów w aplikacji uaktualnień, odnosząc się kroki toohello [Rozwiązywanie problemów z uaktualnieniami aplikacji](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="2750a-172">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting Application Upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

[image]: media/service-fabric-application-upgrade/service-fabric-application-upgrade-flowchart.png
