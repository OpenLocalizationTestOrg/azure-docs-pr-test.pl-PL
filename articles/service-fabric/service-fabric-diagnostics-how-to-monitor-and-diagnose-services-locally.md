---
title: "Debugowanie mikrousług Azure w systemie Windows | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak monitorowanie i diagnozowanie usługi napisane przy użyciu usługi sieć szkieletowa usług Microsoft Azure na maszynie lokalnej."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: edcc0631-ed2d-45a3-851d-2c4fa0f4a326
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/24/2017
ms.author: dekapur
ms.openlocfilehash: 08998340afb2f242b9a268331607b0d1ddb9b0c6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="monitor-and-diagnose-services-in-a-local-machine-development-setup"></a><span data-ttu-id="da6ab-103">Monitorowanie i diagnozowanie usług w Instalatorze programowanie komputera lokalnego</span><span class="sxs-lookup"><span data-stu-id="da6ab-103">Monitor and diagnose services in a local machine development setup</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="da6ab-104">Windows</span><span class="sxs-lookup"><span data-stu-id="da6ab-104">Windows</span></span>](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md)
> * [<span data-ttu-id="da6ab-105">Linux</span><span class="sxs-lookup"><span data-stu-id="da6ab-105">Linux</span></span>](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally-linux.md)
> 
> 

<span data-ttu-id="da6ab-106">Monitorowanie, wykrywanie, diagnozowanie i rozwiązywanie problemów z umożliwiają usług kontynuować przy minimalnym przerw w działaniu środowiska użytkownika.</span><span class="sxs-lookup"><span data-stu-id="da6ab-106">Monitoring, detecting, diagnosing, and troubleshooting allow for services to continue with minimal disruption to the user experience.</span></span> <span data-ttu-id="da6ab-107">Podczas monitorowania i diagnostyki są szczególnie ważne w środowisku produkcyjnym wdrożony rzeczywisty, wydajność będzie zależeć od przyjęcia podobne modelu podczas tworzenia usługi, aby upewnić się, że działają one w przypadku przenoszenia do Instalatora rzeczywistych.</span><span class="sxs-lookup"><span data-stu-id="da6ab-107">While monitoring and diagnostics are critical in an actual deployed production environment, the efficiency will depend on adopting a similar model during development of services to ensure they work when you move to a real-world setup.</span></span> <span data-ttu-id="da6ab-108">Sieć szkieletowa usług ułatwia deweloperom usługa implementuje diagnostyki bezproblemowo działającej na konfiguracje pojedynczego komputera lokalnego rozwoju i w konfiguracji klastra produkcyjnego rzeczywistych.</span><span class="sxs-lookup"><span data-stu-id="da6ab-108">Service Fabric makes it easy for service developers to implement diagnostics that can seamlessly work across both single-machine local development setups and real-world production cluster setups.</span></span>

## <a name="event-tracing-for-windows"></a><span data-ttu-id="da6ab-109">Śledzenie zdarzeń systemu Windows</span><span class="sxs-lookup"><span data-stu-id="da6ab-109">Event Tracing for Windows</span></span>
<span data-ttu-id="da6ab-110">[Śledzenie zdarzeń systemu Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803.aspx) (ETW) to technologia zalecane dla komunikatów śledzenia w sieci szkieletowej usług.</span><span class="sxs-lookup"><span data-stu-id="da6ab-110">[Event Tracing for Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803.aspx) (ETW) is the recommended technology for tracing messages in Service Fabric.</span></span> <span data-ttu-id="da6ab-111">Niektóre zalety używania funkcji ETW są:</span><span class="sxs-lookup"><span data-stu-id="da6ab-111">Some benefits of using ETW are:</span></span>

* <span data-ttu-id="da6ab-112">**ETW jest szybkie.**</span><span class="sxs-lookup"><span data-stu-id="da6ab-112">**ETW is fast.**</span></span> <span data-ttu-id="da6ab-113">Został skonstruowany jako technologia śledzenia, która ma minimalny wpływ na czas wykonywania kodu.</span><span class="sxs-lookup"><span data-stu-id="da6ab-113">It was built as a tracing technology that has minimal impact on code execution times.</span></span>
* <span data-ttu-id="da6ab-114">**Śledzenie zdarzeń systemu Windows współdziała między środowisk deweloperskich lokalne, a także konfiguracje klastra rzeczywistych.**</span><span class="sxs-lookup"><span data-stu-id="da6ab-114">**ETW tracing works seamlessly across local development environments and also real-world cluster setups.**</span></span> <span data-ttu-id="da6ab-115">Oznacza to, że nie masz przepisywania kod śledzenia, gdy wszystko będzie gotowe wdrożyć kod do rzeczywistego klastra.</span><span class="sxs-lookup"><span data-stu-id="da6ab-115">This  means you don't have to rewrite your tracing code when you are ready to deploy your code to a real cluster.</span></span>
* <span data-ttu-id="da6ab-116">**Kod systemu sieci szkieletowej usług używa również ETW śledzenia wewnętrznego.**</span><span class="sxs-lookup"><span data-stu-id="da6ab-116">**Service Fabric system code also uses ETW for internal tracing.**</span></span> <span data-ttu-id="da6ab-117">Dzięki temu można wyświetlić śladów aplikacji przeplatana z sieci szkieletowej usług systemu śledzenia.</span><span class="sxs-lookup"><span data-stu-id="da6ab-117">This allows you to view your application traces interleaved with Service Fabric system traces.</span></span> <span data-ttu-id="da6ab-118">Pomaga również łatwiej zrozumieć sekwencji i wzajemne relacje między kodem aplikacji i zdarzeń w podstawowym systemie.</span><span class="sxs-lookup"><span data-stu-id="da6ab-118">It also helps you to more easily understand the sequences and interrelationships between your application code and events in the underlying system.</span></span>
* <span data-ttu-id="da6ab-119">**Brak obsługi wbudowanych w narzędzia Service Fabric Visual Studio Aby wyświetlić zdarzenia ETW.**</span><span class="sxs-lookup"><span data-stu-id="da6ab-119">**There is built-in support in Service Fabric Visual Studio tools to view ETW events.**</span></span> <span data-ttu-id="da6ab-120">Zdarzenia ETW są wyświetlane w widoku zdarzeń diagnostycznych programu Visual Studio po Visual Studio jest poprawnie skonfigurowane z sieci szkieletowej usług.</span><span class="sxs-lookup"><span data-stu-id="da6ab-120">ETW events appear in the Diagnostic Events view of Visual Studio once Visual Studio is correctly configured with Service Fabric.</span></span> 

## <a name="view-service-fabric-system-events-in-visual-studio"></a><span data-ttu-id="da6ab-121">Wyświetl zdarzenia systemowe platformy Service Fabric w programie Visual Studio</span><span class="sxs-lookup"><span data-stu-id="da6ab-121">View Service Fabric system events in Visual Studio</span></span>
<span data-ttu-id="da6ab-122">Sieć szkieletowa usług emituje zdarzenia ETW, aby pomóc deweloperom aplikacji zorientować się w platformie.</span><span class="sxs-lookup"><span data-stu-id="da6ab-122">Service Fabric emits ETW events to help application developers understand what's happening in the platform.</span></span> <span data-ttu-id="da6ab-123">Jeśli jeszcze tego nie zrobiono, przejdź dalej i postępuj zgodnie z instrukcjami [tworzenie pierwszej aplikacji w programie Visual Studio](service-fabric-create-your-first-application-in-visual-studio.md).</span><span class="sxs-lookup"><span data-stu-id="da6ab-123">If you haven't already done so, go ahead and follow the steps in [Creating your first application in Visual Studio](service-fabric-create-your-first-application-in-visual-studio.md).</span></span> <span data-ttu-id="da6ab-124">Te informacje pomogą Ci aplikacji do pracy z Podglądu zdarzeń diagnostycznych przedstawiający komunikaty śledzenia.</span><span class="sxs-lookup"><span data-stu-id="da6ab-124">This information will help you get an application up and running with the Diagnostics Events Viewer showing the trace messages.</span></span>

1. <span data-ttu-id="da6ab-125">Jeśli diagnostyki okna zdarzeń nie są automatycznie wyświetlane, przejdź do **widoku** w programie Visual Studio, wybierz pozycję **inne okna** , a następnie **podglądu zdarzeń diagnostycznych**.</span><span class="sxs-lookup"><span data-stu-id="da6ab-125">If the diagnostics events window does not automatically show, Go to the **View** tab in Visual Studio, choose **Other Windows** and then **Diagnostic Events Viewer**.</span></span>
2. <span data-ttu-id="da6ab-126">Każdego zdarzenia zawiera informacje standardowe metadanych, które pozwalają węzła, aplikacji i usług, których pochodzi zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="da6ab-126">Each event has standard metadata information that tells you the node, application and service the event is coming from.</span></span> <span data-ttu-id="da6ab-127">Można również filtrować listę zdarzeń za pomocą **filtrować zdarzenia** u góry okna zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="da6ab-127">You can also filter the list of events by using the **Filter events** box at the top of the events window.</span></span> <span data-ttu-id="da6ab-128">Na przykład można filtrować na **nazwa węzła** lub **nazwy usługi.**</span><span class="sxs-lookup"><span data-stu-id="da6ab-128">For example, you can filter on **Node Name** or **Service Name.**</span></span> <span data-ttu-id="da6ab-129">I podczas przeglądania szczegóły zdarzenia, można również wstrzymać przy użyciu **wstrzymać** znajdujący się u góry okna zdarzeń i wznowić później, bez utraty zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="da6ab-129">And when you're looking at event details, you can also pause by using the **Pause** button at the top of the events window and resume later without any loss of events.</span></span>
   
   ![W Podglądzie zdarzeń diagnostycznych programu Visual Studio](./media/service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally/DiagEventsExamples2.png)

## <a name="add-your-own-custom-traces-to-the-application-code"></a><span data-ttu-id="da6ab-131">Dodawanie własne niestandardowe dane śledzenia do kodu aplikacji</span><span class="sxs-lookup"><span data-stu-id="da6ab-131">Add your own custom traces to the application code</span></span>
<span data-ttu-id="da6ab-132">Szablony projektu Visual Studio sieci szkieletowej usług zawiera przykładowy kod.</span><span class="sxs-lookup"><span data-stu-id="da6ab-132">The Service Fabric Visual Studio project templates contain sample code.</span></span> <span data-ttu-id="da6ab-133">Kod przedstawia sposób dodawania aplikacji niestandardowej ślady ETW kodu, widoczne w podglądzie programu Visual Studio ETW obok śledzenia systemu z sieci szkieletowej usług.</span><span class="sxs-lookup"><span data-stu-id="da6ab-133">The code shows how to add custom application code ETW traces that show up in the Visual Studio ETW viewer alongside system traces from Service Fabric.</span></span> <span data-ttu-id="da6ab-134">Zaletą tej metody jest metadanych jest automatycznie dodawany do śledzenia, czy program Visual Studio podglądu zdarzeń diagnostycznych jest już skonfigurowana do ich wyświetlania.</span><span class="sxs-lookup"><span data-stu-id="da6ab-134">The advantage of this method is that metadata is automatically added to traces, and the Visual Studio Diagnostic Events Viewer is already configured to display them.</span></span>

<span data-ttu-id="da6ab-135">Dla projektów utworzone na podstawie **szablony usługi** (bezstanowych lub stateful) po prostu wyszukaj `RunAsync` implementacji:</span><span class="sxs-lookup"><span data-stu-id="da6ab-135">For projects created from the **service templates** (stateless or stateful) just search for the `RunAsync` implementation:</span></span>

1. <span data-ttu-id="da6ab-136">Wywołanie `ServiceEventSource.Current.ServiceMessage` w `RunAsync` metody przedstawiono przykład niestandardowych śledzenia funkcji ETW z kodu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="da6ab-136">The call to `ServiceEventSource.Current.ServiceMessage` in the `RunAsync` method shows an example of a custom ETW trace from the application code.</span></span>
2. <span data-ttu-id="da6ab-137">W **ServiceEventSource.cs** plików, można znaleźć przeciążenia `ServiceEventSource.ServiceMessage` metody, które mają być używane dla zdarzeń o dużej częstotliwości z powodu ze względu na wydajność.</span><span class="sxs-lookup"><span data-stu-id="da6ab-137">In the **ServiceEventSource.cs** file, you will find an overload for the `ServiceEventSource.ServiceMessage` method that should be used for high-frequency events due to performance reasons.</span></span>

<span data-ttu-id="da6ab-138">Dla projektów utworzone na podstawie **szablony aktora** (bezstanowych lub stateful):</span><span class="sxs-lookup"><span data-stu-id="da6ab-138">For projects created from the **actor templates** (stateless or stateful):</span></span>

1. <span data-ttu-id="da6ab-139">Otwórz **.cs "ProjectName"** pliku where *ProjectName* jest nazwą wybrany dla projektu programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="da6ab-139">Open the **"ProjectName".cs** file where *ProjectName* is the name you chose for your Visual Studio project.</span></span>  
2. <span data-ttu-id="da6ab-140">Znajdź kod `ActorEventSource.Current.ActorMessage(this, "Doing Work");` w *DoWorkAsync* metody.</span><span class="sxs-lookup"><span data-stu-id="da6ab-140">Find the code `ActorEventSource.Current.ActorMessage(this, "Doing Work");` in the *DoWorkAsync* method.</span></span>  <span data-ttu-id="da6ab-141">To jest przykład niestandardowych śledzenia funkcji ETW z kodu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="da6ab-141">This is an example of a custom ETW trace written from application code.</span></span>  
3. <span data-ttu-id="da6ab-142">W pliku **ActorEventSource.cs**, można znaleźć przeciążenia `ActorEventSource.ActorMessage` metody, które mają być używane dla zdarzeń o dużej częstotliwości z powodu ze względu na wydajność.</span><span class="sxs-lookup"><span data-stu-id="da6ab-142">In file **ActorEventSource.cs**, you will find an overload for the `ActorEventSource.ActorMessage` method that should be used for high-frequency events due to performance reasons.</span></span>

<span data-ttu-id="da6ab-143">Po dodaniu niestandardowych ETW śledzenia do kodu usługi, tworzenie, wdrażanie i uruchom aplikację ponownie, aby wyświetlić zdarzenia z Podglądu zdarzeń diagnostycznych.</span><span class="sxs-lookup"><span data-stu-id="da6ab-143">After adding custom ETW tracing to your service code, you can build, deploy, and run the application again to see your event(s) in the Diagnostic Events Viewer.</span></span> <span data-ttu-id="da6ab-144">Jeśli debugowanie aplikacji z **F5**, automatycznie zostanie wyświetlone podglądu zdarzeń diagnostycznych.</span><span class="sxs-lookup"><span data-stu-id="da6ab-144">If you debug the application with **F5**, the Diagnostic Events Viewer will open automatically.</span></span>

## <a name="next-steps"></a><span data-ttu-id="da6ab-145">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="da6ab-145">Next steps</span></span>
<span data-ttu-id="da6ab-146">Ten sam kod śledzenia dodanego do aplikacji powyżej dla lokalnych diagnostyki będzie działać z narzędziami, które służy do wyświetlania tych zdarzeń, podczas uruchamiania aplikacji w klastrze platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="da6ab-146">The same tracing code that you added to your application above for local diagnostics will work with tools that you can use to view these events when running your application on an Azure cluster.</span></span> <span data-ttu-id="da6ab-147">Zapoznaj się z tych artykułów, omówiono w nim różne opcje dla narzędzi i opisujące, jak można skonfigurować je.</span><span class="sxs-lookup"><span data-stu-id="da6ab-147">Check out these articles that discuss the different options for the tools and describe how you can set them up.</span></span>

* [<span data-ttu-id="da6ab-148">Jak zebrać dzienniki Diagnostyka Azure</span><span class="sxs-lookup"><span data-stu-id="da6ab-148">How to collect logs with Azure Diagnostics</span></span>](service-fabric-diagnostics-how-to-setup-wad.md)
* [<span data-ttu-id="da6ab-149">Agregacja zdarzeń i kolekcji przy użyciu EventFlow</span><span class="sxs-lookup"><span data-stu-id="da6ab-149">Event aggregation and collection using EventFlow</span></span>](service-fabric-diagnostics-event-aggregation-eventflow.md)

