---
title: "Przygotowanie wdrażania autonomicznej klastra sieci szkieletowej usługi Azure | Dokumentacja firmy Microsoft"
description: "Dokumentację dotyczącą przygotowania środowiska i Tworzenie konfiguracji klastra, należy wziąć pod uwagę przed wdrożeniem klastra przeznaczone do obsługi obciążeń produkcyjnych."
services: service-fabric
documentationcenter: .net
author: maburlik
manager: timlt
editor: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 1/17/2017
ms.author: maburlik;chackdan
ms.openlocfilehash: f332193f9a53260173a1010b8bf9f08726bea427
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
<a id="preparemachines"></a>

## <a name="plan-and-prepare-your-service-fabric-standalone-cluster-deployment"></a><span data-ttu-id="46d28-103">Planowanie i przygotowanie wdrożenia klastra usługi sieć szkieletowa autonomiczny</span><span class="sxs-lookup"><span data-stu-id="46d28-103">Plan and prepare your Service Fabric standalone cluster deployment</span></span>
<span data-ttu-id="46d28-104">Przed utworzeniem klastra, wykonaj następujące kroki.</span><span class="sxs-lookup"><span data-stu-id="46d28-104">Perform the following steps before you create your cluster.</span></span>

### <a name="step-1-plan-your-cluster-infrastructure"></a><span data-ttu-id="46d28-105">Krok 1: Plan infrastruktury klastra</span><span class="sxs-lookup"><span data-stu-id="46d28-105">Step 1: Plan your cluster infrastructure</span></span>
<span data-ttu-id="46d28-106">Zamierzasz utworzyć klaster sieci szkieletowej usług na maszynach, którego jesteś właścicielem, można zdecydować, jakiego rodzaju błędów ma klaster na przetrwanie.</span><span class="sxs-lookup"><span data-stu-id="46d28-106">You are about to create a Service Fabric cluster on machines you own, so you can decide what kinds of failures you want the cluster to survive.</span></span> <span data-ttu-id="46d28-107">Na przykład czy potrzebujesz oddzielnych, linie zasilania lub połączenia z Internetem dostarczane na tych komputerach?</span><span class="sxs-lookup"><span data-stu-id="46d28-107">For example, do you need separate power lines or Internet connections supplied to these machines?</span></span> <span data-ttu-id="46d28-108">Ponadto należy wziąć pod uwagę zabezpieczenia fizyczne tych komputerów.</span><span class="sxs-lookup"><span data-stu-id="46d28-108">In addition, consider the physical security of these machines.</span></span> <span data-ttu-id="46d28-109">Gdy wszystkie maszyny znajdują się i który musi mieć dostęp do nich?</span><span class="sxs-lookup"><span data-stu-id="46d28-109">Where are the machines located and who needs access to them?</span></span> <span data-ttu-id="46d28-110">Po wprowadzeniu tych decyzji logicznie można mapować maszyny do różnych domen błędów (zobacz krok 4).</span><span class="sxs-lookup"><span data-stu-id="46d28-110">After you make these decisions, you can logically map the machines to the various fault domains (see Step 4).</span></span> <span data-ttu-id="46d28-111">Dla klastrów produkcyjnych przy planowaniu infrastruktury jest bardziej skomplikowane niż w przypadku klastrów testu.</span><span class="sxs-lookup"><span data-stu-id="46d28-111">The infrastructure planning for production clusters is more involved than for test clusters.</span></span>

### <a name="step-2-prepare-the-machines-to-meet-the-prerequisites"></a><span data-ttu-id="46d28-112">Krok 2: Przygotowanie maszyny, aby spełnić wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="46d28-112">Step 2: Prepare the machines to meet the prerequisites</span></span>
<span data-ttu-id="46d28-113">Wymagania wstępne dla każdego komputera, który ma zostać dodany do klastra:</span><span class="sxs-lookup"><span data-stu-id="46d28-113">Prerequisites for each machine that you want to add to the cluster:</span></span>

* <span data-ttu-id="46d28-114">Zaleca się co najmniej 16 GB pamięci RAM.</span><span class="sxs-lookup"><span data-stu-id="46d28-114">A minimum of 16 GB of RAM is recommended.</span></span>
* <span data-ttu-id="46d28-115">Zaleca się co najmniej 40 GB dostępnego miejsca na dysku.</span><span class="sxs-lookup"><span data-stu-id="46d28-115">A minimum of 40 of GB available disk space is recommended.</span></span>
* <span data-ttu-id="46d28-116">4 rdzenie lub większa procesora CPU jest zalecane.</span><span class="sxs-lookup"><span data-stu-id="46d28-116">A 4 core or greater CPU is recommended.</span></span>
* <span data-ttu-id="46d28-117">Łączność z bezpiecznej sieci lub sieci dla wszystkich maszyn.</span><span class="sxs-lookup"><span data-stu-id="46d28-117">Connectivity to a secure network or networks for all machines.</span></span>
* <span data-ttu-id="46d28-118">Windows Server 2012 R2 lub Windows Server 2016.</span><span class="sxs-lookup"><span data-stu-id="46d28-118">Windows Server 2012 R2 or Windows Server 2016.</span></span> 
* <span data-ttu-id="46d28-119">[.NET framework 4.5.1 lub nowszej](https://www.microsoft.com/download/details.aspx?id=40773), pełnej instalacji.</span><span class="sxs-lookup"><span data-stu-id="46d28-119">[.NET Framework 4.5.1 or higher](https://www.microsoft.com/download/details.aspx?id=40773), full install.</span></span>
* <span data-ttu-id="46d28-120">[Środowisko Windows PowerShell 3.0](https://msdn.microsoft.com/powershell/scripting/setup/installing-windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="46d28-120">[Windows PowerShell 3.0](https://msdn.microsoft.com/powershell/scripting/setup/installing-windows-powershell).</span></span>
* <span data-ttu-id="46d28-121">[Usługi RemoteRegistry](https://technet.microsoft.com/library/cc754820) powinna być uruchomiona na wszystkich komputerach.</span><span class="sxs-lookup"><span data-stu-id="46d28-121">The [RemoteRegistry service](https://technet.microsoft.com/library/cc754820) should be running on all the machines.</span></span>

<span data-ttu-id="46d28-122">Administrator klastra, wdrażanie i konfigurowanie klastra musi mieć [uprawnień administratora](https://social.technet.microsoft.com/wiki/contents/articles/13436.windows-server-2012-how-to-add-an-account-to-a-local-administrator-group.aspx) na każdym z tych maszyn.</span><span class="sxs-lookup"><span data-stu-id="46d28-122">The cluster administrator deploying and configuring the cluster must have [administrator privileges](https://social.technet.microsoft.com/wiki/contents/articles/13436.windows-server-2012-how-to-add-an-account-to-a-local-administrator-group.aspx) on each of the machines.</span></span> <span data-ttu-id="46d28-123">Usługi Service Fabric nie można zainstalować na kontrolerze domeny.</span><span class="sxs-lookup"><span data-stu-id="46d28-123">You cannot install Service Fabric on a domain controller.</span></span>

### <a name="step-3-determine-the-initial-cluster-size"></a><span data-ttu-id="46d28-124">Krok 3: Określanie rozmiaru klastra</span><span class="sxs-lookup"><span data-stu-id="46d28-124">Step 3: Determine the initial cluster size</span></span>
<span data-ttu-id="46d28-125">Każdy węzeł w klastrze usługi sieć szkieletowa autonomiczny ma sieci szkieletowej usług środowiska uruchomieniowego wdrożony i jest członkiem klastra.</span><span class="sxs-lookup"><span data-stu-id="46d28-125">Each node in a standalone Service Fabric cluster has the Service Fabric runtime deployed and is a member of the cluster.</span></span> <span data-ttu-id="46d28-126">Typowe wdrożenie produkcyjne ma jeden węzeł na każde wystąpienie systemu operacyjnego (fizycznych lub wirtualnych).</span><span class="sxs-lookup"><span data-stu-id="46d28-126">In a typical production deployment, there is one node per OS instance (physical or virtual).</span></span> <span data-ttu-id="46d28-127">Rozmiar klastra zależy od potrzeb firmy.</span><span class="sxs-lookup"><span data-stu-id="46d28-127">The cluster size is determined by your business needs.</span></span> <span data-ttu-id="46d28-128">Jednak musi mieć rozmiar minimalny klastra trzy węzły (maszyny lub maszyn wirtualnych).</span><span class="sxs-lookup"><span data-stu-id="46d28-128">However, you must have a minimum cluster size of three nodes (machines or virtual machines).</span></span>
<span data-ttu-id="46d28-129">Do celów programistycznych może mieć więcej niż jeden węzeł na danym komputerze.</span><span class="sxs-lookup"><span data-stu-id="46d28-129">For development purposes, you can have more than one node on a given machine.</span></span> <span data-ttu-id="46d28-130">W środowisku produkcyjnym usługi sieć szkieletowa obsługuje tylko jeden węzeł na maszynie fizycznej lub wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="46d28-130">In a production environment, Service Fabric supports only one node per physical or virtual machine.</span></span>

### <a name="step-4-determine-the-number-of-fault-domains-and-upgrade-domains"></a><span data-ttu-id="46d28-131">Krok 4: Określenie liczby domen błędów i uaktualnienia domen</span><span class="sxs-lookup"><span data-stu-id="46d28-131">Step 4: Determine the number of fault domains and upgrade domains</span></span>
<span data-ttu-id="46d28-132">A *domeny błędów* (FD) jest miejscem, awarii i jest bezpośrednio powiązana z infrastruktury fizycznej w centrach danych.</span><span class="sxs-lookup"><span data-stu-id="46d28-132">A *fault domain* (FD) is a physical unit of failure and is directly related to the physical infrastructure in the data centers.</span></span> <span data-ttu-id="46d28-133">Domeny błędów zawiera składniki sprzętowe (komputery, przełączniki sieci i więcej), które współużytkują pojedynczy punkt awarii.</span><span class="sxs-lookup"><span data-stu-id="46d28-133">A fault domain consists of hardware components (computers, switches, networks, and more) that share a single point of failure.</span></span> <span data-ttu-id="46d28-134">Nie ma mapowania między stojakami i domen błędów 1:1, ale słabo rzecz biorąc, każdy Stojak jest uznawana za domeny błędów.</span><span class="sxs-lookup"><span data-stu-id="46d28-134">Although there is no 1:1 mapping between fault domains and racks, loosely speaking, each rack can be considered a fault domain.</span></span> <span data-ttu-id="46d28-135">Rozważając węzłów w klastrze, zdecydowanie zaleca się czy węzły dzielone między co najmniej trzy domen błędów.</span><span class="sxs-lookup"><span data-stu-id="46d28-135">When considering the nodes in your cluster, we strongly recommend that the nodes be distributed among at least three fault domains.</span></span>

<span data-ttu-id="46d28-136">Po określeniu FDs w pliku ClusterConfig.json, można wybrać nazwę dla każdego FD.</span><span class="sxs-lookup"><span data-stu-id="46d28-136">When you specify FDs in ClusterConfig.json, you can choose the name for each FD.</span></span> <span data-ttu-id="46d28-137">Hierarchiczna FDs jest obsługiwana w sieci szkieletowej usług, dzięki czemu można uwzględnić w nich topologii infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="46d28-137">Service Fabric supports hierarchical FDs, so you can reflect your infrastructure topology in them.</span></span>  <span data-ttu-id="46d28-138">Na przykład następujące FDs są prawidłowe:</span><span class="sxs-lookup"><span data-stu-id="46d28-138">For example, the following FDs are valid:</span></span>

* <span data-ttu-id="46d28-139">"faultDomain": "fd: / Komputer1-Room1/szafa1"</span><span class="sxs-lookup"><span data-stu-id="46d28-139">"faultDomain": "fd:/Room1/Rack1/Machine1"</span></span>
* <span data-ttu-id="46d28-140">"faultDomain": "fd: / FD1"</span><span class="sxs-lookup"><span data-stu-id="46d28-140">"faultDomain": "fd:/FD1"</span></span>
* <span data-ttu-id="46d28-141">"faultDomain": "fd: / Room1/szafa1/PDU1 znajdującego/M1"</span><span class="sxs-lookup"><span data-stu-id="46d28-141">"faultDomain": "fd:/Room1/Rack1/PDU1/M1"</span></span>

<span data-ttu-id="46d28-142">*Domeny uaktualnienia* (UD) to jednostka logiczna węzłów.</span><span class="sxs-lookup"><span data-stu-id="46d28-142">An *upgrade domain* (UD) is a logical unit of nodes.</span></span> <span data-ttu-id="46d28-143">Podczas uaktualniania usługi sieć szkieletowa zorkiestrowana (uaktualnienie aplikacji lub Uaktualnianie klastra) wszystkie węzły w UD podjęto w dół do uaktualnienia, podczas gdy węzłów w innych UDs pozostają dostępne do obsługi żądań.</span><span class="sxs-lookup"><span data-stu-id="46d28-143">During Service Fabric orchestrated upgrades (either an application upgrade or a cluster upgrade), all nodes in a UD are taken down to perform the upgrade while nodes in other UDs remain available to serve requests.</span></span> <span data-ttu-id="46d28-144">Aktualizacje oprogramowania, należy wykonać na maszynach, nie uznają UDs, więc musisz je jednego komputera na raz.</span><span class="sxs-lookup"><span data-stu-id="46d28-144">The firmware upgrades you perform on your machines do not honor UDs, so you must do them one machine at a time.</span></span>

<span data-ttu-id="46d28-145">Najprostszym sposobem, aby traktować te pojęcia jest należy wziąć pod uwagę FDs jednostką nieplanowanych awarii i UDs jednostką zaplanowanej konserwacji.</span><span class="sxs-lookup"><span data-stu-id="46d28-145">The simplest way to think about these concepts is to consider FDs as the unit of unplanned failure and UDs as the unit of planned maintenance.</span></span>

<span data-ttu-id="46d28-146">Po określeniu UDs w pliku ClusterConfig.json, można wybrać nazwę dla każdego UD.</span><span class="sxs-lookup"><span data-stu-id="46d28-146">When you specify UDs in ClusterConfig.json, you can choose the name for each UD.</span></span> <span data-ttu-id="46d28-147">Na przykład następujące nazwy są prawidłowe:</span><span class="sxs-lookup"><span data-stu-id="46d28-147">For example, the following names are valid:</span></span>

* <span data-ttu-id="46d28-148">"upgradeDomain": "UD0"</span><span class="sxs-lookup"><span data-stu-id="46d28-148">"upgradeDomain": "UD0"</span></span>
* <span data-ttu-id="46d28-149">"upgradeDomain": "UD1A"</span><span class="sxs-lookup"><span data-stu-id="46d28-149">"upgradeDomain": "UD1A"</span></span>
* <span data-ttu-id="46d28-150">"upgradeDomain": "DomainRed"</span><span class="sxs-lookup"><span data-stu-id="46d28-150">"upgradeDomain": "DomainRed"</span></span>
* <span data-ttu-id="46d28-151">"upgradeDomain": "Blue"</span><span class="sxs-lookup"><span data-stu-id="46d28-151">"upgradeDomain": "Blue"</span></span>

<span data-ttu-id="46d28-152">Aby uzyskać bardziej szczegółowe informacje dotyczące uaktualniania domen i domen błędów, zobacz [opisujące klastra sieci szkieletowej usług](service-fabric-cluster-resource-manager-cluster-description.md).</span><span class="sxs-lookup"><span data-stu-id="46d28-152">For more detailed information on upgrade domains and fault domains, see [Describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md).</span></span>

### <a name="step-5-download-the-service-fabric-standalone-package-for-windows-server"></a><span data-ttu-id="46d28-153">Krok 5: Pobierz pakiet autonomicznej usługi sieć szkieletowa usług dla systemu Windows Server</span><span class="sxs-lookup"><span data-stu-id="46d28-153">Step 5: Download the Service Fabric standalone package for Windows Server</span></span>
<span data-ttu-id="46d28-154">[Pobierz Link - pakietu autonomicznego sieci szkieletowej usług - Windows Server](http://go.microsoft.com/fwlink/?LinkId=730690) i Rozpakuj pakiet do wdrożenia maszyny, która nie jest częścią klastra lub do jednego z komputerów, które będzie częścią klastra.</span><span class="sxs-lookup"><span data-stu-id="46d28-154">[Download Link - Service Fabric Standalone Package - Windows Server](http://go.microsoft.com/fwlink/?LinkId=730690) and unzip the package, either to a deployment machine that is not part of the cluster, or to one of the machines that will be a part of your cluster.</span></span>

### <a name="step-6-modify-cluster-configuration"></a><span data-ttu-id="46d28-155">Krok 6: Zmodyfikuj konfigurację klastra</span><span class="sxs-lookup"><span data-stu-id="46d28-155">Step 6: Modify cluster configuration</span></span>
<span data-ttu-id="46d28-156">Aby utworzyć klaster autonomicznego należy utworzyć autonomiczny plik pliku ClusterConfig.json konfiguracji klastra, opisujący specyfikacji klastra.</span><span class="sxs-lookup"><span data-stu-id="46d28-156">To create a standalone cluster you have to create a standalone cluster configuration ClusterConfig.json file, which describes the specification of the cluster.</span></span> <span data-ttu-id="46d28-157">Można utworzyć pliku konfiguracji na tych szablonach znaleziono w linku poniżej.</span><span class="sxs-lookup"><span data-stu-id="46d28-157">You can base the configuration file on the templates found at the below link.</span></span> <br><span data-ttu-id="46d28-158">
[Konfiguracje klastrów autonomiczny](https://github.com/Azure-Samples/service-fabric-dotnet-standalone-cluster-configuration/tree/master/Samples)</span><span class="sxs-lookup"><span data-stu-id="46d28-158">
[Standalone Cluster Configurations](https://github.com/Azure-Samples/service-fabric-dotnet-standalone-cluster-configuration/tree/master/Samples)</span></span>

<span data-ttu-id="46d28-159">Aby uzyskać więcej informacji na sekcje w tym pliku, zobacz [ustawienia konfiguracji dla klastra systemu Windows autonomiczny](service-fabric-cluster-manifest.md).</span><span class="sxs-lookup"><span data-stu-id="46d28-159">For details on the sections in this file, see [Configuration settings for standalone Windows cluster](service-fabric-cluster-manifest.md).</span></span>

<span data-ttu-id="46d28-160">Otwórz jeden z plików w pliku ClusterConfig.json z pakietu, który został pobrany i zmodyfikować następujące ustawienia:</span><span class="sxs-lookup"><span data-stu-id="46d28-160">Open one of the ClusterConfig.json files from the package you downloaded and modify the following settings:</span></span>
| <span data-ttu-id="46d28-161">**Ustawienie konfiguracji**</span><span class="sxs-lookup"><span data-stu-id="46d28-161">**Configuration Setting**</span></span> | <span data-ttu-id="46d28-162">**Opis**</span><span class="sxs-lookup"><span data-stu-id="46d28-162">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="46d28-163">**Elementów NodeType**</span><span class="sxs-lookup"><span data-stu-id="46d28-163">**NodeTypes**</span></span> |<span data-ttu-id="46d28-164">Typy węzłów umożliwiają oddzielenie węzły klastra w różnych grupach.</span><span class="sxs-lookup"><span data-stu-id="46d28-164">Node types allow you to separate your cluster nodes into various groups.</span></span> <span data-ttu-id="46d28-165">Klaster musi mieć co najmniej jeden typ NodeType.</span><span class="sxs-lookup"><span data-stu-id="46d28-165">A cluster must have at least one NodeType.</span></span> <span data-ttu-id="46d28-166">Wszystkie węzły w grupie mają następujące cechy wspólne:</span><span class="sxs-lookup"><span data-stu-id="46d28-166">All nodes in a group have the following common characteristics:</span></span> <br> <span data-ttu-id="46d28-167">**Nazwa** -to jest nazwa typu węzła.</span><span class="sxs-lookup"><span data-stu-id="46d28-167">**Name** - This is the node type name.</span></span> <br><span data-ttu-id="46d28-168">**Porty punktów końcowych** — te są nazywane różnych punktów końcowych (porty), które są skojarzone z tym typem węzła.</span><span class="sxs-lookup"><span data-stu-id="46d28-168">**Endpoint Ports** - These are various named end points (ports) that are associated with this node type.</span></span> <span data-ttu-id="46d28-169">Można użyć dowolnego numeru portu, mają tak długo, jak nie powodują konfliktów z już niczego więcej w tym manifeście i nie są już używane przez inne aplikacji uruchomionych na komputerze/maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="46d28-169">You can use any port number that you wish, as long as they do not conflict with anything else in this manifest and are not already in use by any other application running on the machine/VM.</span></span> <br> <span data-ttu-id="46d28-170">**Właściwości umieszczania** -opisano te właściwości dla tego typu węzła używanej jako ograniczenia umieszczania usług systemowych lub usługi.</span><span class="sxs-lookup"><span data-stu-id="46d28-170">**Placement Properties** - These describe properties for this node type that you use as placement constraints for the system services or your services.</span></span> <span data-ttu-id="46d28-171">Te właściwości są pary klucz wartość zdefiniowana przez użytkownika, które zapewniają dodatkowe metadane dla danego węzła.</span><span class="sxs-lookup"><span data-stu-id="46d28-171">These properties are user-defined key/value pairs that provide extra meta data for a given node.</span></span> <span data-ttu-id="46d28-172">Przykłady właściwości węzła byłoby, czy węzeł ma dysk twardy lub karty graficznej, liczba jednostek w jego dysk twardy, rdzeni i inne właściwości fizyczne.</span><span class="sxs-lookup"><span data-stu-id="46d28-172">Examples of node properties would be whether the node has a hard drive or graphics card, the number of spindles in its hard drive, cores, and other physical properties.</span></span> <br> <span data-ttu-id="46d28-173">**Możliwości** -możliwości węzła zdefiniować nazwę i ilość określonego zasobu określonego węzła i dysponuje zużycia.</span><span class="sxs-lookup"><span data-stu-id="46d28-173">**Capacities** - Node capacities define the name and amount of a particular resource that a particular node has available for consumption.</span></span> <span data-ttu-id="46d28-174">Na przykład węzeł mogą określić, czy ma ona wydajności dla metryki o nazwie "MemoryInMb" i ma 2048 MB pamięci, które są dostępne, domyślnie.</span><span class="sxs-lookup"><span data-stu-id="46d28-174">For example, a node may define that it has capacity for a metric called “MemoryInMb” and that it has 2048 MB available by default.</span></span> <span data-ttu-id="46d28-175">Te możliwości są używane w czasie wykonywania, aby upewnić się, że usługi, które wymagają określonej ilości zasobów są umieszczane w węzłach, które mają te zasoby dostępne w ilości wymagane.</span><span class="sxs-lookup"><span data-stu-id="46d28-175">These capacities are used at runtime to ensure that services that require particular amounts of resources are placed on the nodes that have those resources available in the required amounts.</span></span><br><span data-ttu-id="46d28-176">**IsPrimary** — Jeśli masz więcej niż jeden typ NodeType zdefiniowane upewnij się, że jest tylko jedna wartość do podstawowej z wartością *true*, czyli gdzie system usługi uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="46d28-176">**IsPrimary** - If you have more than one NodeType defined ensure that only one is set to primary with the value *true*, which is where the system services run.</span></span> <span data-ttu-id="46d28-177">Wszystkie inne typy węzeł powinien być ustawiony na wartość *false*</span><span class="sxs-lookup"><span data-stu-id="46d28-177">All other node types should be set to the value *false*</span></span> |
| <span data-ttu-id="46d28-178">**Węzły**</span><span class="sxs-lookup"><span data-stu-id="46d28-178">**Nodes**</span></span> |<span data-ttu-id="46d28-179">Są to szczegółowe informacje dla każdego z węzłów, które są częścią klastra (typ węzła, nazwa węzła, adres IP, domena awarii i domeny uaktualnień węzła).</span><span class="sxs-lookup"><span data-stu-id="46d28-179">These are the details for each of the nodes that are part of the cluster (node type, node name, IP address, fault domain, and upgrade domain of the node).</span></span> <span data-ttu-id="46d28-180">Maszyny ma klaster ma zostać utworzony na potrzeby wyświetlane w tym miejscu przy użyciu ich adresów IP.</span><span class="sxs-lookup"><span data-stu-id="46d28-180">The machines you want the cluster to be created on need to be listed here with their IP addresses.</span></span> <br> <span data-ttu-id="46d28-181">Jeśli używasz tego samego adresu IP dla wszystkich węzłów klastra jednego pola tworzona jest, które służy do celów testowych.</span><span class="sxs-lookup"><span data-stu-id="46d28-181">If you use the same IP address for all the nodes, then a one-box cluster is created, which you can use for testing purposes.</span></span> <span data-ttu-id="46d28-182">Nie należy używać jednego pola klastrów wdrażania obciążeń produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="46d28-182">Do not use One-box clusters for deploying production workloads.</span></span> |

<span data-ttu-id="46d28-183">Po konfiguracji klastra ma wszystkie ustawienia skonfigurowane w środowisku, można testowana środowiska klastra (krok 7).</span><span class="sxs-lookup"><span data-stu-id="46d28-183">After the cluster configuration has had all settings configured to the environment, it can be tested against the cluster environment (step 7).</span></span>

<a id="environmentsetup"></a>

### <a name="step-7-environment-setup"></a><span data-ttu-id="46d28-184">Krok 7.</span><span class="sxs-lookup"><span data-stu-id="46d28-184">Step 7.</span></span> <span data-ttu-id="46d28-185">Konfiguracja środowiska</span><span class="sxs-lookup"><span data-stu-id="46d28-185">Environment setup</span></span>

<span data-ttu-id="46d28-186">Gdy administrator klastrów konfiguruje klaster sieci szkieletowej usług autonomiczny, środowisko jest konieczność można skonfigurować przy użyciu następujących kryteriów:</span><span class="sxs-lookup"><span data-stu-id="46d28-186">When a cluster administrator configures a Service Fabric standalone cluster, the environment is needs to be set up with the following criteria:</span></span> <br>
1. <span data-ttu-id="46d28-187">Użytkownik tworzący klaster ma uprawnienia zabezpieczeń na poziomie administratora do wszystkich komputerów, które są wyświetlane jako węzły w pliku konfiguracji klastra.</span><span class="sxs-lookup"><span data-stu-id="46d28-187">The user creating the cluster should have administrator-level security privileges to all machines that are listed as nodes in the cluster configuration file.</span></span>
2. <span data-ttu-id="46d28-188">Komputer, z którego jest tworzony klaster, a także każdego komputera węzła klastra musi:</span><span class="sxs-lookup"><span data-stu-id="46d28-188">Machine from which the cluster is created, as well as each cluster node machine must:</span></span>
* <span data-ttu-id="46d28-189">Odinstalowano zestawu SDK sieci szkieletowej usług</span><span class="sxs-lookup"><span data-stu-id="46d28-189">Have Service Fabric SDK uninstalled</span></span>
* <span data-ttu-id="46d28-190">Ma środowisko uruchomieniowe usługi sieć szkieletowa odinstalowane</span><span class="sxs-lookup"><span data-stu-id="46d28-190">Have Service Fabric runtime uninstalled</span></span> 
* <span data-ttu-id="46d28-191">Czy włączono usługi Zapora systemu Windows (mpssvc)</span><span class="sxs-lookup"><span data-stu-id="46d28-191">Have the Windows Firewall service (mpssvc) enabled</span></span>
* <span data-ttu-id="46d28-192">Czy włączono usługi Rejestr zdalny (remoteregistry)</span><span class="sxs-lookup"><span data-stu-id="46d28-192">Have the Remote Registry Service (remoteregistry) enabled</span></span>
* <span data-ttu-id="46d28-193">Plik włączona udostępniania (SMB)</span><span class="sxs-lookup"><span data-stu-id="46d28-193">Have file sharing (SMB) enabled</span></span>
* <span data-ttu-id="46d28-194">Ma niezbędne porty otwarty, na podstawie portów konfiguracji klastra</span><span class="sxs-lookup"><span data-stu-id="46d28-194">Have necessary ports opened, based on cluster configuration ports</span></span>
* <span data-ttu-id="46d28-195">Mieć niezbędne porty otworzyć usługi systemu Windows protokołu SMB i Rejestr zdalny: 135, 137 138, 139 i 445</span><span class="sxs-lookup"><span data-stu-id="46d28-195">Have necessary ports opened for Windows SMB and Remote Registry service: 135, 137, 138, 139, and 445</span></span>
* <span data-ttu-id="46d28-196">Połączenie z siecią między nimi</span><span class="sxs-lookup"><span data-stu-id="46d28-196">Have network connectivity to one another</span></span>
3. <span data-ttu-id="46d28-197">Brak maszyn węzeł klastra powinien być kontrolerem domeny.</span><span class="sxs-lookup"><span data-stu-id="46d28-197">None of the cluster node machines should be a Domain Controller.</span></span>
4. <span data-ttu-id="46d28-198">Jeśli można wdrożyć klaster jest klastrem bezpieczny, sprawdź niezbędne wymagania wstępne zostały umieścić i są poprawnie skonfigurowane dla konfiguracji zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="46d28-198">If the cluster to be deployed is a secure cluster, validate the necessary security prerequisites are in place, and are configured correctly against the configuration.</span></span>
5. <span data-ttu-id="46d28-199">Jeśli maszyn klastra nie są dostępne z Internetu, należy ustawić następującą w konfiguracji klastra:</span><span class="sxs-lookup"><span data-stu-id="46d28-199">If the cluster machines are not internet-accessible, set the following in the cluster configuration:</span></span>
* <span data-ttu-id="46d28-200">Wyłączanie telemetrii: w obszarze *właściwości* ustawić *"enableTelemetry": wartość false*</span><span class="sxs-lookup"><span data-stu-id="46d28-200">Disable telemetry:   Under *properties* set   *"enableTelemetry": false*</span></span>
* <span data-ttu-id="46d28-201">Wyłącz automatyczne pobieranie wersji sieci szkieletowej & powiadomienia, że bieżąca wersja klastra zbliża się koniec obsługi: w obszarze *właściwości* ustawić *"fabricClusterAutoupgradeEnabled": wartość false*</span><span class="sxs-lookup"><span data-stu-id="46d28-201">Disable automatic Fabric version downloading & notifications that the current cluster version is nearing end of support:   Under *properties* set   *"fabricClusterAutoupgradeEnabled": false*</span></span>
* <span data-ttu-id="46d28-202">Można również dostęp do Internetu w sieci jest ograniczona do domeny wymienione białe, poniżej domeny są wymagane do automatycznego uaktualniania: witrynie download.microsoft.com go.microsoft.com</span><span class="sxs-lookup"><span data-stu-id="46d28-202">Alternatively if network internet access is limited to white-listed domains, the domains below are required for automatic upgrade:   go.microsoft.com   download.microsoft.com</span></span>

6. <span data-ttu-id="46d28-203">Ustaw odpowiednie sieci szkieletowej usług wyłączenia oprogramowania antywirusowego:</span><span class="sxs-lookup"><span data-stu-id="46d28-203">Set appropriate Service Fabric antivirus exclusions:</span></span>

| <span data-ttu-id="46d28-204">**Katalogi wykluczone antywirusowe**</span><span class="sxs-lookup"><span data-stu-id="46d28-204">**Antivirus Excluded directories**</span></span> |
| --- |
| <span data-ttu-id="46d28-205">Program Files\Microsoft usługi sieć szkieletowa</span><span class="sxs-lookup"><span data-stu-id="46d28-205">Program Files\Microsoft Service Fabric</span></span> |
| <span data-ttu-id="46d28-206">Zmiennej FabricDataRoot (z konfiguracji klastra)</span><span class="sxs-lookup"><span data-stu-id="46d28-206">FabricDataRoot (from cluster configuration)</span></span> |
| <span data-ttu-id="46d28-207">Lokalizacji FabricLogRoot (z konfiguracji klastra)</span><span class="sxs-lookup"><span data-stu-id="46d28-207">FabricLogRoot (from cluster configuration)</span></span> |

| <span data-ttu-id="46d28-208">**Procesy wykluczone antywirusowe**</span><span class="sxs-lookup"><span data-stu-id="46d28-208">**Antivirus Excluded processes**</span></span> |
| --- |
| <span data-ttu-id="46d28-209">Fabric.exe</span><span class="sxs-lookup"><span data-stu-id="46d28-209">Fabric.exe</span></span> |
| <span data-ttu-id="46d28-210">FabricHost.exe</span><span class="sxs-lookup"><span data-stu-id="46d28-210">FabricHost.exe</span></span> |
| <span data-ttu-id="46d28-211">FabricInstallerService.exe</span><span class="sxs-lookup"><span data-stu-id="46d28-211">FabricInstallerService.exe</span></span> |
| <span data-ttu-id="46d28-212">FabricSetup.exe</span><span class="sxs-lookup"><span data-stu-id="46d28-212">FabricSetup.exe</span></span> |
| <span data-ttu-id="46d28-213">FabricDeployer.exe</span><span class="sxs-lookup"><span data-stu-id="46d28-213">FabricDeployer.exe</span></span> |
| <span data-ttu-id="46d28-214">ImageBuilder.exe</span><span class="sxs-lookup"><span data-stu-id="46d28-214">ImageBuilder.exe</span></span> |
| <span data-ttu-id="46d28-215">FabricGateway.exe</span><span class="sxs-lookup"><span data-stu-id="46d28-215">FabricGateway.exe</span></span> |
| <span data-ttu-id="46d28-216">FabricDCA.exe</span><span class="sxs-lookup"><span data-stu-id="46d28-216">FabricDCA.exe</span></span> |
| <span data-ttu-id="46d28-217">FabricFAS.exe</span><span class="sxs-lookup"><span data-stu-id="46d28-217">FabricFAS.exe</span></span> |
| <span data-ttu-id="46d28-218">FabricUOS.exe</span><span class="sxs-lookup"><span data-stu-id="46d28-218">FabricUOS.exe</span></span> |
| <span data-ttu-id="46d28-219">FabricRM.exe</span><span class="sxs-lookup"><span data-stu-id="46d28-219">FabricRM.exe</span></span> |
| <span data-ttu-id="46d28-220">FileStoreService.exe</span><span class="sxs-lookup"><span data-stu-id="46d28-220">FileStoreService.exe</span></span> |

### <a name="step-8-validate-environment-using-testconfiguration-script"></a><span data-ttu-id="46d28-221">Krok 8.</span><span class="sxs-lookup"><span data-stu-id="46d28-221">Step 8.</span></span> <span data-ttu-id="46d28-222">Sprawdź poprawność środowiska przy użyciu skryptu TestConfiguration</span><span class="sxs-lookup"><span data-stu-id="46d28-222">Validate environment using TestConfiguration script</span></span>
<span data-ttu-id="46d28-223">Skrypt TestConfiguration.ps1 można znaleźć w pakiecie autonomicznych.</span><span class="sxs-lookup"><span data-stu-id="46d28-223">The TestConfiguration.ps1 script can be found in the standalone package.</span></span> <span data-ttu-id="46d28-224">Jest używane jako Best Practices Analyzer można sprawdzić poprawności część kryteriów powyżej i do sprawdzania, czy klaster może zostać wdrożony w danym środowisku można użyć w celu sprawdzenia związane z poprawnością.</span><span class="sxs-lookup"><span data-stu-id="46d28-224">It is used as a Best Practices Analyzer to validate some of the criteria above and should be used as a sanity check to validate whether a cluster can be deployed on a given environment.</span></span> <span data-ttu-id="46d28-225">W przypadku niezgodności, można znaleźć na liście w obszarze [konfigurowania środowiska](service-fabric-cluster-standalone-deployment-preparation.md) do rozwiązywania problemów.</span><span class="sxs-lookup"><span data-stu-id="46d28-225">If there is any failure, refer to the list under [Environment Setup](service-fabric-cluster-standalone-deployment-preparation.md) for troubleshooting.</span></span> 

<span data-ttu-id="46d28-226">Ten skrypt można uruchomić na dowolnym komputerze, który ma dostęp administratora do wszystkich komputerów, które są wyświetlane jako węzły w pliku konfiguracji klastra.</span><span class="sxs-lookup"><span data-stu-id="46d28-226">This script can be run on any machine that has administrator access to all the machines that are listed as nodes in the cluster configuration file.</span></span> <span data-ttu-id="46d28-227">Ten skrypt uruchamiany na komputerze nie ma być częścią klastra.</span><span class="sxs-lookup"><span data-stu-id="46d28-227">The machine that this script is run on does not have to be part of the cluster.</span></span>

```powershell
PS C:\temp\Microsoft.Azure.ServiceFabric.WindowsServer> .\TestConfiguration.ps1 -ClusterConfigFilePath .\ClusterConfig.Unsecure.DevCluster.json
Trace folder already exists. Traces will be written to existing trace folder: C:\temp\Microsoft.Azure.ServiceFabric.WindowsServer\DeploymentTraces
Running Best Practices Analyzer...
Best Practices Analyzer completed successfully.


LocalAdminPrivilege        : True
IsJsonValid                : True
IsCabValid                 : True
RequiredPortsOpen          : True
RemoteRegistryAvailable    : True
FirewallAvailable          : True
RpcCheckPassed             : True
NoConflictingInstallations : True
FabricInstallable          : True
Passed                     : True
```

<span data-ttu-id="46d28-228">Obecnie ten moduł testowania konfiguracji nie można zweryfikować konfiguracji zabezpieczeń, to ma odbywać się niezależnie.</span><span class="sxs-lookup"><span data-stu-id="46d28-228">Currently this configuration testing module does not validate the security configuration so this has to be done independently.</span></span>  

> [!NOTE]
> <span data-ttu-id="46d28-229">Firma Microsoft stale wprowadzać ulepszenia wprowadzić bardziej niezawodne, ten moduł, jeśli wystąpi niezgodność uszkodzone lub brakujące który Twoim zdaniem nie jest aktualnie przechwycony przez TestConfiguration, prosimy o kontakt za pośrednictwem naszego [kanały obsługuje](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-support).</span><span class="sxs-lookup"><span data-stu-id="46d28-229">We are continually making improvements to make this module more robust, so if there is a faulty or missing case which you believe isn't currently caught by TestConfiguration, please let us know through our [support channels](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-support).</span></span>   
> 
> 

## <a name="next-steps"></a><span data-ttu-id="46d28-230">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="46d28-230">Next steps</span></span>
* [<span data-ttu-id="46d28-231">Tworzenie autonomicznych klastra w systemie Windows Server</span><span class="sxs-lookup"><span data-stu-id="46d28-231">Create a standalone cluster running on Windows Server</span></span>](service-fabric-cluster-creation-for-windows-server.md)
