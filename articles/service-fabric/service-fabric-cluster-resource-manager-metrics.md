---
title: "Zarządzanie za pomocą metryki obciążenia Azure mikrousługi | Dokumentacja firmy Microsoft"
description: "Więcej informacji o konfigurowaniu i metryki w sieci szkieletowej usług do zarządzania zużycie zasobów usługi."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 0d622ea6-a7c7-4bef-886b-06e6b85a97fb
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 7e020bb6c02c80127e4225ba695017dff9b5a168
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/18/2017
---
# <a name="managing-resource-consumption-and-load-in-service-fabric-with-metrics"></a><span data-ttu-id="38b47-103">Zarządzanie zużycia zasobów i obciążenia w sieci szkieletowej usług o metryki</span><span class="sxs-lookup"><span data-stu-id="38b47-103">Managing resource consumption and load in Service Fabric with metrics</span></span>
<span data-ttu-id="38b47-104">*Metryki* zasobów, które z usług najważniejsze informacje, które są udostępniane przez węzły w klastrze.</span><span class="sxs-lookup"><span data-stu-id="38b47-104">*Metrics* are the resources that your services care about and which are provided by the nodes in the cluster.</span></span> <span data-ttu-id="38b47-105">Metryka to wszystko, co chcesz zarządzać w celu poprawy lub monitorować wydajność usług.</span><span class="sxs-lookup"><span data-stu-id="38b47-105">A metric is anything that you want to manage in order to improve or monitor the performance of your services.</span></span> <span data-ttu-id="38b47-106">Na przykład może oglądać zużycie pamięci, aby dowiedzieć się, jeśli usługa jest przeciążona.</span><span class="sxs-lookup"><span data-stu-id="38b47-106">For example, you might watch memory consumption to know if your service is overloaded.</span></span> <span data-ttu-id="38b47-107">Użyj innego jest aby dowiedzieć się, czy usługa może przenieść innym miejscu, gdzie pamięci jest mniejsza ograniczone, aby uzyskać lepszą wydajność.</span><span class="sxs-lookup"><span data-stu-id="38b47-107">Another use is to figure out whether the service could move elsewhere where memory is less constrained in order to get better performance.</span></span>

<span data-ttu-id="38b47-108">Np. użycia pamięci, dysku i procesora CPU przedstawiono metryki.</span><span class="sxs-lookup"><span data-stu-id="38b47-108">Things like Memory, Disk, and CPU usage are examples of metrics.</span></span> <span data-ttu-id="38b47-109">Te metryki są metryki fizycznych, zasobów, które odpowiadają zasoby fizyczne na węźle, który musi być zarządzane.</span><span class="sxs-lookup"><span data-stu-id="38b47-109">These metrics are physical metrics, resources that correspond to physical resources on the node that need to be managed.</span></span> <span data-ttu-id="38b47-110">Metryki mogą być również (i często są) logicznej metryki.</span><span class="sxs-lookup"><span data-stu-id="38b47-110">Metrics can also be (and commonly are) logical metrics.</span></span> <span data-ttu-id="38b47-111">Metryki logiczne są elementy, takie jak "MyWorkQueueDepth" lub "MessagesToProcess" lub "TotalRecords".</span><span class="sxs-lookup"><span data-stu-id="38b47-111">Logical metrics are things like “MyWorkQueueDepth” or "MessagesToProcess" or "TotalRecords".</span></span> <span data-ttu-id="38b47-112">Metryki logiczne są zdefiniowane przez aplikację i pośrednio odpowiadają niektórych zużycie zasobów fizycznych.</span><span class="sxs-lookup"><span data-stu-id="38b47-112">Logical metrics are application-defined and indirectly correspond to some physical resource consumption.</span></span> <span data-ttu-id="38b47-113">Metryki logiczne są często używane, ponieważ może być trudne do miary i raportu zużycia zasobów fizycznych na podstawie-service.</span><span class="sxs-lookup"><span data-stu-id="38b47-113">Logical metrics are common because it can be hard to measure and report consumption of physical resources on a per-service basis.</span></span> <span data-ttu-id="38b47-114">Złożoność pomiarów i raportowania własne fizycznych metryki jest również, dlaczego Usługa Service Fabric realizuje niektóre domyślne metryki.</span><span class="sxs-lookup"><span data-stu-id="38b47-114">The complexity of measuring and reporting your own physical metrics is also why Service Fabric provides some default metrics.</span></span>

## <a name="default-metrics"></a><span data-ttu-id="38b47-115">Domyślne metryki</span><span class="sxs-lookup"><span data-stu-id="38b47-115">Default metrics</span></span>
<span data-ttu-id="38b47-116">Załóżmy, że chcesz rozpocząć pisanie i wdrażania usługi.</span><span class="sxs-lookup"><span data-stu-id="38b47-116">Let’s say that you want to get started writing and deploying your service.</span></span> <span data-ttu-id="38b47-117">W tym momencie nie wiadomo, jakie zasoby fizyczne lub logiczne zużywa.</span><span class="sxs-lookup"><span data-stu-id="38b47-117">At this point you don’t know what physical or logical resources it consumes.</span></span> <span data-ttu-id="38b47-118">To świetnie!</span><span class="sxs-lookup"><span data-stu-id="38b47-118">That’s fine!</span></span> <span data-ttu-id="38b47-119">Menedżer zasobów klastra sieci szkieletowej usług używa niektóre domyślne metryki, jeśli określono nie innych metryk.</span><span class="sxs-lookup"><span data-stu-id="38b47-119">The Service Fabric Cluster Resource Manager uses some default metrics when no other metrics are specified.</span></span> <span data-ttu-id="38b47-120">Są to:</span><span class="sxs-lookup"><span data-stu-id="38b47-120">They are:</span></span>

  - <span data-ttu-id="38b47-121">PrimaryCount — liczba replik podstawowych, w węźle</span><span class="sxs-lookup"><span data-stu-id="38b47-121">PrimaryCount - count of Primary replicas on the node</span></span> 
  - <span data-ttu-id="38b47-122">ReplicaCount — liczba całkowita stanowe replik w węźle</span><span class="sxs-lookup"><span data-stu-id="38b47-122">ReplicaCount - count of total stateful replicas on the node</span></span>
  - <span data-ttu-id="38b47-123">Liczba — liczba wszystkich obiektów usługi (bezstanowe i stanowe) w węźle</span><span class="sxs-lookup"><span data-stu-id="38b47-123">Count - count of all service objects (stateless and stateful) on the node</span></span>

| <span data-ttu-id="38b47-124">Metryka</span><span class="sxs-lookup"><span data-stu-id="38b47-124">Metric</span></span> | <span data-ttu-id="38b47-125">Obciążenia bezstanowe wystąpienia</span><span class="sxs-lookup"><span data-stu-id="38b47-125">Stateless Instance Load</span></span> | <span data-ttu-id="38b47-126">Stanowe dodatkowej obciążenia</span><span class="sxs-lookup"><span data-stu-id="38b47-126">Stateful Secondary Load</span></span> | <span data-ttu-id="38b47-127">Stanowego obciążenia podstawowego</span><span class="sxs-lookup"><span data-stu-id="38b47-127">Stateful Primary Load</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="38b47-128">PrimaryCount</span><span class="sxs-lookup"><span data-stu-id="38b47-128">PrimaryCount</span></span> |<span data-ttu-id="38b47-129">0</span><span class="sxs-lookup"><span data-stu-id="38b47-129">0</span></span> |<span data-ttu-id="38b47-130">0</span><span class="sxs-lookup"><span data-stu-id="38b47-130">0</span></span> |<span data-ttu-id="38b47-131">1</span><span class="sxs-lookup"><span data-stu-id="38b47-131">1</span></span> |
| <span data-ttu-id="38b47-132">ReplicaCount</span><span class="sxs-lookup"><span data-stu-id="38b47-132">ReplicaCount</span></span> |<span data-ttu-id="38b47-133">0</span><span class="sxs-lookup"><span data-stu-id="38b47-133">0</span></span> |<span data-ttu-id="38b47-134">1</span><span class="sxs-lookup"><span data-stu-id="38b47-134">1</span></span> |<span data-ttu-id="38b47-135">1</span><span class="sxs-lookup"><span data-stu-id="38b47-135">1</span></span> |
| <span data-ttu-id="38b47-136">Licznik</span><span class="sxs-lookup"><span data-stu-id="38b47-136">Count</span></span> |<span data-ttu-id="38b47-137">1</span><span class="sxs-lookup"><span data-stu-id="38b47-137">1</span></span> |<span data-ttu-id="38b47-138">1</span><span class="sxs-lookup"><span data-stu-id="38b47-138">1</span></span> |<span data-ttu-id="38b47-139">1</span><span class="sxs-lookup"><span data-stu-id="38b47-139">1</span></span> |

<span data-ttu-id="38b47-140">W przypadku obciążeń podstawowych domyślne metryki Podaj zadowalający dystrybucji pracy w klastrze.</span><span class="sxs-lookup"><span data-stu-id="38b47-140">For basic workloads, the default metrics provide a decent distribution of work in the cluster.</span></span> <span data-ttu-id="38b47-141">W poniższym przykładzie Zobacz, co się stanie po możemy utworzyć dwie usługi i polegać na domyślne metryki równoważenia.</span><span class="sxs-lookup"><span data-stu-id="38b47-141">In the following example, let’s see what happens when we create two services and rely on the default metrics for balancing.</span></span> <span data-ttu-id="38b47-142">Pierwszej usługi jest usługi stanowej trzy partycji i replik docelowy Ustaw rozmiar trzech.</span><span class="sxs-lookup"><span data-stu-id="38b47-142">The first service is a stateful service with three partitions and a target replica set size of three.</span></span> <span data-ttu-id="38b47-143">Drugi usługa jest usługi bezstanowej z jednej partycji i liczby wystąpień trzy.</span><span class="sxs-lookup"><span data-stu-id="38b47-143">The second service is a stateless service with one partition and an instance count of three.</span></span>

<span data-ttu-id="38b47-144">Oto, możesz uzyskać:</span><span class="sxs-lookup"><span data-stu-id="38b47-144">Here's what you get:</span></span>

<span data-ttu-id="38b47-145"><center>
![Układ klastra z domyślne metryki][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="38b47-145"><center>
![Cluster Layout with Default Metrics][Image1]
</center></span></span>

<span data-ttu-id="38b47-146">Niektóre rzeczy do uwzględnienia:</span><span class="sxs-lookup"><span data-stu-id="38b47-146">Some things to note:</span></span>
  - <span data-ttu-id="38b47-147">Repliki podstawowej dla usługi stanowej są rozproszone na kilku węzłów</span><span class="sxs-lookup"><span data-stu-id="38b47-147">Primary replicas for the stateful service are distributed across several nodes</span></span>
  - <span data-ttu-id="38b47-148">Repliki dla tej samej partycji są w różnych węzłach</span><span class="sxs-lookup"><span data-stu-id="38b47-148">Replicas for the same partition are on different nodes</span></span>
  - <span data-ttu-id="38b47-149">Całkowita liczba kolory podstawowe i pomocnicze bazy danych jest dystrybuowane w klastrze</span><span class="sxs-lookup"><span data-stu-id="38b47-149">The total number of primaries and secondaries is distributed in the cluster</span></span>
  - <span data-ttu-id="38b47-150">Całkowita liczba obiektów usługi równomiernie są przydzielane na każdym węźle</span><span class="sxs-lookup"><span data-stu-id="38b47-150">The total number of service objects are evenly allocated on each node</span></span>

<span data-ttu-id="38b47-151">Dobrym!</span><span class="sxs-lookup"><span data-stu-id="38b47-151">Good!</span></span>

<span data-ttu-id="38b47-152">Domyślne metryki ponosić działa jako rozpoczęcia.</span><span class="sxs-lookup"><span data-stu-id="38b47-152">The default metrics work great as a start.</span></span> <span data-ttu-id="38b47-153">Jednak domyślne metryki tylko prowadzi należy do tej pory.</span><span class="sxs-lookup"><span data-stu-id="38b47-153">However, the default metrics will only carry you so far.</span></span> <span data-ttu-id="38b47-154">Na przykład: jakie jest prawdopodobieństwo, że podziału schemat można pobrać wyników doskonale nawet wykorzystania przez wszystkie partycje?</span><span class="sxs-lookup"><span data-stu-id="38b47-154">For example: What's the likelihood that the partitioning scheme you picked results in perfectly even utilization by all partitions?</span></span> <span data-ttu-id="38b47-155">Co to ryzyko, że obciążenia dla danej usługi jest stałe, wraz z upływem czasu, lub w taki sam nawet na między wieloma partycjami teraz?</span><span class="sxs-lookup"><span data-stu-id="38b47-155">What’s the chance that the load for a given service is constant over time, or even just the same across multiple partitions right now?</span></span>

<span data-ttu-id="38b47-156">Można uruchomić z właśnie domyślne metryki.</span><span class="sxs-lookup"><span data-stu-id="38b47-156">You could run with just the default metrics.</span></span> <span data-ttu-id="38b47-157">Jednak taka zwykle oznacza, że Twoje użycie klastra mniejszą i nierówna bardziej, niż chcesz.</span><span class="sxs-lookup"><span data-stu-id="38b47-157">However, doing so usually means that your cluster utilization is lower and more uneven than you’d like.</span></span> <span data-ttu-id="38b47-158">Jest to spowodowane domyślne metryki nie adaptacyjną i zakładają, że wszystko, co jest równoważne.</span><span class="sxs-lookup"><span data-stu-id="38b47-158">This is because the default metrics aren't adaptive and presume everything is equivalent.</span></span> <span data-ttu-id="38b47-159">Na przykład podstawowego, który jest zajęty i, który nie jest zarówno przyczyniają się do Metryka PrimaryCount "1".</span><span class="sxs-lookup"><span data-stu-id="38b47-159">For example, a Primary that is busy and one that is not both contribute "1" to the PrimaryCount metric.</span></span> <span data-ttu-id="38b47-160">W najgorszym przypadku za pomocą domyślne metryki może również spowodować overscheduled węzłów, co powoduje problemy z wydajnością.</span><span class="sxs-lookup"><span data-stu-id="38b47-160">In the worst case, using only the default metrics can also result in overscheduled nodes resulting in performance issues.</span></span> <span data-ttu-id="38b47-161">Jeśli interesuje Cię uzyskanie maksymalne wykorzystanie klastra i unikanie problemów z wydajnością, należy użyć niestandardowych metryk i raportowania dynamicznego obciążenia.</span><span class="sxs-lookup"><span data-stu-id="38b47-161">If you're interested in getting the most out of your cluster and avoiding performance issues, you need to use custom metrics and dynamic load reporting.</span></span>

## <a name="custom-metrics"></a><span data-ttu-id="38b47-162">Metryki niestandardowe</span><span class="sxs-lookup"><span data-stu-id="38b47-162">Custom metrics</span></span>
<span data-ttu-id="38b47-163">Metryki są konfigurowane na poszczególnych o nazwie usług wystąpień podczas tworzenia usługi.</span><span class="sxs-lookup"><span data-stu-id="38b47-163">Metrics are configured on a per-named-service-instance basis when you’re creating the service.</span></span>

<span data-ttu-id="38b47-164">Niektóre właściwości opisujące go ma wszystkie metryki: nazwę, waga i obciążenia domyślne.</span><span class="sxs-lookup"><span data-stu-id="38b47-164">Any metric has some properties that describe it: a name, a weight, and a default load.</span></span>

* <span data-ttu-id="38b47-165">Nazwa metryki: Nazwa metryki.</span><span class="sxs-lookup"><span data-stu-id="38b47-165">Metric Name: The name of the metric.</span></span> <span data-ttu-id="38b47-166">Nazwa metryki jest unikatowym identyfikatorem dla metryki w klastrze z punktu widzenia menedżera zasobów.</span><span class="sxs-lookup"><span data-stu-id="38b47-166">The metric name is a unique identifier for the metric within the cluster from the Resource Manager’s perspective.</span></span>
* <span data-ttu-id="38b47-167">Waga: Waga metryki definiuje, jak ważna ta metryka jest określana względem innych metryk dla tej usługi.</span><span class="sxs-lookup"><span data-stu-id="38b47-167">Weight: Metric weight defines how important this metric is relative to the other metrics for this service.</span></span>
* <span data-ttu-id="38b47-168">Domyślne obciążenia: Obciążenia domyślne odpowiada inaczej w zależności od tego, czy usługa jest bezstanowych i stanowych.</span><span class="sxs-lookup"><span data-stu-id="38b47-168">Default Load: The default load is represented differently depending on whether the service is stateless or stateful.</span></span>
  * <span data-ttu-id="38b47-169">W przypadku usług bezstanowych wszystkie metryki ma jedną właściwość o nazwie DefaultLoad</span><span class="sxs-lookup"><span data-stu-id="38b47-169">For stateless services, each metric has a single property named DefaultLoad</span></span>
  * <span data-ttu-id="38b47-170">Dla stanowych usług można zdefiniować:</span><span class="sxs-lookup"><span data-stu-id="38b47-170">For stateful services you define:</span></span>
    * <span data-ttu-id="38b47-171">PrimaryDefaultLoad: Pobiera tej usługi domyślnej ilości ta metryka, w podstawowym</span><span class="sxs-lookup"><span data-stu-id="38b47-171">PrimaryDefaultLoad: The default amount of this metric this service consumes when it is a Primary</span></span>
    * <span data-ttu-id="38b47-172">SecondaryDefaultLoad: Pobiera tej usługi domyślnej ilości ta metryka, czasie pomocniczego</span><span class="sxs-lookup"><span data-stu-id="38b47-172">SecondaryDefaultLoad: The default amount of this metric this service consumes when it is a Secondary</span></span>

> [!NOTE]
> <span data-ttu-id="38b47-173">Jeśli zdefiniujesz metryki niestandardowe i chcesz _również_ metryki domyślnego, konieczne _jawnie_ Dodaj domyślne metryki kopii i zdefiniuj wagi i wartości dla nich.</span><span class="sxs-lookup"><span data-stu-id="38b47-173">If you define custom metrics and you want to _also_ use the default metrics, you need to _explicitly_ add the default metrics back and define weights and values for them.</span></span> <span data-ttu-id="38b47-174">Jest to spowodowane należy zdefiniować relację między domyślne metryki i Twoje metryki niestandardowe.</span><span class="sxs-lookup"><span data-stu-id="38b47-174">This is because you must define the relationship between the default metrics and your custom metrics.</span></span> <span data-ttu-id="38b47-175">Na przykład może być potrzebne informacje ConnectionCount lub WorkQueueDepth więcej niż podstawowy dystrybucji.</span><span class="sxs-lookup"><span data-stu-id="38b47-175">For example, maybe you care about ConnectionCount or WorkQueueDepth more than Primary distribution.</span></span> <span data-ttu-id="38b47-176">Domyślnie waga metryki PrimaryCount jest wysoki, więc chcesz zmniejszyć na nośnik, po dodaniu z metryki, aby upewnić się, że ich mają pierwszeństwo.</span><span class="sxs-lookup"><span data-stu-id="38b47-176">By default the weight of the PrimaryCount metric is High, so you want to reduce it to Medium when you add your other metrics to ensure they take precedence.</span></span>
>

### <a name="defining-metrics-for-your-service---an-example"></a><span data-ttu-id="38b47-177">Definiowanie metryki dla usługi — przykład</span><span class="sxs-lookup"><span data-stu-id="38b47-177">Defining metrics for your service - an example</span></span>
<span data-ttu-id="38b47-178">Załóżmy, że ma następującą konfigurację:</span><span class="sxs-lookup"><span data-stu-id="38b47-178">Let’s say you want the following configuration:</span></span>

  - <span data-ttu-id="38b47-179">Metryka o nazwie "ConnectionCount" raportów usługi</span><span class="sxs-lookup"><span data-stu-id="38b47-179">Your service reports a metric named "ConnectionCount”</span></span>
  - <span data-ttu-id="38b47-180">Należy użyć domyślne metryki</span><span class="sxs-lookup"><span data-stu-id="38b47-180">You also want to use the default metrics</span></span> 
  - <span data-ttu-id="38b47-181">Przycisk niektórych pomiarów i dowiedzieć się, że zwykle podstawową replikę tej usługi zajmuje 20 jednostek "ConnectionCount"</span><span class="sxs-lookup"><span data-stu-id="38b47-181">You’ve done some measurements and know that normally a Primary replica of that service takes up 20 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="38b47-182">Pomocnicze bazy danych użyj 5 jednostek "ConnectionCount"</span><span class="sxs-lookup"><span data-stu-id="38b47-182">Secondaries use 5 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="38b47-183">Wiesz, że "ConnectionCount" jest najważniejszych Metryka pod względem wydajności tej konkretnej usługi zarządzania</span><span class="sxs-lookup"><span data-stu-id="38b47-183">You know that "ConnectionCount" is the most important metric in terms of managing the performance of this particular service</span></span>
  - <span data-ttu-id="38b47-184">Nadal chcesz zrównoważonym replik podstawowych.</span><span class="sxs-lookup"><span data-stu-id="38b47-184">You still want Primary replicas balanced.</span></span> <span data-ttu-id="38b47-185">Równoważenie replik podstawowych zazwyczaj dobrym pomysłem jest bez względu na okoliczności.</span><span class="sxs-lookup"><span data-stu-id="38b47-185">Balancing primary replicas is generally a good idea no matter what.</span></span> <span data-ttu-id="38b47-186">Pomaga to zapobiec utracie niektóre domeny węzła lub fault z wpływające na większości replik podstawowych wraz z jej.</span><span class="sxs-lookup"><span data-stu-id="38b47-186">This helps prevent the loss of some node or fault domain from impacting a majority of primary replicas along with it.</span></span> 
  - <span data-ttu-id="38b47-187">W przeciwnym razie domyślne metryki są poprawnie</span><span class="sxs-lookup"><span data-stu-id="38b47-187">Otherwise, the default metrics are fine</span></span>

<span data-ttu-id="38b47-188">Oto kod, który można zapisać do utworzenia usługi w tej konfiguracji metryki:</span><span class="sxs-lookup"><span data-stu-id="38b47-188">Here’s the code that you would write to create a service with that metric configuration:</span></span>

<span data-ttu-id="38b47-189">Kod:</span><span class="sxs-lookup"><span data-stu-id="38b47-189">Code:</span></span>

```csharp
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
StatefulServiceLoadMetricDescription connectionMetric = new StatefulServiceLoadMetricDescription();
connectionMetric.Name = "ConnectionCount";
connectionMetric.PrimaryDefaultLoad = 20;
connectionMetric.SecondaryDefaultLoad = 5;
connectionMetric.Weight = ServiceLoadMetricWeight.High;

StatefulServiceLoadMetricDescription primaryCountMetric = new StatefulServiceLoadMetricDescription();
primaryCountMetric.Name = "PrimaryCount";
primaryCountMetric.PrimaryDefaultLoad = 1;
primaryCountMetric.SecondaryDefaultLoad = 0;
primaryCountMetric.Weight = ServiceLoadMetricWeight.Medium;

StatefulServiceLoadMetricDescription replicaCountMetric = new StatefulServiceLoadMetricDescription();
replicaCountMetric.Name = "ReplicaCount";
replicaCountMetric.PrimaryDefaultLoad = 1;
replicaCountMetric.SecondaryDefaultLoad = 1;
replicaCountMetric.Weight = ServiceLoadMetricWeight.Low;

StatefulServiceLoadMetricDescription totalCountMetric = new StatefulServiceLoadMetricDescription();
totalCountMetric.Name = "Count";
totalCountMetric.PrimaryDefaultLoad = 1;
totalCountMetric.SecondaryDefaultLoad = 1;
totalCountMetric.Weight = ServiceLoadMetricWeight.Low;

serviceDescription.Metrics.Add(connectionMetric);
serviceDescription.Metrics.Add(primaryCountMetric);
serviceDescription.Metrics.Add(replicaCountMetric);
serviceDescription.Metrics.Add(totalCountMetric);

await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="38b47-190">Środowiska PowerShell:</span><span class="sxs-lookup"><span data-stu-id="38b47-190">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("ConnectionCount,High,20,5”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

> [!NOTE]
> <span data-ttu-id="38b47-191">Powyższe przykłady i pozostałej części tego dokumentu opisano zarządzanie metryki na podstawie ciągu o nazwie — usługi.</span><span class="sxs-lookup"><span data-stu-id="38b47-191">The above examples and the rest of this document describe managing metrics on a per-named-service basis.</span></span> <span data-ttu-id="38b47-192">Istnieje również możliwość zdefiniowania metryki dla usług w usłudze _typu_ poziom.</span><span class="sxs-lookup"><span data-stu-id="38b47-192">It is also possible to define metrics for your services at the service _type_ level.</span></span> <span data-ttu-id="38b47-193">Jest to osiągnąć, określając je w manifestach Twojej usługi.</span><span class="sxs-lookup"><span data-stu-id="38b47-193">This is accomplished by specifying them in your service manifests.</span></span> <span data-ttu-id="38b47-194">Definiowanie metryki na poziomie typu nie jest zalecane z kilku powodów.</span><span class="sxs-lookup"><span data-stu-id="38b47-194">Defining type level metrics is not recommended for several reasons.</span></span> <span data-ttu-id="38b47-195">Po pierwsze urząd są nazwy metryki często określonego środowiska.</span><span class="sxs-lookup"><span data-stu-id="38b47-195">The first reason is that metric names are frequently environment-specific.</span></span> <span data-ttu-id="38b47-196">Jeżeli nie istnieje ostateczne kontraktu w miejscu, nie może być pewności, że metryka "Rdzeni" w jednym środowisku nie w innych "MiliCores" lub "Rdzeni".</span><span class="sxs-lookup"><span data-stu-id="38b47-196">Unless there is a firm contract in place, you cannot be sure that the metric "Cores" in one environment isn't "MiliCores" or "CoReS" in others.</span></span> <span data-ttu-id="38b47-197">Jeśli Twoje metryki są zdefiniowane w manifeście, należy utworzyć nowe manifesty na środowisko.</span><span class="sxs-lookup"><span data-stu-id="38b47-197">If your metrics are defined in your manifest you need to create new manifests per environment.</span></span> <span data-ttu-id="38b47-198">Prowadzi to zwykle mnożenie różnych manifestów tylko drobne różnice, które mogą prowadzić do zarządzania trudności.</span><span class="sxs-lookup"><span data-stu-id="38b47-198">This usually leads to a proliferation of different manifests with only minor differences, which can lead to management difficulties.</span></span>  
>
> <span data-ttu-id="38b47-199">Metryka obciążenia często są przypisywane na podstawie poszczególnych o nazwie usług wystąpień.</span><span class="sxs-lookup"><span data-stu-id="38b47-199">Metric loads are commonly assigned on a per-named-service-instance basis.</span></span> <span data-ttu-id="38b47-200">Na przykład załóżmy, że utworzenie jednego wystąpienia usługi dla CustomerA, która planuje się rzadziej.</span><span class="sxs-lookup"><span data-stu-id="38b47-200">For example, let's say you create one instance of the service for CustomerA who plans to use it only lightly.</span></span> <span data-ttu-id="38b47-201">Również Załóżmy, że utworzyć inny dla CustomerB mającego większe obciążenie.</span><span class="sxs-lookup"><span data-stu-id="38b47-201">Let's also say you create another for CustomerB who has a larger workload.</span></span> <span data-ttu-id="38b47-202">W takim przypadku będzie prawdopodobnie chcesz dostosować obciążenia domyślne dla tych usług.</span><span class="sxs-lookup"><span data-stu-id="38b47-202">In this case, you'd probably want to tweak the default loads for those services.</span></span> <span data-ttu-id="38b47-203">Jeśli masz metryki i obciążeń zdefiniowany za pomocą manifestów, a chcesz obsługiwać ten scenariusz, wymaga innej aplikacji i typów usług dla każdego klienta.</span><span class="sxs-lookup"><span data-stu-id="38b47-203">If you have metrics and loads defined via manifests and you want to support this scenario, it requires different application and service types for each customer.</span></span> <span data-ttu-id="38b47-204">Wartości zdefiniowane w czasie tworzenia usługi przesłaniają akcje zdefiniowane w manifeście, więc można który służy do ustawiania określonych wartości domyślnych.</span><span class="sxs-lookup"><span data-stu-id="38b47-204">The values defined at service creation time override those defined in the manifest, so you could use that to set the specific defaults.</span></span> <span data-ttu-id="38b47-205">Jednak operacją powoduje, że zadeklarowany w manifestach odpowiadające nie usługa działa z wartości.</span><span class="sxs-lookup"><span data-stu-id="38b47-205">However, doing that causes the values declared in the manifests to not match those the service actually runs with.</span></span> <span data-ttu-id="38b47-206">Może to prowadzić do pomyłek.</span><span class="sxs-lookup"><span data-stu-id="38b47-206">This can lead to confusion.</span></span> 
>

<span data-ttu-id="38b47-207">Dla przypomnienia: Jeśli chcesz użyć domyślne metryki, nie trzeba było w ogóle touch kolekcji metryki też wykonywać specjalne podczas tworzenia usługi.</span><span class="sxs-lookup"><span data-stu-id="38b47-207">As a reminder: if you just want to use the default metrics, you don’t need to touch the metrics collection at all or do anything special when creating your service.</span></span> <span data-ttu-id="38b47-208">Domyślne metryki uzyskać użyć automatycznie, gdy nie zdefiniowano żadnych innych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="38b47-208">The default metrics get used automatically when no others are defined.</span></span> 

<span data-ttu-id="38b47-209">Teraz przejdźmy do każdego z tych ustawień bardziej szczegółowo i omówione ma to wpływ na zachowanie.</span><span class="sxs-lookup"><span data-stu-id="38b47-209">Now, let's go through each of these settings in more detail and talk about the behavior that it influences.</span></span>

## <a name="load"></a><span data-ttu-id="38b47-210">Ładowanie</span><span class="sxs-lookup"><span data-stu-id="38b47-210">Load</span></span>
<span data-ttu-id="38b47-211">Całe punkt definiowania metryk jest do reprezentowania niektóre obciążenia.</span><span class="sxs-lookup"><span data-stu-id="38b47-211">The whole point of defining metrics is to represent some load.</span></span> <span data-ttu-id="38b47-212">*Obciążenia* jest, jaka część danej metryki jest używany przez niektóre wystąpienia usługi lub replikę z danego węzła.</span><span class="sxs-lookup"><span data-stu-id="38b47-212">*Load* is how much of a given metric is consumed by some service instance or replica on a given node.</span></span> <span data-ttu-id="38b47-213">Obciążenia można skonfigurować w dowolnym momencie.</span><span class="sxs-lookup"><span data-stu-id="38b47-213">Load can be configured at almost any point.</span></span> <span data-ttu-id="38b47-214">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="38b47-214">For example:</span></span>

  - <span data-ttu-id="38b47-215">Obciążenia można zdefiniować podczas tworzenia usługi.</span><span class="sxs-lookup"><span data-stu-id="38b47-215">Load can be defined when a service is created.</span></span> <span data-ttu-id="38b47-216">Ta metoda jest wywoływana _obciążenia domyślne_.</span><span class="sxs-lookup"><span data-stu-id="38b47-216">This is called _default load_.</span></span>
  - <span data-ttu-id="38b47-217">Informacje dotyczące pomiaru, takich jak obciążeń domyślne usługi można zaktualizować po utworzeniu usługi.</span><span class="sxs-lookup"><span data-stu-id="38b47-217">The metric information, including default loads, for a service can updated after the service is created.</span></span> <span data-ttu-id="38b47-218">Ta metoda jest wywoływana _uaktualnianie usługi_.</span><span class="sxs-lookup"><span data-stu-id="38b47-218">This is called _updating a service_.</span></span> 
  - <span data-ttu-id="38b47-219">Obciążenia dla danej partycji można przywrócić wartości domyślne dla tej usługi.</span><span class="sxs-lookup"><span data-stu-id="38b47-219">The loads for a given partition can be reset to the default values for that service.</span></span> <span data-ttu-id="38b47-220">Ta metoda jest wywoływana _zresetowania obciążenia partycji_.</span><span class="sxs-lookup"><span data-stu-id="38b47-220">This is called _resetting partition load_.</span></span>
  - <span data-ttu-id="38b47-221">Obciążenia mogą być zgłaszane na poszczególnych obiektów usługi dynamicznie w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="38b47-221">Load can be reported on a per service object basis dynamically during runtime.</span></span> <span data-ttu-id="38b47-222">Ta metoda jest wywoływana _raportowania obciążenia_.</span><span class="sxs-lookup"><span data-stu-id="38b47-222">This is called _reporting load_.</span></span> 
  
<span data-ttu-id="38b47-223">Wszystkie strategie można w tej samej usługi swojego okresu istnienia.</span><span class="sxs-lookup"><span data-stu-id="38b47-223">All of these strategies can be used within the same service over its lifetime.</span></span> 

## <a name="default-load"></a><span data-ttu-id="38b47-224">Domyślne obciążenia</span><span class="sxs-lookup"><span data-stu-id="38b47-224">Default load</span></span>
<span data-ttu-id="38b47-225">*Domyślne obciążenia* jest znacznie metryki zużywa każdego obiektu usługi (bezstanowych wystąpienia lub stanowych repliki) tej usługi.</span><span class="sxs-lookup"><span data-stu-id="38b47-225">*Default load* is how much of the metric each service object (stateless instance or stateful replica) of this service consumes.</span></span> <span data-ttu-id="38b47-226">Menedżer zasobów klastra używa tego numeru obciążenia obiektu usługi, dopóki nie odbierze inne informacje, takie jak raportu dynamicznego obciążenia.</span><span class="sxs-lookup"><span data-stu-id="38b47-226">The Cluster Resource Manager uses this number for the load of the service object until it receives other information, such as a dynamic load report.</span></span> <span data-ttu-id="38b47-227">W przypadku prostszych usług obciążenie domyślne jest definicji statycznych.</span><span class="sxs-lookup"><span data-stu-id="38b47-227">For simpler services, the default load is a static definition.</span></span> <span data-ttu-id="38b47-228">Obciążenia domyślne nigdy nie są aktualizowane i jest używany przez czas ich istnienia usługi.</span><span class="sxs-lookup"><span data-stu-id="38b47-228">The default load is never updated and is used for the lifetime of the service.</span></span> <span data-ttu-id="38b47-229">Domyślne ładuje Wielkiej działa proste pojemności planowanie scenariuszy, w którym niektórych ilości zasobów są przeznaczone wyłącznie dla różnych obciążeń i nie należy zmieniać.</span><span class="sxs-lookup"><span data-stu-id="38b47-229">Default loads works great for simple capacity planning scenarios where certain amounts of resources are dedicated to different workloads and do not change.</span></span>

> [!NOTE]
> <span data-ttu-id="38b47-230">Aby uzyskać więcej informacji dotyczących zarządzania pojemności i definiowanie pojemności dla węzłów w klastrze, zobacz [w tym artykule](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span><span class="sxs-lookup"><span data-stu-id="38b47-230">For more information on capacity management and defining capacities for the nodes in your cluster, please see [this article](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span></span>
> 

<span data-ttu-id="38b47-231">Menedżer zasobów klastra umożliwia stanowych usług do określenia obciążenia różne domyślne kolory podstawowe i pomocnicze bazy danych.</span><span class="sxs-lookup"><span data-stu-id="38b47-231">The Cluster Resource Manager allows stateful services to specify a different default load for their Primaries and Secondaries.</span></span> <span data-ttu-id="38b47-232">Usługi bezstanowej można określić tylko jedną wartość, która ma zastosowanie do wszystkich wystąpień.</span><span class="sxs-lookup"><span data-stu-id="38b47-232">Stateless services can only specify one value that applies to all instances.</span></span> <span data-ttu-id="38b47-233">Dla usługi stanowej, obciążenia domyślny dla podstawowego i pomocniczego repliki są zwykle różnych ponieważ repliki są różnego rodzaju pracy w każdej roli.</span><span class="sxs-lookup"><span data-stu-id="38b47-233">For stateful services, the default load for Primary and Secondary replicas are typically different since replicas do different kinds of work in each role.</span></span> <span data-ttu-id="38b47-234">Na przykład kolory podstawowe zwykle służą odczytów i zapisów i obsługę większości obciążeń obliczeniowych, podczas gdy pomocnicze bazy danych nie.</span><span class="sxs-lookup"><span data-stu-id="38b47-234">For example, Primaries usually serve both reads and writes, and handle most of the computational burden, while secondaries do not.</span></span> <span data-ttu-id="38b47-235">Zazwyczaj obciążenia domyślny dla repliki podstawowej jest wyższa niż obciążenia domyślny dla replik pomocniczych.</span><span class="sxs-lookup"><span data-stu-id="38b47-235">Usually the default load for a primary replica is higher than the default load for secondary replicas.</span></span> <span data-ttu-id="38b47-236">Liczb rzeczywistych powinien są zależne od swoich własnych pomiarów.</span><span class="sxs-lookup"><span data-stu-id="38b47-236">The real numbers should depend on your own measurements.</span></span>

## <a name="dynamic-load"></a><span data-ttu-id="38b47-237">Obciążenie dynamicznego</span><span class="sxs-lookup"><span data-stu-id="38b47-237">Dynamic load</span></span>
<span data-ttu-id="38b47-238">Załóżmy, że działała usługi przez pewien czas.</span><span class="sxs-lookup"><span data-stu-id="38b47-238">Let’s say that you’ve been running your service for a while.</span></span> <span data-ttu-id="38b47-239">Niektóre monitorowania z zostały zauważyć, że:</span><span class="sxs-lookup"><span data-stu-id="38b47-239">With some monitoring, you’ve noticed that:</span></span>

1. <span data-ttu-id="38b47-240">Niektóre partycje lub wystąpienia danej usługi zużywać więcej zasobów niż inne</span><span class="sxs-lookup"><span data-stu-id="38b47-240">Some partitions or instances of a given service consume more resources than others</span></span>
2. <span data-ttu-id="38b47-241">Niektóre usługi mają obciążenia, która różni się w czasie.</span><span class="sxs-lookup"><span data-stu-id="38b47-241">Some services have load that varies over time.</span></span>

<span data-ttu-id="38b47-242">Istnieje wiele rzeczy, które mogły spowodować tego rodzaju wahania obciążenia.</span><span class="sxs-lookup"><span data-stu-id="38b47-242">There's lots of things that could cause these types of load fluctuations.</span></span> <span data-ttu-id="38b47-243">Na przykład różnych usług lub partycje są skojarzone z różnych klientów z innymi wymaganiami.</span><span class="sxs-lookup"><span data-stu-id="38b47-243">For example, different services or partitions are associated with different customers with different requirements.</span></span> <span data-ttu-id="38b47-244">Obciążenia można również zmienić, ponieważ ilość pracy, usługa nie może być różna w ciągu dnia.</span><span class="sxs-lookup"><span data-stu-id="38b47-244">Load could also change because the amount of work the service does varies over the course of the day.</span></span> <span data-ttu-id="38b47-245">Niezależnie od przyczyny jest zazwyczaj nie jeden numer używanego dla domyślnego.</span><span class="sxs-lookup"><span data-stu-id="38b47-245">Regardless of the reason, there’s usually no single number that you can use for default.</span></span> <span data-ttu-id="38b47-246">Jest to szczególnie istotne, jeśli chcesz pobrać większości wykorzystania spoza klastra.</span><span class="sxs-lookup"><span data-stu-id="38b47-246">This is especially true if you want to get the most utilization out of the cluster.</span></span> <span data-ttu-id="38b47-247">Wartość, wybrać dla domyślnego obciążenia jest niewłaściwy pewien czas działanie.</span><span class="sxs-lookup"><span data-stu-id="38b47-247">Any value you pick for default load is wrong some of the time.</span></span> <span data-ttu-id="38b47-248">Nieprawidłowe domyślne ładuje wynik w klastrze Menedżera zasobów nad lub pod alokacji zasobów.</span><span class="sxs-lookup"><span data-stu-id="38b47-248">Incorrect default loads result in the Cluster Resource Manager either over or under allocating resources.</span></span> <span data-ttu-id="38b47-249">W związku z tym masz węzłów, które są powyżej lub poniżej wykorzystywane mimo, że Menedżer zasobów klastra sądzi, że klaster jest rozmieszczana.</span><span class="sxs-lookup"><span data-stu-id="38b47-249">As a result, you have nodes that are over or under utilized even though the Cluster Resource Manager thinks the cluster is balanced.</span></span> <span data-ttu-id="38b47-250">Domyślne obciążenia są nadal dobrej, ponieważ zapewniają niektóre informacje do umieszczenia początkowej, ale nie są one zakończenie wątku dla obciążeń prawdziwe.</span><span class="sxs-lookup"><span data-stu-id="38b47-250">Default loads are still good since they provide some information for initial placement, but they're not a complete story for real workloads.</span></span> <span data-ttu-id="38b47-251">Do przechwytywania dokładnie zmieniających się wymagań dotyczących zasobów, Menedżer zasobów klastra umożliwia każdego obiektu usługi można zaktualizować własną obciążenia w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="38b47-251">To accurately capture changing resource requirements, the Cluster Resource Manager allows each service object to update its own load during runtime.</span></span> <span data-ttu-id="38b47-252">Jest to obciążenie dynamicznego raportowania.</span><span class="sxs-lookup"><span data-stu-id="38b47-252">This is called dynamic load reporting.</span></span>

<span data-ttu-id="38b47-253">Raporty Obciążenie dynamicznego Zezwalaj repliki lub wystąpienia, aby dostosować ich ładowania metryki alokacji/zgłoszone za pośrednictwem ich istnienia.</span><span class="sxs-lookup"><span data-stu-id="38b47-253">Dynamic load reports allow replicas or instances to adjust their allocation/reported load of metrics over their lifetime.</span></span> <span data-ttu-id="38b47-254">Repliki usługi lub wystąpienia, który był niskich i bezczynny będzie zazwyczaj raport, aby korzystał z niskim ilości danej metryki.</span><span class="sxs-lookup"><span data-stu-id="38b47-254">A service replica or instance that was cold and not doing any work would usually report that it was using low amounts of a given metric.</span></span> <span data-ttu-id="38b47-255">Replika zajęta lub wystąpienie rozpoczną przesyłanie raportów o tym, że używają więcej.</span><span class="sxs-lookup"><span data-stu-id="38b47-255">A busy replica or instance would report that they are using more.</span></span>

<span data-ttu-id="38b47-256">Raportowania obciążenia dla repliki lub wystąpienie umożliwia Menedżera zasobów klastra, aby uporządkować obiekty poszczególnych usług w klastrze.</span><span class="sxs-lookup"><span data-stu-id="38b47-256">Reporting load per replica or instance allows the Cluster Resource Manager to reorganize the individual service objects in the cluster.</span></span> <span data-ttu-id="38b47-257">Reorganizacja usług gwarantuje, że otrzymują zasoby, które wymagają.</span><span class="sxs-lookup"><span data-stu-id="38b47-257">Reorganizing the services helps ensure that they get the resources they require.</span></span> <span data-ttu-id="38b47-258">Usługi zajęty skutecznie Uzyskaj "odzyskiwaniu" zasoby od innych repliki lub wystąpienia, które są aktualnie ten mniej pracy lub niskie.</span><span class="sxs-lookup"><span data-stu-id="38b47-258">Busy services effectively get to "reclaim" resources from other replicas or instances that are currently cold or doing less work.</span></span>

<span data-ttu-id="38b47-259">W ramach niezawodnej usługi kodu w celu raportowania obciążenia dynamicznie wygląda następująco:</span><span class="sxs-lookup"><span data-stu-id="38b47-259">Within Reliable Services, the code to report load dynamically looks like this:</span></span>

<span data-ttu-id="38b47-260">Kod:</span><span class="sxs-lookup"><span data-stu-id="38b47-260">Code:</span></span>

```csharp
this.Partition.ReportLoad(new List<LoadMetric> { new LoadMetric("CurrentConnectionCount", 1234), new LoadMetric("metric1", 42) });
```

<span data-ttu-id="38b47-261">Usługa może raportować na dowolnym zdefiniowane w czasie tworzenia metryki.</span><span class="sxs-lookup"><span data-stu-id="38b47-261">A service can report on any of the metrics defined for it at creation time.</span></span> <span data-ttu-id="38b47-262">Jeśli obciążenia raportów usługi dla metryki, który nie jest skonfigurowany do użycia, sieć szkieletowa usług ignoruje tego raportu.</span><span class="sxs-lookup"><span data-stu-id="38b47-262">If a service reports load for a metric that it is not configured to use, Service Fabric ignores that report.</span></span> <span data-ttu-id="38b47-263">Jeśli istnieją inne metryki zgłoszone w tym samym czasie, które są prawidłowe, te raporty są akceptowane.</span><span class="sxs-lookup"><span data-stu-id="38b47-263">If there are other metrics reported at the same time that are valid, those reports are accepted.</span></span> <span data-ttu-id="38b47-264">Kod usługi można mierzyć i zgłaszać wszystkie metryki wiadomo, jak i operatory można będzie określić konfigurację metryki, aby użyć bez konieczności zmiany kodu usługi.</span><span class="sxs-lookup"><span data-stu-id="38b47-264">Service code can measure and report all the metrics it knows how to, and operators can specify the metric configuration to use without having to change the service code.</span></span> 

### <a name="updating-a-services-metric-configuration"></a><span data-ttu-id="38b47-265">Trwa aktualizowanie konfiguracji metryki usługi</span><span class="sxs-lookup"><span data-stu-id="38b47-265">Updating a service's metric configuration</span></span>
<span data-ttu-id="38b47-266">Lista metryki skojarzony z usługą i właściwości tych metryk może być aktualizowany dynamicznie, gdy usługa jest na żywo.</span><span class="sxs-lookup"><span data-stu-id="38b47-266">The list of metrics associated with the service, and the properties of those metrics can be updated dynamically while the service is live.</span></span> <span data-ttu-id="38b47-267">Dzięki temu eksperymenty i elastyczność.</span><span class="sxs-lookup"><span data-stu-id="38b47-267">This allows for experimentation and flexibility.</span></span> <span data-ttu-id="38b47-268">Przykłady gdy jest to przydatne są:</span><span class="sxs-lookup"><span data-stu-id="38b47-268">Some examples of when this is useful are:</span></span>

  - <span data-ttu-id="38b47-269">wyłączanie Metryka z raportem buggy określonej usługi</span><span class="sxs-lookup"><span data-stu-id="38b47-269">disabling a metric with a buggy report for a particular service</span></span>
  - <span data-ttu-id="38b47-270">ponowne konfigurowanie wag metryki na podstawie żądanego zachowania</span><span class="sxs-lookup"><span data-stu-id="38b47-270">reconfiguring the weights of metrics based on desired behavior</span></span>
  - <span data-ttu-id="38b47-271">Włączanie nowej Metryka tylko wtedy, gdy kod został już wdrożony i zweryfikować za pośrednictwem innych mechanizmów</span><span class="sxs-lookup"><span data-stu-id="38b47-271">enabling a new metric only after the code has already been deployed and validated via other mechanisms</span></span>
  - <span data-ttu-id="38b47-272">Zmiana obciążenia domyślne usługi na podstawie obserwowanych zachowania i zużycia</span><span class="sxs-lookup"><span data-stu-id="38b47-272">changing the default load for a service based on observed behavior and consumption</span></span>

<span data-ttu-id="38b47-273">Główne interfejsy API do zmiany konfiguracji metryki są `FabricClient.ServiceManagementClient.UpdateServiceAsync` w języku C# i `Update-ServiceFabricService` w programie PowerShell.</span><span class="sxs-lookup"><span data-stu-id="38b47-273">The main APIs for changing metric configuration are `FabricClient.ServiceManagementClient.UpdateServiceAsync` in C# and `Update-ServiceFabricService` in PowerShell.</span></span> <span data-ttu-id="38b47-274">Niezależnie od informacje z poniższych interfejsów API natychmiast zastępuje istniejące informacje metryki dla usługi.</span><span class="sxs-lookup"><span data-stu-id="38b47-274">Whatever information you specify with these APIs replaces the existing metric information for the service immediately.</span></span> 

## <a name="mixing-default-load-values-and-dynamic-load-reports"></a><span data-ttu-id="38b47-275">Mieszanie domyślne wartości obciążenia i raportów obciążenia dynamiczne</span><span class="sxs-lookup"><span data-stu-id="38b47-275">Mixing default load values and dynamic load reports</span></span>
<span data-ttu-id="38b47-276">Domyślne obciążenia i obciążeń dynamicznych może służyć do tej samej usługi.</span><span class="sxs-lookup"><span data-stu-id="38b47-276">Default load and dynamic loads can be used for the same service.</span></span> <span data-ttu-id="38b47-277">Gdy usługa korzysta zarówno obciążenia domyślne i raportów obciążenia dynamicznego, obciążenia domyślna służy jako szacunkową dopóki wyświetlani dynamicznych raportów.</span><span class="sxs-lookup"><span data-stu-id="38b47-277">When a service utilizes both default load and dynamic load reports, default load serves as an estimate until dynamic reports show up.</span></span> <span data-ttu-id="38b47-278">Domyślne obciążenia jest prawidłowa, ponieważ umożliwia Menedżera zasobów klastra coś do pracy z.</span><span class="sxs-lookup"><span data-stu-id="38b47-278">Default load is good because it gives the Cluster Resource Manager something to work with.</span></span> <span data-ttu-id="38b47-279">Obciążenia domyślne umożliwia Menedżera zasobów klastra można umieścić w dobrej lokalizacje obiektów usługi, po ich utworzeniu.</span><span class="sxs-lookup"><span data-stu-id="38b47-279">The default load allows the Cluster Resource Manager to place the service objects in good locations when they are created.</span></span> <span data-ttu-id="38b47-280">Jeśli podano żadnych informacji obciążenia domyślne, umieszczania usług jest skutecznie losowych.</span><span class="sxs-lookup"><span data-stu-id="38b47-280">If no default load information is provided, placement of services is effectively random.</span></span> <span data-ttu-id="38b47-281">Nadejściu raportów obciążenia później początkowe położenie losowe często jest nieprawidłowy, a Menedżer zasobów klastra musi przenieść usług.</span><span class="sxs-lookup"><span data-stu-id="38b47-281">When load reports arrive later the initial random placement is often wrong and the Cluster Resource Manager has to move services.</span></span>

<span data-ttu-id="38b47-282">Teraz pobrać naszych poprzedni przykład i zobacz, co się stanie po dodamy niektóre metryki niestandardowe i raportowania dynamicznego obciążenia.</span><span class="sxs-lookup"><span data-stu-id="38b47-282">Let’s take our previous example and see what happens when we add some custom metrics and dynamic load reporting.</span></span> <span data-ttu-id="38b47-283">W tym przykładzie używamy "MemoryInMb" jako przykład metryka.</span><span class="sxs-lookup"><span data-stu-id="38b47-283">In this example, we use “MemoryInMb” as an example metric.</span></span>

> [!NOTE]
> <span data-ttu-id="38b47-284">Pamięć jest jednym z metryki systemu, które można sieci szkieletowej usług [regulują zasobów](service-fabric-resource-governance.md), i raportowania samodzielnie jest zazwyczaj trudne.</span><span class="sxs-lookup"><span data-stu-id="38b47-284">Memory is one of the system metrics that Service Fabric can [resource govern](service-fabric-resource-governance.md), and reporting it yourself is typically difficult.</span></span> <span data-ttu-id="38b47-285">Nie faktycznie Oczekujemy na raport dotyczący zużycie pamięci; Pamięć jest używana jako pomoc do zapoznawanie funkcje Menedżera zasobów klastra.</span><span class="sxs-lookup"><span data-stu-id="38b47-285">We don't actually expect you to report on Memory consumption; Memory is used here as an aid to learning about the capabilities of the Cluster Resource Manager.</span></span>
>

<span data-ttu-id="38b47-286">Załóżmy zakładają, że początkowo utworzyliśmy usługi stanowej przy użyciu następującego polecenia:</span><span class="sxs-lookup"><span data-stu-id="38b47-286">Let’s presume that we initially created the stateful service with the following command:</span></span>

<span data-ttu-id="38b47-287">Środowiska PowerShell:</span><span class="sxs-lookup"><span data-stu-id="38b47-287">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("MemoryInMb,High,21,11”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

<span data-ttu-id="38b47-288">Dla przypomnienia ta składnia jest ("MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span><span class="sxs-lookup"><span data-stu-id="38b47-288">As a reminder, this syntax is ("MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span></span>

<span data-ttu-id="38b47-289">Zobaczmy, jakie jeden układ możliwe klastra może wyglądać jak:</span><span class="sxs-lookup"><span data-stu-id="38b47-289">Let's see what one possible cluster layout could look like:</span></span>

<span data-ttu-id="38b47-290"><center>
![Klaster zrównoważony z domyślnych i niestandardowych metryk][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="38b47-290"><center>
![Cluster Balanced with both Default and Custom metrics][Image2]
</center></span></span>

<span data-ttu-id="38b47-291">Kilka rzeczy, które są warto zauważyć:</span><span class="sxs-lookup"><span data-stu-id="38b47-291">Some things that are worth noting:</span></span>

* <span data-ttu-id="38b47-292">Każdej repliki pomocniczej w partycji może mieć własne obciążenia</span><span class="sxs-lookup"><span data-stu-id="38b47-292">Secondary replicas within a partition can each have their own load</span></span>
* <span data-ttu-id="38b47-293">Ogólne metryki Szukaj zrównoważone.</span><span class="sxs-lookup"><span data-stu-id="38b47-293">Overall the metrics look balanced.</span></span> <span data-ttu-id="38b47-294">Pamięci, stosunek minimalnego i maksymalnego obciążenia jest 1,75 (węzeł z najbardziej obciążenia jest N3, jest najmniej N2 i 28/16 = 1,75).</span><span class="sxs-lookup"><span data-stu-id="38b47-294">For Memory, the ratio between the maximum and minimum load is 1.75 (the node with the most load is N3, the least is N2, and 28/16 = 1.75).</span></span>

<span data-ttu-id="38b47-295">Istnieje kilka kwestii, które nadal trzeba wyjaśnić:</span><span class="sxs-lookup"><span data-stu-id="38b47-295">There are some things that we still need to explain:</span></span>

* <span data-ttu-id="38b47-296">Co to ustalić, czy stosunek 1,75 było uzasadnione?</span><span class="sxs-lookup"><span data-stu-id="38b47-296">What determined whether a ratio of 1.75 was reasonable or not?</span></span> <span data-ttu-id="38b47-297">Jak Menedżer zasobów klastra sprawdzić czy jest wystarczająca, czy istnieje więcej pracy?</span><span class="sxs-lookup"><span data-stu-id="38b47-297">How does the Cluster Resource Manager know if that’s good enough or if there is more work to do?</span></span>
* <span data-ttu-id="38b47-298">Gdy równoważenia stanie?</span><span class="sxs-lookup"><span data-stu-id="38b47-298">When does balancing happen?</span></span>
* <span data-ttu-id="38b47-299">Co oznacza że pamięci zostało ważona "High"?</span><span class="sxs-lookup"><span data-stu-id="38b47-299">What does it mean that Memory was weighted “High”?</span></span>

## <a name="metric-weights"></a><span data-ttu-id="38b47-300">Metryki wagi</span><span class="sxs-lookup"><span data-stu-id="38b47-300">Metric weights</span></span>
<span data-ttu-id="38b47-301">Ważne jest śledzenie te same metryki w różnych usługach.</span><span class="sxs-lookup"><span data-stu-id="38b47-301">Tracking the same metrics across different services is important.</span></span> <span data-ttu-id="38b47-302">Tym globalnych widoku jest, co umożliwia Menedżera zasobów klastra, aby śledzić użycie w klastrze, równoważenie zużycie na węzłach i upewnij się, że węzły nie przekazywane pojemności.</span><span class="sxs-lookup"><span data-stu-id="38b47-302">That global view is what allows the Cluster Resource Manager to track consumption in the cluster, balance consumption across nodes, and ensure that nodes don’t go over capacity.</span></span> <span data-ttu-id="38b47-303">Jednak usługi mogą mieć różne widoki dotyczące znaczenie tej samej metryki.</span><span class="sxs-lookup"><span data-stu-id="38b47-303">However, services may have different views as to the importance of the same metric.</span></span> <span data-ttu-id="38b47-304">Ponadto w klastrze z wieloma metryki i wiele usług doskonale zrównoważonym rozwiązania może nie istnieć dla wszystkich metryki.</span><span class="sxs-lookup"><span data-stu-id="38b47-304">Also, in a cluster with many metrics and lots of services, perfectly balanced solutions may not exist for all metrics.</span></span> <span data-ttu-id="38b47-305">Jak Menedżer zasobów klastra powinna obsługiwać tych sytuacji?</span><span class="sxs-lookup"><span data-stu-id="38b47-305">How should the Cluster Resource Manager handle these situations?</span></span>

<span data-ttu-id="38b47-306">Metryki wag Zezwalaj Menedżera zasobów klastra, aby określić sposób równoważenie klastra po doskonałe odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="38b47-306">Metric weights allow the Cluster Resource Manager to decide how to balance the cluster when there’s no perfect answer.</span></span> <span data-ttu-id="38b47-307">Metryki wag również umożliwić Menedżera zasobów klastra, aby równoważyć określonych usług inaczej.</span><span class="sxs-lookup"><span data-stu-id="38b47-307">Metric weights also allow the Cluster Resource Manager to balance specific services differently.</span></span> <span data-ttu-id="38b47-308">Metryki mogą mieć czterech wagi różnych poziomów: Zero, niski, średni i wysoki.</span><span class="sxs-lookup"><span data-stu-id="38b47-308">Metrics can have four different weight levels: Zero, Low, Medium, and High.</span></span> <span data-ttu-id="38b47-309">Metryka o wadze Zero wspiera nic podczas określania, czy elementy są zrównoważonym lub nie.</span><span class="sxs-lookup"><span data-stu-id="38b47-309">A metric with a weight of Zero contributes nothing when considering whether things are balanced or not.</span></span> <span data-ttu-id="38b47-310">Jednak jej obciążenia nadal przyczyniają się do zarządzania pojemności.</span><span class="sxs-lookup"><span data-stu-id="38b47-310">However, its load does still contribute to capacity management.</span></span> <span data-ttu-id="38b47-311">Metryki Zero wagę są nadal przydatne i są często używane jako część zachowanie usługi i monitorowania wydajności.</span><span class="sxs-lookup"><span data-stu-id="38b47-311">Metrics with Zero weight are still useful and are frequently used as a part of service behavior and performance monitoring.</span></span> <span data-ttu-id="38b47-312">[W tym artykule](service-fabric-diagnostics-event-generation-infra.md) zamieszczono więcej informacji dotyczących stosowania metryk do monitorowania i diagnostyki usług.</span><span class="sxs-lookup"><span data-stu-id="38b47-312">[This article](service-fabric-diagnostics-event-generation-infra.md) provides more information on the use of metrics for monitoring and diagnostics of your services.</span></span> 

<span data-ttu-id="38b47-313">Rzeczywistego wpływ różne metryki obciążenia w klastrze jest, że Menedżer zasobów klastra generuje różnych rozwiązań.</span><span class="sxs-lookup"><span data-stu-id="38b47-313">The real impact of different metric weights in the cluster is that the Cluster Resource Manager generates different solutions.</span></span> <span data-ttu-id="38b47-314">Wag metryki Poinformuj Menedżera zasobów klastra, czy niektóre metryki są ważniejsze od innych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="38b47-314">Metric weights tell the Cluster Resource Manager that certain metrics are more important than others.</span></span> <span data-ttu-id="38b47-315">Gdy istnieje doskonałe rozwiązanie Menedżera zasobów klastra można preferowane rozwiązania, które saldo wyższej metryki ważoną lepiej.</span><span class="sxs-lookup"><span data-stu-id="38b47-315">When there's no perfect solution the Cluster Resource Manager can prefer solutions which balance the higher weighted metrics better.</span></span> <span data-ttu-id="38b47-316">Jeśli usługa sądzi określonej metryki jest bez znaczenia, może znajdzie ich używania tego metryki imbalanced.</span><span class="sxs-lookup"><span data-stu-id="38b47-316">If a service thinks a particular metric is unimportant, it may find their use of that metric imbalanced.</span></span> <span data-ttu-id="38b47-317">Dzięki temu inna usługa nawet dystrybucji niektóre metryki ważne jest, aby go pobrać.</span><span class="sxs-lookup"><span data-stu-id="38b47-317">This allows another service to get an even distribution of some metric that is important to it.</span></span>

<span data-ttu-id="38b47-318">Oto przykład niektórych raportów obciążenia i metrykę, jak różne przeprowadzi wyniki w różnych alokacji w klastrze.</span><span class="sxs-lookup"><span data-stu-id="38b47-318">Let’s look at an example of some load reports and how different metric weights results in different allocations in the cluster.</span></span> <span data-ttu-id="38b47-319">W tym przykładzie przedstawiono, że przełączenie względną wagę metryki powoduje Menedżera zasobów klastra, aby utworzyć różne zasady usług.</span><span class="sxs-lookup"><span data-stu-id="38b47-319">In this example, we see that switching the relative weight of the metrics causes the Cluster Resource Manager to create different arrangements of services.</span></span>

<span data-ttu-id="38b47-320"><center>
![Przykład waga metryki i jak wpływa na rozwiązań do równoważenia][Image3]
</center></span><span class="sxs-lookup"><span data-stu-id="38b47-320"><center>
![Metric Weight Example and Its Impact on Balancing Solutions][Image3]
</center></span></span>

<span data-ttu-id="38b47-321">W tym przykładzie istnieją cztery różne usługi, wszystkie wartości różnych raportowania dla dwóch różnych metryki MetricA i MetricB.</span><span class="sxs-lookup"><span data-stu-id="38b47-321">In this example, there are four different services, all reporting different values for two different metrics, MetricA and MetricB.</span></span> <span data-ttu-id="38b47-322">W przypadku jednego wszystkich usług definiowania MetricA jest jednym z najważniejszych (wagi = wysoki) i MetricB jako nieistotnych (wagi = niski).</span><span class="sxs-lookup"><span data-stu-id="38b47-322">In one case, all the services define MetricA is the most important one (Weight = High) and MetricB as unimportant (Weight = Low).</span></span> <span data-ttu-id="38b47-323">W związku z tym widzimy umieszczenie usługi w Menedżera zasobów klastra, więc MetricA lepiej jest rozmieszczana niż MetricB.</span><span class="sxs-lookup"><span data-stu-id="38b47-323">As a result, we see that the Cluster Resource Manager places the services so that MetricA is better balanced than MetricB.</span></span> <span data-ttu-id="38b47-324">"Lepiej zrównoważonym" oznacza, że MetricA ma mniejszy ma odchylenie standardowe niższe niż MetricB.</span><span class="sxs-lookup"><span data-stu-id="38b47-324">"Better balanced" means that MetricA has a lower has a lower standard deviation than MetricB.</span></span> <span data-ttu-id="38b47-325">W drugim przypadku możemy odwrotnej wag metryki.</span><span class="sxs-lookup"><span data-stu-id="38b47-325">In the second case, we reverse the metric weights.</span></span> <span data-ttu-id="38b47-326">W związku z tym Menedżer zasobów klastra zamienia usług A i B, korzystać z alokacji gdzie MetricB lepiej jest zrównoważonym niż MetricA.</span><span class="sxs-lookup"><span data-stu-id="38b47-326">As a result, the Cluster Resource Manager swaps services A and B to come up with an allocation where MetricB is better balanced than MetricA.</span></span>

> [!NOTE]
> <span data-ttu-id="38b47-327">Metryki wag określić, jak Menedżer zasobów klastra powinna saldo, ale nie podczas równoważenia powinno się zdarzyć.</span><span class="sxs-lookup"><span data-stu-id="38b47-327">Metric weights determine how the Cluster Resource Manager should balance, but not when balancing should happen.</span></span> <span data-ttu-id="38b47-328">Aby uzyskać więcej informacji na temat funkcji równoważenia, zapoznaj się z [w tym artykule](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="38b47-328">For more information on balancing, check out [this article](service-fabric-cluster-resource-manager-balancing.md)</span></span>
>

### <a name="global-metric-weights"></a><span data-ttu-id="38b47-329">Globalne wag metryki</span><span class="sxs-lookup"><span data-stu-id="38b47-329">Global metric weights</span></span>
<span data-ttu-id="38b47-330">Załóżmy, że ServiceA definiuje MetricA jako wagi wysokiej i ServiceB ustawia grubość MetricA niski lub Zero.</span><span class="sxs-lookup"><span data-stu-id="38b47-330">Let's say ServiceA defines MetricA as weight High, and ServiceB sets the weight for MetricA to Low or Zero.</span></span> <span data-ttu-id="38b47-331">Co to jest rzeczywista wagi, która kończy się używany?</span><span class="sxs-lookup"><span data-stu-id="38b47-331">What’s the actual weight that ends up getting used?</span></span>

<span data-ttu-id="38b47-332">Istnieje wiele wagi, śledzonych dla każdego metryki.</span><span class="sxs-lookup"><span data-stu-id="38b47-332">There are multiple weights that are tracked for every metric.</span></span> <span data-ttu-id="38b47-333">Pierwsza waga jest definiowane metryki podczas tworzenia usługi.</span><span class="sxs-lookup"><span data-stu-id="38b47-333">The first weight is the one defined for the metric when the service is created.</span></span> <span data-ttu-id="38b47-334">Inne waga jest globalne wagi, która jest obliczana automatycznie.</span><span class="sxs-lookup"><span data-stu-id="38b47-334">The other weight is a global weight, which is computed automatically.</span></span> <span data-ttu-id="38b47-335">Menedżer zasobów klastra używa oba te wagi podczas oceniania rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="38b47-335">The Cluster Resource Manager uses both these weights when scoring solutions.</span></span> <span data-ttu-id="38b47-336">Biorąc pod uwagę zarówno wag jest ważne.</span><span class="sxs-lookup"><span data-stu-id="38b47-336">Taking both weights into account is important.</span></span> <span data-ttu-id="38b47-337">Dzięki temu Menedżer zasobów klastra do zrównoważenia poszczególnych usług zgodnie z jego własnej priorytetów i upewnij się również poprawną alokację klastra jako całość.</span><span class="sxs-lookup"><span data-stu-id="38b47-337">This allows the Cluster Resource Manager to balance each service according to its own priorities, and also ensure that the cluster as a whole is allocated correctly.</span></span>

<span data-ttu-id="38b47-338">Co się stanie, jeśli Menedżera zasobów klastra nie zależy Ci na zachowaniu saldo zarówno globalne i lokalne?</span><span class="sxs-lookup"><span data-stu-id="38b47-338">What would happen if the Cluster Resource Manager didn’t care about both global and local balance?</span></span> <span data-ttu-id="38b47-339">Jest również łatwe do utworzenia rozwiązania, które są globalnie zrównoważonym, ale co spowodować równowadze zasobów niska dla poszczególnych usług.</span><span class="sxs-lookup"><span data-stu-id="38b47-339">Well, it’s easy to construct solutions that are globally balanced, but which result in poor resource balance for individual services.</span></span> <span data-ttu-id="38b47-340">W poniższym przykładzie załóżmy przyjrzeć się skonfigurowano tylko domyślne metryki usługi i zobacz, co się dzieje, gdy tylko globalne saldo jest uznawany za:</span><span class="sxs-lookup"><span data-stu-id="38b47-340">In the following example, let’s look at a service configured with just the default metrics, and see what happens when only global balance is considered:</span></span>

<span data-ttu-id="38b47-341"><center>
![Wpływ globalne rozwiązanie tylko][Image4]
</center></span><span class="sxs-lookup"><span data-stu-id="38b47-341"><center>
![The Impact of a Global Only Solution][Image4]
</center></span></span>

<span data-ttu-id="38b47-342">W przykładzie top w oparciu jedynie globalnego równoważenia w rzeczywistości jest rozmieszczana klastra jako całość.</span><span class="sxs-lookup"><span data-stu-id="38b47-342">In the top example based only on global balance, the cluster as a whole is indeed balanced.</span></span> <span data-ttu-id="38b47-343">Wszystkie węzły mają tej samej liczby kolory podstawowe i te same repliki łączna liczba.</span><span class="sxs-lookup"><span data-stu-id="38b47-343">All nodes have the same count of primaries and the same number total replicas.</span></span> <span data-ttu-id="38b47-344">Jednak jeśli przyjrzymy się rzeczywista wpływ tej alokacji nie jest tak dobre: utraty dowolnego węzła ma wpływ określonego obciążenia nieproporcjonalnie, ponieważ zajmuje całe jego kolory podstawowe.</span><span class="sxs-lookup"><span data-stu-id="38b47-344">However, if you look at the actual impact of this allocation it’s not so good: the loss of any node impacts a particular workload disproportionately, because it takes out all of its primaries.</span></span> <span data-ttu-id="38b47-345">Na przykład jeśli pierwszy węzeł nie powiedzie się trzy kolory podstawowe dla trzech różnych partycji usługi koło wszystkie zostałyby utracone.</span><span class="sxs-lookup"><span data-stu-id="38b47-345">For example, if the first node fails the three primaries for the three different partitions of the Circle service would all be lost.</span></span> <span data-ttu-id="38b47-346">Z drugiej strony usługi trójkąt i sześciokąt mają ich utratę repliki partycji.</span><span class="sxs-lookup"><span data-stu-id="38b47-346">Conversely, the Triangle and Hexagon services have their partitions lose a replica.</span></span> <span data-ttu-id="38b47-347">Powoduje to nie przerw w działaniu, oprócz posiadania odzyskać dół repliki.</span><span class="sxs-lookup"><span data-stu-id="38b47-347">This causes no disruption, other than having to recover the down replica.</span></span>

<span data-ttu-id="38b47-348">W przykładzie dolnej Menedżera zasobów klastra został rozesłany replik oparte na globalnym i dla usługi równoważenia.</span><span class="sxs-lookup"><span data-stu-id="38b47-348">In the bottom example, the Cluster Resource Manager has distributed the replicas based on both the global and per-service balance.</span></span> <span data-ttu-id="38b47-349">Podczas obliczania wyniku rozwiązanie zapewnia najbardziej wagi globalne rozwiązanie i części (można konfigurować) do poszczególnych usług.</span><span class="sxs-lookup"><span data-stu-id="38b47-349">When calculating the score of the solution it gives most of the weight to the global solution, and a (configurable) portion to individual services.</span></span> <span data-ttu-id="38b47-350">Globalne saldo metryka jest obliczany na podstawie średnią metryki wag z każdej usługi.</span><span class="sxs-lookup"><span data-stu-id="38b47-350">Global balance for a metric is calculated based on the average of the metric weights from each service.</span></span> <span data-ttu-id="38b47-351">Każda usługa jest rozmieszczana zgodnie z własną zdefiniowanych wag metryki.</span><span class="sxs-lookup"><span data-stu-id="38b47-351">Each service is balanced according to its own defined metric weights.</span></span> <span data-ttu-id="38b47-352">Daje to pewność, że usługi równoważenia między sobą zgodnie z ich własnych potrzeb.</span><span class="sxs-lookup"><span data-stu-id="38b47-352">This ensures that the services are balanced within themselves according to their own needs.</span></span> <span data-ttu-id="38b47-353">W związku z tym jeśli sam pierwszego węzła nie powiedzie się błędu jest dystrybuowana do wszystkich partycji wszystkich usług.</span><span class="sxs-lookup"><span data-stu-id="38b47-353">As a result, if the same first node fails the failure is distributed across all partitions of all services.</span></span> <span data-ttu-id="38b47-354">Wpływ na każdy jest taka sama.</span><span class="sxs-lookup"><span data-stu-id="38b47-354">The impact to each is the same.</span></span>

## <a name="next-steps"></a><span data-ttu-id="38b47-355">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="38b47-355">Next steps</span></span>
- <span data-ttu-id="38b47-356">Aby uzyskać więcej informacji na temat konfigurowania usługi [informacje na temat konfigurowania usługi](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span><span class="sxs-lookup"><span data-stu-id="38b47-356">For more information on configuring services, [Learn about configuring Services](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span></span>
- <span data-ttu-id="38b47-357">Definiowanie metryki defragmentacji jest jednym ze sposobów skonsolidować węzłów zamiast go rozkładanie obciążenia. Aby dowiedzieć się, jak skonfigurować defragmentacji, zajrzyj do [w tym artykule](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="38b47-357">Defining Defragmentation Metrics is one way to consolidate load on nodes instead of spreading it out. To learn how to configure defragmentation, refer to [this article](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span></span>
- <span data-ttu-id="38b47-358">Aby dowiedzieć się o jak Menedżer zasobów klastra zarządza i równoważy obciążenie w klastrze, zobacz artykuł na [równoważenia obciążenia](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="38b47-358">To find out about how the Cluster Resource Manager manages and balances load in the cluster, check out the article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="38b47-359">Rozpocznij od początku i [wprowadzenie do usługi sieci szkieletowej klastra Menedżera zasobów](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="38b47-359">Start from the beginning and [get an Introduction to the Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
- <span data-ttu-id="38b47-360">Koszt przeniesienia jest jednym ze sposobów sygnalizowania Menedżera zasobów do klastra, że niektórych usług są droższe do przeniesienia od innych.</span><span class="sxs-lookup"><span data-stu-id="38b47-360">Movement Cost is one way of signaling to the Cluster Resource Manager that certain services are more expensive to move than others.</span></span> <span data-ttu-id="38b47-361">Aby dowiedzieć się więcej na temat koszt przeniesienia, zapoznaj się [w tym artykule](service-fabric-cluster-resource-manager-movement-cost.md)</span><span class="sxs-lookup"><span data-stu-id="38b47-361">To learn more about movement cost, refer to [this article](service-fabric-cluster-resource-manager-movement-cost.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-cluster-layout-with-default-metrics.png
[Image2]:./media/service-fabric-cluster-resource-manager-metrics/Service-Fabric-Resource-Manager-Dynamic-Load-Reports.png
[Image3]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-metric-weights-impact.png
[Image4]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-global-vs-local-balancing.png
