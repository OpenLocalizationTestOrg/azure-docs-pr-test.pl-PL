---
title: "Azure Service Bus uwierzytelniania za pomocą sygnatury dostępu współdzielonego | Dokumentacja firmy Microsoft"
description: "Omówienie uwierzytelniania magistrali usług przy użyciu sygnatury dostępu współdzielonego Przegląd, szczegółowe informacje dotyczące uwierzytelniania sygnatury dostępu Współdzielonego za pomocą usługi Azure Service Bus."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/23/2017
ms.author: sethm
ms.openlocfilehash: a2760072acb7c62204759f3ec0d3cb9899460f2d
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/29/2017
---
# <a name="service-bus-authentication-with-shared-access-signatures"></a><span data-ttu-id="c9e1e-103">Uwierzytelnianie usługi Service Bus za pomocą sygnatury dostępu współdzielonego</span><span class="sxs-lookup"><span data-stu-id="c9e1e-103">Service Bus authentication with Shared Access Signatures</span></span>

<span data-ttu-id="c9e1e-104">*Sygnatury dostępu współdzielonego* (SAS) są mechanizmu podstawowego zabezpieczeń komunikatów usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-104">*Shared Access Signatures* (SAS) are the primary security mechanism for Service Bus messaging.</span></span> <span data-ttu-id="c9e1e-105">W tym artykule omówiono SAS, jak działają i sposobu ich używania w sposób niezależny od platformy.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-105">This article discusses SAS, how they work, and how to use them in a platform-agnostic way.</span></span>

<span data-ttu-id="c9e1e-106">Uwierzytelniania sygnatury dostępu Współdzielonego umożliwia aplikacjom uwierzytelnić się przy użyciu klawisza dostępu skonfigurowana w przestrzeni nazw lub komunikatów jednostki (kolejka lub temat), z którym są skojarzone określonych praw usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-106">SAS authentication enables applications to authenticate to Service Bus using an access key configured on the namespace, or on the messaging entity (queue or topic) with which specific rights are associated.</span></span> <span data-ttu-id="c9e1e-107">Można następnie użyć tego klucza do wygenerowania tokenu sygnatury dostępu Współdzielonego, której klienci mogą z kolei używać do uwierzytelniania usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-107">You can then use this key to generate a SAS token that clients can in turn use to authenticate to Service Bus.</span></span>

<span data-ttu-id="c9e1e-108">Obsługę uwierzytelniania sygnatury dostępu Współdzielonego znajduje się w zestawie SDK Azure w wersji 2.0 lub nowszej.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-108">SAS authentication support is included in the Azure SDK version 2.0 and later.</span></span>

## <a name="overview-of-sas"></a><span data-ttu-id="c9e1e-109">Omówienie SAS</span><span class="sxs-lookup"><span data-stu-id="c9e1e-109">Overview of SAS</span></span>

<span data-ttu-id="c9e1e-110">Udostępniony sygnatur dostępu są mechanizmu uwierzytelniania na podstawie bezpiecznego wartości skrótu SHA-256 lub identyfikatorów URI.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-110">Shared Access Signatures are an authentication mechanism based on SHA-256 secure hashes or URIs.</span></span> <span data-ttu-id="c9e1e-111">Jest bardzo zaawansowanym mechanizmem, który jest używany przez wszystkie usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-111">SAS is an extremely powerful mechanism that is used by all Service Bus services.</span></span> <span data-ttu-id="c9e1e-112">W rzeczywistości SAS ma dwa składniki: *udostępnionych zasad dostępu* i *udostępnionego sygnatury dostępu* (często nazywane *tokenu*).</span><span class="sxs-lookup"><span data-stu-id="c9e1e-112">In actual use, SAS has two components: a *shared access policy* and a *Shared Access Signature* (often called a *token*).</span></span>

<span data-ttu-id="c9e1e-113">Skojarzenia zabezpieczeń uwierzytelniania w usłudze Service Bus obejmuje konfigurację klucza kryptograficznego ze skojarzonymi prawami do zasobu usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-113">SAS authentication in Service Bus involves the configuration of a cryptographic key with associated rights on a Service Bus resource.</span></span> <span data-ttu-id="c9e1e-114">Klienci oświadczeń dostęp do zasobów usługi Service Bus, z uwzględnieniem tokenu sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-114">Clients claim access to Service Bus resources by presenting a SAS token.</span></span> <span data-ttu-id="c9e1e-115">Token ten składa się z identyfikatora URI uzyskują dostęp do zasobu, a wygaśnięcia podpisany przy użyciu klucza skonfigurowany.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-115">This token consists of the resource URI being accessed, and an expiry signed with the configured key.</span></span>

<span data-ttu-id="c9e1e-116">Można konfigurować reguły autoryzacji sygnatura dostępu współdzielonego usługi Service Bus [przekazuje](service-bus-fundamentals-hybrid-solutions.md#relays), [kolejek](service-bus-fundamentals-hybrid-solutions.md#queues), i [tematy](service-bus-fundamentals-hybrid-solutions.md#topics).</span><span class="sxs-lookup"><span data-stu-id="c9e1e-116">You can configure Shared Access Signature authorization rules on Service Bus [relays](service-bus-fundamentals-hybrid-solutions.md#relays), [queues](service-bus-fundamentals-hybrid-solutions.md#queues), and [topics](service-bus-fundamentals-hybrid-solutions.md#topics).</span></span>

<span data-ttu-id="c9e1e-117">Uwierzytelniania sygnatury dostępu Współdzielonego przy użyciu następujących elementów:</span><span class="sxs-lookup"><span data-stu-id="c9e1e-117">SAS authentication uses the following elements:</span></span>

* <span data-ttu-id="c9e1e-118">[Reguły autoryzacji dostępu do udostępnionych](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule): A 256-bitowego szyfrowania klucza podstawowego w reprezentacji Base64, opcjonalny klucz pomocniczy i nazwę klucza i skojarzonymi prawami (kolekcja *nasłuchiwania*, *wysyłania*, lub *Zarządzaj* praw).</span><span class="sxs-lookup"><span data-stu-id="c9e1e-118">[Shared Access authorization rule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule): A 256-bit primary cryptographic key in Base64 representation, an optional secondary key, and a key name and associated rights (a collection of *Listen*, *Send*, or *Manage* rights).</span></span>
* <span data-ttu-id="c9e1e-119">[Udostępnione sygnatury dostępu](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) tokenu: wygenerowanych przy użyciu HMAC-SHA256 ciągu zasobu, składające się z identyfikatora URI zasobu, który jest dostępny i wygaśnięcia z klucza kryptograficznego.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-119">[Shared Access Signature](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) token: Generated using the HMAC-SHA256 of a resource string, consisting of the URI of the resource that is accessed and an expiry, with the cryptographic key.</span></span> <span data-ttu-id="c9e1e-120">Podpis i inne elementy opisane w poniższych sekcjach są sformatowane jako ciąg do utworzenia tokenu sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-120">The signature and other elements described in the following sections are formatted into a string to form the SAS token.</span></span>

## <a name="shared-access-policy"></a><span data-ttu-id="c9e1e-121">Zasady dostępu współużytkowanego</span><span class="sxs-lookup"><span data-stu-id="c9e1e-121">Shared access policy</span></span>

<span data-ttu-id="c9e1e-122">Ważne jest, aby zrozumieć temat sygnatury dostępu Współdzielonego jest, że rozpoczyna się od zasad.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-122">An important thing to understand about SAS is that it starts with a policy.</span></span> <span data-ttu-id="c9e1e-123">Dla każdej zasady zdecydujesz się na trzy informacje: **nazwa**, **zakres**, i **uprawnienia**.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-123">For each policy, you decide on three pieces of information: **name**, **scope**, and **permissions**.</span></span> <span data-ttu-id="c9e1e-124">**Nazwa** jest po prostu; unikatową nazwę w ramach tego zakresu.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-124">The **name** is just that; a unique name within that scope.</span></span> <span data-ttu-id="c9e1e-125">Zakres jest dość proste: jest identyfikator URI zasobu.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-125">The scope is easy enough: it's the URI of the resource in question.</span></span> <span data-ttu-id="c9e1e-126">W przypadku przestrzeni nazw usługi Service Bus zakres jest w pełni kwalifikowaną nazwę (FQDN), takich jak `https://<yournamespace>.servicebus.windows.net/`.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-126">For a Service Bus namespace, the scope is the fully qualified domain name (FQDN), such as `https://<yournamespace>.servicebus.windows.net/`.</span></span>

<span data-ttu-id="c9e1e-127">Przede wszystkim wyjaśnień uprawnienia dostępne dla zasad:</span><span class="sxs-lookup"><span data-stu-id="c9e1e-127">The available permissions for a policy are largely self-explanatory:</span></span>

* <span data-ttu-id="c9e1e-128">Send</span><span class="sxs-lookup"><span data-stu-id="c9e1e-128">Send</span></span>
* <span data-ttu-id="c9e1e-129">Nasłuchiwanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-129">Listen</span></span>
* <span data-ttu-id="c9e1e-130">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-130">Manage</span></span>

<span data-ttu-id="c9e1e-131">Po utworzeniu zasad jest przypisany *klucza podstawowego* i *klucza pomocniczego*.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-131">After you create the policy, it is assigned a *Primary Key* and a *Secondary Key*.</span></span> <span data-ttu-id="c9e1e-132">Są to silną kryptograficznie kluczy.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-132">These are cryptographically strong keys.</span></span> <span data-ttu-id="c9e1e-133">Nie utracone lub ich wyciek — zawsze będzie dostępna w [portalu Azure][Azure portal].</span><span class="sxs-lookup"><span data-stu-id="c9e1e-133">Don't lose them or leak them - they'll always be available in the [Azure portal][Azure portal].</span></span> <span data-ttu-id="c9e1e-134">Możesz użyć dowolnej wygenerowane klucze i można je odtworzyć w dowolnym momencie.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-134">You can use either of the generated keys, and you can regenerate them at any time.</span></span> <span data-ttu-id="c9e1e-135">Jednak jeśli ponownie wygenerować lub zmienić klucza podstawowego w zasadach, żadnych sygnatur dostępu współdzielonego z niej utworzyć zostaną unieważnione.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-135">However, if you regenerate or change the primary key in the policy, any Shared Access Signatures created from it will be invalidated.</span></span>

<span data-ttu-id="c9e1e-136">Po utworzeniu przestrzeni nazw usługi Service Bus automatycznie utworzone zasady dla całej przestrzeni nazw o nazwie **RootManageSharedAccessKey**, a ta zasada ma wszystkie uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-136">When you create a Service Bus namespace, a policy is automatically created for the entire namespace called **RootManageSharedAccessKey**, and this policy has all permissions.</span></span> <span data-ttu-id="c9e1e-137">Nie Zaloguj się jako **głównego**, dlatego nie używaj tej zasady, chyba że naprawdę powody.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-137">You don't log on as **root**, so don't use this policy unless there's a really good reason.</span></span> <span data-ttu-id="c9e1e-138">Możesz utworzyć dodatkowe zasady w **Konfiguruj** kartę dla przestrzeni nazw w portalu.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-138">You can create additional policies in the **Configure** tab for the namespace in the portal.</span></span> <span data-ttu-id="c9e1e-139">Należy zauważyć, że poziomu drzewa pojedynczego w usłudze Service Bus (przestrzeń nazw, kolejki, itp.) może mieć tylko do 12 zasady do niego dołączony.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-139">It's important to note that a single tree level in Service Bus (namespace, queue, etc.) can only have up to 12 policies attached to it.</span></span>

## <a name="configuration-for-shared-access-signature-authentication"></a><span data-ttu-id="c9e1e-140">Konfiguracja uwierzytelniania sygnatura dostępu współdzielonego</span><span class="sxs-lookup"><span data-stu-id="c9e1e-140">Configuration for Shared Access Signature authentication</span></span>
<span data-ttu-id="c9e1e-141">Można skonfigurować [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) reguły w przestrzeni nazw usługi Service Bus, kolejki i tematy.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-141">You can configure the [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) rule on Service Bus namespaces, queues, or topics.</span></span> <span data-ttu-id="c9e1e-142">Konfigurowanie [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) usługi Service Bus subskrypcji nie jest obecnie obsługiwane, ale zasady skonfigurowane w przestrzeni nazw lub temat umożliwia bezpieczny dostęp do subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-142">Configuring a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) on a Service Bus subscription is currently not supported, but you can use rules configured on a namespace or topic to secure access to subscriptions.</span></span> <span data-ttu-id="c9e1e-143">Dla przykładu pracy, która ilustruje tę procedurę, zobacz [uwierzytelniania przy użyciu dostępu sygnatury dostępu Współdzielonego z subskrypcjami magistrali usługi](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c) próbki.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-143">For a working sample that illustrates this procedure, see the [Using Shared Access Signature (SAS) authentication with Service Bus Subscriptions](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c) sample.</span></span>

<span data-ttu-id="c9e1e-144">Maksymalnie 12 tych zasad można skonfigurować dla przestrzeni nazw usługi Service Bus, kolejka lub temat.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-144">A maximum of 12 such rules can be configured on a Service Bus namespace, queue, or topic.</span></span> <span data-ttu-id="c9e1e-145">Zasady, które są skonfigurowane w przestrzeni nazw usługi Service Bus dotyczą wszystkich jednostek w tej przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-145">Rules that are configured on a Service Bus namespace apply to all entities in that namespace.</span></span>

![SYGNATURY DOSTĘPU WSPÓŁDZIELONEGO](./media/service-bus-sas/service-bus-namespace.png)

<span data-ttu-id="c9e1e-147">Na tym rysunku *manageRuleNS*, *sendRuleNS*, i *listenRuleNS* reguł autoryzacji dotyczą zarówno kolejka K1 i tematu T1, podczas gdy *listenRuleQ*  i *sendRuleQ* mają zastosowanie tylko do kolejki K1 i *sendRuleT* ma zastosowanie tylko do tematu T1.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-147">In this figure, the *manageRuleNS*, *sendRuleNS*, and *listenRuleNS* authorization rules apply to both queue Q1 and topic T1, while *listenRuleQ* and *sendRuleQ* apply only to queue Q1 and *sendRuleT* applies only to topic T1.</span></span>

<span data-ttu-id="c9e1e-148">Parametry klucza [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) są następujące:</span><span class="sxs-lookup"><span data-stu-id="c9e1e-148">The key parameters of a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) are as follows:</span></span>

| <span data-ttu-id="c9e1e-149">Parametr</span><span class="sxs-lookup"><span data-stu-id="c9e1e-149">Parameter</span></span> | <span data-ttu-id="c9e1e-150">Opis</span><span class="sxs-lookup"><span data-stu-id="c9e1e-150">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c9e1e-151">*Nazwa klucza*</span><span class="sxs-lookup"><span data-stu-id="c9e1e-151">*KeyName*</span></span> |<span data-ttu-id="c9e1e-152">Ciąg opisujący reguły autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-152">A string that describes the authorization rule.</span></span> |
| <span data-ttu-id="c9e1e-153">*PrimaryKey*</span><span class="sxs-lookup"><span data-stu-id="c9e1e-153">*PrimaryKey*</span></span> |<span data-ttu-id="c9e1e-154">Algorytmem Base64 256-bitowego klucza podstawowego dla podpisywania i sprawdzania poprawności tokenu sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-154">A base64-encoded 256-bit primary key for signing and validating the SAS token.</span></span> |
| <span data-ttu-id="c9e1e-155">*Klucz pomocniczy*</span><span class="sxs-lookup"><span data-stu-id="c9e1e-155">*SecondaryKey*</span></span> |<span data-ttu-id="c9e1e-156">Algorytmem Base64 256-bitowego klucza pomocniczego do podpisywania i sprawdzania poprawności tokenu sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-156">A base64-encoded 256-bit secondary key for signing and validating the SAS token.</span></span> |
| <span data-ttu-id="c9e1e-157">*AccessRights*</span><span class="sxs-lookup"><span data-stu-id="c9e1e-157">*AccessRights*</span></span> |<span data-ttu-id="c9e1e-158">Lista prawa dostępu przyznane przez regułę autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-158">A list of access rights granted by the authorization rule.</span></span> <span data-ttu-id="c9e1e-159">Te prawa można dowolną kolekcję nasłuchiwania, wysyłania i Zarządzanie prawami.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-159">These rights can be any collection of Listen, Send, and Manage rights.</span></span> |

<span data-ttu-id="c9e1e-160">Po zainicjowaniu obsługi przestrzeni nazw usługi Service Bus, [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), z [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) ustawioną **RootManageSharedAccessKey**, domyślnie zostanie utworzona.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-160">When a Service Bus namespace is provisioned, a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), with [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) set to **RootManageSharedAccessKey**, is created by default.</span></span>

## <a name="generate-a-shared-access-signature-token"></a><span data-ttu-id="c9e1e-161">Generowanie sygnaturą dostępu współdzielonego (token)</span><span class="sxs-lookup"><span data-stu-id="c9e1e-161">Generate a Shared Access Signature (token)</span></span>

<span data-ttu-id="c9e1e-162">Same zasady nie jest tokenem dostępu dla usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-162">The policy itself is not the access token for Service Bus.</span></span> <span data-ttu-id="c9e1e-163">Jest obiekt, z której token dostępu jest generowany — przy użyciu zarówno klucz podstawowy lub pomocniczy.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-163">It is the object from which the access token is generated - using either the primary or secondary key.</span></span> <span data-ttu-id="c9e1e-164">Każdy klient, który ma dostęp do kluczy podpisywania określona w regule autoryzacji dostępu współdzielonego, można wygenerować tokenu sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-164">Any client that has access to the signing keys specified in the shared access authorization rule can generate the SAS token.</span></span> <span data-ttu-id="c9e1e-165">Token jest generowany przez dokładnie obsługuje tworzenie ciąg w następującym formacie:</span><span class="sxs-lookup"><span data-stu-id="c9e1e-165">The token is generated by carefully crafting a string in the following format:</span></span>

```
SharedAccessSignature sig=<signature-string>&se=<expiry>&skn=<keyName>&sr=<URL-encoded-resourceURI>
```

<span data-ttu-id="c9e1e-166">Gdzie `signature-string` jest skrótu SHA-256 zakresu tokenu (**zakres** zgodnie z opisem w poprzedniej sekcji) z znaku CRLF dołączany i czas wygaśnięcia (w sekundach od epoka: `00:00:00 UTC` na 1 stycznia 1970).</span><span class="sxs-lookup"><span data-stu-id="c9e1e-166">Where `signature-string` is the SHA-256 hash of the scope of the token (**scope** as described in the previous section) with a CRLF appended and an expiry time (in seconds since the epoch: `00:00:00 UTC` on 1 January 1970).</span></span> 

> [!NOTE]
> <span data-ttu-id="c9e1e-167">Aby uniknąć czas wygaśnięcia tokenu krótkie, zaleca się kodowania wartość czasu wygaśnięcia jako liczbę całkowitą bez znaku przynajmniej 32-bitowej lub najlepiej całkowitą long (64-bitowe).</span><span class="sxs-lookup"><span data-stu-id="c9e1e-167">To avoid a short token expiry time, it is recommended that you encode the expiry time value as at least a 32-bit unsigned integer, or preferably a long (64-bit) integer.</span></span>  
> 
> 

<span data-ttu-id="c9e1e-168">Skrót wygląda podobnie do poniższego kodu pseudo i zwraca 32 bajtów.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-168">The hash looks similar to the following pseudo code and returns 32 bytes.</span></span>

```
SHA-256('https://<yournamespace>.servicebus.windows.net/'+'\n'+ 1438205742)
```

<span data-ttu-id="c9e1e-169">Wartości nie mieszane znajdują się w **SharedAccessSignature** ciąg, dzięki czemu odbiorcy można obliczyć skrótu z takimi samymi parametrami, należy upewnić się, że zwracany jest ten sam rezultat.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-169">The non-hashed values are in the **SharedAccessSignature** string so that the recipient can compute the hash with the same parameters, to be sure that it returns the same result.</span></span> <span data-ttu-id="c9e1e-170">Identyfikator URI określa zakres, a nazwa klucza identyfikuje zasady, która ma być używany do obliczania skrótu.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-170">The URI specifies the scope, and the key name identifies the policy to be used to compute the hash.</span></span> <span data-ttu-id="c9e1e-171">Jest to ważne z punktu widzenia zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-171">This is important from a security standpoint.</span></span> <span data-ttu-id="c9e1e-172">Jeśli podpis nie odpowiada, której obliczana adresata (usługi Service Bus), nastąpi odmowa dostępu.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-172">If the signature doesn't match that which the recipient (Service Bus) calculates, then access is denied.</span></span> <span data-ttu-id="c9e1e-173">W tym momencie można się, że nadawca ma dostęp do klucza i powinny mieć przyznane prawa określonym w zasadach.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-173">At this point you can be sure that the sender had access to the key and should be granted the rights specified in the policy.</span></span>

<span data-ttu-id="c9e1e-174">Należy pamiętać, że należy używać zakodowany identyfikator URI zasobu dla tej operacji.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-174">Note that you should use the encoded resource URI for this operation.</span></span> <span data-ttu-id="c9e1e-175">Identyfikator URI zasobu jest pełny identyfikator URI zasobu usługi Service Bus, do którego dostęp jest określona.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-175">The resource URI is the full URI of the Service Bus resource to which access is claimed.</span></span> <span data-ttu-id="c9e1e-176">Na przykład `http://<namespace>.servicebus.windows.net/<entityPath>` lub `sb://<namespace>.servicebus.windows.net/<entityPath>`, `http://contoso.servicebus.windows.net/contosoTopics/T1/Subscriptions/S3`.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-176">For example, `http://<namespace>.servicebus.windows.net/<entityPath>` or `sb://<namespace>.servicebus.windows.net/<entityPath>`; that is, `http://contoso.servicebus.windows.net/contosoTopics/T1/Subscriptions/S3`.</span></span>

<span data-ttu-id="c9e1e-177">Reguły autoryzacji dostępu współdzielonego, używany do podpisywania musi być skonfigurowany w jednostce określona przez ten identyfikator URI lub za pomocą jednej z jej nadrzędnych hierarchicznej.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-177">The shared access authorization rule used for signing must be configured on the entity specified by this URI, or by one of its hierarchical parents.</span></span> <span data-ttu-id="c9e1e-178">Na przykład `http://contoso.servicebus.windows.net/contosoTopics/T1` lub `http://contoso.servicebus.windows.net` w poprzednim przykładzie.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-178">For example, `http://contoso.servicebus.windows.net/contosoTopics/T1` or `http://contoso.servicebus.windows.net` in the previous example.</span></span>

<span data-ttu-id="c9e1e-179">Token sygnatury dostępu Współdzielonego jest prawidłowa dla wszystkich zasobów w ramach `<resourceURI>` używane w `signature-string`.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-179">A SAS token is valid for all resources under the `<resourceURI>` used in the `signature-string`.</span></span>

<span data-ttu-id="c9e1e-180">[KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) w sygnatury dostępu Współdzielonego token odnosi się do **keyName** reguły autoryzacji dostępu współdzielonego służący do generowania tokenu.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-180">The [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) in the SAS token refers to the **keyName** of the shared access authorization rule used to generate the token.</span></span>

<span data-ttu-id="c9e1e-181">*Adresu URL-zakodowane resourceURI* musi być taki sam jak identyfikator URI używany w ciągu na do logowania podczas obliczania sygnatury.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-181">The *URL-encoded-resourceURI* must be the same as the URI used in the string-to-sign during the computation of the signature.</span></span> <span data-ttu-id="c9e1e-182">Powinien być [procent, kodowane](https://msdn.microsoft.com/library/4fkewx0t.aspx).</span><span class="sxs-lookup"><span data-stu-id="c9e1e-182">It should be [percent-encoded](https://msdn.microsoft.com/library/4fkewx0t.aspx).</span></span>

<span data-ttu-id="c9e1e-183">Zalecane jest okresowe ponowne generowanie kluczy używanych w [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) obiektu.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-183">It is recommended that you periodically regenerate the keys used in the [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object.</span></span> <span data-ttu-id="c9e1e-184">Zwykle należy używać aplikacji [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) do generowania tokenu sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-184">Applications should generally use the [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) to generate a SAS token.</span></span> <span data-ttu-id="c9e1e-185">Podczas ponownego generowania kluczy, należy zastąpić [klucz pomocniczy](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) z stary serwer podstawowy, a dla klucza wygenerowanie nowego klucza jako klucz podstawowy.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-185">When regenerating the keys, you should replace the [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) with the old primary key, and generate a new key as the new primary key.</span></span> <span data-ttu-id="c9e1e-186">Dzięki temu można kontynuować z użyciem tokenów do autoryzacji, które zostały wydane z starego klucza podstawowego, a które nie zostały jeszcze wygasnąć.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-186">This enables you to continue using tokens for authorization that were issued with the old primary key, and that have not yet expired.</span></span>

<span data-ttu-id="c9e1e-187">Jeśli klucz zostanie naruszony, należy Odwołaj klucze można odtworzyć zarówno [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) i [klucz pomocniczy](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) z [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), zastępując je za pomocą nowych kluczy.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-187">If a key is compromised and you have to revoke the keys, you can regenerate both the [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) and the [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) of a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), replacing them with new keys.</span></span> <span data-ttu-id="c9e1e-188">Ta procedura powoduje unieważnienie wszystkie tokeny podpisane przy użyciu starego klawiszy.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-188">This procedure invalidates all tokens signed with the old keys.</span></span>

## <a name="how-to-use-shared-access-signature-authentication-with-service-bus"></a><span data-ttu-id="c9e1e-189">Jak korzystać z usługi Service Bus uwierzytelniania sygnatura dostępu współdzielonego</span><span class="sxs-lookup"><span data-stu-id="c9e1e-189">How to use Shared Access Signature authentication with Service Bus</span></span>

<span data-ttu-id="c9e1e-190">Następujące scenariusze obejmują konfigurowanie reguł autoryzacji, generowanie tokeny sygnatury dostępu Współdzielonego i uwierzytelnianiem klienta.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-190">The following scenarios include configuration of authorization rules, generation of SAS tokens, and client authorization.</span></span>

<span data-ttu-id="c9e1e-191">Dla pełnej pracy przykładowej aplikacji usługi Service Bus, która ilustruje konfiguracji i używa autoryzacji sygnatury dostępu Współdzielonego, zobacz [sygnatura dostępu współdzielonego uwierzytelniania za pomocą usługi Service Bus](http://code.msdn.microsoft.com/Shared-Access-Signature-0a88adf8).</span><span class="sxs-lookup"><span data-stu-id="c9e1e-191">For a full working sample of a Service Bus application that illustrates the configuration and uses SAS authorization, see [Shared Access Signature authentication with Service Bus](http://code.msdn.microsoft.com/Shared-Access-Signature-0a88adf8).</span></span> <span data-ttu-id="c9e1e-192">Powiązane próbki, która ilustruje korzystanie z reguł autoryzacji sygnatury dostępu Współdzielonego skonfigurowany dla przestrzeni nazw lub tematy, aby zabezpieczyć subskrypcje usługi Service Bus jest dostępnych tutaj: [uwierzytelniania przy użyciu dostępu sygnatury dostępu Współdzielonego z subskrypcjami magistrali usługi](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c).</span><span class="sxs-lookup"><span data-stu-id="c9e1e-192">A related sample that illustrates the use of SAS authorization rules configured on namespaces or topics to secure Service Bus subscriptions is available here: [Using Shared Access Signature (SAS) authentication with Service Bus Subscriptions](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c).</span></span>

## <a name="access-shared-access-authorization-rules-on-a-namespace"></a><span data-ttu-id="c9e1e-193">Reguły dostępu do udostępnionych autoryzacji dostępu na przestrzeni nazw</span><span class="sxs-lookup"><span data-stu-id="c9e1e-193">Access Shared Access Authorization rules on a namespace</span></span>

<span data-ttu-id="c9e1e-194">Operacje w głównej przestrzeni nazw usługi Service Bus wymagają uwierzytelniania certyfikatów.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-194">Operations on the Service Bus namespace root require certificate authentication.</span></span> <span data-ttu-id="c9e1e-195">Należy przekazać certyfikatu zarządzania dla subskrypcji platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-195">You must upload a management certificate for your Azure subscription.</span></span> <span data-ttu-id="c9e1e-196">Aby przekazać certyfikat zarządzania, wykonaj kroki [tutaj](../cloud-services/cloud-services-configure-ssl-certificate-portal.md#step-3-upload-a-certificate)za pomocą [portalu Azure][Azure portal].</span><span class="sxs-lookup"><span data-stu-id="c9e1e-196">To upload a management certificate, follow the steps [here](../cloud-services/cloud-services-configure-ssl-certificate-portal.md#step-3-upload-a-certificate), using the [Azure portal][Azure portal].</span></span> <span data-ttu-id="c9e1e-197">Aby uzyskać więcej informacji o certyfikatach zarządzania platformy Azure, zobacz [Omówienie certyfikatów Azure](../cloud-services/cloud-services-certs-create.md#what-are-management-certificates).</span><span class="sxs-lookup"><span data-stu-id="c9e1e-197">For more information about Azure management certificates, see the [Azure certificates overview](../cloud-services/cloud-services-certs-create.md#what-are-management-certificates).</span></span>

<span data-ttu-id="c9e1e-198">Punkt końcowy do uzyskiwania dostępu do reguł autoryzacji dostępu współdzielonego w przestrzeni nazw usługi Service Bus jest następujący:</span><span class="sxs-lookup"><span data-stu-id="c9e1e-198">The endpoint for accessing shared access authorization rules on a Service Bus namespace is as follows:</span></span>

```http
https://management.core.windows.net/{subscriptionId}/services/ServiceBus/namespaces/{namespace}/AuthorizationRules/
```

<span data-ttu-id="c9e1e-199">Aby utworzyć [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) obiektu w przestrzeni nazw usługi Service Bus, wykonaj operację POST na ten punkt końcowy z informacjami o reguły zserializowanym w formacie JSON i XML.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-199">To create a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object on a Service Bus namespace, execute a POST operation on this endpoint with the rule information serialized as JSON or XML.</span></span> <span data-ttu-id="c9e1e-200">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="c9e1e-200">For example:</span></span>

```csharp
// Base address for accessing authorization rules on a namespace
string baseAddress = @"https://management.core.windows.net/<subscriptionId>/services/ServiceBus/namespaces/<namespace>/AuthorizationRules/";

// Configure authorization rule with base64-encoded 256-bit key and Send rights
var sendRule = new SharedAccessAuthorizationRule("contosoSendAll",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Send });

// Operations on the Service Bus namespace root require certificate authentication.
WebRequestHandler handler = new WebRequestHandler
{
    ClientCertificateOptions = ClientCertificateOption.Manual
};
// Access the management certificate by subject name
handler.ClientCertificates.Add(GetCertificate(<certificateSN>));

HttpClient httpClient = new HttpClient(handler)
{
    BaseAddress = new Uri(baseAddress)
};
httpClient.DefaultRequestHeaders.Accept.Add(
    new MediaTypeWithQualityHeaderValue("application/json"));
httpClient.DefaultRequestHeaders.Add("x-ms-version", "2015-01-01");

// Execute a POST operation on the baseAddress above to create an auth rule
var postResult = httpClient.PostAsJsonAsync("", sendRule).Result;
```

<span data-ttu-id="c9e1e-201">Podobnie użyj operacji pobrania w punkcie końcowym, aby odczytać reguł autoryzacji skonfigurowane w przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-201">Similarly, use a GET operation on the endpoint to read the authorization rules configured on the namespace.</span></span>

<span data-ttu-id="c9e1e-202">Aby zaktualizować lub usunąć regułę autoryzacji określonych, użyj następującego punktu końcowego:</span><span class="sxs-lookup"><span data-stu-id="c9e1e-202">To update or delete a specific authorization rule, use the following endpoint:</span></span>

```http
https://management.core.windows.net/{subscriptionId}/services/ServiceBus/namespaces/{namespace}/AuthorizationRules/{KeyName}
```

## <a name="access-shared-access-authorization-rules-on-an-entity"></a><span data-ttu-id="c9e1e-203">Reguły dostępu do udostępnionych autoryzacji dostępu na jednostkę</span><span class="sxs-lookup"><span data-stu-id="c9e1e-203">Access Shared Access Authorization rules on an entity</span></span>

<span data-ttu-id="c9e1e-204">Dostęp można uzyskać [Microsoft.ServiceBus.Messaging.SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) skonfigurowany dla kolejki usługi Service Bus lub temat za pośrednictwem obiektu [AuthorizationRules](/dotnet/api/microsoft.servicebus.messaging.authorizationrules) kolekcji w odpowiadającego [QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription) lub [TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription).</span><span class="sxs-lookup"><span data-stu-id="c9e1e-204">You can access a [Microsoft.ServiceBus.Messaging.SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object configured on a Service Bus queue or topic through the [AuthorizationRules](/dotnet/api/microsoft.servicebus.messaging.authorizationrules) collection in the corresponding [QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription) or [TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription).</span></span>

<span data-ttu-id="c9e1e-205">Poniższy kod przedstawia sposób dodawania reguł autoryzacji dla kolejki.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-205">The following code shows how to add authorization rules for a queue.</span></span>

```csharp
// Create an instance of NamespaceManager for the operation
NamespaceManager nsm = NamespaceManager.CreateFromConnectionString(
    <connectionString> );
QueueDescription qd = new QueueDescription( <qPath> );

// Create a rule with send rights with keyName as "contosoQSendKey"
// and add it to the queue description.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoSendKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Send }));

// Create a rule with listen rights with keyName as "contosoQListenKey"
// and add it to the queue description.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoQListenKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Listen }));

// Create a rule with manage rights with keyName as "contosoQManageKey"
// and add it to the queue description.
// A rule with manage rights must also have send and receive rights.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoQManageKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] {AccessRights.Manage, AccessRights.Listen, AccessRights.Send }));

// Create the queue.
nsm.CreateQueue(qd);
```

## <a name="use-shared-access-signature-authorization"></a><span data-ttu-id="c9e1e-206">Użyj autoryzacji sygnatura dostępu współdzielonego</span><span class="sxs-lookup"><span data-stu-id="c9e1e-206">Use Shared Access Signature authorization</span></span>

<span data-ttu-id="c9e1e-207">Aplikacje z bibliotekami .NET magistrali usług przy użyciu zestawu .NET SDK usługi Azure mogą używać autoryzacji sygnatury dostępu Współdzielonego za pośrednictwem [SharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) klasy.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-207">Applications using the Azure .NET SDK with the Service Bus .NET libraries can use SAS authorization through the [SharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) class.</span></span> <span data-ttu-id="c9e1e-208">Poniższy kod przedstawia użycie dostawcy tokenów do wysyłania wiadomości do kolejki usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-208">The following code illustrates the use of the token provider to send messages to a Service Bus queue.</span></span>

```csharp
Uri runtimeUri = ServiceBusEnvironment.CreateServiceUri("sb",
    <yourServiceNamespace>, string.Empty);
MessagingFactory mf = MessagingFactory.Create(runtimeUri,
    TokenProvider.CreateSharedAccessSignatureTokenProvider(keyName, key));
QueueClient sendClient = mf.CreateQueueClient(qPath);

//Sending hello message to queue.
BrokeredMessage helloMessage = new BrokeredMessage("Hello, Service Bus!");
helloMessage.MessageId = "SAS-Sample-Message";
sendClient.Send(helloMessage);
```

<span data-ttu-id="c9e1e-209">Aplikacje umożliwia także SAS do uwierzytelniania przy użyciu ciągu połączenia SAS w metodach, które akceptują parametrów połączenia.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-209">Applications can also use SAS for authentication by using a SAS connection string in methods that accept connection strings.</span></span>

<span data-ttu-id="c9e1e-210">Należy pamiętać, że do autoryzacji sygnatury dostępu Współdzielonego za pomocą przekaźników usługi Service Bus, można użyć klawiszy SAS skonfigurowane w przestrzeni nazw usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-210">Note that to use SAS authorization with Service Bus relays, you can use SAS keys configured on the Service Bus namespace.</span></span> <span data-ttu-id="c9e1e-211">Jeśli utworzysz jawnie przekaźnik w przestrzeni nazw ([NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) z [RelayDescription](/dotnet/api/microsoft.servicebus.messaging.relaydescription)) obiektu, można ustawić tylko przekazywania tej zasady sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-211">If you explicitly create a relay on the namespace ([NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) with a [RelayDescription](/dotnet/api/microsoft.servicebus.messaging.relaydescription)) object, you can set the SAS rules just for that relay.</span></span> <span data-ttu-id="c9e1e-212">Aby używać autoryzacji sygnatury dostępu Współdzielonego z subskrypcji usługi Service Bus, służy skonfigurowane na przestrzeni nazw usługi Service Bus lub na temat kluczy SAS.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-212">To use SAS authorization with Service Bus subscriptions, you can use SAS keys configured on a Service Bus namespace or on a topic.</span></span>

## <a name="use-the-shared-access-signature-at-http-level"></a><span data-ttu-id="c9e1e-213">Użyj sygnatura dostępu współdzielonego (na poziomie protokołu HTTP)</span><span class="sxs-lookup"><span data-stu-id="c9e1e-213">Use the Shared Access Signature (at HTTP level)</span></span>

<span data-ttu-id="c9e1e-214">Teraz, gdy wiesz, jak utworzyć sygnatury dostępu współdzielonego dla dowolnego jednostek usługi Service Bus, możesz przystąpić do wykonania HTTP POST:</span><span class="sxs-lookup"><span data-stu-id="c9e1e-214">Now that you know how to create Shared Access Signatures for any entities in Service Bus, you are ready to perform an HTTP POST:</span></span>

```http
POST https://<yournamespace>.servicebus.windows.net/<yourentity>/messages
Content-Type: application/json
Authorization: SharedAccessSignature sr=https%3A%2F%2F<yournamespace>.servicebus.windows.net%2F<yourentity>&sig=<yoursignature from code above>&se=1438205742&skn=KeyName
ContentType: application/atom+xml;type=entry;charset=utf-8
``` 

<span data-ttu-id="c9e1e-215">Należy pamiętać, że wszystko działa.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-215">Remember, this works for everything.</span></span> <span data-ttu-id="c9e1e-216">Można utworzyć sygnatury dostępu Współdzielonego dla kolejki, tematu lub subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-216">You can create SAS for a queue, topic, or subscription.</span></span> 

<span data-ttu-id="c9e1e-217">Jeśli nadawcy lub klienta tokenu sygnatury dostępu Współdzielonego, nie ma klucza bezpośrednio, a ich nie można wycofać wyznaczania wartości skrótu, aby go uzyskać.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-217">If you give a sender or client a SAS token, they don't have the key directly, and they cannot reverse the hash to obtain it.</span></span> <span data-ttu-id="c9e1e-218">W efekcie masz kontroli nad co mogą uzyskiwać dostęp do, jak długo.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-218">As such, you have control over what they can access, and for how long.</span></span> <span data-ttu-id="c9e1e-219">Ważne jest, aby pamiętać jest, że w przypadku zmiany klucza podstawowego w zasadach, żadnych sygnatur dostępu współdzielonego z niej utworzyć zostaną unieważnione.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-219">An important thing to remember is that if you change the primary key in the policy, any Shared Access Signatures created from it will be invalidated.</span></span>

## <a name="use-the-shared-access-signature-at-amqp-level"></a><span data-ttu-id="c9e1e-220">Użyj sygnatura dostępu współdzielonego (na poziomie protokołu AMQP)</span><span class="sxs-lookup"><span data-stu-id="c9e1e-220">Use the Shared Access Signature (at AMQP level)</span></span>

<span data-ttu-id="c9e1e-221">W poprzedniej sekcji pokazano, jak używać tokenu sygnatury dostępu Współdzielonego z żądaniem HTTP POST do wysyłania danych do usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-221">In the previous section, you saw how to use the SAS token with an HTTP POST request for sending data to the Service Bus.</span></span> <span data-ttu-id="c9e1e-222">Wiesz, można uzyskać dostępu do usługi Service Bus przy użyciu zaawansowane komunikatów usługi kolejkowania protokołu (AMQP), który jest preferowanym protokołem do użycia ze względu na wydajność w wielu scenariuszach.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-222">As you know, you can access Service Bus using the Advanced Message Queuing Protocol (AMQP) that is the preferred protocol to use for performance reasons, in many scenarios.</span></span> <span data-ttu-id="c9e1e-223">Sposób użycia tokenu sygnatury dostępu Współdzielonego z protokołu AMQP jest opisany w dokumencie [AMQP Claim-Based zabezpieczeń wersja 1.0](https://www.oasis-open.org/committees/download.php/50506/amqp-cbs-v1%200-wd02%202013-08-12.doc) będący w pracy projekt od 2013, ale dobrze obsługiwane przez platformę Azure dzisiaj.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-223">The SAS token usage with AMQP is described in the document [AMQP Claim-Based Security Version 1.0](https://www.oasis-open.org/committees/download.php/50506/amqp-cbs-v1%200-wd02%202013-08-12.doc) that is in working draft since 2013 but well-supported by Azure today.</span></span>

<span data-ttu-id="c9e1e-224">Przed rozpoczęciem z wysyłania danych do usługi Service Bus, wydawcy musi wysłać tokenu sygnatury dostępu Współdzielonego wewnątrz komunikat protokołu AMQP dobrze zdefiniowany AMQP węzła o nazwie **$cbs** (można to sprawdzić jako kolejka "specjalne" używane przez usługę nabywanie i zweryfikować wszystkie skojarzenia zabezpieczeń tokeny).</span><span class="sxs-lookup"><span data-stu-id="c9e1e-224">Before starting to send data to Service Bus, the publisher must send the SAS token inside an AMQP message to a well-defined AMQP node named **$cbs** (you can see it as a "special" queue used by the service to acquire and validate all the SAS tokens).</span></span> <span data-ttu-id="c9e1e-225">Należy określić wydawcę **ReplyTo** pola w komunikacie protokołu AMQP; jest to węzeł, w którym usługa odpowiedzi do wydawcy o rezultat weryfikacji tokenu (żądania/odpowiedzi prostego wzorca między wydawcy i usługi ).</span><span class="sxs-lookup"><span data-stu-id="c9e1e-225">The publisher must specify the **ReplyTo** field inside the AMQP message; this is the node in which the service replies to the publisher with the result of the token validation (a simple request/reply pattern between publisher and service).</span></span> <span data-ttu-id="c9e1e-226">Ten węzeł odpowiedzi jest tworzona "na bieżąco," mówiąc o "dynamiczne tworzenie zdalnego węzła", zgodnie z opisem w specyfikacji protokołu AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-226">This reply node is created "on the fly," speaking about "dynamic creation of remote node" as described by the AMQP 1.0 specification.</span></span> <span data-ttu-id="c9e1e-227">Po sprawdzeniu, czy token sygnatury dostępu Współdzielonego jest prawidłowa, wydawcy Przejdź dalej i uruchom, aby wysłać dane do usługi.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-227">After checking that the SAS token is valid, the publisher can go forward and start to send data to the service.</span></span>

<span data-ttu-id="c9e1e-228">W poniższej procedurze pokazano sposób wysyłania tokenu sygnatury dostępu Współdzielonego przy użyciu protokołu AMQP [AMQP.Net Lite](https://github.com/Azure/amqpnetlite) biblioteki.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-228">The following steps show how to send the SAS token with AMQP protocol using the [AMQP.Net Lite](https://github.com/Azure/amqpnetlite) library.</span></span> <span data-ttu-id="c9e1e-229">Jest to przydatne, jeśli nie możesz użyć oficjalnego zestawu SDK magistrali usług (na przykład na WinRT, .net Compact Framework, .net Micro Framework i Mono) opracowywanie w języku C\#.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-229">This is useful if you can't use the official Service Bus SDK (for example on WinRT, .Net Compact Framework, .Net Micro Framework and Mono) developing in C\#.</span></span> <span data-ttu-id="c9e1e-230">Oczywiście Ta biblioteka jest przydatne ułatwi zrozumienie sposobu opartego na oświadczeniach zabezpieczeń działa na poziomie protokołu AMQP, jak przedstawiono, jak to działa na poziomie protokołu HTTP (z żądania HTTP POST i tokenu sygnatury dostępu Współdzielonego wysyłany w nagłówku "Autoryzacji").</span><span class="sxs-lookup"><span data-stu-id="c9e1e-230">Of course, this library is useful to help understand how claims-based security works at the AMQP level, as you saw how it works at the HTTP level (with an HTTP POST request and the SAS token sent inside the "Authorization" header).</span></span> <span data-ttu-id="c9e1e-231">Jeśli nie ma potrzeby takich głębokie wiedzą na temat protokołu AMQP, możesz użyć oficjalnego zestawu SDK magistrali usług z platformą .net Framework aplikacji, co zrobić to za Ciebie.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-231">If you don't need such deep knowledge about AMQP, you can use the official Service Bus SDK with .Net Framework applications, which will do it for you.</span></span>

### <a name="c35"></a><span data-ttu-id="c9e1e-232">C&#35;</span><span class="sxs-lookup"><span data-stu-id="c9e1e-232">C&#35;</span></span>

```csharp
/// <summary>
/// Send claim-based security (CBS) token
/// </summary>
/// <param name="shareAccessSignature">Shared access signature (token) to send</param>
private bool PutCbsToken(Connection connection, string sasToken)
{
    bool result = true;
    Session session = new Session(connection);

    string cbsClientAddress = "cbs-client-reply-to";
    var cbsSender = new SenderLink(session, "cbs-sender", "$cbs");
    var cbsReceiver = new ReceiverLink(session, cbsClientAddress, "$cbs");

    // construct the put-token message
    var request = new Message(sasToken);
    request.Properties = new Properties();
    request.Properties.MessageId = Guid.NewGuid().ToString();
    request.Properties.ReplyTo = cbsClientAddress;
    request.ApplicationProperties = new ApplicationProperties();
    request.ApplicationProperties["operation"] = "put-token";
    request.ApplicationProperties["type"] = "servicebus.windows.net:sastoken";
    request.ApplicationProperties["name"] = Fx.Format("amqp://{0}/{1}", sbNamespace, entity);
    cbsSender.Send(request);

    // receive the response
    var response = cbsReceiver.Receive();
    if (response == null || response.Properties == null || response.ApplicationProperties == null)
    {
        result = false;
    }
    else
    {
        int statusCode = (int)response.ApplicationProperties["status-code"];
        if (statusCode != (int)HttpStatusCode.Accepted && statusCode != (int)HttpStatusCode.OK)
        {
            result = false;
        }
    }

    // the sender/receiver may be kept open for refreshing tokens
    cbsSender.Close();
    cbsReceiver.Close();
    session.Close();

    return result;
}
```

<span data-ttu-id="c9e1e-233">`PutCbsToken()` Metoda *połączenia* (wystąpienie klasy połączenia protokołu AMQP zgodnie z [AMQP .NET Lite biblioteki](https://github.com/Azure/amqpnetlite)) reprezentujący połączenie TCP do usługi i *sasToken* parametr, który jest sygnatury dostępu Współdzielonego token do wysłania.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-233">The `PutCbsToken()` method receives the *connection* (AMQP connection class instance as provided by the [AMQP .NET Lite library](https://github.com/Azure/amqpnetlite)) that represents the TCP connection to the service and the *sasToken* parameter that is the SAS token to send.</span></span> 

> [!NOTE]
> <span data-ttu-id="c9e1e-234">Należy pamiętać, że połączenie jest utworzone za pomocą **mechanizmu uwierzytelniania SASL ustawioną zewnętrzne** (i nie zwykły domyślna nazwa użytkownika i hasło używane, gdy nie jest konieczne do wysyłania tokenu sygnatury dostępu Współdzielonego).</span><span class="sxs-lookup"><span data-stu-id="c9e1e-234">It's important that the connection is created with **SASL authentication mechanism set to EXTERNAL** (and not the default PLAIN with username and password used when you don't need to send the SAS token).</span></span>
> 
> 

<span data-ttu-id="c9e1e-235">Następnie wydawcy tworzy dwa łącza AMQP wysyłania tokenu sygnatury dostępu Współdzielonego i odbierania odpowiedzi (wynik weryfikacji tokenu) z usługi.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-235">Next, the publisher creates two AMQP links for sending the SAS token and receiving the reply (the token validation result) from the service.</span></span>

<span data-ttu-id="c9e1e-236">Komunikat protokołu AMQP zawiera zbiór właściwości oraz dodatkowe informacje od prostego komunikatu.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-236">The AMQP message contains a set of properties, and more information than a simple message.</span></span> <span data-ttu-id="c9e1e-237">SAS token jest treści wiadomości (przy użyciu jego konstruktora).</span><span class="sxs-lookup"><span data-stu-id="c9e1e-237">The SAS token is the body of the message (using its constructor).</span></span> <span data-ttu-id="c9e1e-238">**"ReplyTo"** właściwość jest ustawiona na nazwę węzła odbieranie wynik weryfikacji łącze odbiornika (można zmienić jego nazwę, a zostanie utworzony dynamicznie przez usługę).</span><span class="sxs-lookup"><span data-stu-id="c9e1e-238">The **"ReplyTo"** property is set to the node name for receiving the validation result on the receiver link (you can change its name if you want, and it will be created dynamically by the service).</span></span> <span data-ttu-id="c9e1e-239">Ostatnie trzy właściwości aplikacji/niestandardowe są używane przez usługę do wskazuje, jaki rodzaj operacji musi wykonać.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-239">The last three application/custom properties are used by the service to indicate what kind of operation it has to execute.</span></span> <span data-ttu-id="c9e1e-240">Zgodnie z opisem w specyfikacji wersji roboczej CBS, musi być **nazwy operacji** ("put-token"), **typu tokenu** (w tym przypadku "servicebus.windows.net:sastoken") i **"Nazwa" odbiorców** token dotyczy (jednostka całego).</span><span class="sxs-lookup"><span data-stu-id="c9e1e-240">As described by the CBS draft specification, they must be the **operation name** ("put-token"), the **type of token** (in this case, a "servicebus.windows.net:sastoken"), and the **"name" of the audience** to which the token applies (the entire entity).</span></span>

<span data-ttu-id="c9e1e-241">Po wysłaniu tokenu sygnatury dostępu Współdzielonego łącze nadawcy, wydawcy musi odczytu odpowiedzi łącze odbiornika.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-241">After sending the SAS token on the sender link, the publisher must read the reply on the receiver link.</span></span> <span data-ttu-id="c9e1e-242">Odpowiedź jest prosty komunikat protokołu AMQP z właściwością aplikacji o nazwie **"Kod stanu"** zawierających takie same wartości jak kod stanu HTTP.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-242">The reply is a simple AMQP message with an application property named **"status-code"** that can contain the same values as an HTTP status code.</span></span>

## <a name="rights-required-for-service-bus-operations"></a><span data-ttu-id="c9e1e-243">Uprawnienia wymagane dla operacji usługi Service Bus</span><span class="sxs-lookup"><span data-stu-id="c9e1e-243">Rights required for Service Bus operations</span></span>

<span data-ttu-id="c9e1e-244">W poniższej tabeli przedstawiono prawa dostępu wymagane przez różne operacje na zasobów usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-244">The following table shows the access rights required for various operations on Service Bus resources.</span></span>

| <span data-ttu-id="c9e1e-245">Operacja</span><span class="sxs-lookup"><span data-stu-id="c9e1e-245">Operation</span></span> | <span data-ttu-id="c9e1e-246">Oświadczenia wymagane</span><span class="sxs-lookup"><span data-stu-id="c9e1e-246">Claim Required</span></span> | <span data-ttu-id="c9e1e-247">Zakres oświadczeń</span><span class="sxs-lookup"><span data-stu-id="c9e1e-247">Claim Scope</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c9e1e-248">**Namespace**</span><span class="sxs-lookup"><span data-stu-id="c9e1e-248">**Namespace**</span></span> | | |
| <span data-ttu-id="c9e1e-249">Konfiguruj reguły autoryzacji w przestrzeni nazw</span><span class="sxs-lookup"><span data-stu-id="c9e1e-249">Configure authorization rule on a namespace</span></span> |<span data-ttu-id="c9e1e-250">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-250">Manage</span></span> |<span data-ttu-id="c9e1e-251">Każdy adres przestrzeni nazw</span><span class="sxs-lookup"><span data-stu-id="c9e1e-251">Any namespace address</span></span> |
| <span data-ttu-id="c9e1e-252">**Rejestr usługi**</span><span class="sxs-lookup"><span data-stu-id="c9e1e-252">**Service Registry**</span></span> | | |
| <span data-ttu-id="c9e1e-253">Wyliczanie zasad prywatnych</span><span class="sxs-lookup"><span data-stu-id="c9e1e-253">Enumerate Private Policies</span></span> |<span data-ttu-id="c9e1e-254">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-254">Manage</span></span> |<span data-ttu-id="c9e1e-255">Każdy adres przestrzeni nazw</span><span class="sxs-lookup"><span data-stu-id="c9e1e-255">Any namespace address</span></span> |
| <span data-ttu-id="c9e1e-256">Rozpoczęcie nasłuchiwania na przestrzeni nazw</span><span class="sxs-lookup"><span data-stu-id="c9e1e-256">Begin listening on a namespace</span></span> |<span data-ttu-id="c9e1e-257">Nasłuchiwanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-257">Listen</span></span> |<span data-ttu-id="c9e1e-258">Każdy adres przestrzeni nazw</span><span class="sxs-lookup"><span data-stu-id="c9e1e-258">Any namespace address</span></span> |
| <span data-ttu-id="c9e1e-259">Wysyłanie komunikatów do odbiornika w przestrzeni nazw</span><span class="sxs-lookup"><span data-stu-id="c9e1e-259">Send messages to a listener at a namespace</span></span> |<span data-ttu-id="c9e1e-260">Send</span><span class="sxs-lookup"><span data-stu-id="c9e1e-260">Send</span></span> |<span data-ttu-id="c9e1e-261">Każdy adres przestrzeni nazw</span><span class="sxs-lookup"><span data-stu-id="c9e1e-261">Any namespace address</span></span> |
| <span data-ttu-id="c9e1e-262">**Kolejki**</span><span class="sxs-lookup"><span data-stu-id="c9e1e-262">**Queue**</span></span> | | |
| <span data-ttu-id="c9e1e-263">Tworzenie kolejki</span><span class="sxs-lookup"><span data-stu-id="c9e1e-263">Create a queue</span></span> |<span data-ttu-id="c9e1e-264">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-264">Manage</span></span> |<span data-ttu-id="c9e1e-265">Każdy adres przestrzeni nazw</span><span class="sxs-lookup"><span data-stu-id="c9e1e-265">Any namespace address</span></span> |
| <span data-ttu-id="c9e1e-266">Usuwanie kolejki</span><span class="sxs-lookup"><span data-stu-id="c9e1e-266">Delete a queue</span></span> |<span data-ttu-id="c9e1e-267">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-267">Manage</span></span> |<span data-ttu-id="c9e1e-268">Każdy adres prawidłową kolejką</span><span class="sxs-lookup"><span data-stu-id="c9e1e-268">Any valid queue address</span></span> |
| <span data-ttu-id="c9e1e-269">Wyliczanie kolejek</span><span class="sxs-lookup"><span data-stu-id="c9e1e-269">Enumerate queues</span></span> |<span data-ttu-id="c9e1e-270">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-270">Manage</span></span> |<span data-ttu-id="c9e1e-271">Katalogu zasobów/kolejek</span><span class="sxs-lookup"><span data-stu-id="c9e1e-271">/$Resources/Queues</span></span> |
| <span data-ttu-id="c9e1e-272">Pobierz opis kolejki</span><span class="sxs-lookup"><span data-stu-id="c9e1e-272">Get the queue description</span></span> |<span data-ttu-id="c9e1e-273">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-273">Manage</span></span> |<span data-ttu-id="c9e1e-274">Każdy adres prawidłową kolejką</span><span class="sxs-lookup"><span data-stu-id="c9e1e-274">Any valid queue address</span></span> |
| <span data-ttu-id="c9e1e-275">Konfigurowanie reguł autoryzacji dla kolejki</span><span class="sxs-lookup"><span data-stu-id="c9e1e-275">Configure authorization rule for a queue</span></span> |<span data-ttu-id="c9e1e-276">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-276">Manage</span></span> |<span data-ttu-id="c9e1e-277">Każdy adres prawidłową kolejką</span><span class="sxs-lookup"><span data-stu-id="c9e1e-277">Any valid queue address</span></span> |
| <span data-ttu-id="c9e1e-278">Wysyłanie do do kolejki</span><span class="sxs-lookup"><span data-stu-id="c9e1e-278">Send into to the queue</span></span> |<span data-ttu-id="c9e1e-279">Send</span><span class="sxs-lookup"><span data-stu-id="c9e1e-279">Send</span></span> |<span data-ttu-id="c9e1e-280">Każdy adres prawidłową kolejką</span><span class="sxs-lookup"><span data-stu-id="c9e1e-280">Any valid queue address</span></span> |
| <span data-ttu-id="c9e1e-281">Odbieranie komunikatów z kolejki</span><span class="sxs-lookup"><span data-stu-id="c9e1e-281">Receive messages from a queue</span></span> |<span data-ttu-id="c9e1e-282">Nasłuchiwanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-282">Listen</span></span> |<span data-ttu-id="c9e1e-283">Każdy adres prawidłową kolejką</span><span class="sxs-lookup"><span data-stu-id="c9e1e-283">Any valid queue address</span></span> |
| <span data-ttu-id="c9e1e-284">Porzucenia lub pełne wiadomości po otrzymaniu komunikatu w trybie blokady podglądu</span><span class="sxs-lookup"><span data-stu-id="c9e1e-284">Abandon or complete messages after receiving the message in peek-lock mode</span></span> |<span data-ttu-id="c9e1e-285">Nasłuchiwanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-285">Listen</span></span> |<span data-ttu-id="c9e1e-286">Każdy adres prawidłową kolejką</span><span class="sxs-lookup"><span data-stu-id="c9e1e-286">Any valid queue address</span></span> |
| <span data-ttu-id="c9e1e-287">Odroczenie komunikat dla nowszej pobierania</span><span class="sxs-lookup"><span data-stu-id="c9e1e-287">Defer a message for later retrieval</span></span> |<span data-ttu-id="c9e1e-288">Nasłuchiwanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-288">Listen</span></span> |<span data-ttu-id="c9e1e-289">Każdy adres prawidłową kolejką</span><span class="sxs-lookup"><span data-stu-id="c9e1e-289">Any valid queue address</span></span> |
| <span data-ttu-id="c9e1e-290">Wiadomości utraconych wiadomości</span><span class="sxs-lookup"><span data-stu-id="c9e1e-290">Deadletter a message</span></span> |<span data-ttu-id="c9e1e-291">Nasłuchiwanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-291">Listen</span></span> |<span data-ttu-id="c9e1e-292">Każdy adres prawidłową kolejką</span><span class="sxs-lookup"><span data-stu-id="c9e1e-292">Any valid queue address</span></span> |
| <span data-ttu-id="c9e1e-293">Pobierz stan skojarzony z sesją kolejki komunikatów</span><span class="sxs-lookup"><span data-stu-id="c9e1e-293">Get the state associated with a message queue session</span></span> |<span data-ttu-id="c9e1e-294">Nasłuchiwanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-294">Listen</span></span> |<span data-ttu-id="c9e1e-295">Każdy adres prawidłową kolejką</span><span class="sxs-lookup"><span data-stu-id="c9e1e-295">Any valid queue address</span></span> |
| <span data-ttu-id="c9e1e-296">Ustaw stan skojarzony z sesją kolejki komunikatów</span><span class="sxs-lookup"><span data-stu-id="c9e1e-296">Set the state associated with a message queue session</span></span> |<span data-ttu-id="c9e1e-297">Nasłuchiwanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-297">Listen</span></span> |<span data-ttu-id="c9e1e-298">Każdy adres prawidłową kolejką</span><span class="sxs-lookup"><span data-stu-id="c9e1e-298">Any valid queue address</span></span> |
| <span data-ttu-id="c9e1e-299">**Temat**</span><span class="sxs-lookup"><span data-stu-id="c9e1e-299">**Topic**</span></span> | | |
| <span data-ttu-id="c9e1e-300">Tworzenie tematu</span><span class="sxs-lookup"><span data-stu-id="c9e1e-300">Create a topic</span></span> |<span data-ttu-id="c9e1e-301">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-301">Manage</span></span> |<span data-ttu-id="c9e1e-302">Każdy adres przestrzeni nazw</span><span class="sxs-lookup"><span data-stu-id="c9e1e-302">Any namespace address</span></span> |
| <span data-ttu-id="c9e1e-303">Usunięcie tematu</span><span class="sxs-lookup"><span data-stu-id="c9e1e-303">Delete a topic</span></span> |<span data-ttu-id="c9e1e-304">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-304">Manage</span></span> |<span data-ttu-id="c9e1e-305">Każdy adres nieprawidłowy temat</span><span class="sxs-lookup"><span data-stu-id="c9e1e-305">Any valid topic address</span></span> |
| <span data-ttu-id="c9e1e-306">Wyliczanie — tematy</span><span class="sxs-lookup"><span data-stu-id="c9e1e-306">Enumerate topics</span></span> |<span data-ttu-id="c9e1e-307">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-307">Manage</span></span> |<span data-ttu-id="c9e1e-308">Katalogu zasobów/tematy</span><span class="sxs-lookup"><span data-stu-id="c9e1e-308">/$Resources/Topics</span></span> |
| <span data-ttu-id="c9e1e-309">Opis tematu pobierania</span><span class="sxs-lookup"><span data-stu-id="c9e1e-309">Get the topic description</span></span> |<span data-ttu-id="c9e1e-310">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-310">Manage</span></span> |<span data-ttu-id="c9e1e-311">Każdy adres nieprawidłowy temat</span><span class="sxs-lookup"><span data-stu-id="c9e1e-311">Any valid topic address</span></span> |
| <span data-ttu-id="c9e1e-312">Konfigurowanie reguł autoryzacji dla tematu</span><span class="sxs-lookup"><span data-stu-id="c9e1e-312">Configure authorization rule for a topic</span></span> |<span data-ttu-id="c9e1e-313">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-313">Manage</span></span> |<span data-ttu-id="c9e1e-314">Każdy adres nieprawidłowy temat</span><span class="sxs-lookup"><span data-stu-id="c9e1e-314">Any valid topic address</span></span> |
| <span data-ttu-id="c9e1e-315">Wyślij do tematu</span><span class="sxs-lookup"><span data-stu-id="c9e1e-315">Send to the topic</span></span> |<span data-ttu-id="c9e1e-316">Send</span><span class="sxs-lookup"><span data-stu-id="c9e1e-316">Send</span></span> |<span data-ttu-id="c9e1e-317">Każdy adres nieprawidłowy temat</span><span class="sxs-lookup"><span data-stu-id="c9e1e-317">Any valid topic address</span></span> |
| <span data-ttu-id="c9e1e-318">**Subskrypcja**</span><span class="sxs-lookup"><span data-stu-id="c9e1e-318">**Subscription**</span></span> | | |
| <span data-ttu-id="c9e1e-319">Tworzenie subskrypcji</span><span class="sxs-lookup"><span data-stu-id="c9e1e-319">Create a subscription</span></span> |<span data-ttu-id="c9e1e-320">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-320">Manage</span></span> |<span data-ttu-id="c9e1e-321">Każdy adres przestrzeni nazw</span><span class="sxs-lookup"><span data-stu-id="c9e1e-321">Any namespace address</span></span> |
| <span data-ttu-id="c9e1e-322">Usuń subskrypcję</span><span class="sxs-lookup"><span data-stu-id="c9e1e-322">Delete subscription</span></span> |<span data-ttu-id="c9e1e-323">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-323">Manage</span></span> |<span data-ttu-id="c9e1e-324">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="c9e1e-324">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="c9e1e-325">Wyliczanie subskrypcji</span><span class="sxs-lookup"><span data-stu-id="c9e1e-325">Enumerate subscriptions</span></span> |<span data-ttu-id="c9e1e-326">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-326">Manage</span></span> |<span data-ttu-id="c9e1e-327">.. / myTopic/subskrypcji</span><span class="sxs-lookup"><span data-stu-id="c9e1e-327">../myTopic/Subscriptions</span></span> |
| <span data-ttu-id="c9e1e-328">Pobrać opisu subskrypcji</span><span class="sxs-lookup"><span data-stu-id="c9e1e-328">Get subscription description</span></span> |<span data-ttu-id="c9e1e-329">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-329">Manage</span></span> |<span data-ttu-id="c9e1e-330">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="c9e1e-330">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="c9e1e-331">Porzucenia lub pełne wiadomości po otrzymaniu komunikatu w trybie blokady podglądu</span><span class="sxs-lookup"><span data-stu-id="c9e1e-331">Abandon or complete messages after receiving the message in peek-lock mode</span></span> |<span data-ttu-id="c9e1e-332">Nasłuchiwanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-332">Listen</span></span> |<span data-ttu-id="c9e1e-333">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="c9e1e-333">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="c9e1e-334">Odroczenie komunikat dla nowszej pobierania</span><span class="sxs-lookup"><span data-stu-id="c9e1e-334">Defer a message for later retrieval</span></span> |<span data-ttu-id="c9e1e-335">Nasłuchiwanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-335">Listen</span></span> |<span data-ttu-id="c9e1e-336">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="c9e1e-336">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="c9e1e-337">Wiadomości utraconych wiadomości</span><span class="sxs-lookup"><span data-stu-id="c9e1e-337">Deadletter a message</span></span> |<span data-ttu-id="c9e1e-338">Nasłuchiwanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-338">Listen</span></span> |<span data-ttu-id="c9e1e-339">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="c9e1e-339">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="c9e1e-340">Pobierz stan skojarzony z sesją tematu</span><span class="sxs-lookup"><span data-stu-id="c9e1e-340">Get the state associated with a topic session</span></span> |<span data-ttu-id="c9e1e-341">Nasłuchiwanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-341">Listen</span></span> |<span data-ttu-id="c9e1e-342">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="c9e1e-342">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="c9e1e-343">Ustaw stan skojarzony z sesją tematu</span><span class="sxs-lookup"><span data-stu-id="c9e1e-343">Set the state associated with a topic session</span></span> |<span data-ttu-id="c9e1e-344">Nasłuchiwanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-344">Listen</span></span> |<span data-ttu-id="c9e1e-345">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="c9e1e-345">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="c9e1e-346">**Reguły**</span><span class="sxs-lookup"><span data-stu-id="c9e1e-346">**Rules**</span></span> | | |
| <span data-ttu-id="c9e1e-347">Utwórz regułę</span><span class="sxs-lookup"><span data-stu-id="c9e1e-347">Create a rule</span></span> |<span data-ttu-id="c9e1e-348">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-348">Manage</span></span> |<span data-ttu-id="c9e1e-349">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="c9e1e-349">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="c9e1e-350">Usuwanie reguły</span><span class="sxs-lookup"><span data-stu-id="c9e1e-350">Delete a rule</span></span> |<span data-ttu-id="c9e1e-351">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="c9e1e-351">Manage</span></span> |<span data-ttu-id="c9e1e-352">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="c9e1e-352">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="c9e1e-353">Wyliczanie zasad</span><span class="sxs-lookup"><span data-stu-id="c9e1e-353">Enumerate rules</span></span> |<span data-ttu-id="c9e1e-354">Zarządzanie lub nasłuchiwania</span><span class="sxs-lookup"><span data-stu-id="c9e1e-354">Manage or Listen</span></span> |<span data-ttu-id="c9e1e-355">.. /myTopic/Subscriptions/mySubscription/Rules</span><span class="sxs-lookup"><span data-stu-id="c9e1e-355">../myTopic/Subscriptions/mySubscription/Rules</span></span> 

## <a name="next-steps"></a><span data-ttu-id="c9e1e-356">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="c9e1e-356">Next steps</span></span>

<span data-ttu-id="c9e1e-357">Aby dowiedzieć się więcej na temat obsługi komunikatów usługi Service Bus, zobacz następujące tematy.</span><span class="sxs-lookup"><span data-stu-id="c9e1e-357">To learn more about Service Bus messaging, see the following topics.</span></span>

* [<span data-ttu-id="c9e1e-358">Podstawy usługi Service Bus</span><span class="sxs-lookup"><span data-stu-id="c9e1e-358">Service Bus fundamentals</span></span>](service-bus-fundamentals-hybrid-solutions.md)
* [<span data-ttu-id="c9e1e-359">Kolejki, tematy i subskrypcje usługi Service Bus</span><span class="sxs-lookup"><span data-stu-id="c9e1e-359">Service Bus queues, topics, and subscriptions</span></span>](service-bus-queues-topics-subscriptions.md)
* [<span data-ttu-id="c9e1e-360">Jak używać kolejek usługi Service Bus</span><span class="sxs-lookup"><span data-stu-id="c9e1e-360">How to use Service Bus queues</span></span>](service-bus-dotnet-get-started-with-queues.md)
* [<span data-ttu-id="c9e1e-361">Jak używać tematów i subskrypcji usługi Service Bus</span><span class="sxs-lookup"><span data-stu-id="c9e1e-361">How to use Service Bus topics and subscriptions</span></span>](service-bus-dotnet-how-to-use-topics-subscriptions.md)

[Azure portal]: https://portal.azure.com