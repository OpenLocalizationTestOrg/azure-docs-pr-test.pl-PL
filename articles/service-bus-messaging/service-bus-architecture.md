---
title: "Omówienie architektury przetwarzania komunikatów usługi Azure Service Bus | Microsoft Docs"
description: "Opis architektury przetwarzania komunikatów usługi Azure Service Bus."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: baf94c2d-0e58-4d5d-a588-767f996ccf7f
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/23/2017
ms.author: sethm
ms.openlocfilehash: 83456d775c5ff2a2476ba46e9c78a8dc1bb482e8
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/29/2017
---
# <a name="service-bus-architecture"></a><span data-ttu-id="d5c23-103">Architektura usługi Service Bus</span><span class="sxs-lookup"><span data-stu-id="d5c23-103">Service Bus architecture</span></span>
<span data-ttu-id="d5c23-104">W tym artykule opisano architekturę przetwarzania komunikatów usługi Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="d5c23-104">This article describes the message processing architecture of Azure Service Bus.</span></span>

## <a name="service-bus-scale-units"></a><span data-ttu-id="d5c23-105">Jednostki skalowania usługi Service Bus</span><span class="sxs-lookup"><span data-stu-id="d5c23-105">Service Bus scale units</span></span>
<span data-ttu-id="d5c23-106">Usługa Service Bus jest zorganizowana według *jednostek skalowania*.</span><span class="sxs-lookup"><span data-stu-id="d5c23-106">Service Bus is organized by *scale units*.</span></span> <span data-ttu-id="d5c23-107">Jednostka skalowania jest jednostką wdrożenia i zawiera wszystkie składniki wymagane do uruchomienia usługi.</span><span class="sxs-lookup"><span data-stu-id="d5c23-107">A scale unit is a unit of deployment and contains all components required run the service.</span></span> <span data-ttu-id="d5c23-108">Każdy region wdraża co najmniej jedną jednostkę skalowania usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="d5c23-108">Each region deploys one or more Service Bus scale units.</span></span>

<span data-ttu-id="d5c23-109">Przestrzeń nazw usługi Service Bus jest mapowana na jednostkę skalowania.</span><span class="sxs-lookup"><span data-stu-id="d5c23-109">A Service Bus namespace is mapped to a scale unit.</span></span> <span data-ttu-id="d5c23-110">Jednostka skalowania obsługuje wszystkie typy jednostek usługi Service Bus (kolejki, tematy, subskrypcje).</span><span class="sxs-lookup"><span data-stu-id="d5c23-110">The scale unit handles all types of Service Bus entities (queues, topics, subscriptions).</span></span> <span data-ttu-id="d5c23-111">Jednostka skalowania usługi Service Bus składa się z następujących składników:</span><span class="sxs-lookup"><span data-stu-id="d5c23-111">A Service Bus scale unit consists of the following components:</span></span>

* <span data-ttu-id="d5c23-112">**Zestaw węzłów bramy.**</span><span class="sxs-lookup"><span data-stu-id="d5c23-112">**A set of gateway nodes.**</span></span> <span data-ttu-id="d5c23-113">Węzły bramy uwierzytelniają żądania przychodzące.</span><span class="sxs-lookup"><span data-stu-id="d5c23-113">Gateway nodes authenticate incoming requests.</span></span> <span data-ttu-id="d5c23-114">Każdy węzeł bramy ma publiczny adres IP.</span><span class="sxs-lookup"><span data-stu-id="d5c23-114">Each gateway node has a public IP address.</span></span>
* <span data-ttu-id="d5c23-115">**Zestaw węzłów brokera komunikatów.**</span><span class="sxs-lookup"><span data-stu-id="d5c23-115">**A set of messaging broker nodes.**</span></span> <span data-ttu-id="d5c23-116">Węzły brokera komunikatów przetwarzają żądania dotyczące jednostek obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="d5c23-116">Messaging broker nodes process requests concerning messaging entities.</span></span>
* <span data-ttu-id="d5c23-117">**Jeden magazyn bramy.**</span><span class="sxs-lookup"><span data-stu-id="d5c23-117">**One gateway store.**</span></span> <span data-ttu-id="d5c23-118">Magazyn bramy przechowuje dane dla każdej jednostki zdefiniowanej w tej jednostce skalowania.</span><span class="sxs-lookup"><span data-stu-id="d5c23-118">The gateway store holds the data for every entity that is defined in this scale unit.</span></span> <span data-ttu-id="d5c23-119">Magazyn bramy jest wdrażany w oparciu o bazę danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="d5c23-119">The gateway store is implemented on top of a SQL Azure database.</span></span>
* <span data-ttu-id="d5c23-120">**Wiele magazynów obsługi komunikatów.**</span><span class="sxs-lookup"><span data-stu-id="d5c23-120">**Multiple messaging stores.**</span></span> <span data-ttu-id="d5c23-121">Usługa obsługi komunikatów przechowuje komunikaty wszystkich kolejek, tematów i subskrypcji, które są zdefiniowane w tej jednostce skalowania.</span><span class="sxs-lookup"><span data-stu-id="d5c23-121">Messaging stores hold the messages of all queues, topics and subscriptions that are defined in this scale unit.</span></span> <span data-ttu-id="d5c23-122">Zawiera również wszystkie dane subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="d5c23-122">It also contains all subscription data.</span></span> <span data-ttu-id="d5c23-123">O ile nie włączono opcji [partycjonowanie jednostki do obsługi komunikatów](service-bus-partitioning.md), kolejka lub temat są mapowane na jeden magazyn obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="d5c23-123">Unless [partitioning messaging entities](service-bus-partitioning.md) is enabled, a queue or topic is mapped to one messaging store.</span></span> <span data-ttu-id="d5c23-124">Subskrypcje są przechowywane w tym samym magazynie obsługi komunikatów jako ich temat nadrzędny.</span><span class="sxs-lookup"><span data-stu-id="d5c23-124">Subscriptions are stored in the same messaging store as their parent topic.</span></span> <span data-ttu-id="d5c23-125">Z wyjątkiem [obsługi komunikatów w wersji Premium](service-bus-premium-messaging.md) usługi Service Bus, magazyny obsługi komunikatów są wdrażane na podstawie baz danych SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="d5c23-125">Except for Service Bus [Premium Messaging](service-bus-premium-messaging.md), the messaging stores are implemented on top of SQL Azure databases.</span></span>

## <a name="containers"></a><span data-ttu-id="d5c23-126">Kontenery</span><span class="sxs-lookup"><span data-stu-id="d5c23-126">Containers</span></span>
<span data-ttu-id="d5c23-127">Każda jednostka obsługi komunikatów ma przypisany określony kontener.</span><span class="sxs-lookup"><span data-stu-id="d5c23-127">Each messaging entity is assigned a specific container.</span></span> <span data-ttu-id="d5c23-128">Kontener jest konstrukcją logiczną, która używa dokładnie jednego magazynu obsługi komunikatów do przechowywania wszystkich odpowiednich danych dla tego kontenera.</span><span class="sxs-lookup"><span data-stu-id="d5c23-128">A container is a logical construct that uses exactly one messaging store to store all relevant data for this container.</span></span> <span data-ttu-id="d5c23-129">Każdy kontener jest przypisany do węzła brokera obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="d5c23-129">Each container is assigned to a messaging broker node.</span></span> <span data-ttu-id="d5c23-130">Zazwyczaj kontenerów jest więcej niż węzłów brokera obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="d5c23-130">Typically, there are more containers than messaging broker nodes.</span></span> <span data-ttu-id="d5c23-131">W związku z tym każdy węzeł brokera obsługi komunikatów ładuje wiele kontenerów.</span><span class="sxs-lookup"><span data-stu-id="d5c23-131">Therefore, each messaging broker node loads multiple containers.</span></span> <span data-ttu-id="d5c23-132">Dystrybucja kontenerów do węzła brokera obsługi komunikatów jest zorganizowana w taki sposób, że wszystkie węzły brokera obsługi komunikatów są równo obciążone.</span><span class="sxs-lookup"><span data-stu-id="d5c23-132">The distribution of containers to a messaging broker node is organized such that all messaging broker nodes are equally loaded.</span></span> <span data-ttu-id="d5c23-133">Jeśli wzorzec obciążenia zmienia się (na przykład jeden z kontenerów staje się bardzo zajęty) lub jeśli węzeł brokera obsługi komunikatów staje się tymczasowo niedostępny, kontenery są redystrybuowane między węzły brokera obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="d5c23-133">If the load pattern changes (for example, one of the containers gets very busy), or if a messaging broker node becomes temporarily unavailable, the containers are redistributed among the messaging broker nodes.</span></span>

## <a name="processing-of-incoming-messaging-requests"></a><span data-ttu-id="d5c23-134">Przetwarzanie przychodzących żądań obsługi komunikatów</span><span class="sxs-lookup"><span data-stu-id="d5c23-134">Processing of incoming messaging requests</span></span>
<span data-ttu-id="d5c23-135">Gdy klient wysyła żądanie do usługi Service Bus, usługa Azure Load Balancer kieruje je do dowolnego z węzłów bramy.</span><span class="sxs-lookup"><span data-stu-id="d5c23-135">When a client sends a request to Service Bus, the Azure load balancer routes it to any of the gateway nodes.</span></span> <span data-ttu-id="d5c23-136">Węzeł bramy autoryzuje żądanie.</span><span class="sxs-lookup"><span data-stu-id="d5c23-136">The gateway node authorizes the request.</span></span> <span data-ttu-id="d5c23-137">Jeśli żądanie dotyczy jednostki obsługi komunikatów (kolejki, tematu, subskrypcji), węzeł bramy wyszukuje jednostkę w magazynie bramy i określa, w którym magazynie obsługi komunikatów znajduje się ta jednostka.</span><span class="sxs-lookup"><span data-stu-id="d5c23-137">If the request concerns a messaging entity (queue, topic, subscription), the gateway node looks up the entity in the gateway store and determines in which messaging store the entity is located.</span></span> <span data-ttu-id="d5c23-138">Następnie wyszukuje węzeł brokera obsługi komunikatów aktualnie obsługujący ten kontener i wysyła żądanie do tego węzła brokera obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="d5c23-138">It then looks up which messaging broker node is currently servicing this container, and sends the request to that messaging broker node.</span></span> <span data-ttu-id="d5c23-139">Węzeł brokera obsługi komunikatów przetwarza żądanie i aktualizuje stan jednostki w magazynie kontenera.</span><span class="sxs-lookup"><span data-stu-id="d5c23-139">The messaging broker node processes the request and updates the entity state in the container store.</span></span> <span data-ttu-id="d5c23-140">Węzeł brokera obsługi komunikatów wysyła następnie odpowiedź do węzła bramy wysyłającego z kolei odpowiednią odpowiedź do klienta, który wysłał początkowe, oryginalne żądanie.</span><span class="sxs-lookup"><span data-stu-id="d5c23-140">The messaging broker node then sends the response back to the gateway node, which sends an appropriate response back to the client that issued the original request.</span></span>

![Przetwarzanie przychodzących żądań obsługi komunikatów](./media/service-bus-architecture/ic690644.png)

## <a name="next-steps"></a><span data-ttu-id="d5c23-142">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="d5c23-142">Next steps</span></span>
<span data-ttu-id="d5c23-143">Teraz, po zapoznaniu się z architekturą usługi Service Bus, skorzystaj z następujących linków, aby uzyskać więcej informacji:</span><span class="sxs-lookup"><span data-stu-id="d5c23-143">Now that you've read an overview of Service Bus architecture, visit the following links for more information:</span></span>

* [<span data-ttu-id="d5c23-144">Omówienie obsługi komunikatów w usłudze Service Bus</span><span class="sxs-lookup"><span data-stu-id="d5c23-144">Service Bus messaging overview</span></span>](service-bus-messaging-overview.md)
* [<span data-ttu-id="d5c23-145">Podstawy usługi Service Bus</span><span class="sxs-lookup"><span data-stu-id="d5c23-145">Service Bus fundamentals</span></span>](service-bus-fundamentals-hybrid-solutions.md)
* [<span data-ttu-id="d5c23-146">Rozwiązanie do obsługi komunikatów kolejek korzystające z funkcji kolejek usługi Service Bus</span><span class="sxs-lookup"><span data-stu-id="d5c23-146">A queued messaging solution using Service Bus queues</span></span>](service-bus-dotnet-multi-tier-app-using-service-bus-queues.md)


