---
title: "aaaBest wskazówki dotyczące poprawiania wydajności przy użyciu usługi Azure Service Bus | Dokumentacja firmy Microsoft"
description: "W tym artykule opisano, jak toouse usługi Service Bus toooptimize wydajności podczas wymiany obsługiwanych przez brokera komunikatów."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: e756c15d-31fc-45c0-8df4-0bca0da10bb2
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/10/2017
ms.author: sethm
ms.openlocfilehash: 52764d227757cbb11246675878933f21685817f1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="best-practices-for-performance-improvements-using-service-bus-messaging"></a><span data-ttu-id="fbcf3-103">Najlepsze rozwiązania dotyczące poprawy wydajności przy użyciu usługi magistrali komunikatów</span><span class="sxs-lookup"><span data-stu-id="fbcf3-103">Best Practices for performance improvements using Service Bus Messaging</span></span>

<span data-ttu-id="fbcf3-104">W tym artykule opisano sposób toouse [komunikatów usługi Azure Service Bus](https://azure.microsoft.com/services/service-bus/) toooptimize wydajności podczas wymiany obsługiwanych przez brokera komunikatów.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-104">This article describes how toouse [Azure Service Bus messaging](https://azure.microsoft.com/services/service-bus/) toooptimize performance when exchanging brokered messages.</span></span> <span data-ttu-id="fbcf3-105">Witaj w pierwszej części tego tematu opisano hello różnych mechanizmów, które są oferowane toohelp zwiększyć wydajność.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-105">hello first part of this topic describes hello different mechanisms that are offered toohelp increase performance.</span></span> <span data-ttu-id="fbcf3-106">druga część Hello znajdują się wskazówki dotyczące sposobu toouse usługi Service Bus w taki sposób, aby zaoferować hello najlepszą wydajność w danym scenariuszu.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-106">hello second part provides guidance on how toouse Service Bus in a way that can offer hello best performance in a given scenario.</span></span>

<span data-ttu-id="fbcf3-107">W tym temacie hello termin "client" oznacza tooany jednostki, która uzyskuje dostęp do usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-107">Throughout this topic, hello term "client" refers tooany entity that accesses Service Bus.</span></span> <span data-ttu-id="fbcf3-108">Klient może zająć roli hello nadawcy i adresata.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-108">A client can take hello role of a sender or a receiver.</span></span> <span data-ttu-id="fbcf3-109">Witaj termin "sender" jest używana dla usługi Service Bus kolejka lub temat klienta, który wysyła wiadomości tooa usługi Service Bus kolejka lub temat.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-109">hello term "sender" is used for a Service Bus queue or topic client that sends messages tooa Service Bus queue or topic.</span></span> <span data-ttu-id="fbcf3-110">Witaj termin "odbiorcy" odnosi się tooa usługi Service Bus kolejki lub subskrypcji klienta, który odbiera komunikaty z kolejki usługi Service Bus lub subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-110">hello term "receiver" refers tooa Service Bus queue or subscription client that receives messages from a Service Bus queue or subscription.</span></span>

<span data-ttu-id="fbcf3-111">Tych sekcjach przedstawiono kilka założenia, że Usługa Service Bus używa toohelp wydajnością.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-111">These sections introduce several concepts that Service Bus uses toohelp boost performance.</span></span>

## <a name="protocols"></a><span data-ttu-id="fbcf3-112">Protokoły</span><span class="sxs-lookup"><span data-stu-id="fbcf3-112">Protocols</span></span>
<span data-ttu-id="fbcf3-113">Usługa Service Bus umożliwia toosend klientów i odbierania wiadomości za pomocą jednego z trzech protokołów:</span><span class="sxs-lookup"><span data-stu-id="fbcf3-113">Service Bus enables clients toosend and receive messages via one of three protocols:</span></span>

1. <span data-ttu-id="fbcf3-114">Zaawansowane kolejkowania wiadomości protokołu (protokół AMQP)</span><span class="sxs-lookup"><span data-stu-id="fbcf3-114">Advanced Message Queuing Protocol (AMQP)</span></span>
2. <span data-ttu-id="fbcf3-115">Protokół (SBMP) do obsługi komunikatów usługi Service Bus</span><span class="sxs-lookup"><span data-stu-id="fbcf3-115">Service Bus Messaging Protocol (SBMP)</span></span>
3. <span data-ttu-id="fbcf3-116">HTTP</span><span class="sxs-lookup"><span data-stu-id="fbcf3-116">HTTP</span></span>

<span data-ttu-id="fbcf3-117">AMQP i SBMP są bardziej wydajne, ponieważ ich obsługa hello tooService połączenia magistrali tak długo, jak istnieje hello fabryki obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-117">AMQP and SBMP are more efficient, because they maintain hello connection tooService Bus as long as hello messaging factory exists.</span></span> <span data-ttu-id="fbcf3-118">Implementuje również przetwarzanie wsadowe i Odczyt z wyprzedzeniem.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-118">It also implements batching and prefetching.</span></span> <span data-ttu-id="fbcf3-119">Chyba że jawnie wspomniano, cała zawartość w tym temacie założono, hello użycia protokołu AMQP lub SBMP.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-119">Unless explicitly mentioned, all content in this topic assumes hello use of AMQP or SBMP.</span></span>

## <a name="reusing-factories-and-clients"></a><span data-ttu-id="fbcf3-120">Ponowne wykorzystywanie fabryk i klientów</span><span class="sxs-lookup"><span data-stu-id="fbcf3-120">Reusing factories and clients</span></span>
<span data-ttu-id="fbcf3-121">Klient usługi Service Bus obiekty, takie jak [QueueClient] [ QueueClient] lub [MessageSender][MessageSender], są tworzone za pomocą [ MessagingFactory] [ MessagingFactory] obiektu, który udostępnia również wewnętrznego zarządzania połączenia.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-121">Service Bus client objects, such as [QueueClient][QueueClient] or [MessageSender][MessageSender], are created through a [MessagingFactory][MessagingFactory] object, which also provides internal management of connections.</span></span> <span data-ttu-id="fbcf3-122">Fabryki obsługi komunikatów lub kolejki, tematu i subskrypcji klientów należy zamknąć nie po wysłać wiadomość, a następnie utwórz je po wysłaniu dalej wiadomości powitania.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-122">You should not close messaging factories or queue, topic, and subscription clients after you send a message, and then re-create them when you send hello next message.</span></span> <span data-ttu-id="fbcf3-123">Zamykanie fabryki obsługi komunikatów usuwa usługi Service Bus toohello połączenia hello i nawiązaniem nowego połączenia podczas odtwarzania hello fabryki.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-123">Closing a messaging factory deletes hello connection toohello Service Bus service, and a new connection is established when recreating hello factory.</span></span> <span data-ttu-id="fbcf3-124">Ustanowienie połączenia jest kosztowna operacja, trzeba będzie ponownie używając hello tej samej fabryki i klienta obiektów na wiele operacji.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-124">Establishing a connection is an expensive operation that you can avoid by re-using hello same factory and client objects for multiple operations.</span></span> <span data-ttu-id="fbcf3-125">Można bezpiecznie użyć hello [QueueClient] [ QueueClient] obiekt do wysyłania wiadomości z równoczesnych operacji asynchronicznych i wiele wątków.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-125">You can safely use hello [QueueClient][QueueClient] object for sending messages from concurrent asynchronous operations and multiple threads.</span></span> 

## <a name="concurrent-operations"></a><span data-ttu-id="fbcf3-126">Równoczesne wykonywanie operacji</span><span class="sxs-lookup"><span data-stu-id="fbcf3-126">Concurrent operations</span></span>
<span data-ttu-id="fbcf3-127">Wykonywanie operacji (wysyłanie, odbierania, usuwanie, itp.) dopiero po pewnym czasie.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-127">Performing an operation (send, receive, delete, etc.) takes some time.</span></span> <span data-ttu-id="fbcf3-128">Teraz obejmuje hello przetwarzania operacji hello przez hello usługi Service Bus opóźnienia toohello dodanie hello żądania i odpowiedzi hello.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-128">This time includes hello processing of hello operation by hello Service Bus service in addition toohello latency of hello request and hello reply.</span></span> <span data-ttu-id="fbcf3-129">tooincrease hello liczbę operacji na czas, operacji musi być wykonywany współbieżnie.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-129">tooincrease hello number of operations per time, operations must execute concurrently.</span></span> <span data-ttu-id="fbcf3-130">Można to zrobić na kilka różnych sposobów:</span><span class="sxs-lookup"><span data-stu-id="fbcf3-130">You can do this in several different ways:</span></span>

* <span data-ttu-id="fbcf3-131">**Operacje asynchroniczne**: powitania klienta planuje operacji przez wykonanie operacji asynchronicznych.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-131">**Asynchronous operations**: hello client schedules operations by performing asynchronous operations.</span></span> <span data-ttu-id="fbcf3-132">następnym żądaniu Hello jest uruchamiana przed zakończeniem hello poprzedniego żądania.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-132">hello next request is started before hello previous request is completed.</span></span> <span data-ttu-id="fbcf3-133">Witaj poniżej przedstawiono przykład operacja asynchronicznego wysyłania:</span><span class="sxs-lookup"><span data-stu-id="fbcf3-133">hello following is an example of an asynchronous send operation:</span></span>
  
 ```csharp
  BrokeredMessage m1 = new BrokeredMessage(body);
  BrokeredMessage m2 = new BrokeredMessage(body);
  
  Task send1 = queueClient.SendAsync(m1).ContinueWith((t) => 
    {
      Console.WriteLine("Sent message #1");
    });
  Task send2 = queueClient.SendAsync(m2).ContinueWith((t) => 
    {
      Console.WriteLine("Sent message #2");
    });
  Task.WaitAll(send1, send2);
  Console.WriteLine("All messages sent");
  ```
  
  <span data-ttu-id="fbcf3-134">To jest przykład asynchronicznego odbioru operacji:</span><span class="sxs-lookup"><span data-stu-id="fbcf3-134">This is an example of an asynchronous receive operation:</span></span>
  
  ```csharp
  Task receive1 = queueClient.ReceiveAsync().ContinueWith(ProcessReceivedMessage);
  Task receive2 = queueClient.ReceiveAsync().ContinueWith(ProcessReceivedMessage);
  
  Task.WaitAll(receive1, receive2);
  Console.WriteLine("All messages received");
  
  async void ProcessReceivedMessage(Task<BrokeredMessage> t)
  {
    BrokeredMessage m = t.Result;
    Console.WriteLine("{0} received", m.Label);
    await m.CompleteAsync();
    Console.WriteLine("{0} complete", m.Label);
  }
  ```
* <span data-ttu-id="fbcf3-135">**Wiele fabryk**: wszystkich klientów (nadawcy w tooreceivers dodanie) utworzone przez hello tej samej fabryki udziału jednego połączenia TCP.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-135">**Multiple factories**: all clients (senders in addition tooreceivers) that are created by hello same factory share one TCP connection.</span></span> <span data-ttu-id="fbcf3-136">przepustowość maksymalna wiadomość Hello jest ograniczona przez hello liczby operacji można przejść przez to połączenie TCP.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-136">hello maximum message throughput is limited by hello number of operations that can go through this TCP connection.</span></span> <span data-ttu-id="fbcf3-137">Witaj przepływność, którą można uzyskać za pomocą pojedynczego fabryki znacznie zależy od czasami opóźnienia TCP i rozmiar wiadomości.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-137">hello throughput that can be obtained with a single factory varies greatly with TCP round-trip times and message size.</span></span> <span data-ttu-id="fbcf3-138">tooobtain wyższe przepływności, należy używać wielu fabryki obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-138">tooobtain higher throughput rates, you should use multiple messaging factories.</span></span>

## <a name="receive-mode"></a><span data-ttu-id="fbcf3-139">Tryb odbierania</span><span class="sxs-lookup"><span data-stu-id="fbcf3-139">Receive mode</span></span>
<span data-ttu-id="fbcf3-140">Podczas tworzenia kolejki lub subskrypcji klienta, można określić tryb odbierania: *blokady Peek* lub *odbieranie i usuwanie*.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-140">When creating a queue or subscription client, you can specify a receive mode: *Peek-lock* or *Receive and Delete*.</span></span> <span data-ttu-id="fbcf3-141">tryb odbierania domyślne Hello jest [PeekLock][PeekLock].</span><span class="sxs-lookup"><span data-stu-id="fbcf3-141">hello default receive mode is [PeekLock][PeekLock].</span></span> <span data-ttu-id="fbcf3-142">Podczas działania w tym trybie, powitania klienta wysyła tooreceive żądania z usługi Service Bus komunikat.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-142">When operating in this mode, hello client sends a request tooreceive a message from Service Bus.</span></span> <span data-ttu-id="fbcf3-143">Po odebraniu wiadomości powitania klienta hello wysyła wiadomość hello toocomplete żądania.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-143">After hello client has received hello message, it sends a request toocomplete hello message.</span></span>

<span data-ttu-id="fbcf3-144">Gdy ustawienie hello tryb odbierania zbyt[ReceiveAndDelete][ReceiveAndDelete], oba kroki są łączone w ramach pojedynczego żądania.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-144">When setting hello receive mode too[ReceiveAndDelete][ReceiveAndDelete], both steps are combined in a single request.</span></span> <span data-ttu-id="fbcf3-145">Zmniejsza to całkowita liczba operacji hello i może zwiększyć hello ogólną przepustowość wiadomości.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-145">This reduces hello overall number of operations, and can improve hello overall message throughput.</span></span> <span data-ttu-id="fbcf3-146">To są bardziej wydajne efektem hello ryzyko utraty wiadomości.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-146">This performance gain comes at hello risk of losing messages.</span></span>

<span data-ttu-id="fbcf3-147">Usługa Service Bus nie obsługuje transakcji dla operacji odbierania i usuwania.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-147">Service Bus does not support transactions for receive-and-delete operations.</span></span> <span data-ttu-id="fbcf3-148">Ponadto semantyki peek blokady są wymagane dla wszelkie scenariusze, w których powitania klienta chce toodefer lub [utraconych](service-bus-dead-letter-queues.md) wiadomości.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-148">In addition, peek-lock semantics are required for any scenarios in which hello client wants toodefer or [dead-letter](service-bus-dead-letter-queues.md) a message.</span></span>

## <a name="client-side-batching"></a><span data-ttu-id="fbcf3-149">Przetwarzanie wsadowe po stronie klienta</span><span class="sxs-lookup"><span data-stu-id="fbcf3-149">Client-side batching</span></span>
<span data-ttu-id="fbcf3-150">Przetwarzanie wsadowe po stronie klienta umożliwia kolejka lub temat klienta toodelay hello wysyłanie wiadomości w danym okresie czasu.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-150">Client-side batching enables a queue or topic client toodelay hello sending of a message for a certain period of time.</span></span> <span data-ttu-id="fbcf3-151">Jeśli klient hello wysyła dodatkowe komunikaty w trakcie tego okresu, przesyła wiadomości powitania w pojedynczej partii.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-151">If hello client sends additional messages during this time period, it transmits hello messages in a single batch.</span></span> <span data-ttu-id="fbcf3-152">Przetwarzanie wsadowe po stronie klienta powoduje także, że kolejka lub subskrypcji toobatch klienta wielu **Complete** żądań do pojedynczego żądania.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-152">Client-side batching also causes a queue or subscription client toobatch multiple **Complete** requests into a single request.</span></span> <span data-ttu-id="fbcf3-153">Tworzenie plików wsadowych jest dostępna tylko dla asynchronicznego **wysyłania** i **Complete** operacji.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-153">Batching is only available for asynchronous **Send** and **Complete** operations.</span></span> <span data-ttu-id="fbcf3-154">Operacje synchroniczne są natychmiast wysyłane toohello usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-154">Synchronous operations are immediately sent toohello Service Bus service.</span></span> <span data-ttu-id="fbcf3-155">Przetwarzanie wsadowe nie nastąpić peek ani operacji pobrania nie jest przetwarzanie wsadowe wykonywane przez klientów.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-155">Batching does not occur for peek or receive operations, nor does batching occur across clients.</span></span>

<span data-ttu-id="fbcf3-156">Domyślnie klient używa się w przedziale partii 20ms.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-156">By default, a client uses a batch interval of 20ms.</span></span> <span data-ttu-id="fbcf3-157">Można zmienić interwał partii hello ustawienie hello [BatchFlushInterval] [ BatchFlushInterval] właściwości przed utworzeniem hello fabryki obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-157">You can change hello batch interval by setting hello [BatchFlushInterval][BatchFlushInterval] property before creating hello messaging factory.</span></span> <span data-ttu-id="fbcf3-158">To ustawienie dotyczy wszystkich klientów, które zostały utworzone przy użyciu tej fabryki.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-158">This setting affects all clients that are created by this factory.</span></span>

<span data-ttu-id="fbcf3-159">Przetwarzanie wsadowe toodisable, ustaw hello [BatchFlushInterval] [ BatchFlushInterval] właściwości zbyt**TimeSpan.Zero**.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-159">toodisable batching, set hello [BatchFlushInterval][BatchFlushInterval] property too**TimeSpan.Zero**.</span></span> <span data-ttu-id="fbcf3-160">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="fbcf3-160">For example:</span></span>

```csharp
MessagingFactorySettings mfs = new MessagingFactorySettings();
mfs.TokenProvider = tokenProvider;
mfs.NetMessagingTransportSettings.BatchFlushInterval = TimeSpan.FromSeconds(0.05);
MessagingFactory messagingFactory = MessagingFactory.Create(namespaceUri, mfs);
```

<span data-ttu-id="fbcf3-161">Przetwarzanie wsadowe nie ma wpływu na powitania liczba rozliczeniowy operacji obsługi wiadomości i jest dostępna tylko w przypadku hello Protokół klienta usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-161">Batching does not affect hello number of billable messaging operations, and is available only for hello Service Bus client protocol.</span></span> <span data-ttu-id="fbcf3-162">Witaj protokołu HTTP nie obsługuje przetwarzanie wsadowe.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-162">hello HTTP protocol does not support batching.</span></span>

## <a name="batching-store-access"></a><span data-ttu-id="fbcf3-163">Przetwarzanie wsadowe dostęp do sklepu</span><span class="sxs-lookup"><span data-stu-id="fbcf3-163">Batching store access</span></span>
<span data-ttu-id="fbcf3-164">Przepływność hello tooincrease kolejki, tematu lub subskrypcji, usługi Service Bus partii wiele komunikatów, gdy zapisuje tooits wewnętrznego magazynu.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-164">tooincrease hello throughput of a queue, topic, or subscription, Service Bus batches multiple messages when it writes tooits internal store.</span></span> <span data-ttu-id="fbcf3-165">Jeśli jest włączona kolejka lub temat, zapisywania komunikatów w magazynie hello będzie można umieścić w partii.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-165">If enabled on a queue or topic, writing messages into hello store will be batched.</span></span> <span data-ttu-id="fbcf3-166">Jeśli włączona dla kolejki lub subskrypcji, usuwania komunikatów z magazynu hello będzie można umieścić w partii.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-166">If enabled on a queue or subscription, deleting messages from hello store will be batched.</span></span> <span data-ttu-id="fbcf3-167">Po włączeniu dostępu do sklepu wsadów dla jednostki usługi Service Bus opóźnienia operacji zapisu magazynu dotyczących tego obiektu w górę too20ms.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-167">If batched store access is enabled for an entity, Service Bus delays a store write operation regarding that entity by up too20ms.</span></span> <span data-ttu-id="fbcf3-168">Operacji dodatkowego magazynu, które występują w danym przedziale czasu są dodawane toohello partii.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-168">Additional store operations that occur during this interval are added toohello batch.</span></span> <span data-ttu-id="fbcf3-169">Umieścić w zadaniu wsadowym wpływa jedynie na dostęp do magazynu **wysyłania** i **Complete** operacji; odbierania nie wpływ na operacje.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-169">Batched store access only affects **Send** and **Complete** operations; receive operations are not affected.</span></span> <span data-ttu-id="fbcf3-170">Dostęp do sklepu wsadów jest właściwością w jednostce.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-170">Batched store access is a property on an entity.</span></span> <span data-ttu-id="fbcf3-171">Przetwarzanie wsadowe występuje we wszystkich jednostek, które umożliwiają dostęp do sklepu wsadowej.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-171">Batching occurs across all entities that enable batched store access.</span></span>

<span data-ttu-id="fbcf3-172">Podczas tworzenia nowej kolejki, tematu lub subskrypcji, dostęp do sklepu wsadów jest domyślnie włączona.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-172">When creating a new queue, topic or subscription, batched store access is enabled by default.</span></span> <span data-ttu-id="fbcf3-173">toodisable umieścić w zadaniu wsadowym dostęp do sklepu, zestaw hello [EnableBatchedOperations] [ EnableBatchedOperations] właściwości zbyt**false** przed utworzeniem hello jednostki.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-173">toodisable batched store access, set hello [EnableBatchedOperations][EnableBatchedOperations] property too**false** before creating hello entity.</span></span> <span data-ttu-id="fbcf3-174">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="fbcf3-174">For example:</span></span>

```csharp
QueueDescription qd = new QueueDescription();
qd.EnableBatchedOperations = false;
Queue q = namespaceManager.CreateQueue(qd);
```

<span data-ttu-id="fbcf3-175">Dostęp do sklepu wsadów nie ma wpływu na powitania liczba rozliczeniowy operacji obsługi wiadomości i jest właściwością kolejki, tematu lub subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-175">Batched store access does not affect hello number of billable messaging operations, and is a property of a queue, topic, or subscription.</span></span> <span data-ttu-id="fbcf3-176">Nie zależy od hello odbierania trybu i hello protokół, który jest używany między klientem a hello usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-176">It is independent of hello receive mode and hello protocol that is used between a client and hello Service Bus service.</span></span>

## <a name="prefetching"></a><span data-ttu-id="fbcf3-177">Odczyt z wyprzedzeniem</span><span class="sxs-lookup"><span data-stu-id="fbcf3-177">Prefetching</span></span>
<span data-ttu-id="fbcf3-178">Odczyt z wyprzedzeniem umożliwia hello kolejki lub subskrypcji klienta tooload dodatkowych komunikatów z usługi hello podczas wykonywania operacji odbierania.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-178">Prefetching enables hello queue or subscription client tooload additional messages from hello service when it performs a receive operation.</span></span> <span data-ttu-id="fbcf3-179">powitania klienta przechowuje te wiadomości w lokalnej pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-179">hello client stores these messages in a local cache.</span></span> <span data-ttu-id="fbcf3-180">rozmiar pamięci podręcznej hello Hello jest określany przez hello [QueueClient.PrefetchCount] [ QueueClient.PrefetchCount] lub [SubscriptionClient.PrefetchCount] [ SubscriptionClient.PrefetchCount] właściwości.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-180">hello size of hello cache is determined by hello [QueueClient.PrefetchCount][QueueClient.PrefetchCount] or [SubscriptionClient.PrefetchCount][SubscriptionClient.PrefetchCount] properties.</span></span> <span data-ttu-id="fbcf3-181">Każdy klient, który umożliwia odczyt z wyprzedzeniem zachowuje własną pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-181">Each client that enables prefetching maintains its own cache.</span></span> <span data-ttu-id="fbcf3-182">Pamięć podręczna nie jest współużytkowana przez klientów.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-182">A cache is not shared across clients.</span></span> <span data-ttu-id="fbcf3-183">Jeśli klient hello inicjuje operacji odbierania i pamięci podręcznej jest pusty, usługi hello przesyła partia komunikatów.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-183">If hello client initiates a receive operation and its cache is empty, hello service transmits a batch of messages.</span></span> <span data-ttu-id="fbcf3-184">Hello rozmiar wsadu hello jest równe hello rozmiar pamięci podręcznej hello lub 256 KB, w zależności od jest mniejsza.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-184">hello size of hello batch equals hello size of hello cache or 256 KB, whichever is smaller.</span></span> <span data-ttu-id="fbcf3-185">Hello pamięci podręcznej zawiera wiadomości powitania klienta inicjuje operacji odbierania, wiadomość hello jest pobierana z pamięci podręcznej hello.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-185">If hello client initiates a receive operation and hello cache contains a message, hello message is taken from hello cache.</span></span>

<span data-ttu-id="fbcf3-186">Gdy komunikat jest prefetched, komunikat prefetched hello hello usługi blokad.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-186">When a message is prefetched, hello service locks hello prefetched message.</span></span> <span data-ttu-id="fbcf3-187">W ten sposób prefetched wiadomość hello nie może zostać odebrany przez inny odbiornik.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-187">By doing this, hello prefetched message cannot be received by a different receiver.</span></span> <span data-ttu-id="fbcf3-188">Jeśli odbiornik hello nie może ukończyć wiadomość hello przed wygaśnięciem blokady hello, wiadomość hello staje się odbiorniki tooother dostępne.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-188">If hello receiver cannot complete hello message before hello lock expires, hello message becomes available tooother receivers.</span></span> <span data-ttu-id="fbcf3-189">Witaj prefetched kopia wiadomości powitania pozostaje w pamięci podręcznej hello.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-189">hello prefetched copy of hello message remains in hello cache.</span></span> <span data-ttu-id="fbcf3-190">Hello odbiornika, który wykorzystuje hello wygasł buforowane kopiowania otrzymają Wystąpił wyjątek podczas próby toocomplete tej wiadomości.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-190">hello receiver that consumes hello expired cached copy will receive an exception when it tries toocomplete that message.</span></span> <span data-ttu-id="fbcf3-191">Domyślnie blokady wiadomość hello wygasa po 60 sekund.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-191">By default, hello message lock expires after 60 seconds.</span></span> <span data-ttu-id="fbcf3-192">Ta wartość może być rozszerzonej too5 minut.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-192">This value can be extended too5 minutes.</span></span> <span data-ttu-id="fbcf3-193">zużycia hello tooprevent wygasłych komunikatów, rozmiar pamięci podręcznej hello powinien zawsze być mniejszy niż hello liczba wiadomości, które mogą być używane przez klienta w ramach interwał limitu czasu blokady hello.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-193">tooprevent hello consumption of expired messages, hello cache size should always be smaller than hello number of messages that can be consumed by a client within hello lock time-out interval.</span></span>

<span data-ttu-id="fbcf3-194">Korzystając z okresu ważności blokady domyślne hello 60 sekund, wartość jest dobrą [SubscriptionClient.PrefetchCount] [ SubscriptionClient.PrefetchCount] hello 20 razy maksymalny przetwarza stawki wszystkich odbiorników hello fabryki.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-194">When using hello default lock expiration of 60 seconds, a good value for [SubscriptionClient.PrefetchCount][SubscriptionClient.PrefetchCount] is 20 times hello maximum processing rates of all receivers of hello factory.</span></span> <span data-ttu-id="fbcf3-195">Na przykład fabrykę tworzy odbiorniki 3, a każdy odbiorca może przetwarzać się too10 komunikatów na sekundę.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-195">For example, a factory creates 3 receivers, and each receiver can process up too10 messages per second.</span></span> <span data-ttu-id="fbcf3-196">Liczba pobierania z wyprzedzeniem Hello nie może przekraczać 20 X 3 X 10 = 600.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-196">hello prefetch count should not exceed 20 X 3 X 10 = 600.</span></span> <span data-ttu-id="fbcf3-197">Domyślnie [QueueClient.PrefetchCount] [ QueueClient.PrefetchCount] jest zestaw too0, co oznacza pobrane nie dodatkowe wiadomości powitania usługi.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-197">By default, [QueueClient.PrefetchCount][QueueClient.PrefetchCount] is set too0, which means that no additional messages are fetched from hello service.</span></span>

<span data-ttu-id="fbcf3-198">Odczyt z wyprzedzeniem zwiększa ogólną przepustowość kolejki lub subskrypcji Witaj, ponieważ redukuje hello ogólna liczba operacje dotyczące komunikatów lub rund wiadomości.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-198">Prefetching messages increases hello overall throughput for a queue or subscription because it reduces hello overall number of message operations, or round trips.</span></span> <span data-ttu-id="fbcf3-199">Pobieranie pierwszą wiadomość hello, jednak będzie trwało dłużej (powodu toohello zwiększyć rozmiar komunikatu).</span><span class="sxs-lookup"><span data-stu-id="fbcf3-199">Fetching hello first message, however, will take longer (due toohello increased message size).</span></span> <span data-ttu-id="fbcf3-200">Odbieranie komunikatów prefetched będzie przebiegać szybciej, ponieważ komunikaty te zostały już pobrane przez powitania klienta.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-200">Receiving prefetched messages will be faster because these messages have already been downloaded by hello client.</span></span>

<span data-ttu-id="fbcf3-201">Hello time to live (TTL) właściwości wiadomości jest sprawdzana przez serwer hello w czasie hello hello serwer wysyła klientowi toohello wiadomość hello.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-201">hello time-to-live (TTL) property of a message is checked by hello server at hello time hello server sends hello message toohello client.</span></span> <span data-ttu-id="fbcf3-202">Po odebraniu wiadomości powitania powitania klienta nie sprawdza właściwości czas wygaśnięcia wiadomości powitania.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-202">hello client does not check hello message’s TTL property when hello message is received.</span></span> <span data-ttu-id="fbcf3-203">Zamiast tego mogą być odbierane wiadomości powitania nawet, jeśli czas wygaśnięcia wiadomości powitania minął podczas wiadomości powitania był buforowany przez powitania klienta.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-203">Instead, hello message can be received even if hello message’s TTL has passed while hello message was cached by hello client.</span></span>

<span data-ttu-id="fbcf3-204">Odczyt z wyprzedzeniem nie ma wpływu na powitania liczba rozliczeniowy operacji obsługi wiadomości i jest dostępna tylko w przypadku hello Protokół klienta usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-204">Prefetching does not affect hello number of billable messaging operations, and is available only for hello Service Bus client protocol.</span></span> <span data-ttu-id="fbcf3-205">Witaj protokołu HTTP nie obsługuje odczyt z wyprzedzeniem.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-205">hello HTTP protocol does not support prefetching.</span></span> <span data-ttu-id="fbcf3-206">Odczyt z wyprzedzeniem jest dostępna dla operacji odbioru synchroniczne i asynchroniczne.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-206">Prefetching is available for both synchronous and asynchronous receive operations.</span></span>

## <a name="express-queues-and-topics"></a><span data-ttu-id="fbcf3-207">Express kolejek i tematów</span><span class="sxs-lookup"><span data-stu-id="fbcf3-207">Express queues and topics</span></span>

<span data-ttu-id="fbcf3-208">Jednostki ekspresowe włączyć uzyskać wysoką przepustowość i mniejsze opóźnienia scenariuszy i są obsługiwane tylko w warstwie standardowa wiadomości powitania.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-208">Express entities enable high throughput and reduced latency scenarios, and are supported only in hello Standard messaging tier.</span></span> <span data-ttu-id="fbcf3-209">Jednostki utworzone w [przestrzeniach nazw warstwy Premium](service-bus-premium-messaging.md) nie obsługują opcji express hello.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-209">Entities created in [Premium namespaces](service-bus-premium-messaging.md) do not support hello express option.</span></span> <span data-ttu-id="fbcf3-210">Z jednostki ekspresowe Jeśli komunikat jest wysyłany tooa kolejka lub temat, wiadomość hello nie są natychmiast przechowywane w magazynie obsługi komunikatów hello.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-210">With express entities, if a message is sent tooa queue or topic, hello message is not immediately stored in hello messaging store.</span></span> <span data-ttu-id="fbcf3-211">Zamiast tego są buforowane w pamięci.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-211">Instead, it is cached in memory.</span></span> <span data-ttu-id="fbcf3-212">Jeśli wiadomość pozostaje w kolejce hello więcej niż kilka sekund, są automatycznie zapisywane toostable magazynu, w związku z tym ochrony przed utratą powodu tooan awarii.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-212">If a message remains in hello queue for more than a few seconds, it is automatically written toostable storage, thus protecting it against loss due tooan outage.</span></span> <span data-ttu-id="fbcf3-213">Pisanie wiadomości powitania w pamięci podręcznej zwiększa przepustowość i zmniejsza opóźnienia, ponieważ nie istnieje żadne toostable dostępu do magazynu na wiadomość powitania czasu hello są wysyłane.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-213">Writing hello message into a memory cache increases throughput and reduces latency because there is no access toostable storage at hello time hello message is sent.</span></span> <span data-ttu-id="fbcf3-214">Komunikaty, które są używane w ciągu kilku sekund nie są zapisywane toohello magazynu do obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-214">Messages that are consumed within a few seconds are not written toohello messaging store.</span></span> <span data-ttu-id="fbcf3-215">Witaj poniższy przykład tworzy express tematu.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-215">hello following example creates an express topic.</span></span>

```csharp
TopicDescription td = new TopicDescription(TopicName);
td.EnableExpress = true;
namespaceManager.CreateTopic(td);
```

<span data-ttu-id="fbcf3-216">Jeśli jednostki ekspresowe tooan jest wysyłany komunikat zawierający krytyczne informacje, które nie mogą być utracone, nadawca hello wymusić usługi Service Bus tooimmediately utrwalić magazynu toostable wiadomość hello przez ustawienie hello [ForcePersistence] [ ForcePersistence] właściwości zbyt**true**.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-216">If a message containing critical information that must not be lost is sent tooan express entity, hello sender can force Service Bus tooimmediately persist hello message toostable storage by setting hello [ForcePersistence][ForcePersistence] property too**true**.</span></span>

> [!NOTE]
> <span data-ttu-id="fbcf3-217">Jednostki ekspresowe nie obsługuje transakcji.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-217">Express entities do not support transactions.</span></span>

## <a name="use-of-partitioned-queues-or-topics"></a><span data-ttu-id="fbcf3-218">Korzystanie z podzielonym na partycje kolejki i tematy</span><span class="sxs-lookup"><span data-stu-id="fbcf3-218">Use of partitioned queues or topics</span></span>
<span data-ttu-id="fbcf3-219">Wewnętrznie używa usługi Service Bus hello tego samego węzła i wiadomości tooprocess magazynu i przechowywać wszystkie komunikaty dla jednostki obsługi komunikatów (kolejki lub tematu).</span><span class="sxs-lookup"><span data-stu-id="fbcf3-219">Internally, Service Bus uses hello same node and messaging store tooprocess and store all messages for a messaging entity (queue or topic).</span></span> <span data-ttu-id="fbcf3-220">Partycjonowane kolejka lub temat, na powitania drugiej strony, będzie rozmieszczona na wielu węzłach i magazyny obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-220">A partitioned queue or topic, on hello other hand, is distributed across multiple nodes and messaging stores.</span></span> <span data-ttu-id="fbcf3-221">Partycjonowane kolejek i tematów nie tylko uzyskanie wyższej przepustowości niż regularne kolejek i tematów, charakteryzują wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-221">Partitioned queues and topics not only yield a higher throughput than regular queues and topics, they also exhibit superior availability.</span></span> <span data-ttu-id="fbcf3-222">toocreate partycjonowane jednostki, zestaw hello [parametr EnablePartitioning] [ EnablePartitioning] właściwości zbyt**true**, jak pokazano w hello poniższy przykład.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-222">toocreate a partitioned entity, set hello [EnablePartitioning][EnablePartitioning] property too**true**, as shown in hello following example.</span></span> <span data-ttu-id="fbcf3-223">Aby uzyskać więcej informacji na temat partycjonowane jednostki, zobacz [partycjonowane jednostki do obsługi komunikatów][Partitioned messaging entities].</span><span class="sxs-lookup"><span data-stu-id="fbcf3-223">For more information about partitioned entities, see [Partitioned messaging entities][Partitioned messaging entities].</span></span>

```csharp
// Create partitioned queue.
QueueDescription qd = new QueueDescription(QueueName);
qd.EnablePartitioning = true;
namespaceManager.CreateQueue(qd);
```

## <a name="use-of-multiple-queues"></a><span data-ttu-id="fbcf3-224">Korzystanie z wielu kolejek</span><span class="sxs-lookup"><span data-stu-id="fbcf3-224">Use of multiple queues</span></span>

<span data-ttu-id="fbcf3-225">Jeśli nie jest możliwe toouse, który partycjonowanej kolejka lub temat lub hello oczekuje się, że obciążenie nie mogą być obsługiwane przez partycjonowanej kolejka lub temat, należy użyć wiele jednostek obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-225">If it is not possible toouse a partitioned queue or topic, or hello expected load cannot be handled by a single partitioned queue or topic, you must use multiple messaging entities.</span></span> <span data-ttu-id="fbcf3-226">Używając wiele jednostek, Utwórz dedykowane klienta dla każdej jednostki, zamiast hello sam klienta dla wszystkich jednostek.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-226">When using multiple entities, create a dedicated client for each entity, instead of using hello same client for all entities.</span></span>

## <a name="development-and-testing-features"></a><span data-ttu-id="fbcf3-227">Programowanie i testowanie funkcji</span><span class="sxs-lookup"><span data-stu-id="fbcf3-227">Development and testing features</span></span>

<span data-ttu-id="fbcf3-228">Usługa Service Bus ma jedną funkcję używanego specjalnie z myślą o programowanie którego **nie mogą być używane w konfiguracjach produkcji**: [TopicDescription.EnableFilteringMessagesBeforePublishing][].</span><span class="sxs-lookup"><span data-stu-id="fbcf3-228">Service Bus has one feature that is used specifically for development which **should never be used in production configurations**: [TopicDescription.EnableFilteringMessagesBeforePublishing][].</span></span>

<span data-ttu-id="fbcf3-229">Po dodaniu tematu toohello nowe reguły lub filtrów, można użyć [TopicDescription.EnableFilteringMessagesBeforePublishing][] tooverify, który hello nowe wyrażenie filtru działa zgodnie z oczekiwaniami.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-229">When new rules or filters are added toohello topic, you can use [TopicDescription.EnableFilteringMessagesBeforePublishing][] tooverify that hello new filter expression is working as expected.</span></span>

## <a name="scenarios"></a><span data-ttu-id="fbcf3-230">Scenariusze</span><span class="sxs-lookup"><span data-stu-id="fbcf3-230">Scenarios</span></span>
<span data-ttu-id="fbcf3-231">Witaj poniższych sekcjach opisano typowe scenariusze obsługi wiadomości i przedstawiają hello preferowanych ustawień usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-231">hello following sections describe typical messaging scenarios and outline hello preferred Service Bus settings.</span></span> <span data-ttu-id="fbcf3-232">Przepływności są sklasyfikowane jako mały (mniej niż 1 komunikatów na sekundę), średni (1 komunikatów na sekundę lub większą, ale mniej niż 100 komunikatów na sekundę) i wysoki (100 wiadomości/sekundę lub większą).</span><span class="sxs-lookup"><span data-stu-id="fbcf3-232">Throughput rates are classified as small (less than 1 message/second), moderate (1 message/second or greater but less than 100 messages/second) and high (100 messages/second or greater).</span></span> <span data-ttu-id="fbcf3-233">Hello liczby klientów są sklasyfikowane jako mała liczba godzin (5 lub mniej), umiarkowany (więcej niż 5 mniejsza niż lub równy too20) i duże (więcej niż 20).</span><span class="sxs-lookup"><span data-stu-id="fbcf3-233">hello number of clients are classified as small (5 or fewer), moderate (more than 5 but less than or equal too20), and large (more than 20).</span></span>

### <a name="high-throughput-queue"></a><span data-ttu-id="fbcf3-234">Kolejki wysokiej przepustowości</span><span class="sxs-lookup"><span data-stu-id="fbcf3-234">High-throughput queue</span></span>
<span data-ttu-id="fbcf3-235">Cel: Zmaksymalizować przepustowość hello pojedynczej kolejki.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-235">Goal: Maximize hello throughput of a single queue.</span></span> <span data-ttu-id="fbcf3-236">Liczba Hello nadawcami a odbiornikami jest mała.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-236">hello number of senders and receivers is small.</span></span>

* <span data-ttu-id="fbcf3-237">Użyj kolejki partycjonowanej większą wydajność i dostępność.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-237">Use a partitioned queue for improved performance and availability.</span></span>
* <span data-ttu-id="fbcf3-238">tooincrease hello ogólną szybkość wysyłania w kolejce hello, użyj wielu nadawców toocreate fabryk komunikatów.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-238">tooincrease hello overall send rate into hello queue, use multiple message factories toocreate senders.</span></span> <span data-ttu-id="fbcf3-239">Dla każdego nadawcy użyj operacji asynchronicznych lub wiele wątków.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-239">For each sender, use asynchronous operations or multiple threads.</span></span>
* <span data-ttu-id="fbcf3-240">Witaj tooincrease ogólną szybkość odbierania z kolejki hello, użyj wieloma odbiornikami toocreate fabryk komunikatów.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-240">tooincrease hello overall receive rate from hello queue, use multiple message factories toocreate receivers.</span></span>
* <span data-ttu-id="fbcf3-241">Użyj zaletą tootake operacje asynchroniczne przetwarzanie wsadowe po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-241">Use asynchronous operations tootake advantage of client-side batching.</span></span>
* <span data-ttu-id="fbcf3-242">Ustaw hello przetwarzanie wsadowe interwału too50ms tooreduce hello liczba transmisji protokołu klienta usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-242">Set hello batching interval too50ms tooreduce hello number of Service Bus client protocol transmissions.</span></span> <span data-ttu-id="fbcf3-243">Użycie wielu nadawców zwiększyć hello przetwarzanie wsadowe too100ms interwału.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-243">If multiple senders are used, increase hello batching interval too100ms.</span></span>
* <span data-ttu-id="fbcf3-244">Pozostaw włączony dostęp do magazynu wsadowej.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-244">Leave batched store access enabled.</span></span> <span data-ttu-id="fbcf3-245">Powoduje to zwiększenie hello ogólną szybkość z jaką komunikaty mogą być zapisywane w kolejce hello.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-245">This increases hello overall rate at which messages can be written into hello queue.</span></span>
* <span data-ttu-id="fbcf3-246">Ustaw hello pobierania z wyprzedzeniem liczba too20 razy szybkości przetwarzania maksymalną hello wszystkich odbiorników fabryki.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-246">Set hello prefetch count too20 times hello maximum processing rates of all receivers of a factory.</span></span> <span data-ttu-id="fbcf3-247">Pozwala to zmniejszyć liczbę hello transmisji protokołu klienta usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-247">This reduces hello number of Service Bus client protocol transmissions.</span></span>

### <a name="multiple-high-throughput-queues"></a><span data-ttu-id="fbcf3-248">Wielu kolejek wysokiej przepustowości</span><span class="sxs-lookup"><span data-stu-id="fbcf3-248">Multiple high-throughput queues</span></span>
<span data-ttu-id="fbcf3-249">Cel: Zmaksymalizować ogólną przepustowość wielu kolejek.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-249">Goal: Maximize overall throughput of multiple queues.</span></span> <span data-ttu-id="fbcf3-250">Przepływność Hello pojedynczej kolejki jest średni czy wysoki.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-250">hello throughput of an individual queue is moderate or high.</span></span>

<span data-ttu-id="fbcf3-251">Maksymalna przepustowość tooobtain wiele kolejek, użyj ustawień hello opisane przepływność hello toomaximize pojedynczej kolejki.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-251">tooobtain maximum throughput across multiple queues, use hello settings outlined toomaximize hello throughput of a single queue.</span></span> <span data-ttu-id="fbcf3-252">Ponadto przy użyciu różnych fabryki toocreate klientów, które wysłać lub odebrać z różnych kolejek.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-252">In addition, use different factories toocreate clients that send or receive from different queues.</span></span>

### <a name="low-latency-queue"></a><span data-ttu-id="fbcf3-253">Małe opóźnienia kolejki</span><span class="sxs-lookup"><span data-stu-id="fbcf3-253">Low latency queue</span></span>
<span data-ttu-id="fbcf3-254">Cel: Zminimalizować czas oczekiwania na trasie kolejka lub temat.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-254">Goal: Minimize end-to-end latency of a queue or topic.</span></span> <span data-ttu-id="fbcf3-255">Liczba Hello nadawcami a odbiornikami jest mała.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-255">hello number of senders and receivers is small.</span></span> <span data-ttu-id="fbcf3-256">Przepływność Hello kolejki hello jest mała lub średniego.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-256">hello throughput of hello queue is small or moderate.</span></span>

* <span data-ttu-id="fbcf3-257">Użyj kolejki podzielonym na partycje do zwiększenia dostępności.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-257">Use a partitioned queue for improved availability.</span></span>
* <span data-ttu-id="fbcf3-258">Wyłącz przetwarzanie wsadowe po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-258">Disable client-side batching.</span></span> <span data-ttu-id="fbcf3-259">powitania klienta natychmiast wysyła komunikat.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-259">hello client immediately sends a message.</span></span>
* <span data-ttu-id="fbcf3-260">Wyłącz dostęp do sklepu wsadowej.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-260">Disable batched store access.</span></span> <span data-ttu-id="fbcf3-261">Usługa Hello natychmiast zapisuje magazyn toohello wiadomości powitania.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-261">hello service immediately writes hello message toohello store.</span></span>
* <span data-ttu-id="fbcf3-262">Jeśli przy użyciu jednego klienta, należy ustawić hello pobierania z wyprzedzeniem liczba too20 razy hello szybkości przetwarzania hello odbiornika.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-262">If using a single client, set hello prefetch count too20 times hello processing rate of hello receiver.</span></span> <span data-ttu-id="fbcf3-263">Jeśli wiele wiadomości do kolejki hello na powitania sam czas hello Protokół klienta usługi Service Bus przesyła je na powitania tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-263">If multiple messages arrive at hello queue at hello same time, hello Service Bus client protocol transmits them all at hello same time.</span></span> <span data-ttu-id="fbcf3-264">Powitania klienta odebrania następnej wiadomości powitania ten komunikat jest już w lokalnej pamięci podręcznej hello.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-264">When hello client receives hello next message, that message is already in hello local cache.</span></span> <span data-ttu-id="fbcf3-265">pamięć podręczna Hello powinna być niewielka.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-265">hello cache should be small.</span></span>
* <span data-ttu-id="fbcf3-266">Jeśli używasz wielu klientów, należy ustawić too0 liczba pobierania z wyprzedzeniem hello.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-266">If using multiple clients, set hello prefetch count too0.</span></span> <span data-ttu-id="fbcf3-267">Dzięki temu hello drugi klient może odbierać hello drugi komunikat, gdy pierwszy klient hello nadal przetwarza pierwszą wiadomość hello.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-267">By doing this, hello second client can receive hello second message while hello first client is still processing hello first message.</span></span>

### <a name="queue-with-a-large-number-of-senders"></a><span data-ttu-id="fbcf3-268">Kolejka z dużą liczbą nadawców</span><span class="sxs-lookup"><span data-stu-id="fbcf3-268">Queue with a large number of senders</span></span>
<span data-ttu-id="fbcf3-269">Cel: Zmaksymalizować przepustowość kolejka lub temat z dużą liczbą nadawcy.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-269">Goal: Maximize throughput of a queue or topic with a large number of senders.</span></span> <span data-ttu-id="fbcf3-270">Każdy Nadawca wysyła komunikaty z wartością średnią.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-270">Each sender sends messages with a moderate rate.</span></span> <span data-ttu-id="fbcf3-271">Witaj liczba odbiorcy jest mała.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-271">hello number of receivers is small.</span></span>

<span data-ttu-id="fbcf3-272">Usługa Service Bus umożliwia się tooa równoczesnych połączeń too1000 jednostki do obsługi komunikatów (lub 5000 za pomocą protokołu AMQP).</span><span class="sxs-lookup"><span data-stu-id="fbcf3-272">Service Bus enables up too1000 concurrent connections tooa messaging entity (or 5000 using AMQP).</span></span> <span data-ttu-id="fbcf3-273">Ten limit jest wymuszane na poziomie przestrzeni nazw hello i kolejek/tematy/subskrypcje są ograniczone przez hello limit równoczesnych połączeń na przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-273">This limit is enforced at hello namespace level, and queues/topics/subscriptions are capped by hello limit of concurrent connections per namespace.</span></span> <span data-ttu-id="fbcf3-274">W przypadku kolejek ta liczba jest udostępniana między nadawcami a odbiornikami.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-274">For queues, this number is shared between senders and receivers.</span></span> <span data-ttu-id="fbcf3-275">Jeśli wszystkie połączenia 1000 są wymagane dla nadawców, należy zastąpić hello kolejki z tematu i jedną subskrypcją.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-275">If all 1000 connections are required for senders, you should replace hello queue with a topic and a single subscription.</span></span> <span data-ttu-id="fbcf3-276">Temat akceptuje się too1000 równoczesnych połączeń od nadawcy, natomiast subskrypcji hello akceptuje dodatkowych 1000 równoczesnych połączeń od odbiorcy.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-276">A topic accepts up too1000 concurrent connections from senders, whereas hello subscription accepts an additional 1000 concurrent connections from receivers.</span></span> <span data-ttu-id="fbcf3-277">Jeśli wymaganych jest więcej niż 1000 równoczesnych nadawców nadawców hello należy wysłać wiadomości toohello protokołu usługi Service Bus za pośrednictwem protokołu HTTP.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-277">If more than 1000 concurrent senders are required, hello senders should send messages toohello Service Bus protocol via HTTP.</span></span>

<span data-ttu-id="fbcf3-278">Przepływność toomaximize hello następujące:</span><span class="sxs-lookup"><span data-stu-id="fbcf3-278">toomaximize throughput, do hello following:</span></span>

* <span data-ttu-id="fbcf3-279">Użyj kolejki partycjonowanej większą wydajność i dostępność.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-279">Use a partitioned queue for improved performance and availability.</span></span>
* <span data-ttu-id="fbcf3-280">Jeśli każdego nadawcy znajduje się w ramach innego procesu, należy użyć tylko jednej fabryki na proces.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-280">If each sender resides in a different process, use only a single factory per process.</span></span>
* <span data-ttu-id="fbcf3-281">Użyj zaletą tootake operacje asynchroniczne przetwarzanie wsadowe po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-281">Use asynchronous operations tootake advantage of client-side batching.</span></span>
* <span data-ttu-id="fbcf3-282">Użyj domyślnej hello przetwarzanie wsadowe interwał 20ms tooreduce hello liczba transmisji protokołu klienta usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-282">Use hello default batching interval of 20ms tooreduce hello number of Service Bus client protocol transmissions.</span></span>
* <span data-ttu-id="fbcf3-283">Pozostaw włączony dostęp do magazynu wsadowej.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-283">Leave batched store access enabled.</span></span> <span data-ttu-id="fbcf3-284">Powoduje to zwiększenie hello ogólną szybkość z jaką komunikaty mogą być zapisywane na powitania kolejka lub temat.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-284">This increases hello overall rate at which messages can be written into hello queue or topic.</span></span>
* <span data-ttu-id="fbcf3-285">Ustaw hello pobierania z wyprzedzeniem liczba too20 razy szybkości przetwarzania maksymalną hello wszystkich odbiorników fabryki.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-285">Set hello prefetch count too20 times hello maximum processing rates of all receivers of a factory.</span></span> <span data-ttu-id="fbcf3-286">Pozwala to zmniejszyć liczbę hello transmisji protokołu klienta usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-286">This reduces hello number of Service Bus client protocol transmissions.</span></span>

### <a name="queue-with-a-large-number-of-receivers"></a><span data-ttu-id="fbcf3-287">Kolejka z wieloma odbiornikami</span><span class="sxs-lookup"><span data-stu-id="fbcf3-287">Queue with a large number of receivers</span></span>
<span data-ttu-id="fbcf3-288">Cel: Zmaksymalizować hello szybkość kolejki lub subskrypcji z dużą liczbą odbiorników odbioru.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-288">Goal: Maximize hello receive rate of a queue or subscription with a large number of receivers.</span></span> <span data-ttu-id="fbcf3-289">Każdy odbiorca odbiera komunikaty z umiarkowane szybkością.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-289">Each receiver receives messages at a moderate rate.</span></span> <span data-ttu-id="fbcf3-290">Liczba Hello nadawców jest mała.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-290">hello number of senders is small.</span></span>

<span data-ttu-id="fbcf3-291">Usługa Service Bus umożliwia się too1000 równoczesnych połączeń tooan jednostki.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-291">Service Bus enables up too1000 concurrent connections tooan entity.</span></span> <span data-ttu-id="fbcf3-292">Jeśli kolejka wymaga więcej niż 1000 odbiorcy, należy zastąpić hello kolejki z tematu i subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-292">If a queue requires more than 1000 receivers, you should replace hello queue with a topic and multiple subscriptions.</span></span> <span data-ttu-id="fbcf3-293">Każda subskrypcja może obsługiwać się too1000 równoczesnych połączeń.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-293">Each subscription can support up too1000 concurrent connections.</span></span> <span data-ttu-id="fbcf3-294">Alternatywnie odbiorcy mają dostęp do kolejki hello za pośrednictwem hello protokołu HTTP.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-294">Alternatively, receivers can access hello queue via hello HTTP protocol.</span></span>

<span data-ttu-id="fbcf3-295">Przepływność toomaximize hello następujące:</span><span class="sxs-lookup"><span data-stu-id="fbcf3-295">toomaximize throughput, do hello following:</span></span>

* <span data-ttu-id="fbcf3-296">Użyj kolejki partycjonowanej większą wydajność i dostępność.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-296">Use a partitioned queue for improved performance and availability.</span></span>
* <span data-ttu-id="fbcf3-297">Każdy odbiorca znajduje się w ramach innego procesu, należy użyć tylko jednej fabryki na proces.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-297">If each receiver resides in a different process, use only a single factory per process.</span></span>
* <span data-ttu-id="fbcf3-298">Odbiorniki można używać operacji synchroniczna lub asynchroniczna.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-298">Receivers can use synchronous or asynchronous operations.</span></span> <span data-ttu-id="fbcf3-299">Podany umiarkowany hello szybkość poszczególnych odbiornika odbioru, wykonać żądanie przetwarzanie wsadowe po stronie klienta nie ma wpływu na przepływność odbiorcy.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-299">Given hello moderate receive rate of an individual receiver, client-side batching of a Complete request does not affect receiver throughput.</span></span>
* <span data-ttu-id="fbcf3-300">Pozostaw włączony dostęp do magazynu wsadowej.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-300">Leave batched store access enabled.</span></span> <span data-ttu-id="fbcf3-301">Zmniejsza to hello całkowite obciążenie hello jednostki.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-301">This reduces hello overall load of hello entity.</span></span> <span data-ttu-id="fbcf3-302">Zmniejsza również hello ogólną szybkość z jaką komunikaty mogą być zapisywane na powitania kolejka lub temat.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-302">It also reduces hello overall rate at which messages can be written into hello queue or topic.</span></span>
* <span data-ttu-id="fbcf3-303">Ustaw wartość małej liczby tooa hello pobierania z wyprzedzeniem (na przykład PrefetchCount = 10).</span><span class="sxs-lookup"><span data-stu-id="fbcf3-303">Set hello prefetch count tooa small value (for example, PrefetchCount = 10).</span></span> <span data-ttu-id="fbcf3-304">Zapobiega to odbiorcy ze stanu bezczynności podczas innym odbiornikom ma dużą liczbę komunikatów w pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-304">This prevents receivers from being idle while other receivers have large numbers of messages cached.</span></span>

### <a name="topic-with-a-small-number-of-subscriptions"></a><span data-ttu-id="fbcf3-305">Temat z małą liczbą subskrypcji</span><span class="sxs-lookup"><span data-stu-id="fbcf3-305">Topic with a small number of subscriptions</span></span>
<span data-ttu-id="fbcf3-306">Cel: Zmaksymalizować przepustowość hello tematu z mniejszą liczbą subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-306">Goal: Maximize hello throughput of a topic with a small number of subscriptions.</span></span> <span data-ttu-id="fbcf3-307">Komunikat jest odbierany przez wiele subskrypcji, co oznacza, że hello łączyć odbierania współczynnik powyżej wszystkie subskrypcje jest większy niż hello szybkość wysyłania.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-307">A message is received by many subscriptions, which means hello combined receive rate over all subscriptions is larger than hello send rate.</span></span> <span data-ttu-id="fbcf3-308">Liczba Hello nadawców jest mała.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-308">hello number of senders is small.</span></span> <span data-ttu-id="fbcf3-309">Witaj liczba odbiorcy dla subskrypcji jest mała.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-309">hello number of receivers per subscription is small.</span></span>

<span data-ttu-id="fbcf3-310">Przepływność toomaximize hello następujące:</span><span class="sxs-lookup"><span data-stu-id="fbcf3-310">toomaximize throughput, do hello following:</span></span>

* <span data-ttu-id="fbcf3-311">Skorzystaj z podzielonym na partycje tematu, aby uzyskać lepszą wydajność i dostępność.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-311">Use a partitioned topic for improved performance and availability.</span></span>
* <span data-ttu-id="fbcf3-312">tooincrease hello ogólną szybkość wysyłania w temacie hello, użyj wielu nadawców toocreate fabryk komunikatów.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-312">tooincrease hello overall send rate into hello topic, use multiple message factories toocreate senders.</span></span> <span data-ttu-id="fbcf3-313">Dla każdego nadawcy użyj operacji asynchronicznych lub wiele wątków.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-313">For each sender, use asynchronous operations or multiple threads.</span></span>
* <span data-ttu-id="fbcf3-314">Witaj tooincrease ogólną szybkość odbierania z subskrypcji, użyj wieloma odbiornikami toocreate fabryk komunikatów.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-314">tooincrease hello overall receive rate from a subscription, use multiple message factories toocreate receivers.</span></span> <span data-ttu-id="fbcf3-315">Dla każdego adresata użyj operacji asynchronicznych lub wiele wątków.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-315">For each receiver, use asynchronous operations or multiple threads.</span></span>
* <span data-ttu-id="fbcf3-316">Użyj zaletą tootake operacje asynchroniczne przetwarzanie wsadowe po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-316">Use asynchronous operations tootake advantage of client-side batching.</span></span>
* <span data-ttu-id="fbcf3-317">Użyj domyślnej hello przetwarzanie wsadowe interwał 20ms tooreduce hello liczba transmisji protokołu klienta usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-317">Use hello default batching interval of 20ms tooreduce hello number of Service Bus client protocol transmissions.</span></span>
* <span data-ttu-id="fbcf3-318">Pozostaw włączony dostęp do magazynu wsadowej.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-318">Leave batched store access enabled.</span></span> <span data-ttu-id="fbcf3-319">Powoduje to zwiększenie hello ogólną szybkość z jaką komunikaty mogą być zapisywane w temacie hello.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-319">This increases hello overall rate at which messages can be written into hello topic.</span></span>
* <span data-ttu-id="fbcf3-320">Ustaw hello pobierania z wyprzedzeniem liczba too20 razy szybkości przetwarzania maksymalną hello wszystkich odbiorników fabryki.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-320">Set hello prefetch count too20 times hello maximum processing rates of all receivers of a factory.</span></span> <span data-ttu-id="fbcf3-321">Pozwala to zmniejszyć liczbę hello transmisji protokołu klienta usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-321">This reduces hello number of Service Bus client protocol transmissions.</span></span>

### <a name="topic-with-a-large-number-of-subscriptions"></a><span data-ttu-id="fbcf3-322">Temat z dużą liczbą subskrypcji</span><span class="sxs-lookup"><span data-stu-id="fbcf3-322">Topic with a large number of subscriptions</span></span>
<span data-ttu-id="fbcf3-323">Cel: Zmaksymalizować przepustowość hello tematu z dużą liczbą subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-323">Goal: Maximize hello throughput of a topic with a large number of subscriptions.</span></span> <span data-ttu-id="fbcf3-324">Komunikat jest odbierany przez wiele subskrypcji, co oznacza, że hello łączyć odbierania współczynnik powyżej wszystkie subskrypcje jest znacznie większa niż częstotliwość wysyłania hello.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-324">A message is received by many subscriptions, which means hello combined receive rate over all subscriptions is much larger than hello send rate.</span></span> <span data-ttu-id="fbcf3-325">Liczba Hello nadawców jest mała.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-325">hello number of senders is small.</span></span> <span data-ttu-id="fbcf3-326">Witaj liczba odbiorcy dla subskrypcji jest mała.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-326">hello number of receivers per subscription is small.</span></span>

<span data-ttu-id="fbcf3-327">Tematy z dużą liczbą subskrypcji zwykle ujawnić niski ogólną przepustowość, ile wszystkie komunikaty są routingiem tooall subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-327">Topics with a large number of subscriptions typically expose a low overall throughput if all messages are routed tooall subscriptions.</span></span> <span data-ttu-id="fbcf3-328">Jest to spowodowane hello fakt, że każdy komunikat jest odbierany wiele razy, a wszystkie komunikaty, które znajdują się w temacie i wszystkie jego subskrypcje są przechowywane w hello sam magazynu.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-328">This is caused by hello fact that each message is received many times, and all messages that are contained in a topic and all its subscriptions are stored in hello same store.</span></span> <span data-ttu-id="fbcf3-329">Zakłada się, liczba hello nadawców i liczby odbiorników dla subskrypcji jest mała.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-329">It is assumed that hello number of senders and number of receivers per subscription is small.</span></span> <span data-ttu-id="fbcf3-330">Usługa Service Bus obsługuje too2, 000 subskrypcji na temat.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-330">Service Bus supports up too2,000 subscriptions per topic.</span></span>

<span data-ttu-id="fbcf3-331">Przepływność toomaximize hello następujące:</span><span class="sxs-lookup"><span data-stu-id="fbcf3-331">toomaximize throughput, do hello following:</span></span>

* <span data-ttu-id="fbcf3-332">Skorzystaj z podzielonym na partycje tematu, aby uzyskać lepszą wydajność i dostępność.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-332">Use a partitioned topic for improved performance and availability.</span></span>
* <span data-ttu-id="fbcf3-333">Użyj zaletą tootake operacje asynchroniczne przetwarzanie wsadowe po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-333">Use asynchronous operations tootake advantage of client-side batching.</span></span>
* <span data-ttu-id="fbcf3-334">Użyj domyślnej hello przetwarzanie wsadowe interwał 20ms tooreduce hello liczba transmisji protokołu klienta usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-334">Use hello default batching interval of 20ms tooreduce hello number of Service Bus client protocol transmissions.</span></span>
* <span data-ttu-id="fbcf3-335">Pozostaw włączony dostęp do magazynu wsadowej.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-335">Leave batched store access enabled.</span></span> <span data-ttu-id="fbcf3-336">Powoduje to zwiększenie hello ogólną szybkość z jaką komunikaty mogą być zapisywane w temacie hello.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-336">This increases hello overall rate at which messages can be written into hello topic.</span></span>
* <span data-ttu-id="fbcf3-337">Ustaw hello pobierania z wyprzedzeniem liczba razy too20 odbierania hello oczekiwano częstotliwość w sekundach.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-337">Set hello prefetch count too20 times hello expected receive rate in seconds.</span></span> <span data-ttu-id="fbcf3-338">Pozwala to zmniejszyć liczbę hello transmisji protokołu klienta usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="fbcf3-338">This reduces hello number of Service Bus client protocol transmissions.</span></span>

## <a name="next-steps"></a><span data-ttu-id="fbcf3-339">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="fbcf3-339">Next steps</span></span>
<span data-ttu-id="fbcf3-340">toolearn więcej informacji na temat optymalizacji wydajności usługi Service Bus, zobacz [partycjonowane jednostki do obsługi komunikatów][Partitioned messaging entities].</span><span class="sxs-lookup"><span data-stu-id="fbcf3-340">toolearn more about optimizing Service Bus performance, see [Partitioned messaging entities][Partitioned messaging entities].</span></span>

[QueueClient]: /dotnet/api/microsoft.servicebus.messaging.queueclient
[MessageSender]: /dotnet/api/microsoft.servicebus.messaging.messagesender
[MessagingFactory]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory
[PeekLock]: /dotnet/api/microsoft.servicebus.messaging.receivemode
[ReceiveAndDelete]: /dotnet/api/microsoft.servicebus.messaging.receivemode
[BatchFlushInterval]: /dotnet/api/microsoft.servicebus.messaging.netmessagingtransportsettings.batchflushinterval#Microsoft_ServiceBus_Messaging_NetMessagingTransportSettings_BatchFlushInterval
[EnableBatchedOperations]: /dotnet/api/microsoft.servicebus.messaging.queuedescription.enablebatchedoperations#Microsoft_ServiceBus_Messaging_QueueDescription_EnableBatchedOperations
[QueueClient.PrefetchCount]: /dotnet/api/microsoft.servicebus.messaging.queueclient.prefetchcount#Microsoft_ServiceBus_Messaging_QueueClient_PrefetchCount
[SubscriptionClient.PrefetchCount]: /dotnet/api/microsoft.servicebus.messaging.subscriptionclient.prefetchcount#Microsoft_ServiceBus_Messaging_SubscriptionClient_PrefetchCount
[ForcePersistence]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage.forcepersistence#Microsoft_ServiceBus_Messaging_BrokeredMessage_ForcePersistence
[EnablePartitioning]: /dotnet/api/microsoft.servicebus.messaging.queuedescription.enablepartitioning#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning
[Partitioned messaging entities]: service-bus-partitioning.md
[TopicDescription.EnableFilteringMessagesBeforePublishing]: /dotnet/api/microsoft.servicebus.messaging.topicdescription.enablefilteringmessagesbeforepublishing#Microsoft_ServiceBus_Messaging_TopicDescription_EnableFilteringMessagesBeforePublishing
