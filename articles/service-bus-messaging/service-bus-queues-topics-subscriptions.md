---
title: "aaaOverview wiadomości z kolejki, tematy i subskrypcje usługi Azure Service Bus | Dokumentacja firmy Microsoft"
description: "Przegląd jednostki do obsługi komunikatów usługi Service Bus."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a306ced4-74e9-47c6-990a-d9c47efa31d5
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 06/28/2017
ms.author: sethm
ms.openlocfilehash: 73135d2658e341c14dbb114ab938faed91578ff1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="service-bus-queues-topics-and-subscriptions"></a><span data-ttu-id="55219-103">Kolejki, tematy i subskrypcje usługi Service Bus</span><span class="sxs-lookup"><span data-stu-id="55219-103">Service Bus queues, topics, and subscriptions</span></span>

<span data-ttu-id="55219-104">Microsoft Azure Service Bus obsługuje zestaw technologii chmurowych, zorientowany oprogramowanie pośredniczące, takich jak usługi kolejkowania komunikatów niezawodnej i trwałe publikowania/subskrybowania komunikatów.</span><span class="sxs-lookup"><span data-stu-id="55219-104">Microsoft Azure Service Bus supports a set of cloud-based, message-oriented middleware technologies including reliable message queuing and durable publish/subscribe messaging.</span></span> <span data-ttu-id="55219-105">Te możliwości obsługi komunikatów "obsługiwanych przez brokera" można traktować jako rozdzielonymi wiadomości funkcje, które publikacji / subskrypcji, zawierająca dane czasowe oddzielenie i równoważenia obciążenia scenariuszy przy użyciu hello magistrali usług obsługi wiadomości w sieci szkieletowej.</span><span class="sxs-lookup"><span data-stu-id="55219-105">These "brokered" messaging capabilities can be thought of as decoupled messaging features that support publish-subscribe, temporal decoupling, and load balancing scenarios using hello Service Bus messaging fabric.</span></span> <span data-ttu-id="55219-106">Komunikacja oddzielona ma wiele zalet, na przykład klienci i serwery mogą nawiązywać połączenie zgodnie z potrzebami i wykonywać ich operacje w sposób asynchroniczny.</span><span class="sxs-lookup"><span data-stu-id="55219-106">Decoupled communication has many advantages; for example, clients and servers can connect as needed and perform their operations in an asynchronous fashion.</span></span>

<span data-ttu-id="55219-107">jednostek obsługi komunikatów Hello tworzących hello najważniejsza część hello wiadomości możliwości w usłudze Service Bus są kolejki, tematy i subskrypcje i reguły/akcji.</span><span class="sxs-lookup"><span data-stu-id="55219-107">hello messaging entities that form hello core of hello messaging capabilities in Service Bus are queues, topics and subscriptions, and rules/actions.</span></span>

## <a name="queues"></a><span data-ttu-id="55219-108">Kolejki</span><span class="sxs-lookup"><span data-stu-id="55219-108">Queues</span></span>

<span data-ttu-id="55219-109">Kolejki oferują *pierwszy na wejściu — pierwszy limit* tooone dostarczania wiadomości (FIFO) lub więcej konkurujących konsumentów.</span><span class="sxs-lookup"><span data-stu-id="55219-109">Queues offer *First In, First Out* (FIFO) message delivery tooone or more competing consumers.</span></span> <span data-ttu-id="55219-110">Oznacza to komunikaty są zwykle oczekiwanego toobe odbierane i przetwarzane przez odbiorców hello w kolejności hello, w którym zostały one dodane toohello kolejki, a każdy komunikat jest odbierany i przetwarzany przez tylko jednego odbiorcę komunikatów.</span><span class="sxs-lookup"><span data-stu-id="55219-110">That is, messages are typically expected toobe received and processed by hello receivers in hello order in which they were added toohello queue, and each message is received and processed by only one message consumer.</span></span> <span data-ttu-id="55219-111">Najważniejszą korzyścią z używania kolejek jest tooachieve "oddzielenia czasowego" składników aplikacji.</span><span class="sxs-lookup"><span data-stu-id="55219-111">A key benefit of using queues is tooachieve "temporal decoupling" of application components.</span></span> <span data-ttu-id="55219-112">Witaj innymi słowy, producenci (nadawcy) i konsumenci (odbiorcy) nie mają toobe wysyłanie i odbieranie wiadomości na powitania takie same czasu, ponieważ komunikaty są trwale przechowywane w kolejce hello.</span><span class="sxs-lookup"><span data-stu-id="55219-112">In other words, hello producers (senders) and consumers (receivers) do not have toobe sending and receiving messages at hello same time, because messages are stored durably in hello queue.</span></span> <span data-ttu-id="55219-113">Ponadto producent hello nie ma toowait na odpowiedź od konsumenta hello w kolejności toocontinue tooprocess i wysyłać wiadomości.</span><span class="sxs-lookup"><span data-stu-id="55219-113">Furthermore, hello producer does not have toowait for a reply from hello consumer in order toocontinue tooprocess and send messages.</span></span>

<span data-ttu-id="55219-114">Pokrewną korzyścią jest "obciążenia bilansowanie,", która umożliwia toosend producenci i konsumenci i odbierania wiadomości w różnym tempie.</span><span class="sxs-lookup"><span data-stu-id="55219-114">A related benefit is "load leveling," which enables producers and consumers toosend and receive messages at different rates.</span></span> <span data-ttu-id="55219-115">W wielu aplikacjach obciążenie systemu hello różni się wraz z upływem czasu; jednak czas przetwarzania hello wymagany dla każdej jednostki pracy jest zwykle stały.</span><span class="sxs-lookup"><span data-stu-id="55219-115">In many applications, hello system load varies over time; however, hello processing time required for each unit of work is typically constant.</span></span> <span data-ttu-id="55219-116">Pośredniczenie producentami a konsumentami komunikatów z kolejki oznacza, że tego hello korzystanie z aplikacji tylko ma średni obciążenia toohandle stanie elastycznie toobe toobe zamiast obciążenia szczytowego.</span><span class="sxs-lookup"><span data-stu-id="55219-116">Intermediating message producers and consumers with a queue means that hello consuming application only has toobe provisioned toobe able toohandle average load instead of peak load.</span></span> <span data-ttu-id="55219-117">głębokość kolejki hello Hello rośnie i zmniejsza się w zależności od zmian obciążenia przychodzącego hello.</span><span class="sxs-lookup"><span data-stu-id="55219-117">hello depth of hello queue grows and contracts as hello incoming load varies.</span></span> <span data-ttu-id="55219-118">To jest zapisywany bezpośrednio pieniędzy z uwzględnieniem toohello ilością obciążenia aplikacji hello wymagane tooservice infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="55219-118">This directly saves money with regard toohello amount of infrastructure required tooservice hello application load.</span></span> <span data-ttu-id="55219-119">Witaj wzrostu obciążenia, więcej procesów roboczych może być dodany tooread z hello kolejki.</span><span class="sxs-lookup"><span data-stu-id="55219-119">As hello load increases, more worker processes can be added tooread from hello queue.</span></span> <span data-ttu-id="55219-120">Każdy komunikat jest przetwarzany przez tylko jeden z procesów roboczych hello.</span><span class="sxs-lookup"><span data-stu-id="55219-120">Each message is processed by only one of hello worker processes.</span></span> <span data-ttu-id="55219-121">Ponadto to Równoważenie obciążenia oparte na ściąganiu umożliwia optymalne wykorzystanie komputerów roboczych hello nawet wtedy, gdy komputery procesu roboczego hello różnią się z uwzględnieniem tooprocessing zasilania, ponieważ każda będzie ściągać komunikaty własnych maksymalną szybkością.</span><span class="sxs-lookup"><span data-stu-id="55219-121">Furthermore, this pull-based load balancing allows for optimum use of hello worker computers even if hello worker computers differ with regard tooprocessing power, as they will pull messages at their own maximum rate.</span></span> <span data-ttu-id="55219-122">Ten wzorzec jest często nazywany wzorcem "konkurujących konsumentów" hello.</span><span class="sxs-lookup"><span data-stu-id="55219-122">This pattern is often termed hello "competing consumer" pattern.</span></span>

<span data-ttu-id="55219-123">Użycie kolejek toointermediate między producentami a konsumentami komunikatów zapewnia związanego z używaniem luźne powiązanie między składnikami hello.</span><span class="sxs-lookup"><span data-stu-id="55219-123">Using queues toointermediate between message producers and consumers provides an inherent loose coupling between hello components.</span></span> <span data-ttu-id="55219-124">Ponieważ producenci i konsumenci nie są wzajemnie świadomi, można uaktualnić konsumenta bez wpływu na powitania producenta.</span><span class="sxs-lookup"><span data-stu-id="55219-124">Because producers and consumers are not aware of each other, a consumer can be upgraded without having any effect on hello producer.</span></span>

<span data-ttu-id="55219-125">Tworzenie kolejki jest procesem wieloetapowych.</span><span class="sxs-lookup"><span data-stu-id="55219-125">Creating a queue is a multi-step process.</span></span> <span data-ttu-id="55219-126">Możesz wykonywać operacje zarządzania dla usługi Service Bus messaging entities (kolejki i tematy) za pośrednictwem hello [Microsoft.ServiceBus.NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) klasy, która jest tworzony, podając adres bazowy hello hello usługi Service Bus przestrzeń nazw i hello poświadczeń użytkownika.</span><span class="sxs-lookup"><span data-stu-id="55219-126">You perform management operations for Service Bus messaging entities (both queues and topics) via hello [Microsoft.ServiceBus.NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class, which is constructed by supplying hello base address of hello Service Bus namespace and hello user credentials.</span></span> <span data-ttu-id="55219-127">[NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) zapewnia toocreate metody wyliczania i usuwania jednostek obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="55219-127">[NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) provides methods toocreate, enumerate and delete messaging entities.</span></span> <span data-ttu-id="55219-128">Po utworzeniu [Microsoft.ServiceBus.TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) obiektu obiektu z hello SAS nazwy i klucza i zarządzanie przestrzeni nazw usługi, można użyć hello [Microsoft.ServiceBus.NamespaceManager.CreateQueue](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateQueue_System_String_) metody toocreate hello kolejki.</span><span class="sxs-lookup"><span data-stu-id="55219-128">After creating a [Microsoft.ServiceBus.TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) object from hello SAS name and key, and a service namespace management object, you can use hello [Microsoft.ServiceBus.NamespaceManager.CreateQueue](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateQueue_System_String_) method toocreate hello queue.</span></span> <span data-ttu-id="55219-129">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="55219-129">For example:</span></span>

```csharp
// Create management credentials
TokenProvider credentials = TokenProvider.CreateSharedAccessSignatureTokenProvider(sasKeyName,sasKeyValue);
// Create namespace client
NamespaceManager namespaceClient = new NamespaceManager(ServiceBusEnvironment.CreateServiceUri("sb", ServiceNamespace, string.Empty), credentials);
```

<span data-ttu-id="55219-130">Następnie można utworzyć obiektu typu kolejka i fabryki obsługi komunikatów z hello identyfikatora URI magistrali usługi jako argument.</span><span class="sxs-lookup"><span data-stu-id="55219-130">You can then create a queue object and a messaging factory with hello Service Bus URI as an argument.</span></span> <span data-ttu-id="55219-131">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="55219-131">For example:</span></span>

```csharp
QueueDescription myQueue;
myQueue = namespaceClient.CreateQueue("TestQueue");
MessagingFactory factory = MessagingFactory.Create(ServiceBusEnvironment.CreateServiceUri("sb", ServiceNamespace, string.Empty), credentials); 
QueueClient myQueueClient = factory.CreateQueueClient("TestQueue");
```

<span data-ttu-id="55219-132">Następnie można wysłać wiadomości toohello kolejki.</span><span class="sxs-lookup"><span data-stu-id="55219-132">You can then send messages toohello queue.</span></span> <span data-ttu-id="55219-133">Na przykład, jeśli masz listę obsługiwanych przez brokera komunikatów o nazwie `MessageList`, kod hello pojawia się poniżej toohello podobne:</span><span class="sxs-lookup"><span data-stu-id="55219-133">For example, if you have a list of brokered messages called `MessageList`, hello code appears similar toohello following:</span></span>

```csharp
for (int count = 0; count < 6; count++)
{
    var issue = MessageList[count];
    issue.Label = issue.Properties["IssueTitle"].ToString();
    myQueueClient.Send(issue);
}
```

<span data-ttu-id="55219-134">Następnie komunikaty z kolejki hello w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="55219-134">You then receive messages from hello queue as follows:</span></span>

```csharp
while ((message = myQueueClient.Receive(new TimeSpan(hours: 0, minutes: 0, seconds: 5))) != null)
    {
        Console.WriteLine(string.Format("Message received: {0}, {1}, {2}", message.SequenceNumber, message.Label, message.MessageId));
        message.Complete();

        Console.WriteLine("Processing message (sleeping...)");
        Thread.Sleep(1000);
    }
```

<span data-ttu-id="55219-135">W hello [ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode) odbierania hello trybie operacji pojedynczego zrzutu; oznacza to, kiedy usługa Service Bus odbiera żądanie hello, oznacza hello komunikat jako wykorzystany i zwraca go toohello aplikacji.</span><span class="sxs-lookup"><span data-stu-id="55219-135">In hello [ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode) mode, hello receive operation is single-shot; that is, when Service Bus receives hello request, it marks hello message as being consumed and returns it toohello application.</span></span> <span data-ttu-id="55219-136">**ReceiveAndDelete** tryb hello najprostszym modelem i działa najlepiej w scenariuszach, w których hello aplikacja może tolerować nieprzetworzenie komunikatu w razie awarii hello.</span><span class="sxs-lookup"><span data-stu-id="55219-136">**ReceiveAndDelete** mode is hello simplest model and works best for scenarios in which hello application can tolerate not processing a message in hello event of a failure.</span></span> <span data-ttu-id="55219-137">toounderstand, Rozważmy scenariusz w problemy, które konsumenta hello hello mógł odebrać żądanie, a następnie ulega awarii przed jego przetworzeniem.</span><span class="sxs-lookup"><span data-stu-id="55219-137">toounderstand this, consider a scenario in which hello consumer issues hello receive request and then crashes before processing it.</span></span> <span data-ttu-id="55219-138">Ponieważ Usługa Service Bus oznacza hello komunikat jako wykorzystany, gdy aplikacja hello ponownego uruchomienia i rozpocznie korzystanie z komunikatów ponownie, pominie utracony komunikat hello, który został wykorzystany przed toohello awarii.</span><span class="sxs-lookup"><span data-stu-id="55219-138">Because Service Bus marks hello message as being consumed, when hello application restarts and begins consuming messages again, it will have missed hello message that was consumed prior toohello crash.</span></span>

<span data-ttu-id="55219-139">W [PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode) odbierania hello trybie operacji będzie dwuetapowa, dzięki czemu możliwe toosupport aplikacji, które nie tolerują brakujących komunikatów.</span><span class="sxs-lookup"><span data-stu-id="55219-139">In [PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode) mode, hello receive operation becomes two-stage, which makes it possible toosupport applications that cannot tolerate missing messages.</span></span> <span data-ttu-id="55219-140">Gdy Usługa Service Bus odbiera żądanie hello, znajduje następny toobe wiadomość hello, używane, blokuje go tooprevent innym klientom odbieranie, a następnie zwrócenie go toohello aplikacji.</span><span class="sxs-lookup"><span data-stu-id="55219-140">When Service Bus receives hello request, it finds hello next message toobe consumed, locks it tooprevent other consumers from receiving it, and then returns it toohello application.</span></span> <span data-ttu-id="55219-141">Kiedy aplikacja hello zakończy przetwarzanie wiadomości powitania (lub niezawodnie zapisze go w celu przyszłego przetwarzania), wykonuje drugi etap hello hello odbierania przez wywołanie metody procesu [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) na wiadomość powitania odebrane.</span><span class="sxs-lookup"><span data-stu-id="55219-141">After hello application finishes processing hello message (or stores it reliably for future processing), it completes hello second stage of hello receive process by calling [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) on hello received message.</span></span> <span data-ttu-id="55219-142">Kiedy Usługa Service Bus widzi hello **Complete** wywołania oznacza hello komunikat jako wykorzystany.</span><span class="sxs-lookup"><span data-stu-id="55219-142">When Service Bus sees hello **Complete** call, it marks hello message as being consumed.</span></span>

<span data-ttu-id="55219-143">Jeśli aplikacja hello nie tooprocess hello komunikat dla jakiegoś powodu, może wywołać hello [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) metody na wiadomość powitania odebranych (zamiast [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete)).</span><span class="sxs-lookup"><span data-stu-id="55219-143">If hello application is unable tooprocess hello message for some reason, it can call hello [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) method on hello received message (instead of [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete)).</span></span> <span data-ttu-id="55219-144">To umożliwia wiadomość hello toounlock usługi Service Bus i stał się dostępny toobe odbioru, hello przez tego samego użytkownika lub innego konkurujących konsumentów.</span><span class="sxs-lookup"><span data-stu-id="55219-144">This enables Service Bus toounlock hello message and make it available toobe received again, either by hello same consumer or by another competing consumer.</span></span> <span data-ttu-id="55219-145">Po drugie jest skojarzony przekroczenie limitu czasu blokady hello i jeśli aplikacja hello nie powiedzie się tooprocess hello komunikat wygaśnięcia hello limit czasu blokady (na przykład jeśli wystąpiła awaria aplikacji hello), Usługa Service Bus umożliwia odblokowanie wiadomość hello i ułatwia toobe dostępne Odebrano ponownie (zasadniczo wykonywania [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) operacji domyślnie).</span><span class="sxs-lookup"><span data-stu-id="55219-145">Secondly, there is a timeout associated with hello lock and if hello application fails tooprocess hello message before hello lock timeout expires (for example, if hello application crashes), then Service Bus unlocks hello message and makes it available toobe received again (essentially performing an [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) operation by default).</span></span>

<span data-ttu-id="55219-146">Należy pamiętać, że w hello zdarzenie, które aplikacji hello ulegnie awarii po przetworzeniu wiadomość hello, ale przed jego hello **Complete** żądania, wiadomość hello jest przed przeniesieniem toohello aplikacji po jej ponownym uruchomieniu.</span><span class="sxs-lookup"><span data-stu-id="55219-146">Note that in hello event that hello application crashes after processing hello message, but before hello **Complete** request is issued, hello message is redelivered toohello application when it restarts.</span></span> <span data-ttu-id="55219-147">Jest to często nazywane *co najmniej raz* przetwarzania; oznacza to, że każdy komunikat jest przetwarzany co najmniej raz.</span><span class="sxs-lookup"><span data-stu-id="55219-147">This is often called *At Least Once* processing; that is, each message is processed at least once.</span></span> <span data-ttu-id="55219-148">Jednak w niektórych sytuacjach hello sam komunikat może być dostarczony ponownie.</span><span class="sxs-lookup"><span data-stu-id="55219-148">However, in certain situations hello same message may be redelivered.</span></span> <span data-ttu-id="55219-149">Jeśli hello scenariusz nie Toleruje dwukrotnego przetwarzania, a następnie dodatkową logikę jest wymagany w hello duplikaty toodetect aplikacji, które można osiągnąć oparte na powitania **MessageId** właściwości wiadomości powitania, który pozostaje stała między kolejnymi próbami dostarczenia.</span><span class="sxs-lookup"><span data-stu-id="55219-149">If hello scenario cannot tolerate duplicate processing, then additional logic is required in hello application toodetect duplicates which can be achieved based upon hello **MessageId** property of hello message, which remains constant across delivery attempts.</span></span> <span data-ttu-id="55219-150">Jest to nazywane *dokładnie raz* przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="55219-150">This is known as *Exactly Once* processing.</span></span>

## <a name="topics-and-subscriptions"></a><span data-ttu-id="55219-151">Tematy i subskrypcje</span><span class="sxs-lookup"><span data-stu-id="55219-151">Topics and subscriptions</span></span>
<span data-ttu-id="55219-152">W tooqueues kontrast, w którym każdy komunikat jest przetwarzany przez jednego konsumenta, *tematy* i *subskrypcje* Podaj jeden do wielu formę komunikacji w *publikowania/subskrypcji* wzorca.</span><span class="sxs-lookup"><span data-stu-id="55219-152">In contrast tooqueues, in which each message is processed by a single consumer, *topics* and *subscriptions* provide a one-to-many form of communication, in a *publish/subscribe* pattern.</span></span> <span data-ttu-id="55219-153">Przydatne w przypadku skalowania toovery dużą liczbę adresatów, każdy opublikowany komunikat stają się dostępne tooeach subskrypcji zarejestrowanej hello tematu.</span><span class="sxs-lookup"><span data-stu-id="55219-153">Useful for scaling toovery large numbers of recipients, each published message is made available tooeach subscription registered with hello topic.</span></span> <span data-ttu-id="55219-154">Komunikaty są wysyłane tooa tematu i dostarczonego tooone lub więcej skojarzone subskrypcje, w zależności od reguły filtrowania, które można ustawić na podstawie na subskrypcję.</span><span class="sxs-lookup"><span data-stu-id="55219-154">Messages are sent tooa topic and delivered tooone or more associated subscriptions, depending on filter rules that can be set on a per-subscription basis.</span></span> <span data-ttu-id="55219-155">Subskrypcje Hello można użyć dowolnej tooreceive wiadomości powitania od toorestrict dodatkowe filtry.</span><span class="sxs-lookup"><span data-stu-id="55219-155">hello subscriptions can use additional filters toorestrict hello messages that they want tooreceive.</span></span> <span data-ttu-id="55219-156">Komunikaty są wysyłane tooa tematu w hello sam sposób są one wysyłane tooa kolejki, ale nie odbiera wiadomości z tematu hello bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="55219-156">Messages are sent tooa topic in hello same way they are sent tooa queue, but messages are not received from hello topic directly.</span></span> <span data-ttu-id="55219-157">Zamiast tego są odbierane z subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="55219-157">Instead, they are received from subscriptions.</span></span> <span data-ttu-id="55219-158">Subskrypcja tematu przypomina wirtualną kolejkę otrzymującego wiadomości powitania, które są wysyłane toohello tematu.</span><span class="sxs-lookup"><span data-stu-id="55219-158">A topic subscription resembles a virtual queue that receives copies of hello messages that are sent toohello topic.</span></span> <span data-ttu-id="55219-159">Komunikaty są odbierane z subskrypcji tak samo sposób toohello zostały odebrane z kolejki.</span><span class="sxs-lookup"><span data-stu-id="55219-159">Messages are received from a subscription identically toohello way they are received from a queue.</span></span>

<span data-ttu-id="55219-160">Porównania hello wysyłanie komunikatu funkcji kolejki mapuje bezpośrednio tooa tematu i subskrypcji tooa mapuje jego funkcjonalność odbieranie komunikatu.</span><span class="sxs-lookup"><span data-stu-id="55219-160">By way of comparison, hello message-sending functionality of a queue maps directly tooa topic and its message-receiving functionality maps tooa subscription.</span></span> <span data-ttu-id="55219-161">Między innymi, oznacza to, czy subskrypcje obsługuje hello tego samego wzorce opisany wcześniej w tej sekcji, z uwzględnieniem tooqueues: konkurujących konsumentów, oddzielenia czasowego wyrównywanie obciążenia i równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="55219-161">Among other things, this means that subscriptions support hello same patterns described earlier in this section with regard tooqueues: competing consumer, temporal decoupling, load leveling, and load balancing.</span></span>

<span data-ttu-id="55219-162">Tworzenie tematu jest podobne toocreating kolejki, jak pokazano w przykładzie hello hello w poprzedniej sekcji.</span><span class="sxs-lookup"><span data-stu-id="55219-162">Creating a topic is similar toocreating a queue, as shown in hello example in hello previous section.</span></span> <span data-ttu-id="55219-163">Utwórz identyfikator URI usługi hello, a następnie użyj hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) klasy toocreate hello przestrzeni nazw klienta.</span><span class="sxs-lookup"><span data-stu-id="55219-163">Create hello service URI, and then use hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) class toocreate hello namespace client.</span></span> <span data-ttu-id="55219-164">Następnie możesz utworzyć temat przy użyciu hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) metody.</span><span class="sxs-lookup"><span data-stu-id="55219-164">You can then create a topic using hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) method.</span></span> <span data-ttu-id="55219-165">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="55219-165">For example:</span></span>

```csharp
TopicDescription dataCollectionTopic = namespaceClient.CreateTopic("DataCollectionTopic");
```

<span data-ttu-id="55219-166">Następnie dodaj subskrypcji, zgodnie z wymaganiami:</span><span class="sxs-lookup"><span data-stu-id="55219-166">Next, add subscriptions as desired:</span></span>

```csharp
SubscriptionDescription myAgentSubscription = namespaceClient.CreateSubscription(myTopic.Path, "Inventory");
SubscriptionDescription myAuditSubscription = namespaceClient.CreateSubscription(myTopic.Path, "Dashboard");
```

<span data-ttu-id="55219-167">Następnie można utworzyć klienta tematu.</span><span class="sxs-lookup"><span data-stu-id="55219-167">You can then create a topic client.</span></span> <span data-ttu-id="55219-168">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="55219-168">For example:</span></span>

```csharp
MessagingFactory factory = MessagingFactory.Create(serviceUri, tokenProvider);
TopicClient myTopicClient = factory.CreateTopicClient(myTopic.Path)
```

<span data-ttu-id="55219-169">Przy użyciu nadawcy wiadomości powitania, można wysyłania i odbierania wiadomości tooand z tematu hello opisane w poprzedniej sekcji hello.</span><span class="sxs-lookup"><span data-stu-id="55219-169">Using hello message sender, you can send and receive messages tooand from hello topic, as shown in hello previous section.</span></span> <span data-ttu-id="55219-170">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="55219-170">For example:</span></span>

```csharp
foreach (BrokeredMessage message in messageList)
{
    myTopicClient.Send(message);
    Console.WriteLine(
    string.Format("Message sent: Id = {0}, Body = {1}", message.MessageId, message.GetBody<string>()));
}
```

<span data-ttu-id="55219-171">Podobne tooqueues, komunikaty są odbierane z subskrypcją za pomocą [SubscriptionClient](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient) obiekt zamiast [QueueClient](/dotnet/api/microsoft.servicebus.messaging.queueclient) obiektu.</span><span class="sxs-lookup"><span data-stu-id="55219-171">Similar tooqueues, messages are received from a subscription using a [SubscriptionClient](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient) object instead of a [QueueClient](/dotnet/api/microsoft.servicebus.messaging.queueclient) object.</span></span> <span data-ttu-id="55219-172">Tworzenie klienta subskrypcji hello, przekazywanie nazwa hello hello tematu, nazwa hello hello subskrypcji, uprawnia do (opcjonalnie) hello tryb jako parametry.</span><span class="sxs-lookup"><span data-stu-id="55219-172">Create hello subscription client, passing hello name of hello topic, hello name of hello subscription, and (optionally) hello receive mode as parameters.</span></span> <span data-ttu-id="55219-173">Na przykład z hello **spisu** subskrypcji:</span><span class="sxs-lookup"><span data-stu-id="55219-173">For example, with hello **Inventory** subscription:</span></span>

```csharp
// Create hello subscription client
MessagingFactory factory = MessagingFactory.Create(serviceUri, tokenProvider); 

SubscriptionClient agentSubscriptionClient = factory.CreateSubscriptionClient("IssueTrackingTopic", "Inventory", ReceiveMode.PeekLock);
SubscriptionClient auditSubscriptionClient = factory.CreateSubscriptionClient("IssueTrackingTopic", "Dashboard", ReceiveMode.ReceiveAndDelete); 

while ((message = agentSubscriptionClient.Receive(TimeSpan.FromSeconds(5))) != null)
{
    Console.WriteLine("\nReceiving message from Inventory...");
    Console.WriteLine(string.Format("Message received: Id = {0}, Body = {1}", message.MessageId, message.GetBody<string>()));
    message.Complete();
}          

// Create a receiver using ReceiveAndDelete mode
while ((message = auditSubscriptionClient.Receive(TimeSpan.FromSeconds(5))) != null)
{
    Console.WriteLine("\nReceiving message from Dashboard...");
    Console.WriteLine(string.Format("Message received: Id = {0}, Body = {1}", message.MessageId, message.GetBody<string>()));
}
```

### <a name="rules-and-actions"></a><span data-ttu-id="55219-174">Reguły i akcje</span><span class="sxs-lookup"><span data-stu-id="55219-174">Rules and actions</span></span>
<span data-ttu-id="55219-175">W wielu scenariuszach wiadomości, które mają określone parametry muszą być przetwarzane na różne sposoby.</span><span class="sxs-lookup"><span data-stu-id="55219-175">In many scenarios, messages that have specific characteristics must be processed in different ways.</span></span> <span data-ttu-id="55219-176">tooenable, można skonfigurować subskrypcje toofind komunikatów, które ma potrzebne właściwości, a następnie wykonaj pewne zmiany właściwości toothose.</span><span class="sxs-lookup"><span data-stu-id="55219-176">tooenable this, you can configure subscriptions toofind messages that have desired properties and then perform certain modifications toothose properties.</span></span> <span data-ttu-id="55219-177">Natomiast subskrypcje usługi Service Bus, zobacz wszystkich wiadomości wysłanych toohello tematu, można kopiować tylko podzbiór tych kolejki subskrypcji wirtualnego toohello wiadomości.</span><span class="sxs-lookup"><span data-stu-id="55219-177">While Service Bus subscriptions see all messages sent toohello topic, you can only copy a subset of those messages toohello virtual subscription queue.</span></span> <span data-ttu-id="55219-178">Jest to realizowane przy użyciu filtrów subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="55219-178">This is accomplished using subscription filters.</span></span> <span data-ttu-id="55219-179">Takie zmiany są nazywane *akcje filtru*.</span><span class="sxs-lookup"><span data-stu-id="55219-179">Such modifications are called *filter actions*.</span></span> <span data-ttu-id="55219-180">Po utworzeniu subskrypcji można podać wyrażenie filtru, który działa na powitania właściwości wiadomości powitania, zarówno hello właściwości systemu (na przykład **etykiety**) i właściwości niestandardowych aplikacji (na przykład **StoreName**.) hello SQL wyrażenie filtru jest opcjonalna w takim przypadku; bez wyrażenie filtru SQL żadnych działań filtru zdefiniowane w przypadku subskrypcji zostaną wykonane dla wszystkich wiadomości powitania dla tej subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="55219-180">When a subscription is created, you can supply a filter expression that operates on hello properties of hello message, both hello system properties (for example, **Label**) and custom application properties (for example, **StoreName**.) hello SQL filter expression is optional in this case; without a SQL filter expression, any filter action defined on a subscription will be performed on all hello messages for that subscription.</span></span>

<span data-ttu-id="55219-181">Przy użyciu hello poprzedni przykład, komunikaty toofilter pochodzące tylko z **Store1**, należy utworzyć subskrypcję pulpitu nawigacyjnego hello w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="55219-181">Using hello previous example, toofilter messages coming only from **Store1**, you would create hello Dashboard subscription as follows:</span></span>

```csharp
namespaceManager.CreateSubscription("IssueTrackingTopic", "Dashboard", new SqlFilter("StoreName = 'Store1'"));
```

<span data-ttu-id="55219-182">Ten filtr subskrypcji w miejscu, tylko komunikaty, które mają hello `StoreName` właściwość zbyt`Store1` są toohello skopiowanego wirtualnego kolejki hello `Dashboard` subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="55219-182">With this subscription filter in place, only messages that have hello `StoreName` property set too`Store1` are copied toohello virtual queue for hello `Dashboard` subscription.</span></span>

<span data-ttu-id="55219-183">Aby uzyskać więcej informacji o wartości filtru możliwe, zobacz dokumentację hello na powitania [SqlFilter](/dotnet/api/microsoft.servicebus.messaging.sqlfilter) i [SqlRuleAction](/dotnet/api/microsoft.servicebus.messaging.sqlruleaction) klasy.</span><span class="sxs-lookup"><span data-stu-id="55219-183">For more information about possible filter values, see hello documentation for hello [SqlFilter](/dotnet/api/microsoft.servicebus.messaging.sqlfilter) and [SqlRuleAction](/dotnet/api/microsoft.servicebus.messaging.sqlruleaction) classes.</span></span> <span data-ttu-id="55219-184">Zobacz też hello [obsługiwanych przez brokera obsługi komunikatów: filtry zaawansowane](http://code.msdn.microsoft.com/Brokered-Messaging-6b0d2749) i [filtry tematu](https://github.com/Azure-Samples/azure-servicebus-messaging-samples/tree/master/TopicFilters) próbek.</span><span class="sxs-lookup"><span data-stu-id="55219-184">Also, see hello [Brokered Messaging: Advanced Filters](http://code.msdn.microsoft.com/Brokered-Messaging-6b0d2749) and [Topic Filters](https://github.com/Azure-Samples/azure-servicebus-messaging-samples/tree/master/TopicFilters) samples.</span></span>

## <a name="next-steps"></a><span data-ttu-id="55219-185">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="55219-185">Next steps</span></span>
<span data-ttu-id="55219-186">Zobacz poniższe hello zaawansowane tematy, aby uzyskać więcej informacji i przykłady użycia komunikatów usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="55219-186">See hello following advanced topics for more information and examples of using Service Bus messaging.</span></span>

* [<span data-ttu-id="55219-187">Omówienie obsługi komunikatów w usłudze Service Bus</span><span class="sxs-lookup"><span data-stu-id="55219-187">Service Bus messaging overview</span></span>](service-bus-messaging-overview.md)
* [<span data-ttu-id="55219-188">samouczek dotyczący komunikatów obsługiwanych przez brokera w usłudze Service Bus dla platformy .NET</span><span class="sxs-lookup"><span data-stu-id="55219-188">Service Bus brokered messaging .NET tutorial</span></span>](service-bus-brokered-tutorial-dotnet.md)
* [<span data-ttu-id="55219-189">Samouczek dotyczący REST komunikatów obsługiwanych przez brokera usługi Service Bus</span><span class="sxs-lookup"><span data-stu-id="55219-189">Service Bus brokered messaging REST tutorial</span></span>](service-bus-brokered-tutorial-rest.md)
* [<span data-ttu-id="55219-190">Przykładowe filtry tematu</span><span class="sxs-lookup"><span data-stu-id="55219-190">Topic Filters sample </span></span>](https://github.com/Azure/azure-service-bus/tree/master/samples/DotNet/Microsoft.ServiceBus.Messaging/TopicFilters)
* [<span data-ttu-id="55219-191">Obsługiwanych przez brokera komunikatów: Przykładowe filtry zaawansowane</span><span class="sxs-lookup"><span data-stu-id="55219-191">Brokered Messaging: Advanced Filters sample</span></span>](http://code.msdn.microsoft.com/Brokered-Messaging-6b0d2749)

