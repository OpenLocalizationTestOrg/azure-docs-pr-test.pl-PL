---
title: "aaaCreate aplikacji, które używają usługi Azure Service Bus tematów i subskrypcji | Dokumentacja firmy Microsoft"
description: "Wprowadzenie toohello możliwości publikowania / subskrypcji oferowanych przez usługi Service Bus tematów i subskrypcji."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a48fc9b0-b7b0-464e-8187-a517bf8b4eb4
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/07/2017
ms.author: sethm
ms.openlocfilehash: f6d7de46ace7bd5b49de612db213ced789308d91
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="create-applications-that-use-service-bus-topics-and-subscriptions"></a><span data-ttu-id="ae8f3-103">Tworzenie aplikacji korzystających z usługi Service Bus tematów i subskrypcji</span><span class="sxs-lookup"><span data-stu-id="ae8f3-103">Create applications that use Service Bus topics and subscriptions</span></span>
<span data-ttu-id="ae8f3-104">Usługa Azure Service Bus obsługuje zestaw technologii chmurowych, zorientowany oprogramowanie pośredniczące, takich jak usługi kolejkowania komunikatów niezawodnej i trwałe publikowania/subskrybowania komunikatów.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-104">Azure Service Bus supports a set of cloud-based, message-oriented middleware technologies including reliable message queuing and durable publish/subscribe messaging.</span></span> <span data-ttu-id="ae8f3-105">W tym artykule opiera się na powitania informacji dostępnych w [tworzenie aplikacji korzystających z kolejek usługi Service Bus](service-bus-create-queues.md) i oferuje wprowadzenie możliwości publikowania/subskrybowania toohello oferowane przez tematów usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-105">This article builds on hello information provided in [Create applications that use Service Bus queues](service-bus-create-queues.md) and offers an introduction toohello publish/subscribe capabilities offered by Service Bus topics.</span></span>

## <a name="evolving-retail-scenario"></a><span data-ttu-id="ae8f3-106">Scenariusz sprzedaży detalicznej zmieniające się</span><span class="sxs-lookup"><span data-stu-id="ae8f3-106">Evolving retail scenario</span></span>
<span data-ttu-id="ae8f3-107">W tym artykule nadal używany w scenariuszu sprzedaży detalicznej hello [tworzenie aplikacji korzystających z kolejek usługi Service Bus](service-bus-create-queues.md).</span><span class="sxs-lookup"><span data-stu-id="ae8f3-107">This article continues hello retail scenario used in [Create applications that use Service Bus queues](service-bus-create-queues.md).</span></span> <span data-ttu-id="ae8f3-108">Odwołaj się, że danych sprzedaży z poszczególnych terminali w punkcie sprzedaży (POS) musi być kierowany tooan systemu zarządzania spisem, używający tego toodetermine danych giełdowych po toobe uzupełniona.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-108">Recall that sales data from individual Point of Sale (POS) terminals must be routed tooan inventory management system which uses that data toodetermine when stock has toobe replenished.</span></span> <span data-ttu-id="ae8f3-109">Każdy terminal POS raporty jego danych sprzedaży przez wysłanie wiadomości toohello **DataCollectionQueue** kolejki, gdzie są one nadal aż otrzymuje hello systemu zarządzania spisem, jak pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="ae8f3-109">Each POS terminal reports its sales data by sending messages toohello **DataCollectionQueue** queue, where they remain until they are received by hello inventory management system, as shown here:</span></span>

![Usługa Service Bus 1](./media/service-bus-create-topics-subscriptions/IC657161.gif)

<span data-ttu-id="ae8f3-111">tooevolve tego scenariusza, nowe wymaganie został dodany systemu toohello: hello właściciela sklepu chce toobe toomonitor stanie jak hello magazynu działa w czasie rzeczywistym.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-111">tooevolve this scenario, a new requirement has been added toohello system: hello store owner wants toobe able toomonitor how hello store is performing in real time.</span></span>

<span data-ttu-id="ae8f3-112">tooaddress to wymaganie systemu hello musi "Wybierz" poza hello strumienia danych sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-112">tooaddress this requirement, hello system must "tap" off hello sales data stream.</span></span> <span data-ttu-id="ae8f3-113">Każdy komunikat wysyłany przez toobe Terminale POS hello wysyłane toohello systemu zarządzania spisem jako przed chcemy się nadal, ale chcemy innej kopii każdej wiadomości, że możemy użyć właściciela sklepu toohello widoku pulpitu nawigacyjnego toopresent hello.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-113">We still want each message sent by hello POS terminals toobe sent toohello inventory management system as before, but we want another copy of each message that we can use toopresent hello dashboard view toohello store owner.</span></span>

<span data-ttu-id="ae8f3-114">W każdej sytuacji, takich jak ta, w której wymagają każdego toobe komunikat używane przez wiele stron, można użyć usługi Service Bus *tematy*.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-114">In any situation such as this, in which you require each message toobe consumed by multiple parties, you can use Service Bus *topics*.</span></span> <span data-ttu-id="ae8f3-115">Wzorzec publikowania/subskrypcji, w którym każdy opublikowany komunikat staje się dostępna tooone lub więcej subskrypcji zarejestrowanej temacie hello tematach.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-115">Topics provide a publish/subscribe pattern in which each published message is made available tooone or more subscriptions registered with hello topic.</span></span> <span data-ttu-id="ae8f3-116">Z kolei w przypadku kolejek każdy komunikat jest odbierany przez jednego konsumenta.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-116">In contrast, with queues each message is received by a single consumer.</span></span>

<span data-ttu-id="ae8f3-117">Komunikaty są wysyłane tooa tematu w hello sam sposób, jak są one wysyłane tooa kolejki.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-117">Messages are sent tooa topic in hello same way as they are sent tooa queue.</span></span> <span data-ttu-id="ae8f3-118">Jednak nie odbiera wiadomości z tematu hello bezpośrednio; zostały odebrane z subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-118">However, messages are not received from hello topic directly; they are received from subscriptions.</span></span> <span data-ttu-id="ae8f3-119">Temat tooa subskrypcji można traktować jako wirtualną kolejkę, która odbiera kopie wiadomości powitania, które są wysyłane toothat tematu.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-119">You can think of a subscription tooa topic as a virtual queue that receives copies of hello messages that are sent toothat topic.</span></span> <span data-ttu-id="ae8f3-120">Komunikaty są odbierane z subskrypcji hello sam sposób, jak zostały odebrane z kolejki.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-120">Messages are received from a subscription hello same way as they are received from a queue.</span></span>

<span data-ttu-id="ae8f3-121">Cofnięcie scenariusz sprzedaży detalicznej toohello kolejki hello zastępuje tematu i subskrypcji zostanie dodany, który składnik systemu hello spisu zarządzania można użyć.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-121">Going back toohello retail scenario, hello queue is replaced by a topic, and a subscription is added, which hello inventory management system component can use.</span></span> <span data-ttu-id="ae8f3-122">Hello system pojawi się teraz w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="ae8f3-122">hello system now appears as follows:</span></span>

![Usługa Service Bus 2](./media/service-bus-create-topics-subscriptions/IC657165.gif)

<span data-ttu-id="ae8f3-124">tutaj konfiguracji Hello tak samo wykonuje toohello poprzedniego kolejki na podstawie projektu.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-124">hello configuration here performs identically toohello previous queue-based design.</span></span> <span data-ttu-id="ae8f3-125">Oznacza to, komunikaty wysyłane toohello tematu są routingiem toohello **spisu** subskrypcji, z których hello **systemu zarządzania spisem** je wykorzystuje.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-125">That is, messages sent toohello topic are routed toohello **Inventory** subscription, from which hello **Inventory Management System** consumes them.</span></span>

<span data-ttu-id="ae8f3-126">W kolejności toosupport hello pulpit nawigacyjny zarządzania utworzymy drugi subskrypcji na temat hello, jak pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="ae8f3-126">In order toosupport hello management dashboard, we create a second subscription on hello topic, as shown here:</span></span>

![Usługa Service Bus 3](./media/service-bus-create-topics-subscriptions/IC657166.gif)

<span data-ttu-id="ae8f3-128">W tej konfiguracji każdego komunikatu z terminali hello POS nawiązuje hello dostępne tooboth **pulpitu nawigacyjnego** i **spisu** subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-128">With this configuration, each message from hello POS terminals is made available tooboth hello **Dashboard** and **Inventory** subscriptions.</span></span>

## <a name="show-me-hello-code"></a><span data-ttu-id="ae8f3-129">Pokaż hello kodu</span><span class="sxs-lookup"><span data-stu-id="ae8f3-129">Show me hello code</span></span>
<span data-ttu-id="ae8f3-130">Artykuł Hello [tworzenie aplikacji korzystających z kolejek usługi Service Bus](service-bus-create-queues.md) w tym artykule opisano sposób toosign Konfigurowanie konta platformy Azure i tworzenia przestrzeni nazw usługi.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-130">hello article [Create applications that use Service Bus queues](service-bus-create-queues.md) describes how toosign up for an Azure account and create a service namespace.</span></span> <span data-ttu-id="ae8f3-131">zależnościami usługi Service Bus tooreference Najprostszym sposobem Hello jest hello tooinstall usługi Service Bus [pakietu Nuget](https://www.nuget.org/packages/WindowsAzure.ServiceBus/).</span><span class="sxs-lookup"><span data-stu-id="ae8f3-131">hello easiest way tooreference Service Bus dependencies is tooinstall hello Service Bus [Nuget package](https://www.nuget.org/packages/WindowsAzure.ServiceBus/).</span></span> <span data-ttu-id="ae8f3-132">Można również znaleźć hello bibliotek usługi Service Bus jako część hello Azure SDK.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-132">You can also find hello Service Bus libraries as part of hello Azure SDK.</span></span> <span data-ttu-id="ae8f3-133">Witaj pobierane są dostępne pod adresem hello [strona pobierania zestawu Azure SDK](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="ae8f3-133">hello download is available at hello [Azure SDK download page](https://azure.microsoft.com/downloads/).</span></span>

### <a name="create-hello-topic-and-subscriptions"></a><span data-ttu-id="ae8f3-134">Utwórz hello tematu i subskrypcji</span><span class="sxs-lookup"><span data-stu-id="ae8f3-134">Create hello topic and subscriptions</span></span>
<span data-ttu-id="ae8f3-135">Operacje zarządzania dla usługi Service Bus jednostek obsługi komunikatów (kolejki i publikowania/subskrypcji tematy) są wykonywane za pośrednictwem hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) klasy.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-135">Management operations for Service Bus messaging entities (queues and publish/subscribe topics) are performed via hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class.</span></span> <span data-ttu-id="ae8f3-136">Odpowiednie poświadczenia są wymagane w kolejności toocreate **NamespaceManager** wystąpienia określonego obszaru nazw.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-136">Appropriate credentials are required in order toocreate a **NamespaceManager** instance for a particular namespace.</span></span> <span data-ttu-id="ae8f3-137">Usługa Service Bus używa [dostępu sygnatury dostępu Współdzielonego](service-bus-sas.md) na podstawie modelu zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-137">Service Bus uses a [Shared Access Signature (SAS)](service-bus-sas.md) based security model.</span></span> <span data-ttu-id="ae8f3-138">Witaj [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) klasa reprezentuje dostawcę tokenu zabezpieczającego z wbudowanymi metodami factory zwracanie niektórych dobrze znanych dostawców tokenu.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-138">hello [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) class represents a security token provider with built-in factory methods returning some well-known token providers.</span></span> <span data-ttu-id="ae8f3-139">Użyjemy [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) poświadczeń sygnatury dostępu Współdzielonego hello toohold metody.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-139">We’ll use a [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) method toohold hello SAS credentials.</span></span> <span data-ttu-id="ae8f3-140">Witaj [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) wystąpienia następnie jest tworzony z hello adresu podstawowego przestrzeni nazw usługi Service Bus hello oraz hello dostawcy tokenu.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-140">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) instance is then constructed with hello base address of hello Service Bus namespace and hello token provider.</span></span>

<span data-ttu-id="ae8f3-141">Witaj [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) klasa dostarcza metody toocreate, wyliczania i usuwania jednostek obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-141">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class provides methods toocreate, enumerate and delete messaging entities.</span></span> <span data-ttu-id="ae8f3-142">Witaj kod, który jest wyświetlany w tym miejscu przedstawiono sposób hello **NamespaceManager** wystąpienie jest utworzony i używany toocreate hello **DataCollectionTopic** tematu.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-142">hello code that is shown here shows how hello **NamespaceManager** instance is created and used toocreate hello **DataCollectionTopic** topic.</span></span>

```csharp
Uri uri = ServiceBusEnvironment.CreateServiceUri("sb", "test-blog", string.Empty);
string name = "RootManageSharedAccessKey";
string key = "abcdefghijklmopqrstuvwxyz";

TokenProvider tokenProvider = TokenProvider.CreateSharedAccessSignatureTokenProvider(name, key);
NamespaceManager namespaceManager = new NamespaceManager(uri, tokenProvider);

namespaceManager.CreateTopic("DataCollectionTopic");
```

<span data-ttu-id="ae8f3-143">Należy pamiętać, że istnieją przeciążenia metody hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) metody umożliwiające właściwości tooset hello tematu.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-143">Note that there are overloads of hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) method that enable you tooset properties of hello topic.</span></span> <span data-ttu-id="ae8f3-144">Na przykład można ustawić hello time to live (TTL) wartość domyślna dla wiadomości wysyłanych toohello tematu.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-144">For example, you can set hello default time-to-live (TTL) value for messages sent toohello topic.</span></span> <span data-ttu-id="ae8f3-145">Następnie dodaj hello **spisu** i **pulpitu nawigacyjnego** subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-145">Next, add hello **Inventory** and **Dashboard** subscriptions.</span></span>

```csharp
namespaceManager.CreateSubscription("DataCollectionTopic", "Inventory");
namespaceManager.CreateSubscription("DataCollectionTopic", "Dashboard");
```

### <a name="send-messages-toohello-topic"></a><span data-ttu-id="ae8f3-146">Wysyłanie wiadomości toohello tematu</span><span class="sxs-lookup"><span data-stu-id="ae8f3-146">Send messages toohello topic</span></span>
<span data-ttu-id="ae8f3-147">Dla czasu wykonywania operacji na jednostek usługi Service Bus; na przykład wysyłanie i odbieranie wiadomości, aplikacja musi najpierw utworzyć [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#microsoft_servicebus_messaging_messagingfactory) obiektu.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-147">For run-time operations on Service Bus entities; for example, sending and receiving messages, an application must first create a [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#microsoft_servicebus_messaging_messagingfactory) object.</span></span> <span data-ttu-id="ae8f3-148">Podobne toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) klasy, hello **MessagingFactory** z adresu podstawowego hello hello przestrzeni nazw usługi i dostawcy tokenów hello jest tworzone wystąpienie.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-148">Similar toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class, hello **MessagingFactory** instance is created from hello base address of hello service namespace and hello token provider.</span></span>

```
MessagingFactory factory = MessagingFactory.Create(uri, tokenProvider);
```

<span data-ttu-id="ae8f3-149">Tooand wiadomości otrzymanych od tematów usługi Service Bus są wystąpieniami klasy hello [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) klasy.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-149">Messages sent tooand received from Service Bus topics, are instances of hello [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) class.</span></span> <span data-ttu-id="ae8f3-150">Ta klasa zawiera zestaw właściwości standardowych (takich jak [etykiety](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.label?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) i [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.timetolive?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), słownik, który jest używany toohold właściwości aplikacji oraz treść dowolnych danych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-150">This class consists of a set of standard properties (such as [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.label?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) and [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.timetolive?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), a dictionary that is used toohold application properties, and a body of arbitrary application data.</span></span> <span data-ttu-id="ae8f3-151">Aplikacja możne ustawić treść hello przez przekazanie dowolnego obiektu podlegającego serializacji (hello w poniższym przykładzie przekazuje w **SalesData** obiekt, który reprezentuje hello danych sprzedaży z terminalu hello POS), który będzie używany hello [ DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize hello obiektu.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-151">An application can set hello body by passing in any serializable object (hello following example passes in a **SalesData** object that represents hello sales data from hello POS terminal), which will use hello [DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize hello object.</span></span> <span data-ttu-id="ae8f3-152">Alternatywnie [strumienia](https://msdn.microsoft.com/library/system.io.stream.aspx) można podać obiektu.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-152">Alternatively, a [Stream](https://msdn.microsoft.com/library/system.io.stream.aspx) object can be provided.</span></span>

```csharp
BrokeredMessage bm = new BrokeredMessage(salesData);
bm.Label = "SalesReport";
bm.Properties["StoreName"] = "Redmond";
bm.Properties["MachineID"] = "POS_1";
```

<span data-ttu-id="ae8f3-153">Witaj najprostszy sposób toosend wiadomości toohello temat jest toouse [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) obiekt bezpośrednio hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) wystąpienie:</span><span class="sxs-lookup"><span data-stu-id="ae8f3-153">hello easiest way toosend messages toohello topic is toouse [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate a [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) object directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance:</span></span>

```csharp
MessageSender sender = factory.CreateMessageSender("DataCollectionTopic");
sender.Send(bm);
```

### <a name="receive-messages-from-a-subscription"></a><span data-ttu-id="ae8f3-154">Odbieranie komunikatów z subskrypcji</span><span class="sxs-lookup"><span data-stu-id="ae8f3-154">Receive messages from a subscription</span></span>
<span data-ttu-id="ae8f3-155">Podobne kolejek toousing, tooreceive komunikatów z subskrypcji można użyć [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) obiektów, które można tworzyć bezpośrednio z hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) przy użyciu [ CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span><span class="sxs-lookup"><span data-stu-id="ae8f3-155">Similar toousing queues, tooreceive messages from a subscription you can use a [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) object which you create directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) using [CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span></span> <span data-ttu-id="ae8f3-156">Można użyć jednej z hello odbierania dwa różne tryby (**ReceiveAndDelete** i **PeekLock**), zgodnie z opisem w [tworzenie aplikacji korzystających z kolejek usługi Service Bus](service-bus-create-queues.md).</span><span class="sxs-lookup"><span data-stu-id="ae8f3-156">You can use one of hello two different receive modes (**ReceiveAndDelete** and **PeekLock**), as discussed in [Create applications that use Service Bus queues](service-bus-create-queues.md).</span></span>

<span data-ttu-id="ae8f3-157">Należy pamiętać, że podczas tworzenia **MessageReceiver** subskrypcji, hello *entityPath* parametr ma formę hello `topicPath/subscriptions/subscriptionName`.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-157">Note that when you create a **MessageReceiver** for subscriptions, hello *entityPath* parameter is of hello form `topicPath/subscriptions/subscriptionName`.</span></span> <span data-ttu-id="ae8f3-158">W związku z tym toocreate **MessageReceiver** dla hello **spisu** subskrypcji hello **DataCollectionTopic** tematu, *entityPath*musi być ustawiona zbyt`DataCollectionTopic/subscriptions/Inventory`.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-158">Therefore, toocreate a **MessageReceiver** for hello **Inventory** subscription of hello **DataCollectionTopic** topic, *entityPath* must be set too`DataCollectionTopic/subscriptions/Inventory`.</span></span> <span data-ttu-id="ae8f3-159">Kod Hello wygląda następująco:</span><span class="sxs-lookup"><span data-stu-id="ae8f3-159">hello code appears as follows:</span></span>

```csharp
MessageReceiver receiver = factory.CreateMessageReceiver("DataCollectionTopic/subscriptions/Inventory");
BrokeredMessage receivedMessage = receiver.Receive();
try
{
    ProcessMessage(receivedMessage);
    receivedMessage.Complete();
}
catch (Exception e)
{
    receivedMessage.Abandon();
}
```

## <a name="subscription-filters"></a><span data-ttu-id="ae8f3-160">Filtry subskrypcji</span><span class="sxs-lookup"><span data-stu-id="ae8f3-160">Subscription filters</span></span>
<span data-ttu-id="ae8f3-161">Do tej pory w tym scenariuszu wszystkich wiadomości wysłanych toohello tematu są nawiązywane subskrypcje dostępne tooall zarejestrowany.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-161">So far, in this scenario all messages sent toohello topic are made available tooall registered subscriptions.</span></span> <span data-ttu-id="ae8f3-162">Hello tutaj klucza frazy "udostępniono."</span><span class="sxs-lookup"><span data-stu-id="ae8f3-162">hello key phrase here is "made available."</span></span> <span data-ttu-id="ae8f3-163">Podczas subskrypcje usługi Service Bus, zobacz wszystkich wiadomości wysłanych toohello tematu, możesz skopiować tylko podzbiór tych kolejki subskrypcji wirtualnego toohello wiadomości.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-163">While Service Bus subscriptions see all messages sent toohello topic, you can copy only a subset of those messages toohello virtual subscription queue.</span></span> <span data-ttu-id="ae8f3-164">To jest wykonywane przy użyciu subskrypcji *filtry*.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-164">This is performed using subscription *filters*.</span></span> <span data-ttu-id="ae8f3-165">Podczas tworzenia subskrypcji, możesz podać wyrażenie filtru w postaci hello predykatu styl SQL92 działającą za pośrednictwem właściwości hello wiadomości powitania, zarówno hello właściwości systemu (na przykład [etykiety](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label)) i aplikacji hello właściwości, takie jak **StoreName** w poprzednim przykładzie hello.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-165">When you create a subscription, you can supply a filter expression in hello form of a SQL92 style predicate that operates over hello properties of hello message, both hello system properties (for example, [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label)) and hello application properties, such as **StoreName** in hello previous example.</span></span>

<span data-ttu-id="ae8f3-166">To rozwijają tooillustrate scenariusza hello, drugi magazynu jest scenariusz sprzedaży detalicznej dodane tooour toobe.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-166">Evolving hello scenario tooillustrate this, a second store is toobe added tooour retail scenario.</span></span> <span data-ttu-id="ae8f3-167">Sprzedaży danych ze wszystkich hello POS terminali z obu sklepów jeszcze systemu zarządzania spisem toohello scentralizowane toobe kierowane Menedżera magazynu przy użyciu narzędzia pulpitu nawigacyjnego hello jest jednak tylko zainteresowana hello wydajność tego magazynu.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-167">Sales data from all of hello POS terminals from both stores still have toobe routed toohello centralized inventory management system, but a store manager using hello dashboard tool is only interested in hello performance of that store.</span></span> <span data-ttu-id="ae8f3-168">Możesz użyć filtrowania tooachieve to subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-168">You can use subscription filtering tooachieve this.</span></span> <span data-ttu-id="ae8f3-169">Należy zauważyć, że terminale hello POS publikowania wiadomości, ich hello **StoreName** właściwości aplikację na wiadomość powitania.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-169">Note that when hello POS terminals publish messages, they set hello **StoreName** application property on hello message.</span></span> <span data-ttu-id="ae8f3-170">Podane dwóch magazynów, na przykład **Redmond** i **Seattle**, hello POS terminali w hello Redmond przechowywania sygnatury komunikatów ich danych sprzedaży z **StoreName** równa zbyt **Redmond**, podczas gdy hello Seattle przechowywania Użyj Terminale POS **StoreName** równa zbyt**Seattle**.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-170">Given two stores, for example **Redmond** and **Seattle**, hello POS terminals in hello Redmond store stamp their sales data messages with a **StoreName** equal too**Redmond**, whereas hello Seattle store POS terminals use a **StoreName** equal too**Seattle**.</span></span> <span data-ttu-id="ae8f3-171">Menedżera magazynu Hello hello Redmond przechowywać tylko chce toosee danych z terminali w punkcie sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-171">hello store manager of hello Redmond store only wants toosee data from its POS terminals.</span></span> <span data-ttu-id="ae8f3-172">Hello system wygląda następująco:</span><span class="sxs-lookup"><span data-stu-id="ae8f3-172">hello system appears as follows:</span></span>

![Usługa Bus4](./media/service-bus-create-topics-subscriptions/IC657167.gif)

<span data-ttu-id="ae8f3-174">tooset się marszruty, Utwórz hello **pulpitu nawigacyjnego** subskrypcji w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="ae8f3-174">tooset up this routing, you create hello **Dashboard** subscription as follows:</span></span>

```csharp
SqlFilter dashboardFilter = new SqlFilter("StoreName = 'Redmond'");
namespaceManager.CreateSubscription("DataCollectionTopic", "Dashboard", dashboardFilter);
```

<span data-ttu-id="ae8f3-175">Z tym [filtr subskrypcji](/dotnet/api/microsoft.servicebus.messaging.sqlfilter), tylko komunikaty, które mają hello **StoreName** właściwość zbyt**Redmond** zostaną skopiowane toohello wirtualnego kolejki hello **Pulpitu nawigacyjnego** subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-175">With this [subscription filter](/dotnet/api/microsoft.servicebus.messaging.sqlfilter), only messages that have hello **StoreName** property set too**Redmond** will be copied toohello virtual queue for hello **Dashboard** subscription.</span></span> <span data-ttu-id="ae8f3-176">Znacznie więcej toosubscription filtrowania, jednak nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-176">There is much more toosubscription filtering, however.</span></span> <span data-ttu-id="ae8f3-177">Aplikacje mogą mieć wiele reguł filtru na subskrypcję dodanie toohello możliwości toomodify hello właściwości wiadomości, kiedy przechodzi on wirtualnej kolejki subskrypcji tooa.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-177">Applications can have multiple filter rules per subscription in addition toohello ability toomodify hello properties of a message as it passes tooa subscription's virtual queue.</span></span>

## <a name="summary"></a><span data-ttu-id="ae8f3-178">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="ae8f3-178">Summary</span></span>
<span data-ttu-id="ae8f3-179">Wszystkie usługi kolejkowania toouse powodów hello opisanego w [tworzenie aplikacji korzystających z kolejek usługi Service Bus](service-bus-create-queues.md) mają zastosowanie również tootopics, w szczególności:</span><span class="sxs-lookup"><span data-stu-id="ae8f3-179">All of hello reasons toouse queuing described in [Create applications that use Service Bus queues](service-bus-create-queues.md) also apply tootopics, specifically:</span></span>

* <span data-ttu-id="ae8f3-180">Oddzielenia czasowego — komunikatów, producenci i konsumenci nie mają toobe w trybie online na powitania tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-180">Temporal decoupling – message producers and consumers do not have toobe online at hello same time.</span></span>
* <span data-ttu-id="ae8f3-181">Wyrównywanie obciążenia — szczytów obciążenia są wygładzania według tematów hello włączenie odbierającą toobe aplikacje udostępnione średni obciążenia zamiast obciążenia szczytowego.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-181">Load leveling – peaks in load are smoothed out by hello topic enabling consuming applications toobe provisioned for average load instead of peak load.</span></span>
* <span data-ttu-id="ae8f3-182">Równoważenie obciążenia — podobne tooa kolejka, może mieć wielu konkurujących konsumentów nasłuchiwania na jedną subskrypcją, w każdej wiadomości przekazane tooonly konsumentów hello, w tym samym równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-182">Load balancing – similar tooa queue, you can have multiple competing consumers listening on a single subscription, with each message handed off tooonly one of hello consumers, thereby balancing load.</span></span>
* <span data-ttu-id="ae8f3-183">Luźne powiązanie — można rozwijać hello wiadomości sieci bez wpływu na istniejące punkty końcowe; na przykład dodawania subskrypcji lub zmiana tooallow tematu tooa filtry dla nowych klientów.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-183">Loose coupling – you can evolve hello messaging network without affecting existing endpoints; for example, adding subscriptions or changing filters tooa topic tooallow for new consumers.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ae8f3-184">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="ae8f3-184">Next steps</span></span>

<span data-ttu-id="ae8f3-185">Zobacz [tworzenie aplikacji korzystających z kolejek usługi Service Bus](service-bus-create-queues.md) uzyskać informacji na temat sposobu toouse kolejki w scenariuszu detalicznej hello POS.</span><span class="sxs-lookup"><span data-stu-id="ae8f3-185">See [Create applications that use Service Bus queues](service-bus-create-queues.md) for information about how toouse queues in hello POS retail scenario.</span></span>

