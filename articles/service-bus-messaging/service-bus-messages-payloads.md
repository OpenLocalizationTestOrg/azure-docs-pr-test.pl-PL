---
title: "Azure komunikatów usługi Service Bus, ładunków i serializacji | Dokumentacja firmy Microsoft"
description: "Omówienie ładunków komunikatów usługi Service Bus"
services: service-bus-messaging
documentationcenter: 
author: clemensv
manager: timlt
editor: 
ms.service: service-bus-messaging
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/28/2017
ms.author: sethm
ms.openlocfilehash: 7c18cc4a0e6a8dbf3a47c146707666c5538ff7c3
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/11/2017
---
# <a name="messages-payloads-and-serialization"></a>Komunikaty, ładunków i serializacji

Microsoft Azure Service Bus obsługuje wiadomości. Komunikaty przenoszenia ładunku, jak również metadanych w postaci pary klucz wartość właściwości opisujące ładunku i zapewnieniu instrukcje obsługi magistrali usług i aplikacji. Czasami tych samych metadanych jest wystarczające, aby wykonać informacje, które chce nawiązać odbiorcy nadawcy i ładunku pozostaje puste.

Model obiektów oficjalnego klientów usługi Service Bus dla platformy .NET i Java odzwierciedlają abstrakcyjny struktury wiadomości usługi Service Bus, która jest mapowana do i z usługi Service Bus obsługuje protokoły danych przesyłanych w sieci.
 
Komunikatów usługi Service Bus składa się z sekcji ładunek danych binarnych, które usługi Service Bus nigdy nie obsługuje żadnych formularz na stronie usługi i dwa zestawy właściwości. *Broker właściwości* są wstępnie zdefiniowane przez system. Tych wstępnie zdefiniowanych właściwości albo kontrolowania funkcji na poziomie komunikatu wewnątrz brokera lub są one wykonywane na metadanych typowe i standardowych elementów. *Właściwości użytkownika* to kolekcja par klucz wartość, które mogą być definiowane i ustawiane przez aplikację.
 
Właściwości brokera wstępnie zdefiniowane są wymienione w poniższej tabeli. Nazwy są używane przez wszystkich klientów oficjalnego interfejsów API oraz w [BrokerProperties](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Properties_) obiekt JSON mapowania protokołu HTTP.
 
Odpowiednik nazw używanych na poziomie protokołu AMQP są wyświetlane w nawiasach. 

| Nazwa właściwości                         | Opis                                                                                                                                                                                                                                                                                                                                                                                                                               |
|---------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  [ContentType](/dotnet/api/microsoft.azure.servicebus.message.contenttype) (content-type)           | Opcjonalnie opis ładunku komunikatu z deskryptorem następującego formatu RFC2045, 5 sekcji, na przykład `application/json`.                                                                                                                                                                                                                                                                                             |
|  [CorrelationId](/dotnet/api/microsoft.azure.servicebus.message.correlationid#Microsoft_Azure_ServiceBus_Message_CorrelationId) (identyfikator korelacji)       | Umożliwia aplikacji określanie kontekstu wiadomości na potrzeby korelacji, na przykład odzwierciedlające **MessageId** wiadomości, że jest on odpowiedzi.                                                                                                                                                                                                                                                                  |
| [DeadLetterSource](/dotnet/api/microsoft.azure.servicebus.message.deadlettersource)                      | Ustawić tylko w wiadomości, które zostały lettered wiadomości, a następnie automatycznie przesłany dalej z kolejki utraconych wiadomości do innej jednostki. Określa jednostki, w których komunikat był lettered wiadomości. Ta właściwość jest tylko do odczytu.                                                                                                                                                                                                                                  |
| [DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.deliverycount)                         | Liczba dostaw dokonanych dla tej wiadomości. Licznik jest zwiększany po wygaśnięciu blokady wiadomości lub wiadomości jest jawnie porzucone przez odbiornik. Ta właściwość jest tylko do odczytu.                                                                                                                                                                                                                                                  |
| [EnqueuedSequenceNumber](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.enqueuedsequencenumber)                | Komunikaty, które zostały przekazane automatycznie ta właściwość odzwierciedla numer sekwencji, który miał pierwszego przypisania komunikat w jego oryginalnej punkcie przesyłania. Ta właściwość jest tylko do odczytu.                                                                                                                                                                                                                                                                |
| [EnqueuedTimeUtc](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.enqueuedtimeutc)                       | UTC błyskawicznych jaką komunikat został zaakceptowany i przechowywane w jednostce. Ta wartość może być używana jako wskaźnik czasu odbioru autorytatywną i neutralne Jeśli odbiornik nie chce zaufania zegara nadawcy. Ta właściwość jest tylko do odczytu.                                                                                                                                                                                                   |
|  [ExpiresAtUtc](/dotnet/api/microsoft.azure.servicebus.message.expiresatutc) (bezwzględne wygaśnięcia time) | UTC błyskawicznych jaką wiadomość jest oznaczony do usunięcia i nie jest już dostępne do pobrania z obiektu z powodu wygaśnięcia. Steruje wygaśnięcia **TimeToLive** właściwości i ta właściwość jest obliczana na podstawie EnqueuedTimeUtc + TimeToLive. Ta właściwość jest tylko do odczytu.                                                                                                                                                                           |
| [ForcePersistence](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.forcepersistence)                      | Dla kolejki i tematy, które mają [EnableExpress](/dotnet/api/microsoft.servicebus.messaging.queuedescription.enableexpress?view=azureservicebus-4.1.1#Microsoft_ServiceBus_Messaging_QueueDescription_EnableExpress) Flaga, tej właściwości można ustawić, aby wskazać, że wiadomość musi zostać utrwalony na dysku przed zostało potwierdzone. Jest to standardowe zachowanie dla wszystkich jednostek-express.                                                                                                                                                                                                         |
| [Etykieta](/dotnet/api/microsoft.azure.servicebus.message.label) (temat)                       | Ta właściwość umożliwia aplikacji wskazać cel komunikat do odbiorcy w sposób standardowy, podobnie jak wiersz tematu wiadomości e-mail.                                                                                                                                                                                                                                                                                  |
| [LockedUntilUtc](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.lockeduntilutc)                        | Dla wiadomości pobierane w obszarze blokady (tryb, nie wstępnie rozstrzygnięte odbierania blokady peek) ta właściwość odzwierciedla, do której jest przechowywany wiadomości błyskawicznych UTC zablokowane w kolejce/subskrypcji. Po wygaśnięciu blokady [DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.deliverycount) jest zwiększany i wiadomość jest ponownie dostępne do pobrania. Ta właściwość jest tylko do odczytu.                                                                                                                         |
| [LockToken](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.locktoken)                             | Token blokady jest odwołanie do blokady, który jest zablokowany przez brokera w *blokady peek* tryb odbierania. Tokenu można przypiąć blokady trwale za pomocą [odroczenia](message-deferral.md) interfejsu API i bez, wykonać komunikat poza przepływ stanu dostarczania regularne. Ta właściwość jest tylko do odczytu.                                                                                                                                                               |
| [Identyfikator komunikatu](/dotnet/api/microsoft.azure.servicebus.message.messageid) (identyfikator wiadomości)                | Identyfikator wiadomości jest zdefiniowane przez aplikację wartości, który unikatowo identyfikuje wiadomość i jego ładunku. Identyfikator jest ciągiem dowolnych i może uwzględniać identyfikator GUID lub identyfikator pochodzących z kontekstu aplikacji. U możliwia [wykrywanie duplikatów](duplicate-detection.md) funkcji identyfikuje i usuwa sekundę, a dalsze przesyłanie komunikatów o takim samym **MessageId**.                                                                |
| [PartitionKey](/dotnet/api/microsoft.azure.servicebus.message.partitionkey)                          | Aby uzyskać [partycjonowane jednostki](service-bus-partitioning.md), ustawienie tej wartości umożliwia przypisywanie wiadomości pokrewne w tej samej partycji wewnętrznej, dzięki czemu przesyłania zamówienia sekwencji jest poprawnie zarejestrowane. Partycja jest wybierany przez funkcję skrótu przez tę wartość i nie mogą być wybierane bezpośrednio. Dla jednostek obsługujący sesji **SessionId** właściwość zastępuje tę wartość.                                                                                                       |
| [ReplyTo](/dotnet/api/microsoft.azure.servicebus.message.replyto) (Odpowiedz do)                    | Ta wartość opcjonalne i zdefiniowanym przez aplikację jest standardowym sposobem express ścieżkę odpowiedzi do odbiorcy wiadomości. Gdy nadawca oczekuje odpowiedzi, ustawia wartość do ścieżką bezwzględną ani względną, kolejki lub oczekuje, że odpowiedź do wysłania do tematu.                                                                                                                                           |
| [ReplyToSessionId](/dotnet/api/microsoft.azure.servicebus.message.replytosessionid) (odpowiedzi id grupy)  | Ta wartość wspomaga **ReplyTo** informacji i określa, która **SessionId** powinien być ustawiony na odpowiedź przy wysyłaniu do jednostek odpowiedzi.                                                                                                                                                                                                                                                                            |
| [ScheduledEnqueueTimeUtc](/dotnet/api/microsoft.azure.servicebus.message.scheduledenqueuetimeutc)               | Komunikaty, które są udostępniane tylko do pobierania z opóźnieniem ta właściwość definiuje błyskawicznych UTC, jaką komunikat zostanie logicznie umieszczonych w kolejce, sekwencjonowania i w związku z tym udostępnione do pobrania.                                                                                                                                                                                                                 |
| [SequenceNumber](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.sequencenumber)                        | Numer sekwencji jest unikatowy całkowitą 64-bitowych przypisany do komunikatu jako zaakceptowaniu i przechowywane przez broker i funkcji jako identyfikatora wartość true. W przypadku partycjonowane jednostki najwyższego poziomu 16 bitów odzwierciedlają identyfikator partycji. Numery sekwencji monotonicznie Zwiększ i są gapless. One przerzucane 0 po wyczerpaniu zakresu 48-64 bitowym. Ta właściwość jest tylko do odczytu.                                                                |
| [Identyfikator sesji](/dotnet/api/microsoft.azure.servicebus.message.sessionid) (identyfikator grupy)                  | Dla jednostek obsługujący sesji tej wartości zdefiniowane przez aplikację określa przynależność do sesji wiadomości. Komunikaty z tego samego identyfikatora sesji podlegają podsumowania blokowania i Włącz dokładne w kolejności przetwarzania i demultipleksowanie. Dla jednostek nieobsługujące sesji ta wartość jest ignorowana.                                                                                                                                     |
| [Rozmiar](/dotnet/api/microsoft.azure.servicebus.message.size)                                  | Odzwierciedla przechowywanych rozmiar wiadomości w dzienniku brokera jako liczba bajtów, zgodnie z jego liczy się przydział magazynowania. Ta właściwość jest tylko do odczytu.                                                                                                                                                                                                                                                                                                       |
| [Stan](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.state)                                 | Wskazuje stan komunikat w dzienniku. Ta właściwość ma zastosowanie tylko podczas komunikat przeglądanie ("peek"), aby ustalić, czy wiadomość jest "aktywny" i dostępne do pobrania jako osiągnie wierzchołek kolejki, czy została odroczona lub jest oczekujących na zaplanowanie. Ta właściwość jest tylko do odczytu.                                                                                                                                           |
| [Wartość TimeToLive](/dotnet/api/microsoft.azure.servicebus.message.timetolive)                            | Ta wartość jest względny czas trwania, po którym komunikat wygasa, zaczynając od moment komunikat został zaakceptowany i przechowywane przez brokera, określonymi w **EnqueueTimeUtc**. Gdy nie są ustawione jawnie, wartość przyjmowane jest **DefaultTimeToLive** dla odpowiednich kolejka lub temat. Poziom komunikatu **TimeToLive** wartość nie może być dłuższa niż jednostki **DefaultTimeToLive** ustawienie i jego dyskretnie dostosowania wówczas. |
| [Aby](/dotnet/api/microsoft.azure.servicebus.message.to) (do)                               | Ta właściwość jest zarezerwowana do użytku w przyszłości w scenariuszach routingu i obecnie jest ignorowana przez sam brokera. Aplikacje mogą używać tej wartości w zmiennych reguły do przodu automatycznie scenariusz tworzenia łańcucha wskazująca logicznej przeznaczenia wiadomości.                                                                                                                                                                                   |
| [ViaPartitionKey](/dotnet/api/microsoft.azure.servicebus.message.viapartitionkey)                       | Jeśli komunikat jest wysyłany za pośrednictwem kolejki transfer w zakresie transakcji, ta wartość wybiera partycji kolejki transferu.                                                                                                                                                                                                                                                                                                                 |

Model abstrakcyjny komunikat umożliwia komunikat zaksięgowania do kolejki za pośrednictwem protokołu HTTP (faktycznie zawsze HTTPS) i mogą zostać pobrane za pośrednictwem protokołu AMQP. W obu przypadkach wiadomość wygląda normalnej w ramach odpowiednich protokołu. Właściwości brokera są tłumaczone zgodnie z potrzebami i właściwości użytkownika są mapowane na najbardziej odpowiednią lokalizację na model komunikatu protokołu odpowiednich. W protokole HTTP mapy właściwości użytkownika bezpośrednio do i z nagłówków HTTP; w przypadku protokołu AMQP mapują do i z **właściwości aplikacji** mapy.

## <a name="message-routing-and-correlation"></a>Rozsyłanie wiadomości i korelacji

Podzbiór właściwości brokera opisane wcześniej, w szczególności [do](/dotnet/api/microsoft.azure.servicebus.message.to), [ReplyTo](/dotnet/api/microsoft.azure.servicebus.message.replyto), [ReplyToSessionId](/dotnet/api/microsoft.azure.servicebus.message.replytosessionid), [MessageId](/dotnet/api/microsoft.azure.servicebus.message.messageid), [ CorrelationId](/dotnet/api/microsoft.azure.servicebus.message.correlationid), i [SessionId](/dotnet/api/microsoft.azure.servicebus.message.sessionid), służą do aplikacji rozsyłanie wiadomości do danego przeznaczenia. Na przykład wziąć pod uwagę kilka wzorców:

- **Proste żądania/odpowiedzi**: Wydawca wysyła komunikat do kolejki i oczekuje na odpowiedź od konsumenta wiadomości. Aby otrzymywać odpowiedź, wydawcy jest właścicielem kolejki, do którego oczekuje, że odpowiedzi mają być dostarczone. Adres kolejki jest wyrażona w wiadomości wychodzącej **ReplyTo** właściwości. Gdy użytkownik odpowie, kopiuje **MessageId** obsłużone wiadomości do **CorrelationId** właściwość komunikatu odpowiedzi i dostarcza wiadomość do miejsca docelowego wskazywanym przez **ReplyTo** właściwości. Jeden komunikat może spowodować wiele odpowiedzi, w zależności od kontekstu aplikacji.
- **Multiemisji żądania/odpowiedzi**: jako wariant wcześniejszego wzorca wydawcy wysyła komunikat do tematu i wielu subskrybentów ubiegać może korzystać z wiadomości. Wszystkich subskrybentów może odpowiadać w sposób opisany wcześniej. Ten wzorzec jest używany w scenariuszach odnajdywania lub zbiorczego wywołania i strona przeciwna zwykle identyfikowany z właściwości użytkownika lub ładunku. Jeśli **ReplyTo** punktów do tematu, zestaw odpowiedzi odnajdywania mogą być dystrybuowane do odbiorców.
- **Multipleksowanie**: Ta funkcja sesji umożliwia Multipleksowanie strumieni powiązane komunikaty za pośrednictwem pojedynczej kolejki lub subskrypcji w taki sposób, aby każdej sesji (lub grupy) powiązane wiadomości, zidentyfikowane przez dopasowanie **SessionId**wartości, są kierowane do określonego odbiornika podczas sesji w zamknięciu przechowuje odbiornika. Dowiedz się więcej o szczegóły sesji [tutaj](message-sessions.md).
- **Multiplexed żądania/odpowiedzi**: Ta funkcja sesji umożliwia multipleksowanych odpowiedzi, dzięki czemu kilku wydawców udostępniania kolejki odpowiedzi. Przez ustawienie **ReplyToSessionId**, wydawcy można nakazać consumer(s), aby skopiować tę wartość do **SessionId** właściwości komunikatu odpowiedzi. Publikowanie kolejka lub temat nie należy pamiętać sesji. Podczas przesyłania komunikatu wydawcy można w szczególności poczekaj sesji z danym **SessionId** do zmaterializowania w kolejce, akceptując warunkowo odbiornika sesji. 

Routing wewnątrz przestrzeni nazw usługi Service Bus można uzyskać przy użyciu łańcucha do przodu automatycznie i reguł subskrypcję tematu. Routing w przestrzeni nazw może być realizowana [przy użyciu usługi Azure LogicApps](https://azure.microsoft.com/services/logic-apps/). Jak wskazano na poprzedniej liście **do** właściwość jest zarezerwowany do użytku w przyszłości i ostatecznie może zostać zinterpretowany przez brokera z funkcją specjalnie włączone. Aplikacje, które chcesz wdrożyć routingu należy zrobić, dlatego na podstawie ich właściwości i nie jazdy na **do** właściwości; jednak zrobić to teraz nie powoduje problemów ze zgodnością.

## <a name="payload-serialization"></a>Serializacja ładunku

Podczas przesyłania lub przechowywane wewnątrz usługi Service Bus, ładunku jest zawsze bloku nieprzezroczyste, binary. [ContentType](/dotnet/api/microsoft.azure.servicebus.message.contenttype) właściwości umożliwia aplikacjom opisano ładunku, w formacie sugerowane wartości właściwości jest opis typ zawartości MIME, zgodnie z IETF RFC2045; na przykład `application/json;charset=utf-8`.

W przeciwieństwie do języka Java lub .NET Standard wariantów .NET Framework w wersji interfejsu API usługi Service Bus obsługuje tworzenie **BrokeredMessage** wystąpień przez przekazanie dowolnego obiekty .NET do konstruktora. 

Gdy za pomocą starszej wersji protokołu SBMP tych obiektów następnie są serializowane serializatora binarnego domyślne lub zewnętrznie dostarczonego serializatora. Podczas korzystania z protokołu AMQP, serializowany jest obiekt na obiekt protokołu AMQP. Odbiorcy mogą pobierać te obiekty z [GetBody<T>()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.getbody#Microsoft_ServiceBus_Messaging_BrokeredMessage_GetBody__1) metody podawania oczekiwano typu z protokołu AMQP, obiekty są serializowane w wykres AMQP **ArrayList** i **IDictionary < string, object >** obiektów i może zostać odczytany przez klienta protokołu AMQP. 

Podczas tego magic ukryte serializacji jest wygodne, aplikacji powinna przejąć kontrolę jawne serializacji obiektu i włączanie ich wykresów obiektów do strumieni przed dołączeniem ich do wiadomości i sytuacja odwrotna po stronie odbiorcy. Daje to interoperacyjne wyników. Należy również zauważyć, podczas AMQP ma zaawansowanego modelu kodowania binarnego, jest powiązane z ekosystemem AMQP obsługi wiadomości i klientów HTTP będzie mieć problemy dekodowania takich ładunków. 

Ogólnie zaleca się JSON i Apache Avro jako ładunek formatów danych strukturalnych.

Wariantów .NET Standard i interfejsu API języka Java akceptować tylko tablice typu byte, co oznacza, że aplikacja musi obsługiwać formantu serializacji obiektu. 

## <a name="next-steps"></a>Następne kroki

Aby dowiedzieć się więcej o komunikatów usługi Service Bus, zobacz następujące tematy:

* [Podstawy usługi Service Bus](service-bus-fundamentals-hybrid-solutions.md)
* [Kolejki, tematy i subskrypcje usługi Service Bus](service-bus-queues-topics-subscriptions.md)
* [Wprowadzenie do kolejek usługi Service Bus](service-bus-dotnet-get-started-with-queues.md)
* [Jak używać tematów i subskrypcji usługi Service Bus](service-bus-dotnet-how-to-use-topics-subscriptions.md)