---
title: "Omówienie podstaw usługi Azure Service Bus | Microsoft Docs"
description: "Wprowadzenie do używania usługi Service Bus w celu łączenia aplikacji Azure z innym oprogramowaniem."
services: service-bus-messaging
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 12654cdd-82ab-4b95-b56f-08a5a8bbc6f9
ms.service: service-bus-messaging
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/15/2017
ms.author: sethm
ms.openlocfilehash: af8b10f0a460e695a39879718174e81f78934ef8
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="azure-service-bus"></a><span data-ttu-id="5605e-103">Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="5605e-103">Azure Service Bus</span></span>

<span data-ttu-id="5605e-104">Obojętnie, czy aplikacja lub usługa działa w chmurze, czy lokalnie, często wymaga interakcji z innymi aplikacjami lub usługami.</span><span class="sxs-lookup"><span data-stu-id="5605e-104">Whether an application or service runs in the cloud or on premises, it often needs to interact with other applications or services.</span></span> <span data-ttu-id="5605e-105">Aby zapewnić szeroko użyteczny sposób obsługi tych interakcji, platforma Microsoft Azure oferuje usługę Service Bus.</span><span class="sxs-lookup"><span data-stu-id="5605e-105">To provide a broadly useful way to do this, Microsoft Azure offers Service Bus.</span></span> <span data-ttu-id="5605e-106">Ten artykuł przedstawia tę technologię, opisuje, czym ona jest, oraz dlaczego warto z niej korzystać.</span><span class="sxs-lookup"><span data-stu-id="5605e-106">This article looks at this technology, describing what it is and why you might want to use it.</span></span>

## <a name="service-bus-fundamentals"></a><span data-ttu-id="5605e-107">Podstawy usługi Service Bus</span><span class="sxs-lookup"><span data-stu-id="5605e-107">Service Bus fundamentals</span></span>

<span data-ttu-id="5605e-108">Różne sytuacje wymagają różnych stylów komunikacji.</span><span class="sxs-lookup"><span data-stu-id="5605e-108">Different situations call for different styles of communication.</span></span> <span data-ttu-id="5605e-109">Czasami najlepszym rozwiązaniem jest umożliwienie aplikacji wysyłania i odbierania komunikatów przy użyciu prostej kolejki.</span><span class="sxs-lookup"><span data-stu-id="5605e-109">Sometimes, letting applications send and receive messages through a simple queue is the best solution.</span></span> <span data-ttu-id="5605e-110">W innych sytuacjach zwykła kolejka nie wystarcza i lepszym rozwiązaniem jest kolejka z mechanizmem publikowania i subskrybowania.</span><span class="sxs-lookup"><span data-stu-id="5605e-110">In other situations, an ordinary queue isn't enough; a queue with a publish-and-subscribe mechanism is better.</span></span> <span data-ttu-id="5605e-111">W niektórych przypadkach potrzebne jest jedynie połączenie między aplikacjami, a kolejki nie są wymagane.</span><span class="sxs-lookup"><span data-stu-id="5605e-111">In some cases, all that's needed is a connection between applications, and queues are not required.</span></span> <span data-ttu-id="5605e-112">Usługa Service Bus oferuje wszystkie trzy opcje, umożliwiając aplikacjom interakcję na kilka różnych sposobów.</span><span class="sxs-lookup"><span data-stu-id="5605e-112">Service Bus provides all three options, enabling your applications to interact in several different ways.</span></span>

<span data-ttu-id="5605e-113">Service Bus to wielodostępna usługa w chmurze, co oznacza, że usługa jest współużytkowana przez wielu użytkowników.</span><span class="sxs-lookup"><span data-stu-id="5605e-113">Service Bus is a multi-tenant cloud service, which means that the service is shared by multiple users.</span></span> <span data-ttu-id="5605e-114">Każdy użytkownik, taki jak deweloper aplikacji, tworzy *przestrzeń nazw*, a następnie definiuje mechanizmy komunikacji potrzebne w ramach tej przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="5605e-114">Each user, such as an application developer, creates a *namespace*, then defines the communication mechanisms needed within that namespace.</span></span> <span data-ttu-id="5605e-115">Rysunek 1 pokazuje jak wygląda ta architektura.</span><span class="sxs-lookup"><span data-stu-id="5605e-115">Figure 1 shows how this architecture looks.</span></span>

![][1]

<span data-ttu-id="5605e-116">**Rysunek 1. Service Bus udostępnia usługę wielodostępu na potrzeby łączenia aplikacji za pośrednictwem chmury.**</span><span class="sxs-lookup"><span data-stu-id="5605e-116">**Figure 1: Service Bus provides a multi-tenant service for connecting applications through the cloud.**</span></span>

<span data-ttu-id="5605e-117">W przestrzeni nazw można używać jednego lub większej liczby wystąpień trzech różnych mechanizmów komunikacji, z których każdy łączy aplikacje w inny sposób.</span><span class="sxs-lookup"><span data-stu-id="5605e-117">Within a namespace, you can use one or more instances of three different communication mechanisms, each of which connects applications in a different way.</span></span> <span data-ttu-id="5605e-118">Dostępne są następujące mechanizmy:</span><span class="sxs-lookup"><span data-stu-id="5605e-118">The choices are:</span></span>

* <span data-ttu-id="5605e-119">*Kolejki*, które umożliwiają komunikację jednokierunkową.</span><span class="sxs-lookup"><span data-stu-id="5605e-119">*Queues*, which allow one-directional communication.</span></span> <span data-ttu-id="5605e-120">Każda kolejka działa jako pośrednik (nazywany czasem *brokerem*), który przechowuje wysyłane wiadomości, dopóki nie zostaną odebrane.</span><span class="sxs-lookup"><span data-stu-id="5605e-120">Each queue acts as an intermediary (sometimes called a *broker*) that stores sent messages until they are received.</span></span> <span data-ttu-id="5605e-121">Każdy komunikat jest odbierany przez jednego adresata.</span><span class="sxs-lookup"><span data-stu-id="5605e-121">Each message is received by a single recipient.</span></span>
* <span data-ttu-id="5605e-122">*Tematy*, które zapewniają komunikację jednokierunkową przy użyciu *subskrypcji* (jeden temat może mieć wiele subskrypcji).</span><span class="sxs-lookup"><span data-stu-id="5605e-122">*Topics*, which provide one-directional communication using *subscriptions*-a single topic can have multiple subscriptions.</span></span> <span data-ttu-id="5605e-123">Podobnie jak kolejka temat działa jako broker, ale każda subskrypcja może opcjonalnie korzystać z filtru w celu odbierania tylko komunikatów spełniających określone kryteria.</span><span class="sxs-lookup"><span data-stu-id="5605e-123">Like a queue, a topic acts as a broker, but each subscription can optionally use a filter to receive only messages that match specific criteria.</span></span>
* <span data-ttu-id="5605e-124">*Przekaźniki*, które zapewniają komunikację dwukierunkową.</span><span class="sxs-lookup"><span data-stu-id="5605e-124">*Relays*, which provide bi-directional communication.</span></span> <span data-ttu-id="5605e-125">W przeciwieństwie do kolejek i tematów przekaźnik nie przechowuje transmitowanych komunikatów (nie jest brokerem).</span><span class="sxs-lookup"><span data-stu-id="5605e-125">Unlike queues and topics, a relay doesn't store in-flight messages; it's not a broker.</span></span> <span data-ttu-id="5605e-126">Zamiast tego po prostu przekazuje je do aplikacji docelowej.</span><span class="sxs-lookup"><span data-stu-id="5605e-126">Instead, it just passes them on to the destination application.</span></span>

<span data-ttu-id="5605e-127">Podczas tworzenia kolejki, tematu lub przekaźnika tworzonemu elementowi nadawana jest nazwa.</span><span class="sxs-lookup"><span data-stu-id="5605e-127">When you create a queue, topic, or relay, you give it a name.</span></span> <span data-ttu-id="5605e-128">W połączeniu z przestrzenią nazw ta nazwa tworzy unikatowy identyfikator obiektu.</span><span class="sxs-lookup"><span data-stu-id="5605e-128">Combined with whatever you called your namespace, this name creates a unique identifier for the object.</span></span> <span data-ttu-id="5605e-129">Aplikacje mogą udostępnić tę nazwę usłudze Service Bus, a następnie używać kolejki, tematu lub przekaźnika do komunikowania się ze sobą.</span><span class="sxs-lookup"><span data-stu-id="5605e-129">Applications can provide this name to Service Bus, then use that queue, topic, or relay to communicate with one another.</span></span> 

<span data-ttu-id="5605e-130">Aby użyć dowolnego z tych obiektów w scenariuszu dotyczącym przekaźnika, aplikacje systemu Windows mogą korzystać z technologii Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="5605e-130">To use any of these objects in the relay scenario, Windows applications can use Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="5605e-131">Ta usługa jest określana jako [przekaźnik WCF](../service-bus-relay/relay-what-is-it.md).</span><span class="sxs-lookup"><span data-stu-id="5605e-131">This service is known as [WCF Relay](../service-bus-relay/relay-what-is-it.md).</span></span> <span data-ttu-id="5605e-132">W przypadku kolejek i tematów aplikacje systemu Windows mogą używać interfejsów API obsługi komunikatów zdefiniowanych przez usługę Service Bus.</span><span class="sxs-lookup"><span data-stu-id="5605e-132">For queues and topics, Windows applications can use Service Bus-defined messaging APIs.</span></span> <span data-ttu-id="5605e-133">Aby ułatwić korzystanie z tych obiektów aplikacjom innych niż aplikacje systemu Windows, firma Microsoft udostępnia zestawy SDK dla języka Java, Node.js i innych języków.</span><span class="sxs-lookup"><span data-stu-id="5605e-133">To make these objects easier to use from non-Windows applications, Microsoft provides SDKs for Java, Node.js, and other languages.</span></span> <span data-ttu-id="5605e-134">Dostęp do kolejek i tematów można także uzyskać za pomocą [interfejsów API REST](/rest/api/servicebus/) i protokołu HTTP lub HTTPS.</span><span class="sxs-lookup"><span data-stu-id="5605e-134">You can also access queues and topics using [REST APIs](/rest/api/servicebus/) over HTTP(s).</span></span> 

<span data-ttu-id="5605e-135">Należy pamiętać, że chociaż usługa Service Bus sama działa w chmurze (to znaczy w centrach danych platformy Microsoft Azure), aplikacje z niej korzystające mogą być uruchamiane w dowolnym miejscu.</span><span class="sxs-lookup"><span data-stu-id="5605e-135">It's important to understand that even though Service Bus itself runs in the cloud (that is, in Microsoft's Azure datacenters), applications that use it can run anywhere.</span></span> <span data-ttu-id="5605e-136">Usługa Service Bus umożliwia na przykład łączenie aplikacji działających na platformie Azure lub aplikacji uruchamianych wewnątrz własnego centrum danych.</span><span class="sxs-lookup"><span data-stu-id="5605e-136">You can use Service Bus to connect applications running on Azure, for example, or applications running inside your own datacenter.</span></span> <span data-ttu-id="5605e-137">Umożliwia także łączenie aplikacji działających na platformie Azure lub innej platformie chmurowej z aplikacjami lokalnymi lub z tabletami i telefonami.</span><span class="sxs-lookup"><span data-stu-id="5605e-137">You can also use it to connect an application running on Azure or another cloud platform with an on-premises application or with tablets and phones.</span></span> <span data-ttu-id="5605e-138">Istnieje nawet możliwość łącznia się urządzeń gospodarstwa domowego, czujników i innych urządzeń z centralną aplikacją lub między sobą.</span><span class="sxs-lookup"><span data-stu-id="5605e-138">It's even possible to connect household appliances, sensors, and other devices to a central application or to one other.</span></span> <span data-ttu-id="5605e-139">Usługa Service Bus jest mechanizmem komunikacji w chmurze, który jest dostępny niemal z dowolnego miejsca.</span><span class="sxs-lookup"><span data-stu-id="5605e-139">Service Bus is a communication mechanism in the cloud that's accessible from pretty much anywhere.</span></span> <span data-ttu-id="5605e-140">Sposób korzystania z usługi Service Bus zależy od tego, co aplikacja ma robić.</span><span class="sxs-lookup"><span data-stu-id="5605e-140">How you use it depends on what your applications need to do.</span></span>

## <a name="queues"></a><span data-ttu-id="5605e-141">Kolejki</span><span class="sxs-lookup"><span data-stu-id="5605e-141">Queues</span></span>

<span data-ttu-id="5605e-142">Załóżmy, że użytkownik łączy dwie aplikacje przy użyciu kolejki usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="5605e-142">Suppose you decide to connect two applications using a Service Bus queue.</span></span> <span data-ttu-id="5605e-143">Na Rysunku 2 przedstawiono tę sytuację.</span><span class="sxs-lookup"><span data-stu-id="5605e-143">Figure 2 illustrates this situation.</span></span>

![][2]

<span data-ttu-id="5605e-144">**Rysunek 2. Kolejki usługi Service Bus zapewniają jednokierunkowe kolejkowanie asynchroniczne.**</span><span class="sxs-lookup"><span data-stu-id="5605e-144">**Figure 2: Service Bus queues provide one-way asynchronous queuing.**</span></span>

<span data-ttu-id="5605e-145">Proces jest prosty: nadawca wysyła komunikat do kolejki usługi Service Bus, a odbiornik pobiera ten komunikat w późniejszym czasie.</span><span class="sxs-lookup"><span data-stu-id="5605e-145">The process is simple: A sender sends a message to a Service Bus queue, and a receiver picks up that message at some later time.</span></span> <span data-ttu-id="5605e-146">Kolejka może zawierać tylko jeden odbiornik, jak pokazano na rysunku 2.</span><span class="sxs-lookup"><span data-stu-id="5605e-146">A queue can have just a single receiver, as Figure 2 shows.</span></span> <span data-ttu-id="5605e-147">Możliwa jest również sytuacja, gdy wiele aplikacji odczytuje dane z tej samej kolejki.</span><span class="sxs-lookup"><span data-stu-id="5605e-147">Or, multiple applications can read from the same queue.</span></span> <span data-ttu-id="5605e-148">W tej ostatniej sytuacji każdy komunikat jest odczytywany tylko przez jeden odbiornik.</span><span class="sxs-lookup"><span data-stu-id="5605e-148">In the latter situation, each message is read by just one receiver.</span></span> <span data-ttu-id="5605e-149">W przypadku usługi multiemisji należy zamiast kolejki użyć tematu.</span><span class="sxs-lookup"><span data-stu-id="5605e-149">For a multi-cast service, you should use a topic instead.</span></span>

<span data-ttu-id="5605e-150">Każdy komunikat ma dwie części: zbiór właściwości, z których każda jest parą klucz/wartość, oraz ładunek komunikatu.</span><span class="sxs-lookup"><span data-stu-id="5605e-150">Each message has two parts: a set of properties, each a key/value pair, and a message payload.</span></span> <span data-ttu-id="5605e-151">Ładunkiem mogą być dane binarne, tekstowe, a nawet plik XML.</span><span class="sxs-lookup"><span data-stu-id="5605e-151">The payload can be binary, text, or even XML.</span></span> <span data-ttu-id="5605e-152">Sposób ich używania zależy od tego, co aplikacja próbuje zrobić.</span><span class="sxs-lookup"><span data-stu-id="5605e-152">How they're used depends on what an application is trying to do.</span></span> <span data-ttu-id="5605e-153">Na przykład aplikacja wysyłająca komunikat o ostatniej sprzedaży może dołączać właściwości **Seller="Ava"** i **Amount=10000**.</span><span class="sxs-lookup"><span data-stu-id="5605e-153">For example, an application sending a message about a recent sale might include the properties **Seller="Ava"** and **Amount=10000**.</span></span> <span data-ttu-id="5605e-154">Treść komunikatu może zawierać zeskanowany obraz podpisanej umowy sprzedaży lub, jeśli nie istnieje, pozostać pusta.</span><span class="sxs-lookup"><span data-stu-id="5605e-154">The message body might contain a scanned image of the sale's signed contract or, if there isn't one, remain empty.</span></span>

<span data-ttu-id="5605e-155">Odbiornik może odczytywać komunikaty z kolejki usługi Service Bus na dwa różne sposoby.</span><span class="sxs-lookup"><span data-stu-id="5605e-155">A receiver can read a message from a Service Bus queue in two different ways.</span></span> <span data-ttu-id="5605e-156">Pierwsza opcja o nazwie *[ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode)* usuwa komunikat z kolejki i natychmiast go kasuje.</span><span class="sxs-lookup"><span data-stu-id="5605e-156">The first option, called *[ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, removes a message from the queue and immediately deletes it.</span></span> <span data-ttu-id="5605e-157">Jest to proste, ale jeśli odbiornik ulegnie awarii przed zakończeniem przetwarzania komunikatu, komunikat zostanie utracony.</span><span class="sxs-lookup"><span data-stu-id="5605e-157">This option is simple, but if the receiver crashes before it finishes processing the message, the message is lost.</span></span> <span data-ttu-id="5605e-158">Ponieważ został usunięty z kolejki, żaden inny odbiornik nie może już uzyskać do niego dostępu.</span><span class="sxs-lookup"><span data-stu-id="5605e-158">Because it's been removed from the queue, no other receiver can access it.</span></span> 

<span data-ttu-id="5605e-159">Druga opcja, *[PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, ma pomóc w rozwiązaniu tego problemu.</span><span class="sxs-lookup"><span data-stu-id="5605e-159">The second option, *[PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, is meant to help with this problem.</span></span> <span data-ttu-id="5605e-160">Podobnie jak w przypadku opcji **ReceiveAndDelete**, odczyt za pomocą opcji **PeekLock** usuwa komunikat z kolejki.</span><span class="sxs-lookup"><span data-stu-id="5605e-160">Like **ReceiveAndDelete**, a **PeekLock** read removes a message from the queue.</span></span> <span data-ttu-id="5605e-161">Nie powoduje jednak skasowania (faktycznego usunięcia) komunikatu.</span><span class="sxs-lookup"><span data-stu-id="5605e-161">It doesn't delete the message, however.</span></span> <span data-ttu-id="5605e-162">Zamiast tego blokuje komunikat, ukrywając go przed innymi odbiornikami, a następnie czeka na jedno z trzech zdarzeń:</span><span class="sxs-lookup"><span data-stu-id="5605e-162">Instead, it locks the message, making it invisible to other receivers, then waits for one of three events:</span></span>

* <span data-ttu-id="5605e-163">Jeśli odbiornik pomyślnie przetworzy komunikat, wywołuje metodę [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete), a kolejka usuwa komunikat.</span><span class="sxs-lookup"><span data-stu-id="5605e-163">If the receiver processes the message successfully, it calls [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete), and the queue deletes the message.</span></span> 
* <span data-ttu-id="5605e-164">Jeśli odbiornik zadecyduje, że nie może przetworzyć komunikatu, wywołuje metodę [Abandon()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon).</span><span class="sxs-lookup"><span data-stu-id="5605e-164">If the receiver decides that it can't process the message successfully, it calls [Abandon()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon).</span></span> <span data-ttu-id="5605e-165">Kolejka następnie usuwa blokadę z komunikatu i umożliwia dostęp do niego innym odbiornikom.</span><span class="sxs-lookup"><span data-stu-id="5605e-165">The queue then removes the lock from the message and makes it available to other receivers.</span></span>
* <span data-ttu-id="5605e-166">Jeśli odbiornik nie wywoła żadnej z tych metod w skonfigurowanym czasie (domyślnie 60 sekund), kolejka zakłada, że wystąpił błąd odbiornika.</span><span class="sxs-lookup"><span data-stu-id="5605e-166">If the receiver calls neither of these methods within a configurable period of time (by default, 60 seconds), the queue assumes the receiver has failed.</span></span> <span data-ttu-id="5605e-167">W takim przypadku zachowuje się tak, jak gdyby odbiornik wywołał metodę **Abandon**, udostępniając komunikat innym odbiornikom.</span><span class="sxs-lookup"><span data-stu-id="5605e-167">In this case, it behaves as if the receiver had called **Abandon**, making the message available to other receivers.</span></span>

<span data-ttu-id="5605e-168">Zauważ, że w tej sytuacji może się zdarzyć, że ten sam komunikat zostanie dostarczony dwukrotnie, być może do dwóch różnych odbiorników.</span><span class="sxs-lookup"><span data-stu-id="5605e-168">Notice what can happen here: the same message might be delivered twice, perhaps to two different receivers.</span></span> <span data-ttu-id="5605e-169">Aplikacje korzystające z kolejek usługi Service Bus muszą być przygotowane na to zdarzenie.</span><span class="sxs-lookup"><span data-stu-id="5605e-169">Applications using Service Bus queues must be prepared for this event.</span></span> <span data-ttu-id="5605e-170">Aby ułatwić wykrywanie duplikatów, każdy komunikat ma unikatową wartość właściwości [MessageID](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId), która domyślnie pozostaje taka sama niezależnie od tego, ile razy komunikat został odczytany z kolejki.</span><span class="sxs-lookup"><span data-stu-id="5605e-170">To make duplicate detection easier, each message has a unique [MessageID](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId) property that by default stays the same no matter how many times the message is read from a queue.</span></span> 

<span data-ttu-id="5605e-171">Kolejki są przydatne w kilku sytuacjach.</span><span class="sxs-lookup"><span data-stu-id="5605e-171">Queues are useful in quite a few situations.</span></span> <span data-ttu-id="5605e-172">Umożliwiają one aplikacjom komunikowanie się nawet wtedy, gdy nie są uruchomione w tym samym czasie, co jest szczególnie przydatne w przypadku aplikacji wsadowych i aplikacji mobilnych.</span><span class="sxs-lookup"><span data-stu-id="5605e-172">They enable applications to communicate even when both aren't running at the same time, something that's especially handy with batch and mobile applications.</span></span> <span data-ttu-id="5605e-173">Kolejka z wieloma odbiornikami zapewnia również automatyczne równoważenie obciążenia, ponieważ wysłane wiadomości są rozkładane między te odbiorniki.</span><span class="sxs-lookup"><span data-stu-id="5605e-173">A queue with multiple receivers also provides automatic load balancing, since sent messages are spread across these receivers.</span></span>

## <a name="topics"></a><span data-ttu-id="5605e-174">Tematy</span><span class="sxs-lookup"><span data-stu-id="5605e-174">Topics</span></span>

<span data-ttu-id="5605e-175">Pomimo swojej przydatności, kolejki nie zawsze są odpowiednim rozwiązaniem.</span><span class="sxs-lookup"><span data-stu-id="5605e-175">Useful as they are, queues aren't always the right solution.</span></span> <span data-ttu-id="5605e-176">Czasami lepsze są tematy usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="5605e-176">Sometimes, Service Bus topics are better.</span></span> <span data-ttu-id="5605e-177">Rysunek 3 ilustruje tę koncepcję.</span><span class="sxs-lookup"><span data-stu-id="5605e-177">Figure 3 illustrates this idea.</span></span>

![][3]

<span data-ttu-id="5605e-178">**Rysunek 3. Na podstawie filtru określonego przez subskrybującą aplikację może ona odbierać niektóre lub wszystkie komunikaty wysyłane do tematu usługi Service Bus.**</span><span class="sxs-lookup"><span data-stu-id="5605e-178">**Figure 3: Based on the filter a subscribing application specifies, it can receive some or all the messages sent to a Service Bus topic.**</span></span>

<span data-ttu-id="5605e-179">*Temat* jest pod wieloma względami podobny do kolejki.</span><span class="sxs-lookup"><span data-stu-id="5605e-179">A *topic* is similar in many ways to a queue.</span></span> <span data-ttu-id="5605e-180">Nadawcy wysyłają komunikaty do tematu w taki sam sposób jak do kolejki, a komunikaty wyglądają tak samo jak w przypadku kolejek.</span><span class="sxs-lookup"><span data-stu-id="5605e-180">Senders submit messages to a topic in the same way that they submit messages to a queue, and those messages look the same as with queues.</span></span> <span data-ttu-id="5605e-181">Różnicą jest to, że tematy umożliwiają każdej aplikacji odbierającej tworzenie własnej *subskrypcji* przez zdefiniowanie *filtru*.</span><span class="sxs-lookup"><span data-stu-id="5605e-181">The difference is that topics enable each receiving application to create its own *subscription* by defining a *filter*.</span></span> <span data-ttu-id="5605e-182">Subskrybent będzie zatem widział tylko komunikaty zgodne z filtrem.</span><span class="sxs-lookup"><span data-stu-id="5605e-182">A subscriber then sees only the messages that match that filter.</span></span> <span data-ttu-id="5605e-183">Przykładowo, Rysunek 3 przedstawia nadawcę i temat z trzema subskrybentami, z których każdy ma własny filtr:</span><span class="sxs-lookup"><span data-stu-id="5605e-183">For example, Figure 3 shows a sender and a topic with three subscribers, each with its own filter:</span></span>

* <span data-ttu-id="5605e-184">Subskrybent 1 odbiera tylko komunikaty, które zawierają właściwość *Seller="Ava"*.</span><span class="sxs-lookup"><span data-stu-id="5605e-184">Subscriber 1 receives only messages that contain the property *Seller="Ava"*.</span></span>
* <span data-ttu-id="5605e-185">Subskrybent 2 odbiera komunikaty, które zawierają właściwość *Seller="Ruby"* i/lub zawierają właściwość *Amount* o wartości większej niż 100 000.</span><span class="sxs-lookup"><span data-stu-id="5605e-185">Subscriber 2 receives messages that contain the property *Seller="Ruby"* and/or contain an *Amount* property whose value is greater than 100,000.</span></span> <span data-ttu-id="5605e-186">Być może Ruby jest kierownikiem ds. sprzedaży, więc chce widzieć własną sprzedaż i wszystkie duże transakcje sprzedaży niezależnie od tego, kto ich dokonuje.</span><span class="sxs-lookup"><span data-stu-id="5605e-186">Perhaps Ruby is the sales manager, so she wants to see both her own sales and all large sales regardless of who makes them.</span></span>
* <span data-ttu-id="5605e-187">Subskrybent 3 ustawił filtr na wartość *True*, co oznacza, że odbiera wszystkie komunikaty.</span><span class="sxs-lookup"><span data-stu-id="5605e-187">Subscriber 3 has set its filter to *True*, which means that it receives all messages.</span></span> <span data-ttu-id="5605e-188">Ta aplikacja może być na przykład odpowiedzialna za utrzymanie dziennika inspekcji i w związku z tym musi widzieć wszystkie komunikaty.</span><span class="sxs-lookup"><span data-stu-id="5605e-188">For example, this application might be responsible for maintaining an audit trail and therefore it needs to see all the messages.</span></span>

<span data-ttu-id="5605e-189">Podobnie jak w przypadku kolejek, subskrybenci tematu mogą odczytywać komunikaty przy użyciu metody [ReceiveAndDelete lub PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode).</span><span class="sxs-lookup"><span data-stu-id="5605e-189">As with queues, subscribers to a topic can read messages using either [ReceiveAndDelete or PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode).</span></span> <span data-ttu-id="5605e-190">W przeciwieństwie do kolejek pojedynczy komunikat wysłany do tematu może zostać odebrany w ramach wielu subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="5605e-190">Unlike queues, however, a single message sent to a topic can be received by multiple subscriptions.</span></span> <span data-ttu-id="5605e-191">Takie podejście, często nazywane *publikowaniem i subskrybowaniem* (lub *publikowaniem/subskrypcją*), jest przydatne, gdy wiele aplikacji jest zainteresowanych tymi samymi komunikatami.</span><span class="sxs-lookup"><span data-stu-id="5605e-191">This approach, commonly called *publish and subscribe* (or *pub/sub*), is useful whenever multiple applications are interested in the same messages.</span></span> <span data-ttu-id="5605e-192">Dzięki zdefiniowaniu właściwego filtru każdy subskrybent może korzystać tylko z tej części strumienia komunikatów, którą chce wyświetlać.</span><span class="sxs-lookup"><span data-stu-id="5605e-192">By defining the right filter, each subscriber can tap into just the part of the message stream that it needs to see.</span></span>

## <a name="relays"></a><span data-ttu-id="5605e-193">Przekaźniki</span><span class="sxs-lookup"><span data-stu-id="5605e-193">Relays</span></span>

<span data-ttu-id="5605e-194">Kolejki i tematy zapewniają jednokierunkową asynchroniczną komunikację za pośrednictwem brokera.</span><span class="sxs-lookup"><span data-stu-id="5605e-194">Both queues and topics provide one-way asynchronous communication through a broker.</span></span> <span data-ttu-id="5605e-195">Ruch przepływa tylko w jednym kierunku i nie ma bezpośredniego połączenia między nadawcami a odbiornikami.</span><span class="sxs-lookup"><span data-stu-id="5605e-195">Traffic flows in just one direction, and there's no direct connection between senders and receivers.</span></span> <span data-ttu-id="5605e-196">Ale co zrobić, jeśli nie potrzebujesz tego połączenia?</span><span class="sxs-lookup"><span data-stu-id="5605e-196">But what if you don't want this connection?</span></span> <span data-ttu-id="5605e-197">Załóżmy, że aplikacje muszą zarówno wysyłać, jak i odbierać komunikaty, albo chcesz mieć bezpośrednie połączenie między nimi i nie potrzebujesz brokera do przechowywania komunikatów.</span><span class="sxs-lookup"><span data-stu-id="5605e-197">Suppose your applications need to both send and receive messages, or perhaps you want a direct link between them and you don't need a broker to store messages.</span></span> <span data-ttu-id="5605e-198">Na potrzeby takich scenariuszy usługa Service Bus udostępnia *przekaźniki*, jak pokazano na rysunku 4.</span><span class="sxs-lookup"><span data-stu-id="5605e-198">To address scenarios such as this, Service Bus provides *relays*, as Figure 4 shows.</span></span>

![][4]

<span data-ttu-id="5605e-199">**Rysunek 4. Przekaźnik usługi Service Bus zapewnia synchroniczną, dwukierunkową komunikację między aplikacjami.**</span><span class="sxs-lookup"><span data-stu-id="5605e-199">**Figure 4: Service Bus relay provides synchronous, two-way communication between applications.**</span></span>

<span data-ttu-id="5605e-200">Oczywistym pytaniem, jeśli chodzi o przekaźniki, jest: po co z nich korzystać?</span><span class="sxs-lookup"><span data-stu-id="5605e-200">The obvious question to ask about relays is this: why would I use one?</span></span> <span data-ttu-id="5605e-201">Nawet jeśli nie potrzebujesz kolejek, dlaczego warto udostępnić aplikacjom możliwość komunikacji za pomocą usługi w chmurze zamiast bezpośredniej interakcji?</span><span class="sxs-lookup"><span data-stu-id="5605e-201">Even if I don't need queues, why make applications communicate via a cloud service rather than just interact directly?</span></span> <span data-ttu-id="5605e-202">Odpowiedź brzmi: komunikacja bezpośrednia może być trudniejsza, niż się wydaje.</span><span class="sxs-lookup"><span data-stu-id="5605e-202">The answer is that talking directly can be harder than you might think.</span></span>

<span data-ttu-id="5605e-203">Załóżmy, że chcesz nawiązać połączenie między dwiema lokalnymi aplikacjami, z których obie działają wewnątrz firmowych centrów danych.</span><span class="sxs-lookup"><span data-stu-id="5605e-203">Suppose you want to connect two on-premises applications, both running inside corporate datacenters.</span></span> <span data-ttu-id="5605e-204">Każda z tych aplikacji znajduje się za zaporą, a każde centrum danych prawdopodobnie używa translatora adresów sieciowych (NAT).</span><span class="sxs-lookup"><span data-stu-id="5605e-204">Each of these applications sits behind a firewall, and each datacenter probably uses network address translation (NAT).</span></span> <span data-ttu-id="5605e-205">Zapora blokuje przychodzące dane na wszystkich, z wyjątkiem kilku, portach, a korzystanie z NAT oznacza, że maszyna, na której uruchomiona jest każda aplikacja, nie ma stałego adresu IP osiągalnego bezpośrednio spoza centrum danych.</span><span class="sxs-lookup"><span data-stu-id="5605e-205">The firewall blocks incoming data on all but a few ports, and NAT implies that the machine each application is running on doesn't have a fixed IP address that you can reach directly from outside the datacenter.</span></span> <span data-ttu-id="5605e-206">Bez dodatkowej pomocy połączenie tych aplikacji za pośrednictwem publicznego Internetu jest problematyczne.</span><span class="sxs-lookup"><span data-stu-id="5605e-206">Without some extra help, connecting these applications over the public internet is problematic.</span></span>

<span data-ttu-id="5605e-207">Przekaźnik usługi Service Bus może w tym pomóc.</span><span class="sxs-lookup"><span data-stu-id="5605e-207">A Service Bus relay can help.</span></span> <span data-ttu-id="5605e-208">Aby komunikować się dwukierunkowo przez przekaźnik, każda aplikacja ustanawia wychodzące połączenie TCP za pomocą usługi Service Bus, a następnie utrzymuje je otwarte.</span><span class="sxs-lookup"><span data-stu-id="5605e-208">To communicate bi-directionally through a relay, each application establishes an outbound TCP connection with Service Bus, then keeps it open.</span></span> <span data-ttu-id="5605e-209">Cała komunikacja między dwiema aplikacjami odbywa się przez te połączenia.</span><span class="sxs-lookup"><span data-stu-id="5605e-209">All communication between the two applications travels over these connections.</span></span> <span data-ttu-id="5605e-210">Ponieważ każde połączenie zostało nawiązane z wewnątrz centrum danych, zapora zezwala na ruch przychodzący do każdej aplikacji bez konieczności otwierania nowych portów.</span><span class="sxs-lookup"><span data-stu-id="5605e-210">Because each connection was established from inside the datacenter, the firewall allows incoming traffic to each application without opening new ports.</span></span> <span data-ttu-id="5605e-211">To podejście zapewnia również obejście problemu translatora adresów sieciowych, ponieważ każda aplikacja ma spójny punkt końcowy w chmurze podczas całej komunikacji.</span><span class="sxs-lookup"><span data-stu-id="5605e-211">This approach also gets around the NAT problem, because each application has a consistent endpoint in the cloud throughout the communication.</span></span> <span data-ttu-id="5605e-212">Dzięki wymianie danych za pośrednictwem przekaźnika aplikacje mogą uniknąć problemów, które w przeciwnym razie spowodowałyby trudności w komunikacji.</span><span class="sxs-lookup"><span data-stu-id="5605e-212">By exchanging data through the relay, the applications can avoid the problems that would otherwise make communication difficult.</span></span> 

<span data-ttu-id="5605e-213">Aby korzystać z przekaźników usługi Service Bus, aplikacje polegają na programie Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="5605e-213">To use Service Bus relays, applications rely on the Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="5605e-214">Usługa Service Bus udostępnia wiązania WCF, dzięki którym interakcje za pomocą przekaźników stają się proste dla aplikacji systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="5605e-214">Service Bus provides WCF bindings that make it straightforward for Windows applications to interact via relays.</span></span> <span data-ttu-id="5605e-215">Aplikacje, które już używają technologii WCF, mogą zazwyczaj określić jedno z tych powiązań, a następnie komunikować się ze sobą za pośrednictwem przekaźnika.</span><span class="sxs-lookup"><span data-stu-id="5605e-215">Applications that already use WCF can typically specify one of these bindings, then talk to each other through a relay.</span></span> <span data-ttu-id="5605e-216">Jednak inaczej niż w przypadku kolejek i tematów korzystanie z przekaźników z aplikacji innych niż aplikacje systemu Windows, o ile jest to możliwe, wymaga nieco pracy programistycznej, ponieważ nie są udostępniane żadne biblioteki standardowe.</span><span class="sxs-lookup"><span data-stu-id="5605e-216">Unlike queues and topics, however, using relays from non-Windows applications, while possible, requires some programming effort; no standard libraries are provided.</span></span>

<span data-ttu-id="5605e-217">W przeciwieństwie do kolejek i tematów aplikacje nie tworzą jawnie przekaźników.</span><span class="sxs-lookup"><span data-stu-id="5605e-217">Unlike queues and topics, applications don't explicitly create relays.</span></span> <span data-ttu-id="5605e-218">Zamiast tego aplikacja, która chce odbierać komunikaty, ustanawia połączenie TCP z usługą Service Bus, a przekaźnik jest tworzony automatycznie.</span><span class="sxs-lookup"><span data-stu-id="5605e-218">Instead, when an application that wishes to receive messages establishes a TCP connection with Service Bus, a relay is created automatically.</span></span> <span data-ttu-id="5605e-219">Jeśli połączenie zostanie porzucone, przekaźnik jest usuwany.</span><span class="sxs-lookup"><span data-stu-id="5605e-219">When the connection is dropped, the relay is deleted.</span></span> <span data-ttu-id="5605e-220">Aby umożliwić aplikacji znalezienie przekaźnika utworzonego przez określony odbiornik, usługa Service Bus udostępnia rejestr, który umożliwia aplikacjom zlokalizowanie konkretnego przekaźnika według nazwy.</span><span class="sxs-lookup"><span data-stu-id="5605e-220">To enable an application to find the relay created by a specific listener, Service Bus provides a registry that enables applications to locate a specific relay by name.</span></span>

<span data-ttu-id="5605e-221">Przekaźniki są odpowiednim rozwiązaniem, gdy potrzebna jest bezpośrednia komunikacja między aplikacjami.</span><span class="sxs-lookup"><span data-stu-id="5605e-221">Relays are the right solution when you need direct communication between applications.</span></span> <span data-ttu-id="5605e-222">Rozważmy na przykład system rezerwacji linii lotniczych uruchomiony w lokalnym centrum danych, który musi być dostępny z kiosków odprawy, urządzeń przenośnych i innych komputerów.</span><span class="sxs-lookup"><span data-stu-id="5605e-222">For example, consider an airline reservation system running in an on-premises datacenter that must be accessed from check-in kiosks, mobile devices, and other computers.</span></span> <span data-ttu-id="5605e-223">Aplikacje działające w tych wszystkich systemach mogą polegać na przekaźnikach usługi Service Bus w chmurze na potrzeby komunikacji wszędzie tam, gdzie mogą być uruchamiane.</span><span class="sxs-lookup"><span data-stu-id="5605e-223">Applications running on all these systems could rely on Service Bus relays in the cloud to communicate, wherever they might be running.</span></span>

## <a name="summary"></a><span data-ttu-id="5605e-224">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="5605e-224">Summary</span></span>

<span data-ttu-id="5605e-225">Łączenie aplikacji zawsze było częścią tworzenia kompletnych rozwiązań, a zakres scenariuszy, które wymagają komunikowania się ze sobą aplikacji i usług, ciągle się zwiększa, ponieważ coraz więcej aplikacji i urządzeń ma połączenie z Internetem.</span><span class="sxs-lookup"><span data-stu-id="5605e-225">Connecting applications has always been part of building complete solutions, and the range of scenarios that require applications and services to communicate with each other is set to increase as more applications and devices are connected to the internet.</span></span> <span data-ttu-id="5605e-226">Zapewniając technologie chmurowe służące osiągnięciu tego celu za pośrednictwem kolejek, tematów i przekaźników, usługa Service Bus ułatwia zaimplementowanie tej istotnej funkcji i sprawia, że jest ona szerzej dostępna.</span><span class="sxs-lookup"><span data-stu-id="5605e-226">By providing cloud-based technologies for achieving communication through queues, topics, and relays, Service Bus aims to make this essential function easier to implement and more broadly available.</span></span>

## <a name="next-steps"></a><span data-ttu-id="5605e-227">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="5605e-227">Next steps</span></span>

<span data-ttu-id="5605e-228">Teraz, kiedy znasz już podstawy usługi Azure Service Bus, skorzystaj z poniższych linków, aby dowiedzieć się więcej.</span><span class="sxs-lookup"><span data-stu-id="5605e-228">Now that you've learned the fundamentals of Azure Service Bus, follow these links to learn more.</span></span>

* <span data-ttu-id="5605e-229">Jak używać [kolejek usługi Service Bus](service-bus-dotnet-get-started-with-queues.md)</span><span class="sxs-lookup"><span data-stu-id="5605e-229">How to use [Service Bus queues](service-bus-dotnet-get-started-with-queues.md)</span></span>
* <span data-ttu-id="5605e-230">Jak używać [tematów usługi Service Bus](service-bus-dotnet-how-to-use-topics-subscriptions.md)</span><span class="sxs-lookup"><span data-stu-id="5605e-230">How to use [Service Bus topics](service-bus-dotnet-how-to-use-topics-subscriptions.md)</span></span>
* <span data-ttu-id="5605e-231">Jak używać [przekaźnika usługi Service Bus](../service-bus-relay/service-bus-dotnet-how-to-use-relay.md)</span><span class="sxs-lookup"><span data-stu-id="5605e-231">How to use [Service Bus relay](../service-bus-relay/service-bus-dotnet-how-to-use-relay.md)</span></span>
* [<span data-ttu-id="5605e-232">Przykłady usługi Service Bus</span><span class="sxs-lookup"><span data-stu-id="5605e-232">Service Bus samples</span></span>](service-bus-samples.md)

[1]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_01_architecture.png
[2]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_02_queues.png
[3]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_03_topicsandsubscriptions.png
[4]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_04_relay.png
