---
title: "aaaWorking z duże zestawy skalowania maszyny wirtualnej platformy Azure | Dokumentacja firmy Microsoft"
description: "Co należy zestawów skalowania tooknow toouse dużych maszyny wirtualnej platformy Azure"
services: virtual-machine-scale-sets
documentationcenter: 
author: gbowerman
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 76ac7fd7-2e05-4762-88ca-3b499e87906e
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 2/7/2017
ms.author: guybo
ms.openlocfilehash: a39aab25925d7fc50763f0a20148b1f2213b492f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="working-with-large-virtual-machine-scale-sets"></a><span data-ttu-id="f30af-103">Praca z dużymi zestawami skalowania maszyn wirtualnych</span><span class="sxs-lookup"><span data-stu-id="f30af-103">Working with large virtual machine scale sets</span></span>
<span data-ttu-id="f30af-104">Możesz teraz utworzyć Azure [zestawy skalowania maszyny wirtualnej](/azure/virtual-machine-scale-sets/) o pojemności zapasowej too1, 000 maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="f30af-104">You can now create Azure [virtual machine scale sets](/azure/virtual-machine-scale-sets/) with a capacity of up too1,000 VMs.</span></span> <span data-ttu-id="f30af-105">W tym dokumencie _zestaw skali maszyny wirtualnej dużych_ jest zdefiniowany jako skali ustawić możliwość skalowania toogreater niż 100 maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="f30af-105">In this document, a _large virtual machine scale set_ is defined as a scale set capable of scaling toogreater than 100 VMs.</span></span> <span data-ttu-id="f30af-106">Ta funkcja jest ustawiana za pomocą właściwości zestawu skalowania (_singlePlacementGroup=False_).</span><span class="sxs-lookup"><span data-stu-id="f30af-106">This capability is set by a scale set property (_singlePlacementGroup=False_).</span></span> 

<span data-ttu-id="f30af-107">Ustawia niektórych aspektów dużej skali, takie jak obciążenia równoważenia i odporność domen zachowywać się inaczej zestaw standardowych skali tooa.</span><span class="sxs-lookup"><span data-stu-id="f30af-107">Certain aspects of large scale sets, such as load balancing and fault domains behave differently tooa standard scale set.</span></span> <span data-ttu-id="f30af-108">Ten dokument opisano charakterystyki hello dużych zestawów, a w tym artykule opisano, jakie muszą tooknow toosuccessfully używane w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f30af-108">This document explains hello characteristics of large scale sets, and describes what you need tooknow toosuccessfully use them in your applications.</span></span> 

<span data-ttu-id="f30af-109">Typowym podejściem wdrażania infrastruktury chmury na dużą skalę jest toocreate zbiór _jednostek skalowania_, na przykład przez utworzenie wielu maszyn wirtualnych skalowanie zestawów między wieloma sieciami wirtualnymi i kontami magazynu.</span><span class="sxs-lookup"><span data-stu-id="f30af-109">A common approach for deploying cloud infrastructure at large scale is toocreate a set of _scale units_, for example by creating multiple VMs scale sets across multiple VNETs and storage accounts.</span></span> <span data-ttu-id="f30af-110">Metoda ta umożliwia łatwiejsze zarządzanie w porównaniu toosingle maszyn wirtualnych, a wiele jednostek skalowania są przydatne w przypadku wielu aplikacji, zwłaszcza tych, które wymagają innymi urządzeniami składników, takich jak wiele sieci wirtualnych i punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="f30af-110">This approach provides easier management compared toosingle VMs, and multiple scale units are useful for many applications, particularly those that require other stackable components like multiple virtual networks and endpoints.</span></span> <span data-ttu-id="f30af-111">Jeśli aplikacja wymaga jednak jeden klaster duży, może być bardziej bezpośrednie toodeploy pojedynczego skali Konfigurowanie z too1, 000 maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="f30af-111">If your application requires a single large cluster however, it can be more straightforward toodeploy a single scale set of up too1,000 VMs.</span></span> <span data-ttu-id="f30af-112">Przykładowe scenariusze obejmują scentralizowane wdrożenia danych big data lub sieci obliczeniowe wymagające prostego zarządzania dużą pulą węzłów procesu roboczego.</span><span class="sxs-lookup"><span data-stu-id="f30af-112">Example scenarios include centralized big data deployments, or compute grids requiring simple management of a large pool of worker nodes.</span></span> <span data-ttu-id="f30af-113">Połączone z zestawu skalowania maszyny Wirtualnej [dołączone dyski danych](virtual-machine-scale-sets-attached-disks.md), dużych zestawów pozwalają toodeploy skalowalnej infrastruktury składające się z tysiącami rdzeni i petabajtów magazynu jako jedna operacja.</span><span class="sxs-lookup"><span data-stu-id="f30af-113">Combined with VM scale set [attached data disks](virtual-machine-scale-sets-attached-disks.md), large scale sets enable you toodeploy a scalable infrastructure consisting of thousands of cores and petabytes of storage, as a single operation.</span></span>

## <a name="placement-groups"></a><span data-ttu-id="f30af-114">Grupy umieszczania</span><span class="sxs-lookup"><span data-stu-id="f30af-114">Placement groups</span></span> 
<span data-ttu-id="f30af-115">Co sprawia, że _dużych_ zestaw specjalne skalowania nie jest hello liczbę maszyn wirtualnych, ale liczba hello _umieszczania grupy_ zawiera.</span><span class="sxs-lookup"><span data-stu-id="f30af-115">What makes a _large_ scale set special is not hello number of VMs, but hello number of _placement groups_ it contains.</span></span> <span data-ttu-id="f30af-116">Grupy umieszczania to konstrukcja podobne tooan dostępności Azure zestaw, z domen błędów i domen uaktualnienia.</span><span class="sxs-lookup"><span data-stu-id="f30af-116">A placement group is a construct similar tooan Azure availability set, with its own fault domains and upgrade domains.</span></span> <span data-ttu-id="f30af-117">Domyślnie zestaw skalowania składa się z pojedynczej grupy umieszczania zawierającej maksymalnie 100 maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="f30af-117">By default, a scale set consists of a single placement group with a maximum size of 100 VMs.</span></span> <span data-ttu-id="f30af-118">Jeśli właściwość o nazwie zestawu skalowania _singlePlacementGroup_ ustawiono too_false_, zestaw skali hello może składać się z wielu grup umieszczania i ma zakres 0-1000 maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="f30af-118">If a scale set property called _singlePlacementGroup_ is set too_false_, hello scale set can be composed of multiple placement groups and has a range of 0-1,000 VMs.</span></span> <span data-ttu-id="f30af-119">Kiedy należy ustawić wartość domyślną toohello _true_, zestaw skali składa się z grupą pojedynczego umieszczania i ma zakres 0-100 maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="f30af-119">When set toohello default value of _true_, a scale set is composed of a single placement group, and has a range of 0-100 VMs.</span></span>

## <a name="checklist-for-using-large-scale-sets"></a><span data-ttu-id="f30af-120">Lista kontrolna na potrzeby używania dużych zestawów skalowania</span><span class="sxs-lookup"><span data-stu-id="f30af-120">Checklist for using large scale sets</span></span>
<span data-ttu-id="f30af-121">toodecide czy aplikacji ułatwia efektywne korzystanie z zestawów na dużą skalę, należy wziąć pod uwagę hello następujące wymagania:</span><span class="sxs-lookup"><span data-stu-id="f30af-121">toodecide whether your application can make effective use of large scale sets, consider hello following requirements:</span></span>

- <span data-ttu-id="f30af-122">Duże zestawy skalowania wymagają użycia usługi Azure Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="f30af-122">Large scale sets require Azure Managed Disks.</span></span> <span data-ttu-id="f30af-123">Zestawy skalowania, które nie zostaną utworzone za pomocą usługi Managed Disks, wymagają wielu kont magazynu (jednego dla każdych 20 maszyn wirtualnych).</span><span class="sxs-lookup"><span data-stu-id="f30af-123">Scale sets that are not created with Managed Disks require multiple storage accounts (one for every 20 VMs).</span></span> <span data-ttu-id="f30af-124">Ustawia dużej skali są zaprojektowane toowork wyłącznie w przypadku dysków zarządzanych tooreduce ogranicza magazynu nakładów pracy zarządzania i tooavoid hello ryzyka uruchomione w subskrypcji dla konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="f30af-124">Large scale sets are designed toowork exclusively with Managed Disks tooreduce your storage management overhead, and tooavoid hello risk of running into subscription limits for storage accounts.</span></span> <span data-ttu-id="f30af-125">Nie dysków zarządzanych, zestaw skalowania jest ograniczona too100 maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="f30af-125">If you do not use Managed Disks, your scale set is limited too100 VMs.</span></span>
- <span data-ttu-id="f30af-126">Zestawy skalowania utworzone z obrazów Azure Marketplace można skalować too1, 000 maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="f30af-126">Scale sets created from Azure Marketplace images can scale up too1,000 VMs.</span></span>
- <span data-ttu-id="f30af-127">Zestawy skalowania utworzone na podstawie niestandardowych obrazów (obrazów maszyn wirtualnych można utworzyć i przekazać samodzielnie) można obecnie skalowanie w górę too100 maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="f30af-127">Scale sets created from custom images (VM images you create and upload yourself) can currently scale up too100 VMs.</span></span>
- <span data-ttu-id="f30af-128">Hello Azure Load Balancer równoważenia obciążenia dla warstwy 4 nie jest jeszcze obsługiwana dla zestawów skalowania składa się z wielu grup umieszczania.</span><span class="sxs-lookup"><span data-stu-id="f30af-128">Layer-4 load balancing with hello Azure Load Balancer is not yet supported for scale sets composed of multiple placement groups.</span></span> <span data-ttu-id="f30af-129">Hello toouse modułu równoważenia obciążenia Azure upewnij się, że zestaw skalowania hello jest skonfigurowany toouse grupy pojedynczego umieszczania jest ustawienie domyślne hello.</span><span class="sxs-lookup"><span data-stu-id="f30af-129">If you need toouse hello Azure Load Balancer make sure hello scale set is configured toouse a single placement group, which is hello default setting.</span></span>
- <span data-ttu-id="f30af-130">Wszystkie zestawy skalowania warstwy 7 równoważenia obciążenia z hello Azure Application Gateway jest obsługiwana.</span><span class="sxs-lookup"><span data-stu-id="f30af-130">Layer-7 load balancing with hello Azure Application Gateway is supported for all scale sets.</span></span>
- <span data-ttu-id="f30af-131">Zestaw skalowania jest zdefiniowana z pojedynczą podsiecią — upewnij się, że podsieć ma przestrzeń adresową wystarczająco duży dla wszystkich hello maszyn wirtualnych należy.</span><span class="sxs-lookup"><span data-stu-id="f30af-131">A scale set is defined with a single subnet - make sure your subnet has an address space large enough for all hello VMs you need.</span></span> <span data-ttu-id="f30af-132">Domyślnie overprovisions zestawu skalowania (tworzy dodatkowe maszyny wirtualne w czasie wdrażania lub w trakcie skalowania, które nie są naliczane opłaty dotyczące) tooimprove wdrożenia niezawodność i wydajność.</span><span class="sxs-lookup"><span data-stu-id="f30af-132">By default a scale set overprovisions (creates extra VMs at deployment time or when scaling out, which you are not charged for) tooimprove deployment reliability and performance.</span></span> <span data-ttu-id="f30af-133">Zezwalaj na adres miejsca 20% większa niż liczba hello planujesz tooscale do maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="f30af-133">Allow for an address space 20% greater than hello number of VMs you plan tooscale to.</span></span>
- <span data-ttu-id="f30af-134">Jeśli planujesz toodeploy wiele maszyn wirtualnych, sieci limity przydziału rdzeni obliczeń może być konieczne toobe zwiększyć.</span><span class="sxs-lookup"><span data-stu-id="f30af-134">If you are planning toodeploy many VMs, your Compute core quota limits may need toobe increased.</span></span>
- <span data-ttu-id="f30af-135">Domeny błędów i domeny uaktualnień są spójne tylko w ramach grupy umieszczania.</span><span class="sxs-lookup"><span data-stu-id="f30af-135">Fault domains and upgrade domains are only consistent within a placement group.</span></span> <span data-ttu-id="f30af-136">Tej architektury nie zmienia hello ogólne zestawu dostępności skali, zgodnie z maszyn wirtualnych jest rozmieszczana równomiernie wzdłuż różne sprzętu fizycznego, ale go nie oznacza, że jeśli potrzebujesz tooguarantee dwóch maszyn wirtualnych znajdują się na inny sprzęt, upewnij się, znajdują się w różnych błędów domen w hello tej samej grupie umieszczania.</span><span class="sxs-lookup"><span data-stu-id="f30af-136">This architecture does not change hello overall availability of a scale set, as VMs are evenly distributed across distinct physical hardware, but it does means that if you need tooguarantee two VMs are on different hardware, make sure they are in different fault domains in hello same placement group.</span></span> <span data-ttu-id="f30af-137">Identyfikator grupy błędów domeny i umieszczania są wyświetlane w hello _wystąpienia widoku_ skalę ustawić maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="f30af-137">Fault domain and placement group ID are shown in hello _instance view_ of a scale set VM.</span></span> <span data-ttu-id="f30af-138">Witaj widok wystąpienia zestawu skali maszyny Wirtualnej można wyświetlić w hello [Eksploratora zasobów Azure](https://resources.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="f30af-138">You can view hello instance view of a scale set VM in hello [Azure Resource Explorer](https://resources.azure.com/).</span></span>


## <a name="creating-a-large-scale-set"></a><span data-ttu-id="f30af-139">Tworzenie dużego zestawu skalowania</span><span class="sxs-lookup"><span data-stu-id="f30af-139">Creating a large scale set</span></span>
<span data-ttu-id="f30af-140">Po utworzeniu skali w hello portalu Azure, można zezwolić tooscale toomultiple umieszczania grupy przez ustawienie hello _Limit tooa umieszczania jednej grupy_ too_False_ opcji w hello _podstawy_ bloku.</span><span class="sxs-lookup"><span data-stu-id="f30af-140">When you create a scale set in hello Azure portal, you can allow it tooscale toomultiple placement groups by setting hello _Limit tooa single placement group_ option too_False_ in hello _Basics_ blade.</span></span> <span data-ttu-id="f30af-141">Z tym too_False_ zestaw opcji, możesz określić _wystąpienia licznika_ wartość zapasową too1, 000.</span><span class="sxs-lookup"><span data-stu-id="f30af-141">With this option set too_False_, you can specify an _Instance count_ value of up too1,000.</span></span>

![](./media/virtual-machine-scale-sets-placement-groups/portal-large-scale.png)

<span data-ttu-id="f30af-142">Możesz utworzyć dużej skali maszyny Wirtualnej ustawić za pomocą hello [interfejsu wiersza polecenia Azure](https://github.com/Azure/azure-cli) _az vmss utworzyć_ polecenia.</span><span class="sxs-lookup"><span data-stu-id="f30af-142">You can create a large VM scale set using hello [Azure CLI](https://github.com/Azure/azure-cli) _az vmss create_ command.</span></span> <span data-ttu-id="f30af-143">To polecenie ustawia inteligentnego wartości domyślnych, takich jak rozmiar podsieci oparte na powitania _liczba wystąpień_ argumentu:</span><span class="sxs-lookup"><span data-stu-id="f30af-143">This command sets intelligent defaults such as subnet size based on hello _instance-count_ argument:</span></span>

```bash
az group create -l southcentralus -n biginfra
az vmss create -g biginfra -n bigvmss --image ubuntults --instance-count 1000
```
<span data-ttu-id="f30af-144">Należy pamiętać, że hello _vmss utworzyć_ polecenia domyślnie niektóre wartości konfiguracji, jeśli nie zostanie określony.</span><span class="sxs-lookup"><span data-stu-id="f30af-144">Note that hello _vmss create_ command defaults certain configuration values if you do not specify them.</span></span> <span data-ttu-id="f30af-145">Spróbuj toosee hello dostępne opcje, które można zastąpić:</span><span class="sxs-lookup"><span data-stu-id="f30af-145">toosee hello available options that you can override, try:</span></span>
```bash
az vmss create --help
```

<span data-ttu-id="f30af-146">Jeśli tworzysz dużej skali ustawione przez tworzenie szablonu usługi Azure Resource Manager, upewnij się, że szablon hello tworzy zestaw skalowania oparte na dyskach zarządzanych Azure.</span><span class="sxs-lookup"><span data-stu-id="f30af-146">If you are creating a large scale set by composing an Azure Resource Manager template, make sure hello template creates a scale set based on Azure Managed Disks.</span></span> <span data-ttu-id="f30af-147">Można ustawić hello _singlePlacementGroup_ too_false_ właściwości w hello _właściwości_ sekcji hello _Microsoft.Compute/virtualMAchineScaleSets_ zasobów.</span><span class="sxs-lookup"><span data-stu-id="f30af-147">You can set hello _singlePlacementGroup_ property too_false_ in hello _properties_ section of hello _Microsoft.Compute/virtualMAchineScaleSets_ resource.</span></span> <span data-ttu-id="f30af-148">Witaj poniższy fragment JSON zawiera hello początku szablonem zestaw skali, w tym hello 1000 możliwą liczbę maszyn wirtualnych i hello _"singlePlacementGroup": false_ ustawienia:</span><span class="sxs-lookup"><span data-stu-id="f30af-148">hello following JSON fragment shows hello beginning of a scale set template, including hello 1,000 VM capacity and hello _"singlePlacementGroup" : false_ setting:</span></span>
```json
{
  "type": "Microsoft.Compute/virtualMachineScaleSets",
  "location": "australiaeast",
  "name": "bigvmss",
  "sku": {
    "name": "Standard_DS1_v2",
    "tier": "Standard",
    "capacity": 1000
  },
  "properties": {
    "singlePlacementGroup": false,
    "upgradePolicy": {
      "mode": "Automatic"
    }
```
<span data-ttu-id="f30af-149">Pełny przykład dużą skalę należy ustawić szablon, zapoznaj się zbyt[https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json](https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json).</span><span class="sxs-lookup"><span data-stu-id="f30af-149">For a complete example of a large scale set template, refer too[https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json](https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json).</span></span>

## <a name="converting-an-existing-scale-set-toospan-multiple-placement-groups"></a><span data-ttu-id="f30af-150">Konwertowanie istniejących skali ustawić toospan wiele grup umieszczania</span><span class="sxs-lookup"><span data-stu-id="f30af-150">Converting an existing scale set toospan multiple placement groups</span></span>
<span data-ttu-id="f30af-151">toomake istniejącego zestawu skalowania maszyny wirtualnej umożliwia skalowanie toomore niż 100 maszyn wirtualnych, należy toochange hello _singplePlacementGroup_ too_false_ właściwości w skali hello wartość modelu.</span><span class="sxs-lookup"><span data-stu-id="f30af-151">toomake an existing VM scale set capable of scaling toomore than 100 VMs, you need toochange hello _singplePlacementGroup_ property too_false_ in hello scale set model.</span></span> <span data-ttu-id="f30af-152">Możesz przetestować, zmienianie tej właściwości z hello [Eksploratora zasobów Azure](https://resources.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="f30af-152">You can test changing this property with hello [Azure Resource Explorer](https://resources.azure.com/).</span></span> <span data-ttu-id="f30af-153">Znajdowanie istniejącego zestawu skalowania, wybierz opcję _Edytuj_ i zmień hello _singlePlacementGroup_ właściwości.</span><span class="sxs-lookup"><span data-stu-id="f30af-153">Find an existing scale set, select _Edit_ and change hello _singlePlacementGroup_ property.</span></span> <span data-ttu-id="f30af-154">Jeśli ta właściwość nie jest widoczny, mogą być wyświetlane skali hello ustawić przy użyciu starszej wersji hello Microsoft.Compute interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="f30af-154">If you do not see this property, you may be viewing hello scale set with an older version of hello Microsoft.Compute API.</span></span>

>[!NOTE] 
<span data-ttu-id="f30af-155">Ustaw obsługę jednego umieszczania grupy tylko (hello domyślne zachowanie) tooa Obsługa wielu grup umieszczania skali można zmienić, ale nie można przekonwertować hello odwrotnie.</span><span class="sxs-lookup"><span data-stu-id="f30af-155">You can change a scale set from supporting a single placement group only (hello default behavior) tooa supporting multiple placement groups, but you cannot convert hello other way around.</span></span> <span data-ttu-id="f30af-156">W związku z tym upewnij się, że rozumiesz właściwości hello dużych zestawów przed konwersją.</span><span class="sxs-lookup"><span data-stu-id="f30af-156">Therefore make sure you understand hello properties of large scale sets before converting.</span></span> <span data-ttu-id="f30af-157">W szczególności upewnij się, że nie ma potrzeby hello Azure Load Balancer równoważenia obciążenia dla warstwy 4.</span><span class="sxs-lookup"><span data-stu-id="f30af-157">In particular, make sure you do not need layer-4 load balancing with hello Azure Load Balancer.</span></span>


