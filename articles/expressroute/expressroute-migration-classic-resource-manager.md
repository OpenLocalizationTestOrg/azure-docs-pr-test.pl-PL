---
title: "Migracji sieci wirtualnych ExpressRoute skojarzone z klasycznym tooResource Menedżera: Azure: programu PowerShell | Dokumentacja firmy Microsoft"
description: Na tej stronie opisano, jak toomigrate skojarzone sieci wirtualne tooResource Manager po przeniesieniu obwodu.
documentationcenter: na
services: expressroute
author: ganesr
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: expressroute
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/06/2017
ms.author: ganesr;cherylmc
ms.openlocfilehash: e64506c6909296f98c5dd23b1437bc0b81f31c75
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-expressroute-associated-virtual-networks-from-classic-tooresource-manager"></a><span data-ttu-id="5713c-103">Migracji sieci wirtualnych ExpressRoute skojarzone z klasycznym tooResource Manager</span><span class="sxs-lookup"><span data-stu-id="5713c-103">Migrate ExpressRoute associated virtual networks from classic tooResource Manager</span></span>

<span data-ttu-id="5713c-104">W tym artykule opisano, jak toomigrate Azure ExpressRoute skojarzone sieci wirtualne od modelu wdrażania usługi Azure Resource Manager toohello hello wdrażania klasycznego modelu po przeniesieniu obwodu usługi ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="5713c-104">This article explains how toomigrate Azure ExpressRoute associated virtual networks from hello classic deployment model toohello Azure Resource Manager deployment model after moving your ExpressRoute circuit.</span></span> 


## <a name="before-you-begin"></a><span data-ttu-id="5713c-105">Przed rozpoczęciem</span><span class="sxs-lookup"><span data-stu-id="5713c-105">Before you begin</span></span>
* <span data-ttu-id="5713c-106">Sprawdź, czy masz najnowszą wersję hello hello modułów programu Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5713c-106">Verify that you have hello latest version of hello Azure PowerShell modules.</span></span> <span data-ttu-id="5713c-107">Aby uzyskać więcej informacji, zobacz [jak tooinstall i konfigurowanie programu Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="5713c-107">For more information, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>
* <span data-ttu-id="5713c-108">Upewnij się, że użytkownik przejrzał hello [wymagania wstępne](expressroute-prerequisites.md), [wymagania dotyczące routingu](expressroute-routing.md), i [przepływy pracy](expressroute-workflows.md) przed rozpoczęciem konfigurowania.</span><span class="sxs-lookup"><span data-stu-id="5713c-108">Make sure that you have reviewed hello [prerequisites](expressroute-prerequisites.md), [routing requirements](expressroute-routing.md), and [workflows](expressroute-workflows.md) before you begin configuration.</span></span>
* <span data-ttu-id="5713c-109">Przejrzyj informacje hello są przekazywane pod [przenoszenie obwodu usługi ExpressRoute z klasycznym tooResource Menedżera](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="5713c-109">Review hello information that is provided under [Moving an ExpressRoute circuit from classic tooResource Manager](expressroute-move.md).</span></span> <span data-ttu-id="5713c-110">Upewnij się, należy zapoznać się hello limity i ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="5713c-110">Make sure that you fully understand hello limits and limitations.</span></span>
* <span data-ttu-id="5713c-111">Sprawdź, czy obwodu hello pełnej funkcjonalności w hello klasycznego modelu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="5713c-111">Verify that hello circuit is fully operational in hello classic deployment model.</span></span>
* <span data-ttu-id="5713c-112">Upewnij się, że masz grupę zasobów, który został utworzony w modelu wdrażania usługi Resource Manager hello.</span><span class="sxs-lookup"><span data-stu-id="5713c-112">Ensure that you have a resource group that was created in hello Resource Manager deployment model.</span></span>
* <span data-ttu-id="5713c-113">Przejrzyj powitania po migracji zasobów dokumentacji:</span><span class="sxs-lookup"><span data-stu-id="5713c-113">Review hello following resource-migration documentation:</span></span>

    * [<span data-ttu-id="5713c-114">Obsługiwane platformy migracji zasobów IaaS z klasycznym tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="5713c-114">Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="5713c-115">Techniczne szczegółowe informacje na temat migracji z obsługiwanych platform z klasycznym tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="5713c-115">Technical deep dive on platform-supported migration from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
    * [<span data-ttu-id="5713c-116">Często zadawane pytania: Obsługiwane platformy migracji zasobów IaaS z klasycznym tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="5713c-116">FAQs: Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="5713c-117">Przejrzyj typowe błędy, migracji i środki zaradcze</span><span class="sxs-lookup"><span data-stu-id="5713c-117">Review most common migration errors and mitigations</span></span>](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

## <a name="supported-and-unsupported-scenarios"></a><span data-ttu-id="5713c-118">Obsługiwane i nieobsługiwane scenariusze</span><span class="sxs-lookup"><span data-stu-id="5713c-118">Supported and unsupported scenarios</span></span>

* <span data-ttu-id="5713c-119">Obwodu usługi ExpressRoute można przenieść ze środowiska Menedżera zasobów klasycznych toohello hello bez żadnego przestoju.</span><span class="sxs-lookup"><span data-stu-id="5713c-119">An ExpressRoute circuit can be moved from hello classic toohello Resource Manager environment without any downtime.</span></span> <span data-ttu-id="5713c-120">Wszelkie obwodu ExpressRoute można przenosić z hello toohello klasycznego środowiska usługi Resource Manager, bez przestojów.</span><span class="sxs-lookup"><span data-stu-id="5713c-120">You can move any ExpressRoute circuit from hello classic toohello Resource Manager environment with no downtime.</span></span> <span data-ttu-id="5713c-121">Postępuj zgodnie z instrukcjami hello [przenoszenie obwody usługi ExpressRoute z hello toohello klasycznego modelu wdrażania Resource Manager przy użyciu programu PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="5713c-121">Follow hello instructions in [moving ExpressRoute circuits from hello classic toohello Resource Manager deployment model using PowerShell](expressroute-howto-move-arm.md).</span></span> <span data-ttu-id="5713c-122">Jest to wymagań wstępnych toomove zasobów toohello połączonych sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="5713c-122">This is a prerequisite toomove resources connected toohello virtual network.</span></span>
* <span data-ttu-id="5713c-123">Sieci wirtualne, bramy i skojarzonych z nimi wdrożeń w ramach sieci wirtualnej hello, które są dołączone tooan obwodu usługi expressroute w hello tej samej subskrypcji może być migrowane toohello Menedżera zasobów środowiska bez żadnego przestoju.</span><span class="sxs-lookup"><span data-stu-id="5713c-123">Virtual networks, gateways, and associated deployments within hello virtual network that are attached tooan ExpressRoute circuit in hello same subscription can be migrated toohello Resource Manager environment without any downtime.</span></span> <span data-ttu-id="5713c-124">Możesz wykonać hello kroki opisane nowsze toomigrate zasoby, takie jak sieci wirtualnych, bramy i maszyn wirtualnych wdrożonych w ramach sieci wirtualnej hello.</span><span class="sxs-lookup"><span data-stu-id="5713c-124">You can follow hello steps described later toomigrate resources such as virtual networks, gateways, and virtual machines deployed within hello virtual network.</span></span> <span data-ttu-id="5713c-125">Pamiętaj, że sieci wirtualne hello są poprawnie skonfigurowane, przed ich migracją.</span><span class="sxs-lookup"><span data-stu-id="5713c-125">You must ensure that hello virtual networks are configured correctly before they are migrated.</span></span> 
* <span data-ttu-id="5713c-126">Sieci wirtualne, bramy i skojarzonych z nimi wdrożeń w ramach sieci wirtualnej hello, które nie znajdują się w hello tej samej subskrypcji, który został hello obwodu ExpressRoute wymagają migracji hello toocomplete niektórych przestoju.</span><span class="sxs-lookup"><span data-stu-id="5713c-126">Virtual networks, gateways, and associated deployments within hello virtual network that are not in hello same subscription as hello ExpressRoute circuit require some downtime toocomplete hello migration.</span></span> <span data-ttu-id="5713c-127">Hello ostatniej sekcji dokumentu hello opisuje zasoby toomigrate toobe zostały wykonane kroki hello.</span><span class="sxs-lookup"><span data-stu-id="5713c-127">hello last section of hello document describes hello steps toobe followed toomigrate resources.</span></span>
* <span data-ttu-id="5713c-128">Nie można migrować sieci wirtualnej zarówno bramę usługi ExpressRoute, jak i bramy sieci VPN.</span><span class="sxs-lookup"><span data-stu-id="5713c-128">A virtual network with both ExpressRoute Gateway and VPN Gateway can't be migrated.</span></span>

## <a name="move-an-expressroute-circuit-from-classic-tooresource-manager"></a><span data-ttu-id="5713c-129">Przenieś obwodu usługi ExpressRoute z klasycznym tooResource Manager</span><span class="sxs-lookup"><span data-stu-id="5713c-129">Move an ExpressRoute circuit from classic tooResource Manager</span></span>
<span data-ttu-id="5713c-130">Należy przenieść obwodu usługi ExpressRoute z klasycznym toohello hello Resource Manager w środowisku przed podjęciem próby toomigrate zasoby, które są dołączony toohello obwodu ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="5713c-130">You must move an ExpressRoute circuit from hello classic toohello Resource Manager environment before you try toomigrate resources that are attached toohello ExpressRoute circuit.</span></span> <span data-ttu-id="5713c-131">tooaccomplish to zadań, zobacz następujące artykuły hello:</span><span class="sxs-lookup"><span data-stu-id="5713c-131">tooaccomplish this task, see hello following articles:</span></span>

* <span data-ttu-id="5713c-132">Przejrzyj informacje hello są przekazywane pod [przenoszenie obwodu usługi ExpressRoute z klasycznym tooResource Menedżera](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="5713c-132">Review hello information that is provided under [Moving an ExpressRoute circuit from classic tooResource Manager](expressroute-move.md).</span></span>
* <span data-ttu-id="5713c-133">[Przenieś obwód z klasycznym tooResource Manager przy użyciu programu Azure PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="5713c-133">[Move a circuit from classic tooResource Manager using Azure PowerShell](expressroute-howto-move-arm.md).</span></span>
* <span data-ttu-id="5713c-134">Za pomocą portalu zarządzania usługi Azure hello.</span><span class="sxs-lookup"><span data-stu-id="5713c-134">Use hello Azure Service Management portal.</span></span> <span data-ttu-id="5713c-135">Witaj przepływu pracy można wykonać za[tworzenie nowych obwodu ExpressRoute](expressroute-howto-circuit-portal-resource-manager.md) i wybierz opcję Importuj hello.</span><span class="sxs-lookup"><span data-stu-id="5713c-135">You can follow hello workflow too[create a new ExpressRoute circuit](expressroute-howto-circuit-portal-resource-manager.md) and select hello import option.</span></span> 

<span data-ttu-id="5713c-136">Ta operacja nie jest związana przestoju.</span><span class="sxs-lookup"><span data-stu-id="5713c-136">This operation does not involve downtime.</span></span> <span data-ttu-id="5713c-137">W trakcie migracji hello można kontynuować tootransfer danych między lokalnym i firmy Microsoft.</span><span class="sxs-lookup"><span data-stu-id="5713c-137">You can continue tootransfer data between your premises and Microsoft while hello migration is in progress.</span></span>

## <a name="migrate-virtual-networks-gateways-and-associated-deployments"></a><span data-ttu-id="5713c-138">Migracja sieci wirtualnej, bramy i skojarzonych z nimi wdrożeń</span><span class="sxs-lookup"><span data-stu-id="5713c-138">Migrate virtual networks, gateways, and associated deployments</span></span>

<span data-ttu-id="5713c-139">Hello procedura toomigrate zależą od tego, czy zasoby są w hello tej samej subskrypcji i/lub różnych subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="5713c-139">hello steps you follow toomigrate depend on whether your resources are in hello same subscription, different subscriptions, or both.</span></span>

### <a name="migrate-virtual-networks-gateways-and-associated-deployments-in-hello-same-subscription-as-hello-expressroute-circuit"></a><span data-ttu-id="5713c-140">Wykonaj migrację sieci wirtualnych, bram, i skojarzonych z nimi wdrożeń w hello tej samej subskrypcji, ponieważ hello obwodu usługi expressroute</span><span class="sxs-lookup"><span data-stu-id="5713c-140">Migrate virtual networks, gateways, and associated deployments in hello same subscription as hello ExpressRoute circuit</span></span>
<span data-ttu-id="5713c-141">W tej sekcji opisano toomigrate toobe zostały wykonane kroki hello sieci wirtualnej, bramy i skojarzonych z nimi wdrożeń w hello tej samej subskrypcji hello obwodu usługi expressroute.</span><span class="sxs-lookup"><span data-stu-id="5713c-141">This section describes hello steps toobe followed toomigrate a virtual network, gateway, and associated deployments in hello same subscription as hello ExpressRoute circuit.</span></span> <span data-ttu-id="5713c-142">Nie jest wyłączenie skojarzony z tym migracji.</span><span class="sxs-lookup"><span data-stu-id="5713c-142">No downtime is associated with this migration.</span></span> <span data-ttu-id="5713c-143">Możesz kontynuować toouse wszystkie zasoby hello proces migracji.</span><span class="sxs-lookup"><span data-stu-id="5713c-143">You can continue toouse all resources through hello migration process.</span></span> <span data-ttu-id="5713c-144">płaszczyzny zarządzania Hello jest zablokowane, gdy trwa migracja hello.</span><span class="sxs-lookup"><span data-stu-id="5713c-144">hello management plane is locked while hello migration is in progress.</span></span> 

1. <span data-ttu-id="5713c-145">Upewnij się, że obwodu ExpressRoute hello została przeniesiona z hello klasycznego toohello Menedżera zasobów środowiska.</span><span class="sxs-lookup"><span data-stu-id="5713c-145">Ensure that hello ExpressRoute circuit has been moved from hello classic toohello Resource Manager environment.</span></span>
2. <span data-ttu-id="5713c-146">Upewnij się, że w tej sieci wirtualnej hello zostało przygotowane do migracji hello odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="5713c-146">Ensure that hello virtual network has been prepared appropriately for hello migration.</span></span>
3. <span data-ttu-id="5713c-147">Zarejestruj subskrypcję dla migracji zasobów.</span><span class="sxs-lookup"><span data-stu-id="5713c-147">Register your subscription for resource migration.</span></span> <span data-ttu-id="5713c-148">tooregister subskrypcji dla migracji zasobów, hello Użyj następującego fragmentu środowiska PowerShell:</span><span class="sxs-lookup"><span data-stu-id="5713c-148">tooregister your subscription for resource migration, use hello following PowerShell snippet:</span></span>

  ```powershell 
  Select-AzureRmSubscription -SubscriptionName <Your Subscription Name>
  Register-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  Get-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  ```
4. <span data-ttu-id="5713c-149">Sprawdzanie poprawności, przygotowywania i migracji.</span><span class="sxs-lookup"><span data-stu-id="5713c-149">Validate, prepare, and migrate.</span></span> <span data-ttu-id="5713c-150">toomove hello sieci wirtualnej, hello Użyj następującego fragmentu środowiska PowerShell:</span><span class="sxs-lookup"><span data-stu-id="5713c-150">toomove hello virtual network, use hello following PowerShell snippet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Prepare $vnetName  
  Move-AzureVirtualNetwork -Commit $vnetName
  ```

  <span data-ttu-id="5713c-151">Można również przerwać migracji, uruchamiając następujące polecenia cmdlet programu PowerShell hello:</span><span class="sxs-lookup"><span data-stu-id="5713c-151">You can also abort migration by running hello following PowerShell cmdlet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Abort $vnetName
  ```

## <a name="next-steps"></a><span data-ttu-id="5713c-152">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="5713c-152">Next steps</span></span>
* [<span data-ttu-id="5713c-153">Obsługiwane platformy migracji zasobów IaaS z klasycznym tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="5713c-153">Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="5713c-154">Techniczne szczegółowe informacje na temat migracji z obsługiwanych platform z klasycznym tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="5713c-154">Technical deep dive on platform-supported migration from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
* [<span data-ttu-id="5713c-155">Często zadawane pytania: Obsługiwane platformy migracji zasobów IaaS z klasycznym tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="5713c-155">FAQs: Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="5713c-156">Przejrzyj typowe błędy, migracji i środki zaradcze</span><span class="sxs-lookup"><span data-stu-id="5713c-156">Review most common migration errors and mitigations</span></span>](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
