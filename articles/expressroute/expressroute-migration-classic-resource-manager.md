---
title: "Migracji sieci wirtualnych ExpressRoute skojarzone ze środowiska klasycznego do Menedżera zasobów: Azure: programu PowerShell | Dokumentacja firmy Microsoft"
description: "Ta strona opisano sposób przeprowadzenia migracji do Menedżera zasobów skojarzone sieci wirtualne po przeniesieniu obwodu."
documentationcenter: na
services: expressroute
author: ganesr
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: expressroute
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/06/2017
ms.author: ganesr;cherylmc
ms.openlocfilehash: 964ea38569062a7127f60dd6309b328db263bf6f
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/03/2017
---
# <a name="migrate-expressroute-associated-virtual-networks-from-classic-to-resource-manager"></a><span data-ttu-id="0136c-103">Migracji sieci wirtualnych ExpressRoute skojarzone ze środowiska klasycznego do Menedżera zasobów</span><span class="sxs-lookup"><span data-stu-id="0136c-103">Migrate ExpressRoute associated virtual networks from classic to Resource Manager</span></span>

<span data-ttu-id="0136c-104">W tym artykule opisano sposób migracji sieci wirtualnych Azure ExpressRoute skojarzone z klasycznym modelu wdrażania modelu wdrażania usługi Azure Resource Manager po przeniesieniu obwodu usługi ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="0136c-104">This article explains how to migrate Azure ExpressRoute associated virtual networks from the classic deployment model to the Azure Resource Manager deployment model after moving your ExpressRoute circuit.</span></span> 


## <a name="before-you-begin"></a><span data-ttu-id="0136c-105">Przed rozpoczęciem</span><span class="sxs-lookup"><span data-stu-id="0136c-105">Before you begin</span></span>
* <span data-ttu-id="0136c-106">Sprawdź, czy masz najnowszą wersję modułów programu Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="0136c-106">Verify that you have the latest version of the Azure PowerShell modules.</span></span> <span data-ttu-id="0136c-107">Aby uzyskać więcej informacji, zobacz [Instalowanie i konfigurowanie programu Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="0136c-107">For more information, see [How to install and configure Azure PowerShell](/powershell/azure/overview).</span></span>
* <span data-ttu-id="0136c-108">Upewnij się, że użytkownik przejrzał [wymagania wstępne](expressroute-prerequisites.md), [wymagania dotyczące routingu](expressroute-routing.md), i [przepływy pracy](expressroute-workflows.md) przed rozpoczęciem konfigurowania.</span><span class="sxs-lookup"><span data-stu-id="0136c-108">Make sure that you have reviewed the [prerequisites](expressroute-prerequisites.md), [routing requirements](expressroute-routing.md), and [workflows](expressroute-workflows.md) before you begin configuration.</span></span>
* <span data-ttu-id="0136c-109">Przejrzyj informacje, które są przekazywane pod [przenoszenie obwodu usługi ExpressRoute z klasycznego do Menedżera zasobów](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="0136c-109">Review the information that is provided under [Moving an ExpressRoute circuit from classic to Resource Manager](expressroute-move.md).</span></span> <span data-ttu-id="0136c-110">Upewnij się, że pełni rozumiesz limity i ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="0136c-110">Make sure that you fully understand the limits and limitations.</span></span>
* <span data-ttu-id="0136c-111">Sprawdź, że obwód jest w pełni funkcjonalna w klasycznym modelu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="0136c-111">Verify that the circuit is fully operational in the classic deployment model.</span></span>
* <span data-ttu-id="0136c-112">Upewnij się, że masz grupę zasobów, który został utworzony w modelu wdrażania usługi Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="0136c-112">Ensure that you have a resource group that was created in the Resource Manager deployment model.</span></span>
* <span data-ttu-id="0136c-113">Zapoznaj się z dokumentacją dotyczącą następujących migracji zasobów:</span><span class="sxs-lookup"><span data-stu-id="0136c-113">Review the following resource-migration documentation:</span></span>

    * [<span data-ttu-id="0136c-114">Obsługiwane platformy migracji zasobów IaaS ze środowiska klasycznego do usługi Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="0136c-114">Platform-supported migration of IaaS resources from classic to Azure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="0136c-115">Techniczne szczegółowe informacje na temat obsługiwanych platform migracji ze środowiska klasycznego do usługi Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="0136c-115">Technical deep dive on platform-supported migration from classic to Azure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
    * [<span data-ttu-id="0136c-116">Często zadawane pytania: Obsługiwane platformy migracji zasobów IaaS ze środowiska klasycznego do usługi Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="0136c-116">FAQs: Platform-supported migration of IaaS resources from classic to Azure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="0136c-117">Przejrzyj typowe błędy, migracji i środki zaradcze</span><span class="sxs-lookup"><span data-stu-id="0136c-117">Review most common migration errors and mitigations</span></span>](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

## <a name="supported-and-unsupported-scenarios"></a><span data-ttu-id="0136c-118">Obsługiwane i nieobsługiwane scenariusze</span><span class="sxs-lookup"><span data-stu-id="0136c-118">Supported and unsupported scenarios</span></span>

* <span data-ttu-id="0136c-119">Obwodu usługi ExpressRoute można przenosić z klasycznego środowiska usługi Resource Manager, bez żadnego przestoju.</span><span class="sxs-lookup"><span data-stu-id="0136c-119">An ExpressRoute circuit can be moved from the classic to the Resource Manager environment without any downtime.</span></span> <span data-ttu-id="0136c-120">Wszelkie obwodu usługi expressroute z klasycznego można przenieść do środowiska usługi Resource Manager, bez przestojów.</span><span class="sxs-lookup"><span data-stu-id="0136c-120">You can move any ExpressRoute circuit from the classic to the Resource Manager environment with no downtime.</span></span> <span data-ttu-id="0136c-121">Postępuj zgodnie z instrukcjami [przenoszenie obwody usługi ExpressRoute z klasycznego modelu wdrażania usługi Resource Manager przy użyciu programu PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="0136c-121">Follow the instructions in [moving ExpressRoute circuits from the classic to the Resource Manager deployment model using PowerShell](expressroute-howto-move-arm.md).</span></span> <span data-ttu-id="0136c-122">To jest wymaganiem wstępnym, aby przenieść zasoby podłączone do sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="0136c-122">This is a prerequisite to move resources connected to the virtual network.</span></span>
* <span data-ttu-id="0136c-123">Sieci wirtualne, bramy i skojarzonych z nimi wdrożeń w sieci wirtualnej, które są dołączone do obwodu usługi ExpressRoute w tej samej subskrypcji można poddać migracji do środowiska usługi Resource Manager, bez żadnego przestoju.</span><span class="sxs-lookup"><span data-stu-id="0136c-123">Virtual networks, gateways, and associated deployments within the virtual network that are attached to an ExpressRoute circuit in the same subscription can be migrated to the Resource Manager environment without any downtime.</span></span> <span data-ttu-id="0136c-124">Można wykonać kroki opisane później, aby przeprowadzić migrację zasobów, takich jak sieci wirtualnych, bramy i maszyn wirtualnych wdrożonych w ramach sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="0136c-124">You can follow the steps described later to migrate resources such as virtual networks, gateways, and virtual machines deployed within the virtual network.</span></span> <span data-ttu-id="0136c-125">Pamiętaj, że sieci wirtualne są skonfigurowane prawidłowo przed ich migracją.</span><span class="sxs-lookup"><span data-stu-id="0136c-125">You must ensure that the virtual networks are configured correctly before they are migrated.</span></span> 
* <span data-ttu-id="0136c-126">Sieci wirtualne, bramy i skojarzonych z nimi wdrożeń w sieci wirtualnej, które nie znajdują się w tej samej subskrypcji co obwodu ExpressRoute wymagają pewien Przestój, aby ukończyć migrację.</span><span class="sxs-lookup"><span data-stu-id="0136c-126">Virtual networks, gateways, and associated deployments within the virtual network that are not in the same subscription as the ExpressRoute circuit require some downtime to complete the migration.</span></span> <span data-ttu-id="0136c-127">W ostatniej sekcji dokumentu opisano procedurę można wykonać, aby przeprowadzić migrację zasobów.</span><span class="sxs-lookup"><span data-stu-id="0136c-127">The last section of the document describes the steps to be followed to migrate resources.</span></span>
* <span data-ttu-id="0136c-128">Nie można migrować sieci wirtualnej zarówno bramę usługi ExpressRoute, jak i bramy sieci VPN.</span><span class="sxs-lookup"><span data-stu-id="0136c-128">A virtual network with both ExpressRoute Gateway and VPN Gateway can't be migrated.</span></span>

## <a name="move-an-expressroute-circuit-from-classic-to-resource-manager"></a><span data-ttu-id="0136c-129">Przenieś obwodu usługi ExpressRoute ze środowiska klasycznego do Menedżera zasobów</span><span class="sxs-lookup"><span data-stu-id="0136c-129">Move an ExpressRoute circuit from classic to Resource Manager</span></span>
<span data-ttu-id="0136c-130">Musisz przenieść obwodu usługi ExpressRoute z klasycznego środowiska usługi Resource Manager przygotowania do migracji zasobów, które są dołączone do obwodu usługi expressroute.</span><span class="sxs-lookup"><span data-stu-id="0136c-130">You must move an ExpressRoute circuit from the classic to the Resource Manager environment before you try to migrate resources that are attached to the ExpressRoute circuit.</span></span> <span data-ttu-id="0136c-131">Aby to zrobić, zobacz następujące artykuły:</span><span class="sxs-lookup"><span data-stu-id="0136c-131">To accomplish this task, see the following articles:</span></span>

* <span data-ttu-id="0136c-132">Przejrzyj informacje, które są przekazywane pod [przenoszenie obwodu usługi ExpressRoute z klasycznego do Menedżera zasobów](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="0136c-132">Review the information that is provided under [Moving an ExpressRoute circuit from classic to Resource Manager](expressroute-move.md).</span></span>
* <span data-ttu-id="0136c-133">[Przenieś obwód ze środowiska klasycznego do Menedżera zasobów przy użyciu programu Azure PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="0136c-133">[Move a circuit from classic to Resource Manager using Azure PowerShell](expressroute-howto-move-arm.md).</span></span>
* <span data-ttu-id="0136c-134">Za pomocą portalu zarządzania usługi Azure.</span><span class="sxs-lookup"><span data-stu-id="0136c-134">Use the Azure Service Management portal.</span></span> <span data-ttu-id="0136c-135">Możesz wykonać, aby przepływ pracy [tworzenie nowych obwodu ExpressRoute](expressroute-howto-circuit-portal-resource-manager.md) i wybierz opcję importu.</span><span class="sxs-lookup"><span data-stu-id="0136c-135">You can follow the workflow to [create a new ExpressRoute circuit](expressroute-howto-circuit-portal-resource-manager.md) and select the import option.</span></span> 

<span data-ttu-id="0136c-136">Ta operacja nie jest związana przestoju.</span><span class="sxs-lookup"><span data-stu-id="0136c-136">This operation does not involve downtime.</span></span> <span data-ttu-id="0136c-137">Można kontynuować do transferu danych między lokalnym i firmy Microsoft, w trakcie migracji.</span><span class="sxs-lookup"><span data-stu-id="0136c-137">You can continue to transfer data between your premises and Microsoft while the migration is in progress.</span></span>

## <a name="migrate-virtual-networks-gateways-and-associated-deployments"></a><span data-ttu-id="0136c-138">Migracja sieci wirtualnej, bramy i skojarzonych z nimi wdrożeń</span><span class="sxs-lookup"><span data-stu-id="0136c-138">Migrate virtual networks, gateways, and associated deployments</span></span>

<span data-ttu-id="0136c-139">Czynności, które należy wykonać, aby migrować zależą od tego, czy zasoby są w tej samej subskrypcji i/lub różnych subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="0136c-139">The steps you follow to migrate depend on whether your resources are in the same subscription, different subscriptions, or both.</span></span>

### <a name="migrate-virtual-networks-gateways-and-associated-deployments-in-the-same-subscription-as-the-expressroute-circuit"></a><span data-ttu-id="0136c-140">Migracja sieci wirtualnych, bramy i skojarzonych z nimi wdrożeń w tej samej subskrypcji co obwodu usługi expressroute</span><span class="sxs-lookup"><span data-stu-id="0136c-140">Migrate virtual networks, gateways, and associated deployments in the same subscription as the ExpressRoute circuit</span></span>
<span data-ttu-id="0136c-141">W tej sekcji opisano kroki, aby być zachowana w celu przeprowadzenia migracji sieci wirtualnej, bramy i skojarzonych z nimi wdrożeń w tej samej subskrypcji co obwodu usługi expressroute.</span><span class="sxs-lookup"><span data-stu-id="0136c-141">This section describes the steps to be followed to migrate a virtual network, gateway, and associated deployments in the same subscription as the ExpressRoute circuit.</span></span> <span data-ttu-id="0136c-142">Nie jest wyłączenie skojarzony z tym migracji.</span><span class="sxs-lookup"><span data-stu-id="0136c-142">No downtime is associated with this migration.</span></span> <span data-ttu-id="0136c-143">Możesz korzystać ze wszystkich zasobów w procesie migracji.</span><span class="sxs-lookup"><span data-stu-id="0136c-143">You can continue to use all resources through the migration process.</span></span> <span data-ttu-id="0136c-144">Płaszczyzny zarządzania jest zablokowana w trakcie migracji.</span><span class="sxs-lookup"><span data-stu-id="0136c-144">The management plane is locked while the migration is in progress.</span></span> 

1. <span data-ttu-id="0136c-145">Upewnij się, że obwód usługi expressroute została przeniesiona z klasycznego środowiska Menedżera zasobów.</span><span class="sxs-lookup"><span data-stu-id="0136c-145">Ensure that the ExpressRoute circuit has been moved from the classic to the Resource Manager environment.</span></span>
2. <span data-ttu-id="0136c-146">Upewnij się, że sieć wirtualna został przygotowany odpowiednio do migracji.</span><span class="sxs-lookup"><span data-stu-id="0136c-146">Ensure that the virtual network has been prepared appropriately for the migration.</span></span>
3. <span data-ttu-id="0136c-147">Zarejestruj subskrypcję dla migracji zasobów.</span><span class="sxs-lookup"><span data-stu-id="0136c-147">Register your subscription for resource migration.</span></span> <span data-ttu-id="0136c-148">Aby zarejestrować subskrypcji dla migracji zasobów, użyj następującego fragmentu kodu programu PowerShell:</span><span class="sxs-lookup"><span data-stu-id="0136c-148">To register your subscription for resource migration, use the following PowerShell snippet:</span></span>

  ```powershell 
  Select-AzureRmSubscription -SubscriptionName <Your Subscription Name>
  Register-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  Get-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  ```
4. <span data-ttu-id="0136c-149">Sprawdzanie poprawności, przygotowywania i migracji.</span><span class="sxs-lookup"><span data-stu-id="0136c-149">Validate, prepare, and migrate.</span></span> <span data-ttu-id="0136c-150">Aby przenieść sieci wirtualnej, użyj następującego fragmentu kodu programu PowerShell:</span><span class="sxs-lookup"><span data-stu-id="0136c-150">To move the virtual network, use the following PowerShell snippet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Prepare $vnetName  
  Move-AzureVirtualNetwork -Commit $vnetName
  ```

  <span data-ttu-id="0136c-151">Można również przerwać migracji, uruchamiając następujące polecenie cmdlet programu PowerShell:</span><span class="sxs-lookup"><span data-stu-id="0136c-151">You can also abort migration by running the following PowerShell cmdlet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Abort $vnetName
  ```

## <a name="next-steps"></a><span data-ttu-id="0136c-152">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="0136c-152">Next steps</span></span>
* [<span data-ttu-id="0136c-153">Obsługiwane platformy migracji zasobów IaaS ze środowiska klasycznego do usługi Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="0136c-153">Platform-supported migration of IaaS resources from classic to Azure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="0136c-154">Techniczne szczegółowe informacje na temat obsługiwanych platform migracji ze środowiska klasycznego do usługi Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="0136c-154">Technical deep dive on platform-supported migration from classic to Azure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
* [<span data-ttu-id="0136c-155">Często zadawane pytania: Obsługiwane platformy migracji zasobów IaaS ze środowiska klasycznego do usługi Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="0136c-155">FAQs: Platform-supported migration of IaaS resources from classic to Azure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="0136c-156">Przejrzyj typowe błędy, migracji i środki zaradcze</span><span class="sxs-lookup"><span data-stu-id="0136c-156">Review most common migration errors and mitigations</span></span>](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
