---
title: "aaaBest praktyki dotyczące skalowania automatycznego | Dokumentacja firmy Microsoft"
description: "Wzorce skalowania automatycznego na platformie Azure aplikacje sieci Web, zestawy skalowania maszyny wirtualnej i usługi w chmurze"
author: anirudhcavale
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 9fa2b94b-dfa5-4106-96ff-74fd1fba4657
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/07/2017
ms.author: ancav
ms.openlocfilehash: eb731c15e440af93a2675210583878814d0d8818
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="best-practices-for-autoscale"></a><span data-ttu-id="0c549-103">Najlepsze rozwiązania dotyczące automatycznego skalowania</span><span class="sxs-lookup"><span data-stu-id="0c549-103">Best practices for Autoscale</span></span>
<span data-ttu-id="0c549-104">Ten artykuł zawiera najlepsze rozwiązania w zakresie tooautoscale na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="0c549-104">This article teaches best practices tooautoscale in Azure.</span></span> <span data-ttu-id="0c549-105">Azure Monitor skalowania automatycznego ma zastosowanie tylko zbyt[zestawy skalowania maszyny wirtualnej](https://azure.microsoft.com/services/virtual-machine-scale-sets/), [usługi w chmurze](https://azure.microsoft.com/services/cloud-services/), i [usługi aplikacji — aplikacje sieci Web](https://azure.microsoft.com/services/app-service/web/).</span><span class="sxs-lookup"><span data-stu-id="0c549-105">Azure Monitor autoscale applies only too[Virtual Machine Scale Sets](https://azure.microsoft.com/services/virtual-machine-scale-sets/), [Cloud Services](https://azure.microsoft.com/services/cloud-services/), and [App Service - Web Apps](https://azure.microsoft.com/services/app-service/web/).</span></span> <span data-ttu-id="0c549-106">Innymi usługami Azure, użyj metod skalowania.</span><span class="sxs-lookup"><span data-stu-id="0c549-106">Other Azure services use different scaling methods.</span></span>

## <a name="autoscale-concepts"></a><span data-ttu-id="0c549-107">Pojęcia dotyczące skalowania automatycznego</span><span class="sxs-lookup"><span data-stu-id="0c549-107">Autoscale concepts</span></span>
* <span data-ttu-id="0c549-108">Zasób może mieć tylko *jeden* ustawieniu skalowania automatycznego</span><span class="sxs-lookup"><span data-stu-id="0c549-108">A resource can have only *one* autoscale setting</span></span>
* <span data-ttu-id="0c549-109">Ustawienia automatycznego skalowania może zawierać jeden lub więcej profilów i każdy profil może mieć co najmniej jedną regułę automatycznego skalowania.</span><span class="sxs-lookup"><span data-stu-id="0c549-109">An autoscale setting can have one or more profiles and each profile can have one or more autoscale rules.</span></span>
* <span data-ttu-id="0c549-110">Ustawienia skalowania automatycznego skaluje wystąpień w poziomie, który jest *limit* przez odpowiednie zwiększenie hello wystąpień i *w* dzięki skróceniu hello liczba wystąpień.</span><span class="sxs-lookup"><span data-stu-id="0c549-110">An autoscale setting scales instances horizontally, which is *out* by increasing hello instances and *in* by decreasing hello number of instances.</span></span>
  <span data-ttu-id="0c549-111">Ustawienie skalowania automatycznego zawiera maksymalną, minimum i wartości domyślnej wystąpień.</span><span class="sxs-lookup"><span data-stu-id="0c549-111">An autoscale setting has a maximum, minimum, and default value of instances.</span></span>
* <span data-ttu-id="0c549-112">Zadanie automatycznego skalowania odczytuje zawsze hello skojarzonych metryki tooscale sprawdzając, czy został przekroczony hello skonfigurowanej wartości progowej dla skalowalnego w poziomie lub w skali.</span><span class="sxs-lookup"><span data-stu-id="0c549-112">An autoscale job always reads hello associated metric tooscale by, checking if it has crossed hello configured threshold for scale-out or scale-in.</span></span> <span data-ttu-id="0c549-113">Umożliwia wyświetlanie listy metryk tego skalowania automatycznego można skalować przez w [metryki wspólnej Skalowanie automatyczne Azure Monitor](insights-autoscale-common-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="0c549-113">You can view a list of metrics that autoscale can scale by at [Azure Monitor autoscaling common metrics](insights-autoscale-common-metrics.md).</span></span>
* <span data-ttu-id="0c549-114">Wszystkie Progi są obliczane na poziomie wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="0c549-114">All thresholds are calculated at an instance level.</span></span> <span data-ttu-id="0c549-115">Na przykład "skali przez 1 wystąpienie gdy średni Procesora > 80%, gdy liczba wystąpień jest równa 2", oznacza skalowalnego w poziomie, gdy hello średnie wykorzystanie Procesora we wszystkich wystąpieniach jest większa niż 80%.</span><span class="sxs-lookup"><span data-stu-id="0c549-115">For example, "scale out by 1 instance when average CPU > 80% when instance count is 2", means scale-out when hello average CPU across all instances is greater than 80%.</span></span>
* <span data-ttu-id="0c549-116">Zawsze otrzymywać powiadomienia o niepowodzeniu za pośrednictwem poczty e-mail.</span><span class="sxs-lookup"><span data-stu-id="0c549-116">You always receive failure notifications via email.</span></span> <span data-ttu-id="0c549-117">W szczególności hello właściciela, współautora i czytników zasobu docelowego hello otrzymywać wiadomości e-mail.</span><span class="sxs-lookup"><span data-stu-id="0c549-117">Specifically, hello owner, contributor, and readers of hello target resource receive email.</span></span> <span data-ttu-id="0c549-118">Możesz również otrzymać *odzyskiwania* wiadomość e-mail, gdy skalowania automatycznego odzyskiwania po awarii i uruchamia działa prawidłowo.</span><span class="sxs-lookup"><span data-stu-id="0c549-118">You also always receive a *recovery* email when autoscale recovers from a failure and starts functioning normally.</span></span>
* <span data-ttu-id="0c549-119">Użytkownik może zdecydować się na tooreceive skalowania pomyślnie akcji powiadomienia za pośrednictwem poczty e-mail i elementów webhook.</span><span class="sxs-lookup"><span data-stu-id="0c549-119">You can opt-in tooreceive a successful scale action notification via email and webhooks.</span></span>

## <a name="autoscale-best-practices"></a><span data-ttu-id="0c549-120">Najlepsze rozwiązania w zakresie skalowania automatycznego</span><span class="sxs-lookup"><span data-stu-id="0c549-120">Autoscale best practices</span></span>
<span data-ttu-id="0c549-121">Użyj hello następujące najlepsze rozwiązania w zakresie, jak używać automatycznego skalowania.</span><span class="sxs-lookup"><span data-stu-id="0c549-121">Use hello following best practices as you use autoscale.</span></span>

### <a name="ensure-hello-maximum-and-minimum-values-are-different-and-have-an-adequate-margin-between-them"></a><span data-ttu-id="0c549-122">Upewnij się, hello maksymalne i minimalne wartości są różne, a także mieć odpowiedni margines między nimi</span><span class="sxs-lookup"><span data-stu-id="0c549-122">Ensure hello maximum and minimum values are different and have an adequate margin between them</span></span>
<span data-ttu-id="0c549-123">Jeśli to ustawienie, które ma co najmniej = 2, maksymalna = 2 i bieżącą liczbę wystąpień hello jest 2, może wystąpić żadnej akcji skalowania.</span><span class="sxs-lookup"><span data-stu-id="0c549-123">If you have a setting that has minimum=2, maximum=2 and hello current instance count is 2, no scale action can occur.</span></span> <span data-ttu-id="0c549-124">Zachować odpowiedni poziom między liczby wystąpień maksymalne i minimalne hello, które łączą się.</span><span class="sxs-lookup"><span data-stu-id="0c549-124">Keep an adequate margin between hello maximum and minimum instance counts, which are inclusive.</span></span> <span data-ttu-id="0c549-125">Funkcja automatycznego skalowania skaluje zawsze między tymi limitami.</span><span class="sxs-lookup"><span data-stu-id="0c549-125">Autoscale always scales between these limits.</span></span>

### <a name="manual-scaling-is-reset-by-autoscale-min-and-max"></a><span data-ttu-id="0c549-126">Ręczne skalowanie jest resetowany przez skalowania automatycznego min i max</span><span class="sxs-lookup"><span data-stu-id="0c549-126">Manual scaling is reset by autoscale min and max</span></span>
<span data-ttu-id="0c549-127">Jeśli ręcznie zaktualizuj hello wystąpienia licznika tooa wartość powyżej lub poniżej maksymalnej hello hello aparat skalowania automatycznego automatycznie skaluje wstecz toohello minimalną (Jeśli poniżej) lub hello maksymalną (jeśli powyżej).</span><span class="sxs-lookup"><span data-stu-id="0c549-127">If you manually update hello instance count tooa value above or below hello maximum, hello autoscale engine automatically scales back toohello minimum (if below) or hello maximum (if above).</span></span> <span data-ttu-id="0c549-128">Na przykład można ustawić zakresu powitania od 3 do 6.</span><span class="sxs-lookup"><span data-stu-id="0c549-128">For example, you set hello range between 3 and 6.</span></span> <span data-ttu-id="0c549-129">Jeśli masz jedno uruchomione wystąpienie aparatu skalowania automatycznego hello skaluje wystąpień too3 po jego następnym uruchomieniu.</span><span class="sxs-lookup"><span data-stu-id="0c549-129">If you have one running instance, hello autoscale engine scales too3 instances on its next run.</span></span> <span data-ttu-id="0c549-130">Podobnie, jego czy skali w 8 wystąpień kopii too6 po jego następnym uruchomieniu.</span><span class="sxs-lookup"><span data-stu-id="0c549-130">Likewise, it would scale-in 8 instances back too6 on its next run.</span></span>  <span data-ttu-id="0c549-131">Ręczne skalowanie jest bardzo tymczasowe, chyba że zresetować hello również reguł skalowania automatycznego.</span><span class="sxs-lookup"><span data-stu-id="0c549-131">Manual scaling is very temporary unless you reset hello autoscale rules as well.</span></span>

### <a name="always-use-a-scale-out-and-scale-in-rule-combination-that-performs-an-increase-and-decrease"></a><span data-ttu-id="0c549-132">Zawsze używaj połączenia skalowalnego w poziomie i w skali reguł, które wykonuje wzrostu i zmniejszenie</span><span class="sxs-lookup"><span data-stu-id="0c549-132">Always use a scale-out and scale-in rule combination that performs an increase and decrease</span></span>
<span data-ttu-id="0c549-133">Jeśli używasz tylko jednej części kombinacja hello skalowania automatycznego skalowania — w tym pojedynczy przy, dopóki hello maksymalnej lub minimalnej, osiągnięto.</span><span class="sxs-lookup"><span data-stu-id="0c549-133">If you use only one part of hello combination, autoscale scale-in that single out, or in, until hello maximum, or minimum, is reached.</span></span>

### <a name="do-not-switch-between-hello-azure-portal-and-hello-azure-classic-portal-when-managing-autoscale"></a><span data-ttu-id="0c549-134">Nie przełączać się między hello portalu Azure i hello klasycznego portalu Azure podczas zarządzania skalowania automatycznego</span><span class="sxs-lookup"><span data-stu-id="0c549-134">Do not switch between hello Azure portal and hello Azure classic portal when managing Autoscale</span></span>
<span data-ttu-id="0c549-135">Dla usług aplikacji (aplikacje sieci Web) i usługi w chmurze Użyj hello toocreate portalu Azure (portal.azure.com) i Zarządzaj ustawieniami automatycznego skalowania.</span><span class="sxs-lookup"><span data-stu-id="0c549-135">For Cloud Services and App Services (Web Apps), use hello Azure portal (portal.azure.com) toocreate and manage autoscale settings.</span></span> <span data-ttu-id="0c549-136">Zestawy skalowania maszyny wirtualnej można użyć programu PowerShell, interfejsu wiersza polecenia lub interfejsu API REST toocreate i zarządzaj nimi ustawieniu skalowania automatycznego.</span><span class="sxs-lookup"><span data-stu-id="0c549-136">For Virtual Machine Scale Sets use PowerShell, CLI or REST API toocreate and manage autoscale setting.</span></span> <span data-ttu-id="0c549-137">Nie przełączać się między hello klasycznego portalu Azure (manage.windowsazure.com) i hello portalu Azure (portal.azure.com) podczas zarządzania konfiguracjami skalowania automatycznego.</span><span class="sxs-lookup"><span data-stu-id="0c549-137">Do not switch between hello Azure classic portal (manage.windowsazure.com) and hello Azure portal (portal.azure.com) when managing autoscale configurations.</span></span> <span data-ttu-id="0c549-138">Witaj klasycznego portalu Azure i jego podstawowym wewnętrznej bazy danych ma ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="0c549-138">hello Azure classic portal and its underlying backend has limitations.</span></span> <span data-ttu-id="0c549-139">Przenieś skalowania automatycznego toomanage portalu Azure toohello przy użyciu graficznego interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="0c549-139">Move toohello Azure portal toomanage autoscale using a graphical user interface.</span></span> <span data-ttu-id="0c549-140">Opcje Hello są skalowania automatycznego hello toouse programu PowerShell, interfejsu wiersza polecenia lub interfejsu API REST (za pomocą Eksploratora zasobów Azure).</span><span class="sxs-lookup"><span data-stu-id="0c549-140">hello options are toouse hello autoscale PowerShell, CLI or REST API (via Azure Resource Explorer).</span></span>

### <a name="choose-hello-appropriate-statistic-for-your-diagnostics-metric"></a><span data-ttu-id="0c549-141">Wybierz hello Statystyka odpowiednie dla Twojej metryki diagnostyki</span><span class="sxs-lookup"><span data-stu-id="0c549-141">Choose hello appropriate statistic for your diagnostics metric</span></span>
<span data-ttu-id="0c549-142">Diagnostyka miar, można wybierać między *średni*, *co najmniej*, *maksymalna* i *całkowita* jako metryki tooscale przez.</span><span class="sxs-lookup"><span data-stu-id="0c549-142">For diagnostics metrics, you can choose among *Average*, *Minimum*, *Maximum* and *Total* as a metric tooscale by.</span></span> <span data-ttu-id="0c549-143">Statystyka najczęściej Hello jest *średni*.</span><span class="sxs-lookup"><span data-stu-id="0c549-143">hello most common statistic is *Average*.</span></span>

### <a name="choose-hello-thresholds-carefully-for-all-metric-types"></a><span data-ttu-id="0c549-144">Wybierz progi hello dokładnie dla wszystkich typów metryki</span><span class="sxs-lookup"><span data-stu-id="0c549-144">Choose hello thresholds carefully for all metric types</span></span>
<span data-ttu-id="0c549-145">Zaleca się uważnie wybranie innego progi dla skalowalnego w poziomie i skali w sytuacji, w praktyce w oparciu.</span><span class="sxs-lookup"><span data-stu-id="0c549-145">We recommend carefully choosing different thresholds for scale-out and scale-in based on practical situations.</span></span>

<span data-ttu-id="0c549-146">Firma Microsoft *nie jest zalecane* Ustawienia skalowania automatycznego, takie jak hello przykłady można podać poniżej hello takie same lub bardzo podobne wartości progowe, a w warunkach:</span><span class="sxs-lookup"><span data-stu-id="0c549-146">We *do not recommend* autoscale settings like hello examples below with hello same or very similar threshold values for out and in conditions:</span></span>

* <span data-ttu-id="0c549-147">Zwiększyć wystąpień 1 Jeśli liczba Liczba wątków < = 600</span><span class="sxs-lookup"><span data-stu-id="0c549-147">Increase instances by 1 count when Thread Count <= 600</span></span>
* <span data-ttu-id="0c549-148">Zmniejsz wystąpienia o 1 Jeśli liczba Liczba wątków > = 600</span><span class="sxs-lookup"><span data-stu-id="0c549-148">Decrease instances by 1 count when Thread Count >= 600</span></span>

<span data-ttu-id="0c549-149">Oto przykład co może prowadzić tooa zachowanie, które mogą być mylące.</span><span class="sxs-lookup"><span data-stu-id="0c549-149">Let's look at an example of what can lead tooa behavior that may seem confusing.</span></span> <span data-ttu-id="0c549-150">Należy wziąć pod uwagę powitania po sekwencji.</span><span class="sxs-lookup"><span data-stu-id="0c549-150">Consider hello following sequence.</span></span>

1. <span data-ttu-id="0c549-151">Załóżmy, istnieją 2 toobegin wystąpień z, a następnie hello średnią liczbę wątków dla każdego wystąpienia rozwoju too625.</span><span class="sxs-lookup"><span data-stu-id="0c549-151">Assume there are 2 instances toobegin with and then hello average number of threads per instance grows too625.</span></span>
2. <span data-ttu-id="0c549-152">Funkcja automatycznego skalowania skaluje się dodanie 3 wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="0c549-152">Autoscale scales out adding a 3rd instance.</span></span>
3. <span data-ttu-id="0c549-153">Następnie przyjęto założenie, czy liczba wątków średni hello przez wystąpienie znajduje się too575.</span><span class="sxs-lookup"><span data-stu-id="0c549-153">Next, assume that hello average thread count across instance falls too575.</span></span>
4. <span data-ttu-id="0c549-154">Przed skalowania, skalowania automatycznego próbuje tooestimate jakie hello stan końcowy będzie, jeśli jest on skalowany w.</span><span class="sxs-lookup"><span data-stu-id="0c549-154">Before scaling down, autoscale tries tooestimate what hello final state will be if it scaled in.</span></span> <span data-ttu-id="0c549-155">Na przykład (bieżąca liczba wystąpień) 575 x 3 = 1,725 / 2 (końcowego liczba wystąpień, gdy skalowany w dół) = 862.5 wątków.</span><span class="sxs-lookup"><span data-stu-id="0c549-155">For example, 575 x  3 (current instance count) = 1,725 / 2 (final number of instances when scaled down) = 862.5 threads.</span></span> <span data-ttu-id="0c549-156">Oznacza to, że skalowania automatycznego byłyby tooimmediately skalowalnego w poziomie ponownie nawet po jego skalowania, jeśli hello wątku średnia liczba pozostaje hello tego samego lub nawet objęty niewielkiej ilości.</span><span class="sxs-lookup"><span data-stu-id="0c549-156">This means autoscale would have tooimmediately scale-out again even after it scaled in, if hello average thread count remains hello same or even falls only a small amount.</span></span> <span data-ttu-id="0c549-157">Jednak jeśli jego skalowanie ponownie, powtórz czy hello całego procesu, początkowe tooan nieskończoną pętlę.</span><span class="sxs-lookup"><span data-stu-id="0c549-157">However, if it scaled up again, hello whole process would repeat, leading tooan infinite loop.</span></span>
5. <span data-ttu-id="0c549-158">tooavoid tej sytuacji (określane jako "flapping"), skalowania automatycznego nie obsługuje w dół w ogóle.</span><span class="sxs-lookup"><span data-stu-id="0c549-158">tooavoid this situation (termed "flapping"), autoscale does not scale down at all.</span></span> <span data-ttu-id="0c549-159">Zamiast tego pomija i reevaluates hello o tej warunku ponownie wykonuje zadanie hello dalej czasu hello usługi.</span><span class="sxs-lookup"><span data-stu-id="0c549-159">Instead, it skips and reevaluates hello condition again hello next time hello service's job executes.</span></span> <span data-ttu-id="0c549-160">Można to należy mylić wiele osób, ponieważ funkcja automatycznego skalowania nie pojawi się toowork, gdy liczba wątków średni hello 575.</span><span class="sxs-lookup"><span data-stu-id="0c549-160">This could confuse many people because autoscale wouldn't appear toowork when hello average thread count was 575.</span></span>

<span data-ttu-id="0c549-161">Szacowanie podczas skalowania w jest zamierzone tooavoid "niestabilny" sytuacji, gdy akcje w skali i skalowalnego w poziomie stale Przejdź i z powrotem.</span><span class="sxs-lookup"><span data-stu-id="0c549-161">Estimation during a scale-in is intended tooavoid "flapping" situations, where scale-in and scale-out actions continually go back and forth.</span></span> <span data-ttu-id="0c549-162">Po wybraniu hello takie same progi dla skalowalnego w poziomie i w należy pamiętać o to zachowanie.</span><span class="sxs-lookup"><span data-stu-id="0c549-162">Keep this behavior in mind when you choose hello same thresholds for scale-out and in.</span></span>

<span data-ttu-id="0c549-163">Firma Microsoft zaleca, wybierając odpowiedni poziom między hello skalowalnego w poziomie i w progów.</span><span class="sxs-lookup"><span data-stu-id="0c549-163">We recommend choosing an adequate margin between hello scale-out and in thresholds.</span></span> <span data-ttu-id="0c549-164">Na przykład należy wziąć pod uwagę powitania po lepsze kombinacja reguły.</span><span class="sxs-lookup"><span data-stu-id="0c549-164">As an example, consider hello following better rule combination.</span></span>

* <span data-ttu-id="0c549-165">Zwiększyć wystąpień 1 Jeśli liczba procesora CPU Wynoszące % > = 80</span><span class="sxs-lookup"><span data-stu-id="0c549-165">Increase instances by 1 count when CPU%  >= 80</span></span>
* <span data-ttu-id="0c549-166">Zmniejsz wystąpienia o 1 Jeśli liczba procesora CPU Wynoszące % < = 60</span><span class="sxs-lookup"><span data-stu-id="0c549-166">Decrease instances by 1 count when CPU% <= 60</span></span>

<span data-ttu-id="0c549-167">W takim przypadku</span><span class="sxs-lookup"><span data-stu-id="0c549-167">In this case</span></span>  

1. <span data-ttu-id="0c549-168">Załóżmy, że istnieją 2 toostart wystąpień z.</span><span class="sxs-lookup"><span data-stu-id="0c549-168">Assume there are 2 instances toostart with.</span></span>
2. <span data-ttu-id="0c549-169">Jeśli hello średni procent użycia procesora CPU w wystąpieniach przestanie too80, automatycznego skalowania skaluje się dodanie trzeci wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="0c549-169">If hello average CPU% across instances goes too80, autoscale scales out adding a third instance.</span></span>
3. <span data-ttu-id="0c549-170">Teraz załóżmy przez czas Procesora hello % wypada too60.</span><span class="sxs-lookup"><span data-stu-id="0c549-170">Now assume that over time hello CPU% falls too60.</span></span>
4. <span data-ttu-id="0c549-171">Jego skalowania automatycznego skalowania w reguły szacuje stan końcowy hello, gdyby tooscale w.</span><span class="sxs-lookup"><span data-stu-id="0c549-171">Autoscale's scale-in rule estimates hello final state if it were tooscale-in.</span></span> <span data-ttu-id="0c549-172">Na przykład (bieżąca liczba wystąpień) 60 x 3 = 180 / 2 (końcowego liczba wystąpień, gdy skalowany w dół) = 90.</span><span class="sxs-lookup"><span data-stu-id="0c549-172">For example, 60 x 3 (current instance count) = 180 / 2 (final number of instances when scaled down) = 90.</span></span> <span data-ttu-id="0c549-173">Dlatego skalowania automatycznego nie skali w ponieważ poza tooscale może mieć natychmiast ponownie.</span><span class="sxs-lookup"><span data-stu-id="0c549-173">So autoscale does not scale-in because it would have tooscale-out again immediately.</span></span> <span data-ttu-id="0c549-174">Zamiast tego pomija skalowania.</span><span class="sxs-lookup"><span data-stu-id="0c549-174">Instead, it skips scaling down.</span></span>
5. <span data-ttu-id="0c549-175">Umożliwia sprawdzenie skalowania automatycznego czas następnego Hello toofall too50 nadal hello procesora CPU.</span><span class="sxs-lookup"><span data-stu-id="0c549-175">hello next time autoscale checks, hello CPU continues toofall too50.</span></span> <span data-ttu-id="0c549-176">Ponownie - szacuje wystąpienia 50 x 3 = 150 / 2 wystąpień = 75, który jest poniżej progu skalowalnego w poziomie hello 80, więc on skalowany w pomyślnie too2 wystąpień.</span><span class="sxs-lookup"><span data-stu-id="0c549-176">It estimates again -  50 x 3 instance = 150 / 2 instances = 75, which is below hello scale-out threshold of 80, so it scales in successfully too2 instances.</span></span>

### <a name="considerations-for-scaling-threshold-values-for-special-metrics"></a><span data-ttu-id="0c549-177">Zagadnienia dotyczące wartości progowe dla specjalnych metryki skalowania</span><span class="sxs-lookup"><span data-stu-id="0c549-177">Considerations for scaling threshold values for special metrics</span></span>
 <span data-ttu-id="0c549-178">Dla specjalnych metryki na przykład metryka długość magazynu lub kolejką usługi Service Bus próg hello jest hello średnią liczbę wiadomości na bieżąca liczba wystąpień.</span><span class="sxs-lookup"><span data-stu-id="0c549-178">For special metrics such as Storage or Service Bus Queue length metric, hello threshold is hello average number of messages available per current number of instances.</span></span> <span data-ttu-id="0c549-179">Wybierz uważnie hello wybierz wartość progowa hello ta metryka.</span><span class="sxs-lookup"><span data-stu-id="0c549-179">Carefully choose hello choose hello threshold value for this metric.</span></span>

<span data-ttu-id="0c549-180">Umożliwia ona zilustrować z tooensure przykład zrozumienie zachowania hello lepiej.</span><span class="sxs-lookup"><span data-stu-id="0c549-180">Let's illustrate it with an example tooensure you understand hello behavior better.</span></span>

* <span data-ttu-id="0c549-181">Zwiększenie wystąpienia według liczby 1, gdy liczba komunikatów kolejki magazynu > = 50</span><span class="sxs-lookup"><span data-stu-id="0c549-181">Increase instances by 1 count when Storage Queue message count >= 50</span></span>
* <span data-ttu-id="0c549-182">Zmniejsz wystąpienia według liczby 1 Jeśli liczba komunikatów kolejki magazynu < = 10</span><span class="sxs-lookup"><span data-stu-id="0c549-182">Decrease instances by 1 count when Storage Queue message count <= 10</span></span>

<span data-ttu-id="0c549-183">Należy wziąć pod uwagę następujące sekwencji hello:</span><span class="sxs-lookup"><span data-stu-id="0c549-183">Consider hello following sequence:</span></span>

1. <span data-ttu-id="0c549-184">Istnieją 2 wystąpienia kolejki magazynu.</span><span class="sxs-lookup"><span data-stu-id="0c549-184">There are 2 storage queue instances.</span></span>
2. <span data-ttu-id="0c549-185">Zachowaj przesyłanych wiadomości i przeglądając kolejki magazynu hello, łączna liczba hello odczytuje 50.</span><span class="sxs-lookup"><span data-stu-id="0c549-185">Messages keep coming and when you review hello storage queue, hello total count reads 50.</span></span> <span data-ttu-id="0c549-186">Użytkownik może założenie, że tego skalowania automatycznego powinien rozpocząć akcji skalowania w poziomie.</span><span class="sxs-lookup"><span data-stu-id="0c549-186">You might assume that autoscale should start a scale-out action.</span></span> <span data-ttu-id="0c549-187">Jednak należy pamiętać, że nadal 50/2 = 25 komunikaty dla każdego wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="0c549-187">However, note that it is still 50/2 = 25 messages per instance.</span></span> <span data-ttu-id="0c549-188">Tak skalowalnych w poziomie nie występuje.</span><span class="sxs-lookup"><span data-stu-id="0c549-188">So, scale-out does not occur.</span></span> <span data-ttu-id="0c549-189">Dla pierwszego toohappen skalowalnego w poziomie hello hello łącznej liczbie komunikatów w kolejce magazynu hello powinna być 100.</span><span class="sxs-lookup"><span data-stu-id="0c549-189">For hello first scale-out toohappen, hello total message count in hello storage queue should be 100.</span></span>
3. <span data-ttu-id="0c549-190">Następnie przyjęto założenie, że hello łącznej liczbie komunikatów osiągnie 100.</span><span class="sxs-lookup"><span data-stu-id="0c549-190">Next, assume that hello total message count reaches 100.</span></span>
4. <span data-ttu-id="0c549-191">3 wystąpienia kolejki magazynu jest dodawany powodu tooa akcji skalowania w poziomie.</span><span class="sxs-lookup"><span data-stu-id="0c549-191">A 3rd storage queue instance is added due tooa scale-out action.</span></span>  <span data-ttu-id="0c549-192">Witaj następnej akcji skalowania w poziomie nie nastąpi aż do hello całkowita liczba wiadomości w kolejce hello osiągnie 150, ponieważ 150/3 = 50.</span><span class="sxs-lookup"><span data-stu-id="0c549-192">hello next scale-out action will not happen until hello total message count in hello queue reaches 150 because 150/3 = 50.</span></span>
5. <span data-ttu-id="0c549-193">Teraz hello liczbę wiadomości w kolejce hello pobiera mniejsze.</span><span class="sxs-lookup"><span data-stu-id="0c549-193">Now hello number of messages in hello queue gets smaller.</span></span> <span data-ttu-id="0c549-194">Z wystąpieniami 3 hello pierwszej skali w akcji spowodowany hello całkowita liczba wiadomości we wszystkich kolejkach sumują too30 ponieważ 30/3 = 10 komunikaty dla każdego wystąpienia, czyli hello w skali próg.</span><span class="sxs-lookup"><span data-stu-id="0c549-194">With 3 instances, hello first scale-in action happens when hello total messages in all queues add up too30 because 30/3 = 10 messages per instance, which is hello scale-in threshold.</span></span>

### <a name="considerations-for-scaling-when-multiple-profiles-are-configured-in-an-autoscale-setting"></a><span data-ttu-id="0c549-195">Zagadnienia dotyczące skalowania, gdy wiele profilów skonfigurowanych w ustawieniu skalowania automatycznego</span><span class="sxs-lookup"><span data-stu-id="0c549-195">Considerations for scaling when multiple profiles are configured in an autoscale setting</span></span>
<span data-ttu-id="0c549-196">W ustawieniu skalowania automatycznego można wybrać profil domyślny, który jest zawsze stosowane bez jej zależności od harmonogramu lub czasu, lub możesz cyklicznego profil lub określony zakres daty i godziny.</span><span class="sxs-lookup"><span data-stu-id="0c549-196">In an autoscale setting, you can choose a default profile, which is always applied without any dependency on schedule or time, or you can choose a recurring profile or a profile for a fixed period with a date and time range.</span></span>

<span data-ttu-id="0c549-197">Kiedy usługa skalowania automatycznego przetwarza je, zawsze sprawdzają w hello w następującej kolejności:</span><span class="sxs-lookup"><span data-stu-id="0c549-197">When autoscale service processes them, it always checks in hello following order:</span></span>

1. <span data-ttu-id="0c549-198">Stałe profilu daty</span><span class="sxs-lookup"><span data-stu-id="0c549-198">Fixed Date profile</span></span>
2. <span data-ttu-id="0c549-199">Cykliczne profilu</span><span class="sxs-lookup"><span data-stu-id="0c549-199">Recurring profile</span></span>
3. <span data-ttu-id="0c549-200">Domyślny profil ("Always")</span><span class="sxs-lookup"><span data-stu-id="0c549-200">Default ("Always") profile</span></span>

<span data-ttu-id="0c549-201">Jeśli profil warunek jest spełniony, skalowania automatycznego nie sprawdza hello dalej warunku profilu poniżej.</span><span class="sxs-lookup"><span data-stu-id="0c549-201">If a profile condition is met, autoscale does not check hello next profile condition below it.</span></span> <span data-ttu-id="0c549-202">Funkcja automatycznego skalowania przetwarza tylko jeden profil naraz.</span><span class="sxs-lookup"><span data-stu-id="0c549-202">Autoscale only processes one profile at a time.</span></span> <span data-ttu-id="0c549-203">Oznacza to, jeśli chcesz, aby tooalso obejmują warunek przetwarzania z profilu niższego poziomu, te reguły musi zawierać również w bieżącym profilu hello.</span><span class="sxs-lookup"><span data-stu-id="0c549-203">This means if you want tooalso include a processing condition from a lower-tier profile, you must include those rules as well in hello current profile.</span></span>

<span data-ttu-id="0c549-204">Umożliwia przeglądanie to przykładu:</span><span class="sxs-lookup"><span data-stu-id="0c549-204">Let's review this using an example:</span></span>

<span data-ttu-id="0c549-205">Obraz powitania poniżej przedstawiono ustawienia skalowania automatycznego profil domyślny minimalny wystąpień = 2 do maksymalnej wystąpień = 10.</span><span class="sxs-lookup"><span data-stu-id="0c549-205">hello image below shows an autoscale setting with a default profile of minimum instances = 2 and maximum instances = 10.</span></span> <span data-ttu-id="0c549-206">W tym przykładzie reguły są tooscale skonfigurowanych w poziomie, gdy hello liczba wiadomości w kolejce hello jest większa niż 10 i skali w hello liczba wiadomości w kolejce hello jest mniejsza niż 3.</span><span class="sxs-lookup"><span data-stu-id="0c549-206">In this example, rules are configured tooscale-out when hello message count in hello queue is greater than 10 and scale-in when hello message count in hello queue is less than 3.</span></span> <span data-ttu-id="0c549-207">Dlatego teraz hello zasobów można skalować między wystąpieniami 2 do 10.</span><span class="sxs-lookup"><span data-stu-id="0c549-207">So now hello resource can scale between 2 and 10 instances.</span></span>

<span data-ttu-id="0c549-208">Ponadto jest profil cyklicznego ustawić od poniedziałku.</span><span class="sxs-lookup"><span data-stu-id="0c549-208">In addition, there is a recurring profile set for Monday.</span></span> <span data-ttu-id="0c549-209">Ma wartość minimalną wystąpień = 2, a maksymalna wystąpienia = 12.</span><span class="sxs-lookup"><span data-stu-id="0c549-209">It is set for minimum instances = 2 and maximum instances = 12.</span></span> <span data-ttu-id="0c549-210">Oznacza to, w poniedziałek, skalowania automatycznego hello pierwszego czasu sprawdza, czy ten stan, jeśli liczba wystąpień hello jest równa 2, skaluje się toohello nowe co najmniej 3.</span><span class="sxs-lookup"><span data-stu-id="0c549-210">This means on Monday, hello first time autoscale checks for this condition, if hello instance count is 2, it scales toohello new minimum of 3.</span></span> <span data-ttu-id="0c549-211">Tak długo, jak skalowania automatycznego nadal toofind (poniedziałek) dopasować ten stan profilu, przetwarza tylko hello na podstawie procesora CPU skalowania w poziomie/w skonfigurowanych reguł dla tego profilu.</span><span class="sxs-lookup"><span data-stu-id="0c549-211">As long as autoscale continues toofind this profile condition matched (Monday), it only processes hello CPU-based scale-out/in rules configured for this profile.</span></span> <span data-ttu-id="0c549-212">W tej chwili nie sprawdza długość kolejki hello.</span><span class="sxs-lookup"><span data-stu-id="0c549-212">At this time, it does not check for hello queue length.</span></span> <span data-ttu-id="0c549-213">Jednak jeśli chcesz także hello kolejki długość warunku toobe zaznaczone, należy uwzględnić te reguły z profil domyślny hello również w profilu od poniedziałku.</span><span class="sxs-lookup"><span data-stu-id="0c549-213">However, if you also want hello queue length condition toobe checked, you should include those rules from hello default profile as well in your Monday profile.</span></span>

<span data-ttu-id="0c549-214">Podobnie gdy skalowania automatycznego zmienia profil domyślny toohello Wstecz, najpierw sprawdza, czy zostały spełnione warunki minimalną i maksymalną hello.</span><span class="sxs-lookup"><span data-stu-id="0c549-214">Similarly, when autoscale switches back toohello default profile, it first checks if hello minimum and maximum conditions are met.</span></span> <span data-ttu-id="0c549-215">Jeśli hello liczbę wystąpień w czasie hello jest 12, go skaluje w too10, hello maksymalny dozwolony dla hello profil domyślny.</span><span class="sxs-lookup"><span data-stu-id="0c549-215">If hello number of instances at hello time is 12, it scales in too10, hello maximum allowed for hello default profile.</span></span>

![Ustawienia skalowania automatycznego](./media/insights-autoscale-best-practices/insights-autoscale-best-practices-2.png)

### <a name="considerations-for-scaling-when-multiple-rules-are-configured-in-a-profile"></a><span data-ttu-id="0c549-217">Zagadnienia dotyczące skalowania, gdy skonfigurowano wiele reguł w profilu</span><span class="sxs-lookup"><span data-stu-id="0c549-217">Considerations for scaling when multiple rules are configured in a profile</span></span>
<span data-ttu-id="0c549-218">Istnieją przypadki, w których użytkownik może mieć tooset wiele reguł w profilu.</span><span class="sxs-lookup"><span data-stu-id="0c549-218">There are cases where you may have tooset multiple rules in a profile.</span></span> <span data-ttu-id="0c549-219">Witaj następującego zestawu reguł skalowania automatycznego są używane przy użyciu usługi ustawianą wiele reguł.</span><span class="sxs-lookup"><span data-stu-id="0c549-219">hello following set of autoscale rules are used by services use when multiple rules are set.</span></span>

<span data-ttu-id="0c549-220">Na *skalowanie*, skalowania automatycznego jest uruchamiany, jeśli reguły jest spełniony.</span><span class="sxs-lookup"><span data-stu-id="0c549-220">On *scale out*, autoscale runs if any rule is met.</span></span>
<span data-ttu-id="0c549-221">Na *w skali*, wszystkie reguły zostały spełnione toobe wymagają skalowania automatycznego.</span><span class="sxs-lookup"><span data-stu-id="0c549-221">On *scale-in*, autoscale require all rules toobe met.</span></span>

<span data-ttu-id="0c549-222">tooillustrate, założono, że istnieje hello 4 reguły skalowania automatycznego:</span><span class="sxs-lookup"><span data-stu-id="0c549-222">tooillustrate, assume that you have hello following 4 autoscale rules:</span></span>

* <span data-ttu-id="0c549-223">Jeśli Procesor < 30%, skalowania w 1</span><span class="sxs-lookup"><span data-stu-id="0c549-223">If CPU < 30 %, scale-in by 1</span></span>
* <span data-ttu-id="0c549-224">Jeśli pamięci < 50% skali w 1</span><span class="sxs-lookup"><span data-stu-id="0c549-224">If Memory < 50%, scale-in by 1</span></span>
* <span data-ttu-id="0c549-225">Jeśli Procesor > 75%, skalowalnych w poziomie przez 1</span><span class="sxs-lookup"><span data-stu-id="0c549-225">If CPU > 75%, scale-out by 1</span></span>
* <span data-ttu-id="0c549-226">Jeśli pamięci > 75%, skalowalnych w poziomie przez 1</span><span class="sxs-lookup"><span data-stu-id="0c549-226">If Memory > 75%, scale-out by 1</span></span>

<span data-ttu-id="0c549-227">Następnie wykonaj hello występuje:</span><span class="sxs-lookup"><span data-stu-id="0c549-227">Then hello follow occurs:</span></span>

* <span data-ttu-id="0c549-228">Jeśli 76% jest procesora CPU i pamięci to 50%, możemy skalowalnego w poziomie.</span><span class="sxs-lookup"><span data-stu-id="0c549-228">If CPU is 76% and Memory is 50%, we scale-out.</span></span>
* <span data-ttu-id="0c549-229">Jeśli procesora CPU wynosi 50% pamięci wynosi 76% możemy skalowalnego w poziomie.</span><span class="sxs-lookup"><span data-stu-id="0c549-229">If CPU is 50% and Memory is 76% we scale-out.</span></span>

<span data-ttu-id="0c549-230">Na hello drugiej strony, jeśli procesora CPU wynosi 25% i pamięci 51% skalowania automatycznego jest **nie** w skali.</span><span class="sxs-lookup"><span data-stu-id="0c549-230">On hello other hand, if CPU is 25% and memory is 51% autoscale does **not** scale-in.</span></span> <span data-ttu-id="0c549-231">Tooscale — w porządku procesora CPU musi być 49% 29% i pamięci.</span><span class="sxs-lookup"><span data-stu-id="0c549-231">In order tooscale-in, CPU must be 29% and Memory 49%.</span></span>

### <a name="always-select-a-safe-default-instance-count"></a><span data-ttu-id="0c549-232">Wybierz zawsze bezpieczne domyślną liczbę wystąpień</span><span class="sxs-lookup"><span data-stu-id="0c549-232">Always select a safe default instance count</span></span>
<span data-ttu-id="0c549-233">ważne skalowania automatycznego skaluje liczba toothat usługi, gdy nie są dostępne metryki jest Hello domyślną liczbę wystąpień.</span><span class="sxs-lookup"><span data-stu-id="0c549-233">hello default instance count is important autoscale scales your service toothat count when metrics are not available.</span></span> <span data-ttu-id="0c549-234">W związku z tym wybierz domyślną liczbę wystąpień, które jest bezpieczne dla obciążeń.</span><span class="sxs-lookup"><span data-stu-id="0c549-234">Therefore, select a default instance count that's safe for your workloads.</span></span>

### <a name="configure-autoscale-notifications"></a><span data-ttu-id="0c549-235">Konfigurowanie powiadomień skalowania automatycznego</span><span class="sxs-lookup"><span data-stu-id="0c549-235">Configure autoscale notifications</span></span>
<span data-ttu-id="0c549-236">Skalowania automatycznego powiadamia hello Administratorzy i współautorzy hello zasobów za pośrednictwem poczty e-mail, jeśli wystąpienia któregokolwiek z hello następujące warunki:</span><span class="sxs-lookup"><span data-stu-id="0c549-236">Autoscale notifies hello administrators and contributors of hello resource by email if any of hello following conditions occur:</span></span>

* <span data-ttu-id="0c549-237">Funkcja automatycznego skalowania usługi nie powiedzie się tootake akcji.</span><span class="sxs-lookup"><span data-stu-id="0c549-237">autoscale service fails tootake an action.</span></span>
* <span data-ttu-id="0c549-238">Metryki nie są dostępne dla automatycznego skalowania usługi toomake decyzji skali.</span><span class="sxs-lookup"><span data-stu-id="0c549-238">Metrics are not available for autoscale service toomake a scale decision.</span></span>
* <span data-ttu-id="0c549-239">Metryki są dostępne (odzyskiwania) ponownie toomake decyzji skali.</span><span class="sxs-lookup"><span data-stu-id="0c549-239">Metrics are available (recovery) again toomake a scale decision.</span></span>
  <span data-ttu-id="0c549-240">Oprócz powyższych warunków toohello, można skonfigurować adres e-mail lub elementu webhook tooget powiadomienia o akcji skalowania pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="0c549-240">In addition toohello conditions above, you can configure email or webhook notifications tooget notified for successful scale actions.</span></span>
  
<span data-ttu-id="0c549-241">Umożliwia także dziennik aktywności hello kondycję alertu toomonitor hello skalowania automatycznego aparatu.</span><span class="sxs-lookup"><span data-stu-id="0c549-241">You can also use an Activity Log alert toomonitor hello health of hello autoscale engine.</span></span> <span data-ttu-id="0c549-242">Poniżej przedstawiono przykłady zbyt[Utwórz Alert dziennika aktywności toomonitor wszystkie operacje aparat skalowania automatycznego na subskrypcję](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert) lub zbyt[Tworzenie alertów dziennika aktywności toomonitor wszystkie nie powiodło się skalowania automatycznego skalowania w / skalowanie w poziomie operacje na Subskrypcja](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert).</span><span class="sxs-lookup"><span data-stu-id="0c549-242">Here are examples too[create an Activity Log Alert toomonitor all autoscale engine operations on your subscription](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert) or too[create an Activity Log Alert toomonitor all failed autoscale scale in/scale out operations on your subscription](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert).</span></span>

## <a name="next-steps"></a><span data-ttu-id="0c549-243">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="0c549-243">Next Steps</span></span>
- [<span data-ttu-id="0c549-244">Utwórz Alert dziennika aktywności toomonitor wszystkie operacje aparat skalowania automatycznego na subskrypcję.</span><span class="sxs-lookup"><span data-stu-id="0c549-244">Create an Activity Log Alert toomonitor all autoscale engine operations on your subscription.</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert)
- [<span data-ttu-id="0c549-245">Utwórz Alert dziennika aktywności toomonitor wszystkie nie powiodło się skalowania automatycznego skalowania w / skalowanie operacji dla Twojej subskrypcji</span><span class="sxs-lookup"><span data-stu-id="0c549-245">Create an Activity Log Alert toomonitor all failed autoscale scale in/scale out operations on your subscription</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert)
