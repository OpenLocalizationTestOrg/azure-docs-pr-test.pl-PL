---
title: "aaaGet pracę z ról, uprawnienia i zabezpieczeń z monitorem Azure | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak wbudowane role i uprawnienia toorestrict toouse Azure Monitor dostęp do zasobów toomonitoring."
author: johnkemnetz
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 2686e53b-72f0-4312-bcd3-3dc1b4a9b912
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/26/2016
ms.author: johnkem
ms.openlocfilehash: 44fdf2a697050309480dfc164ebab51445b19bc8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="get-started-with-roles-permissions-and-security-with-azure-monitor"></a><span data-ttu-id="f488e-103">Rozpoczynanie pracy z rolami, uprawnienia i zabezpieczeń z monitorem Azure</span><span class="sxs-lookup"><span data-stu-id="f488e-103">Get started with roles, permissions, and security with Azure Monitor</span></span>
<span data-ttu-id="f488e-104">Wiele zespołów muszą toostrictly regulowania dostępu toomonitoring danych i ustawień.</span><span class="sxs-lookup"><span data-stu-id="f488e-104">Many teams need toostrictly regulate access toomonitoring data and settings.</span></span> <span data-ttu-id="f488e-105">Na przykład, jeśli masz członków zespołu, którzy używają wyłącznie na monitorowanie (pracowników działu pomocy technicznej, metodyki devops engineers) lub korzystając z dostawcą usługi zarządzanej, możesz je dostęp do danych monitorowania, jednocześnie ograniczając toocreate ich możliwości tooonly toogrant, należy zmodyfikować, lub Usuwanie zasobów.</span><span class="sxs-lookup"><span data-stu-id="f488e-105">For example, if you have team members who work exclusively on monitoring (support engineers, devops engineers) or if you use a managed service provider, you may want toogrant them access tooonly monitoring data while restricting their ability toocreate, modify, or delete resources.</span></span> <span data-ttu-id="f488e-106">W tym artykule przedstawiono sposób tooquickly zastosować wbudowane monitorowania RBAC roli tooa użytkownika na platformie Azure lub tworzenie własnych niestandardowych ról dla użytkownika, który wymaga ograniczonych uprawnień monitorowania.</span><span class="sxs-lookup"><span data-stu-id="f488e-106">This article shows how tooquickly apply a built-in monitoring RBAC role tooa user in Azure or build your own custom role for a user who needs limited monitoring permissions.</span></span> <span data-ttu-id="f488e-107">Następnie omówiono zagadnienia dotyczące zabezpieczeń dla zasobów związanych z monitora Azure i w jaki sposób można ograniczyć dostęp do danych toohello zawierają.</span><span class="sxs-lookup"><span data-stu-id="f488e-107">It then discusses security considerations for your Azure Monitor-related resources and how you can limit access toohello data they contain.</span></span>

## <a name="built-in-monitoring-roles"></a><span data-ttu-id="f488e-108">Wbudowane role monitorowania</span><span class="sxs-lookup"><span data-stu-id="f488e-108">Built-in monitoring roles</span></span>
<span data-ttu-id="f488e-109">Azure Monitor wbudowane role są odpowiedzialne za monitorowanie infrastruktury tooobtain tooresources dostępu limit toohelp zaprojektowane w ramach subskrypcji, umożliwiając nadal i skonfiguruj hello danych, które są im potrzebne.</span><span class="sxs-lookup"><span data-stu-id="f488e-109">Azure Monitor’s built-in roles are designed toohelp limit access tooresources in a subscription while still enabling those responsible for monitoring infrastructure tooobtain and configure hello data they need.</span></span> <span data-ttu-id="f488e-110">Azure Monitor oferuje dwie role poza pole: czytnik monitorowania i współautor monitorowania.</span><span class="sxs-lookup"><span data-stu-id="f488e-110">Azure Monitor provides two out-of-the-box roles: A Monitoring Reader and a Monitoring Contributor.</span></span>

### <a name="monitoring-reader"></a><span data-ttu-id="f488e-111">Czytnik monitorowania</span><span class="sxs-lookup"><span data-stu-id="f488e-111">Monitoring Reader</span></span>
<span data-ttu-id="f488e-112">Osoby przypisać rolę czytelnika monitorowania hello można wyświetlić wszystkie dane monitorowania w ramach subskrypcji, ale nie można zmodyfikować dowolnego zasobu ani edytować żadnych zasobów toomonitoring powiązane ustawienia.</span><span class="sxs-lookup"><span data-stu-id="f488e-112">People assigned hello Monitoring Reader role can view all monitoring data in a subscription but cannot modify any resource or edit any settings related toomonitoring resources.</span></span> <span data-ttu-id="f488e-113">Ta rola jest odpowiednia dla użytkowników w organizacji, takich jak inżynierów pomocy technicznej lub operacji wymagających toobe możliwość:</span><span class="sxs-lookup"><span data-stu-id="f488e-113">This role is appropriate for users in an organization, such as support or operations engineers, who need toobe able to:</span></span>

* <span data-ttu-id="f488e-114">Wyświetlać pulpity nawigacyjne monitorowania w portalu hello i tworzyć własne prywatne pulpity nawigacyjne monitorowania.</span><span class="sxs-lookup"><span data-stu-id="f488e-114">View monitoring dashboards in hello portal and create their own private monitoring dashboards.</span></span>
* <span data-ttu-id="f488e-115">Zapytanie o metryki przy użyciu hello [interfejsu API REST Monitor Azure](https://msdn.microsoft.com/library/azure/dn931930.aspx), [poleceń cmdlet programu PowerShell](insights-powershell-samples.md), lub [interfejsu wiersza polecenia i platform](insights-cli-samples.md).</span><span class="sxs-lookup"><span data-stu-id="f488e-115">Query for metrics using hello [Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931930.aspx), [PowerShell cmdlets](insights-powershell-samples.md), or [cross-platform CLI](insights-cli-samples.md).</span></span>
* <span data-ttu-id="f488e-116">Zapytanie hello dziennik aktywności za pomocą portalu hello, interfejsu API REST Monitor Azure, poleceń cmdlet programu PowerShell lub interfejsu wiersza polecenia i platform.</span><span class="sxs-lookup"><span data-stu-id="f488e-116">Query hello Activity Log using hello portal, Azure Monitor REST API, PowerShell cmdlets, or cross-platform CLI.</span></span>
* <span data-ttu-id="f488e-117">Widok hello [ustawień diagnostycznych](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) dla zasobu.</span><span class="sxs-lookup"><span data-stu-id="f488e-117">View hello [diagnostic settings](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) for a resource.</span></span>
* <span data-ttu-id="f488e-118">Widok hello [dziennika profilu](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) dla subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="f488e-118">View hello [log profile](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) for a subscription.</span></span>
* <span data-ttu-id="f488e-119">Wyświetl ustawienia skalowania automatycznego.</span><span class="sxs-lookup"><span data-stu-id="f488e-119">View autoscale settings.</span></span>
* <span data-ttu-id="f488e-120">Widok alertów działania i ustawienia.</span><span class="sxs-lookup"><span data-stu-id="f488e-120">View alert activity and settings.</span></span>
* <span data-ttu-id="f488e-121">Dostęp do danych usługi Application Insights i wyświetlanie danych w module analiz AI.</span><span class="sxs-lookup"><span data-stu-id="f488e-121">Access Application Insights data and view data in AI Analytics.</span></span>
* <span data-ttu-id="f488e-122">Wyszukiwanie w tym dane użycia dla obszaru roboczego hello danych obszaru roboczego analizy dzienników (OMS).</span><span class="sxs-lookup"><span data-stu-id="f488e-122">Search Log Analytics (OMS) workspace data including usage data for hello workspace.</span></span>
* <span data-ttu-id="f488e-123">Wyświetlanie grup zarządzania analizy dzienników (OMS).</span><span class="sxs-lookup"><span data-stu-id="f488e-123">View Log Analytics (OMS) management groups.</span></span>
* <span data-ttu-id="f488e-124">Pobieranie schematu wyszukiwania hello analizy dzienników (OMS).</span><span class="sxs-lookup"><span data-stu-id="f488e-124">Retrieve hello Log Analytics (OMS) search schema.</span></span>
* <span data-ttu-id="f488e-125">Lista pakietów analizy analizy dzienników (OMS).</span><span class="sxs-lookup"><span data-stu-id="f488e-125">List Log Analytics (OMS) intelligence packs.</span></span>
* <span data-ttu-id="f488e-126">Pobierz i wykonać analizy dzienników (OMS) zapisane wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="f488e-126">Retrieve and execute Log Analytics (OMS) saved searches.</span></span>
* <span data-ttu-id="f488e-127">Pobieranie konfiguracji magazynu analizy dzienników (OMS) hello.</span><span class="sxs-lookup"><span data-stu-id="f488e-127">Retrieve hello Log Analytics (OMS) storage configuration.</span></span>

> [!NOTE]
> <span data-ttu-id="f488e-128">Ta rola nie daje dostęp do odczytu toolog dane, które zostało Centrum zdarzeń tooan przesyłanej strumieniowo lub przechowywane na koncie magazynu.</span><span class="sxs-lookup"><span data-stu-id="f488e-128">This role does not give read access toolog data that has been streamed tooan event hub or stored in a storage account.</span></span> <span data-ttu-id="f488e-129">[Zobacz poniżej](#security-considerations-for-monitoring-data) informacji na temat konfigurowania dostępu toothese zasobów.</span><span class="sxs-lookup"><span data-stu-id="f488e-129">[See below](#security-considerations-for-monitoring-data) for information on configuring access toothese resources.</span></span>
> 
> 

### <a name="monitoring-contributor"></a><span data-ttu-id="f488e-130">Monitorowanie współautora</span><span class="sxs-lookup"><span data-stu-id="f488e-130">Monitoring Contributor</span></span>
<span data-ttu-id="f488e-131">Osoby przypisane hello monitorowania współautora roli można wyświetlić wszystkie dane monitorowania w ramach subskrypcji i utworzyć lub ustawień monitorowania, ale nie można modyfikować żadnych innych zasobów.</span><span class="sxs-lookup"><span data-stu-id="f488e-131">People assigned hello Monitoring Contributor role can view all monitoring data in a subscription and create or modify monitoring settings, but cannot modify any other resources.</span></span> <span data-ttu-id="f488e-132">Ta rola jest nadzbiorem rolę czytelnika monitorowania hello i jest odpowiednia dla członków zespołu monitorowania lub dostawcy usług zarządzanych, potrzebują, oprócz uprawnień toohello powyżej, również toobe możliwość organizacji:</span><span class="sxs-lookup"><span data-stu-id="f488e-132">This role is a superset of hello Monitoring Reader role, and is appropriate for members of an organization’s monitoring team or managed service providers who, in addition toohello permissions above, also need toobe able to:</span></span>

* <span data-ttu-id="f488e-133">Pulpity nawigacyjne monitorowania należy opublikować jako udostępnionego pulpitu nawigacyjnego.</span><span class="sxs-lookup"><span data-stu-id="f488e-133">Publish monitoring dashboards as a shared dashboard.</span></span>
* <span data-ttu-id="f488e-134">Ustaw [ustawień diagnostycznych](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) dla resource.*</span><span class="sxs-lookup"><span data-stu-id="f488e-134">Set [diagnostic settings](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) for a resource.*</span></span>
* <span data-ttu-id="f488e-135">Zestaw hello [dziennika profilu](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) dla subscription.*</span><span class="sxs-lookup"><span data-stu-id="f488e-135">Set hello [log profile](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) for a subscription.*</span></span>
* <span data-ttu-id="f488e-136">Ustaw działania alertów i ustawienia.</span><span class="sxs-lookup"><span data-stu-id="f488e-136">Set alert activity and settings.</span></span>
* <span data-ttu-id="f488e-137">Tworzenie testów sieci web usługi Application Insights i składniki.</span><span class="sxs-lookup"><span data-stu-id="f488e-137">Create Application Insights web tests and components.</span></span>
* <span data-ttu-id="f488e-138">Obszar roboczy analizy dzienników (OMS) listy udostępnionych kluczy.</span><span class="sxs-lookup"><span data-stu-id="f488e-138">List Log Analytics (OMS) workspace shared keys.</span></span>
* <span data-ttu-id="f488e-139">Włącz lub wyłącz pakiety analizy analizy dzienników (OMS).</span><span class="sxs-lookup"><span data-stu-id="f488e-139">Enable or disable Log Analytics (OMS) intelligence packs.</span></span>
* <span data-ttu-id="f488e-140">Tworzenie i usuwanie i wykonywanie analizy dzienników (OMS) zapisane wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="f488e-140">Create and delete and execute Log Analytics (OMS) saved searches.</span></span>
* <span data-ttu-id="f488e-141">Tworzenie i usuwanie konfiguracji magazynu analizy dzienników (OMS) hello.</span><span class="sxs-lookup"><span data-stu-id="f488e-141">Create and delete hello Log Analytics (OMS) storage configuration.</span></span>

<span data-ttu-id="f488e-142">* użytkownika również oddzielnie musi dysponować uprawnieniami ListKeys na powitania docelowych zasobów (magazynu konta lub zdarzenia koncentratora przestrzeń nazw) tooset profilu dziennika lub ustawienie diagnostyczne.</span><span class="sxs-lookup"><span data-stu-id="f488e-142">*user must also separately be granted ListKeys permission on hello target resource (storage account or event hub namespace) tooset a log profile or diagnostic setting.</span></span>

> [!NOTE]
> <span data-ttu-id="f488e-143">Ta rola nie daje dostęp do odczytu toolog dane, które zostało Centrum zdarzeń tooan przesyłanej strumieniowo lub przechowywane na koncie magazynu.</span><span class="sxs-lookup"><span data-stu-id="f488e-143">This role does not give read access toolog data that has been streamed tooan event hub or stored in a storage account.</span></span> <span data-ttu-id="f488e-144">[Zobacz poniżej](#security-considerations-for-monitoring-data) informacji na temat konfigurowania dostępu toothese zasobów.</span><span class="sxs-lookup"><span data-stu-id="f488e-144">[See below](#security-considerations-for-monitoring-data) for information on configuring access toothese resources.</span></span>
> 
> 

## <a name="monitoring-permissions-and-custom-rbac-roles"></a><span data-ttu-id="f488e-145">Monitorowanie uprawnienia i niestandardowe role RBAC</span><span class="sxs-lookup"><span data-stu-id="f488e-145">Monitoring permissions and custom RBAC roles</span></span>
<span data-ttu-id="f488e-146">Jeśli hello powyżej wbudowane role nie spełniają wymagań dokładne hello zespołu, możesz [utworzenia niestandardowej roli zabezpieczeń RBAC](../active-directory/role-based-access-control-custom-roles.md) z bardziej szczegółowe uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="f488e-146">If hello above built-in roles don’t meet hello exact needs of your team, you can [create a custom RBAC role](../active-directory/role-based-access-control-custom-roles.md) with more granular permissions.</span></span> <span data-ttu-id="f488e-147">Poniżej przedstawiono hello typowych operacji Azure RBAC monitora z ich opisy.</span><span class="sxs-lookup"><span data-stu-id="f488e-147">Below are hello common Azure Monitor RBAC operations with their descriptions.</span></span>

| <span data-ttu-id="f488e-148">Operacja</span><span class="sxs-lookup"><span data-stu-id="f488e-148">Operation</span></span> | <span data-ttu-id="f488e-149">Opis</span><span class="sxs-lookup"><span data-stu-id="f488e-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="f488e-150">Usuń Microsoft.Insights/AlertRules/[Read, zapisu]</span><span class="sxs-lookup"><span data-stu-id="f488e-150">Microsoft.Insights/AlertRules/[Read, Write, Delete]</span></span> |<span data-ttu-id="f488e-151">Odczyt/zapis/usuwania reguł alertów.</span><span class="sxs-lookup"><span data-stu-id="f488e-151">Read/write/delete alert rules.</span></span> |
| <span data-ttu-id="f488e-152">Microsoft.Insights/AlertRules/Incidents/Read</span><span class="sxs-lookup"><span data-stu-id="f488e-152">Microsoft.Insights/AlertRules/Incidents/Read</span></span> |<span data-ttu-id="f488e-153">Lista zdarzeń (Historia hello reguły alertów są wyzwalane) dla reguł alertów.</span><span class="sxs-lookup"><span data-stu-id="f488e-153">List incidents (history of hello alert rule being triggered) for alert rules.</span></span> <span data-ttu-id="f488e-154">Dotyczy to tylko toohello portalu.</span><span class="sxs-lookup"><span data-stu-id="f488e-154">This only applies toohello portal.</span></span> |
| <span data-ttu-id="f488e-155">Usuń Microsoft.Insights/AutoscaleSettings/[Read, zapisu]</span><span class="sxs-lookup"><span data-stu-id="f488e-155">Microsoft.Insights/AutoscaleSettings/[Read, Write, Delete]</span></span> |<span data-ttu-id="f488e-156">Ustawienia skalowania automatycznego odczytu/zapisu/usuwania.</span><span class="sxs-lookup"><span data-stu-id="f488e-156">Read/write/delete autoscale settings.</span></span> |
| <span data-ttu-id="f488e-157">Usuń Microsoft.Insights/DiagnosticSettings/[Read, zapisu]</span><span class="sxs-lookup"><span data-stu-id="f488e-157">Microsoft.Insights/DiagnosticSettings/[Read, Write, Delete]</span></span> |<span data-ttu-id="f488e-158">Ustawienia diagnostyki odczytu/zapisu/usuwania.</span><span class="sxs-lookup"><span data-stu-id="f488e-158">Read/write/delete diagnostic settings.</span></span> |
| <span data-ttu-id="f488e-159">Microsoft.Insights/eventtypes/digestevents/Read</span><span class="sxs-lookup"><span data-stu-id="f488e-159">Microsoft.Insights/eventtypes/digestevents/Read</span></span> |<span data-ttu-id="f488e-160">To uprawnienie jest wymagane dla użytkowników, którzy wymagają dostępu tooActivity dzienniki za pośrednictwem portalu hello.</span><span class="sxs-lookup"><span data-stu-id="f488e-160">This permission is necessary for users who need access tooActivity Logs via hello portal.</span></span> |
| <span data-ttu-id="f488e-161">Microsoft.Insights/eventtypes/values/Read</span><span class="sxs-lookup"><span data-stu-id="f488e-161">Microsoft.Insights/eventtypes/values/Read</span></span> |<span data-ttu-id="f488e-162">Wyświetl zdarzenia dziennika aktywności (zdarzeń zarządzania) w ramach subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="f488e-162">List Activity Log events (management events) in a subscription.</span></span> <span data-ttu-id="f488e-163">To uprawnienie jest zastosowanie tooboth dostęp programistyczny i portalu toohello dziennik aktywności.</span><span class="sxs-lookup"><span data-stu-id="f488e-163">This permission is applicable tooboth programmatic and portal access toohello Activity Log.</span></span> |
| <span data-ttu-id="f488e-164">Microsoft.Insights/LogDefinitions/Read</span><span class="sxs-lookup"><span data-stu-id="f488e-164">Microsoft.Insights/LogDefinitions/Read</span></span> |<span data-ttu-id="f488e-165">To uprawnienie jest wymagane dla użytkowników, którzy wymagają dostępu tooActivity dzienniki za pośrednictwem portalu hello.</span><span class="sxs-lookup"><span data-stu-id="f488e-165">This permission is necessary for users who need access tooActivity Logs via hello portal.</span></span> |
| <span data-ttu-id="f488e-166">Microsoft.Insights/MetricDefinitions/Read</span><span class="sxs-lookup"><span data-stu-id="f488e-166">Microsoft.Insights/MetricDefinitions/Read</span></span> |<span data-ttu-id="f488e-167">Odczytaj definicje metryki (listy dostępnych typów metryki dla zasobu).</span><span class="sxs-lookup"><span data-stu-id="f488e-167">Read metric definitions (list of available metric types for a resource).</span></span> |
| <span data-ttu-id="f488e-168">Microsoft.Insights/Metrics/Read</span><span class="sxs-lookup"><span data-stu-id="f488e-168">Microsoft.Insights/Metrics/Read</span></span> |<span data-ttu-id="f488e-169">Odczytać metryki dla zasobu.</span><span class="sxs-lookup"><span data-stu-id="f488e-169">Read metrics for a resource.</span></span> |

> [!NOTE]
> <span data-ttu-id="f488e-170">Tooalerts dostępu, ustawienia diagnostyki i metryki dla zasobu wymaga tego użytkownika hello ma typ zasobu toohello dostęp do odczytu i zakres tego zasobu.</span><span class="sxs-lookup"><span data-stu-id="f488e-170">Access tooalerts, diagnostic settings, and metrics for a resource requires that hello user has Read access toohello resource type and scope of that resource.</span></span> <span data-ttu-id="f488e-171">Tworzenie ("zapis") profil diagnostyczny ustawienie lub dziennika czy archiwa tooa magazynu konta lub strumieni tooevent koncentratory wymaga hello tooalso użytkownika ma uprawnienia ListKeys na powitania zasobu docelowego.</span><span class="sxs-lookup"><span data-stu-id="f488e-171">Creating (“write”) a diagnostic setting or log profile that archives tooa storage account or streams tooevent hubs requires hello user tooalso have ListKeys permission on hello target resource.</span></span>
> 
> 

<span data-ttu-id="f488e-172">Przy użyciu hello powyżej tabeli można na przykład utworzyć niestandardowej roli zabezpieczeń RBAC dla "działania czytnik dziennika" następująco:</span><span class="sxs-lookup"><span data-stu-id="f488e-172">For example, using hello above table you could create a custom RBAC role for an “Activity Log Reader” like this:</span></span>

```powershell
$role = Get-AzureRmRoleDefinition "Reader"
$role.Id = $null
$role.Name = "Activity Log Reader"
$role.Description = "Can view activity logs."
$role.Actions.Clear()
$role.Actions.Add("Microsoft.Insights/eventtypes/*")
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add("/subscriptions/mySubscription")
New-AzureRmRoleDefinition -Role $role 
```

## <a name="security-considerations-for-monitoring-data"></a><span data-ttu-id="f488e-173">Zagadnienia dotyczące zabezpieczeń dla danych monitorowania</span><span class="sxs-lookup"><span data-stu-id="f488e-173">Security considerations for monitoring data</span></span>
<span data-ttu-id="f488e-174">Dane monitorowania — szczególnie pliki dziennika — mogą zawierać poufne informacje, takie jak adresy IP lub nazwy użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f488e-174">Monitoring data—particularly log files—can contain sensitive information, such as IP addresses or user names.</span></span> <span data-ttu-id="f488e-175">Monitorowanie danych z platformy Azure składa się z trzech podstawowych formularzy:</span><span class="sxs-lookup"><span data-stu-id="f488e-175">Monitoring data from Azure comes in three basic forms:</span></span>

1. <span data-ttu-id="f488e-176">Witaj dziennika aktywności, który opisuje wszystkie akcje płaszczyzny kontroli w ramach subskrypcji platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="f488e-176">hello Activity Log, which describes all control-plane actions on your Azure subscription.</span></span>
2. <span data-ttu-id="f488e-177">Dzienniki diagnostyczne, które są emitowane przez zasób dzienników.</span><span class="sxs-lookup"><span data-stu-id="f488e-177">Diagnostic Logs, which are logs emitted by a resource.</span></span>
3. <span data-ttu-id="f488e-178">Metryki, które są emitowane przez zasoby.</span><span class="sxs-lookup"><span data-stu-id="f488e-178">Metrics, which are emitted by resources.</span></span>

<span data-ttu-id="f488e-179">Wszystkie trzy typy danych mogą być przechowywane na koncie magazynu lub przesyłane strumieniowo tooEvent koncentratora, które są ogólnego przeznaczenia zasobów platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="f488e-179">All three of these data types can be stored in a storage account or streamed tooEvent Hub, both of which are general-purpose Azure resources.</span></span> <span data-ttu-id="f488e-180">Ponieważ są to zasoby ogólnego przeznaczenia, tworzenie, usuwanie i uzyskiwanie dostępu do nich jest uprzywilejowana operacja zazwyczaj zastrzeżone przez administratora.</span><span class="sxs-lookup"><span data-stu-id="f488e-180">Because these are general-purpose resources, creating, deleting, and accessing them is a privileged operation usually reserved for an administrator.</span></span> <span data-ttu-id="f488e-181">Zalecamy używanie hello następujące wskazówki dotyczące zasobów związanych z monitorowaniem tooprevent nadużycia:</span><span class="sxs-lookup"><span data-stu-id="f488e-181">We suggest that you use hello following practices for monitoring-related resources tooprevent misuse:</span></span>

* <span data-ttu-id="f488e-182">Użyj konta magazynu jednego, przeznaczonego dla danych monitorowania.</span><span class="sxs-lookup"><span data-stu-id="f488e-182">Use a single, dedicated storage account for monitoring data.</span></span> <span data-ttu-id="f488e-183">Tooseparate monitorowania danych do wielu kont magazynu, należy nigdy nie udostępniaj użycia konta magazynu między monitorowania i -monitorowania danych, jak to przypadkowo może dać tych, którzy tylko muszą uzyskać dostęp do danych toomonitoring (np.</span><span class="sxs-lookup"><span data-stu-id="f488e-183">If you need tooseparate monitoring data into multiple storage accounts, never share usage of a storage account between monitoring and non-monitoring data, as this may inadvertently give those who only need access toomonitoring data (eg.</span></span> <span data-ttu-id="f488e-184">SIEM innych firm) dostęp do danych monitorowania toonon.</span><span class="sxs-lookup"><span data-stu-id="f488e-184">a third-party SIEM) access toonon-monitoring data.</span></span>
* <span data-ttu-id="f488e-185">Użyj jednego, przeznaczonego nazw usługi Service Bus lub Centrum zdarzeń na wszystkich ustawień diagnostycznych dla tej samej przyczyny jak wyżej hello.</span><span class="sxs-lookup"><span data-stu-id="f488e-185">Use a single, dedicated Service Bus or Event Hub namespace across all diagnostic settings for hello same reason as above.</span></span>
* <span data-ttu-id="f488e-186">Ograniczenie konta dostępu do magazynu powiązane toomonitoring lub usługi event hubs trzymając je w oddzielnej grupie zasobów, i [Użyj zakresu](../active-directory/role-based-access-control-what-is.md#basics-of-access-management-in-azure) na poszczególnych ról monitorowania toolimit dostęp tooonly tej grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="f488e-186">Limit access toomonitoring-related storage accounts or event hubs by keeping them in a separate resource group, and [use scope](../active-directory/role-based-access-control-what-is.md#basics-of-access-management-in-azure) on your monitoring roles toolimit access tooonly that resource group.</span></span>
* <span data-ttu-id="f488e-187">Nigdy nie należy udzielić uprawnień ListKeys hello konta magazynu lub centra zdarzeń w zakresie subskrypcji, gdy użytkownik potrzebuje tylko dane toomonitoring dostępu.</span><span class="sxs-lookup"><span data-stu-id="f488e-187">Never grant hello ListKeys permission for either storage accounts or event hubs at subscription scope when a user only needs access toomonitoring data.</span></span> <span data-ttu-id="f488e-188">Zamiast tego należy podać te uprawnienia użytkownika toohello na zasób lub grupa zasobów (Jeśli masz dedykowane monitorowania grupy zasobów) zakresu.</span><span class="sxs-lookup"><span data-stu-id="f488e-188">Instead, give these permissions toohello user at a resource or resource group (if you have a dedicated monitoring resource group) scope.</span></span>

### <a name="limiting-access-toomonitoring-related-storage-accounts"></a><span data-ttu-id="f488e-189">Ograniczenie konta dostępu do magazynu powiązane toomonitoring</span><span class="sxs-lookup"><span data-stu-id="f488e-189">Limiting access toomonitoring-related storage accounts</span></span>
<span data-ttu-id="f488e-190">Gdy użytkownik lub aplikacja potrzebuje dostęp do danych toomonitoring na koncie magazynu, należy [Generowanie sygnatury dostępu Współdzielonego konta](https://msdn.microsoft.com/library/azure/mt584140.aspx) na koncie magazynu hello zawierający dane monitorowania z magazynem tooblob dostępu tylko do odczytu na poziomie usługi.</span><span class="sxs-lookup"><span data-stu-id="f488e-190">When a user or application needs access toomonitoring data in a storage account, you should [generate an Account SAS](https://msdn.microsoft.com/library/azure/mt584140.aspx) on hello storage account that contains monitoring data with service-level read-only access tooblob storage.</span></span> <span data-ttu-id="f488e-191">W programie PowerShell może to wyglądać tak:</span><span class="sxs-lookup"><span data-stu-id="f488e-191">In PowerShell, this might look like:</span></span>

```powershell
$context = New-AzureStorageContext -ConnectionString "[connection string for your monitoring Storage Account]"
$token = New-AzureStorageAccountSASToken -ResourceType Service -Service Blob -Permission "rl" -Context $context
```

<span data-ttu-id="f488e-192">Można następnie przekazać hello tokenu toohello jednostki, która wymaga tooread z tego konta magazynu i można wyświetlić listę i odczytywać wszystkie obiekty BLOB na tym koncie magazynu.</span><span class="sxs-lookup"><span data-stu-id="f488e-192">You can then give hello token toohello entity that needs tooread from that storage account, and it can list and read from all blobs in that storage account.</span></span>

<span data-ttu-id="f488e-193">Alternatywnie należy toocontrol to uprawnienie z RBAC można przyznać hello tej jednostki Microsoft.Storage/storageAccounts/listkeys/action uprawnień na tym koncie magazynu określonym.</span><span class="sxs-lookup"><span data-stu-id="f488e-193">Alternatively, if you need toocontrol this permission with RBAC, you can grant that entity hello Microsoft.Storage/storageAccounts/listkeys/action permission on that particular storage account.</span></span> <span data-ttu-id="f488e-194">Jest to niezbędne do użytkowników, którzy potrzebują tooset stanie toobe diagnostycznych ustawienie lub dziennika profilu tooarchive tooa konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="f488e-194">This is necessary for users who need toobe able tooset a diagnostic setting or log profile tooarchive tooa storage account.</span></span> <span data-ttu-id="f488e-195">Na przykład można utworzyć powitania po niestandardowe role RBAC dla użytkownika lub aplikacji, która potrzebuje tylko tooread z jedno konto magazynu:</span><span class="sxs-lookup"><span data-stu-id="f488e-195">For example, you could create hello following custom RBAC role for a user or application that only needs tooread from one storage account:</span></span>

```powershell
$role = Get-AzureRmRoleDefinition "Reader"
$role.Id = $null
$role.Name = "Monitoring Storage Account Reader"
$role.Description = "Can get hello storage account keys for a monitoring storage account."
$role.Actions.Clear()
$role.Actions.Add("Microsoft.Storage/storageAccounts/listkeys/action")
$role.Actions.Add("Microsoft.Storage/storageAccounts/Read")
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add("/subscriptions/mySubscription/resourceGroups/myResourceGroup/providers/Microsoft.Storage/storageAccounts/myMonitoringStorageAccount")
New-AzureRmRoleDefinition -Role $role 
```

> [!WARNING]
> <span data-ttu-id="f488e-196">Witaj uprawnienia ListKeys umożliwia klucze konta magazynu podstawowych i pomocniczych hello hello użytkownika toolist.</span><span class="sxs-lookup"><span data-stu-id="f488e-196">hello ListKeys permission enables hello user toolist hello primary and secondary storage account keys.</span></span> <span data-ttu-id="f488e-197">Te klucze udzielanie użytkownikowi hello wszystkie podpisane uprawnienia (Odczyt, zapis, tworzenie obiektów blob, Usuń obiekty BLOB itp.) we wszystkich podpisany usług (obiektu blob, kolejki, tabeli, plik) na tym koncie magazynu.</span><span class="sxs-lookup"><span data-stu-id="f488e-197">These keys grant hello user all signed permissions (read, write, create blobs, delete blobs, etc.) across all signed services (blob, queue, table, file) in that storage account.</span></span> <span data-ttu-id="f488e-198">Zalecamy używanie sygnatury dostępu Współdzielonego konta opisane powyżej, gdy jest to możliwe.</span><span class="sxs-lookup"><span data-stu-id="f488e-198">We recommend using an Account SAS described above when possible.</span></span>
> 
> 

### <a name="limiting-access-toomonitoring-related-event-hubs"></a><span data-ttu-id="f488e-199">Ograniczanie dostępu centra zdarzeń związanych z toomonitoring</span><span class="sxs-lookup"><span data-stu-id="f488e-199">Limiting access toomonitoring-related event hubs</span></span>
<span data-ttu-id="f488e-200">Z usługą event hubs można wykonać tego samego typu, ale najpierw należy toocreate dedykowanych reguły autoryzacji nasłuchiwania.</span><span class="sxs-lookup"><span data-stu-id="f488e-200">A similar pattern can be followed with event hubs, but first you need toocreate a dedicated Listen authorization rule.</span></span> <span data-ttu-id="f488e-201">Jeśli chcesz toogrant dostępu tooan aplikacji, która musi tylko centra zdarzeń związanych z toomonitoring toolisten hello następujące:</span><span class="sxs-lookup"><span data-stu-id="f488e-201">If you want toogrant access tooan application that only needs toolisten toomonitoring-related event hubs, do hello following:</span></span>

1. <span data-ttu-id="f488e-202">Utwórz zasady dostępu współużytkowanego na powitania koncentratory zdarzeń, które zostały utworzone dla strumienia danych monitorowania z tylko oświadczenia nasłuchiwania.</span><span class="sxs-lookup"><span data-stu-id="f488e-202">Create a shared access policy on hello event hub(s) that were created for streaming monitoring data with only Listen claims.</span></span> <span data-ttu-id="f488e-203">Można to zrobić w portalu hello.</span><span class="sxs-lookup"><span data-stu-id="f488e-203">This can be done in hello portal.</span></span> <span data-ttu-id="f488e-204">Na przykład użytkownik może wywołać ją "monitoringReadOnly."</span><span class="sxs-lookup"><span data-stu-id="f488e-204">For example, you might call it “monitoringReadOnly.”</span></span> <span data-ttu-id="f488e-205">Jeśli to możliwe należy toogive klucza bezpośrednio toohello konsumenta i Pomiń hello następnego kroku.</span><span class="sxs-lookup"><span data-stu-id="f488e-205">If possible, you will want toogive that key directly toohello consumer and skip hello next step.</span></span>
2. <span data-ttu-id="f488e-206">Jeśli powitania klienta wymaga toobe tooget stanie hello klucza ad hoc, przyznaj hello hello ListKeys akcja ze strony użytkownika dla tego Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="f488e-206">If hello consumer needs toobe able tooget hello key ad-hoc, grant hello user hello ListKeys action for that event hub.</span></span> <span data-ttu-id="f488e-207">To jest również dla użytkowników, którzy muszą tooset stanie toobe ustawienie diagnostyczne lub logowania koncentratory tooevent toostream profilu.</span><span class="sxs-lookup"><span data-stu-id="f488e-207">This is also necessary for users who need toobe able tooset a diagnostic setting or log profile toostream tooevent hubs.</span></span> <span data-ttu-id="f488e-208">Na przykład można utworzyć regułę RBAC:</span><span class="sxs-lookup"><span data-stu-id="f488e-208">For example, you might create an RBAC rule:</span></span>
   
   ```powershell
   $role = Get-AzureRmRoleDefinition "Reader"
   $role.Id = $null
   $role.Name = "Monitoring Event Hub Listener"
   $role.Description = "Can get hello key toolisten tooan event hub streaming monitoring data."
   $role.Actions.Clear()
   $role.Actions.Add("Microsoft.ServiceBus/namespaces/authorizationrules/listkeys/action")
   $role.Actions.Add("Microsoft.ServiceBus/namespaces/Read")
   $role.AssignableScopes.Clear()
   $role.AssignableScopes.Add("/subscriptions/mySubscription/resourceGroups/myResourceGroup/providers/Microsoft.ServiceBus/namespaces/mySBNameSpace")
   New-AzureRmRoleDefinition -Role $role 
   ```

## <a name="next-steps"></a><span data-ttu-id="f488e-209">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="f488e-209">Next steps</span></span>
* [<span data-ttu-id="f488e-210">Przeczytaj informacje o RBAC i uprawnienia w programie Menedżer zasobów</span><span class="sxs-lookup"><span data-stu-id="f488e-210">Read about RBAC and permissions in Resource Manager</span></span>](../active-directory/role-based-access-control-what-is.md)
* [<span data-ttu-id="f488e-211">Omówienie hello odczytu monitorowania na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="f488e-211">Read hello overview of monitoring in Azure</span></span>](monitoring-overview.md)

