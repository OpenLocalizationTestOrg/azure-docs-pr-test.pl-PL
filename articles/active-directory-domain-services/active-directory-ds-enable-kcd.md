---
title: "Azure Active Directory Domain Services: Włącz ograniczone delegowanie protokołu kerberos | Dokumentacja firmy Microsoft"
description: "Włącz ograniczone delegowanie protokołu kerberos w domenach zarządzanych usług domenowych Azure Active Directory"
services: active-directory-ds
documentationcenter: 
author: mahesh-unnikrishnan
manager: stevenpo
editor: curtand
ms.assetid: 938a5fbc-2dd1-4759-bcce-628a6e19ab9d
ms.service: active-directory-ds
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/06/2017
ms.author: maheshu
ms.openlocfilehash: d32547c8018dd1f99c992e95a01d2711d460a261
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="configure-kerberos-constrained-delegation-kcd-on-a-managed-domain"></a><span data-ttu-id="53655-103">Skonfiguruj ograniczone delegowanie protokołu kerberos (KCD) do domeny zarządzanej</span><span class="sxs-lookup"><span data-stu-id="53655-103">Configure kerberos constrained delegation (KCD) on a managed domain</span></span>
<span data-ttu-id="53655-104">Wiele aplikacji potrzebne zasoby tooaccess w kontekście hello hello użytkownika.</span><span class="sxs-lookup"><span data-stu-id="53655-104">Many applications need tooaccess resources in hello context of hello user.</span></span> <span data-ttu-id="53655-105">Usługa Active Directory obsługuje mechanizm delegowania protokołu Kerberos, co umożliwia przypadek użycia wywołuje.</span><span class="sxs-lookup"><span data-stu-id="53655-105">Active Directory supports a mechanism called Kerberos delegation, which enables this use-case.</span></span> <span data-ttu-id="53655-106">Ponadto można ograniczyć delegowania tak, aby tylko określonych zasobów można uzyskać w kontekście hello hello użytkownika.</span><span class="sxs-lookup"><span data-stu-id="53655-106">Further, you can restrict delegation so that only specific resources can be accessed in hello context of hello user.</span></span> <span data-ttu-id="53655-107">Azure domen zarządzanych w usługach domenowych AD różnią się od tradycyjnych domen usługi Active Directory, ponieważ są one bardziej bezpieczny sposób zablokowana.</span><span class="sxs-lookup"><span data-stu-id="53655-107">Azure AD Domain Services managed domains are different from traditional Active Directory domains since they are more securely locked down.</span></span>

<span data-ttu-id="53655-108">W tym artykule opisano, jak tooconfigure kerberos ograniczonego delegowania w domenie zarządzanej usług domenowych Azure AD.</span><span class="sxs-lookup"><span data-stu-id="53655-108">This article shows you how tooconfigure kerberos constrained delegation on an Azure AD Domain Services managed domain.</span></span>

## <a name="kerberos-constrained-delegation-kcd"></a><span data-ttu-id="53655-109">Ograniczone delegowanie protokołu Kerberos (KCD)</span><span class="sxs-lookup"><span data-stu-id="53655-109">Kerberos constrained delegation (KCD)</span></span>
<span data-ttu-id="53655-110">Delegowanie protokołu Kerberos umożliwia tooimpersonate konta innego zasoby podmiotu zabezpieczeń (na przykład użytkownik) tooaccess zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="53655-110">Kerberos delegation enables an account tooimpersonate another security principal (such as a user) tooaccess resources.</span></span> <span data-ttu-id="53655-111">Należy wziąć pod uwagę aplikacji sieci web, który uzyskuje dostęp do sieci web zaplecza interfejsu API w kontekście hello użytkownika.</span><span class="sxs-lookup"><span data-stu-id="53655-111">Consider a web application that accesses a back-end web API in hello context of a user.</span></span> <span data-ttu-id="53655-112">W tym przykładzie hello aplikacji sieci web (uruchomione w kontekście konta usługi lub konto komputera/urządzenia hello) personifikuje hello użytkownika podczas uzyskiwania dostępu do zasobów hello (zaplecza interfejsu API sieci web).</span><span class="sxs-lookup"><span data-stu-id="53655-112">In this example, hello web application (running in hello context of a service account or a computer/machine account) impersonates hello user when accessing hello resource (back-end web API).</span></span> <span data-ttu-id="53655-113">Delegowanie protokołu Kerberos jest niebezpieczne, ponieważ nie ogranicza hello, do których dostęp hello zasobów personifikacji konta w kontekście hello hello użytkownika.</span><span class="sxs-lookup"><span data-stu-id="53655-113">Kerberos delegation is insecure since it does not restrict hello resources hello impersonating account can access in hello context of hello user.</span></span>

<span data-ttu-id="53655-114">Ograniczone delegowanie protokołu Kerberos (KCD) ogranicza powitalne usług/zasoby toowhich hello określony serwer może działać w imieniu hello użytkownika.</span><span class="sxs-lookup"><span data-stu-id="53655-114">Kerberos constrained delegation (KCD) restricts hello services/resources toowhich hello specified server can act on hello behalf of a user.</span></span> <span data-ttu-id="53655-115">Tradycyjne KCD wymaga tooconfigure uprawnienia administratora domeny konta domeny dla usługi i ogranicza hello konta tooa pojedynczej domeny.</span><span class="sxs-lookup"><span data-stu-id="53655-115">Traditional KCD requires domain administrator privileges tooconfigure a domain account for a service and it restricts hello account tooa single domain.</span></span>

<span data-ttu-id="53655-116">Tradycyjny KCD ma również kilka problemów związanych z nim.</span><span class="sxs-lookup"><span data-stu-id="53655-116">Traditional KCD also has a few issues associated with it.</span></span> <span data-ttu-id="53655-117">W starszych systemach operacyjnych, w którym administrator domeny hello skonfigurowane usługi hello administrator usługi hello miał nie tooknow wygodny sposób, które usługi frontonu delegowane toohello usług zasobów są jego własnością.</span><span class="sxs-lookup"><span data-stu-id="53655-117">In earlier operating systems where hello domain administrator configured hello service, hello service administrator had no useful way tooknow which front-end services delegated toohello resource services they owned.</span></span> <span data-ttu-id="53655-118">A usługa frontonu, którą mógł delegować do usługi zasobów tooa potencjalny punkt ataku.</span><span class="sxs-lookup"><span data-stu-id="53655-118">And any front-end service that could delegate tooa resource service represented a potential attack point.</span></span> <span data-ttu-id="53655-119">Jeśli takie naruszenie nastąpi naruszenie serwera udostępniającego usługę frontonu i był skonfigurowany toodelegate tooresource usług, hello zasobów usługi również mogły zostać naruszone.</span><span class="sxs-lookup"><span data-stu-id="53655-119">If a server that hosted a front-end service was compromised, and it was configured toodelegate tooresource services, hello resource services could also be compromised.</span></span>

> [!NOTE]
> <span data-ttu-id="53655-120">W domenie zarządzanej usług domenowych Azure AD nie masz uprawnienia administratora domeny.</span><span class="sxs-lookup"><span data-stu-id="53655-120">On an Azure AD Domain Services managed domain, you do not have domain administrator privileges.</span></span> <span data-ttu-id="53655-121">W związku z tym **KCD tradycyjnych nie można skonfigurować w domenie zarządzanej**.</span><span class="sxs-lookup"><span data-stu-id="53655-121">Therefore, **traditional KCD cannot be configured on a managed domain**.</span></span> <span data-ttu-id="53655-122">Użyj KCD oparte na zasobach, zgodnie z opisem w tym artykule.</span><span class="sxs-lookup"><span data-stu-id="53655-122">Use resource-based KCD as described in this article.</span></span> <span data-ttu-id="53655-123">Ten mechanizm również jest bardziej bezpieczne.</span><span class="sxs-lookup"><span data-stu-id="53655-123">This mechanism is also more secure.</span></span>
>
>

## <a name="resource-based-kerberos-constrained-delegation"></a><span data-ttu-id="53655-124">Oparte na zasobach ograniczonego delegowania protokołu kerberos</span><span class="sxs-lookup"><span data-stu-id="53655-124">Resource-based kerberos constrained delegation</span></span>
<span data-ttu-id="53655-125">W systemie Windows Server 2012 R2 i Windows Server 2012 hello możliwości tooconfigure ograniczonego delegowania dla usługi hello została przeniesiona z administratora usługi toohello hello domeny administratora.</span><span class="sxs-lookup"><span data-stu-id="53655-125">In Windows Server 2012 R2 and Windows Server 2012, hello ability tooconfigure constrained delegation for hello service has been transferred from hello domain administrator toohello service administrator.</span></span> <span data-ttu-id="53655-126">Dzięki temu administrator usług zaplecza hello można akceptować lub odrzucać usługi frontonu.</span><span class="sxs-lookup"><span data-stu-id="53655-126">In this way, hello back-end service administrator can allow or deny front-end services.</span></span> <span data-ttu-id="53655-127">Ten model jest nazywany **kerberos oparte na zasobach ograniczonego delegowania**.</span><span class="sxs-lookup"><span data-stu-id="53655-127">This model is known as **resource-based kerberos constrained delegation**.</span></span>

<span data-ttu-id="53655-128">Oparte na zasobach KCD została skonfigurowana przy użyciu programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="53655-128">Resource-based KCD is configured using PowerShell.</span></span> <span data-ttu-id="53655-129">Za pomocą hello Set-ADComputer lub polecenia cmdlet Set-ADUser, w zależności od tego, czy hello personifikacji konta jest konto komputera lub konto serwisu konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="53655-129">You use hello Set-ADComputer or Set-ADUser cmdlets, depending on whether hello impersonating account is a computer account or a user account/service account.</span></span>

### <a name="configure-resource-based-kcd-for-a-computer-account-on-a-managed-domain"></a><span data-ttu-id="53655-130">Skonfiguruj oparte na zasobach KCD dla konta komputera do domeny zarządzanej</span><span class="sxs-lookup"><span data-stu-id="53655-130">Configure resource-based KCD for a computer account on a managed domain</span></span>
<span data-ttu-id="53655-131">Założono, że masz aplikację sieci web uruchomiony na komputerze hello "contoso100-webapp.contoso100.com".</span><span class="sxs-lookup"><span data-stu-id="53655-131">Assume you have a web app running on hello computer 'contoso100-webapp.contoso100.com'.</span></span> <span data-ttu-id="53655-132">Musi on tooaccess hello zasobów (interfejsu API sieci web uruchomiony na "contoso100-api.contoso100.com") w kontekście hello użytkownicy domeny.</span><span class="sxs-lookup"><span data-stu-id="53655-132">It needs tooaccess hello resource (a web API running on 'contoso100-api.contoso100.com') in hello context of domain users.</span></span> <span data-ttu-id="53655-133">Oto, jak należy skonfigurować oparte na zasobach KCD dla tego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="53655-133">Here's how you would set up resource-based KCD for this scenario.</span></span>

```
$ImpersonatingAccount = Get-ADComputer -Identity contoso100-webapp.contoso100.com
Set-ADComputer contoso100-api.contoso100.com -PrincipalsAllowedToDelegateToAccount $ImpersonatingAccount
```

### <a name="configure-resource-based-kcd-for-a-user-account-on-a-managed-domain"></a><span data-ttu-id="53655-134">Skonfiguruj oparte na zasobach KCD dla konta użytkownika w domenie zarządzanej</span><span class="sxs-lookup"><span data-stu-id="53655-134">Configure resource-based KCD for a user account on a managed domain</span></span>
<span data-ttu-id="53655-135">Przykładowa aplikacja sieci web uruchomiona jako konto usługi "appsvc" i musi (interfejsu API sieci web uruchomiona jako konto usługi - "backendsvc") zasobu hello tooaccess w kontekście hello użytkowników domeny.</span><span class="sxs-lookup"><span data-stu-id="53655-135">Assume you have a web app running as a service account 'appsvc' and it needs tooaccess hello resource (a web API running as a service account - 'backendsvc') in hello context of domain users.</span></span> <span data-ttu-id="53655-136">Oto, jak należy skonfigurować oparte na zasobach KCD dla tego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="53655-136">Here's how you would set up resource-based KCD for this scenario.</span></span>

```
$ImpersonatingAccount = Get-ADUser -Identity appsvc
Set-ADUser backendsvc -PrincipalsAllowedToDelegateToAccount $ImpersonatingAccount
```

## <a name="related-content"></a><span data-ttu-id="53655-137">Powiązana zawartość</span><span class="sxs-lookup"><span data-stu-id="53655-137">Related Content</span></span>
* [<span data-ttu-id="53655-138">Usługi domenowe AD Azure - Przewodnik wprowadzający</span><span class="sxs-lookup"><span data-stu-id="53655-138">Azure AD Domain Services - Getting Started guide</span></span>](active-directory-ds-getting-started.md)
* [<span data-ttu-id="53655-139">Omówienie delegowania ograniczonego protokołu Kerberos</span><span class="sxs-lookup"><span data-stu-id="53655-139">Kerberos Constrained Delegation Overview</span></span>](https://technet.microsoft.com/library/jj553400.aspx)
