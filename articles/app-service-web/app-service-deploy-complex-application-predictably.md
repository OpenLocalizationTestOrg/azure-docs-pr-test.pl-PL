---
title: "Aprowizacji i wdrażania mikrousług przewidywalnego na platformie Azure"
description: "Dowiedz się, jak wdrożyć aplikację składa się z mikrousług w usłudze Azure App Service jako pojedyncza jednostka i w sposób przewidywalny przy użyciu szablonów grupy zasobów JSON i skrypty programu PowerShell."
services: app-service
documentationcenter: 
author: cephalin
manager: erikre
editor: jimbe
ms.assetid: bb51e565-e462-4c60-929a-2ff90121f41d
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/06/2016
ms.author: cephalin
ms.openlocfilehash: 844f42e61ba443a4b74a52f622113e87a7781913
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="provision-and-deploy-microservices-predictably-in-azure"></a><span data-ttu-id="ed454-103">Aprowizacji i wdrażania mikrousług przewidywalnego na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="ed454-103">Provision and deploy microservices predictably in Azure</span></span>
<span data-ttu-id="ed454-104">W tym samouczku przedstawiono sposób obsługi administracyjnej i wdrażania aplikacji składający się z [mikrousług](https://en.wikipedia.org/wiki/Microservices) w [usłudze Azure App Service](/services/app-service/) jako pojedyncza jednostka i w sposób przewidywalny przy użyciu szablonów grupy zasobów JSON i skrypty programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ed454-104">This tutorial shows how to provision and deploy an application composed of [microservices](https://en.wikipedia.org/wiki/Microservices) in [Azure App Service](/services/app-service/) as a single unit and in a predictable manner using JSON resource group templates and PowerShell scripting.</span></span> 

<span data-ttu-id="ed454-105">Podczas inicjowania obsługi administracyjnej i wdrażania aplikacji wysokiej skali, które składają się z bardzo całkowicie niezależna mikrousług, powtarzalność i przewidywalności są podstawowe znaczenie dla sukcesu.</span><span class="sxs-lookup"><span data-stu-id="ed454-105">When provisioning and deploying high-scale applications that are composed of highly decoupled microservices, repeatability and predictability are crucial to success.</span></span> <span data-ttu-id="ed454-106">[Usługa aplikacji Azure](/services/app-service/) umożliwia utworzenie mikrousług, który zawiera aplikacje sieci web, aplikacje mobilne, aplikacje interfejsu API i aplikacje logiki.</span><span class="sxs-lookup"><span data-stu-id="ed454-106">[Azure App Service](/services/app-service/) enables you to create microservices that include web apps, mobile apps, API apps, and logic apps.</span></span> <span data-ttu-id="ed454-107">[Usługa Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) pozwala na zarządzanie wszystkich mikrousług jako jednostki, wraz z zależności zasobów, takich jak bazy danych i ustawień kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="ed454-107">[Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) enables you to manage all the microservices as a unit, together with resource dependencies such as database and source control settings.</span></span> <span data-ttu-id="ed454-108">Teraz można także wdrożyć takiej aplikacji przy użyciu szablony JSON i proste skrypty środowiska PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ed454-108">Now, you can also deploy such an application using JSON templates and simple PowerShell scripting.</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="what-you-will-do"></a><span data-ttu-id="ed454-109">Będzie wykonywać</span><span class="sxs-lookup"><span data-stu-id="ed454-109">What you will do</span></span>
<span data-ttu-id="ed454-110">W samouczku wdrożysz aplikację, która obejmuje:</span><span class="sxs-lookup"><span data-stu-id="ed454-110">In the tutorial, you will deploy an application that includes:</span></span>

* <span data-ttu-id="ed454-111">Dwie sieci web aplikacji (tj. dwa mikrousług)</span><span class="sxs-lookup"><span data-stu-id="ed454-111">Two web apps (i.e. two microservices)</span></span>
* <span data-ttu-id="ed454-112">Wewnętrznej bazy danych SQL Database</span><span class="sxs-lookup"><span data-stu-id="ed454-112">A backend SQL Database</span></span>
* <span data-ttu-id="ed454-113">Ustawienia aplikacji, parametry połączenia i kontroli źródła</span><span class="sxs-lookup"><span data-stu-id="ed454-113">App settings, connection strings, and source control</span></span>
* <span data-ttu-id="ed454-114">Usługa Application insights, alerty, ustawienia skalowania automatycznego</span><span class="sxs-lookup"><span data-stu-id="ed454-114">Application insights, alerts, autoscaling settings</span></span>

## <a name="tools-you-will-use"></a><span data-ttu-id="ed454-115">Narzędzia, które będą używane</span><span class="sxs-lookup"><span data-stu-id="ed454-115">Tools you will use</span></span>
<span data-ttu-id="ed454-116">W tym samouczku użyjesz następujących narzędzi.</span><span class="sxs-lookup"><span data-stu-id="ed454-116">In this tutorial, you will use the following tools.</span></span> <span data-ttu-id="ed454-117">Ponieważ nie jest kompleksowe omówienie narzędzia, użyjemy osadzania scenariusz end-to-end i po prostu umożliwiają krótkie wprowadzenie do poszczególnych usług, i gdzie można znaleźć więcej informacji na nim.</span><span class="sxs-lookup"><span data-stu-id="ed454-117">Since it’s not comprehensive discussion on tools, I’m going to stick to the end-to-end scenario and just give you a brief intro to each, and where you can find more information on it.</span></span> 

### <a name="azure-resource-manager-templates-json"></a><span data-ttu-id="ed454-118">Szablony usługi Azure Resource Manager (JSON)</span><span class="sxs-lookup"><span data-stu-id="ed454-118">Azure Resource Manager templates (JSON)</span></span>
<span data-ttu-id="ed454-119">Za każdym razem, gdy utworzysz aplikację sieci web w usłudze Azure App Service, na przykład usługi Azure Resource Manager używa szablonu JSON utworzyć całej grupy zasobów z zasobami składnika.</span><span class="sxs-lookup"><span data-stu-id="ed454-119">Every time you create a web app in Azure App Service, for example, Azure Resource Manager uses a JSON template to create the entire resource group with the component resources.</span></span> <span data-ttu-id="ed454-120">Szablon złożonych z [portalu Azure Marketplace](/marketplace) jak [Scalable WordPress](/marketplace/partners/wordpress/scalablewordpress/) aplikacji mogą obejmować bazy danych MySQL, konta magazynu, plan usługi aplikacji, aplikacji sieci web, reguły alertów, ustawienia aplikacji, ustawienia skalowania automatycznego i inne, a te szablony są dostępne za pośrednictwem programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ed454-120">A complex template from the [Azure Marketplace](/marketplace) like the [Scalable WordPress](/marketplace/partners/wordpress/scalablewordpress/) app can include the MySQL database, storage accounts, the App Service plan, the web app itself, alert rules, app settings, autoscale settings, and more, and all these templates are available to you through PowerShell.</span></span> <span data-ttu-id="ed454-121">Aby uzyskać informacje o sposobie pobrania i zastosowania tych szablonów, zobacz [przy użyciu programu Azure PowerShell z usługą Azure Resource Manager](../powershell-azure-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="ed454-121">For information on how to download and use these templates, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md).</span></span>

<span data-ttu-id="ed454-122">Aby uzyskać więcej informacji dotyczących szablonów usługi Azure Resource Manager, zobacz [Authoring Azure Resource Manager szablonów](../azure-resource-manager/resource-group-authoring-templates.md)</span><span class="sxs-lookup"><span data-stu-id="ed454-122">For more information on the Azure Resource Manager templates, see [Authoring Azure Resource Manager Templates](../azure-resource-manager/resource-group-authoring-templates.md)</span></span>

### <a name="azure-sdk-26-for-visual-studio"></a><span data-ttu-id="ed454-123">Zestaw Azure SDK 2.6 dla programu Visual Studio</span><span class="sxs-lookup"><span data-stu-id="ed454-123">Azure SDK 2.6 for Visual Studio</span></span>
<span data-ttu-id="ed454-124">Najnowsze zestaw SDK zawiera ulepszenia obsługi szablonu usługi Resource Manager w edytorze JSON.</span><span class="sxs-lookup"><span data-stu-id="ed454-124">The newest SDK contains improvements to the Resource Manager template support in the JSON editor.</span></span> <span data-ttu-id="ed454-125">Można umożliwia szybkie tworzenie grupy zasobów szablonu od początku lub Otwórz istniejący szablon JSON (na przykład szablon pobrany galerii) do modyfikacji, wypełnić pliku parametrów, a nawet wdrożyć grupę zasobów bezpośrednio z rozwiązania do grupy zasobów platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="ed454-125">You can use this to quickly create a resource group template from scratch or open an existing JSON template (such as a downloaded gallery template) for modification, populate the parameters file, and even deploy the resource group directly from an Azure Resource Group solution.</span></span>

<span data-ttu-id="ed454-126">Aby uzyskać więcej informacji, zobacz [2.6 zestawu SDK platformy Azure dla programu Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).</span><span class="sxs-lookup"><span data-stu-id="ed454-126">For more information, see [Azure SDK 2.6 for Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).</span></span>

### <a name="azure-powershell-080-or-later"></a><span data-ttu-id="ed454-127">Program Azure PowerShell 0.8.0 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="ed454-127">Azure PowerShell 0.8.0 or later</span></span>
<span data-ttu-id="ed454-128">Począwszy od wersji 0.8.0, instalacja programu Azure PowerShell obejmuje moduł usługi Azure Resource Manager oprócz modułu platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="ed454-128">Beginning in version 0.8.0, the Azure PowerShell installation includes the Azure Resource Manager module in addition to the Azure module.</span></span> <span data-ttu-id="ed454-129">Ten nowy moduł umożliwia skryptów wdrażania grup zasobów.</span><span class="sxs-lookup"><span data-stu-id="ed454-129">This new module enables you to script the deployment of resource groups.</span></span>

<span data-ttu-id="ed454-130">Aby uzyskać więcej informacji, zobacz [przy użyciu programu Azure PowerShell z usługą Azure Resource Manager](../powershell-azure-resource-manager.md)</span><span class="sxs-lookup"><span data-stu-id="ed454-130">For more information, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md)</span></span>

### <a name="azure-resource-explorer"></a><span data-ttu-id="ed454-131">Eksplorator zasobów Azure</span><span class="sxs-lookup"><span data-stu-id="ed454-131">Azure Resource Explorer</span></span>
<span data-ttu-id="ed454-132">To [narzędzia Podgląd](https://resources.azure.com) umożliwia Eksplorowanie JSON definicje wszystkich grup zasobów w Twojej subskrypcji i pojedynczych zasobów.</span><span class="sxs-lookup"><span data-stu-id="ed454-132">This [preview tool](https://resources.azure.com) enables you to explore the JSON definitions of all the resource groups in your subscription and the individual resources.</span></span> <span data-ttu-id="ed454-133">W narzędziu można edytować JSON definicji zasobu, Usuń całej hierarchii zasobów i Utwórz nowe zasoby.</span><span class="sxs-lookup"><span data-stu-id="ed454-133">In the tool, you can edit the JSON definitions of a resource, delete an entire hierarchy of resources, and create new resources.</span></span>  <span data-ttu-id="ed454-134">Łatwo dostępne w tym narzędziu informacje są bardzo przydatne do tworzenia szablonu, ponieważ zawiera ona właściwości, które należy ustawić dla określonego typu zasobu poprawnych wartości, itp. Można również utworzyć grupy zasobów w [Azure Portal](https://portal.azure.com/), następnie sprawdź ich definicje JSON za pomocą narzędzia Eksplorator ułatwiające templatize grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="ed454-134">The information readily available in this tool is very helpful for template authoring because it shows you what properties you need to set for a particular type of resource, the correct values, etc. You can even create your resource group in the [Azure Portal](https://portal.azure.com/), then inspect its JSON definitions in the explorer tool to help you templatize the resource group.</span></span>

### <a name="deploy-to-azure-button"></a><span data-ttu-id="ed454-135">Wdrażanie na przycisku Azure</span><span class="sxs-lookup"><span data-stu-id="ed454-135">Deploy to Azure button</span></span>
<span data-ttu-id="ed454-136">Jeśli używasz usługi GitHub dla kontroli źródła, możesz umieścić [wdrażanie na przycisku Azure](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) do Twojej Plik README. MD, co umożliwia wdrożenie gotowe interfejsu użytkownika na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="ed454-136">If you use GitHub for source control, you can put a [Deploy to Azure button](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) into your README.MD, which enables a turn-key deployment UI to Azure.</span></span> <span data-ttu-id="ed454-137">Czynności można wykonać dla dowolnej aplikacji sieci web proste, można rozszerzyć tutaj, aby włączyć wdrażanie całej grupy zasobów, ustawiając plik azuredeploy.json w folderze głównym repozytorium.</span><span class="sxs-lookup"><span data-stu-id="ed454-137">While you can do this for any simple web app, you can extend this to enable deploying an entire resource group by putting an azuredeploy.json file in the repository root.</span></span> <span data-ttu-id="ed454-138">Ten plik JSON, który zawiera szablon grupy zasobów, będzie służyć za wdrażanie na przycisku Azure można utworzyć grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="ed454-138">This JSON file, which contains the resource group template, will be used by the Deploy to Azure button to create the resource group.</span></span> <span data-ttu-id="ed454-139">Na przykład zobacz [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) próbki, który będzie używany w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="ed454-139">For an example, see the [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) sample, which you will use in this tutorial.</span></span>

## <a name="get-the-sample-resource-group-template"></a><span data-ttu-id="ed454-140">Pobierz przykładowy szablon grupy zasobów</span><span class="sxs-lookup"><span data-stu-id="ed454-140">Get the sample resource group template</span></span>
<span data-ttu-id="ed454-141">Dlatego teraz, zaloguj się w prawo, aby go.</span><span class="sxs-lookup"><span data-stu-id="ed454-141">So now let’s get right to it.</span></span>

1. <span data-ttu-id="ed454-142">Przejdź do [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) przykładowej aplikacji usługi.</span><span class="sxs-lookup"><span data-stu-id="ed454-142">Navigate to the [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) App Service sample.</span></span>
2. <span data-ttu-id="ed454-143">W readme.md, kliknij przycisk **wdrażanie na platformie Azure**.</span><span class="sxs-lookup"><span data-stu-id="ed454-143">In readme.md, click **Deploy to Azure**.</span></span>
3. <span data-ttu-id="ed454-144">W przypadku podjąć w celu [wdrożyć do azure](https://deploy.azure.com) lokacji i poproszony o podanie parametrów wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="ed454-144">You’re taken to the [deploy-to-azure](https://deploy.azure.com) site and asked to input deployment parameters.</span></span> <span data-ttu-id="ed454-145">Zwróć uwagę, że większość pól są wypełniane przy użyciu nazwy repozytorium i niektórych losowe ciągów dla Ciebie.</span><span class="sxs-lookup"><span data-stu-id="ed454-145">Notice that most of the fields are populated with the repository name and some random strings for you.</span></span> <span data-ttu-id="ed454-146">Można zmienić wszystkie pola, jeśli chcesz, ale tylko elementy, które należy wprowadzić są logowania administratora serwera SQL i hasło, a następnie kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="ed454-146">You can change all the fields if you want, but the only things you have to enter are the SQL Server administrative login and the password, then click **Next**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-1-deploybuttonui.png)
4. <span data-ttu-id="ed454-147">Następnie kliknij przycisk **Wdróż** do rozpoczęcia procesu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="ed454-147">Next, click **Deploy** to start the deployment process.</span></span> <span data-ttu-id="ed454-148">Po uruchomieniu do ukończenia procesu kliknij http://todoapp*XXXX*. azurewebsites.net link, aby przejrzeć wdrożonej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ed454-148">Once the process runs to completion, click the http://todoapp*XXXX*.azurewebsites.net link to browse the deployed application.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-2-deployprogress.png)
   
   <span data-ttu-id="ed454-149">Interfejsu użytkownika może zająć nieco podczas najpierw przechodzenia do niego, ponieważ właśnie uruchamianych aplikacji, ale przekonać się, jest pełnej funkcjonalności aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ed454-149">The UI would be a little slow when you first browse to it because the apps are just starting up, but convince yourself that it’s a fully-functional application.</span></span>
5. <span data-ttu-id="ed454-150">Ponownie Wdróż na stronie kliknij **Zarządzaj** łącze, aby wyświetlić nową aplikację w portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="ed454-150">Back in the Deploy page, click the **Manage** link to see the new application in the Azure Portal.</span></span>
6. <span data-ttu-id="ed454-151">W **Essentials** listy rozwijanej, kliknij łącze grupę zasobów.</span><span class="sxs-lookup"><span data-stu-id="ed454-151">In the **Essentials** dropdown, click the resource group link.</span></span> <span data-ttu-id="ed454-152">Należy też zauważyć, że aplikacja sieci web jest już połączony z repozytorium GitHub pod **projektu zewnętrznego**.</span><span class="sxs-lookup"><span data-stu-id="ed454-152">Note also that the web app is already connected to the GitHub repository under **External Project**.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-3-portalresourcegroup.png)
7. <span data-ttu-id="ed454-153">W bloku grupy zasobów należy pamiętać, że istnieją już dwie aplikacje sieci web i jednej bazy danych SQL w grupie zasobów.</span><span class="sxs-lookup"><span data-stu-id="ed454-153">In the resource group blade, note that there are already two web apps and one SQL Database in the resource group.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-4-portalresourcegroupclicked.png)

<span data-ttu-id="ed454-154">Wszystko, który został wyświetlony w ciągu kilku minut krótkich aplikacją pełni wdrożone mikrousługi dwa z wszystkich składników, zależności, ustawienia, bazy danych i ciągłe publikowanie skonfigurowany przez automatyczne aranżacji w usłudze Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="ed454-154">Everything that you just saw in a few short minutes is a fully deployed two-microservice application, with all the components, dependencies, settings, database, and continuous publishing, set up by an automated orchestration in Azure Resource Manager.</span></span> <span data-ttu-id="ed454-155">Wszystko to zostało to zrobione przez dwie czynności:</span><span class="sxs-lookup"><span data-stu-id="ed454-155">All this was done by two things:</span></span>

* <span data-ttu-id="ed454-156">Wdrażanie na przycisku Azure</span><span class="sxs-lookup"><span data-stu-id="ed454-156">The Deploy to Azure button</span></span>
* <span data-ttu-id="ed454-157">azuredeploy.JSON w folderze głównym repozytorium</span><span class="sxs-lookup"><span data-stu-id="ed454-157">azuredeploy.json in the repo root</span></span>

<span data-ttu-id="ed454-158">Można wdrożyć tej samej aplikacji dziesiątki, setek lub tysięcy razy i mają taką samą konfigurację dokładne zawsze.</span><span class="sxs-lookup"><span data-stu-id="ed454-158">You can deploy this same application tens, hundreds, or thousands of times and have the exact same configuration every time.</span></span> <span data-ttu-id="ed454-159">Powtarzalność i przewidywalność takie podejście umożliwia wdrażanie aplikacji w dużej skali mogliby łatwo i zaufania.</span><span class="sxs-lookup"><span data-stu-id="ed454-159">The repeatability and the predictability of this approach enables you to deploy high-scale applications with ease and confidence.</span></span>

## <a name="examine-or-edit-azuredeployjson"></a><span data-ttu-id="ed454-160">Sprawdź (lub edytować) AZUREDEPLOY. JSON</span><span class="sxs-lookup"><span data-stu-id="ed454-160">Examine (or edit) AZUREDEPLOY.JSON</span></span>
<span data-ttu-id="ed454-161">Teraz Przyjrzyjmy się konfiguracji repozytorium GitHub.</span><span class="sxs-lookup"><span data-stu-id="ed454-161">Now let’s look at how the GitHub repository was set up.</span></span> <span data-ttu-id="ed454-162">Będziesz używać edytora JSON w zestawie SDK .NET usługi Azure, tak więc jeśli nie została jeszcze zainstalowana [Azure .NET SDK w wersji 2.6](/downloads/), zrób to teraz.</span><span class="sxs-lookup"><span data-stu-id="ed454-162">You will be using the JSON editor in the Azure .NET SDK, so if you haven’t already installed [Azure .NET SDK 2.6](/downloads/), do it now.</span></span>

1. <span data-ttu-id="ed454-163">Klonowanie [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) repozytorium narzędzie git ulubionych.</span><span class="sxs-lookup"><span data-stu-id="ed454-163">Clone the [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) repository using your favorite git tool.</span></span> <span data-ttu-id="ed454-164">Na poniższym zrzucie ekranu robimy to w programie Team Explorer programu Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="ed454-164">In the screenshot below, I’m doing this in the Team Explorer in Visual Studio 2013.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-1-vsclone.png)
2. <span data-ttu-id="ed454-165">W katalogu głównym repozytorium Otwórz azuredeploy.json w programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ed454-165">From the repository root, open azuredeploy.json in Visual Studio.</span></span> <span data-ttu-id="ed454-166">Jeśli nie jest widoczny w okienku Konspekt pliku JSON, musisz zainstalować zestawu SDK .NET usługi Azure.</span><span class="sxs-lookup"><span data-stu-id="ed454-166">If you don’t see the JSON Outline pane, you need to install Azure .NET SDK.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-2-vsjsoneditor.png)

<span data-ttu-id="ed454-167">Użyjemy nie opisano każdy szczegółów formatu JSON, ale [więcej zasobów](#resources) sekcja zawiera łącza do uczenia język szablonu grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="ed454-167">I’m not going to describe every detail of the JSON format, but the [More Resources](#resources) section has links for learning the resource group template language.</span></span> <span data-ttu-id="ed454-168">W tym miejscu wystarczy użyjemy do pokazania wprowadzenie interesujące funkcje, które mogą pomóc Ci w podejmowaniu szablonu niestandardowego dla wdrożenia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ed454-168">Here, I’m just going to show you the interesting features that can help you get started in making your own custom template for app deployment.</span></span>

### <a name="parameters"></a><span data-ttu-id="ed454-169">Parametry</span><span class="sxs-lookup"><span data-stu-id="ed454-169">Parameters</span></span>
<span data-ttu-id="ed454-170">Spójrz na sekcji Parametry, aby zobaczyć, że większość te parametry są co **wdrażanie na platformie Azure** przycisk monituje.</span><span class="sxs-lookup"><span data-stu-id="ed454-170">Take a look at the parameters section to see that most of these parameters are what the **Deploy to Azure** button prompts you to input.</span></span> <span data-ttu-id="ed454-171">Witryna za **wdrażanie na platformie Azure** przycisk wypełnia interfejsu użytkownika przy użyciu parametrów zdefiniowanych w azuredeploy.json danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="ed454-171">The site behind the **Deploy to Azure** button populates the input UI using the parameters defined in azuredeploy.json.</span></span> <span data-ttu-id="ed454-172">Te parametry są używane w definicjach zasobów, takich jak nazwy zasobów, wartości właściwości, itd.</span><span class="sxs-lookup"><span data-stu-id="ed454-172">These parameters are used throughout the resource definitions, such as resource names, property values, etc.</span></span>

### <a name="resources"></a><span data-ttu-id="ed454-173">Zasoby</span><span class="sxs-lookup"><span data-stu-id="ed454-173">Resources</span></span>
<span data-ttu-id="ed454-174">W węźle zasobów widać, że są zdefiniowane 4 zasobów najwyższego poziomu, w tym wystąpienia programu SQL Server, plan usługi aplikacji i dwie aplikacje sieci web.</span><span class="sxs-lookup"><span data-stu-id="ed454-174">In the resources node, you can see that 4 top-level resources are defined, including a SQL Server instance, an App Service plan, and two web apps.</span></span> 

#### <a name="app-service-plan"></a><span data-ttu-id="ed454-175">Plan usługi App Service</span><span class="sxs-lookup"><span data-stu-id="ed454-175">App Service plan</span></span>
<span data-ttu-id="ed454-176">Zacznijmy od prostego zasobów poziomu głównego, w formacie JSON.</span><span class="sxs-lookup"><span data-stu-id="ed454-176">Let’s start with a simple root-level resource in the JSON.</span></span> <span data-ttu-id="ed454-177">W konspekt pliku JSON, kliknij plan usługi aplikacji o nazwie **[hostingPlanName]** zaznacz odpowiedni kod JSON.</span><span class="sxs-lookup"><span data-stu-id="ed454-177">In the JSON Outline, click the App Service plan named **[hostingPlanName]** to highlight the corresponding JSON code.</span></span> 

![](./media/app-service-deploy-complex-application-predictably/examinejson-3-appserviceplan.png)

<span data-ttu-id="ed454-178">Należy pamiętać, że `type` element określa parametry dla planu usługi App Service (została wywołana farmy serwerów długie, długi czas temu) i inne elementy i właściwości są wypełniane przy użyciu parametrów zdefiniowanych w pliku JSON, a ten zasób nie zawiera żadnych zagnieżdżonych zasobów.</span><span class="sxs-lookup"><span data-stu-id="ed454-178">Note that the `type` element specifies the string for an App Service plan (it was called a server farm a long, long time ago), and other elements and properties are filled in using the parameters defined in the JSON file, and this resource doesn’t have any nested resources.</span></span>

> [!NOTE]
> <span data-ttu-id="ed454-179">Należy zauważyć, że wartość `apiVersion` informuje Azure, która wersja interfejsu API REST do użycia JSON definicji zasobu z, a może mieć wpływ na sposób zasób powinien być sformatowany wewnątrz `{}`.</span><span class="sxs-lookup"><span data-stu-id="ed454-179">Note also that the value of `apiVersion` tells Azure which version of the REST API to use the JSON resource definition with, and it can affect how the resource should be formatted inside the `{}`.</span></span> 
> 
> 

#### <a name="sql-server"></a><span data-ttu-id="ed454-180">Oprogramowanie SQL Server</span><span class="sxs-lookup"><span data-stu-id="ed454-180">SQL Server</span></span>
<span data-ttu-id="ed454-181">Następnie kliknij przycisk na zasób programu SQL Server o nazwie **SQLServer** w konspekt pliku JSON.</span><span class="sxs-lookup"><span data-stu-id="ed454-181">Next, click on the SQL Server resource named **SQLServer** in the JSON Outline.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-4-sqlserver.png)

<span data-ttu-id="ed454-182">Należy zwrócić uwagę na poniższe kwestie wyróżniony kod JSON:</span><span class="sxs-lookup"><span data-stu-id="ed454-182">Note the following about the highlighted JSON code:</span></span>

* <span data-ttu-id="ed454-183">Użycie parametrów temu utworzone zasoby są o nazwie i skonfigurowane w sposób umożliwiający ich zgodne ze sobą.</span><span class="sxs-lookup"><span data-stu-id="ed454-183">The use of parameters ensures that the created resources are named and configured in a way that makes them consistent with one another.</span></span>
* <span data-ttu-id="ed454-184">Zasób SQLServer ma dwa zagnieżdżonych zasobów, każdy ma inną wartość dla `type`.</span><span class="sxs-lookup"><span data-stu-id="ed454-184">The SQLServer resource has two nested resources, each has a different value for `type`.</span></span>
* <span data-ttu-id="ed454-185">Zagnieżdżonych zasobów wewnątrz `“resources”: […]`, gdzie są zdefiniowane bazy danych i jego reguły zapory, mieć `dependsOn` element, który określa identyfikator zasobu zasobu SQLServer głównego poziomu.</span><span class="sxs-lookup"><span data-stu-id="ed454-185">The nested resources inside `“resources”: […]`, where the database and the firewall rules are defined, have a `dependsOn` element that specifies the resource ID of the root-level SQLServer resource.</span></span> <span data-ttu-id="ed454-186">Ta wartość informuje usługi Azure Resource Manager "przed utworzeniem tego zasobu, który innego zasobu musi już istnieć; i innych zasobu jest zdefiniowany w szablonie, następnie co najpierw utworzyć".</span><span class="sxs-lookup"><span data-stu-id="ed454-186">This tells Azure Resource Manager, “before you create this resource, that other resource must already exist; and if that other resource is defined in the template, then create that one first”.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="ed454-187">Aby uzyskać szczegółowe informacje dotyczące sposobu używania `resourceId()` funkcji, zobacz [funkcje szablonów usługi Azure Resource Manager](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid).</span><span class="sxs-lookup"><span data-stu-id="ed454-187">For detailed information on how to use the `resourceId()` function, see [Azure Resource Manager Template Functions](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid).</span></span>
  > 
  > 
* <span data-ttu-id="ed454-188">Efekt `dependsOn` element jest, że usługi Azure Resource Manager może znać zasobów, do których można tworzyć równolegle i które zasoby muszą być tworzone po kolei.</span><span class="sxs-lookup"><span data-stu-id="ed454-188">The effect of the `dependsOn` element is that Azure Resource Manager can know which resources can be created in parallel and which resources must be created sequentially.</span></span> 

#### <a name="web-app"></a><span data-ttu-id="ed454-189">Aplikacja internetowa</span><span class="sxs-lookup"><span data-stu-id="ed454-189">Web app</span></span>
<span data-ttu-id="ed454-190">Teraz Przyjrzyjmy się rzeczywista aplikacji sieci web, które są bardziej skomplikowane.</span><span class="sxs-lookup"><span data-stu-id="ed454-190">Now, let’s move on to the actual web apps themselves, which are more complicated.</span></span> <span data-ttu-id="ed454-191">Kliknij aplikację sieci web [variables('apiSiteName')] w konspekt pliku JSON, aby wyróżnić jego kod JSON.</span><span class="sxs-lookup"><span data-stu-id="ed454-191">Click the [variables(‘apiSiteName’)] web app in the JSON Outline to highlight its JSON code.</span></span> <span data-ttu-id="ed454-192">Można zauważyć, że elementy stają się coraz bardziej interesujące.</span><span class="sxs-lookup"><span data-stu-id="ed454-192">You’ll notice that things are getting much more interesting.</span></span> <span data-ttu-id="ed454-193">W tym celu I będzie porozmawiać na temat funkcji:</span><span class="sxs-lookup"><span data-stu-id="ed454-193">For this purpose, I’ll talk about the features one by one:</span></span>

##### <a name="root-resource"></a><span data-ttu-id="ed454-194">Zasób katalogu głównego</span><span class="sxs-lookup"><span data-stu-id="ed454-194">Root resource</span></span>
<span data-ttu-id="ed454-195">Aplikacja sieci web jest zależny od dwóch różnych zasobów.</span><span class="sxs-lookup"><span data-stu-id="ed454-195">The web app depends on two different resources.</span></span> <span data-ttu-id="ed454-196">Oznacza to, usługi Azure Resource Manager utworzy aplikację sieci web tylko wtedy, gdy są tworzone zarówno plan usługi aplikacji, jak i wystąpienie programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ed454-196">This means that Azure Resource Manager will create the web app only after both the App Service plan and the SQL Server instance are created.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-5-webapproot.png)

##### <a name="app-settings"></a><span data-ttu-id="ed454-197">Ustawienia aplikacji</span><span class="sxs-lookup"><span data-stu-id="ed454-197">App settings</span></span>
<span data-ttu-id="ed454-198">Ustawienia aplikacji są także definiowane jako zagnieżdżonych zasobów.</span><span class="sxs-lookup"><span data-stu-id="ed454-198">The app settings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-6-webappsettings.png)

<span data-ttu-id="ed454-199">W `properties` elementu `config/appsettings`, mają dwa ustawienia aplikacji w formacie `“<name>” : “<value>”`.</span><span class="sxs-lookup"><span data-stu-id="ed454-199">In the `properties` element for `config/appsettings`, you have two app settings in the format `“<name>” : “<value>”`.</span></span>

* <span data-ttu-id="ed454-200">`PROJECT`jest [ustawienie KUDU](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) , który zawiadamia wdrożenia usługi Azure projektu do użycia w rozwiązaniu Visual Studio wielu projektów.</span><span class="sxs-lookup"><span data-stu-id="ed454-200">`PROJECT` is a [KUDU setting](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) that tells Azure deployment which project to use in a multi-project Visual Studio solution.</span></span> <span data-ttu-id="ed454-201">I wyświetli później, jak jest skonfigurowany do kontroli źródła, ale ponieważ jest kod ToDoApp w rozwiązaniu Visual Studio wielu projektów, potrzebujemy to ustawienie.</span><span class="sxs-lookup"><span data-stu-id="ed454-201">I will show you later how source control is configured, but since the ToDoApp code is in a multi-project Visual Studio solution, we need this setting.</span></span>
* <span data-ttu-id="ed454-202">`clientUrl`jest używany po prostu aplikacji ustawienie kodu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ed454-202">`clientUrl` is simply an app setting that the application code uses.</span></span>

##### <a name="connection-strings"></a><span data-ttu-id="ed454-203">Parametry połączeń</span><span class="sxs-lookup"><span data-stu-id="ed454-203">Connection strings</span></span>
<span data-ttu-id="ed454-204">Parametry połączenia są także definiowane jako zagnieżdżonych zasobów.</span><span class="sxs-lookup"><span data-stu-id="ed454-204">The connection strings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-7-webappconnstr.png)

<span data-ttu-id="ed454-205">W `properties` elementu `config/connectionstrings`, każdy ciąg połączenia jest również zdefiniowany jako pary nazwa: wartość w określonym formacie `“<name>” : {“value”: “…”, “type”: “…”}`.</span><span class="sxs-lookup"><span data-stu-id="ed454-205">In the `properties` element for `config/connectionstrings`, each connection string is also defined as a name:value pair, with the specific format of `“<name>” : {“value”: “…”, “type”: “…”}`.</span></span> <span data-ttu-id="ed454-206">Aby uzyskać `type` elementu, możliwe wartości to `MySql`, `SQLServer`, `SQLAzure`, i `Custom`.</span><span class="sxs-lookup"><span data-stu-id="ed454-206">For the `type` element, possible values are `MySql`, `SQLServer`, `SQLAzure`, and `Custom`.</span></span>

> [!TIP]
> <span data-ttu-id="ed454-207">Ostateczne listę typów ciąg połączenia, uruchom następujące polecenie w programie Azure PowerShell: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span><span class="sxs-lookup"><span data-stu-id="ed454-207">For a definitive list of the connection string types, run the following command in Azure PowerShell: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span></span>
> 
> 

##### <a name="source-control"></a><span data-ttu-id="ed454-208">Kontrola źródła</span><span class="sxs-lookup"><span data-stu-id="ed454-208">Source control</span></span>
<span data-ttu-id="ed454-209">Ustawienia kontroli źródła są także definiowane jako zagnieżdżonych zasobów.</span><span class="sxs-lookup"><span data-stu-id="ed454-209">The source control settings are also defined as a nested resource.</span></span> <span data-ttu-id="ed454-210">Usługa Azure Resource Manager używa tego zasobu można skonfigurować publikowanie ciągłego (zobacz zastrzeżenie: na `IsManualIntegration` później), a także, aby rozpocząć poza wdrażania kodu aplikacji automatycznie podczas przetwarzania pliku JSON.</span><span class="sxs-lookup"><span data-stu-id="ed454-210">Azure Resource Manager uses this resource to configure continuous publishing (see caveat on `IsManualIntegration` later) and also to kick off the deployment of application code automatically during the processing of the JSON file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-8-webappsourcecontrol.png)

<span data-ttu-id="ed454-211">`RepoUrl`i `branch` powinny być bardzo intuicyjne i powinny wskazywać repozytorium Git i nazwę gałęzi do opublikowania z.</span><span class="sxs-lookup"><span data-stu-id="ed454-211">`RepoUrl` and `branch` should be pretty intuitive and should point to the Git repository and the name of the branch to publish from.</span></span> <span data-ttu-id="ed454-212">Ponownie są one zdefiniowane przez parametry wejściowe.</span><span class="sxs-lookup"><span data-stu-id="ed454-212">Again, these are defined by input parameters.</span></span> 

<span data-ttu-id="ed454-213">Należy zwrócić uwagę w `dependsOn` element, który oprócz zasobów aplikacji sieci web, `sourcecontrols/web` zależy również od `config/appsettings` i `config/connectionstrings`.</span><span class="sxs-lookup"><span data-stu-id="ed454-213">Note in the `dependsOn` element that, in addition to the web app resource itself, `sourcecontrols/web` also depends on `config/appsettings` and `config/connectionstrings`.</span></span> <span data-ttu-id="ed454-214">Jest to spowodowane po `sourcecontrols/web` jest skonfigurowany, proces wdrożenia usługi Azure automatycznie podejmie próbę wdrożenia, skompilować i uruchomić kod aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ed454-214">This is because once `sourcecontrols/web` is configured, the Azure deployment process will automatically attempt to deploy, build, and start the application code.</span></span> <span data-ttu-id="ed454-215">W związku z tym Wstawianie tę zależność pomaga upewnić się, że aplikacja ma dostęp do ustawień wymaganych aplikacji i parametry połączenia przed uruchomieniem kodu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ed454-215">Therefore, inserting this dependency helps you make sure that the application has access to the required app settings and connection strings before the application code is run.</span></span> 

> [!NOTE]
> <span data-ttu-id="ed454-216">Należy zauważyć, że `IsManualIntegration` ma ustawioną wartość `true`.</span><span class="sxs-lookup"><span data-stu-id="ed454-216">Note also that `IsManualIntegration` is set to `true`.</span></span> <span data-ttu-id="ed454-217">Ta właściwość jest niezbędne w tym samouczku, ponieważ nie ma faktycznego repozytorium GitHub i w związku z tym nie może faktycznie Przyznaj uprawnienie do platformy Azure, aby skonfigurować publikowanie ciągłego z [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) (tj.)</span><span class="sxs-lookup"><span data-stu-id="ed454-217">This property is necessary in this tutorial because you do not actually own the GitHub repository, and thus cannot actually grant permission to Azure to configure continuous publishing from [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) (i.e.</span></span> <span data-ttu-id="ed454-218">trybie Push aktualizacje automatyczne repozytorium na platformie Azure).</span><span class="sxs-lookup"><span data-stu-id="ed454-218">push automatic repository updates to Azure).</span></span> <span data-ttu-id="ed454-219">Można użyć wartości domyślnej `false` dla określonego repozytorium tylko wtedy, gdy skonfigurowano właściciela GitHub poświadczeń w [portalu Azure](https://portal.azure.com/) przed.</span><span class="sxs-lookup"><span data-stu-id="ed454-219">You can use the default value `false` for the specified repository only if you have configured the owner’s GitHub credentials in the [Azure portal](https://portal.azure.com/) before.</span></span> <span data-ttu-id="ed454-220">Innymi słowy Jeśli zdefiniowano kontroli źródła do usługi GitHub lub BitBucket dla wszystkich aplikacji w [Azure Portal](https://portal.azure.com/) wcześniej przy użyciu użytkownika poświadczeń, Azure będą Pamiętaj poświadczenia i ich używać w przyszłości wdrożyć dowolną aplikację z usługi GitHub lub BitBucket.</span><span class="sxs-lookup"><span data-stu-id="ed454-220">In other words, if you have set up source control to GitHub or BitBucket for any app in the [Azure Portal](https://portal.azure.com/) previously, using your user credentials, then Azure will remember the credentials and use them whenever you deploy any app from GitHub or BitBucket in the future.</span></span> <span data-ttu-id="ed454-221">Jednak jeśli użytkownik nie zostało to jeszcze zrobione, wdrożenia szablonu JSON zakończy się niepowodzeniem, gdy usługi Azure Resource Manager spróbuje skonfigurować ustawienia kontroli źródła dla aplikacji sieci web, ponieważ nie można zalogować do usługi GitHub lub BitBucket, z poświadczeniami właściciela repozytorium.</span><span class="sxs-lookup"><span data-stu-id="ed454-221">However, if you haven’t done this already, deployment of the JSON template will fail when Azure Resource Manager tries to configure the web app’s source control settings because it cannot log into GitHub or BitBucket with the repository owner’s credentials.</span></span>
> 
> 

## <a name="compare-the-json-template-with-deployed-resource-group"></a><span data-ttu-id="ed454-222">Porównanie szablonu JSON z grupą wdrożonych zasobów</span><span class="sxs-lookup"><span data-stu-id="ed454-222">Compare the JSON template with deployed resource group</span></span>
<span data-ttu-id="ed454-223">W tym miejscu, można przejść przez bloki wszystkich aplikacji sieci web w [Azure Portal](https://portal.azure.com/), ale innego narzędzia, która po prostu jako przydatne, jeśli nie jest więcej.</span><span class="sxs-lookup"><span data-stu-id="ed454-223">Here, you can go through all the web app’s blades in the [Azure Portal](https://portal.azure.com/), but there’s another tool that’s just as useful, if not more.</span></span> <span data-ttu-id="ed454-224">Przejdź do [Eksploratora zasobów Azure](https://resources.azure.com) Podgląd narzędzia, które zapewnia JSON reprezentację wszystkich grup zasobów w subskrypcji, ponieważ faktycznie istnieją one w wewnętrznej bazy danych Azure.</span><span class="sxs-lookup"><span data-stu-id="ed454-224">Go to the [Azure Resource Explorer](https://resources.azure.com) preview tool, which gives you a JSON representation of all the resource groups in your subscriptions, as they actually exist in the Azure backend.</span></span> <span data-ttu-id="ed454-225">Można również sprawdzić, jak odpowiada hierarchii JSON grupy zasobów na platformie Azure w hierarchii w pliku szablonu, który jest używany do jej utworzenia.</span><span class="sxs-lookup"><span data-stu-id="ed454-225">You can also see how the resource group’s JSON hierarchy in Azure corresponds with the hierarchy in the template file that’s used to create it.</span></span>

<span data-ttu-id="ed454-226">Na przykład po przejściu do [Eksploratora zasobów Azure](https://resources.azure.com) narzędzia i rozwiń węzły w Eksploratorze, widać, grupy zasobów i zasoby poziomu głównego, które są zbierane w ich typów odpowiednich zasobów.</span><span class="sxs-lookup"><span data-stu-id="ed454-226">For example, when I go to the [Azure Resource Explorer](https://resources.azure.com) tool and expand the nodes in the explorer, I can see the resource group and the root-level resources that are collected under their respective resource types.</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-1-treeview.png)

<span data-ttu-id="ed454-227">W przypadku przechodzenia do aplikacji sieci web, można wyświetlić szczegóły konfiguracji aplikacji sieci web podobne do poniższych zrzut ekranu:</span><span class="sxs-lookup"><span data-stu-id="ed454-227">If you drill down to a web app, you should be able to see web app configuration details similar to the below screenshot:</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-2-jsonview.png)

<span data-ttu-id="ed454-228">Ponownie zagnieżdżonych zasobów należy skonfigurować hierarchię bardzo podobne do pliku szablonu JSON i powinna zostać wyświetlona ustawienia aplikacji, parametry połączenia, itp., prawidłowo odzwierciedlane w okienku JSON.</span><span class="sxs-lookup"><span data-stu-id="ed454-228">Again, the nested resources should have a hierarchy very similar to those in your JSON template file, and you should see the app settings, connection strings, etc., properly reflected in the JSON pane.</span></span> <span data-ttu-id="ed454-229">Brak tutaj ustawień może oznaczać problem z plikiem JSON i ułatwiają rozwiązywanie problemów z pliku szablonu JSON.</span><span class="sxs-lookup"><span data-stu-id="ed454-229">The absence of settings here may indicate an issue with your JSON file and can help you troubleshoot your JSON template file.</span></span>

## <a name="deploy-the-resource-group-template-yourself"></a><span data-ttu-id="ed454-230">Wdrażanie szablonu grupy zasobów, samodzielnie</span><span class="sxs-lookup"><span data-stu-id="ed454-230">Deploy the resource group template yourself</span></span>
<span data-ttu-id="ed454-231">**Wdrażanie na platformie Azure** przycisk stanowi doskonałe rozwiązanie, ale umożliwia wdrażanie szablonu grupy zasobów w azuredeploy.json tylko wtedy, gdy azuredeploy.json ma już przypisany do usługi GitHub.</span><span class="sxs-lookup"><span data-stu-id="ed454-231">The **Deploy to Azure** button is great, but it allows you to deploy the resource group template in azuredeploy.json only if you have already pushed azuredeploy.json to GitHub.</span></span> <span data-ttu-id="ed454-232">Zestaw .NET SDK usługi Azure udostępnia narzędzia do wdrożenia dowolnego pliku szablonu JSON bezpośrednio z komputera lokalnego.</span><span class="sxs-lookup"><span data-stu-id="ed454-232">The Azure .NET SDK also provides the tools for you to deploy any JSON template file directly from your local machine.</span></span> <span data-ttu-id="ed454-233">Aby to zrobić, wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="ed454-233">To do this, follow the steps below:</span></span>

1. <span data-ttu-id="ed454-234">W programie Visual Studio, kliknij przycisk **pliku** > **nowy** > **projektu**.</span><span class="sxs-lookup"><span data-stu-id="ed454-234">In Visual Studio, click **File** > **New** > **Project**.</span></span>
2. <span data-ttu-id="ed454-235">Kliknij przycisk **Visual C#** > **chmury** > **grupy zasobów platformy Azure**, następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="ed454-235">Click **Visual C#** > **Cloud** > **Azure Resource Group**, then click **OK**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-1-vsproject.png)
3. <span data-ttu-id="ed454-236">W **wybierz szablon Azure**, wybierz pozycję **pusty szablon** i kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="ed454-236">In **Select Azure Template**, select **Blank Template** and click **OK**.</span></span>
4. <span data-ttu-id="ed454-237">Przeciągnij azuredeploy.json w **szablonu** folderu nowego projektu.</span><span class="sxs-lookup"><span data-stu-id="ed454-237">Drag azuredeploy.json into the **Template** folder of your new project.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-2-copyjson.png)
5. <span data-ttu-id="ed454-238">W Eksploratorze rozwiązań Otwórz azuredeploy.json skopiowane.</span><span class="sxs-lookup"><span data-stu-id="ed454-238">From Solution Explorer, open the copied azuredeploy.json.</span></span>
6. <span data-ttu-id="ed454-239">Tylko do celów demonstracyjnych, możemy dodać niektóre standardowe zasoby szczegółowe informacje o aplikacji do naszej pliku JSON, klikając **dodawania zasobów**.</span><span class="sxs-lookup"><span data-stu-id="ed454-239">Just for the sake of the demonstration, let’s add some standard Application Insight resources to our JSON file, by clicking **Add Resource**.</span></span> <span data-ttu-id="ed454-240">Jeśli interesuje Cię tylko wdrażanie pliku JSON, przejdź do procedury wdrażania.</span><span class="sxs-lookup"><span data-stu-id="ed454-240">If you’re just interested in deploying the JSON file, skip to the deploy steps.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-3-newresource.png)
7. <span data-ttu-id="ed454-241">Wybierz **usługi Application Insights dla aplikacji sieci Web**, następnie upewnij się, istniejącą aplikację sieci web i plan usługi aplikacji jest zaznaczone, a następnie kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="ed454-241">Select **Application Insights for Web Apps**, then make sure an existing App Service plan and web app is selected, and then click **Add**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-4-newappinsight.png)
   
   <span data-ttu-id="ed454-242">Teraz będzie można wyświetlić kilka nowych zasobów, który, zależnie od zasobu oraz jakie operacje, są zależne od planu usługi aplikacji lub aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="ed454-242">You’ll now be able to see several new resources that, depending on the resource and what it does, have dependencies on either the App Service plan or the web app.</span></span> <span data-ttu-id="ed454-243">Te zasoby nie są włączone przez ich istniejącej definicji, a użytkownik chce zmienić.</span><span class="sxs-lookup"><span data-stu-id="ed454-243">These resources are not enabled by their existing definition and you’re going to change that.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-5-appinsightresources.png)
8. <span data-ttu-id="ed454-244">W konspekt pliku JSON, kliknij przycisk **appInsights skalowania automatycznego** aby wyróżnić jego kod JSON.</span><span class="sxs-lookup"><span data-stu-id="ed454-244">In the JSON Outline, click **appInsights AutoScale** to highlight its JSON code.</span></span> <span data-ttu-id="ed454-245">Jest to ustawienie skalowania dla planu usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ed454-245">This is the scaling setting for your App Service plan.</span></span>
9. <span data-ttu-id="ed454-246">Wyróżniony kod JSON, odszukaj `location` i `enabled` właściwości i ustaw je, jak pokazano poniżej.</span><span class="sxs-lookup"><span data-stu-id="ed454-246">In the highlighted JSON code, locate the `location` and `enabled` properties and set them as shown below.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-6-autoscalesettings.png)
10. <span data-ttu-id="ed454-247">W konspekt pliku JSON, kliknij przycisk **CPUHigh appInsights** aby wyróżnić jego kod JSON.</span><span class="sxs-lookup"><span data-stu-id="ed454-247">In the JSON Outline, click **CPUHigh appInsights** to highlight its JSON code.</span></span> <span data-ttu-id="ed454-248">To jest alert.</span><span class="sxs-lookup"><span data-stu-id="ed454-248">This is an alert.</span></span>
11. <span data-ttu-id="ed454-249">Zlokalizuj `location` i `isEnabled` właściwości i ustaw je, jak pokazano poniżej.</span><span class="sxs-lookup"><span data-stu-id="ed454-249">Locate the `location` and `isEnabled` properties and set them as shown below.</span></span> <span data-ttu-id="ed454-250">Wykonaj te same innych alertów trzy (purpurowy bulw).</span><span class="sxs-lookup"><span data-stu-id="ed454-250">Do the same for the other three alerts (purple bulbs).</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-7-alerts.png)
12. <span data-ttu-id="ed454-251">Możesz teraz gotowe do wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="ed454-251">You’re now ready to deploy.</span></span> <span data-ttu-id="ed454-252">Kliknij prawym przyciskiem myszy projekt i wybierz **Wdróż** > **nowe wdrożenie**.</span><span class="sxs-lookup"><span data-stu-id="ed454-252">Right-click the project and select **Deploy** > **New Deployment**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-8-newdeployment.png)
13. <span data-ttu-id="ed454-253">Zaloguj się do konta platformy Azure, jeśli jeszcze tego nie zrobiono.</span><span class="sxs-lookup"><span data-stu-id="ed454-253">Log into your Azure account if you haven’t already done so.</span></span>
14. <span data-ttu-id="ed454-254">Wybierz istniejącą grupę zasobów w ramach subskrypcji lub Utwórz nowe wybierz jedną, **azuredeploy.json**, a następnie kliknij przycisk **Edytuj parametry**.</span><span class="sxs-lookup"><span data-stu-id="ed454-254">Select an existing resource group in your subscription or create a new one, select **azuredeploy.json**, and then click **Edit Parameters**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-9-deployconfig.png)
    
    <span data-ttu-id="ed454-255">Można teraz edytować wszystkich parametrów zdefiniowanych w pliku szablonu nieuprzywilejowany tabeli.</span><span class="sxs-lookup"><span data-stu-id="ed454-255">You’ll now be able to edit all the parameters defined in the template file in a nice table.</span></span> <span data-ttu-id="ed454-256">Parametry, które definiują ustawienia domyślne mają już wartości domyślne, a parametry określające listę dozwolonych wartości będą wyświetlane jako listę rozwijaną.</span><span class="sxs-lookup"><span data-stu-id="ed454-256">Parameters that define defaults will already have their default values, and parameters that define a list of allowed values will be shown as dropdowns.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-10-parametereditor.png)
15. <span data-ttu-id="ed454-257">Wypełnij puste parametry, a następnie użyj [adres repozytorium GitHub ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) w **repoUrl**.</span><span class="sxs-lookup"><span data-stu-id="ed454-257">Fill in all the empty parameters, and use the [GitHub repo address for ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) in **repoUrl**.</span></span> <span data-ttu-id="ed454-258">Następnie kliknij przycisk **zapisać**.</span><span class="sxs-lookup"><span data-stu-id="ed454-258">Then, click **Save**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-11-parametereditorfilled.png)
    
    > [!NOTE]
    > <span data-ttu-id="ed454-259">Funkcję skalowania automatycznego jest funkcją oferowanych w **standardowe** warstwy lub nowszej i poziomu planu alerty są oferowane w funkcji **podstawowe** warstwę lub nowszym, musisz ustawić **jednostki sku** parametr **standardowe** lub **Premium** aby zobaczyć wszystkie nowe usługi App Insights zasobami światła w górę.</span><span class="sxs-lookup"><span data-stu-id="ed454-259">Autoscaling is a feature offered in **Standard** tier or higher, and plan-level alerts are features offered in **Basic** tier or higher, you’ll need to set the **sku** parameter to **Standard** or **Premium** in order to see all your new App Insights resources light up.</span></span>
    > 
    > 
16. <span data-ttu-id="ed454-260">Kliknij przycisk **wdrażanie**.</span><span class="sxs-lookup"><span data-stu-id="ed454-260">Click **Deploy**.</span></span> <span data-ttu-id="ed454-261">W przypadku wybrania **zapisywanie haseł**, hasło zostanie zapisane w pliku parametrów **w postaci zwykłego tekstu**.</span><span class="sxs-lookup"><span data-stu-id="ed454-261">If you selected **Save passwords**, the password will be saved in the parameter file **in plain text**.</span></span> <span data-ttu-id="ed454-262">W przeciwnym razie zostanie wyświetlony monit wprowadzanie hasła bazy danych podczas procesu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="ed454-262">Otherwise, you’ll be asked to input the database password during the deployment process.</span></span>

<span data-ttu-id="ed454-263">Gotowe.</span><span class="sxs-lookup"><span data-stu-id="ed454-263">That’s it!</span></span> <span data-ttu-id="ed454-264">Teraz wystarczy przejść do [Azure Portal](https://portal.azure.com/) i [Eksploratora zasobów Azure](https://resources.azure.com) narzędzia, aby zobaczyć nowe alerty i ustawienia skalowania automatycznego dodany do Twojego JSON wdrożonych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ed454-264">Now you just need to go to the [Azure Portal](https://portal.azure.com/) and the [Azure Resource Explorer](https://resources.azure.com) tool to see the new alerts and autoscale settings added to your JSON deployed application.</span></span>

<span data-ttu-id="ed454-265">Wszystkie czynności w tej sekcji głównie wykonać następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="ed454-265">Your steps in this section mainly accomplished the following:</span></span>

1. <span data-ttu-id="ed454-266">Przygotowane pliku szablonu</span><span class="sxs-lookup"><span data-stu-id="ed454-266">Prepared the template file</span></span>
2. <span data-ttu-id="ed454-267">Utworzony plik parametru z pliku szablonu</span><span class="sxs-lookup"><span data-stu-id="ed454-267">Created a parameter file to go with the template file</span></span>
3. <span data-ttu-id="ed454-268">Wdrożony plik szablonu z pliku parametrów</span><span class="sxs-lookup"><span data-stu-id="ed454-268">Deployed the template file with the parameter file</span></span>

<span data-ttu-id="ed454-269">Ostatnim krokiem łatwo odbywa się przy użyciu polecenia cmdlet programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ed454-269">The last step is easily done by a PowerShell cmdlet.</span></span> <span data-ttu-id="ed454-270">Aby zobaczyć, co program Visual Studio została po jej wdrożeniu aplikacji, otwórz Scripts\Deploy AzureResourceGroup.ps1.</span><span class="sxs-lookup"><span data-stu-id="ed454-270">To see what Visual Studio did when it deployed your application, open Scripts\Deploy-AzureResourceGroup.ps1.</span></span> <span data-ttu-id="ed454-271">Wiele kodu istnieje, ale użyjemy po prostu zaznacz odpowiednie kodu, należy wdrożyć plik szablonu z pliku parametrów.</span><span class="sxs-lookup"><span data-stu-id="ed454-271">There’s a lot of code there, but I’m just going to highlight all the pertinent code you need to deploy the template file with the parameter file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/deploy-12-powershellsnippet.png)

<span data-ttu-id="ed454-272">Polecenia cmdlet ostatniego `New-AzureResourceGroup`, który faktycznie wykonuje akcję.</span><span class="sxs-lookup"><span data-stu-id="ed454-272">The last cmdlet, `New-AzureResourceGroup`, is the one that actually performs the action.</span></span> <span data-ttu-id="ed454-273">Powinno to pokazują użytkownikowi, że za pomocą narzędzi, jest stosunkowo prosta do wdrożenia aplikacji w chmurze przewidywalnego.</span><span class="sxs-lookup"><span data-stu-id="ed454-273">All this should demonstrate to you that, with the help of tooling, it is relatively straightforward to deploy your cloud application predictably.</span></span> <span data-ttu-id="ed454-274">Przy każdym uruchomieniu polecenia cmdlet na samym szablonie z tego samego pliku parametrów użytkownik chce uzyskać ten sam rezultat.</span><span class="sxs-lookup"><span data-stu-id="ed454-274">Every time you run the cmdlet on the same template with the same parameter file, you’re going to get the same result.</span></span>

## <a name="summary"></a><span data-ttu-id="ed454-275">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="ed454-275">Summary</span></span>
<span data-ttu-id="ed454-276">W DevOps powtarzalność i przewidywalności są klucze do dowolnego pomyślne wdrożenie aplikacji wysokiej skali składa się z mikrousług.</span><span class="sxs-lookup"><span data-stu-id="ed454-276">In DevOps, repeatability and predictability are keys to any successful deployment of a high-scale application composed of microservices.</span></span> <span data-ttu-id="ed454-277">W tym samouczku wdrożono aplikację mikrousługi dwa na platformie Azure jako pojedyncza grupa zasobów przy użyciu szablonu usługi Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="ed454-277">In this tutorial, you have deployed a two-microservice application to Azure as a single resource group using the Azure Resource Manager template.</span></span> <span data-ttu-id="ed454-278">Mamy nadzieję, że jej przyznał Ci potrzebne, aby można było uruchomić konwertowania aplikacji na platformie Azure do szablonu i można udostępnić i wdróż je przewidywalnego wiedzy.</span><span class="sxs-lookup"><span data-stu-id="ed454-278">Hopefully, it has given you the knowledge you need in order to start converting your application in Azure into a template and can provision and deploy it predictably.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="ed454-279">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="ed454-279">Next Steps</span></span>
<span data-ttu-id="ed454-280">Dowiedz się, jak [zastosowania metody agile i stale opublikować aplikację mikrousług z łatwością](app-service-agile-software-development.md) i zaawansowane techniki wdrażania, takie jak [flighting wdrożenia](app-service-web-test-in-production-controlled-test-flight.md) łatwe.</span><span class="sxs-lookup"><span data-stu-id="ed454-280">Find out how to [apply agile methodologies and continuously publish your microservices application with ease](app-service-agile-software-development.md) and advanced deployment techniques like [flighting deployment](app-service-web-test-in-production-controlled-test-flight.md) easily.</span></span>

<a name="resources"></a>

## <a name="more-resources"></a><span data-ttu-id="ed454-281">Więcej zasobów</span><span class="sxs-lookup"><span data-stu-id="ed454-281">More resources</span></span>
* [<span data-ttu-id="ed454-282">Język szablonu usługi Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="ed454-282">Azure Resource Manager Template Language</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="ed454-283">Tworzenie szablonów usługi Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="ed454-283">Authoring Azure Resource Manager Templates</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="ed454-284">Azure Functions szablonu usługi Resource Manager</span><span class="sxs-lookup"><span data-stu-id="ed454-284">Azure Resource Manager Template Functions</span></span>](../azure-resource-manager/resource-group-template-functions.md)
* [<span data-ttu-id="ed454-285">Wdrażanie aplikacji przy użyciu szablonu Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="ed454-285">Deploy an application with Azure Resource Manager template</span></span>](../azure-resource-manager/resource-group-template-deploy.md)
* [<span data-ttu-id="ed454-286">Używanie programu Azure PowerShell z usługą Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="ed454-286">Using Azure PowerShell with Azure Resource Manager</span></span>](../azure-resource-manager/powershell-azure-resource-manager.md)
* [<span data-ttu-id="ed454-287">Rozwiązywanie problemów z wdrożeniami grup zasobów na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="ed454-287">Troubleshooting Resource Group Deployments in Azure</span></span>](../azure-resource-manager/resource-manager-common-deployment-errors.md)

