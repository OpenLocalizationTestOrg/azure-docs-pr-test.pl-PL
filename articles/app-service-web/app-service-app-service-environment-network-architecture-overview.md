---
title: "Omówienie architektury sieciowej środowisk usługi App Service"
description: "Omówienie architektury ofApp topologii sieci środowiska usługi."
services: app-service
documentationcenter: 
author: stefsch
manager: erikre
editor: 
ms.assetid: 13d03a37-1fe2-4e3e-9d57-46dfb330ba52
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/04/2016
ms.author: stefsch
ms.openlocfilehash: b2afe86d8774b449a257312d4e60b5f6125336ca
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="network-architecture-overview-of-app-service-environments"></a><span data-ttu-id="bba10-103">Omówienie architektury sieciowej środowisk usługi App Service</span><span class="sxs-lookup"><span data-stu-id="bba10-103">Network Architecture Overview of App Service Environments</span></span>
## <a name="introduction"></a><span data-ttu-id="bba10-104">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="bba10-104">Introduction</span></span>
<span data-ttu-id="bba10-105">Środowiska usługi App Service zawsze są tworzone w obrębie podsieci [sieci wirtualnej] [ virtualnetwork] — aplikacje działające w środowisku usługi aplikacji może komunikować się z punktami końcowymi prywatne, znajduje się w tej samej topologii sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="bba10-105">App Service Environments are always created within a subnet of a [virtual network][virtualnetwork] - apps running in an App Service Environment can communicate with private endpoints located within the same virtual network topology.</span></span>  <span data-ttu-id="bba10-106">Ponieważ klienci mogą zablokować części infrastruktury sieci wirtualnej, należy zrozumieć typy przepływów komunikacji sieci, które występują w przypadku środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="bba10-106">Since customers may lock down parts of their virtual network infrastructure, it is important to understand the types of network communication flows that occur with an App Service Environment.</span></span>

## <a name="general-network-flow"></a><span data-ttu-id="bba10-107">Przepływ sieci ogólne</span><span class="sxs-lookup"><span data-stu-id="bba10-107">General Network Flow</span></span>
<span data-ttu-id="bba10-108">Jeśli środowisko aplikacji (ASE) używa publiczny wirtualny adres IP (VIP) dla aplikacji, cały ruch przychodzący dociera na tym publicznego adresu VIP.</span><span class="sxs-lookup"><span data-stu-id="bba10-108">When an App Service Environment (ASE) uses a public virtual IP address (VIP) for apps, all inbound traffic arrives on that public VIP.</span></span>  <span data-ttu-id="bba10-109">W tym ruchu HTTP i HTTPS dla aplikacji, a także innych ruch FTP, zdalnego debugowania działania i operacji zarządzania platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="bba10-109">This includes HTTP and HTTPS traffic for apps, as well as other traffic for FTP, remote debugging functionality, and Azure management operations.</span></span>  <span data-ttu-id="bba10-110">Pełną listę określonych portów (wymagane i opcjonalne), które są dostępne na publiczny adres VIP w artykule na [kontrolowanie ruchu przychodzącego] [ controllinginboundtraffic] do środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="bba10-110">For a full list of the specific ports (both required and optional) that are available on the public VIP see the article on [controlling inbound traffic][controllinginboundtraffic] to an App Service Environment.</span></span> 

<span data-ttu-id="bba10-111">Środowiska usługi aplikacji obsługuje również uruchomionych aplikacji, które są powiązane tylko z sieci wirtualnej wewnętrzny adres, nazywany również adres ILB (wewnętrzny moduł równoważenia obciążenia).</span><span class="sxs-lookup"><span data-stu-id="bba10-111">App Service Environments also support running apps that are bound only to a virtual network internal address, also referred to as an ILB (internal load balancer) address.</span></span>  <span data-ttu-id="bba10-112">Na ILB włączone ruchu ASE, HTTP i HTTPS dla aplikacji, a także debugowania wywołań zdalnych przychodzą na adres ILB.</span><span class="sxs-lookup"><span data-stu-id="bba10-112">On an ILB enabled ASE, HTTP and HTTPS traffic for apps as well as remote debugging calls, arrive on the ILB address.</span></span>  <span data-ttu-id="bba10-113">W przypadku najbardziej typowych konfiguracji ILB ASE ruch FTP/FTPS pojawią się również na adres ILB.</span><span class="sxs-lookup"><span data-stu-id="bba10-113">For most common ILB-ASE configurations, FTP/FTPS traffic will also arrive on the ILB address.</span></span>  <span data-ttu-id="bba10-114">Jednak operacje zarządzania Azure nadal będą przepływać w portach 454/455 na publiczny adres VIP o ILB obsługuje ASE.</span><span class="sxs-lookup"><span data-stu-id="bba10-114">However Azure management operations will still flow to ports 454/455 on the public VIP of an ILB enabled ASE.</span></span>

<span data-ttu-id="bba10-115">Na poniższym diagramie przedstawiono omówienie poszczególnych przepływów ruchu przychodzącego i wychodzącego dla środowiska usługi aplikacji, których aplikacje są powiązane z publiczny wirtualny adres IP:</span><span class="sxs-lookup"><span data-stu-id="bba10-115">The diagram below shows an overview of the various inbound and outbound network flows for an App Service Environment where the apps are bound to a public virtual IP address:</span></span>

![Ogólne przepływów sieci][GeneralNetworkFlows]

<span data-ttu-id="bba10-117">Środowiska usługi aplikacji może komunikować się z różnych punktów końcowych klienta prywatnych.</span><span class="sxs-lookup"><span data-stu-id="bba10-117">An App Service Environment can communicate with a variety of private customer endpoints.</span></span>  <span data-ttu-id="bba10-118">Na przykład aplikacje działające w środowisku usługi aplikacji może połączyć się z serwerów bazy danych uruchomionych na maszynach wirtualnych IaaS w tej samej topologii sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="bba10-118">For example, apps running in the App Service Environment can connect to database server(s) running on IaaS virtual machines in the same virtual network topology.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="bba10-119">Spojrzenie na diagramie sieciowym, "Inne obliczeniowe zasoby" są wdrażane w innej podsieci, ze środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="bba10-119">Looking at the network diagram, the "Other Compute Resources" are deployed in a different Subnet from the App Service Environment.</span></span> <span data-ttu-id="bba10-120">Wdrażanie zasobów w tej samej podsieci z ASE zablokuje łączność między ASE tych zasobów (z wyjątkiem określonych ASE wewnątrz routing).</span><span class="sxs-lookup"><span data-stu-id="bba10-120">Deploying resources in the same Subnet with the ASE will block connectivity from ASE to those resources (except for specific intra-ASE routing).</span></span> <span data-ttu-id="bba10-121">Wdróż w innej podsieci z zamiast niego (w tej samej sieci Wirtualnej).</span><span class="sxs-lookup"><span data-stu-id="bba10-121">Deploy to a different Subnet instead (in the same VNET).</span></span> <span data-ttu-id="bba10-122">Środowiska usługi aplikacji będzie można nawiązać połączenia.</span><span class="sxs-lookup"><span data-stu-id="bba10-122">The App Service Environment will then be able to connect.</span></span> <span data-ttu-id="bba10-123">Dodatkowa konfiguracja nie jest konieczne.</span><span class="sxs-lookup"><span data-stu-id="bba10-123">No additional configuration is necessary.</span></span>
> 
> 

<span data-ttu-id="bba10-124">Środowiska usługi aplikacji również komunikować się z bazą danych Sql i usługi Azure Storage zasoby niezbędne do zarządzania i obsługi środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="bba10-124">App Service Environments also communicate with Sql DB and Azure Storage resources necessary for managing and operating an App Service Environment.</span></span>  <span data-ttu-id="bba10-125">Niektórych zasobów Sql i magazynu, które środowiska usługi aplikacji komunikuje się z znajdują się w tym samym regionie co środowiska usługi aplikacji, podczas gdy inne znajdują się w zdalnym regiony platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="bba10-125">Some of the Sql and Storage resources that an App Service Environment communicates with are located in the same region as the App Service Environment, while others are located in remote Azure regions.</span></span>  <span data-ttu-id="bba10-126">W związku z tym wychodzące połączenie z Internetem jest zawsze wymagany do poprawnego środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="bba10-126">As a result, outbound connectivity to the Internet is always required for an App Service Environment to function properly.</span></span> 

<span data-ttu-id="bba10-127">Ponieważ środowisko usługi aplikacji jest wdrażana w podsieci, grup zabezpieczeń sieci można kontrolować ruch przychodzący do podsieci.</span><span class="sxs-lookup"><span data-stu-id="bba10-127">Since an App Service Environment is deployed in a subnet, network security groups can be used to control inbound traffic to the subnet.</span></span>  <span data-ttu-id="bba10-128">Aby uzyskać informacje na temat kontrolowania ruch przychodzący do środowiska usługi aplikacji, zobacz następujące tematy [artykułu][controllinginboundtraffic].</span><span class="sxs-lookup"><span data-stu-id="bba10-128">For details on how to control inbound traffic to an App Service Environment, see the following [article][controllinginboundtraffic].</span></span>

<span data-ttu-id="bba10-129">Więcej informacji na temat Zezwalaj wychodzące połączenie internetowe ze środowiska usługi aplikacji, można znaleźć w następującym artykule o pracy z [Express Route][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="bba10-129">For details on how to allow outbound Internet connectivity from an App Service Environment, see the following article about working with [Express Route][ExpressRoute].</span></span>  <span data-ttu-id="bba10-130">Te same podejście opisaną w artykule zastosowanie podczas pracy z połączenie lokacja-lokacja i przy użyciu wymuszonego tunelowania.</span><span class="sxs-lookup"><span data-stu-id="bba10-130">The same approach described in the article applies when working with Site-to-Site connectivity and using forced tunneling.</span></span>

## <a name="outbound-network-addresses"></a><span data-ttu-id="bba10-131">Adresy sieciowe ruchu wychodzącego</span><span class="sxs-lookup"><span data-stu-id="bba10-131">Outbound Network Addresses</span></span>
<span data-ttu-id="bba10-132">Adres IP wywołań wychodzących środowiska usługi aplikacji zawsze jest skojarzony z wywołań wychodzących.</span><span class="sxs-lookup"><span data-stu-id="bba10-132">When an App Service Environment makes outbound calls, an IP Address is always associated with the outbound calls.</span></span>  <span data-ttu-id="bba10-133">Określony adres IP, który jest używany, zależy od tego, czy punkt końcowy wywoływana znajduje się w topologii sieci wirtualnej, lub na zewnątrz topologii sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="bba10-133">The specific IP address that is used depends on whether the endpoint being called is located within the virtual network topology, or outside of the virtual network topology.</span></span>

<span data-ttu-id="bba10-134">Jeśli punkt końcowy wywoływany jest **poza** następnie topologii sieci wirtualnej adres wychodzącego (alias wychodzący adres NAT), który jest używany jest publiczny adres VIP środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="bba10-134">If the endpoint being called is **outside** of the virtual network topology, then the outbound address (aka the outbound NAT address) that is used is the public VIP of the App Service Environment.</span></span>  <span data-ttu-id="bba10-135">Ten adres znajduje się w interfejsie użytkownika portalu dla środowiska usługi aplikacji w bloku właściwości.</span><span class="sxs-lookup"><span data-stu-id="bba10-135">This address can be found in the portal user interface for the App Service Environment in Properties blade.</span></span>

![Adres IP ruchu wychodzącego][OutboundIPAddress]

<span data-ttu-id="bba10-137">Ten adres także można określić dla ASEs tylko mających publicznego firmy przez tworzenie aplikacji w środowisku usługi aplikacji, a następnie wykonuje *nslookup* adresu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="bba10-137">This address can also be determined for ASEs that only have a public VIP by creating an app in the App Service Environment, and then performing an *nslookup* on the app's address.</span></span> <span data-ttu-id="bba10-138">Wynikowe adres IP jest zarówno publiczny adres VIP, a także adres NAT ruchu wychodzącego środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="bba10-138">The resultant IP address is both the public VIP, as well as the App Service Environment's outbound NAT address.</span></span>

<span data-ttu-id="bba10-139">Jeśli punkt końcowy wywoływany jest **wewnątrz** topologii sieci wirtualnej wychodzący adres wywoływania aplikacji będzie wewnętrzny adres IP zasób obliczeniowy poszczególnych aplikację.</span><span class="sxs-lookup"><span data-stu-id="bba10-139">If the endpoint being called is **inside** of the virtual network topology, the outbound address of the calling app will be the internal IP address of the individual compute resource running the app.</span></span>  <span data-ttu-id="bba10-140">Jednak nie ma trwałego mapowanie sieci wirtualnych adresów IP do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="bba10-140">However there is not a persistent mapping of virtual network internal IP addresses to apps.</span></span>  <span data-ttu-id="bba10-141">Aplikacje można przenieść między zasoby obliczeniowe różnych i puli obliczeniowej dostępnych zasobów w środowisku usługi aplikacji można zmienić z powodu operacji skalowania.</span><span class="sxs-lookup"><span data-stu-id="bba10-141">Apps can move around across different compute resources, and the pool of available compute resources in an App Service Environment can change due to scaling operations.</span></span>

<span data-ttu-id="bba10-142">Jednak ponieważ środowiska usługi aplikacji zawsze znajduje się w podsieci, ma się gwarancji, że wewnętrznego adresu IP zasobu obliczeniowego uruchamiania aplikacji zawsze będzie znajdować się w obrębie zakres CIDR podsieci.</span><span class="sxs-lookup"><span data-stu-id="bba10-142">However, since an App Service Environment is always located within a subnet, you are guaranteed that the internal IP address of a compute resource running an app will always lie within the CIDR range of the subnet.</span></span>  <span data-ttu-id="bba10-143">W związku z tym gdy szczegółowych list ACL lub grup zabezpieczeń sieci są używane do zabezpieczania dostępu do innych punktów końcowych w sieci wirtualnej, zakresu podsieci zawierającego środowiska usługi aplikacji musi otrzymać dostęp.</span><span class="sxs-lookup"><span data-stu-id="bba10-143">As a result, when fine-grained ACLs or network security groups are used to secure access to other endpoints within the virtual network, the subnet range containing the App Service Environment needs to be granted access.</span></span>

<span data-ttu-id="bba10-144">Na poniższym diagramie przedstawiono te pojęcia bardziej szczegółowo:</span><span class="sxs-lookup"><span data-stu-id="bba10-144">The following diagram shows these concepts in more detail:</span></span>

![Adresy sieciowe ruchu wychodzącego][OutboundNetworkAddresses]

<span data-ttu-id="bba10-146">Na powyższym diagramie:</span><span class="sxs-lookup"><span data-stu-id="bba10-146">In the above diagram:</span></span>

* <span data-ttu-id="bba10-147">Ponieważ publiczny adres VIP środowiska usługi aplikacji jest 192.23.1.2, który jest wychodzący adres IP używany podczas połączenia z punktami końcowymi "Internet".</span><span class="sxs-lookup"><span data-stu-id="bba10-147">Since the public VIP of the App Service Environment is 192.23.1.2, that is the outbound IP address used when making calls to "Internet" endpoints.</span></span>
* <span data-ttu-id="bba10-148">Zakres CIDR zawierający podsieci dla środowiska usługi aplikacji jest 10.0.1.0/26.</span><span class="sxs-lookup"><span data-stu-id="bba10-148">The CIDR range of the containing subnet for the App Service Environment is 10.0.1.0/26.</span></span>  <span data-ttu-id="bba10-149">Inne punkty końcowe w ramach tej samej infrastrukturze sieci wirtualne będą widzieć wywołania z aplikacji jako pochodzący z gdzieś w ramach tego zakresu adresów.</span><span class="sxs-lookup"><span data-stu-id="bba10-149">Other endpoints within the same virtual network infrastructure will see calls from apps as originating from somewhere within this address range.</span></span>

## <a name="calls-between-app-service-environments"></a><span data-ttu-id="bba10-150">Wywołania między środowiska usługi aplikacji</span><span class="sxs-lookup"><span data-stu-id="bba10-150">Calls Between App Service Environments</span></span>
<span data-ttu-id="bba10-151">Bardziej złożone scenariusz może wystąpić, jeśli wdrożyć wiele środowisk usługi aplikacji w tej samej sieci wirtualnej, a nawiązywać wychodzące połączenia z jednego środowiska usługi aplikacji do innego środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="bba10-151">A more complex scenario can occur if you deploy multiple App Service Environments in the same virtual network, and make outbound calls from one App Service Environment to another App Service Environment.</span></span>  <span data-ttu-id="bba10-152">Tego rodzaju wielu wywołań również będą traktowane jako wywołania "Internet" środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="bba10-152">These types of cross App Service Environment calls will also be treated as "Internet" calls.</span></span>

<span data-ttu-id="bba10-153">Na poniższym diagramie przedstawiono przykład architektury warstwowej z aplikacjami na jednym środowiska usługi aplikacji (np. "Drzwi wejściowe" web apps) wywołanie aplikacji w drugim środowiska usługi aplikacji (np. wewnętrznych aplikacji interfejsu API zaplecza nie mają być dostępne z Internetu).</span><span class="sxs-lookup"><span data-stu-id="bba10-153">The following diagram shows an example of a layered architecture with apps on one App Service Environment (e.g. "Front door" web apps) calling apps on a second App Service Environment (e.g. internal back-end API apps not intended to be accessible from the Internet).</span></span> 

![Wywołania między środowiska usługi aplikacji][CallsBetweenAppServiceEnvironments] 

<span data-ttu-id="bba10-155">W powyższym przykładzie środowiska usługi aplikacji "ASE jeden" ma adres IP wychodzących 192.23.1.2.</span><span class="sxs-lookup"><span data-stu-id="bba10-155">In the example above the App Service Environment "ASE One" has an outbound IP address of 192.23.1.2.</span></span>  <span data-ttu-id="bba10-156">Jeśli aplikacja uruchomiona na tym będzie sprawia, że wywołanie wychodzące do aplikacji uruchomionej na drugi środowiska usługi aplikacji ("ASE dwóch") znajduje się w tej samej sieci wirtualnej wywołań wychodzących środowiska usługi aplikacji są traktowane jako wywołanie "Internet".</span><span class="sxs-lookup"><span data-stu-id="bba10-156">If an app running on this App Service Environment makes an outbound call to an app running on a second App Service Environment ("ASE Two") located in the same virtual network, the outbound call will be treated as an "Internet" call.</span></span>  <span data-ttu-id="bba10-157">W rezultacie ruch sieciowy odbieranych na sekundę środowiska usługi aplikacji będą wyświetlane jako pochodzący z 192.23.1.2 (tj. nie zakres adresów podsieci pierwszy środowiska usługi aplikacji).</span><span class="sxs-lookup"><span data-stu-id="bba10-157">As a result the network traffic arriving on the second App Service Environment will show as originating from 192.23.1.2 (i.e. not the subnet address range of the first App Service Environment).</span></span>

<span data-ttu-id="bba10-158">Mimo że wywołań między różne środowiska usługi aplikacji są traktowane jako wywołania "Internet", gdy oba środowiska usługi aplikacji znajdują się w tym samym regionie Azure ruch sieciowy pozostanie na regionalną sieć platformy Azure i nie będzie fizycznie możliwy przepływ za pośrednictwem publicznej sieci Internet.</span><span class="sxs-lookup"><span data-stu-id="bba10-158">Even though calls between different App Service Environments are treated as "Internet" calls, when both App Service Environments are located in the same Azure region the network traffic will remain on the regional Azure network and will not physically flow over the public Internet.</span></span>  <span data-ttu-id="bba10-159">W związku z tym służy sieciowej grupy zabezpieczeń w podsieci drugi środowiska usługi aplikacji umożliwiają tylko wywołania z pierwszego środowiska usługi aplikacji (których wychodzący adres IP jest 192.23.1.2), w związku z tym zapewnienia bezpiecznej komunikacji między środowiska usługi App Service.</span><span class="sxs-lookup"><span data-stu-id="bba10-159">As a result you can use a network security group on the subnet of the second App Service Environment to only allow inbound calls from the first App Service Environment (whose outbound IP address is 192.23.1.2), thus ensuring secure communication between the App Service Environments.</span></span>

## <a name="additional-links-and-information"></a><span data-ttu-id="bba10-160">Linki do dodatkowych i informacji</span><span class="sxs-lookup"><span data-stu-id="bba10-160">Additional Links and Information</span></span>
<span data-ttu-id="bba10-161">Wszystkie artykuły i w jaki sposób — do użytkownika dla środowiska usługi aplikacji są dostępne w [Plik README dla środowiska usługi aplikacji](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="bba10-161">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="bba10-162">Szczegóły ruchu przychodzącego porty używane przez środowiska usługi App Service i kontrolować ruch przychodzący za pomocą grup zabezpieczeń sieci jest dostępna [tutaj][controllinginboundtraffic].</span><span class="sxs-lookup"><span data-stu-id="bba10-162">Details on inbound ports used by App Service Environments and using network security groups to control inbound traffic is available [here][controllinginboundtraffic].</span></span>

<span data-ttu-id="bba10-163">Szczegółowe informacje o wykorzystaniu użytkownika zdefiniowanych tras udzielenia wychodzący dostęp do Internetu dla środowiska usługi aplikacji jest dostępna w tym [artykułu][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="bba10-163">Details on using user defined routes to grant outbound Internet access to App Service Environments is available in this [article][ExpressRoute].</span></span> 

<!-- LINKS -->
[virtualnetwork]: http://azure.microsoft.com/services/virtual-network/
[controllinginboundtraffic]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[ExpressRoute]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-network-configuration-expressroute/

<!-- IMAGES -->
[GeneralNetworkFlows]: ./media/app-service-app-service-environment-network-architecture-overview/NetworkOverview-1.png
[OutboundIPAddress]: ./media/app-service-app-service-environment-network-architecture-overview/OutboundIPAddress-1.png
[OutboundNetworkAddresses]: ./media/app-service-app-service-environment-network-architecture-overview/OutboundNetworkAddresses-1.png
[CallsBetweenAppServiceEnvironments]: ./media/app-service-app-service-environment-network-architecture-overview/CallsBetweenEnvironments-1.png

