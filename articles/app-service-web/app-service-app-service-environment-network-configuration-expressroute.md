---
title: "Praca z Express Route szczegóły konfiguracji sieci"
description: "Szczegóły konfiguracji sieci do uruchamiania środowiska usługi App Service w sieciach wirtualnych połączone z obwodem usługi ExpressRoute."
services: app-service
documentationcenter: 
author: stefsch
manager: nirma
editor: 
ms.assetid: 34b49178-2595-4d32-9b41-110c96dde6bf
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/14/2016
ms.author: stefsch
ms.openlocfilehash: de1d998ee86c127149dee18e9df577705054ddb4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="network-configuration-details-for-app-service-environments-with-expressroute"></a><span data-ttu-id="1cefb-103">Szczegóły konfiguracji sieci dla środowisk usługi App Service przy użyciu rozwiązania ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="1cefb-103">Network Configuration Details for App Service Environments with ExpressRoute</span></span>
## <a name="overview"></a><span data-ttu-id="1cefb-104">Omówienie</span><span class="sxs-lookup"><span data-stu-id="1cefb-104">Overview</span></span>
<span data-ttu-id="1cefb-105">Klienci mogą się łączyć [Azure ExpressRoute] [ ExpressRoute] obwód do infrastruktury sieci wirtualnej, a więc rozszerzenia sieci lokalnej na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="1cefb-105">Customers can connect an [Azure ExpressRoute][ExpressRoute] circuit to their virtual network infrastructure, thus extending their on-premises network to Azure.</span></span>  <span data-ttu-id="1cefb-106">Środowiska usługi aplikacji mogą być tworzone w podsieci tego [sieci wirtualnej] [ virtualnetwork] infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="1cefb-106">An App Service Environment can  be created in a subnet of this [virtual network][virtualnetwork] infrastructure.</span></span>  <span data-ttu-id="1cefb-107">Aplikacje działające w środowisku usługi aplikacji może następnie ustanowić bezpiecznego połączenia z zasobami zaplecza dostępne tylko za pośrednictwem połączenia ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="1cefb-107">Apps running on the App Service Environment can then establish secure connections to back-end resources accessible only over the ExpressRoute connection.</span></span>  

<span data-ttu-id="1cefb-108">Środowiska usługi aplikacji mogą być tworzone w **albo** sieci wirtualnej platformy Azure Resource Manager **lub** sieci wirtualnej wdrożenia klasycznego modelu.</span><span class="sxs-lookup"><span data-stu-id="1cefb-108">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model virtual network.</span></span>  <span data-ttu-id="1cefb-109">Z ostatnie zmiany wprowadzone w czerwca 2016 ASEs można teraz również wdrożyć do sieci wirtualnych korzystających z zakresów adresów publicznych lub przestrzenie adresowe RFC1918 (tj.)</span><span class="sxs-lookup"><span data-stu-id="1cefb-109">With a recent change made in June 2016, ASEs can also now be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e.</span></span> <span data-ttu-id="1cefb-110">adresy prywatne).</span><span class="sxs-lookup"><span data-stu-id="1cefb-110">private addresses).</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="required-network-connectivity"></a><span data-ttu-id="1cefb-111">Wymagana jest łączność</span><span class="sxs-lookup"><span data-stu-id="1cefb-111">Required Network Connectivity</span></span>
<span data-ttu-id="1cefb-112">Istnieją wymagania dotyczące łączności sieciowej środowiska usługi aplikacji, który nie będzie początkowo spełniony w sieci wirtualnej podłączone do usługi ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="1cefb-112">There are network connectivity requirements for App Service Environments that may not be initially met in a virtual network connected to an ExpressRoute.</span></span>  <span data-ttu-id="1cefb-113">Środowiska usługi aplikacji wymagają następujących prawidłowego działania:</span><span class="sxs-lookup"><span data-stu-id="1cefb-113">App Service Environments require all of the following in order to function properly:</span></span>

* <span data-ttu-id="1cefb-114">Połączenie sieciowe wychodzące z usługi Azure Storage punkty końcowe na całym świecie oba porty 80 i 443.</span><span class="sxs-lookup"><span data-stu-id="1cefb-114">Outbound network connectivity to Azure Storage endpoints worldwide on both ports 80 and 443.</span></span>  <span data-ttu-id="1cefb-115">Obejmuje to punkty końcowe znajduje się w tym samym regionie co środowiska usługi aplikacji, a także punkty końcowe usługi storage znajduje się w **innych** regiony platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="1cefb-115">This includes endpoints located in the same region as the App Service Environment, as well as storage endpoints located in **other** Azure regions.</span></span>  <span data-ttu-id="1cefb-116">Punkty końcowe usługi Azure Storage rozwiązania w obszarze następujące domeny DNS: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net* i *file.core.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="1cefb-116">Azure Storage endpoints resolve under the following DNS domains: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net* and *file.core.windows.net*.</span></span>  
* <span data-ttu-id="1cefb-117">Wychodzące łączność z usługą Azure pliki na port 445.</span><span class="sxs-lookup"><span data-stu-id="1cefb-117">Outbound network connectivity to the Azure Files service on port 445.</span></span>
* <span data-ttu-id="1cefb-118">Połączenie sieciowe ruchu wychodzącego punkty końcowe bazy danych Sql znajduje się w tym samym regionie co środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1cefb-118">Outbound network connectivity to Sql DB endpoints located in the same region as the App Service Environment.</span></span>  <span data-ttu-id="1cefb-119">Rozwiąż punkty końcowe bazy danych SQL w obszarze następującej domeny: *database.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="1cefb-119">Sql DB endpoints resolve under the following domain:  *database.windows.net*.</span></span>  <span data-ttu-id="1cefb-120">Wymaga to dostępu do portów 1433, 11000 11999 i 14000 14999 otwierania.</span><span class="sxs-lookup"><span data-stu-id="1cefb-120">This requires opening access to ports 1433, 11000-11999 and 14000-14999.</span></span>  <span data-ttu-id="1cefb-121">Więcej informacji można znaleźć [w tym artykule na użycie portu bazy danych Sql V12](../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="1cefb-121">For more details see [this article on Sql Database V12 port usage](../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="1cefb-122">Połączenie sieciowe ruchu wychodzącego punkty końcowe płaszczyzny zarządzania platformy Azure (punkty końcowe zarówno ASM i ARM).</span><span class="sxs-lookup"><span data-stu-id="1cefb-122">Outbound network connectivity to the Azure management plane endpoints (both ASM and ARM endpoints).</span></span>  <span data-ttu-id="1cefb-123">Dotyczy to zarówno łączność wychodząca *management.core.windows.net* i *management.azure.com*.</span><span class="sxs-lookup"><span data-stu-id="1cefb-123">This includes outbound connectivity to both *management.core.windows.net* and *management.azure.com*.</span></span> 
* <span data-ttu-id="1cefb-124">Połączenie sieciowe ruchu wychodzącego *ocsp.msocsp.com*, *mscrl.microsoft.com* i *crl.microsoft.com*.</span><span class="sxs-lookup"><span data-stu-id="1cefb-124">Outbound network connectivity to *ocsp.msocsp.com*, *mscrl.microsoft.com* and *crl.microsoft.com*.</span></span>  <span data-ttu-id="1cefb-125">Jest to niezbędne do obsługi funkcji protokołu SSL.</span><span class="sxs-lookup"><span data-stu-id="1cefb-125">This is needed to support SSL functionality.</span></span>
* <span data-ttu-id="1cefb-126">Konfiguracja DNS dla sieci wirtualnej musi umożliwiać rozpoznawania wszystkich punktów końcowych i domen wspomnianego z wcześniejszych punktów.</span><span class="sxs-lookup"><span data-stu-id="1cefb-126">The DNS configuration for the virtual network must be capable of resolving all of the endpoints and domains mentioned in the earlier points.</span></span>  <span data-ttu-id="1cefb-127">Jeśli te punkty końcowe nie powiedzie się, próby tworzenia środowiska usługi aplikacji zakończą się niepowodzeniem i istniejącego środowiska usługi App Service zostanie oznaczona jako w złej kondycji.</span><span class="sxs-lookup"><span data-stu-id="1cefb-127">If these endpoints cannot be resolved, App Service Environment creation attempts will fail, and existing App Service Environments will be marked as unhealthy.</span></span>
* <span data-ttu-id="1cefb-128">Wychodzący dostęp przez port 53 jest wymagana do komunikacji przy użyciu serwerów DNS.</span><span class="sxs-lookup"><span data-stu-id="1cefb-128">Outbound access on port 53 is required for communication with DNS servers.</span></span>
* <span data-ttu-id="1cefb-129">Jeśli istnieje niestandardowy serwer DNS na drugim końcu bramy sieci VPN, serwer DNS musi być dostępny w podsieci zawierający środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1cefb-129">If a custom DNS server exists on the other end of a VPN gateway, the DNS server must be reachable from the subnet containing the App Service Environment.</span></span> 
* <span data-ttu-id="1cefb-130">Ścieżka sieciowa ruchu wychodzącego nie może przechodzić przez wewnętrzny firmowych serwerów proxy ani może być życie tunel do lokalnego.</span><span class="sxs-lookup"><span data-stu-id="1cefb-130">The outbound network path cannot travel through internal corporate proxies, nor can it be force tunneled to on-premises.</span></span>  <span data-ttu-id="1cefb-131">Spowoduje to zmianę obowiązujący adres NAT ruchu wychodzącego ruchu sieciowego ze środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1cefb-131">Doing so changes the effective NAT address of outbound network traffic from the App Service Environment.</span></span>  <span data-ttu-id="1cefb-132">Zmiana adresu NAT wychodzącego ruchu sieciowego w środowisku usługi aplikacji spowoduje połączeniami do wielu punktów końcowych wymienionych powyżej.</span><span class="sxs-lookup"><span data-stu-id="1cefb-132">Changing the NAT address of an App Service Environment's outbound network traffic will cause connectivity failures to many of the endpoints listed above.</span></span>  <span data-ttu-id="1cefb-133">Powoduje to nieudanych prób tworzenia środowiska usługi aplikacji, a także wcześniej dobrej kondycji środowiska usługi App Service jest oznaczona jako w złej kondycji.</span><span class="sxs-lookup"><span data-stu-id="1cefb-133">This results in failed App Service Environment creation attempts, as well as previously healthy App Service Environments being marked as unhealthy.</span></span>  
* <span data-ttu-id="1cefb-134">Przychodzące dostępu do sieci, aby wymagane porty dla środowiska usługi App Service musi być dozwolone, zgodnie z opisem w tym [artykułu][requiredports].</span><span class="sxs-lookup"><span data-stu-id="1cefb-134">Inbound network access to required ports for App Service Environments must be allowed as described in this [article][requiredports].</span></span>

<span data-ttu-id="1cefb-135">W celu zapewnienia prawidłowy infrastruktura DNS jest skonfigurowany i dla sieci wirtualnej można spełnić wymagania dotyczące usługi DNS.</span><span class="sxs-lookup"><span data-stu-id="1cefb-135">The DNS requirements can be met by ensuring a valid DNS infrastructure is configured and maintained for the virtual network.</span></span>  <span data-ttu-id="1cefb-136">Jeśli z jakiegokolwiek powodu konfiguracji DNS zostaną zmienione po utworzeniu środowiska usługi aplikacji, deweloperzy można wymusić środowiska usługi aplikacji do pobrania dla nowej konfiguracji DNS.</span><span class="sxs-lookup"><span data-stu-id="1cefb-136">If for any reason the DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment to pick up the new DNS configuration.</span></span>  <span data-ttu-id="1cefb-137">Wyzwolenie stopniowego ponowny rozruch środowiska przy użyciu ikony "Restart" znajduje się w górnej części bloku zarządzania środowiska usługi aplikacji w [portalu Azure] [ NewPortal] spowoduje, że środowisko do pobrania dla nowej konfiguracji DNS.</span><span class="sxs-lookup"><span data-stu-id="1cefb-137">Triggering a rolling environment reboot using the "Restart" icon located at the top of the App Service Environment management blade in the [Azure portal][NewPortal] will cause the environment to pick up the new DNS configuration.</span></span>

<span data-ttu-id="1cefb-138">Wymagania dotyczące dostępu do sieci dla ruchu przychodzącego można spełnić przez skonfigurowanie [sieciowej grupy zabezpieczeń] [ NetworkSecurityGroups] podsieci środowiska usługi aplikacji umożliwiają wymagane uprawnienia dostępu, zgodnie z opisem w tym [ artykuł][requiredports].</span><span class="sxs-lookup"><span data-stu-id="1cefb-138">The inbound network access requirements can be met by configuring a [network security group][NetworkSecurityGroups] on the App Service Environment's subnet to allow the required access as described in this [article][requiredports].</span></span>

## <a name="enabling-outbound-network-connectivity-for-an-app-service-environment"></a><span data-ttu-id="1cefb-139">Włączenie łączności sieciowej ruchu wychodzącego dla środowiska usługi aplikacji</span><span class="sxs-lookup"><span data-stu-id="1cefb-139">Enabling Outbound Network Connectivity for an App Service Environment</span></span>
<span data-ttu-id="1cefb-140">Domyślnie nowo utworzony obwodu ExpressRoute anonsuje trasę domyślną, który umożliwia wychodzące połączenie z Internetem.</span><span class="sxs-lookup"><span data-stu-id="1cefb-140">By default, a newly created ExpressRoute circuit advertises a default route that allows outbound Internet connectivity.</span></span>  <span data-ttu-id="1cefb-141">W tej konfiguracji środowiska usługi aplikacji będzie można nawiązać połączenia z innymi punkty końcowe systemu Azure.</span><span class="sxs-lookup"><span data-stu-id="1cefb-141">With this configuration an App Service Environment will be able to connect to other Azure endpoints.</span></span>

<span data-ttu-id="1cefb-142">Jednak typowych konfiguracji klienta jest określenie własnych trasa domyślna (0.0.0.0/0), co zmusza wychodzący ruch internetowy, zamiast niego przepływ lokalnymi.</span><span class="sxs-lookup"><span data-stu-id="1cefb-142">However a common customer configuration is to define their own default route (0.0.0.0/0) which forces outbound Internet traffic to instead flow on-premises.</span></span>  <span data-ttu-id="1cefb-143">Ten przepływ ruchu niezmiennie dzieli środowiska usługi App Service, ruch wychodzący zablokowanych lokalnie, ponieważ NAT czy nierozpoznawalną zbiór adresów, które nie będą działać z różnymi punkty końcowe systemu Azure.</span><span class="sxs-lookup"><span data-stu-id="1cefb-143">This traffic flow invariably breaks App Service Environments because the outbound traffic is either blocked on-premises, or NAT'd to an unrecognizable set of addresses that no longer work with various Azure endpoints.</span></span>

<span data-ttu-id="1cefb-144">Rozwiązanie jest określenie jednego (lub więcej) trasy zdefiniowane przez użytkownika (Udr) na podsieci, która zawiera środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1cefb-144">The solution is to define one (or more) user defined routes (UDRs) on the subnet that contains the App Service Environment.</span></span>  <span data-ttu-id="1cefb-145">PRZEZ definiuje tras specyficzne dla podsieci, które będą honorowane zamiast trasy domyślnej.</span><span class="sxs-lookup"><span data-stu-id="1cefb-145">A UDR defines subnet-specific routes that will be honored instead of the default route.</span></span>

<span data-ttu-id="1cefb-146">Jeśli to możliwe zaleca się następującej konfiguracji:</span><span class="sxs-lookup"><span data-stu-id="1cefb-146">If possible, it is recommended to use the following configuration:</span></span>

* <span data-ttu-id="1cefb-147">Konfiguracji usługi ExpressRoute anonsuje 0.0.0.0/0 i domyślnie życie tuneli wszystkich ruch wychodzący lokalnymi.</span><span class="sxs-lookup"><span data-stu-id="1cefb-147">The ExpressRoute configuration advertises 0.0.0.0/0 and by default force tunnels all outbound traffic on-premises.</span></span>
* <span data-ttu-id="1cefb-148">PRZEZ stosowana do podsieci, zawierający środowiska usługi aplikacji definiuje 0.0.0.0/0 z typem następnego przeskoku Internet (na przykład jest dostępne w dół w tym artykule).</span><span class="sxs-lookup"><span data-stu-id="1cefb-148">The UDR applied to the subnet containing the App Service Environment defines 0.0.0.0/0 with a next hop type of Internet (an example of this is farther down in this article).</span></span>

<span data-ttu-id="1cefb-149">Łączna tych kroków powoduje, że poziomie podsieci przez mają wyższy priorytet niż ExpressRoute, wymuszone tunelowanie, w związku z tym zapewnienie wychodzący dostęp do Internetu z poziomu środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1cefb-149">The combined effect of these steps is that the subnet level UDR will take precedence over the ExpressRoute forced tunneling, thus ensuring outbound Internet access from the App Service Environment.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1cefb-150">Trasy zdefiniowane w przez **musi** jest wystarczająco konkretny, aby mają pierwszeństwo względem dowolnego trasy anonsowane przez konfiguracji usługi ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="1cefb-150">The routes defined in a UDR **must** be specific enough to  take precedence over any routes advertised by the ExpressRoute configuration.</span></span>  <span data-ttu-id="1cefb-151">W poniższym przykładzie używa 0.0.0.0/0 szeroki zakres adresów i jako taki może potencjalnie być przypadkowo przesłonięta przez anonsów tras za pomocą bardziej szczegółowych zakresów adresów.</span><span class="sxs-lookup"><span data-stu-id="1cefb-151">The example below uses the broad 0.0.0.0/0 address range, and as such can potentially be accidentally overridden by route advertisements using more specific address ranges.</span></span>
> 
> <span data-ttu-id="1cefb-152">Środowiska usługi aplikacji nie są obsługiwane w przypadku konfiguracji usługi ExpressRoute który **między anonsować tras z publicznej komunikacji równorzędnej ścieżki do ścieżki prywatnej komunikacji równorzędnej**.</span><span class="sxs-lookup"><span data-stu-id="1cefb-152">App Service Environments are not supported with ExpressRoute configurations that **cross-advertise routes from the public peering path to the private peering path**.</span></span>  <span data-ttu-id="1cefb-153">Konfiguracji usługi ExpressRoute, które mają publicznej komunikacji równorzędnej skonfigurowane, otrzyma anonsów tras firmy Microsoft dla dużych zestawów zakresów adresów IP firmy Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="1cefb-153">ExpressRoute configurations that have public peering configured, will receive route advertisements from Microsoft for a large set of Microsoft Azure IP address ranges.</span></span>  <span data-ttu-id="1cefb-154">W przypadku tych zakresów adresów między anonsowany w ścieżce prywatnej komunikacji równorzędnej, wynik końcowy jest, że wszystkie pakiety wychodzącego z podsieci środowiska usługi aplikacji zostaną tunneled życie do infrastruktury sieci lokalnej klienta.</span><span class="sxs-lookup"><span data-stu-id="1cefb-154">If these address ranges are cross-advertised on the private peering path, the end result is that all outbound network packets from the App Service Environment's subnet will be force-tunneled to a customer's on-premises network infrastructure.</span></span>  <span data-ttu-id="1cefb-155">Ten przepływ sieci nie jest obecnie obsługiwane w środowiskach usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1cefb-155">This network flow is currently not supported with App Service Environments.</span></span>  <span data-ttu-id="1cefb-156">Jedno rozwiązanie tego problemu jest zatrzymanie tras między reklam z publicznej komunikacji równorzędnej ścieżki do ścieżki prywatnej komunikacji równorzędnej.</span><span class="sxs-lookup"><span data-stu-id="1cefb-156">One solution to this problem is to stop cross-advertising routes from the public peering path to the private peering path.</span></span>
> 
> 

<span data-ttu-id="1cefb-157">Informacje na trasy zdefiniowane przez użytkownika jest dostępna w tym [omówienie][UDROverview].</span><span class="sxs-lookup"><span data-stu-id="1cefb-157">Background information on user defined routes is available in this [overview][UDROverview].</span></span>  

<span data-ttu-id="1cefb-158">Szczegółowe informacje na temat tworzenia i konfigurowania trasy zdefiniowane przez użytkownika jest dostępna w tym [jak do przewodnika][UDRHowTo].</span><span class="sxs-lookup"><span data-stu-id="1cefb-158">Details on creating and configuring user defined routes is available in this [How To Guide][UDRHowTo].</span></span>

## <a name="example-udr-configuration-for-an-app-service-environment"></a><span data-ttu-id="1cefb-159">Przykładowa konfiguracja przez środowisko usługi aplikacji</span><span class="sxs-lookup"><span data-stu-id="1cefb-159">Example UDR Configuration for an App Service Environment</span></span>
<span data-ttu-id="1cefb-160">**Wymagania wstępne**</span><span class="sxs-lookup"><span data-stu-id="1cefb-160">**Pre-requisites**</span></span>

1. <span data-ttu-id="1cefb-161">Instalowanie programu Azure Powershell z [Azure pobiera strony] [ AzureDownloads] (czerwiec 2015 lub nowszego z).</span><span class="sxs-lookup"><span data-stu-id="1cefb-161">Install Azure Powershell from the [Azure Downloads page][AzureDownloads] (dated June 2015 or later).</span></span>  <span data-ttu-id="1cefb-162">W obszarze "Narzędzia wiersza polecenia" Brak łącza "Zainstaluj", w obszarze "Windows Powershell", która będzie instalować najnowsze poleceń cmdlet programu Powershell.</span><span class="sxs-lookup"><span data-stu-id="1cefb-162">Under "Command-line tools" there is an "Install" link under "Windows Powershell" that will install the latest Powershell cmdlets.</span></span>
2. <span data-ttu-id="1cefb-163">Zaleca się, że unikatowej podsieci został utworzony do wyłącznego użytku przez środowisko usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1cefb-163">It is recommended that a unique subnet is created for exclusive use by an App Service Environment.</span></span>  <span data-ttu-id="1cefb-164">Dzięki temu, że Udr stosowane do podsieci będą otwierane tylko ruchu wychodzącego dla środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1cefb-164">This ensures that the UDRs applied to the subnet will only open outbound traffic for the App Service Environment.</span></span>
3. <span data-ttu-id="1cefb-165">**Ważne**: nie należy wdrażać środowiska usługi aplikacji do **po** zostaną wykonane następujące kroki konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="1cefb-165">**Important**:  do not deploy the App Service Environment until **after** the following configuration steps are followed.</span></span>  <span data-ttu-id="1cefb-166">Dzięki temu, że połączenie sieciowe ruchu wychodzącego jest dostępny przed próbą wdrożenia środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1cefb-166">This ensures that outbound network connectivity is available before attempting to deploy an App Service Environment.</span></span>

<span data-ttu-id="1cefb-167">**Krok 1: Tworzenie tabeli tras o nazwie**</span><span class="sxs-lookup"><span data-stu-id="1cefb-167">**Step 1:  Create a named route table**</span></span>

<span data-ttu-id="1cefb-168">Poniższy fragment kodu tworzy tabelę tras o nazwie "DirectInternetRouteTable" regionu zachodnie nam Azure:</span><span class="sxs-lookup"><span data-stu-id="1cefb-168">The following snippet creates a route table called "DirectInternetRouteTable" in the West US Azure region:</span></span>

    New-AzureRouteTable -Name 'DirectInternetRouteTable' -Location uswest

<span data-ttu-id="1cefb-169">**Krok 2: Utworzenie co najmniej jednej trasy w tabeli tras**</span><span class="sxs-lookup"><span data-stu-id="1cefb-169">**Step 2:  Create one or more routes in the route table**</span></span>

<span data-ttu-id="1cefb-170">Należy dodać co najmniej jednej trasy do tabeli routingu w celu umożliwienia wychodzący dostęp do Internetu.</span><span class="sxs-lookup"><span data-stu-id="1cefb-170">You will need to add one or more routes to the route table in order to enable outbound Internet access.</span></span>  

<span data-ttu-id="1cefb-171">Zalecane podejście do konfigurowania wychodzący dostęp do Internetu jest do definiowania trasy dla 0.0.0.0/0, jak pokazano poniżej.</span><span class="sxs-lookup"><span data-stu-id="1cefb-171">The recommended approach for configuring outbound access to the Internet is to define a route for 0.0.0.0/0 as shown below.</span></span>

    Get-AzureRouteTable -Name 'DirectInternetRouteTable' | Set-AzureRoute -RouteName 'Direct Internet Range 0' -AddressPrefix 0.0.0.0/0 -NextHopType Internet

<span data-ttu-id="1cefb-172">Należy pamiętać, tym 0.0.0.0/0 jest zakres adresów szerokie i jako takie zostaną zastąpione przez bardziej szczegółowych zakresów adresów anonsowane przez usługi ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="1cefb-172">Remember that 0.0.0.0/0 is a broad address range, and as such will be overridden by more specific address ranges advertised by the ExpressRoute.</span></span>  <span data-ttu-id="1cefb-173">Ponownie iteracyjne wcześniejszego zalecenia, przez trasa 0.0.0.0/0 używanego w połączeniu z konfiguracją ExressRoute, która tylko anonsuje także 0.0.0.0/0.</span><span class="sxs-lookup"><span data-stu-id="1cefb-173">To re-iterate the earlier recommendation, a UDR with a 0.0.0.0/0 route should be used in conjunction with an ExressRoute configuration that only advertises 0.0.0.0/0 as well.</span></span> 

<span data-ttu-id="1cefb-174">Alternatywnie można pobrać listę zakresy CIDR używanymi przez usługę Azure kompleksowe i zaktualizowane.</span><span class="sxs-lookup"><span data-stu-id="1cefb-174">As an alternative, you can download a comprehensive and updated list of CIDR ranges in use by Azure.</span></span>  <span data-ttu-id="1cefb-175">Plik Xml zawierający wszystkie zakresy adresów IP platformy Azure jest dostępna z [Microsoft Download Center][DownloadCenterAddressRanges].</span><span class="sxs-lookup"><span data-stu-id="1cefb-175">The Xml file containing all of the Azure IP address ranges is available from the [Microsoft Download Center][DownloadCenterAddressRanges].</span></span>  

<span data-ttu-id="1cefb-176">Należy jednak zauważyć, że te zakresy ulegną zmianom, co wymaga okresowych ręczne aktualizacje trasy zdefiniowane przez użytkownika, aby zapewnić synchronizację.</span><span class="sxs-lookup"><span data-stu-id="1cefb-176">Note though that these ranges change over time, thus necessitating periodic manual updates to the user defined routes to keep in sync.</span></span>  <span data-ttu-id="1cefb-177">Ponadto ponieważ domyślne górny limit 100 trasy w jednym przez, konieczne będzie "Podsumuj" zakresów adresów IP platformy Azure do mieści się w limicie 100 trasy pamiętając, że przez zdefiniowanych tras muszą być bardziej szczegółowy niż trasy anonsowane przez ExpressRo Twojego ute.</span><span class="sxs-lookup"><span data-stu-id="1cefb-177">Also, since there is a default upper limit of 100 routes in a single UDR, you will need to "summarize" the Azure IP address ranges to fit within the 100 route limit, keeping in mind that UDR defined routes need to be more specific than the routes advertised by your ExpressRoute.</span></span>  

<span data-ttu-id="1cefb-178">**Krok 3: Skojarz tabeli tras z podsiecią zawierający środowiska usługi aplikacji**</span><span class="sxs-lookup"><span data-stu-id="1cefb-178">**Step 3:  Associate the route table to the subnet containing the App Service Environment**</span></span>

<span data-ttu-id="1cefb-179">Ostatnim krokiem konfiguracji jest skojarzyć tabeli tras z podsiecią wdrożonym środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1cefb-179">The last  configuration step is to associate the route table to the subnet where the App Service Environment will be deployed.</span></span>  <span data-ttu-id="1cefb-180">Polecenie kojarzy "DirectInternetRouteTable" do "ASESubnet", który będzie zawierać ostatecznie środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1cefb-180">The following command associates the "DirectInternetRouteTable" to the "ASESubnet" that will eventually contain an App Service Environment.</span></span>

    Set-AzureSubnetRouteTable -VirtualNetworkName 'YourVirtualNetworkNameHere' -SubnetName 'ASESubnet' -RouteTableName 'DirectInternetRouteTable'


<span data-ttu-id="1cefb-181">**Krok 4: Końcowe czynności**</span><span class="sxs-lookup"><span data-stu-id="1cefb-181">**Step 4:  Final Steps**</span></span>

<span data-ttu-id="1cefb-182">Gdy tabelę tras jest powiązany z podsiecią, zaleca się najpierw przetestować i Potwierdź zamierzonego efektu.</span><span class="sxs-lookup"><span data-stu-id="1cefb-182">Once the route table is bound to the subnet, it is recommended to first test and confirm the intended effect.</span></span>  <span data-ttu-id="1cefb-183">Na przykład wdrożyć maszynę wirtualną na podsieci i upewnij się, że:</span><span class="sxs-lookup"><span data-stu-id="1cefb-183">For example, deploy a virtual machine into the subnet and confirm that:</span></span>

* <span data-ttu-id="1cefb-184">Ruch wychodzący do platformy Azure i innych niż Azure punkty końcowe wcześniej w wymienionych w tym artykule jest **nie** przepływu dół obwodu usługi expressroute.</span><span class="sxs-lookup"><span data-stu-id="1cefb-184">Outbound traffic to both Azure and non-Azure endpoints mentioned earlier in this article is **not** flowing down the ExpressRoute circuit.</span></span>  <span data-ttu-id="1cefb-185">Jest bardzo ważne, aby sprawdzić to zachowanie, ponieważ w przypadku ruchu wychodzącego z podsieci nadal wymuszone tunelowane lokalnymi, zawsze kończy się niepowodzeniem tworzenie środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1cefb-185">It is very important to verify this behavior, since if outbound traffic from the subnet is still being forced tunneled on-premises, App Service Environment creation will always fail.</span></span> 
* <span data-ttu-id="1cefb-186">Wyszukiwania DNS dla punktów końcowych wspomniano wcześniej, wszystkie rozwiązuje poprawnie.</span><span class="sxs-lookup"><span data-stu-id="1cefb-186">DNS lookups for the endpoints mentioned earlier are all resolving properly.</span></span> 

<span data-ttu-id="1cefb-187">Po potwierdzeniu są powyższe kroki, należy usunąć maszynę wirtualną, ponieważ podsieć musi być "pusty" w czasie tworzenia środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1cefb-187">Once the above steps are confirmed, you will need to delete the virtual machine because the subnet needs to be "empty" at the time the App Service Environment is created.</span></span>

<span data-ttu-id="1cefb-188">Następnie kontynuuj tworzenie środowiska usługi aplikacji!</span><span class="sxs-lookup"><span data-stu-id="1cefb-188">Then proceed with creating an App Service Environment!</span></span>

## <a name="getting-started"></a><span data-ttu-id="1cefb-189">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="1cefb-189">Getting started</span></span>
<span data-ttu-id="1cefb-190">Wszystkie artykuły i w jaki sposób — do użytkownika dla środowiska usługi aplikacji są dostępne w [Plik README dla środowiska usługi aplikacji](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="1cefb-190">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="1cefb-191">Wprowadzenie do środowiska usługi App Service, zobacz [wprowadzenie do środowiska usługi aplikacji][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="1cefb-191">To get started with App Service Environments, see [Introduction to App Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="1cefb-192">Aby uzyskać więcej informacji o platformie usługi Azure App Service, zobacz [usłudze Azure App Service][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="1cefb-192">For more information about the Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

<!-- LINKS -->
[virtualnetwork]: http://azure.microsoft.com/services/virtual-network/
[ExpressRoute]: http://azure.microsoft.com/services/expressroute/
[requiredports]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[NetworkSecurityGroups]: http://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[UDROverview]: http://azure.microsoft.com/documentation/articles/virtual-networks-udr-overview/
[UDRHowTo]: http://azure.microsoft.com/documentation/articles/virtual-networks-udr-how-to/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[AzureDownloads]: http://azure.microsoft.com/en-us/downloads/ 
[DownloadCenterAddressRanges]: http://www.microsoft.com/download/details.aspx?id=41653  
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[NewPortal]:  https://portal.azure.com


<!-- IMAGES -->
