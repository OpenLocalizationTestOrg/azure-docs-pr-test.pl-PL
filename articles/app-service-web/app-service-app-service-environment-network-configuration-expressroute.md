---
title: "aaaNetwork szczegóły konfiguracji do pracy z Express Route"
description: "Szczegóły konfiguracji sieci do uruchamiania środowiska usługi App Service w sieciach wirtualnych połączone tooan obwodu usługi Expressroute."
services: app-service
documentationcenter: 
author: stefsch
manager: nirma
editor: 
ms.assetid: 34b49178-2595-4d32-9b41-110c96dde6bf
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/14/2016
ms.author: stefsch
ms.openlocfilehash: 85bbc45cfed619485957ee2a898aa0a7604173cb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="network-configuration-details-for-app-service-environments-with-expressroute"></a><span data-ttu-id="dda4b-103">Szczegóły konfiguracji sieci dla środowisk usługi App Service przy użyciu rozwiązania ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="dda4b-103">Network Configuration Details for App Service Environments with ExpressRoute</span></span>
## <a name="overview"></a><span data-ttu-id="dda4b-104">Omówienie</span><span class="sxs-lookup"><span data-stu-id="dda4b-104">Overview</span></span>
<span data-ttu-id="dda4b-105">Klienci mogą się łączyć [Azure ExpressRoute] [ ExpressRoute] infrastruktury sieci wirtualnej tootheir obwód, w związku z tym rozszerzanie ich tooAzure sieci lokalnej.</span><span class="sxs-lookup"><span data-stu-id="dda4b-105">Customers can connect an [Azure ExpressRoute][ExpressRoute] circuit tootheir virtual network infrastructure, thus extending their on-premises network tooAzure.</span></span>  <span data-ttu-id="dda4b-106">Środowiska usługi aplikacji mogą być tworzone w podsieci tego [sieci wirtualnej] [ virtualnetwork] infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="dda4b-106">An App Service Environment can  be created in a subnet of this [virtual network][virtualnetwork] infrastructure.</span></span>  <span data-ttu-id="dda4b-107">Aplikacje działające na powitania środowiska usługi aplikacji można następnie ustanawiać bezpiecznych połączeń tooback-end zasoby dostępne tylko za pośrednictwem hello połączenia ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="dda4b-107">Apps running on hello App Service Environment can then establish secure connections tooback-end resources accessible only over hello ExpressRoute connection.</span></span>  

<span data-ttu-id="dda4b-108">Środowiska usługi aplikacji mogą być tworzone w **albo** sieci wirtualnej platformy Azure Resource Manager **lub** sieci wirtualnej wdrożenia klasycznego modelu.</span><span class="sxs-lookup"><span data-stu-id="dda4b-108">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model virtual network.</span></span>  <span data-ttu-id="dda4b-109">Z ostatnie zmiany wprowadzone w czerwca 2016 ASEs również teraz można wdrożyć w sieci wirtualnych, które używają zakresy publicznych adresów lub RFC1918 przestrzeni adresów (czyli adresy prywatne).</span><span class="sxs-lookup"><span data-stu-id="dda4b-109">With a recent change made in June 2016, ASEs can also now be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e. private addresses).</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="required-network-connectivity"></a><span data-ttu-id="dda4b-110">Wymagana jest łączność</span><span class="sxs-lookup"><span data-stu-id="dda4b-110">Required Network Connectivity</span></span>
<span data-ttu-id="dda4b-111">Istnieją wymagania dotyczące łączności sieciowej środowiska usługi aplikacji, które mogą nie być początkowo spełnione tooan sieci wirtualnej połączenia ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="dda4b-111">There are network connectivity requirements for App Service Environments that may not be initially met in a virtual network connected tooan ExpressRoute.</span></span>  <span data-ttu-id="dda4b-112">Środowiska usługi aplikacji wymagają wszystkie z następujących hello w kolejności toofunction prawidłowo:</span><span class="sxs-lookup"><span data-stu-id="dda4b-112">App Service Environments require all of hello following in order toofunction properly:</span></span>

* <span data-ttu-id="dda4b-113">Wychodzące połączenie tooAzure magazynu punktów końcowych sieci na całym świecie na obu portów 80 i 443.</span><span class="sxs-lookup"><span data-stu-id="dda4b-113">Outbound network connectivity tooAzure Storage endpoints worldwide on both ports 80 and 443.</span></span>  <span data-ttu-id="dda4b-114">Obejmuje to punkty końcowe znajduje się w hello tego samego regionu hello środowiska usługi aplikacji, a także punkty końcowe usługi storage znajduje się w **innych** regiony platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="dda4b-114">This includes endpoints located in hello same region as hello App Service Environment, as well as storage endpoints located in **other** Azure regions.</span></span>  <span data-ttu-id="dda4b-115">Punkty końcowe usługi Azure Storage rozwiązania w obszarze hello następujące domeny DNS: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net* i *file.core.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="dda4b-115">Azure Storage endpoints resolve under hello following DNS domains: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net* and *file.core.windows.net*.</span></span>  
* <span data-ttu-id="dda4b-116">Toohello połączenia wychodzącego usługa pliki Azure na port 445.</span><span class="sxs-lookup"><span data-stu-id="dda4b-116">Outbound network connectivity toohello Azure Files service on port 445.</span></span>
* <span data-ttu-id="dda4b-117">Punkty końcowe tooSql DB połączenia wychodzącego znajduje się w hello sam region jako hello środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="dda4b-117">Outbound network connectivity tooSql DB endpoints located in hello same region as hello App Service Environment.</span></span>  <span data-ttu-id="dda4b-118">Rozwiąż punkty końcowe bazy danych SQL w obszarze hello następujące domeny: *database.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="dda4b-118">Sql DB endpoints resolve under hello following domain:  *database.windows.net*.</span></span>  <span data-ttu-id="dda4b-119">Wymaga to otwarcie dostępu tooports 1433, 11000 11999 i 14000 14999.</span><span class="sxs-lookup"><span data-stu-id="dda4b-119">This requires opening access tooports 1433, 11000-11999 and 14000-14999.</span></span>  <span data-ttu-id="dda4b-120">Więcej informacji można znaleźć [w tym artykule na użycie portu bazy danych Sql V12](../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="dda4b-120">For more details see [this article on Sql Database V12 port usage](../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="dda4b-121">Wychodzące połączenie toohello zarządzania platformy Azure płaszczyzny punktów końcowych sieci (punkty końcowe zarówno ASM i ARM).</span><span class="sxs-lookup"><span data-stu-id="dda4b-121">Outbound network connectivity toohello Azure management plane endpoints (both ASM and ARM endpoints).</span></span>  <span data-ttu-id="dda4b-122">Obejmuje to łączność wychodząca tooboth *management.core.windows.net* i *management.azure.com*.</span><span class="sxs-lookup"><span data-stu-id="dda4b-122">This includes outbound connectivity tooboth *management.core.windows.net* and *management.azure.com*.</span></span> 
* <span data-ttu-id="dda4b-123">Wychodzące połączenia sieciowego zbyt*ocsp.msocsp.com*, *mscrl.microsoft.com* i *crl.microsoft.com*.  Jest to wymagane toosupport funkcjonalność protokołu SSL.</span><span class="sxs-lookup"><span data-stu-id="dda4b-123">Outbound network connectivity too*ocsp.msocsp.com*, *mscrl.microsoft.com* and *crl.microsoft.com*.  This is needed toosupport SSL functionality.</span></span>
* <span data-ttu-id="dda4b-124">Witaj konfigurację systemu DNS dla sieci wirtualnej hello musi on mieć możliwość rozpoznawania wszystkie punkty końcowe hello i domeny wymienione w hello wcześniejszych punktów.</span><span class="sxs-lookup"><span data-stu-id="dda4b-124">hello DNS configuration for hello virtual network must be capable of resolving all of hello endpoints and domains mentioned in hello earlier points.</span></span>  <span data-ttu-id="dda4b-125">Jeśli te punkty końcowe nie powiedzie się, próby tworzenia środowiska usługi aplikacji zakończą się niepowodzeniem i istniejącego środowiska usługi App Service zostanie oznaczona jako w złej kondycji.</span><span class="sxs-lookup"><span data-stu-id="dda4b-125">If these endpoints cannot be resolved, App Service Environment creation attempts will fail, and existing App Service Environments will be marked as unhealthy.</span></span>
* <span data-ttu-id="dda4b-126">Wychodzący dostęp przez port 53 jest wymagana do komunikacji przy użyciu serwerów DNS.</span><span class="sxs-lookup"><span data-stu-id="dda4b-126">Outbound access on port 53 is required for communication with DNS servers.</span></span>
* <span data-ttu-id="dda4b-127">Jeśli istnieje niestandardowy serwer DNS na hello drugiej bramy sieci VPN, hello serwer DNS musi być dostępny z podsieci hello zawierającej hello środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="dda4b-127">If a custom DNS server exists on hello other end of a VPN gateway, hello DNS server must be reachable from hello subnet containing hello App Service Environment.</span></span> 
* <span data-ttu-id="dda4b-128">Hello wychodzącego ścieżki nie może przechodzić przez wewnętrzny firmowych serwerów proxy, ani może być życie tunneled tooon lokalnego.</span><span class="sxs-lookup"><span data-stu-id="dda4b-128">hello outbound network path cannot travel through internal corporate proxies, nor can it be force tunneled tooon-premises.</span></span>  <span data-ttu-id="dda4b-129">Grozi to zmiany hello obowiązujący adres NAT ruchu wychodzącego ruchu sieciowego z hello środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="dda4b-129">Doing so changes hello effective NAT address of outbound network traffic from hello App Service Environment.</span></span>  <span data-ttu-id="dda4b-130">Zmiana adresu NAT hello wychodzącego ruchu sieciowego w środowisku usługi aplikacji spowoduje łączności toomany błędów punktów końcowych hello wymienionych powyżej.</span><span class="sxs-lookup"><span data-stu-id="dda4b-130">Changing hello NAT address of an App Service Environment's outbound network traffic will cause connectivity failures toomany of hello endpoints listed above.</span></span>  <span data-ttu-id="dda4b-131">Powoduje to nieudanych prób tworzenia środowiska usługi aplikacji, a także wcześniej dobrej kondycji środowiska usługi App Service jest oznaczona jako w złej kondycji.</span><span class="sxs-lookup"><span data-stu-id="dda4b-131">This results in failed App Service Environment creation attempts, as well as previously healthy App Service Environments being marked as unhealthy.</span></span>  
* <span data-ttu-id="dda4b-132">Przychodzące toorequired dostępu porty dla środowiska usługi App Service musi być dozwolone, zgodnie z opisem w tym [artykułu][requiredports].</span><span class="sxs-lookup"><span data-stu-id="dda4b-132">Inbound network access toorequired ports for App Service Environments must be allowed as described in this [article][requiredports].</span></span>

<span data-ttu-id="dda4b-133">wymagania dotyczące systemu DNS Hello można spełnić przez zapewnienie im prawidłowe infrastruktura DNS jest skonfigurowany i dla sieci wirtualnej hello.</span><span class="sxs-lookup"><span data-stu-id="dda4b-133">hello DNS requirements can be met by ensuring a valid DNS infrastructure is configured and maintained for hello virtual network.</span></span>  <span data-ttu-id="dda4b-134">Jeśli dla dowolnego hello Przyczyna konfiguracji DNS została zmieniona po utworzeniu środowiska usługi aplikacji, deweloperzy można wymusić toopick środowiska usługi aplikacji hello nowej konfiguracji DNS.</span><span class="sxs-lookup"><span data-stu-id="dda4b-134">If for any reason hello DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment toopick up hello new DNS configuration.</span></span>  <span data-ttu-id="dda4b-135">Wyzwolenie stopniowego ponowny rozruch środowiska przy użyciu hello "Restart" znajdującą się na górze bloku zarządzania środowiska usługi aplikacji hello w hello hello [portalu Azure] [ NewPortal] spowoduje, że hello toopick środowiska Witaj nowej konfiguracji DNS.</span><span class="sxs-lookup"><span data-stu-id="dda4b-135">Triggering a rolling environment reboot using hello "Restart" icon located at hello top of hello App Service Environment management blade in hello [Azure portal][NewPortal] will cause hello environment toopick up hello new DNS configuration.</span></span>

<span data-ttu-id="dda4b-136">Witaj wymagania dotyczące dostępu do sieci dla ruchu przychodzącego można spełnić przez skonfigurowanie [sieciowej grupy zabezpieczeń] [ NetworkSecurityGroups] hello środowiska usługi aplikacji w podsieci tooallow hello wymagane dostępu zgodnie z opisem w tym [artykułu][requiredports].</span><span class="sxs-lookup"><span data-stu-id="dda4b-136">hello inbound network access requirements can be met by configuring a [network security group][NetworkSecurityGroups] on hello App Service Environment's subnet tooallow hello required access as described in this [article][requiredports].</span></span>

## <a name="enabling-outbound-network-connectivity-for-an-app-service-environment"></a><span data-ttu-id="dda4b-137">Włączenie łączności sieciowej ruchu wychodzącego dla środowiska usługi aplikacji</span><span class="sxs-lookup"><span data-stu-id="dda4b-137">Enabling Outbound Network Connectivity for an App Service Environment</span></span>
<span data-ttu-id="dda4b-138">Domyślnie nowo utworzony obwodu ExpressRoute anonsuje trasę domyślną, który umożliwia wychodzące połączenie z Internetem.</span><span class="sxs-lookup"><span data-stu-id="dda4b-138">By default, a newly created ExpressRoute circuit advertises a default route that allows outbound Internet connectivity.</span></span>  <span data-ttu-id="dda4b-139">W tej konfiguracji do środowiska usługi aplikacji będą mogli tooconnect tooother punkty końcowe systemu Azure.</span><span class="sxs-lookup"><span data-stu-id="dda4b-139">With this configuration an App Service Environment will be able tooconnect tooother Azure endpoints.</span></span>

<span data-ttu-id="dda4b-140">Typowa konfiguracja klienta jest toodefine własnych trasa domyślna (0.0.0.0/0), która wymusza wychodzący przepływ tooinstead ruchu internetowego lokalnymi.</span><span class="sxs-lookup"><span data-stu-id="dda4b-140">However a common customer configuration is toodefine their own default route (0.0.0.0/0) which forces outbound Internet traffic tooinstead flow on-premises.</span></span>  <span data-ttu-id="dda4b-141">Tego przepływu ruchu niezmiennie dzieli środowiska usługi App Service, ponieważ ruch wychodzący hello jest zablokowane lokalnie lub NAT d tooan nierozpoznawalną zbiór adresów, które nie będą działać z różnymi punkty końcowe systemu Azure.</span><span class="sxs-lookup"><span data-stu-id="dda4b-141">This traffic flow invariably breaks App Service Environments because hello outbound traffic is either blocked on-premises, or NAT'd tooan unrecognizable set of addresses that no longer work with various Azure endpoints.</span></span>

<span data-ttu-id="dda4b-142">rozwiązanie Hello jest toodefine jednej (lub więcej) trasy zdefiniowane przez użytkownika (Udr) na powitania podsieci, która zawiera hello środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="dda4b-142">hello solution is toodefine one (or more) user defined routes (UDRs) on hello subnet that contains hello App Service Environment.</span></span>  <span data-ttu-id="dda4b-143">PRZEZ definiuje tras specyficzne dla podsieci, które będą honorowane zamiast hello trasy domyślnej.</span><span class="sxs-lookup"><span data-stu-id="dda4b-143">A UDR defines subnet-specific routes that will be honored instead of hello default route.</span></span>

<span data-ttu-id="dda4b-144">Jeśli to możliwe zaleca się hello toouse następującej konfiguracji:</span><span class="sxs-lookup"><span data-stu-id="dda4b-144">If possible, it is recommended toouse hello following configuration:</span></span>

* <span data-ttu-id="dda4b-145">konfiguracji usługi ExpressRoute Hello anonsuje 0.0.0.0/0 i domyślnie życie tuneli wszystkich ruch wychodzący lokalnymi.</span><span class="sxs-lookup"><span data-stu-id="dda4b-145">hello ExpressRoute configuration advertises 0.0.0.0/0 and by default force tunnels all outbound traffic on-premises.</span></span>
* <span data-ttu-id="dda4b-146">podsieci toohello przez zastosowane Hello zawierającej hello środowiska usługi aplikacji definiuje 0.0.0.0/0 z typem następnego przeskoku Internet (na przykład jest dostępne w dół w tym artykule).</span><span class="sxs-lookup"><span data-stu-id="dda4b-146">hello UDR applied toohello subnet containing hello App Service Environment defines 0.0.0.0/0 with a next hop type of Internet (an example of this is farther down in this article).</span></span>

<span data-ttu-id="dda4b-147">Witaj połączony wpływ tych kroków jest hello na poziomie podsieci przez ma pierwszeństwo przed hello ExpressRoute wymuszone tunelowanie, w związku z tym zapewnienie wychodzący dostęp do Internetu z hello środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="dda4b-147">hello combined effect of these steps is that hello subnet level UDR will take precedence over hello ExpressRoute forced tunneling, thus ensuring outbound Internet access from hello App Service Environment.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="dda4b-148">Witaj tras określonych w przez **musi** jest wystarczająco konkretny, zbyt mają wyższy priorytet nad dowolnym trasy anonsowane przez hello konfiguracji usługi ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="dda4b-148">hello routes defined in a UDR **must** be specific enough too take precedence over any routes advertised by hello ExpressRoute configuration.</span></span>  <span data-ttu-id="dda4b-149">w poniższym przykładzie Hello używa zakresu adresów szerokie 0.0.0.0/0 hello i jako taki może potencjalnie być przypadkowo przesłonięta przez anonsów tras za pomocą bardziej szczegółowych zakresów adresów.</span><span class="sxs-lookup"><span data-stu-id="dda4b-149">hello example below uses hello broad 0.0.0.0/0 address range, and as such can potentially be accidentally overridden by route advertisements using more specific address ranges.</span></span>
> 
> <span data-ttu-id="dda4b-150">Środowiska usługi aplikacji nie są obsługiwane w przypadku konfiguracji usługi ExpressRoute który **między anonsować tras z hello publicznej komunikacji równorzędnej ścieżka toohello prywatnej komunikacji równorzędnej ścieżka**.</span><span class="sxs-lookup"><span data-stu-id="dda4b-150">App Service Environments are not supported with ExpressRoute configurations that **cross-advertise routes from hello public peering path toohello private peering path**.</span></span>  <span data-ttu-id="dda4b-151">Konfiguracji usługi ExpressRoute, które mają publicznej komunikacji równorzędnej skonfigurowane, otrzyma anonsów tras firmy Microsoft dla dużych zestawów zakresów adresów IP firmy Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="dda4b-151">ExpressRoute configurations that have public peering configured, will receive route advertisements from Microsoft for a large set of Microsoft Azure IP address ranges.</span></span>  <span data-ttu-id="dda4b-152">Jeśli między anonsowany w ścieżki prywatnej komunikacji równorzędnej hello tych zakresów adresów, wynik końcowy hello jest, że wszystkie pakiety wychodzącego z podsieci środowiska hello aplikacji usługi zostaną infrastruktury sieci lokalnej odbiorcy force — tunneled tooa.</span><span class="sxs-lookup"><span data-stu-id="dda4b-152">If these address ranges are cross-advertised on hello private peering path, hello end result is that all outbound network packets from hello App Service Environment's subnet will be force-tunneled tooa customer's on-premises network infrastructure.</span></span>  <span data-ttu-id="dda4b-153">Ten przepływ sieci nie jest obecnie obsługiwane w środowiskach usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="dda4b-153">This network flow is currently not supported with App Service Environments.</span></span>  <span data-ttu-id="dda4b-154">Rozwiązanie toothis problemem jest toostop tras między reklamy hello publicznej komunikacji równorzędnej ścieżka toohello prywatnej komunikacji równorzędnej ścieżka.</span><span class="sxs-lookup"><span data-stu-id="dda4b-154">One solution toothis problem is toostop cross-advertising routes from hello public peering path toohello private peering path.</span></span>
> 
> 

<span data-ttu-id="dda4b-155">Informacje na trasy zdefiniowane przez użytkownika jest dostępna w tym [omówienie][UDROverview].</span><span class="sxs-lookup"><span data-stu-id="dda4b-155">Background information on user defined routes is available in this [overview][UDROverview].</span></span>  

<span data-ttu-id="dda4b-156">Szczegółowe informacje na temat tworzenia i konfigurowania trasy zdefiniowane przez użytkownika jest dostępna w tym [jak tooGuide][UDRHowTo].</span><span class="sxs-lookup"><span data-stu-id="dda4b-156">Details on creating and configuring user defined routes is available in this [How tooGuide][UDRHowTo].</span></span>

## <a name="example-udr-configuration-for-an-app-service-environment"></a><span data-ttu-id="dda4b-157">Przykładowa konfiguracja przez środowisko usługi aplikacji</span><span class="sxs-lookup"><span data-stu-id="dda4b-157">Example UDR Configuration for an App Service Environment</span></span>
<span data-ttu-id="dda4b-158">**Wymagania wstępne**</span><span class="sxs-lookup"><span data-stu-id="dda4b-158">**Pre-requisites**</span></span>

1. <span data-ttu-id="dda4b-159">Instalowanie programu Azure Powershell z hello [Azure pobiera strony] [ AzureDownloads] (czerwiec 2015 lub nowszego z).</span><span class="sxs-lookup"><span data-stu-id="dda4b-159">Install Azure Powershell from hello [Azure Downloads page][AzureDownloads] (dated June 2015 or later).</span></span>  <span data-ttu-id="dda4b-160">W obszarze "Narzędzia wiersza polecenia" Brak łącza "Zainstaluj", w obszarze "Środowiska Windows Powershell" instalowanego hello najnowszych poleceń cmdlet programu Powershell.</span><span class="sxs-lookup"><span data-stu-id="dda4b-160">Under "Command-line tools" there is an "Install" link under "Windows Powershell" that will install hello latest Powershell cmdlets.</span></span>
2. <span data-ttu-id="dda4b-161">Zaleca się, że unikatowej podsieci został utworzony do wyłącznego użytku przez środowisko usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="dda4b-161">It is recommended that a unique subnet is created for exclusive use by an App Service Environment.</span></span>  <span data-ttu-id="dda4b-162">Dzięki temu tej podsieci toohello Udr stosowane hello będą otwierane tylko ruchu wychodzącego dla hello środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="dda4b-162">This ensures that hello UDRs applied toohello subnet will only open outbound traffic for hello App Service Environment.</span></span>
3. <span data-ttu-id="dda4b-163">**Ważne**: nie należy wdrażać hello środowiska usługi aplikacji do **po** hello następujące kroki konfiguracji zostaną wykonane.</span><span class="sxs-lookup"><span data-stu-id="dda4b-163">**Important**:  do not deploy hello App Service Environment until **after** hello following configuration steps are followed.</span></span>  <span data-ttu-id="dda4b-164">Dzięki temu, że połączenie sieciowe ruchu wychodzącego jest dostępny przed podjęciem próby wykonania toodeploy środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="dda4b-164">This ensures that outbound network connectivity is available before attempting toodeploy an App Service Environment.</span></span>

<span data-ttu-id="dda4b-165">**Krok 1: Tworzenie tabeli tras o nazwie**</span><span class="sxs-lookup"><span data-stu-id="dda4b-165">**Step 1:  Create a named route table**</span></span>

<span data-ttu-id="dda4b-166">Witaj następujący fragment kodu tworzy tabelę tras o nazwie "DirectInternetRouteTable" hello regionu zachodnie nam Azure:</span><span class="sxs-lookup"><span data-stu-id="dda4b-166">hello following snippet creates a route table called "DirectInternetRouteTable" in hello West US Azure region:</span></span>

    New-AzureRouteTable -Name 'DirectInternetRouteTable' -Location uswest

<span data-ttu-id="dda4b-167">**Krok 2: Utworzenie co najmniej jednej trasy w tabeli tras hello**</span><span class="sxs-lookup"><span data-stu-id="dda4b-167">**Step 2:  Create one or more routes in hello route table**</span></span>

<span data-ttu-id="dda4b-168">Konieczne będzie tooadd jeden lub więcej tabeli tras toohello trasy w kolejności tooenable wychodzący dostęp do Internetu.</span><span class="sxs-lookup"><span data-stu-id="dda4b-168">You will need tooadd one or more routes toohello route table in order tooenable outbound Internet access.</span></span>  

<span data-ttu-id="dda4b-169">Witaj zalecane podejście do konfigurowania toohello wychodzący dostęp, jest Internet toodefine trasę dla 0.0.0.0/0, jak pokazano poniżej.</span><span class="sxs-lookup"><span data-stu-id="dda4b-169">hello recommended approach for configuring outbound access toohello Internet is toodefine a route for 0.0.0.0/0 as shown below.</span></span>

    Get-AzureRouteTable -Name 'DirectInternetRouteTable' | Set-AzureRoute -RouteName 'Direct Internet Range 0' -AddressPrefix 0.0.0.0/0 -NextHopType Internet

<span data-ttu-id="dda4b-170">Należy pamiętać, tym 0.0.0.0/0 jest zakres adresów szerokie i jako takie zostaną zastąpione przez bardziej szczegółowych zakresów adresów anonsowane przez hello ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="dda4b-170">Remember that 0.0.0.0/0 is a broad address range, and as such will be overridden by more specific address ranges advertised by hello ExpressRoute.</span></span>  <span data-ttu-id="dda4b-171">toore-iteracyjne hello wcześniejszego zalecenia, przez trasa 0.0.0.0/0 powinny być używane w połączeniu z konfiguracją ExressRoute, która tylko anonsuje także 0.0.0.0/0.</span><span class="sxs-lookup"><span data-stu-id="dda4b-171">toore-iterate hello earlier recommendation, a UDR with a 0.0.0.0/0 route should be used in conjunction with an ExressRoute configuration that only advertises 0.0.0.0/0 as well.</span></span> 

<span data-ttu-id="dda4b-172">Alternatywnie można pobrać listę zakresy CIDR używanymi przez usługę Azure kompleksowe i zaktualizowane.</span><span class="sxs-lookup"><span data-stu-id="dda4b-172">As an alternative, you can download a comprehensive and updated list of CIDR ranges in use by Azure.</span></span>  <span data-ttu-id="dda4b-173">Witaj plik Xml zawierający wszystkie zakresy adresów Azure IP hello jest dostępna z hello [Microsoft Download Center][DownloadCenterAddressRanges].</span><span class="sxs-lookup"><span data-stu-id="dda4b-173">hello Xml file containing all of hello Azure IP address ranges is available from hello [Microsoft Download Center][DownloadCenterAddressRanges].</span></span>  

<span data-ttu-id="dda4b-174">Należy pamiętać jednak, że te zakresy ulegną zmianom, co wymaga okresowych aktualizacji ręcznej toohello zdefiniowane przez użytkownika tras tookeep synchronizację.  Ponadto ponieważ nie istnieje domyślny górny limit 100 tras w jednym przez, będzie konieczne zbyt "podsumowania" hello Azure adres zakresów toofit w limicie trasy hello 100, pamiętając, że przez zdefiniowanych tras muszą toobe dokładniej niż hello trasy anonsowane przez użytkownika ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="dda4b-174">Note though that these ranges change over time, thus necessitating periodic manual updates toohello user defined routes tookeep in sync.  Also, since there is a default upper limit of 100 routes in a single UDR, you will need too"summarize" hello Azure IP address ranges toofit within hello 100 route limit, keeping in mind that UDR defined routes need toobe more specific than hello routes advertised by your ExpressRoute.</span></span>  

<span data-ttu-id="dda4b-175">**Krok 3: Skojarz hello trasy tabeli toohello podsieci zawierającego hello środowiska usługi aplikacji**</span><span class="sxs-lookup"><span data-stu-id="dda4b-175">**Step 3:  Associate hello route table toohello subnet containing hello App Service Environment**</span></span>

<span data-ttu-id="dda4b-176">ostatni krok konfiguracji Hello jest tooassociate hello trasy tabeli toohello podsieci wdrożonym hello środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="dda4b-176">hello last  configuration step is tooassociate hello route table toohello subnet where hello App Service Environment will be deployed.</span></span>  <span data-ttu-id="dda4b-177">Witaj poniższe polecenie powoduje skojarzenie toohello "DirectInternetRouteTable" hello "ASESubnet", który będzie zawierać ostatecznie środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="dda4b-177">hello following command associates hello "DirectInternetRouteTable" toohello "ASESubnet" that will eventually contain an App Service Environment.</span></span>

    Set-AzureSubnetRouteTable -VirtualNetworkName 'YourVirtualNetworkNameHere' -SubnetName 'ASESubnet' -RouteTableName 'DirectInternetRouteTable'


<span data-ttu-id="dda4b-178">**Krok 4: Końcowe czynności**</span><span class="sxs-lookup"><span data-stu-id="dda4b-178">**Step 4:  Final Steps**</span></span>

<span data-ttu-id="dda4b-179">Po tabeli tras hello jest powiązane toohello podsieci, zaleca się toofirst testu i Potwierdź hello przeznaczone efekt.</span><span class="sxs-lookup"><span data-stu-id="dda4b-179">Once hello route table is bound toohello subnet, it is recommended toofirst test and confirm hello intended effect.</span></span>  <span data-ttu-id="dda4b-180">Na przykład wdrożyć maszynę wirtualną do podsieci hello i upewnij się, że:</span><span class="sxs-lookup"><span data-stu-id="dda4b-180">For example, deploy a virtual machine into hello subnet and confirm that:</span></span>

* <span data-ttu-id="dda4b-181">Ruch wychodzący tooboth Azure i innych niż Azure punkty końcowe wymienione wcześniej w w tym artykule jest **nie** przepływu dół hello obwodu usługi expressroute.</span><span class="sxs-lookup"><span data-stu-id="dda4b-181">Outbound traffic tooboth Azure and non-Azure endpoints mentioned earlier in this article is **not** flowing down hello ExpressRoute circuit.</span></span>  <span data-ttu-id="dda4b-182">Jest bardzo ważne, tooverify tego zachowania, ponieważ w przypadku ruchu wychodzącego z podsieci hello nadal wymuszone tunelowane lokalnymi, tworzenie środowiska usługi aplikacji zawsze spowoduje niepowodzenie.</span><span class="sxs-lookup"><span data-stu-id="dda4b-182">It is very important tooverify this behavior, since if outbound traffic from hello subnet is still being forced tunneled on-premises, App Service Environment creation will always fail.</span></span> 
* <span data-ttu-id="dda4b-183">Wyszukiwania DNS dla punktów końcowych hello wspomniano wcześniej, wszystkie rozwiązuje poprawnie.</span><span class="sxs-lookup"><span data-stu-id="dda4b-183">DNS lookups for hello endpoints mentioned earlier are all resolving properly.</span></span> 

<span data-ttu-id="dda4b-184">Po hello powyżej kroki są potwierdzone, konieczne będzie maszyny wirtualnej hello toodelete ponieważ hello podsieci musi toobe "pusty" w hello powitalne czas tworzenia środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="dda4b-184">Once hello above steps are confirmed, you will need toodelete hello virtual machine because hello subnet needs toobe "empty" at hello time hello App Service Environment is created.</span></span>

<span data-ttu-id="dda4b-185">Następnie kontynuuj tworzenie środowiska usługi aplikacji!</span><span class="sxs-lookup"><span data-stu-id="dda4b-185">Then proceed with creating an App Service Environment!</span></span>

## <a name="getting-started"></a><span data-ttu-id="dda4b-186">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="dda4b-186">Getting started</span></span>
<span data-ttu-id="dda4b-187">Wszystkie artykuły i w jaki sposób — do użytkownika dla środowiska usługi aplikacji są dostępne w hello [Plik README dla środowiska usługi aplikacji](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="dda4b-187">All articles and How-To's for App Service Environments are available in hello [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="dda4b-188">tooget wprowadzenie do środowiska usługi App Service, zobacz [tooApp wprowadzenie środowiska usługi][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="dda4b-188">tooget started with App Service Environments, see [Introduction tooApp Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="dda4b-189">Aby uzyskać więcej informacji na temat hello platformy Azure App Service, zobacz [usłudze Azure App Service][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="dda4b-189">For more information about hello Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

<!-- LINKS -->
[virtualnetwork]: http://azure.microsoft.com/services/virtual-network/
[ExpressRoute]: http://azure.microsoft.com/services/expressroute/
[requiredports]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[NetworkSecurityGroups]: http://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[UDROverview]: http://azure.microsoft.com/documentation/articles/virtual-networks-udr-overview/
[UDRHowTo]: http://azure.microsoft.com/documentation/articles/virtual-networks-udr-how-to/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[AzureDownloads]: http://azure.microsoft.com/en-us/downloads/ 
[DownloadCenterAddressRanges]: http://www.microsoft.com/download/details.aspx?id=41653  
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[NewPortal]:  https://portal.azure.com


<!-- IMAGES -->
