---
title: "Jak kontrolować ruch przychodzący do środowiska usługi aplikacji"
description: "Więcej informacji na temat sposobu konfigurowania reguły zabezpieczeń sieciowych, aby kontrolować ruch przychodzący do środowiska usługi aplikacji."
services: app-service
documentationcenter: 
author: ccompy
manager: erikre
editor: 
ms.assetid: 4cc82439-8791-48a4-9485-de6d8e1d1a08
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/11/2017
ms.author: stefsch
ms.openlocfilehash: ee0a2248a1cd5d76f87b280de05410b94f96c8af
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-control-inbound-traffic-to-an-app-service-environment"></a><span data-ttu-id="367a7-103">Jak kontrolować ruch przychodzący do środowiska usługi aplikacji</span><span class="sxs-lookup"><span data-stu-id="367a7-103">How To Control Inbound Traffic to an App Service Environment</span></span>
## <a name="overview"></a><span data-ttu-id="367a7-104">Omówienie</span><span class="sxs-lookup"><span data-stu-id="367a7-104">Overview</span></span>
<span data-ttu-id="367a7-105">Środowiska usługi aplikacji mogą być tworzone w **albo** sieci wirtualnej platformy Azure Resource Manager **lub** klasycznego modelu wdrażania [sieci wirtualnej][virtualnetwork].</span><span class="sxs-lookup"><span data-stu-id="367a7-105">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model [virtual network][virtualnetwork].</span></span>  <span data-ttu-id="367a7-106">Podczas tworzenia środowiska usługi aplikacji można zdefiniować nowej sieci wirtualnej i nową podsieć.</span><span class="sxs-lookup"><span data-stu-id="367a7-106">A new virtual network and new subnet can be defined at the time an App Service Environment is created.</span></span>  <span data-ttu-id="367a7-107">Alternatywnie można utworzyć środowiska usługi aplikacji w istniejącej sieci wirtualnej i wstępnie istniejącą podsieć.</span><span class="sxs-lookup"><span data-stu-id="367a7-107">Alternatively, an App Service Environment can be created in a pre-existing virtual network and pre-existing subnet.</span></span>  <span data-ttu-id="367a7-108">Wraz ze zmianą w czerwca 2016 ASEs można także wdrożyć w sieci wirtualnych korzystających z zakresów adresów publicznych lub przestrzenie adresowe RFC1918 (tj.)</span><span class="sxs-lookup"><span data-stu-id="367a7-108">With a change made in June 2016, ASEs can also be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e.</span></span> <span data-ttu-id="367a7-109">adresy prywatne).</span><span class="sxs-lookup"><span data-stu-id="367a7-109">private addresses).</span></span>  <span data-ttu-id="367a7-110">Więcej informacji na temat tworzenia środowiska usługi aplikacji można znaleźć [tworzenie środowiska usługi aplikacji][HowToCreateAnAppServiceEnvironment].</span><span class="sxs-lookup"><span data-stu-id="367a7-110">For more details on creating an App Service Environment see [How To Create an App Service Environment][HowToCreateAnAppServiceEnvironment].</span></span>

<span data-ttu-id="367a7-111">Środowiska usługi aplikacji musi zawsze można utworzyć w podsieci, ponieważ podsieć zawiera granic sieci, która może służyć do blokowania przychodzący ruch związany z nadrzędnego urządzeń i usług w taki sposób, że ruch HTTP i HTTPS jest dopuszczalne tylko z określonych adresów IP nadrzędnego.</span><span class="sxs-lookup"><span data-stu-id="367a7-111">An App Service Environment must always be created within a subnet because a subnet provides a network boundary which can be used to lock down inbound traffic behind upstream devices and services such that HTTP and HTTPS traffic is only accepted from specific upstream IP addresses.</span></span>

<span data-ttu-id="367a7-112">Przychodzący i wychodzący ruch sieciowy w podsieci jest kontrolowany przy użyciu [sieciowej grupy zabezpieczeń][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="367a7-112">Inbound and outbound network traffic on a subnet is controlled using a [network security group][NetworkSecurityGroups].</span></span> <span data-ttu-id="367a7-113">Kontrolowanie ruchu przychodzącego wymaga tworzenia reguły zabezpieczeń sieciowych w grupie zabezpieczeń sieci, a następnie przypisanie zabezpieczenia sieci grupy podsieć zawierająca środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="367a7-113">Controlling inbound traffic requires creating network security rules in a network security group, and then assigning the network security group the subnet containing the App Service Environment.</span></span>

<span data-ttu-id="367a7-114">Po grupy zabezpieczeń sieci jest przypisany do podsieci, ruch przychodzący do aplikacji w środowisku usługi aplikacji jest dozwolone/blokowane oparte na Zezwalaj i Odmów reguł zdefiniowanych w grupie zabezpieczeń sieci.</span><span class="sxs-lookup"><span data-stu-id="367a7-114">Once a network security group is assigned to a subnet, inbound traffic to apps in the App Service Environment is allowed/blocked based on the allow and deny rules defined in the network security group.</span></span>

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="inbound-network-ports-used-in-an-app-service-environment"></a><span data-ttu-id="367a7-115">Przychodzący porty używane w środowisku usługi aplikacji</span><span class="sxs-lookup"><span data-stu-id="367a7-115">Inbound Network Ports Used in an App Service Environment</span></span>
<span data-ttu-id="367a7-116">Przed blokowania przychodzącego ruchu sieciowego z sieciową grupą zabezpieczeń, należy znać zbiór wymaganych i opcjonalnych porty używane przez środowisko usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="367a7-116">Before locking down inbound network traffic with a network security group, it is important to know the set of required and optional network ports used by an App Service Environment.</span></span>  <span data-ttu-id="367a7-117">Zamykanie przypadkowo poza ruch do Niektóre porty może spowodować utratę funkcjonalności w środowisku usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="367a7-117">Accidentally closing off traffic to some ports can result in loss of functionality in an App Service Environment.</span></span>

<span data-ttu-id="367a7-118">Poniżej znajduje się lista portów używanych przez środowisko usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="367a7-118">The following is a list of ports used by an App Service Environment.</span></span> <span data-ttu-id="367a7-119">Wszystkie porty są **TCP**, chyba że wyraźnie inaczej:</span><span class="sxs-lookup"><span data-stu-id="367a7-119">All ports are **TCP**, unless otherwise clearly noted:</span></span>

* <span data-ttu-id="367a7-120">454: **wymagany port** używanych przez infrastrukturę platformy Azure do zarządzania i obsługi środowiska usługi App Service za pomocą protokołu SSL.</span><span class="sxs-lookup"><span data-stu-id="367a7-120">454:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="367a7-121">Nie blokuje ruchu skierowanego do tego portu.</span><span class="sxs-lookup"><span data-stu-id="367a7-121">Do not block traffic to this port.</span></span>  <span data-ttu-id="367a7-122">Port ten jest zawsze powiązana do publicznego adresu IP z ASE.</span><span class="sxs-lookup"><span data-stu-id="367a7-122">This port is always bound to the public VIP of an ASE.</span></span>
* <span data-ttu-id="367a7-123">455: **wymagany port** używanych przez infrastrukturę platformy Azure do zarządzania i obsługi środowiska usługi App Service za pomocą protokołu SSL.</span><span class="sxs-lookup"><span data-stu-id="367a7-123">455:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="367a7-124">Nie blokuje ruchu skierowanego do tego portu.</span><span class="sxs-lookup"><span data-stu-id="367a7-124">Do not block traffic to this port.</span></span>  <span data-ttu-id="367a7-125">Port ten jest zawsze powiązana do publicznego adresu IP z ASE.</span><span class="sxs-lookup"><span data-stu-id="367a7-125">This port is always bound to the public VIP of an ASE.</span></span>
* <span data-ttu-id="367a7-126">80: domyślny port dla ruchu przychodzącego protokołu HTTP do aplikacji działających w plany usługi App Service w środowisku usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="367a7-126">80:  Default port for inbound HTTP traffic to apps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="367a7-127">W elemencie ASE włączone ILB ten port jest powiązany adres ILB ASE.</span><span class="sxs-lookup"><span data-stu-id="367a7-127">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>
* <span data-ttu-id="367a7-128">443: domyślny port dla ruchu przychodzącego protokołu SSL do aplikacji działających w plany usługi App Service w środowisku usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="367a7-128">443: Default port for inbound SSL traffic to apps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="367a7-129">W elemencie ASE włączone ILB ten port jest powiązany adres ILB ASE.</span><span class="sxs-lookup"><span data-stu-id="367a7-129">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>
* <span data-ttu-id="367a7-130">21: kanału kontroli w przypadku usługi FTP.</span><span class="sxs-lookup"><span data-stu-id="367a7-130">21:  Control channel for FTP.</span></span>  <span data-ttu-id="367a7-131">Ten port można bezpiecznie zablokowane, jeśli nie jest używany FTP.</span><span class="sxs-lookup"><span data-stu-id="367a7-131">This port can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="367a7-132">W elemencie ASE włączone ILB ten port może być powiązana z adresem ILB dla ASE.</span><span class="sxs-lookup"><span data-stu-id="367a7-132">On an ILB-enabled ASE, this port can be bound to the ILB address for an ASE.</span></span>
* <span data-ttu-id="367a7-133">990: kanał kontrolny dla FTPS.</span><span class="sxs-lookup"><span data-stu-id="367a7-133">990:  Control channel for FTPS.</span></span>  <span data-ttu-id="367a7-134">Ten port można bezpiecznie zablokowane, jeśli nie jest używany FTPS.</span><span class="sxs-lookup"><span data-stu-id="367a7-134">This port can be safely blocked if FTPS is not being used.</span></span>  <span data-ttu-id="367a7-135">W elemencie ASE włączone ILB ten port może być powiązana z adresem ILB dla ASE.</span><span class="sxs-lookup"><span data-stu-id="367a7-135">On an ILB-enabled ASE, this port can be bound to the ILB address for an ASE.</span></span>
* <span data-ttu-id="367a7-136">10001 10020: kanały danych w przypadku usługi FTP.</span><span class="sxs-lookup"><span data-stu-id="367a7-136">10001-10020: Data channels for FTP.</span></span>  <span data-ttu-id="367a7-137">Podobnie jak w przypadku kanał kontrolny tych portów można bezpiecznie zablokowane, jeśli FTP nie jest używany.</span><span class="sxs-lookup"><span data-stu-id="367a7-137">As with the control channel, these ports can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="367a7-138">W elemencie ASE włączone ILB ten port może być powiązana ASE ILB adres.</span><span class="sxs-lookup"><span data-stu-id="367a7-138">On an ILB-enabled ASE, this port can be bound to the ASE's ILB address.</span></span>
* <span data-ttu-id="367a7-139">4016: używanej do zdalnego debugowania w programie Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="367a7-139">4016: Used for remote debugging with Visual Studio 2012.</span></span>  <span data-ttu-id="367a7-140">Ten port można bezpiecznie zablokowane, jeśli funkcja nie jest używany.</span><span class="sxs-lookup"><span data-stu-id="367a7-140">This port can be safely blocked if the feature is not being used.</span></span>  <span data-ttu-id="367a7-141">W elemencie ASE włączone ILB ten port jest powiązany adres ILB ASE.</span><span class="sxs-lookup"><span data-stu-id="367a7-141">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>
* <span data-ttu-id="367a7-142">4018: używany do zdalnego debugowania za pomocą programu Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="367a7-142">4018: Used for remote debugging with Visual Studio 2013.</span></span>  <span data-ttu-id="367a7-143">Ten port można bezpiecznie zablokowane, jeśli funkcja nie jest używany.</span><span class="sxs-lookup"><span data-stu-id="367a7-143">This port can be safely blocked if the feature is not being used.</span></span>  <span data-ttu-id="367a7-144">W elemencie ASE włączone ILB ten port jest powiązany adres ILB ASE.</span><span class="sxs-lookup"><span data-stu-id="367a7-144">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>
* <span data-ttu-id="367a7-145">4020: używany do zdalnego debugowania za pomocą programu Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="367a7-145">4020: Used for remote debugging with Visual Studio 2015.</span></span>  <span data-ttu-id="367a7-146">Ten port można bezpiecznie zablokowane, jeśli funkcja nie jest używany.</span><span class="sxs-lookup"><span data-stu-id="367a7-146">This port can be safely blocked if the feature is not being used.</span></span>  <span data-ttu-id="367a7-147">W elemencie ASE włączone ILB ten port jest powiązany adres ILB ASE.</span><span class="sxs-lookup"><span data-stu-id="367a7-147">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>

## <a name="outbound-connectivity-and-dns-requirements"></a><span data-ttu-id="367a7-148">Łączność wychodząca i wymagania dotyczące systemu DNS</span><span class="sxs-lookup"><span data-stu-id="367a7-148">Outbound Connectivity and DNS Requirements</span></span>
<span data-ttu-id="367a7-149">Dla środowiska usługi aplikacji działać poprawnie wymagany jest również wychodzący dostęp do różnych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="367a7-149">For an App Service Environment to function properly, it also requires outbound access to various endpoints.</span></span> <span data-ttu-id="367a7-150">Pełna lista zewnętrznych punktów końcowych używanych przez ASE znajduje się w sekcji "Wymagana łączność sieciową" [konfiguracji sieci ExpressRoute](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) artykułu.</span><span class="sxs-lookup"><span data-stu-id="367a7-150">A full list of the external endpoints used by an ASE is in the "Required Network Connectivity" section of the [Network Configuration for ExpressRoute](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) article.</span></span>

<span data-ttu-id="367a7-151">Środowiska usługi aplikacji wymaga prawidłowy infrastruktury DNS skonfigurowane dla sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="367a7-151">App Service Environments require a valid DNS infrastructure configured for the virtual network.</span></span>  <span data-ttu-id="367a7-152">Jeśli z jakiegokolwiek powodu konfiguracji DNS zostaną zmienione po utworzeniu środowiska usługi aplikacji, deweloperzy można wymusić środowiska usługi aplikacji do pobrania dla nowej konfiguracji DNS.</span><span class="sxs-lookup"><span data-stu-id="367a7-152">If for any reason the DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment to pick up the new DNS configuration.</span></span>  <span data-ttu-id="367a7-153">Wyzwolenie stopniowego ponowny rozruch środowiska przy użyciu ikony "Restart" znajduje się w górnej części bloku zarządzania środowiska usługi aplikacji w [portalu Azure] [ NewPortal] spowoduje, że środowisko do pobrania dla nowej konfiguracji DNS.</span><span class="sxs-lookup"><span data-stu-id="367a7-153">Triggering a rolling environment reboot using the "Restart" icon located at the top of the App Service Environment management blade in the [Azure portal][NewPortal] will cause the environment to pick up the new DNS configuration.</span></span>

<span data-ttu-id="367a7-154">Zalecane jest również, że żadnych niestandardowych serwerów DNS w sieci wirtualnej, należy skonfigurować wcześniejsze przed utworzeniem środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="367a7-154">It is also recommended that any custom DNS servers on the vnet be setup ahead of time prior to creating an App Service Environment.</span></span>  <span data-ttu-id="367a7-155">Konfiguracja DNS sieci wirtualnej zostanie zmieniona, podczas tworzenia środowiska usługi aplikacji, która spowoduje niepowodzenie procesu tworzenia środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="367a7-155">If a virtual network's DNS configuration is changed while an App Service Environment is being created, that will result in the App Service Environment creation process failing.</span></span>  <span data-ttu-id="367a7-156">W podobny szyjnej Jeśli istnieje niestandardowy serwer DNS na drugim końcu bramy sieci VPN, a serwer DNS jest nieosiągalny lub jest niedostępny, proces tworzenia środowiska usługi aplikacji również powiedzie się.</span><span class="sxs-lookup"><span data-stu-id="367a7-156">In a similar vein, if a custom DNS server exists on the other end of a VPN gateway, and the DNS server is unreachable or unavailable, the App Service Environment creation process will also fail.</span></span>

## <a name="creating-a-network-security-group"></a><span data-ttu-id="367a7-157">Tworzenie grupy zabezpieczeń sieci</span><span class="sxs-lookup"><span data-stu-id="367a7-157">Creating a Network Security Group</span></span>
<span data-ttu-id="367a7-158">Aby uzyskać szczegółowe informacje o sposobie działania grup zabezpieczeń sieci, zobacz następujące [informacji][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="367a7-158">For full details on how network security groups work see the following [information][NetworkSecurityGroups].</span></span>  <span data-ttu-id="367a7-159">Zarządzanie usługami Azure, które w poniższym przykładzie dotyka na prezentuje grup zabezpieczeń sieci, nacisk na konfigurowanie i stosowanie sieciową grupę zabezpieczeń do podsieci, która zawiera środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="367a7-159">The Azure Service Management example below touches on highlights of network security groups, with a focus on configuring and applying a network security group to a subnet that contains an App Service Environment.</span></span>

<span data-ttu-id="367a7-160">**Uwaga:** grup zabezpieczeń sieci można skonfigurować, używając graficznie [Azure Portal](https://portal.azure.com) lub za pomocą programu Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="367a7-160">**Note:** Network security groups can be configured graphically using the [Azure Portal](https://portal.azure.com) or through Azure PowerShell.</span></span>

<span data-ttu-id="367a7-161">Grupy zabezpieczeń sieci najpierw są tworzone jako element autonomiczny skojarzone z subskrypcją.</span><span class="sxs-lookup"><span data-stu-id="367a7-161">Network security groups are first created as a standalone entity associated with a subscription.</span></span> <span data-ttu-id="367a7-162">Ponieważ grupy zabezpieczeń sieci są tworzone w regionie Azure, upewnij się, że w tym samym regionie co środowiska usługi aplikacji zostanie utworzona grupa zabezpieczeń sieci.</span><span class="sxs-lookup"><span data-stu-id="367a7-162">Since network security groups are created in an Azure region, ensure that the network security group is created in the same region as the App Service Environment.</span></span>

<span data-ttu-id="367a7-163">Poniżej przedstawiono tworzenie grupy zabezpieczeń sieci:</span><span class="sxs-lookup"><span data-stu-id="367a7-163">The following demonstrates creating a network security group:</span></span>

    New-AzureNetworkSecurityGroup -Name "testNSGexample" -Location "South Central US" -Label "Example network security group for an app service environment"

<span data-ttu-id="367a7-164">Po utworzeniu grupy zabezpieczeń sieci, co najmniej jednej reguły zabezpieczeń sieci są dodawane do niego.</span><span class="sxs-lookup"><span data-stu-id="367a7-164">Once a network security group is created, one or more network security rules are added to it.</span></span>  <span data-ttu-id="367a7-165">Ponieważ zestaw reguł, mogą ulec zmianie w czasie, zalecane jest Rozmieść schematu numerowania służącą do priorytety reguł ułatwiają wstawić dodatkowych reguł wraz z upływem czasu.</span><span class="sxs-lookup"><span data-stu-id="367a7-165">Since the set of rules may change over time, it is recommended to space out the numbering scheme used for rule priorities to make it easy to insert additional rules over time.</span></span>

<span data-ttu-id="367a7-166">W poniższym przykładzie pokazano regułę, która jawnie udziela dostępu do portów zarządzania wymagane przez infrastrukturę platformy Azure do zarządzania i obsługa środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="367a7-166">The example below shows a rule that explicitly grants access to the management ports needed by the Azure infrastructure to manage and maintain an App Service Environment.</span></span>  <span data-ttu-id="367a7-167">Należy pamiętać, że cały ruch zarządzania przepływa za pośrednictwem protokołu SSL i jest zabezpieczone certyfikaty klienta, nawet jeśli są otwarte porty są niedostępne dla dowolnej jednostki inne niż infrastruktura zarządzania platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="367a7-167">Note that all management traffic flows over SSL and is secured by client certificates, so even though the ports are opened they are inaccessible by any entity other than Azure management infrastructure.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "ALLOW AzureMngmt" -Type Inbound -Priority 100 -Action Allow -SourceAddressPrefix 'INTERNET'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '454-455' -Protocol TCP


<span data-ttu-id="367a7-168">Zablokowanie dostępu do portu 80 i 443 "ukryć" środowiska usługi aplikacji za nadrzędnego urządzenia lub usługi, należy znać adres IP nadrzędnego.</span><span class="sxs-lookup"><span data-stu-id="367a7-168">When locking down access to port 80 and 443 to "hide" an App Service Environment behind upstream devices or services, you will need to know the upstream IP address.</span></span>  <span data-ttu-id="367a7-169">Na przykład, jeśli używasz zapory aplikacji sieci web (WAF) zapory aplikacji sieci Web będzie mieć własny adres IP (lub adresy), których używa podczas buforowania ruchu podrzędne środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="367a7-169">For example, if you are using a web application firewall (WAF), the WAF will have its own IP address (or addresses) which it uses when proxying traffic to a downstream App Service Environment.</span></span>  <span data-ttu-id="367a7-170">Musisz użyć tego adresu IP w *SourceAddressPrefix* parametru reguły zabezpieczeń sieci.</span><span class="sxs-lookup"><span data-stu-id="367a7-170">You will need to use this IP address in the *SourceAddressPrefix* parameter of a network security rule.</span></span>

<span data-ttu-id="367a7-171">W poniższym przykładzie ruch przychodzący z określonego adresu IP nadrzędnego jest jawnie dozwolone.</span><span class="sxs-lookup"><span data-stu-id="367a7-171">In the example below, inbound traffic from a specific upstream IP address is explicitly allowed.</span></span>  <span data-ttu-id="367a7-172">Adres *1.2.3.4* jest używany jako symbol zastępczy dla adresu IP nadrzędnego zapory aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="367a7-172">The address *1.2.3.4* is used as a placeholder for the IP address of an upstream WAF.</span></span>  <span data-ttu-id="367a7-173">Zmień wartość do dopasowania adres używany przez urządzenie nadrzędnego lub usługi.</span><span class="sxs-lookup"><span data-stu-id="367a7-173">Change the value to match the address used by your upstream device or service.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTP" -Type Inbound -Priority 200 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '80' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTPS" -Type Inbound -Priority 300 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '443' -Protocol TCP

<span data-ttu-id="367a7-174">W razie potrzeby Obsługa FTP następujące reguły mogą służyć jako szablon, można przyznać dostęp do danych i port kontroli FTP portów kanału.</span><span class="sxs-lookup"><span data-stu-id="367a7-174">If FTP support is desired, the following rules can be used as a template to grant access to the FTP control port and data channel ports.</span></span>  <span data-ttu-id="367a7-175">Ponieważ FTP jest protokołem stanowe, nie można kierować ruchem FTP za pomocą tradycyjnych urządzenia zapory lub serwera proxy HTTP/HTTPS.</span><span class="sxs-lookup"><span data-stu-id="367a7-175">Since FTP is a stateful protocol, you may not be able to route FTP traffic through a traditional HTTP/HTTPS firewall or proxy device.</span></span>  <span data-ttu-id="367a7-176">W takim przypadku należy ustawić *SourceAddressPrefix* innej wartości — na przykład adres IP zakresu maszyn deweloperem lub wdrażania na FTP, które są uruchomione klientów.</span><span class="sxs-lookup"><span data-stu-id="367a7-176">In this case you will need to set the *SourceAddressPrefix* to a different value - for example the IP address range of developer or deployment machines on which FTP clients are running.</span></span> 

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPCtrl" -Type Inbound -Priority 400 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '21' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPDataRange" -Type Inbound -Priority 500 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '10001-10020' -Protocol TCP

<span data-ttu-id="367a7-177">(**Uwaga:** zakres portów kanału danych mogą ulec zmianie w okresie używania wersji zapoznawczej.)</span><span class="sxs-lookup"><span data-stu-id="367a7-177">(**Note:**  the data channel port range may change during the preview period.)</span></span>

<span data-ttu-id="367a7-178">Jeśli używana jest debugowanie zdalne z programem Visual Studio, następujące reguły pokazują, jak można udzielić dostępu.</span><span class="sxs-lookup"><span data-stu-id="367a7-178">If remote debugging with Visual Studio is used, the following rules demonstrate how to grant access.</span></span>  <span data-ttu-id="367a7-179">Istnieje reguła osobne dla każdej obsługiwanej wersji programu Visual Studio, ponieważ każda wersja używa innego portu do zdalnego debugowania.</span><span class="sxs-lookup"><span data-stu-id="367a7-179">There is a separate rule for each supported version of Visual Studio since each version uses a different port for remote debugging.</span></span>  <span data-ttu-id="367a7-180">Podobnie jak w przypadku dostępu FTP zdalnego debugowania ruchu może nie odzwierciedlać prawidłowo za pośrednictwem tradycyjnych zapory aplikacji sieci Web lub serwera proxy urządzenia.</span><span class="sxs-lookup"><span data-stu-id="367a7-180">As with FTP access, remote debugging traffic may not flow properly through a traditional WAF or proxy device.</span></span>  <span data-ttu-id="367a7-181">*SourceAddressPrefix* zamiast tego można ustawić zakresu adresów IP maszyn developer działanie programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="367a7-181">The *SourceAddressPrefix* can instead be set to the IP address range of developer machines running Visual Studio.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2012" -Type Inbound -Priority 600 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4016' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2013" -Type Inbound -Priority 700 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4018' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2015" -Type Inbound -Priority 800 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4020' -Protocol TCP

## <a name="assigning-a-network-security-group-to-a-subnet"></a><span data-ttu-id="367a7-182">Przypisywanie sieciowej grupy zabezpieczeń do podsieci</span><span class="sxs-lookup"><span data-stu-id="367a7-182">Assigning a Network Security Group to a Subnet</span></span>
<span data-ttu-id="367a7-183">Grupa zabezpieczeń sieci ma domyślną regułę zabezpieczeń, która nie zezwala na dostęp do całego zewnętrznego ruchu.</span><span class="sxs-lookup"><span data-stu-id="367a7-183">A network security group has a default security rule which denies access to all external traffic.</span></span>  <span data-ttu-id="367a7-184">Wynik z połączenia sieci zasad zabezpieczeń opisanych powyżej i domyślną regułę zabezpieczeń blokuje ruch przychodzący, jest tylko ruch z zakresów adresów źródłowy skojarzony z *Zezwalaj* akcji będą mogli przesyłać dane do aplikacji działających w środowisku usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="367a7-184">The result from combining the network security rules described above, and the default security rule blocking inbound traffic, is that only traffic from source address ranges associated with an *Allow* action will be able to send traffic to apps running in an App Service Environment.</span></span>

<span data-ttu-id="367a7-185">Po sieciowej grupy zabezpieczeń jest wypełniane przy użyciu reguły zabezpieczeń, musi zostać przypisane do podsieci, zawierającej środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="367a7-185">After a network security group is populated with security rules, it needs to be assigned to the subnet containing the App Service Environment.</span></span>  <span data-ttu-id="367a7-186">Polecenie przypisania odwołuje się zarówno nazwę sieci wirtualnej, w którym znajduje się środowiska usługi aplikacji, jak i nazwę podsieci, w której został utworzony środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="367a7-186">The assignment command references both the name of the virtual network where the App Service Environment resides, as well as the name of the subnet where the App Service Environment was created.</span></span>  

<span data-ttu-id="367a7-187">W poniższym przykładzie pokazano sieciową grupę zabezpieczeń do podsieci i sieci wirtualnej:</span><span class="sxs-lookup"><span data-stu-id="367a7-187">The example below shows a network security group being assigned to a subnet and virtual network:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityGroupToSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

<span data-ttu-id="367a7-188">Po pomyślnym przypisanie do grupy zabezpieczeń sieci (przypisanie jest długotrwałych operacji i może zająć kilka minut), tylko ruchu przychodzącego ruchu dopasowania *Zezwalaj* reguły pomyślnie osiągną aplikacji w środowisku usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="367a7-188">Once the network security group assignment succeeds (the assignment is a long-running operations and can take a few minutes to complete), only inbound traffic matching *Allow* rules will successfully reach apps in the App Service Environment.</span></span>

<span data-ttu-id="367a7-189">Aby informacje były kompletne poniższym przykładzie pokazano, jak usunąć i w związku z tym dis-skojarzenia sieciowej grupy zabezpieczeń z podsieci:</span><span class="sxs-lookup"><span data-stu-id="367a7-189">For completeness the following example shows how to remove and thus dis-associate the network security group from the subnet:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Remove-AzureNetworkSecurityGroupFromSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

## <a name="special-considerations-for-explicit-ip-ssl"></a><span data-ttu-id="367a7-190">Uwagi dotyczące protokołu SSL jawnego adresu IP</span><span class="sxs-lookup"><span data-stu-id="367a7-190">Special Considerations for Explicit IP-SSL</span></span>
<span data-ttu-id="367a7-191">Jeśli aplikacja jest konfigurowana jawne adresów IP protokołu SSL (dotyczy *tylko* do ASEs mających publicznego adresu VIP), zamiast używać domyślnego adresu IP środowiska usługi aplikacji, HTTP i HTTPS ruchu, jest przenoszony do podsieci za pośrednictwem innego zestawu porty inne niż porty 80 i 443.</span><span class="sxs-lookup"><span data-stu-id="367a7-191">If an app is configured with an explicit IP-SSL address (applicable *only* to ASEs that have a public VIP), instead of using the default IP address of the App Service Environment, both HTTP and HTTPS traffic flows into the subnet over a different set of ports other than ports 80 and 443.</span></span>

<span data-ttu-id="367a7-192">Poszczególne pary porty używane przez każdy adres IP SSL można znaleźć w interfejsie użytkownika portalu z bloku UX szczegóły środowiska usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="367a7-192">The individual pair of ports used by each IP-SSL address can be found in the portal user interface from the App Service Environment's details UX blade.</span></span>  <span data-ttu-id="367a7-193">Wybierz opcję "wszystkie ustawienia"--> "Adresów IP".</span><span class="sxs-lookup"><span data-stu-id="367a7-193">Select "All settings" --> "IP addresses".</span></span>  <span data-ttu-id="367a7-194">Blok "Adresów IP" zawiera spis wszystkich jawnie skonfigurowanych adresów IP protokołu SSL dla środowiska usługi aplikacji oraz pary port specjalny, który jest używany do kierowania ruchu HTTP i HTTPS, które są skojarzone z poszczególnych adresów IP protokołu SSL.</span><span class="sxs-lookup"><span data-stu-id="367a7-194">The "IP addresses" blade shows a table of all explicitly configured IP-SSL addresses for the App Service Environment, along with the special port pair that is used to route HTTP and HTTPS traffic associated with each IP-SSL address.</span></span>  <span data-ttu-id="367a7-195">Jest to pary port, który musi zostać użyte dla parametrów DestinationPortRange podczas konfigurowania reguły do grupy zabezpieczeń sieci.</span><span class="sxs-lookup"><span data-stu-id="367a7-195">It is this port pair that needs to be used for the DestinationPortRange parameters when configuring rules in a network security group.</span></span>

<span data-ttu-id="367a7-196">Po skonfigurowaniu aplikacji w elemencie ASE do używania protokołu SSL IP klientów zewnętrznych nie będą widzieć i nie trzeba martwić mapowanie pary specjalne portu.</span><span class="sxs-lookup"><span data-stu-id="367a7-196">When an app on an ASE is configured to use IP-SSL, external customers will not see and do not need to worry about the special port pair mapping.</span></span>  <span data-ttu-id="367a7-197">Ruch do aplikacji będzie zwykle przepływać do skonfigurowanych adresów IP protokołu SSL.</span><span class="sxs-lookup"><span data-stu-id="367a7-197">Traffic to the apps will flow normally to the configured IP-SSL address.</span></span>  <span data-ttu-id="367a7-198">Tłumaczenie parę port specjalny automatycznie odbywa się wewnętrznie podczas końcowej gałęzi routingu ruchu w podsieci, zawierającej ASE.</span><span class="sxs-lookup"><span data-stu-id="367a7-198">The translation to the special port pair automatically happens internally during the final leg of routing traffic into the subnet containing the ASE.</span></span> 

## <a name="getting-started"></a><span data-ttu-id="367a7-199">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="367a7-199">Getting started</span></span>
<span data-ttu-id="367a7-200">Wprowadzenie do środowiska usługi App Service, zobacz [wprowadzenie do środowiska usługi aplikacji][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="367a7-200">To get started with App Service Environments, see [Introduction to App Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="367a7-201">Wszystkie artykuły i w jaki sposób — do użytkownika dla środowiska usługi aplikacji są dostępne w [Plik README dla środowiska usługi aplikacji](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="367a7-201">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="367a7-202">Aby uzyskać szczegółowe informacje dotyczące aplikacji bezpiecznego połączenia do wewnętrznej bazy danych zasobu ze środowiska usługi aplikacji, zobacz [bezpiecznego łączenia z zasobami zaplecza ze środowiska usługi aplikacji][SecurelyConnecttoBackend]</span><span class="sxs-lookup"><span data-stu-id="367a7-202">For details around apps securely connecting to backend resource from an App Service Environment, see [Securely connecting to Backend resources from an App Service Environment][SecurelyConnecttoBackend]</span></span>

<span data-ttu-id="367a7-203">Aby uzyskać więcej informacji o platformie usługi Azure App Service, zobacz [usłudze Azure App Service][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="367a7-203">For more information about the Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[virtualnetwork]: https://azure.microsoft.com/documentation/articles/virtual-networks-faq/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[SecurelyConnecttoBackend]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-securely-connecting-to-backend-resources/
[NewPortal]:  https://portal.azure.com  

<!-- IMAGES -->

