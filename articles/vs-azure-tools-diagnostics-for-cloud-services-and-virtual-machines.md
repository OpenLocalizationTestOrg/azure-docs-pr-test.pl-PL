---
title: "Konfigurowanie diagnostyki dla usług w chmurze Azure i maszyn wirtualnych | Dokumentacja firmy Microsoft"
description: "Zawiera opis sposobu konfigurowania informacje diagnostyczne dla debugowania Azure cloude usług i maszyn wirtualnych (VM) w programie Visual Studio."
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: e70cd7b4-6298-43aa-adea-6fd618414c26
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 11/11/2016
ms.author: kraigb
ms.openlocfilehash: 2516c0eb8ce470577731db9b844d5b9038465477
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/29/2017
---
# <a name="configuring-diagnostics-for-azure-cloud-services-and-virtual-machines"></a><span data-ttu-id="9d597-103">Konfigurowanie diagnostyki dla usług w chmurze Azure i maszyny wirtualne</span><span class="sxs-lookup"><span data-stu-id="9d597-103">Configuring Diagnostics for Azure Cloud Services and Virtual Machines</span></span>
<span data-ttu-id="9d597-104">Jeśli potrzebne jest rozwiązywanie problemów z usługą w chmurze platformy Azure lub maszyny wirtualnej platformy Azure, Diagnostyka Azure można skonfigurować łatwiej przy użyciu programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="9d597-104">When you need to troubleshoot an Azure cloud service or Azure virtual machine, you can configure Azure diagnostics more easily by using Visual Studio.</span></span> <span data-ttu-id="9d597-105">Diagnostyka Azure powoduje przechwycenie danych systemowych i rejestrowanie danych na maszynach wirtualnych i wystąpień maszyn wirtualnych, które są uruchamiane usługi w chmurze i przesyła dane do wybranego konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="9d597-105">Azure diagnostics captures system data and logging data on the virtual machines and virtual machine instances that run your cloud service and transfers that data into a storage account of your choice.</span></span> <span data-ttu-id="9d597-106">Zobacz [Włączanie rejestrowania diagnostyki dla aplikacji sieci web w usłudze Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md) Aby uzyskać więcej informacji o diagnostyce rejestrowania na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="9d597-106">See [Enable diagnostics logging for web apps in Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md) for more information about diagnostics logging in Azure.</span></span>

<span data-ttu-id="9d597-107">W tym temacie przedstawiono sposób włączania i konfigurowania diagnostyki Azure w programie Visual Studio, przed i po wdrożeniu, a także na maszynach wirtualnych platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="9d597-107">This topic shows you how to enable and configure Azure diagnostics in Visual Studio, both before and after deployment, as well as in Azure virtual machines.</span></span> <span data-ttu-id="9d597-108">On również przedstawiono sposób wybierz typy informacje diagnostyczne do zbierania i wyświetlić informacje po ich zebraniu.</span><span class="sxs-lookup"><span data-stu-id="9d597-108">It also shows you how to select the types of diagnostics information to collect and how to view the information after it's collected.</span></span>

<span data-ttu-id="9d597-109">Diagnostyka Azure można skonfigurować w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="9d597-109">You can configure Azure Diagnostics in the following ways:</span></span>

* <span data-ttu-id="9d597-110">Możesz zmienić ustawienia konfiguracji diagnostyki za pomocą **konfiguracji diagnostyki** okno dialogowe w programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="9d597-110">You can change diagnostics configuration settings through the **Diagnostics Configuration** dialog box in Visual Studio.</span></span> <span data-ttu-id="9d597-111">Ustawienia są zapisywane w pliku o nazwie diagnostics.wadcfgx (diagnostics.wadcfg Azure SDK 2.4 lub wcześniej).</span><span class="sxs-lookup"><span data-stu-id="9d597-111">The settings are saved in a file called diagnostics.wadcfgx (diagnostics.wadcfg in Azure SDK 2.4 or earlier).</span></span> <span data-ttu-id="9d597-112">Alternatywnie można bezpośrednio modyfikować pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="9d597-112">Alternatively, you can directly modify the configuration file.</span></span> <span data-ttu-id="9d597-113">Jeśli ręcznie zaktualizować plik, zmiany w konfiguracji zacznie obowiązywać następnego czas wdrażania chmury usługa Azure lub uruchomienia w emulatorze usługi.</span><span class="sxs-lookup"><span data-stu-id="9d597-113">If you manually update the file, the configuration changes will take effect the next time you deploy the cloud service to Azure or run the service in the emulator.</span></span>
* <span data-ttu-id="9d597-114">Użyj **Eksplorator chmury** lub **Eksploratora serwera** w programie Visual Studio, aby zmienić ustawienia diagnostyki dla maszyny wirtualnej lub uruchomiona usługa w chmurze.</span><span class="sxs-lookup"><span data-stu-id="9d597-114">Use **Cloud Explorer** or **Server Explorer** in Visual Studio to change the diagnostics settings for a running cloud service or virtual machine.</span></span>

## <a name="azure-26-diagnostics-changes"></a><span data-ttu-id="9d597-115">Zmiany diagnostyki Azure 2.6</span><span class="sxs-lookup"><span data-stu-id="9d597-115">Azure 2.6 diagnostics changes</span></span>
<span data-ttu-id="9d597-116">Azure SDK w wersji 2.6 projektów programu Visual Studio wprowadzono następujące zmiany.</span><span class="sxs-lookup"><span data-stu-id="9d597-116">For Azure SDK 2.6 projects in Visual Studio, the following changes were made.</span></span> <span data-ttu-id="9d597-117">(Te zmiany również dotyczyć nowsze wersje zestawu SDK platformy Azure.)</span><span class="sxs-lookup"><span data-stu-id="9d597-117">(These changes also apply to later versions of Azure SDK.)</span></span>

* <span data-ttu-id="9d597-118">Lokalne emulatora obsługuje teraz diagnostyki.</span><span class="sxs-lookup"><span data-stu-id="9d597-118">The local emulator now supports diagnostics.</span></span> <span data-ttu-id="9d597-119">Oznacza to, można zbierać dane diagnostyczne i upewnij się, że aplikacja tworzy prawo śladów podczas tworzenia i testowania w programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="9d597-119">This means you can collect diagnostics data and ensure your application is creating the right traces while you're developing and testing in Visual Studio.</span></span> <span data-ttu-id="9d597-120">Parametry połączenia `UseDevelopmentStorage=true` umożliwia zbieranie danych diagnostycznych, gdy używasz projekt usługi w chmurze w programie Visual Studio przy użyciu emulatora magazynu Azure.</span><span class="sxs-lookup"><span data-stu-id="9d597-120">The connection string `UseDevelopmentStorage=true` enables diagnostics data collection while you're running your cloud service project in Visual Studio by using the Azure storage emulator.</span></span> <span data-ttu-id="9d597-121">Wszystkie dane diagnostyczne są zbierane w ramach konta magazynu (Programowanie magazynu).</span><span class="sxs-lookup"><span data-stu-id="9d597-121">All diagnostics data is collected in the (Development Storage) storage account.</span></span>
* <span data-ttu-id="9d597-122">Parametry połączenia konta magazynu diagnostyki (Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString) znajduje się jeszcze raz w pliku konfiguracji (cscfg) usługi.</span><span class="sxs-lookup"><span data-stu-id="9d597-122">The diagnostics storage account connection string (Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString) is stored once again in the service configuration (.cscfg) file.</span></span> <span data-ttu-id="9d597-123">W systemie Azure SDK 2.5 konto magazynu diagnostyki została określona w pliku diagnostics.wadcfgx.</span><span class="sxs-lookup"><span data-stu-id="9d597-123">In Azure SDK 2.5 the diagnostics storage account was specified in the diagnostics.wadcfgx file.</span></span>

<span data-ttu-id="9d597-124">Istnieją pewne ważne różnice między jak parametry połączenia działał w 2.4 zestawu SDK platformy Azure i starszych i jak działa w Azure SDK w wersji 2.6 lub nowszej.</span><span class="sxs-lookup"><span data-stu-id="9d597-124">There are some notable differences between how the connection string worked in Azure SDK 2.4 and earlier and how it works in Azure SDK 2.6 and later.</span></span>

* <span data-ttu-id="9d597-125">W 2.4 zestawu SDK platformy Azure i starszych parametry połączenia została użyta jako środowisko uruchomieniowe dodatek diagnostyki można pobrać informacji o koncie magazynu przesyłania dzienników diagnostycznych.</span><span class="sxs-lookup"><span data-stu-id="9d597-125">In Azure SDK 2.4 and earlier, the connection string was used as a runtime by the diagnostics plugin to get the storage account information for transferring diagnostics logs.</span></span>
* <span data-ttu-id="9d597-126">W Azure SDK w wersji 2.6 lub nowszej ciąg połączenia diagnostyki jest używany przez program Visual Studio Aby skonfigurować rozszerzenie diagnostyki magazynu odpowiednie informacje o koncie podczas publikowania.</span><span class="sxs-lookup"><span data-stu-id="9d597-126">In Azure SDK 2.6 and later, the diagnostics connection string is used by Visual Studio to configure the diagnostics extension with the appropriate storage account information during publishing.</span></span> <span data-ttu-id="9d597-127">Parametry połączenia umożliwia definiowanie różnych kont magazynu dla konfiguracji innej usługi, które Visual Studio będzie korzystać w przypadku publikowania.</span><span class="sxs-lookup"><span data-stu-id="9d597-127">The connection string lets you define different storage accounts for different service configurations that Visual Studio will use when publishing.</span></span> <span data-ttu-id="9d597-128">Jednak ponieważ wtyczki Diagnostyka nie jest już dostępny (po 2.5 zestawu SDK platformy Azure), plik .cscfg samodzielnie nie można włączyć rozszerzenia diagnostyki.</span><span class="sxs-lookup"><span data-stu-id="9d597-128">However, because the diagnostics plugin is no longer available (after Azure SDK 2.5), the .cscfg file by itself can't enable the Diagnostics Extension.</span></span> <span data-ttu-id="9d597-129">Należy włączyć rozszerzenie z osobna za pomocą narzędzi, takich jak Visual Studio lub programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9d597-129">You have to enable the extension separately through tools such as Visual Studio or PowerShell.</span></span>
* <span data-ttu-id="9d597-130">Aby uprościć proces konfigurowania rozszerzenia diagnostyki przy użyciu programu PowerShell, dane wyjściowe pakietu z programu Visual Studio zawiera publicznej konfiguracji XML dla rozszerzenia diagnostyki dla każdej roli.</span><span class="sxs-lookup"><span data-stu-id="9d597-130">To simplify the process of configuring the diagnostics extension with PowerShell, the package output from Visual Studio also contains the public configuration XML for the diagnostics extension for each role.</span></span> <span data-ttu-id="9d597-131">Visual Studio będzie korzystać diagnostyki parametry połączenia do wypełniania informacji o koncie magazynu, które są obecne w publicznej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="9d597-131">Visual Studio uses the diagnostics connection string to populate the storage account information present in the public configuration.</span></span> <span data-ttu-id="9d597-132">Pliki konfiguracji publicznego są tworzone w folderze rozszerzenia i postępuj zgodnie ze wzorcem PaaSDiagnostics. &lt;RoleName >. PubConfig.xml.</span><span class="sxs-lookup"><span data-stu-id="9d597-132">The public config files are created in the Extensions folder and follow the pattern PaaSDiagnostics.&lt;RoleName>.PubConfig.xml.</span></span> <span data-ttu-id="9d597-133">Wszystkie wdrożenia na podstawie programu PowerShell można użyć tego wzorca do mapowania każdej konfiguracji do roli.</span><span class="sxs-lookup"><span data-stu-id="9d597-133">Any PowerShell based deployments can use this pattern to map each configuration to a Role.</span></span>
* <span data-ttu-id="9d597-134">Parametry połączenia w pliku .cscfg jest już używana przez [portalu Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040) dostępu do danych diagnostycznych, więc może występować w **monitorowanie** kartę. Ciąg połączenia jest potrzebne do skonfigurowania usługi, aby wyświetlić pełne dane monitorowania w portalu.</span><span class="sxs-lookup"><span data-stu-id="9d597-134">The connection string in the .cscfg file is also used by the [Azure portal](http://go.microsoft.com/fwlink/p/?LinkID=525040) to access the diagnostics data so it can appear in the **Monitoring** tab. The connection string is needed to configure the service to show verbose monitoring data in the portal.</span></span>

## <a name="migrating-projects-to-azure-sdk-26-and-later"></a><span data-ttu-id="9d597-135">Migrowanie projektów Azure SDK w wersji 2.6 lub nowszego</span><span class="sxs-lookup"><span data-stu-id="9d597-135">Migrating projects to Azure SDK 2.6 and later</span></span>
<span data-ttu-id="9d597-136">Podczas migracji z 2.5 zestawu SDK platformy Azure do usługi Azure SDK w wersji 2.6 lub nowszej, jeśli masz konto magazynu diagnostyki określone w pliku .wadcfgx, następnie pozostanie on istnieje.</span><span class="sxs-lookup"><span data-stu-id="9d597-136">When migrating from Azure SDK 2.5 to Azure SDK 2.6 or later, if you had a diagnostics storage account specified in the .wadcfgx file, then it will stay there.</span></span> <span data-ttu-id="9d597-137">Aby móc korzystać z elastyczność przy użyciu różnych kont magazynu dla konfiguracji innego magazynu, musisz ręcznie dodać parametry połączenia do projektu.</span><span class="sxs-lookup"><span data-stu-id="9d597-137">To take advantage of the flexibility of using different storage accounts for different storage configurations, you'll have to manually add the connection string to your project.</span></span> <span data-ttu-id="9d597-138">W przypadku migrowania projektu z Azure SDK 2.4 lub jego starszej wersji 2.6 zestawu SDK platformy Azure, Diagnostyka parametry połączenia zostaną zachowane.</span><span class="sxs-lookup"><span data-stu-id="9d597-138">If you're migrating a project from Azure SDK 2.4 or earlier to Azure SDK 2.6, then the diagnostics connection strings are preserved.</span></span> <span data-ttu-id="9d597-139">Pamiętaj jednak zmiany w sposób parametry połączenia są traktowane w Azure SDK w wersji 2.6 określone w poprzedniej sekcji.</span><span class="sxs-lookup"><span data-stu-id="9d597-139">However, please note the changes in how connection strings are treated in Azure SDK 2.6 as specified in the previous section.</span></span>

### <a name="how-visual-studio-determines-the-diagnostics-storage-account"></a><span data-ttu-id="9d597-140">Jak Visual Studio Określa konto magazynu diagnostyki</span><span class="sxs-lookup"><span data-stu-id="9d597-140">How Visual Studio determines the diagnostics storage account</span></span>
* <span data-ttu-id="9d597-141">Jeśli parametry połączenia diagnostyki jest określone w pliku .cscfg, Visual Studio używa go do konfigurowania rozszerzenia diagnostyki podczas publikowania i podczas generowania publicznej konfiguracji plików xml podczas pakowania.</span><span class="sxs-lookup"><span data-stu-id="9d597-141">If a diagnostics connection string is specified in the .cscfg file, Visual Studio uses it to configure the diagnostics extension when publishing, and when generating the public configuration xml files during packaging.</span></span>
* <span data-ttu-id="9d597-142">Jeśli ciąg połączenia diagnostyki nie została określona w pliku .cscfg, następnie Visual Studio powraca do przy użyciu konta magazynu określony w pliku .wadcfgx, aby skonfigurować rozszerzenie diagnostyki podczas publikowania i generowanie publicznej konfiguracji plików xml Podczas tworzenia pakietu.</span><span class="sxs-lookup"><span data-stu-id="9d597-142">If no diagnostics connection string is specified in the .cscfg file, then Visual Studio falls back to using the storage account specified in the .wadcfgx file to configure the diagnostics extension when publishing, and generating the public configuration xml files when packaging.</span></span>
* <span data-ttu-id="9d597-143">Diagnostyka parametry połączenia w pliku .cscfg mają pierwszeństwo przed konta magazynu w pliku .wadcfgx.</span><span class="sxs-lookup"><span data-stu-id="9d597-143">The diagnostics connection string in the .cscfg file takes precedence over the storage account in the .wadcfgx file.</span></span> <span data-ttu-id="9d597-144">Jeśli parametry połączenia diagnostyki jest określone w pliku .cscfg, Visual Studio użyty i ignoruje konta magazynu w .wadcfgx.</span><span class="sxs-lookup"><span data-stu-id="9d597-144">If a diagnostics connection string is specified in the .cscfg file, then Visual Studio uses that and ignores the storage account in .wadcfgx.</span></span>

### <a name="what-does-the-update-development-storage-connection-strings-checkbox-do"></a><span data-ttu-id="9d597-145">Co to jest "Aktualizacja programowanie magazynu ciągów połączenia..."</span><span class="sxs-lookup"><span data-stu-id="9d597-145">What does the "Update development storage connection strings…"</span></span> <span data-ttu-id="9d597-146">czy pole wyboru?</span><span class="sxs-lookup"><span data-stu-id="9d597-146">checkbox do?</span></span>
<span data-ttu-id="9d597-147">Pole wyboru **zaktualizować parametry połączenia magazynu programowanie dla diagnostyki i buforowanie z poświadczeniami konta magazynu Microsoft Azure podczas publikowania do systemu Microsoft Azure** udostępnia wygodny sposób zaktualizować rozwojem Parametry połączenia konta magazynu z kontem magazynu systemu Azure podczas publikowania określono.</span><span class="sxs-lookup"><span data-stu-id="9d597-147">The checkbox for **Update development storage connection strings for Diagnostics and Caching with Microsoft Azure storage account credentials when publishing to Microsoft Azure** gives you a convenient way to update any development storage account connection strings with the Azure storage account specified during publishing.</span></span>

<span data-ttu-id="9d597-148">Załóżmy na przykład, zaznacz to pole wyboru i określa parametry połączenia diagnostyki `UseDevelopmentStorage=true`.</span><span class="sxs-lookup"><span data-stu-id="9d597-148">For example, suppose you select this checkbox and the diagnostics connection string specifies `UseDevelopmentStorage=true`.</span></span> <span data-ttu-id="9d597-149">Podczas publikowania projektu na platformie Azure, programu Visual Studio automatycznie zaktualizuje diagnostyki parametry połączenia z kontem magazynu określone w Kreatorze publikowania.</span><span class="sxs-lookup"><span data-stu-id="9d597-149">When you publish the project to Azure, Visual Studio will automatically update the diagnostics connection string with the storage account you specified in the Publish wizard.</span></span> <span data-ttu-id="9d597-150">Jednak jeśli konto magazynu rzeczywista określono jako parametry połączenia diagnostyki, następnie to konto jest używana zamiast tego.</span><span class="sxs-lookup"><span data-stu-id="9d597-150">However, if a real storage account was specified as the diagnostics connection string, then that account is used instead.</span></span>

## <a name="diagnostics-functionality-differences-between-azure-sdk-24-and-earlier-and-azure-sdk-25-and-later"></a><span data-ttu-id="9d597-151">Diagnostyka funkcji różnice między 2.4 zestawu SDK platformy Azure i wcześniej i Azure SDK, 2.5 lub nowszej</span><span class="sxs-lookup"><span data-stu-id="9d597-151">Diagnostics functionality differences between Azure SDK 2.4 and earlier and Azure SDK 2.5 and later</span></span>
<span data-ttu-id="9d597-152">Jeśli uaktualniasz projektu z 2.4 zestawu SDK platformy Azure, Azure SDK 2.5 lub nowszej, musisz należy pamiętać następujące różnice funkcji diagnostyki.</span><span class="sxs-lookup"><span data-stu-id="9d597-152">If you're upgrading your project from Azure SDK 2.4 to Azure SDK 2.5 or later, you should bear in mind the following diagnostics functionality differences.</span></span>

* <span data-ttu-id="9d597-153">**Konfiguracyjne interfejsy API są przestarzałe** — trybu diagnostyki jest dostępna w 2.4 zestawu SDK platformy Azure i jego wcześniejsze wersje, ale jest przestarzała w wersji 2.5 zestawu SDK platformy Azure i nowszych.</span><span class="sxs-lookup"><span data-stu-id="9d597-153">**Configuration APIs are deprecated** – Programmatic configuration of diagnostics is available in Azure SDK 2.4 or earlier versions, but is deprecated in Azure SDK 2.5 and later.</span></span> <span data-ttu-id="9d597-154">Jeśli konfiguracji diagnostyki jest obecnie zdefiniowane w kodzie, należy ponownie skonfigurować te ustawienia od podstaw w projekcie migrowane w kolejności diagnostyki, aby kontynuować pracę.</span><span class="sxs-lookup"><span data-stu-id="9d597-154">If your diagnostics configuration is currently defined in code, you'll need to reconfigure those settings from scratch in the migrated project in order for diagnostics to keep working.</span></span> <span data-ttu-id="9d597-155">Plik konfiguracji diagnostyki Azure SDK 2.4 jest diagnostics.wadcfg i diagnostics.wadcfgx dla 2.5 zestawu SDK platformy Azure i nowszych.</span><span class="sxs-lookup"><span data-stu-id="9d597-155">The diagnostics configuration file for Azure SDK 2.4 is diagnostics.wadcfg, and diagnostics.wadcfgx for Azure SDK 2.5 and later.</span></span>
* <span data-ttu-id="9d597-156">**Diagnostyki dla aplikacji usługi w chmurze można skonfigurować tylko na poziomie roli, nie na poziomie wystąpienia.**</span><span class="sxs-lookup"><span data-stu-id="9d597-156">**Diagnostics for cloud service applications can only be configured at the role level, not at the instance level.**</span></span>
* <span data-ttu-id="9d597-157">**Za każdym razem, gdy wdrażanie aplikacji, zaktualizowano konfigurację diagnostyki** — może to powodować problemy z parzystością, jeśli zmiana konfiguracji diagnostyki z Eksploratora serwera, a następnie ponowne wdrożenie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9d597-157">**Every time you deploy your app, the diagnostics configuration is updated** – This can cause parity issues if you change your diagnostics configuration from Server Explorer and then redeploy your app.</span></span>
* <span data-ttu-id="9d597-158">**W wersji 2.5 zestawu SDK platformy Azure i nowszych, zrzuty awaryjne są konfigurowane w pliku konfiguracji diagnostyki nie w kodzie** — Jeśli masz zrzuty awaryjne skonfigurowane w kodzie, musisz ręcznie przenieść konfiguracji z kodu do pliku konfiguracji, ponieważ zrzuty awaryjne nie są przenoszone podczas migracji do 2.6 zestawu SDK platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="9d597-158">**In Azure SDK 2.5 and later, crash dumps are configured in the diagnostics configuration file, not in code** – If you have crash dumps configured in code, you'll have to manually transfer the configuration from code to the configuration file, because the crash dumps aren't transferred during the migration to Azure SDK 2.6.</span></span>

## <a name="enable-diagnostics-in-cloud-service-projects-before-deploying-them"></a><span data-ttu-id="9d597-159">Włącz diagnostykę w projekty usługi w chmurze przed ich wdrożeniem</span><span class="sxs-lookup"><span data-stu-id="9d597-159">Enable diagnostics in cloud service projects before deploying them</span></span>
<span data-ttu-id="9d597-160">W programie Visual Studio można zbierać dane diagnostyczne dla ról, które działają na platformie Azure, podczas uruchamiania usługi w emulatorze przed jego wdrożeniem.</span><span class="sxs-lookup"><span data-stu-id="9d597-160">In Visual Studio, you can choose to collect diagnostics data for roles that run in Azure, when you run the service in the emulator before deploying it.</span></span> <span data-ttu-id="9d597-161">Wszelkie zmiany wprowadzone w ustawieniach diagnostyki w programie Visual Studio są zapisywane w pliku konfiguracyjnym diagnostics.wadcfgx.</span><span class="sxs-lookup"><span data-stu-id="9d597-161">All changes to diagnostics settings in Visual Studio are saved in the diagnostics.wadcfgx configuration file.</span></span> <span data-ttu-id="9d597-162">Te ustawienia konfiguracji Określ konto magazynu, w której jest zapisywany dane diagnostyczne, podczas wdrażania usługi w chmurze.</span><span class="sxs-lookup"><span data-stu-id="9d597-162">These configuration settings specify the storage account where diagnostics data is saved when you deploy your cloud service.</span></span>

[!INCLUDE [cloud-services-wad-warning](../includes/cloud-services-wad-warning.md)]

### <a name="to-enable-diagnostics-in-visual-studio-before-deployment"></a><span data-ttu-id="9d597-163">Aby włączyć diagnostyki w programie Visual Studio przed wdrożeniem</span><span class="sxs-lookup"><span data-stu-id="9d597-163">To enable diagnostics in Visual Studio before deployment</span></span>
1. <span data-ttu-id="9d597-164">Menu skrótów dla roli interesującego, wybierz **właściwości**, a następnie wybierz pozycję **konfiguracji** kartę do roli **właściwości** okna.</span><span class="sxs-lookup"><span data-stu-id="9d597-164">On the shortcut menu for the role that interests you, choose **Properties**, and then choose the **Configuration** tab in the role’s **Properties** window.</span></span>
2. <span data-ttu-id="9d597-165">W **diagnostyki** sekcji, upewnij się, że **włączyć diagnostyki** pole wyboru jest zaznaczone.</span><span class="sxs-lookup"><span data-stu-id="9d597-165">In the **Diagnostics** section, make sure that the **Enable Diagnostics** check box is selected.</span></span>
   
    ![Dostęp do opcji Włącz diagnostyki](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796660.png)
3. <span data-ttu-id="9d597-167">Wybierz przycisk wielokropka (...), aby określić miejsce przechowywania danych diagnostycznych konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="9d597-167">Choose the ellipsis (…) button to specify the storage account where you want the diagnostics data to be stored.</span></span> <span data-ttu-id="9d597-168">Wybrane konto magazynu będzie miejsce przechowywania danych diagnostycznych.</span><span class="sxs-lookup"><span data-stu-id="9d597-168">The storage account you choose will be the location where diagnostics data is stored.</span></span>
   
    ![Określ konto magazynu do użycia](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796661.png)
4. <span data-ttu-id="9d597-170">W **utworzyć parametry połączenia magazynu** oknie dialogowym Określ, czy chcesz się połączyć przy użyciu emulatora usługi Azure Storage, subskrypcji platformy Azure, lub ręcznie wprowadzić poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="9d597-170">In the **Create Storage Connection String** dialog box, specify whether you want to connect using the Azure Storage Emulator, an Azure subscription, or manually entered credentials.</span></span>
   
    ![Okno dialogowe konta magazynu](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796662.png)
   
   * <span data-ttu-id="9d597-172">Jeśli wybierzesz Microsoft opcja emulatora magazynu Azure, ciąg połączenia jest ustawiona na UseDevelopmentStorage = true.</span><span class="sxs-lookup"><span data-stu-id="9d597-172">If you choose the Microsoft Azure Storage Emulator option, the connection string is set to UseDevelopmentStorage=true.</span></span>
   * <span data-ttu-id="9d597-173">Jeśli wybierzesz opcję Twojej subskrypcji, można wybrać subskrypcji platformy Azure, którego chcesz użyć, a nazwa konta.</span><span class="sxs-lookup"><span data-stu-id="9d597-173">If you choose the Your subscription option, you can choose the Azure subscription you want to use and the account name.</span></span> <span data-ttu-id="9d597-174">Można wybrać przycisk Zarządzaj kontami, aby zarządzać subskrypcjami platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="9d597-174">You can choose the Manage Accounts button to manage your Azure subscriptions.</span></span>
   * <span data-ttu-id="9d597-175">Jeśli zostanie wybrana opcja wprowadzone ręcznie poświadczenia, wyświetlany jest monit o wprowadzenie nazwy i klucza konta Azure, którego chcesz użyć.</span><span class="sxs-lookup"><span data-stu-id="9d597-175">If you choose the Manually entered credentials option, you're prompted to enter the name and key of the Azure account you want to use.</span></span>
5. <span data-ttu-id="9d597-176">Wybierz **Konfiguruj** przycisk, aby wyświetlić **konfiguracji diagnostyki** okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="9d597-176">Choose the **Configure** button to view the **Diagnostics configuration** dialog box.</span></span> <span data-ttu-id="9d597-177">Każda karta (z wyjątkiem **ogólne** i **katalogów dziennika**) reprezentuje źródło danych diagnostycznych, które można zebrać.</span><span class="sxs-lookup"><span data-stu-id="9d597-177">Each tab (except for **General** and **Log Directories**) represents a diagnostic data source that you can collect.</span></span> <span data-ttu-id="9d597-178">Karta domyślne **ogólne**, udostępnia następujące opcje zbierania danych diagnostycznych: **tylko błędy**, **wszystkie informacje**, i **plan niestandardowy**.</span><span class="sxs-lookup"><span data-stu-id="9d597-178">The default tab, **General**, offers you the following diagnostics data collection options: **Errors only**, **All information**, and **Custom plan**.</span></span> <span data-ttu-id="9d597-179">Opcja domyślna **tylko błędy**, ma co najmniej ilość miejsca w magazynie, ponieważ nie transferu, ostrzeżenia lub komunikaty śledzenia.</span><span class="sxs-lookup"><span data-stu-id="9d597-179">The default option, **Errors only**, takes the least amount of storage because it doesn’t transfer warnings or tracing messages.</span></span> <span data-ttu-id="9d597-180">Opcji wszystkie informacje przesyła większość informacji i dlatego, jest opcją najdroższych pod względem pamięci masowej.</span><span class="sxs-lookup"><span data-stu-id="9d597-180">The All information option transfers the most information and is, therefore, the most expensive option in terms of storage.</span></span>
   
    ![Włącz diagnostyki Azure i konfiguracji](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758144.png)
6. <span data-ttu-id="9d597-182">Na przykład wybierz **plan niestandardowy** opcja tak dostosować dane zbierane.</span><span class="sxs-lookup"><span data-stu-id="9d597-182">For this example, select the **Custom plan** option so you can customize the data collected.</span></span>
7. <span data-ttu-id="9d597-183">**Przydział dysku w MB** pole określa ilość miejsca, które mają zostać przydzielone na koncie magazynu dla danych diagnostycznych.</span><span class="sxs-lookup"><span data-stu-id="9d597-183">The **Disk Quota in MB** box specifies how much space you want to allocate in your storage account for diagnostics data.</span></span> <span data-ttu-id="9d597-184">Można zmienić wartość domyślną, jeśli chcesz.</span><span class="sxs-lookup"><span data-stu-id="9d597-184">You can change the default value if you want.</span></span>
8. <span data-ttu-id="9d597-185">Na każdej karcie mają być zbierane dane diagnostyczne, wybierz jej **włączyć Transfer <log type>**  pole wyboru.</span><span class="sxs-lookup"><span data-stu-id="9d597-185">On each tab of diagnostics data you want to collect, select its **Enable Transfer of <log type>** check box.</span></span> <span data-ttu-id="9d597-186">Na przykład, jeśli chcesz zbierać Dzienniki aplikacji, wybierz opcję **włączyć transferu Dzienniki aplikacji** pole wyboru na **Dzienniki aplikacji** kartę. Ponadto określ wszelkie inne informacje wymagane przez każdego typu danych diagnostycznych.</span><span class="sxs-lookup"><span data-stu-id="9d597-186">For example, if you want to collect application logs, select the **Enable transfer of Application Logs** check box on the **Application Logs** tab. Also, specify any other information required by each diagnostics data type.</span></span> <span data-ttu-id="9d597-187">Zobacz sekcję **Konfigurowanie źródeł danych diagnostycznych** dalszej części tego tematu, aby uzyskać informacje o konfiguracji na poszczególnych kartach.</span><span class="sxs-lookup"><span data-stu-id="9d597-187">See the section **Configure diagnostics data sources** later in this topic for configuration information on each tab.</span></span>
9. <span data-ttu-id="9d597-188">Po włączeniu zbierania danych diagnostycznych chcesz wybrać **OK** przycisku.</span><span class="sxs-lookup"><span data-stu-id="9d597-188">After you’ve enabled collection of all the diagnostics data you want, choose the **OK** button.</span></span>
10. <span data-ttu-id="9d597-189">Uruchom projekt usługi chmury Azure w programie Visual Studio w zwykły sposób.</span><span class="sxs-lookup"><span data-stu-id="9d597-189">Run your Azure cloud service project in Visual Studio as usual.</span></span> <span data-ttu-id="9d597-190">Jak za pomocą aplikacji informacje dziennika, które są włączone jest zapisywany do wskazanego konta magazynu Azure.</span><span class="sxs-lookup"><span data-stu-id="9d597-190">As you use your application, the log information that you enabled is saved to the Azure storage account you specified.</span></span>

## <a name="enable-diagnostics-in-azure-virtual-machines"></a><span data-ttu-id="9d597-191">Włącz diagnostykę w maszynach wirtualnych platformy Azure</span><span class="sxs-lookup"><span data-stu-id="9d597-191">Enable diagnostics in Azure virtual machines</span></span>
<span data-ttu-id="9d597-192">W programie Visual Studio można zbierać dane diagnostyczne maszyn wirtualnych platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="9d597-192">In Visual Studio, you can choose to collect diagnostics data for Azure virtual machines.</span></span>

### <a name="to-enable-diagnostics-in-azure-virtual-machines"></a><span data-ttu-id="9d597-193">Aby włączyć diagnostyki w maszynach wirtualnych platformy Azure</span><span class="sxs-lookup"><span data-stu-id="9d597-193">To enable diagnostics in Azure virtual machines</span></span>
1. <span data-ttu-id="9d597-194">W **Eksploratora serwera**, wybierz węzeł Azure i Połącz z subskrypcją platformy Azure, jeśli jeszcze nie zostało nawiązane.</span><span class="sxs-lookup"><span data-stu-id="9d597-194">In **Server Explorer**, choose the Azure node and then connect to your Azure subscription, if you're not already connected.</span></span>
2. <span data-ttu-id="9d597-195">Rozwiń węzeł **maszyn wirtualnych** węzła.</span><span class="sxs-lookup"><span data-stu-id="9d597-195">Expand the **Virtual Machines** node.</span></span> <span data-ttu-id="9d597-196">Utwórz nową maszynę wirtualną lub wybierz jedną, która jest już istnieje.</span><span class="sxs-lookup"><span data-stu-id="9d597-196">You can create a new virtual machine, or select one that's already there.</span></span>
3. <span data-ttu-id="9d597-197">W menu skrótów dla maszyny wirtualnej, interesującego wybierz **Konfiguruj**.</span><span class="sxs-lookup"><span data-stu-id="9d597-197">On the shortcut menu for the virtual machine that interests you, choose **Configure**.</span></span> <span data-ttu-id="9d597-198">Pokazuje to okno dialogowe konfiguracji maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="9d597-198">This shows the virtual machine configuration dialog box.</span></span>
   
    ![Konfigurowanie maszyny wirtualnej platformy Azure](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796663.png)
4. <span data-ttu-id="9d597-200">Jeśli to nie jest jeszcze zainstalowana, Dodaj rozszerzenie Diagnostyka agenta monitorowania firmy Microsoft.</span><span class="sxs-lookup"><span data-stu-id="9d597-200">If it's not already installed, add the Microsoft Monitoring Agent Diagnostics extension.</span></span> <span data-ttu-id="9d597-201">To rozszerzenie umożliwia zbieranie danych diagnostycznych dla maszyny wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="9d597-201">This extension lets you gather diagnostics data for the Azure virtual machine.</span></span> <span data-ttu-id="9d597-202">Na liście zainstalowanych rozszerzeń wybierz wybierz z menu rozwijanego dostępne rozszerzenia, a następnie wybierz pozycję Diagnostyka agenta monitorowania firmy Microsoft.</span><span class="sxs-lookup"><span data-stu-id="9d597-202">In the Installed Extensions list, choose the Select an available extension drop-down menu and then choose Microsoft Monitoring Agent Diagnostics.</span></span>
   
    ![Instalowanie rozszerzenia maszyny wirtualnej platformy Azure](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766024.png)
   
   > [!NOTE]
   > <span data-ttu-id="9d597-204">Inne rozszerzenia diagnostyki są dostępne dla maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="9d597-204">Other diagnostics extensions are available for your virtual machines.</span></span> <span data-ttu-id="9d597-205">Aby uzyskać więcej informacji zobacz funkcje i rozszerzenia maszyny Wirtualnej Azure.</span><span class="sxs-lookup"><span data-stu-id="9d597-205">For more information, see Azure VM Extensions and Features.</span></span>
   > 
   > 
5. <span data-ttu-id="9d597-206">Wybierz **Dodaj** przycisk, aby dodać rozszerzenie i wyświetl jego **konfiguracji diagnostyki** okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="9d597-206">Choose the **Add** button to add the extension and view its **Diagnostics configuration** dialog box.</span></span>
6. <span data-ttu-id="9d597-207">Wybierz **Konfiguruj** przycisk, aby określić konto magazynu, a następnie wybierz pozycję **OK** przycisku.</span><span class="sxs-lookup"><span data-stu-id="9d597-207">Choose the **Configure** button to specify a storage account and then choose the **OK** button.</span></span>
   
    <span data-ttu-id="9d597-208">Każda karta (z wyjątkiem **ogólne** i **katalogów dziennika**) reprezentuje źródło danych diagnostycznych, które można zebrać.</span><span class="sxs-lookup"><span data-stu-id="9d597-208">Each tab (except for **General** and **Log Directories**) represents a diagnostic data source that you can collect.</span></span>
   
    ![Włącz diagnostyki Azure i konfiguracji](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758144.png)
   
    <span data-ttu-id="9d597-210">Karta domyślne **ogólne**, udostępnia następujące opcje zbierania danych diagnostycznych: **tylko błędy**, **wszystkie informacje**, i **plan niestandardowy**.</span><span class="sxs-lookup"><span data-stu-id="9d597-210">The default tab, **General**, offers you the following diagnostics data collection options: **Errors only**, **All information**, and **Custom plan**.</span></span> <span data-ttu-id="9d597-211">Opcja domyślna **tylko błędy**, ma co najmniej ilość miejsca w magazynie, ponieważ nie transferu, ostrzeżenia lub komunikaty śledzenia.</span><span class="sxs-lookup"><span data-stu-id="9d597-211">The default option, **Errors only**, takes the least amount of storage because it doesn’t transfer warnings or tracing messages.</span></span> <span data-ttu-id="9d597-212">**Wszystkie informacje** opcja przekazuje informacje najbardziej i w związku z tym jest opcją najdroższych pod względem pamięci masowej.</span><span class="sxs-lookup"><span data-stu-id="9d597-212">The **All information** option transfers the most information and is, therefore, the most expensive option in terms of storage.</span></span>
7. <span data-ttu-id="9d597-213">Na przykład wybierz **plan niestandardowy** opcja tak dostosować dane zbierane.</span><span class="sxs-lookup"><span data-stu-id="9d597-213">For this example, select the **Custom plan** option so you can customize the data collected.</span></span>
8. <span data-ttu-id="9d597-214">**Przydział dysku w MB** pole określa ilość miejsca, które mają zostać przydzielone na koncie magazynu dla danych diagnostycznych.</span><span class="sxs-lookup"><span data-stu-id="9d597-214">The **Disk Quota in MB** box specifies how much space you want to allocate in your storage account for diagnostics data.</span></span> <span data-ttu-id="9d597-215">Można zmienić wartość domyślną, jeśli chcesz.</span><span class="sxs-lookup"><span data-stu-id="9d597-215">You can change the default value if you want.</span></span>
9. <span data-ttu-id="9d597-216">Na każdej karcie mają być zbierane dane diagnostyczne, wybierz jej **włączyć Transfer <log type>**  pole wyboru.</span><span class="sxs-lookup"><span data-stu-id="9d597-216">On each tab of diagnostics data you want to collect, select its **Enable Transfer of <log type>** check box.</span></span>
   
    <span data-ttu-id="9d597-217">Na przykład, jeśli chcesz zbierać Dzienniki aplikacji, wybierz opcję **włączyć transferu Dzienniki aplikacji** pole wyboru na **Dzienniki aplikacji** kartę. Ponadto określ wszelkie inne informacje wymagane przez każdego typu danych diagnostycznych.</span><span class="sxs-lookup"><span data-stu-id="9d597-217">For example, if you want to collect application logs, select the **Enable transfer of Application Logs** check box on the **Application Logs** tab. Also, specify any other information required by each diagnostics data type.</span></span> <span data-ttu-id="9d597-218">Zobacz sekcję **Konfigurowanie źródeł danych diagnostycznych** dalszej części tego tematu, aby uzyskać informacje o konfiguracji na poszczególnych kartach.</span><span class="sxs-lookup"><span data-stu-id="9d597-218">See the section **Configure diagnostics data sources** later in this topic for configuration information on each tab.</span></span>
10. <span data-ttu-id="9d597-219">Po włączeniu zbierania danych diagnostycznych chcesz wybrać **OK** przycisku.</span><span class="sxs-lookup"><span data-stu-id="9d597-219">After you’ve enabled collection of all the diagnostics data you want, choose the **OK** button.</span></span>
11. <span data-ttu-id="9d597-220">Zapisz zaktualizowany projekt.</span><span class="sxs-lookup"><span data-stu-id="9d597-220">Save the updated project.</span></span>
    
     <span data-ttu-id="9d597-221">Zostanie wyświetlony komunikat w **dziennik aktywności programu Microsoft Azure** okna o zaktualizowaniu maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="9d597-221">You'll see a message in the **Microsoft Azure Activity Log** window that the virtual machine has been updated.</span></span>

## <a name="configure-diagnostics-data-sources"></a><span data-ttu-id="9d597-222">Konfigurowanie źródeł danych diagnostycznych</span><span class="sxs-lookup"><span data-stu-id="9d597-222">Configure diagnostics data sources</span></span>
<span data-ttu-id="9d597-223">Po włączeniu funkcji zbierania danych diagnostycznych, można wybrać dokładnie źródeł danych, które chcesz zebrać i jakie informacje są zbierane.</span><span class="sxs-lookup"><span data-stu-id="9d597-223">After you enable diagnostics data collection, you can choose exactly what data sources you want to collect and what information is collected.</span></span> <span data-ttu-id="9d597-224">Poniżej znajduje się lista kart w **konfiguracji diagnostyki** okno dialogowe i oznacza każdej opcji konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="9d597-224">The following is a list of tabs in the **Diagnostics configuration** dialog box and what each configuration option means.</span></span>

### <a name="application-logs"></a><span data-ttu-id="9d597-225">Dzienniki aplikacji</span><span class="sxs-lookup"><span data-stu-id="9d597-225">Application logs</span></span>
<span data-ttu-id="9d597-226">**Dzienniki aplikacji** zawierają informacje diagnostyczne produkowane przez aplikację sieci web.</span><span class="sxs-lookup"><span data-stu-id="9d597-226">**Application logs** contain diagnostics information produced by a web application.</span></span> <span data-ttu-id="9d597-227">Jeśli chcesz przechwycić Dzienniki aplikacji, wybierz **włączyć transferu Dzienniki aplikacji** pole wyboru.</span><span class="sxs-lookup"><span data-stu-id="9d597-227">If you want to capture application logs, select the **Enable transfer of Application Logs** check box.</span></span> <span data-ttu-id="9d597-228">Można zwiększyć lub zmniejszyć liczbę minut, jeśli dzienniki aplikacji są przenoszone do konta magazynu, zmieniając **transferu okres (min)** wartość.</span><span class="sxs-lookup"><span data-stu-id="9d597-228">You can increase or decrease the number of minutes when the application logs are transferred to your storage account by changing the **Transfer Period (min)** value.</span></span> <span data-ttu-id="9d597-229">Można również zmienić ilość informacji przechwycone w dzienniku, ustawiając wartość poziomu dziennika.</span><span class="sxs-lookup"><span data-stu-id="9d597-229">You can also change the amount of information captured in the log by setting the Log level value.</span></span> <span data-ttu-id="9d597-230">Na przykład można wybrać **pełne** Aby uzyskać więcej informacji, lub wybierz **krytyczny** do przechwytywania tylko błędy krytyczne.</span><span class="sxs-lookup"><span data-stu-id="9d597-230">For example, you can choose **Verbose** to get more information or choose **Critical** to capture only critical errors.</span></span> <span data-ttu-id="9d597-231">Jeśli masz diagnostyczne zależne od dostawcy, który emituje Dzienniki aplikacji, można przechwycić je przez dodanie identyfikator GUID dostawcy, aby **GUID dostawcy** pole.</span><span class="sxs-lookup"><span data-stu-id="9d597-231">If you have a specific diagnostics provider that emits application logs, you can capture them by adding the provider’s GUID to the **Provider GUID** box.</span></span>

  ![Dzienniki aplikacji](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758145.png)

  <span data-ttu-id="9d597-233">Zobacz [Włączanie rejestrowania diagnostyki dla aplikacji sieci web w usłudze Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md) Aby uzyskać więcej informacji o dziennikach aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9d597-233">See [Enable diagnostics logging for web apps in Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md) for more information about application logs.</span></span>

### <a name="windows-event-logs"></a><span data-ttu-id="9d597-234">Dzienniki zdarzeń systemu Windows</span><span class="sxs-lookup"><span data-stu-id="9d597-234">Windows event logs</span></span>
<span data-ttu-id="9d597-235">Aby przechwycić dzienniki zdarzeń systemu Windows, zaznacz **włączyć transferu dzienniki zdarzeń systemu Windows** pole wyboru.</span><span class="sxs-lookup"><span data-stu-id="9d597-235">If you want to capture Windows event logs, select the **Enable transfer of Windows Event Logs** check box.</span></span> <span data-ttu-id="9d597-236">Można zwiększyć lub zmniejszyć liczbę minut, jeśli dzienniki zdarzeń są przenoszone do konta magazynu, zmieniając **transferu okres (min)** wartość.</span><span class="sxs-lookup"><span data-stu-id="9d597-236">You can increase or decrease the number of minutes when the event logs are transferred to your storage account by changing the **Transfer Period (min)** value.</span></span> <span data-ttu-id="9d597-237">Zaznacz pola wyboru dla typów zdarzeń, które mają być śledzone.</span><span class="sxs-lookup"><span data-stu-id="9d597-237">Select the check boxes for the types of events that you want to track.</span></span>

  ![Dzienniki zdarzeń](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796664.png)

<span data-ttu-id="9d597-239">Jeśli używasz Azure SDK Version 2.6 lub nowszej, a aby określić niestandardowe źródło danych, wprowadź go w  **<Data source name>**  tekst pola, a następnie wybierz pozycję **Dodaj** przycisk obok niej.</span><span class="sxs-lookup"><span data-stu-id="9d597-239">If you're using Azure SDK 2.6 or later and want to specify a custom data source, enter it in the **<Data source name>** text box and then choose the **Add** button next to it.</span></span> <span data-ttu-id="9d597-240">Źródło danych jest dodawane do pliku diagnostics.cfcfg.</span><span class="sxs-lookup"><span data-stu-id="9d597-240">The data source is added to the diagnostics.cfcfg file.</span></span>

<span data-ttu-id="9d597-241">Jeśli używasz 2.5 zestawu SDK platformy Azure i chcesz określić niestandardowe źródło danych, należy dodać go do `WindowsEventLog` sekcji diagnostics.wadcfgx plików, takie jak w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="9d597-241">If you're using Azure SDK 2.5 and want to specify a custom data source, you can add it to the `WindowsEventLog` section of the diagnostics.wadcfgx file, such as in the following example.</span></span>

```
<WindowsEventLog scheduledTransferPeriod="PT1M">
   <DataSource name="Application!*" />
   <DataSource name="CustomDataSource!*" />
</WindowsEventLog>
```
### <a name="performance-counters"></a><span data-ttu-id="9d597-242">Liczniki wydajności</span><span class="sxs-lookup"><span data-stu-id="9d597-242">Performance counters</span></span>
<span data-ttu-id="9d597-243">Informacje o liczniku wydajności może pomóc w Znajdź wąskich gardeł systemu i poprawienia wydajności systemu i aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9d597-243">Performance counter information can help you locate system bottlenecks and fine-tune system and application performance.</span></span> <span data-ttu-id="9d597-244">Zobacz [tworzenie i Użyj liczników wydajności w aplikacji Azure](https://msdn.microsoft.com/library/azure/hh411542.aspx) Aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="9d597-244">See [Create and Use Performance Counters in an Azure Application](https://msdn.microsoft.com/library/azure/hh411542.aspx) for more information.</span></span> <span data-ttu-id="9d597-245">Aby przechwycić liczniki wydajności, zaznacz **włączyć transferu liczniki wydajności** pole wyboru.</span><span class="sxs-lookup"><span data-stu-id="9d597-245">If you want to capture performance counters, select the **Enable transfer of Performance Counters** check box.</span></span> <span data-ttu-id="9d597-246">Można zwiększyć lub zmniejszyć liczbę minut, jeśli dzienniki zdarzeń są przenoszone do konta magazynu, zmieniając **transferu okres (min)** wartość.</span><span class="sxs-lookup"><span data-stu-id="9d597-246">You can increase or decrease the number of minutes when the event logs are transferred to your storage account by changing the **Transfer Period (min)** value.</span></span> <span data-ttu-id="9d597-247">Zaznacz pola wyboru dla liczników wydajności, które mają być śledzone.</span><span class="sxs-lookup"><span data-stu-id="9d597-247">Select the check boxes for the performance counters that you want to track.</span></span>

  ![Liczniki wydajności](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758147.png)

<span data-ttu-id="9d597-249">Aby śledzić licznika wydajności, które nie ma na liście, wprowadź go przy użyciu składni sugerowane, a następnie wybierz pozycję **Dodaj** przycisku.</span><span class="sxs-lookup"><span data-stu-id="9d597-249">To track a performance counter that isn’t listed, enter it by using the suggested syntax and then choose the **Add** button.</span></span> <span data-ttu-id="9d597-250">System operacyjny na maszynie wirtualnej Określa, które liczniki wydajności można śledzić. Aby uzyskać więcej informacji na temat składni, zobacz [określania ścieżki licznika](https://msdn.microsoft.com/library/windows/desktop/aa373193.aspx).</span><span class="sxs-lookup"><span data-stu-id="9d597-250">The operating system on the virtual machine determines which performance counters you can track. For more information about syntax, see [Specifying a Counter Path](https://msdn.microsoft.com/library/windows/desktop/aa373193.aspx).</span></span>

### <a name="infrastructure-logs"></a><span data-ttu-id="9d597-251">Dzienniki infrastruktury</span><span class="sxs-lookup"><span data-stu-id="9d597-251">Infrastructure logs</span></span>
<span data-ttu-id="9d597-252">Jeśli chcesz przechwycić dzienniki infrastruktury, które zawierają informacje dotyczące infrastruktury diagnostycznych platformy Azure, wybierz moduł RemoteAccess i RemoteForwarder moduł, **włączyć transferu dzienniki infrastruktury** Sprawdź pole.</span><span class="sxs-lookup"><span data-stu-id="9d597-252">If you want to capture infrastructure logs, which contain information about the Azure diagnostic infrastructure, the RemoteAccess module, and the RemoteForwarder module, select the **Enable transfer of Infrastructure Logs** check box.</span></span> <span data-ttu-id="9d597-253">Można zwiększyć lub zmniejszyć liczbę minut, gdy są przekazywane dzienniki na koncie magazynu, zmieniając wartość okresu Transfer (min).</span><span class="sxs-lookup"><span data-stu-id="9d597-253">You can increase or decrease the number of minutes when the logs are transferred to your storage account by changing the Transfer Period (min) value.</span></span>

  ![Dzienniki infrastruktury diagnostyki](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758148.png)

  <span data-ttu-id="9d597-255">Zobacz [zbierania danych rejestrowania za pomocą diagnostyki Azure](https://msdn.microsoft.com/library/azure/gg433048.aspx) Aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="9d597-255">See [Collect Logging Data by Using Azure Diagnostics](https://msdn.microsoft.com/library/azure/gg433048.aspx) for more information.</span></span>

### <a name="log-directories"></a><span data-ttu-id="9d597-256">Katalogi dziennika</span><span class="sxs-lookup"><span data-stu-id="9d597-256">Log directories</span></span>
<span data-ttu-id="9d597-257">Aby przechwycić katalogi dziennika, które zawierają dane zbierane z katalogów dziennika dla żądań usług Internet Information Services (IIS), wybierz żądań zakończonych niepowodzeniem lub foldery, które można wybrać **włączyć transferu katalogów dziennika** pole wyboru.</span><span class="sxs-lookup"><span data-stu-id="9d597-257">If you want to capture log directories, which contain data collected from log directories for Internet Information Services (IIS) requests, failed requests, or folders that you choose, select the **Enable transfer of Log Directories** check box.</span></span> <span data-ttu-id="9d597-258">Można zwiększyć lub zmniejszyć liczbę minut, gdy są przekazywane dzienniki na koncie magazynu, zmieniając **transferu okres (min)** wartość.</span><span class="sxs-lookup"><span data-stu-id="9d597-258">You can increase or decrease the number of minutes when the logs are transferred to your storage account by changing the **Transfer Period (min)** value.</span></span>

<span data-ttu-id="9d597-259">Można wybrać pola dzienników, które chcesz zebrać, takich jak **dzienniki programu IIS** i **nie powiodło się żądanie** dzienniki.</span><span class="sxs-lookup"><span data-stu-id="9d597-259">You can select the boxes of the logs you want to collect, such as **IIS Logs** and **Failed Request** Logs.</span></span> <span data-ttu-id="9d597-260">Domyślne nazwy kontenera magazynu jest dostępny, ale można zmienić nazwy, jeśli chcesz.</span><span class="sxs-lookup"><span data-stu-id="9d597-260">Default storage container names are provided, but you can change the names if you want.</span></span>

<span data-ttu-id="9d597-261">Ponadto można przechwycić dzienniki z dowolnego folderu.</span><span class="sxs-lookup"><span data-stu-id="9d597-261">Also, you can capture logs from any folder.</span></span> <span data-ttu-id="9d597-262">Po prostu określić ścieżkę w **dziennika z katalogu bezwzględną** sekcji, a następnie wybierz pozycję **Dodaj katalog** przycisku.</span><span class="sxs-lookup"><span data-stu-id="9d597-262">Just specify the path in the **Log from Absolute Directory** section and then choose the **Add Directory** button.</span></span> <span data-ttu-id="9d597-263">Dzienniki będą przechwytywane do określonego kontenerów.</span><span class="sxs-lookup"><span data-stu-id="9d597-263">The logs will be captured to the specified containers.</span></span>

  ![Katalogi dziennika](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796665.png)

### <a name="etw-logs"></a><span data-ttu-id="9d597-265">Dzienniki zdarzeń systemu Windows</span><span class="sxs-lookup"><span data-stu-id="9d597-265">ETW logs</span></span>
<span data-ttu-id="9d597-266">Jeśli używasz [śledzenia zdarzeń dla systemu Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803\(v=vs.85\).aspx) (ETW) i aby przechwytywać dzienniki zdarzeń systemu Windows, zaznacz **włączyć transferu dzienniki zdarzeń systemu Windows** pole wyboru.</span><span class="sxs-lookup"><span data-stu-id="9d597-266">If you use [Event Tracing for Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803\(v=vs.85\).aspx) (ETW) and want to capture ETW logs, select the **Enable transfer of ETW Logs** check box.</span></span> <span data-ttu-id="9d597-267">Można zwiększyć lub zmniejszyć liczbę minut, gdy są przekazywane dzienniki na koncie magazynu, zmieniając **transferu okres (min)** wartość.</span><span class="sxs-lookup"><span data-stu-id="9d597-267">You can increase or decrease the number of minutes when the logs are transferred to your storage account by changing the **Transfer Period (min)** value.</span></span>

<span data-ttu-id="9d597-268">Zdarzenia są przechwytywane ze źródła zdarzeń i manifesty zdarzeń, które określisz.</span><span class="sxs-lookup"><span data-stu-id="9d597-268">The events are captured from event sources and event manifests that you specify.</span></span> <span data-ttu-id="9d597-269">Aby określić źródło zdarzenia, wprowadź nazwę w **źródła zdarzeń** sekcji, a następnie wybierz pozycję **Dodaj źródło zdarzeń** przycisku.</span><span class="sxs-lookup"><span data-stu-id="9d597-269">To specify an event source, enter a name in the **Event Sources** section and then choose the **Add Event Source** button.</span></span> <span data-ttu-id="9d597-270">Analogicznie, można określić manifest zdarzeń w **manifesty zdarzeń** sekcji, a następnie wybierz pozycję **Dodaj Manifest zdarzeń** przycisku.</span><span class="sxs-lookup"><span data-stu-id="9d597-270">Similarly, you can specify an event manifest in the **Event Manifests** section and then choose the **Add Event Manifest** button.</span></span>

  ![Dzienniki zdarzeń systemu Windows](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766025.png)

  <span data-ttu-id="9d597-272">ETW framework jest obsługiwana w programie ASP.NET za pośrednictwem klas w [System.Diagnostics.aspx] (przestrzeń nazw https://msdn.microsoft.com/library/system.diagnostics (v=vs.110).</span><span class="sxs-lookup"><span data-stu-id="9d597-272">The ETW framework is supported in ASP.NET through classes in the [System.Diagnostics.aspx](https://msdn.microsoft.com/library/system.diagnostics(v=vs.110) namespace.</span></span> <span data-ttu-id="9d597-273">Przestrzeń nazw Microsoft.WindowsAzure.Diagnostics, która dziedziczy i rozszerza standard [System.Diagnostics.aspx] (https://msdn.microsoft.com/library/system.diagnostics (v=vs.110) klas, umożliwia użycie protokołu https ([System.Diagnostics.aspx] : //msdn.microsoft.com/library/system.diagnostics(v=vs.110) jako struktury rejestrowania, w środowisku platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="9d597-273">The Microsoft.WindowsAzure.Diagnostics namespace, which inherits from and extends standard [System.Diagnostics.aspx](https://msdn.microsoft.com/library/system.diagnostics(v=vs.110) classes, enables the use of [System.Diagnostics.aspx](https://msdn.microsoft.com/library/system.diagnostics(v=vs.110) as a logging framework in the Azure environment.</span></span> <span data-ttu-id="9d597-274">Aby uzyskać więcej informacji, zobacz [zająć kontroli z rejestrowania i śledzenia w systemie Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) i [Włączanie diagnostyki w usług Azure Cloud Services i maszyn wirtualnych](cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="9d597-274">For more information, see [Take Control of Logging and Tracing in Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) and [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](cloud-services/cloud-services-dotnet-diagnostics.md).</span></span>

### <a name="crash-dumps"></a><span data-ttu-id="9d597-275">Zrzuty awaryjne</span><span class="sxs-lookup"><span data-stu-id="9d597-275">Crash dumps</span></span>
<span data-ttu-id="9d597-276">Jeśli chcesz przechwycić informacje o po wystąpienia roli ulegnie awarii, wybierz **włączyć przesyłanie awarii zrzuty** pole wyboru.</span><span class="sxs-lookup"><span data-stu-id="9d597-276">If you want to capture information about when a role instance crashes, select the **Enable transfer of Crash Dumps** check box.</span></span> <span data-ttu-id="9d597-277">(Ponieważ ASP.NET obsługuje większość wyjątki, jest zazwyczaj przydatne tylko w przypadku roli proces roboczy). Można zwiększyć lub zmniejszyć wartości procentowej miejsca do magazynowania poświęcone zrzuty awaryjne, zmieniając **przydziału katalogu (%)** wartość.</span><span class="sxs-lookup"><span data-stu-id="9d597-277">(Because ASP.NET handles most exceptions, this is generally useful only for worker roles.) You can increase or decrease the percentage of storage space devoted to the crash dumps by changing the **Directory Quota (%)** value.</span></span> <span data-ttu-id="9d597-278">Można zmienić kontener magazynu, w którym zrzuty awaryjne są przechowywane i można wybrać, czy mają być przechwytywane **pełne** lub **Mini** zrzutu.</span><span class="sxs-lookup"><span data-stu-id="9d597-278">You can change the storage container where the crash dumps are stored, and you can select whether you want to capture a **Full** or **Mini** dump.</span></span>

<span data-ttu-id="9d597-279">Procesy aktualnie śledzone są wyświetlane.</span><span class="sxs-lookup"><span data-stu-id="9d597-279">The processes currently being tracked are listed.</span></span> <span data-ttu-id="9d597-280">Zaznacz pola wyboru dla procesów, które mają być przechwytywane.</span><span class="sxs-lookup"><span data-stu-id="9d597-280">Select the check boxes for the processes that you want to capture.</span></span> <span data-ttu-id="9d597-281">Aby dodać inny proces na liście, wprowadź nazwę procesu, a następnie wybierz pozycję **proces dodawania** przycisku.</span><span class="sxs-lookup"><span data-stu-id="9d597-281">To add another process to the list, enter the process name and then choose the **Add Process** button.</span></span>

  ![Zrzuty awaryjne](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766026.png)

  <span data-ttu-id="9d597-283">Zobacz [zająć kontroli z rejestrowania i śledzenia w systemie Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) i [Microsoft Azure Diagnostics część 4: składniki Rejestrowanie niestandardowe i zmiany 1.3 diagnostyki Azure](http://justazure.com/microsoft-azure-diagnostics-part-4-custom-logging-components-azure-diagnostics-1-3-changes/) Aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="9d597-283">See [Take Control of Logging and Tracing in Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) and [Microsoft Azure Diagnostics Part 4: Custom Logging Components and Azure Diagnostics 1.3 Changes](http://justazure.com/microsoft-azure-diagnostics-part-4-custom-logging-components-azure-diagnostics-1-3-changes/) for more information.</span></span>

## <a name="view-the-diagnostics-data"></a><span data-ttu-id="9d597-284">Widok danych diagnostycznych</span><span class="sxs-lookup"><span data-stu-id="9d597-284">View the diagnostics data</span></span>
<span data-ttu-id="9d597-285">Po zostały zebrane dane diagnostyczne do usługi w chmurze lub maszynę wirtualną, możesz je wyświetlić.</span><span class="sxs-lookup"><span data-stu-id="9d597-285">After you’ve collected the diagnostics data for a cloud service or a virtual machine, you can view it.</span></span>

### <a name="to-view-cloud-service-diagnostics-data"></a><span data-ttu-id="9d597-286">Aby wyświetlić dane diagnostyczne usługi w chmurze</span><span class="sxs-lookup"><span data-stu-id="9d597-286">To view cloud service diagnostics data</span></span>
1. <span data-ttu-id="9d597-287">Wdrażanie usługi w chmurze w zwykły sposób, a następnie uruchom go.</span><span class="sxs-lookup"><span data-stu-id="9d597-287">Deploy your cloud service as usual and then run it.</span></span>
2. <span data-ttu-id="9d597-288">Dane diagnostyczne można wyświetlić raportu, który generuje Visual Studio lub tabel na koncie magazynu.</span><span class="sxs-lookup"><span data-stu-id="9d597-288">You can view the diagnostics data in either a report that Visual Studio generates or tables in your storage account.</span></span> <span data-ttu-id="9d597-289">Aby wyświetlić dane w raporcie, otwórz **Eksplorator chmury** lub **Eksploratora serwera**, otwórz menu skrótów węzła interesującego roli, a następnie wybierz **widoku danych diagnostycznych**.</span><span class="sxs-lookup"><span data-stu-id="9d597-289">To view the data in a report, open **Cloud Explorer** or **Server Explorer**, open the shortcut menu of the node for the role that interests you, and then choose **View Diagnostic Data**.</span></span>
   
    ![Widok danych diagnostycznych](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC748912.png)
   
    <span data-ttu-id="9d597-291">Zostanie wyświetlony raport pokazujący dostępne dane.</span><span class="sxs-lookup"><span data-stu-id="9d597-291">A report that shows the available data appears.</span></span>
   
    ![Raport diagnostyczny platformy Microsoft Azure w programie Visual Studio](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796666.png)
   
    <span data-ttu-id="9d597-293">Jeśli nie ma najnowszych danych, może być konieczne poczekaj, aż okres transfer może upłynąć.</span><span class="sxs-lookup"><span data-stu-id="9d597-293">If the most recent data doesn't appear, you might have to wait for the transfer period to elapse.</span></span>
   
    <span data-ttu-id="9d597-294">Wybierz **Odśwież** łącze, aby natychmiast zaktualizować dane lub wybierz interwał w **automatycznego odświeżania** lista rozwijana dane aktualizowane automatycznie.</span><span class="sxs-lookup"><span data-stu-id="9d597-294">Choose the **Refresh** link to immediately update the data, or choose an interval in the **Auto-Refresh** dropdown list box to have the data updated automatically.</span></span> <span data-ttu-id="9d597-295">Aby wyeksportować błąd danych, wybierz **Eksportuj do pliku CSV** przycisk, aby utworzyć plik wartości rozdzielanych przecinkami, można otworzyć w arkuszu kalkulacyjnym.</span><span class="sxs-lookup"><span data-stu-id="9d597-295">To export the error data, choose the **Export to CSV** button to create a comma-separated value file you can open in a spreadsheet.</span></span>
   
    <span data-ttu-id="9d597-296">W **Eksplorator chmury** lub **Eksploratora serwera**, otwórz konta magazynu, który został skojarzony z wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="9d597-296">In **Cloud Explorer** or **Server Explorer**, open the storage account that's associated with the deployment.</span></span>
3. <span data-ttu-id="9d597-297">Otwórz w tabelach diagnostyki w podglądzie tabeli, a następnie przejrzyj zebranych danych.</span><span class="sxs-lookup"><span data-stu-id="9d597-297">Open the diagnostics tables in the table viewer, and then review the data that you collected.</span></span> <span data-ttu-id="9d597-298">Dzienniki programu IIS i dzienników niestandardowych można otworzyć kontenera obiektów blob.</span><span class="sxs-lookup"><span data-stu-id="9d597-298">For IIS logs and custom logs, you can open a blob container.</span></span> <span data-ttu-id="9d597-299">Zostały podane w poniższej tabeli, można znaleźć tabeli lub obiektu blob kontenera, który zawiera interesujący Cię dane.</span><span class="sxs-lookup"><span data-stu-id="9d597-299">By reviewing the following table, you can find the table or blob container that contains the data that interests you.</span></span> <span data-ttu-id="9d597-300">Oprócz danych dla tego pliku dziennika, wpisy tabeli zawierają EventTickCount, DeploymentId roli i RoleInstance do określania, jakie maszyny wirtualnej i roli wygenerowanych danych i kiedy.</span><span class="sxs-lookup"><span data-stu-id="9d597-300">In addition to the data for that log file, the table entries contain EventTickCount, DeploymentId, Role, and RoleInstance to help you identify what virtual machine and role generated the data and when.</span></span> 
   
   | <span data-ttu-id="9d597-301">Dane diagnostyczne</span><span class="sxs-lookup"><span data-stu-id="9d597-301">Diagnostic data</span></span> | <span data-ttu-id="9d597-302">Opis</span><span class="sxs-lookup"><span data-stu-id="9d597-302">Description</span></span> | <span data-ttu-id="9d597-303">Lokalizacja</span><span class="sxs-lookup"><span data-stu-id="9d597-303">Location</span></span> |
   | --- | --- | --- |
   | <span data-ttu-id="9d597-304">Dzienniki aplikacji</span><span class="sxs-lookup"><span data-stu-id="9d597-304">Application Logs</span></span> |<span data-ttu-id="9d597-305">Dzienniki generowane przez wywołanie metody klasy System.Diagnostics.Trace kodu.</span><span class="sxs-lookup"><span data-stu-id="9d597-305">Logs that your code generates by calling methods of the System.Diagnostics.Trace class.</span></span> |<span data-ttu-id="9d597-306">WADLogsTable</span><span class="sxs-lookup"><span data-stu-id="9d597-306">WADLogsTable</span></span> |
   | <span data-ttu-id="9d597-307">Dzienniki zdarzeń</span><span class="sxs-lookup"><span data-stu-id="9d597-307">Event Logs</span></span> |<span data-ttu-id="9d597-308">Te dane są z dzienników zdarzeń systemu Windows na maszynach wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="9d597-308">This data is from the Windows event logs on the virtual machines.</span></span> <span data-ttu-id="9d597-309">System Windows przechowuje informacje w tych dziennikach, ale aplikacje i usługi również umożliwia raportowanie błędów lub rejestrowania informacji.</span><span class="sxs-lookup"><span data-stu-id="9d597-309">Windows stores information in these logs, but applications and services also use them to report errors or log information.</span></span> |<span data-ttu-id="9d597-310">WADWindowsEventLogsTable</span><span class="sxs-lookup"><span data-stu-id="9d597-310">WADWindowsEventLogsTable</span></span> |
   | <span data-ttu-id="9d597-311">Liczniki wydajności</span><span class="sxs-lookup"><span data-stu-id="9d597-311">Performance Counters</span></span> |<span data-ttu-id="9d597-312">Można zbierać dane w dowolnym licznika wydajności, które jest dostępne na maszynie wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="9d597-312">You can collect data on any performance counter that’s available on the virtual machine.</span></span> <span data-ttu-id="9d597-313">System operacyjny udostępnia liczników wydajności, które zawierają wiele statystyk, takich jak pamięć użycia i czasu procesora.</span><span class="sxs-lookup"><span data-stu-id="9d597-313">The operating system provides performance counters, which include many statistics such as memory usage and processor time.</span></span> |<span data-ttu-id="9d597-314">WADPerformanceCountersTable</span><span class="sxs-lookup"><span data-stu-id="9d597-314">WADPerformanceCountersTable</span></span> |
   | <span data-ttu-id="9d597-315">Dzienniki infrastruktury</span><span class="sxs-lookup"><span data-stu-id="9d597-315">Infrastructure Logs</span></span> |<span data-ttu-id="9d597-316">Te dzienniki są generowane na podstawie samej infrastruktury diagnostyki.</span><span class="sxs-lookup"><span data-stu-id="9d597-316">These logs are generated from the diagnostics infrastructure itself.</span></span> |<span data-ttu-id="9d597-317">WADDiagnosticInfrastructureLogsTable</span><span class="sxs-lookup"><span data-stu-id="9d597-317">WADDiagnosticInfrastructureLogsTable</span></span> |
   | <span data-ttu-id="9d597-318">Dzienniki programu IIS</span><span class="sxs-lookup"><span data-stu-id="9d597-318">IIS Logs</span></span> |<span data-ttu-id="9d597-319">Te dzienniki rejestrowania żądań sieci web.</span><span class="sxs-lookup"><span data-stu-id="9d597-319">These logs record web requests.</span></span> <span data-ttu-id="9d597-320">Jeśli usługi w chmurze pobiera znaczną ilość ruchu, dzienniki te mogą być bardzo długie, dlatego należy zebrać i zapisane dane tej tylko wtedy, gdy zajdzie taka potrzeba.</span><span class="sxs-lookup"><span data-stu-id="9d597-320">If your cloud service gets a significant amount of traffic, these logs can be quite lengthy, so you should collect and store this data only when you need it.</span></span> |<span data-ttu-id="9d597-321">Można znaleźć dzienniki żądanie nie powiodło się w kontenerze obiektów blob w obszarze wad iis failedreqlogs w ścieżce dla tego wdrożenia, roli i wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="9d597-321">You can find failed-request logs in the blob container under wad-iis-failedreqlogs under a path for that deployment, role, and instance.</span></span> <span data-ttu-id="9d597-322">Można znaleźć pełną dzienniki w obszarze logfiles-wad — usługi iis.</span><span class="sxs-lookup"><span data-stu-id="9d597-322">You can find complete logs under wad-iis-logfiles.</span></span> <span data-ttu-id="9d597-323">Dla każdego pliku wpisów w tabeli WADDirectories.</span><span class="sxs-lookup"><span data-stu-id="9d597-323">Entries for each file are made in the WADDirectories table.</span></span> |
   | <span data-ttu-id="9d597-324">Zrzuty awaryjne</span><span class="sxs-lookup"><span data-stu-id="9d597-324">Crash dumps</span></span> |<span data-ttu-id="9d597-325">Informacje te stanowią binarny obraz procesu usługi chmury (zazwyczaj roli proces roboczy).</span><span class="sxs-lookup"><span data-stu-id="9d597-325">This information provides binary images of your cloud service’s process (typically a worker role).</span></span> |<span data-ttu-id="9d597-326">kontener obiektów blob wad zgniatania zrzutów</span><span class="sxs-lookup"><span data-stu-id="9d597-326">wad-crush-dumps blob container</span></span> |
   | <span data-ttu-id="9d597-327">Pliki dziennika niestandardowego</span><span class="sxs-lookup"><span data-stu-id="9d597-327">Custom log files</span></span> |<span data-ttu-id="9d597-328">Dzienniki danych, który zostanie wstępnie zdefiniowane.</span><span class="sxs-lookup"><span data-stu-id="9d597-328">Logs of data that you predefined.</span></span> |<span data-ttu-id="9d597-329">Można określić w kodzie lokalizację plików dziennika niestandardowe na koncie magazynu.</span><span class="sxs-lookup"><span data-stu-id="9d597-329">You can specify in code the location of custom log files in your storage account.</span></span> <span data-ttu-id="9d597-330">Na przykład można określić kontenera niestandardowych obiektów blob.</span><span class="sxs-lookup"><span data-stu-id="9d597-330">For example, you can specify a custom blob container.</span></span> |
4. <span data-ttu-id="9d597-331">Jeśli zostały obcięte danych dowolnego typu, możesz zwiększyć bufor dla danych typu lub skrócić interwał między transferów danych z maszyny wirtualnej do konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="9d597-331">If data of any type is truncated, you can try increasing the buffer for that data type or shortening the interval between transfers of data from the virtual machine to your storage account.</span></span>
5. <span data-ttu-id="9d597-332">(opcjonalnie) Przeczyść dane z konta magazynu od czasu do czasu na obniżenie ogólnych kosztów magazynowania.</span><span class="sxs-lookup"><span data-stu-id="9d597-332">(optional) Purge data from the storage account occasionally to reduce overall storage costs.</span></span>
6. <span data-ttu-id="9d597-333">Po wykonaniu pełne wdrożenie plik diagnostics.cscfg (.wadcfgx dla 2.5 zestawu SDK platformy Azure) został zaktualizowany na platformie Azure i usługi w chmurze przejmuje wszystkie zmiany w konfiguracji diagnostyki.</span><span class="sxs-lookup"><span data-stu-id="9d597-333">When you do a full deployment, the diagnostics.cscfg file (.wadcfgx for Azure SDK 2.5) is updated in Azure, and your cloud service picks up any changes to your diagnostics configuration.</span></span> <span data-ttu-id="9d597-334">Jeśli, należy zaktualizować istniejące wdrożenie, pliku nie zostały zaktualizowane na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="9d597-334">If you, instead, update an existing deployment, the .cscfg file isn’t updated in Azure.</span></span> <span data-ttu-id="9d597-335">Ustawienia diagnostyki, można zmienić, wykonując kroki opisane w następnej sekcji.</span><span class="sxs-lookup"><span data-stu-id="9d597-335">You can still change diagnostics settings, though, by following the steps in the next section.</span></span> <span data-ttu-id="9d597-336">Aby uzyskać więcej informacji na temat wykonywania pełne wdrożenie i aktualizowania istniejącego wdrożenia, zobacz [Kreator publikowania aplikacji Azure](vs-azure-tools-publish-azure-application-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="9d597-336">For more information about performing a full deployment and updating an existing deployment, see [Publish Azure Application Wizard](vs-azure-tools-publish-azure-application-wizard.md).</span></span>

### <a name="to-view-virtual-machine-diagnostics-data"></a><span data-ttu-id="9d597-337">Aby wyświetlić dane diagnostyczne maszyny wirtualnej</span><span class="sxs-lookup"><span data-stu-id="9d597-337">To view virtual machine diagnostics data</span></span>
1. <span data-ttu-id="9d597-338">Menu skrótów dla maszyny wirtualnej, wybierz **dane diagnostyczne widoku**.</span><span class="sxs-lookup"><span data-stu-id="9d597-338">On the shortcut menu for the virtual machine, choose **View Diagnostics Data**.</span></span>
   
    ![Widok danych diagnostycznych w maszynie wirtualnej platformy Azure](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766027.png)
   
    <span data-ttu-id="9d597-340">Spowoduje to otwarcie **podsumowanie diagnostyki** okna.</span><span class="sxs-lookup"><span data-stu-id="9d597-340">This opens the **Diagnostics summary** window.</span></span>
   
    ![Podsumowanie diagnostyki maszyny wirtualnej platformy Azure](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796667.png)  
   
    <span data-ttu-id="9d597-342">Jeśli nie ma najnowszych danych, może być konieczne poczekaj, aż okres transfer może upłynąć.</span><span class="sxs-lookup"><span data-stu-id="9d597-342">If the most recent data doesn't appear, you might have to wait for the transfer period to elapse.</span></span>
   
    <span data-ttu-id="9d597-343">Wybierz **Odśwież** łącze, aby natychmiast zaktualizować dane lub wybierz interwał w **automatycznego odświeżania** lista rozwijana dane aktualizowane automatycznie.</span><span class="sxs-lookup"><span data-stu-id="9d597-343">Choose the **Refresh** link to immediately update the data, or choose an interval in the **Auto-Refresh** dropdown list box to have the data updated automatically.</span></span> <span data-ttu-id="9d597-344">Aby wyeksportować błąd danych, wybierz **Eksportuj do pliku CSV** przycisk, aby utworzyć plik wartości rozdzielanych przecinkami, można otworzyć w arkuszu kalkulacyjnym.</span><span class="sxs-lookup"><span data-stu-id="9d597-344">To export the error data, choose the **Export to CSV** button to create a comma-separated value file you can open in a spreadsheet.</span></span>

## <a name="configure-cloud-service-diagnostics-after-deployment"></a><span data-ttu-id="9d597-345">Skonfigurować diagnostykę usługi w chmurze po wdrożeniu</span><span class="sxs-lookup"><span data-stu-id="9d597-345">Configure cloud service diagnostics after deployment</span></span>
<span data-ttu-id="9d597-346">Jeśli w przypadku badania problemu z chmurą usługa tego już uruchomiona, należy zbierać dane, których nie podano zanim pierwotnie wdrożyć rolę.</span><span class="sxs-lookup"><span data-stu-id="9d597-346">If you're investigating a problem with a cloud service that already running, you might want to collect data that you didn't specify before you originally deployed the role.</span></span> <span data-ttu-id="9d597-347">W takim przypadku można zacząć zbierać dane przy użyciu ustawień w Eksploratorze serwera.</span><span class="sxs-lookup"><span data-stu-id="9d597-347">In this case, you can start to collect that data by using the settings in Server Explorer.</span></span> <span data-ttu-id="9d597-348">Możesz skonfigurować diagnostykę dla jednego wystąpienia lub wszystkich wystąpień w roli, w zależności od tego, czy otworzyć okno dialogowe konfiguracji diagnostyki w menu skrótów, czy wystąpienie roli.</span><span class="sxs-lookup"><span data-stu-id="9d597-348">You can configure diagnostics for either a single instance or all the instances in a role, depending on whether you open the Diagnostics Configuration dialog box from the shortcut menu for the instance or the role.</span></span> <span data-ttu-id="9d597-349">Jeśli konfigurujesz węzła roli, wszelkie zmiany dotyczą wszystkich wystąpień.</span><span class="sxs-lookup"><span data-stu-id="9d597-349">If you configure the role node, any changes apply to all instances.</span></span> <span data-ttu-id="9d597-350">Jeśli skonfigurujesz węzła wystąpienia zmiany dotyczą tylko tego wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="9d597-350">If you configure the instance node, any changes apply to that instance only.</span></span>

### <a name="to-configure-diagnostics-for-a-running-cloud-service"></a><span data-ttu-id="9d597-351">Aby skonfigurować diagnostykę dla uruchomionej usługi w chmurze</span><span class="sxs-lookup"><span data-stu-id="9d597-351">To configure diagnostics for a running cloud service</span></span>
1. <span data-ttu-id="9d597-352">W Eksploratorze serwera rozwiń **usługi w chmurze** węzeł, a następnie rozwiń węzły można zlokalizować roli lub wystąpienie, które chcesz zbadać lub oba.</span><span class="sxs-lookup"><span data-stu-id="9d597-352">In Server Explorer, expand the **Cloud Services** node, and then expand nodes to locate the role or instance that you want to investigate or both.</span></span>
   
    ![Konfigurowanie diagnostyki](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC748913.png)
2. <span data-ttu-id="9d597-354">W menu skrótów węzła wystąpienia lub węzłem roli wybierz **ustawień diagnostycznych aktualizacji**, a następnie wybierz pozycję Ustawienia diagnostyki, które mają być zbierane.</span><span class="sxs-lookup"><span data-stu-id="9d597-354">On the shortcut menu for an instance node or a role node, choose **Update Diagnostics Settings**, and then choose the diagnostic settings that you want to collect.</span></span>
   
    <span data-ttu-id="9d597-355">Aby uzyskać informacje o ustawieniach konfiguracji, zobacz **Konfigurowanie źródeł danych diagnostycznych** w tym temacie.</span><span class="sxs-lookup"><span data-stu-id="9d597-355">For information about the configuration settings, see **Configure diagnostics data sources** in this topic.</span></span> <span data-ttu-id="9d597-356">Aby uzyskać informacje o sposobie wyświetlania danych diagnostycznych, zobacz **wyświetlić dane diagnostyczne** w tym temacie.</span><span class="sxs-lookup"><span data-stu-id="9d597-356">For information about how to view the diagnostics data, see **View the diagnostics data** in this topic.</span></span>
   
    <span data-ttu-id="9d597-357">Jeśli zmienisz zbierania danych w **Eksploratora serwera**, te zmiany pozostaną aktywne do czasu ponownego wdrażania pełni usługi w chmurze.</span><span class="sxs-lookup"><span data-stu-id="9d597-357">If you change data collection in **Server Explorer**, these changes remain in effect until you fully redeploy your cloud service.</span></span> <span data-ttu-id="9d597-358">Jeśli użytkownik korzysta z domyślnych ustawień publikowania, zmiany nie zostaną zastąpione, ponieważ publikowania domyślne ustawienie służy do istniejącego wdrożenia aktualizacji, a nie czy pełnego ponownego wdrażania.</span><span class="sxs-lookup"><span data-stu-id="9d597-358">If you use the default publish settings, the changes are not overwritten, since the default publish setting is to update the existing deployment, rather than do a full redeployment.</span></span> <span data-ttu-id="9d597-359">Aby wyczyścić ustawienia w czasie wdrażania, przejdź do **Zaawansowane ustawienia** w Kreatorze publikowania i usuń zaznaczenie **aktualizację wdrożenia** wyboru.</span><span class="sxs-lookup"><span data-stu-id="9d597-359">To make sure the settings clear at deployment time, go to the **Advanced Settings** tab in the Publish wizard and clear the **Deployment update** checkbox.</span></span> <span data-ttu-id="9d597-360">Podczas ponownego wdrażania z wyczyszczone pole wyboru, przywrócić ustawienia określone w pliku .wadcfgx (lub .wadcfg) zestawu za pomocą edytora właściwości roli.</span><span class="sxs-lookup"><span data-stu-id="9d597-360">When you redeploy with that checkbox cleared, the settings revert to those in the .wadcfgx (or .wadcfg) file as set through the Properties editor for the role.</span></span> <span data-ttu-id="9d597-361">Po zaktualizowaniu wdrożenia usługi Azure śledzi stare ustawienia.</span><span class="sxs-lookup"><span data-stu-id="9d597-361">If you update your deployment, Azure keeps the old settings.</span></span>

## <a name="troubleshoot-azure-cloud-service-issues"></a><span data-ttu-id="9d597-362">Rozwiązywanie problemów dotyczących usługi w chmurze Azure</span><span class="sxs-lookup"><span data-stu-id="9d597-362">Troubleshoot Azure cloud service issues</span></span>
<span data-ttu-id="9d597-363">Jeśli wystąpią problemy z projektami usługi chmury, takich jak rolę, która pobiera zablokowane w stanie "zajęty" wielokrotnie odtwarzana lub zgłasza wyjątek, to wewnętrzny błąd serwera, istnieją narzędzia i techniki, których można użyć, aby zdiagnozować i rozwiązać te problemy.</span><span class="sxs-lookup"><span data-stu-id="9d597-363">If you experience problems with your cloud service projects, such as a role that gets stuck in a "busy" status, repeatedly recycles, or throws an internal server error, there are tools and techniques you can use to diagnose and fix these problems.</span></span> <span data-ttu-id="9d597-364">Przykładem typowe problemy i rozwiązania, a także omówienie pojęć i narzędzi służących do zdiagnozowania i rozwiązania takie błędy, zobacz [dane diagnostyczne obliczeniowe PaaS Azure](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span><span class="sxs-lookup"><span data-stu-id="9d597-364">For specific examples of common problems and solutions, as well as an overview of the concepts and tools used to diagnose and fix such errors, see [Azure PaaS Compute Diagnostics Data](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span></span>

## <a name="q--a"></a><span data-ttu-id="9d597-365">Pytania i odpowiedzi</span><span class="sxs-lookup"><span data-stu-id="9d597-365">Q & A</span></span>
<span data-ttu-id="9d597-366">**Co to jest rozmiar buforu, a rozmiar, jaki ma być?**</span><span class="sxs-lookup"><span data-stu-id="9d597-366">**What is the buffer size, and how large should it be?**</span></span>

<span data-ttu-id="9d597-367">W każdym wystąpieniu maszyny wirtualnej przydziały ograniczyć ilość danych diagnostycznych może być przechowywany w lokalnym systemie plików.</span><span class="sxs-lookup"><span data-stu-id="9d597-367">On each virtual machine instance, quotas limit how much diagnostic data can be stored on the local file system.</span></span> <span data-ttu-id="9d597-368">Ponadto można określić rozmiar buforu dla każdego typu danych diagnostycznych, która jest dostępna.</span><span class="sxs-lookup"><span data-stu-id="9d597-368">In addition, you specify a buffer size for each type of diagnostic data that's available.</span></span> <span data-ttu-id="9d597-369">Ten rozmiar buforu działa jak poszczególnych przydziału dla tego typu danych.</span><span class="sxs-lookup"><span data-stu-id="9d597-369">This buffer size acts like an individual quota for that type of data.</span></span> <span data-ttu-id="9d597-370">Sprawdzając dolnej części okna dialogowego, można określić całkowitej ilości i ilość pamięci, które pozostają zachowane.</span><span class="sxs-lookup"><span data-stu-id="9d597-370">By checking the bottom of the dialog box, you can determine the overall quota and the amount of memory that remains.</span></span> <span data-ttu-id="9d597-371">Jeśli określisz buforów większy lub więcej typów danych będzie osiągają całkowitej ilości.</span><span class="sxs-lookup"><span data-stu-id="9d597-371">If you specify larger buffers or more types of data, you'll approach the overall quota.</span></span> <span data-ttu-id="9d597-372">Ogólny limit przydziału można zmienić, modyfikując plik konfiguracji diagnostics.wadcfg/.wadcfgx.</span><span class="sxs-lookup"><span data-stu-id="9d597-372">You can change the overall quota by modifying the diagnostics.wadcfg/.wadcfgx configuration file.</span></span> <span data-ttu-id="9d597-373">Dane diagnostyczne są przechowywane w tym samym systemie plików jako dane aplikacji, więc jeśli aplikacja używa dużej ilości miejsca na dysku, nie należy zwiększyć ogólną przydział diagnostyki.</span><span class="sxs-lookup"><span data-stu-id="9d597-373">The diagnostics data is stored on the same filesystem as your application’s data, so if your application uses a lot of disk space, you shouldn’t increase the overall diagnostics quota.</span></span>

<span data-ttu-id="9d597-374">**Co to jest okres transfer i jak długo ma być?**</span><span class="sxs-lookup"><span data-stu-id="9d597-374">**What is the transfer period, and how long should it be?**</span></span>

<span data-ttu-id="9d597-375">Okres transfer to czas, który przechwytuje upłynie między danymi.</span><span class="sxs-lookup"><span data-stu-id="9d597-375">The transfer period is the amount of time that elapses between data captures.</span></span> <span data-ttu-id="9d597-376">Po zaakceptowaniu transferu danych jest przenoszona z lokalnego systemu plików na maszynę wirtualną do tabel na koncie magazynu.</span><span class="sxs-lookup"><span data-stu-id="9d597-376">After each transfer period, data is moved from the local filesystem on a virtual machine to tables in your storage account.</span></span> <span data-ttu-id="9d597-377">Jeśli ilość zbieranych danych przekroczy limit przydziału przed upływem okresu transferu, starsze dane zostaną odrzucone.</span><span class="sxs-lookup"><span data-stu-id="9d597-377">If the amount of data that's collected exceeds the quota before the end of a transfer period, older data is discarded.</span></span> <span data-ttu-id="9d597-378">Można zmniejszyć okres transferu, jeśli w przypadku utraty danych, ponieważ danych przekracza rozmiar buforu lub całkowitej ilości.</span><span class="sxs-lookup"><span data-stu-id="9d597-378">You might want to decrease the transfer period if you're losing data because your data exceeds the buffer size or the overall quota.</span></span>

<span data-ttu-id="9d597-379">**Strefy czasowej są sygnatury czasowe w?**</span><span class="sxs-lookup"><span data-stu-id="9d597-379">**What time zone are the time stamps in?**</span></span>

<span data-ttu-id="9d597-380">Sygnatury czasowe znajdują się w lokalnej strefie czasowej centrum danych, który jest hostem usługi w chmurze.</span><span class="sxs-lookup"><span data-stu-id="9d597-380">The time stamps are in the local time zone of the data center that hosts your cloud service.</span></span> <span data-ttu-id="9d597-381">Są używane następujące trzy kolumny znaczników czasu w tabelach dziennika.</span><span class="sxs-lookup"><span data-stu-id="9d597-381">The following three timestamp columns in the log tables are used.</span></span>

* <span data-ttu-id="9d597-382">**PreciseTimeStamp** jest to sygnatura czasowa ETW zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="9d597-382">**PreciseTimeStamp** is the ETW timestamp of the event.</span></span> <span data-ttu-id="9d597-383">Oznacza to, że czas zdarzenie jest rejestrowane przez klienta.</span><span class="sxs-lookup"><span data-stu-id="9d597-383">That is, the time the event is logged from the client.</span></span>
* <span data-ttu-id="9d597-384">**Sygnatura CZASOWA** jest PreciseTimeStamp zostać zaokrąglona w dół do granicy częstotliwości wysyłania.</span><span class="sxs-lookup"><span data-stu-id="9d597-384">**TIMESTAMP** is PreciseTimeStamp rounded down to the upload frequency boundary.</span></span> <span data-ttu-id="9d597-385">Więc jeśli częstotliwość przekazywania jest 5 minut i zdarzenia, czas 00:17:12, sygnatura CZASOWA będzie 00:15:00.</span><span class="sxs-lookup"><span data-stu-id="9d597-385">So, if your upload frequency is 5 minutes and the event time 00:17:12, TIMESTAMP will be 00:15:00.</span></span>
* <span data-ttu-id="9d597-386">**Sygnatura czasowa** jest to sygnatura czasowa, w którym została utworzona jednostka w tabeli platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="9d597-386">**Timestamp** is the timestamp at which the entity was created in the Azure table.</span></span>

<span data-ttu-id="9d597-387">**Jak zarządzać kosztami, podczas zbierania informacji diagnostycznych?**</span><span class="sxs-lookup"><span data-stu-id="9d597-387">**How do I manage costs when collecting diagnostic information?**</span></span>

<span data-ttu-id="9d597-388">Ustawienia domyślne (**poziom dziennika** ustawioną **błąd** i **okres transferu** ustawioną **1 minuta**) zostały zaprojektowane do minimum kosztów.</span><span class="sxs-lookup"><span data-stu-id="9d597-388">The default settings (**Log level** set to **Error** and **Transfer period** set to **1 minute**) are designed to minimize cost.</span></span> <span data-ttu-id="9d597-389">Razie zbieranie większej ilości danych lub Zmniejsz okres transfer zwiększy koszty obliczeń.</span><span class="sxs-lookup"><span data-stu-id="9d597-389">Your compute costs will increase if you collect more diagnostic data or decrease the transfer period.</span></span> <span data-ttu-id="9d597-390">Nie należy zbierać więcej danych niż wymagane i nie zapomnij Wyłącz funkcję zbierania danych, gdy nie są już potrzebne.</span><span class="sxs-lookup"><span data-stu-id="9d597-390">Don’t collect more data than you need, and don’t forget to disable data collection when you no longer need it.</span></span> <span data-ttu-id="9d597-391">Należy zawsze włączyć ją ponownie, nawet w czasie wykonywania, jak pokazano w poprzedniej sekcji.</span><span class="sxs-lookup"><span data-stu-id="9d597-391">You can always enable it again, even at runtime, as shown in the previous section.</span></span>

<span data-ttu-id="9d597-392">**Jak zebrać dzienniki nie powiodło się żądanie za pomocą programu IIS?**</span><span class="sxs-lookup"><span data-stu-id="9d597-392">**How do I collect failed-request logs from IIS?**</span></span>

<span data-ttu-id="9d597-393">Domyślnie usługi IIS nie zbierania dzienników żądanie nie powiodło się.</span><span class="sxs-lookup"><span data-stu-id="9d597-393">By default, IIS doesn’t collect failed-request logs.</span></span> <span data-ttu-id="9d597-394">Można skonfigurować usługi IIS do zbierania ich edycji pliku web.config dla roli sieci web.</span><span class="sxs-lookup"><span data-stu-id="9d597-394">You can configure IIS to collect them if you edit the web.config file for your web role.</span></span>

<span data-ttu-id="9d597-395">**Nie są zwracane informacje o śledzeniu z metody RoleEntryPoint, takie jak OnStart. Co jest nie tak?**</span><span class="sxs-lookup"><span data-stu-id="9d597-395">**I’m not getting trace information from RoleEntryPoint methods like OnStart. What’s wrong?**</span></span>

<span data-ttu-id="9d597-396">Metody RoleEntryPoint są nazywane w kontekście WAIISHost.exe, nie usług IIS.</span><span class="sxs-lookup"><span data-stu-id="9d597-396">The methods of RoleEntryPoint are called in the context of WAIISHost.exe, not IIS.</span></span> <span data-ttu-id="9d597-397">W związku z tym informacje o konfiguracji w pliku web.config, które normalnie nie mają zastosowanie umożliwia śledzenie.</span><span class="sxs-lookup"><span data-stu-id="9d597-397">Therefore, the configuration information in web.config that normally enables tracing doesn’t apply.</span></span> <span data-ttu-id="9d597-398">Aby rozwiązać ten problem, Dodaj plik .config do projektu roli sieci web i nazwa pliku do dopasowania zestawu wyjściowego, który zawiera kod RoleEntryPoint.</span><span class="sxs-lookup"><span data-stu-id="9d597-398">To resolve this issue, add a .config file to your web role project, and name the file to match the output assembly that contains the RoleEntryPoint code.</span></span> <span data-ttu-id="9d597-399">W domyślnej projektu roli sieć web nazwa pliku .config byłoby WAIISHost.exe.config. Następnie dodaj następujące wiersze do tego pliku:</span><span class="sxs-lookup"><span data-stu-id="9d597-399">In the default web role project, the name of the .config file would be WAIISHost.exe.config. Then add the following lines to this file:</span></span>

```
<system.diagnostics>
  <trace>
      <listeners>
          <add name “AzureDiagnostics” type=”Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener”>
              <filter type=”” />
          </add>
      </listeners>
  </trace>
</system.diagnostics>
```

<span data-ttu-id="9d597-400">Teraz, w **właściwości** ustaw **Kopiuj do katalogu wyjściowego** właściwości **skopiuj zawsze**.</span><span class="sxs-lookup"><span data-stu-id="9d597-400">Now, in the **Properties** window, set the **Copy to Output Directory** property to **Copy always**.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9d597-401">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="9d597-401">Next steps</span></span>
<span data-ttu-id="9d597-402">Aby dowiedzieć się więcej o diagnostyce rejestrowania na platformie Azure, zobacz [Włączanie diagnostyki w usług Azure Cloud Services i maszyn wirtualnych](cloud-services/cloud-services-dotnet-diagnostics.md) i [Włączanie rejestrowania diagnostyki dla aplikacji sieci web w usłudze Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md).</span><span class="sxs-lookup"><span data-stu-id="9d597-402">To learn more about diagnostics logging in Azure, see [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](cloud-services/cloud-services-dotnet-diagnostics.md) and [Enable diagnostics logging for web apps in Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md).</span></span>

