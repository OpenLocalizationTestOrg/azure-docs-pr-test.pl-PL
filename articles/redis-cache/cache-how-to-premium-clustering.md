---
title: "aaaHow tooconfigure Redis klastrowania podręczna Redis Azure Premium | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak toocreate i zarządzanie nimi Redis klastrowania warstwę Premium wystąpienia pamięci podręcznej Redis Azure"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 62208eec-52ae-4713-b077-62659fd844ab
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 07/05/2017
ms.author: sdanie
ms.openlocfilehash: 44d520facb9d1af145b69f1b58f082aabb655d4a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-redis-clustering-for-a-premium-azure-redis-cache"></a><span data-ttu-id="a2fe3-103">Jak tooconfigure Redis klastrowania podręczna Redis Azure Premium</span><span class="sxs-lookup"><span data-stu-id="a2fe3-103">How tooconfigure Redis clustering for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="a2fe3-104">Pamięć podręczna Redis Azure ma inną pamięci podręcznej oferty, które zapewniają elastyczność w wyborze hello rozmiar pamięci podręcznej i funkcji, łącznie z funkcji warstwy Premium, takich jak klastrowanie, trwałości i obsługi sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-104">Azure Redis Cache has different cache offerings, which provide flexibility in hello choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="a2fe3-105">W tym artykule opisano, jak tooconfigure klastrów w warstwie premium Azure pamięci podręcznej Redis wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-105">This article describes how tooconfigure clustering in a premium Azure Redis Cache instance.</span></span>

<span data-ttu-id="a2fe3-106">Aby uzyskać informacji o innych funkcjach pamięci podręcznej premium, zobacz [warstwy pamięci podręcznej Redis Azure Premium toohello wprowadzenie](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="a2fe3-106">For information on other premium cache features, see [Introduction toohello Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="what-is-redis-cluster"></a><span data-ttu-id="a2fe3-107">Co to jest Redis klastra?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-107">What is Redis Cluster?</span></span>
<span data-ttu-id="a2fe3-108">Pamięć podręczna Redis Azure oferuje klaster Redis jako [zaimplementowana w pamięci podręcznej Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="a2fe3-108">Azure Redis Cache offers Redis cluster as [implemented in Redis](http://redis.io/topics/cluster-tutorial).</span></span> <span data-ttu-id="a2fe3-109">Redis klastra można uzyskać hello następujące korzyści:</span><span class="sxs-lookup"><span data-stu-id="a2fe3-109">With Redis Cluster, you get hello following benefits:</span></span> 

* <span data-ttu-id="a2fe3-110">tooautomatically możliwości Hello podzielić zestawu danych między wieloma węzłami.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-110">hello ability tooautomatically split your dataset among multiple nodes.</span></span> 
* <span data-ttu-id="a2fe3-111">Hello możliwości toocontinue operacje podczas podzbioru węzłów hello występują błędy lub są toocommunicate z pozostałą hello hello klastra.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-111">hello ability toocontinue operations when a subset of hello nodes is experiencing failures or are unable toocommunicate with hello rest of hello cluster.</span></span> 
* <span data-ttu-id="a2fe3-112">Więcej przepustowości: przepływności zwiększa liniowo zwiększyć liczbę hello fragmentów.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-112">More throughput: Throughput increases linearly as you increase hello number of shards.</span></span> 
* <span data-ttu-id="a2fe3-113">Więcej rozmiar pamięci: zwiększa liniowo zwiększania hello liczbę fragmentów.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-113">More memory size: Increases linearly as you increase hello number of shards.</span></span>  

<span data-ttu-id="a2fe3-114">Aby uzyskać więcej informacji o rozmiarze, przepływności i przepustowości z pamięci podręcznych premium, zobacz [jakie oferty pamięć podręczna Redis i rozmiar należy używać?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)</span><span class="sxs-lookup"><span data-stu-id="a2fe3-114">For more information about size, throughput, and bandwidth with premium caches, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)</span></span>

<span data-ttu-id="a2fe3-115">Na platformie Azure Redis klastra jest oferowany jako model podstawowy/repliki, gdzie każdy identyfikator niezależnego fragmentu ma parę podstawowy/repliki z replikacją, gdzie replikacji hello jest zarządzane przez usługę pamięć podręczna Redis Azure.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-115">In Azure, Redis cluster is offered as a primary/replica model where each shard has a primary/replica pair with replication where hello replication is managed by Azure Redis Cache service.</span></span> 

## <a name="clustering"></a><span data-ttu-id="a2fe3-116">Klaster</span><span class="sxs-lookup"><span data-stu-id="a2fe3-116">Clustering</span></span>
<span data-ttu-id="a2fe3-117">Klaster jest włączona na powitania **nowa pamięć podręczna Redis** bloku podczas tworzenia pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-117">Clustering is enabled on hello **New Redis Cache** blade during cache creation.</span></span> 

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="a2fe3-118">Klaster jest skonfigurowany na powitania **klaster Redis** bloku.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-118">Clustering is configured on hello **Redis Cluster** blade.</span></span>

![Klaster][redis-cache-clustering]

<span data-ttu-id="a2fe3-120">Użytkownik może zawierać maksymalnie odłamków too10 hello klastra.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-120">You can have up too10 shards in hello cluster.</span></span> <span data-ttu-id="a2fe3-121">Kliknij przycisk **włączone** i przesuń suwak hello, lub wpisz liczbę z zakresu od 1 do 10 dla **liczby niezależnych** i kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-121">Click **Enabled** and slide hello slider or type a number between 1 and 10 for **Shard count** and click **OK**.</span></span>

<span data-ttu-id="a2fe3-122">Każdy identyfikator niezależnego fragmentu jest zarządzane przez usługę Azure parę pamięć podręczna podstawowy/repliki, a hello całkowity rozmiar pamięci podręcznej hello jest obliczana przez pomnożenie hello liczba odłamków przez wybrany w hello warstwy cenowej rozmiar pamięci podręcznej hello.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-122">Each shard is a primary/replica cache pair managed by Azure, and hello total size of hello cache is calculated by multiplying hello number of shards by hello cache size selected in hello pricing tier.</span></span> 

![Klaster][redis-cache-clustering-selected]

<span data-ttu-id="a2fe3-124">Po utworzeniu pamięci podręcznej hello połączyć tooit i użyj go tylko pamięci podręcznej niedziałającego w klastrze, takich jak i Redis dystrybuuje hello danych w całym hello odłamków pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-124">Once hello cache is created you connect tooit and use it just like a non-clustered cache, and Redis distributes hello data throughout hello Cache shards.</span></span> <span data-ttu-id="a2fe3-125">W przypadku diagnostyki [włączone](cache-how-to-monitor.md#enable-cache-diagnostics), metryki są przechwytywane osobno dla każdej niezależnych i może być [wyświetlić](cache-how-to-monitor.md) w hello bloku pamięci podręcznej Redis.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-125">If diagnostics is [enabled](cache-how-to-monitor.md#enable-cache-diagnostics), metrics are captured separately for each shard and can be [viewed](cache-how-to-monitor.md) in hello Redis Cache blade.</span></span> 

> [!NOTE]
> 
> <span data-ttu-id="a2fe3-126">Istnieją pewne niewielkie różnice w aplikacji klienta wymagane, jeśli klaster jest skonfigurowany.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-126">There are some minor differences required in your client application when clustering is configured.</span></span> <span data-ttu-id="a2fe3-127">Aby uzyskać więcej informacji, zobacz [należy toomake wszelkie zmiany toomy klienta aplikacji toouse klastra?](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span><span class="sxs-lookup"><span data-stu-id="a2fe3-127">For more information, see [Do I need toomake any changes toomy client application toouse clustering?](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span></span>
> 
> 

<span data-ttu-id="a2fe3-128">Przykładowy kod na temat pracy z usługą klastrowania z hello programie StackExchange.Redis klienta, zobacz hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) część hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) próbki.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-128">For sample code on working with clustering with hello StackExchange.Redis client, see hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) portion of hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) sample.</span></span>

<a name="cluster-size"></a>

## <a name="change-hello-cluster-size-on-a-running-premium-cache"></a><span data-ttu-id="a2fe3-129">Zmień rozmiar klastra hello na uruchomionej usługi pamięć podręczna premium</span><span class="sxs-lookup"><span data-stu-id="a2fe3-129">Change hello cluster size on a running premium cache</span></span>
<span data-ttu-id="a2fe3-130">rozmiar klastra hello toochange w uruchomionej premium pamięci podręcznej z klastrowania włączone, kliknij przycisk **Redis rozmiar klastra** z hello **zasobów menu**.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-130">toochange hello cluster size on a running premium cache with clustering enabled, click **Redis Cluster Size** from hello **Resource menu**.</span></span>

> [!NOTE]
> <span data-ttu-id="a2fe3-131">Gdy hello Azure Redis Premium usługi pamięć podręczna została warstwy wydaniu dostępności tooGeneral hello Redis rozmiar klastra funkcja jest obecnie w przeglądzie.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-131">While hello Azure Redis Cache Premium tier has been released tooGeneral Availability, hello Redis Cluster Size feature is currently in preview.</span></span>
> 
> 

![Rozmiar klastra redis][redis-cache-redis-cluster-size]

<span data-ttu-id="a2fe3-133">rozmiar klastra hello toochange, za pomocą suwaka hello lub wpisz liczbę z zakresu od 1 do 10 w hello **liczby niezależnych** polu tekstowym i kliknij przycisk **OK** toosave.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-133">toochange hello cluster size, use hello slider or type a number between 1 and 10 in hello **Shard count** text box and click **OK** toosave.</span></span>

> [!NOTE]
> <span data-ttu-id="a2fe3-134">Skalowanie klastra działa hello [migracji](https://redis.io/commands/migrate) polecenia, która jest kosztowna polecenia, dlatego dla minimalny wpływ, należy rozważyć uruchomieniem tej operacji podczas godziny poza szczytem.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-134">Scaling a cluster runs hello [MIGRATE](https://redis.io/commands/migrate) command, which is an expensive command, so for minimal impact, consider running this operation during non-peak hours.</span></span> <span data-ttu-id="a2fe3-135">Podczas procesu migracji hello zobaczysz kolekcji w obciążenia serwera.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-135">During hello migration process, you will see a spike in server load.</span></span> <span data-ttu-id="a2fe3-136">Skalowanie klastra długi działa procesu i hello czas zależy hello liczba kluczy i rozmiar hello wartości związane z tych kluczy.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-136">Scaling a cluster is a long running process and hello amount of time taken depends on hello number of keys and size of hello values associated with those keys.</span></span>
> 
> 

## <a name="clustering-faq"></a><span data-ttu-id="a2fe3-137">Klaster — często zadawane pytania</span><span class="sxs-lookup"><span data-stu-id="a2fe3-137">Clustering FAQ</span></span>
<span data-ttu-id="a2fe3-138">Witaj Poniższa lista zawiera toocommonly odpowiedzi zadawane pytania dotyczące klastrowania pamięć podręczna Redis Azure.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-138">hello following list contains answers toocommonly asked questions about Azure Redis Cache clustering.</span></span>

* [<span data-ttu-id="a2fe3-139">Należy toomake wszelkie zmiany toomy klienta aplikacji toouse klastra?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-139">Do I need toomake any changes toomy client application toouse clustering?</span></span>](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)
* [<span data-ttu-id="a2fe3-140">Jak klucze są rozpowszechniane w klastrze?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-140">How are keys distributed in a cluster?</span></span>](#how-are-keys-distributed-in-a-cluster)
* [<span data-ttu-id="a2fe3-141">Co to jest hello największy rozmiar pamięci podręcznej, który można utworzyć?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-141">What is hello largest cache size I can create?</span></span>](#what-is-the-largest-cache-size-i-can-create)
* [<span data-ttu-id="a2fe3-142">Wszyscy klienci Redis obsługują klastra?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-142">Do all Redis clients support clustering?</span></span>](#do-all-redis-clients-support-clustering)
* [<span data-ttu-id="a2fe3-143">Jak połączyć toomy pamięci podręcznej, gdy włączono klaster?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-143">How do I connect toomy cache when clustering is enabled?</span></span>](#how-do-i-connect-to-my-cache-when-clustering-is-enabled)
* [<span data-ttu-id="a2fe3-144">Mogą bezpośrednio łączyć z poszczególnych odłamków toohello Moje pamięci podręcznej?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-144">Can I directly connect toohello individual shards of my cache?</span></span>](#can-i-directly-connect-to-the-individual-shards-of-my-cache)
* [<span data-ttu-id="a2fe3-145">Można skonfigurować klaster utworzonej wcześniej pamięci podręcznej?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-145">Can I configure clustering for a previously created cache?</span></span>](#can-i-configure-clustering-for-a-previously-created-cache)
* [<span data-ttu-id="a2fe3-146">Można skonfigurować klaster na potrzeby pamięci podręcznej planu basic lub standard?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-146">Can I configure clustering for a basic or standard cache?</span></span>](#can-i-configure-clustering-for-a-basic-or-standard-cache)
* [<span data-ttu-id="a2fe3-147">Czy można użyć klastrowania z dostawcami hello stanu sesji ASP.NET dla pamięci podręcznej Redis i buforowanie danych wyjściowych</span><span class="sxs-lookup"><span data-stu-id="a2fe3-147">Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?</span></span>](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)
* [<span data-ttu-id="a2fe3-148">Otrzymuję przenoszenie wyjątków, używając programie StackExchange.Redis i klastrowania, co należy zrobić?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-148">I am getting MOVE exceptions when using StackExchange.Redis and clustering, what should I do?</span></span>](#i-am-getting-move-exceptions-when-using-stackexchangeredis-and-clustering-what-should-i-do)

### <a name="do-i-need-toomake-any-changes-toomy-client-application-toouse-clustering"></a><span data-ttu-id="a2fe3-149">Należy toomake wszelkie zmiany toomy klienta aplikacji toouse klastra?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-149">Do I need toomake any changes toomy client application toouse clustering?</span></span>
* <span data-ttu-id="a2fe3-150">Jeśli klaster jest włączone, tylko bazy danych 0 jest dostępna.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-150">When clustering is enabled, only database 0 is available.</span></span> <span data-ttu-id="a2fe3-151">Jeśli aplikacja kliencka używa wielu baz danych i próbuje tooread zapisu tooa bazy danych lub innych niż 0, hello następującego wyjątku.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-151">If your client application uses multiple databases and it tries tooread or write tooa database other than 0, hello following exception is thrown.</span></span> <span data-ttu-id="a2fe3-152">`Unhandled Exception: StackExchange.Redis.RedisConnectionException: ProtocolFailure on GET --->` `StackExchange.Redis.RedisCommandException: Multiple databases are not supported on this server; cannot switch toodatabase: 6`</span><span class="sxs-lookup"><span data-stu-id="a2fe3-152">`Unhandled Exception: StackExchange.Redis.RedisConnectionException: ProtocolFailure on GET --->` `StackExchange.Redis.RedisCommandException: Multiple databases are not supported on this server; cannot switch toodatabase: 6`</span></span>
  
  <span data-ttu-id="a2fe3-153">Aby uzyskać więcej informacji, zobacz [Redis specyfikacji klastra - zaimplementowanym podzestawu](http://redis.io/topics/cluster-spec#implemented-subset).</span><span class="sxs-lookup"><span data-stu-id="a2fe3-153">For more information, see [Redis Cluster Specification - Implemented subset](http://redis.io/topics/cluster-spec#implemented-subset).</span></span>
* <span data-ttu-id="a2fe3-154">Jeśli używasz [programie StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/), należy użyć 1.0.481 lub nowszym.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-154">If you are using [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/), you must use 1.0.481 or later.</span></span> <span data-ttu-id="a2fe3-155">Połączenie pamięci podręcznej toohello przy użyciu hello sam [punktów końcowych, portów i kluczy](cache-configure.md#properties) używanej podczas łączenia z pamięcią podręczną tooa, która nie ma włączoną funkcją klastrowania.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-155">You connect toohello cache using hello same [endpoints, ports, and keys](cache-configure.md#properties) that you use when connecting tooa cache that does not have clustering enabled.</span></span> <span data-ttu-id="a2fe3-156">Witaj jedyna różnica polega na tym, że wszystkie odczyty i zapisy musi zostać wykonane toodatabase 0.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-156">hello only difference is that all reads and writes must be done toodatabase 0.</span></span>
  
  * <span data-ttu-id="a2fe3-157">Inni klienci mogą mieć inne wymagania.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-157">Other clients may have different requirements.</span></span> <span data-ttu-id="a2fe3-158">Zobacz [wszystkich klientów pamięci podręcznej Redis obsługują klastra?](#do-all-redis-clients-support-clustering)</span><span class="sxs-lookup"><span data-stu-id="a2fe3-158">See [Do all Redis clients support clustering?](#do-all-redis-clients-support-clustering)</span></span>
* <span data-ttu-id="a2fe3-159">Jeśli aplikacja używa wielu operacji klucza przetwarzane wsadowo w jedno polecenie, wszystkie klucze musi znajdować się w hello sam identyfikator niezależnego fragmentu.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-159">If your application uses multiple key operations batched into a single command, all keys must be located in hello same shard.</span></span> <span data-ttu-id="a2fe3-160">klucze toolocate w hello sam identyfikator niezależnego fragmentu, zobacz [klucze rozkład w klastrze?](#how-are-keys-distributed-in-a-cluster)</span><span class="sxs-lookup"><span data-stu-id="a2fe3-160">toolocate keys in hello same shard, see [How are keys distributed in a cluster?](#how-are-keys-distributed-in-a-cluster)</span></span>
* <span data-ttu-id="a2fe3-161">Jeśli używasz dostawcy stanu sesji ASP.NET dla pamięci podręcznej Redis należy użyć 2.0.1 lub nowszej.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-161">If you are using Redis ASP.NET Session State provider you must use 2.0.1 or higher.</span></span> <span data-ttu-id="a2fe3-162">Zobacz [użyć, klastra z dostawcami stanu sesji ASP.NET dla pamięci podręcznej Redis i buforowanie danych wyjściowych hello?](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)</span><span class="sxs-lookup"><span data-stu-id="a2fe3-162">See [Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)</span></span>

### <a name="how-are-keys-distributed-in-a-cluster"></a><span data-ttu-id="a2fe3-163">Jak klucze są rozpowszechniane w klastrze?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-163">How are keys distributed in a cluster?</span></span>
<span data-ttu-id="a2fe3-164">Na powitania Redis [modelu dystrybucji kluczy](http://redis.io/topics/cluster-spec#keys-distribution-model) dokumentacji: hello klucza miejsca jest podzielony na 16384 gniazda.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-164">Per hello Redis [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model) documentation: hello key space is split into 16384 slots.</span></span> <span data-ttu-id="a2fe3-165">Każdy klucz jest mieszany i przypisane tooone tych gniazd, które są dystrybuowane między węzłami hello hello klastra.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-165">Each key is hashed and assigned tooone of these slots, which are distributed across hello nodes of hello cluster.</span></span> <span data-ttu-id="a2fe3-166">Można skonfigurować, która część klucza hello jest skrótem tooensure, w którym znajduje się wiele kluczy w hello sam identyfikator niezależnego fragmentu przy użyciu tagów wyznaczania wartości skrótu.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-166">You can configure which part of hello key is hashed tooensure that multiple keys are located in hello same shard using hash tags.</span></span>

* <span data-ttu-id="a2fe3-167">Klucze z tagiem skrótu — Jeśli dowolną część klucza hello jest ujęta w `{` i `}`, tylko część klucza hello jest wartość skrótu do celów hello określenia miejsca skrótu hello klucza.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-167">Keys with a hash tag - if any part of hello key is enclosed in `{` and `}`, only that part of hello key is hashed for hello purposes of determining hello hash slot of a key.</span></span> <span data-ttu-id="a2fe3-168">Na przykład hello następujące klucze 3 znajduje się w hello sam identyfikator niezależnego fragmentu: `{key}1`, `{key}2`, i `{key}3` od tylko hello `key` część nazwy hello jest wartość skrótu.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-168">For example, hello following 3 keys would be located in hello same shard: `{key}1`, `{key}2`, and `{key}3` since only hello `key` part of hello name is hashed.</span></span> <span data-ttu-id="a2fe3-169">Pełną listę klawiszy skrótu tag specyfikacji zobacz [klawiszy skrótu tagi](http://redis.io/topics/cluster-spec#keys-hash-tags).</span><span class="sxs-lookup"><span data-stu-id="a2fe3-169">For a complete list of keys hash tag specifications, see [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span></span>
* <span data-ttu-id="a2fe3-170">Klucze bez tagu skrótu - całą nazwę klucza hello jest używany do tworzenia skrótów.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-170">Keys without a hash tag - hello entire key name is used for hashing.</span></span> <span data-ttu-id="a2fe3-171">W efekcie statystycznie nawet dystrybucji między odłamków hello hello pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-171">This results in a statistically even distribution across hello shards of hello cache.</span></span>

<span data-ttu-id="a2fe3-172">Aby uzyskać najlepszą wydajność i przepływność zaleca się dystrybucji kluczy hello równomiernie.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-172">For best performance and throughput, we recommend distributing hello keys evenly.</span></span> <span data-ttu-id="a2fe3-173">Jeśli korzystasz z kluczy z tagiem wyznaczania wartości skrótu jest równomiernie aplikacji hello odpowiedzialność tooensure hello kluczy.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-173">If you are using keys with a hash tag it is hello application's responsibility tooensure hello keys are distributed evenly.</span></span>

<span data-ttu-id="a2fe3-174">Aby uzyskać więcej informacji, zobacz [modelu dystrybucji kluczy](http://redis.io/topics/cluster-spec#keys-distribution-model), [dzielenia na fragmenty danych Redis klastra](http://redis.io/topics/cluster-tutorial#redis-cluster-data-sharding), i [klawiszy skrótu tagi](http://redis.io/topics/cluster-spec#keys-hash-tags).</span><span class="sxs-lookup"><span data-stu-id="a2fe3-174">For more information, see [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model), [Redis Cluster data sharding](http://redis.io/topics/cluster-tutorial#redis-cluster-data-sharding), and [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span></span>

<span data-ttu-id="a2fe3-175">Przykładowy kod na temat pracy z klastra i lokalizowania kluczy w hello sam identyfikator niezależnego fragmentu z hello programie StackExchange.Redis klienta, zobacz hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) część hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) próbki.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-175">For sample code on working with clustering and locating keys in hello same shard with hello StackExchange.Redis client, see hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) portion of hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) sample.</span></span>

### <a name="what-is-hello-largest-cache-size-i-can-create"></a><span data-ttu-id="a2fe3-176">Co to jest hello największy rozmiar pamięci podręcznej, który można utworzyć?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-176">What is hello largest cache size I can create?</span></span>
<span data-ttu-id="a2fe3-177">największy rozmiar pamięci podręcznej premium Hello jest 53 GB.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-177">hello largest premium cache size is 53 GB.</span></span> <span data-ttu-id="a2fe3-178">Możesz utworzyć zapasowej odłamków too10, umożliwiając maksymalny rozmiar 530 GB.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-178">You can create up too10 shards giving you a maximum size of 530 GB.</span></span> <span data-ttu-id="a2fe3-179">Jeśli potrzebujesz większy rozmiar można [żądania więcej](mailto:wapteams@microsoft.com?subject=Redis%20Cache%20quota%20increase).</span><span class="sxs-lookup"><span data-stu-id="a2fe3-179">If you need a larger size you can [request more](mailto:wapteams@microsoft.com?subject=Redis%20Cache%20quota%20increase).</span></span> <span data-ttu-id="a2fe3-180">Aby uzyskać więcej informacji, zobacz [cennik usługi Azure Redis pamięci podręcznej](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="a2fe3-180">For more information, see [Azure Redis Cache Pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span>

### <a name="do-all-redis-clients-support-clustering"></a><span data-ttu-id="a2fe3-181">Wszyscy klienci Redis obsługują klastra?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-181">Do all Redis clients support clustering?</span></span>
<span data-ttu-id="a2fe3-182">Na powitania obecny czas nie obsługiwać klientów pamięci podręcznej Redis klastra.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-182">At hello present time not all clients support Redis clustering.</span></span> <span data-ttu-id="a2fe3-183">Programie StackExchange.Redis to taki, który obsługuje dla niego.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-183">StackExchange.Redis is one that does support for it.</span></span> <span data-ttu-id="a2fe3-184">Aby uzyskać więcej informacji na innych klientów, zobacz hello [odtwarzanie z klastrem hello](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) sekcji hello [samouczek klaster Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="a2fe3-184">For more information on other clients, see hello [Playing with hello cluster](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) section of hello [Redis cluster tutorial](http://redis.io/topics/cluster-tutorial).</span></span>

> [!NOTE]
> <span data-ttu-id="a2fe3-185">Jeśli używasz programie StackExchange.Redis jako klienta, upewnij się, używane są hello najnowszą wersję [programie StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/) 1.0.481 lub nowszej do klastrowania toowork poprawnie.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-185">If you are using StackExchange.Redis as your client, ensure you are using hello latest version of [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/) 1.0.481 or later for clustering toowork correctly.</span></span> <span data-ttu-id="a2fe3-186">Jeśli masz problemy z wyjątków przenoszenia, zobacz [przenoszenie wyjątków](#move-exceptions) Aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-186">If you have any issues with move exceptions, see [move exceptions](#move-exceptions) for more information.</span></span>
> 
> 

### <a name="how-do-i-connect-toomy-cache-when-clustering-is-enabled"></a><span data-ttu-id="a2fe3-187">Jak połączyć toomy pamięci podręcznej, gdy włączono klaster?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-187">How do I connect toomy cache when clustering is enabled?</span></span>
<span data-ttu-id="a2fe3-188">Możesz połączyć tooyour pamięci podręcznej przy użyciu hello sam [punkty końcowe](cache-configure.md#properties), [porty](cache-configure.md#properties), i [klucze](cache-configure.md#access-keys) używanej podczas łączenia z pamięcią podręczną tooa, która nie ma włączoną funkcją klastrowania.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-188">You can connect tooyour cache using hello same [endpoints](cache-configure.md#properties), [ports](cache-configure.md#properties), and [keys](cache-configure.md#access-keys) that you use when connecting tooa cache that does not have clustering enabled.</span></span> <span data-ttu-id="a2fe3-189">Redis zarządza hello usługi klastrowania na powitania wewnętrznej bazy danych, dzięki czemu nie trzeba toomanage go z tego klienta.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-189">Redis manages hello clustering on hello backend so you don't have toomanage it from your client.</span></span>

### <a name="can-i-directly-connect-toohello-individual-shards-of-my-cache"></a><span data-ttu-id="a2fe3-190">Mogą bezpośrednio łączyć z poszczególnych odłamków toohello Moje pamięci podręcznej?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-190">Can I directly connect toohello individual shards of my cache?</span></span>
<span data-ttu-id="a2fe3-191">To nie jest oficjalnie obsługiwana.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-191">This is not officially supported.</span></span> <span data-ttu-id="a2fe3-192">Z tym powiedział każdy identyfikator niezależnego fragmentu składa się z pary pamięci podręcznej podstawowy/repliki, nazywanych zbiorczo wystąpienia pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-192">With that said, each shard consists of a primary/replica cache pair, collectively known as a cache instance.</span></span> <span data-ttu-id="a2fe3-193">Możesz połączyć za pomocą narzędzia interfejsu wiersza polecenia redis hello w hello wystąpienia pamięci podręcznej toothese [niestabilny](http://redis.io/download) gałęzi repozytorium Redis hello w witrynie GitHub.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-193">You can connect toothese cache instances using hello redis-cli utility in hello [unstable](http://redis.io/download) branch of hello Redis repository at GitHub.</span></span> <span data-ttu-id="a2fe3-194">Ta wersja implementuje podstawowa pomoc techniczna podczas pracy z hello `-c` przełącznika.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-194">This version implements basic support when started with hello `-c` switch.</span></span> <span data-ttu-id="a2fe3-195">Aby uzyskać więcej informacji, zobacz [odtwarzanie z klastrem hello](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) na [http://redis.io](http://redis.io) w hello [samouczek klaster Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="a2fe3-195">For more information see [Playing with hello cluster](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) on [http://redis.io](http://redis.io) in hello [Redis cluster tutorial](http://redis.io/topics/cluster-tutorial).</span></span>

<span data-ttu-id="a2fe3-196">Bez protokołu ssl można użyć hello następujące polecenia.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-196">For non-ssl, use hello following commands.</span></span>

    Redis-cli.exe –h <<cachename>> -p 13000 (tooconnect tooinstance 0)
    Redis-cli.exe –h <<cachename>> -p 13001 (tooconnect tooinstance 1)
    Redis-cli.exe –h <<cachename>> -p 13002 (tooconnect tooinstance 2)
    ...
    Redis-cli.exe –h <<cachename>> -p 1300N (tooconnect tooinstance N)

<span data-ttu-id="a2fe3-197">Dla protokołu ssl, należy zastąpić `1300N` z `1500N`.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-197">For ssl, replace `1300N` with `1500N`.</span></span>

### <a name="can-i-configure-clustering-for-a-previously-created-cache"></a><span data-ttu-id="a2fe3-198">Można skonfigurować klaster utworzonej wcześniej pamięci podręcznej?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-198">Can I configure clustering for a previously created cache?</span></span>
<span data-ttu-id="a2fe3-199">Obecnie można włączyć tylko klastra podczas tworzenia pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-199">Currently you can only enable clustering when you create a cache.</span></span> <span data-ttu-id="a2fe3-200">Rozmiar klastra hello można zmienić po utworzeniu hello pamięci podręcznej, ale nie można dodać pamięć podręczna premium tooa klastrowania lub usunąć klastrowanie z pamięci podręcznej premium po utworzeniu hello pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-200">You can change hello cluster size after hello cache is created, but you can't add clustering tooa premium cache or remove clustering from a premium cache after hello cache is created.</span></span> <span data-ttu-id="a2fe3-201">Pamięć podręczna premium z włączoną funkcją klastrowania i tylko jeden identyfikator niezależnego fragmentu są inne niż premium pamięci podręcznej hello samej wielkości z klastrowaniem nie.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-201">A premium cache with clustering enabled and only one shard is different than a premium cache of hello same size with no clustering.</span></span>

### <a name="can-i-configure-clustering-for-a-basic-or-standard-cache"></a><span data-ttu-id="a2fe3-202">Można skonfigurować klaster na potrzeby pamięci podręcznej planu basic lub standard?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-202">Can I configure clustering for a basic or standard cache?</span></span>
<span data-ttu-id="a2fe3-203">Klaster jest dostępna tylko dla pamięci podręcznej premium.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-203">Clustering is only available for premium caches.</span></span>

### <a name="can-i-use-clustering-with-hello-redis-aspnet-session-state-and-output-caching-providers"></a><span data-ttu-id="a2fe3-204">Czy można użyć klastrowania z dostawcami hello stanu sesji ASP.NET dla pamięci podręcznej Redis i buforowanie danych wyjściowych</span><span class="sxs-lookup"><span data-stu-id="a2fe3-204">Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?</span></span>
* <span data-ttu-id="a2fe3-205">**Dostawcy wyjściowej pamięci podręcznej redis** -żadne zmiany wymagane.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-205">**Redis Output Cache provider** - no changes required.</span></span>
* <span data-ttu-id="a2fe3-206">**Dostawca stanu sesji w pamięci podręcznej redis** -toouse klastrowania, należy użyć [pakietu RedisSessionStateProvider](https://www.nuget.org/packages/Microsoft.Web.RedisSessionStateProvider) 2.0.1 lub nowszej albo wyjątek zostanie zgłoszony.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-206">**Redis Session State provider** - toouse clustering, you must use [RedisSessionStateProvider](https://www.nuget.org/packages/Microsoft.Web.RedisSessionStateProvider) 2.0.1 or higher or an exception is thrown.</span></span> <span data-ttu-id="a2fe3-207">Jest to istotne zmiany; Aby uzyskać więcej informacji, zobacz [v2.0.0 fundamentalne zmiany szczegółów](https://github.com/Azure/aspnet-redis-providers/wiki/v2.0.0-Breaking-Change-Details).</span><span class="sxs-lookup"><span data-stu-id="a2fe3-207">This is a breaking change; for more information see [v2.0.0 Breaking Change Details](https://github.com/Azure/aspnet-redis-providers/wiki/v2.0.0-Breaking-Change-Details).</span></span>

<a name="move-exceptions"></a>

### <a name="i-am-getting-move-exceptions-when-using-stackexchangeredis-and-clustering-what-should-i-do"></a><span data-ttu-id="a2fe3-208">Otrzymuję przenoszenie wyjątków, używając programie StackExchange.Redis i klastrowania, co należy zrobić?</span><span class="sxs-lookup"><span data-stu-id="a2fe3-208">I am getting MOVE exceptions when using StackExchange.Redis and clustering, what should I do?</span></span>
<span data-ttu-id="a2fe3-209">Jeśli używasz programie StackExchange.Redis i odbierać `MOVE` wyjątków podczas korzystania z klastra, upewnij się, że używasz [programie StackExchange.Redis 1.1.603](https://www.nuget.org/packages/StackExchange.Redis/) lub nowszym.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-209">If you are using StackExchange.Redis and receive `MOVE` exceptions when using clustering, ensure that you are using [StackExchange.Redis 1.1.603](https://www.nuget.org/packages/StackExchange.Redis/) or later.</span></span> <span data-ttu-id="a2fe3-210">Aby uzyskać instrukcje dotyczące konfigurowania programu .NET aplikacji toouse w programie StackExchange.Redis, zobacz [Konfigurowanie klientów pamięci podręcznej hello](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span><span class="sxs-lookup"><span data-stu-id="a2fe3-210">For instructions on configuring your .NET applications toouse StackExchange.Redis, see [Configure hello cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

## <a name="next-steps"></a><span data-ttu-id="a2fe3-211">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="a2fe3-211">Next steps</span></span>
<span data-ttu-id="a2fe3-212">Dowiedz się, jak toouse premium więcej pamięci podręcznej funkcji.</span><span class="sxs-lookup"><span data-stu-id="a2fe3-212">Learn how toouse more premium cache features.</span></span>

* [<span data-ttu-id="a2fe3-213">Wprowadzenie toohello pamięci podręcznej Redis Azure Premium warstwy</span><span class="sxs-lookup"><span data-stu-id="a2fe3-213">Introduction toohello Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-clustering]: ./media/cache-how-to-premium-clustering/redis-cache-clustering.png

[redis-cache-clustering-selected]: ./media/cache-how-to-premium-clustering/redis-cache-clustering-selected.png

[redis-cache-redis-cluster-size]: ./media/cache-how-to-premium-clustering/redis-cache-redis-cluster-size.png







