---
title: "Trwałość danych tooconfigure aaaHow dla podręczna Redis Azure Premium"
description: "Dowiedz się, jak tooconfigure i zarządzanie nimi trwałości danych swoich wystąpień pamięci podręcznej Redis Azure warstwy Premium"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: b01cf279-60a0-4711-8c5f-af22d9540d38
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 08/24/2017
ms.author: sdanie
ms.openlocfilehash: 62feb6f5522e0270487f045eb303bf852434143d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-data-persistence-for-a-premium-azure-redis-cache"></a><span data-ttu-id="7d407-103">Jak trwałości danych tooconfigure dla podręczna Redis Azure Premium</span><span class="sxs-lookup"><span data-stu-id="7d407-103">How tooconfigure data persistence for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="7d407-104">Pamięć podręczna Redis Azure ma ofert różnych pamięci podręcznej, które zapewniają elastyczność w wyborze hello rozmiar pamięci podręcznej i funkcji, łącznie z funkcji warstwy Premium, takich jak klastrowanie, trwałości i obsługi sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="7d407-104">Azure Redis Cache has different cache offerings which provide flexibility in hello choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="7d407-105">W tym artykule opisano, jak trwałości tooconfigure w warstwie premium Azure pamięci podręcznej Redis wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="7d407-105">This article describes how tooconfigure persistence in a premium Azure Redis Cache instance.</span></span>

<span data-ttu-id="7d407-106">Aby uzyskać informacji o innych funkcjach pamięci podręcznej premium, zobacz [warstwy pamięci podręcznej Redis Azure Premium toohello wprowadzenie](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="7d407-106">For information on other premium cache features, see [Introduction toohello Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="what-is-data-persistence"></a><span data-ttu-id="7d407-107">Co to jest trwałości danych?</span><span class="sxs-lookup"><span data-stu-id="7d407-107">What is data persistence?</span></span>
<span data-ttu-id="7d407-108">[Trwałość redis](https://redis.io/topics/persistence) pozwala toopersist danych przechowywanych w pamięci podręcznej Redis.</span><span class="sxs-lookup"><span data-stu-id="7d407-108">[Redis persistence](https://redis.io/topics/persistence) allows you toopersist data stored in Redis.</span></span> <span data-ttu-id="7d407-109">Można również wykonać migawki i utworzyć kopię zapasową danych hello, które można załadować w przypadku awarii sprzętu.</span><span class="sxs-lookup"><span data-stu-id="7d407-109">You can also take snapshots and back up hello data, which you can load in case of a hardware failure.</span></span> <span data-ttu-id="7d407-110">Jest to bardzo dużą zaletą za pośrednictwem Basic lub warstwy standardowa, gdzie hello wszystkie dane są przechowywane w pamięci i może być utracie danych w przypadku awarii skutkującej węzłów pamięci podręcznej w dół.</span><span class="sxs-lookup"><span data-stu-id="7d407-110">This is a huge advantage over Basic or Standard tier where all hello data is stored in memory and there can be potential data loss in case of a failure where Cache nodes are down.</span></span> 

<span data-ttu-id="7d407-111">Pamięć podręczna Redis Azure oferuje trwałość Redis przy użyciu hello następujące modele:</span><span class="sxs-lookup"><span data-stu-id="7d407-111">Azure Redis Cache offers Redis persistence using hello following models:</span></span>

* <span data-ttu-id="7d407-112">**Trwałość RDB** -trwałości po RDB (bazy danych Redis) jest skonfigurowany, pamięć podręczna Redis Azure migawki pamięci podręcznej Redis hello w pamięci podręcznej Redis toodisk formatu binarnego w oparciu można skonfigurować częstotliwość wykonywania kopii zapasowych będzie się powtarzał.</span><span class="sxs-lookup"><span data-stu-id="7d407-112">**RDB persistence** - When RDB (Redis database) persistence is configured, Azure Redis Cache persists a snapshot of hello Redis cache in a Redis binary format toodisk based on a configurable backup frequency.</span></span> <span data-ttu-id="7d407-113">Jeśli krytycznego zdarzenie wystąpi wyłączenie hello podstawowy i repliki w pamięci podręcznej, pamięć podręczna hello jest odtworzone przy użyciu najnowszych migawki hello.</span><span class="sxs-lookup"><span data-stu-id="7d407-113">If a catastrophic event occurs that disables both hello primary and replica cache, hello cache is reconstructed using hello most recent snapshot.</span></span> <span data-ttu-id="7d407-114">Dowiedz się więcej o hello [zalety](https://redis.io/topics/persistence#rdb-advantages) i [wady](https://redis.io/topics/persistence#rdb-disadvantages) o trwałości RDB.</span><span class="sxs-lookup"><span data-stu-id="7d407-114">Learn more about hello [advantages](https://redis.io/topics/persistence#rdb-advantages) and [disadvantages](https://redis.io/topics/persistence#rdb-disadvantages) of RDB persistence.</span></span>
* <span data-ttu-id="7d407-115">**Trwałość AOF** -trwałości po AOF (Dołącz tylko plików) jest skonfigurowany, pamięć podręczna Redis Azure jest zapisywany co tooa dziennika operacji zapisu zapisany co najmniej raz na sekundę na konto magazynu Azure.</span><span class="sxs-lookup"><span data-stu-id="7d407-115">**AOF persistence** - When AOF (Append only file) persistence is configured, Azure Redis Cache saves every write operation tooa log that is saved at least once per second into an Azure Storage account.</span></span> <span data-ttu-id="7d407-116">Jeśli krytycznego zdarzenie wystąpi wyłączenie hello podstawowy i repliki w pamięci podręcznej, pamięć podręczna hello jest odtworzone przy użyciu operacji zapisu hello przechowywane.</span><span class="sxs-lookup"><span data-stu-id="7d407-116">If a catastrophic event occurs that disables both hello primary and replica cache, hello cache is reconstructed using hello stored write operations.</span></span> <span data-ttu-id="7d407-117">Dowiedz się więcej o hello [zalety](https://redis.io/topics/persistence#aof-advantages) i [wady](https://redis.io/topics/persistence#aof-disadvantages) z AOF trwałości.</span><span class="sxs-lookup"><span data-stu-id="7d407-117">Learn more about hello [advantages](https://redis.io/topics/persistence#aof-advantages) and [disadvantages](https://redis.io/topics/persistence#aof-disadvantages) of AOF persistence.</span></span>

<span data-ttu-id="7d407-118">Trwałości jest konfigurowana przy użyciu hello **nowa pamięć podręczna Redis** bloku podczas tworzenia pamięci podręcznej i na powitania **zasobów menu** istniejących Premium przechowuje w pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="7d407-118">Persistence is configured from hello **New Redis Cache** blade during cache creation and on hello **Resource menu** for existing premium caches.</span></span>

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="7d407-119">Po wybraniu warstwie cenowej premium kliknij **trwałość Redis**.</span><span class="sxs-lookup"><span data-stu-id="7d407-119">Once a premium pricing tier is selected, click **Redis persistence**.</span></span>

![Trwałość redis][redis-cache-persistence]

<span data-ttu-id="7d407-121">Witaj w hello następnej sekcji opisano sposób tooconfigure trwałość Redis na nowa pamięć podręczna premium.</span><span class="sxs-lookup"><span data-stu-id="7d407-121">hello steps in hello next section describe how tooconfigure Redis persistence on your new premium cache.</span></span> <span data-ttu-id="7d407-122">Po skonfigurowaniu trwałość Redis, kliknij przycisk **Utwórz** toocreate Twojego nowego premium pamięci podręcznej z trwałość Redis.</span><span class="sxs-lookup"><span data-stu-id="7d407-122">Once Redis persistence is configured, click **Create** toocreate your new premium cache with Redis persistence.</span></span>

## <a name="enable-redis-persistence"></a><span data-ttu-id="7d407-123">Włącz trwałość Redis</span><span class="sxs-lookup"><span data-stu-id="7d407-123">Enable Redis persistence</span></span>

<span data-ttu-id="7d407-124">Redis trwałości jest włączona na powitania **trwałość danych Redis** bloku, wybierając opcję **RDB** lub **AOF** trwałości.</span><span class="sxs-lookup"><span data-stu-id="7d407-124">Redis persistence is enabled on hello **Redis data persistence** blade by choosing either **RDB** or **AOF** persistence.</span></span> <span data-ttu-id="7d407-125">Dla nowych pamięci podręcznych ten blok jest dostępny w trakcie procesu tworzenia pamięci podręcznej hello zgodnie z opisem w poprzedniej sekcji hello.</span><span class="sxs-lookup"><span data-stu-id="7d407-125">For new caches, this blade is accessed during hello cache creation process, as described in hello previous section.</span></span> <span data-ttu-id="7d407-126">Dla istniejącej pamięci podręcznych, hello **trwałość danych Redis** bloku jest dostępny z hello **zasobów menu** dla pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="7d407-126">For existing caches, hello **Redis data persistence** blade is accessed from hello **Resource menu** for your cache.</span></span>

![Ustawienia redis][redis-cache-settings]


## <a name="configure-rdb-persistence"></a><span data-ttu-id="7d407-128">Konfigurowanie trwałości RDB</span><span class="sxs-lookup"><span data-stu-id="7d407-128">Configure RDB persistence</span></span>

<span data-ttu-id="7d407-129">tooenable RDB trwałości, kliknij przycisk **RDB**.</span><span class="sxs-lookup"><span data-stu-id="7d407-129">tooenable RDB persistence, click **RDB**.</span></span> <span data-ttu-id="7d407-130">trwałość RDB toodisable na włączonym uprzednio premium pamięć podręczną, kliknij przycisk **wyłączone**.</span><span class="sxs-lookup"><span data-stu-id="7d407-130">toodisable RDB persistence on a previously enabled premium cache, click **Disabled**.</span></span>

![RDB trwałość redis][redis-cache-rdb-persistence]

<span data-ttu-id="7d407-132">tooconfigure hello interwał wykonywania kopii zapasowej, wybierz opcję **częstotliwość wykonywania kopii zapasowych** z listy rozwijanej hello.</span><span class="sxs-lookup"><span data-stu-id="7d407-132">tooconfigure hello backup interval, select a **Backup Frequency** from hello drop-down list.</span></span> <span data-ttu-id="7d407-133">Można także wybrać opcję **15 minut**, **30 minut**, **60 minut**, **6 godzin**, **12 godzin**i **24 godziny**.</span><span class="sxs-lookup"><span data-stu-id="7d407-133">Choices include **15 Minutes**, **30 minutes**, **60 minutes**, **6 hours**, **12 hours**, and **24 hours**.</span></span> <span data-ttu-id="7d407-134">Ten interwał odlicza w dół po pomyślnym zakończeniu hello poprzedniej operacji tworzenia kopii zapasowej i po jego upływie nową kopię zapasową jest inicjowana.</span><span class="sxs-lookup"><span data-stu-id="7d407-134">This interval starts counting down after hello previous backup operation successfully completes and when it elapses a new backup is initiated.</span></span>

<span data-ttu-id="7d407-135">Kliknij przycisk **konta magazynu** tooselect hello toouse konta magazynu, a następnie wybierz pozycję albo hello **klucza podstawowego** lub **klucza pomocniczego** toouse z hello **magazynu Klucz** listy rozwijanej.</span><span class="sxs-lookup"><span data-stu-id="7d407-135">Click **Storage Account** tooselect hello storage account toouse, and choose either hello **Primary key** or **Secondary key** toouse from hello **Storage Key** drop-down.</span></span> <span data-ttu-id="7d407-136">Musisz wybrać konto magazynu w hello tego samego regionu hello pamięci podręcznej, a **magazyn w warstwie Premium** konta jest zalecane, ponieważ Magazyn w warstwie premium ma wyższej przepustowości.</span><span class="sxs-lookup"><span data-stu-id="7d407-136">You must choose a storage account in hello same region as hello cache, and a **Premium Storage** account is recommended because premium storage has higher throughput.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="7d407-137">Podczas ponownego generowania klucza magazynu hello konta trwałości, należy ponownie skonfigurować inny klawisz hello z hello **klucza magazynu** listy rozwijanej.</span><span class="sxs-lookup"><span data-stu-id="7d407-137">If hello storage key for your persistence account is regenerated, you must reconfigure hello desired key from hello **Storage Key** drop-down.</span></span>
> 
> 

<span data-ttu-id="7d407-138">Kliknij przycisk **OK** toosave hello trwałości konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="7d407-138">Click **OK** toosave hello persistence configuration.</span></span>

<span data-ttu-id="7d407-139">Witaj następnej kopii zapasowej (lub pierwszej kopii zapasowej dla nowych pamięci podręcznych) jest inicjowana po upływie interwału powitania częstotliwość wykonywania kopii zapasowych.</span><span class="sxs-lookup"><span data-stu-id="7d407-139">hello next backup (or first backup for new caches) is initiated once hello backup frequency interval elapses.</span></span>

## <a name="configure-aof-persistence"></a><span data-ttu-id="7d407-140">Konfigurowanie trwałości AOF</span><span class="sxs-lookup"><span data-stu-id="7d407-140">Configure AOF persistence</span></span>

<span data-ttu-id="7d407-141">tooenable AOF trwałości, kliknij przycisk **AOF**.</span><span class="sxs-lookup"><span data-stu-id="7d407-141">tooenable AOF persistence, click **AOF**.</span></span> <span data-ttu-id="7d407-142">trwałość AOF toodisable na włączonym uprzednio premium pamięć podręczną, kliknij przycisk **wyłączone**.</span><span class="sxs-lookup"><span data-stu-id="7d407-142">toodisable AOF persistence on a previously enabled premium cache, click **Disabled**.</span></span>

![AOF trwałość redis][redis-cache-aof-persistence]

<span data-ttu-id="7d407-144">tooconfigure AOF trwałości, określ **pierwsze konto magazynu**.</span><span class="sxs-lookup"><span data-stu-id="7d407-144">tooconfigure AOF persistence, specify a **First Storage Account**.</span></span> <span data-ttu-id="7d407-145">To konto magazynu musi być w hello tego samego regionu hello pamięci podręcznej, a **magazyn w warstwie Premium** konta jest zalecane, ponieważ Magazyn w warstwie premium ma wyższej przepustowości.</span><span class="sxs-lookup"><span data-stu-id="7d407-145">This storage account must be in hello same region as hello cache, and a **Premium Storage** account is recommended because premium storage has higher throughput.</span></span> <span data-ttu-id="7d407-146">Opcjonalnie można skonfigurować konto dodatkowego magazynu o nazwie **drugiego konta magazynu**.</span><span class="sxs-lookup"><span data-stu-id="7d407-146">You can optionally configure an additional storage account named **Second Storage Account**.</span></span> <span data-ttu-id="7d407-147">Jeśli skonfigurowano drugiego konta magazynu, hello zapisy toohello repliki w pamięci podręcznej są zapisywane toothis drugiego konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="7d407-147">If a second storage account is configured, hello writes toohello replica cache are written toothis second storage account.</span></span> <span data-ttu-id="7d407-148">Dla każdego konta skonfigurowanego magazynu, wybierz albo hello **klucza podstawowego** lub **klucza pomocniczego** toouse z hello **klucza magazynu** listy rozwijanej.</span><span class="sxs-lookup"><span data-stu-id="7d407-148">For each configured storage account, choose either hello **Primary key** or **Secondary key** toouse from hello **Storage Key** drop-down.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="7d407-149">Podczas ponownego generowania klucza magazynu hello konta trwałości, należy ponownie skonfigurować inny klawisz hello z hello **klucza magazynu** listy rozwijanej.</span><span class="sxs-lookup"><span data-stu-id="7d407-149">If hello storage key for your persistence account is regenerated, you must reconfigure hello desired key from hello **Storage Key** drop-down.</span></span>
> 
> 

<span data-ttu-id="7d407-150">Po włączeniu trwałości AOF zapisu operacji toohello w pamięci podręcznej są zapisywane toohello wyznaczony konta magazynu (lub konta, jeśli skonfigurowano drugiego konta magazynu).</span><span class="sxs-lookup"><span data-stu-id="7d407-150">When AOF persistence is enabled, write operations toohello cache are saved toohello designated storage account (or accounts if you have configured a second storage account).</span></span> <span data-ttu-id="7d407-151">W przypadku poważnej awarii hello czy zajmuje dół zarówno hello podstawowy i repliki pamięci podręcznej, hello przechowywanych AOF dziennik jest używane toorebuild hello w pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="7d407-151">In hello event of a catastrophic failure that takes down both hello primary and replica cache, hello stored AOF log is used toorebuild hello cache.</span></span>

## <a name="persistence-faq"></a><span data-ttu-id="7d407-152">Trwałość — często zadawane pytania</span><span class="sxs-lookup"><span data-stu-id="7d407-152">Persistence FAQ</span></span>
<span data-ttu-id="7d407-153">Witaj Poniższa lista zawiera toocommonly odpowiedzi zadawane pytania dotyczące pamięci podręcznej Redis Azure trwałości.</span><span class="sxs-lookup"><span data-stu-id="7d407-153">hello following list contains answers toocommonly asked questions about Azure Redis Cache persistence.</span></span>

* [<span data-ttu-id="7d407-154">Można włączyć trwałości na utworzonej wcześniej pamięci podręcznej?</span><span class="sxs-lookup"><span data-stu-id="7d407-154">Can I enable persistence on a previously created cache?</span></span>](#can-i-enable-persistence-on-a-previously-created-cache)
* [<span data-ttu-id="7d407-155">Trwałość AOF i RDB na powitania można włączyć jednocześnie?</span><span class="sxs-lookup"><span data-stu-id="7d407-155">Can I enable AOF and RDB persistence at hello same time?</span></span>](#can-i-enable-aof-and-rdb-persistence-at-the-same-time)
* [<span data-ttu-id="7d407-156">Model trwałości, który należy wybrać?</span><span class="sxs-lookup"><span data-stu-id="7d407-156">Which persistence model should I choose?</span></span>](#which-persistence-model-should-i-choose)
* [<span data-ttu-id="7d407-157">Co się stanie, jeśli mają I skalować tooa inny rozmiar i przywróceniu kopii zapasowej utworzonej przed hello operacji skalowania?</span><span class="sxs-lookup"><span data-stu-id="7d407-157">What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?</span></span>](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)


### <a name="rdb-persistence"></a><span data-ttu-id="7d407-158">Trwałość RDB</span><span class="sxs-lookup"><span data-stu-id="7d407-158">RDB persistence</span></span>
* [<span data-ttu-id="7d407-159">Częstotliwość wykonywania kopii zapasowych RDB hello można zmienić po utworzeniu pamięci podręcznej hello?</span><span class="sxs-lookup"><span data-stu-id="7d407-159">Can I change hello RDB backup frequency after I create hello cache?</span></span>](#can-i-change-the-rdb-backup-frequency-after-i-create-the-cache)
* [<span data-ttu-id="7d407-160">Dlaczego Jeśli częstotliwość wykonywania kopii zapasowych RDB 60 minut istnieje ponad 60 minut między kopii zapasowych?</span><span class="sxs-lookup"><span data-stu-id="7d407-160">Why if I have an RDB backup frequency of 60 minutes there is more than 60 minutes between backups?</span></span>](#why-if-i-have-an-rdb-backup-frequency-of-60-minutes-there-is-more-than-60-minutes-between-backups)
* [<span data-ttu-id="7d407-161">Co się stanie toohello starych kopii zapasowych RDB podczas tworzenia nowej kopii zapasowej?</span><span class="sxs-lookup"><span data-stu-id="7d407-161">What happens toohello old RDB backups when a new backup is made?</span></span>](#what-happens-to-the-old-rdb-backups-when-a-new-backup-is-made)

### <a name="aof-persistence"></a><span data-ttu-id="7d407-162">Trwałość AOF</span><span class="sxs-lookup"><span data-stu-id="7d407-162">AOF persistence</span></span>
* [<span data-ttu-id="7d407-163">Kiedy należy używać drugiego konta magazynu?</span><span class="sxs-lookup"><span data-stu-id="7d407-163">When should I use a second storage account?</span></span>](#when-should-i-use-a-second-storage-account)
* [<span data-ttu-id="7d407-164">Czy AOF trwałości mają wpływ na całym, opóźnienia lub wydajności Moje pamięci podręcznej?</span><span class="sxs-lookup"><span data-stu-id="7d407-164">Does AOF persistence affect throughout, latency, or performance of my cache?</span></span>](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)
* [<span data-ttu-id="7d407-165">Jak usunąć hello drugiego konta magazynu?</span><span class="sxs-lookup"><span data-stu-id="7d407-165">How can I remove hello second storage account?</span></span>](#how-can-i-remove-the-second-storage-account)
* [<span data-ttu-id="7d407-166">Co to jest ponownego zapisywania i jak wpływa na mój pamięci podręcznej?</span><span class="sxs-lookup"><span data-stu-id="7d407-166">What is a rewrite and how does it affect my cache?</span></span>](#what-is-a-rewrite-and-how-does-it-affect-my-cache)
* [<span data-ttu-id="7d407-167">Co należy oczekiwać podczas skalowania pamięci podręcznej z AOF włączone?</span><span class="sxs-lookup"><span data-stu-id="7d407-167">What should I expect when scaling a cache with AOF enabled?</span></span>](#what-should-i-expect-when-scaling-a-cache-with-aof-enabled)
* [<span data-ttu-id="7d407-168">Sposób organizowania danych AOF w magazynie?</span><span class="sxs-lookup"><span data-stu-id="7d407-168">How is my AOF data organized in storage?</span></span>](#how-is-my-aof-data-organized-in-storage)


### <a name="can-i-enable-persistence-on-a-previously-created-cache"></a><span data-ttu-id="7d407-169">Można włączyć trwałości na utworzonej wcześniej pamięci podręcznej?</span><span class="sxs-lookup"><span data-stu-id="7d407-169">Can I enable persistence on a previously created cache?</span></span>
<span data-ttu-id="7d407-170">Tak, trwałość Redis można skonfigurować zarówno na tworzenie pamięci podręcznej, jak i na istniejące premium pamięci podręcznych.</span><span class="sxs-lookup"><span data-stu-id="7d407-170">Yes, Redis persistence can be configured both at cache creation and on existing premium caches.</span></span>

### <a name="can-i-enable-aof-and-rdb-persistence-at-hello-same-time"></a><span data-ttu-id="7d407-171">Trwałość AOF i RDB na powitania można włączyć jednocześnie?</span><span class="sxs-lookup"><span data-stu-id="7d407-171">Can I enable AOF and RDB persistence at hello same time?</span></span>

<span data-ttu-id="7d407-172">Nie można włączyć tylko RDB lub AOF, ale nie oba na powitania tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="7d407-172">No, you can enable only RDB or AOF, but not both at hello same time.</span></span>

### <a name="which-persistence-model-should-i-choose"></a><span data-ttu-id="7d407-173">Model trwałości, który należy wybrać?</span><span class="sxs-lookup"><span data-stu-id="7d407-173">Which persistence model should I choose?</span></span>

<span data-ttu-id="7d407-174">Trwałość AOF zapisuje co zapisu tooa dziennika, który ma pewien wpływ na przepustowość, w porównaniu z RDB trwałości, który zapisuje kopie zapasowe oparte na powitania skonfigurowany interwał wykonywania kopii zapasowej z minimalnym wpływem na wydajność.</span><span class="sxs-lookup"><span data-stu-id="7d407-174">AOF persistence saves every write tooa log, which has some impact on throughput, compared with RDB persistence which saves backups based on hello configured backup interval, with minimal impact on performance.</span></span> <span data-ttu-id="7d407-175">Wybierz AOF trwałości, jeśli z podstawowym celem jest toominimize utraty danych, a może obsłużyć spadek przepustowości dla pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="7d407-175">Choose AOF persistence if your primary goal is toominimize data loss, and you can handle a decrease in throughput for your cache.</span></span> <span data-ttu-id="7d407-176">Wybierz opcję trwałości RDB, jeśli chcesz toomaintain optymalnej przepływności w pamięci podręcznej, ale nadal chcesz mechanizm odzyskiwania danych.</span><span class="sxs-lookup"><span data-stu-id="7d407-176">Choose RDB persistence if you wish toomaintain optimal throughput on your cache, but still want a mechanism for data recovery.</span></span>

* <span data-ttu-id="7d407-177">Dowiedz się więcej o hello [zalety](https://redis.io/topics/persistence#rdb-advantages) i [wady](https://redis.io/topics/persistence#rdb-disadvantages) o trwałości RDB.</span><span class="sxs-lookup"><span data-stu-id="7d407-177">Learn more about hello [advantages](https://redis.io/topics/persistence#rdb-advantages) and [disadvantages](https://redis.io/topics/persistence#rdb-disadvantages) of RDB persistence.</span></span>
* <span data-ttu-id="7d407-178">Dowiedz się więcej o hello [zalety](https://redis.io/topics/persistence#aof-advantages) i [wady](https://redis.io/topics/persistence#aof-disadvantages) z AOF trwałości.</span><span class="sxs-lookup"><span data-stu-id="7d407-178">Learn more about hello [advantages](https://redis.io/topics/persistence#aof-advantages) and [disadvantages](https://redis.io/topics/persistence#aof-disadvantages) of AOF persistence.</span></span>

<span data-ttu-id="7d407-179">Aby uzyskać więcej informacji o wydajności, korzystając z AOF trwałości, zobacz [AOF jest wpływ trwałości w całym, opóźnienia lub wydajności Moje pamięci podręcznej?](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)</span><span class="sxs-lookup"><span data-stu-id="7d407-179">For more information on performance when using AOF persistence, see [Does AOF persistence affect throughout, latency, or performance of my cache?](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)</span></span>

### <a name="what-happens-if-i-have-scaled-tooa-different-size-and-a-backup-is-restored-that-was-made-before-hello-scaling-operation"></a><span data-ttu-id="7d407-180">Co się stanie, jeśli mają I skalować tooa inny rozmiar i przywróceniu kopii zapasowej utworzonej przed hello operacji skalowania?</span><span class="sxs-lookup"><span data-stu-id="7d407-180">What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?</span></span>

<span data-ttu-id="7d407-181">Zarówno RDB, jak i AOF trwałości:</span><span class="sxs-lookup"><span data-stu-id="7d407-181">For both RDB and AOF persistence:</span></span>

* <span data-ttu-id="7d407-182">Większy rozmiar tooa ma skalowania, nie ma żadnego wpływu.</span><span class="sxs-lookup"><span data-stu-id="7d407-182">If you have scaled tooa larger size, there is no impact.</span></span>
* <span data-ttu-id="7d407-183">Jeśli ma skalować tooa mniejszy rozmiar, i mieć niestandardowej [baz danych](cache-configure.md#databases) ustawienie jest większa niż hello [limit bazy danych](cache-configure.md#databases) dla Twojego nowego rozmiaru danych w tych baz danych nie jest przywrócony.</span><span class="sxs-lookup"><span data-stu-id="7d407-183">If you have scaled tooa smaller size, and you have a custom [databases](cache-configure.md#databases) setting that is greater than hello [databases limit](cache-configure.md#databases) for your new size, data in those databases isn't restored.</span></span> <span data-ttu-id="7d407-184">Aby uzyskać więcej informacji, zobacz [jest niestandardowe ustawienie dotyczy podczas skalowania baz danych?](cache-how-to-scale.md#is-my-custom-databases-setting-affected-during-scaling)</span><span class="sxs-lookup"><span data-stu-id="7d407-184">For more information, see [Is my custom databases setting affected during scaling?](cache-how-to-scale.md#is-my-custom-databases-setting-affected-during-scaling)</span></span>
* <span data-ttu-id="7d407-185">Jeśli ma skalowania tooa mniejszy rozmiar, a nie ma wystarczającej ilości miejsca w hello mniejszy rozmiar toohold wszystkie dane hello z ostatniej kopii zapasowej, klucze hello zostanie wykluczona podczas procesu przywracania hello, zwykle za pomocą hello [allkeys lru](http://redis.io/topics/lru-cache) wykluczenia zasady.</span><span class="sxs-lookup"><span data-stu-id="7d407-185">If you have scaled tooa smaller size, and there isn't enough room in hello smaller size toohold all of hello data from hello last backup, keys will be evicted during hello restore process, typically using hello [allkeys-lru](http://redis.io/topics/lru-cache) eviction policy.</span></span>

### <a name="can-i-change-hello-rdb-backup-frequency-after-i-create-hello-cache"></a><span data-ttu-id="7d407-186">Częstotliwość wykonywania kopii zapasowych RDB hello można zmienić po utworzeniu pamięci podręcznej hello?</span><span class="sxs-lookup"><span data-stu-id="7d407-186">Can I change hello RDB backup frequency after I create hello cache?</span></span>
<span data-ttu-id="7d407-187">Tak, można zmienić częstotliwość wykonywania kopii zapasowych hello trwałości RDB na powitania **trwałość danych Redis** bloku.</span><span class="sxs-lookup"><span data-stu-id="7d407-187">Yes, you can change hello backup frequency for RDB persistence on hello **Redis data persistence** blade.</span></span> <span data-ttu-id="7d407-188">Aby uzyskać instrukcje, zobacz [trwałość Redis skonfigurować](#configure-redis-persistence).</span><span class="sxs-lookup"><span data-stu-id="7d407-188">For instructions, see [Configure Redis persistence](#configure-redis-persistence).</span></span>

### <a name="why-if-i-have-an-rdb-backup-frequency-of-60-minutes-there-is-more-than-60-minutes-between-backups"></a><span data-ttu-id="7d407-189">Dlaczego Jeśli częstotliwość wykonywania kopii zapasowych RDB 60 minut istnieje ponad 60 minut między kopii zapasowych?</span><span class="sxs-lookup"><span data-stu-id="7d407-189">Why if I have an RDB backup frequency of 60 minutes there is more than 60 minutes between backups?</span></span>
<span data-ttu-id="7d407-190">Nie można uruchomić interwał częstotliwości tworzenia kopii zapasowej trwałości RDB powitania, dopóki hello poprzedniego procesu tworzenia kopii zapasowej zostało ukończone pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="7d407-190">hello RDB persistence backup frequency interval does not start until hello previous backup process has completed successfully.</span></span> <span data-ttu-id="7d407-191">Częstotliwość wykonywania kopii zapasowych hello wynosi 60 min, trwa proces tworzenia kopii zapasowej toosuccessfully 15 minut, pełną hello następnej kopii zapasowej nie można uruchomić do momentu 75 minut po hello uruchomienie hello poprzedniej kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="7d407-191">If hello backup frequency is 60 minutes and it takes a backup process 15 minutes toosuccessfully complete, hello next backup won't start until 75 minutes after hello start time of hello previous backup.</span></span>

### <a name="what-happens-toohello-old-rdb-backups-when-a-new-backup-is-made"></a><span data-ttu-id="7d407-192">Co się stanie toohello starych kopii zapasowych RDB podczas tworzenia nowej kopii zapasowej?</span><span class="sxs-lookup"><span data-stu-id="7d407-192">What happens toohello old RDB backups when a new backup is made?</span></span>
<span data-ttu-id="7d407-193">Wszystkie kopie zapasowe trwałości RDB z wyjątkiem hello najnowszego są automatycznie usuwane.</span><span class="sxs-lookup"><span data-stu-id="7d407-193">All RDB persistence backups except for hello most recent one are automatically deleted.</span></span> <span data-ttu-id="7d407-194">To usunięcie może się nie powtórzyła natychmiast, ale starsze kopie zapasowe nie są zachowywane przez czas nieograniczony.</span><span class="sxs-lookup"><span data-stu-id="7d407-194">This deletion may not happen immediately but older backups are not persisted indefinitely.</span></span>


### <a name="when-should-i-use-a-second-storage-account"></a><span data-ttu-id="7d407-195">Kiedy należy używać drugiego konta magazynu?</span><span class="sxs-lookup"><span data-stu-id="7d407-195">When should I use a second storage account?</span></span>

<span data-ttu-id="7d407-196">Jeśli uważasz, że masz wyższe niż operacji oczekiwanego zestawu w pamięci podręcznej hello, należy używać drugiego konta magazynu AOF trwałości.</span><span class="sxs-lookup"><span data-stu-id="7d407-196">You should use a second storage account for AOF persistence when you believe you have higher than expected set operations on hello cache.</span></span>  <span data-ttu-id="7d407-197">Konfigurowanie konta magazynu pomocniczego hello pomaga upewnić się, że pamięć podręczna nie osiągnąć limity przepustowości magazynu.</span><span class="sxs-lookup"><span data-stu-id="7d407-197">Setting up hello secondary storage account helps ensure your cache doesn't reach storage bandwidth limits.</span></span>

### <a name="does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache"></a><span data-ttu-id="7d407-198">Czy AOF trwałości mają wpływ na całym, opóźnienia lub wydajności Moje pamięci podręcznej?</span><span class="sxs-lookup"><span data-stu-id="7d407-198">Does AOF persistence affect throughout, latency, or performance of my cache?</span></span>

<span data-ttu-id="7d407-199">Trwałości AOF wpływające na przepływność przez około 15 – 20% hello pamięci podręcznej znajduje się poniżej maksymalnego obciążenia (Procesora i serwera załadować zarówno w obszarze 90%).</span><span class="sxs-lookup"><span data-stu-id="7d407-199">AOF persistence affects throughput by about 15% – 20% when hello cache is below maximum load (CPU and Server Load both under 90%).</span></span> <span data-ttu-id="7d407-200">Nie należy opóźnień gdy hello pamięci podręcznej znajduje się w tych granicach.</span><span class="sxs-lookup"><span data-stu-id="7d407-200">There should not be latency issues when hello cache is within these limits.</span></span> <span data-ttu-id="7d407-201">Jednak pamięć podręczna hello osiągną te limity wcześniej z AOF włączone.</span><span class="sxs-lookup"><span data-stu-id="7d407-201">However, hello cache will reach these limits sooner with AOF enabled.</span></span>

### <a name="how-can-i-remove-hello-second-storage-account"></a><span data-ttu-id="7d407-202">Jak usunąć hello drugiego konta magazynu?</span><span class="sxs-lookup"><span data-stu-id="7d407-202">How can I remove hello second storage account?</span></span>

<span data-ttu-id="7d407-203">Należy usunąć konto magazynu dodatkowej trwałości AOF hello ustawiając hello toobe hello sam jako pierwsze konto magazynu hello drugiego konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="7d407-203">You can remove hello AOF persistence secondary storage account by setting hello second storage account toobe hello same as hello first storage account.</span></span> <span data-ttu-id="7d407-204">Aby uzyskać instrukcje, zobacz [AOF Konfigurowanie trwałości](#configure-aof-persistence).</span><span class="sxs-lookup"><span data-stu-id="7d407-204">For instructions, see [Configure AOF persistence](#configure-aof-persistence).</span></span>

### <a name="what-is-a-rewrite-and-how-does-it-affect-my-cache"></a><span data-ttu-id="7d407-205">Co to jest ponownego zapisywania i jak wpływa na mój pamięci podręcznej?</span><span class="sxs-lookup"><span data-stu-id="7d407-205">What is a rewrite and how does it affect my cache?</span></span>

<span data-ttu-id="7d407-206">Gdy plik AOF hello staje się wystarczająco duży, napisz ponownie automatycznie jest umieszczonych w kolejce na powitania pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="7d407-206">When hello AOF file becomes large enough, a rewrite is automatically queued on hello cache.</span></span> <span data-ttu-id="7d407-207">Witaj ponownego zapisywania zmienia rozmiar hello AOF pliku z hello minimalny zbiór potrzebnych operacji toocreate hello bieżącego zestawu danych.</span><span class="sxs-lookup"><span data-stu-id="7d407-207">hello rewrite resizes hello AOF file with hello minimal set of operations needed toocreate hello current data set.</span></span> <span data-ttu-id="7d407-208">Podczas modyfikacji oprogramowania należy wcześniej oczekiwać tooreach ograniczeń wydajności, szczególnie w przypadku pracy z dużymi zestawami danych.</span><span class="sxs-lookup"><span data-stu-id="7d407-208">During rewrites, expect tooreach performance limits sooner especially when dealing with large datasets.</span></span> <span data-ttu-id="7d407-209">Ponownego występować mniej często hello AOF pliku jest większy, ale będzie zająć dużo czasu, gdy nastąpi.</span><span class="sxs-lookup"><span data-stu-id="7d407-209">Rewrites occur less often as hello AOF file becomes larger, but will take a significant amount of time when it happens.</span></span>

### <a name="what-should-i-expect-when-scaling-a-cache-with-aof-enabled"></a><span data-ttu-id="7d407-210">Co należy oczekiwać podczas skalowania pamięci podręcznej z AOF włączone?</span><span class="sxs-lookup"><span data-stu-id="7d407-210">What should I expect when scaling a cache with AOF enabled?</span></span>

<span data-ttu-id="7d407-211">Jeśli plik AOF hello w czasie hello skalowania jest znacznie duży, spodziewać się tootake operacji skalowania hello dłużej niż oczekiwano, ponieważ jej będzie można ponowne załadowanie hello pliku po zakończeniu skalowania.</span><span class="sxs-lookup"><span data-stu-id="7d407-211">If hello AOF file at hello time of scaling is significantly large, then expect hello scale operation tootake longer than expected since it will be reloading hello file after scaling has finished.</span></span>

<span data-ttu-id="7d407-212">Aby uzyskać więcej informacji na temat skalowania, zobacz [co się stanie, jeśli mają I skalować tooa inny rozmiar i przywróceniu kopii zapasowej utworzonej przed hello operacji skalowania?](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)</span><span class="sxs-lookup"><span data-stu-id="7d407-212">For more information on scaling, see [What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)</span></span>

### <a name="how-is-my-aof-data-organized-in-storage"></a><span data-ttu-id="7d407-213">Sposób organizowania danych AOF w magazynie?</span><span class="sxs-lookup"><span data-stu-id="7d407-213">How is my AOF data organized in storage?</span></span>

<span data-ttu-id="7d407-214">Dane przechowywane w plikach AOF jest podzielony na wiele stronicowe na węzeł tooincrease wydajności zapisywania hello toostorage danych.</span><span class="sxs-lookup"><span data-stu-id="7d407-214">Data stored in AOF files is divided into multiple page blobs per node tooincrease performance of saving hello data toostorage.</span></span> <span data-ttu-id="7d407-215">Witaj poniższej tabeli przedstawiono ile stronicowe obiekty BLOB są używane dla każdej warstwy cenowej:</span><span class="sxs-lookup"><span data-stu-id="7d407-215">hello following table displays how many page blobs are used for each pricing tier:</span></span>

| <span data-ttu-id="7d407-216">Warstwa Premium</span><span class="sxs-lookup"><span data-stu-id="7d407-216">Premium tier</span></span> | <span data-ttu-id="7d407-217">Obiekty blob</span><span class="sxs-lookup"><span data-stu-id="7d407-217">Blobs</span></span> |
|--------------|-------|
| <span data-ttu-id="7d407-218">P1</span><span class="sxs-lookup"><span data-stu-id="7d407-218">P1</span></span>           | <span data-ttu-id="7d407-219">4 na niezależnego fragmentu</span><span class="sxs-lookup"><span data-stu-id="7d407-219">4 per shard</span></span>    |
| <span data-ttu-id="7d407-220">P2</span><span class="sxs-lookup"><span data-stu-id="7d407-220">P2</span></span>           | <span data-ttu-id="7d407-221">8 za niezależnego fragmentu</span><span class="sxs-lookup"><span data-stu-id="7d407-221">8 per shard</span></span>    |
| <span data-ttu-id="7d407-222">P3</span><span class="sxs-lookup"><span data-stu-id="7d407-222">P3</span></span>           | <span data-ttu-id="7d407-223">16 na niezależnego fragmentu</span><span class="sxs-lookup"><span data-stu-id="7d407-223">16 per shard</span></span>   |
| <span data-ttu-id="7d407-224">P4</span><span class="sxs-lookup"><span data-stu-id="7d407-224">P4</span></span>           | <span data-ttu-id="7d407-225">20 za niezależnego fragmentu</span><span class="sxs-lookup"><span data-stu-id="7d407-225">20 per shard</span></span>   |

<span data-ttu-id="7d407-226">Jeśli klaster jest włączona, każdy identyfikator niezależnego fragmentu w pamięci podręcznej hello ma własny zestaw stronicowe obiekty BLOB, jak wskazano w powyższej tabeli hello.</span><span class="sxs-lookup"><span data-stu-id="7d407-226">When clustering is enabled, each shard in hello cache has its own set of page blobs, as indicated in hello previous table.</span></span> <span data-ttu-id="7d407-227">Na przykład P2 pamięci podręcznej z trzech odłamków rozdziela jego pliku AOF między 24 stronicowych obiektów blob (8 obiekty BLOB na niezależnego fragmentu z 3 odłamków).</span><span class="sxs-lookup"><span data-stu-id="7d407-227">For example, a P2 cache with three shards distributes its AOF file across 24 page blobs (8 blobs per shard, with 3 shards).</span></span>

<span data-ttu-id="7d407-228">Po ponownego zapisywania dwa zestawy plików AOF istnieje w magazynie.</span><span class="sxs-lookup"><span data-stu-id="7d407-228">After a rewrite, two sets of AOF files exist in storage.</span></span> <span data-ttu-id="7d407-229">Ponownego występują w tle hello i Dołącz toohello pierwszego zestawu plików, podczas gdy operacje na zestawie wysłanych toohello pamięci podręcznej podczas ponownego zapisywania hello Dołącz toohello drugi zestaw.</span><span class="sxs-lookup"><span data-stu-id="7d407-229">Rewrites occur in hello background and append toohello first set of files, while set operations that are sent toohello cache during hello rewrite append toohello second set.</span></span> <span data-ttu-id="7d407-230">Kopii zapasowej są tymczasowo przechowywane podczas ponownego w razie awarii, ale jest usuwany natychmiast, po zakończeniu ponownego zapisywania.</span><span class="sxs-lookup"><span data-stu-id="7d407-230">A backup is temporarily stored during rewrites in case of failure, but is promptly deleted after a rewrite finishes.</span></span>


## <a name="next-steps"></a><span data-ttu-id="7d407-231">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="7d407-231">Next steps</span></span>
<span data-ttu-id="7d407-232">Dowiedz się, jak toouse premium więcej pamięci podręcznej funkcji.</span><span class="sxs-lookup"><span data-stu-id="7d407-232">Learn how toouse more premium cache features.</span></span>

* [<span data-ttu-id="7d407-233">Wprowadzenie toohello pamięci podręcznej Redis Azure Premium warstwy</span><span class="sxs-lookup"><span data-stu-id="7d407-233">Introduction toohello Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-premium-pricing-tier]: ./media/cache-how-to-premium-persistence/redis-cache-premium-pricing-tier.png

[redis-cache-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-persistence.png

[redis-cache-rdb-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-rdb-persistence.png

[redis-cache-aof-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-aof-persistence.png

[redis-cache-settings]: ./media/cache-how-to-premium-persistence/redis-cache-settings.png
