---
title: "Omówienie monitorowania bramy aplikacji Azure aaaHealth | Dokumentacja firmy Microsoft"
description: "Dowiedz się więcej o hello funkcji monitorowania w bramy aplikacji Azure"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7eeba328-bb2d-4d3e-bdac-7552e7900b7f
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 12/14/2016
ms.author: gwallace
ms.openlocfilehash: 5091d80394a354ff849ce7ccee8cc9d2fd0456db
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="application-gateway-health-monitoring-overview"></a><span data-ttu-id="72397-103">Omówienie monitorowania kondycji bramy aplikacji</span><span class="sxs-lookup"><span data-stu-id="72397-103">Application Gateway health monitoring overview</span></span>

<span data-ttu-id="72397-104">Azure Application Gateway domyślnie monitoruje kondycję hello wszystkich zasobów w jego puli zaplecza i automatycznie usuwa dowolnego zasobu z puli hello określana jako zła.</span><span class="sxs-lookup"><span data-stu-id="72397-104">Azure Application Gateway by default monitors hello health of all resources in its back-end pool and automatically removes any resource considered unhealthy from hello pool.</span></span> <span data-ttu-id="72397-105">Brama aplikacji w nadal toomonitor hello złej kondycji wystąpień i dodaje je kopii toohello dobrej kondycji puli zaplecza po udostępnieniu i sondy toohealth odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="72397-105">Application Gateway continues toomonitor hello unhealthy instances and adds them back toohello healthy back-end pool once they become available and respond toohealth probes.</span></span> <span data-ttu-id="72397-106">Brama aplikacji w wysyła hello sondy kondycji z hello tego samego portu, który jest zdefiniowany w ustawieniach protokołu HTTP zaplecza hello.</span><span class="sxs-lookup"><span data-stu-id="72397-106">Application gateway sends hello health probes with hello same port that is defined in hello back-end HTTP settings.</span></span> <span data-ttu-id="72397-107">Ta konfiguracja zapewnia, że tej sondy hello testuje hello sam port, że klienci będą stosowane tooconnect toohello wewnętrznej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="72397-107">This configuration ensures that hello probe is testing hello same port that customers would be using tooconnect toohello backend.</span></span>

![przykład sondowania bramy aplikacji][1]

<span data-ttu-id="72397-109">W dodatku toousing domyślnej sondy monitorowanie kondycji, można również dostosować toosuit sondy kondycji hello wymagań aplikacji.</span><span class="sxs-lookup"><span data-stu-id="72397-109">In addition toousing default health probe monitoring, you can also customize hello health probe toosuit your application's requirements.</span></span> <span data-ttu-id="72397-110">W tym artykule omówiono domyślnych i sondy kondycji niestandardowych.</span><span class="sxs-lookup"><span data-stu-id="72397-110">In this article, both default and custom health probes are covered.</span></span>

> [!NOTE]
> <span data-ttu-id="72397-111">Jeśli istnieje grupa NSG podsieci bramy aplikacji, zakresy portów 65503 65534 powinien zostać otwarty w podsieci bramy aplikacji hello dla ruchu przychodzącego.</span><span class="sxs-lookup"><span data-stu-id="72397-111">If there is an NSG on Application Gateway subnet, port ranges 65503-65534 should be opened on hello Application Gateway subnet for Inbound traffic.</span></span> <span data-ttu-id="72397-112">Te porty są wymagane dla toowork interfejsu API kondycji hello w wewnętrznej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="72397-112">These ports are required for hello backend health API toowork.</span></span>

## <a name="default-health-probe"></a><span data-ttu-id="72397-113">Domyślnej funkcji badania kondycji</span><span class="sxs-lookup"><span data-stu-id="72397-113">Default health probe</span></span>

<span data-ttu-id="72397-114">Bramy aplikacji automatycznie konfiguruje domyślnego badania kondycji, konfigurując nie żadnej konfiguracji niestandardowej sondowania.</span><span class="sxs-lookup"><span data-stu-id="72397-114">An application gateway automatically configures a default health probe when you don't set up any custom probe configuration.</span></span> <span data-ttu-id="72397-115">monitorowanie zachowania Hello działa przez adresy IP toohello żądania HTTP skonfigurowane dla puli zaplecza hello.</span><span class="sxs-lookup"><span data-stu-id="72397-115">hello monitoring behavior works by making an HTTP request toohello IP addresses configured for hello back-end pool.</span></span> <span data-ttu-id="72397-116">Dla domyślnej sondy Jeśli ustawienia http zaplecza hello są skonfigurowane dla protokołu HTTPS, sondy hello używa jako kondycję dobrze tootest zapleczy hello HTTPS.</span><span class="sxs-lookup"><span data-stu-id="72397-116">For default probes if hello backend http settings are configured for HTTPS, hello probe uses HTTPS as well tootest health of hello backends.</span></span>

<span data-ttu-id="72397-117">Na przykład: Konfigurowanie aplikacji bramy toouse serwerami zaplecza A, B i C tooreceive HTTP ruchu sieciowego na porcie 80.</span><span class="sxs-lookup"><span data-stu-id="72397-117">For example: You configure your application gateway toouse back-end servers A, B, and C tooreceive HTTP network traffic on port 80.</span></span> <span data-ttu-id="72397-118">Monitorowanie kondycji domyślne Hello testy hello trzy serwery co 30 sekund na dobrej kondycji odpowiedź HTTP.</span><span class="sxs-lookup"><span data-stu-id="72397-118">hello default health monitoring tests hello three servers every 30 seconds for a healthy HTTP response.</span></span> <span data-ttu-id="72397-119">Dobrej odpowiedzi HTTP ma [kod stanu](https://msdn.microsoft.com/library/aa287675.aspx) między 200 i 399.</span><span class="sxs-lookup"><span data-stu-id="72397-119">A healthy HTTP response has a [status code](https://msdn.microsoft.com/library/aa287675.aspx) between 200 and 399.</span></span>

<span data-ttu-id="72397-120">Jeśli serwer A hello domyślnej sondy wyboru nie powiedzie się, bramy aplikacji hello spowoduje usunięcie jej z puli zaplecza, a ruch sieciowy zatrzymuje przepływu toothis serwera.</span><span class="sxs-lookup"><span data-stu-id="72397-120">If hello default probe check fails for server A, hello application gateway removes it from its back-end pool, and network traffic stops flowing toothis server.</span></span> <span data-ttu-id="72397-121">Witaj domyślnego badania będzie nadal toocheck serwera co 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="72397-121">hello default probe still continues toocheck for server A every 30 seconds.</span></span> <span data-ttu-id="72397-122">Serwer A odpowiada pomyślnie tooone żądania z domyślnego badania kondycji, jest dodawany ponownie jako pula zaplecza toohello dobrej kondycji i ruchu nawiązaniu toohello serwer ponownie.</span><span class="sxs-lookup"><span data-stu-id="72397-122">When server A responds successfully tooone request from a default health probe, it is added back as healthy toohello back-end pool, and traffic starts flowing toohello server again.</span></span>

### <a name="default-health-probe-settings"></a><span data-ttu-id="72397-123">Domyślne ustawienia sondy kondycji</span><span class="sxs-lookup"><span data-stu-id="72397-123">Default health probe settings</span></span>

| <span data-ttu-id="72397-124">Właściwość sondy</span><span class="sxs-lookup"><span data-stu-id="72397-124">Probe property</span></span> | <span data-ttu-id="72397-125">Wartość</span><span class="sxs-lookup"><span data-stu-id="72397-125">Value</span></span> | <span data-ttu-id="72397-126">Opis</span><span class="sxs-lookup"><span data-stu-id="72397-126">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="72397-127">Sonda adresu URL</span><span class="sxs-lookup"><span data-stu-id="72397-127">Probe URL</span></span> |<span data-ttu-id="72397-128">http://127.0.0.1:\<portu\>/</span><span class="sxs-lookup"><span data-stu-id="72397-128">http://127.0.0.1:\<port\>/</span></span> |<span data-ttu-id="72397-129">Ścieżka adresu URL</span><span class="sxs-lookup"><span data-stu-id="72397-129">URL path</span></span> |
| <span data-ttu-id="72397-130">Interwał</span><span class="sxs-lookup"><span data-stu-id="72397-130">Interval</span></span> |<span data-ttu-id="72397-131">30</span><span class="sxs-lookup"><span data-stu-id="72397-131">30</span></span> |<span data-ttu-id="72397-132">Interwał sondowania w sekundach</span><span class="sxs-lookup"><span data-stu-id="72397-132">Probe interval in seconds</span></span> |
| <span data-ttu-id="72397-133">Limit czasu</span><span class="sxs-lookup"><span data-stu-id="72397-133">Time-out</span></span> |<span data-ttu-id="72397-134">30</span><span class="sxs-lookup"><span data-stu-id="72397-134">30</span></span> |<span data-ttu-id="72397-135">Sonda limitu czasu w sekundach</span><span class="sxs-lookup"><span data-stu-id="72397-135">Probe time-out in seconds</span></span> |
| <span data-ttu-id="72397-136">Próg złej kondycji</span><span class="sxs-lookup"><span data-stu-id="72397-136">Unhealthy threshold</span></span> |<span data-ttu-id="72397-137">3</span><span class="sxs-lookup"><span data-stu-id="72397-137">3</span></span> |<span data-ttu-id="72397-138">Badania liczby ponownych prób.</span><span class="sxs-lookup"><span data-stu-id="72397-138">Probe retry count.</span></span> <span data-ttu-id="72397-139">serwera zaplecza Hello jest oznaczony w dół po licznik awarii kolejnych sondowania hello osiągnie hello próg złej kondycji.</span><span class="sxs-lookup"><span data-stu-id="72397-139">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!NOTE]
> <span data-ttu-id="72397-140">Witaj port jest hello sam port jako ustawienia HTTP zaplecza hello.</span><span class="sxs-lookup"><span data-stu-id="72397-140">hello port is hello same port as hello back-end HTTP settings.</span></span>

<span data-ttu-id="72397-141">Witaj domyślnego badania sprawdza tylko http://127.0.0.1:\<portu\> toodetermine stan kondycji.</span><span class="sxs-lookup"><span data-stu-id="72397-141">hello default probe looks only at http://127.0.0.1:\<port\> toodetermine health status.</span></span> <span data-ttu-id="72397-142">Jeśli konieczne tooconfigure hello kondycji sondowania toogo tooa niestandardowy adres URL lub zmodyfikuj inne ustawienia, należy użyć niestandardowego sond zgodnie z opisem w hello następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="72397-142">If you need tooconfigure hello health probe toogo tooa custom URL or modify any other settings, you must use custom probes as described in hello following steps:</span></span>

## <a name="custom-health-probe"></a><span data-ttu-id="72397-143">Sondy kondycji niestandardowych</span><span class="sxs-lookup"><span data-stu-id="72397-143">Custom health probe</span></span>

<span data-ttu-id="72397-144">Niestandardowe sond pozwalają toohave większą kontrolę nad hello monitorowanie kondycji.</span><span class="sxs-lookup"><span data-stu-id="72397-144">Custom probes allow you toohave a more granular control over hello health monitoring.</span></span> <span data-ttu-id="72397-145">Podczas korzystania z niestandardowego sond, można skonfigurować interwał sondowania powitania hello tootest adresu URL i ścieżki i ile tooaccept odpowiedzi nie powiodło się przed oznaczeniem wystąpienia puli zaplecza hello swój stan jako niezdrowy.</span><span class="sxs-lookup"><span data-stu-id="72397-145">When using custom probes, you can configure hello probe interval, hello URL and path tootest, and how many failed responses tooaccept before marking hello back-end pool instance as unhealthy.</span></span>

### <a name="custom-health-probe-settings"></a><span data-ttu-id="72397-146">Ustawienia sondy kondycji niestandardowych</span><span class="sxs-lookup"><span data-stu-id="72397-146">Custom health probe settings</span></span>

<span data-ttu-id="72397-147">Witaj Poniższa tabela zawiera definicje dla właściwości hello sondy kondycji niestandardowych.</span><span class="sxs-lookup"><span data-stu-id="72397-147">hello following table provides definitions for hello properties of a custom health probe.</span></span>

| <span data-ttu-id="72397-148">Właściwość sondy</span><span class="sxs-lookup"><span data-stu-id="72397-148">Probe property</span></span> | <span data-ttu-id="72397-149">Opis</span><span class="sxs-lookup"><span data-stu-id="72397-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="72397-150">Nazwa</span><span class="sxs-lookup"><span data-stu-id="72397-150">Name</span></span> |<span data-ttu-id="72397-151">Nazwa sondy hello.</span><span class="sxs-lookup"><span data-stu-id="72397-151">Name of hello probe.</span></span> <span data-ttu-id="72397-152">Ta nazwa jest sonda toohello toorefer używane ustawienia HTTP zaplecza.</span><span class="sxs-lookup"><span data-stu-id="72397-152">This name is used toorefer toohello probe in back-end HTTP settings.</span></span> |
| <span data-ttu-id="72397-153">Protokół</span><span class="sxs-lookup"><span data-stu-id="72397-153">Protocol</span></span> |<span data-ttu-id="72397-154">Protokół używany toosend hello sondowania.</span><span class="sxs-lookup"><span data-stu-id="72397-154">Protocol used toosend hello probe.</span></span> <span data-ttu-id="72397-155">Sonda Hello używa protokołu hello zdefiniowanego w ustawieniach protokołu HTTP zaplecza hello</span><span class="sxs-lookup"><span data-stu-id="72397-155">hello probe uses hello protocol defined in hello back-end HTTP settings</span></span> |
| <span data-ttu-id="72397-156">Host</span><span class="sxs-lookup"><span data-stu-id="72397-156">Host</span></span> |<span data-ttu-id="72397-157">Sonda hello toosend nazwy hosta.</span><span class="sxs-lookup"><span data-stu-id="72397-157">Host name toosend hello probe.</span></span> <span data-ttu-id="72397-158">Dotyczy tylko wtedy, gdy obejmujący wiele lokacji jest skonfigurowany dla bramy aplikacji, w przeciwnym razie użyj '127.0.0.1'.</span><span class="sxs-lookup"><span data-stu-id="72397-158">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="72397-159">Ta wartość jest inna niż nazwa hosta maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="72397-159">This value is different from VM host name.</span></span> |
| <span data-ttu-id="72397-160">Ścieżka</span><span class="sxs-lookup"><span data-stu-id="72397-160">Path</span></span> |<span data-ttu-id="72397-161">Ścieżka względna hello sondy.</span><span class="sxs-lookup"><span data-stu-id="72397-161">Relative path of hello probe.</span></span> <span data-ttu-id="72397-162">prawidłowa ścieżka Hello rozpoczyna się od '/'.</span><span class="sxs-lookup"><span data-stu-id="72397-162">hello valid path starts from '/'.</span></span> |
| <span data-ttu-id="72397-163">Interwał</span><span class="sxs-lookup"><span data-stu-id="72397-163">Interval</span></span> |<span data-ttu-id="72397-164">Interwał sondy w sekundach.</span><span class="sxs-lookup"><span data-stu-id="72397-164">Probe interval in seconds.</span></span> <span data-ttu-id="72397-165">Ta wartość jest hello odstęp czasu między dwa kolejne sondy.</span><span class="sxs-lookup"><span data-stu-id="72397-165">This value is hello time interval between two consecutive probes.</span></span> |
| <span data-ttu-id="72397-166">Limit czasu</span><span class="sxs-lookup"><span data-stu-id="72397-166">Time-out</span></span> |<span data-ttu-id="72397-167">Badania limitu czasu w sekundach.</span><span class="sxs-lookup"><span data-stu-id="72397-167">Probe time-out in seconds.</span></span> <span data-ttu-id="72397-168">Jeśli w tym czasie limitu czasu nie odebrano prawidłowej odpowiedzi, hello sondowania jest oznaczony jako nie powiodło się.</span><span class="sxs-lookup"><span data-stu-id="72397-168">If a valid response is not received within this time-out period, hello probe is marked as failed.</span></span>  |
| <span data-ttu-id="72397-169">Próg złej kondycji</span><span class="sxs-lookup"><span data-stu-id="72397-169">Unhealthy threshold</span></span> |<span data-ttu-id="72397-170">Badania liczby ponownych prób.</span><span class="sxs-lookup"><span data-stu-id="72397-170">Probe retry count.</span></span> <span data-ttu-id="72397-171">serwera zaplecza Hello jest oznaczony w dół po licznik awarii kolejnych sondowania hello osiągnie hello próg złej kondycji.</span><span class="sxs-lookup"><span data-stu-id="72397-171">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="72397-172">Jeśli skonfigurowano brama aplikacji w jednej lokacji, przez domyślny hello hosta należy określać nazwy jako "127.0.0.1", chyba że w przeciwnym razie skonfigurowane w niestandardowych sondowania.</span><span class="sxs-lookup"><span data-stu-id="72397-172">If Application Gateway is configured for a single site, by default hello Host name should be specified as '127.0.0.1', unless otherwise configured in custom probe.</span></span>
> <span data-ttu-id="72397-173">Dla odwołania do badania niestandardowe są wysyłane za\<protokołu\>://\<hosta\>:\<portu\>\<ścieżki\>.</span><span class="sxs-lookup"><span data-stu-id="72397-173">For reference a custom probe is sent too\<protocol\>://\<host\>:\<port\>\<path\>.</span></span> <span data-ttu-id="72397-174">Witaj port używany będzie hello tego samego portu, zgodnie z definicją w ustawienia HTTP zaplecza hello.</span><span class="sxs-lookup"><span data-stu-id="72397-174">hello port used will be hello same port as defined in hello back-end HTTP settings.</span></span>

## <a name="next-steps"></a><span data-ttu-id="72397-175">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="72397-175">Next steps</span></span>
<span data-ttu-id="72397-176">Po szkoleniowe dotyczące monitorowania kondycji aplikacji bramy, można skonfigurować [sondy kondycji niestandardowych](application-gateway-create-probe-portal.md) w portalu Azure hello lub [sondy kondycji niestandardowych](application-gateway-create-probe-ps.md) przy użyciu programu PowerShell i hello Azure Resource Manager model wdrażania.</span><span class="sxs-lookup"><span data-stu-id="72397-176">After learning about Application Gateway health monitoring, you can configure a [custom health probe](application-gateway-create-probe-portal.md) in hello Azure portal or a [custom health probe](application-gateway-create-probe-ps.md) using PowerShell and hello Azure Resource Manager deployment model.</span></span>

[1]: ./media/application-gateway-probe-overview/appgatewayprobe.png
