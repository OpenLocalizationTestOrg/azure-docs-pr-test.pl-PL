---
title: "Tworzenie niestandardowych sondowania — brama aplikacji w usłudze Azure - Azure Portal | Dokumentacja firmy Microsoft"
description: "Dowiedz się, jak utworzyć niestandardowe sondowania bramy aplikacji przy użyciu portalu"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 33fd5564-43a7-4c54-a9ec-b1235f661f97
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/26/2017
ms.author: gwallace
ms.openlocfilehash: 65e9bba4ce9ac41ae2a9a8c3fa7f661165fc1403
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/03/2017
---
# <a name="create-a-custom-probe-for-application-gateway-by-using-the-portal"></a><span data-ttu-id="c0e3a-103">Tworzenie niestandardowych sondowania bramy aplikacji przy użyciu portalu</span><span class="sxs-lookup"><span data-stu-id="c0e3a-103">Create a custom probe for Application Gateway by using the portal</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="c0e3a-104">Witryna Azure Portal</span><span class="sxs-lookup"><span data-stu-id="c0e3a-104">Azure portal</span></span>](application-gateway-create-probe-portal.md)
> * [<span data-ttu-id="c0e3a-105">Azure Resource Manager — program PowerShell</span><span class="sxs-lookup"><span data-stu-id="c0e3a-105">Azure Resource Manager PowerShell</span></span>](application-gateway-create-probe-ps.md)
> * [<span data-ttu-id="c0e3a-106">Klasyczny portal Azure — program PowerShell</span><span class="sxs-lookup"><span data-stu-id="c0e3a-106">Azure Classic PowerShell</span></span>](application-gateway-create-probe-classic-ps.md)

<span data-ttu-id="c0e3a-107">W tym artykule możesz dodać niestandardowe sondowania istniejącą bramę aplikacji za pośrednictwem portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-107">In this article, you add a custom probe to an existing application gateway through the Azure portal.</span></span> <span data-ttu-id="c0e3a-108">Niestandardowe sond są przydatne dla aplikacji, które mają strona sprawdzania kondycji określonych lub aplikacji, które nie mają pomyślnej odpowiedzi na domyślnej aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-108">Custom probes are useful for applications that have a specific health check page or for applications that do not provide a successful response on the default web application.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="c0e3a-109">Przed rozpoczęciem</span><span class="sxs-lookup"><span data-stu-id="c0e3a-109">Before you begin</span></span>

<span data-ttu-id="c0e3a-110">Jeśli nie masz już istniejącą bramę aplikacji, odwiedź stronę [Utwórz bramę aplikacji](application-gateway-create-gateway-portal.md) Aby utworzyć bramę aplikacji do pracy z.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-110">If you do not already have an application gateway, visit [Create an Application Gateway](application-gateway-create-gateway-portal.md) to create an application gateway to work with.</span></span>

## <span data-ttu-id="c0e3a-111"><a name="createprobe"></a>Utwórz sondy</span><span class="sxs-lookup"><span data-stu-id="c0e3a-111"><a name="createprobe"></a>Create the probe</span></span>

<span data-ttu-id="c0e3a-112">Sondy są konfigurowane w dwóch etapach za pośrednictwem portalu.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-112">Probes are configured in a two-step process through the portal.</span></span> <span data-ttu-id="c0e3a-113">Pierwszym krokiem jest można utworzyć sondy.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-113">The first step is to create the probe.</span></span> <span data-ttu-id="c0e3a-114">W drugim kroku możesz dodać sondy ustawienia http zaplecza bramy aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-114">In the second step, you add the probe to the backend http settings of the application gateway.</span></span>

1. <span data-ttu-id="c0e3a-115">Zaloguj się do witryny [Azure Portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="c0e3a-115">Log in to the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="c0e3a-116">Jeśli nie masz już konto, możesz zarejestrować się w celu [bezpłatna miesięczna wersja próbna](https://azure.microsoft.com/free)</span><span class="sxs-lookup"><span data-stu-id="c0e3a-116">If you don't already have an account, you can sign up for a [free one-month trial](https://azure.microsoft.com/free)</span></span>

1. <span data-ttu-id="c0e3a-117">W okienku Azure Ulubione portalu kliknij pozycję wszystkie zasoby.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-117">In the Azure portal Favorites pane, click All resources.</span></span> <span data-ttu-id="c0e3a-118">Kliknij przycisk brama aplikacji w bloku wszystkich zasobów.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-118">Click the application gateway in the All resources blade.</span></span> <span data-ttu-id="c0e3a-119">Jeśli subskrypcja już ma kilka zasobów, możesz wprowadzić partners.contoso.net w filtrze według nazwy...</span><span class="sxs-lookup"><span data-stu-id="c0e3a-119">If the subscription you selected already has several resources in it, you can enter partners.contoso.net in the Filter by name…</span></span> <span data-ttu-id="c0e3a-120">aby łatwo uzyskać dostęp do bramy aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-120">box to easily access the application gateway.</span></span>

1. <span data-ttu-id="c0e3a-121">Kliknij przycisk **sondy** i kliknij przycisk **Dodaj** przycisk, aby dodać badanie.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-121">Click **Probes** and click the **Add** button to add a probe.</span></span>

  ![Dodaj sondowania bloku z informacjami o wypełnione][1]

1. <span data-ttu-id="c0e3a-123">Na **sondy kondycji Dodaj** bloku, podaj wymagane informacje sondy, a po zakończeniu kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-123">On the **Add health probe** blade, fill out the required information for the probe, and when complete click **OK**.</span></span>

  |<span data-ttu-id="c0e3a-124">**Ustawienie**</span><span class="sxs-lookup"><span data-stu-id="c0e3a-124">**Setting**</span></span> | <span data-ttu-id="c0e3a-125">**Wartość**</span><span class="sxs-lookup"><span data-stu-id="c0e3a-125">**Value**</span></span> | <span data-ttu-id="c0e3a-126">**Szczegóły**</span><span class="sxs-lookup"><span data-stu-id="c0e3a-126">**Details**</span></span>|
  |---|---|---|
  |<span data-ttu-id="c0e3a-127">**Nazwa**</span><span class="sxs-lookup"><span data-stu-id="c0e3a-127">**Name**</span></span>|<span data-ttu-id="c0e3a-128">customProbe</span><span class="sxs-lookup"><span data-stu-id="c0e3a-128">customProbe</span></span>|<span data-ttu-id="c0e3a-129">Ta wartość jest przyjazną nazwę sondowania, który jest dostępny w portalu.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-129">This value is a friendly name to the probe that is accessible in the portal.</span></span>|
  |<span data-ttu-id="c0e3a-130">**Protokół**</span><span class="sxs-lookup"><span data-stu-id="c0e3a-130">**Protocol**</span></span>|<span data-ttu-id="c0e3a-131">HTTP lub HTTPS</span><span class="sxs-lookup"><span data-stu-id="c0e3a-131">HTTP or HTTPS</span></span> | <span data-ttu-id="c0e3a-132">Protokół, który używa sondy kondycji.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-132">The protocol that the health probe uses.</span></span>|
  |<span data-ttu-id="c0e3a-133">**Host**</span><span class="sxs-lookup"><span data-stu-id="c0e3a-133">**Host**</span></span>|<span data-ttu-id="c0e3a-134">tj</span><span class="sxs-lookup"><span data-stu-id="c0e3a-134">i.e</span></span> <span data-ttu-id="c0e3a-135">contoso.com</span><span class="sxs-lookup"><span data-stu-id="c0e3a-135">contoso.com</span></span>|<span data-ttu-id="c0e3a-136">Ta wartość jest nazwa hosta jest używana do sondowania.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-136">This value is the host name that is used for the probe.</span></span> <span data-ttu-id="c0e3a-137">Dotyczy tylko wtedy, gdy obejmujący wiele lokacji jest skonfigurowany dla bramy aplikacji, w przeciwnym razie użyj '127.0.0.1'.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-137">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="c0e3a-138">Ta wartość jest inna niż nazwa hosta maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-138">This value is different from the VM host name.</span></span>|
  |<span data-ttu-id="c0e3a-139">**Ścieżka**</span><span class="sxs-lookup"><span data-stu-id="c0e3a-139">**Path**</span></span>|<span data-ttu-id="c0e3a-140">/ lub inną ścieżkę</span><span class="sxs-lookup"><span data-stu-id="c0e3a-140">/ or another path</span></span>|<span data-ttu-id="c0e3a-141">W pozostałej części pełny adres url dla niestandardowych sondy.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-141">The remainder of the full url for the custom probe.</span></span> <span data-ttu-id="c0e3a-142">Nieprawidłowa ścieżka zaczyna się od '/'.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-142">A valid path starts with '/'.</span></span> <span data-ttu-id="c0e3a-143">Domyślna ścieżka http://contoso.com po prostu użyj "/"</span><span class="sxs-lookup"><span data-stu-id="c0e3a-143">For the default path of http://contoso.com just use '/'</span></span> |
  |<span data-ttu-id="c0e3a-144">**Interwał (w sekundach)**</span><span class="sxs-lookup"><span data-stu-id="c0e3a-144">**Interval (secs)**</span></span>|<span data-ttu-id="c0e3a-145">30</span><span class="sxs-lookup"><span data-stu-id="c0e3a-145">30</span></span>|<span data-ttu-id="c0e3a-146">Jak często sondy jest uruchamiany do sprawdzenia kondycji.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-146">How often the probe is run to check for health.</span></span> <span data-ttu-id="c0e3a-147">Nie zaleca się ustawić niższy niż 30 sekund.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-147">It is not recommended to set the lower than 30 seconds.</span></span>|
  |<span data-ttu-id="c0e3a-148">**Limit czasu (w sekundach)**</span><span class="sxs-lookup"><span data-stu-id="c0e3a-148">**Timeout (secs)**</span></span>|<span data-ttu-id="c0e3a-149">30</span><span class="sxs-lookup"><span data-stu-id="c0e3a-149">30</span></span>|<span data-ttu-id="c0e3a-150">Ilość czasu sondy czeka przed przekroczeniem limitu czasu.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-150">The amount of time the probe waits before timing out.</span></span> <span data-ttu-id="c0e3a-151">Limit czasu musi być odpowiednio wysoka, że wywołanie http może również upewnić się, że strona kondycji wewnętrznej bazy danych jest dostępna.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-151">The timeout interval needs to be high enough that an http call can be made to ensure the backend health page is available.</span></span>|
  |<span data-ttu-id="c0e3a-152">**Próg złej kondycji**</span><span class="sxs-lookup"><span data-stu-id="c0e3a-152">**Unhealthy threshold**</span></span>|<span data-ttu-id="c0e3a-153">3</span><span class="sxs-lookup"><span data-stu-id="c0e3a-153">3</span></span>|<span data-ttu-id="c0e3a-154">Liczba nieudanych prób jest określana jako zła.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-154">Number of failed attempts to be considered unhealthy.</span></span> <span data-ttu-id="c0e3a-155">Próg 0 oznacza, że jeśli zaplecza niepowodzenia sprawdzania kondycji jest określany złej kondycji od razu.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-155">A threshold of 0 means that if a health check fails the back-end is determined unhealthy immediately.</span></span>|

  > [!IMPORTANT]
  > <span data-ttu-id="c0e3a-156">Nazwa hosta nie jest taka sama jak nazwa serwera.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-156">The host name is not the same as server name.</span></span> <span data-ttu-id="c0e3a-157">Ta wartość jest nazwą hosta wirtualnego uruchomiony na serwerze aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-157">This value is the name of the virtual host running on the application server.</span></span> <span data-ttu-id="c0e3a-158">Sonda są wysyłane do http://(host name):(port from httpsetting)/urlPath</span><span class="sxs-lookup"><span data-stu-id="c0e3a-158">The probe is sent to http://(host name):(port from httpsetting)/urlPath</span></span>

## <a name="add-probe-to-the-gateway"></a><span data-ttu-id="c0e3a-159">Dodaj sondy do bramy</span><span class="sxs-lookup"><span data-stu-id="c0e3a-159">Add probe to the gateway</span></span>

<span data-ttu-id="c0e3a-160">Obecnie sondy został utworzony, jest czas, aby dodać go do bramy.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-160">Now that the probe has been created, it is time to add it to the gateway.</span></span> <span data-ttu-id="c0e3a-161">Ustawienia http zaplecza bramy aplikacji są ustawienia sondy.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-161">Probe settings are set on the backend http settings of the application gateway.</span></span>

1. <span data-ttu-id="c0e3a-162">Kliknij przycisk **ustawienia HTTP** na bramie aplikacji, można wyświetlić kliknij bloku konfiguracji zaplecza bieżące ustawienia http listy w oknie.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-162">Click **HTTP settings** on the application gateway, to bring up the configuration blade click the current backend http settings listed in the window.</span></span>

  ![Okno ustawień protokołu HTTPS][2]

1. <span data-ttu-id="c0e3a-164">Na **appGatewayBackEndHttpSettings** bloku ustawienia wyboru **sondowania niestandardowych użyj** wyboru i wybierz polecenie sondowania utworzone w [utworzyć sondy](#createprobe) sekcję  **Niestandardowe sondowania** listy rozwijanej.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-164">On the **appGatewayBackEndHttpSettings** settings blade, check the **Use custom probe** checkbox and choose the probe created in the [Create the probe](#createprobe) section on the **Custom probe** drop-down..</span></span>
<span data-ttu-id="c0e3a-165">Po zakończeniu kliknij przycisk **zapisać** i ustawienia są stosowane.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-165">When complete, click **Save** and the settings are applied.</span></span>

<span data-ttu-id="c0e3a-166">Domyślnego badania sprawdza dostęp do domyślnej aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-166">The default probe checks the default access to the web application.</span></span> <span data-ttu-id="c0e3a-167">Teraz, gdy utworzono niestandardowe sondowania, brama aplikacji w używa niestandardowa ścieżka zdefiniowana do monitorowania kondycji dla serwerów zaplecza.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-167">Now that a custom probe has been created, the application gateway uses the custom path defined to monitor health for the backend servers.</span></span> <span data-ttu-id="c0e3a-168">Brama aplikacji w oparte na kryteriach, które zostało zdefiniowane, sprawdza ścieżka określona w sondy.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-168">Based on the criteria that was defined, the application gateway checks the path specified in the probe.</span></span> <span data-ttu-id="c0e3a-169">Jeśli wywołanie hosta: Port / ścieżki nie może zwracać HTTP 200 399 stanu odpowiedzi, serwer jest wykluczony z cyklu po osiągnięciu progu złej kondycji.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-169">If the call to host:Port/path does not return an HTTP 200-399 status response, the server is taken out of rotation after the unhealthy threshold is reached.</span></span> <span data-ttu-id="c0e3a-170">Sondowanie jest kontynuowane od zła wystąpienie do określania, kiedy dobrej kondycji zostanie ponownie.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-170">Probing continues on the unhealthy instance to determine when it becomes healthy again.</span></span> <span data-ttu-id="c0e3a-171">Po wystąpienie zostanie dodany do puli serwerów w dobrej kondycji, ruch, który rozpoczyna się przepływać do niej ponownie, a sondowanie do wystąpienia programu jest kontynuowane od użytkownika określonego interwału normalnie.</span><span class="sxs-lookup"><span data-stu-id="c0e3a-171">Once the instance is added back to healthy server pool, traffic begins flowing to it again and probing to the instance continues at user specified interval as normal.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c0e3a-172">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="c0e3a-172">Next steps</span></span>

<span data-ttu-id="c0e3a-173">Aby dowiedzieć się, jak skonfigurować odciążanie protokołu SSL z bramy aplikacji Azure, zobacz [skonfigurować odciążanie protokołu SSL](application-gateway-ssl-portal.md)</span><span class="sxs-lookup"><span data-stu-id="c0e3a-173">To learn how to configure SSL Offloading with Azure Application Gateway, see [Configure SSL Offload](application-gateway-ssl-portal.md)</span></span>

[1]: ./media/application-gateway-create-probe-portal/figure1.png
[2]: ./media/application-gateway-create-probe-portal/figure2.png

