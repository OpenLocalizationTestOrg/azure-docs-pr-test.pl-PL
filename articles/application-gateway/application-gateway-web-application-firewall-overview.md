---
title: "Wprowadzenie do zapory aplikacji sieci Web (WAF) w usłudze Azure Application Gateway | Microsoft Docs"
description: "Ta strona zawiera omówienie zapory aplikacji sieci Web (WAF) w usłudze Application Gateway"
documentationcenter: na
services: application-gateway
author: amsriva
manager: rossort
editor: amsriva
ms.assetid: 04b362bc-6653-4765-86f6-55ee8ec2a0ff
ms.service: application-gateway
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/03/2017
ms.author: amsriva
ms.openlocfilehash: 50863b60f2843f033bdb07f4564d937cd6f0b7be
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="web-application-firewall-waf"></a><span data-ttu-id="a7561-103">Zapora aplikacji sieci Web</span><span class="sxs-lookup"><span data-stu-id="a7561-103">Web application firewall (WAF)</span></span>

<span data-ttu-id="a7561-104">Zapora aplikacji sieci Web (WAF) to funkcja usługi Application Gateway, która zapewnia scentralizowaną ochronę aplikacji sieci Web przed typowymi programami wykorzystującymi luki i lukami w zabezpieczeniach.</span><span class="sxs-lookup"><span data-stu-id="a7561-104">Web application firewall (WAF) is a feature of Application Gateway that provides centralized protection of your web applications from common exploits and vulnerabilities.</span></span> 

<span data-ttu-id="a7561-105">Zapora aplikacji sieci Web zapewnia ochronę na podstawie reguł z [podstawowych zestawów reguł OWASP](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project) w wersji 3.0 lub 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="a7561-105">Web application firewall is based on rules from the [OWASP core rule sets](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project) 3.0 or 2.2.9.</span></span> <span data-ttu-id="a7561-106">Aplikacje sieci Web coraz częściej stają się obiektami złośliwych ataków wykorzystujących znane luki w zabezpieczeniach.</span><span class="sxs-lookup"><span data-stu-id="a7561-106">Web applications are increasingly targets of malicious attacks that exploit common known vulnerabilities.</span></span> <span data-ttu-id="a7561-107">Wśród nich często zdarzają się np. ataki polegające na iniekcji SQL i ataki z użyciem skryptów wykorzystywanych w wielu witrynach.</span><span class="sxs-lookup"><span data-stu-id="a7561-107">Common among these exploits are SQL injection attacks, cross site scripting attacks to name a few.</span></span> <span data-ttu-id="a7561-108">Zapobieganie takim atakom z poziomu kodu aplikacji może być trudne. Może też wymagać rygorystycznego przestrzegania harmonogramu konserwacji, poprawek i monitorowania na poziomie wielu warstw topologii aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a7561-108">Preventing such attacks in application code can be challenging and may require rigorous maintenance, patching and monitoring at multiple layers of the application topology.</span></span> <span data-ttu-id="a7561-109">Scentralizowana zapora aplikacji sieci Web ułatwia zarządzanie zabezpieczeniami oraz zapewnia lepszą ochronę administratorów aplikacji przed zagrożeniami i intruzami.</span><span class="sxs-lookup"><span data-stu-id="a7561-109">A centralized web application firewall helps make security management much simpler and gives better assurance to application administrators against threats or intrusions.</span></span> <span data-ttu-id="a7561-110">Zapora aplikacji sieci Web może reagować na zagrożenia bezpieczeństwa szybciej — poprzez wdrażanie poprawek zapobiegających wykorzystaniu znanych luk w zabezpieczeniach w centralnej lokalizacji zamiast w poszczególnych aplikacjach sieci Web.</span><span class="sxs-lookup"><span data-stu-id="a7561-110">A WAF solution can also react to a security threat faster by patching a known vulnerability at a central location versus securing each of individual web applications.</span></span> <span data-ttu-id="a7561-111">Istniejące bramy Application Gateway można łatwo przekonwertować na bramę Application Gateway obsługującą zaporę aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="a7561-111">Existing application gateways can be converted to a web application firewall enabled application gateway easily.</span></span>

![imageURLroute](./media/application-gateway-web-application-firewall-overview/WAF1.png)

<span data-ttu-id="a7561-113">Usługa Application Gateway działa jak kontroler dostarczania aplikacji i oferuje możliwość kończenia żądań SSL, ustawiania koligacji sesji na podstawie pliku cookie, dystrybucji obciążenia z działaniem okrężnym, routingu opartego na zawartości, a także możliwość hostowania wielu witryn sieci Web i stosowania rozszerzonych zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="a7561-113">Application Gateway operates as an application delivery controller and offers SSL termination, cookie-based session affinity, round-robin load distribution, content-based routing, ability to host multiple websites and security enhancements.</span></span> <span data-ttu-id="a7561-114">Rozszerzenia zabezpieczeń oferowane przez usługę Application Gateway obejmują zarządzanie zasadami protokołu SSL i pełne wsparcie w zakresie protokołu SSL.</span><span class="sxs-lookup"><span data-stu-id="a7561-114">Security enhancements offered by Application Gateway include SSL policy management, end to end SSL support.</span></span> <span data-ttu-id="a7561-115">Zabezpieczenia aplikacji są teraz silniejsze dzięki bezpośredniej integracji zapory aplikacji sieci Web z ofertą kontrolera ADC.</span><span class="sxs-lookup"><span data-stu-id="a7561-115">Application security is now strengthened by WAF (web application firewall) being directly integrated into the ADC offering.</span></span> <span data-ttu-id="a7561-116">Dzięki temu możliwa jest łatwa konfiguracja w centralnej lokalizacji. Dodatkowo wprowadzenie tej nowej funkcji sprawia, że zarządzanie aplikacjami sieci Web i ich ochrona przed znanymi lukami są niezwykle proste.</span><span class="sxs-lookup"><span data-stu-id="a7561-116">This provides an easy to configure central location to manage and protect your web applications against common web vulnerabilities.</span></span>

## <a name="benefits"></a><span data-ttu-id="a7561-117">Korzyści</span><span class="sxs-lookup"><span data-stu-id="a7561-117">Benefits</span></span>

<span data-ttu-id="a7561-118">Poniżej przedstawiono główne korzyści wynikające ze stosowania usługi Application Gateway i zapory aplikacji sieci Web:</span><span class="sxs-lookup"><span data-stu-id="a7561-118">The following are the core benefits that Application Gateway and web application firewall provide:</span></span>

### <a name="protection"></a><span data-ttu-id="a7561-119">Ochrona</span><span class="sxs-lookup"><span data-stu-id="a7561-119">Protection</span></span>

* <span data-ttu-id="a7561-120">Ochrona aplikacji sieci Web przed atakami wykorzystującymi luki w zabezpieczeniach oraz atakami niewymagającymi modyfikacji kodu zaplecza.</span><span class="sxs-lookup"><span data-stu-id="a7561-120">Protect your web application from web vulnerabilities and attacks without modification to backend code.</span></span>

* <span data-ttu-id="a7561-121">Jednoczesna ochrona wielu aplikacji sieci Web za bramą aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a7561-121">Protect multiple web applications at the same time behind an application gateway.</span></span> <span data-ttu-id="a7561-122">Brama Application Gateway umożliwia hostowanie maksymalnie 20 witryn sieci Web. Wszystkie witryny za bramą są chronione przed atakami z sieci Web przy użyciu zapory aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="a7561-122">Application gateway supports hosting up to 20 websites behind a single gateway that could all be protected against web attacks with WAF.</span></span>

### <a name="monitoring"></a><span data-ttu-id="a7561-123">Monitorowanie</span><span class="sxs-lookup"><span data-stu-id="a7561-123">Monitoring</span></span>

* <span data-ttu-id="a7561-124">Monitoruj aplikacje sieci Web pod kątem ataków przy użyciu dziennika zapory aplikacji sieci Web w czasie rzeczywistym.</span><span class="sxs-lookup"><span data-stu-id="a7561-124">Monitor your web application against attacks using a real-time WAF log.</span></span> <span data-ttu-id="a7561-125">Ten dziennik jest zintegrowany z usługą [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md) w celu śledzenia alertów i dzienników zapory aplikacji sieci Web oraz łatwego monitorowania trendów.</span><span class="sxs-lookup"><span data-stu-id="a7561-125">This log is integrated with [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md) to track WAF alerts and logs and easily monitor trends.</span></span>

* <span data-ttu-id="a7561-126">Zapora aplikacji sieci Web zostanie wkrótce zintegrowana z usługą Azure Security Center.</span><span class="sxs-lookup"><span data-stu-id="a7561-126">WAF will be integrated with Azure Security Center soon.</span></span> <span data-ttu-id="a7561-127">Usługa Azure Security Center daje pełny widok stanu bezpieczeństwa wszystkich Twoich zasobów platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="a7561-127">Azure Security Center allows for a central view of the security state of all your Azure resources.</span></span>

### <a name="customization"></a><span data-ttu-id="a7561-128">Dostosowywanie</span><span class="sxs-lookup"><span data-stu-id="a7561-128">Customization</span></span>

* <span data-ttu-id="a7561-129">Możliwość dostosowywania reguł i grup reguł zapory aplikacji sieci Web do własnych wymagań dotyczących aplikacji i w celu wyeliminowania wyników fałszywie dodatnich.</span><span class="sxs-lookup"><span data-stu-id="a7561-129">The ability to customize WAF rules and rule groups to suit your application requirements and eliminate false positives.</span></span>

## <a name="features"></a><span data-ttu-id="a7561-130">Funkcje</span><span class="sxs-lookup"><span data-stu-id="a7561-130">Features</span></span>

<span data-ttu-id="a7561-131">Zapora aplikacji sieci Web jest domyślnie wstępnie skonfigurowana przy użyciu zestawu CRS 3.0, ale możesz używać wersji 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="a7561-131">Web application firewall comes preconfigured with CRS 3.0 by default or you can choose to use 2.2.9.</span></span> <span data-ttu-id="a7561-132">Zestaw CRS 3.0 oferuje mniejszą liczbę wyników fałszywie dodatnich niż wersja 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="a7561-132">CRS 3.0 offers reduced false positives over 2.2.9.</span></span> <span data-ttu-id="a7561-133">Umożliwiono [dostosowywanie reguł do określonych wymagań](application-gateway-customize-waf-rules-portal.md).</span><span class="sxs-lookup"><span data-stu-id="a7561-133">The ability to [customize rules to suit your needs](application-gateway-customize-waf-rules-portal.md) is provided.</span></span> <span data-ttu-id="a7561-134">Oto niektóre typowe luki w zabezpieczeniach sieci Web, przed którymi chroni zapora aplikacji sieci Web:</span><span class="sxs-lookup"><span data-stu-id="a7561-134">Some of the common web vulnerabilities which web application firewall protects against includes:</span></span>

* <span data-ttu-id="a7561-135">Ochrona przed atakami polegającymi na iniekcji SQL</span><span class="sxs-lookup"><span data-stu-id="a7561-135">SQL injection protection</span></span>
* <span data-ttu-id="a7561-136">Ochrona przed atakami z użyciem skryptów wykorzystywanych w obrębie wielu witryn</span><span class="sxs-lookup"><span data-stu-id="a7561-136">Cross site scripting protection</span></span>
* <span data-ttu-id="a7561-137">Częste ataki w ramach sieci Web polegające na iniekcji poleceń, przemycaniu żądań HTTP, rozdzielaniu odpowiedzi HTTP i zdalnym dołączaniu plików</span><span class="sxs-lookup"><span data-stu-id="a7561-137">Common Web Attacks Protection such as command injection, HTTP request smuggling, HTTP response splitting, and remote file inclusion attack</span></span>
* <span data-ttu-id="a7561-138">Ochrona przed naruszeniami protokołu HTTP</span><span class="sxs-lookup"><span data-stu-id="a7561-138">Protection against HTTP protocol violations</span></span>
* <span data-ttu-id="a7561-139">Ochrona przed nieprawidłowościami protokołu HTTP, takimi jak brakujące powiązania agenta i użytkownika hosta oraz akceptowanie nagłówków</span><span class="sxs-lookup"><span data-stu-id="a7561-139">Protection against HTTP protocol anomalies such as missing host user-agent and accept headers</span></span>
* <span data-ttu-id="a7561-140">Zapobieganie atakom z użyciem robotów, przeszukiwarek i skanerów</span><span class="sxs-lookup"><span data-stu-id="a7561-140">Prevention against bots, crawlers, and scanners</span></span>
* <span data-ttu-id="a7561-141">Wykrywanie typowych błędów konfiguracji aplikacji (np. Apache, usługi IIS itp.)</span><span class="sxs-lookup"><span data-stu-id="a7561-141">Detection of common application misconfigurations (i.e. Apache, IIS, etc.)</span></span>

<span data-ttu-id="a7561-142">Bardziej szczegółową listę reguł i metod ochrony przed nimi można znaleźć na następującej liście [podstawowych zestawów reguł](#core-rule-sets).</span><span class="sxs-lookup"><span data-stu-id="a7561-142">For a more detailed list of rules and their protections see the following [Core rule sets](#core-rule-sets).</span></span>

### <a name="core-rule-sets"></a><span data-ttu-id="a7561-143">Podstawowe zestawy reguł</span><span class="sxs-lookup"><span data-stu-id="a7561-143">Core rule sets</span></span>

<span data-ttu-id="a7561-144">Usługa Application Gateway obsługuje dwa zestawy reguł: CRS 3.0 i CRS 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="a7561-144">Application Gateway supports two rule sets, CRS 3.0, and CRS 2.2.9.</span></span> <span data-ttu-id="a7561-145">Są to kolekcje reguł, które chronią aplikacje sieci Web przed złośliwymi działaniami.</span><span class="sxs-lookup"><span data-stu-id="a7561-145">These core rules sets are collections of rules that protect your web applications for malicious activity.</span></span>

#### <a name="owasp30"></a><span data-ttu-id="a7561-146">OWASP_3.0</span><span class="sxs-lookup"><span data-stu-id="a7561-146">OWASP_3.0</span></span>

<span data-ttu-id="a7561-147">Udostępniony podstawowy zestaw reguł w wersji 3.0 zawiera 13 grup reguł, jak pokazano w poniższej tabeli.</span><span class="sxs-lookup"><span data-stu-id="a7561-147">The 3.0 core rule set provided has 13 rule groups as shown in the following table.</span></span> <span data-ttu-id="a7561-148">Każda z tych grup reguł zawiera wiele reguł, które można wyłączyć.</span><span class="sxs-lookup"><span data-stu-id="a7561-148">Each of these rule groups contains multiple rules, which can be disabled.</span></span>

|<span data-ttu-id="a7561-149">Grupa reguł</span><span class="sxs-lookup"><span data-stu-id="a7561-149">RuleGroup</span></span>|<span data-ttu-id="a7561-150">Opis</span><span class="sxs-lookup"><span data-stu-id="a7561-150">Description</span></span>|
|---|---|
|<span data-ttu-id="a7561-151">**[REQUEST-910-IP-REPUTATION](application-gateway-crs-rulegroups-rules.md#crs910)**</span><span class="sxs-lookup"><span data-stu-id="a7561-151">**[REQUEST-910-IP-REPUTATION](application-gateway-crs-rulegroups-rules.md#crs910)**</span></span>|<span data-ttu-id="a7561-152">Zawiera reguły ochrony przed znanymi nadawcami spamu i złośliwymi działaniami.</span><span class="sxs-lookup"><span data-stu-id="a7561-152">Contains rules to protect against known spammers or malicious activity.</span></span>|
|<span data-ttu-id="a7561-153">**[REQUEST-911-METHOD-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs911)**</span><span class="sxs-lookup"><span data-stu-id="a7561-153">**[REQUEST-911-METHOD-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs911)**</span></span>|<span data-ttu-id="a7561-154">Zawiera reguły blokowania metod (PUT, PATCH).</span><span class="sxs-lookup"><span data-stu-id="a7561-154">Contains rules to lock down methods (PUT, PATCH< ..)</span></span>|
|<span data-ttu-id="a7561-155">**[REQUEST-912-DOS-PROTECTION](application-gateway-crs-rulegroups-rules.md#crs912)**</span><span class="sxs-lookup"><span data-stu-id="a7561-155">**[REQUEST-912-DOS-PROTECTION](application-gateway-crs-rulegroups-rules.md#crs912)**</span></span>| <span data-ttu-id="a7561-156">Zawiera reguły ochrony przed atakami typu „odmowa usługi” (DoS).</span><span class="sxs-lookup"><span data-stu-id="a7561-156">Contains rules to protect against Denial of Service (DoS) attacks.</span></span>|
|<span data-ttu-id="a7561-157">**[REQUEST-913-SCANNER-DETECTION](application-gateway-crs-rulegroups-rules.md#crs913)**</span><span class="sxs-lookup"><span data-stu-id="a7561-157">**[REQUEST-913-SCANNER-DETECTION](application-gateway-crs-rulegroups-rules.md#crs913)**</span></span>| <span data-ttu-id="a7561-158">Zawiera reguły ochrony przed skanerami portów i środowiska.</span><span class="sxs-lookup"><span data-stu-id="a7561-158">Contains rules to protect against port and environment scanners.</span></span>|
|<span data-ttu-id="a7561-159">**[REQUEST-920-PROTOCOL-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs920)**</span><span class="sxs-lookup"><span data-stu-id="a7561-159">**[REQUEST-920-PROTOCOL-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs920)**</span></span>|<span data-ttu-id="a7561-160">Zawiera reguły ochrony przed problemami z protokołami i kodowaniem.</span><span class="sxs-lookup"><span data-stu-id="a7561-160">Contains rules to protect against protocol and encoding issues.</span></span>|
|<span data-ttu-id="a7561-161">**[REQUEST-921-PROTOCOL-ATTACK](application-gateway-crs-rulegroups-rules.md#crs921)**</span><span class="sxs-lookup"><span data-stu-id="a7561-161">**[REQUEST-921-PROTOCOL-ATTACK](application-gateway-crs-rulegroups-rules.md#crs921)**</span></span>|<span data-ttu-id="a7561-162">Zawiera reguły ochrony przed iniekcjami nagłówków, przemycaniem żądań i rozdzielaniem odpowiedzi</span><span class="sxs-lookup"><span data-stu-id="a7561-162">Contains rules to protect against header injection, request smuggling, and response splitting</span></span>|
|<span data-ttu-id="a7561-163">**[REQUEST-930-APPLICATION-ATTACK-LFI](application-gateway-crs-rulegroups-rules.md#crs930)**</span><span class="sxs-lookup"><span data-stu-id="a7561-163">**[REQUEST-930-APPLICATION-ATTACK-LFI](application-gateway-crs-rulegroups-rules.md#crs930)**</span></span>|<span data-ttu-id="a7561-164">Zawiera reguły ochrony przed atakami na pliki i ścieżki.</span><span class="sxs-lookup"><span data-stu-id="a7561-164">Contains rules to protect against file and path attacks.</span></span>|
|<span data-ttu-id="a7561-165">**[REQUEST-931-APPLICATION-ATTACK-RFI](application-gateway-crs-rulegroups-rules.md#crs931)**</span><span class="sxs-lookup"><span data-stu-id="a7561-165">**[REQUEST-931-APPLICATION-ATTACK-RFI](application-gateway-crs-rulegroups-rules.md#crs931)**</span></span>|<span data-ttu-id="a7561-166">Zawiera reguły ochrony przed zdalnym dołączaniem plików (RFI)</span><span class="sxs-lookup"><span data-stu-id="a7561-166">Contains rules to protect against Remote File Inclusion (RFI)</span></span>|
|<span data-ttu-id="a7561-167">**[REQUEST-932-APPLICATION-ATTACK-RCE](application-gateway-crs-rulegroups-rules.md#crs932)**</span><span class="sxs-lookup"><span data-stu-id="a7561-167">**[REQUEST-932-APPLICATION-ATTACK-RCE](application-gateway-crs-rulegroups-rules.md#crs932)**</span></span>|<span data-ttu-id="a7561-168">Zawiera reguły ochrony przed zdalnym wykonywaniem kodu.</span><span class="sxs-lookup"><span data-stu-id="a7561-168">Contains rules to protect again Remote Code Execution.</span></span>|
|<span data-ttu-id="a7561-169">**[REQUEST-933-APPLICATION-ATTACK-PHP](application-gateway-crs-rulegroups-rules.md#crs933)**</span><span class="sxs-lookup"><span data-stu-id="a7561-169">**[REQUEST-933-APPLICATION-ATTACK-PHP](application-gateway-crs-rulegroups-rules.md#crs933)**</span></span>|<span data-ttu-id="a7561-170">Zawiera reguły ochrony przed atakami polegającymi na iniekcji PHP.</span><span class="sxs-lookup"><span data-stu-id="a7561-170">Contains rules to protect against PHP injection attacks.</span></span>|
|<span data-ttu-id="a7561-171">**[REQUEST-941-APPLICATION-ATTACK-XSS](application-gateway-crs-rulegroups-rules.md#crs941)**</span><span class="sxs-lookup"><span data-stu-id="a7561-171">**[REQUEST-941-APPLICATION-ATTACK-XSS](application-gateway-crs-rulegroups-rules.md#crs941)**</span></span>|<span data-ttu-id="a7561-172">Zawiera reguły ochrony przed atakami z użyciem skryptów w obrębie wielu witryn.</span><span class="sxs-lookup"><span data-stu-id="a7561-172">Contains rules for protecting against cross site scripting.</span></span>|
|<span data-ttu-id="a7561-173">**[REQUEST-942-APPLICATION-ATTACK-SQLI](application-gateway-crs-rulegroups-rules.md#crs942)**</span><span class="sxs-lookup"><span data-stu-id="a7561-173">**[REQUEST-942-APPLICATION-ATTACK-SQLI](application-gateway-crs-rulegroups-rules.md#crs942)**</span></span>|<span data-ttu-id="a7561-174">Zawiera reguły ochrony przed atakami polegającymi na iniekcji SQL.</span><span class="sxs-lookup"><span data-stu-id="a7561-174">Contains rules for protecting against SQL injection attacks.</span></span>|
|<span data-ttu-id="a7561-175">**[REQUEST-943-APPLICATION-ATTACK-SESSION-FIXATION](application-gateway-crs-rulegroups-rules.md#crs943)**</span><span class="sxs-lookup"><span data-stu-id="a7561-175">**[REQUEST-943-APPLICATION-ATTACK-SESSION-FIXATION](application-gateway-crs-rulegroups-rules.md#crs943)**</span></span>|<span data-ttu-id="a7561-176">Zawiera reguły ochrony przed atakami z użyciem spreparowanych stałych identyfikatorów sesji.</span><span class="sxs-lookup"><span data-stu-id="a7561-176">Contains rules to protect against Session Fixation Attacks.</span></span>|

#### <a name="owasp229"></a><span data-ttu-id="a7561-177">OWASP_2.2.9</span><span class="sxs-lookup"><span data-stu-id="a7561-177">OWASP_2.2.9</span></span>

<span data-ttu-id="a7561-178">Udostępniony podstawowy zestaw reguł w wersji 2.2.9 zawiera 10 grup reguł, jak pokazano w poniższej tabeli.</span><span class="sxs-lookup"><span data-stu-id="a7561-178">The 2.2.9 core rule set provided has 10 rule groups as shown in the following table.</span></span> <span data-ttu-id="a7561-179">Każda z tych grup reguł zawiera wiele reguł, które można wyłączyć.</span><span class="sxs-lookup"><span data-stu-id="a7561-179">Each of these rule groups contains multiple rules, which can be disabled.</span></span>

|<span data-ttu-id="a7561-180">Grupa reguł</span><span class="sxs-lookup"><span data-stu-id="a7561-180">RuleGroup</span></span>|<span data-ttu-id="a7561-181">Opis</span><span class="sxs-lookup"><span data-stu-id="a7561-181">Description</span></span>|
|---|---|
|<span data-ttu-id="a7561-182">**[crs_20_protocol_violations](application-gateway-crs-rulegroups-rules.md#crs20)**</span><span class="sxs-lookup"><span data-stu-id="a7561-182">**[crs_20_protocol_violations](application-gateway-crs-rulegroups-rules.md#crs20)**</span></span>|<span data-ttu-id="a7561-183">Zawiera reguły ochrony przed naruszeniami protokołu (nieprawidłowe znaki, metoda GET z treścią żądania itp.)</span><span class="sxs-lookup"><span data-stu-id="a7561-183">Contains rules to protect against protocol violations (invalid characters, GET with a request body, etc.)</span></span>|
|<span data-ttu-id="a7561-184">**[crs_21_protocol_anomalies](application-gateway-crs-rulegroups-rules.md#crs21)**</span><span class="sxs-lookup"><span data-stu-id="a7561-184">**[crs_21_protocol_anomalies](application-gateway-crs-rulegroups-rules.md#crs21)**</span></span>|<span data-ttu-id="a7561-185">Zawiera reguły ochrony przed nieprawidłowymi informacjami nagłówka.</span><span class="sxs-lookup"><span data-stu-id="a7561-185">Contains rules to protect against incorrect header information.</span></span>|
|<span data-ttu-id="a7561-186">**[crs_23_request_limits](application-gateway-crs-rulegroups-rules.md#crs23)**</span><span class="sxs-lookup"><span data-stu-id="a7561-186">**[crs_23_request_limits](application-gateway-crs-rulegroups-rules.md#crs23)**</span></span>|<span data-ttu-id="a7561-187">Zawiera reguły ochrony przed argumentami lub plikami przekraczającymi ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="a7561-187">Contains rules to protect against arguments or files that exceed limitations.</span></span>|
|<span data-ttu-id="a7561-188">**[crs_30_http_policy](application-gateway-crs-rulegroups-rules.md#crs30)**</span><span class="sxs-lookup"><span data-stu-id="a7561-188">**[crs_30_http_policy](application-gateway-crs-rulegroups-rules.md#crs30)**</span></span>|<span data-ttu-id="a7561-189">Zawiera reguły ochrony przed ograniczonymi metodami, nagłówkami i typami plików.</span><span class="sxs-lookup"><span data-stu-id="a7561-189">Contains rules to protect against restricted methods, headers, and file types.</span></span> |
|<span data-ttu-id="a7561-190">**[crs_35_bad_robots](application-gateway-crs-rulegroups-rules.md#crs35)**</span><span class="sxs-lookup"><span data-stu-id="a7561-190">**[crs_35_bad_robots](application-gateway-crs-rulegroups-rules.md#crs35)**</span></span>|<span data-ttu-id="a7561-191">Zawiera reguły ochrony przed przeszukiwarkami i skanerami sieci Web.</span><span class="sxs-lookup"><span data-stu-id="a7561-191">Contains rules to protect against web crawlers and scanners.</span></span>|
|<span data-ttu-id="a7561-192">**[crs_40_generic_attacks](application-gateway-crs-rulegroups-rules.md#crs40)**</span><span class="sxs-lookup"><span data-stu-id="a7561-192">**[crs_40_generic_attacks](application-gateway-crs-rulegroups-rules.md#crs40)**</span></span>|<span data-ttu-id="a7561-193">Zawiera reguły ochrony przed atakami ogólnymi (używaniem spreparowanych stałych identyfikatorów sesji, zdalnym dołączaniu plików, iniekcją PHP itp.)</span><span class="sxs-lookup"><span data-stu-id="a7561-193">Contains rules to protect against generic attacks (session fixation, remote file inclusion, PHP injection, etc.)</span></span>|
|<span data-ttu-id="a7561-194">**[crs_41_sql_injection_attacks](application-gateway-crs-rulegroups-rules.md#crs41sql)**</span><span class="sxs-lookup"><span data-stu-id="a7561-194">**[crs_41_sql_injection_attacks](application-gateway-crs-rulegroups-rules.md#crs41sql)**</span></span>|<span data-ttu-id="a7561-195">Zawiera reguły ochrony przed atakami polegającymi na iniekcji SQL</span><span class="sxs-lookup"><span data-stu-id="a7561-195">Contains rules to protect against SQL injection attacks</span></span>|
|<span data-ttu-id="a7561-196">**[crs_41_xss_attacks](application-gateway-crs-rulegroups-rules.md#crs41xss)**</span><span class="sxs-lookup"><span data-stu-id="a7561-196">**[crs_41_xss_attacks](application-gateway-crs-rulegroups-rules.md#crs41xss)**</span></span>|<span data-ttu-id="a7561-197">Zawiera reguły ochrony przed atakami z użyciem skryptów w obrębie wielu witryn.</span><span class="sxs-lookup"><span data-stu-id="a7561-197">Contains rules to protect against cross site scripting.</span></span>|
|<span data-ttu-id="a7561-198">**[crs_42_tight_security](application-gateway-crs-rulegroups-rules.md#crs42)**</span><span class="sxs-lookup"><span data-stu-id="a7561-198">**[crs_42_tight_security](application-gateway-crs-rulegroups-rules.md#crs42)**</span></span>|<span data-ttu-id="a7561-199">Zawiera reguły ochrony przed atakami polegającymi na przechodzeniu przez ścieżki</span><span class="sxs-lookup"><span data-stu-id="a7561-199">Contains a rule to protect against path traversal attacks</span></span>|
|<span data-ttu-id="a7561-200">**[crs_45_trojans](application-gateway-crs-rulegroups-rules.md#crs45)**</span><span class="sxs-lookup"><span data-stu-id="a7561-200">**[crs_45_trojans](application-gateway-crs-rulegroups-rules.md#crs45)**</span></span>|<span data-ttu-id="a7561-201">Zawiera reguły ochrony przed końmi trojańskimi otwierającymi tylne wejście.</span><span class="sxs-lookup"><span data-stu-id="a7561-201">Contains rules to protect against backdoor Trojans.</span></span>|

### <a name="waf-modes"></a><span data-ttu-id="a7561-202">Tryby zapory aplikacji sieci Web</span><span class="sxs-lookup"><span data-stu-id="a7561-202">WAF Modes</span></span>

<span data-ttu-id="a7561-203">Zapora aplikacji sieci Web bramy aplikacji może zostać skonfigurowana pod kątem jej uruchamiania w następujących dwóch trybach:</span><span class="sxs-lookup"><span data-stu-id="a7561-203">Application Gateway WAF can be configured to run in the following two modes:</span></span>

* <span data-ttu-id="a7561-204">**Tryb wykrywania** — gdy zapora aplikacji sieci Web usługi Application Gateway jest skonfigurowana do działania w trybie wykrywania, monitoruje i zapisuje w dziennikach wszelkie ostrzeżenia o zagrożeniach.</span><span class="sxs-lookup"><span data-stu-id="a7561-204">**Detection mode** – When configured to run in detection mode, Application Gateway WAF monitors and logs all threat alerts in to a log file.</span></span> <span data-ttu-id="a7561-205">Rejestrowanie danych diagnostycznych usługi Application Gateway musi być włączone w sekcji **Diagnostyka**.</span><span class="sxs-lookup"><span data-stu-id="a7561-205">Logging diagnostics for Application Gateway should be turned on using the **Diagnostics** section.</span></span> <span data-ttu-id="a7561-206">Należy również upewnić się, że opcja dziennika zapory aplikacji sieci Web jest zaznaczona i włączona.</span><span class="sxs-lookup"><span data-stu-id="a7561-206">You also need to ensure that the WAF log is selected and turned on.</span></span> <span data-ttu-id="a7561-207">Podczas pracy w trybie wykrywania zapora aplikacji sieci Web nie blokuje żądań przychodzących.</span><span class="sxs-lookup"><span data-stu-id="a7561-207">When running in detection mode web application firewall does not block incoming requests.</span></span>
* <span data-ttu-id="a7561-208">**Tryb zapobiegania** — kiedy zapora jest skonfigurowana do działania w tym trybie, usługa Application Gateway aktywnie blokuje próby włamań i ataki wykryte na podstawie reguł.</span><span class="sxs-lookup"><span data-stu-id="a7561-208">**Prevention mode** – When configured to run in prevention mode, Application Gateway actively blocks intrusions and attacks detected by its rules.</span></span> <span data-ttu-id="a7561-209">Osoba atakująca odbiera wyjątek 403 odnoszący się do nieautoryzowanego dostępu, a jej połączenie zostaje zakończone.</span><span class="sxs-lookup"><span data-stu-id="a7561-209">The attacker receives a 403 unauthorized access exception and the connection is terminated.</span></span> <span data-ttu-id="a7561-210">W trybie zapobiegania tego rodzaju ataki są rejestrowane w dziennikach zapory aplikacji sieci Web w sposób ciągły.</span><span class="sxs-lookup"><span data-stu-id="a7561-210">Prevention mode continues to log such attacks in the WAF logs.</span></span>

### <span data-ttu-id="a7561-211"><a name="application-gateway-waf-reports"></a>Monitorowanie zapory aplikacji sieci Web</span><span class="sxs-lookup"><span data-stu-id="a7561-211"><a name="application-gateway-waf-reports"></a>WAF Monitoring</span></span>

<span data-ttu-id="a7561-212">Monitorowanie kondycji bramy Application Gateway jest ważne.</span><span class="sxs-lookup"><span data-stu-id="a7561-212">Monitoring the health of your application gateway is important.</span></span> <span data-ttu-id="a7561-213">Monitorowanie kondycji zapory aplikacji sieci Web i chronionych przez nią aplikacji jest możliwe dzięki rejestrowaniu i integracji z usługami Azure Monitor, Azure Security Center (wkrótce) oraz Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="a7561-213">Monitoring the health of your web application firewall and the applications that it protects are provided through logging and integration with Azure Monitor, Azure Security Center (coming soon), and Log Analytics.</span></span>

![Diagnostyka](./media/application-gateway-web-application-firewall-overview/diagnostics.png)

#### <a name="azure-monitor"></a><span data-ttu-id="a7561-215">Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="a7561-215">Azure Monitor</span></span>

<span data-ttu-id="a7561-216">Każdy dziennik bramy Application Gateway jest zintegrowany z usługą [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a7561-216">Each application gateway log is integrated with [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md).</span></span>  <span data-ttu-id="a7561-217">Dzięki temu można śledzić informacje diagnostyczne, w tym alerty i dzienniki zapory aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="a7561-217">This allows you to track diagnostic information including WAF alerts and logs.</span></span>  <span data-ttu-id="a7561-218">Ta funkcja jest dostępna w ramach zasobu usługi Application Gateway w portalu na karcie **Diagnostyka** lub bezpośrednio w usłudze Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="a7561-218">This capability is provided within the Application Gateway resource in the portal under the **Diagnostics** tab or through the Azure Monitor service directly.</span></span> <span data-ttu-id="a7561-219">Aby dowiedzieć się więcej na temat włączania dzienników diagnostycznych usługi Application Gateway, odwiedź stronę [diagnostyki usługi Application Gateway](application-gateway-diagnostics.md)</span><span class="sxs-lookup"><span data-stu-id="a7561-219">To learn more about enabling diagnostic logs for application gateway visit [Application Gateway diagnostics](application-gateway-diagnostics.md)</span></span>

#### <a name="azure-security-center"></a><span data-ttu-id="a7561-220">Azure Security Center</span><span class="sxs-lookup"><span data-stu-id="a7561-220">Azure Security Center</span></span>

<span data-ttu-id="a7561-221">Usługa [Azure Security Center](../security-center/security-center-intro.md) ułatwia zapobieganie zagrożeniom, ich wykrywanie i reagowanie na nie, a przy tym zapewnia lepszy wgląd i większą kontrolę w zakresie bezpieczeństwa zasobów na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="a7561-221">[Azure Security Center](../security-center/security-center-intro.md) helps you prevent, detect, and respond to threats with increased visibility into and control over the security of your Azure resources.</span></span> <span data-ttu-id="a7561-222">Brama aplikacji jest teraz [zintegrowana z usługą Azure Security Center](application-gateway-integration-security-center.md).</span><span class="sxs-lookup"><span data-stu-id="a7561-222">Application gateway now [integrates into Azure Security Center](application-gateway-integration-security-center.md).</span></span> <span data-ttu-id="a7561-223">Usługa Azure Security Center skanuje środowisko w celu wykrycia niechronionych aplikacji internetowych.</span><span class="sxs-lookup"><span data-stu-id="a7561-223">Azure Security Center scans your environment to detect unprotected web applications.</span></span> <span data-ttu-id="a7561-224">Usługa ta może udostępnić zalecenie dotyczące zapory aplikacji internetowej bramy aplikacji służące do ochrony tych narażonych na ataki zasobów.</span><span class="sxs-lookup"><span data-stu-id="a7561-224">It can now recommend application gateway WAF to protect these vulnerable resources.</span></span> <span data-ttu-id="a7561-225">Zapory aplikacji internetowej bramy aplikacji można tworzyć bezpośrednio z poziomu usługi Azure Security Center.</span><span class="sxs-lookup"><span data-stu-id="a7561-225">You can directly create application gateway WAF from the Azure Security Center.</span></span>  <span data-ttu-id="a7561-226">Te wystąpienia zapory aplikacji internetowej są zintegrowane z usługą Azure Security Center i za ich pomocą będą wysyłane alerty i informacje o kondycji do usługi Azure Security Center na potrzeby raportowania.</span><span class="sxs-lookup"><span data-stu-id="a7561-226">These WAF instances are integrated with Azure Security Center and will send alerts and health information back to Azure Security Center for reporting.</span></span>

![rysunek 1](./media/application-gateway-web-application-firewall-overview/figure1.png)

#### <a name="logging"></a><span data-ttu-id="a7561-228">Rejestrowanie</span><span class="sxs-lookup"><span data-stu-id="a7561-228">Logging</span></span>

<span data-ttu-id="a7561-229">Zapora aplikacji sieci Web w usłudze Application Gateway dostarcza szczegółowe raporty w zakresie każdego wykrytego zagrożenia.</span><span class="sxs-lookup"><span data-stu-id="a7561-229">Application Gateway WAF provides detailed reporting on each threat it detects.</span></span> <span data-ttu-id="a7561-230">Rejestrowanie jest zintegrowane z dziennikami diagnostycznymi platformy Azure, a alerty są zapisywane w formacie json.</span><span class="sxs-lookup"><span data-stu-id="a7561-230">Logging is integrated with Azure Diagnostics logs and alerts are recorded in a json format.</span></span> <span data-ttu-id="a7561-231">Te dzienniki można zintegrować z usługą [Log Analytics](../log-analytics/log-analytics-azure-networking-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="a7561-231">These logs can be integrated with [Log Analytics](../log-analytics/log-analytics-azure-networking-analytics.md).</span></span>

![imageURLroute](./media/application-gateway-web-application-firewall-overview/waf2.png)

```json
{
  "resourceId": "/SUBSCRIPTIONS/{subscriptionId}/RESOURCEGROUPS/{resourceGroupId}/PROVIDERS/MICROSOFT.NETWORK/APPLICATIONGATEWAYS/{appGatewayName}",
  "operationName": "ApplicationGatewayFirewall",
  "time": "2017-03-20T15:52:09.1494499Z",
  "category": "ApplicationGatewayFirewallLog",
  "properties": {
    "instanceId": "ApplicationGatewayRole_IN_0",
    "clientIp": "104.210.252.3",
    "clientPort": "4835",
    "requestUri": "/?a=%3Cscript%3Ealert(%22Hello%22);%3C/script%3E",
    "ruleSetType": "OWASP",
    "ruleSetVersion": "3.0",
    "ruleId": "941320",
    "message": "Possible XSS Attack Detected - HTML Tag Handler",
    "action": "Blocked",
    "site": "Global",
    "details": {
      "message": "Warning. Pattern match \"<(a|abbr|acronym|address|applet|area|audioscope|b|base|basefront|bdo|bgsound|big|blackface|blink|blockquote|body|bq|br|button|caption|center|cite|code|col|colgroup|comment|dd|del|dfn|dir|div|dl|dt|em|embed|fieldset|fn|font|form|frame|frameset|h1|head|h ...\" at ARGS:a.",
      "data": "Matched Data: <script> found within ARGS:a: <script>alert(\\x22hello\\x22);</script>",
      "file": "rules/REQUEST-941-APPLICATION-ATTACK-XSS.conf",
      "line": "865"
    }
  }
} 

```

## <a name="application-gateway-waf-sku-pricing"></a><span data-ttu-id="a7561-233">Cena jednostki SKU zapory aplikacji sieci Web w usłudze Application Gateway</span><span class="sxs-lookup"><span data-stu-id="a7561-233">Application Gateway WAF SKU pricing</span></span>

<span data-ttu-id="a7561-234">Zapora aplikacji sieci Web jest dostępna w ramach nowej jednostki SKU zapory aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="a7561-234">Web application firewall is available under a new a WAF SKU.</span></span> <span data-ttu-id="a7561-235">Ta jednostka SKU jest dostępna tylko w modelu aprowizacji usługi Azure Resource Manager, a nie w klasycznym modelu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="a7561-235">This SKU is available only in Azure Resource Manager provisioning model and not under the classic deployment model.</span></span> <span data-ttu-id="a7561-236">Ponadto jednostka SKU zapory aplikacji sieci Web jest oferowana tylko w średnich i dużych rozmiarach wystąpień usługi Application Gateway.</span><span class="sxs-lookup"><span data-stu-id="a7561-236">Additionally WAF SKU comes only in medium and large application gateway instance sizes.</span></span> <span data-ttu-id="a7561-237">Wszystkie limity dotyczące usługi Application Gateway dotyczą również jednostki SKU zapory aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="a7561-237">All the limits for application gateway also apply to the WAF SKU.</span></span> <span data-ttu-id="a7561-238">Ceny zależą od opłaty godzinnej za wystąpienie bramy i opłaty za przetwarzanie danych.</span><span class="sxs-lookup"><span data-stu-id="a7561-238">Pricing is based on per hour gateway instance charge and data processing charge.</span></span> <span data-ttu-id="a7561-239">Opłata godzinna za bramę w przypadku jednostki SKU zapory aplikacji sieci Web różni się od opłat za standardową jednostkę SKU. Ceny można znaleźć na stronie [szczegółowego cennika usługi Application Gateway](https://azure.microsoft.com/pricing/details/application-gateway/).</span><span class="sxs-lookup"><span data-stu-id="a7561-239">Per hour gateway pricing for WAF SKU is different from Standard SKU charges and can be found at [Application Gateway pricing details](https://azure.microsoft.com/pricing/details/application-gateway/).</span></span> <span data-ttu-id="a7561-240">Opłaty za przetwarzanie danych pozostają bez zmian.</span><span class="sxs-lookup"><span data-stu-id="a7561-240">Data processing charges remain the same.</span></span> <span data-ttu-id="a7561-241">Nie ma opłat za regułę lub grupę reguł.</span><span class="sxs-lookup"><span data-stu-id="a7561-241">There is no per rule or rule group charges.</span></span> <span data-ttu-id="a7561-242">Możesz chronić wiele aplikacji sieci Web za tą samą zaporą aplikacji sieci Web i nie ma dodatkowych opłat za obsługę wielu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a7561-242">You can protect multiple web applications behind the same web application firewall and there are no additional charges for supporting multiple applications.</span></span> 

<span data-ttu-id="a7561-243">Zapora aplikacji sieci Web zacznie być rozliczana 2017-05-05. Do tego czasu będą naliczane standardowe opłaty za bramy jednostki SKU zapory aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="a7561-243">Billing for WAF starts effectively 5/5/2017, until then the WAF SKU gateways continues to be charged at standard rates.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a7561-244">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="a7561-244">Next steps</span></span>

<span data-ttu-id="a7561-245">Więcej informacji na temat możliwości oferowanych przez zaporę aplikacji sieci Web można znaleźć w artykule [How to configure web application firewall on Application Gateway](application-gateway-web-application-firewall-portal.md) (Jak skonfigurować zaporę aplikacji sieci Web w usłudze Application Gateway).</span><span class="sxs-lookup"><span data-stu-id="a7561-245">After learning more about the capabilities of WAF, visit [How to configure web application firewall on Application Gateway](application-gateway-web-application-firewall-portal.md).</span></span>

