---
title: "Używanie udostępnionego sygnatur dostępu (SAS) w usłudze Azure Storage | Dokumentacja firmy Microsoft"
description: "Dowiedz się, Użyj sygnatur dostępu współdzielonego (SAS), aby delegować dostęp do zasobów usługi Azure Storage, w tym obiekty BLOB, kolejek, tabel i plików."
services: storage
documentationcenter: 
author: mmacy
manager: timlt
editor: tysonn
ms.assetid: 46fd99d7-36b3-4283-81e3-f214b29f1152
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 04/18/2017
ms.author: marsma
ms.openlocfilehash: a753fd481c9f91d94b6a2bd3633142e2dddedaec
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/29/2017
---
# <a name="using-shared-access-signatures-sas"></a><span data-ttu-id="4196a-103">Przy użyciu sygnatury dostępu współdzielonego (SAS)</span><span class="sxs-lookup"><span data-stu-id="4196a-103">Using shared access signatures (SAS)</span></span>

<span data-ttu-id="4196a-104">Sygnatury dostępu współdzielonego (SAS) zapewnia sposób, aby przyznać ograniczony dostęp do obiektów na koncie magazynu innym klientom bez narażania klucz konta.</span><span class="sxs-lookup"><span data-stu-id="4196a-104">A shared access signature (SAS) provides you with a way to grant limited access to objects in your storage account to other clients, without exposing your account key.</span></span> <span data-ttu-id="4196a-105">W tym artykule firma Microsoft Podaj omówienie modelu SAS, przejrzyj SAS najlepszych rozwiązań i przyjrzyj się przykłady.</span><span class="sxs-lookup"><span data-stu-id="4196a-105">In this article, we provide an overview of the SAS model, review SAS best practices, and look at some examples.</span></span>

<span data-ttu-id="4196a-106">Dla dodatkowych przykładów kodu poza tymi przedstawionych w tym miejscu przy użyciu sygnatury dostępu Współdzielonego, zobacz [wprowadzenie do magazynu obiektów Blob Azure w programie .NET](https://azure.microsoft.com/documentation/samples/storage-blob-dotnet-getting-started/) i inne przykłady, które są dostępne w [przykłady kodu Azure](https://azure.microsoft.com/documentation/samples/?service=storage) biblioteki.</span><span class="sxs-lookup"><span data-stu-id="4196a-106">For additional code examples using SAS beyond those presented here, see [Getting Started with Azure Blob Storage in .NET](https://azure.microsoft.com/documentation/samples/storage-blob-dotnet-getting-started/) and other samples available in the [Azure Code Samples](https://azure.microsoft.com/documentation/samples/?service=storage) library.</span></span> <span data-ttu-id="4196a-107">Możesz Pobierz przykładowe aplikacje i uruchom je lub Przeglądaj kodu w witrynie GitHub.</span><span class="sxs-lookup"><span data-stu-id="4196a-107">You can download the sample applications and run them, or browse the code on GitHub.</span></span>

## <a name="what-is-a-shared-access-signature"></a><span data-ttu-id="4196a-108">Co to jest sygnatury dostępu współdzielonego?</span><span class="sxs-lookup"><span data-stu-id="4196a-108">What is a shared access signature?</span></span>
<span data-ttu-id="4196a-109">Sygnatury dostępu współdzielonego umożliwiają dostęp delegowany do zasobów na koncie magazynu.</span><span class="sxs-lookup"><span data-stu-id="4196a-109">A shared access signature provides delegated access to resources in your storage account.</span></span> <span data-ttu-id="4196a-110">Z sygnatury dostępu Współdzielonego można przyznać klientom dostęp do zasobów na koncie magazynu bez udostępniania kluczy konta.</span><span class="sxs-lookup"><span data-stu-id="4196a-110">With a SAS, you can grant clients access to resources in your storage account, without sharing your account keys.</span></span> <span data-ttu-id="4196a-111">To jest punkt klucza przy użyciu sygnatury dostępu współdzielonego w aplikacjach — sygnatury dostępu Współdzielonego jest bezpiecznym sposobem udostępnianie zasobów magazynu bez naruszania klucze Twojego konta.</span><span class="sxs-lookup"><span data-stu-id="4196a-111">This is the key point of using shared access signatures in your applications--a SAS is a secure way to share your storage resources without compromising your account keys.</span></span>

[!INCLUDE [storage-account-key-note-include](../../../includes/storage-account-key-note-include.md)]

<span data-ttu-id="4196a-112">Sygnatury dostępu Współdzielonego zapewnia kontrolę nad typ dostępu udzielić klientów, którzy mają SAS, w tym:</span><span class="sxs-lookup"><span data-stu-id="4196a-112">A SAS gives you granular control over the type of access you grant to clients who have the SAS, including:</span></span>

* <span data-ttu-id="4196a-113">Interwał, w którym jest prawidłowa, w tym czas rozpoczęcia i czas wygaśnięcia sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-113">The interval over which the SAS is valid, including the start time and the expiry time.</span></span>
* <span data-ttu-id="4196a-114">Uprawnienia przyznane przez sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-114">The permissions granted by the SAS.</span></span> <span data-ttu-id="4196a-115">Na przykład sygnatury dostępu Współdzielonego dla obiekt blob może udzielić odczytu i uprawnienia zapisu do tego obiektu blob, ale nie usunąć uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="4196a-115">For example, a SAS for a blob might grant read and write permissions to that blob, but not delete permissions.</span></span>
* <span data-ttu-id="4196a-116">Opcjonalne adres IP lub zakres adresów IP, z których Magazyn Azure będzie akceptować sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-116">An optional IP address or range of IP addresses from which Azure Storage will accept the SAS.</span></span> <span data-ttu-id="4196a-117">Na przykład może określić zakres adresów IP należących do organizacji.</span><span class="sxs-lookup"><span data-stu-id="4196a-117">For example, you might specify a range of IP addresses belonging to your organization.</span></span>
* <span data-ttu-id="4196a-118">Protokół, w którym magazyn Azure będzie akceptować sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-118">The protocol over which Azure Storage will accept the SAS.</span></span> <span data-ttu-id="4196a-119">Ten parametr opcjonalny służy do ograniczania dostępu do klientów przy użyciu protokołu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="4196a-119">You can use this optional parameter to restrict access to clients using HTTPS.</span></span>

## <a name="when-should-you-use-a-shared-access-signature"></a><span data-ttu-id="4196a-120">Kiedy należy używać sygnatury dostępu współdzielonego</span><span class="sxs-lookup"><span data-stu-id="4196a-120">When should you use a shared access signature?</span></span>
<span data-ttu-id="4196a-121">Aby zapewnić dostęp do zasobów na koncie magazynu dla każdego klienta, nie posiadającą kluczy dostępu do konta magazynu, można użyć sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-121">You can use a SAS when you want to provide access to resources in your storage account to any client not possessing your storage account's access keys.</span></span> <span data-ttu-id="4196a-122">Twoje konto magazynu obejmuje zarówno klucz dostępu podstawowych i pomocniczych, które przyznawaj dostęp administracyjny do konta i wszystkie zasoby w niej.</span><span class="sxs-lookup"><span data-stu-id="4196a-122">Your storage account includes both a primary and secondary access key, both of which grant administrative access to your account, and all resources within it.</span></span> <span data-ttu-id="4196a-123">Żaden z tych kluczy udostępnianie otwiera konta możliwości złośliwego lub brak dbałości o ich użycia.</span><span class="sxs-lookup"><span data-stu-id="4196a-123">Exposing either of these keys opens your account to the possibility of malicious or negligent use.</span></span> <span data-ttu-id="4196a-124">Sygnatury dostępu współdzielonego zapewniają bezpieczne alternatywę umożliwiającą klientom odczytu, zapisu i usuwania danych na koncie magazynu, zgodnie z uprawnieniami, które zostały jawnie przyznane uprawnienia i bez potrzeby klucza konta.</span><span class="sxs-lookup"><span data-stu-id="4196a-124">Shared access signatures provide a safe alternative that allows clients to read, write, and delete data in your storage account according to the permissions you've explicitly granted, and without need for an account key.</span></span>

<span data-ttu-id="4196a-125">Typowy scenariusz, w których sygnatury dostępu Współdzielonego jest użyteczny to usługa, gdzie użytkownicy odczytu i zapisu własne dane do konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="4196a-125">A common scenario where a SAS is useful is a service where users read and write their own data to your storage account.</span></span> <span data-ttu-id="4196a-126">W scenariuszu, w którym konta magazynu są przechowywane dane użytkownika istnieją dwa wzorce projektowe typowe:</span><span class="sxs-lookup"><span data-stu-id="4196a-126">In a scenario where a storage account stores user data, there are two typical design patterns:</span></span>

1. <span data-ttu-id="4196a-127">Klienci przekazywania i pobierania danych za pomocą usługi frontonu serwera proxy, który przeprowadza uwierzytelnianie.</span><span class="sxs-lookup"><span data-stu-id="4196a-127">Clients upload and download data via a front-end proxy service, which performs authentication.</span></span> <span data-ttu-id="4196a-128">Ta usługa proxy frontonu ma możliwość sprawdzania poprawności reguł biznesowych, ale w przypadku dużych ilości danych lub dużej liczby transakcji, tworzenie usługi, które można skalować do dopasowania żądanie może być kosztowne lub trudne.</span><span class="sxs-lookup"><span data-stu-id="4196a-128">This front-end proxy service has the advantage of allowing validation of business rules, but for large amounts of data or high-volume transactions, creating a service that can scale to match demand may be expensive or difficult.</span></span>

  ![Diagram scenariusza: Usługa frontonu serwera proxy](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-fe-proxy-service.png)   

1. <span data-ttu-id="4196a-130">Usługi LDS uwierzytelnia klientów zgodnie z potrzebami, a następnie generuje sygnaturę dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-130">A lightweight service authenticates the client as needed and then generates a SAS.</span></span> <span data-ttu-id="4196a-131">Gdy klient odbierze sygnatury dostępu Współdzielonego, uzyskiwania dostępu do zasobów konta magazynu bezpośrednio z na uprawnienia zdefiniowane przez sygnatury dostępu Współdzielonego i interwał dozwoloną sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-131">Once the client receives the SAS, they can access storage account resources directly with the permissions defined by the SAS and for the interval allowed by the SAS.</span></span> <span data-ttu-id="4196a-132">Sygnatury dostępu Współdzielonego zmniejsza potrzebę routingu wszystkich danych za pośrednictwem usługi Serwer proxy frontonu.</span><span class="sxs-lookup"><span data-stu-id="4196a-132">The SAS mitigates the need for routing all data through the front-end proxy service.</span></span>

  ![Diagram scenariusza: sygnatury dostępu Współdzielonego usługi dostawcy](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-provider-service.png)   

<span data-ttu-id="4196a-134">Wiele usług rzeczywistych może używać hybrydowego te dwie metody.</span><span class="sxs-lookup"><span data-stu-id="4196a-134">Many real-world services may use a hybrid of these two approaches.</span></span> <span data-ttu-id="4196a-135">Na przykład niektóre dane może być przetwarzane i sprawdzone za pomocą frontonu serwera proxy, podczas gdy inne dane zapisane i/lub odczytać bezpośrednio przy użyciu sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-135">For example, some data might be processed and validated via the front-end proxy, while other data is saved and/or read directly using SAS.</span></span>

<span data-ttu-id="4196a-136">Ponadto będą musieli używać sygnatury dostępu Współdzielonego do uwierzytelniania obiektu źródłowego w operacji kopiowania w niektórych scenariuszach:</span><span class="sxs-lookup"><span data-stu-id="4196a-136">Additionally, you will need to use a SAS to authenticate the source object in a copy operation in certain scenarios:</span></span>

* <span data-ttu-id="4196a-137">Podczas kopiowania obiektu blob do innego obiektu blob, która znajduje się w innego konta magazynu, należy użyć do uwierzytelniania źródłowego obiektu blob sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-137">When you copy a blob to another blob that resides in a different storage account, you must use a SAS to authenticate the source blob.</span></span> <span data-ttu-id="4196a-138">Opcjonalnie można sygnatury dostępu Współdzielonego docelowego obiektu blob również uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="4196a-138">You can optionally use a SAS to authenticate the destination blob as well.</span></span>
* <span data-ttu-id="4196a-139">Podczas kopiowania pliku do innego pliku, która znajduje się w innego konta magazynu, należy użyć do uwierzytelniania w pliku źródłowym sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-139">When you copy a file to another file that resides in a different storage account, you must use a SAS to authenticate the source file.</span></span> <span data-ttu-id="4196a-140">Sygnatury dostępu Współdzielonego można opcjonalnie użyć do uwierzytelniania również plik docelowy.</span><span class="sxs-lookup"><span data-stu-id="4196a-140">You can optionally use a SAS to authenticate the destination file as well.</span></span>
* <span data-ttu-id="4196a-141">Podczas kopiowania obiektu blob do pliku lub pliku do obiektu blob, należy użyć sygnatury dostępu Współdzielonego do uwierzytelniania obiektu źródłowego, nawet jeśli obiekty źródłowy i docelowy znajdują się w obrębie tego samego konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="4196a-141">When you copy a blob to a file, or a file to a blob, you must use a SAS to authenticate the source object, even if the source and destination objects reside within the same storage account.</span></span>

## <a name="types-of-shared-access-signatures"></a><span data-ttu-id="4196a-142">Rodzaje sygnatur dostępu współdzielonego</span><span class="sxs-lookup"><span data-stu-id="4196a-142">Types of shared access signatures</span></span>
<span data-ttu-id="4196a-143">Można utworzyć dwa rodzaje sygnatur dostępu współdzielonego:</span><span class="sxs-lookup"><span data-stu-id="4196a-143">You can create two types of shared access signatures:</span></span>

* <span data-ttu-id="4196a-144">**Usługa sygnatury dostępu Współdzielonego.**</span><span class="sxs-lookup"><span data-stu-id="4196a-144">**Service SAS.**</span></span> <span data-ttu-id="4196a-145">Sygnatura dostępu współdzielonego usługi deleguje dostęp do zasobu tylko w jednej z usług: obiektów blob, kolejek, tabel lub plików.</span><span class="sxs-lookup"><span data-stu-id="4196a-145">The service SAS delegates access to a resource in just one of the storage services: the Blob, Queue, Table, or File service.</span></span> <span data-ttu-id="4196a-146">Zobacz [konstruowania sygnatury dostępu Współdzielonego usługi](https://msdn.microsoft.com/library/dn140255.aspx) i [przykłady sygnatury dostępu Współdzielonego usługi](https://msdn.microsoft.com/library/dn140256.aspx) Aby uzyskać szczegółowe informacje na temat tworzenia tokenu sygnatury dostępu Współdzielonego usługi.</span><span class="sxs-lookup"><span data-stu-id="4196a-146">See [Constructing a Service SAS](https://msdn.microsoft.com/library/dn140255.aspx) and [Service SAS Examples](https://msdn.microsoft.com/library/dn140256.aspx) for in-depth information about constructing the service SAS token.</span></span>
* <span data-ttu-id="4196a-147">**Sygnatura dostępu Współdzielonego konta.**</span><span class="sxs-lookup"><span data-stu-id="4196a-147">**Account SAS.**</span></span> <span data-ttu-id="4196a-148">Konto sygnatury dostępu Współdzielonego delegatów dostęp do zasobów w co najmniej jednej usługi magazynu.</span><span class="sxs-lookup"><span data-stu-id="4196a-148">The account SAS delegates access to resources in one or more of the storage services.</span></span> <span data-ttu-id="4196a-149">Wszystkie operacje dostępne za pomocą sygnatury dostępu Współdzielonego usługi są również dostępne za pośrednictwem konta sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-149">All of the operations available via a service SAS are also available via an account SAS.</span></span> <span data-ttu-id="4196a-150">Ponadto przy użyciu sygnatury dostępu Współdzielonego konta, możesz delegować dostęp do operacji, które są stosowane do danej usługi, takie jak **pobierania/ustawiania właściwości usługi** i **uzyskać statystyki usługi**. Możesz również delegować dostęp do operacji odczytu, zapisu i usuwania dla kontenerów obiektów blob, tabel, kolejek i udziałów plików, co jest niedozwolone w wypadku sygnatury dostępu współdzielonego usługi.</span><span class="sxs-lookup"><span data-stu-id="4196a-150">Additionally, with the account SAS, you can delegate access to operations that apply to a given service, such as **Get/Set Service Properties** and **Get Service Stats**. You can also delegate access to read, write, and delete operations on blob containers, tables, queues, and file shares that are not permitted with a service SAS.</span></span> <span data-ttu-id="4196a-151">Zobacz [konstruowania SAS konta](https://msdn.microsoft.com/library/mt584140.aspx) Aby uzyskać szczegółowe informacje na temat tworzenia tokenu sygnatury dostępu Współdzielonego konta.</span><span class="sxs-lookup"><span data-stu-id="4196a-151">See [Constructing an Account SAS](https://msdn.microsoft.com/library/mt584140.aspx) for in-depth information about constructing the account SAS token.</span></span>

## <a name="how-a-shared-access-signature-works"></a><span data-ttu-id="4196a-152">Jak działa sygnatury dostępu współdzielonego</span><span class="sxs-lookup"><span data-stu-id="4196a-152">How a shared access signature works</span></span>
<span data-ttu-id="4196a-153">Sygnatury dostępu współdzielonego jest podpisem identyfikator URI, który wskazuje na jeden lub więcej zasobów magazynu i zawiera token, który zawiera specjalnego zestawu parametrów zapytania.</span><span class="sxs-lookup"><span data-stu-id="4196a-153">A shared access signature is a signed URI that points to one or more storage resources and includes a token that contains a special set of query parameters.</span></span> <span data-ttu-id="4196a-154">Token wskazuje, jak zasoby mogą uzyskiwać przez klienta.</span><span class="sxs-lookup"><span data-stu-id="4196a-154">The token indicates how the resources may be accessed by the client.</span></span> <span data-ttu-id="4196a-155">Jeden z parametrów zapytania, podpisu, jest utworzone na podstawie parametrów sygnatury dostępu Współdzielonego i podpisany przy użyciu klucza konta.</span><span class="sxs-lookup"><span data-stu-id="4196a-155">One of the query parameters, the signature, is constructed from the SAS parameters and signed with the account key.</span></span> <span data-ttu-id="4196a-156">Ta sygnatura jest używany przez usługi Azure Storage do uwierzytelniania sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-156">This signature is used by Azure Storage to authenticate the SAS.</span></span>

<span data-ttu-id="4196a-157">Oto przykład identyfikatora URI połączenia SAS, przedstawiający identyfikator URI zasobu i tokenu sygnatury dostępu Współdzielonego:</span><span class="sxs-lookup"><span data-stu-id="4196a-157">Here's an example of a SAS URI, showing the resource URI and the SAS token:</span></span>

![Składniki identyfikatora URI sygnatury dostępu Współdzielonego](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-uri.png)   

<span data-ttu-id="4196a-159">SAS token jest generowanie na ciąg *klienta* po stronie (zobacz [przykłady SAS](#sas-examples) sekcji Przykłady kodu).</span><span class="sxs-lookup"><span data-stu-id="4196a-159">The SAS token is a string you generate on the *client* side (see the [SAS examples](#sas-examples) section for code examples).</span></span> <span data-ttu-id="4196a-160">Token sygnatury dostępu Współdzielonego, które można wygenerować z biblioteki klienta usługi storage, na przykład nie będzie śledzona przez usługi Azure Storage w dowolny sposób.</span><span class="sxs-lookup"><span data-stu-id="4196a-160">A SAS token you generate with the storage client library, for example, is not tracked by Azure Storage in any way.</span></span> <span data-ttu-id="4196a-161">Po stronie klienta, można utworzyć nieograniczoną liczbę tokeny sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-161">You can create an unlimited number of SAS tokens on the client side.</span></span>

<span data-ttu-id="4196a-162">Gdy klient poda identyfikatora URI sygnatury dostępu Współdzielonego do magazynu Azure jako część żądania, usługa sprawdza SAS parametry i podpis, aby sprawdzić, czy jest nieprawidłowa dla żądania uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="4196a-162">When a client provides a SAS URI to Azure Storage as part of a request, the service checks the SAS parameters and signature to verify that it is valid for authenticating the request.</span></span> <span data-ttu-id="4196a-163">Jeśli usługa sprawdza, czy podpis jest prawidłowy, a następnie żądanie jest uwierzytelniane.</span><span class="sxs-lookup"><span data-stu-id="4196a-163">If the service verifies that the signature is valid, then the request is authenticated.</span></span> <span data-ttu-id="4196a-164">W przeciwnym razie żądanie zostało odrzucone z kodem błędu 403 (Dostęp zabroniony).</span><span class="sxs-lookup"><span data-stu-id="4196a-164">Otherwise, the request is declined with error code 403 (Forbidden).</span></span>

## <a name="shared-access-signature-parameters"></a><span data-ttu-id="4196a-165">Parametry sygnatury dostępu współdzielonego</span><span class="sxs-lookup"><span data-stu-id="4196a-165">Shared access signature parameters</span></span>
<span data-ttu-id="4196a-166">Sygnatura dostępu Współdzielonego konta i tokeny sygnatury dostępu Współdzielonego usługi obejmują niektóre typowe parametry oraz kilka parametrów również wziąć, czy są różne.</span><span class="sxs-lookup"><span data-stu-id="4196a-166">The account SAS and service SAS tokens include some common parameters, and also take a few parameters that that are different.</span></span>

### <a name="parameters-common-to-account-sas-and-service-sas-tokens"></a><span data-ttu-id="4196a-167">Parametry wspólne dla konta sygnatury dostępu Współdzielonego i tokeny sygnatury dostępu Współdzielonego usługi</span><span class="sxs-lookup"><span data-stu-id="4196a-167">Parameters common to account SAS and service SAS tokens</span></span>
* <span data-ttu-id="4196a-168">**Wersja interfejsu API** opcjonalny parametr określający wersję usługi magazynu do użycia, można wykonać żądania.</span><span class="sxs-lookup"><span data-stu-id="4196a-168">**Api version** An optional parameter that specifies the storage service version to use to execute the request.</span></span>
* <span data-ttu-id="4196a-169">**Wersja usługi** wymaganym parametrem, który określa wersję usługi magazynu do użycia uwierzytelniania żądania.</span><span class="sxs-lookup"><span data-stu-id="4196a-169">**Service version** A required parameter that specifies the storage service version to use to authenticate the request.</span></span>
* <span data-ttu-id="4196a-170">**Godzina rozpoczęcia.**</span><span class="sxs-lookup"><span data-stu-id="4196a-170">**Start time.**</span></span> <span data-ttu-id="4196a-171">Jest to czas, w którym zaczyna obowiązywać sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-171">This is the time at which the SAS becomes valid.</span></span> <span data-ttu-id="4196a-172">Czas rozpoczęcia sygnatury dostępu współdzielonego jest opcjonalne.</span><span class="sxs-lookup"><span data-stu-id="4196a-172">The start time for a shared access signature is optional.</span></span> <span data-ttu-id="4196a-173">W przypadku pominięcia czas rozpoczęcia sygnatury dostępu Współdzielonego obowiązuje natychmiast.</span><span class="sxs-lookup"><span data-stu-id="4196a-173">If a start time is omitted, the SAS is effective immediately.</span></span> <span data-ttu-id="4196a-174">Czas rozpoczęcia musi być wyrażony w formacie UTC (Coordinated Universal Time) z specjalne oznaczeniem UTC ("Z"), na przykład `1994-11-05T13:15:30Z`.</span><span class="sxs-lookup"><span data-stu-id="4196a-174">The start time must be expressed in UTC (Coordinated Universal Time), with a special UTC designator ("Z"), for example `1994-11-05T13:15:30Z`.</span></span>
* <span data-ttu-id="4196a-175">**Czas wygaśnięcia.**</span><span class="sxs-lookup"><span data-stu-id="4196a-175">**Expiry time.**</span></span> <span data-ttu-id="4196a-176">Jest to czas, po którym skojarzenia zabezpieczeń nie jest już prawidłowy.</span><span class="sxs-lookup"><span data-stu-id="4196a-176">This is the time after which the SAS is no longer valid.</span></span> <span data-ttu-id="4196a-177">Najlepszym rozwiązaniem jest Określ czas wygaśnięcia dla sygnatury dostępu Współdzielonego lub powiązać ją z zasadami dostępu przechowywane.</span><span class="sxs-lookup"><span data-stu-id="4196a-177">Best practices recommend that you either specify an expiry time for a SAS, or associate it with a stored access policy.</span></span> <span data-ttu-id="4196a-178">Czas wygaśnięcia musi być wyrażony w formacie UTC (Coordinated Universal Time) z specjalne oznaczeniem UTC ("Z"), na przykład `1994-11-05T13:15:30Z` (Zobacz więcej poniżej).</span><span class="sxs-lookup"><span data-stu-id="4196a-178">The expiry time must be expressed in UTC (Coordinated Universal Time), with a special UTC designator ("Z"), for example `1994-11-05T13:15:30Z` (see more below).</span></span>
* <span data-ttu-id="4196a-179">**Uprawnienia.**</span><span class="sxs-lookup"><span data-stu-id="4196a-179">**Permissions.**</span></span> <span data-ttu-id="4196a-180">Uprawnienia określone na sygnatury dostępu Współdzielonego wskazują, jakie operacje klienta można wykonywać względem zasobów pamięci masowej przy użyciu sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-180">The permissions specified on the SAS indicate what operations the client can perform against the storage resource using the SAS.</span></span> <span data-ttu-id="4196a-181">Uprawnienia dostępne są różne dla konta sygnatury dostępu Współdzielonego i sygnatury dostępu Współdzielonego usługi.</span><span class="sxs-lookup"><span data-stu-id="4196a-181">Available permissions differ for an account SAS and a service SAS.</span></span>
* <span data-ttu-id="4196a-182">**ADRES IP.**</span><span class="sxs-lookup"><span data-stu-id="4196a-182">**IP.**</span></span> <span data-ttu-id="4196a-183">Opcjonalny parametr określający adres IP lub zakres adresów IP poza platformą Azure (zobacz sekcję [stan konfiguracji sesji Routing](../../expressroute/expressroute-workflows.md#routing-session-configuration-state) dla Express Route) służąca do akceptowania żądań.</span><span class="sxs-lookup"><span data-stu-id="4196a-183">An optional parameter that specifies an IP address or a range of IP addresses outside of Azure (see the section [Routing session configuration state](../../expressroute/expressroute-workflows.md#routing-session-configuration-state) for Express Route) from which to accept requests.</span></span>
* <span data-ttu-id="4196a-184">**Protokół.**</span><span class="sxs-lookup"><span data-stu-id="4196a-184">**Protocol.**</span></span> <span data-ttu-id="4196a-185">Opcjonalny parametr, który określa protokół, który jest dozwolony dla żądania.</span><span class="sxs-lookup"><span data-stu-id="4196a-185">An optional parameter that specifies the protocol permitted for a request.</span></span> <span data-ttu-id="4196a-186">Możliwe wartości to zarówno protokołu HTTPS i HTTP (`https,http`), czyli tylko wartości domyślnej lub HTTPS (`https`).</span><span class="sxs-lookup"><span data-stu-id="4196a-186">Possible values are both HTTPS and HTTP (`https,http`), which is the default value, or HTTPS only (`https`).</span></span> <span data-ttu-id="4196a-187">Należy pamiętać, że HTTP tylko nie jest dozwoloną wartość.</span><span class="sxs-lookup"><span data-stu-id="4196a-187">Note that HTTP only is not a permitted value.</span></span>
* <span data-ttu-id="4196a-188">**Podpis.**</span><span class="sxs-lookup"><span data-stu-id="4196a-188">**Signature.**</span></span> <span data-ttu-id="4196a-189">Podpis jest tworzony z innych parametrów, określony jako część tokenu i ponownie szyfrowane.</span><span class="sxs-lookup"><span data-stu-id="4196a-189">The signature is constructed from the other parameters specified as part token and then encrypted.</span></span> <span data-ttu-id="4196a-190">Jest on używany do uwierzytelniania sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-190">It's used to authenticate the SAS.</span></span>

### <a name="parameters-for-a-service-sas-token"></a><span data-ttu-id="4196a-191">Parametry dla tokenu sygnatury dostępu Współdzielonego usługi</span><span class="sxs-lookup"><span data-stu-id="4196a-191">Parameters for a service SAS token</span></span>
* <span data-ttu-id="4196a-192">**Zasobów pamięci masowej.**</span><span class="sxs-lookup"><span data-stu-id="4196a-192">**Storage resource.**</span></span> <span data-ttu-id="4196a-193">Zasobów magazynu, dla których możesz delegować dostęp za pomocą usługi SAS obejmują:</span><span class="sxs-lookup"><span data-stu-id="4196a-193">Storage resources for which you can delegate access with a service SAS include:</span></span>
  * <span data-ttu-id="4196a-194">Kontenery i obiekty BLOB</span><span class="sxs-lookup"><span data-stu-id="4196a-194">Containers and blobs</span></span>
  * <span data-ttu-id="4196a-195">Udziały plików i plików</span><span class="sxs-lookup"><span data-stu-id="4196a-195">File shares and files</span></span>
  * <span data-ttu-id="4196a-196">Kolejki</span><span class="sxs-lookup"><span data-stu-id="4196a-196">Queues</span></span>
  * <span data-ttu-id="4196a-197">Tabele i zakresy jednostek do tabeli.</span><span class="sxs-lookup"><span data-stu-id="4196a-197">Tables and ranges of table entities.</span></span>

### <a name="parameters-for-an-account-sas-token"></a><span data-ttu-id="4196a-198">Parametry dla tokenu sygnatury dostępu Współdzielonego konta</span><span class="sxs-lookup"><span data-stu-id="4196a-198">Parameters for an account SAS token</span></span>
* <span data-ttu-id="4196a-199">**Usługi lub usług.**</span><span class="sxs-lookup"><span data-stu-id="4196a-199">**Service or services.**</span></span> <span data-ttu-id="4196a-200">Sygnatura dostępu Współdzielonego konta można delegować dostęp do co najmniej jednej usługi magazynu.</span><span class="sxs-lookup"><span data-stu-id="4196a-200">An account SAS can delegate access to one or more of the storage services.</span></span> <span data-ttu-id="4196a-201">Na przykład można utworzyć konto sygnatury dostępu Współdzielonego czy delegatów dostęp do usług obiektów Blob i plików.</span><span class="sxs-lookup"><span data-stu-id="4196a-201">For example, you can create an account SAS that delegates access to the Blob and File service.</span></span> <span data-ttu-id="4196a-202">Lub można utworzyć sygnatury dostępu Współdzielonego, że delegatów dostęp do wszystkich czterech usług (obiektu Blob, kolejki, tabel i plików).</span><span class="sxs-lookup"><span data-stu-id="4196a-202">Or you can create a SAS that delegates access to all four services (Blob, Queue, Table, and File).</span></span>
* <span data-ttu-id="4196a-203">**Typy zasobów magazynu.**</span><span class="sxs-lookup"><span data-stu-id="4196a-203">**Storage resource types.**</span></span> <span data-ttu-id="4196a-204">Konto sygnatury dostępu Współdzielonego ma zastosowanie do co najmniej jednej klasy zasobów magazynu, a nie konkretnego zasobu.</span><span class="sxs-lookup"><span data-stu-id="4196a-204">An account SAS applies to one or more classes of storage resources, rather than a specific resource.</span></span> <span data-ttu-id="4196a-205">Można utworzyć sygnatury dostępu Współdzielonego, aby delegować dostęp do konta:</span><span class="sxs-lookup"><span data-stu-id="4196a-205">You can create an account SAS to delegate access to:</span></span>
  * <span data-ttu-id="4196a-206">API poziomu usług jest wywoływana względem zasobów konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="4196a-206">Service-level APIs, which are called against the storage account resource.</span></span> <span data-ttu-id="4196a-207">Przykłady obejmują **pobierania/ustawiania właściwości usługi**, **uzyskać statystyki usługi**, i **listy kontenerów/kolejki/tabel/udziałów**.</span><span class="sxs-lookup"><span data-stu-id="4196a-207">Examples include **Get/Set Service Properties**, **Get Service Stats**, and **List Containers/Queues/Tables/Shares**.</span></span>
  * <span data-ttu-id="4196a-208">Interfejsy API kontenera niskiego poziomu, nazywane względem obiektów kontenera dla poszczególnych usług: obiektów blob w kontenerach, kolejek, tabel i udziałów plików.</span><span class="sxs-lookup"><span data-stu-id="4196a-208">Container-level APIs, which are called against the container objects for each service: blob containers, queues, tables, and file shares.</span></span> <span data-ttu-id="4196a-209">Przykłady obejmują **tworzenia/usuwania kontenera**, **tworzenia/usuwania kolejki**, **tworzenia/usuwania tabeli**, **tworzenia/usuwania udziału**i  **Wyświetl listę obiektów blob/pliki i katalogi**.</span><span class="sxs-lookup"><span data-stu-id="4196a-209">Examples include **Create/Delete Container**, **Create/Delete Queue**, **Create/Delete Table**, **Create/Delete Share**, and **List Blobs/Files and Directories**.</span></span>
  * <span data-ttu-id="4196a-210">API na poziomie obiektu jest wywoływana względem obiektów blob, wiadomości w kolejce jednostek tabeli i plików.</span><span class="sxs-lookup"><span data-stu-id="4196a-210">Object-level APIs, which are called against blobs, queue messages, table entities, and files.</span></span> <span data-ttu-id="4196a-211">Na przykład **umieszczanie obiektu Blob**, **jednostki zapytania**, **pobrać wiadomości**, i **Utwórz plik**.</span><span class="sxs-lookup"><span data-stu-id="4196a-211">For example, **Put Blob**, **Query Entity**, **Get Messages**, and **Create File**.</span></span>

## <a name="examples-of-sas-uris"></a><span data-ttu-id="4196a-212">Przykłady identyfikatorów URI sygnatury dostępu Współdzielonego</span><span class="sxs-lookup"><span data-stu-id="4196a-212">Examples of SAS URIs</span></span>

### <a name="service-sas-uri-example"></a><span data-ttu-id="4196a-213">Przykładowy identyfikator URI sygnatury dostępu Współdzielonego usługi</span><span class="sxs-lookup"><span data-stu-id="4196a-213">Service SAS URI example</span></span>

<span data-ttu-id="4196a-214">Oto przykład usługi identyfikatora URI połączenia SAS, która zapewnia uprawnienia odczytu i zapisu do obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="4196a-214">Here is an example of a service SAS URI that provides read and write permissions to a blob.</span></span> <span data-ttu-id="4196a-215">Tabela zawiera podział według każdej części identyfikatora URI, aby zrozumieć, jak przyczynia się do sygnatury dostępu Współdzielonego:</span><span class="sxs-lookup"><span data-stu-id="4196a-215">The table breaks down each part of the URI to understand how it contributes to the SAS:</span></span>

```
https://myaccount.blob.core.windows.net/sascontainer/sasblob.txt?sv=2015-04-05&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D
```

| <span data-ttu-id="4196a-216">Nazwa</span><span class="sxs-lookup"><span data-stu-id="4196a-216">Name</span></span> | <span data-ttu-id="4196a-217">Część SAS</span><span class="sxs-lookup"><span data-stu-id="4196a-217">SAS portion</span></span> | <span data-ttu-id="4196a-218">Opis</span><span class="sxs-lookup"><span data-stu-id="4196a-218">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4196a-219">Identyfikator URI obiektu blob</span><span class="sxs-lookup"><span data-stu-id="4196a-219">Blob URI</span></span> |`https://myaccount.blob.core.windows.net/sascontainer/sasblob.txt` |<span data-ttu-id="4196a-220">Adres obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="4196a-220">The address of the blob.</span></span> <span data-ttu-id="4196a-221">Należy pamiętać, że przy użyciu protokołu HTTPS jest zdecydowanie zalecane.</span><span class="sxs-lookup"><span data-stu-id="4196a-221">Note that using HTTPS is highly recommended.</span></span> |
| <span data-ttu-id="4196a-222">Wersja usługi magazynu</span><span class="sxs-lookup"><span data-stu-id="4196a-222">Storage services version</span></span> |`sv=2015-04-05` |<span data-ttu-id="4196a-223">Magazyn usługi wersji 2012-02-12, a później, ten parametr wskazuje wersję do użycia.</span><span class="sxs-lookup"><span data-stu-id="4196a-223">For storage services version 2012-02-12 and later, this parameter indicates the version to use.</span></span> |
| <span data-ttu-id="4196a-224">Godzina rozpoczęcia</span><span class="sxs-lookup"><span data-stu-id="4196a-224">Start time</span></span> |`st=2015-04-29T22%3A18%3A26Z` |<span data-ttu-id="4196a-225">Określona w formacie UTC.</span><span class="sxs-lookup"><span data-stu-id="4196a-225">Specified in UTC time.</span></span> <span data-ttu-id="4196a-226">Jeśli chcesz, aby sygnatury dostępu Współdzielonego ma obowiązywać natychmiast, Pomiń czas rozpoczęcia.</span><span class="sxs-lookup"><span data-stu-id="4196a-226">If you want the SAS to be valid immediately, omit the start time.</span></span> |
| <span data-ttu-id="4196a-227">Czas wygaśnięcia</span><span class="sxs-lookup"><span data-stu-id="4196a-227">Expiry time</span></span> |`se=2015-04-30T02%3A23%3A26Z` |<span data-ttu-id="4196a-228">Określona w formacie UTC.</span><span class="sxs-lookup"><span data-stu-id="4196a-228">Specified in UTC time.</span></span> |
| <span data-ttu-id="4196a-229">Zasób</span><span class="sxs-lookup"><span data-stu-id="4196a-229">Resource</span></span> |`sr=b` |<span data-ttu-id="4196a-230">Zasób jest obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="4196a-230">The resource is a blob.</span></span> |
| <span data-ttu-id="4196a-231">Uprawnienia</span><span class="sxs-lookup"><span data-stu-id="4196a-231">Permissions</span></span> |`sp=rw` |<span data-ttu-id="4196a-232">Uprawnienia przyznane przez sygnatury dostępu Współdzielonego obejmują Read (r) i zapisu (w).</span><span class="sxs-lookup"><span data-stu-id="4196a-232">The permissions granted by the SAS include Read (r) and Write (w).</span></span> |
| <span data-ttu-id="4196a-233">Zakres adresów IP</span><span class="sxs-lookup"><span data-stu-id="4196a-233">IP range</span></span> |`sip=168.1.5.60-168.1.5.70` |<span data-ttu-id="4196a-234">Zakres adresów IP, z których będą akceptowane żądania.</span><span class="sxs-lookup"><span data-stu-id="4196a-234">The range of IP addresses from which a request will be accepted.</span></span> |
| <span data-ttu-id="4196a-235">Protokół</span><span class="sxs-lookup"><span data-stu-id="4196a-235">Protocol</span></span> |`spr=https` |<span data-ttu-id="4196a-236">Dozwolone są tylko żądania przy użyciu protokołu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="4196a-236">Only requests using HTTPS are permitted.</span></span> |
| <span data-ttu-id="4196a-237">Podpis</span><span class="sxs-lookup"><span data-stu-id="4196a-237">Signature</span></span> |`sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D` |<span data-ttu-id="4196a-238">Używany do uwierzytelniania dostępu do obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="4196a-238">Used to authenticate access to the blob.</span></span> <span data-ttu-id="4196a-239">Podpis jest HMAC obliczona ciąg do logowania i klucz przy użyciu algorytm SHA256, a następnie kodowany w formacie Base64.</span><span class="sxs-lookup"><span data-stu-id="4196a-239">The signature is an HMAC computed over a string-to-sign and key using the SHA256 algorithm, and then encoded using Base64 encoding.</span></span> |

### <a name="account-sas-uri-example"></a><span data-ttu-id="4196a-240">Przykład identyfikatora URI połączenia SAS konta</span><span class="sxs-lookup"><span data-stu-id="4196a-240">Account SAS URI example</span></span>

<span data-ttu-id="4196a-241">Oto przykład konta sygnatury dostępu Współdzielonego, który używa tej samej typowych parametrów w tokenie.</span><span class="sxs-lookup"><span data-stu-id="4196a-241">Here is an example of an account SAS that uses the same common parameters on the token.</span></span> <span data-ttu-id="4196a-242">Ponieważ te parametry są opisane powyżej, ich nie zostały opisane w tym miejscu.</span><span class="sxs-lookup"><span data-stu-id="4196a-242">Since these parameters are described above, they are not described here.</span></span> <span data-ttu-id="4196a-243">Tylko parametry, które są specyficzne dla konta, które SAS są opisane w poniższej tabeli.</span><span class="sxs-lookup"><span data-stu-id="4196a-243">Only the parameters that are specific to account SAS are described in the table below.</span></span>

```
https://myaccount.blob.core.windows.net/?restype=service&comp=properties&sv=2015-04-05&ss=bf&srt=s&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=F%6GRVAZ5Cdj2Pw4tgU7IlSTkWgn7bUkkAg8P6HESXwmf%4B
```

| <span data-ttu-id="4196a-244">Nazwa</span><span class="sxs-lookup"><span data-stu-id="4196a-244">Name</span></span> | <span data-ttu-id="4196a-245">Część SAS</span><span class="sxs-lookup"><span data-stu-id="4196a-245">SAS portion</span></span> | <span data-ttu-id="4196a-246">Opis</span><span class="sxs-lookup"><span data-stu-id="4196a-246">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4196a-247">Identyfikator URI zasobu</span><span class="sxs-lookup"><span data-stu-id="4196a-247">Resource URI</span></span> |`https://myaccount.blob.core.windows.net/?restype=service&comp=properties` |<span data-ttu-id="4196a-248">Punkt końcowy usługi Blob, wraz z parametrami pobierania właściwości usługi (jeśli jest wywoływana z GET) lub właściwości usługi (jeśli jest wywoływana z ZESTAWEM).</span><span class="sxs-lookup"><span data-stu-id="4196a-248">The Blob service endpoint, with parameters for getting service properties (when called with GET) or setting service properties (when called with SET).</span></span> |
| <span data-ttu-id="4196a-249">Usługi</span><span class="sxs-lookup"><span data-stu-id="4196a-249">Services</span></span> |`ss=bf` |<span data-ttu-id="4196a-250">Sygnatury dostępu Współdzielonego ma zastosowanie do usług obiektów Blob i plików</span><span class="sxs-lookup"><span data-stu-id="4196a-250">The SAS applies to the Blob and File services</span></span> |
| <span data-ttu-id="4196a-251">Typy zasobów</span><span class="sxs-lookup"><span data-stu-id="4196a-251">Resource types</span></span> |`srt=s` |<span data-ttu-id="4196a-252">Sygnatury dostępu Współdzielonego ma zastosowanie do operacji na poziomie usługi.</span><span class="sxs-lookup"><span data-stu-id="4196a-252">The SAS applies to service-level operations.</span></span> |
| <span data-ttu-id="4196a-253">Uprawnienia</span><span class="sxs-lookup"><span data-stu-id="4196a-253">Permissions</span></span> |`sp=rw` |<span data-ttu-id="4196a-254">Uprawnienia udzielić dostępu do odczytu i zapisu.</span><span class="sxs-lookup"><span data-stu-id="4196a-254">The permissions grant access to read and write operations.</span></span> |

<span data-ttu-id="4196a-255">Biorąc pod uwagę, że uprawnienia są ograniczone do poziomu usługi, są dostępne operacje przy użyciu tego SAS **pobrać właściwości usługi Blob** (odczyt) i **ustawić właściwości usługi Blob** (zapis).</span><span class="sxs-lookup"><span data-stu-id="4196a-255">Given that permissions are restricted to the service level, accessible operations with this SAS are **Get Blob Service Properties** (read) and **Set Blob Service Properties** (write).</span></span> <span data-ttu-id="4196a-256">Jednak z zasobem inny identyfikator URI tego samego tokenu sygnatury dostępu Współdzielonego można również delegować dostęp do **uzyskać statystyki usługi Blob** (odczyt).</span><span class="sxs-lookup"><span data-stu-id="4196a-256">However, with a different resource URI, the same SAS token could also be used to delegate access to **Get Blob Service Stats** (read).</span></span>

## <a name="controlling-a-sas-with-a-stored-access-policy"></a><span data-ttu-id="4196a-257">Kontrolowanie SAS z zasadami dostępu przechowywane</span><span class="sxs-lookup"><span data-stu-id="4196a-257">Controlling a SAS with a stored access policy</span></span>
<span data-ttu-id="4196a-258">Sygnatury dostępu współdzielonego, można wykonać jedną z dwóch formach:</span><span class="sxs-lookup"><span data-stu-id="4196a-258">A shared access signature can take one of two forms:</span></span>

* <span data-ttu-id="4196a-259">**Ad hoc sygnatury dostępu Współdzielonego:** podczas tworzenia ad hoc SAS, godzina rozpoczęcia, czas wygaśnięcia i uprawnienia dla sygnatury dostępu Współdzielonego są wszystkie określony w identyfikatorze URI SAS (lub domniemanych, w przypadku, gdy zostanie pominięty czas rozpoczęcia).</span><span class="sxs-lookup"><span data-stu-id="4196a-259">**Ad hoc SAS:** When you create an ad hoc SAS, the start time, expiry time, and permissions for the SAS are all specified in the SAS URI (or implied, in the case where start time is omitted).</span></span> <span data-ttu-id="4196a-260">Ten typ sygnatury dostępu Współdzielonego można utworzyć jako konto SAS lub sygnatury dostępu Współdzielonego usługi.</span><span class="sxs-lookup"><span data-stu-id="4196a-260">This type of SAS can be created as an account SAS or a service SAS.</span></span>
* <span data-ttu-id="4196a-261">**Sygnatury dostępu Współdzielonego z zasad dostępu przechowywanej:** zasady dostępu do przechowywanych jest zdefiniowany w kontenerze zasobów--kontenera obiektów blob, tabeli, kolejki, lub udziału--plików i może służyć do zarządzania ograniczeniami dla jednego lub więcej sygnatur dostępu współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-261">**SAS with stored access policy:** A stored access policy is defined on a resource container--a blob container, table, queue, or file share--and can be used to manage constraints for one or more shared access signatures.</span></span> <span data-ttu-id="4196a-262">Po skojarzeniu sygnatury dostępu Współdzielonego za pomocą zasad dostępu przechowywane, sygnatury dostępu Współdzielonego dziedziczy ograniczenia — czas rozpoczęcia, czas wygaśnięcia i uprawnienia — zdefiniowane zasady dostępu przechowywane.</span><span class="sxs-lookup"><span data-stu-id="4196a-262">When you associate a SAS with a stored access policy, the SAS inherits the constraints--the start time, expiry time, and permissions--defined for the stored access policy.</span></span>

> [!NOTE]
> <span data-ttu-id="4196a-263">Obecnie sygnatura dostępu Współdzielonego konta musi być SAS ad hoc.</span><span class="sxs-lookup"><span data-stu-id="4196a-263">Currently, an account SAS must be an ad hoc SAS.</span></span> <span data-ttu-id="4196a-264">Przechowywane dostępu, zasady nie są jeszcze obsługiwane dla konta sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-264">Stored access policies are not yet supported for account SAS.</span></span>

<span data-ttu-id="4196a-265">Różnica między dwoma formularzami jest ważne dla klucza scenariusz: odwołania.</span><span class="sxs-lookup"><span data-stu-id="4196a-265">The difference between the two forms is important for one key scenario: revocation.</span></span> <span data-ttu-id="4196a-266">Ponieważ identyfikator URI sygnatury dostępu Współdzielonego jest adres URL, każdy użytkownik, który uzyskuje sygnatury dostępu Współdzielonego może być używany, niezależnie od tego, który został pierwotnie utworzony.</span><span class="sxs-lookup"><span data-stu-id="4196a-266">Because a SAS URI is a URL, anyone that obtains the SAS can use it, regardless of who originally created it.</span></span> <span data-ttu-id="4196a-267">Sygnatury dostępu Współdzielonego zostanie opublikowana publicznie, może służyć wszystkim osobom na świecie.</span><span class="sxs-lookup"><span data-stu-id="4196a-267">If a SAS is published publicly, it can be used by anyone in the world.</span></span> <span data-ttu-id="4196a-268">Sygnatury dostępu Współdzielonego udziela dostępu do zasobów innym osobom posiadającym go, dopóki jedna z następujących czterech zdarzeń sytuacji:</span><span class="sxs-lookup"><span data-stu-id="4196a-268">A SAS grants access to resources to anyone possessing it until one of four things happens:</span></span>

1. <span data-ttu-id="4196a-269">Czas wygaśnięcia określony na sygnatury dostępu Współdzielonego zostanie osiągnięty.</span><span class="sxs-lookup"><span data-stu-id="4196a-269">The expiry time specified on the SAS is reached.</span></span>
2. <span data-ttu-id="4196a-270">Czas wygaśnięcia określone w zasadach dostępu składowana odwołuje się sygnatury dostępu Współdzielonego osiągnięciu (jeśli istnieje odwołanie do zasad dostępu do przechowywanych i określa czas wygaśnięcia).</span><span class="sxs-lookup"><span data-stu-id="4196a-270">The expiry time specified on the stored access policy referenced by the SAS is reached (if a stored access policy is referenced, and if it specifies an expiry time).</span></span> <span data-ttu-id="4196a-271">Może to występować, ponieważ interwał upływa lub zmodyfikowano zasad dostępu przechowywane z upływem czasu w przeszłości, który jest jednym ze sposobów odwołać dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-271">This can occur either because the interval elapses, or because you've modified the stored access policy with an expiry time in the past, which is one way to revoke the SAS.</span></span>
3. <span data-ttu-id="4196a-272">Zasady dostępu składowana odwołuje się sygnatury dostępu Współdzielonego jest usunięte, sposób, aby można było odwołać dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-272">The stored access policy referenced by the SAS is deleted, which is another way to revoke the SAS.</span></span> <span data-ttu-id="4196a-273">Należy pamiętać, że możesz ponownie utworzyć zasady dostępu do przechowywanych o dokładnie takiej samej nazwie, wszystkie istniejące tokeny sygnatury dostępu Współdzielonego ponownie będzie nieprawidłowa według uprawnienia skojarzone z tym zasadom dostępu przechowywanych (przy założeniu, że czas wygaśnięcia na sygnatury dostępu Współdzielonego nie przeszło).</span><span class="sxs-lookup"><span data-stu-id="4196a-273">Note that if you recreate the stored access policy with exactly the same name, all existing SAS tokens will again be valid according to the permissions associated with that stored access policy (assuming that the expiry time on the SAS has not passed).</span></span> <span data-ttu-id="4196a-274">Mają zamiar odwołać dostępu Współdzielonego, należy użyć innej nazwy, jeśli należy ponownie utworzyć zasady dostępu z upływem czasu w przyszłości.</span><span class="sxs-lookup"><span data-stu-id="4196a-274">If you are intending to revoke the SAS, be sure to use a different name if you recreate the access policy with an expiry time in the future.</span></span>
4. <span data-ttu-id="4196a-275">Ponownego wygenerowania klucza konta, który został użyty do utworzenia sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-275">The account key that was used to create the SAS is regenerated.</span></span> <span data-ttu-id="4196a-276">Trwa ponowne generowanie klucza konta spowoduje, że wszystkie składniki aplikacji przy użyciu tego klucza do uwierzytelnione, dopóki nie jest zaktualizowane do używania konta nowo wygenerowano ponownie klucz lub klucz prawidłowego konta.</span><span class="sxs-lookup"><span data-stu-id="4196a-276">Regenerating an account key will cause all application components using that key to fail to authenticate until they're updated to use either the other valid account key or the newly regenerated account key.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4196a-277">Identyfikator URI sygnatury dostępu współdzielonego jest skojarzony z kluczem konta używane do tworzenia podpisu i skojarzonych przechowywane zasad dostępu (jeśli istnieje).</span><span class="sxs-lookup"><span data-stu-id="4196a-277">A shared access signature URI is associated with the account key used to create the signature, and the associated stored access policy (if any).</span></span> <span data-ttu-id="4196a-278">Jeśli określono żadnych zasad dostępu przechowywane, jedynym sposobem, aby odwołać sygnatury dostępu współdzielonego jest zmienić klucz konta.</span><span class="sxs-lookup"><span data-stu-id="4196a-278">If no stored access policy is specified, the only way to revoke a shared access signature is to change the account key.</span></span>

## <a name="authenticating-from-a-client-application-with-a-sas"></a><span data-ttu-id="4196a-279">Uwierzytelniania z aplikacji klienta z sygnatury dostępu Współdzielonego</span><span class="sxs-lookup"><span data-stu-id="4196a-279">Authenticating from a client application with a SAS</span></span>
<span data-ttu-id="4196a-280">Klient, który znajduje się w posiadaniu sygnatury dostępu Współdzielonego służy sygnatury dostępu Współdzielonego do uwierzytelniania żądań do konta magazynu, dla którego nie posiadają klucze konta.</span><span class="sxs-lookup"><span data-stu-id="4196a-280">A client who is in possession of a SAS can use the SAS to authenticate a request against a storage account for which they do not possess the account keys.</span></span> <span data-ttu-id="4196a-281">Sygnatury dostępu Współdzielonego może być uwzględniona w parametrach połączenia lub używana bezpośrednio z odpowiedniego konstruktora lub metody.</span><span class="sxs-lookup"><span data-stu-id="4196a-281">A SAS can be included in a connection string, or used directly from the appropriate constructor or method.</span></span>

### <a name="using-a-sas-in-a-connection-string"></a><span data-ttu-id="4196a-282">W parametrach połączenia przy użyciu sygnatury dostępu Współdzielonego</span><span class="sxs-lookup"><span data-stu-id="4196a-282">Using a SAS in a connection string</span></span>
[!INCLUDE [storage-use-sas-in-connection-string-include](../../../includes/storage-use-sas-in-connection-string-include.md)]

### <a name="using-a-sas-in-a-constructor-or-method"></a><span data-ttu-id="4196a-283">Przy użyciu sygnatury dostępu Współdzielonego w konstruktorze lub — metoda</span><span class="sxs-lookup"><span data-stu-id="4196a-283">Using a SAS in a constructor or method</span></span>
<span data-ttu-id="4196a-284">Kilka konstruktorów biblioteki klienta magazynu Azure i przeciążenia metody oferują parametrem sygnatury dostępu Współdzielonego, aby mógł uwierzytelnić żądania do usługi z sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-284">Several Azure Storage client library constructors and method overloads offer a SAS parameter, so that you can authenticate a request to the service with a SAS.</span></span>

<span data-ttu-id="4196a-285">Na przykład tutaj identyfikator URI sygnatury dostępu Współdzielonego służy do tworzenia odwołanie do blokowego obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="4196a-285">For example, here a SAS URI is used to create a reference to a block blob.</span></span> <span data-ttu-id="4196a-286">Sygnatury dostępu Współdzielonego zapewnia poświadczenia tylko wymagane dla żądania.</span><span class="sxs-lookup"><span data-stu-id="4196a-286">The SAS provides the only credentials needed for the request.</span></span> <span data-ttu-id="4196a-287">Odwołanie do blokowych obiektów blob są używane do operacji zapisu:</span><span class="sxs-lookup"><span data-stu-id="4196a-287">The block blob reference is then used for a write operation:</span></span>

```csharp
string sasUri = "https://storagesample.blob.core.windows.net/sample-container/" +
    "sampleBlob.txt?sv=2015-07-08&sr=b&sig=39Up9JzHkxhUIhFEjEH9594DJxe7w6cIRCg0V6lCGSo%3D" +
    "&se=2016-10-18T21%3A51%3A37Z&sp=rcw";

CloudBlockBlob blob = new CloudBlockBlob(new Uri(sasUri));

// Create operation: Upload a blob with the specified name to the container.
// If the blob does not exist, it will be created. If it does exist, it will be overwritten.
try
{
    MemoryStream msWrite = new MemoryStream(Encoding.UTF8.GetBytes(blobContent));
    msWrite.Position = 0;
    using (msWrite)
    {
        await blob.UploadFromStreamAsync(msWrite);
    }

    Console.WriteLine("Create operation succeeded for SAS {0}", sasUri);
    Console.WriteLine();
}
catch (StorageException e)
{
    if (e.RequestInformation.HttpStatusCode == 403)
    {
        Console.WriteLine("Create operation failed for SAS {0}", sasUri);
        Console.WriteLine("Additional error information: " + e.Message);
        Console.WriteLine();
    }
    else
    {
        Console.WriteLine(e.Message);
        Console.ReadLine();
        throw;
    }
}

```

## <a name="best-practices-when-using-sas"></a><span data-ttu-id="4196a-288">Najlepsze rozwiązania przy użyciu sygnatury dostępu Współdzielonego</span><span class="sxs-lookup"><span data-stu-id="4196a-288">Best practices when using SAS</span></span>
<span data-ttu-id="4196a-289">Korzystając z sygnatury dostępu współdzielonego w aplikacjach, należy znać dwa potencjalne zagrożenia:</span><span class="sxs-lookup"><span data-stu-id="4196a-289">When you use shared access signatures in your applications, you need to be aware of two potential risks:</span></span>

* <span data-ttu-id="4196a-290">Przeciek sygnatury dostępu Współdzielonego może służyć każdego, kto uzyskuje, które potencjalnie może naruszyć bezpieczeństwo Twojego konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="4196a-290">If a SAS is leaked, it can be used by anyone who obtains it, which can potentially compromise your storage account.</span></span>
* <span data-ttu-id="4196a-291">Jeśli podano sygnatury dostępu Współdzielonego wygasa aplikacja kliencka aplikacji nie może pobrać nowe SAS z usługi, a następnie mogą napotykać funkcjonalności aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4196a-291">If a SAS provided to a client application expires and the application is unable to retrieve a new SAS from your service, then the application's functionality may be hindered.</span></span>

<span data-ttu-id="4196a-292">Poniższe zalecenia dotyczące używania sygnatur dostępu współdzielonego mogą pomóc ograniczyć te zagrożenia:</span><span class="sxs-lookup"><span data-stu-id="4196a-292">The following recommendations for using shared access signatures can help mitigate these risks:</span></span>

1. <span data-ttu-id="4196a-293">**Zawsze używać protokołu HTTPS** do tworzenia i rozpowszechniania sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-293">**Always use HTTPS** to create or distribute a SAS.</span></span> <span data-ttu-id="4196a-294">Jeśli sygnatury dostępu Współdzielonego jest przekazywane za pośrednictwem protokołu HTTP i przechwycone, osoba przeprowadzająca atak typu man-in--middle jest możliwy odczyt sygnatury dostępu Współdzielonego i użyj go tak samo, jak wybranego użytkownika może mieć potencjalnie naruszania danych poufnych lub zezwala na uszkodzenie danych przez złośliwego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="4196a-294">If a SAS is passed over HTTP and intercepted, an attacker performing a man-in-the-middle attack is able to read the SAS and then use it just as the intended user could have, potentially compromising sensitive data or allowing for data corruption by the malicious user.</span></span>
2. <span data-ttu-id="4196a-295">**Odwołanie przechowywane zasady dostępu, jeśli jest to możliwe.**</span><span class="sxs-lookup"><span data-stu-id="4196a-295">**Reference stored access policies where possible.**</span></span> <span data-ttu-id="4196a-296">Zasady dostępu do przechowywanych zapewniają opcję, aby odwołać uprawnienia bez konieczności ponownie wygenerować kluczy konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="4196a-296">Stored access policies give you the option to revoke permissions without having to regenerate the storage account keys.</span></span> <span data-ttu-id="4196a-297">Ustawienia okresu ważności na te bardzo daleko w przyszłości (lub nieskończone) i upewnij się, że są regularnie aktualizowane, aby przenieść go dalej w przyszłości.</span><span class="sxs-lookup"><span data-stu-id="4196a-297">Set the expiration on these very far in the future (or infinite) and make sure it's regularly updated to move it farther into the future.</span></span>
3. <span data-ttu-id="4196a-298">**Użyj najbliższej przyszłości czas wygaśnięcia na ad hoc SAS.**</span><span class="sxs-lookup"><span data-stu-id="4196a-298">**Use near-term expiration times on an ad hoc SAS.**</span></span> <span data-ttu-id="4196a-299">W ten sposób nawet w przypadku złamania zabezpieczeń sygnatury dostępu Współdzielonego, jest prawidłowa tylko dla przez krótki czas.</span><span class="sxs-lookup"><span data-stu-id="4196a-299">In this way, even if a SAS is compromised, it's valid only for a short time.</span></span> <span data-ttu-id="4196a-300">Takie rozwiązanie jest szczególnie ważne, jeśli nie może odwoływać się zasady dostępu do przechowywanych.</span><span class="sxs-lookup"><span data-stu-id="4196a-300">This practice is especially important if you cannot reference a stored access policy.</span></span> <span data-ttu-id="4196a-301">Czas wygaśnięcia najbliższej przyszłości również ograniczyć ilość danych, które mogą być zapisywane do obiektu blob ograniczając czas dostępne do przekazania do niej.</span><span class="sxs-lookup"><span data-stu-id="4196a-301">Near-term expiration times also limit the amount of data that can be written to a blob by limiting the time available to upload to it.</span></span>
4. <span data-ttu-id="4196a-302">**Mieć automatycznie odnawiaj SAS w razie potrzeby klientów.**</span><span class="sxs-lookup"><span data-stu-id="4196a-302">**Have clients automatically renew the SAS if necessary.**</span></span> <span data-ttu-id="4196a-303">Klientów należy odnawiać SAS przed wygaśnięciem, aby umożliwić czasu dla prób, jeśli usługa oferująca sygnatury dostępu Współdzielonego jest niedostępny.</span><span class="sxs-lookup"><span data-stu-id="4196a-303">Clients should renew the SAS well before the expiration, in order to allow time for retries if the service providing the SAS is unavailable.</span></span> <span data-ttu-id="4196a-304">Jeśli Twoje SAS jest przeznaczona do użycia dla niewielkiej liczby operacji natychmiastowe i krótkim okresie, które powinny zostać wykonane w terminie wygaśnięcia, następnie może to być konieczne, gdyż sygnatury dostępu Współdzielonego nie powinno być odnawiane.</span><span class="sxs-lookup"><span data-stu-id="4196a-304">If your SAS is meant to be used for a small number of immediate, short-lived operations that are expected to be completed within the expiration period, then this may be unnecessary as the SAS is not expected to be renewed.</span></span> <span data-ttu-id="4196a-305">Jednak jeśli klient, który jest regularnie wysyłający żądania za pomocą sygnatury dostępu Współdzielonego, następnie możliwości wygaśnięcia wejścia play.</span><span class="sxs-lookup"><span data-stu-id="4196a-305">However, if you have client that is routinely making requests via SAS, then the possibility of expiration comes into play.</span></span> <span data-ttu-id="4196a-306">Kwestia klucza jest równoważyć potrzeby SAS być krótkotrwały (jak wcześniej wspomniano) z koniecznością zapewnienia, że klient żąda odnowienia wczesne wystarczającej ilości (w celu uniknięcia przerw w działaniu z powodu SAS wygasa przed pomyślnym odnawiania).</span><span class="sxs-lookup"><span data-stu-id="4196a-306">The key consideration is to balance the need for the SAS to be short-lived (as previously stated) with the need to ensure that the client is requesting renewal early enough (to avoid disruption due to the SAS expiring prior to successful renewal).</span></span>
5. <span data-ttu-id="4196a-307">**Należy zachować ostrożność, czas rozpoczęcia sygnatury dostępu Współdzielonego.**</span><span class="sxs-lookup"><span data-stu-id="4196a-307">**Be careful with SAS start time.**</span></span> <span data-ttu-id="4196a-308">Jeśli na sygnatury dostępu Współdzielonego, aby ustawić czas rozpoczęcia **teraz**, następnie z powodu zegara pochylanie (różnice w bieżącej godziny zgodnie z różnych maszyn), błędów może występować sporadycznie w pierwszym kilka minut.</span><span class="sxs-lookup"><span data-stu-id="4196a-308">If you set the start time for a SAS to **now**, then due to clock skew (differences in current time according to different machines), failures may be observed intermittently for the first few minutes.</span></span> <span data-ttu-id="4196a-309">Ogólnie rzecz biorąc ustawić czas rozpoczęcia w przeszłości co najmniej 15 minut.</span><span class="sxs-lookup"><span data-stu-id="4196a-309">In general, set the start time to be at least 15 minutes in the past.</span></span> <span data-ttu-id="4196a-310">Lub nie należy ustawiać go, który ułatwi prawidłowe natychmiast we wszystkich przypadkach.</span><span class="sxs-lookup"><span data-stu-id="4196a-310">Or, don't set it at all, which will make it valid immediately in all cases.</span></span> <span data-ttu-id="4196a-311">Ogólnie rzecz biorąc to samo dotyczy również — czas wygaśnięcia należy pamiętać, że można zaobserwować maksymalnie 15 minut zegara pochylenia w żadnym kierunku na każde żądanie.</span><span class="sxs-lookup"><span data-stu-id="4196a-311">The same generally applies to expiry time as well--remember that you may observe up to 15 minutes of clock skew in either direction on any request.</span></span> <span data-ttu-id="4196a-312">W przypadku klientów z wersją REST przed 2012-02-12 maksymalny czas trwania SAS, która nie odwołuje się do zasad dostępu do przechowywanych jest 1 godziny, a wszystkie zasady Określanie długoterminowych niż który zakończy się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="4196a-312">For clients using a REST version prior to 2012-02-12, the maximum duration for a SAS that does not reference a stored access policy is 1 hour, and any policies specifying longer term than that will fail.</span></span>
6. <span data-ttu-id="4196a-313">**Być określony z zasobem, aby można było uzyskać dostęp.**</span><span class="sxs-lookup"><span data-stu-id="4196a-313">**Be specific with the resource to be accessed.**</span></span> <span data-ttu-id="4196a-314">Najbezpieczniejszym rozwiązaniem jest zapewnienie użytkownika przy minimalnych wymaganych uprawnień.</span><span class="sxs-lookup"><span data-stu-id="4196a-314">A security best practice is to provide a user with the minimum required privileges.</span></span> <span data-ttu-id="4196a-315">Jeśli użytkownik potrzebuje tylko do odczytu w pojedynczej jednostki, następnie przyznać im dostęp do odczytu do tego pojedynczej jednostki, a nie odczytu/zapisu/usuwania dostęp do wszystkich jednostek.</span><span class="sxs-lookup"><span data-stu-id="4196a-315">If a user only needs read access to a single entity, then grant them read access to that single entity, and not read/write/delete access to all entities.</span></span> <span data-ttu-id="4196a-316">Ułatwia to również zmniejszyć szkody, jeśli sygnatury dostępu Współdzielonego zostanie naruszony, ponieważ sygnatury dostępu Współdzielonego ma mniej energii w ręce osoba atakująca.</span><span class="sxs-lookup"><span data-stu-id="4196a-316">This also helps lessen the damage if a SAS is compromised because the SAS has less power in the hands of an attacker.</span></span>
7. <span data-ttu-id="4196a-317">**Dowiedz się, że Twoje konto będą naliczane za bez użycia, w tym odbywa się za pomocą sygnatury dostępu Współdzielonego.**</span><span class="sxs-lookup"><span data-stu-id="4196a-317">**Understand that your account will be billed for any usage, including that done with SAS.**</span></span> <span data-ttu-id="4196a-318">Jeśli należy zapewnić dostęp do zapisu do obiektu blob, użytkownik może wybrać do przekazania obiektu blob 200GB.</span><span class="sxs-lookup"><span data-stu-id="4196a-318">If you provide write access to a blob, a user may choose to upload a 200GB blob.</span></span> <span data-ttu-id="4196a-319">Jeśli zostały podane je również dostęp do odczytu, mogą one jej pobranie 10 razy ponoszenia 2 TB w kosztach wyjście dla Ciebie.</span><span class="sxs-lookup"><span data-stu-id="4196a-319">If you've given them read access as well, they may choose to download it 10 times, incurring 2 TB in egress costs for you.</span></span> <span data-ttu-id="4196a-320">Podaj ponownie, ograniczone uprawnienia, aby ułatwić uniknięcie potencjalnych akcji złośliwych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="4196a-320">Again, provide limited permissions to help mitigate the potential actions of malicious users.</span></span> <span data-ttu-id="4196a-321">Użyj sygnatury dostępu Współdzielonego w krótkim okresie, aby zmniejszyć to zagrożenie (ale być mając na uwadze zegara na czas zakończenia).</span><span class="sxs-lookup"><span data-stu-id="4196a-321">Use short-lived SAS to reduce this threat (but be mindful of clock skew on the end time).</span></span>
8. <span data-ttu-id="4196a-322">**Sprawdzanie poprawności danych napisane przy użyciu sygnatury dostępu Współdzielonego.**</span><span class="sxs-lookup"><span data-stu-id="4196a-322">**Validate data written using SAS.**</span></span> <span data-ttu-id="4196a-323">Gdy aplikacja kliencka zapisuje dane do konta magazynu, należy pamiętać, że mogą być problemy z tymi danymi.</span><span class="sxs-lookup"><span data-stu-id="4196a-323">When a client application writes data to your storage account, keep in mind that there can be problems with that data.</span></span> <span data-ttu-id="4196a-324">Jeśli aplikacja wymaga czy danych można sprawdzić poprawności lub autoryzacji, zanim będzie gotowy do użycia, należy wykonać tej weryfikacji po zapisaniu danych i zanim zostanie on użyty przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="4196a-324">If your application requires that that data be validated or authorized before it is ready to use, you should perform this validation after the data is written and before it is used by your application.</span></span> <span data-ttu-id="4196a-325">Takie rozwiązanie chroni także uszkodzony lub złośliwymi danych zapisywane do swojego konta przez użytkownika, który prawidłowo nabyte sygnatury dostępu Współdzielonego lub przez użytkownika, wykorzystaniu ujawnione sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-325">This practice also protects against corrupt or malicious data being written to your account, either by a user who properly acquired the SAS, or by a user exploiting a leaked SAS.</span></span>
9. <span data-ttu-id="4196a-326">**Nie używaj sygnatury dostępu Współdzielonego.**</span><span class="sxs-lookup"><span data-stu-id="4196a-326">**Don't always use SAS.**</span></span> <span data-ttu-id="4196a-327">Czasami ryzyko związane z określoną operację względem konta magazynu przeważają korzyści wynikające z sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-327">Sometimes the risks associated with a particular operation against your storage account outweigh the benefits of SAS.</span></span> <span data-ttu-id="4196a-328">W takich operacjach utworzyć usługę warstwy środkowej, która zapisuje na koncie magazynu po wykonaniu firm reguły sprawdzania poprawności, uwierzytelnianie i inspekcji.</span><span class="sxs-lookup"><span data-stu-id="4196a-328">For such operations, create a middle-tier service that writes to your storage account after performing business rule validation, authentication, and auditing.</span></span> <span data-ttu-id="4196a-329">Ponadto czasami jest łatwiejsze do zarządzania dostępem w inny sposób.</span><span class="sxs-lookup"><span data-stu-id="4196a-329">Also, sometimes it's simpler to manage access in other ways.</span></span> <span data-ttu-id="4196a-330">Na przykład, jeśli chcesz wszystkie obiekty BLOB w kontenerze publicznie był bardziej czytelny, możesz wprowadzić kontenera publicznego, zamiast zapewnienie dostępu do wszystkich klientów sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-330">For example, if you want to make all blobs in a container publically readable, you can make the container Public, rather than providing a SAS to every client for access.</span></span>
10. <span data-ttu-id="4196a-331">**Umożliwia monitorowanie aplikacji analityka magazynu.**</span><span class="sxs-lookup"><span data-stu-id="4196a-331">**Use Storage Analytics to monitor your application.**</span></span> <span data-ttu-id="4196a-332">Rejestrowanie i metryk umożliwia obserwować żadnych kolekcji w niepowodzeń uwierzytelniania z powodu awarii w usłudze dostawcy SAS lub przypadkowego usuwania zasad dostępu przechowywane.</span><span class="sxs-lookup"><span data-stu-id="4196a-332">You can use logging and metrics to observe any spike in authentication failures due to an outage in your SAS provider service or to the inadvertent removal of a stored access policy.</span></span> <span data-ttu-id="4196a-333">Zobacz [Blog zespołu usługi Magazyn Azure](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx) Aby uzyskać dodatkowe informacje.</span><span class="sxs-lookup"><span data-stu-id="4196a-333">See the [Azure Storage Team Blog](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx) for additional information.</span></span>

## <a name="sas-examples"></a><span data-ttu-id="4196a-334">Przykłady SAS</span><span class="sxs-lookup"><span data-stu-id="4196a-334">SAS examples</span></span>
<span data-ttu-id="4196a-335">Poniżej przedstawiono kilka przykładów oba rodzaje sygnatur dostępu współdzielonego, sygnatura dostępu Współdzielonego konta i usługi.</span><span class="sxs-lookup"><span data-stu-id="4196a-335">Below are some examples of both types of shared access signatures, account SAS and service SAS.</span></span>

<span data-ttu-id="4196a-336">Aby uruchomić te przykłady C#, musisz odwołania się do następujących pakietów NuGet w projekcie:</span><span class="sxs-lookup"><span data-stu-id="4196a-336">To run these C# examples, you need to reference the following NuGet packages in your project:</span></span>

* <span data-ttu-id="4196a-337">[Biblioteka klienta usługi Azure Storage dla platformy .NET](http://www.nuget.org/packages/WindowsAzure.Storage), wersja 6.x lub nowszego (pod kątem używania konta SAS).</span><span class="sxs-lookup"><span data-stu-id="4196a-337">[Azure Storage Client Library for .NET](http://www.nuget.org/packages/WindowsAzure.Storage), version 6.x or later (to use account SAS).</span></span>
* [<span data-ttu-id="4196a-338">Azure Configuration Manager</span><span class="sxs-lookup"><span data-stu-id="4196a-338">Azure Configuration Manager</span></span>](http://www.nuget.org/packages/Microsoft.WindowsAzure.ConfigurationManager)

<span data-ttu-id="4196a-339">Aby uzyskać dodatkowe przykłady pokazują, jak utworzyć i przetestować sygnatury dostępu Współdzielonego, zobacz [przykłady kodu platformy Azure dla magazynu](https://azure.microsoft.com/documentation/samples/?service=storage).</span><span class="sxs-lookup"><span data-stu-id="4196a-339">For additional examples that show how to create and test a SAS, see [Azure Code Samples for Storage](https://azure.microsoft.com/documentation/samples/?service=storage).</span></span>

### <a name="example-create-and-use-an-account-sas"></a><span data-ttu-id="4196a-340">Przykład: Tworzenie i używanie sygnatury dostępu Współdzielonego konta</span><span class="sxs-lookup"><span data-stu-id="4196a-340">Example: Create and use an account SAS</span></span>
<span data-ttu-id="4196a-341">Poniższy przykład kodu tworzy konto sygnatury dostępu Współdzielonego jest prawidłowa dla usług obiektów Blob i plików, która daje klientowi uprawnienia do odczytu, zapisu i listy uprawnień dostępu do interfejsów API z poziomu usługi.</span><span class="sxs-lookup"><span data-stu-id="4196a-341">The following code example creates an account SAS that is valid for the Blob and File services, and gives the client permissions read, write, and list permissions to access service-level APIs.</span></span> <span data-ttu-id="4196a-342">Sygnatura dostępu Współdzielonego konta ogranicza protokołu HTTPS, więc żądanie musi zostać wykonane z protokołu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="4196a-342">The account SAS restricts the protocol to HTTPS, so the request must be made with HTTPS.</span></span>

```csharp
static string GetAccountSASToken()
{
    // To create the account SAS, you need to use your shared key credentials. Modify for your account.
    const string ConnectionString = "DefaultEndpointsProtocol=https;AccountName=account-name;AccountKey=account-key";
    CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConnectionString);

    // Create a new access policy for the account.
    SharedAccessAccountPolicy policy = new SharedAccessAccountPolicy()
        {
            Permissions = SharedAccessAccountPermissions.Read | SharedAccessAccountPermissions.Write | SharedAccessAccountPermissions.List,
            Services = SharedAccessAccountServices.Blob | SharedAccessAccountServices.File,
            ResourceTypes = SharedAccessAccountResourceTypes.Service,
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Protocols = SharedAccessProtocol.HttpsOnly
        };

    // Return the SAS token.
    return storageAccount.GetSharedAccessSignature(policy);
}
```

<span data-ttu-id="4196a-343">Aby użyć sygnatura dostępu Współdzielonego konta dostępu do interfejsów API poziom usługi dla usługi obiektów Blob, utworzenia obiektu Blob klienta przy użyciu sygnatury dostępu Współdzielonego i punktu końcowego magazynu obiektów Blob dla konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="4196a-343">To use the account SAS to access service-level APIs for the Blob service, construct a Blob client object using the SAS and the Blob storage endpoint for your storage account.</span></span>

```csharp
static void UseAccountSAS(string sasToken)
{
    // Create new storage credentials using the SAS token.
    StorageCredentials accountSAS = new StorageCredentials(sasToken);
    // Use these credentials and the account name to create a Blob service client.
    CloudStorageAccount accountWithSAS = new CloudStorageAccount(accountSAS, "account-name", endpointSuffix: null, useHttps: true);
    CloudBlobClient blobClientWithSAS = accountWithSAS.CreateCloudBlobClient();

    // Now set the service properties for the Blob client created with the SAS.
    blobClientWithSAS.SetServiceProperties(new ServiceProperties()
    {
        HourMetrics = new MetricsProperties()
        {
            MetricsLevel = MetricsLevel.ServiceAndApi,
            RetentionDays = 7,
            Version = "1.0"
        },
        MinuteMetrics = new MetricsProperties()
        {
            MetricsLevel = MetricsLevel.ServiceAndApi,
            RetentionDays = 7,
            Version = "1.0"
        },
        Logging = new LoggingProperties()
        {
            LoggingOperations = LoggingOperations.All,
            RetentionDays = 14,
            Version = "1.0"
        }
    });

    // The permissions granted by the account SAS also permit you to retrieve service properties.
    ServiceProperties serviceProperties = blobClientWithSAS.GetServiceProperties();
    Console.WriteLine(serviceProperties.HourMetrics.MetricsLevel);
    Console.WriteLine(serviceProperties.HourMetrics.RetentionDays);
    Console.WriteLine(serviceProperties.HourMetrics.Version);
}
```

### <a name="example-create-a-stored-access-policy"></a><span data-ttu-id="4196a-344">Przykład: Tworzenie zasad dostępu przechowywane</span><span class="sxs-lookup"><span data-stu-id="4196a-344">Example: Create a stored access policy</span></span>
<span data-ttu-id="4196a-345">Poniższy kod tworzy zasady przechowywane dostępu do kontenera.</span><span class="sxs-lookup"><span data-stu-id="4196a-345">The following code creates a stored access policy on a container.</span></span> <span data-ttu-id="4196a-346">Zasady dostępu służy do określania warunków ograniczających dla sygnatury dostępu Współdzielonego usługi na kontener lub jego obiektów blob.</span><span class="sxs-lookup"><span data-stu-id="4196a-346">You can use the access policy to specify constraints for a service SAS on the container or its blobs.</span></span>

```csharp
private static async Task CreateSharedAccessPolicyAsync(CloudBlobContainer container, string policyName)
{
    // Create a new shared access policy and define its constraints.
    // The access policy provides create, write, read, list, and delete permissions.
    SharedAccessBlobPolicy sharedPolicy = new SharedAccessBlobPolicy()
    {
        // When the start time for the SAS is omitted, the start time is assumed to be the time when the storage service receives the request.
        // Omitting the start time for a SAS that is effective immediately helps to avoid clock skew.
        SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
        Permissions = SharedAccessBlobPermissions.Read | SharedAccessBlobPermissions.List |
            SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Create | SharedAccessBlobPermissions.Delete
    };

    // Get the container's existing permissions.
    BlobContainerPermissions permissions = await container.GetPermissionsAsync();

    // Add the new policy to the container's permissions, and set the container's permissions.
    permissions.SharedAccessPolicies.Add(policyName, sharedPolicy);
    await container.SetPermissionsAsync(permissions);
}
```

### <a name="example-create-a-service-sas-on-a-container"></a><span data-ttu-id="4196a-347">Przykład: Tworzenie usługi SAS w kontenerze</span><span class="sxs-lookup"><span data-stu-id="4196a-347">Example: Create a service SAS on a container</span></span>
<span data-ttu-id="4196a-348">Poniższy kod tworzy sygnatury dostępu Współdzielonego w kontenerze.</span><span class="sxs-lookup"><span data-stu-id="4196a-348">The following code creates a SAS on a container.</span></span> <span data-ttu-id="4196a-349">Jeśli podano nazwę istniejących zasad dostępu przechowywane, że zasady są skojarzone z sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-349">If the name of an existing stored access policy is provided, that policy is associated with the SAS.</span></span> <span data-ttu-id="4196a-350">Jeśli nie zasady przechowywane dostępu, zostanie następnie kod tworzy SAS ad hoc w kontenerze.</span><span class="sxs-lookup"><span data-stu-id="4196a-350">If no stored access policy is provided, then the code creates an ad-hoc SAS on the container.</span></span>

```csharp
private static string GetContainerSasUri(CloudBlobContainer container, string storedPolicyName = null)
{
    string sasContainerToken;

    // If no stored policy is specified, create a new access policy and define its constraints.
    if (storedPolicyName == null)
    {
        // Note that the SharedAccessBlobPolicy class is used both to define the parameters of an ad-hoc SAS, and
        // to construct a shared access policy that is saved to the container's shared access policies.
        SharedAccessBlobPolicy adHocPolicy = new SharedAccessBlobPolicy()
        {
            // When the start time for the SAS is omitted, the start time is assumed to be the time when the storage service receives the request.
            // Omitting the start time for a SAS that is effective immediately helps to avoid clock skew.
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Permissions = SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.List
        };

        // Generate the shared access signature on the container, setting the constraints directly on the signature.
        sasContainerToken = container.GetSharedAccessSignature(adHocPolicy, null);

        Console.WriteLine("SAS for blob container (ad hoc): {0}", sasContainerToken);
        Console.WriteLine();
    }
    else
    {
        // Generate the shared access signature on the container. In this case, all of the constraints for the
        // shared access signature are specified on the stored access policy, which is provided by name.
        // It is also possible to specify some constraints on an ad-hoc SAS and others on the stored access policy.
        sasContainerToken = container.GetSharedAccessSignature(null, storedPolicyName);

        Console.WriteLine("SAS for blob container (stored access policy): {0}", sasContainerToken);
        Console.WriteLine();
    }

    // Return the URI string for the container, including the SAS token.
    return container.Uri + sasContainerToken;
}
```

### <a name="example-create-a-service-sas-on-a-blob"></a><span data-ttu-id="4196a-351">Przykład: Tworzenie sygnatury dostępu Współdzielonego usługi na obiektu blob</span><span class="sxs-lookup"><span data-stu-id="4196a-351">Example: Create a service SAS on a blob</span></span>
<span data-ttu-id="4196a-352">Poniższy kod tworzy sygnatury dostępu Współdzielonego na obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="4196a-352">The following code creates a SAS on a blob.</span></span> <span data-ttu-id="4196a-353">Jeśli podano nazwę istniejących zasad dostępu przechowywane, że zasady są skojarzone z sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="4196a-353">If the name of an existing stored access policy is provided, that policy is associated with the SAS.</span></span> <span data-ttu-id="4196a-354">Jeśli nie zasady przechowywane dostępu, zostanie następnie kod tworzy SAS ad hoc w obiekcie blob.</span><span class="sxs-lookup"><span data-stu-id="4196a-354">If no stored access policy is provided, then the code creates an ad-hoc SAS on the blob.</span></span>

```csharp
private static string GetBlobSasUri(CloudBlobContainer container, string blobName, string policyName = null)
{
    string sasBlobToken;

    // Get a reference to a blob within the container.
    // Note that the blob may not exist yet, but a SAS can still be created for it.
    CloudBlockBlob blob = container.GetBlockBlobReference(blobName);

    if (policyName == null)
    {
        // Create a new access policy and define its constraints.
        // Note that the SharedAccessBlobPolicy class is used both to define the parameters of an ad-hoc SAS, and
        // to construct a shared access policy that is saved to the container's shared access policies.
        SharedAccessBlobPolicy adHocSAS = new SharedAccessBlobPolicy()
        {
            // When the start time for the SAS is omitted, the start time is assumed to be the time when the storage service receives the request.
            // Omitting the start time for a SAS that is effective immediately helps to avoid clock skew.
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Permissions = SharedAccessBlobPermissions.Read | SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Create
        };

        // Generate the shared access signature on the blob, setting the constraints directly on the signature.
        sasBlobToken = blob.GetSharedAccessSignature(adHocSAS);

        Console.WriteLine("SAS for blob (ad hoc): {0}", sasBlobToken);
        Console.WriteLine();
    }
    else
    {
        // Generate the shared access signature on the blob. In this case, all of the constraints for the
        // shared access signature are specified on the container's stored access policy.
        sasBlobToken = blob.GetSharedAccessSignature(null, policyName);

        Console.WriteLine("SAS for blob (stored access policy): {0}", sasBlobToken);
        Console.WriteLine();
    }

    // Return the URI string for the container, including the SAS token.
    return blob.Uri + sasBlobToken;
}
```

## <a name="conclusion"></a><span data-ttu-id="4196a-355">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="4196a-355">Conclusion</span></span>
<span data-ttu-id="4196a-356">Sygnatury dostępu współdzielonego są przydatne do prezentowania ograniczone uprawnienia do konta magazynu do klientów, które nie powinny mieć klucz konta.</span><span class="sxs-lookup"><span data-stu-id="4196a-356">Shared access signatures are useful for providing limited permissions to your storage account to clients that should not have the account key.</span></span> <span data-ttu-id="4196a-357">Są one tak, to ważna część model zabezpieczeń dla dowolnej aplikacji przy użyciu usługi Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="4196a-357">As such, they are a vital part of the security model for any application using Azure Storage.</span></span> <span data-ttu-id="4196a-358">Jeśli wykonujesz najlepszych rozwiązań, które są wymienione w tym miejscu można SAS zapewniają większą elastyczność dostępu do zasobów na koncie magazynu bez naruszania zabezpieczeń aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4196a-358">If you follow the best practices listed here, you can use SAS to provide greater flexibility of access to resources in your storage account, without compromising the security of your application.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4196a-359">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="4196a-359">Next Steps</span></span>
* [<span data-ttu-id="4196a-360">Zarządzanie anonimowy dostęp do odczytu do kontenerów i obiektów blob</span><span class="sxs-lookup"><span data-stu-id="4196a-360">Manage anonymous read access to containers and blobs</span></span>](../blobs/storage-manage-access-to-resources.md)
* [<span data-ttu-id="4196a-361">Delegowanie dostępu za pomocą sygnatury dostępu współdzielonego</span><span class="sxs-lookup"><span data-stu-id="4196a-361">Delegating Access with a Shared Access Signature</span></span>](http://msdn.microsoft.com/library/azure/ee395415.aspx)
* [<span data-ttu-id="4196a-362">Wprowadzenie do tabeli i kolejki SAS</span><span class="sxs-lookup"><span data-stu-id="4196a-362">Introducing Table and Queue SAS</span></span>](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/introducing-table-sas-shared-access-signature-queue-sas-and-update-to-blob-sas.aspx)
