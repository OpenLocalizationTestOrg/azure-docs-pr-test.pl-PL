---
title: "aaaUsing udostępnionych sygnatur dostępu (SAS) w usłudze Azure Storage | Dokumentacja firmy Microsoft"
description: "Dowiedz się toouse udostępnionego dostępu podpisów (SAS) toodelegate dostępu tooAzure magazynu zasobów, w tym obiekty BLOB, kolejek, tabel i plików."
services: storage
documentationcenter: 
author: mmacy
manager: timlt
editor: tysonn
ms.assetid: 46fd99d7-36b3-4283-81e3-f214b29f1152
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 04/18/2017
ms.author: marsma
ms.openlocfilehash: 53e06c78fbfdaa5fd209add719995ef2a6bc8f61
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="using-shared-access-signatures-sas"></a><span data-ttu-id="deadc-103">Przy użyciu sygnatury dostępu współdzielonego (SAS)</span><span class="sxs-lookup"><span data-stu-id="deadc-103">Using shared access signatures (SAS)</span></span>

<span data-ttu-id="deadc-104">Sygnatury dostępu współdzielonego (SAS) zapewnia sposób toogrant ograniczony dostęp tooobjects na koncie magazynu klientów tooother bez narażania klucz konta.</span><span class="sxs-lookup"><span data-stu-id="deadc-104">A shared access signature (SAS) provides you with a way toogrant limited access tooobjects in your storage account tooother clients, without exposing your account key.</span></span> <span data-ttu-id="deadc-105">W tym artykule firma Microsoft Podaj omówienie modelu SAS hello, przejrzyj SAS najlepszych rozwiązań i przyjrzyj się przykłady.</span><span class="sxs-lookup"><span data-stu-id="deadc-105">In this article, we provide an overview of hello SAS model, review SAS best practices, and look at some examples.</span></span>

<span data-ttu-id="deadc-106">Dla dodatkowych przykładów kodu poza tymi przedstawionych w tym miejscu przy użyciu sygnatury dostępu Współdzielonego, zobacz [wprowadzenie do magazynu obiektów Blob Azure w programie .NET](https://azure.microsoft.com/documentation/samples/storage-blob-dotnet-getting-started/) i inne przykłady, które są dostępne w hello [przykłady kodu Azure](https://azure.microsoft.com/documentation/samples/?service=storage) biblioteki.</span><span class="sxs-lookup"><span data-stu-id="deadc-106">For additional code examples using SAS beyond those presented here, see [Getting Started with Azure Blob Storage in .NET](https://azure.microsoft.com/documentation/samples/storage-blob-dotnet-getting-started/) and other samples available in hello [Azure Code Samples](https://azure.microsoft.com/documentation/samples/?service=storage) library.</span></span> <span data-ttu-id="deadc-107">Możesz pobrać hello przykładowe aplikacje i uruchamiać je lub Przeglądaj hello kodu w witrynie GitHub.</span><span class="sxs-lookup"><span data-stu-id="deadc-107">You can download hello sample applications and run them, or browse hello code on GitHub.</span></span>

## <a name="what-is-a-shared-access-signature"></a><span data-ttu-id="deadc-108">Co to jest sygnatury dostępu współdzielonego?</span><span class="sxs-lookup"><span data-stu-id="deadc-108">What is a shared access signature?</span></span>
<span data-ttu-id="deadc-109">Sygnatury dostępu współdzielonego zapewnia dostęp delegowany tooresources na koncie magazynu.</span><span class="sxs-lookup"><span data-stu-id="deadc-109">A shared access signature provides delegated access tooresources in your storage account.</span></span> <span data-ttu-id="deadc-110">Z sygnatury dostępu Współdzielonego można przyznać się, że klienci uzyskują dostęp do tooresources na koncie magazynu bez udostępniania klucze Twojego konta.</span><span class="sxs-lookup"><span data-stu-id="deadc-110">With a SAS, you can grant clients access tooresources in your storage account, without sharing your account keys.</span></span> <span data-ttu-id="deadc-111">To jest hello punkt klucza przy użyciu sygnatury dostępu współdzielonego w aplikacjach — sygnatury dostępu Współdzielonego jest tooshare bezpieczny sposób zasobów magazynu bez naruszania klucze Twojego konta.</span><span class="sxs-lookup"><span data-stu-id="deadc-111">This is hello key point of using shared access signatures in your applications--a SAS is a secure way tooshare your storage resources without compromising your account keys.</span></span>

[!INCLUDE [storage-account-key-note-include](../../includes/storage-account-key-note-include.md)]

<span data-ttu-id="deadc-112">Sygnatury dostępu Współdzielonego zapewnia kontrolę nad hello typu dostępu, który można przyznać tooclients mających hello SAS, w tym:</span><span class="sxs-lookup"><span data-stu-id="deadc-112">A SAS gives you granular control over hello type of access you grant tooclients who have hello SAS, including:</span></span>

* <span data-ttu-id="deadc-113">Interwał powitania za pośrednictwem których hello jest prawidłowa, w tym hello czas rozpoczęcia i czas wygaśnięcia hello sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-113">hello interval over which hello SAS is valid, including hello start time and hello expiry time.</span></span>
* <span data-ttu-id="deadc-114">Witaj uprawnienia przyznane przez hello sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-114">hello permissions granted by hello SAS.</span></span> <span data-ttu-id="deadc-115">Na przykład sygnatury dostępu Współdzielonego dla obiekt blob może udzielić odczytu i zapisu obiektu blob toothat uprawnień, ale nie usunąć uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="deadc-115">For example, a SAS for a blob might grant read and write permissions toothat blob, but not delete permissions.</span></span>
* <span data-ttu-id="deadc-116">Opcjonalne adres IP lub zakres adresów IP, z których Magazyn Azure będzie akceptować hello sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-116">An optional IP address or range of IP addresses from which Azure Storage will accept hello SAS.</span></span> <span data-ttu-id="deadc-117">Na przykład może określić zakres adresów IP należących do organizacji tooyour.</span><span class="sxs-lookup"><span data-stu-id="deadc-117">For example, you might specify a range of IP addresses belonging tooyour organization.</span></span>
* <span data-ttu-id="deadc-118">Protokół Hello służącym magazynu Azure będzie akceptować hello sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-118">hello protocol over which Azure Storage will accept hello SAS.</span></span> <span data-ttu-id="deadc-119">Możesz użyć tego tooclients opcjonalny parametr toorestrict dostępu przy użyciu protokołu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="deadc-119">You can use this optional parameter toorestrict access tooclients using HTTPS.</span></span>

## <a name="when-should-you-use-a-shared-access-signature"></a><span data-ttu-id="deadc-120">Kiedy należy używać sygnatury dostępu współdzielonego</span><span class="sxs-lookup"><span data-stu-id="deadc-120">When should you use a shared access signature?</span></span>
<span data-ttu-id="deadc-121">Sygnatury dostępu Współdzielonego można używać, gdy chce tooprovide tooresources dostępu na kliencie tooany konta magazynu nie posiada kluczy dostępu do konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="deadc-121">You can use a SAS when you want tooprovide access tooresources in your storage account tooany client not possessing your storage account's access keys.</span></span> <span data-ttu-id="deadc-122">Twoje konto magazynu obejmuje zarówno klucz dostępu podstawowych i pomocniczych, które przyznać dostęp administracyjny tooyour konta i wszystkie zasoby w niej.</span><span class="sxs-lookup"><span data-stu-id="deadc-122">Your storage account includes both a primary and secondary access key, both of which grant administrative access tooyour account, and all resources within it.</span></span> <span data-ttu-id="deadc-123">Żaden z tych kluczy udostępnianie otwiera możliwości toohello Twojego konta złośliwego lub brak dbałości o ich użycia.</span><span class="sxs-lookup"><span data-stu-id="deadc-123">Exposing either of these keys opens your account toohello possibility of malicious or negligent use.</span></span> <span data-ttu-id="deadc-124">Sygnatury dostępu współdzielonego zapewniają bezpieczne alternatywę umożliwiającą klientom tooread, zapisu i usuwania danych na koncie magazynu, zgodnie z toohello uprawnienia, które zostały jawnie przyznane uprawnienia i bez potrzeby klucza konta.</span><span class="sxs-lookup"><span data-stu-id="deadc-124">Shared access signatures provide a safe alternative that allows clients tooread, write, and delete data in your storage account according toohello permissions you've explicitly granted, and without need for an account key.</span></span>

<span data-ttu-id="deadc-125">Typowy scenariusz, w których sygnatury dostępu Współdzielonego jest użyteczny to usługa, gdzie użytkownicy odczytu i zapisu konta magazynu tooyour własnych danych.</span><span class="sxs-lookup"><span data-stu-id="deadc-125">A common scenario where a SAS is useful is a service where users read and write their own data tooyour storage account.</span></span> <span data-ttu-id="deadc-126">W scenariuszu, w którym konta magazynu są przechowywane dane użytkownika istnieją dwa wzorce projektowe typowe:</span><span class="sxs-lookup"><span data-stu-id="deadc-126">In a scenario where a storage account stores user data, there are two typical design patterns:</span></span>

1. <span data-ttu-id="deadc-127">Klienci przekazywania i pobierania danych za pomocą usługi frontonu serwera proxy, który przeprowadza uwierzytelnianie.</span><span class="sxs-lookup"><span data-stu-id="deadc-127">Clients upload and download data via a front-end proxy service, which performs authentication.</span></span> <span data-ttu-id="deadc-128">Ta usługa proxy frontonu ma możliwość hello sprawdzania poprawności reguł biznesowych, ale w przypadku dużych ilości danych lub dużej liczby transakcji, tworzenie usługi, które mogą być skalowane toomatch żądanie może być kosztowne lub trudne.</span><span class="sxs-lookup"><span data-stu-id="deadc-128">This front-end proxy service has hello advantage of allowing validation of business rules, but for large amounts of data or high-volume transactions, creating a service that can scale toomatch demand may be expensive or difficult.</span></span>

  ![Diagram scenariusza: Usługa frontonu serwera proxy][sas-storage-fe-proxy-service]

1. <span data-ttu-id="deadc-130">Usługi LDS uwierzytelnia powitania klienta, w razie potrzeby, a następnie generuje sygnaturę dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-130">A lightweight service authenticates hello client as needed and then generates a SAS.</span></span> <span data-ttu-id="deadc-131">Po hello klient odbierze hello SAS, uzyskiwania dostępu do zasobów konta magazynu bezpośrednio z uprawnień hello określonego przez hello SAS oraz interwału hello dozwoloną hello sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-131">Once hello client receives hello SAS, they can access storage account resources directly with hello permissions defined by hello SAS and for hello interval allowed by hello SAS.</span></span> <span data-ttu-id="deadc-132">Witaj SAS zmniejsza potrzebę hello routingu wszystkich danych za pośrednictwem usługi Serwer proxy frontonu hello.</span><span class="sxs-lookup"><span data-stu-id="deadc-132">hello SAS mitigates hello need for routing all data through hello front-end proxy service.</span></span>

  ![Diagram scenariusza: sygnatury dostępu Współdzielonego usługi dostawcy][sas-storage-provider-service]

<span data-ttu-id="deadc-134">Wiele usług rzeczywistych może używać hybrydowego te dwie metody.</span><span class="sxs-lookup"><span data-stu-id="deadc-134">Many real-world services may use a hybrid of these two approaches.</span></span> <span data-ttu-id="deadc-135">Na przykład niektóre dane może przetworzyć i zweryfikować za pośrednictwem serwera proxy frontonu hello, podczas gdy inne dane zapisane i/lub odczytać bezpośrednio przy użyciu sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-135">For example, some data might be processed and validated via hello front-end proxy, while other data is saved and/or read directly using SAS.</span></span>

<span data-ttu-id="deadc-136">Ponadto należy toouse obiektu źródłowego SAS tooauthenticate hello w operacji kopiowania w niektórych scenariuszach:</span><span class="sxs-lookup"><span data-stu-id="deadc-136">Additionally, you will need toouse a SAS tooauthenticate hello source object in a copy operation in certain scenarios:</span></span>

* <span data-ttu-id="deadc-137">Podczas kopiowania obiektu blob tooanother obiektów blob, która znajduje się w innego konta magazynu, należy użyć SAS tooauthenticate hello źródłowego obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="deadc-137">When you copy a blob tooanother blob that resides in a different storage account, you must use a SAS tooauthenticate hello source blob.</span></span> <span data-ttu-id="deadc-138">Opcjonalnie można użyć SAS tooauthenticate hello docelowego obiektu blob również.</span><span class="sxs-lookup"><span data-stu-id="deadc-138">You can optionally use a SAS tooauthenticate hello destination blob as well.</span></span>
* <span data-ttu-id="deadc-139">Podczas kopiowania pliku tooanother, który znajduje się w innego konta magazynu, należy użyć pliku źródłowego hello tooauthenticate sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-139">When you copy a file tooanother file that resides in a different storage account, you must use a SAS tooauthenticate hello source file.</span></span> <span data-ttu-id="deadc-140">Opcjonalnie można użyć SAS tooauthenticate hello pliku docelowego oraz.</span><span class="sxs-lookup"><span data-stu-id="deadc-140">You can optionally use a SAS tooauthenticate hello destination file as well.</span></span>
* <span data-ttu-id="deadc-141">Podczas kopiowania pliku tooa obiektu blob lub obiektu blob tooa pliku, należy użyć SAS tooauthenticate hello obiektu źródłowego, nawet jeśli hello obiekty źródłowy i docelowy znajdują się w hello same konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="deadc-141">When you copy a blob tooa file, or a file tooa blob, you must use a SAS tooauthenticate hello source object, even if hello source and destination objects reside within hello same storage account.</span></span>

## <a name="types-of-shared-access-signatures"></a><span data-ttu-id="deadc-142">Rodzaje sygnatur dostępu współdzielonego</span><span class="sxs-lookup"><span data-stu-id="deadc-142">Types of shared access signatures</span></span>
<span data-ttu-id="deadc-143">Można utworzyć dwa rodzaje sygnatur dostępu współdzielonego:</span><span class="sxs-lookup"><span data-stu-id="deadc-143">You can create two types of shared access signatures:</span></span>

* <span data-ttu-id="deadc-144">**Usługa sygnatury dostępu Współdzielonego.**</span><span class="sxs-lookup"><span data-stu-id="deadc-144">**Service SAS.**</span></span> <span data-ttu-id="deadc-145">Obiekty delegowane sygnatury dostępu Współdzielonego usługi Hello dostępu tooa zasobu tylko w jednej z usług magazynu hello: hello usługi obiektów Blob, kolejki, tabeli lub pliku.</span><span class="sxs-lookup"><span data-stu-id="deadc-145">hello service SAS delegates access tooa resource in just one of hello storage services: hello Blob, Queue, Table, or File service.</span></span> <span data-ttu-id="deadc-146">Zobacz [konstruowania sygnatury dostępu Współdzielonego usługi](https://msdn.microsoft.com/library/dn140255.aspx) i [przykłady sygnatury dostępu Współdzielonego usługi](https://msdn.microsoft.com/library/dn140256.aspx) Aby uzyskać szczegółowe informacje na temat tworzenia tokenu sygnatury dostępu Współdzielonego usługi hello.</span><span class="sxs-lookup"><span data-stu-id="deadc-146">See [Constructing a Service SAS](https://msdn.microsoft.com/library/dn140255.aspx) and [Service SAS Examples](https://msdn.microsoft.com/library/dn140256.aspx) for in-depth information about constructing hello service SAS token.</span></span>
* <span data-ttu-id="deadc-147">**Sygnatura dostępu Współdzielonego konta.**</span><span class="sxs-lookup"><span data-stu-id="deadc-147">**Account SAS.**</span></span> <span data-ttu-id="deadc-148">delegaty sygnatury dostępu Współdzielonego konta Hello dostępu tooresources w co najmniej jednej usługi magazynu hello.</span><span class="sxs-lookup"><span data-stu-id="deadc-148">hello account SAS delegates access tooresources in one or more of hello storage services.</span></span> <span data-ttu-id="deadc-149">Wszystkie operacje hello dostępne za pomocą sygnatury dostępu Współdzielonego usługi są także dostępne za pośrednictwem konta sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-149">All of hello operations available via a service SAS are also available via an account SAS.</span></span> <span data-ttu-id="deadc-150">Ponadto konto hello SAS, możesz delegować toooperations dostępu, które mają zastosowanie tooa podane usługi, takie jak **pobierania/ustawiania właściwości usługi** i **uzyskać statystyki usługi**. Możesz również delegować dostęp tooread, zapisu i operacji usuwania kontenerów obiektów blob, tabel, kolejek i udziałów plików, które nie są dozwolone z sygnatury dostępu Współdzielonego usługi.</span><span class="sxs-lookup"><span data-stu-id="deadc-150">Additionally, with hello account SAS, you can delegate access toooperations that apply tooa given service, such as **Get/Set Service Properties** and **Get Service Stats**. You can also delegate access tooread, write, and delete operations on blob containers, tables, queues, and file shares that are not permitted with a service SAS.</span></span> <span data-ttu-id="deadc-151">Zobacz [konstruowania SAS konta](https://msdn.microsoft.com/library/mt584140.aspx) Aby uzyskać szczegółowe informacje na temat tworzenia tokenu sygnatury dostępu Współdzielonego konta hello.</span><span class="sxs-lookup"><span data-stu-id="deadc-151">See [Constructing an Account SAS](https://msdn.microsoft.com/library/mt584140.aspx) for in-depth information about constructing hello account SAS token.</span></span>

## <a name="how-a-shared-access-signature-works"></a><span data-ttu-id="deadc-152">Jak działa sygnatury dostępu współdzielonego</span><span class="sxs-lookup"><span data-stu-id="deadc-152">How a shared access signature works</span></span>
<span data-ttu-id="deadc-153">Sygnatury dostępu współdzielonego jest podpisem identyfikator URI, który wskazuje tooone lub więcej zasobów magazynu i zawiera token, który zawiera specjalnego zestawu parametrów zapytania.</span><span class="sxs-lookup"><span data-stu-id="deadc-153">A shared access signature is a signed URI that points tooone or more storage resources and includes a token that contains a special set of query parameters.</span></span> <span data-ttu-id="deadc-154">Hello token wskazuje, jak hello zasoby mogą być używane w taki sposób, przez powitania klienta.</span><span class="sxs-lookup"><span data-stu-id="deadc-154">hello token indicates how hello resources may be accessed by hello client.</span></span> <span data-ttu-id="deadc-155">Jeden z parametrów zapytania hello, hello podpisu, jest utworzone na podstawie parametrów SAS hello i podpisany kluczem konta hello.</span><span class="sxs-lookup"><span data-stu-id="deadc-155">One of hello query parameters, hello signature, is constructed from hello SAS parameters and signed with hello account key.</span></span> <span data-ttu-id="deadc-156">Ta sygnatura jest używany przez usługi Azure Storage tooauthenticate hello sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-156">This signature is used by Azure Storage tooauthenticate hello SAS.</span></span>

<span data-ttu-id="deadc-157">Oto przykład identyfikatora URI połączenia SAS, identyfikator URI zasobu hello przedstawiający i tokenu sygnatury dostępu Współdzielonego hello:</span><span class="sxs-lookup"><span data-stu-id="deadc-157">Here's an example of a SAS URI, showing hello resource URI and hello SAS token:</span></span>

![Składniki identyfikatora URI sygnatury dostępu Współdzielonego][sas-storage-uri]

<span data-ttu-id="deadc-159">Witaj tokenu sygnatury dostępu Współdzielonego jest ciągiem generowania na powitania *klienta* po stronie (zobacz hello [przykłady SAS](#sas-examples) sekcji Przykłady kodu).</span><span class="sxs-lookup"><span data-stu-id="deadc-159">hello SAS token is a string you generate on hello *client* side (see hello [SAS examples](#sas-examples) section for code examples).</span></span> <span data-ttu-id="deadc-160">Token sygnatury dostępu Współdzielonego, które można wygenerować z biblioteki klienta magazynu hello, na przykład nie będzie śledzona przez usługi Azure Storage w dowolny sposób.</span><span class="sxs-lookup"><span data-stu-id="deadc-160">A SAS token you generate with hello storage client library, for example, is not tracked by Azure Storage in any way.</span></span> <span data-ttu-id="deadc-161">Można utworzyć nieograniczoną liczbę tokeny sygnatury dostępu Współdzielonego na powitania po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="deadc-161">You can create an unlimited number of SAS tokens on hello client side.</span></span>

<span data-ttu-id="deadc-162">Gdy klient poda tooAzure identyfikatora URI połączenia SAS magazynu jako część żądania, usługa hello sprawdza hello SAS parametrów i tooverify podpis jest nieprawidłowy dla uwierzytelniania hello żądania.</span><span class="sxs-lookup"><span data-stu-id="deadc-162">When a client provides a SAS URI tooAzure Storage as part of a request, hello service checks hello SAS parameters and signature tooverify that it is valid for authenticating hello request.</span></span> <span data-ttu-id="deadc-163">Jeśli usługa hello sprawdza, czy ten podpis hello jest prawidłowy, Żądanie hello jest uwierzytelniony.</span><span class="sxs-lookup"><span data-stu-id="deadc-163">If hello service verifies that hello signature is valid, then hello request is authenticated.</span></span> <span data-ttu-id="deadc-164">W przeciwnym razie hello żądanie zostało odrzucone z kodem błędu 403 (Dostęp zabroniony).</span><span class="sxs-lookup"><span data-stu-id="deadc-164">Otherwise, hello request is declined with error code 403 (Forbidden).</span></span>

## <a name="shared-access-signature-parameters"></a><span data-ttu-id="deadc-165">Parametry sygnatury dostępu współdzielonego</span><span class="sxs-lookup"><span data-stu-id="deadc-165">Shared access signature parameters</span></span>
<span data-ttu-id="deadc-166">Sygnatura dostępu Współdzielonego konta Hello tokeny sygnatury dostępu Współdzielonego usługi obejmują kilka wspólnych parametrów i kilka parametrów również wziąć, czy są różne.</span><span class="sxs-lookup"><span data-stu-id="deadc-166">hello account SAS and service SAS tokens include some common parameters, and also take a few parameters that that are different.</span></span>

### <a name="parameters-common-tooaccount-sas-and-service-sas-tokens"></a><span data-ttu-id="deadc-167">Tooaccount wspólne parametry sygnatury dostępu Współdzielonego i tokeny sygnatury dostępu Współdzielonego usługi</span><span class="sxs-lookup"><span data-stu-id="deadc-167">Parameters common tooaccount SAS and service SAS tokens</span></span>
* <span data-ttu-id="deadc-168">**Wersja interfejsu API** opcjonalny parametr określający żądania hello tooexecute toouse wersji hello magazynu usługi.</span><span class="sxs-lookup"><span data-stu-id="deadc-168">**Api version** An optional parameter that specifies hello storage service version toouse tooexecute hello request.</span></span>
* <span data-ttu-id="deadc-169">**Wersja usługi** wymaganym parametrem, który określa Żądanie hello tooauthenticate toouse wersji hello magazynu usługi.</span><span class="sxs-lookup"><span data-stu-id="deadc-169">**Service version** A required parameter that specifies hello storage service version toouse tooauthenticate hello request.</span></span>
* <span data-ttu-id="deadc-170">**Godzina rozpoczęcia.**</span><span class="sxs-lookup"><span data-stu-id="deadc-170">**Start time.**</span></span> <span data-ttu-id="deadc-171">Jest to czas hello, w których hello SAS staje się nieprawidłowy.</span><span class="sxs-lookup"><span data-stu-id="deadc-171">This is hello time at which hello SAS becomes valid.</span></span> <span data-ttu-id="deadc-172">czas rozpoczęcia Hello sygnatury dostępu współdzielonego jest opcjonalne.</span><span class="sxs-lookup"><span data-stu-id="deadc-172">hello start time for a shared access signature is optional.</span></span> <span data-ttu-id="deadc-173">W przypadku pominięcia czas rozpoczęcia hello SAS zaczyna się natychmiast.</span><span class="sxs-lookup"><span data-stu-id="deadc-173">If a start time is omitted, hello SAS is effective immediately.</span></span> <span data-ttu-id="deadc-174">Witaj czas rozpoczęcia musi być wyrażony w formacie UTC (Coordinated Universal Time), z specjalne oznaczeniem UTC ("Z"), na przykład `1994-11-05T13:15:30Z`.</span><span class="sxs-lookup"><span data-stu-id="deadc-174">hello start time must be expressed in UTC (Coordinated Universal Time), with a special UTC designator ("Z"), for example `1994-11-05T13:15:30Z`.</span></span>
* <span data-ttu-id="deadc-175">**Czas wygaśnięcia.**</span><span class="sxs-lookup"><span data-stu-id="deadc-175">**Expiry time.**</span></span> <span data-ttu-id="deadc-176">Jest to hello czasu po upływie którego hello skojarzenia zabezpieczeń nie jest już prawidłowy.</span><span class="sxs-lookup"><span data-stu-id="deadc-176">This is hello time after which hello SAS is no longer valid.</span></span> <span data-ttu-id="deadc-177">Najlepszym rozwiązaniem jest Określ czas wygaśnięcia dla sygnatury dostępu Współdzielonego lub powiązać ją z zasadami dostępu przechowywane.</span><span class="sxs-lookup"><span data-stu-id="deadc-177">Best practices recommend that you either specify an expiry time for a SAS, or associate it with a stored access policy.</span></span> <span data-ttu-id="deadc-178">Witaj czas wygaśnięcia musi być wyrażony w formacie UTC (Coordinated Universal Time) z specjalne oznaczeniem UTC ("Z"), na przykład `1994-11-05T13:15:30Z` (Zobacz więcej poniżej).</span><span class="sxs-lookup"><span data-stu-id="deadc-178">hello expiry time must be expressed in UTC (Coordinated Universal Time), with a special UTC designator ("Z"), for example `1994-11-05T13:15:30Z` (see more below).</span></span>
* <span data-ttu-id="deadc-179">**Uprawnienia.**</span><span class="sxs-lookup"><span data-stu-id="deadc-179">**Permissions.**</span></span> <span data-ttu-id="deadc-180">uprawnienia Hello określone w elemencie hello SAS wskazują, jakie operacje powitania klienta można wykonywać względem zasobów magazynu hello przy użyciu hello sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-180">hello permissions specified on hello SAS indicate what operations hello client can perform against hello storage resource using hello SAS.</span></span> <span data-ttu-id="deadc-181">Uprawnienia dostępne są różne dla konta sygnatury dostępu Współdzielonego i sygnatury dostępu Współdzielonego usługi.</span><span class="sxs-lookup"><span data-stu-id="deadc-181">Available permissions differ for an account SAS and a service SAS.</span></span>
* <span data-ttu-id="deadc-182">**ADRES IP.**</span><span class="sxs-lookup"><span data-stu-id="deadc-182">**IP.**</span></span> <span data-ttu-id="deadc-183">Opcjonalny parametr określający adres IP lub zakres adresów IP poza platformą Azure (zobacz sekcję hello [stan konfiguracji sesji Routing](../expressroute/expressroute-workflows.md#routing-session-configuration-state) dla Express Route) z żądaniach tooaccept.</span><span class="sxs-lookup"><span data-stu-id="deadc-183">An optional parameter that specifies an IP address or a range of IP addresses outside of Azure (see hello section [Routing session configuration state](../expressroute/expressroute-workflows.md#routing-session-configuration-state) for Express Route) from which tooaccept requests.</span></span>
* <span data-ttu-id="deadc-184">**Protokół.**</span><span class="sxs-lookup"><span data-stu-id="deadc-184">**Protocol.**</span></span> <span data-ttu-id="deadc-185">Opcjonalny parametr, który określa protokół hello dozwoloną dla żądania.</span><span class="sxs-lookup"><span data-stu-id="deadc-185">An optional parameter that specifies hello protocol permitted for a request.</span></span> <span data-ttu-id="deadc-186">Możliwe wartości to zarówno protokołu HTTPS i HTTP (`https,http`), czyli tylko wartość domyślną hello lub HTTPS (`https`).</span><span class="sxs-lookup"><span data-stu-id="deadc-186">Possible values are both HTTPS and HTTP (`https,http`), which is hello default value, or HTTPS only (`https`).</span></span> <span data-ttu-id="deadc-187">Należy pamiętać, że HTTP tylko nie jest dozwoloną wartość.</span><span class="sxs-lookup"><span data-stu-id="deadc-187">Note that HTTP only is not a permitted value.</span></span>
* <span data-ttu-id="deadc-188">**Podpis.**</span><span class="sxs-lookup"><span data-stu-id="deadc-188">**Signature.**</span></span> <span data-ttu-id="deadc-189">Podpis Hello jest tworzony z hello innych parametrów, określony jako część tokenu i ponownie szyfrowane.</span><span class="sxs-lookup"><span data-stu-id="deadc-189">hello signature is constructed from hello other parameters specified as part token and then encrypted.</span></span> <span data-ttu-id="deadc-190">Został on użyty hello tooauthenticate sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-190">It's used tooauthenticate hello SAS.</span></span>

### <a name="parameters-for-a-service-sas-token"></a><span data-ttu-id="deadc-191">Parametry dla tokenu sygnatury dostępu Współdzielonego usługi</span><span class="sxs-lookup"><span data-stu-id="deadc-191">Parameters for a service SAS token</span></span>
* <span data-ttu-id="deadc-192">**Zasobów pamięci masowej.**</span><span class="sxs-lookup"><span data-stu-id="deadc-192">**Storage resource.**</span></span> <span data-ttu-id="deadc-193">Zasobów magazynu, dla których możesz delegować dostęp za pomocą usługi SAS obejmują:</span><span class="sxs-lookup"><span data-stu-id="deadc-193">Storage resources for which you can delegate access with a service SAS include:</span></span>
  * <span data-ttu-id="deadc-194">Kontenery i obiekty BLOB</span><span class="sxs-lookup"><span data-stu-id="deadc-194">Containers and blobs</span></span>
  * <span data-ttu-id="deadc-195">Udziały plików i plików</span><span class="sxs-lookup"><span data-stu-id="deadc-195">File shares and files</span></span>
  * <span data-ttu-id="deadc-196">Kolejki</span><span class="sxs-lookup"><span data-stu-id="deadc-196">Queues</span></span>
  * <span data-ttu-id="deadc-197">Tabele i zakresy jednostek do tabeli.</span><span class="sxs-lookup"><span data-stu-id="deadc-197">Tables and ranges of table entities.</span></span>

### <a name="parameters-for-an-account-sas-token"></a><span data-ttu-id="deadc-198">Parametry dla tokenu sygnatury dostępu Współdzielonego konta</span><span class="sxs-lookup"><span data-stu-id="deadc-198">Parameters for an account SAS token</span></span>
* <span data-ttu-id="deadc-199">**Usługi lub usług.**</span><span class="sxs-lookup"><span data-stu-id="deadc-199">**Service or services.**</span></span> <span data-ttu-id="deadc-200">Sygnatura dostępu Współdzielonego konta można delegować dostępu tooone lub więcej usług magazynu hello.</span><span class="sxs-lookup"><span data-stu-id="deadc-200">An account SAS can delegate access tooone or more of hello storage services.</span></span> <span data-ttu-id="deadc-201">Na przykład można utworzyć konto sygnatury dostępu Współdzielonego czy delegatów dostępu toohello usługi obiektów Blob i plików.</span><span class="sxs-lookup"><span data-stu-id="deadc-201">For example, you can create an account SAS that delegates access toohello Blob and File service.</span></span> <span data-ttu-id="deadc-202">Lub można utworzyć sygnatury dostępu Współdzielonego, że delegatów dostępu tooall cztery usługi (obiektu Blob, kolejki, tabel i plików).</span><span class="sxs-lookup"><span data-stu-id="deadc-202">Or you can create a SAS that delegates access tooall four services (Blob, Queue, Table, and File).</span></span>
* <span data-ttu-id="deadc-203">**Typy zasobów magazynu.**</span><span class="sxs-lookup"><span data-stu-id="deadc-203">**Storage resource types.**</span></span> <span data-ttu-id="deadc-204">Sygnatura dostępu Współdzielonego konta dotyczy tooone lub więcej grup zasobów magazynu, a nie konkretnego zasobu.</span><span class="sxs-lookup"><span data-stu-id="deadc-204">An account SAS applies tooone or more classes of storage resources, rather than a specific resource.</span></span> <span data-ttu-id="deadc-205">Można utworzyć konta SAS toodelegate dostępu do:</span><span class="sxs-lookup"><span data-stu-id="deadc-205">You can create an account SAS toodelegate access to:</span></span>
  * <span data-ttu-id="deadc-206">API poziomu usług jest wywoływana względem zasobów konta magazynu hello.</span><span class="sxs-lookup"><span data-stu-id="deadc-206">Service-level APIs, which are called against hello storage account resource.</span></span> <span data-ttu-id="deadc-207">Przykłady obejmują **pobierania/ustawiania właściwości usługi**, **uzyskać statystyki usługi**, i **listy kontenerów/kolejki/tabel/udziałów**.</span><span class="sxs-lookup"><span data-stu-id="deadc-207">Examples include **Get/Set Service Properties**, **Get Service Stats**, and **List Containers/Queues/Tables/Shares**.</span></span>
  * <span data-ttu-id="deadc-208">Interfejsy API kontenera niskiego poziomu, nazywane hello kontenera obiektów dla poszczególnych usług: obiektów blob w kontenerach, kolejek, tabel i udziałów plików.</span><span class="sxs-lookup"><span data-stu-id="deadc-208">Container-level APIs, which are called against hello container objects for each service: blob containers, queues, tables, and file shares.</span></span> <span data-ttu-id="deadc-209">Przykłady obejmują **tworzenia/usuwania kontenera**, **tworzenia/usuwania kolejki**, **tworzenia/usuwania tabeli**, **tworzenia/usuwania udziału**i  **Wyświetl listę obiektów blob/pliki i katalogi**.</span><span class="sxs-lookup"><span data-stu-id="deadc-209">Examples include **Create/Delete Container**, **Create/Delete Queue**, **Create/Delete Table**, **Create/Delete Share**, and **List Blobs/Files and Directories**.</span></span>
  * <span data-ttu-id="deadc-210">API na poziomie obiektu jest wywoływana względem obiektów blob, wiadomości w kolejce jednostek tabeli i plików.</span><span class="sxs-lookup"><span data-stu-id="deadc-210">Object-level APIs, which are called against blobs, queue messages, table entities, and files.</span></span> <span data-ttu-id="deadc-211">Na przykład **umieszczanie obiektu Blob**, **jednostki zapytania**, **pobrać wiadomości**, i **Utwórz plik**.</span><span class="sxs-lookup"><span data-stu-id="deadc-211">For example, **Put Blob**, **Query Entity**, **Get Messages**, and **Create File**.</span></span>

## <a name="examples-of-sas-uris"></a><span data-ttu-id="deadc-212">Przykłady identyfikatorów URI sygnatury dostępu Współdzielonego</span><span class="sxs-lookup"><span data-stu-id="deadc-212">Examples of SAS URIs</span></span>

### <a name="service-sas-uri-example"></a><span data-ttu-id="deadc-213">Przykładowy identyfikator URI sygnatury dostępu Współdzielonego usługi</span><span class="sxs-lookup"><span data-stu-id="deadc-213">Service SAS URI example</span></span>

<span data-ttu-id="deadc-214">Oto przykład usługi identyfikatora URI połączenia SAS, która zapewnia odczytu i zapisu obiektu blob tooa uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="deadc-214">Here is an example of a service SAS URI that provides read and write permissions tooa blob.</span></span> <span data-ttu-id="deadc-215">Tabela Hello dzieli każdej części hello URI toounderstand jak przyczynia się toohello sygnatury dostępu Współdzielonego:</span><span class="sxs-lookup"><span data-stu-id="deadc-215">hello table breaks down each part of hello URI toounderstand how it contributes toohello SAS:</span></span>

```
https://myaccount.blob.core.windows.net/sascontainer/sasblob.txt?sv=2015-04-05&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D
```

| <span data-ttu-id="deadc-216">Nazwa</span><span class="sxs-lookup"><span data-stu-id="deadc-216">Name</span></span> | <span data-ttu-id="deadc-217">Część SAS</span><span class="sxs-lookup"><span data-stu-id="deadc-217">SAS portion</span></span> | <span data-ttu-id="deadc-218">Opis</span><span class="sxs-lookup"><span data-stu-id="deadc-218">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="deadc-219">Identyfikator URI obiektu blob</span><span class="sxs-lookup"><span data-stu-id="deadc-219">Blob URI</span></span> |`https://myaccount.blob.core.windows.net/sascontainer/sasblob.txt` |<span data-ttu-id="deadc-220">adres Hello hello obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="deadc-220">hello address of hello blob.</span></span> <span data-ttu-id="deadc-221">Należy pamiętać, że przy użyciu protokołu HTTPS jest zdecydowanie zalecane.</span><span class="sxs-lookup"><span data-stu-id="deadc-221">Note that using HTTPS is highly recommended.</span></span> |
| <span data-ttu-id="deadc-222">Wersja usługi magazynu</span><span class="sxs-lookup"><span data-stu-id="deadc-222">Storage services version</span></span> |`sv=2015-04-05` |<span data-ttu-id="deadc-223">Dla magazynu usług wersji 2012-02-12, a później, ten parametr wskazuje hello toouse wersji.</span><span class="sxs-lookup"><span data-stu-id="deadc-223">For storage services version 2012-02-12 and later, this parameter indicates hello version toouse.</span></span> |
| <span data-ttu-id="deadc-224">Godzina rozpoczęcia</span><span class="sxs-lookup"><span data-stu-id="deadc-224">Start time</span></span> |`st=2015-04-29T22%3A18%3A26Z` |<span data-ttu-id="deadc-225">Określona w formacie UTC.</span><span class="sxs-lookup"><span data-stu-id="deadc-225">Specified in UTC time.</span></span> <span data-ttu-id="deadc-226">Jeśli hello SAS toobe prawidłowy natychmiast, należy pominąć hello czas rozpoczęcia.</span><span class="sxs-lookup"><span data-stu-id="deadc-226">If you want hello SAS toobe valid immediately, omit hello start time.</span></span> |
| <span data-ttu-id="deadc-227">Czas wygaśnięcia</span><span class="sxs-lookup"><span data-stu-id="deadc-227">Expiry time</span></span> |`se=2015-04-30T02%3A23%3A26Z` |<span data-ttu-id="deadc-228">Określona w formacie UTC.</span><span class="sxs-lookup"><span data-stu-id="deadc-228">Specified in UTC time.</span></span> |
| <span data-ttu-id="deadc-229">Zasób</span><span class="sxs-lookup"><span data-stu-id="deadc-229">Resource</span></span> |`sr=b` |<span data-ttu-id="deadc-230">zasób Hello jest obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="deadc-230">hello resource is a blob.</span></span> |
| <span data-ttu-id="deadc-231">Uprawnienia</span><span class="sxs-lookup"><span data-stu-id="deadc-231">Permissions</span></span> |`sp=rw` |<span data-ttu-id="deadc-232">Witaj uprawnienia przyznane przez hello SAS obejmują Read (r) i zapisu (w).</span><span class="sxs-lookup"><span data-stu-id="deadc-232">hello permissions granted by hello SAS include Read (r) and Write (w).</span></span> |
| <span data-ttu-id="deadc-233">Zakres adresów IP</span><span class="sxs-lookup"><span data-stu-id="deadc-233">IP range</span></span> |`sip=168.1.5.60-168.1.5.70` |<span data-ttu-id="deadc-234">Witaj zakres adresów IP, z których będą akceptowane żądania.</span><span class="sxs-lookup"><span data-stu-id="deadc-234">hello range of IP addresses from which a request will be accepted.</span></span> |
| <span data-ttu-id="deadc-235">Protokół</span><span class="sxs-lookup"><span data-stu-id="deadc-235">Protocol</span></span> |`spr=https` |<span data-ttu-id="deadc-236">Dozwolone są tylko żądania przy użyciu protokołu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="deadc-236">Only requests using HTTPS are permitted.</span></span> |
| <span data-ttu-id="deadc-237">Podpis</span><span class="sxs-lookup"><span data-stu-id="deadc-237">Signature</span></span> |`sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D` |<span data-ttu-id="deadc-238">Używane tooauthenticate dostępu toohello blob.</span><span class="sxs-lookup"><span data-stu-id="deadc-238">Used tooauthenticate access toohello blob.</span></span> <span data-ttu-id="deadc-239">Podpis Hello jest HMAC obliczona ciąg do logowania i klucz przy użyciu algorytm SHA256 hello, a następnie kodowany w formacie Base64.</span><span class="sxs-lookup"><span data-stu-id="deadc-239">hello signature is an HMAC computed over a string-to-sign and key using hello SHA256 algorithm, and then encoded using Base64 encoding.</span></span> |

### <a name="account-sas-uri-example"></a><span data-ttu-id="deadc-240">Przykład identyfikatora URI połączenia SAS konta</span><span class="sxs-lookup"><span data-stu-id="deadc-240">Account SAS URI example</span></span>

<span data-ttu-id="deadc-241">Oto przykład konta SAS czy używa hello tego samego typowych parametrów w tokenie hello.</span><span class="sxs-lookup"><span data-stu-id="deadc-241">Here is an example of an account SAS that uses hello same common parameters on hello token.</span></span> <span data-ttu-id="deadc-242">Ponieważ te parametry są opisane powyżej, ich nie zostały opisane w tym miejscu.</span><span class="sxs-lookup"><span data-stu-id="deadc-242">Since these parameters are described above, they are not described here.</span></span> <span data-ttu-id="deadc-243">Tylko hello parametrów, które są określone tooaccount, SAS są opisane w poniższej tabeli hello.</span><span class="sxs-lookup"><span data-stu-id="deadc-243">Only hello parameters that are specific tooaccount SAS are described in hello table below.</span></span>

```
https://myaccount.blob.core.windows.net/?restype=service&comp=properties&sv=2015-04-05&ss=bf&srt=s&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=F%6GRVAZ5Cdj2Pw4tgU7IlSTkWgn7bUkkAg8P6HESXwmf%4B
```

| <span data-ttu-id="deadc-244">Nazwa</span><span class="sxs-lookup"><span data-stu-id="deadc-244">Name</span></span> | <span data-ttu-id="deadc-245">Część SAS</span><span class="sxs-lookup"><span data-stu-id="deadc-245">SAS portion</span></span> | <span data-ttu-id="deadc-246">Opis</span><span class="sxs-lookup"><span data-stu-id="deadc-246">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="deadc-247">Identyfikator URI zasobu</span><span class="sxs-lookup"><span data-stu-id="deadc-247">Resource URI</span></span> |`https://myaccount.blob.core.windows.net/?restype=service&comp=properties` |<span data-ttu-id="deadc-248">Witaj punkt końcowy usługi Blob, wraz z parametrami pobierania właściwości usługi (jeśli jest wywoływana z GET) lub właściwości usługi (jeśli jest wywoływana z ZESTAWEM).</span><span class="sxs-lookup"><span data-stu-id="deadc-248">hello Blob service endpoint, with parameters for getting service properties (when called with GET) or setting service properties (when called with SET).</span></span> |
| <span data-ttu-id="deadc-249">Usługi</span><span class="sxs-lookup"><span data-stu-id="deadc-249">Services</span></span> |`ss=bf` |<span data-ttu-id="deadc-250">Hello SAS dotyczy toohello obiektów Blob oraz usługi plików</span><span class="sxs-lookup"><span data-stu-id="deadc-250">hello SAS applies toohello Blob and File services</span></span> |
| <span data-ttu-id="deadc-251">Typy zasobów</span><span class="sxs-lookup"><span data-stu-id="deadc-251">Resource types</span></span> |`srt=s` |<span data-ttu-id="deadc-252">Witaj SAS dotyczy operacji na poziomie tooservice.</span><span class="sxs-lookup"><span data-stu-id="deadc-252">hello SAS applies tooservice-level operations.</span></span> |
| <span data-ttu-id="deadc-253">Uprawnienia</span><span class="sxs-lookup"><span data-stu-id="deadc-253">Permissions</span></span> |`sp=rw` |<span data-ttu-id="deadc-254">uprawnienia Hello udzielić dostępu tooread i operacji zapisu.</span><span class="sxs-lookup"><span data-stu-id="deadc-254">hello permissions grant access tooread and write operations.</span></span> |

<span data-ttu-id="deadc-255">Biorąc pod uwagę, że są ograniczone uprawnienia toohello poziomu usługi, dostępne operacje przy użyciu tego skojarzenia zabezpieczeń są **pobrać właściwości usługi Blob** (odczyt) i **ustawić właściwości usługi Blob** (zapis).</span><span class="sxs-lookup"><span data-stu-id="deadc-255">Given that permissions are restricted toohello service level, accessible operations with this SAS are **Get Blob Service Properties** (read) and **Set Blob Service Properties** (write).</span></span> <span data-ttu-id="deadc-256">Jednak z zasobem inny identyfikator URI hello tego samego tokenu sygnatury dostępu Współdzielonego mogą być również używane toodelegate dostępu zbyt**uzyskać statystyki usługi Blob** (odczyt).</span><span class="sxs-lookup"><span data-stu-id="deadc-256">However, with a different resource URI, hello same SAS token could also be used toodelegate access too**Get Blob Service Stats** (read).</span></span>

## <a name="controlling-a-sas-with-a-stored-access-policy"></a><span data-ttu-id="deadc-257">Kontrolowanie SAS z zasadami dostępu przechowywane</span><span class="sxs-lookup"><span data-stu-id="deadc-257">Controlling a SAS with a stored access policy</span></span>
<span data-ttu-id="deadc-258">Sygnatury dostępu współdzielonego, można wykonać jedną z dwóch formach:</span><span class="sxs-lookup"><span data-stu-id="deadc-258">A shared access signature can take one of two forms:</span></span>

* <span data-ttu-id="deadc-259">**Ad hoc sygnatury dostępu Współdzielonego:** podczas tworzenia sygnatury dostępu Współdzielonego ad hoc, godzina rozpoczęcia hello, czas wygaśnięcia i uprawnienia dla hello SAS są określone w hello identyfikatora URI połączenia SAS (lub domniemanych, w przypadku hello, gdy zostanie pominięty czas rozpoczęcia).</span><span class="sxs-lookup"><span data-stu-id="deadc-259">**Ad hoc SAS:** When you create an ad hoc SAS, hello start time, expiry time, and permissions for hello SAS are all specified in hello SAS URI (or implied, in hello case where start time is omitted).</span></span> <span data-ttu-id="deadc-260">Ten typ sygnatury dostępu Współdzielonego można utworzyć jako konto SAS lub sygnatury dostępu Współdzielonego usługi.</span><span class="sxs-lookup"><span data-stu-id="deadc-260">This type of SAS can be created as an account SAS or a service SAS.</span></span>
* <span data-ttu-id="deadc-261">**Sygnatury dostępu Współdzielonego z zasad dostępu przechowywanej:** zasady dostępu do przechowywanych jest zdefiniowany w kontenerze zasobów--kontenera obiektów blob, tabeli, kolejki, lub udziału--plików i mogą być używane toomanage ograniczenia dla co najmniej jeden sygnatur dostępu współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-261">**SAS with stored access policy:** A stored access policy is defined on a resource container--a blob container, table, queue, or file share--and can be used toomanage constraints for one or more shared access signatures.</span></span> <span data-ttu-id="deadc-262">Po skojarzeniu sygnatury dostępu Współdzielonego za pomocą zasad dostępu przechowywane, hello SAS dziedziczy ograniczenia hello — czas rozpoczęcia hello, czas wygaśnięcia i uprawnień — zdefiniowane zasady dostępu hello przechowywane.</span><span class="sxs-lookup"><span data-stu-id="deadc-262">When you associate a SAS with a stored access policy, hello SAS inherits hello constraints--hello start time, expiry time, and permissions--defined for hello stored access policy.</span></span>

> [!NOTE]
> <span data-ttu-id="deadc-263">Obecnie sygnatura dostępu Współdzielonego konta musi być SAS ad hoc.</span><span class="sxs-lookup"><span data-stu-id="deadc-263">Currently, an account SAS must be an ad hoc SAS.</span></span> <span data-ttu-id="deadc-264">Przechowywane dostępu, zasady nie są jeszcze obsługiwane dla konta sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-264">Stored access policies are not yet supported for account SAS.</span></span>

<span data-ttu-id="deadc-265">Witaj różnica pomiędzy formularzami Witaj dwie ważne jest jeden scenariusz klucza: odwołania.</span><span class="sxs-lookup"><span data-stu-id="deadc-265">hello difference between hello two forms is important for one key scenario: revocation.</span></span> <span data-ttu-id="deadc-266">Ponieważ identyfikator URI sygnatury dostępu Współdzielonego jest adres URL, każdy użytkownik, który uzyskuje hello SAS może być używany, niezależnie od tego, który został pierwotnie utworzony.</span><span class="sxs-lookup"><span data-stu-id="deadc-266">Because a SAS URI is a URL, anyone that obtains hello SAS can use it, regardless of who originally created it.</span></span> <span data-ttu-id="deadc-267">Sygnatury dostępu Współdzielonego zostanie opublikowana publicznie, może służyć każdy hello world.</span><span class="sxs-lookup"><span data-stu-id="deadc-267">If a SAS is published publicly, it can be used by anyone in hello world.</span></span> <span data-ttu-id="deadc-268">Sygnatury dostępu Współdzielonego udziela dostępu tooresources tooanyone posiadającym go, dopóki jedna z następujących czterech zdarzeń sytuacji:</span><span class="sxs-lookup"><span data-stu-id="deadc-268">A SAS grants access tooresources tooanyone possessing it until one of four things happens:</span></span>

1. <span data-ttu-id="deadc-269">czas wygaśnięcia Hello określony na powitania osiągnięty sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-269">hello expiry time specified on hello SAS is reached.</span></span>
2. <span data-ttu-id="deadc-270">czas wygaśnięcia Hello określone zasady dostępu hello przechowywane odwołuje się hello osiągnięty SAS (jeśli istnieje odwołanie do zasad dostępu do przechowywanych i określa czas wygaśnięcia).</span><span class="sxs-lookup"><span data-stu-id="deadc-270">hello expiry time specified on hello stored access policy referenced by hello SAS is reached (if a stored access policy is referenced, and if it specifies an expiry time).</span></span> <span data-ttu-id="deadc-271">Może to występować, ponieważ hello czasu lub zmodyfikowano zasady dostępu hello przechowywane z upływem czasu w przeszłości, hello, czyli hello toorevoke jednokierunkowych SAS.</span><span class="sxs-lookup"><span data-stu-id="deadc-271">This can occur either because hello interval elapses, or because you've modified hello stored access policy with an expiry time in hello past, which is one way toorevoke hello SAS.</span></span>
3. <span data-ttu-id="deadc-272">Witaj przechowywane odwołuje hello SAS jest usuwane, który jest inny sposób hello toorevoke SAS zasad dostępu.</span><span class="sxs-lookup"><span data-stu-id="deadc-272">hello stored access policy referenced by hello SAS is deleted, which is another way toorevoke hello SAS.</span></span> <span data-ttu-id="deadc-273">Należy pamiętać, że jeśli dokładnie ponownego tworzenia zasad dostępu hello przechowywane z tej samej nazwy, wszystkie istniejące SAS hello tokeny będą ponownie prawidłowe uprawnienia zgodnie z toohello skojarzone z tej zasady dostępu do przechowywanych (przy założeniu, że czas wygaśnięcia hello na powitania nie przeszło SAS).</span><span class="sxs-lookup"><span data-stu-id="deadc-273">Note that if you recreate hello stored access policy with exactly hello same name, all existing SAS tokens will again be valid according toohello permissions associated with that stored access policy (assuming that hello expiry time on hello SAS has not passed).</span></span> <span data-ttu-id="deadc-274">Czy mają zostać toorevoke hello SAS, mieć czy toouse inną nazwę ponownego tworzenia zasad dostępu hello z upływem czasu w przyszłości hello.</span><span class="sxs-lookup"><span data-stu-id="deadc-274">If you are intending toorevoke hello SAS, be sure toouse a different name if you recreate hello access policy with an expiry time in hello future.</span></span>
4. <span data-ttu-id="deadc-275">ponownego wygenerowania klucza konta Hello, który był używany toocreate hello SAS.</span><span class="sxs-lookup"><span data-stu-id="deadc-275">hello account key that was used toocreate hello SAS is regenerated.</span></span> <span data-ttu-id="deadc-276">Trwa ponowne generowanie klucza konta spowoduje, że wszystkie składniki aplikacji przy użyciu tego klucza toofail tooauthenticate dopóki te są aktualizowane toouse hello albo inne klucz prawidłowe konto lub hello konta nowo wygenerowano ponownie klucz.</span><span class="sxs-lookup"><span data-stu-id="deadc-276">Regenerating an account key will cause all application components using that key toofail tooauthenticate until they're updated toouse either hello other valid account key or hello newly regenerated account key.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="deadc-277">Identyfikator URI sygnatury dostępu współdzielonego jest skojarzony z sygnaturą hello klucza toocreate używane konto hello i hello skojarzonych zasad dostępu przechowywanych (jeśli istnieje).</span><span class="sxs-lookup"><span data-stu-id="deadc-277">A shared access signature URI is associated with hello account key used toocreate hello signature, and hello associated stored access policy (if any).</span></span> <span data-ttu-id="deadc-278">Jeśli określono żadnych zasad dostępu przechowywane, hello tylko sposób toorevoke sygnatury dostępu współdzielonego jest klucz konta hello toochange.</span><span class="sxs-lookup"><span data-stu-id="deadc-278">If no stored access policy is specified, hello only way toorevoke a shared access signature is toochange hello account key.</span></span>

## <a name="authenticating-from-a-client-application-with-a-sas"></a><span data-ttu-id="deadc-279">Uwierzytelniania z aplikacji klienta z sygnatury dostępu Współdzielonego</span><span class="sxs-lookup"><span data-stu-id="deadc-279">Authenticating from a client application with a SAS</span></span>
<span data-ttu-id="deadc-280">Klient, który znajduje się w posiadaniu sygnatury dostępu Współdzielonego, można użyć hello SAS tooauthenticate żądanie konta magazynu, dla którego nie posiadają hello klucze konta.</span><span class="sxs-lookup"><span data-stu-id="deadc-280">A client who is in possession of a SAS can use hello SAS tooauthenticate a request against a storage account for which they do not possess hello account keys.</span></span> <span data-ttu-id="deadc-281">Sygnatury dostępu Współdzielonego może być uwzględniona w parametrach połączenia lub używana bezpośrednio z hello odpowiedniego konstruktora lub metody.</span><span class="sxs-lookup"><span data-stu-id="deadc-281">A SAS can be included in a connection string, or used directly from hello appropriate constructor or method.</span></span>

### <a name="using-a-sas-in-a-connection-string"></a><span data-ttu-id="deadc-282">W parametrach połączenia przy użyciu sygnatury dostępu Współdzielonego</span><span class="sxs-lookup"><span data-stu-id="deadc-282">Using a SAS in a connection string</span></span>
[!INCLUDE [storage-use-sas-in-connection-string-include](../../includes/storage-use-sas-in-connection-string-include.md)]

### <a name="using-a-sas-in-a-constructor-or-method"></a><span data-ttu-id="deadc-283">Przy użyciu sygnatury dostępu Współdzielonego w konstruktorze lub — metoda</span><span class="sxs-lookup"><span data-stu-id="deadc-283">Using a SAS in a constructor or method</span></span>
<span data-ttu-id="deadc-284">Kilka konstruktorów biblioteki klienta magazynu Azure i przeciążenia metody oferują parametrem sygnatury dostępu Współdzielonego, aby mógł uwierzytelnić żądania usługi toohello za pomocą sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-284">Several Azure Storage client library constructors and method overloads offer a SAS parameter, so that you can authenticate a request toohello service with a SAS.</span></span>

<span data-ttu-id="deadc-285">Na przykład tutaj identyfikator URI sygnatury dostępu Współdzielonego jest używane toocreate tooa odwołanie do blokowego obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="deadc-285">For example, here a SAS URI is used toocreate a reference tooa block blob.</span></span> <span data-ttu-id="deadc-286">Hello sygnatury dostępu Współdzielonego zapewnia hello poświadczeń tylko potrzebnych dla hello żądania.</span><span class="sxs-lookup"><span data-stu-id="deadc-286">hello SAS provides hello only credentials needed for hello request.</span></span> <span data-ttu-id="deadc-287">odwołanie obiektu blob bloku Hello są używane do operacji zapisu:</span><span class="sxs-lookup"><span data-stu-id="deadc-287">hello block blob reference is then used for a write operation:</span></span>

```csharp
string sasUri = "https://storagesample.blob.core.windows.net/sample-container/" +
    "sampleBlob.txt?sv=2015-07-08&sr=b&sig=39Up9JzHkxhUIhFEjEH9594DJxe7w6cIRCg0V6lCGSo%3D" +
    "&se=2016-10-18T21%3A51%3A37Z&sp=rcw";

CloudBlockBlob blob = new CloudBlockBlob(new Uri(sasUri));

// Create operation: Upload a blob with hello specified name toohello container.
// If hello blob does not exist, it will be created. If it does exist, it will be overwritten.
try
{
    MemoryStream msWrite = new MemoryStream(Encoding.UTF8.GetBytes(blobContent));
    msWrite.Position = 0;
    using (msWrite)
    {
        await blob.UploadFromStreamAsync(msWrite);
    }

    Console.WriteLine("Create operation succeeded for SAS {0}", sasUri);
    Console.WriteLine();
}
catch (StorageException e)
{
    if (e.RequestInformation.HttpStatusCode == 403)
    {
        Console.WriteLine("Create operation failed for SAS {0}", sasUri);
        Console.WriteLine("Additional error information: " + e.Message);
        Console.WriteLine();
    }
    else
    {
        Console.WriteLine(e.Message);
        Console.ReadLine();
        throw;
    }
}

```

## <a name="best-practices-when-using-sas"></a><span data-ttu-id="deadc-288">Najlepsze rozwiązania przy użyciu sygnatury dostępu Współdzielonego</span><span class="sxs-lookup"><span data-stu-id="deadc-288">Best practices when using SAS</span></span>
<span data-ttu-id="deadc-289">Korzystając z sygnatury dostępu współdzielonego w aplikacji, należy toobe pamiętać o dwa potencjalne zagrożenia:</span><span class="sxs-lookup"><span data-stu-id="deadc-289">When you use shared access signatures in your applications, you need toobe aware of two potential risks:</span></span>

* <span data-ttu-id="deadc-290">Przeciek sygnatury dostępu Współdzielonego może służyć każdego, kto uzyskuje, które potencjalnie może naruszyć bezpieczeństwo Twojego konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="deadc-290">If a SAS is leaked, it can be used by anyone who obtains it, which can potentially compromise your storage account.</span></span>
* <span data-ttu-id="deadc-291">Jeśli aplikacja kliencka tooa wygaśnie, a aplikacja hello jest tooretrieve nowe SAS z usługi sygnatury dostępu Współdzielonego, można utrudniona funkcjonalność aplikacji hello.</span><span class="sxs-lookup"><span data-stu-id="deadc-291">If a SAS provided tooa client application expires and hello application is unable tooretrieve a new SAS from your service, then hello application's functionality may be hindered.</span></span>

<span data-ttu-id="deadc-292">Witaj poniższe zalecenia dotyczące używania sygnatur dostępu współdzielonego mogą pomóc ograniczyć te zagrożenia:</span><span class="sxs-lookup"><span data-stu-id="deadc-292">hello following recommendations for using shared access signatures can help mitigate these risks:</span></span>

1. <span data-ttu-id="deadc-293">**Zawsze używać protokołu HTTPS** toocreate lub rozkładanie sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-293">**Always use HTTPS** toocreate or distribute a SAS.</span></span> <span data-ttu-id="deadc-294">Sygnatury dostępu Współdzielonego jest przekazywane za pośrednictwem protokołu HTTP, przechwycone osoba przeprowadzająca atak typu man-in--middle jest możliwe tooread hello SAS, a następnie użyć jej w tak samo, jak hello przeznaczone się, że użytkownik może mieć potencjalnie również dane poufne lub dopuszczające uszkodzenia danych hello złośliwy użytkownik.</span><span class="sxs-lookup"><span data-stu-id="deadc-294">If a SAS is passed over HTTP and intercepted, an attacker performing a man-in-the-middle attack is able tooread hello SAS and then use it just as hello intended user could have, potentially compromising sensitive data or allowing for data corruption by hello malicious user.</span></span>
2. <span data-ttu-id="deadc-295">**Odwołanie przechowywane zasady dostępu, jeśli jest to możliwe.**</span><span class="sxs-lookup"><span data-stu-id="deadc-295">**Reference stored access policies where possible.**</span></span> <span data-ttu-id="deadc-296">Przechowywane hello opcja toorevoke uprawnienia bez konieczności klucze konta magazynu hello tooregenerate podać zasad dostępu.</span><span class="sxs-lookup"><span data-stu-id="deadc-296">Stored access policies give you hello option toorevoke permissions without having tooregenerate hello storage account keys.</span></span> <span data-ttu-id="deadc-297">Ustaw wygaśnięcia hello na bardzo daleko w hello przyszłych (lub nieskończone) i zapewnić, że regularnie zaktualizował toomove go dalej do przyszłych hello.</span><span class="sxs-lookup"><span data-stu-id="deadc-297">Set hello expiration on these very far in hello future (or infinite) and make sure it's regularly updated toomove it farther into hello future.</span></span>
3. <span data-ttu-id="deadc-298">**Użyj najbliższej przyszłości czas wygaśnięcia na ad hoc SAS.**</span><span class="sxs-lookup"><span data-stu-id="deadc-298">**Use near-term expiration times on an ad hoc SAS.**</span></span> <span data-ttu-id="deadc-299">W ten sposób nawet w przypadku złamania zabezpieczeń sygnatury dostępu Współdzielonego, jest prawidłowa tylko dla przez krótki czas.</span><span class="sxs-lookup"><span data-stu-id="deadc-299">In this way, even if a SAS is compromised, it's valid only for a short time.</span></span> <span data-ttu-id="deadc-300">Takie rozwiązanie jest szczególnie ważne, jeśli nie może odwoływać się zasady dostępu do przechowywanych.</span><span class="sxs-lookup"><span data-stu-id="deadc-300">This practice is especially important if you cannot reference a stored access policy.</span></span> <span data-ttu-id="deadc-301">Czas wygaśnięcia najbliższej przyszłości także ograniczać hello ilość danych, które mogą być zapisywane tooa blob ograniczając hello czas dostępne tooupload tooit.</span><span class="sxs-lookup"><span data-stu-id="deadc-301">Near-term expiration times also limit hello amount of data that can be written tooa blob by limiting hello time available tooupload tooit.</span></span>
4. <span data-ttu-id="deadc-302">**Mieć automatycznie odnawiaj hello SAS w razie potrzeby klientów.**</span><span class="sxs-lookup"><span data-stu-id="deadc-302">**Have clients automatically renew hello SAS if necessary.**</span></span> <span data-ttu-id="deadc-303">Klientów należy odnawiać hello SAS oraz przed wygaśnięciem hello, w kolejności czas tooallow ponownych prób, jeśli usługa hello dostarczanie hello SAS jest niedostępna.</span><span class="sxs-lookup"><span data-stu-id="deadc-303">Clients should renew hello SAS well before hello expiration, in order tooallow time for retries if hello service providing hello SAS is unavailable.</span></span> <span data-ttu-id="deadc-304">Jeśli Twoje SAS oznacza toobe używany dla niewielkiej liczby natychmiastowe, tej operacji, które są oczekiwane toobe zakończona w ciągu okresu wygaśnięcia hello, a następnie może to być konieczne, gdyż hello, który nie jest oczekiwany toobe odnowiony.</span><span class="sxs-lookup"><span data-stu-id="deadc-304">If your SAS is meant toobe used for a small number of immediate, short-lived operations that are expected toobe completed within hello expiration period, then this may be unnecessary as hello SAS is not expected toobe renewed.</span></span> <span data-ttu-id="deadc-305">Jednak jeśli klient, który jest regularnie wysyłający żądania za pomocą sygnatury dostępu Współdzielonego, następnie hello możliwości wygaśnięcia wejścia play.</span><span class="sxs-lookup"><span data-stu-id="deadc-305">However, if you have client that is routinely making requests via SAS, then hello possibility of expiration comes into play.</span></span> <span data-ttu-id="deadc-306">Hello kluczowa jest konieczność hello toobalance hello SAS toobe krótkotrwałą (jak wcześniej wspomniano) z tooensure potrzeby hello, który hello klienta żąda wczesne odnawiania za mało (tooavoid przerw w działaniu powodu toohello SAS wygasające przed toosuccessful odnawiania).</span><span class="sxs-lookup"><span data-stu-id="deadc-306">hello key consideration is toobalance hello need for hello SAS toobe short-lived (as previously stated) with hello need tooensure that hello client is requesting renewal early enough (tooavoid disruption due toohello SAS expiring prior toosuccessful renewal).</span></span>
5. <span data-ttu-id="deadc-307">**Należy zachować ostrożność, czas rozpoczęcia sygnatury dostępu Współdzielonego.**</span><span class="sxs-lookup"><span data-stu-id="deadc-307">**Be careful with SAS start time.**</span></span> <span data-ttu-id="deadc-308">Należy ustawić czas rozpoczęcia hello na sygnatury dostępu Współdzielonego za**teraz**, następnie powodu zegara tooclock (różnice w bieżącej godziny zgodnie z maszyny toodifferent), błędy można zaobserwować sporadycznie dla hello pierwszych kilku minut.</span><span class="sxs-lookup"><span data-stu-id="deadc-308">If you set hello start time for a SAS too**now**, then due tooclock skew (differences in current time according toodifferent machines), failures may be observed intermittently for hello first few minutes.</span></span> <span data-ttu-id="deadc-309">Ogólnie rzecz biorąc Ustaw toobe czas rozpoczęcia hello co najmniej 15 minut w przeszłości hello.</span><span class="sxs-lookup"><span data-stu-id="deadc-309">In general, set hello start time toobe at least 15 minutes in hello past.</span></span> <span data-ttu-id="deadc-310">Lub nie należy ustawiać go, który ułatwi prawidłowe natychmiast we wszystkich przypadkach.</span><span class="sxs-lookup"><span data-stu-id="deadc-310">Or, don't set it at all, which will make it valid immediately in all cases.</span></span> <span data-ttu-id="deadc-311">zwykle dotyczy to również — czas tooexpiry Hello należy pamiętać, że można zaobserwować się too15 minut zegara pochylenia w żadnym kierunku na każde żądanie.</span><span class="sxs-lookup"><span data-stu-id="deadc-311">hello same generally applies tooexpiry time as well--remember that you may observe up too15 minutes of clock skew in either direction on any request.</span></span> <span data-ttu-id="deadc-312">W przypadku klientów przy użyciu REST wersji wcześniejszych too2012-02-12 hello maksymalny czas trwania SAS, która nie odwołuje się do zasad dostępu do przechowywanych jest 1 godziny, a wszystkie zasady Określanie długoterminowych niż który zakończy się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="deadc-312">For clients using a REST version prior too2012-02-12, hello maximum duration for a SAS that does not reference a stored access policy is 1 hour, and any policies specifying longer term than that will fail.</span></span>
6. <span data-ttu-id="deadc-313">**Być określonych toobe zasobów hello dostęp.**</span><span class="sxs-lookup"><span data-stu-id="deadc-313">**Be specific with hello resource toobe accessed.**</span></span> <span data-ttu-id="deadc-314">Najlepszym rozwiązaniem bezpieczeństwa jest tooprovide użytkownika z hello minimalne wymagane uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="deadc-314">A security best practice is tooprovide a user with hello minimum required privileges.</span></span> <span data-ttu-id="deadc-315">Jeśli użytkownik potrzebuje tylko pojedynczy element tooa dostęp do odczytu, nadawaj im dostęp do odczytu toothat pojedynczej jednostki i jednostki tooall dostępu nie odczytu/zapisu/usuwania.</span><span class="sxs-lookup"><span data-stu-id="deadc-315">If a user only needs read access tooa single entity, then grant them read access toothat single entity, and not read/write/delete access tooall entities.</span></span> <span data-ttu-id="deadc-316">Ułatwia to również zmniejszyć hello uszkodzenia, jeśli sygnatury dostępu Współdzielonego zostanie naruszony, ponieważ hello SAS ma mniej energii w ręce hello osoby atakującej, która.</span><span class="sxs-lookup"><span data-stu-id="deadc-316">This also helps lessen hello damage if a SAS is compromised because hello SAS has less power in hello hands of an attacker.</span></span>
7. <span data-ttu-id="deadc-317">**Dowiedz się, że Twoje konto będą naliczane za bez użycia, w tym odbywa się za pomocą sygnatury dostępu Współdzielonego.**</span><span class="sxs-lookup"><span data-stu-id="deadc-317">**Understand that your account will be billed for any usage, including that done with SAS.**</span></span> <span data-ttu-id="deadc-318">Jeśli podasz blob tooa dostęp do zapisu, użytkownik może wybrać tooupload obiektu blob 200GB.</span><span class="sxs-lookup"><span data-stu-id="deadc-318">If you provide write access tooa blob, a user may choose tooupload a 200GB blob.</span></span> <span data-ttu-id="deadc-319">Jeśli zostały podane je również dostęp do odczytu, mogą one toodownload 10 razy zaciąganie 2 TB wyjście kosztuje dla Ciebie.</span><span class="sxs-lookup"><span data-stu-id="deadc-319">If you've given them read access as well, they may choose toodownload it 10 times, incurring 2 TB in egress costs for you.</span></span> <span data-ttu-id="deadc-320">Ponownie, podaj ograniczone uprawnienia toohelp ograniczyć potencjalne akcje hello złośliwych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="deadc-320">Again, provide limited permissions toohelp mitigate hello potential actions of malicious users.</span></span> <span data-ttu-id="deadc-321">Użyj tej tooreduce sygnatury dostępu Współdzielonego to zagrożenie (ale być świadoma zegara na czas zakończenia hello).</span><span class="sxs-lookup"><span data-stu-id="deadc-321">Use short-lived SAS tooreduce this threat (but be mindful of clock skew on hello end time).</span></span>
8. <span data-ttu-id="deadc-322">**Sprawdzanie poprawności danych napisane przy użyciu sygnatury dostępu Współdzielonego.**</span><span class="sxs-lookup"><span data-stu-id="deadc-322">**Validate data written using SAS.**</span></span> <span data-ttu-id="deadc-323">Gdy aplikacja kliencka zapisuje konta magazynu tooyour danych, należy pamiętać, że mogą być problemy z tymi danymi.</span><span class="sxs-lookup"><span data-stu-id="deadc-323">When a client application writes data tooyour storage account, keep in mind that there can be problems with that data.</span></span> <span data-ttu-id="deadc-324">Jeśli aplikacja wymaga, aby czy danych można sprawdzić poprawności lub autoryzacji, zanim zostanie toouse gotowe, możesz wykonać tej weryfikacji po zapisaniu hello danych i zanim zostanie on użyty przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="deadc-324">If your application requires that that data be validated or authorized before it is ready toouse, you should perform this validation after hello data is written and before it is used by your application.</span></span> <span data-ttu-id="deadc-325">Takie rozwiązanie chroni także uszkodzony lub złośliwymi danych zapisywanych tooyour konta przez użytkownika, który prawidłowo nabyte hello SAS lub przez użytkownika, wykorzystaniu ujawnione sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-325">This practice also protects against corrupt or malicious data being written tooyour account, either by a user who properly acquired hello SAS, or by a user exploiting a leaked SAS.</span></span>
9. <span data-ttu-id="deadc-326">**Nie używaj sygnatury dostępu Współdzielonego.**</span><span class="sxs-lookup"><span data-stu-id="deadc-326">**Don't always use SAS.**</span></span> <span data-ttu-id="deadc-327">Czasami hello ryzyko związane z określoną operację względem konta magazynu przeważają korzyści hello SAS.</span><span class="sxs-lookup"><span data-stu-id="deadc-327">Sometimes hello risks associated with a particular operation against your storage account outweigh hello benefits of SAS.</span></span> <span data-ttu-id="deadc-328">W takich operacjach Tworzenie usługi warstwy środkowej, która zapisuje konta magazynu tooyour po wykonaniu firm reguły sprawdzania poprawności, uwierzytelnianie i inspekcji.</span><span class="sxs-lookup"><span data-stu-id="deadc-328">For such operations, create a middle-tier service that writes tooyour storage account after performing business rule validation, authentication, and auditing.</span></span> <span data-ttu-id="deadc-329">Czasami jest także prostsze dostępu toomanage w inny sposób.</span><span class="sxs-lookup"><span data-stu-id="deadc-329">Also, sometimes it's simpler toomanage access in other ways.</span></span> <span data-ttu-id="deadc-330">Na przykład, jeśli chcesz toomake wszystkie obiekty BLOB w kontenerze publicznie do odczytu, możesz wprowadzić hello kontenera publicznego, zamiast zapewnienie dostępu klienta tooevery sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-330">For example, if you want toomake all blobs in a container publically readable, you can make hello container Public, rather than providing a SAS tooevery client for access.</span></span>
10. <span data-ttu-id="deadc-331">**Za pomocą toomonitor analityka magazynu aplikacji.**</span><span class="sxs-lookup"><span data-stu-id="deadc-331">**Use Storage Analytics toomonitor your application.**</span></span> <span data-ttu-id="deadc-332">Umożliwia rejestrowanie i metryki tooobserve chwilowo wzrastają wszelkie błędy uwierzytelniania powodu tooan awarii w sieci SAS dostawcy usługi toohello przypadkowego usunięcia lub zasady dostępu przechowywane.</span><span class="sxs-lookup"><span data-stu-id="deadc-332">You can use logging and metrics tooobserve any spike in authentication failures due tooan outage in your SAS provider service or toohello inadvertent removal of a stored access policy.</span></span> <span data-ttu-id="deadc-333">Zobacz hello [Blog zespołu usługi Magazyn Azure](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx) Aby uzyskać dodatkowe informacje.</span><span class="sxs-lookup"><span data-stu-id="deadc-333">See hello [Azure Storage Team Blog](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx) for additional information.</span></span>

## <a name="sas-examples"></a><span data-ttu-id="deadc-334">Przykłady SAS</span><span class="sxs-lookup"><span data-stu-id="deadc-334">SAS examples</span></span>
<span data-ttu-id="deadc-335">Poniżej przedstawiono kilka przykładów oba rodzaje sygnatur dostępu współdzielonego, sygnatura dostępu Współdzielonego konta i usługi.</span><span class="sxs-lookup"><span data-stu-id="deadc-335">Below are some examples of both types of shared access signatures, account SAS and service SAS.</span></span>

<span data-ttu-id="deadc-336">toorun tych C# przykładach trzeba hello tooreference następujące pakiety NuGet w projekcie:</span><span class="sxs-lookup"><span data-stu-id="deadc-336">toorun these C# examples, you need tooreference hello following NuGet packages in your project:</span></span>

* <span data-ttu-id="deadc-337">[Biblioteka klienta usługi Azure Storage dla platformy .NET](http://www.nuget.org/packages/WindowsAzure.Storage), wersja 6.x lub nowszego (toouse konto SAS).</span><span class="sxs-lookup"><span data-stu-id="deadc-337">[Azure Storage Client Library for .NET](http://www.nuget.org/packages/WindowsAzure.Storage), version 6.x or later (toouse account SAS).</span></span>
* [<span data-ttu-id="deadc-338">Azure Configuration Manager</span><span class="sxs-lookup"><span data-stu-id="deadc-338">Azure Configuration Manager</span></span>](http://www.nuget.org/packages/Microsoft.WindowsAzure.ConfigurationManager)

<span data-ttu-id="deadc-339">Aby uzyskać dodatkowe przykłady, które pokazują, jak toocreate i test sygnatury dostępu Współdzielonego, zobacz [przykłady kodu platformy Azure dla magazynu](https://azure.microsoft.com/documentation/samples/?service=storage).</span><span class="sxs-lookup"><span data-stu-id="deadc-339">For additional examples that show how toocreate and test a SAS, see [Azure Code Samples for Storage](https://azure.microsoft.com/documentation/samples/?service=storage).</span></span>

### <a name="example-create-and-use-an-account-sas"></a><span data-ttu-id="deadc-340">Przykład: Tworzenie i używanie sygnatury dostępu Współdzielonego konta</span><span class="sxs-lookup"><span data-stu-id="deadc-340">Example: Create and use an account SAS</span></span>
<span data-ttu-id="deadc-341">Witaj poniższy przykład kodu tworzy konto sygnatury dostępu Współdzielonego, który jest prawidłowy dla usług plików i hello obiektów Blob i zapewnia hello klienta uprawnienia do odczytu, zapisu i listy uprawnień poziomu usług tooaccess interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="deadc-341">hello following code example creates an account SAS that is valid for hello Blob and File services, and gives hello client permissions read, write, and list permissions tooaccess service-level APIs.</span></span> <span data-ttu-id="deadc-342">Sygnatura dostępu Współdzielonego konta Hello ogranicza tooHTTPS protokołu hello, więc Żądanie hello musi zostać wykonane z protokołu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="deadc-342">hello account SAS restricts hello protocol tooHTTPS, so hello request must be made with HTTPS.</span></span>

```csharp
static string GetAccountSASToken()
{
    // toocreate hello account SAS, you need toouse your shared key credentials. Modify for your account.
    const string ConnectionString = "DefaultEndpointsProtocol=https;AccountName=account-name;AccountKey=account-key";
    CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConnectionString);

    // Create a new access policy for hello account.
    SharedAccessAccountPolicy policy = new SharedAccessAccountPolicy()
        {
            Permissions = SharedAccessAccountPermissions.Read | SharedAccessAccountPermissions.Write | SharedAccessAccountPermissions.List,
            Services = SharedAccessAccountServices.Blob | SharedAccessAccountServices.File,
            ResourceTypes = SharedAccessAccountResourceTypes.Service,
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Protocols = SharedAccessProtocol.HttpsOnly
        };

    // Return hello SAS token.
    return storageAccount.GetSharedAccessSignature(policy);
}
```

<span data-ttu-id="deadc-343">tooaccess sygnatury dostępu Współdzielonego konta hello toouse poziomu usług interfejsów API usługi Blob hello, skonstruować obiektu Blob klienta przy użyciu sygnatury dostępu Współdzielonego hello i hello końcowego magazynu obiektów Blob dla konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="deadc-343">toouse hello account SAS tooaccess service-level APIs for hello Blob service, construct a Blob client object using hello SAS and hello Blob storage endpoint for your storage account.</span></span>

```csharp
static void UseAccountSAS(string sasToken)
{
    // Create new storage credentials using hello SAS token.
    StorageCredentials accountSAS = new StorageCredentials(sasToken);
    // Use these credentials and hello account name toocreate a Blob service client.
    CloudStorageAccount accountWithSAS = new CloudStorageAccount(accountSAS, "account-name", endpointSuffix: null, useHttps: true);
    CloudBlobClient blobClientWithSAS = accountWithSAS.CreateCloudBlobClient();

    // Now set hello service properties for hello Blob client created with hello SAS.
    blobClientWithSAS.SetServiceProperties(new ServiceProperties()
    {
        HourMetrics = new MetricsProperties()
        {
            MetricsLevel = MetricsLevel.ServiceAndApi,
            RetentionDays = 7,
            Version = "1.0"
        },
        MinuteMetrics = new MetricsProperties()
        {
            MetricsLevel = MetricsLevel.ServiceAndApi,
            RetentionDays = 7,
            Version = "1.0"
        },
        Logging = new LoggingProperties()
        {
            LoggingOperations = LoggingOperations.All,
            RetentionDays = 14,
            Version = "1.0"
        }
    });

    // hello permissions granted by hello account SAS also permit you tooretrieve service properties.
    ServiceProperties serviceProperties = blobClientWithSAS.GetServiceProperties();
    Console.WriteLine(serviceProperties.HourMetrics.MetricsLevel);
    Console.WriteLine(serviceProperties.HourMetrics.RetentionDays);
    Console.WriteLine(serviceProperties.HourMetrics.Version);
}
```

### <a name="example-create-a-stored-access-policy"></a><span data-ttu-id="deadc-344">Przykład: Tworzenie zasad dostępu przechowywane</span><span class="sxs-lookup"><span data-stu-id="deadc-344">Example: Create a stored access policy</span></span>
<span data-ttu-id="deadc-345">Witaj poniższy kod tworzy zasady przechowywane dostępu do kontenera.</span><span class="sxs-lookup"><span data-stu-id="deadc-345">hello following code creates a stored access policy on a container.</span></span> <span data-ttu-id="deadc-346">Można użyć ograniczenia toospecify zasad dostępu hello sygnatury dostępu Współdzielonego w kontenerze hello usługi lub jego obiektów blob.</span><span class="sxs-lookup"><span data-stu-id="deadc-346">You can use hello access policy toospecify constraints for a service SAS on hello container or its blobs.</span></span>

```csharp
private static async Task CreateSharedAccessPolicyAsync(CloudBlobContainer container, string policyName)
{
    // Create a new shared access policy and define its constraints.
    // hello access policy provides create, write, read, list, and delete permissions.
    SharedAccessBlobPolicy sharedPolicy = new SharedAccessBlobPolicy()
    {
        // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
        // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
        SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
        Permissions = SharedAccessBlobPermissions.Read | SharedAccessBlobPermissions.List |
            SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Create | SharedAccessBlobPermissions.Delete
    };

    // Get hello container's existing permissions.
    BlobContainerPermissions permissions = await container.GetPermissionsAsync();

    // Add hello new policy toohello container's permissions, and set hello container's permissions.
    permissions.SharedAccessPolicies.Add(policyName, sharedPolicy);
    await container.SetPermissionsAsync(permissions);
}
```

### <a name="example-create-a-service-sas-on-a-container"></a><span data-ttu-id="deadc-347">Przykład: Tworzenie usługi SAS w kontenerze</span><span class="sxs-lookup"><span data-stu-id="deadc-347">Example: Create a service SAS on a container</span></span>
<span data-ttu-id="deadc-348">Witaj następującego kodu tworzy sygnatury dostępu Współdzielonego w kontenerze.</span><span class="sxs-lookup"><span data-stu-id="deadc-348">hello following code creates a SAS on a container.</span></span> <span data-ttu-id="deadc-349">Jeśli podano nazwę hello istniejących zasad dostępu przechowywane, tej zasady są skojarzone z hello sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-349">If hello name of an existing stored access policy is provided, that policy is associated with hello SAS.</span></span> <span data-ttu-id="deadc-350">Jeśli nie zasady przechowywane dostępu, zostanie następnie hello kod tworzy SAS ad hoc na powitania kontenera.</span><span class="sxs-lookup"><span data-stu-id="deadc-350">If no stored access policy is provided, then hello code creates an ad-hoc SAS on hello container.</span></span>

```csharp
private static string GetContainerSasUri(CloudBlobContainer container, string storedPolicyName = null)
{
    string sasContainerToken;

    // If no stored policy is specified, create a new access policy and define its constraints.
    if (storedPolicyName == null)
    {
        // Note that hello SharedAccessBlobPolicy class is used both toodefine hello parameters of an ad-hoc SAS, and
        // tooconstruct a shared access policy that is saved toohello container's shared access policies.
        SharedAccessBlobPolicy adHocPolicy = new SharedAccessBlobPolicy()
        {
            // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
            // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Permissions = SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.List
        };

        // Generate hello shared access signature on hello container, setting hello constraints directly on hello signature.
        sasContainerToken = container.GetSharedAccessSignature(adHocPolicy, null);

        Console.WriteLine("SAS for blob container (ad hoc): {0}", sasContainerToken);
        Console.WriteLine();
    }
    else
    {
        // Generate hello shared access signature on hello container. In this case, all of hello constraints for the
        // shared access signature are specified on hello stored access policy, which is provided by name.
        // It is also possible toospecify some constraints on an ad-hoc SAS and others on hello stored access policy.
        sasContainerToken = container.GetSharedAccessSignature(null, storedPolicyName);

        Console.WriteLine("SAS for blob container (stored access policy): {0}", sasContainerToken);
        Console.WriteLine();
    }

    // Return hello URI string for hello container, including hello SAS token.
    return container.Uri + sasContainerToken;
}
```

### <a name="example-create-a-service-sas-on-a-blob"></a><span data-ttu-id="deadc-351">Przykład: Tworzenie sygnatury dostępu Współdzielonego usługi na obiektu blob</span><span class="sxs-lookup"><span data-stu-id="deadc-351">Example: Create a service SAS on a blob</span></span>
<span data-ttu-id="deadc-352">Hello następującego kodu tworzy SAS obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="deadc-352">hello following code creates a SAS on a blob.</span></span> <span data-ttu-id="deadc-353">Jeśli podano nazwę hello istniejących zasad dostępu przechowywane, tej zasady są skojarzone z hello sygnatury dostępu Współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="deadc-353">If hello name of an existing stored access policy is provided, that policy is associated with hello SAS.</span></span> <span data-ttu-id="deadc-354">Jeśli nie zasady przechowywane dostępu, zostanie następnie hello kod tworzy SAS ad hoc na powitania obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="deadc-354">If no stored access policy is provided, then hello code creates an ad-hoc SAS on hello blob.</span></span>

```csharp
private static string GetBlobSasUri(CloudBlobContainer container, string blobName, string policyName = null)
{
    string sasBlobToken;

    // Get a reference tooa blob within hello container.
    // Note that hello blob may not exist yet, but a SAS can still be created for it.
    CloudBlockBlob blob = container.GetBlockBlobReference(blobName);

    if (policyName == null)
    {
        // Create a new access policy and define its constraints.
        // Note that hello SharedAccessBlobPolicy class is used both toodefine hello parameters of an ad-hoc SAS, and
        // tooconstruct a shared access policy that is saved toohello container's shared access policies.
        SharedAccessBlobPolicy adHocSAS = new SharedAccessBlobPolicy()
        {
            // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
            // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Permissions = SharedAccessBlobPermissions.Read | SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Create
        };

        // Generate hello shared access signature on hello blob, setting hello constraints directly on hello signature.
        sasBlobToken = blob.GetSharedAccessSignature(adHocSAS);

        Console.WriteLine("SAS for blob (ad hoc): {0}", sasBlobToken);
        Console.WriteLine();
    }
    else
    {
        // Generate hello shared access signature on hello blob. In this case, all of hello constraints for the
        // shared access signature are specified on hello container's stored access policy.
        sasBlobToken = blob.GetSharedAccessSignature(null, policyName);

        Console.WriteLine("SAS for blob (stored access policy): {0}", sasBlobToken);
        Console.WriteLine();
    }

    // Return hello URI string for hello container, including hello SAS token.
    return blob.Uri + sasBlobToken;
}
```

## <a name="conclusion"></a><span data-ttu-id="deadc-355">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="deadc-355">Conclusion</span></span>
<span data-ttu-id="deadc-356">Sygnatury dostępu współdzielonego są przydatne zapewniające z ograniczonymi uprawnieniami tooyour tooclients konta magazynu, który nie powinien mieć hello klucz konta.</span><span class="sxs-lookup"><span data-stu-id="deadc-356">Shared access signatures are useful for providing limited permissions tooyour storage account tooclients that should not have hello account key.</span></span> <span data-ttu-id="deadc-357">Są one tak, to ważna część hello model zabezpieczeń dla dowolnej aplikacji przy użyciu usługi Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="deadc-357">As such, they are a vital part of hello security model for any application using Azure Storage.</span></span> <span data-ttu-id="deadc-358">Jeśli wykonujesz najlepszych rozwiązań hello wymienione w tym miejscu można użyć SAS tooprovide większą elastyczność tooresources dostępu na koncie magazynu bez naruszania zabezpieczeń hello aplikacji.</span><span class="sxs-lookup"><span data-stu-id="deadc-358">If you follow hello best practices listed here, you can use SAS tooprovide greater flexibility of access tooresources in your storage account, without compromising hello security of your application.</span></span>

## <a name="next-steps"></a><span data-ttu-id="deadc-359">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="deadc-359">Next Steps</span></span>
* [<span data-ttu-id="deadc-360">Zarządzanie toocontainers anonimowy dostęp do odczytu i obiektów blob</span><span class="sxs-lookup"><span data-stu-id="deadc-360">Manage anonymous read access toocontainers and blobs</span></span>](storage-manage-access-to-resources.md)
* [<span data-ttu-id="deadc-361">Delegowanie dostępu za pomocą sygnatury dostępu współdzielonego</span><span class="sxs-lookup"><span data-stu-id="deadc-361">Delegating Access with a Shared Access Signature</span></span>](http://msdn.microsoft.com/library/azure/ee395415.aspx)
* [<span data-ttu-id="deadc-362">Wprowadzenie do tabeli i kolejki SAS</span><span class="sxs-lookup"><span data-stu-id="deadc-362">Introducing Table and Queue SAS</span></span>](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/introducing-table-sas-shared-access-signature-queue-sas-and-update-to-blob-sas.aspx)

[sas-storage-fe-proxy-service]: ./media/storage-dotnet-shared-access-signature-part-1/sas-storage-fe-proxy-service.png
[sas-storage-provider-service]: ./media/storage-dotnet-shared-access-signature-part-1/sas-storage-provider-service.png
[sas-storage-uri]: ./media/storage-dotnet-shared-access-signature-part-1/sas-storage-uri.png
