---
title: "aaaBackup i odzyskiwanie po awarii dla dysków IaaS platformy Azure | Dokumentacja firmy Microsoft"
description: "W tym artykule Wyjaśnijmy, jak tooplan kopii zapasowych i odzyskiwania awaryjnego (DR) maszyn wirtualnych IaaS (VM) i dyski na platformie Azure. W tym dokumencie opisano zarówno zarządzane i niezarządzane dysków"
services: storage
cloud: Azure
documentationcenter: na
author: luywang
manager: kavithag
ms.assetid: 
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/19/2017
ms.author: luywang
ms.openlocfilehash: 17c697bc411fb47c4b7483b59829af1c40732ac1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="backup-and-disaster-recovery-for-azure-iaas-disks"></a><span data-ttu-id="79e25-104">Kopia zapasowa i odzyskiwanie po awarii dla dysków IaaS platformy Azure</span><span class="sxs-lookup"><span data-stu-id="79e25-104">Backup and disaster recovery for Azure IaaS disks</span></span>

<span data-ttu-id="79e25-105">W tym artykule Wyjaśnijmy, jak tooplan kopii zapasowych i odzyskiwania awaryjnego (DR) maszyn wirtualnych IaaS (VM) i dyski na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="79e25-105">In this article, we will explain how tooplan for Backup and Disaster Recovery (DR) of IaaS virtual machines (VMs) and Disks in Azure.</span></span> <span data-ttu-id="79e25-106">W tym dokumencie opisano zarówno zarządzane i niezarządzane dysków.</span><span class="sxs-lookup"><span data-stu-id="79e25-106">This document covers both Managed and Unmanaged Disks.</span></span>

<span data-ttu-id="79e25-107">Zostanie najpierw omawianiu hello wbudowanych usterek tolerancji możliwości w hello platformy Azure umożliwiające ochronę przed awariami lokalnego.</span><span class="sxs-lookup"><span data-stu-id="79e25-107">We’ll first talk about hello built-in fault tolerance capabilities in hello Azure platform which help guard against local failures.</span></span> <span data-ttu-id="79e25-108">Następnie omówiono powitania po awarii scenariusze nie są w pełni objęte hello wbudowanych możliwości, czyli hello tematem głównym opisany w tym dokumencie.</span><span class="sxs-lookup"><span data-stu-id="79e25-108">We’ll then discuss hello disaster scenarios not fully covered by hello built-in capabilities, which is hello main topic addressed by this document.</span></span> <span data-ttu-id="79e25-109">Poniżej opisano również kilka przykładowe scenariusze obciążenie, gdzie może stosować inną uwagi dotyczące tworzenia kopii zapasowych i odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="79e25-109">We’ll also show several examples of workload scenarios where different Backup and DR considerations may apply.</span></span> <span data-ttu-id="79e25-110">Firma Microsoft może przejrzeć możliwych rozwiązań dla odzyskiwania po awarii dysków IaaS.</span><span class="sxs-lookup"><span data-stu-id="79e25-110">We’ll then review possible solutions for DR of IaaS Disks.</span></span> 

## <a name="introduction"></a><span data-ttu-id="79e25-111">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="79e25-111">Introduction</span></span>

<span data-ttu-id="79e25-112">Hello platformy Azure używa różne metody dla nadmiarowość i odporność na uszkodzenia toohelp ochrony klientów przed awariami sprzętu zlokalizowanego, które mogą wystąpić.</span><span class="sxs-lookup"><span data-stu-id="79e25-112">hello Azure platform uses various methods for redundancy and fault tolerance toohelp protect customers from localized hardware failures that can occur.</span></span> <span data-ttu-id="79e25-113">Błędy lokalne mogą obejmować problemy z maszyną serwera usługi Azure storage przechowujący część danych hello dysku wirtualnego lub w przypadku awarii dysków SSD i HDD na tym serwerze.</span><span class="sxs-lookup"><span data-stu-id="79e25-113">Local failures may include problems with an Azure storage server machine that stores part of hello data for a virtual disk or failures of an SSD or HDD on that server.</span></span> <span data-ttu-id="79e25-114">Takie błędy składnika izolowanego sprzętu może się zdarzyć, podczas wykonywania normalnych operacji i platforma hello jest zaprojektowana toobe odporność toothese błędów.</span><span class="sxs-lookup"><span data-stu-id="79e25-114">Such isolated hardware component failures can happen during normal operations and hello platform is designed toobe resilient toothese failures.</span></span> <span data-ttu-id="79e25-115">Główne awarii może spowodować błędy lub inaccessibility dużej liczby serwerów magazynu lub całe centrum danych.</span><span class="sxs-lookup"><span data-stu-id="79e25-115">Major disasters can result in failures or inaccessibility of a large numbers of storage servers or a whole datacenter.</span></span> <span data-ttu-id="79e25-116">Maszyn wirtualnych i dyski są zwykle chronione zlokalizowanych awarii, dodatkowe kroki są niezbędne tooprotect obciążenie region na poziomie awarii krytycznego (na przykład poważnej awarii), które mogą wpłynąć na Twojej maszyny Wirtualnej i dysków.</span><span class="sxs-lookup"><span data-stu-id="79e25-116">While your VMs and disks are normally protected from localized failures, additional steps are necessary tooprotect your workload from region-wide catastrophic failures (such as a major disaster) that can affect your VM and disks.</span></span>

<span data-ttu-id="79e25-117">Ponadto możliwość toohello błędów platformy, za pomocą powitania klienta aplikacji lub danych mogą wystąpić problemy.</span><span class="sxs-lookup"><span data-stu-id="79e25-117">In addition toohello possibility of platform failures, problems with hello customer application or data can occur.</span></span> <span data-ttu-id="79e25-118">Na przykład nowa wersja aplikacji mogą przypadkowo należy podziału, Zmień dane toohello.</span><span class="sxs-lookup"><span data-stu-id="79e25-118">For example, a new version of your application may inadvertently make a breaking change toohello data.</span></span> <span data-ttu-id="79e25-119">W takim przypadku można aplikacji hello toorevert i hello danych tooa wcześniejsze niż wersja zawierającego hello ostatniego znanego dobrego stanu.</span><span class="sxs-lookup"><span data-stu-id="79e25-119">In that case, you may want toorevert hello application and hello data tooa prior version containing hello last known good state.</span></span> <span data-ttu-id="79e25-120">Wymagane jest utrzymanie regularnych kopii zapasowych.</span><span class="sxs-lookup"><span data-stu-id="79e25-120">This requires maintaining regular backups.</span></span>

<span data-ttu-id="79e25-121">Regionalnej awarii należy wykonać kopię zapasową maszyn wirtualnych IaaS dysków tooa innego regionu.</span><span class="sxs-lookup"><span data-stu-id="79e25-121">For regional disaster recovery, you must backup your IaaS VM disks tooa different region.</span></span> 

<span data-ttu-id="79e25-122">Zanim przyjrzymy opcje tworzenia kopii zapasowych i odzyskiwania po awarii umożliwia recap kilku dostępnych metod obsługi zlokalizowanych awarii.</span><span class="sxs-lookup"><span data-stu-id="79e25-122">Before we look at Backup and DR options, let’s recap a few methods available for handling localized failures.</span></span>

### <a name="azure-iaas-resiliency"></a><span data-ttu-id="79e25-123">Odporność IaaS platformy Azure</span><span class="sxs-lookup"><span data-stu-id="79e25-123">Azure IaaS Resiliency</span></span>

<span data-ttu-id="79e25-124">*Odporność* odwołuje się tolerancji toohello normalne błędów występujących w składników sprzętowych.</span><span class="sxs-lookup"><span data-stu-id="79e25-124">*Resiliency* refers toohello tolerance for normal failures that occur in hardware components.</span></span> <span data-ttu-id="79e25-125">Odporność jest hello toorecover możliwości od awarii i kontynuować toofunction.</span><span class="sxs-lookup"><span data-stu-id="79e25-125">Resiliency is hello ability toorecover from failures and continue toofunction.</span></span> <span data-ttu-id="79e25-126">Nie jest o unikanie błędów, ale odpowiadać toofailures w taki sposób, który pozwala uniknąć przestoju lub utraty danych.</span><span class="sxs-lookup"><span data-stu-id="79e25-126">It's not about avoiding failures, but responding toofailures in a way that avoids downtime or data loss.</span></span> <span data-ttu-id="79e25-127">Celem Hello odporności jest tooreturn hello tooa pełni funkcjonalnej stan aplikacji w przypadku awarii.</span><span class="sxs-lookup"><span data-stu-id="79e25-127">hello goal of resiliency is tooreturn hello application tooa fully functioning state following a failure.</span></span> <span data-ttu-id="79e25-128">Azure maszyn wirtualnych i dyski są błędów sprzętu odporność toocommon toobe zaprojektowane.</span><span class="sxs-lookup"><span data-stu-id="79e25-128">Azure Virtual Machines and Disks are designed toobe resilient toocommon hardware faults.</span></span> <span data-ttu-id="79e25-129">Daj nam przyjrzeć się, jak hello Azure IaaS platformy zapewnia to elastyczność.</span><span class="sxs-lookup"><span data-stu-id="79e25-129">Let us look at how hello Azure IaaS platform provides this resiliency.</span></span>

<span data-ttu-id="79e25-130">Maszyna wirtualna składa się głównie z dwóch części: (1) A obliczeniowe serwera i dyski stałe hello (2).</span><span class="sxs-lookup"><span data-stu-id="79e25-130">A virtual machine consists mainly of two parts: (1) A compute server, and (2) hello persistent disks.</span></span> <span data-ttu-id="79e25-131">Wpływ zarówno na hello odporność na uszkodzenia maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="79e25-131">Both affect hello fault tolerance of a virtual machine.</span></span>

<span data-ttu-id="79e25-132">Jeśli powitania serwera hosta obliczeń platformy Azure, która przechowuje maszyny Wirtualnej błędów sprzętu (która jest rzadko), Azure jest zaprojektowana tooautomatically hello przywracania maszyny Wirtualnej na innym serwerze.</span><span class="sxs-lookup"><span data-stu-id="79e25-132">If hello Azure compute host server that houses your VM experiences a hardware failure (which is rare), Azure is designed tooautomatically restore hello VM on another server.</span></span> <span data-ttu-id="79e25-133">W takim przypadku wystąpią ponowne uruchomienie komputera, a hello maszyny Wirtualnej musi być Utwórz kopię zapasową po pewnym czasie.</span><span class="sxs-lookup"><span data-stu-id="79e25-133">If this happens, you will experience a reboot, and hello VM will be back up after some time.</span></span> <span data-ttu-id="79e25-134">Azure automatycznie wykrywa takie awarie sprzętu i wykonuje odzyskiwanie toohelp upewnij się, klient hello maszyny Wirtualnej będzie dostępna tak szybko, jak to możliwe.</span><span class="sxs-lookup"><span data-stu-id="79e25-134">Azure automatically detects such hardware failures and executes recoveries toohelp ensure hello customer VM will be available as soon as possible.</span></span>

<span data-ttu-id="79e25-135">Dotyczących dysków IaaS trwałości danych ma kluczowe znaczenie dla platformy magazynu trwałego hello.</span><span class="sxs-lookup"><span data-stu-id="79e25-135">Regarding IaaS disks, durability of data is critical for hello persistent storage platform.</span></span> <span data-ttu-id="79e25-136">Azure klienci mają ważnymi aplikacji uruchomionych na IaaS i są one zależne od trwałości hello hello danych.</span><span class="sxs-lookup"><span data-stu-id="79e25-136">Azure customers have important business applications running on IaaS and they depend on hello persistence of hello data.</span></span> <span data-ttu-id="79e25-137">Projekty platformy Azure ochrony tych dysków IaaS przy użyciu trzech nadmiarowe kopie dane przechowywane lokalnie, zapewniając wysoką trwałością przed awariami lokalnego.</span><span class="sxs-lookup"><span data-stu-id="79e25-137">Azure designs protection for these IaaS disks with three redundant copies of data stored locally, providing high durability against local failures.</span></span> <span data-ttu-id="79e25-138">W przypadku niepowodzenia co hello składniki sprzętowe, które przechowuje dysku maszyny Wirtualnej nie ma wpływu na ponieważ istnieją dwie kopie dodatkowe toosupport dysku żądania.</span><span class="sxs-lookup"><span data-stu-id="79e25-138">If one of hello hardware components that holds your disk fails, your VM is not impacted because there are two additional copies toosupport disk requests.</span></span> <span data-ttu-id="79e25-139">Działa on prawidłowo nawet wtedy, gdy dwa składniki sprzętowe obsługujące dysku się nie powieść w hello takie same (co jest bardzo rzadko).</span><span class="sxs-lookup"><span data-stu-id="79e25-139">It works fine even if two different hardware components supporting a disk fail at hello same time (which would be very rare).</span></span> <span data-ttu-id="79e25-140">toohelp upewnij się, firma Microsoft zachowuje zawsze trzy repliki, hello usługi Magazyn Azure automatycznie spowoduje utworzenie nowej kopii danych w tle hello Jeśli jeden z trzech kopii hello jest niedostępny.</span><span class="sxs-lookup"><span data-stu-id="79e25-140">toohelp ensure we always maintain three replicas, hello Azure Storage service automatically spawns a new copy of data in hello background if one of hello three copies becomes unavailable.</span></span> <span data-ttu-id="79e25-141">W związku z tym nie ma potrzeby toouse RAID z dyskami Azure odporności na uszkodzenia.</span><span class="sxs-lookup"><span data-stu-id="79e25-141">Therefore, it should not be necessary toouse RAID with Azure disks for fault tolerance.</span></span> <span data-ttu-id="79e25-142">Proste RAID 0 konfiguracji powinny być wystarczające stosowanie hello dysków, jeśli niezbędne toocreate większych woluminów.</span><span class="sxs-lookup"><span data-stu-id="79e25-142">A simple RAID 0 configuration should be sufficient for striping hello disks if necessary toocreate larger volumes.</span></span>

<span data-ttu-id="79e25-143">Z powodu tej architektury **Azure spójnie wydał korporacyjnej trwałości dla IaaS z branży dysków ZERO % [firmie częstość niepowodzeń](https://en.wikipedia.org/wiki/Annualized_failure_rate).**</span><span class="sxs-lookup"><span data-stu-id="79e25-143">Because of this architecture, **Azure has consistently delivered enterprise-grade durability for IaaS disks, with an industry-leading ZERO % [Annualized Failure Rate](https://en.wikipedia.org/wiki/Annualized_failure_rate).**</span></span>

<span data-ttu-id="79e25-144">Błędy sprzętu zlokalizowanych na powitania obliczeniowe hosta lub w magazynie hello platformy może czasem spowodować tymczasowej niedostępności hello maszyny Wirtualnej, która jest objęta hello [umowy SLA platformy Azure](https://azure.microsoft.com/support/legal/sla/virtual-machines/) dostępności maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="79e25-144">Localized hardware faults on hello compute host or in hello storage platform can sometimes result in temporary unavailability for hello VM which is covered by hello [Azure SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines/) for VM Availability.</span></span> <span data-ttu-id="79e25-145">Platforma Azure udostępnia również branży umowa SLA dla pojedynczego wystąpień maszyn wirtualnych, które używają dysków magazyn w warstwie Premium.</span><span class="sxs-lookup"><span data-stu-id="79e25-145">Azure also provides an industry-leading SLA for single VM instances that use Premium Storage disks.</span></span>

<span data-ttu-id="79e25-146">toosafeguard obciążeń aplikacji z przestoju powodu tymczasowej niedostępności toohello dysku lub maszyny Wirtualnej, klienci mogą korzystać z [zestawów dostępności](../virtual-machines/windows/manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="79e25-146">toosafeguard application workloads from downtime due toohello temporary unavailability of a disk or VM, customers can leverage [Availability Sets](../virtual-machines/windows/manage-availability.md).</span></span> <span data-ttu-id="79e25-147">Co najmniej dwie maszyny wirtualne w zestawie dostępności zapewnia nadmiarowość dla aplikacji hello.</span><span class="sxs-lookup"><span data-stu-id="79e25-147">Two or more virtual machines in an availability set provides redundancy for hello application.</span></span> <span data-ttu-id="79e25-148">Azure utworzy tych maszyn wirtualnych i dyski w domenach awarii oddzielne z różnych składników zasilania, sieci i serwera.</span><span class="sxs-lookup"><span data-stu-id="79e25-148">Azure then creates these VMs and disks in separate fault domains with different power, network, and server components.</span></span> <span data-ttu-id="79e25-149">W związku z tym awarie sprzętowe zlokalizowanego zwykle nie mają wpływu na wiele maszyn wirtualnych w hello na powitania tym samym czasie, zapewniając wysoką dostępność aplikacji.</span><span class="sxs-lookup"><span data-stu-id="79e25-149">Thus, localized hardware failures typically do not affect multiple VMs in hello set at hello same time, providing high availability for your application.</span></span> <span data-ttu-id="79e25-150">Uznaje się, że ustawia dostępności toouse dobrym rozwiązaniem, gdy wymagana jest wysoka dostępność.</span><span class="sxs-lookup"><span data-stu-id="79e25-150">It is considered a good practice toouse availability sets when high availability is required.</span></span> <span data-ttu-id="79e25-151">Aby uzyskać więcej informacji zobacz aspekty odzyskiwania po awarii hello opisanymi poniżej.</span><span class="sxs-lookup"><span data-stu-id="79e25-151">For more information, see hello Disaster Recovery aspects detailed below.</span></span>

### <a name="backup-and-disaster-recovery"></a><span data-ttu-id="79e25-152">Kopii zapasowych i odzyskiwania po awarii</span><span class="sxs-lookup"><span data-stu-id="79e25-152">Backup and Disaster Recovery</span></span>

<span data-ttu-id="79e25-153">Odzyskiwania awaryjnego (DR) jest toorecover możliwości powitania od zdarzenia, ale rzadko głównych: błędy z systemem innym niż przejściowy, całej skali, takie jak zakłócenia, która wpływa na całą regionu.</span><span class="sxs-lookup"><span data-stu-id="79e25-153">Disaster recovery (DR) is hello ability toorecover from rare but major incidents: non-transient, wide-scale failures, such as service disruption that affects an entire region.</span></span> <span data-ttu-id="79e25-154">Odzyskiwanie po awarii obejmuje kopii zapasowej danych i archiwizowania i może zawierać ręcznej interwencji, takich jak przywracanie z kopii zapasowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="79e25-154">Disaster recovery includes data backup and archiving, and may include manual intervention, such as restoring a database from backup.</span></span>

<span data-ttu-id="79e25-155">Witaj platformy Azure wbudowaną ochronę przed awariami zlokalizowanych mogą nie pełni chronić hello maszyny wirtualne/dysków, w przypadku hello głównych awarii, co może powodować awarie na dużą skalę.</span><span class="sxs-lookup"><span data-stu-id="79e25-155">hello Azure platform’s built-in protection against localized failures may not fully protect hello VMs/disks in hello case of major disasters which can cause large-scale outages.</span></span> <span data-ttu-id="79e25-156">W tym krytycznego zdarzenia, takie jak trafienia huragan, trzęsienia ziemi, fire lub awarie jednostki sprzętowe dużą skalę centrum danych.</span><span class="sxs-lookup"><span data-stu-id="79e25-156">This includes catastrophic events such as a data center being hit by a hurricane, earthquake, fire, or large scale hardware unit failures.</span></span> <span data-ttu-id="79e25-157">Ponadto mogą wystąpić błędy ze względu na problemy z tooapplication lub danych.</span><span class="sxs-lookup"><span data-stu-id="79e25-157">In addition, you may encounter failures due tooapplication or data issues.</span></span>

<span data-ttu-id="79e25-158">toohelp chronić obciążeń IaaS z awarii, należy zaplanować odzyskiwania tooenable nadmiarowości i kopii zapasowych.</span><span class="sxs-lookup"><span data-stu-id="79e25-158">toohelp protect your IaaS workloads from outages, you should plan for redundancy and backups tooenable recovery.</span></span> <span data-ttu-id="79e25-159">Podczas odzyskiwania po awarii należy zaplanować nadmiarowości i tworzenie kopii zapasowych w innej lokalizacji geograficznej hello głównej witryny.</span><span class="sxs-lookup"><span data-stu-id="79e25-159">For disaster recovery, you should plan redundancy and backup in a different geographic location away from hello primary site.</span></span> <span data-ttu-id="79e25-160">Pomaga to zapewnić kopii zapasowej nie ma wpływu na powitania tego samego zdarzenia, który pierwotnie wpływ na powitania maszyny Wirtualnej lub dysków.</span><span class="sxs-lookup"><span data-stu-id="79e25-160">This helps ensure your backup is not affected by hello same event that originally impacted hello VM or disks.</span></span> <span data-ttu-id="79e25-161">Aby uzyskać więcej informacji, zobacz [odzyskiwania po awarii dla aplikacji w oparciu Azure](https://docs.microsoft.com/azure/architecture/resiliency/disaster-recovery-azure-applications).</span><span class="sxs-lookup"><span data-stu-id="79e25-161">For more information, see [Disaster Recovery for Applications built on Azure](https://docs.microsoft.com/azure/architecture/resiliency/disaster-recovery-azure-applications).</span></span>

<span data-ttu-id="79e25-162">Uwagi dotyczące programu DR mogą obejmować hello następujące aspekty:</span><span class="sxs-lookup"><span data-stu-id="79e25-162">Your DR considerations may include hello following aspects:</span></span>

1. <span data-ttu-id="79e25-163">Wysokiej dostępności (HA) jest zdolność hello hello toocontinue aplikacji uruchomionych w dobrej kondycji, bez przestojów znaczące.</span><span class="sxs-lookup"><span data-stu-id="79e25-163">High Availability (HA) is hello ability of hello application toocontinue running in a healthy state, without significant downtime.</span></span> <span data-ttu-id="79e25-164">Przez "dobrej kondycji," oznacza możemy aplikacja hello jest elastyczny, a użytkownicy mogą połączyć toohello aplikacji i korzystać z niego.</span><span class="sxs-lookup"><span data-stu-id="79e25-164">By "healthy state," we mean hello application is responsive, and users can connect toohello application and interact with it.</span></span> <span data-ttu-id="79e25-165">Niektórych kluczowych aplikacji i baz danych może być wymagane toobe dostępny zawsze, nawet wtedy, gdy występują błędy hello platformy.</span><span class="sxs-lookup"><span data-stu-id="79e25-165">Certain mission-critical applications and databases may be required toobe available always, even when there are failures in hello platform.</span></span> <span data-ttu-id="79e25-166">Dla tych zadań może być konieczne tooplan nadmiarowości na potrzeby aplikacji hello, a także hello danych.</span><span class="sxs-lookup"><span data-stu-id="79e25-166">For these workloads, you may need tooplan redundancy for hello application as well as hello data.</span></span>

2. <span data-ttu-id="79e25-167">Trwałość danych: W niektórych przypadkach uwagę głównego hello jest zapewnienie, że dane hello są zachowywane w przypadku awarii hello.</span><span class="sxs-lookup"><span data-stu-id="79e25-167">Data Durability: In some cases, hello main consideration is ensuring hello data is preserved in hello case of a disaster.</span></span> <span data-ttu-id="79e25-168">Dlatego może być konieczne kopii zapasowej danych w innej lokacji.</span><span class="sxs-lookup"><span data-stu-id="79e25-168">Therefore, you may need a backup of your data in a different site.</span></span> <span data-ttu-id="79e25-169">W przypadku takich obciążeń mogą nie być potrzebne pełne nadmiarowości na potrzeby aplikacji hello, ale także regularne tworzenie kopii zapasowych dysków hello.</span><span class="sxs-lookup"><span data-stu-id="79e25-169">For such workloads, you may not need full redundancy for hello application, but a regular backup of hello disks.</span></span>

## <a name="backup-and-dr-scenarios"></a><span data-ttu-id="79e25-170">Kopia zapasowa i scenariuszy odzyskiwania po awarii</span><span class="sxs-lookup"><span data-stu-id="79e25-170">Backup and DR Scenarios</span></span>

<span data-ttu-id="79e25-171">Oto kilka przykładów typowych scenariuszy obciążenia aplikacji i hello zagadnienia dotyczące planowania odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="79e25-171">Let’s look at a few typical examples of application workload scenarios and hello considerations for planning Disaster Recovery.</span></span>

### <a name="scenario-1-major-database-solutions"></a><span data-ttu-id="79e25-172">Scenariusz 1: Głównej bazy danych rozwiązania</span><span class="sxs-lookup"><span data-stu-id="79e25-172">Scenario 1: Major Database Solutions</span></span>

<span data-ttu-id="79e25-173">Rozważ serwer produkcyjny bazy danych, takich jak SQL Server lub Oracle, który może obsługiwać wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="79e25-173">Consider a production database server like SQL Server or Oracle that can support High Availability.</span></span> <span data-ttu-id="79e25-174">Krytyczne produkcji aplikacji i użytkowników są zależne od tej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="79e25-174">Critical production applications and users depend on this database.</span></span> <span data-ttu-id="79e25-175">Witaj planu odzyskiwania po awarii dla tego systemu może być konieczne hello toosupport następujące wymagania:</span><span class="sxs-lookup"><span data-stu-id="79e25-175">hello Disaster Recovery plan for this system may need toosupport hello following requirements:</span></span>

1. <span data-ttu-id="79e25-176">Dane muszą być chronione i możliwe do odzyskania.</span><span class="sxs-lookup"><span data-stu-id="79e25-176">Data must be protected and recoverable.</span></span>
2.  <span data-ttu-id="79e25-177">Serwer musi być dostępny do użycia.</span><span class="sxs-lookup"><span data-stu-id="79e25-177">Server must be available for use.</span></span>

<span data-ttu-id="79e25-178">Może to wymagać utrzymania repliki bazy danych hello w innym regionie jako kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="79e25-178">This may require maintaining a replica of hello database in a different region as a backup.</span></span> <span data-ttu-id="79e25-179">W zależności od wymagań hello dostępność serwera i odzyskiwanie danych hello rozwiązania może należeć do zakresu od aktywny-aktywny lub aktywny / pasywny repliki lokacji tooperiodic tworzenie kopii zapasowych danych hello.</span><span class="sxs-lookup"><span data-stu-id="79e25-179">Depending on hello requirements for server availability and data recovery, hello solution could range from an Active-Active or Active-Passive replica site tooperiodic offline backups of hello data.</span></span> <span data-ttu-id="79e25-180">Relacyjnych baz danych, takich jak SQL Server i Oracle zapewniają różne opcje replikacji.</span><span class="sxs-lookup"><span data-stu-id="79e25-180">Relational databases such as SQL Server and Oracle provide various options for replication.</span></span> <span data-ttu-id="79e25-181">Dla programu SQL Server [programu SQL Server zawsze włączonych grup dostępności](https://msdn.microsoft.com/library/hh510230.aspx) można użyć w celu zapewnienia wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="79e25-181">For SQL Server, [SQL Server Always On Availability Groups](https://msdn.microsoft.com/library/hh510230.aspx) can be used for high availability.</span></span>

<span data-ttu-id="79e25-182">Bazy danych NoSQL, takie jak bazy danych MongoDB obsługują również [replik](https://docs.mongodb.com/manual/replication/) nadmiarowości.</span><span class="sxs-lookup"><span data-stu-id="79e25-182">NoSQL databases like MongoDB also support [replicas](https://docs.mongodb.com/manual/replication/) for redundancy.</span></span> <span data-ttu-id="79e25-183">można replik Hello wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="79e25-183">hello replicas for high availability can be used.</span></span>

### <a name="scenario-2-a-cluster-of-redundant-vms"></a><span data-ttu-id="79e25-184">Scenariusz 2: Klastra nadmiarowe maszyny wirtualne</span><span class="sxs-lookup"><span data-stu-id="79e25-184">Scenario 2: A cluster of redundant VMs</span></span>

<span data-ttu-id="79e25-185">Należy wziąć pod uwagę obciążenia obsługiwane przez klaster maszyn wirtualnych, które zapewniają nadmiarowość i równoważenie obciążenia.</span><span class="sxs-lookup"><span data-stu-id="79e25-185">Consider a workload handled by a cluster of VMs that provide redundancy and load balancing.</span></span> <span data-ttu-id="79e25-186">Przykładem jest klastra Cassandra wdrożone w regionie.</span><span class="sxs-lookup"><span data-stu-id="79e25-186">One example would be a Cassandra cluster deployed in a region.</span></span> <span data-ttu-id="79e25-187">Ten typ architektury już zapewnia wysoki poziom nadmiarowości w tym regionie.</span><span class="sxs-lookup"><span data-stu-id="79e25-187">This type of architecture already provides a high level of redundancy within that region.</span></span> <span data-ttu-id="79e25-188">Jednak obciążenia hello tooprotect regionalnej awarii poziomu, należy rozważyć rozpraszania klastra hello dwóch regionach lub wprowadzeniem region tooanother okresowe kopie zapasowe.</span><span class="sxs-lookup"><span data-stu-id="79e25-188">However, tooprotect hello workload from a regional level failure, you should consider spreading hello cluster across two regions or making periodic backups tooanother region.</span></span>

### <a name="scenario-3-iaas-application-workload"></a><span data-ttu-id="79e25-189">Scenariusz 3: IaaS aplikacji obciążenia</span><span class="sxs-lookup"><span data-stu-id="79e25-189">Scenario 3: IaaS Application Workload</span></span>

<span data-ttu-id="79e25-190">Może to być typowe produkcji pracą maszyny Wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="79e25-190">This could be a typical production workload running on an Azure VM.</span></span> <span data-ttu-id="79e25-191">Na przykład może być serwerem sieci web lub serwera plików zawartości hello i innych zasobów w lokacji.</span><span class="sxs-lookup"><span data-stu-id="79e25-191">For example, it could be a web server or file server holding hello content and other resources of a site.</span></span> <span data-ttu-id="79e25-192">Może to być również aplikacji biznesowej niestandardowej uruchomione na maszynie Wirtualnej, które przechowywane jego dane, zasobów i stan aplikacji hello dysków maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="79e25-192">It could also be a custom-built business application running on a VM that stored its data, resources, and application state on hello VM disks.</span></span> <span data-ttu-id="79e25-193">W takim przypadku jest ważne toomake się, że możesz korzystać z kopii zapasowych na bieżąco.</span><span class="sxs-lookup"><span data-stu-id="79e25-193">In this case, it is important toomake sure you take backups on a regular basis.</span></span> <span data-ttu-id="79e25-194">Częstotliwość wykonywania kopii zapasowych powinny być oparte na powitania rodzaj hello obciążenie maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="79e25-194">Backup frequency should be based on hello nature of hello VM workload.</span></span> <span data-ttu-id="79e25-195">Na przykład jeśli aplikacja hello jest uruchamiana codziennie i modyfikuje danych, następnie hello kopii zapasowej należy podjąć co godzinę.</span><span class="sxs-lookup"><span data-stu-id="79e25-195">For example, if hello application runs every day and modifies data, then hello backup should be taken every hour.</span></span>

<span data-ttu-id="79e25-196">Innym przykładem jest serwer raportowania ściągania danych z innych źródeł i generuje raporty zagregowanych.</span><span class="sxs-lookup"><span data-stu-id="79e25-196">Another example is a reporting server that pull data from other sources and generates aggregated reports.</span></span> <span data-ttu-id="79e25-197">Utraty tej maszyny Wirtualnej lub dysków spowoduje utratę toohello hello raportów.</span><span class="sxs-lookup"><span data-stu-id="79e25-197">Loss of this VM or disks will lead toohello loss of hello reports.</span></span> <span data-ttu-id="79e25-198">Jednak może być możliwe toorerun hello raportowania procesu i dane wyjściowe regenerate hello.</span><span class="sxs-lookup"><span data-stu-id="79e25-198">However, it may be possible toorerun hello reporting process and regenerate hello output.</span></span> <span data-ttu-id="79e25-199">W takim przypadku naprawdę masz utraty danych, nawet jeśli serwer raportowania hello o awarii, dlatego może mieć wyższy poziom tolerancji utraty części danych hello na powitania serwera raportowania.</span><span class="sxs-lookup"><span data-stu-id="79e25-199">In that case, you don’t really have a loss of data even if hello reporting server is hit with a disaster, so you could have a higher level of tolerance for losing part of hello data on hello reporting server.</span></span> <span data-ttu-id="79e25-200">W takim przypadku mniej częste wykonywanie kopii zapasowych jest opcja tooreduce hello kosztów.</span><span class="sxs-lookup"><span data-stu-id="79e25-200">In that case, less frequent backups is an option tooreduce hello cost.</span></span>

### <a name="scenario-4-iaas-application-data-issues"></a><span data-ttu-id="79e25-201">Scenariusz 4: Problemy z danych aplikacji IaaS</span><span class="sxs-lookup"><span data-stu-id="79e25-201">Scenario 4: IaaS Application data issues</span></span>

<span data-ttu-id="79e25-202">Masz aplikację, która oblicza, przechowuje i służy krytyczne komercyjnych danych, takie jak informacje o cenach.</span><span class="sxs-lookup"><span data-stu-id="79e25-202">You have an application that computes, maintains, and serves critical commercial data such as pricing information.</span></span> <span data-ttu-id="79e25-203">Nowa wersja aplikacji ma niepoprawnie obliczana hello ceny i uszkodzony hello istniejących danych commerce obsługiwane przez platformę hello usterki oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="79e25-203">A new version of your application had a software bug which incorrectly computed hello pricing and corrupted hello existing commerce data served by hello platform.</span></span> <span data-ttu-id="79e25-204">W tym miejscu hello najlepsze rozwiązanie byłoby toorevert toohello starszej wersji aplikacji hello i danych hello pierwszy.</span><span class="sxs-lookup"><span data-stu-id="79e25-204">Here, hello best course of action would be toorevert toohello earlier version of hello application and hello data first.</span></span> <span data-ttu-id="79e25-205">tooenable, podejmij okresowe kopie zapasowe systemu.</span><span class="sxs-lookup"><span data-stu-id="79e25-205">tooenable this, take periodic backups of your system.</span></span>

## <a name="disaster-recovery-solution-azure-backup-service"></a><span data-ttu-id="79e25-206">Rozwiązanie odzyskiwania po awarii: Usługa Kopia zapasowa Azure</span><span class="sxs-lookup"><span data-stu-id="79e25-206">Disaster Recovery Solution: Azure Backup Service</span></span>

<span data-ttu-id="79e25-207">[Usługa Kopia zapasowa Azure](https://azure.microsoft.com/services/backup/) może służyć do tworzenia kopii zapasowych i odzyskiwania po awarii, a w przypadku [dysków zarządzanych](storage-managed-disks-overview.md) oraz [niezarządzane dysków](storage-about-disks-and-vhds-windows.md#unmanaged-disks).</span><span class="sxs-lookup"><span data-stu-id="79e25-207">[Azure Backup Service](https://azure.microsoft.com/services/backup/) is can be used for Backup and DR, and it works with [Managed Disks](storage-managed-disks-overview.md) as well as [Unmanaged Disks](storage-about-disks-and-vhds-windows.md#unmanaged-disks).</span></span> <span data-ttu-id="79e25-208">Zadanie tworzenia kopii zapasowej można utworzyć na podstawie czasu tworzenia kopii zapasowych, łatwe przywrócenie maszyny Wirtualnej i zasady przechowywania kopii zapasowych.</span><span class="sxs-lookup"><span data-stu-id="79e25-208">You can create a backup job with time-based backups, easy VM restoration and backup retention policies.</span></span> 

<span data-ttu-id="79e25-209">Jeśli używasz [dysków Premium Storage](storage-premium-storage.md), [dysków zarządzanych](storage-managed-disks-overview.md), lub innych typów dysku z hello [magazyn lokalnie nadmiarowy (LRS)](storage-redundancy.md#locally-redundant-storage) opcji jest szczególnie ważne tooleverage okresowe DR kopie zapasowe.</span><span class="sxs-lookup"><span data-stu-id="79e25-209">If you use [Premium Storage disks](storage-premium-storage.md), [Managed Disks](storage-managed-disks-overview.md), or other disk types with hello [locally redundant storage (LRS)](storage-redundancy.md#locally-redundant-storage) option, it is especially important tooleverage periodic DR backups.</span></span> <span data-ttu-id="79e25-210">Kopia zapasowa Azure przechowuje dane hello w magazynie usług odzyskiwania do przechowywania długoterminowego.</span><span class="sxs-lookup"><span data-stu-id="79e25-210">Azure Backup stores hello data in your Recovery Services vault for long term retention.</span></span> <span data-ttu-id="79e25-211">Wybierz hello [magazyn geograficznie nadmiarowy (GRS)](storage-redundancy.md#geo-redundant-storage) opcji dla magazyn usług odzyskiwania hello kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="79e25-211">Choose hello [Geo-redundant storage (GRS)](storage-redundancy.md#geo-redundant-storage) option for hello Backup Recovery Services vault.</span></span> <span data-ttu-id="79e25-212">Który będzie upewnij się, że kopie zapasowe są replikowane tooa innym regionie Azure zabezpieczenia z regionalnej awarii.</span><span class="sxs-lookup"><span data-stu-id="79e25-212">That will ensure backups are replicated tooa different Azure region for safeguarding from regional disasters.</span></span>

<span data-ttu-id="79e25-213">Dla [niezarządzane dysków](storage-about-disks-and-vhds-windows.md#unmanaged-disks), można użyć typu magazynu LRS hello dysków IaaS, ale upewnij się, że kopia zapasowa Azure jest włączone w hello GRS opcję hello magazynu usług odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="79e25-213">For [Unmanaged Disks](storage-about-disks-and-vhds-windows.md#unmanaged-disks), you can use hello LRS storage type for IaaS disks, but ensure that Azure Backup is enabled with hello GRS option for hello Recovery Services Vault.</span></span>

<span data-ttu-id="79e25-214">**Jeśli używasz hello [GRS](storage-redundancy.md#geo-redundant-storage)/[RA-GRS](storage-redundancy.md#read-access-geo-redundant-storage) opcji dla niezarządzanego dysków, można nadal konieczne migawek spójnych kopii zapasowych i odzyskiwania po awarii.**</span><span class="sxs-lookup"><span data-stu-id="79e25-214">**If you use hello [GRS](storage-redundancy.md#geo-redundant-storage)/[RA-GRS](storage-redundancy.md#read-access-geo-redundant-storage) option for your Unmanaged Disks, you still need consistent snapshots for Backup and DR.**</span></span> <span data-ttu-id="79e25-215">Należy użyć jednego [usługi Kopia zapasowa Azure](https://azure.microsoft.com/services/backup/) lub [migawki spójne z](#alternative-solution-consistent-snapshots).</span><span class="sxs-lookup"><span data-stu-id="79e25-215">You must use either [Azure Backup Service](https://azure.microsoft.com/services/backup/) or [consistent snapshots](#alternative-solution-consistent-snapshots).</span></span>

<span data-ttu-id="79e25-216">Witaj poniżej znajduje się podsumowanie rozwiązania dla odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="79e25-216">hello following is a summary of solutions for DR.</span></span>

| <span data-ttu-id="79e25-217">Scenariusz</span><span class="sxs-lookup"><span data-stu-id="79e25-217">Scenario</span></span> | <span data-ttu-id="79e25-218">Automatyczne replikacji</span><span class="sxs-lookup"><span data-stu-id="79e25-218">Automatic Replication</span></span> | <span data-ttu-id="79e25-219">Rozwiązanie odzyskiwania po awarii</span><span class="sxs-lookup"><span data-stu-id="79e25-219">DR Solution</span></span> |
| --- | --- | --- |
| <span data-ttu-id="79e25-220">*Dyski magazynu w warstwie Premium*</span><span class="sxs-lookup"><span data-stu-id="79e25-220">*Premium Storage Disks*</span></span> | <span data-ttu-id="79e25-221">Lokalne ([LRS](storage-redundancy.md#locally-redundant-storage))</span><span class="sxs-lookup"><span data-stu-id="79e25-221">Local ([LRS](storage-redundancy.md#locally-redundant-storage))</span></span> | [<span data-ttu-id="79e25-222">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="79e25-222">Azure Backup</span></span>](https://azure.microsoft.com/services/backup/) |
| <span data-ttu-id="79e25-223">*Managed Disks*</span><span class="sxs-lookup"><span data-stu-id="79e25-223">*Managed Disks*</span></span> | <span data-ttu-id="79e25-224">Lokalne ([LRS](storage-redundancy.md#locally-redundant-storage))</span><span class="sxs-lookup"><span data-stu-id="79e25-224">Local ([LRS](storage-redundancy.md#locally-redundant-storage))</span></span> | [<span data-ttu-id="79e25-225">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="79e25-225">Azure Backup</span></span>](https://azure.microsoft.com/services/backup/) |
| <span data-ttu-id="79e25-226">*Niezarządzane LRS dysków*</span><span class="sxs-lookup"><span data-stu-id="79e25-226">*Unmanaged LRS Disks*</span></span> | <span data-ttu-id="79e25-227">Lokalne ([LRS](storage-redundancy.md#locally-redundant-storage))</span><span class="sxs-lookup"><span data-stu-id="79e25-227">Local ([LRS](storage-redundancy.md#locally-redundant-storage))</span></span> | [<span data-ttu-id="79e25-228">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="79e25-228">Azure Backup</span></span>](https://azure.microsoft.com/services/backup/) |
| <span data-ttu-id="79e25-229">*Niezarządzane grs w warstwie dysków*</span><span class="sxs-lookup"><span data-stu-id="79e25-229">*Unmanaged GRS Disks*</span></span> | <span data-ttu-id="79e25-230">Krzyżowe region ([GRS](storage-redundancy.md#geo-redundant-storage))</span><span class="sxs-lookup"><span data-stu-id="79e25-230">Cross region ([GRS](storage-redundancy.md#geo-redundant-storage))</span></span> | [<span data-ttu-id="79e25-231">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="79e25-231">Azure Backup</span></span>](https://azure.microsoft.com/services/backup/)<br/>[<span data-ttu-id="79e25-232">Migawki spójne z</span><span class="sxs-lookup"><span data-stu-id="79e25-232">Consistent snapshots</span></span>](#alternative-solution-consistent-snapshots) |
| <span data-ttu-id="79e25-233">*Niezarządzane RA-GRS dysków*</span><span class="sxs-lookup"><span data-stu-id="79e25-233">*Unmanaged RA-GRS Disks*</span></span> | <span data-ttu-id="79e25-234">Krzyżowe region ([RA-GRS](storage-redundancy.md#read-access-geo-redundant-storage))</span><span class="sxs-lookup"><span data-stu-id="79e25-234">Cross region ([RA-GRS](storage-redundancy.md#read-access-geo-redundant-storage))</span></span> | [<span data-ttu-id="79e25-235">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="79e25-235">Azure Backup</span></span>](https://azure.microsoft.com/services/backup/)<br/>[<span data-ttu-id="79e25-236">Migawki spójne z</span><span class="sxs-lookup"><span data-stu-id="79e25-236">Consistent snapshots</span></span>](#alternative-solution-consistent-snapshots) |

<span data-ttu-id="79e25-237">Wysokiej dostępności najlepiej można spełnić przez przy użyciu hello dysków zarządzanych w zestawie dostępności wraz z usługą kopia zapasowa Azure.</span><span class="sxs-lookup"><span data-stu-id="79e25-237">High availability can best by met through hello use of Managed Disks in an Availability Set along with Azure Backup.</span></span> <span data-ttu-id="79e25-238">Jeśli używane są niezarządzane dysków, można nadal używać kopia zapasowa Azure do odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="79e25-238">If you are using Unmanaged Disks, you can still  use Azure Backup for DR.</span></span> <span data-ttu-id="79e25-239">Jeśli toouse kopia zapasowa Azure, następnie biorąc [migawek spójnych](#alternative-solution-consistent-snapshots) zgodnie z opisem w dalszej części artykułu to alternatywne rozwiązanie tworzenia kopii zapasowych i odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="79e25-239">If you are unable toouse Azure Backup, then taking [consistent snapshots](#alternative-solution-consistent-snapshots) as described in a later section is an alternative solution for Backup and DR.</span></span>

<span data-ttu-id="79e25-240">Opcje wysokiej dostępności, tworzenie kopii zapasowej i odzyskiwania po awarii na poziomie aplikacji lub infrastruktury może być reprezentowany jako poniżej:</span><span class="sxs-lookup"><span data-stu-id="79e25-240">Your choices for high availability, backup and DR at Application or Infrastructure levels can be represented as below:</span></span>

| <span data-ttu-id="79e25-241">*Poziom*</span><span class="sxs-lookup"><span data-stu-id="79e25-241">*Level*</span></span> | <span data-ttu-id="79e25-242">Wysoka dostępność</span><span class="sxs-lookup"><span data-stu-id="79e25-242">High Availability</span></span>   | <span data-ttu-id="79e25-243">Kopii zapasowej / odzyskiwania po awarii</span><span class="sxs-lookup"><span data-stu-id="79e25-243">Backup / DR</span></span> |
| --- | --- | --- |
| <span data-ttu-id="79e25-244">*Aplikacji*</span><span class="sxs-lookup"><span data-stu-id="79e25-244">*Application*</span></span> | <span data-ttu-id="79e25-245">Zawsze włączone SQL</span><span class="sxs-lookup"><span data-stu-id="79e25-245">SQL Always On</span></span> | <span data-ttu-id="79e25-246">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="79e25-246">Azure Backup</span></span> |
| <span data-ttu-id="79e25-247">*Infrastruktury*</span><span class="sxs-lookup"><span data-stu-id="79e25-247">*Infrastructure*</span></span>  | <span data-ttu-id="79e25-248">Zestaw dostępności</span><span class="sxs-lookup"><span data-stu-id="79e25-248">Availability Set</span></span>  | <span data-ttu-id="79e25-249">GRS z migawki spójne z</span><span class="sxs-lookup"><span data-stu-id="79e25-249">GRS with consistent snapshots</span></span> |

### <a name="using-hello-azure-backup-service"></a><span data-ttu-id="79e25-250">Przy użyciu hello usługi Kopia zapasowa Azure</span><span class="sxs-lookup"><span data-stu-id="79e25-250">Using hello Azure Backup Service</span></span>

<span data-ttu-id="79e25-251">[Kopia zapasowa Azure](../backup/backup-azure-vms-introduction.md) może wykonywać kopie zapasowe maszyn wirtualnych z systemem Windows lub Linux toohello magazynu usług odzyskiwania Azure.</span><span class="sxs-lookup"><span data-stu-id="79e25-251">[Azure Backup](../backup/backup-azure-vms-introduction.md) can backup your VMs running Windows or Linux toohello Azure Recovery Services Vault.</span></span> <span data-ttu-id="79e25-252">Wykonywanie kopii zapasowej i przywracanie danych biznesowych o znaczeniu krytycznym jest skomplikowany hello fakt, że strategicznych danych biznesowych musi kopii zapasowej podczas aplikacji hello, które wywołują powitalne danych są uruchomione.</span><span class="sxs-lookup"><span data-stu-id="79e25-252">Backing up and restoring business-critical data is complicated by hello fact that business-critical data must be backed up while hello applications that produce hello data are running.</span></span> <span data-ttu-id="79e25-253">tooaddress, to kopia zapasowa Azure zapewnia spójnych z aplikacją kopii zapasowych obciążeń firmy Microsoft przy użyciu hello tooensure woluminów usługi w tle (VSS), czy dane są zapisywane poprawnie toostorage.</span><span class="sxs-lookup"><span data-stu-id="79e25-253">tooaddress this, Azure Backup provides application-consistent backups for Microsoft workloads by using hello Volume Shadow Service (VSS) tooensure that data is written correctly toostorage.</span></span> <span data-ttu-id="79e25-254">Dla maszyn wirtualnych systemu Linux tylko plik spójne kopie zapasowe są możliwe, ponieważ systemu Linux nie ma tooVSS równoważne funkcje.</span><span class="sxs-lookup"><span data-stu-id="79e25-254">For Linux VMs, only file-consistent backups are possible, since Linux does not have functionality equivalent tooVSS.</span></span>

![][1]

<span data-ttu-id="79e25-255">Jeśli kopia zapasowa Azure inicjuje zadania tworzenia kopii zapasowej w czasie hello zaplanowane, wyzwala zapasowy numer wewnętrzny hello zainstalowane w hello wirtualna tootake migawki punktu w czasie.</span><span class="sxs-lookup"><span data-stu-id="79e25-255">When Azure Backup initiates a backup job at hello scheduled time, it triggers hello backup extension installed in hello VM tootake a point-in-time snapshot.</span></span> <span data-ttu-id="79e25-256">Migawki w połączeniu z usługi VSS tooget migawki spójne hello dysków w maszynie wirtualnej hello bez konieczności tooshut go w dół.</span><span class="sxs-lookup"><span data-stu-id="79e25-256">A snapshot is taken in coordination with VSS tooget a consistent snapshot of hello disks in hello virtual machine without having tooshut it down.</span></span> <span data-ttu-id="79e25-257">zapasowy numer wewnętrzny Hello w hello wirtualna opróżnia wszystkie zapisy przed wykonaniem migawki dotyczącej spójności hello wszystkich dysków hello.</span><span class="sxs-lookup"><span data-stu-id="79e25-257">hello backup extension in hello VM flushes all writes before taking hello consistent snapshot of all hello disks.</span></span> <span data-ttu-id="79e25-258">Po migawki hello hello dane są przesyłane przez kopia zapasowa Azure toohello magazynu kopii zapasowych.</span><span class="sxs-lookup"><span data-stu-id="79e25-258">After hello snapshot is taken, hello data is transferred by Azure Backup toohello backup vault.</span></span> <span data-ttu-id="79e25-259">toomake hello procesu tworzenia kopii zapasowej bardziej efektywne hello usługa identyfikuje i transferuje tylko hello bloki danych, które uległy zmianie od czasu ostatniej kopii zapasowej hello.</span><span class="sxs-lookup"><span data-stu-id="79e25-259">toomake hello backup process more efficient, hello service identifies and transfers only hello blocks of data that have changed since hello last backup.</span></span>


<span data-ttu-id="79e25-260">toorestore, możesz wyświetlić hello dostępnych kopii zapasowych za pomocą usługi Kopia zapasowa Azure i inicjuje operację przywracania.</span><span class="sxs-lookup"><span data-stu-id="79e25-260">toorestore, you can view hello available backups through Azure Backup and then initiate a restore.</span></span> <span data-ttu-id="79e25-261">Możesz utworzyć i przywracania kopii zapasowych Azure za pośrednictwem hello [portalu Azure](https://portal.azure.com/), [przy użyciu programu PowerShell](../backup/backup-azure-vms-automation.md ), lub za pomocą hello [interfejsu wiersza polecenia Azure](https://docs.microsoft.com/azure/xplat-cli-install).</span><span class="sxs-lookup"><span data-stu-id="79e25-261">You can create and restore Azure backups through hello [Azure portal](https://portal.azure.com/), [using PowerShell](../backup/backup-azure-vms-automation.md ), or using hello [Azure CLI](https://docs.microsoft.com/azure/xplat-cli-install).</span></span> <span data-ttu-id="79e25-262">Aby uzyskać więcej informacji zobacz Kopia zapasowa Azure.</span><span class="sxs-lookup"><span data-stu-id="79e25-262">For more information, see Azure Backup.</span></span>

### <a name="steps-tooenable-backup"></a><span data-ttu-id="79e25-263">TooEnable kroki tworzenia kopii zapasowej</span><span class="sxs-lookup"><span data-stu-id="79e25-263">Steps tooEnable Backup</span></span>

<span data-ttu-id="79e25-264">Witaj poniższe kroki są najczęściej używanymi tooenable kopii zapasowych maszyn wirtualnych przy użyciu hello [Azure Portal](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="79e25-264">hello following steps are typically used tooenable backups of your VMs using hello [Azure Portal](https://portal.azure.com/).</span></span> <span data-ttu-id="79e25-265">Będą różne wersje, w zależności od danego scenariusza dokładne.</span><span class="sxs-lookup"><span data-stu-id="79e25-265">There will be some variations depending on your exact scenario.</span></span> <span data-ttu-id="79e25-266">Zobacz toohello [kopia zapasowa Azure](../backup/backup-azure-vms-introduction.md) dokumentacji, aby uzyskać szczegółowe informacje.</span><span class="sxs-lookup"><span data-stu-id="79e25-266">Refer toohello [Azure Backup](../backup/backup-azure-vms-introduction.md) documentation for full details.</span></span> <span data-ttu-id="79e25-267">Azure Backup również [obsługuje maszyny wirtualne z dyskami zarządzane](https://azure.microsoft.com/blog/azure-managed-disk-backup/).</span><span class="sxs-lookup"><span data-stu-id="79e25-267">Azure Backup also [supports VMs with Managed Disks](https://azure.microsoft.com/blog/azure-managed-disk-backup/).</span></span>

1.  <span data-ttu-id="79e25-268">Tworzenie magazynu usług odzyskiwania dla maszyny Wirtualnej przy użyciu hello następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="79e25-268">Create a recovery services vault for a VM using hello following steps:</span></span>

    <span data-ttu-id="79e25-269">a.</span><span class="sxs-lookup"><span data-stu-id="79e25-269">a.</span></span>  <span data-ttu-id="79e25-270">Przy użyciu hello [portalu Azure](https://portal.azure.com/), Przeglądaj wszystkie zasoby i odnaleźć "Magazyny usług odzyskiwania".</span><span class="sxs-lookup"><span data-stu-id="79e25-270">Using hello [Azure portal](https://portal.azure.com/), browse all resources and find “Recovery Services vaults”.</span></span>

    <span data-ttu-id="79e25-271">b.</span><span class="sxs-lookup"><span data-stu-id="79e25-271">b.</span></span>  <span data-ttu-id="79e25-272">Na powitania menu Magazyny usług odzyskiwania, kliknij przycisk Dodaj i wykonaj hello kroki toocreate nowy magazyn w hello tego samego regionu hello maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="79e25-272">On hello Recovery Services vaults menu, click Add and follow hello steps toocreate a new vault in hello same region as hello VM.</span></span> <span data-ttu-id="79e25-273">Na przykład jeśli maszyna wirtualna znajduje się w regionie zachodnie stany USA, wybierz zachodnie stany USA hello magazynu.</span><span class="sxs-lookup"><span data-stu-id="79e25-273">For example, if your VM is in West US region, pick West US for hello vault.</span></span>

2.  <span data-ttu-id="79e25-274">Sprawdź hello replikacji magazynu dla hello nowo utworzonego magazynu.</span><span class="sxs-lookup"><span data-stu-id="79e25-274">Verify hello Storage replication for hello newly created vault.</span></span> <span data-ttu-id="79e25-275">toodo tego vault hello dostępu z hello usług odzyskiwania magazynów bloku, a następnie przejść toohello ustawienia lub tworzenia kopii zapasowej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="79e25-275">toodo this, access hello vault from hello Recovery Services vaults blade and go toohello settings/Backup Configuration.</span></span> <span data-ttu-id="79e25-276">Upewnij się, że hello GRS opcja jest domyślnie zaznaczona.</span><span class="sxs-lookup"><span data-stu-id="79e25-276">Ensure hello GRS option is selected by default.</span></span> <span data-ttu-id="79e25-277">Daje to pewność, że magazyn jest automatycznie replikowane tooa centrum danych dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="79e25-277">This will ensure that your vault is automatically replicated tooa secondary data center.</span></span> <span data-ttu-id="79e25-278">Na przykład magazynu w zachodnie stany USA będzie automatycznie replikowane tooEast Stanów Zjednoczonych.</span><span class="sxs-lookup"><span data-stu-id="79e25-278">For example, your vault in West US will be automatically replicated tooEast US.</span></span>

3.  <span data-ttu-id="79e25-279">Skonfiguruj zasady tworzenia kopii zapasowej hello i wybierz hello maszyny Wirtualnej z hello sam interfejs użytkownika.</span><span class="sxs-lookup"><span data-stu-id="79e25-279">Configure hello backup policy and select hello VM from hello same UI.</span></span>

4.  <span data-ttu-id="79e25-280">Upewnij się, że hello, Agent usługi Kopia zapasowa jest zainstalowana na powitania maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="79e25-280">Make sure hello Backup Agent is installed on hello VM.</span></span> <span data-ttu-id="79e25-281">Jeśli maszyna wirtualna została utworzona przy użyciu obrazu galerii Azure, agent usługi Kopia zapasowa hello już jest zainstalowany.</span><span class="sxs-lookup"><span data-stu-id="79e25-281">If your VM is created using an Azure gallery image, then hello Backup agent is already installed.</span></span> <span data-ttu-id="79e25-282">W przeciwnym razie (Jeśli używasz niestandardowego obrazu), za pomocą instrukcji[hello Zainstaluj agenta maszyny Wirtualnej na maszynie wirtualnej hello](../backup/backup-azure-arm-vms-prepare.md#install-the-vm-agent-on-the-virtual-machine).</span><span class="sxs-lookup"><span data-stu-id="79e25-282">Otherwise (that is, if you are using a custom image), use instructions too[Install hello VM Agent on hello virtual machine](../backup/backup-azure-arm-vms-prepare.md#install-the-vm-agent-on-the-virtual-machine).</span></span>

5.  <span data-ttu-id="79e25-283">Upewnij się, że tej maszyny Wirtualnej hello umożliwia łączności sieciowej hello toofunction usługi tworzenia kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="79e25-283">Make sure that hello VM allows network connectivity for hello backup service toofunction.</span></span> <span data-ttu-id="79e25-284">Wykonaj te instrukcje dla [połączeń sieciowych](../backup/backup-azure-arm-vms-prepare.md#network-connectivity).</span><span class="sxs-lookup"><span data-stu-id="79e25-284">Follow these instructions for [Network connectivity](../backup/backup-azure-arm-vms-prepare.md#network-connectivity).</span></span>

6.  <span data-ttu-id="79e25-285">Po wykonaniu hello powyżej kroki hello kopii zapasowej zostanie uruchomiony w regularnych odstępach czasu określonych w hello zasad tworzenia kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="79e25-285">Once hello above steps are completed, hello backup will run at regular intervals as specified in hello backup policy.</span></span> <span data-ttu-id="79e25-286">W razie potrzeby możesz wyzwolić hello pierwszej kopii zapasowej ręcznie z pulpitem nawigacyjnym magazynu hello na powitania portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="79e25-286">If necessary, you can trigger hello first backup manually from hello vault dashboard on hello Azure portal.</span></span>

<span data-ttu-id="79e25-287">Automatyzacja kopia zapasowa Azure za pomocą skryptów, można znaleźć w artykule zbyt[poleceń cmdlet programu PowerShell dla kopii zapasowej maszyny Wirtualnej](../backup/backup-azure-vms-automation.md).</span><span class="sxs-lookup"><span data-stu-id="79e25-287">For automating Azure Backup using scripts, please refer too[PowerShell cmdlets for VM backup](../backup/backup-azure-vms-automation.md).</span></span>

### <a name="steps-for-recovery"></a><span data-ttu-id="79e25-288">Procedura odzyskiwania</span><span class="sxs-lookup"><span data-stu-id="79e25-288">Steps for Recovery</span></span>

<span data-ttu-id="79e25-289">Jeśli konieczne toorepair lub skompiluj ponownie Maszynę wirtualną, można przywrócić hello maszyny Wirtualnej za pomocą dowolnego hello punktów odzyskiwania kopii zapasowej w magazynie hello.</span><span class="sxs-lookup"><span data-stu-id="79e25-289">If you need toorepair or rebuild a VM, you can restore hello VM from any of hello backup recovery points in hello vault.</span></span> <span data-ttu-id="79e25-290">Istnieje kilka różnych opcji dla przeprowadzania odzyskiwania hello:</span><span class="sxs-lookup"><span data-stu-id="79e25-290">There are a couple of different options for performing hello recovery:</span></span>

1.  <span data-ttu-id="79e25-291">Można utworzyć nowej maszyny Wirtualnej jako punktu w czasie reprezentacji kopii zapasowej maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="79e25-291">You can create a new VM as a point-in-time representation of your backed-up VM.</span></span>

2.  <span data-ttu-id="79e25-292">Można przywrócić hello dysków, a następnie użyć szablonu hello hello toocustomize maszyny Wirtualnej i Odbuduj hello przywrócić maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="79e25-292">You can restore hello disks and then use hello template for hello VM toocustomize and rebuild hello restored VM.</span></span> 

<span data-ttu-id="79e25-293">Zobacz instrukcje zbyt[maszyny wirtualne Azure Użyj portalu toorestore](../backup/backup-azure-arm-restore-vms.md#restoring-a-vm-during-azure-datacenter-disaster).</span><span class="sxs-lookup"><span data-stu-id="79e25-293">See instructions too[Use Azure portal toorestore virtual machines](../backup/backup-azure-arm-restore-vms.md#restoring-a-vm-during-azure-datacenter-disaster).</span></span> <span data-ttu-id="79e25-294">dokument Hello wyjaśniono również hello wykonania określonych kroków przywracania kopii zapasowej maszyn wirtualnych toohello centrum danych sparowanego przy użyciu geograficznie nadmiarowego magazynu kopii zapasowych w przypadku awarii w centrum danych podstawowych hello hello.</span><span class="sxs-lookup"><span data-stu-id="79e25-294">hello document also explains hello specific steps for restoring backed-up VMs toohello paired data center using your geo-redundant backup vault in hello case of a disaster at hello primary data center.</span></span> <span data-ttu-id="79e25-295">W takim przypadku kopia zapasowa Azure używa usługi obliczeniowe hello z maszyny wirtualnej hello region pomocniczy toocreate hello przywrócona.</span><span class="sxs-lookup"><span data-stu-id="79e25-295">In that case, Azure Backup uses hello Compute service from hello secondary region toocreate hello restored virtual machine.</span></span>

<span data-ttu-id="79e25-296">Można również użyć programu PowerShell dla [przywracanie maszyny Wirtualnej](../backup/backup-azure-vms-automation.md#restore-an-azure-vm) lub [tworzenia nowej maszyny Wirtualnej z przywrócić dysków](../backup/backup-azure-vms-automation.md#create-a-vm-from-restored-disks).</span><span class="sxs-lookup"><span data-stu-id="79e25-296">You can also use PowerShell for [restoring a VM](../backup/backup-azure-vms-automation.md#restore-an-azure-vm) or for [creating a new VM from restored disks](../backup/backup-azure-vms-automation.md#create-a-vm-from-restored-disks).</span></span>

## <a name="alternative-solution-consistent-snapshots"></a><span data-ttu-id="79e25-297">Alternatywnych rozwiązań: Migawki spójne</span><span class="sxs-lookup"><span data-stu-id="79e25-297">Alternative Solution: Consistent Snapshots</span></span>

<span data-ttu-id="79e25-298">Jeśli toouse hello Azure usługi tworzenia kopii zapasowej, można zaimplementować własny mechanizm tworzenia kopii zapasowej przy użyciu migawek.</span><span class="sxs-lookup"><span data-stu-id="79e25-298">If you are unable toouse hello Azure Backup Service, you can implement your own backup mechanism using snapshots.</span></span> <span data-ttu-id="79e25-299">Jest skomplikowane toocreate migawki spójne z dla wszystkich dysków używanych przez Maszynę wirtualną i region tooanother te migawki są następnie replikowane.</span><span class="sxs-lookup"><span data-stu-id="79e25-299">It is complicated toocreate consistent snapshots for all disks used by a VM and then replicate those snapshots tooanother region.</span></span> <span data-ttu-id="79e25-300">Z tego powodu Azure uwzględnia korzystanie z usług hello usługi Kopia zapasowa lepszym rozwiązaniem niż Tworzenie niestandardowego rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="79e25-300">For this reason, Azure considers leveraging hello Backup Service a better option than building a custom solution.</span></span> <span data-ttu-id="79e25-301">Jeśli używasz RA-GRS/GRS magazynu dla dysków migawki są automatycznie replikowane tooa centrum danych dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="79e25-301">If you use RA-GRS/GRS storage for disks, snapshots are automatically replicated tooa secondary data center.</span></span> <span data-ttu-id="79e25-302">Jeśli używasz magazynu LRS w przypadku dysków, konieczne będzie tooreplicate hello danych samodzielnie.</span><span class="sxs-lookup"><span data-stu-id="79e25-302">If you use LRS storage for disks, you will need tooreplicate hello data yourself.</span></span> <span data-ttu-id="79e25-303">Aby uzyskać więcej informacji, zobacz [kopia zapasowa Azure niezarządzane dysków maszyny Wirtualnej z migawkami przyrostowe](storage-incremental-snapshots.md).</span><span class="sxs-lookup"><span data-stu-id="79e25-303">For more information, see [Back up Azure unmanaged VM disks with incremental snapshots](storage-incremental-snapshots.md).</span></span>

<span data-ttu-id="79e25-304">Migawka jest reprezentację obiektu w określonym punkcie w czasie.</span><span class="sxs-lookup"><span data-stu-id="79e25-304">A snapshot is a representation of an object at a specific point in time.</span></span> <span data-ttu-id="79e25-305">Migawki będą naliczane rozliczeń dla hello rozmiar przyrostowej danych hello go blokad.</span><span class="sxs-lookup"><span data-stu-id="79e25-305">A snapshot will incur billing for hello incremental size of hello data it holds.</span></span> <span data-ttu-id="79e25-306">Aby uzyskać więcej informacji, zobacz [utworzenia migawki obiektu blob](storage-blob-snapshots.md).</span><span class="sxs-lookup"><span data-stu-id="79e25-306">For more information, see [Create a blob snapshot](storage-blob-snapshots.md).</span></span>

### <a name="creating-snapshots-while-hello-vm-is-running"></a><span data-ttu-id="79e25-307">Tworzenie migawki, natomiast hello wirtualna jest uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="79e25-307">Creating snapshots while hello VM is running</span></span>

<span data-ttu-id="79e25-308">Można utworzyć migawkę w dowolnym momencie, jeśli hello maszyna wirtualna jest uruchomiona, jest nadal dane przesyłane strumieniowo toohello dysków, i hello migawki może zawierać częściowe operacje, które zostały w locie.</span><span class="sxs-lookup"><span data-stu-id="79e25-308">While you can take a snapshot at any time, if hello VM is running, there is still data being streamed toohello disks, and hello snapshots may contain partial operations that were in flight.</span></span> <span data-ttu-id="79e25-309">Ponadto jeśli kilka dysków są zaangażowane, migawek hello różnych dysków może wystąpić w różnym czasie, co oznacza, że te migawki nie może być skoordynowany sposób.</span><span class="sxs-lookup"><span data-stu-id="79e25-309">Also, if there are several disks involved, hello snapshots of different disks may have occurred at different times, which means these snapshots may not be coordinated.</span></span> <span data-ttu-id="79e25-310">Jest to szczególnie kłopotliwe w sytuacji dla woluminów rozłożonych, którego pliki mogą zostać uszkodzone, jeśli trwa zmian podczas tworzenia kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="79e25-310">This is especially problematic for striped volumes whose files can be corrupted if changes were being made during backup.</span></span>

<span data-ttu-id="79e25-311">tooavoid takiej sytuacji hello procesu tworzenia kopii zapasowej musi implementować hello następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="79e25-311">tooavoid this situation, hello backup process must implement hello following steps:</span></span>

1.  <span data-ttu-id="79e25-312">Zablokuj wszystkie dyski hello</span><span class="sxs-lookup"><span data-stu-id="79e25-312">Freeze all hello disks</span></span>

2.  <span data-ttu-id="79e25-313">Flush hello wszystkich oczekujących operacji zapisu</span><span class="sxs-lookup"><span data-stu-id="79e25-313">Flush all hello pending writes</span></span>

3.  <span data-ttu-id="79e25-314">Następnie [utworzenia migawki obiektu blob](storage-blob-snapshots.md) dla wszystkich hello dysków</span><span class="sxs-lookup"><span data-stu-id="79e25-314">Then, [create a blob snapshot](storage-blob-snapshots.md) for all hello disks</span></span>

<span data-ttu-id="79e25-315">Niektóre aplikacje systemu Windows, takich jak SQL Server mechanizm skoordynowany sposób tworzenia kopii zapasowej za pośrednictwem spójnych z aplikacją kopii zapasowych VSS toocreate.</span><span class="sxs-lookup"><span data-stu-id="79e25-315">Some Windows applications like SQL Server provide a coordinated backup mechanism via VSS toocreate application-consistent backups.</span></span> <span data-ttu-id="79e25-316">W systemie Linux można użyć narzędzia, takiego jak fsfreeze koordynacji hello dysków, co zapewnia spójne z plikami kopii zapasowych, ale nie migawki spójne z aplikacjami.</span><span class="sxs-lookup"><span data-stu-id="79e25-316">On Linux, you can use a tool like fsfreeze for coordinating hello disks, which will provide file-consistent backups, but not application-consistent snapshots.</span></span> <span data-ttu-id="79e25-317">Ten proces jest skomplikowane, więc i należy rozważyć użycie [kopia zapasowa Azure](../backup/backup-azure-vms-introduction.md) lub rozwiązanie tworzenia kopii zapasowych innych firm, które już wdrożyć.</span><span class="sxs-lookup"><span data-stu-id="79e25-317">This process is complicated, so and you should consider using [Azure Backup](../backup/backup-azure-vms-introduction.md) or a third-party backup solution which already implement this.</span></span>

<span data-ttu-id="79e25-318">Kolekcja skoordynowanego migawek dla wszystkich dysków maszyny Wirtualnej hello, reprezentujący określonego punktu w czasie widok hello maszyny Wirtualnej spowoduje Hello powyżej procesu.</span><span class="sxs-lookup"><span data-stu-id="79e25-318">hello above process will result in a collection of coordinated snapshots for all hello VM disks, representing a specific point-in-time view of hello VM.</span></span> <span data-ttu-id="79e25-319">To jest punkt przywracania kopii zapasowej hello maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="79e25-319">This is a backup restore point for hello VM.</span></span> <span data-ttu-id="79e25-320">Możesz powtarzać proces hello w zaplanowanych odstępach czasu toocreate okresowe kopie zapasowe.</span><span class="sxs-lookup"><span data-stu-id="79e25-320">You can repeat hello process at scheduled intervals toocreate periodic backups.</span></span> <span data-ttu-id="79e25-321">Poniżej zamieszczono kroki hello zbyt[kopiowania hello kopii zapasowych tooanother regionu](#copy-the-snapshots-to-another-region) do odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="79e25-321">See below for hello steps too[copy hello backups tooanother region](#copy-the-snapshots-to-another-region) for DR.</span></span>

### <a name="creating-snapshots-while-hello-vm-is-offline"></a><span data-ttu-id="79e25-322">Tworzenie migawki, natomiast hello maszyna wirtualna jest w trybie offline</span><span class="sxs-lookup"><span data-stu-id="79e25-322">Creating snapshots while hello VM is offline</span></span>

<span data-ttu-id="79e25-323">Inną opcję toocreate spójne tworzenie kopii zapasowych jest zamykana hello maszyny Wirtualnej i obiektów blob z argumentami migawki każdego dysku.</span><span class="sxs-lookup"><span data-stu-id="79e25-323">Another option toocreate consistent backups is shutting down hello VM and taking blob snapshots of each disk.</span></span> <span data-ttu-id="79e25-324">To jest łatwiejsze niż koordynujący migawki uruchomionej maszyny wirtualnej, ale wymaga to kilka minut przestoju.</span><span class="sxs-lookup"><span data-stu-id="79e25-324">This is easier than coordinating snapshots of a running VM, but it requires a few minutes of downtime.</span></span> <span data-ttu-id="79e25-325">Dla tego procesu wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="79e25-325">For this process, follow these steps:</span></span>

1. <span data-ttu-id="79e25-326">Zamknij hello maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="79e25-326">Shut down hello VM.</span></span>

2. <span data-ttu-id="79e25-327">Utwórz migawkę każdej blob dysku VHD, który zajmuje tylko kilka sekund.</span><span class="sxs-lookup"><span data-stu-id="79e25-327">Create a snapshot of each VHD blob, which only takes a few seconds.</span></span>

    <span data-ttu-id="79e25-328">toocreate migawki, można użyć [PowerShell](storage-powershell-guide-full.md#how-to-manage-azure-blob-snapshots), hello [interfejsu API Rest magazynu Azure](https://msdn.microsoft.com/library/azure/ee691971.aspx), [interfejsu wiersza polecenia Azure](https://docs.microsoft.com/azure/xplat-cli-install), lub jeden z biblioteki klienta magazynu Azure hello takich jak [ Witaj biblioteki klienta usługi Storage dla platformy .NET](https://msdn.microsoft.com/library/azure/hh488361.aspx).</span><span class="sxs-lookup"><span data-stu-id="79e25-328">toocreate a snapshot, you can use [PowerShell](storage-powershell-guide-full.md#how-to-manage-azure-blob-snapshots), hello [Azure Storage Rest API](https://msdn.microsoft.com/library/azure/ee691971.aspx), [Azure CLI](https://docs.microsoft.com/azure/xplat-cli-install), or one of hello Azure Storage Client Libraries such as [hello Storage client library for .NET](https://msdn.microsoft.com/library/azure/hh488361.aspx).</span></span>

3. <span data-ttu-id="79e25-329">Uruchom hello maszyny Wirtualnej, która kończy hello przestoju.</span><span class="sxs-lookup"><span data-stu-id="79e25-329">Start hello VM, which ends hello downtime.</span></span> <span data-ttu-id="79e25-330">Zwykle hello cały proces zostanie zakończony w ciągu kilku minut.</span><span class="sxs-lookup"><span data-stu-id="79e25-330">Typically hello entire process completes within a few minutes.</span></span>

<span data-ttu-id="79e25-331">Ten proces zapewnia zbiór migawki spójne z dla wszystkich dysków hello, podając punktu przywracania hello maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="79e25-331">This process yields a collection of consistent snapshots for all hello disks, providing a backup restore point for hello VM.</span></span> <span data-ttu-id="79e25-332">Poniżej zamieszczono hello kroki toocopy hello migawki tooanother region do odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="79e25-332">See below for hello steps toocopy hello snapshots tooanother region for DR.</span></span>

### <a name="copy-hello-snapshots-tooanother-region"></a><span data-ttu-id="79e25-333">Skopiuj hello migawki tooanother regionu</span><span class="sxs-lookup"><span data-stu-id="79e25-333">Copy hello snapshots tooanother region</span></span>

<span data-ttu-id="79e25-334">Tworzenie migawek hello wyłącznie nie może być wystarczające do odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="79e25-334">Creation of hello snapshots alone may not be sufficient for DR.</span></span> <span data-ttu-id="79e25-335">Muszą także replikować hello migawek kopii zapasowych tooanother regionu.</span><span class="sxs-lookup"><span data-stu-id="79e25-335">You must also replicate hello snapshot backups tooanother region.</span></span>

<span data-ttu-id="79e25-336">Jeśli używasz GRS lub RA-GRS dla dysków, następnie hello migawki są replikowane toohello region pomocniczy automatycznie.</span><span class="sxs-lookup"><span data-stu-id="79e25-336">If you are using GRS or RA-GRS for your disks, then hello snapshots are replicated toohello secondary region automatically.</span></span> <span data-ttu-id="79e25-337">Może istnieć kilka minut opóźnienie przed hello replikacji, a jeśli Centrum danych podstawowych hello ulegnie awarii, przed migawki hello Zakończ replikacji, nie będzie możliwe tooaccess hello migawek z centrum danych dodatkowej hello.</span><span class="sxs-lookup"><span data-stu-id="79e25-337">There can be a few minutes of lag before hello replication, and if hello primary data center goes down before hello snapshots finish replicating, you will not be able tooaccess hello snapshots from hello secondary data center.</span></span> <span data-ttu-id="79e25-338">to prawdopodobieństwo Hello jest mała.</span><span class="sxs-lookup"><span data-stu-id="79e25-338">hello likelihood of this is small.</span></span>

> [!Note] 
> <span data-ttu-id="79e25-339">Tylko o hello dysków w ramach konta GRS lub RA-GRS nie chroni hello maszyny Wirtualnej po awarii.</span><span class="sxs-lookup"><span data-stu-id="79e25-339">Only having hello disks in a GRS or RA-GRS account does not protect hello VM from disasters.</span></span> <span data-ttu-id="79e25-340">Należy również tworzenie migawek skoordynowanego albo użyć kopia zapasowa Azure.</span><span class="sxs-lookup"><span data-stu-id="79e25-340">You must also create coordinated snapshots or use Azure Backup.</span></span> <span data-ttu-id="79e25-341">Jest to wymagane toorecover spójne tooa maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="79e25-341">This is required toorecover a VM tooa consistent state.</span></span>

<span data-ttu-id="79e25-342">Jeśli używasz LRS, należy skopiować natychmiast po utworzeniu migawki hello hello migawki tooa innego konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="79e25-342">If you are using LRS, you must copy hello snapshots tooa different storage account immediately after creating hello snapshot.</span></span> <span data-ttu-id="79e25-343">docelowy kopiowania Hello może być konta magazynu LRS w innym regionie, co powoduje kopiowania hello znajdujące się w regionie zdalnego.</span><span class="sxs-lookup"><span data-stu-id="79e25-343">hello copy target could be an LRS storage account in a different region, resulting in hello copy being in a remote region.</span></span> <span data-ttu-id="79e25-344">Można również skopiować konta magazynu RA-GRS tooan migawki hello hello tego samego regionu.</span><span class="sxs-lookup"><span data-stu-id="79e25-344">You can also copy hello snapshot tooan RA-GRS storage account in hello same region.</span></span> <span data-ttu-id="79e25-345">W takim przypadku migawki hello będzie zdalnego regionie dodatkowym opóźnieniem replikowanych toohello.</span><span class="sxs-lookup"><span data-stu-id="79e25-345">In this case, hello snapshot will be lazily replicated toohello remote secondary region.</span></span> <span data-ttu-id="79e25-346">Kopia zapasowa jest chronione przed awarii w lokacji głównej powitania po zakończeniu kopiowania hello i replikacji.</span><span class="sxs-lookup"><span data-stu-id="79e25-346">Your backup is protected from disasters at hello primary site once hello copying and replication is complete.</span></span>

<span data-ttu-id="79e25-347">toocopy Twojego przyrostowe migawki do odzyskiwania po awarii, przejrzeć instrukcje hello w [kopia zapasowa Azure niezarządzane dysków maszyny Wirtualnej z migawkami przyrostowe](storage-incremental-snapshots.md).</span><span class="sxs-lookup"><span data-stu-id="79e25-347">toocopy your incremental snapshots for DR efficiently, review hello instructions in [Back up Azure unmanaged VM disks with incremental snapshots](storage-incremental-snapshots.md).</span></span>

![][2]

### <a name="recovery-from-snapshots"></a><span data-ttu-id="79e25-348">Odzyskiwanie z migawki</span><span class="sxs-lookup"><span data-stu-id="79e25-348">Recovery from Snapshots</span></span>

<span data-ttu-id="79e25-349">tooretrieve migawkę, skopiuj go toomake nowego obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="79e25-349">tooretrieve a snapshot, copy it toomake a new blob.</span></span> <span data-ttu-id="79e25-350">Jeśli kopiujesz hello migawki z kontem podstawowym hello, możesz skopiować hello migawki za pośrednictwem podstawowego obiektu blob toohello hello migawki, w związku z tym podczas przywracania hello dysku toohello migawki; jest to nazywane podwyższania poziomu hello migawki.</span><span class="sxs-lookup"><span data-stu-id="79e25-350">If you are copying hello snapshot from hello primary account, you can copy hello snapshot over toohello base blob of hello snapshot, thus reverting hello disk toohello snapshot; this is known as promoting hello snapshot.</span></span> <span data-ttu-id="79e25-351">Jeśli kopia zapasowa migawki hello są kopiowane z pomocniczego konta (w przypadku hello RA-GRS), musi on być kopiowane tooa kontem podstawowym.</span><span class="sxs-lookup"><span data-stu-id="79e25-351">If you are copying hello snapshot backup from a secondary account (in hello case of RA-GRS), it must be copied tooa primary account.</span></span> <span data-ttu-id="79e25-352">Możesz skopiować migawki [przy użyciu programu PowerShell](storage-powershell-guide-full.md#how-to-copy-a-snapshot-of-a-blob) lub za pomocą narzędzia AzCopy hello.</span><span class="sxs-lookup"><span data-stu-id="79e25-352">You can copy a snapshot [using PowerShell](storage-powershell-guide-full.md#how-to-copy-a-snapshot-of-a-blob) or using hello AzCopy utility.</span></span> <span data-ttu-id="79e25-353">Aby uzyskać więcej informacji, zobacz [Transfer danych za pomocą wiersza polecenia Azcopy hello](storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="79e25-353">For more information, see [Transfer data with hello AzCopy Command-Line Utility](storage-use-azcopy.md).</span></span>

<span data-ttu-id="79e25-354">W przypadku hello maszyn wirtualnych z wieloma dyskami, należy skopiować wszystkie hello migawek, które są częścią hello koordynowane przez sam punkt przywracania.</span><span class="sxs-lookup"><span data-stu-id="79e25-354">In hello case of VMs with multiple disks, you must copy all hello snapshots that are part of hello same coordinated restore point.</span></span> <span data-ttu-id="79e25-355">Po skopiowaniu hello obiekty BLOB dysków VHD toowritable dla migawki można użyć toorecreate obiekty BLOB hello maszyny Wirtualnej przy użyciu szablonu hello na powitania maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="79e25-355">Once you copy hello snapshots toowritable VHD blobs, you can use hello blobs toorecreate your VM using hello template for hello VM.</span></span>

## <a name="other-options"></a><span data-ttu-id="79e25-356">Inne opcje</span><span class="sxs-lookup"><span data-stu-id="79e25-356">Other options</span></span>

### <a name="sql-server"></a><span data-ttu-id="79e25-357">Oprogramowanie SQL Server</span><span class="sxs-lookup"><span data-stu-id="79e25-357">SQL Server</span></span>

<span data-ttu-id="79e25-358">Program SQL Server uruchomiony na maszynie wirtualnej ma własną toobackup wbudowanych możliwości tooAzure bazy danych programu SQL Server magazynu obiektów Blob lub udziału plików.</span><span class="sxs-lookup"><span data-stu-id="79e25-358">SQL Server running in a VM has its own built-in capabilities toobackup your SQL Server database tooAzure Blob storage or a file share.</span></span> <span data-ttu-id="79e25-359">Konto magazynu hello jest GRS lub RA-GRS, można przejść do tych kopii zapasowych w centrum danych pomocniczego konta magazynu hello w razie awarii, hello z hello takie same ograniczenia jak wspomniano wcześniej.</span><span class="sxs-lookup"><span data-stu-id="79e25-359">If hello storage account is GRS or RA-GRS, you can access those backups in hello storage account’s secondary data center in hello event of a disaster, with hello same restrictions as discussed previously.</span></span> <span data-ttu-id="79e25-360">Aby uzyskać więcej informacji, zobacz [kopii zapasowej i przywracania dla programu SQL Server w usłudze Azure Virtual Machines](../virtual-machines/windows/sql/virtual-machines-windows-sql-backup-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="79e25-360">For more information, see [Backup and Restore for SQL Server in Azure Virtual Machines](../virtual-machines/windows/sql/virtual-machines-windows-sql-backup-recovery.md).</span></span> <span data-ttu-id="79e25-361">Dodanie toobackup i przywracanie [programu SQL Server zawsze włączonych grup dostępności](../virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr.md) można zachować w replikach pomocniczych baz danych toogreatly skrócić czas odzyskiwania po awarii hello.</span><span class="sxs-lookup"><span data-stu-id="79e25-361">In addition toobackup and restore, [SQL Server Always On Availability Groups](../virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr.md) can maintain secondary replicas of databases toogreatly reduce hello disaster recovery time.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="79e25-362">Inne zagadnienia</span><span class="sxs-lookup"><span data-stu-id="79e25-362">Other considerations</span></span>

<span data-ttu-id="79e25-363">Ten artykuł został omówiony sposób toobackup lub wykonaj migawki maszyn wirtualnych i ich odzyskiwania po awarii dysków toosupport i w jaki sposób toouse tych toorecover.</span><span class="sxs-lookup"><span data-stu-id="79e25-363">This article has discussed how toobackup or take snapshots of your VMs and their disks toosupport disaster recovery, and how toouse those toorecover.</span></span> <span data-ttu-id="79e25-364">Model usługi Azure Resource Manager hello wiele osób za pomocą szablonów toocreate ich maszyn wirtualnych i pozostałą infrastrukturą na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="79e25-364">With hello Azure Resource Manager model, many people use templates toocreate their VMs and other infrastructure in Azure.</span></span> <span data-ttu-id="79e25-365">Można użyć szablonu toocreate maszynę Wirtualną, która ma hello tej samej konfiguracji zawsze.</span><span class="sxs-lookup"><span data-stu-id="79e25-365">You can use a template toocreate a VM that has hello same configuration every time.</span></span> <span data-ttu-id="79e25-366">Jeśli używasz niestandardowych obrazów do tworzenia maszyn wirtualnych, należy również upewnić się, obrazy są chronione przy użyciu toostore kont RA-GRS je.</span><span class="sxs-lookup"><span data-stu-id="79e25-366">If you use custom images for creating your VMs, you must also make sure your images are protected by using an RA-GRS account toostore them.</span></span>

<span data-ttu-id="79e25-367">W rezultacie procesu tworzenia kopii zapasowej może być kombinacją dwie czynności:</span><span class="sxs-lookup"><span data-stu-id="79e25-367">Consequently, your backup process may be a combination of two things:</span></span>

1. <span data-ttu-id="79e25-368">Witaj kopii zapasowej danych (dyski)</span><span class="sxs-lookup"><span data-stu-id="79e25-368">Backup hello data (disks)</span></span>
2. <span data-ttu-id="79e25-369">Konfiguracja kopii zapasowej hello (szablony, niestandardowe obrazy)</span><span class="sxs-lookup"><span data-stu-id="79e25-369">Backup hello configuration (templates, custom images)</span></span>

<span data-ttu-id="79e25-370">W zależności od hello opcję tworzenia kopii zapasowej, można wybrać może mieć kopii zapasowej hello toohandle hello danych i konfiguracji hello, lub hello usługi tworzenia kopii zapasowej może obsługiwać to wszystko dla Ciebie.</span><span class="sxs-lookup"><span data-stu-id="79e25-370">Depending on hello backup option you choose, you may have toohandle hello backup of both hello data and hello configuration, or hello backup service may handle all of that for you.</span></span>

## <a name="appendix---understanding-hello-impact-of-lrs-grs-and-ra-grs"></a><span data-ttu-id="79e25-371">Dodatek - zrozumienie wpływu hello LRS, GRS i RA-GRS</span><span class="sxs-lookup"><span data-stu-id="79e25-371">Appendix - Understanding hello impact of LRS, GRS, and RA-GRS</span></span>

<span data-ttu-id="79e25-372">Dla konta magazynu na platformie Azure, istnieją trzy typy nadmiarowość danych, które należy wziąć pod uwagę dotyczące odzyskiwania po awarii — magazyn lokalnie nadmiarowy (LRS), geograficznie nadmiarowego (GRS), lub odczytu z magazynu geograficznie nadmiarowego z dostępu (RA-GRS).</span><span class="sxs-lookup"><span data-stu-id="79e25-372">For storage accounts in Azure, there are three types of data redundancy that you should consider regarding disaster recovery – locally redundant (LRS), geo-redundant (GRS), or geo-redundant with read access (RA-GRS).</span></span> 

<span data-ttu-id="79e25-373">Lokalnie magazyn geograficznie nadmiarowy (LRS) przechowuje trzy kopie danych hello w hello tym samym centrum danych.</span><span class="sxs-lookup"><span data-stu-id="79e25-373">Locally Redundant Storage (LRS) retains three copies of hello data in hello same data center.</span></span> <span data-ttu-id="79e25-374">Podczas zapisywania danych hello, wszystkie trzy kopie są aktualizowane przed zwróceniem Powodzenie toohello wywołującego, dlatego wiadomo, że są one identyczne.</span><span class="sxs-lookup"><span data-stu-id="79e25-374">When writing hello data, all three copies are updated before success is returned toohello caller, so you know they are identical.</span></span> <span data-ttu-id="79e25-375">Na dysku jest chronione przed błędy lokalne, ponieważ jest on bardzo mało prawdopodobne, że wszystkie trzy kopie będzie mieć wpływ na na powitania tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="79e25-375">Your disk is protected from local failures, since it is extremely unlikely that all three copies would be impacted at hello same time.</span></span> <span data-ttu-id="79e25-376">W przypadku hello LRS nie nie nadmiarowość geograficzna, więc hello dysku nie jest chroniony poważnej awarii, które mogą mieć wpływ na jednostkę Centrum lub magazynu danych.</span><span class="sxs-lookup"><span data-stu-id="79e25-376">In hello case of LRS, there is no geo-redundancy, so hello disk is not protected from catastrophic failures that can impact an entire data center or storage unit.</span></span>

<span data-ttu-id="79e25-377">Z GRS i RA-GRS trzy kopie danych są przechowywane w regionie podstawowym hello (wybrane przez użytkownika), a więcej trzy kopie danych są przechowywane w odpowiedni region pomocniczy (ustawione przez platformę Azure).</span><span class="sxs-lookup"><span data-stu-id="79e25-377">With GRS and RA-GRS, three copies of your data are retained in hello primary region (selected by you), and three more copies of your data are retained in a corresponding secondary region (set by Azure).</span></span> <span data-ttu-id="79e25-378">Na przykład jeśli dane są przechowywane w zachodnie stany USA, hello dane zostaną zreplikowane tooEast Stanów Zjednoczonych.</span><span class="sxs-lookup"><span data-stu-id="79e25-378">For example, if you store data in West US, hello data will be replicated tooEast US.</span></span> <span data-ttu-id="79e25-379">Odbywa się asynchronicznie, a istnieje małe opóźnienia między toohello aktualizacje podstawowego i pomocniczego.</span><span class="sxs-lookup"><span data-stu-id="79e25-379">This is done asynchronously, and there is a small delay between updates toohello primary and secondary.</span></span> <span data-ttu-id="79e25-380">Repliki hello dyski w lokacji dodatkowej hello są zgodne na podstawie na dysku (z opóźnieniem hello), ale replik wielu aktywnych dysków mogą nie być zsynchronizowane **ze sobą**.</span><span class="sxs-lookup"><span data-stu-id="79e25-380">Replicas of hello disks on hello secondary site are consistent on a per-disk basis (with hello delay), but replicas of multiple active disks may not be in sync **with each other**.</span></span> <span data-ttu-id="79e25-381">toohave repliki spójnej na wielu dyskach, migawek spójnych są wymagane.</span><span class="sxs-lookup"><span data-stu-id="79e25-381">toohave consistent replicas across multiple disks, consistent snapshots are needed.</span></span>

<span data-ttu-id="79e25-382">Witaj podstawowa różnica między GRS i RA-GRS polega na tym, że z RA-GRS, możesz przeczytać hello pomocniczej kopii w dowolnym momencie.</span><span class="sxs-lookup"><span data-stu-id="79e25-382">hello main difference between GRS and RA-GRS is that with RA-GRS, you can read hello secondary copy at any time.</span></span> <span data-ttu-id="79e25-383">W przypadku problemu, który renderuje hello danych w regionie podstawowym hello jest niedostępny, hello Azure zespołu spowoduje, że każdy dostępu toorestore nakładu pracy.</span><span class="sxs-lookup"><span data-stu-id="79e25-383">If there is a problem that renders hello data in hello primary region inaccessible, hello Azure team will make every effort toorestore access.</span></span> <span data-ttu-id="79e25-384">Gdy hello podstawowej nie działa, jeśli masz RA-GRS włączone, można dostęp do danych hello w centrum danych dodatkowej hello.</span><span class="sxs-lookup"><span data-stu-id="79e25-384">While hello primary is down, if you have RA-GRS enabled, you can access hello data in hello secondary data center.</span></span> <span data-ttu-id="79e25-385">W związku z tym jeśli planujesz tooread z repliki hello, gdy hello podstawowy jest niedostępny, następnie RA-GRS należy rozważyć.</span><span class="sxs-lookup"><span data-stu-id="79e25-385">Therefore, if you plan tooread from hello replica while hello primary is inaccessible, then RA-GRS should be considered.</span></span>

<span data-ttu-id="79e25-386">Jeśli okaże się toobe znaczne awarii, hello Azure zespołu może wyzwolić awarię replikacji geograficznej — warstwa i zmień hello głównej DNS wpisy toopoint toosecondary magazynu.</span><span class="sxs-lookup"><span data-stu-id="79e25-386">If it turns out toobe a significant outage, hello Azure team may trigger a geo-failover and change hello primary DNS entries toopoint toosecondary storage.</span></span> <span data-ttu-id="79e25-387">W tym momencie masz albo GRS lub RA-GRS włączona, można przejść do hello danych w regionie hello, używany hello toobe dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="79e25-387">At this point, if you have either GRS or RA-GRS enabled, you can access hello data in hello region that used toobe hello secondary.</span></span> <span data-ttu-id="79e25-388">Innymi słowy Twoje konto magazynu GRS i występuje problem, można przejść do magazynu pomocniczego hello tylko wtedy, gdy geograficznie trybu failover.</span><span class="sxs-lookup"><span data-stu-id="79e25-388">In other words, if your storage account is GRS and there is a problem, you can access hello secondary storage only if there is a geo-failover.</span></span>

<span data-ttu-id="79e25-389">Aby uzyskać więcej informacji, zobacz [jakie toodo w przypadku wystąpienia awarii usługi Azure Storage](storage-disaster-recovery-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="79e25-389">For more information, see [What toodo if an Azure Storage outage occurs](storage-disaster-recovery-guidance.md).</span></span> 

<span data-ttu-id="79e25-390">Należy pamiętać, że Microsoft kontroluje, czy do pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="79e25-390">Note that Microsoft controls whether a failover occurs.</span></span> <span data-ttu-id="79e25-391">Tryb failover nie są kontrolowane na konto magazynu, w związku z tym nie zdecydowano poszczególnych odbiorców.</span><span class="sxs-lookup"><span data-stu-id="79e25-391">Failover is not controlled per storage account, therefore it is not decided by individual customers.</span></span> <span data-ttu-id="79e25-392">tooimplement odzyskiwania po awarii dla określonego magazynu kont lub dysków maszyny wirtualnej, należy użyć hello techniki opisane wcześniej w tym artykule.</span><span class="sxs-lookup"><span data-stu-id="79e25-392">tooimplement Disaster Recovery for specific storage accounts or virtual machine disks, you must use hello techniques described previously in this article.</span></span>



[1]: ./media/storage-backup-and-disaster-recovery-for-azure-iaas-disks/backup-and-disaster-recovery-for-azure-iaas-disks-1.png
[2]: ./media/storage-backup-and-disaster-recovery-for-azure-iaas-disks/backup-and-disaster-recovery-for-azure-iaas-disks-2.png