---
title: "Kopia zapasowa i odzyskiwanie po awarii dla dysków IaaS platformy Azure | Dokumentacja firmy Microsoft"
description: "W tym artykule Wyjaśnijmy, jak planowanie tworzenia kopii zapasowych i odzyskiwania awaryjnego (DR) maszyn wirtualnych IaaS (maszyny wirtualne) oraz dyski na platformie Azure. W tym dokumencie opisano zarówno zarządzane i niezarządzane dysków"
services: storage
cloud: Azure
documentationcenter: na
author: luywang
manager: kavithag
ms.assetid: 
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/19/2017
ms.author: luywang
ms.openlocfilehash: 0de675e46dbd527148ac5fedcd35d81962adfb7e
ms.sourcegitcommit: 422efcbac5b6b68295064bd545132fcc98349d01
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/29/2017
---
# <a name="backup-and-disaster-recovery-for-azure-iaas-disks"></a><span data-ttu-id="bf52c-104">Kopia zapasowa i odzyskiwanie po awarii dla dysków IaaS platformy Azure</span><span class="sxs-lookup"><span data-stu-id="bf52c-104">Backup and disaster recovery for Azure IaaS disks</span></span>

<span data-ttu-id="bf52c-105">W tym artykule Wyjaśnijmy, jak planowanie tworzenia kopii zapasowych i odzyskiwania awaryjnego (DR) maszyn wirtualnych IaaS (maszyny wirtualne) oraz dyski na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="bf52c-105">In this article, we will explain how to plan for Backup and Disaster Recovery (DR) of IaaS virtual machines (VMs) and Disks in Azure.</span></span> <span data-ttu-id="bf52c-106">W tym dokumencie opisano zarówno zarządzane i niezarządzane dysków.</span><span class="sxs-lookup"><span data-stu-id="bf52c-106">This document covers both Managed and Unmanaged Disks.</span></span>

<span data-ttu-id="bf52c-107">Zostanie najpierw omawianiu wbudowanych usterek tolerancji możliwości platformy Azure umożliwiające ochronę przed awariami lokalnego.</span><span class="sxs-lookup"><span data-stu-id="bf52c-107">We’ll first talk about the built-in fault tolerance capabilities in the Azure platform which help guard against local failures.</span></span> <span data-ttu-id="bf52c-108">Następnie omówiono w scenariuszach po awarii nie są w pełni objęte wbudowanych możliwości, który jest opisany w tym dokumencie tematem głównym.</span><span class="sxs-lookup"><span data-stu-id="bf52c-108">We’ll then discuss the disaster scenarios not fully covered by the built-in capabilities, which is the main topic addressed by this document.</span></span> <span data-ttu-id="bf52c-109">Poniżej opisano również kilka przykładowe scenariusze obciążenie, gdzie może stosować inną uwagi dotyczące tworzenia kopii zapasowych i odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="bf52c-109">We’ll also show several examples of workload scenarios where different Backup and DR considerations may apply.</span></span> <span data-ttu-id="bf52c-110">Firma Microsoft może przejrzeć możliwych rozwiązań dla odzyskiwania po awarii dysków IaaS.</span><span class="sxs-lookup"><span data-stu-id="bf52c-110">We’ll then review possible solutions for DR of IaaS Disks.</span></span> 

## <a name="introduction"></a><span data-ttu-id="bf52c-111">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="bf52c-111">Introduction</span></span>

<span data-ttu-id="bf52c-112">Platforma Azure korzysta różne metody nadmiarowość i odporność na uszkodzenia w celu ochrony klientów przed awariami sprzętu zlokalizowanego, które mogą wystąpić.</span><span class="sxs-lookup"><span data-stu-id="bf52c-112">The Azure platform uses various methods for redundancy and fault tolerance to help protect customers from localized hardware failures that can occur.</span></span> <span data-ttu-id="bf52c-113">Błędy lokalne mogą obejmować problemy z maszyną serwera magazynu Azure, która przechowuje dane dla dysku wirtualnego lub w przypadku awarii dysków SSD i HDD na tym serwerze.</span><span class="sxs-lookup"><span data-stu-id="bf52c-113">Local failures may include problems with an Azure storage server machine that stores part of the data for a virtual disk or failures of an SSD or HDD on that server.</span></span> <span data-ttu-id="bf52c-114">Takie błędy składnika izolowanego sprzętu może się zdarzyć, podczas wykonywania normalnych operacji i platforma zaprojektowano w celu zapewnienie odporności na awarie tych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-114">Such isolated hardware component failures can happen during normal operations and the platform is designed to be resilient to these failures.</span></span> <span data-ttu-id="bf52c-115">Główne awarii może spowodować błędy lub inaccessibility dużej liczby serwerów magazynu lub całe centrum danych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-115">Major disasters can result in failures or inaccessibility of a large numbers of storage servers or a whole datacenter.</span></span> <span data-ttu-id="bf52c-116">Maszyn wirtualnych i dyski są zwykle chronione zlokalizowanych awarii, dodatkowe kroki są niezbędne do ochrony obciążenia region na poziomie awarii krytycznego (na przykład poważnej awarii), które mogą wpłynąć na Twojej maszyny Wirtualnej i dysków.</span><span class="sxs-lookup"><span data-stu-id="bf52c-116">While your VMs and disks are normally protected from localized failures, additional steps are necessary to protect your workload from region-wide catastrophic failures (such as a major disaster) that can affect your VM and disks.</span></span>

<span data-ttu-id="bf52c-117">Oprócz możliwości platformy błędów mogą wystąpić problemy z aplikacją klienta lub danych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-117">In addition to the possibility of platform failures, problems with the customer application or data can occur.</span></span> <span data-ttu-id="bf52c-118">Na przykład nowa wersja aplikacji mogą przypadkowo należy podziału, Zmień dane.</span><span class="sxs-lookup"><span data-stu-id="bf52c-118">For example, a new version of your application may inadvertently make a breaking change to the data.</span></span> <span data-ttu-id="bf52c-119">W takim przypadku można przywrócić aplikacji i danych do poprzednich wersji zawierający ostatniego znanego dobrego stanu.</span><span class="sxs-lookup"><span data-stu-id="bf52c-119">In that case, you may want to revert the application and the data to a prior version containing the last known good state.</span></span> <span data-ttu-id="bf52c-120">Wymagane jest utrzymanie regularnych kopii zapasowych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-120">This requires maintaining regular backups.</span></span>

<span data-ttu-id="bf52c-121">Regionalnej awarii należy wykonać kopię zapasową dysków maszyn wirtualnych IaaS w innym regionie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-121">For regional disaster recovery, you must backup your IaaS VM disks to a different region.</span></span> 

<span data-ttu-id="bf52c-122">Zanim przyjrzymy opcje tworzenia kopii zapasowych i odzyskiwania po awarii umożliwia recap kilku dostępnych metod obsługi zlokalizowanych awarii.</span><span class="sxs-lookup"><span data-stu-id="bf52c-122">Before we look at Backup and DR options, let’s recap a few methods available for handling localized failures.</span></span>

### <a name="azure-iaas-resiliency"></a><span data-ttu-id="bf52c-123">Odporność IaaS platformy Azure</span><span class="sxs-lookup"><span data-stu-id="bf52c-123">Azure IaaS Resiliency</span></span>

<span data-ttu-id="bf52c-124">*Odporność* odwołuje się do uszkodzenia normalne błędów występujących w składników sprzętowych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-124">*Resiliency* refers to the tolerance for normal failures that occur in hardware components.</span></span> <span data-ttu-id="bf52c-125">Odporność jest możliwość skutków błędów i kontynuować działanie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-125">Resiliency is the ability to recover from failures and continue to function.</span></span> <span data-ttu-id="bf52c-126">Nie jest o unikanie błędów, ale odpowiadać na awarie w taki sposób, który pozwala uniknąć przestoju lub utraty danych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-126">It's not about avoiding failures, but responding to failures in a way that avoids downtime or data loss.</span></span> <span data-ttu-id="bf52c-127">Celem odporności jest do zwrócenia aplikacji w pełni funkcjonalnej stan w przypadku awarii.</span><span class="sxs-lookup"><span data-stu-id="bf52c-127">The goal of resiliency is to return the application to a fully functioning state following a failure.</span></span> <span data-ttu-id="bf52c-128">Azure maszyn wirtualnych i dyski mają na celu zapewnienie odporności na typowych błędów sprzętu.</span><span class="sxs-lookup"><span data-stu-id="bf52c-128">Azure Virtual Machines and Disks are designed to be resilient to common hardware faults.</span></span> <span data-ttu-id="bf52c-129">Daj nam przyjrzeć się, jak platforma Azure IaaS zapewnia to elastyczność.</span><span class="sxs-lookup"><span data-stu-id="bf52c-129">Let us look at how the Azure IaaS platform provides this resiliency.</span></span>

<span data-ttu-id="bf52c-130">Maszyna wirtualna składa się głównie z dwóch części: (1) A obliczeniowe serwera i (2) dyski stałe.</span><span class="sxs-lookup"><span data-stu-id="bf52c-130">A virtual machine consists mainly of two parts: (1) A compute server, and (2) the persistent disks.</span></span> <span data-ttu-id="bf52c-131">Wpływ zarówno na odporność na uszkodzenia maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-131">Both affect the fault tolerance of a virtual machine.</span></span>

<span data-ttu-id="bf52c-132">Jeśli serwer hosta obliczeń platformy Azure, która przechowuje maszyny Wirtualnej błędów sprzętu (która jest rzadko), Azure jest przeznaczona na automatyczne przywracanie maszyny Wirtualnej na innym serwerze.</span><span class="sxs-lookup"><span data-stu-id="bf52c-132">If the Azure compute host server that houses your VM experiences a hardware failure (which is rare), Azure is designed to automatically restore the VM on another server.</span></span> <span data-ttu-id="bf52c-133">W takim przypadku wystąpią ponowne uruchomienie komputera, a maszyna wirtualna musi być Utwórz kopię zapasową po pewnym czasie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-133">If this happens, you will experience a reboot, and the VM will be back up after some time.</span></span> <span data-ttu-id="bf52c-134">Azure automatycznie wykrywa takie awarie sprzętu i wykonuje odzyskiwanie, aby pomóc, upewnij się, że klient maszyna wirtualna będzie dostępna tak szybko, jak to możliwe.</span><span class="sxs-lookup"><span data-stu-id="bf52c-134">Azure automatically detects such hardware failures and executes recoveries to help ensure the customer VM will be available as soon as possible.</span></span>

<span data-ttu-id="bf52c-135">Dotyczących dysków IaaS trwałości danych ma kluczowe znaczenie dla platformy magazynu trwałego.</span><span class="sxs-lookup"><span data-stu-id="bf52c-135">Regarding IaaS disks, durability of data is critical for the persistent storage platform.</span></span> <span data-ttu-id="bf52c-136">Azure klienci mają ważnymi aplikacji uruchomionych na IaaS i są one zależne od trwałość danych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-136">Azure customers have important business applications running on IaaS and they depend on the persistence of the data.</span></span> <span data-ttu-id="bf52c-137">Projekty platformy Azure ochrony tych dysków IaaS przy użyciu trzech nadmiarowe kopie dane przechowywane lokalnie, zapewniając wysoką trwałością przed awariami lokalnego.</span><span class="sxs-lookup"><span data-stu-id="bf52c-137">Azure designs protection for these IaaS disks with three redundant copies of data stored locally, providing high durability against local failures.</span></span> <span data-ttu-id="bf52c-138">W przypadku niepowodzenia jednym ze składników sprzętu, które przechowuje dysku maszyny Wirtualnej nie ma wpływu na ponieważ istnieją dwie kopie dodatkowe do obsługi żądań dysku.</span><span class="sxs-lookup"><span data-stu-id="bf52c-138">If one of the hardware components that holds your disk fails, your VM is not impacted because there are two additional copies to support disk requests.</span></span> <span data-ttu-id="bf52c-139">Działa dobrze nawet w przypadku awarii dwóch składniki sprzętowe obsługujące dysku w tym samym czasie (co jest bardzo rzadko).</span><span class="sxs-lookup"><span data-stu-id="bf52c-139">It works fine even if two different hardware components supporting a disk fail at the same time (which would be very rare).</span></span> <span data-ttu-id="bf52c-140">Aby ułatwić, upewnij się, że firma Microsoft zachowuje zawsze trzy repliki, usługi Magazyn Azure automatycznie spowoduje utworzenie nowej kopii w tle dane, jeśli jeden z trzech kopii stał się niedostępny.</span><span class="sxs-lookup"><span data-stu-id="bf52c-140">To help ensure we always maintain three replicas, the Azure Storage service automatically spawns a new copy of data in the background if one of the three copies becomes unavailable.</span></span> <span data-ttu-id="bf52c-141">W związku z tym nie należy używać RAID z dyskami Azure odporności na uszkodzenia.</span><span class="sxs-lookup"><span data-stu-id="bf52c-141">Therefore, it should not be necessary to use RAID with Azure disks for fault tolerance.</span></span> <span data-ttu-id="bf52c-142">Proste RAID 0 konfiguracji powinny być wystarczające stosowanie dysków, jeśli jest to niezbędne do utworzenia większych woluminów.</span><span class="sxs-lookup"><span data-stu-id="bf52c-142">A simple RAID 0 configuration should be sufficient for striping the disks if necessary to create larger volumes.</span></span>

<span data-ttu-id="bf52c-143">Z powodu tej architektury **Azure spójnie wydał korporacyjnej trwałości dla IaaS z branży dysków ZERO % [firmie częstość niepowodzeń](https://en.wikipedia.org/wiki/Annualized_failure_rate).**</span><span class="sxs-lookup"><span data-stu-id="bf52c-143">Because of this architecture, **Azure has consistently delivered enterprise-grade durability for IaaS disks, with an industry-leading ZERO % [Annualized Failure Rate](https://en.wikipedia.org/wiki/Annualized_failure_rate).**</span></span>

<span data-ttu-id="bf52c-144">Usterki sprzętu zlokalizowanych na mocy obliczeniowej hosta lub w platformie magazynu mogą czasami doprowadzi do tymczasowej niedostępności dla maszyny Wirtualnej, która jest objęta [umowy SLA platformy Azure](https://azure.microsoft.com/support/legal/sla/virtual-machines/) dostępności maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-144">Localized hardware faults on the compute host or in the storage platform can sometimes result in temporary unavailability for the VM which is covered by the [Azure SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines/) for VM Availability.</span></span> <span data-ttu-id="bf52c-145">Platforma Azure udostępnia również branży umowa SLA dla pojedynczego wystąpień maszyn wirtualnych, które używają dysków magazyn w warstwie Premium.</span><span class="sxs-lookup"><span data-stu-id="bf52c-145">Azure also provides an industry-leading SLA for single VM instances that use Premium Storage disks.</span></span>

<span data-ttu-id="bf52c-146">Aby chronić obciążeń aplikacji z przestoju z powodu tymczasowej niedostępności dysku lub maszyny Wirtualnej, klienci mogą korzystać z [zestawów dostępności](../virtual-machines/windows/manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="bf52c-146">To safeguard application workloads from downtime due to the temporary unavailability of a disk or VM, customers can leverage [Availability Sets](../virtual-machines/windows/manage-availability.md).</span></span> <span data-ttu-id="bf52c-147">Co najmniej dwie maszyny wirtualne w zestawie dostępności zapewnia nadmiarowość dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="bf52c-147">Two or more virtual machines in an availability set provides redundancy for the application.</span></span> <span data-ttu-id="bf52c-148">Azure utworzy tych maszyn wirtualnych i dyski w domenach awarii oddzielne z różnych składników zasilania, sieci i serwera.</span><span class="sxs-lookup"><span data-stu-id="bf52c-148">Azure then creates these VMs and disks in separate fault domains with different power, network, and server components.</span></span> <span data-ttu-id="bf52c-149">W związku z tym awarie sprzętowe zlokalizowanego zwykle nie wpływają na wiele maszyn wirtualnych w zestawie w tym samym czasie, zapewnienie wysokiej dostępności dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="bf52c-149">Thus, localized hardware failures typically do not affect multiple VMs in the set at the same time, providing high availability for your application.</span></span> <span data-ttu-id="bf52c-150">Jest on uznawany za dobrą praktyką jest korzystanie z zestawów dostępności, gdy wymagana jest wysoka dostępność.</span><span class="sxs-lookup"><span data-stu-id="bf52c-150">It is considered a good practice to use availability sets when high availability is required.</span></span> <span data-ttu-id="bf52c-151">Aby uzyskać więcej informacji zobacz aspekty odzyskiwania po awarii opisanymi poniżej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-151">For more information, see the Disaster Recovery aspects detailed below.</span></span>

### <a name="backup-and-disaster-recovery"></a><span data-ttu-id="bf52c-152">Kopii zapasowych i odzyskiwania po awarii</span><span class="sxs-lookup"><span data-stu-id="bf52c-152">Backup and Disaster Recovery</span></span>

<span data-ttu-id="bf52c-153">Odzyskiwania awaryjnego (DR) jest możliwość odzyskania z zdarzeń, ale rzadko głównych: błędy z systemem innym niż przejściowy, całej skali, takie jak zakłócenia, która wpływa na całą regionu.</span><span class="sxs-lookup"><span data-stu-id="bf52c-153">Disaster recovery (DR) is the ability to recover from rare but major incidents: non-transient, wide-scale failures, such as service disruption that affects an entire region.</span></span> <span data-ttu-id="bf52c-154">Odzyskiwanie po awarii obejmuje kopii zapasowej danych i archiwizowania i może zawierać ręcznej interwencji, takich jak przywracanie z kopii zapasowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-154">Disaster recovery includes data backup and archiving, and may include manual intervention, such as restoring a database from backup.</span></span>

<span data-ttu-id="bf52c-155">Platforma Azure wbudowaną ochronę przed awariami zlokalizowanych mogą nie pełni chronić maszyny wirtualne/dysków w przypadku awarii głównych, co może powodować awarie na dużą skalę.</span><span class="sxs-lookup"><span data-stu-id="bf52c-155">The Azure platform’s built-in protection against localized failures may not fully protect the VMs/disks in the case of major disasters which can cause large-scale outages.</span></span> <span data-ttu-id="bf52c-156">W tym krytycznego zdarzenia, takie jak trafienia huragan, trzęsienia ziemi, fire lub awarie jednostki sprzętowe dużą skalę centrum danych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-156">This includes catastrophic events such as a data center being hit by a hurricane, earthquake, fire, or large scale hardware unit failures.</span></span> <span data-ttu-id="bf52c-157">Ponadto mogą wystąpić błędy z powodu problemy dotyczące danych lub aplikacji.</span><span class="sxs-lookup"><span data-stu-id="bf52c-157">In addition, you may encounter failures due to application or data issues.</span></span>

<span data-ttu-id="bf52c-158">Aby lepiej chronić obciążeń IaaS z awarii, należy zaplanować nadmiarowości i kopie zapasowe, aby włączyć odzyskiwanie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-158">To help protect your IaaS workloads from outages, you should plan for redundancy and backups to enable recovery.</span></span> <span data-ttu-id="bf52c-159">Podczas odzyskiwania po awarii należy zaplanować nadmiarowości i tworzenie kopii zapasowych w innej lokalizacji geograficznej od lokacji głównej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-159">For disaster recovery, you should plan redundancy and backup in a different geographic location away from the primary site.</span></span> <span data-ttu-id="bf52c-160">Dzięki temu, upewnij się, że kopia zapasowa nie ma wpływu na tego samego zdarzenia, który pierwotnie wpływ na maszynie Wirtualnej lub dysków.</span><span class="sxs-lookup"><span data-stu-id="bf52c-160">This helps ensure your backup is not affected by the same event that originally impacted the VM or disks.</span></span> <span data-ttu-id="bf52c-161">Aby uzyskać więcej informacji, zobacz [odzyskiwania po awarii dla aplikacji w oparciu Azure](https://docs.microsoft.com/azure/architecture/resiliency/disaster-recovery-azure-applications).</span><span class="sxs-lookup"><span data-stu-id="bf52c-161">For more information, see [Disaster Recovery for Applications built on Azure](https://docs.microsoft.com/azure/architecture/resiliency/disaster-recovery-azure-applications).</span></span>

<span data-ttu-id="bf52c-162">Uwagi dotyczące programu DR mogą obejmować następujące aspekty:</span><span class="sxs-lookup"><span data-stu-id="bf52c-162">Your DR considerations may include the following aspects:</span></span>

1. <span data-ttu-id="bf52c-163">Wysokiej dostępności (HA) to funkcja aplikacji kontynuowanie działania w dobrej kondycji, bez przestojów znaczące.</span><span class="sxs-lookup"><span data-stu-id="bf52c-163">High Availability (HA) is the ability of the application to continue running in a healthy state, without significant downtime.</span></span> <span data-ttu-id="bf52c-164">Przez "dobrej kondycji," oznacza możemy aplikacji jest elastyczny i użytkownicy mogą połączyć się z aplikacją i korzystać z niego.</span><span class="sxs-lookup"><span data-stu-id="bf52c-164">By "healthy state," we mean the application is responsive, and users can connect to the application and interact with it.</span></span> <span data-ttu-id="bf52c-165">Niektórych kluczowych aplikacji i baz danych może być musi być dostępny zawsze, nawet jeśli błędy występują w platformie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-165">Certain mission-critical applications and databases may be required to be available always, even when there are failures in the platform.</span></span> <span data-ttu-id="bf52c-166">Dla tych zadań może być konieczne planowanie nadmiarowości na potrzeby aplikacji, a także dane.</span><span class="sxs-lookup"><span data-stu-id="bf52c-166">For these workloads, you may need to plan redundancy for the application as well as the data.</span></span>

2. <span data-ttu-id="bf52c-167">Trwałość danych: W niektórych przypadkach głównym zagadnieniem jest zapewnienie, że dane zostaną zachowane w przypadku awarii.</span><span class="sxs-lookup"><span data-stu-id="bf52c-167">Data Durability: In some cases, the main consideration is ensuring the data is preserved in the case of a disaster.</span></span> <span data-ttu-id="bf52c-168">Dlatego może być konieczne kopii zapasowej danych w innej lokacji.</span><span class="sxs-lookup"><span data-stu-id="bf52c-168">Therefore, you may need a backup of your data in a different site.</span></span> <span data-ttu-id="bf52c-169">W przypadku takich obciążeń mogą nie być potrzebne pełne nadmiarowości na potrzeby aplikacji, ale także regularne tworzenie kopii zapasowych dysków.</span><span class="sxs-lookup"><span data-stu-id="bf52c-169">For such workloads, you may not need full redundancy for the application, but a regular backup of the disks.</span></span>

## <a name="backup-and-dr-scenarios"></a><span data-ttu-id="bf52c-170">Kopia zapasowa i scenariuszy odzyskiwania po awarii</span><span class="sxs-lookup"><span data-stu-id="bf52c-170">Backup and DR Scenarios</span></span>

<span data-ttu-id="bf52c-171">Oto kilka przykładów typowych scenariuszy obciążenia aplikacji oraz zagadnienia dotyczące planowania odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="bf52c-171">Let’s look at a few typical examples of application workload scenarios and the considerations for planning Disaster Recovery.</span></span>

### <a name="scenario-1-major-database-solutions"></a><span data-ttu-id="bf52c-172">Scenariusz 1: Głównej bazy danych rozwiązania</span><span class="sxs-lookup"><span data-stu-id="bf52c-172">Scenario 1: Major Database Solutions</span></span>

<span data-ttu-id="bf52c-173">Rozważ serwer produkcyjny bazy danych, takich jak SQL Server lub Oracle, który może obsługiwać wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="bf52c-173">Consider a production database server like SQL Server or Oracle that can support High Availability.</span></span> <span data-ttu-id="bf52c-174">Krytyczne produkcji aplikacji i użytkowników są zależne od tej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-174">Critical production applications and users depend on this database.</span></span> <span data-ttu-id="bf52c-175">Plan odzyskiwania po awarii dla tego systemu może być konieczne obsługuje następujące wymagania:</span><span class="sxs-lookup"><span data-stu-id="bf52c-175">The Disaster Recovery plan for this system may need to support the following requirements:</span></span>

1. <span data-ttu-id="bf52c-176">Dane muszą być chronione i możliwe do odzyskania.</span><span class="sxs-lookup"><span data-stu-id="bf52c-176">Data must be protected and recoverable.</span></span>
2.  <span data-ttu-id="bf52c-177">Serwer musi być dostępny do użycia.</span><span class="sxs-lookup"><span data-stu-id="bf52c-177">Server must be available for use.</span></span>

<span data-ttu-id="bf52c-178">Może to wymagać utrzymania repliki bazy danych w innym regionie jako kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-178">This may require maintaining a replica of the database in a different region as a backup.</span></span> <span data-ttu-id="bf52c-179">W zależności od wymagań dotyczących dostępności serwera i odzyskiwanie danych rozwiązanie może należeć do zakresu od aktywny-aktywny lub aktywny / pasywny lokacji repliki do okresowe tworzenie kopii zapasowych danych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-179">Depending on the requirements for server availability and data recovery, the solution could range from an Active-Active or Active-Passive replica site to periodic offline backups of the data.</span></span> <span data-ttu-id="bf52c-180">Relacyjnych baz danych, takich jak SQL Server i Oracle zapewniają różne opcje replikacji.</span><span class="sxs-lookup"><span data-stu-id="bf52c-180">Relational databases such as SQL Server and Oracle provide various options for replication.</span></span> <span data-ttu-id="bf52c-181">Dla programu SQL Server [programu SQL Server zawsze włączonych grup dostępności](https://msdn.microsoft.com/library/hh510230.aspx) można użyć w celu zapewnienia wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="bf52c-181">For SQL Server, [SQL Server Always On Availability Groups](https://msdn.microsoft.com/library/hh510230.aspx) can be used for high availability.</span></span>

<span data-ttu-id="bf52c-182">Bazy danych NoSQL, takie jak bazy danych MongoDB obsługują również [replik](https://docs.mongodb.com/manual/replication/) nadmiarowości.</span><span class="sxs-lookup"><span data-stu-id="bf52c-182">NoSQL databases like MongoDB also support [replicas](https://docs.mongodb.com/manual/replication/) for redundancy.</span></span> <span data-ttu-id="bf52c-183">Można replik wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="bf52c-183">The replicas for high availability can be used.</span></span>

### <a name="scenario-2-a-cluster-of-redundant-vms"></a><span data-ttu-id="bf52c-184">Scenariusz 2: Klastra nadmiarowe maszyny wirtualne</span><span class="sxs-lookup"><span data-stu-id="bf52c-184">Scenario 2: A cluster of redundant VMs</span></span>

<span data-ttu-id="bf52c-185">Należy wziąć pod uwagę obciążenia obsługiwane przez klaster maszyn wirtualnych, które zapewniają nadmiarowość i równoważenie obciążenia.</span><span class="sxs-lookup"><span data-stu-id="bf52c-185">Consider a workload handled by a cluster of VMs that provide redundancy and load balancing.</span></span> <span data-ttu-id="bf52c-186">Przykładem jest klastra Cassandra wdrożone w regionie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-186">One example would be a Cassandra cluster deployed in a region.</span></span> <span data-ttu-id="bf52c-187">Ten typ architektury już zapewnia wysoki poziom nadmiarowości w tym regionie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-187">This type of architecture already provides a high level of redundancy within that region.</span></span> <span data-ttu-id="bf52c-188">Jednak aby chronić obciążenia w przypadku regionalnej awarii poziomu, należy rozważyć rozpraszania klastra w dwóch regionach lub wprowadzanie okresowe kopie zapasowe w innym regionie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-188">However, to protect the workload from a regional level failure, you should consider spreading the cluster across two regions or making periodic backups to another region.</span></span>

### <a name="scenario-3-iaas-application-workload"></a><span data-ttu-id="bf52c-189">Scenariusz 3: IaaS aplikacji obciążenia</span><span class="sxs-lookup"><span data-stu-id="bf52c-189">Scenario 3: IaaS Application Workload</span></span>

<span data-ttu-id="bf52c-190">Może to być typowe produkcji pracą maszyny Wirtualnej platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="bf52c-190">This could be a typical production workload running on an Azure VM.</span></span> <span data-ttu-id="bf52c-191">Na przykład może być serwerem sieci web lub serwera plików zawartości i innych zasobów w lokacji.</span><span class="sxs-lookup"><span data-stu-id="bf52c-191">For example, it could be a web server or file server holding the content and other resources of a site.</span></span> <span data-ttu-id="bf52c-192">Może to być również aplikacji biznesowej niestandardowej uruchomione na maszynie Wirtualnej, które przechowywane jego dane, zasobów i stan aplikacji dysków maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-192">It could also be a custom-built business application running on a VM that stored its data, resources, and application state on the VM disks.</span></span> <span data-ttu-id="bf52c-193">W takim przypadku koniecznie upewnij się, że możesz korzystać z kopii zapasowych na bieżąco.</span><span class="sxs-lookup"><span data-stu-id="bf52c-193">In this case, it is important to make sure you take backups on a regular basis.</span></span> <span data-ttu-id="bf52c-194">Częstotliwość wykonywania kopii zapasowych powinny być oparte na rodzaju obciążenia maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-194">Backup frequency should be based on the nature of the VM workload.</span></span> <span data-ttu-id="bf52c-195">Na przykład jeśli aplikacja jest uruchamiana codziennie i modyfikuje danych, następnie kopii zapasowej należy podjąć co godzinę.</span><span class="sxs-lookup"><span data-stu-id="bf52c-195">For example, if the application runs every day and modifies data, then the backup should be taken every hour.</span></span>

<span data-ttu-id="bf52c-196">Innym przykładem jest serwer raportowania ściągania danych z innych źródeł i generuje raporty zagregowanych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-196">Another example is a reporting server that pull data from other sources and generates aggregated reports.</span></span> <span data-ttu-id="bf52c-197">Utraty tej maszyny Wirtualnej lub dysków doprowadzi do utraty raporty.</span><span class="sxs-lookup"><span data-stu-id="bf52c-197">Loss of this VM or disks will lead to the loss of the reports.</span></span> <span data-ttu-id="bf52c-198">Jednak może być możliwe ponownie uruchomić proces raportowania i ponownie wygenerować danych wyjściowych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-198">However, it may be possible to rerun the reporting process and regenerate the output.</span></span> <span data-ttu-id="bf52c-199">W takim przypadku naprawdę masz utraty danych, nawet jeśli serwer raportowania o awarii, tak aby można było wyższy poziom tolerancji utraty części danych na serwerze raportowania.</span><span class="sxs-lookup"><span data-stu-id="bf52c-199">In that case, you don’t really have a loss of data even if the reporting server is hit with a disaster, so you could have a higher level of tolerance for losing part of the data on the reporting server.</span></span> <span data-ttu-id="bf52c-200">W takim przypadku mniej częste wykonywanie kopii zapasowych jest opcję, aby zmniejszyć koszty.</span><span class="sxs-lookup"><span data-stu-id="bf52c-200">In that case, less frequent backups is an option to reduce the cost.</span></span>

### <a name="scenario-4-iaas-application-data-issues"></a><span data-ttu-id="bf52c-201">Scenariusz 4: Problemy z danych aplikacji IaaS</span><span class="sxs-lookup"><span data-stu-id="bf52c-201">Scenario 4: IaaS Application data issues</span></span>

<span data-ttu-id="bf52c-202">Masz aplikację, która oblicza, przechowuje i służy krytyczne komercyjnych danych, takie jak informacje o cenach.</span><span class="sxs-lookup"><span data-stu-id="bf52c-202">You have an application that computes, maintains, and serves critical commercial data such as pricing information.</span></span> <span data-ttu-id="bf52c-203">Nowa wersja aplikacji ma usterki oprogramowania niepoprawnie obliczana ceny i uszkodzone dane commerce obsługiwane przez platformę.</span><span class="sxs-lookup"><span data-stu-id="bf52c-203">A new version of your application had a software bug which incorrectly computed the pricing and corrupted the existing commerce data served by the platform.</span></span> <span data-ttu-id="bf52c-204">W tym miejscu będą najlepszy plan działania do przywrócenia starszej wersji aplikacji i danych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-204">Here, the best course of action would be to revert to the earlier version of the application and the data first.</span></span> <span data-ttu-id="bf52c-205">Aby włączyć tę opcję, należy wykonać okresowe kopie zapasowe systemu.</span><span class="sxs-lookup"><span data-stu-id="bf52c-205">To enable this, take periodic backups of your system.</span></span>

## <a name="disaster-recovery-solution-azure-backup-service"></a><span data-ttu-id="bf52c-206">Rozwiązanie odzyskiwania po awarii: Usługa Kopia zapasowa Azure</span><span class="sxs-lookup"><span data-stu-id="bf52c-206">Disaster Recovery Solution: Azure Backup Service</span></span>

<span data-ttu-id="bf52c-207">[Usługa Kopia zapasowa Azure](https://azure.microsoft.com/services/backup/) może służyć do tworzenia kopii zapasowych i odzyskiwania po awarii, a w przypadku [dysków zarządzanych](storage-managed-disks-overview.md) oraz [niezarządzane dysków](storage-about-disks-and-vhds-windows.md#unmanaged-disks).</span><span class="sxs-lookup"><span data-stu-id="bf52c-207">[Azure Backup Service](https://azure.microsoft.com/services/backup/) is can be used for Backup and DR, and it works with [Managed Disks](storage-managed-disks-overview.md) as well as [Unmanaged Disks](storage-about-disks-and-vhds-windows.md#unmanaged-disks).</span></span> <span data-ttu-id="bf52c-208">Zadanie tworzenia kopii zapasowej można utworzyć na podstawie czasu tworzenia kopii zapasowych, łatwe przywrócenie maszyny Wirtualnej i zasady przechowywania kopii zapasowych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-208">You can create a backup job with time-based backups, easy VM restoration and backup retention policies.</span></span> 

<span data-ttu-id="bf52c-209">Jeśli używasz [dysków Premium Storage](storage-premium-storage.md), [dysków zarządzanych](storage-managed-disks-overview.md), lub innych typów dysku z [magazyn lokalnie nadmiarowy (LRS)](storage-redundancy.md#locally-redundant-storage) opcji jest szczególnie ważne wykorzystać okresowe DR kopie zapasowe.</span><span class="sxs-lookup"><span data-stu-id="bf52c-209">If you use [Premium Storage disks](storage-premium-storage.md), [Managed Disks](storage-managed-disks-overview.md), or other disk types with the [locally redundant storage (LRS)](storage-redundancy.md#locally-redundant-storage) option, it is especially important to leverage periodic DR backups.</span></span> <span data-ttu-id="bf52c-210">Kopia zapasowa Azure przechowuje dane w magazynie usług odzyskiwania do przechowywania długoterminowego.</span><span class="sxs-lookup"><span data-stu-id="bf52c-210">Azure Backup stores the data in your Recovery Services vault for long term retention.</span></span> <span data-ttu-id="bf52c-211">Wybierz [magazyn geograficznie nadmiarowy (GRS)](storage-redundancy.md#geo-redundant-storage) opcji magazynu usług odzyskiwania kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-211">Choose the [Geo-redundant storage (GRS)](storage-redundancy.md#geo-redundant-storage) option for the Backup Recovery Services vault.</span></span> <span data-ttu-id="bf52c-212">Który będzie upewnij się, że kopie zapasowe są replikowane w innym regionie Azure, zabezpieczenia z regionalnej awarii.</span><span class="sxs-lookup"><span data-stu-id="bf52c-212">That will ensure backups are replicated to a different Azure region for safeguarding from regional disasters.</span></span>

<span data-ttu-id="bf52c-213">Dla [niezarządzane dysków](storage-about-disks-and-vhds-windows.md#unmanaged-disks), można użyć typu magazynu LRS dysków IaaS, ale upewnij się, że kopia zapasowa Azure jest włączone z opcją grs w warstwie magazynu usług odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="bf52c-213">For [Unmanaged Disks](storage-about-disks-and-vhds-windows.md#unmanaged-disks), you can use the LRS storage type for IaaS disks, but ensure that Azure Backup is enabled with the GRS option for the Recovery Services Vault.</span></span>

<span data-ttu-id="bf52c-214">**Jeśli używasz [GRS](storage-redundancy.md#geo-redundant-storage)/[RA-GRS](storage-redundancy.md#read-access-geo-redundant-storage) opcji dla niezarządzanego dysków, można nadal konieczne migawek spójnych kopii zapasowych i odzyskiwania po awarii.**</span><span class="sxs-lookup"><span data-stu-id="bf52c-214">**If you use the [GRS](storage-redundancy.md#geo-redundant-storage)/[RA-GRS](storage-redundancy.md#read-access-geo-redundant-storage) option for your Unmanaged Disks, you still need consistent snapshots for Backup and DR.**</span></span> <span data-ttu-id="bf52c-215">Należy użyć jednego [usługi Kopia zapasowa Azure](https://azure.microsoft.com/services/backup/) lub [migawki spójne z](#alternative-solution-consistent-snapshots).</span><span class="sxs-lookup"><span data-stu-id="bf52c-215">You must use either [Azure Backup Service](https://azure.microsoft.com/services/backup/) or [consistent snapshots](#alternative-solution-consistent-snapshots).</span></span>

<span data-ttu-id="bf52c-216">Poniżej znajduje się podsumowanie rozwiązania dla odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="bf52c-216">The following is a summary of solutions for DR.</span></span>

| <span data-ttu-id="bf52c-217">Scenariusz</span><span class="sxs-lookup"><span data-stu-id="bf52c-217">Scenario</span></span> | <span data-ttu-id="bf52c-218">Automatyczne replikacji</span><span class="sxs-lookup"><span data-stu-id="bf52c-218">Automatic Replication</span></span> | <span data-ttu-id="bf52c-219">Rozwiązanie odzyskiwania po awarii</span><span class="sxs-lookup"><span data-stu-id="bf52c-219">DR Solution</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bf52c-220">*Dyski magazynu w warstwie Premium*</span><span class="sxs-lookup"><span data-stu-id="bf52c-220">*Premium Storage Disks*</span></span> | <span data-ttu-id="bf52c-221">Lokalne ([LRS](storage-redundancy.md#locally-redundant-storage))</span><span class="sxs-lookup"><span data-stu-id="bf52c-221">Local ([LRS](storage-redundancy.md#locally-redundant-storage))</span></span> | [<span data-ttu-id="bf52c-222">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="bf52c-222">Azure Backup</span></span>](https://azure.microsoft.com/services/backup/) |
| <span data-ttu-id="bf52c-223">*Managed Disks*</span><span class="sxs-lookup"><span data-stu-id="bf52c-223">*Managed Disks*</span></span> | <span data-ttu-id="bf52c-224">Lokalne ([LRS](storage-redundancy.md#locally-redundant-storage))</span><span class="sxs-lookup"><span data-stu-id="bf52c-224">Local ([LRS](storage-redundancy.md#locally-redundant-storage))</span></span> | [<span data-ttu-id="bf52c-225">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="bf52c-225">Azure Backup</span></span>](https://azure.microsoft.com/services/backup/) |
| <span data-ttu-id="bf52c-226">*Niezarządzane LRS dysków*</span><span class="sxs-lookup"><span data-stu-id="bf52c-226">*Unmanaged LRS Disks*</span></span> | <span data-ttu-id="bf52c-227">Lokalne ([LRS](storage-redundancy.md#locally-redundant-storage))</span><span class="sxs-lookup"><span data-stu-id="bf52c-227">Local ([LRS](storage-redundancy.md#locally-redundant-storage))</span></span> | [<span data-ttu-id="bf52c-228">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="bf52c-228">Azure Backup</span></span>](https://azure.microsoft.com/services/backup/) |
| <span data-ttu-id="bf52c-229">*Niezarządzane grs w warstwie dysków*</span><span class="sxs-lookup"><span data-stu-id="bf52c-229">*Unmanaged GRS Disks*</span></span> | <span data-ttu-id="bf52c-230">Krzyżowe region ([GRS](storage-redundancy.md#geo-redundant-storage))</span><span class="sxs-lookup"><span data-stu-id="bf52c-230">Cross region ([GRS](storage-redundancy.md#geo-redundant-storage))</span></span> | [<span data-ttu-id="bf52c-231">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="bf52c-231">Azure Backup</span></span>](https://azure.microsoft.com/services/backup/)<br/>[<span data-ttu-id="bf52c-232">Migawki spójne z</span><span class="sxs-lookup"><span data-stu-id="bf52c-232">Consistent snapshots</span></span>](#alternative-solution-consistent-snapshots) |
| <span data-ttu-id="bf52c-233">*Niezarządzane RA-GRS dysków*</span><span class="sxs-lookup"><span data-stu-id="bf52c-233">*Unmanaged RA-GRS Disks*</span></span> | <span data-ttu-id="bf52c-234">Krzyżowe region ([RA-GRS](storage-redundancy.md#read-access-geo-redundant-storage))</span><span class="sxs-lookup"><span data-stu-id="bf52c-234">Cross region ([RA-GRS](storage-redundancy.md#read-access-geo-redundant-storage))</span></span> | [<span data-ttu-id="bf52c-235">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="bf52c-235">Azure Backup</span></span>](https://azure.microsoft.com/services/backup/)<br/>[<span data-ttu-id="bf52c-236">Migawki spójne z</span><span class="sxs-lookup"><span data-stu-id="bf52c-236">Consistent snapshots</span></span>](#alternative-solution-consistent-snapshots) |

<span data-ttu-id="bf52c-237">Wysokiej dostępności najlepiej można spełnić przez przy użyciu dysków zarządzanych w zestawie dostępności wraz z usługą kopia zapasowa Azure.</span><span class="sxs-lookup"><span data-stu-id="bf52c-237">High availability can best by met through the use of Managed Disks in an Availability Set along with Azure Backup.</span></span> <span data-ttu-id="bf52c-238">Jeśli używane są niezarządzane dysków, można nadal używać kopia zapasowa Azure do odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="bf52c-238">If you are using Unmanaged Disks, you can still  use Azure Backup for DR.</span></span> <span data-ttu-id="bf52c-239">Jeśli nie można użyć usługi Kopia zapasowa Azure, następnie biorąc [migawek spójnych](#alternative-solution-consistent-snapshots) zgodnie z opisem w dalszej części artykułu to alternatywne rozwiązanie tworzenia kopii zapasowych i odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="bf52c-239">If you are unable to use Azure Backup, then taking [consistent snapshots](#alternative-solution-consistent-snapshots) as described in a later section is an alternative solution for Backup and DR.</span></span>

<span data-ttu-id="bf52c-240">Opcje wysokiej dostępności, tworzenie kopii zapasowej i odzyskiwania po awarii na poziomie aplikacji lub infrastruktury może być reprezentowany jako poniżej:</span><span class="sxs-lookup"><span data-stu-id="bf52c-240">Your choices for high availability, backup and DR at Application or Infrastructure levels can be represented as below:</span></span>

| <span data-ttu-id="bf52c-241">*Poziom*</span><span class="sxs-lookup"><span data-stu-id="bf52c-241">*Level*</span></span> | <span data-ttu-id="bf52c-242">Wysoka dostępność</span><span class="sxs-lookup"><span data-stu-id="bf52c-242">High Availability</span></span>   | <span data-ttu-id="bf52c-243">Kopii zapasowej / odzyskiwania po awarii</span><span class="sxs-lookup"><span data-stu-id="bf52c-243">Backup / DR</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bf52c-244">*Aplikacji*</span><span class="sxs-lookup"><span data-stu-id="bf52c-244">*Application*</span></span> | <span data-ttu-id="bf52c-245">Zawsze włączone SQL</span><span class="sxs-lookup"><span data-stu-id="bf52c-245">SQL Always On</span></span> | <span data-ttu-id="bf52c-246">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="bf52c-246">Azure Backup</span></span> |
| <span data-ttu-id="bf52c-247">*Infrastruktury*</span><span class="sxs-lookup"><span data-stu-id="bf52c-247">*Infrastructure*</span></span>  | <span data-ttu-id="bf52c-248">Zestaw dostępności</span><span class="sxs-lookup"><span data-stu-id="bf52c-248">Availability Set</span></span>  | <span data-ttu-id="bf52c-249">GRS z migawki spójne z</span><span class="sxs-lookup"><span data-stu-id="bf52c-249">GRS with consistent snapshots</span></span> |

### <a name="using-the-azure-backup-service"></a><span data-ttu-id="bf52c-250">Za pomocą usługi tworzenia kopii zapasowej systemu Azure</span><span class="sxs-lookup"><span data-stu-id="bf52c-250">Using the Azure Backup Service</span></span>

<span data-ttu-id="bf52c-251">[Kopia zapasowa Azure](../backup/backup-azure-vms-introduction.md) może wykonywać kopie zapasowe maszyn wirtualnych systemem Windows lub Linux do magazynu usług odzyskiwania Azure.</span><span class="sxs-lookup"><span data-stu-id="bf52c-251">[Azure Backup](../backup/backup-azure-vms-introduction.md) can backup your VMs running Windows or Linux to the Azure Recovery Services Vault.</span></span> <span data-ttu-id="bf52c-252">Tworzenie kopii zapasowej i przywracanie danych biznesowych o znaczeniu krytycznym skomplikowane jest fakt, że strategicznych danych biznesowych kopie zapasowe uruchomionej aplikacji, które tworzą dane.</span><span class="sxs-lookup"><span data-stu-id="bf52c-252">Backing up and restoring business-critical data is complicated by the fact that business-critical data must be backed up while the applications that produce the data are running.</span></span> <span data-ttu-id="bf52c-253">Aby rozwiązać ten problem, kopia zapasowa Azure udostępnia spójnych z aplikacją kopii zapasowych dla obciążeń firmy Microsoft przy użyciu woluminów w tle Service (VSS) do zapewnienia poprawnie zapisywania danych do magazynu.</span><span class="sxs-lookup"><span data-stu-id="bf52c-253">To address this, Azure Backup provides application-consistent backups for Microsoft workloads by using the Volume Shadow Service (VSS) to ensure that data is written correctly to storage.</span></span> <span data-ttu-id="bf52c-254">Dla maszyn wirtualnych systemu Linux tylko plik spójne kopie zapasowe są możliwe, ponieważ systemu Linux nie ma funkcji odpowiednikiem VSS.</span><span class="sxs-lookup"><span data-stu-id="bf52c-254">For Linux VMs, only file-consistent backups are possible, since Linux does not have functionality equivalent to VSS.</span></span>

![][1]

<span data-ttu-id="bf52c-255">Jeśli kopia zapasowa Azure inicjuje zadania tworzenia kopii zapasowej w zaplanowanym terminie, wyzwala kopii zapasowej rozszerzenia zainstalowane na maszynie wirtualnej, aby utworzyć migawkę punktu w czasie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-255">When Azure Backup initiates a backup job at the scheduled time, it triggers the backup extension installed in the VM to take a point-in-time snapshot.</span></span> <span data-ttu-id="bf52c-256">Migawki w połączeniu z usługi VSS można pobrać migawki spójne z dysków w maszynie wirtualnej bez konieczności go zamknąć.</span><span class="sxs-lookup"><span data-stu-id="bf52c-256">A snapshot is taken in coordination with VSS to get a consistent snapshot of the disks in the virtual machine without having to shut it down.</span></span> <span data-ttu-id="bf52c-257">Zapasowy numer wewnętrzny w maszynie Wirtualnej opróżnienia wszystkich zapisy przed wykonaniem migawki dotyczącej spójności wszystkich dysków.</span><span class="sxs-lookup"><span data-stu-id="bf52c-257">The backup extension in the VM flushes all writes before taking the consistent snapshot of all the disks.</span></span> <span data-ttu-id="bf52c-258">Po migawki, dane są przesyłane przez kopię zapasową Azure do magazynu kopii zapasowych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-258">After the snapshot is taken, the data is transferred by Azure Backup to the backup vault.</span></span> <span data-ttu-id="bf52c-259">Aby proces tworzenia kopii zapasowej bardziej wydajne, usługa identyfikuje i transferuje tylko bloki danych, które uległy zmianie od czasu ostatniej kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-259">To make the backup process more efficient, the service identifies and transfers only the blocks of data that have changed since the last backup.</span></span>


<span data-ttu-id="bf52c-260">Aby przywrócić, można wyświetlić dostępnych kopii zapasowych za pomocą usługi Kopia zapasowa Azure i inicjuje operację przywracania.</span><span class="sxs-lookup"><span data-stu-id="bf52c-260">To restore, you can view the available backups through Azure Backup and then initiate a restore.</span></span> <span data-ttu-id="bf52c-261">Możesz utworzyć i przywracania kopii zapasowych Azure za pośrednictwem [portalu Azure](https://portal.azure.com/), [przy użyciu programu PowerShell](../backup/backup-azure-vms-automation.md ), lub za pomocą [interfejsu wiersza polecenia Azure](https://docs.microsoft.com/azure/xplat-cli-install).</span><span class="sxs-lookup"><span data-stu-id="bf52c-261">You can create and restore Azure backups through the [Azure portal](https://portal.azure.com/), [using PowerShell](../backup/backup-azure-vms-automation.md ), or using the [Azure CLI](https://docs.microsoft.com/azure/xplat-cli-install).</span></span> <span data-ttu-id="bf52c-262">Aby uzyskać więcej informacji zobacz Kopia zapasowa Azure.</span><span class="sxs-lookup"><span data-stu-id="bf52c-262">For more information, see Azure Backup.</span></span>

### <a name="steps-to-enable-backup"></a><span data-ttu-id="bf52c-263">Kroki w celu włączenia kopii zapasowej</span><span class="sxs-lookup"><span data-stu-id="bf52c-263">Steps to Enable Backup</span></span>

<span data-ttu-id="bf52c-264">Poniższe kroki są zwykle używane do włączenia kopii zapasowych maszyn wirtualnych przy użyciu [Azure Portal](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="bf52c-264">The following steps are typically used to enable backups of your VMs using the [Azure Portal](https://portal.azure.com/).</span></span> <span data-ttu-id="bf52c-265">Będą różne wersje, w zależności od danego scenariusza dokładne.</span><span class="sxs-lookup"><span data-stu-id="bf52c-265">There will be some variations depending on your exact scenario.</span></span> <span data-ttu-id="bf52c-266">Zapoznaj się [kopia zapasowa Azure](../backup/backup-azure-vms-introduction.md) dokumentacji, aby uzyskać szczegółowe informacje.</span><span class="sxs-lookup"><span data-stu-id="bf52c-266">Refer to the [Azure Backup](../backup/backup-azure-vms-introduction.md) documentation for full details.</span></span> <span data-ttu-id="bf52c-267">Azure Backup również [obsługuje maszyny wirtualne z dyskami zarządzane](https://azure.microsoft.com/blog/azure-managed-disk-backup/).</span><span class="sxs-lookup"><span data-stu-id="bf52c-267">Azure Backup also [supports VMs with Managed Disks](https://azure.microsoft.com/blog/azure-managed-disk-backup/).</span></span>

1.  <span data-ttu-id="bf52c-268">Tworzenie magazynu usług odzyskiwania dla maszyny Wirtualnej, wykonując następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="bf52c-268">Create a recovery services vault for a VM using the following steps:</span></span>

    <span data-ttu-id="bf52c-269">a.</span><span class="sxs-lookup"><span data-stu-id="bf52c-269">a.</span></span>  <span data-ttu-id="bf52c-270">Przy użyciu [portalu Azure](https://portal.azure.com/), Przeglądaj wszystkie zasoby i odnaleźć "Magazyny usług odzyskiwania".</span><span class="sxs-lookup"><span data-stu-id="bf52c-270">Using the [Azure portal](https://portal.azure.com/), browse all resources and find “Recovery Services vaults”.</span></span>

    <span data-ttu-id="bf52c-271">b.</span><span class="sxs-lookup"><span data-stu-id="bf52c-271">b.</span></span>  <span data-ttu-id="bf52c-272">W menu Magazyny usług odzyskiwania kliknij przycisk Dodaj, a następnie wykonaj kroki, aby utworzyć nowy magazyn, w tym samym regionie co maszyna wirtualna.</span><span class="sxs-lookup"><span data-stu-id="bf52c-272">On the Recovery Services vaults menu, click Add and follow the steps to create a new vault in the same region as the VM.</span></span> <span data-ttu-id="bf52c-273">Na przykład jeśli maszyna wirtualna znajduje się w regionie zachodnie stany USA, wybierz zachodnie stany USA magazynu.</span><span class="sxs-lookup"><span data-stu-id="bf52c-273">For example, if your VM is in West US region, pick West US for the vault.</span></span>

2.  <span data-ttu-id="bf52c-274">Sprawdź replikacji magazynu dla nowo utworzonego magazynu.</span><span class="sxs-lookup"><span data-stu-id="bf52c-274">Verify the Storage replication for the newly created vault.</span></span> <span data-ttu-id="bf52c-275">Aby to zrobić, uzyskać dostęp do magazynu w bloku Magazyny usług odzyskiwania i przejdź do ustawień lub tworzenia kopii zapasowej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="bf52c-275">To do this, access the vault from the Recovery Services vaults blade and go to the settings/Backup Configuration.</span></span> <span data-ttu-id="bf52c-276">Upewnij się, że jest zaznaczona opcja GRS domyślnie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-276">Ensure the GRS option is selected by default.</span></span> <span data-ttu-id="bf52c-277">Daje to pewność, że magazynu są automatycznie replikowane do centrum danych pomocniczych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-277">This will ensure that your vault is automatically replicated to a secondary data center.</span></span> <span data-ttu-id="bf52c-278">Na przykład magazynu w zachodnie stany USA będą automatycznie replikowane do wschodnie stany USA.</span><span class="sxs-lookup"><span data-stu-id="bf52c-278">For example, your vault in West US will be automatically replicated to East US.</span></span>

3.  <span data-ttu-id="bf52c-279">Konfigurowanie zasad tworzenia kopii zapasowej, a następnie wybierz maszynę Wirtualną z tego samego interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="bf52c-279">Configure the backup policy and select the VM from the same UI.</span></span>

4.  <span data-ttu-id="bf52c-280">Upewnij się, że zainstalowano agenta kopii zapasowej na maszynie Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-280">Make sure the Backup Agent is installed on the VM.</span></span> <span data-ttu-id="bf52c-281">Jeśli maszyna wirtualna została utworzona przy użyciu obrazu galerii Azure, agent kopii zapasowej już jest zainstalowany.</span><span class="sxs-lookup"><span data-stu-id="bf52c-281">If your VM is created using an Azure gallery image, then the Backup agent is already installed.</span></span> <span data-ttu-id="bf52c-282">W przeciwnym razie (Jeśli używasz niestandardowego obrazu), użyj instrukcji do [Zainstaluj agenta maszyny Wirtualnej na maszynie wirtualnej](../backup/backup-azure-arm-vms-prepare.md#install-the-vm-agent-on-the-virtual-machine).</span><span class="sxs-lookup"><span data-stu-id="bf52c-282">Otherwise (that is, if you are using a custom image), use instructions to [Install the VM Agent on the virtual machine](../backup/backup-azure-arm-vms-prepare.md#install-the-vm-agent-on-the-virtual-machine).</span></span>

5.  <span data-ttu-id="bf52c-283">Upewnij się, że maszyna wirtualna zezwala na połączenie sieciowe dla usługi tworzenia kopii zapasowej do funkcji.</span><span class="sxs-lookup"><span data-stu-id="bf52c-283">Make sure that the VM allows network connectivity for the backup service to function.</span></span> <span data-ttu-id="bf52c-284">Wykonaj te instrukcje dla [połączeń sieciowych](../backup/backup-azure-arm-vms-prepare.md#network-connectivity).</span><span class="sxs-lookup"><span data-stu-id="bf52c-284">Follow these instructions for [Network connectivity](../backup/backup-azure-arm-vms-prepare.md#network-connectivity).</span></span>

6.  <span data-ttu-id="bf52c-285">Po wykonaniu powyższych czynności tworzenie kopii zapasowej zostanie uruchomiony w regularnych odstępach czasu określonych w zasadach tworzenia kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-285">Once the above steps are completed, the backup will run at regular intervals as specified in the backup policy.</span></span> <span data-ttu-id="bf52c-286">W razie potrzeby możesz wyzwolić pierwszej kopii zapasowej ręcznie z pulpitem nawigacyjnym magazynu w portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="bf52c-286">If necessary, you can trigger the first backup manually from the vault dashboard on the Azure portal.</span></span>

<span data-ttu-id="bf52c-287">Automatyzacja kopia zapasowa Azure za pomocą skryptów, można znaleźć na stronie [poleceń cmdlet programu PowerShell dla kopii zapasowej maszyny Wirtualnej](../backup/backup-azure-vms-automation.md).</span><span class="sxs-lookup"><span data-stu-id="bf52c-287">For automating Azure Backup using scripts, please refer to [PowerShell cmdlets for VM backup](../backup/backup-azure-vms-automation.md).</span></span>

### <a name="steps-for-recovery"></a><span data-ttu-id="bf52c-288">Procedura odzyskiwania</span><span class="sxs-lookup"><span data-stu-id="bf52c-288">Steps for Recovery</span></span>

<span data-ttu-id="bf52c-289">Jeśli musisz naprawić lub ponownie skompiluj maszyny Wirtualnej, można przywrócić maszyny Wirtualnej z żadnym z punktów odzyskiwania kopii zapasowej w magazynie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-289">If you need to repair or rebuild a VM, you can restore the VM from any of the backup recovery points in the vault.</span></span> <span data-ttu-id="bf52c-290">Istnieje kilka różnych opcji do wykonania odzyskiwania:</span><span class="sxs-lookup"><span data-stu-id="bf52c-290">There are a couple of different options for performing the recovery:</span></span>

1.  <span data-ttu-id="bf52c-291">Można utworzyć nowej maszyny Wirtualnej jako punktu w czasie reprezentacji kopii zapasowej maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-291">You can create a new VM as a point-in-time representation of your backed-up VM.</span></span>

2.  <span data-ttu-id="bf52c-292">Można przywrócić dyski, a następnie dostosować i skompiluj ponownie przywróconą maszyną Wirtualną przy użyciu szablonu maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-292">You can restore the disks and then use the template for the VM to customize and rebuild the restored VM.</span></span> 

<span data-ttu-id="bf52c-293">Zobacz instrukcje, aby [portal Azure używany do przywrócenia maszyn wirtualnych](../backup/backup-azure-arm-restore-vms.md#restoring-a-vm-during-azure-datacenter-disaster).</span><span class="sxs-lookup"><span data-stu-id="bf52c-293">See instructions to [Use Azure portal to restore virtual machines](../backup/backup-azure-arm-restore-vms.md#restoring-a-vm-during-azure-datacenter-disaster).</span></span> <span data-ttu-id="bf52c-294">Dokument wyjaśniono również wykonania określonych kroków do przywrócenia kopii zapasowej maszyn wirtualnych do centrum danych sparowanego w centrum danych podstawowych za pomocą geograficznie nadmiarowego magazynu kopii zapasowych w przypadku awarii.</span><span class="sxs-lookup"><span data-stu-id="bf52c-294">The document also explains the specific steps for restoring backed-up VMs to the paired data center using your geo-redundant backup vault in the case of a disaster at the primary data center.</span></span> <span data-ttu-id="bf52c-295">W takim przypadku kopia zapasowa Azure korzysta z usługi obliczeniowe z regionu pomocniczego do tworzenia przywróconej maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-295">In that case, Azure Backup uses the Compute service from the secondary region to create the restored virtual machine.</span></span>

<span data-ttu-id="bf52c-296">Można również użyć programu PowerShell dla [przywracanie maszyny Wirtualnej](../backup/backup-azure-vms-automation.md#restore-an-azure-vm) lub [tworzenia nowej maszyny Wirtualnej z przywrócić dysków](../backup/backup-azure-vms-automation.md#create-a-vm-from-restored-disks).</span><span class="sxs-lookup"><span data-stu-id="bf52c-296">You can also use PowerShell for [restoring a VM](../backup/backup-azure-vms-automation.md#restore-an-azure-vm) or for [creating a new VM from restored disks](../backup/backup-azure-vms-automation.md#create-a-vm-from-restored-disks).</span></span>

## <a name="alternative-solution-consistent-snapshots"></a><span data-ttu-id="bf52c-297">Alternatywnych rozwiązań: Migawki spójne</span><span class="sxs-lookup"><span data-stu-id="bf52c-297">Alternative Solution: Consistent Snapshots</span></span>

<span data-ttu-id="bf52c-298">Jeśli nie możesz korzystać z usługi Kopia zapasowa Azure, możesz wdrożyć własny mechanizm tworzenia kopii zapasowej przy użyciu migawek.</span><span class="sxs-lookup"><span data-stu-id="bf52c-298">If you are unable to use the Azure Backup Service, you can implement your own backup mechanism using snapshots.</span></span> <span data-ttu-id="bf52c-299">Jest skomplikowane, aby utworzyć migawki spójne z dla wszystkich dysków używanych przez Maszynę wirtualną, a te migawki są następnie replikowane do innego regionu.</span><span class="sxs-lookup"><span data-stu-id="bf52c-299">It is complicated to create consistent snapshots for all disks used by a VM and then replicate those snapshots to another region.</span></span> <span data-ttu-id="bf52c-300">Z tego powodu Azure bierze pod uwagę wykorzystanie lepszym rozwiązaniem niż tworzenia niestandardowych rozwiązań usługi Kopia zapasowa.</span><span class="sxs-lookup"><span data-stu-id="bf52c-300">For this reason, Azure considers leveraging the Backup Service a better option than building a custom solution.</span></span> <span data-ttu-id="bf52c-301">Jeśli używasz magazynu RA-GRS/GRS dysków migawki są automatycznie replikowane do centrum danych w dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-301">If you use RA-GRS/GRS storage for disks, snapshots are automatically replicated to a secondary data center.</span></span> <span data-ttu-id="bf52c-302">Użycie magazynu LRS w przypadku dysków, musisz samodzielnie replikowane dane.</span><span class="sxs-lookup"><span data-stu-id="bf52c-302">If you use LRS storage for disks, you will need to replicate the data yourself.</span></span> <span data-ttu-id="bf52c-303">Aby uzyskać więcej informacji, zobacz [kopia zapasowa Azure niezarządzane dysków maszyny Wirtualnej z migawkami przyrostowe](storage-incremental-snapshots.md).</span><span class="sxs-lookup"><span data-stu-id="bf52c-303">For more information, see [Back up Azure unmanaged VM disks with incremental snapshots](storage-incremental-snapshots.md).</span></span>

<span data-ttu-id="bf52c-304">Migawka jest reprezentację obiektu w określonym punkcie w czasie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-304">A snapshot is a representation of an object at a specific point in time.</span></span> <span data-ttu-id="bf52c-305">Migawki będą naliczane rozliczeń dla przyrostowych rozmiar danych go blokad.</span><span class="sxs-lookup"><span data-stu-id="bf52c-305">A snapshot will incur billing for the incremental size of the data it holds.</span></span> <span data-ttu-id="bf52c-306">Aby uzyskać więcej informacji, zobacz [utworzenia migawki obiektu blob](storage-blob-snapshots.md).</span><span class="sxs-lookup"><span data-stu-id="bf52c-306">For more information, see [Create a blob snapshot](storage-blob-snapshots.md).</span></span>

### <a name="creating-snapshots-while-the-vm-is-running"></a><span data-ttu-id="bf52c-307">Tworzenie migawek uruchomionej maszyny Wirtualnej</span><span class="sxs-lookup"><span data-stu-id="bf52c-307">Creating snapshots while the VM is running</span></span>

<span data-ttu-id="bf52c-308">W dowolnym momencie można utworzyć migawkę, jeśli maszyna wirtualna jest uruchomiona, jest nadal dane przesyłane strumieniowo na dyskach, i migawki może zawierać częściowe operacje, które zostały w locie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-308">While you can take a snapshot at any time, if the VM is running, there is still data being streamed to the disks, and the snapshots may contain partial operations that were in flight.</span></span> <span data-ttu-id="bf52c-309">Ponadto jeśli są zaangażowane kilka dysków, migawek różnych dysków może wystąpić w różnym czasie, co oznacza, że te migawki nie może być skoordynowany sposób.</span><span class="sxs-lookup"><span data-stu-id="bf52c-309">Also, if there are several disks involved, the snapshots of different disks may have occurred at different times, which means these snapshots may not be coordinated.</span></span> <span data-ttu-id="bf52c-310">Jest to szczególnie kłopotliwe w sytuacji dla woluminów rozłożonych, którego pliki mogą zostać uszkodzone, jeśli trwa zmian podczas tworzenia kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-310">This is especially problematic for striped volumes whose files can be corrupted if changes were being made during backup.</span></span>

<span data-ttu-id="bf52c-311">Aby tego uniknąć, proces tworzenia kopii zapasowej musi implementować następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="bf52c-311">To avoid this situation, the backup process must implement the following steps:</span></span>

1.  <span data-ttu-id="bf52c-312">Zablokuj wszystkie dyski</span><span class="sxs-lookup"><span data-stu-id="bf52c-312">Freeze all the disks</span></span>

2.  <span data-ttu-id="bf52c-313">Flush wszystkie oczekujące operacje zapisu</span><span class="sxs-lookup"><span data-stu-id="bf52c-313">Flush all the pending writes</span></span>

3.  <span data-ttu-id="bf52c-314">Następnie [utworzenia migawki obiektu blob](storage-blob-snapshots.md) dla wszystkich dysków</span><span class="sxs-lookup"><span data-stu-id="bf52c-314">Then, [create a blob snapshot](storage-blob-snapshots.md) for all the disks</span></span>

<span data-ttu-id="bf52c-315">Niektóre aplikacje systemu Windows, takich jak SQL Server mechanizm skoordynowany sposób tworzenia kopii zapasowej za pomocą usługi VSS tworzenie kopii zapasowych spójnych z aplikacją.</span><span class="sxs-lookup"><span data-stu-id="bf52c-315">Some Windows applications like SQL Server provide a coordinated backup mechanism via VSS to create application-consistent backups.</span></span> <span data-ttu-id="bf52c-316">W systemie Linux można użyć narzędzia, takiego jak fsfreeze koordynacji dysków, co zapewnia spójne z plikami kopii zapasowych, ale nie migawki spójne z aplikacjami.</span><span class="sxs-lookup"><span data-stu-id="bf52c-316">On Linux, you can use a tool like fsfreeze for coordinating the disks, which will provide file-consistent backups, but not application-consistent snapshots.</span></span> <span data-ttu-id="bf52c-317">Ten proces jest skomplikowane, więc i należy rozważyć użycie [kopia zapasowa Azure](../backup/backup-azure-vms-introduction.md) lub rozwiązanie tworzenia kopii zapasowych innych firm, które już wdrożyć.</span><span class="sxs-lookup"><span data-stu-id="bf52c-317">This process is complicated, so and you should consider using [Azure Backup](../backup/backup-azure-vms-introduction.md) or a third-party backup solution which already implement this.</span></span>

<span data-ttu-id="bf52c-318">Proces powyżej spowoduje kolekcji skoordynowanego migawek dla wszystkich dysków maszyny Wirtualnej, reprezentujący widok w momencie określonej maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-318">The above process will result in a collection of coordinated snapshots for all the VM disks, representing a specific point-in-time view of the VM.</span></span> <span data-ttu-id="bf52c-319">To jest punkt przywracania kopii zapasowej dla maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-319">This is a backup restore point for the VM.</span></span> <span data-ttu-id="bf52c-320">Proces można powtarzać w zaplanowanych odstępach czasu, aby utworzyć okresowe kopie zapasowe.</span><span class="sxs-lookup"><span data-stu-id="bf52c-320">You can repeat the process at scheduled intervals to create periodic backups.</span></span> <span data-ttu-id="bf52c-321">Wymienione poniżej, aby uzyskać instrukcje dotyczące [skopiuj kopie zapasowe do innego regionu](#copy-the-snapshots-to-another-region) do odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="bf52c-321">See below for the steps to [copy the backups to another region](#copy-the-snapshots-to-another-region) for DR.</span></span>

### <a name="creating-snapshots-while-the-vm-is-offline"></a><span data-ttu-id="bf52c-322">Tworzenie migawek, podczas gdy maszyna wirtualna jest w trybie offline</span><span class="sxs-lookup"><span data-stu-id="bf52c-322">Creating snapshots while the VM is offline</span></span>

<span data-ttu-id="bf52c-323">Inną opcją utworzyć spójne tworzenie kopii zapasowych jest zamykanie maszyny Wirtualnej i tworzenie migawek blob każdego dysku.</span><span class="sxs-lookup"><span data-stu-id="bf52c-323">Another option to create consistent backups is shutting down the VM and taking blob snapshots of each disk.</span></span> <span data-ttu-id="bf52c-324">To jest łatwiejsze niż koordynujący migawki uruchomionej maszyny wirtualnej, ale wymaga to kilka minut przestoju.</span><span class="sxs-lookup"><span data-stu-id="bf52c-324">This is easier than coordinating snapshots of a running VM, but it requires a few minutes of downtime.</span></span> <span data-ttu-id="bf52c-325">Dla tego procesu wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="bf52c-325">For this process, follow these steps:</span></span>

1. <span data-ttu-id="bf52c-326">Zamknij maszynę Wirtualną.</span><span class="sxs-lookup"><span data-stu-id="bf52c-326">Shut down the VM.</span></span>

2. <span data-ttu-id="bf52c-327">Utwórz migawkę każdej blob dysku VHD, który zajmuje tylko kilka sekund.</span><span class="sxs-lookup"><span data-stu-id="bf52c-327">Create a snapshot of each VHD blob, which only takes a few seconds.</span></span>

    <span data-ttu-id="bf52c-328">Aby utworzyć migawkę, można użyć [programu PowerShell](storage-powershell-guide-full.md#how-to-manage-azure-blob-snapshots), [interfejsu API Rest magazynu Azure](https://msdn.microsoft.com/library/azure/ee691971.aspx), [interfejsu wiersza polecenia Azure](https://docs.microsoft.com/azure/xplat-cli-install), lub jeden z biblioteki klienta magazynu Azure, takich jak [ Biblioteka klienta usługi Storage dla platformy .NET](https://msdn.microsoft.com/library/azure/hh488361.aspx).</span><span class="sxs-lookup"><span data-stu-id="bf52c-328">To create a snapshot, you can use [PowerShell](storage-powershell-guide-full.md#how-to-manage-azure-blob-snapshots), the [Azure Storage Rest API](https://msdn.microsoft.com/library/azure/ee691971.aspx), [Azure CLI](https://docs.microsoft.com/azure/xplat-cli-install), or one of the Azure Storage Client Libraries such as [the Storage client library for .NET](https://msdn.microsoft.com/library/azure/hh488361.aspx).</span></span>

3. <span data-ttu-id="bf52c-329">Uruchom maszynę Wirtualną, która kończy przestoju.</span><span class="sxs-lookup"><span data-stu-id="bf52c-329">Start the VM, which ends the downtime.</span></span> <span data-ttu-id="bf52c-330">Zwykle cały proces zostanie zakończony w ciągu kilku minut.</span><span class="sxs-lookup"><span data-stu-id="bf52c-330">Typically the entire process completes within a few minutes.</span></span>

<span data-ttu-id="bf52c-331">Ten proces zapewnia zbiór migawki spójne z dla wszystkich dysków, zapewniając punktu przywracania dla maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-331">This process yields a collection of consistent snapshots for all the disks, providing a backup restore point for the VM.</span></span> <span data-ttu-id="bf52c-332">Wymienione poniżej czynności skopiować migawki do innego regionu do odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="bf52c-332">See below for the steps to copy the snapshots to another region for DR.</span></span>

### <a name="copy-the-snapshots-to-another-region"></a><span data-ttu-id="bf52c-333">Kopiowanie migawek do innego regionu</span><span class="sxs-lookup"><span data-stu-id="bf52c-333">Copy the snapshots to another region</span></span>

<span data-ttu-id="bf52c-334">Tworzenie migawek wyłącznie nie może być wystarczające do odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="bf52c-334">Creation of the snapshots alone may not be sufficient for DR.</span></span> <span data-ttu-id="bf52c-335">Kopie zapasowe migawek również muszą być replikowane do innego regionu.</span><span class="sxs-lookup"><span data-stu-id="bf52c-335">You must also replicate the snapshot backups to another region.</span></span>

<span data-ttu-id="bf52c-336">Jeśli używasz GRS lub RA-GRS dla dysków, a następnie migawki są automatycznie replikowane w regionie pomocniczym.</span><span class="sxs-lookup"><span data-stu-id="bf52c-336">If you are using GRS or RA-GRS for your disks, then the snapshots are replicated to the secondary region automatically.</span></span> <span data-ttu-id="bf52c-337">Może istnieć kilka minut opóźnienie przed replikacji, a jeśli Centrum danych podstawowych przestanie działać, zanim migawki Zakończ replikacji, nie będzie dostęp do migawek w centrum danych w dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-337">There can be a few minutes of lag before the replication, and if the primary data center goes down before the snapshots finish replicating, you will not be able to access the snapshots from the secondary data center.</span></span> <span data-ttu-id="bf52c-338">Prawdopodobieństwo to jest mała.</span><span class="sxs-lookup"><span data-stu-id="bf52c-338">The likelihood of this is small.</span></span>

> [!Note] 
> <span data-ttu-id="bf52c-339">Tylko o dyski w ramach konta GRS lub RA-GRS nie chroni maszyny Wirtualnej po awarii.</span><span class="sxs-lookup"><span data-stu-id="bf52c-339">Only having the disks in a GRS or RA-GRS account does not protect the VM from disasters.</span></span> <span data-ttu-id="bf52c-340">Należy również tworzenie migawek skoordynowanego albo użyć kopia zapasowa Azure.</span><span class="sxs-lookup"><span data-stu-id="bf52c-340">You must also create coordinated snapshots or use Azure Backup.</span></span> <span data-ttu-id="bf52c-341">Jest to wymagane, aby odzyskać Maszynę wirtualną do stanu spójności.</span><span class="sxs-lookup"><span data-stu-id="bf52c-341">This is required to recover a VM to a consistent state.</span></span>

<span data-ttu-id="bf52c-342">Jeśli używasz LRS, należy skopiować migawki do innego konta magazynu, natychmiast po utworzeniu migawki.</span><span class="sxs-lookup"><span data-stu-id="bf52c-342">If you are using LRS, you must copy the snapshots to a different storage account immediately after creating the snapshot.</span></span> <span data-ttu-id="bf52c-343">Element docelowy kopiowania może być konta magazynu LRS w innym regionie, co powoduje kopiowania w regionie zdalnego.</span><span class="sxs-lookup"><span data-stu-id="bf52c-343">The copy target could be an LRS storage account in a different region, resulting in the copy being in a remote region.</span></span> <span data-ttu-id="bf52c-344">Można także skopiować migawki do konta magazynu RA-GRS, w tym samym regionie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-344">You can also copy the snapshot to an RA-GRS storage account in the same region.</span></span> <span data-ttu-id="bf52c-345">W takim przypadku migawki będą opóźnieniem replikowane do zdalnego regionie pomocniczym.</span><span class="sxs-lookup"><span data-stu-id="bf52c-345">In this case, the snapshot will be lazily replicated to the remote secondary region.</span></span> <span data-ttu-id="bf52c-346">Kopia zapasowa jest chronione przed awarii w lokacji głównej raz kopiowania i replikacji zostanie zakończone.</span><span class="sxs-lookup"><span data-stu-id="bf52c-346">Your backup is protected from disasters at the primary site once the copying and replication is complete.</span></span>

<span data-ttu-id="bf52c-347">Aby skopiować wydajnie Twojej przyrostowe migawki do odzyskiwania po awarii, zapoznaj się z instrukcjami wyświetlanymi w [kopia zapasowa Azure niezarządzane dysków maszyny Wirtualnej z migawkami przyrostowe](storage-incremental-snapshots.md).</span><span class="sxs-lookup"><span data-stu-id="bf52c-347">To copy your incremental snapshots for DR efficiently, review the instructions in [Back up Azure unmanaged VM disks with incremental snapshots](storage-incremental-snapshots.md).</span></span>

![][2]

### <a name="recovery-from-snapshots"></a><span data-ttu-id="bf52c-348">Odzyskiwanie z migawki</span><span class="sxs-lookup"><span data-stu-id="bf52c-348">Recovery from Snapshots</span></span>

<span data-ttu-id="bf52c-349">Aby pobrać migawki, skopiuj go do utworzyć nowego obiektu blob.</span><span class="sxs-lookup"><span data-stu-id="bf52c-349">To retrieve a snapshot, copy it to make a new blob.</span></span> <span data-ttu-id="bf52c-350">Jeśli kopiujesz migawki z kontem podstawowym, można skopiować migawki za pośrednictwem do podstawowego obiektu blob migawki, w związku z tym przywracania dysku migawki; jest to nazywane podwyższania poziomu migawki.</span><span class="sxs-lookup"><span data-stu-id="bf52c-350">If you are copying the snapshot from the primary account, you can copy the snapshot over to the base blob of the snapshot, thus reverting the disk to the snapshot; this is known as promoting the snapshot.</span></span> <span data-ttu-id="bf52c-351">Jeśli kopiujesz migawki kopii zapasowej z pomocniczego konta (w przypadku RA-GRS), należy skopiować do podstawowego konta.</span><span class="sxs-lookup"><span data-stu-id="bf52c-351">If you are copying the snapshot backup from a secondary account (in the case of RA-GRS), it must be copied to a primary account.</span></span> <span data-ttu-id="bf52c-352">Możesz skopiować migawki [przy użyciu programu PowerShell](storage-powershell-guide-full.md#how-to-copy-a-snapshot-of-a-blob) lub przy użyciu narzędzia AzCopy.</span><span class="sxs-lookup"><span data-stu-id="bf52c-352">You can copy a snapshot [using PowerShell](storage-powershell-guide-full.md#how-to-copy-a-snapshot-of-a-blob) or using the AzCopy utility.</span></span> <span data-ttu-id="bf52c-353">Aby uzyskać więcej informacji, zobacz [Transfer danych za pomocą wiersza polecenia Azcopy](storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="bf52c-353">For more information, see [Transfer data with the AzCopy Command-Line Utility](storage-use-azcopy.md).</span></span>

<span data-ttu-id="bf52c-354">W przypadku maszyn wirtualnych z wieloma dyskami należy skopiować wszystkie migawki, które są częścią tego samego punktu przywracania w skoordynowany sposób.</span><span class="sxs-lookup"><span data-stu-id="bf52c-354">In the case of VMs with multiple disks, you must copy all the snapshots that are part of the same coordinated restore point.</span></span> <span data-ttu-id="bf52c-355">Po skopiowaniu migawki zapisywalny obiekty BLOB dysków VHD, można użyć obiektów blob można odtworzyć maszyny Wirtualnej przy użyciu szablonu maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-355">Once you copy the snapshots to writable VHD blobs, you can use the blobs to recreate your VM using the template for the VM.</span></span>

## <a name="other-options"></a><span data-ttu-id="bf52c-356">Inne opcje</span><span class="sxs-lookup"><span data-stu-id="bf52c-356">Other options</span></span>

### <a name="sql-server"></a><span data-ttu-id="bf52c-357">Oprogramowanie SQL Server</span><span class="sxs-lookup"><span data-stu-id="bf52c-357">SQL Server</span></span>

<span data-ttu-id="bf52c-358">Program SQL Server uruchomiony na maszynie wirtualnej ma własną wbudowanych możliwości, aby utworzyć kopię zapasową bazy danych SQL Server do magazynu obiektów Blob platformy Azure lub udziału plików.</span><span class="sxs-lookup"><span data-stu-id="bf52c-358">SQL Server running in a VM has its own built-in capabilities to backup your SQL Server database to Azure Blob storage or a file share.</span></span> <span data-ttu-id="bf52c-359">W przypadku konta magazynu GRS lub RA-GRS, zgodnie z opisem wcześniej dostępne kopie zapasowe w centrum danych pomocniczego konta magazynu w przypadku awarii, z ograniczeniami.</span><span class="sxs-lookup"><span data-stu-id="bf52c-359">If the storage account is GRS or RA-GRS, you can access those backups in the storage account’s secondary data center in the event of a disaster, with the same restrictions as discussed previously.</span></span> <span data-ttu-id="bf52c-360">Aby uzyskać więcej informacji, zobacz [kopii zapasowej i przywracania dla programu SQL Server w usłudze Azure Virtual Machines](../virtual-machines/windows/sql/virtual-machines-windows-sql-backup-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="bf52c-360">For more information, see [Backup and Restore for SQL Server in Azure Virtual Machines](../virtual-machines/windows/sql/virtual-machines-windows-sql-backup-recovery.md).</span></span> <span data-ttu-id="bf52c-361">Oprócz tworzenia kopii zapasowej i przywracania [programu SQL Server zawsze włączonych grup dostępności](../virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr.md) można zachować replikach pomocniczych baz danych, aby znacznie skrócić czas odzyskiwania po awarii.</span><span class="sxs-lookup"><span data-stu-id="bf52c-361">In addition to backup and restore, [SQL Server Always On Availability Groups](../virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr.md) can maintain secondary replicas of databases to greatly reduce the disaster recovery time.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="bf52c-362">Inne zagadnienia</span><span class="sxs-lookup"><span data-stu-id="bf52c-362">Other considerations</span></span>

<span data-ttu-id="bf52c-363">Ten artykuł ma omówiono sposób wykonania kopii zapasowej lub migawek maszyn wirtualnych i ich dyski, która obsługuje odzyskiwanie po awarii i sposobie ich użyć do odzyskania.</span><span class="sxs-lookup"><span data-stu-id="bf52c-363">This article has discussed how to backup or take snapshots of your VMs and their disks to support disaster recovery, and how to use those to recover.</span></span> <span data-ttu-id="bf52c-364">Model usługi Azure Resource Manager wiele osób za pomocą szablonów do tworzenia ich maszyn wirtualnych i innych infrastruktury na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="bf52c-364">With the Azure Resource Manager model, many people use templates to create their VMs and other infrastructure in Azure.</span></span> <span data-ttu-id="bf52c-365">Szablon służy do tworzenia maszyny Wirtualnej, który ma taką samą konfigurację zawsze.</span><span class="sxs-lookup"><span data-stu-id="bf52c-365">You can use a template to create a VM that has the same configuration every time.</span></span> <span data-ttu-id="bf52c-366">Jeśli używasz niestandardowych obrazów do tworzenia maszyn wirtualnych, należy również upewnić się, że obrazy są chronione przy użyciu konta RA-GRS je przechowywać.</span><span class="sxs-lookup"><span data-stu-id="bf52c-366">If you use custom images for creating your VMs, you must also make sure your images are protected by using an RA-GRS account to store them.</span></span>

<span data-ttu-id="bf52c-367">W rezultacie procesu tworzenia kopii zapasowej może być kombinacją dwie czynności:</span><span class="sxs-lookup"><span data-stu-id="bf52c-367">Consequently, your backup process may be a combination of two things:</span></span>

1. <span data-ttu-id="bf52c-368">Kopie zapasowe danych (dyski)</span><span class="sxs-lookup"><span data-stu-id="bf52c-368">Backup the data (disks)</span></span>
2. <span data-ttu-id="bf52c-369">Wykonaj kopię zapasową konfiguracji (szablony, niestandardowe obrazy)</span><span class="sxs-lookup"><span data-stu-id="bf52c-369">Backup the configuration (templates, custom images)</span></span>

<span data-ttu-id="bf52c-370">W zależności od wybranej opcji tworzenia kopii zapasowej może mieć do obsługi kopii zapasowych danych i konfiguracji lub usługi tworzenia kopii zapasowej może obsługiwać to wszystko dla Ciebie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-370">Depending on the backup option you choose, you may have to handle the backup of both the data and the configuration, or the backup service may handle all of that for you.</span></span>

## <a name="appendix---understanding-the-impact-of-lrs-grs-and-ra-grs"></a><span data-ttu-id="bf52c-371">Dodatek - zrozumienie wpływu LRS, GRS i RA-GRS</span><span class="sxs-lookup"><span data-stu-id="bf52c-371">Appendix - Understanding the impact of LRS, GRS, and RA-GRS</span></span>

<span data-ttu-id="bf52c-372">Dla konta magazynu na platformie Azure, istnieją trzy typy nadmiarowość danych, które należy wziąć pod uwagę dotyczące odzyskiwania po awarii — magazyn lokalnie nadmiarowy (LRS), geograficznie nadmiarowego (GRS), lub odczytu z magazynu geograficznie nadmiarowego z dostępu (RA-GRS).</span><span class="sxs-lookup"><span data-stu-id="bf52c-372">For storage accounts in Azure, there are three types of data redundancy that you should consider regarding disaster recovery – locally redundant (LRS), geo-redundant (GRS), or geo-redundant with read access (RA-GRS).</span></span> 

<span data-ttu-id="bf52c-373">Lokalnie magazyn geograficznie nadmiarowy (LRS) przechowuje trzy kopie danych w tym samym centrum danych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-373">Locally Redundant Storage (LRS) retains three copies of the data in the same data center.</span></span> <span data-ttu-id="bf52c-374">Podczas zapisywania danych, wszystkie trzy kopie są aktualizowane przed zwróceniem Powodzenie do wywołującego, dlatego wiadomo, że są one identyczne.</span><span class="sxs-lookup"><span data-stu-id="bf52c-374">When writing the data, all three copies are updated before success is returned to the caller, so you know they are identical.</span></span> <span data-ttu-id="bf52c-375">Dysk jest zabezpieczony błędy lokalne, ponieważ jest on bardzo mało prawdopodobne, że wszystkie trzy kopie może występować w tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-375">Your disk is protected from local failures, since it is extremely unlikely that all three copies would be impacted at the same time.</span></span> <span data-ttu-id="bf52c-376">W przypadku LRS nie nie nadmiarowość geograficzna, więc dysk nie jest chroniony poważnej awarii, które mogą mieć wpływ na jednostkę Centrum lub magazynu danych.</span><span class="sxs-lookup"><span data-stu-id="bf52c-376">In the case of LRS, there is no geo-redundancy, so the disk is not protected from catastrophic failures that can impact an entire data center or storage unit.</span></span>

<span data-ttu-id="bf52c-377">Z GRS i RA-GRS trzy kopie danych są przechowywane w regionie podstawowym (wybrane przez użytkownika), a więcej trzy kopie danych są przechowywane w odpowiedni region pomocniczy (ustawione przez platformę Azure).</span><span class="sxs-lookup"><span data-stu-id="bf52c-377">With GRS and RA-GRS, three copies of your data are retained in the primary region (selected by you), and three more copies of your data are retained in a corresponding secondary region (set by Azure).</span></span> <span data-ttu-id="bf52c-378">Na przykład jeśli dane są przechowywane w zachodnie stany USA, dane będą replikowane do wschodnie stany USA.</span><span class="sxs-lookup"><span data-stu-id="bf52c-378">For example, if you store data in West US, the data will be replicated to East US.</span></span> <span data-ttu-id="bf52c-379">Jest to realizowane asynchronicznie, a istnieje małe opóźnienie między aktualizacji do serwera podstawowego i pomocniczego.</span><span class="sxs-lookup"><span data-stu-id="bf52c-379">This is done asynchronously, and there is a small delay between updates to the primary and secondary.</span></span> <span data-ttu-id="bf52c-380">Repliki dyski w lokacji dodatkowej są spójne na podstawie na dysku (z opóźnieniem), ale replik wielu aktywnych dysków mogą nie być zsynchronizowane **ze sobą**.</span><span class="sxs-lookup"><span data-stu-id="bf52c-380">Replicas of the disks on the secondary site are consistent on a per-disk basis (with the delay), but replicas of multiple active disks may not be in sync **with each other**.</span></span> <span data-ttu-id="bf52c-381">Aby były spójne replik na wielu dyskach, potrzebne są migawki spójne.</span><span class="sxs-lookup"><span data-stu-id="bf52c-381">To have consistent replicas across multiple disks, consistent snapshots are needed.</span></span>

<span data-ttu-id="bf52c-382">Podstawowa różnica między GRS i RA-GRS to, że z RA-GRS, możesz przeczytać pomocniczej kopii w dowolnym momencie.</span><span class="sxs-lookup"><span data-stu-id="bf52c-382">The main difference between GRS and RA-GRS is that with RA-GRS, you can read the secondary copy at any time.</span></span> <span data-ttu-id="bf52c-383">Jeśli występuje problem, który renderuje dane w regionie podstawowym niedostępny, zespół Azure będzie wszelkich starań, aby przywrócić dostęp.</span><span class="sxs-lookup"><span data-stu-id="bf52c-383">If there is a problem that renders the data in the primary region inaccessible, the Azure team will make every effort to restore access.</span></span> <span data-ttu-id="bf52c-384">Gdy podstawowej nie działa, jeśli masz RA-GRS włączone, można dostępu do danych w centrum danych w dodatkowej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-384">While the primary is down, if you have RA-GRS enabled, you can access the data in the secondary data center.</span></span> <span data-ttu-id="bf52c-385">W związku z tym jeśli planujesz do odczytu z repliki, gdy podstawowy jest niedostępny, następnie RA-GRS należy rozważyć.</span><span class="sxs-lookup"><span data-stu-id="bf52c-385">Therefore, if you plan to read from the replica while the primary is inaccessible, then RA-GRS should be considered.</span></span>

<span data-ttu-id="bf52c-386">Jeśli okaże się być istotne awarii zespół Azure może wyzwolić geograficznie trybu failover i zmień głównej wpisy DNS, aby wskazywał pomocniczego magazynu.</span><span class="sxs-lookup"><span data-stu-id="bf52c-386">If it turns out to be a significant outage, the Azure team may trigger a geo-failover and change the primary DNS entries to point to secondary storage.</span></span> <span data-ttu-id="bf52c-387">W tym momencie w albo GRS lub RA-GRS włączone, ma dostęp do danych w regionie, które było pomocniczej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-387">At this point, if you have either GRS or RA-GRS enabled, you can access the data in the region that used to be the secondary.</span></span> <span data-ttu-id="bf52c-388">Innymi słowy Jeśli Twoje konto magazynu jest GRS i występuje problem, są dostępne magazynu pomocniczego tylko wtedy, gdy geograficznie trybu failover.</span><span class="sxs-lookup"><span data-stu-id="bf52c-388">In other words, if your storage account is GRS and there is a problem, you can access the secondary storage only if there is a geo-failover.</span></span>

<span data-ttu-id="bf52c-389">Aby uzyskać więcej informacji, zobacz [co robić w przypadku wystąpienia awarii usługi Azure Storage](storage-disaster-recovery-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="bf52c-389">For more information, see [What to do if an Azure Storage outage occurs](storage-disaster-recovery-guidance.md).</span></span> 

<span data-ttu-id="bf52c-390">Należy pamiętać, że Microsoft kontroluje, czy do pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="bf52c-390">Note that Microsoft controls whether a failover occurs.</span></span> <span data-ttu-id="bf52c-391">Tryb failover nie są kontrolowane na konto magazynu, w związku z tym nie zdecydowano poszczególnych odbiorców.</span><span class="sxs-lookup"><span data-stu-id="bf52c-391">Failover is not controlled per storage account, therefore it is not decided by individual customers.</span></span> <span data-ttu-id="bf52c-392">Aby zaimplementować odzyskiwania po awarii dla określonego magazynu kont lub dysków maszyny wirtualnej, należy użyć metod opisanych wcześniej w tym artykule.</span><span class="sxs-lookup"><span data-stu-id="bf52c-392">To implement Disaster Recovery for specific storage accounts or virtual machine disks, you must use the techniques described previously in this article.</span></span>



[1]: ./media/storage-backup-and-disaster-recovery-for-azure-iaas-disks/backup-and-disaster-recovery-for-azure-iaas-disks-1.png
[2]: ./media/storage-backup-and-disaster-recovery-for-azure-iaas-disks/backup-and-disaster-recovery-for-azure-iaas-disks-2.png