---
title: "Praca z modułami Node.js"
description: "Dowiedz się, jak pracować z modułów Node.js w przypadku korzystania z usługi aplikacji Azure lub usługi w chmurze."
services: 
documentationcenter: nodejs
author: TomArcher
manager: routlaw
editor: 
ms.assetid: c0e6cd3d-932d-433e-b72d-e513e23b4eb6
ms.service: multiple
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 08/17/2016
ms.author: tarcher
ms.openlocfilehash: 1418c19594f19a15402d494880514298826445df
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/18/2017
---
# <a name="using-nodejs-modules-with-azure-applications"></a><span data-ttu-id="83c5f-103">Using Node.js Modules with Azure applications (Używanie modułów Node.js z aplikacjami platformy Azure)</span><span class="sxs-lookup"><span data-stu-id="83c5f-103">Using Node.js Modules with Azure applications</span></span>
<span data-ttu-id="83c5f-104">Ten dokument zawiera wskazówki dotyczące używania modułów Node.js z aplikacjami hostowanej na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="83c5f-104">This document provides guidance on using Node.js modules with applications hosted on Azure.</span></span> <span data-ttu-id="83c5f-105">Zwraca uwagę na upewnienie się, że aplikacja korzysta z odpowiedniej wersji modułu, a także opisuje korzystanie z modułów natywnych w systemie Azure.</span><span class="sxs-lookup"><span data-stu-id="83c5f-105">It provides guidance on ensuring that your application uses a specific version of module as well as using native modules with Azure.</span></span>

<span data-ttu-id="83c5f-106">Jeśli znasz już przy użyciu modułów Node.js **package.json** i **npm shrinkwrap.json** pliki, szybkie podsumowanie co opisano w tym artykule zawiera następujące informacje:</span><span class="sxs-lookup"><span data-stu-id="83c5f-106">If you are already familiar with using Node.js modules, **package.json** and **npm-shrinkwrap.json** files, the following information provides a quick summary of what is discussed in this article:</span></span>

* <span data-ttu-id="83c5f-107">Rozumie, usługa aplikacji Azure **package.json** i **npm shrinkwrap.json** pliki i można zainstalować na podstawie pozycji w tych plikach modułów.</span><span class="sxs-lookup"><span data-stu-id="83c5f-107">Azure App Service understands **package.json** and **npm-shrinkwrap.json** files and can install modules based on entries in these files.</span></span>

* <span data-ttu-id="83c5f-108">Usługi w chmurze Azure oczekiwać wszystkie moduły instalowanego na środowisko deweloperskie i **węzła\_modułów** katalogu być dołączane jako część pakietu wdrożeniowego.</span><span class="sxs-lookup"><span data-stu-id="83c5f-108">Azure Cloud Services expect all modules to be installed on the development environment, and the **node\_modules** directory to be included as part of the deployment package.</span></span> <span data-ttu-id="83c5f-109">Można włączyć obsługę instalowanie modułów za pomocą **package.json** lub **npm shrinkwrap.json** plików na usługi w chmurze; jednak ta konfiguracja wymaga dostosowania skryptów domyślne używane przez projekty usługi w chmurze.</span><span class="sxs-lookup"><span data-stu-id="83c5f-109">It is possible to enable support for installing modules using **package.json** or **npm-shrinkwrap.json** files on Cloud Services; however, this configuration requires customization of the default scripts used by Cloud Service projects.</span></span> <span data-ttu-id="83c5f-110">Na przykład sposobu konfigurowania tego środowiska zobacz [Azure uruchamiania zadania instalacji npm, aby uniknąć Wdrażanie modułów węzła](https://github.com/woloski/nodeonazure-blog/blob/master/articles/startup-task-to-run-npm-in-azure.markdown)</span><span class="sxs-lookup"><span data-stu-id="83c5f-110">For an example of how to configure this environment, see [Azure Startup task to run npm install to avoid deploying node modules](https://github.com/woloski/nodeonazure-blog/blob/master/articles/startup-task-to-run-npm-in-azure.markdown)</span></span>

> [!NOTE]
> <span data-ttu-id="83c5f-111">Maszyny wirtualne platformy Azure nie omówiono w tym artykule jako środowisko wdrażania na maszynie wirtualnej jest zależny od systemu operacyjnego, obsługiwany przez maszynę wirtualną.</span><span class="sxs-lookup"><span data-stu-id="83c5f-111">Azure Virtual Machines are not discussed in this article, as the deployment experience in a VM is dependent on the operating system hosted by the Virtual Machine.</span></span>
> 
> 

## <a name="nodejs-modules"></a><span data-ttu-id="83c5f-112">Moduły środowiska node.js</span><span class="sxs-lookup"><span data-stu-id="83c5f-112">Node.js Modules</span></span>
<span data-ttu-id="83c5f-113">Moduły są obciążana pakiety języka JavaScript, które zapewniają określonych funkcji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="83c5f-113">Modules are loadable JavaScript packages that provide specific functionality for your application.</span></span> <span data-ttu-id="83c5f-114">Moduły zwykle są instalowane za pomocą **npm** wiersza polecenia narzędzia, jednak niektóre moduły (takich jak moduł http) są dostarczane jako część pakietu środowiska Node.js core.</span><span class="sxs-lookup"><span data-stu-id="83c5f-114">Modules are usually installed using the **npm** command-line tool, however some modules (such as the http module) are provided as part of the core Node.js package.</span></span>

<span data-ttu-id="83c5f-115">Po zainstalowaniu moduły są przechowywane w **węzła\_modułów** katalogu w katalogu głównym aplikacji struktury katalogów.</span><span class="sxs-lookup"><span data-stu-id="83c5f-115">When modules are installed, they are stored in the **node\_modules** directory at the root of your application directory structure.</span></span> <span data-ttu-id="83c5f-116">Każdy moduł w **węzła\_modułów** directory zachowuje własną **węzła\_modułów** katalog, który zawiera wszystkie moduły zależy, które to zachowanie jest powtarzany dla każdego modułu w dół do końca łańcuch zależności.</span><span class="sxs-lookup"><span data-stu-id="83c5f-116">Each module within the **node\_modules** directory maintains its own **node\_modules** directory that contains any modules that it depends on, and this behavior repeats for every module all the way down the dependency chain.</span></span> <span data-ttu-id="83c5f-117">To środowisko umożliwia poszczególnych modułów, aby mieć własną wersję wymagania dotyczące modułów zależy, jednak może to spowodować bardzo dużych strukturą katalogów.</span><span class="sxs-lookup"><span data-stu-id="83c5f-117">This environment allows each module installed to have its own version requirements for the modules it depends on, however it can result in quite a large directory structure.</span></span>

<span data-ttu-id="83c5f-118">Wdrażanie **węzła\_modułów** katalogu jako części aplikacji spowoduje zwiększenie rozmiaru wdrożenia, w porównaniu z zastosowaniem **package.json** lub **npm shrinkwrap.json** pliku; jednak gwarantuje, że wersje moduły używane w środowisku produkcyjnym są takie same, jak moduły używane do rozwoju.</span><span class="sxs-lookup"><span data-stu-id="83c5f-118">Deploying the **node\_modules** directory as part of your application increases the size of the deployment when compared to using a **package.json** or **npm-shrinkwrap.json** file; however, it does guarantee that the versions of the modules used in production are the same as the modules used in development.</span></span>

### <a name="native-modules"></a><span data-ttu-id="83c5f-119">Moduły macierzyste</span><span class="sxs-lookup"><span data-stu-id="83c5f-119">Native Modules</span></span>
<span data-ttu-id="83c5f-120">Większość modułów są pliki JavaScript po prostu zwykłego tekstu, niektóre moduły są obrazy binarne specyficzne dla platformy.</span><span class="sxs-lookup"><span data-stu-id="83c5f-120">While most modules are simply plain-text JavaScript files, some modules are platform-specific binary images.</span></span> <span data-ttu-id="83c5f-121">Te moduły są kompilowane w czasie instalacji, zwykle za pomocą języka Python i gyp węzła.</span><span class="sxs-lookup"><span data-stu-id="83c5f-121">These modules are compiled at install time, usually by using Python and node-gyp.</span></span> <span data-ttu-id="83c5f-122">Ponieważ zależą od usługi w chmurze Azure **węzła\_modułów** folderu wdrażane jako część aplikacji, w każdym natywnego modułu wchodzącego w skład zainstalowanych modułów powinny działać w usłudze w chmurze tak długo, jak została zainstalowana, a na rozwoju systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="83c5f-122">Since Azure Cloud Services rely on the **node\_modules** folder being deployed as part of the application, any native module included as part of the installed modules should work in a cloud service as long as it was installed and compiled on a Windows development system.</span></span>

<span data-ttu-id="83c5f-123">Usługa aplikacji Azure nie obsługuje wszystkie moduły natywne i może zakończyć się niepowodzeniem w przypadku kompilowania kodu modułów z określonych wymagań wstępnych.</span><span class="sxs-lookup"><span data-stu-id="83c5f-123">Azure App Service does not support all native modules, and might fail when compiling modules with specific prerequisites.</span></span> <span data-ttu-id="83c5f-124">Niektóre popularnych modułów, takich jak bazy danych MongoDB opcjonalne zależnościami macierzystego i działają prawidłowo bez obawy, dwa obejścia potwierdza, że pomyślnie z prawie wszystkie moduły macierzyste dostępne dzisiaj:</span><span class="sxs-lookup"><span data-stu-id="83c5f-124">While some popular modules like MongoDB have optional native dependencies and work fine without them, two workarounds proved successful with almost all native modules available today:</span></span>

* <span data-ttu-id="83c5f-125">Uruchom **instalacji narzędzia npm** na komputerze z systemem Windows, który ma zainstalowane wymagania wstępne wszystkich modułu macierzystego w.</span><span class="sxs-lookup"><span data-stu-id="83c5f-125">Run **npm install** on a Windows machine that has all the native module's prerequisites installed.</span></span> <span data-ttu-id="83c5f-126">Następnie Wdróż utworzony **węzła\_modułów** folder jako część aplikacji w usłudze Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="83c5f-126">Then, deploy the created **node\_modules** folder as part of the application to Azure App Service.</span></span>

  * <span data-ttu-id="83c5f-127">Przed skompilowaniem, sprawdź, czy lokalnej instalacji programu Node.js ma architekturę zgodną i wersja jest możliwie jak najbardziej zbliżone do jednego używane na platformie Azure (bieżące wartości można sprawdzić na środowisko uruchomieniowe przy użyciu właściwości **process.arch** i **process.version**).</span><span class="sxs-lookup"><span data-stu-id="83c5f-127">Before compiling, check that your local Node.js installation has matching architecture and the version is as close as possible to the one used in Azure (the current values can be checked on runtime from properties **process.arch** and **process.version**).</span></span>

* <span data-ttu-id="83c5f-128">Usługa aplikacji Azure może być skonfigurowane do wykonywania bash niestandardowych lub skryptów powłoki podczas wdrażania, umożliwiając możliwość wykonania polecenia niestandardowych i dokładnie skonfigurować sposób **instalacji narzędzia npm** jest uruchamiana.</span><span class="sxs-lookup"><span data-stu-id="83c5f-128">Azure App Service can be configured to execute custom bash or shell scripts during deployment, giving you the opportunity to execute custom commands and precisely configure the way **npm install** is being run.</span></span> <span data-ttu-id="83c5f-129">Aby obejrzeć wideo przedstawiający sposób konfigurowania tego środowiska, zobacz [niestandardowych skryptów wdrażania witryny sieci Web z Kudu].</span><span class="sxs-lookup"><span data-stu-id="83c5f-129">For a video showing how to configure that environment, see [Custom Website Deployment Scripts with Kudu].</span></span>

### <a name="using-a-packagejson-file"></a><span data-ttu-id="83c5f-130">Przy użyciu pliku package.json</span><span class="sxs-lookup"><span data-stu-id="83c5f-130">Using a package.json file</span></span>
<span data-ttu-id="83c5f-131">**Package.json** plik jest możliwość określenia zależności najwyższego poziomu, aplikacja wymaga, aby Platforma macierzysta można zainstalować zależności, zamiast konieczności obejmują **węzła\_pakiety** folder jako część wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="83c5f-131">The **package.json** file is a way to specify the top-level dependencies your application requires so that the hosting platform can install the dependencies, rather than requiring you to include the **node\_packages** folder as part of the deployment.</span></span> <span data-ttu-id="83c5f-132">Po wdrożeniu aplikacji **instalacji narzędzia npm** polecenie służy do analizowania **package.json** plików i zainstalować wszystkie zależności na liście.</span><span class="sxs-lookup"><span data-stu-id="83c5f-132">After the application has been deployed, the **npm install** command is used to parse the **package.json** file and install all the dependencies listed.</span></span>

<span data-ttu-id="83c5f-133">Podczas tworzenia, można użyć **— Zapisz**, **— Zapisz deweloperów**, lub **— opcjonalne Zapisz** parametrów podczas instalowania modułów, aby dodać wpis dla modułu do sieci **package.json** pliku automatycznie.</span><span class="sxs-lookup"><span data-stu-id="83c5f-133">During development, you can use the **--save**, **--save-dev**, or **--save-optional** parameters when installing modules to add an entry for the module to your **package.json** file automatically.</span></span> <span data-ttu-id="83c5f-134">Aby uzyskać więcej informacji, zobacz [npm install](https://docs.npmjs.com/cli/install).</span><span class="sxs-lookup"><span data-stu-id="83c5f-134">For more information, see [npm-install](https://docs.npmjs.com/cli/install).</span></span>

<span data-ttu-id="83c5f-135">Jednym z potencjalnych problemów z **package.json** plik jest, że tylko określa wersję zależności najwyższego poziomu.</span><span class="sxs-lookup"><span data-stu-id="83c5f-135">One potential problem with the **package.json** file is that it only specifies the version for top-level dependencies.</span></span> <span data-ttu-id="83c5f-136">Każdy zainstalowany moduł może lub nie może określić wersji modułów, od których zależy, a więc jest to możliwe, że może to spowodować z łańcucha zależności innego niż używane w rozwoju.</span><span class="sxs-lookup"><span data-stu-id="83c5f-136">Each module installed may or may not specify the version of the modules it depends on, and so it is possible that you may end up with a different dependency chain than the one used in development.</span></span>

> [!NOTE]
> <span data-ttu-id="83c5f-137">W przypadku wdrażania w usłudze Azure App Service, jeśli Twoje <b>package.json</b> odwołuje się do pliku modułu macierzystego podczas publikowania aplikacji przy użyciu narzędzia Git napotkać błąd podobny do poniższego przykładu:</span><span class="sxs-lookup"><span data-stu-id="83c5f-137">When deploying to Azure App Service, if your <b>package.json</b> file references a native module you might see an error similar to the following example when publishing the application using Git:</span></span>
> 
> <span data-ttu-id="83c5f-138">Błąd npm!</span><span class="sxs-lookup"><span data-stu-id="83c5f-138">npm ERR!</span></span> <span data-ttu-id="83c5f-139">module-name@0.6.0Zainstaluj: "gyp węzła Konfigurowanie kompilacji"</span><span class="sxs-lookup"><span data-stu-id="83c5f-139">module-name@0.6.0 install: 'node-gyp configure build'</span></span>
> 
> <span data-ttu-id="83c5f-140">Błąd npm!</span><span class="sxs-lookup"><span data-stu-id="83c5f-140">npm ERR!</span></span> <span data-ttu-id="83c5f-141">"cmd"/ c""gyp węzła Konfigurowanie kompilacji"" nie powiodło się z 1</span><span class="sxs-lookup"><span data-stu-id="83c5f-141">'cmd "/c" "node-gyp configure build"' failed with 1</span></span>
> 
> 

### <a name="using-a-npm-shrinkwrapjson-file"></a><span data-ttu-id="83c5f-142">Przy użyciu pliku npm shrinkwrap.json</span><span class="sxs-lookup"><span data-stu-id="83c5f-142">Using a npm-shrinkwrap.json file</span></span>
<span data-ttu-id="83c5f-143">**Npm shrinkwrap.json** plik jest próba adresów ograniczenia wersji modułu **package.json** pliku.</span><span class="sxs-lookup"><span data-stu-id="83c5f-143">The **npm-shrinkwrap.json** file is an attempt to address the module versioning limitations of the **package.json** file.</span></span> <span data-ttu-id="83c5f-144">Gdy **package.json** pliku obejmuje tylko wersje dla modułów najwyższego poziomu, **npm shrinkwrap.json** plik zawiera wymagania dotyczące wersji dla modułu pełny łańcuch zależności.</span><span class="sxs-lookup"><span data-stu-id="83c5f-144">While the **package.json** file only includes versions for the top-level modules, the **npm-shrinkwrap.json** file contains the version requirements for the full module dependency chain.</span></span>

<span data-ttu-id="83c5f-145">Gdy aplikacja jest gotowa do produkcji, można zablokować wymagania dotyczące wersji i utworzyć **npm shrinkwrap.json** pliku przy użyciu **npm shrinkwrap** polecenia.</span><span class="sxs-lookup"><span data-stu-id="83c5f-145">When your application is ready for production, you can lock down version requirements and create an **npm-shrinkwrap.json** file by using the **npm shrinkwrap** command.</span></span> <span data-ttu-id="83c5f-146">To polecenie będzie używać wersji aktualnie zainstalowane w **węzła\_modułów** folderu i zarejestruj tych wersji **npm shrinkwrap.json** pliku.</span><span class="sxs-lookup"><span data-stu-id="83c5f-146">This command will use the versions currently installed in the **node\_modules** folder, and record these versions to the **npm-shrinkwrap.json** file.</span></span> <span data-ttu-id="83c5f-147">Po wdrożeniu aplikacji do środowiska macierzystego **instalacji narzędzia npm** polecenie służy do analizowania **npm shrinkwrap.json** plików i zainstalować wszystkie zależności na liście.</span><span class="sxs-lookup"><span data-stu-id="83c5f-147">After the application has been deployed to the hosting environment, the **npm install** command is used to parse the **npm-shrinkwrap.json** file and install all the dependencies listed.</span></span> <span data-ttu-id="83c5f-148">Aby uzyskać więcej informacji, zobacz [npm shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap).</span><span class="sxs-lookup"><span data-stu-id="83c5f-148">For more information, see [npm-shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap).</span></span>

> [!NOTE]
> <span data-ttu-id="83c5f-149">W przypadku wdrażania w usłudze Azure App Service, jeśli Twoje <b>npm shrinkwrap.json</b> odwołuje się do pliku modułu macierzystego podczas publikowania aplikacji przy użyciu narzędzia Git napotkać błąd podobny do poniższego przykładu:</span><span class="sxs-lookup"><span data-stu-id="83c5f-149">When deploying to Azure App Service, if your <b>npm-shrinkwrap.json</b> file references a native module you might see an error similar to the following example when publishing the application using Git:</span></span>
> 
> <span data-ttu-id="83c5f-150">Błąd npm!</span><span class="sxs-lookup"><span data-stu-id="83c5f-150">npm ERR!</span></span> <span data-ttu-id="83c5f-151">module-name@0.6.0Zainstaluj: "gyp węzła Konfigurowanie kompilacji"</span><span class="sxs-lookup"><span data-stu-id="83c5f-151">module-name@0.6.0 install: 'node-gyp configure build'</span></span>
> 
> <span data-ttu-id="83c5f-152">Błąd npm!</span><span class="sxs-lookup"><span data-stu-id="83c5f-152">npm ERR!</span></span> <span data-ttu-id="83c5f-153">"cmd"/ c""gyp węzła Konfigurowanie kompilacji"" nie powiodło się z 1</span><span class="sxs-lookup"><span data-stu-id="83c5f-153">'cmd "/c" "node-gyp configure build"' failed with 1</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="83c5f-154">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="83c5f-154">Next steps</span></span>
<span data-ttu-id="83c5f-155">Teraz można zrozumieć, jak można użyć modułów programu Node.js dla platformy Azure, Dowiedz się, jak [określanie wersji środowiska Node.js], [tworzenia i wdrażania aplikacji sieci web Node.js](app-service-web/app-service-web-get-started-nodejs.md), i [sposób użycia interfejsu wiersza polecenia platformy Azure dla systemów Mac i Linux].</span><span class="sxs-lookup"><span data-stu-id="83c5f-155">Now that you understand how to use Node.js modules with Azure, learn how to [specify the Node.js version], [build and deploy a Node.js web app](app-service-web/app-service-web-get-started-nodejs.md), and [How to use the Azure Command-Line Interface for Mac and Linux].</span></span>

<span data-ttu-id="83c5f-156">Aby uzyskać więcej informacji, odwiedź stronę [Centrum deweloperów środowiska Node.js](/nodejs/azure/).</span><span class="sxs-lookup"><span data-stu-id="83c5f-156">For more information, see the [Node.js Developer Center](/nodejs/azure/).</span></span>

<span data-ttu-id="83c5f-157">[określanie wersji środowiska Node.js]: nodejs-specify-node-version-azure-apps.md</span><span class="sxs-lookup"><span data-stu-id="83c5f-157">[specify the Node.js version]: nodejs-specify-node-version-azure-apps.md</span></span>
<span data-ttu-id="83c5f-158">[sposób użycia interfejsu wiersza polecenia platformy Azure dla systemów Mac i Linux]:cli-install-nodejs.md</span><span class="sxs-lookup"><span data-stu-id="83c5f-158">[How to use the Azure Command-Line Interface for Mac and Linux]:cli-install-nodejs.md</span></span>
<span data-ttu-id="83c5f-159">[niestandardowych skryptów wdrażania witryny sieci Web z Kudu]: https://channel9.msdn.com/Shows/Azure-Friday/Custom-Web-Site-Deployment-Scripts-with-Kudu-with-David-Ebbo</span><span class="sxs-lookup"><span data-stu-id="83c5f-159">[Custom Website Deployment Scripts with Kudu]: https://channel9.msdn.com/Shows/Azure-Friday/Custom-Web-Site-Deployment-Scripts-with-Kudu-with-David-Ebbo</span></span>
