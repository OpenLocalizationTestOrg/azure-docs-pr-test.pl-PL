---
title: "Sieciowe grupy zabezpieczeń na platformie Azure | Microsoft Docs"
description: "Dowiedz się, jak izolować przepływ ruchu i sterować nim w sieciach wirtualnych przy użyciu rozproszonej zapory platformy Azure korzystającej z sieciowych grup zabezpieczeń."
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: tysonn
ms.assetid: 20e850fc-6456-4b5f-9a3f-a8379b052bc9
ms.service: virtual-network
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/11/2016
ms.author: jdial
ms.openlocfilehash: fac6ee69b5f0377e0515ac9abeb28788cbef9b79
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/18/2017
---
# <a name="filter-network-traffic-with-network-security-groups"></a><span data-ttu-id="0c1b7-103">Filtrowanie ruchu sieciowego przy użyciu sieciowych grup zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="0c1b7-103">Filter network traffic with network security groups</span></span>

<span data-ttu-id="0c1b7-104">Sieciowa grupa zabezpieczeń (NSG, network security group) zawiera listę reguł zabezpieczeń, które blokują lub zezwalają na ruch sieciowy do zasobów połączonych z usługami Azure Virtual Network (VNet).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-104">A network security group (NSG) contains a list of security rules that allow or deny network traffic to resources connected to Azure Virtual Networks (VNet).</span></span> <span data-ttu-id="0c1b7-105">Sieciowe grupy zabezpieczeń można skojarzyć z podsieciami, poszczególnymi maszynami wirtualnymi (model klasyczny) lub poszczególnymi interfejsami sieciowymi (NIC) dołączonymi do maszyn wirtualnych (model usługi Resource Manager).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-105">NSGs can be associated to subnets, individual VMs (classic), or individual network interfaces (NIC) attached to VMs (Resource Manager).</span></span> <span data-ttu-id="0c1b7-106">Jeśli sieciowa grupa zabezpieczeń jest skojarzona z podsiecią, te reguły są stosowane do wszystkich zasobów połączonych z tą podsiecią.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-106">When an NSG is associated to a subnet, the rules apply to all resources connected to the subnet.</span></span> <span data-ttu-id="0c1b7-107">Ruch można ograniczyć jeszcze bardziej, kojarząc sieciową grupę zabezpieczeń również z maszyną wirtualną lub kartą sieciową.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-107">Traffic can further be restricted by also associating an NSG to a VM or NIC.</span></span>

> [!NOTE]
> <span data-ttu-id="0c1b7-108">Platforma Azure oferuje dwa różne modele wdrażania związane z tworzeniem zasobów i pracą z nimi: [model wdrażania przy użyciu usługi Azure Resource Manager i model klasyczny](../resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-108">Azure has two different deployment models for creating and working with resources:  [Resource Manager and classic](../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="0c1b7-109">W tym artykule przedstawiono oba modele, ale firma Microsoft zaleca przeprowadzanie większości nowych wdrożeń z zastosowaniem modelu wdrażania przy użyciu usługi Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-109">This article covers using both models, but Microsoft recommends that most new deployments use the Resource Manager model.</span></span>

## <a name="nsg-resource"></a><span data-ttu-id="0c1b7-110">Zasób sieciowej grupy zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="0c1b7-110">NSG resource</span></span>
<span data-ttu-id="0c1b7-111">Sieciowe grupy zabezpieczeń obejmują następujące właściwości:</span><span class="sxs-lookup"><span data-stu-id="0c1b7-111">NSGs contain the following properties:</span></span>

| <span data-ttu-id="0c1b7-112">Właściwość</span><span class="sxs-lookup"><span data-stu-id="0c1b7-112">Property</span></span> | <span data-ttu-id="0c1b7-113">Opis</span><span class="sxs-lookup"><span data-stu-id="0c1b7-113">Description</span></span> | <span data-ttu-id="0c1b7-114">Ograniczenia</span><span class="sxs-lookup"><span data-stu-id="0c1b7-114">Constraints</span></span> | <span data-ttu-id="0c1b7-115">Zagadnienia do rozważenia</span><span class="sxs-lookup"><span data-stu-id="0c1b7-115">Considerations</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0c1b7-116">Nazwa</span><span class="sxs-lookup"><span data-stu-id="0c1b7-116">Name</span></span> |<span data-ttu-id="0c1b7-117">Nazwa sieciowej grupy zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="0c1b7-117">Name for the NSG</span></span> |<span data-ttu-id="0c1b7-118">Musi być unikatowa w obrębie regionu.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-118">Must be unique within the region.</span></span><br/><span data-ttu-id="0c1b7-119">Może zawierać litery, cyfry, podkreślenia, kropki i łączniki.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-119">Can contain letters, numbers, underscores, periods, and hyphens.</span></span><br/><span data-ttu-id="0c1b7-120">Musi zaczynać się literą lub cyfrą.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-120">Must start with a letter or number.</span></span><br/><span data-ttu-id="0c1b7-121">Musi kończyć się literą, cyfrą lub podkreśleniem.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-121">Must end with a letter, number, or underscore.</span></span><br/><span data-ttu-id="0c1b7-122">Nie może przekraczać 80 znaków.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-122">Cannot exceed 80 characters.</span></span> |<span data-ttu-id="0c1b7-123">Ponieważ może być konieczne utworzenie kilku sieciowych grup zabezpieczeń, upewnij się, że dysponujesz konwencją nazewnictwa, która pozwala łatwo identyfikować ich funkcję.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-123">Since you may need to create several NSGs, make sure you have a naming convention that makes it easy to identify the function of your NSGs.</span></span> |
| <span data-ttu-id="0c1b7-124">Region</span><span class="sxs-lookup"><span data-stu-id="0c1b7-124">Region</span></span> |<span data-ttu-id="0c1b7-125">[Region](https://azure.microsoft.com/regions) świadczenia usługi Azure, w którym jest tworzona sieciowa grupa zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-125">Azure [region](https://azure.microsoft.com/regions) where the NSG is created.</span></span> |<span data-ttu-id="0c1b7-126">Sieciowe grupy zabezpieczeń można kojarzyć tylko z zasobami znajdującymi się w tym samym regionie co sieciowa grupa zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-126">NSGs can only be associated to resources within the same region as the NSG.</span></span> |<span data-ttu-id="0c1b7-127">Aby się dowiedzieć, ile sieciowych grup zabezpieczeń może się znajdować w jednym regionie, przeczytaj artykuł dotyczący [limitów platformy Azure](../azure-subscription-service-limits.md#virtual-networking-limits-classic).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-127">To learn about how many NSGs you can have per region, read the [Azure limits](../azure-subscription-service-limits.md#virtual-networking-limits-classic) article.</span></span>|
| <span data-ttu-id="0c1b7-128">Grupa zasobów</span><span class="sxs-lookup"><span data-stu-id="0c1b7-128">Resource group</span></span> |<span data-ttu-id="0c1b7-129">[Grupa zasobów](../azure-resource-manager/resource-group-overview.md#resource-groups), w której istnieje sieciowa grupa zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-129">The [resource group](../azure-resource-manager/resource-group-overview.md#resource-groups) the NSG exists in.</span></span> |<span data-ttu-id="0c1b7-130">Chociaż sieciowa grupa zabezpieczeń istnieje w grupie zasobów, może być skojarzona z zasobami w dowolnej grupie zasobów, jeśli tylko zasób jest częścią tego samego regionu świadczenia usługi Azure co sieciowa grupa zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-130">Although an NSG exists in a resource group, it can be associated to resources in any resource group, as long as the resource is part of the same Azure region as the NSG.</span></span> |<span data-ttu-id="0c1b7-131">Grupy zasobów służą do zarządzania wieloma zasobami równocześnie w ramach jednostki wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-131">Resource groups are used to manage multiple resources together, as a deployment unit.</span></span><br/><span data-ttu-id="0c1b7-132">Można rozważyć zgrupowanie sieciowej grupy zabezpieczeń z zasobami, z którymi jest ona skojarzona.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-132">You may consider grouping the NSG with resources it is associated to.</span></span> |
| <span data-ttu-id="0c1b7-133">Reguły</span><span class="sxs-lookup"><span data-stu-id="0c1b7-133">Rules</span></span> |<span data-ttu-id="0c1b7-134">Reguły ruchu przychodzącego i wychodzącego określające, jaki ruch jest dozwolony lub zablokowany.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-134">Inbound or outbound rules that define what traffic is allowed or denied.</span></span> | |<span data-ttu-id="0c1b7-135">Zobacz sekcję [Reguły sieciowej grupy zabezpieczeń](#Nsg-rules) w tym artykule.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-135">See the [NSG rules](#Nsg-rules) section of this article.</span></span> |

> [!NOTE]
> <span data-ttu-id="0c1b7-136">Listy ACL oparte na punktach końcowych i sieciowe grupy zabezpieczeń nie są obsługiwane w tym samym wystąpieniu maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-136">Endpoint-based ACLs and network security groups are not supported on the same VM instance.</span></span> <span data-ttu-id="0c1b7-137">Jeśli chcesz użyć sieciowej grupy zabezpieczeń, a masz już listę ACL punktów końcowych, najpierw usuń listę ACL punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-137">If you want to use an NSG and have an endpoint ACL already in place, first remove the endpoint ACL.</span></span> <span data-ttu-id="0c1b7-138">Aby się dowiedzieć, jak usunąć listę ACL, przeczytaj artykuł [Managing Access Control Lists (ACLs) for Endpoints by using PowerShell](virtual-networks-acl-powershell.md) (Zarządzanie listami kontroli dostępu [ACL] dla punktów końcowych przy użyciu programu PowerShell).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-138">To learn how to remove an ACL, read the [Managing Access Control Lists (ACLs) for Endpoints by using PowerShell](virtual-networks-acl-powershell.md) article.</span></span>
> 

### <a name="nsg-rules"></a><span data-ttu-id="0c1b7-139">Reguły sieciowej grupy zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="0c1b7-139">NSG rules</span></span>
<span data-ttu-id="0c1b7-140">Reguły sieciowych grup zabezpieczeń obejmują następujące właściwości:</span><span class="sxs-lookup"><span data-stu-id="0c1b7-140">NSG rules contain the following properties:</span></span>

| <span data-ttu-id="0c1b7-141">Właściwość</span><span class="sxs-lookup"><span data-stu-id="0c1b7-141">Property</span></span> | <span data-ttu-id="0c1b7-142">Opis</span><span class="sxs-lookup"><span data-stu-id="0c1b7-142">Description</span></span> | <span data-ttu-id="0c1b7-143">Ograniczenia</span><span class="sxs-lookup"><span data-stu-id="0c1b7-143">Constraints</span></span> | <span data-ttu-id="0c1b7-144">Zagadnienia do rozważenia</span><span class="sxs-lookup"><span data-stu-id="0c1b7-144">Considerations</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0c1b7-145">**Nazwa**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-145">**Name**</span></span> |<span data-ttu-id="0c1b7-146">Nazwa reguły.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-146">Name for the rule.</span></span> |<span data-ttu-id="0c1b7-147">Musi być unikatowa w obrębie regionu.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-147">Must be unique within the region.</span></span><br/><span data-ttu-id="0c1b7-148">Może zawierać litery, cyfry, podkreślenia, kropki i łączniki.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-148">Can contain letters, numbers, underscores, periods, and hyphens.</span></span><br/><span data-ttu-id="0c1b7-149">Musi zaczynać się literą lub cyfrą.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-149">Must start with a letter or number.</span></span><br/><span data-ttu-id="0c1b7-150">Musi kończyć się literą, cyfrą lub podkreśleniem.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-150">Must end with a letter, number, or underscore.</span></span><br/><span data-ttu-id="0c1b7-151">Nie może przekraczać 80 znaków.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-151">Cannot exceed 80 characters.</span></span> |<span data-ttu-id="0c1b7-152">Sieciowa grupa zabezpieczeń może zawierać kilka reguł, więc pamiętaj, aby postępować zgodnie z konwencją nazewnictwa, która umożliwia zidentyfikowanie funkcji reguły.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-152">You may have several rules within an NSG, so make sure you follow a naming convention that allows you to identify the function of your rule.</span></span> |
| <span data-ttu-id="0c1b7-153">**Protokół**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-153">**Protocol**</span></span> |<span data-ttu-id="0c1b7-154">Protokół odpowiadający regule.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-154">Protocol to match for the rule.</span></span> |<span data-ttu-id="0c1b7-155">TCP, UDP lub *</span><span class="sxs-lookup"><span data-stu-id="0c1b7-155">TCP, UDP, or *</span></span> |<span data-ttu-id="0c1b7-156">Wstawienie znaku * oznacza protokół ICMP (tylko ruch wschód-zachód), a także protokoły UDP i TCP. W ten sposób można zmniejszyć liczbę potrzebnych reguł.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-156">Using * as a protocol includes ICMP (East-West traffic only), as well as UDP and TCP, and may reduce the number of rules you need.</span></span><br/><span data-ttu-id="0c1b7-157">Z drugiej strony użycie znaku * może okazać się rozwiązaniem zbyt ogólnym, dlatego zaleca się używanie znaku * tylko w razie konieczności.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-157">At the same time, using * might be too broad an approach, so it's recommended that you use * only when necessary.</span></span> |
| <span data-ttu-id="0c1b7-158">**Zakres portów źródłowych**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-158">**Source port range**</span></span> |<span data-ttu-id="0c1b7-159">Zakres portów źródłowych odpowiadający regule.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-159">Source port range to match for the rule.</span></span> |<span data-ttu-id="0c1b7-160">Numer pojedynczego portu od 1 do 65535, zakres portów (np. 1–65535) lub * (dla wszystkich portów).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-160">Single port number from 1 to 65535, port range (example: 1-65535), or * (for all ports).</span></span> |<span data-ttu-id="0c1b7-161">Porty źródłowe mogą być efemeryczne.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-161">Source ports could be ephemeral.</span></span> <span data-ttu-id="0c1b7-162">Jeśli program kliencki nie korzysta z określonego portu, należy w większości przypadków użyć znaku *.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-162">Unless your client program is using a specific port, use * in most cases.</span></span><br/><span data-ttu-id="0c1b7-163">Używaj zakresów portów możliwie często, aby uniknąć konieczności korzystania z wielu reguł.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-163">Try to use port ranges as much as possible to avoid the need for multiple rules.</span></span><br/><span data-ttu-id="0c1b7-164">Wielu portów lub zakresów portów nie można oddzielać przecinkiem.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-164">Multiple ports or port ranges cannot be grouped by a comma.</span></span> |
| <span data-ttu-id="0c1b7-165">**Zakres portów docelowych**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-165">**Destination port range**</span></span> |<span data-ttu-id="0c1b7-166">Zakres portów docelowych odpowiadający regule.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-166">Destination port range to match for the rule.</span></span> |<span data-ttu-id="0c1b7-167">Numer pojedynczego portu od 1 do 65535, zakres portów (np. 1–65535) lub \* (dla wszystkich portów).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-167">Single port number from 1 to 65535, port range (example: 1-65535), or \* (for all ports).</span></span> |<span data-ttu-id="0c1b7-168">Używaj zakresów portów możliwie często, aby uniknąć konieczności korzystania z wielu reguł.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-168">Try to use port ranges as much as possible to avoid the need for multiple rules.</span></span><br/><span data-ttu-id="0c1b7-169">Wielu portów lub zakresów portów nie można oddzielać przecinkiem.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-169">Multiple ports or port ranges cannot be grouped by a comma.</span></span> |
| <span data-ttu-id="0c1b7-170">**Prefiks adresu źródłowego**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-170">**Source address prefix**</span></span> |<span data-ttu-id="0c1b7-171">Prefiks adresu źródłowego lub znacznik odpowiadający regule.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-171">Source address prefix or tag to match for the rule.</span></span> |<span data-ttu-id="0c1b7-172">Pojedynczy adres IP (np. 10.10.10.10), podsieć IP (np. 192.168.1.0/24), [znacznik domyślny](#default-tags) lub * (dla wszystkich adresów).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-172">Single IP address (example: 10.10.10.10), IP subnet (example: 192.168.1.0/24), [default tag](#default-tags), or * (for all addresses).</span></span> |<span data-ttu-id="0c1b7-173">Należy rozważyć użycie zakresów, znaczników domyślnych i znaków * w celu zmniejszenia liczby reguł.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-173">Consider using ranges, default tags, and * to reduce the number of rules.</span></span> |
| <span data-ttu-id="0c1b7-174">**Prefiks adresu docelowego**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-174">**Destination address prefix**</span></span> |<span data-ttu-id="0c1b7-175">Prefiks adresu docelowego lub znacznik odpowiadający regule.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-175">Destination address prefix or tag to match for the rule.</span></span> | <span data-ttu-id="0c1b7-176">Pojedynczy adres IP (np. 10.10.10.10), podsieć IP (np. 192.168.1.0/24), [znacznik domyślny](#default-tags) lub * (dla wszystkich adresów).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-176">Single IP address (example: 10.10.10.10), IP subnet (example: 192.168.1.0/24), [default tag](#default-tags), or * (for all addresses).</span></span> |<span data-ttu-id="0c1b7-177">Należy rozważyć użycie zakresów, znaczników domyślnych i znaków * w celu zmniejszenia liczby reguł.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-177">Consider using ranges, default tags, and * to reduce the number of rules.</span></span> |
| <span data-ttu-id="0c1b7-178">**Kierunek**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-178">**Direction**</span></span> |<span data-ttu-id="0c1b7-179">Kierunek ruchu odpowiadający regule.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-179">Direction of traffic to match for the rule.</span></span> |<span data-ttu-id="0c1b7-180">Ruch przychodzący lub wychodzący.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-180">Inbound or outbound.</span></span> |<span data-ttu-id="0c1b7-181">Reguły ruchu przychodzącego i wychodzącego są przetwarzane oddzielnie w zależności od kierunku.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-181">Inbound and outbound rules are processed separately, based on direction.</span></span> |
| <span data-ttu-id="0c1b7-182">**Priorytet**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-182">**Priority**</span></span> |<span data-ttu-id="0c1b7-183">Reguły są sprawdzane według ważności.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-183">Rules are checked in the order of priority.</span></span> <span data-ttu-id="0c1b7-184">Gdy reguła ma zastosowanie, żadne inne reguły nie są sprawdzane pod kątem dopasowania.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-184">Once a rule applies, no more rules are tested for matching.</span></span> | <span data-ttu-id="0c1b7-185">Liczba z zakresu od 100 do 4096.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-185">Number between 100 and 4096.</span></span> | <span data-ttu-id="0c1b7-186">Należy rozważyć utworzenie reguł przez przeskoczenie priorytetów o 100 dla każdej reguły, aby zostawić miejsce na nowe reguły, które mogą zostać utworzone w przyszłości.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-186">Consider creating rules jumping priorities by 100 for each rule to leave space for new rules you might create in the future.</span></span> |
| <span data-ttu-id="0c1b7-187">**Dostęp**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-187">**Access**</span></span> |<span data-ttu-id="0c1b7-188">Typ dostępu do zastosowania, jeśli reguła jest dopasowana.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-188">Type of access to apply if the rule matches.</span></span> | <span data-ttu-id="0c1b7-189">Zezwolenie lub zablokowanie.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-189">Allow or deny.</span></span> | <span data-ttu-id="0c1b7-190">Pamiętaj, że jeśli dla pakietu nie zostanie odnaleziona reguła zezwalająca, zostanie on porzucony.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-190">Keep in mind that if an allow rule is not found for a packet, the packet is dropped.</span></span> |

<span data-ttu-id="0c1b7-191">Sieciowe grupy zabezpieczeń zawierają dwa zestawy reguł: zestaw reguł przychodzących i wychodzących.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-191">NSGs contain two sets of rules: Inbound and outbound.</span></span> <span data-ttu-id="0c1b7-192">Priorytety reguł muszą być unikatowe w poszczególnych zestawach.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-192">The priority for a rule must be unique within each set.</span></span> 

![Przetwarzanie reguł sieciowej grupy zabezpieczeń](./media/virtual-network-nsg-overview/figure3.png) 

<span data-ttu-id="0c1b7-194">Na wcześniejszym rysunku przedstawiono, jak są przetwarzane reguły sieciowej grupy zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-194">The previous picture shows how NSG rules are processed.</span></span>

### <a name="default-tags"></a><span data-ttu-id="0c1b7-195">Znaczniki domyślne</span><span class="sxs-lookup"><span data-stu-id="0c1b7-195">Default Tags</span></span>
<span data-ttu-id="0c1b7-196">Znaczniki domyślne są dostarczanymi przez system identyfikatorami określającymi kategorię adresów IP.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-196">Default tags are system-provided identifiers to address a category of IP addresses.</span></span> <span data-ttu-id="0c1b7-197">Można użyć znaczników domyślnych we właściwościach **prefiksu adresu źródłowego** i **prefiksu adresu docelowego** dowolnej reguły.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-197">You can use default tags in the **source address prefix** and **destination address prefix** properties of any rule.</span></span> <span data-ttu-id="0c1b7-198">Istnieją trzy znaczniki domyślne, których można użyć:</span><span class="sxs-lookup"><span data-stu-id="0c1b7-198">There are three default tags you can use:</span></span>

* <span data-ttu-id="0c1b7-199">**VirtualNetwork** (model usługi Resource Manager) (**VIRTUAL_NETWORK** — model klasyczny): ten znacznik obejmuje przestrzeń adresową sieci wirtualnej (zakresy CIDR określone na platformie Azure), wszystkie połączone lokalne przestrzenie adresowe i połączone sieci wirtualne Azure (sieci lokalne).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-199">**VirtualNetwork** (Resource Manager) (**VIRTUAL_NETWORK** for classic): This tag includes the virtual network address space (CIDR ranges defined in Azure), all connected on-premises address spaces, and connected Azure VNets (local networks).</span></span>
* <span data-ttu-id="0c1b7-200">**AzureLoadBalancer** (model usługi Resource Manager) (**AZURE_LOADBALANCER** — model klasyczny): ten znacznik określa moduł równoważenia obciążenia infrastruktury platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-200">**AzureLoadBalancer** (Resource Manager) (**AZURE_LOADBALANCER** for classic): This tag denotes Azure’s infrastructure load balancer.</span></span> <span data-ttu-id="0c1b7-201">Ten znacznik przekłada się na adres IP centrum danych Azure, z którego pochodzą sondy kondycji Azure.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-201">The tag translates to an Azure datacenter IP where Azure’s health probes originate.</span></span>
* <span data-ttu-id="0c1b7-202">**Internet** (model usługi Resource Manager) (**INTERNET** — model klasyczny): ten znacznik określa przestrzeń adresów IP, która znajduje się poza siecią wirtualną i do której można uzyskać dostęp w publicznym Internecie.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-202">**Internet** (Resource Manager) (**INTERNET** for classic): This tag denotes the IP address space that is outside the virtual network and reachable by public Internet.</span></span> <span data-ttu-id="0c1b7-203">Ten zakres obejmuje [publiczną przestrzeń adresów IP należącą do Azure](https://www.microsoft.com/download/details.aspx?id=41653).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-203">The range includes the [Azure owned public IP space](https://www.microsoft.com/download/details.aspx?id=41653).</span></span>

### <a name="default-rules"></a><span data-ttu-id="0c1b7-204">Reguły domyślne</span><span class="sxs-lookup"><span data-stu-id="0c1b7-204">Default rules</span></span>
<span data-ttu-id="0c1b7-205">Wszystkie sieciowe grupy zabezpieczeń zawierają zestaw reguł domyślnych.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-205">All NSGs contain a set of default rules.</span></span> <span data-ttu-id="0c1b7-206">Reguł domyślnych nie można usunąć, ale ponieważ mają przypisany najniższy priorytet, mogą być zastąpione przez tworzone zasady.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-206">The default rules cannot be deleted, but because they are assigned the lowest priority, they can be overridden by the rules that you create.</span></span> 

<span data-ttu-id="0c1b7-207">Reguły domyślne zezwalają na ruch i blokują go w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="0c1b7-207">The default rules allow and disallow traffic as follows:</span></span>
- <span data-ttu-id="0c1b7-208">**Sieć wirtualna:** ruch pochodzący z sieci wirtualnej i kończący się w niej jest dozwolony zarówno w kierunku przychodzącym, jak i wychodzącym.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-208">**Virtual network:** Traffic originating and ending in a virtual network is allowed both in inbound and outbound directions.</span></span>
- <span data-ttu-id="0c1b7-209">**Internet:** ruch wychodzący jest dozwolony, ale ruch przychodzący jest blokowany.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-209">**Internet:** Outbound traffic is allowed, but inbound traffic is blocked.</span></span>
- <span data-ttu-id="0c1b7-210">**Moduł równoważenia obciążenia:** umożliwia modułowi równoważenia obciążenia Azure badanie kondycji maszyn wirtualnych i wystąpień ról.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-210">**Load balancer:** Allow Azure’s load balancer to probe the health of your VMs and role instances.</span></span> <span data-ttu-id="0c1b7-211">Jeśli nie używa się zestawu z równoważeniem obciążenia, tę zasadę można zastąpić.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-211">If you are not using a load balanced set you can override this rule.</span></span>

<span data-ttu-id="0c1b7-212">**Reguły domyślne ruchu przychodzącego**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-212">**Inbound default rules**</span></span>

| <span data-ttu-id="0c1b7-213">Nazwa</span><span class="sxs-lookup"><span data-stu-id="0c1b7-213">Name</span></span> | <span data-ttu-id="0c1b7-214">Priorytet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-214">Priority</span></span> | <span data-ttu-id="0c1b7-215">Źródłowy adres IP</span><span class="sxs-lookup"><span data-stu-id="0c1b7-215">Source IP</span></span> | <span data-ttu-id="0c1b7-216">Port źródłowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-216">Source Port</span></span> | <span data-ttu-id="0c1b7-217">Docelowy adres IP</span><span class="sxs-lookup"><span data-stu-id="0c1b7-217">Destination IP</span></span> | <span data-ttu-id="0c1b7-218">Port docelowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-218">Destination Port</span></span> | <span data-ttu-id="0c1b7-219">Protokół</span><span class="sxs-lookup"><span data-stu-id="0c1b7-219">Protocol</span></span> | <span data-ttu-id="0c1b7-220">Dostęp</span><span class="sxs-lookup"><span data-stu-id="0c1b7-220">Access</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="0c1b7-221">AllowVNetInBound</span><span class="sxs-lookup"><span data-stu-id="0c1b7-221">AllowVNetInBound</span></span> |<span data-ttu-id="0c1b7-222">65000</span><span class="sxs-lookup"><span data-stu-id="0c1b7-222">65000</span></span> | <span data-ttu-id="0c1b7-223">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="0c1b7-223">VirtualNetwork</span></span> | * | <span data-ttu-id="0c1b7-224">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="0c1b7-224">VirtualNetwork</span></span> | * | * | <span data-ttu-id="0c1b7-225">Zezwalaj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-225">Allow</span></span> |
| <span data-ttu-id="0c1b7-226">AllowAzureLoadBalancerInBound</span><span class="sxs-lookup"><span data-stu-id="0c1b7-226">AllowAzureLoadBalancerInBound</span></span> | <span data-ttu-id="0c1b7-227">65001</span><span class="sxs-lookup"><span data-stu-id="0c1b7-227">65001</span></span> | <span data-ttu-id="0c1b7-228">AzureLoadBalancer</span><span class="sxs-lookup"><span data-stu-id="0c1b7-228">AzureLoadBalancer</span></span> | * | * | * | * | <span data-ttu-id="0c1b7-229">Zezwalaj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-229">Allow</span></span> |
| <span data-ttu-id="0c1b7-230">DenyAllInBound</span><span class="sxs-lookup"><span data-stu-id="0c1b7-230">DenyAllInBound</span></span> |<span data-ttu-id="0c1b7-231">65500</span><span class="sxs-lookup"><span data-stu-id="0c1b7-231">65500</span></span> | * | * | * | * | * | <span data-ttu-id="0c1b7-232">Zablokuj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-232">Deny</span></span> |

<span data-ttu-id="0c1b7-233">**Domyślne reguły ruchu wychodzącego**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-233">**Outbound default rules**</span></span>

| <span data-ttu-id="0c1b7-234">Nazwa</span><span class="sxs-lookup"><span data-stu-id="0c1b7-234">Name</span></span> | <span data-ttu-id="0c1b7-235">Priorytet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-235">Priority</span></span> | <span data-ttu-id="0c1b7-236">Źródłowy adres IP</span><span class="sxs-lookup"><span data-stu-id="0c1b7-236">Source IP</span></span> | <span data-ttu-id="0c1b7-237">Port źródłowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-237">Source Port</span></span> | <span data-ttu-id="0c1b7-238">Docelowy adres IP</span><span class="sxs-lookup"><span data-stu-id="0c1b7-238">Destination IP</span></span> | <span data-ttu-id="0c1b7-239">Port docelowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-239">Destination Port</span></span> | <span data-ttu-id="0c1b7-240">Protokół</span><span class="sxs-lookup"><span data-stu-id="0c1b7-240">Protocol</span></span> | <span data-ttu-id="0c1b7-241">Dostęp</span><span class="sxs-lookup"><span data-stu-id="0c1b7-241">Access</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="0c1b7-242">AllowVnetOutBound</span><span class="sxs-lookup"><span data-stu-id="0c1b7-242">AllowVnetOutBound</span></span> | <span data-ttu-id="0c1b7-243">65000</span><span class="sxs-lookup"><span data-stu-id="0c1b7-243">65000</span></span> | <span data-ttu-id="0c1b7-244">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="0c1b7-244">VirtualNetwork</span></span> | * | <span data-ttu-id="0c1b7-245">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="0c1b7-245">VirtualNetwork</span></span> | * | * | <span data-ttu-id="0c1b7-246">Zezwalaj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-246">Allow</span></span> |
| <span data-ttu-id="0c1b7-247">AllowInternetOutBound</span><span class="sxs-lookup"><span data-stu-id="0c1b7-247">AllowInternetOutBound</span></span> | <span data-ttu-id="0c1b7-248">65001</span><span class="sxs-lookup"><span data-stu-id="0c1b7-248">65001</span></span> | * | * | <span data-ttu-id="0c1b7-249">Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-249">Internet</span></span> | * | * | <span data-ttu-id="0c1b7-250">Zezwalaj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-250">Allow</span></span> |
| <span data-ttu-id="0c1b7-251">DenyAllOutBound</span><span class="sxs-lookup"><span data-stu-id="0c1b7-251">DenyAllOutBound</span></span> | <span data-ttu-id="0c1b7-252">65500</span><span class="sxs-lookup"><span data-stu-id="0c1b7-252">65500</span></span> | * | * | * | * | * | <span data-ttu-id="0c1b7-253">Zablokuj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-253">Deny</span></span> |

## <a name="associating-nsgs"></a><span data-ttu-id="0c1b7-254">Kojarzenie sieciowych grup zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="0c1b7-254">Associating NSGs</span></span>
<span data-ttu-id="0c1b7-255">W zależności od używanego modelu wdrażania sieciową grupę zabezpieczeń można skojarzyć z maszynami wirtualnymi, kartami sieciowymi i podsieciami w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="0c1b7-255">You can associate an NSG to VMs, NICs, and subnets, depending on the deployment model you are using, as follows:</span></span>

* <span data-ttu-id="0c1b7-256">**Maszyna wirtualna (tylko model klasyczny):** reguły zabezpieczeń są stosowane do całego ruchu do/z maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-256">**VM (classic only):** Security rules are applied to all traffic to/from the VM.</span></span> 
* <span data-ttu-id="0c1b7-257">**Karta sieciowa (tylko model Resource Manager):** reguły zabezpieczeń są stosowane do całego ruchu do/z karty sieciowej, z którą jest skojarzona sieciowa grupa zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-257">**NIC (Resource Manager only):** Security rules are applied to all traffic to/from the NIC the NSG is associated to.</span></span> <span data-ttu-id="0c1b7-258">Na maszynie wirtualnej wyposażonej w wiele kart sieciowych można stosować różne (lub takie same) sieciowe grupy zabezpieczeń do poszczególnych kart sieciowych.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-258">In a multi-NIC VM, you can apply different (or the same) NSG to each NIC individually.</span></span> 
* <span data-ttu-id="0c1b7-259">**Podsieć (model Resource Manager i klasyczny):** reguły zabezpieczeń są stosowane do dowolnego ruchu do/z dowolnego zasobu połączonego z siecią wirtualną.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-259">**Subnet (Resource Manager and classic):** Security rules are applied to any traffic to/from any resources connected to the VNet.</span></span>

<span data-ttu-id="0c1b7-260">Można skojarzyć różne sieciowe grupy zabezpieczeń z maszyną wirtualną (lub kartą sieciową, w zależności od modelu wdrażania) i podsiecią, z którą jest połączona karta sieciowa lub maszyna wirtualna.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-260">You can associate different NSGs to a VM (or NIC, depending on the deployment model) and the subnet that a NIC or VM is connected to.</span></span> <span data-ttu-id="0c1b7-261">Reguły zabezpieczeń są stosowane do ruchu sieciowego według priorytetu w poszczególnych sieciowych grupach zabezpieczeń w następującej kolejności:</span><span class="sxs-lookup"><span data-stu-id="0c1b7-261">Security rules are applied to the traffic, by priority, in each NSG, in the following order:</span></span>

- <span data-ttu-id="0c1b7-262">**Ruch przychodzący**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-262">**Inbound traffic**</span></span>

  1. <span data-ttu-id="0c1b7-263">**Sieciowa grupa zabezpieczeń zastosowana do podsieci:** jeśli sieciowa grupa zabezpieczeń w podsieci zawiera regułę dopasowania w celu blokowania ruchu, pakiet jest porzucany.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-263">**NSG applied to subnet:** If a subnet NSG has a matching rule to deny traffic, the packet is dropped.</span></span>

  2. <span data-ttu-id="0c1b7-264">**Sieciowa grupa zabezpieczeń zastosowana do karty sieciowej** (model usługi Resource Manager) lub maszyny wirtualnej (model klasyczny): jeśli sieciowa grupa zabezpieczeń maszyny wirtualnej lub karty sieciowej zawiera regułę dopasowania blokującą ruch, pakiety są porzucane w maszynie wirtualnej lub karcie sieciowej, nawet jeśli sieciowa grupa zabezpieczeń w podsieci ma regułę dopasowania zezwalającą na ruch.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-264">**NSG applied to NIC** (Resource Manager) or VM (classic): If VM\NIC NSG has a matching rule that denies traffic, packets are dropped at the VM\NIC, even if a subnet NSG has a matching rule that allows traffic.</span></span>

- <span data-ttu-id="0c1b7-265">**Ruch wychodzący**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-265">**Outbound traffic**</span></span>

  1. <span data-ttu-id="0c1b7-266">**Sieciowa grupa zabezpieczeń zastosowana do karty sieciowej** (model usługi Resource Manager) lub maszyny wirtualnej (model klasyczny): jeśli sieciowa grupa zabezpieczeń maszyny wirtualnej lub karty sieciowej zawiera regułę dopasowania blokującą ruch, pakiety są porzucane.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-266">**NSG applied to NIC** (Resource Manager) or VM (classic): If a VM\NIC NSG has a matching rule that denies traffic, packets are dropped.</span></span>

  2. <span data-ttu-id="0c1b7-267">**Sieciowa grupa zabezpieczeń zastosowana do podsieci:** jeśli sieciowa grupa zabezpieczeń podsieci zawiera regułę dopasowania blokującą ruch, pakiety są porzucane, nawet jeśli sieciowa grupa zabezpieczeń maszyny wirtualnej lub karty sieciowej ma regułę dopasowania zezwalającą na ruch.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-267">**NSG applied to subnet:** If a subnet NSG has a matching rule that denies traffic, packets are dropped, even if a VM\NIC NSG has a matching rule that allows traffic.</span></span>

> [!NOTE]
> <span data-ttu-id="0c1b7-268">Chociaż z podsiecią można skojarzyć tylko jedną sieciową grupę zabezpieczeń, maszynę wirtualną lub kartę sieciową, tę samą sieciową grupę zabezpieczeń można skojarzyć z dowolną liczbą zasobów.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-268">Although you can only associate a single NSG to a subnet, VM, or NIC; you can associate the same NSG to as many resources as you want.</span></span>
>

## <a name="implementation"></a><span data-ttu-id="0c1b7-269">Wdrażanie</span><span class="sxs-lookup"><span data-stu-id="0c1b7-269">Implementation</span></span>
<span data-ttu-id="0c1b7-270">Sieciowe grupy zabezpieczeń można wdrożyć w modelach wdrażania: usługi Resource Manager oraz klasycznym przy użyciu następujących narzędzi:</span><span class="sxs-lookup"><span data-stu-id="0c1b7-270">You can implement NSGs in the Resource Manager or classic deployment models using the following tools:</span></span>

| <span data-ttu-id="0c1b7-271">Narzędzie wdrażania</span><span class="sxs-lookup"><span data-stu-id="0c1b7-271">Deployment tool</span></span> | <span data-ttu-id="0c1b7-272">Wdrożenie klasyczne</span><span class="sxs-lookup"><span data-stu-id="0c1b7-272">Classic</span></span> | <span data-ttu-id="0c1b7-273">Resource Manager</span><span class="sxs-lookup"><span data-stu-id="0c1b7-273">Resource Manager</span></span> |
| --- | --- | --- |
| <span data-ttu-id="0c1b7-274">Portal Azure</span><span class="sxs-lookup"><span data-stu-id="0c1b7-274">Azure portal</span></span>   | <span data-ttu-id="0c1b7-275">Tak</span><span class="sxs-lookup"><span data-stu-id="0c1b7-275">Yes</span></span> | [<span data-ttu-id="0c1b7-276">Tak</span><span class="sxs-lookup"><span data-stu-id="0c1b7-276">Yes</span></span>](virtual-networks-create-nsg-arm-pportal.md) |
| <span data-ttu-id="0c1b7-277">PowerShell</span><span class="sxs-lookup"><span data-stu-id="0c1b7-277">PowerShell</span></span>     | [<span data-ttu-id="0c1b7-278">Tak</span><span class="sxs-lookup"><span data-stu-id="0c1b7-278">Yes</span></span>](virtual-networks-create-nsg-classic-ps.md) | [<span data-ttu-id="0c1b7-279">Tak</span><span class="sxs-lookup"><span data-stu-id="0c1b7-279">Yes</span></span>](virtual-networks-create-nsg-arm-ps.md) |
| <span data-ttu-id="0c1b7-280">Interfejs wiersza polecenia platformy Azure **V1**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-280">Azure CLI **V1**</span></span>   | [<span data-ttu-id="0c1b7-281">Tak</span><span class="sxs-lookup"><span data-stu-id="0c1b7-281">Yes</span></span>](virtual-networks-create-nsg-classic-cli.md) | [<span data-ttu-id="0c1b7-282">Tak</span><span class="sxs-lookup"><span data-stu-id="0c1b7-282">Yes</span></span>](virtual-networks-create-nsg-cli-nodejs.md) |
| <span data-ttu-id="0c1b7-283">Interfejs wiersza polecenia platformy Azure **V2**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-283">Azure CLI **V2**</span></span>   | <span data-ttu-id="0c1b7-284">Nie</span><span class="sxs-lookup"><span data-stu-id="0c1b7-284">No</span></span> | [<span data-ttu-id="0c1b7-285">Tak</span><span class="sxs-lookup"><span data-stu-id="0c1b7-285">Yes</span></span>](virtual-networks-create-nsg-arm-cli.md) |
| <span data-ttu-id="0c1b7-286">Szablon usługi Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="0c1b7-286">Azure Resource Manager template</span></span>   | <span data-ttu-id="0c1b7-287">Nie</span><span class="sxs-lookup"><span data-stu-id="0c1b7-287">No</span></span>  | [<span data-ttu-id="0c1b7-288">Tak</span><span class="sxs-lookup"><span data-stu-id="0c1b7-288">Yes</span></span>](virtual-networks-create-nsg-arm-template.md) |

## <a name="planning"></a><span data-ttu-id="0c1b7-289">Planowanie</span><span class="sxs-lookup"><span data-stu-id="0c1b7-289">Planning</span></span>
<span data-ttu-id="0c1b7-290">Przed wdrożeniem sieciowych grup zabezpieczeń należy odpowiedzieć na następujące pytania:</span><span class="sxs-lookup"><span data-stu-id="0c1b7-290">Before implementing NSGs, you need to answer the following questions:</span></span>

1. <span data-ttu-id="0c1b7-291">Do jakich lub z jakich typów zasobów chcesz filtrować ruch?</span><span class="sxs-lookup"><span data-stu-id="0c1b7-291">What types of resources do you want to filter traffic to or from?</span></span> <span data-ttu-id="0c1b7-292">Możesz podłączyć zasoby, takie jak karty sieciowe, (model usługi Resource Manager), maszyny wirtualne (model klasyczny), usługi Cloud Services, środowiska usług aplikacji i zestawy skalowania maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-292">You can connect resources such as NICs (Resource Manager), VMs (classic), Cloud Services, Application Service Environments, and VM Scale Sets.</span></span> 
2. <span data-ttu-id="0c1b7-293">Czy zasoby, do i z których chcesz filtrować ruch, są połączone z podsieciami w istniejących sieciach wirtualnych?</span><span class="sxs-lookup"><span data-stu-id="0c1b7-293">Are the resources you want to filter traffic to/from connected to subnets in existing VNets?</span></span>

<span data-ttu-id="0c1b7-294">Aby uzyskać więcej informacji na temat planowania zabezpieczeń sieciowych na platformie Azure, przeczytaj artykuł o [usługach w chmurze i zabezpieczeniach sieciowych](../best-practices-network-security.md).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-294">For more information on planning for network security in Azure, read the [Cloud services and network security](../best-practices-network-security.md) article.</span></span> 

## <a name="design-considerations"></a><span data-ttu-id="0c1b7-295">Zagadnienia dotyczące projektowania</span><span class="sxs-lookup"><span data-stu-id="0c1b7-295">Design considerations</span></span>
<span data-ttu-id="0c1b7-296">Jeśli znasz już odpowiedzi na pytania w sekcji [Planowanie](#Planning), przed zdefiniowaniem sieciowych grup zabezpieczeń sprawdź następujące sekcje:</span><span class="sxs-lookup"><span data-stu-id="0c1b7-296">Once you know the answers to the questions in the [Planning](#Planning) section, review the following sections before defining your NSGs:</span></span>

### <a name="limits"></a><span data-ttu-id="0c1b7-297">Limity</span><span class="sxs-lookup"><span data-stu-id="0c1b7-297">Limits</span></span>
<span data-ttu-id="0c1b7-298">Istnieją ograniczenia liczby sieciowych grup zabezpieczeń zawartych w subskrypcji oraz liczby reguł dla poszczególnych sieciowych grup zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-298">There are limits to the number of NSGs you can have in a subscription and number of rules per NSG.</span></span> <span data-ttu-id="0c1b7-299">Aby uzyskać więcej informacji o limitach, przeczytaj artykuł dotyczący [limitów platformy Azure](../azure-subscription-service-limits.md#networking-limits).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-299">To learn more about the limits, read the [Azure limits](../azure-subscription-service-limits.md#networking-limits) article.</span></span>

### <a name="vnet-and-subnet-design"></a><span data-ttu-id="0c1b7-300">Projekt sieci wirtualnej i podsieci</span><span class="sxs-lookup"><span data-stu-id="0c1b7-300">VNet and subnet design</span></span>
<span data-ttu-id="0c1b7-301">Ze względu na to, że sieciowe grupy zabezpieczeń można zastosować do podsieci, można zminimalizować liczbę sieciowych grup zabezpieczeń przez grupowanie zasobów według podsieci i zastosowanie sieciowych grup zabezpieczeń do podsieci.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-301">Since NSGs can be applied to subnets, you can minimize the number of NSGs by grouping your resources by subnet, and applying NSGs to subnets.</span></span>  <span data-ttu-id="0c1b7-302">Jeśli zdecydujesz się zastosować sieciowe grupy zabezpieczeń do podsieci, może się okazać, że istniejące sieci wirtualne i podsieci nie zostały zdefiniowane z uwzględnieniem sieciowych grup zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-302">If you decide to apply NSGs to subnets, you may find that existing VNets and subnets you have were not defined with NSGs in mind.</span></span> <span data-ttu-id="0c1b7-303">Istnieje możliwość zdefiniowania nowych sieci wirtualnych i podsieci obsługujących projekt sieciowej grupy zabezpieczeń, a także wdrożenia nowych zasobów do nowych podsieci.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-303">You may need to define new VNets and subnets to support your NSG design and deploy your new resources to your new subnets.</span></span> <span data-ttu-id="0c1b7-304">Następnie można zdefiniować strategię migracji, aby przenieść istniejące zasoby do nowych podsieci.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-304">You could then define a migration strategy to move existing resources to the new subnets.</span></span> 

### <a name="special-rules"></a><span data-ttu-id="0c1b7-305">Reguły specjalne</span><span class="sxs-lookup"><span data-stu-id="0c1b7-305">Special rules</span></span>
<span data-ttu-id="0c1b7-306">Jeśli zablokujesz ruch dozwolony przez następujące reguły, infrastruktura nie będzie mogła komunikować się z istotnymi usługami platformy Azure:</span><span class="sxs-lookup"><span data-stu-id="0c1b7-306">If you block traffic allowed by the following rules, your infrastructure can't communicate with essential Azure services:</span></span>

* <span data-ttu-id="0c1b7-307">**Wirtualny adres IP węzła hosta:** podstawowe usługi infrastruktury, takie jak DHCP, DNS i monitorowanie kondycji, są realizowane za pośrednictwem zwirtualizowanego adresu IP hosta 168.63.129.16.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-307">**Virtual IP of the host node:** Basic infrastructure services such as DHCP, DNS, and health monitoring are provided through the virtualized host IP address 168.63.129.16.</span></span> <span data-ttu-id="0c1b7-308">Ten publiczny adres IP należy do firmy Microsoft i jest jedynym zwirtualizowanym adresem IP używanym do tego celu we wszystkich regionach.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-308">This public IP address belongs to Microsoft and is the only virtualized IP address used in all regions for this purpose.</span></span> <span data-ttu-id="0c1b7-309">Ten adres IP mapuje do fizycznego adresu IP komputera serwera (węzła hosta) obsługującego maszynę wirtualną.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-309">This IP address maps to the physical IP address of the server machine (host node) hosting the VM.</span></span> <span data-ttu-id="0c1b7-310">Węzeł hosta pełni rolę przekaźnika DHCP, cyklicznego programu rozpoznawania nazw DNS i źródła sondy kondycji modułu równoważenia obciążenia oraz sondy kondycji komputera.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-310">The host node acts as the DHCP relay, the DNS recursive resolver, and the probe source for the load balancer health probe and the machine health probe.</span></span> <span data-ttu-id="0c1b7-311">Komunikacja z tym adresem IP nie jest atakiem.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-311">Communication to this IP address is not an attack.</span></span>
* <span data-ttu-id="0c1b7-312">**Licencjonowanie (usługa zarządzania kluczami):** obrazy systemu Windows uruchomione na maszynach wirtualnych muszą być licencjonowane.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-312">**Licensing (Key Management Service):** Windows images running in VMs must be licensed.</span></span> <span data-ttu-id="0c1b7-313">W celu zapewnienia licencjonowania do serwerów hosta usługi zarządzania kluczami zostaje wysłane żądanie licencjonowania, które takie żądania obsługują.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-313">To ensure licensing, a request is sent to the Key Management Service host servers that handle such queries.</span></span> <span data-ttu-id="0c1b7-314">Żądanie jest wysyłane za pomocą portu 1688.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-314">The request is made outbound through port 1688.</span></span>

### <a name="icmp-traffic"></a><span data-ttu-id="0c1b7-315">Ruch protokołu ICMP</span><span class="sxs-lookup"><span data-stu-id="0c1b7-315">ICMP traffic</span></span>
<span data-ttu-id="0c1b7-316">Bieżące reguły sieciowej grupy zabezpieczeń uwzględniają tylko protokoły *TCP* lub *UDP*.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-316">The current NSG rules only allow for protocols *TCP* or *UDP*.</span></span> <span data-ttu-id="0c1b7-317">Nie ma określonego znacznika dla protokołu *ICMP*.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-317">There is not a specific tag for *ICMP*.</span></span> <span data-ttu-id="0c1b7-318">Ruch ICMP jest jednak dozwolony w ramach sieci wirtualnej za pomocą reguły domyślnej AllowVNetInBound, która zezwala na ruch do i z dowolnego portu oraz protokołu w ramach sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-318">However, ICMP traffic is allowed within a VNet by the AllowVNetInBound default rule, that allows traffic to and from any port and protocol within the VNet.</span></span>

### <a name="subnets"></a><span data-ttu-id="0c1b7-319">Podsieci</span><span class="sxs-lookup"><span data-stu-id="0c1b7-319">Subnets</span></span>
* <span data-ttu-id="0c1b7-320">Weź pod uwagę liczbę warstw, której wymaga obciążenie.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-320">Consider the number of tiers your workload requires.</span></span> <span data-ttu-id="0c1b7-321">Każdą warstwę można wyizolować przy użyciu podsieci, do której z kolei można zastosować sieciową grupę zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-321">Each tier can be isolated by using a subnet, with an NSG applied to the subnet.</span></span> 
* <span data-ttu-id="0c1b7-322">Jeśli musisz wdrożyć podsieć dla bramy VPN lub obwodu ExpressRoute, **nie** stosuj sieciowej grupy zabezpieczeń do tej podsieci.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-322">If you need to implement a subnet for a VPN gateway, or ExpressRoute circuit, do **not** apply an NSG to that subnet.</span></span> <span data-ttu-id="0c1b7-323">Jeśli tak zrobisz, może nie działać łączność pomiędzy różnymi sieciami wirtualnymi lub między różnymi lokalizacjami.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-323">If you do so, cross-VNet or cross-premises connectivity may fail.</span></span> 
* <span data-ttu-id="0c1b7-324">Jeśli zachodzi potrzeba wdrożenia sieciowego urządzenia wirtualnego, połącz to urządzenie z jego własną podsiecią i utwórz trasy definiowane przez użytkownika do i z tego urządzenia.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-324">If you need to implement a network virtual appliance (NVA), connect the NVA to its own subnet and create user-defined routes (UDR) to and from the NVA.</span></span> <span data-ttu-id="0c1b7-325">Możesz wdrożyć sieciową grupę zabezpieczeń poziomu podsieci, aby filtrować ruch do i z tej podsieci.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-325">You can implement a subnet level NSG to filter traffic in and out of this subnet.</span></span> <span data-ttu-id="0c1b7-326">Aby dowiedzieć się więcej o trasach definiowanych przez użytkownika, przeczytaj artykuł [Trasy definiowane przez użytkownika](virtual-networks-udr-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-326">To learn more about UDRs, read the [User-defined routes](virtual-networks-udr-overview.md) article.</span></span>

### <a name="load-balancers"></a><span data-ttu-id="0c1b7-327">Moduły równoważenia obciążenia</span><span class="sxs-lookup"><span data-stu-id="0c1b7-327">Load balancers</span></span>
* <span data-ttu-id="0c1b7-328">Należy rozważyć użycie reguł równoważenia obciążenia i translatora adresów sieciowych dla każdego modułu równoważenia obciążenia używanego przez poszczególne obciążenia.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-328">Consider the load balancing and network address translation (NAT) rules for each load balancer used by each of your workloads.</span></span> <span data-ttu-id="0c1b7-329">Reguły translatora adresów sieciowych są powiązane z pulą zaplecza zawierającą wystąpienia ról kart sieciowych (model usługi Resource Manager) lub maszyn wirtualnych/usług Cloud Services (model klasyczny).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-329">NAT rules are bound to a back-end pool that contains NICs (Resource Manager) or VMs/Cloud Services role instances (classic).</span></span> <span data-ttu-id="0c1b7-330">Należy rozważyć utworzenie sieciowej grupy zabezpieczeń dla każdej puli zaplecza, zezwalającej tylko na ruch mapowany za pomocą reguł wdrożonych w modułach równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-330">Consider creating an NSG for each back-end pool, allowing only traffic mapped through the rules implemented in the load balancers.</span></span> <span data-ttu-id="0c1b7-331">Utworzenie sieciowej grupy zabezpieczeń dla każdej puli zaplecza pozwala zagwarantować, że ruch przychodzący bezpośrednio do puli zaplecza (z pominięciem modułu równoważenia obciążenia) jest również filtrowany.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-331">Creating an NSG for each back-end pool guarantees that traffic coming to the back-end pool directly (rather than through the load balancer), is also filtered.</span></span>
* <span data-ttu-id="0c1b7-332">We wdrożeniach klasycznych tworzy się punkty końcowe, które mapują porty w module równoważenia obciążenia na porty na maszynach wirtualnych lub w wystąpieniach ról.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-332">In classic deployments, you create endpoints that map ports on a load balancer to ports on your VMs or role instances.</span></span> <span data-ttu-id="0c1b7-333">Można również utworzyć osobisty publiczny moduł równoważenia obciążenia za pomocą usługi Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-333">You can also create your own individual public-facing load balancer through Resource Manager.</span></span> <span data-ttu-id="0c1b7-334">Port docelowy dla ruchu przychodzącego to rzeczywisty port maszyny wirtualnej lub wystąpienie roli, a nie port udostępniany przez moduł równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-334">The destination port for incoming traffic is the actual port in the VM or role instance, not the port exposed by a load balancer.</span></span> <span data-ttu-id="0c1b7-335">Port źródłowy i adres dla połączenia z maszyną wirtualną to port i adres na komputerze zdalnym w Internecie, a nie port i adres udostępniane przez moduł równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-335">The source port and address for the connection to the VM is a port and address on the remote computer in the Internet, not the port and address exposed by the load balancer.</span></span>
* <span data-ttu-id="0c1b7-336">Podczas tworzenia sieciowych grup zabezpieczeń do filtrowania ruchu przechodzącego przez wewnętrzny moduł równoważenia obciążenia zastosowany port źródłowy i zakres adresów dotyczą komputera źródłowego, a nie modułu równoważnia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-336">When you create NSGs to filter traffic coming through an internal load balancer (ILB), the source port and address range applied are  from the originating computer, not the load balancer.</span></span> <span data-ttu-id="0c1b7-337">Port docelowy i zakres adresów dotyczą komputera docelowego, a nie modułu równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-337">The destination port and address range are those of the destination computer, not the load balancer.</span></span>

### <a name="other"></a><span data-ttu-id="0c1b7-338">Inne</span><span class="sxs-lookup"><span data-stu-id="0c1b7-338">Other</span></span>
* <span data-ttu-id="0c1b7-339">Listy kontroli dostępu (ACL) oparte na punktach końcowych i sieciowe grupy zabezpieczeń nie są obsługiwane w tym samym wystąpieniu maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-339">Endpoint-based access control lists (ACL) and NSGs are not supported on the same VM instance.</span></span> <span data-ttu-id="0c1b7-340">Jeśli chcesz użyć sieciowej grupy zabezpieczeń, a masz już listę ACL punktów końcowych, najpierw usuń listę ACL punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-340">If you want to use an NSG and have an endpoint ACL already in place, first remove the endpoint ACL.</span></span> <span data-ttu-id="0c1b7-341">Informacje o sposobie usuwania listy ACL punktów końcowych zawiera artykuł [Manage endpoint ACLs](virtual-networks-acl-powershell.md) (Zarządzanie listami ACL opartymi na punktach końcowych).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-341">For information about how to remove an endpoint ACL, see the [Manage endpoint ACLs](virtual-networks-acl-powershell.md) article.</span></span>
* <span data-ttu-id="0c1b7-342">Korzystając z usługi Resource Manager, można użyć sieciowej grupy zabezpieczeń skojarzonej z kartą sieciową dla maszyn wirtualnych z wieloma kartami sieciowymi, aby włączyć zarządzanie (dostęp zdalny) dla poszczególnych kart sieciowych.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-342">In Resource Manager, you can use an NSG associated to a NIC for VMs with multiple NICs to enable management (remote access) on a per NIC basis.</span></span> <span data-ttu-id="0c1b7-343">Kojarzenie unikatowych sieciowych grup zabezpieczeń z poszczególnymi kartami sieciowymi umożliwia rozdzielenie typów ruchu między kartami sieciowymi.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-343">Associating unique NSGs to each NIC enables separation of traffic types across NICs.</span></span>
* <span data-ttu-id="0c1b7-344">Podobnie jak w przypadku modułów równoważenia obciążenia podczas filtrowania ruchu z innych sieci wirtualnych należy użyć zakresu adresów źródłowych komputera zdalnego, a nie bramy łączącej sieci wirtualne.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-344">Similar to the use of load balancers, when filtering traffic from other VNets, you must use the source address range of the remote computer, not the gateway connecting the VNets.</span></span>
* <span data-ttu-id="0c1b7-345">Wielu usług platformy Azure nie można łączyć z sieciami wirtualnymi.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-345">Many Azure services cannot be connected to VNets.</span></span> <span data-ttu-id="0c1b7-346">Jeśli zasób platformy Azure nie jest podłączony do sieci wirtualnej, nie można użyć sieciowej grupy zabezpieczeń do filtrowania ruchu do tego zasobu.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-346">If an Azure resource is not connected to a VNet, you cannot use an NSG to filter traffic to the resource.</span></span>  <span data-ttu-id="0c1b7-347">Przeczytaj dokumentację dotyczącą usług, których używasz, aby ustalić, czy można je podłączyć do sieci wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-347">Read the documentation for the services you use to determine whether the service can be connected to a VNet.</span></span>

## <a name="sample-deployment"></a><span data-ttu-id="0c1b7-348">Przykładowe wdrożenie</span><span class="sxs-lookup"><span data-stu-id="0c1b7-348">Sample deployment</span></span>
<span data-ttu-id="0c1b7-349">Aby zilustrować zastosowanie informacji znajdujących się w tym artykule, należy rozważyć typowy scenariusz dwuwarstwowej aplikacji pokazanej na poniższej ilustracji:</span><span class="sxs-lookup"><span data-stu-id="0c1b7-349">To illustrate the application of the information in this article, consider a common scenario of a two tier application shown in the following picture:</span></span>

![Sieciowe grupy zabezpieczeń](./media/virtual-network-nsg-overview/figure1.png)

<span data-ttu-id="0c1b7-351">Na diagramie maszyny wirtualne *Web1* i *Web2* są połączone z podsiecią *FrontEnd*, a maszyny wirtualne *DB1* i *DB2* są połączone z podsiecią *BackEnd*.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-351">As shown in the diagram, the *Web1* and *Web2* VMs are connected to the *FrontEnd* subnet, and the *DB1* and *DB2* VMs are connected to the *BackEnd* subnet.</span></span>  <span data-ttu-id="0c1b7-352">Obie podsieci są częścią sieci wirtualnej *TestVNet*.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-352">Both subnets are part of the *TestVNet* VNet.</span></span> <span data-ttu-id="0c1b7-353">Poszczególne składniki aplikacji działają w obrębie maszyny wirtualnej platformy Azure podłączonej do sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-353">The application components each run within an Azure VM connected to a VNet.</span></span> <span data-ttu-id="0c1b7-354">Ten scenariusz ma następujące wymagania:</span><span class="sxs-lookup"><span data-stu-id="0c1b7-354">The scenario has the following requirements:</span></span>

1. <span data-ttu-id="0c1b7-355">Rozdzielenie ruchu między serwerami WEB i DB.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-355">Separation of traffic between the WEB and DB servers.</span></span>
2. <span data-ttu-id="0c1b7-356">Reguły równoważenia obciążenia powodują przesyłanie ruchu z modułu równoważenia obciążenia do wszystkich serwerów sieci Web na porcie 80.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-356">Load balancing rules forward traffic from the load balancer to all web servers on port 80.</span></span>
3. <span data-ttu-id="0c1b7-357">Reguły NAT modułu równoważenia obciążenia powodują przesyłanie ruchu przeznaczonego dla modułu równoważenia obciążenia na porcie 50001 do portu 3389 na maszynie wirtualnej WEB1.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-357">Load balancer NAT rules forward traffic coming into the load balancer on port 50001 to port 3389 on the WEB1 VM.</span></span>
4. <span data-ttu-id="0c1b7-358">Brak dostępu do maszyn wirtualnych frontonu lub zaplecza z Internetu, z wyjątkiem wymagań numer 2 i 3.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-358">No access to the front-end or back-end VMs from the Internet, except requirements 2 and 3.</span></span>
5. <span data-ttu-id="0c1b7-359">Brak wychodzącego dostępu do Internetu z serwerów WEB i DB.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-359">No outbound Internet access from the WEB or DB servers.</span></span>
6. <span data-ttu-id="0c1b7-360">Dostęp z podsieci FrontEnd jest dozwolony do portu 3389 dowolnego serwera sieci Web.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-360">Access from the FrontEnd subnet is allowed to port 3389 of any web server.</span></span>
7. <span data-ttu-id="0c1b7-361">Dostęp z podsieci FrontEnd jest dozwolony do portu 3389 dowolnego serwera DB.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-361">Access from the FrontEnd subnet is allowed to port 3389 of any DB server.</span></span>
8. <span data-ttu-id="0c1b7-362">Dostęp z podsieci FrontEnd jest dozwolony do portu 1433 wszystkich serwerów DB.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-362">Access from the FrontEnd subnet is allowed to port 1433 of all DB servers.</span></span>
9. <span data-ttu-id="0c1b7-363">Rozdzielenie ruchu administracyjnego (port 3389) i ruchu bazy danych (1433) na różne karty sieciowe na serwerach DB.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-363">Separation of management traffic (port 3389) and database traffic (1433) on different NICs in DB servers.</span></span>

<span data-ttu-id="0c1b7-364">Wymagania od 1 do 6 (z wyjątkiem wymagań 3 i 4) są ograniczone do przestrzeni podsieci.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-364">Requirements 1-6 (except requirements 3 and 4) are all confined to subnet spaces.</span></span> <span data-ttu-id="0c1b7-365">Następujące sieciowe grupy zabezpieczeń spełniają poprzednie wymagania, minimalizując jednocześnie liczbę wymaganych sieciowych grup zabezpieczeń:</span><span class="sxs-lookup"><span data-stu-id="0c1b7-365">The following NSGs meet the previous requirements, while minimizing the number of NSGs required:</span></span>

### <a name="frontend"></a><span data-ttu-id="0c1b7-366">FrontEnd</span><span class="sxs-lookup"><span data-stu-id="0c1b7-366">FrontEnd</span></span>
<span data-ttu-id="0c1b7-367">**Reguły ruchu przychodzącego**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-367">**Inbound rules**</span></span>

| <span data-ttu-id="0c1b7-368">Reguła</span><span class="sxs-lookup"><span data-stu-id="0c1b7-368">Rule</span></span> | <span data-ttu-id="0c1b7-369">Dostęp</span><span class="sxs-lookup"><span data-stu-id="0c1b7-369">Access</span></span> | <span data-ttu-id="0c1b7-370">Priorytet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-370">Priority</span></span> | <span data-ttu-id="0c1b7-371">Zakres adresów źródłowych</span><span class="sxs-lookup"><span data-stu-id="0c1b7-371">Source address range</span></span> | <span data-ttu-id="0c1b7-372">Port źródłowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-372">Source port</span></span> | <span data-ttu-id="0c1b7-373">Zakres adresów docelowych</span><span class="sxs-lookup"><span data-stu-id="0c1b7-373">Destination address range</span></span> | <span data-ttu-id="0c1b7-374">Port docelowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-374">Destination port</span></span> | <span data-ttu-id="0c1b7-375">Protokół</span><span class="sxs-lookup"><span data-stu-id="0c1b7-375">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="0c1b7-376">Allow-Inbound-HTTP-Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-376">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="0c1b7-377">Zezwalaj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-377">Allow</span></span> | <span data-ttu-id="0c1b7-378">100</span><span class="sxs-lookup"><span data-stu-id="0c1b7-378">100</span></span> | <span data-ttu-id="0c1b7-379">Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-379">Internet</span></span> | * | * | <span data-ttu-id="0c1b7-380">80</span><span class="sxs-lookup"><span data-stu-id="0c1b7-380">80</span></span> | <span data-ttu-id="0c1b7-381">TCP</span><span class="sxs-lookup"><span data-stu-id="0c1b7-381">TCP</span></span> |
| <span data-ttu-id="0c1b7-382">Allow-Inbound-RDP-Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-382">Allow-Inbound-RDP-Internet</span></span> | <span data-ttu-id="0c1b7-383">Zezwalaj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-383">Allow</span></span> | <span data-ttu-id="0c1b7-384">200</span><span class="sxs-lookup"><span data-stu-id="0c1b7-384">200</span></span> | <span data-ttu-id="0c1b7-385">Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-385">Internet</span></span> | * | * | <span data-ttu-id="0c1b7-386">3389</span><span class="sxs-lookup"><span data-stu-id="0c1b7-386">3389</span></span> | <span data-ttu-id="0c1b7-387">TCP</span><span class="sxs-lookup"><span data-stu-id="0c1b7-387">TCP</span></span> |
| <span data-ttu-id="0c1b7-388">Deny-Inbound-All</span><span class="sxs-lookup"><span data-stu-id="0c1b7-388">Deny-Inbound-All</span></span> | <span data-ttu-id="0c1b7-389">Zablokuj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-389">Deny</span></span> | <span data-ttu-id="0c1b7-390">300</span><span class="sxs-lookup"><span data-stu-id="0c1b7-390">300</span></span> | <span data-ttu-id="0c1b7-391">Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-391">Internet</span></span> | * | * | * | <span data-ttu-id="0c1b7-392">TCP</span><span class="sxs-lookup"><span data-stu-id="0c1b7-392">TCP</span></span> |

<span data-ttu-id="0c1b7-393">**Reguły ruchu wychodzącego**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-393">**Outbound rules**</span></span>

| <span data-ttu-id="0c1b7-394">Reguła</span><span class="sxs-lookup"><span data-stu-id="0c1b7-394">Rule</span></span> | <span data-ttu-id="0c1b7-395">Dostęp</span><span class="sxs-lookup"><span data-stu-id="0c1b7-395">Access</span></span> | <span data-ttu-id="0c1b7-396">Priorytet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-396">Priority</span></span> | <span data-ttu-id="0c1b7-397">Zakres adresów źródłowych</span><span class="sxs-lookup"><span data-stu-id="0c1b7-397">Source address range</span></span> | <span data-ttu-id="0c1b7-398">Port źródłowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-398">Source port</span></span> | <span data-ttu-id="0c1b7-399">Zakres adresów docelowych</span><span class="sxs-lookup"><span data-stu-id="0c1b7-399">Destination address range</span></span> | <span data-ttu-id="0c1b7-400">Port docelowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-400">Destination port</span></span> | <span data-ttu-id="0c1b7-401">Protokół</span><span class="sxs-lookup"><span data-stu-id="0c1b7-401">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="0c1b7-402">Deny-Internet-All</span><span class="sxs-lookup"><span data-stu-id="0c1b7-402">Deny-Internet-All</span></span> |<span data-ttu-id="0c1b7-403">Zablokuj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-403">Deny</span></span> |<span data-ttu-id="0c1b7-404">100</span><span class="sxs-lookup"><span data-stu-id="0c1b7-404">100</span></span> | * | * | <span data-ttu-id="0c1b7-405">Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-405">Internet</span></span> | * | * |

### <a name="backend"></a><span data-ttu-id="0c1b7-406">BackEnd</span><span class="sxs-lookup"><span data-stu-id="0c1b7-406">BackEnd</span></span>
<span data-ttu-id="0c1b7-407">**Reguły ruchu przychodzącego**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-407">**Inbound rules**</span></span>

| <span data-ttu-id="0c1b7-408">Reguła</span><span class="sxs-lookup"><span data-stu-id="0c1b7-408">Rule</span></span> | <span data-ttu-id="0c1b7-409">Dostęp</span><span class="sxs-lookup"><span data-stu-id="0c1b7-409">Access</span></span> | <span data-ttu-id="0c1b7-410">Priorytet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-410">Priority</span></span> | <span data-ttu-id="0c1b7-411">Zakres adresów źródłowych</span><span class="sxs-lookup"><span data-stu-id="0c1b7-411">Source address range</span></span> | <span data-ttu-id="0c1b7-412">Port źródłowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-412">Source port</span></span> | <span data-ttu-id="0c1b7-413">Zakres adresów docelowych</span><span class="sxs-lookup"><span data-stu-id="0c1b7-413">Destination address range</span></span> | <span data-ttu-id="0c1b7-414">Port docelowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-414">Destination port</span></span> | <span data-ttu-id="0c1b7-415">Protokół</span><span class="sxs-lookup"><span data-stu-id="0c1b7-415">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="0c1b7-416">Deny-Internet-All</span><span class="sxs-lookup"><span data-stu-id="0c1b7-416">Deny-Internet-All</span></span> | <span data-ttu-id="0c1b7-417">Zablokuj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-417">Deny</span></span> | <span data-ttu-id="0c1b7-418">100</span><span class="sxs-lookup"><span data-stu-id="0c1b7-418">100</span></span> | <span data-ttu-id="0c1b7-419">Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-419">Internet</span></span> | * | * | * | * |

<span data-ttu-id="0c1b7-420">**Reguły ruchu wychodzącego**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-420">**Outbound rules**</span></span>

| <span data-ttu-id="0c1b7-421">Reguła</span><span class="sxs-lookup"><span data-stu-id="0c1b7-421">Rule</span></span> | <span data-ttu-id="0c1b7-422">Dostęp</span><span class="sxs-lookup"><span data-stu-id="0c1b7-422">Access</span></span> | <span data-ttu-id="0c1b7-423">Priorytet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-423">Priority</span></span> | <span data-ttu-id="0c1b7-424">Zakres adresów źródłowych</span><span class="sxs-lookup"><span data-stu-id="0c1b7-424">Source address range</span></span> | <span data-ttu-id="0c1b7-425">Port źródłowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-425">Source port</span></span> | <span data-ttu-id="0c1b7-426">Zakres adresów docelowych</span><span class="sxs-lookup"><span data-stu-id="0c1b7-426">Destination address range</span></span> | <span data-ttu-id="0c1b7-427">Port docelowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-427">Destination port</span></span> | <span data-ttu-id="0c1b7-428">Protokół</span><span class="sxs-lookup"><span data-stu-id="0c1b7-428">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="0c1b7-429">Deny-Internet-All</span><span class="sxs-lookup"><span data-stu-id="0c1b7-429">Deny-Internet-All</span></span> | <span data-ttu-id="0c1b7-430">Zablokuj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-430">Deny</span></span> | <span data-ttu-id="0c1b7-431">100</span><span class="sxs-lookup"><span data-stu-id="0c1b7-431">100</span></span> | * | * | <span data-ttu-id="0c1b7-432">Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-432">Internet</span></span> | * | * |

<span data-ttu-id="0c1b7-433">Następujące sieciowe grupy zabezpieczeń są tworzone i wiązane z kartami sieciowymi w tych maszynach wirtualnych:</span><span class="sxs-lookup"><span data-stu-id="0c1b7-433">The following NSGs are created and associated to NICs in the following VMs:</span></span>

### <a name="web1"></a><span data-ttu-id="0c1b7-434">WEB1</span><span class="sxs-lookup"><span data-stu-id="0c1b7-434">WEB1</span></span>
<span data-ttu-id="0c1b7-435">**Reguły ruchu przychodzącego**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-435">**Inbound rules**</span></span>

| <span data-ttu-id="0c1b7-436">Reguła</span><span class="sxs-lookup"><span data-stu-id="0c1b7-436">Rule</span></span> | <span data-ttu-id="0c1b7-437">Dostęp</span><span class="sxs-lookup"><span data-stu-id="0c1b7-437">Access</span></span> | <span data-ttu-id="0c1b7-438">Priorytet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-438">Priority</span></span> | <span data-ttu-id="0c1b7-439">Zakres adresów źródłowych</span><span class="sxs-lookup"><span data-stu-id="0c1b7-439">Source address range</span></span> | <span data-ttu-id="0c1b7-440">Port źródłowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-440">Source port</span></span> | <span data-ttu-id="0c1b7-441">Zakres adresów docelowych</span><span class="sxs-lookup"><span data-stu-id="0c1b7-441">Destination address range</span></span> | <span data-ttu-id="0c1b7-442">Port docelowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-442">Destination port</span></span> | <span data-ttu-id="0c1b7-443">Protokół</span><span class="sxs-lookup"><span data-stu-id="0c1b7-443">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="0c1b7-444">Allow-Inbound-RDP-Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-444">Allow-Inbound-RDP-Internet</span></span> | <span data-ttu-id="0c1b7-445">Zezwalaj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-445">Allow</span></span> | <span data-ttu-id="0c1b7-446">100</span><span class="sxs-lookup"><span data-stu-id="0c1b7-446">100</span></span> | <span data-ttu-id="0c1b7-447">Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-447">Internet</span></span> | * | * | <span data-ttu-id="0c1b7-448">3389</span><span class="sxs-lookup"><span data-stu-id="0c1b7-448">3389</span></span> | <span data-ttu-id="0c1b7-449">TCP</span><span class="sxs-lookup"><span data-stu-id="0c1b7-449">TCP</span></span> |
| <span data-ttu-id="0c1b7-450">Allow-Inbound-HTTP-Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-450">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="0c1b7-451">Zezwalaj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-451">Allow</span></span> | <span data-ttu-id="0c1b7-452">200</span><span class="sxs-lookup"><span data-stu-id="0c1b7-452">200</span></span> | <span data-ttu-id="0c1b7-453">Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-453">Internet</span></span> | * | * | <span data-ttu-id="0c1b7-454">80</span><span class="sxs-lookup"><span data-stu-id="0c1b7-454">80</span></span> | <span data-ttu-id="0c1b7-455">TCP</span><span class="sxs-lookup"><span data-stu-id="0c1b7-455">TCP</span></span> |

> [!NOTE]
> <span data-ttu-id="0c1b7-456">Zakresem adresów źródłowych dla poprzednich reguł jest **Internet**, a nie wirtualny adres IP modułu równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-456">The source address range for the previous rules is **Internet**, not the virtual IP address of for the load balancer.</span></span> <span data-ttu-id="0c1b7-457">Port źródłowy ma wartość *, a nie 500001.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-457">The source port is *, not 500001.</span></span> <span data-ttu-id="0c1b7-458">Reguły NAT dla modułu równoważenia obciążenia nie są takie same jak reguły zabezpieczeń sieciowej grupy zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-458">NAT rules for load balancers are not the same as NSG security rules.</span></span> <span data-ttu-id="0c1b7-459">Reguły zabezpieczeń sieciowej grupy zabezpieczeń są zawsze powiązane z oryginalnym źródłem i ostatecznym miejscem przeznaczenia ruchu, a **nie** z modułem równoważenia obciążenia między nimi.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-459">NSG security rules are always related to the original source and final destination of traffic, **not** the load balancer between the two.</span></span> 
> 
> 

### <a name="web2"></a><span data-ttu-id="0c1b7-460">WEB2</span><span class="sxs-lookup"><span data-stu-id="0c1b7-460">WEB2</span></span>
<span data-ttu-id="0c1b7-461">**Reguły ruchu przychodzącego**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-461">**Inbound rules**</span></span>

| <span data-ttu-id="0c1b7-462">Reguła</span><span class="sxs-lookup"><span data-stu-id="0c1b7-462">Rule</span></span> | <span data-ttu-id="0c1b7-463">Dostęp</span><span class="sxs-lookup"><span data-stu-id="0c1b7-463">Access</span></span> | <span data-ttu-id="0c1b7-464">Priorytet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-464">Priority</span></span> | <span data-ttu-id="0c1b7-465">Zakres adresów źródłowych</span><span class="sxs-lookup"><span data-stu-id="0c1b7-465">Source address range</span></span> | <span data-ttu-id="0c1b7-466">Port źródłowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-466">Source port</span></span> | <span data-ttu-id="0c1b7-467">Zakres adresów docelowych</span><span class="sxs-lookup"><span data-stu-id="0c1b7-467">Destination address range</span></span> | <span data-ttu-id="0c1b7-468">Port docelowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-468">Destination port</span></span> | <span data-ttu-id="0c1b7-469">Protokół</span><span class="sxs-lookup"><span data-stu-id="0c1b7-469">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="0c1b7-470">Deny-Inbound-RDP-Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-470">Deny-Inbound-RDP-Internet</span></span> | <span data-ttu-id="0c1b7-471">Zablokuj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-471">Deny</span></span> | <span data-ttu-id="0c1b7-472">100</span><span class="sxs-lookup"><span data-stu-id="0c1b7-472">100</span></span> | <span data-ttu-id="0c1b7-473">Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-473">Internet</span></span> | * | * | <span data-ttu-id="0c1b7-474">3389</span><span class="sxs-lookup"><span data-stu-id="0c1b7-474">3389</span></span> | <span data-ttu-id="0c1b7-475">TCP</span><span class="sxs-lookup"><span data-stu-id="0c1b7-475">TCP</span></span> |
| <span data-ttu-id="0c1b7-476">Allow-Inbound-HTTP-Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-476">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="0c1b7-477">Zezwalaj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-477">Allow</span></span> | <span data-ttu-id="0c1b7-478">200</span><span class="sxs-lookup"><span data-stu-id="0c1b7-478">200</span></span> | <span data-ttu-id="0c1b7-479">Internet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-479">Internet</span></span> | * | * | <span data-ttu-id="0c1b7-480">80</span><span class="sxs-lookup"><span data-stu-id="0c1b7-480">80</span></span> | <span data-ttu-id="0c1b7-481">TCP</span><span class="sxs-lookup"><span data-stu-id="0c1b7-481">TCP</span></span> |

### <a name="db-servers-management-nic"></a><span data-ttu-id="0c1b7-482">Serwery DB (karta sieciowa zarządzania)</span><span class="sxs-lookup"><span data-stu-id="0c1b7-482">DB servers (Management NIC)</span></span>
<span data-ttu-id="0c1b7-483">**Reguły ruchu przychodzącego**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-483">**Inbound rules**</span></span>

| <span data-ttu-id="0c1b7-484">Reguła</span><span class="sxs-lookup"><span data-stu-id="0c1b7-484">Rule</span></span> | <span data-ttu-id="0c1b7-485">Dostęp</span><span class="sxs-lookup"><span data-stu-id="0c1b7-485">Access</span></span> | <span data-ttu-id="0c1b7-486">Priorytet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-486">Priority</span></span> | <span data-ttu-id="0c1b7-487">Zakres adresów źródłowych</span><span class="sxs-lookup"><span data-stu-id="0c1b7-487">Source address range</span></span> | <span data-ttu-id="0c1b7-488">Port źródłowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-488">Source port</span></span> | <span data-ttu-id="0c1b7-489">Zakres adresów docelowych</span><span class="sxs-lookup"><span data-stu-id="0c1b7-489">Destination address range</span></span> | <span data-ttu-id="0c1b7-490">Port docelowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-490">Destination port</span></span> | <span data-ttu-id="0c1b7-491">Protokół</span><span class="sxs-lookup"><span data-stu-id="0c1b7-491">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="0c1b7-492">Allow-Inbound-RDP-Front-end</span><span class="sxs-lookup"><span data-stu-id="0c1b7-492">Allow-Inbound-RDP-Front-end</span></span> | <span data-ttu-id="0c1b7-493">Zezwalaj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-493">Allow</span></span> | <span data-ttu-id="0c1b7-494">100</span><span class="sxs-lookup"><span data-stu-id="0c1b7-494">100</span></span> | <span data-ttu-id="0c1b7-495">192.168.1.0/24</span><span class="sxs-lookup"><span data-stu-id="0c1b7-495">192.168.1.0/24</span></span> | * | * | <span data-ttu-id="0c1b7-496">3389</span><span class="sxs-lookup"><span data-stu-id="0c1b7-496">3389</span></span> | <span data-ttu-id="0c1b7-497">TCP</span><span class="sxs-lookup"><span data-stu-id="0c1b7-497">TCP</span></span> |

### <a name="db-servers-database-traffic-nic"></a><span data-ttu-id="0c1b7-498">Serwery DB (karta sieciowa ruchu bazy danych)</span><span class="sxs-lookup"><span data-stu-id="0c1b7-498">DB servers (Database traffic NIC)</span></span>
<span data-ttu-id="0c1b7-499">**Reguły ruchu przychodzącego**</span><span class="sxs-lookup"><span data-stu-id="0c1b7-499">**Inbound rules**</span></span>

| <span data-ttu-id="0c1b7-500">Reguła</span><span class="sxs-lookup"><span data-stu-id="0c1b7-500">Rule</span></span> | <span data-ttu-id="0c1b7-501">Dostęp</span><span class="sxs-lookup"><span data-stu-id="0c1b7-501">Access</span></span> | <span data-ttu-id="0c1b7-502">Priorytet</span><span class="sxs-lookup"><span data-stu-id="0c1b7-502">Priority</span></span> | <span data-ttu-id="0c1b7-503">Zakres adresów źródłowych</span><span class="sxs-lookup"><span data-stu-id="0c1b7-503">Source address range</span></span> | <span data-ttu-id="0c1b7-504">Port źródłowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-504">Source port</span></span> | <span data-ttu-id="0c1b7-505">Zakres adresów docelowych</span><span class="sxs-lookup"><span data-stu-id="0c1b7-505">Destination address range</span></span> | <span data-ttu-id="0c1b7-506">Port docelowy</span><span class="sxs-lookup"><span data-stu-id="0c1b7-506">Destination port</span></span> | <span data-ttu-id="0c1b7-507">Protokół</span><span class="sxs-lookup"><span data-stu-id="0c1b7-507">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="0c1b7-508">Allow-Inbound-SQL-Front-end</span><span class="sxs-lookup"><span data-stu-id="0c1b7-508">Allow-Inbound-SQL-Front-end</span></span> | <span data-ttu-id="0c1b7-509">Zezwalaj</span><span class="sxs-lookup"><span data-stu-id="0c1b7-509">Allow</span></span> | <span data-ttu-id="0c1b7-510">100</span><span class="sxs-lookup"><span data-stu-id="0c1b7-510">100</span></span> | <span data-ttu-id="0c1b7-511">192.168.1.0/24</span><span class="sxs-lookup"><span data-stu-id="0c1b7-511">192.168.1.0/24</span></span> | * | * | <span data-ttu-id="0c1b7-512">1433</span><span class="sxs-lookup"><span data-stu-id="0c1b7-512">1433</span></span> | <span data-ttu-id="0c1b7-513">TCP</span><span class="sxs-lookup"><span data-stu-id="0c1b7-513">TCP</span></span> |

<span data-ttu-id="0c1b7-514">Ponieważ niektóre sieciowe grupy zabezpieczeń są skojarzone z poszczególnymi kartami sieciowymi, reguły mają zastosowanie do zasobów wdrożonych za pomocą usługi Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-514">Since some of the NSGs are associated to individual NICs, the rules are for resources deployed through Resource Manager.</span></span> <span data-ttu-id="0c1b7-515">Reguły są łączone dla podsieci i karty sieciowej w zależności od sposobu ich kojarzenia.</span><span class="sxs-lookup"><span data-stu-id="0c1b7-515">Rules are combined for subnet and NIC, depending on how they are associated.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="0c1b7-516">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="0c1b7-516">Next steps</span></span>
* <span data-ttu-id="0c1b7-517">[Wdrażanie sieciowych grup zabezpieczeń (model usługi Resource Manager)](virtual-networks-create-nsg-arm-pportal.md).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-517">[Deploy NSGs (Resource Manager)](virtual-networks-create-nsg-arm-pportal.md).</span></span>
* <span data-ttu-id="0c1b7-518">[Wdrażanie sieciowych grup zabezpieczeń (model klasyczny)](virtual-networks-create-nsg-classic-ps.md).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-518">[Deploy NSGs (classic)](virtual-networks-create-nsg-classic-ps.md).</span></span>
* <span data-ttu-id="0c1b7-519">[Manage NSG logs](virtual-network-nsg-manage-log.md) (Zarządzanie dziennikami sieciowej grupy zabezpieczeń).</span><span class="sxs-lookup"><span data-stu-id="0c1b7-519">[Manage NSG logs](virtual-network-nsg-manage-log.md).</span></span>
* <span data-ttu-id="0c1b7-520">[Rozwiązywanie problemów z sieciowymi grupami zabezpieczeń] (virtual-network-nsg-troubleshoot-portal.md)</span><span class="sxs-lookup"><span data-stu-id="0c1b7-520">[Troubleshoot NSGs] (virtual-network-nsg-troubleshoot-portal.md)</span></span>
