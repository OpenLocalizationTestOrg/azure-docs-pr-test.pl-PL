---
title: "Zbieranie dzienników niestandardowych w OMS Log Analytics | Dokumentacja firmy Microsoft"
description: "Analiza dzienników można zbierać zdarzenia z plików tekstowych na komputerach z systemami Windows i Linux.  W tym artykule opisano sposób definiowania nowy dziennik niestandardowy i szczegóły rekordów tworzonych w repozytorium OMS."
services: log-analytics
documentationcenter: 
author: bwren
manager: jwhit
editor: tysonn
ms.assetid: aca7f6bb-6f53-4fd4-a45c-93f12ead4ae1
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/15/2017
ms.author: bwren
ms.openlocfilehash: b7f28868e3ffdf95dbe39872f382e7c97eae692c
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/18/2017
---
# <a name="custom-logs-in-log-analytics"></a><span data-ttu-id="b0273-104">Niestandardowe dzienniki w analizy dzienników</span><span class="sxs-lookup"><span data-stu-id="b0273-104">Custom logs in Log Analytics</span></span>
<span data-ttu-id="b0273-105">Źródło danych niestandardowe dzienniki w analizy dzienników umożliwia zbieranie zdarzeń z plików tekstowych na komputerach z systemami Windows i Linux.</span><span class="sxs-lookup"><span data-stu-id="b0273-105">The Custom Logs data source in Log Analytics allows you to collect events from text files on both Windows and Linux computers.</span></span> <span data-ttu-id="b0273-106">Wiele aplikacji rejestrowania informacji w plikach tekstowych zamiast standardowych usług rejestrowania, takich jak dziennika zdarzeń systemu Windows lub Syslog.</span><span class="sxs-lookup"><span data-stu-id="b0273-106">Many applications log information to text files instead of standard logging services such as Windows Event log or Syslog.</span></span>  <span data-ttu-id="b0273-107">Po zebraniu danych, można przeanalizować każdego rekordu w dzienniku w poszczególnych polach przy użyciu [pola niestandardowe](log-analytics-custom-fields.md) funkcji analizy dzienników.</span><span class="sxs-lookup"><span data-stu-id="b0273-107">Once collected, you can parse each record in the log in to individual fields using the [Custom Fields](log-analytics-custom-fields.md) feature of Log Analytics.</span></span>

![Zbieranie dzienników niestandardowych](media/log-analytics-data-sources-custom-logs/overview.png)

<span data-ttu-id="b0273-109">Pliki dziennika mają być zbierane musi odpowiadać następujących kryteriów.</span><span class="sxs-lookup"><span data-stu-id="b0273-109">The log files to be collected must match the following criteria.</span></span>

- <span data-ttu-id="b0273-110">Dziennik musi mieć pojedynczy wpis wierszu albo użyj sygnatury czasowej dopasowania jedną z następujących formatów na początku każdego wpisu.</span><span class="sxs-lookup"><span data-stu-id="b0273-110">The log must either have a single entry per line or use a timestamp matching one of the following formats at the start of each entry.</span></span>

    <span data-ttu-id="b0273-111">HH: MM: RRRR MM-DD</span><span class="sxs-lookup"><span data-stu-id="b0273-111">YYYY-MM-DD HH:MM:SS</span></span><br><span data-ttu-id="b0273-112">M/D/RRRR GG: MM: SS AM/PM</span><span class="sxs-lookup"><span data-stu-id="b0273-112">M/D/YYYY HH:MM:SS AM/PM</span></span> <br><span data-ttu-id="b0273-113">MON DD, YYYY HH: mm:</span><span class="sxs-lookup"><span data-stu-id="b0273-113">Mon DD,YYYY HH:MM:SS</span></span>

- <span data-ttu-id="b0273-114">Plik dziennika nie może zezwalać na aktualizacje cykliczne gdy plik jest zastępowany nowe wpisy.</span><span class="sxs-lookup"><span data-stu-id="b0273-114">The log file must not allow circular updates where the file is overwritten with new entries.</span></span>
- <span data-ttu-id="b0273-115">Plik dziennika, należy użyć kodowanie ASCII lub UTF-8.</span><span class="sxs-lookup"><span data-stu-id="b0273-115">The log file must use ASCII or UTF-8 encoding.</span></span>  <span data-ttu-id="b0273-116">Innych formatach, takich jak UTF-16 nie są obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="b0273-116">Other formats such as UTF-16 are not supported.</span></span>

>[!NOTE]
><span data-ttu-id="b0273-117">Jeśli istnieją zduplikowane wpisy w pliku dziennika, analizy dzienników zapisze je.</span><span class="sxs-lookup"><span data-stu-id="b0273-117">If there are duplicate entries in the log file, Log Analytics will collect them.</span></span>  <span data-ttu-id="b0273-118">Jednak wyniki wyszukiwania będą niespójne gdzie wyników filtrowania Pokaż więcej zdarzeń niż liczba wyników.</span><span class="sxs-lookup"><span data-stu-id="b0273-118">However, the search results will be inconsistent where the filter results show more events than the result count.</span></span>  <span data-ttu-id="b0273-119">Będzie on potrzebny, sprawdzanie poprawności dziennik, aby określić, jeśli aplikacja, która tworzy jego przyczyną jest to zachowanie i rozwiąż go w miarę możliwości przed utworzeniem definicji kolekcji dziennik niestandardowy.</span><span class="sxs-lookup"><span data-stu-id="b0273-119">It will be important that you validate the log to determine if the application that creates it is causing this behavior and address it if possible before creating the custom log collection definition.</span></span>  
>
  
## <a name="defining-a-custom-log"></a><span data-ttu-id="b0273-120">Definiowanie niestandardowego dziennika</span><span class="sxs-lookup"><span data-stu-id="b0273-120">Defining a custom log</span></span>
<span data-ttu-id="b0273-121">Poniższa procedura umożliwia zdefiniowanie niestandardowego pliku dziennika.</span><span class="sxs-lookup"><span data-stu-id="b0273-121">Use the following procedure to define a custom log file.</span></span>  <span data-ttu-id="b0273-122">Przewiń do końca w tym artykule przewodnik próby dodania dziennik niestandardowy.</span><span class="sxs-lookup"><span data-stu-id="b0273-122">Scroll to the end of this article for a walkthrough of a sample of adding a custom log.</span></span>

### <a name="step-1-open-the-custom-log-wizard"></a><span data-ttu-id="b0273-123">Krok 1.</span><span class="sxs-lookup"><span data-stu-id="b0273-123">Step 1.</span></span> <span data-ttu-id="b0273-124">Otwórz kreatora dziennik niestandardowy</span><span class="sxs-lookup"><span data-stu-id="b0273-124">Open the Custom Log Wizard</span></span>
<span data-ttu-id="b0273-125">Kreator niestandardowy dziennika jest uruchamiana w portalu OMS i można zdefiniować nowego dziennika niestandardowego do zbierania.</span><span class="sxs-lookup"><span data-stu-id="b0273-125">The Custom Log Wizard runs in the OMS portal and allows you to define a new custom log to collect.</span></span>

1. <span data-ttu-id="b0273-126">W portalu OMS, przejdź do **ustawienia**.</span><span class="sxs-lookup"><span data-stu-id="b0273-126">In the OMS portal, go to **Settings**.</span></span>
2. <span data-ttu-id="b0273-127">Polecenie **danych** , a następnie **niestandardowe dzienniki**.</span><span class="sxs-lookup"><span data-stu-id="b0273-127">Click on **Data** and then **Custom logs**.</span></span>
3. <span data-ttu-id="b0273-128">Domyślnie wszystkie zmiany konfiguracji są automatycznie przypisany do wszystkich agentów.</span><span class="sxs-lookup"><span data-stu-id="b0273-128">By default, all configuration changes are automatically pushed to all agents.</span></span>  <span data-ttu-id="b0273-129">Dla agentów systemów Linux plik konfiguracji jest wysyłany do Fluentd modułów zbierających dane.</span><span class="sxs-lookup"><span data-stu-id="b0273-129">For Linux agents, a configuration file is sent to the Fluentd data collector.</span></span>  <span data-ttu-id="b0273-130">Jeśli chcesz zmodyfikować ten plik ręcznie na każdym agenta systemu Linux, usuń zaznaczenie pola *Zastosuj poniższą konfigurację na moich maszynach z systemem Linux*.</span><span class="sxs-lookup"><span data-stu-id="b0273-130">If you wish to modify this file manually on each Linux agent, then uncheck the box *Apply below configuration to my Linux machines*.</span></span>
4. <span data-ttu-id="b0273-131">Kliknij przycisk **Dodaj +** aby otworzyć Kreatora dziennika niestandardowego.</span><span class="sxs-lookup"><span data-stu-id="b0273-131">Click **Add+** to open the Custom Log Wizard.</span></span>

### <a name="step-2-upload-and-parse-a-sample-log"></a><span data-ttu-id="b0273-132">Krok 2.</span><span class="sxs-lookup"><span data-stu-id="b0273-132">Step 2.</span></span> <span data-ttu-id="b0273-133">Przekazywanie i przeanalizować przykładowy dziennik</span><span class="sxs-lookup"><span data-stu-id="b0273-133">Upload and parse a sample log</span></span>
<span data-ttu-id="b0273-134">Możesz uruchomić przekazywanie próbce dziennika niestandardowego.</span><span class="sxs-lookup"><span data-stu-id="b0273-134">You start by uploading a sample of the custom log.</span></span>  <span data-ttu-id="b0273-135">Kreator przeanalizować i wyświetlane wpisy w tym pliku można sprawdzić poprawności.</span><span class="sxs-lookup"><span data-stu-id="b0273-135">The wizard will parse and display the entries in this file for you to validate.</span></span>  <span data-ttu-id="b0273-136">Analiza dzienników użyje ogranicznik, który określisz do identyfikowania każdego rekordu.</span><span class="sxs-lookup"><span data-stu-id="b0273-136">Log Analytics will use the delimiter that you specify to identify each record.</span></span>

<span data-ttu-id="b0273-137">**Nowy wiersz** jest domyślnym ogranicznikiem i używany dla plików dziennika, które mają pojedynczy wpis wierszu.</span><span class="sxs-lookup"><span data-stu-id="b0273-137">**New Line** is the default delimiter and is used for log files that have a single entry per line.</span></span>  <span data-ttu-id="b0273-138">Jeśli wiersz rozpoczyna się od daty i godziny w jednym z formatów dostępne, a następnie można określić **sygnatury czasowej** ogranicznik obsługującej wpisów, obejmujące więcej niż jeden wiersz.</span><span class="sxs-lookup"><span data-stu-id="b0273-138">If the line starts with a date and time in one of the available formats, then you can specify a **Timestamp** delimiter which supports entries that span more than one line.</span></span>

<span data-ttu-id="b0273-139">Jeśli jest używany ogranicznik sygnatury czasowej, właściwość TimeGenerated każdego rekordu przechowywane w OMS zostaną wypełnione z daty/godziny, określony dla tego wpisu w pliku dziennika.</span><span class="sxs-lookup"><span data-stu-id="b0273-139">If a timestamp delimiter is used, then the TimeGenerated property of each record stored in OMS will be populated with the date/time specified for that entry in the log file.</span></span>  <span data-ttu-id="b0273-140">Jeśli jest używany nowy ogranicznik wiersza, TimeGenerated jest wypełniane przy użyciu daty i godziny, aby analizy dzienników pobrane wpis.</span><span class="sxs-lookup"><span data-stu-id="b0273-140">If a new line delimiter is used, then TimeGenerated is populated with date and time that Log Analytics collected the entry.</span></span>

> [!NOTE]
> <span data-ttu-id="b0273-141">Analiza dzienników traktuje obecnie zbierane z dziennika przy użyciu ogranicznik znacznik czasu jako czas UTC daty/godziny.</span><span class="sxs-lookup"><span data-stu-id="b0273-141">Log Analytics currently treats the date/time collected from a log using a timestamp delimiter as UTC.</span></span>  <span data-ttu-id="b0273-142">To wkrótce zostanie zmieniona do używania strefę czasową na agencie.</span><span class="sxs-lookup"><span data-stu-id="b0273-142">This will soon be changed to use the time zone on the agent.</span></span>
>
>

1. <span data-ttu-id="b0273-143">Kliknij przycisk **Przeglądaj** i przejdź do przykładowy plik.</span><span class="sxs-lookup"><span data-stu-id="b0273-143">Click **Browse** and browse to a sample file.</span></span>  <span data-ttu-id="b0273-144">Należy pamiętać, że może to przycisk może być oznaczony jako **wybierz plik** w niektórych przeglądarkach.</span><span class="sxs-lookup"><span data-stu-id="b0273-144">Note that this may button may be labeled **Choose File** in some browsers.</span></span>
2. <span data-ttu-id="b0273-145">Kliknij przycisk **Dalej**.</span><span class="sxs-lookup"><span data-stu-id="b0273-145">Click **Next**.</span></span>
3. <span data-ttu-id="b0273-146">Kreator dziennika niestandardowego przekazać plik i listę wszystkich rekordów, które identyfikuje go.</span><span class="sxs-lookup"><span data-stu-id="b0273-146">The Custom Log Wizard will upload the file and list the records that it identifies.</span></span>
4. <span data-ttu-id="b0273-147">Zmień ogranicznik, który służy do identyfikowania nowy rekord i wybierz ogranicznik najlepiej identyfikujący rekordy w pliku dziennika.</span><span class="sxs-lookup"><span data-stu-id="b0273-147">Change the delimiter that is used to identify a new record and select the delimiter that best identifies the records in your log file.</span></span>
5. <span data-ttu-id="b0273-148">Kliknij przycisk **Dalej**.</span><span class="sxs-lookup"><span data-stu-id="b0273-148">Click **Next**.</span></span>

### <a name="step-3-add-log-collection-paths"></a><span data-ttu-id="b0273-149">Krok 3.</span><span class="sxs-lookup"><span data-stu-id="b0273-149">Step 3.</span></span> <span data-ttu-id="b0273-150">Dodaj ścieżki zbierania dzienników</span><span class="sxs-lookup"><span data-stu-id="b0273-150">Add log collection paths</span></span>
<span data-ttu-id="b0273-151">Należy zdefiniować co najmniej jedną ścieżkę na agencie, gdzie można znaleźć dziennika niestandardowego.</span><span class="sxs-lookup"><span data-stu-id="b0273-151">You must define one or more paths on the agent where it can locate the custom log.</span></span>  <span data-ttu-id="b0273-152">Można podać albo określoną ścieżkę i nazwę pliku dziennika lub z symbolem wieloznacznym dla nazwy można określić ścieżkę.</span><span class="sxs-lookup"><span data-stu-id="b0273-152">You can either provide a specific path and name for the log file, or you can specify a path with a wildcard for the name.</span></span>  <span data-ttu-id="b0273-153">Obejmuje to obsługę aplikacji, które tworzą nowy plik, każdego dnia lub gdy jeden plik osiągnie określony rozmiar.</span><span class="sxs-lookup"><span data-stu-id="b0273-153">This supports applications that create a new file each day or when one file reaches a certain size.</span></span>  <span data-ttu-id="b0273-154">Można też podać wiele ścieżek dla jednego pliku dziennika.</span><span class="sxs-lookup"><span data-stu-id="b0273-154">You can also provide multiple paths for a single log file.</span></span>

<span data-ttu-id="b0273-155">Na przykład aplikacja może utworzyć pliku dziennika każdego dnia z datą uwzględniony w nazwie, jak log20100316.txt.</span><span class="sxs-lookup"><span data-stu-id="b0273-155">For example, an application might create a log file each day with the date included in the name as in log20100316.txt.</span></span> <span data-ttu-id="b0273-156">Szablon dla takich dziennika może być *dziennika\*.txt* która powinna zostać zastosowana do dowolnego pliku dziennika, po zastosowaniu do nazw schematu.</span><span class="sxs-lookup"><span data-stu-id="b0273-156">A pattern for such a log might be *log\*.txt* which would apply to any log file following the application’s naming scheme.</span></span>

<span data-ttu-id="b0273-157">Poniższa tabela zawiera przykłady prawidłowych do określenia różnych plikach dziennika.</span><span class="sxs-lookup"><span data-stu-id="b0273-157">The following table provides examples of valid patterns to specify different log files.</span></span>

| <span data-ttu-id="b0273-158">Opis</span><span class="sxs-lookup"><span data-stu-id="b0273-158">Description</span></span> | <span data-ttu-id="b0273-159">Ścieżka</span><span class="sxs-lookup"><span data-stu-id="b0273-159">Path</span></span> |
|:--- |:--- |
| <span data-ttu-id="b0273-160">Wszystkie pliki w *C:\Logs* z rozszerzeniem txt agenta systemu Windows</span><span class="sxs-lookup"><span data-stu-id="b0273-160">All files in *C:\Logs* with .txt extension on Windows agent</span></span> |<span data-ttu-id="b0273-161">C:\Logs\\\*txt</span><span class="sxs-lookup"><span data-stu-id="b0273-161">C:\Logs\\\*.txt</span></span> |
| <span data-ttu-id="b0273-162">Wszystkie pliki w *C:\Logs* o nazwie rozpoczynającej się od dziennika i rozszerzeniem txt agenta systemu Windows</span><span class="sxs-lookup"><span data-stu-id="b0273-162">All files in *C:\Logs* with a name starting with log and a .txt extension on Windows agent</span></span> |<span data-ttu-id="b0273-163">C:\Logs\log\*txt</span><span class="sxs-lookup"><span data-stu-id="b0273-163">C:\Logs\log\*.txt</span></span> |
| <span data-ttu-id="b0273-164">Wszystkie pliki w */var/log/audit* z rozszerzeniem txt na agenta systemu Linux</span><span class="sxs-lookup"><span data-stu-id="b0273-164">All files in */var/log/audit* with .txt extension on Linux agent</span></span> |<span data-ttu-id="b0273-165">/var/log/audit/*.txt</span><span class="sxs-lookup"><span data-stu-id="b0273-165">/var/log/audit/*.txt</span></span> |
| <span data-ttu-id="b0273-166">Wszystkie pliki w */var/log/audit* o nazwie rozpoczynającej się od dziennika i rozszerzeniem txt na agenta systemu Linux</span><span class="sxs-lookup"><span data-stu-id="b0273-166">All files in */var/log/audit* with a name starting with log and a .txt extension on Linux agent</span></span> |<span data-ttu-id="b0273-167">/var/log/audit/log\*txt</span><span class="sxs-lookup"><span data-stu-id="b0273-167">/var/log/audit/log\*.txt</span></span> |

1. <span data-ttu-id="b0273-168">Wybierz systemu Windows lub Linux, aby określić format ścieżki, które dodajesz.</span><span class="sxs-lookup"><span data-stu-id="b0273-168">Select Windows or Linux to specify which path format you are adding.</span></span>
2. <span data-ttu-id="b0273-169">Wpisz ścieżkę i kliknij przycisk  **+**  przycisku.</span><span class="sxs-lookup"><span data-stu-id="b0273-169">Type in the path and click the **+** button.</span></span>
3. <span data-ttu-id="b0273-170">Należy powtórzyć dla żadnych dodatkowych ścieżek.</span><span class="sxs-lookup"><span data-stu-id="b0273-170">Repeat the process for any additional paths.</span></span>

### <a name="step-4-provide-a-name-and-description-for-the-log"></a><span data-ttu-id="b0273-171">Krok 4.</span><span class="sxs-lookup"><span data-stu-id="b0273-171">Step 4.</span></span> <span data-ttu-id="b0273-172">Podaj nazwę i opis dziennika</span><span class="sxs-lookup"><span data-stu-id="b0273-172">Provide a name and description for the log</span></span>
<span data-ttu-id="b0273-173">Określona nazwa będzie służyć do typu dziennika, jak opisano powyżej.</span><span class="sxs-lookup"><span data-stu-id="b0273-173">The name that you specify will be used for the log type as described above.</span></span>  <span data-ttu-id="b0273-174">Zawsze zakończy się z _CL odróżniający go jako dziennik niestandardowy.</span><span class="sxs-lookup"><span data-stu-id="b0273-174">It will always end with _CL to distinguish it as a custom log.</span></span>

1. <span data-ttu-id="b0273-175">Wpisz nazwę dziennika.</span><span class="sxs-lookup"><span data-stu-id="b0273-175">Type in a name for the log.</span></span>  <span data-ttu-id="b0273-176"> **\_CL** sufiks jest teraz udostępniana automatycznie.</span><span class="sxs-lookup"><span data-stu-id="b0273-176">The **\_CL** suffix is automatically provided.</span></span>
2. <span data-ttu-id="b0273-177">Dodaj opcjonalny **opis**.</span><span class="sxs-lookup"><span data-stu-id="b0273-177">Add an optional **Description**.</span></span>
3. <span data-ttu-id="b0273-178">Kliknij przycisk **dalej** można zapisać definicji dziennik niestandardowy.</span><span class="sxs-lookup"><span data-stu-id="b0273-178">Click **Next** to save the custom log definition.</span></span>

### <a name="step-5-validate-that-the-custom-logs-are-being-collected"></a><span data-ttu-id="b0273-179">Krok 5.</span><span class="sxs-lookup"><span data-stu-id="b0273-179">Step 5.</span></span> <span data-ttu-id="b0273-180">Zweryfikuj, że są zbierane dzienników niestandardowych</span><span class="sxs-lookup"><span data-stu-id="b0273-180">Validate that the custom logs are being collected</span></span>
<span data-ttu-id="b0273-181">Może potrwać do godziny początkowe dane z nowego dziennika niestandardowego pojawią się w analizy dzienników.</span><span class="sxs-lookup"><span data-stu-id="b0273-181">It may take up to an hour for the initial data from a new custom log to appear in Log Analytics.</span></span>  <span data-ttu-id="b0273-182">Rozpocznie się zbieranie wpisy z dzienników odnaleziona w ścieżce określonej od momentu zdefiniowania dziennik niestandardowy.</span><span class="sxs-lookup"><span data-stu-id="b0273-182">It will start collecting entries from the logs found in the path you specified from the point that you defined the custom log.</span></span>  <span data-ttu-id="b0273-183">Wpisy przekazane podczas tworzenia niestandardowego dziennika nie zostaną zachowane, ale będzie zbierać już istniejących wpisów w plikach dziennika, które klient zlokalizuje.</span><span class="sxs-lookup"><span data-stu-id="b0273-183">It will not retain the entries that you uploaded during the custom log creation, but it will collect already existing entries in the log files that it locates.</span></span>

<span data-ttu-id="b0273-184">Po uruchomieniu analizy dzienników zbierane z dziennika niestandardowego swoje rekordy będą dostępne z wyszukiwania dziennika.</span><span class="sxs-lookup"><span data-stu-id="b0273-184">Once Log Analytics starts collecting from the custom log, its records will be available with a Log Search.</span></span>  <span data-ttu-id="b0273-185">Użyj nazwy, który udostępnił dziennik niestandardowy jako **typu** w zapytaniu.</span><span class="sxs-lookup"><span data-stu-id="b0273-185">Use the name that you gave the custom log as the **Type** in your query.</span></span>

> [!NOTE]
> <span data-ttu-id="b0273-186">Jeśli brakuje właściwości RawData wyszukiwania, może być konieczne Zamknij i otwórz ponownie przeglądarkę.</span><span class="sxs-lookup"><span data-stu-id="b0273-186">If the RawData property is missing from the search, you may need to close and reopen your browser.</span></span>
>
>

### <a name="step-6-parse-the-custom-log-entries"></a><span data-ttu-id="b0273-187">Krok 6.</span><span class="sxs-lookup"><span data-stu-id="b0273-187">Step 6.</span></span> <span data-ttu-id="b0273-188">Przeanalizować wpisów dziennika niestandardowego</span><span class="sxs-lookup"><span data-stu-id="b0273-188">Parse the custom log entries</span></span>
<span data-ttu-id="b0273-189">Wpis dziennika całego będą przechowywane w jedną właściwość o nazwie **RawData**.</span><span class="sxs-lookup"><span data-stu-id="b0273-189">The entire log entry will be stored in a single property called **RawData**.</span></span>  <span data-ttu-id="b0273-190">Prawdopodobnie należy rozdzielić różne informacje zawarte w każdej pozycji do poszczególnych właściwości przechowywanych w rekordzie.</span><span class="sxs-lookup"><span data-stu-id="b0273-190">You will most likely want to separate the different pieces of information in each entry into individual properties stored in the record.</span></span>  <span data-ttu-id="b0273-191">Można to zrobić przy użyciu [pola niestandardowe](log-analytics-custom-fields.md) funkcji analizy dzienników.</span><span class="sxs-lookup"><span data-stu-id="b0273-191">You do this using the [Custom Fields](log-analytics-custom-fields.md) feature of Log Analytics.</span></span>

<span data-ttu-id="b0273-192">Szczegółowe informacje na temat analizowania wpis dziennika niestandardowego nie znajdują się w tym miejscu.</span><span class="sxs-lookup"><span data-stu-id="b0273-192">Detailed steps for parsing the custom log entry are not provided here.</span></span>  <span data-ttu-id="b0273-193">Zapoznaj się z [pola niestandardowe](log-analytics-custom-fields.md) tych informacji w dokumentacji.</span><span class="sxs-lookup"><span data-stu-id="b0273-193">Please refer to the [Custom Fields](log-analytics-custom-fields.md) documentation for this information.</span></span>

## <a name="disabling-a-custom-log"></a><span data-ttu-id="b0273-194">Wyłączanie dziennika niestandardowego</span><span class="sxs-lookup"><span data-stu-id="b0273-194">Disabling a custom log</span></span>
<span data-ttu-id="b0273-195">Nie można usunąć definicji dziennik niestandardowy, po jest został utworzony, ale można ją wyłączyć, usuwając wszystkie jego ścieżki w kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b0273-195">You cannot remove a custom log definition once it's been created, but you can disable it by removing all of its collection paths.</span></span>

1. <span data-ttu-id="b0273-196">W portalu OMS, przejdź do **ustawienia**.</span><span class="sxs-lookup"><span data-stu-id="b0273-196">In the OMS portal, go to **Settings**.</span></span>
2. <span data-ttu-id="b0273-197">Polecenie **danych** , a następnie **niestandardowe dzienniki**.</span><span class="sxs-lookup"><span data-stu-id="b0273-197">Click on **Data** and then **Custom logs**.</span></span>
3. <span data-ttu-id="b0273-198">Kliknij przycisk **szczegóły** obok definicji dziennik niestandardowy, aby wyłączyć.</span><span class="sxs-lookup"><span data-stu-id="b0273-198">Click **Details** next to the custom log definition to disable.</span></span>
4. <span data-ttu-id="b0273-199">Usuwanie wszystkich ścieżek kolekcji definicji dziennik niestandardowy.</span><span class="sxs-lookup"><span data-stu-id="b0273-199">Remove each of the collection paths for the custom log definition.</span></span>

## <a name="data-collection"></a><span data-ttu-id="b0273-200">Zbieranie danych</span><span class="sxs-lookup"><span data-stu-id="b0273-200">Data collection</span></span>
<span data-ttu-id="b0273-201">Analiza dzienników zbierze nowe wpisy z każdego dziennik niestandardowy co 5 minut.</span><span class="sxs-lookup"><span data-stu-id="b0273-201">Log Analytics will collect new entries from each custom log approximately every 5 minutes.</span></span>  <span data-ttu-id="b0273-202">Agent zarejestruje jego miejsce w każdym pliku dziennika, który zbiera z.</span><span class="sxs-lookup"><span data-stu-id="b0273-202">The agent will record its place in each log file that it collects from.</span></span>  <span data-ttu-id="b0273-203">Agent przejdzie do trybu offline w danym okresie czasu, następnie Log Analytics będzie gromadzić wpisów z którym ostatnio przerwał, nawet jeśli te wpisy zostały utworzone podczas agent jest w trybie offline.</span><span class="sxs-lookup"><span data-stu-id="b0273-203">If the agent goes offline for a period of time, then Log Analytics will collect entries from where it last left off, even if those entries were created while the agent was offline.</span></span>

<span data-ttu-id="b0273-204">Cała zawartość wpis dziennika są zapisywane w jedną właściwość o nazwie **RawData**.</span><span class="sxs-lookup"><span data-stu-id="b0273-204">The entire contents of the log entry are written to a single property called **RawData**.</span></span>  <span data-ttu-id="b0273-205">Można to przeanalizować na wiele właściwości, które mogą być przeanalizowane i przeszukiwać osobno, definiując [pól niestandardowych](log-analytics-custom-fields.md) po utworzeniu dziennik niestandardowy.</span><span class="sxs-lookup"><span data-stu-id="b0273-205">You can parse this into multiple properties that can be analyzed and searched separately by defining [Custom Fields](log-analytics-custom-fields.md) after you have created the custom log.</span></span>

## <a name="custom-log-record-properties"></a><span data-ttu-id="b0273-206">Właściwości rekordu dziennika niestandardowego</span><span class="sxs-lookup"><span data-stu-id="b0273-206">Custom log record properties</span></span>
<span data-ttu-id="b0273-207">Rekordy dziennika niestandardowego mają typ o nazwie dziennika, który podasz i właściwości w poniższej tabeli.</span><span class="sxs-lookup"><span data-stu-id="b0273-207">Custom log records have a type with the log name that you provide and the properties in the following table.</span></span>

| <span data-ttu-id="b0273-208">Właściwość</span><span class="sxs-lookup"><span data-stu-id="b0273-208">Property</span></span> | <span data-ttu-id="b0273-209">Opis</span><span class="sxs-lookup"><span data-stu-id="b0273-209">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="b0273-210">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="b0273-210">TimeGenerated</span></span> |<span data-ttu-id="b0273-211">Data i godzina rekord zebrane przez analizy dzienników.</span><span class="sxs-lookup"><span data-stu-id="b0273-211">Date and time that the record was collected by Log Analytics.</span></span>  <span data-ttu-id="b0273-212">Jeśli dziennik używa ogranicznik na podstawie czasu to czas zebrane z wpisu.</span><span class="sxs-lookup"><span data-stu-id="b0273-212">If the log uses a time-based delimiter then this is the time collected from the entry.</span></span> |
| <span data-ttu-id="b0273-213">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="b0273-213">SourceSystem</span></span> |<span data-ttu-id="b0273-214">Typ agenta rekordu zostały zebrane.</span><span class="sxs-lookup"><span data-stu-id="b0273-214">Type of agent the record was collected from.</span></span> <br> <span data-ttu-id="b0273-215">Połącz OpsManager — agent systemu Windows, bądź bezpośrednio lub System Center Operations Manager</span><span class="sxs-lookup"><span data-stu-id="b0273-215">OpsManager – Windows agent, either direct connect or System Center Operations Manager</span></span> <br> <span data-ttu-id="b0273-216">Linux — wszystkich agentów systemu Linux</span><span class="sxs-lookup"><span data-stu-id="b0273-216">Linux – All Linux agents</span></span> |
| <span data-ttu-id="b0273-217">RawData</span><span class="sxs-lookup"><span data-stu-id="b0273-217">RawData</span></span> |<span data-ttu-id="b0273-218">Pełny tekst zebranych wpisu.</span><span class="sxs-lookup"><span data-stu-id="b0273-218">Full text of the collected entry.</span></span> |
| <span data-ttu-id="b0273-219">ManagementGroupName</span><span class="sxs-lookup"><span data-stu-id="b0273-219">ManagementGroupName</span></span> |<span data-ttu-id="b0273-220">Nazwa grupy zarządzania agenci zarządzania programu System Center Operations.</span><span class="sxs-lookup"><span data-stu-id="b0273-220">Name of the management group for System Center Operations Manage agents.</span></span>  <span data-ttu-id="b0273-221">W przypadku innych agentów jest AOI -\<identyfikator obszaru roboczego\></span><span class="sxs-lookup"><span data-stu-id="b0273-221">For other agents, this is AOI-\<workspace ID\></span></span> |

## <a name="log-searches-with-custom-log-records"></a><span data-ttu-id="b0273-222">Dziennik wyszukiwania z rekordów dziennika niestandardowego</span><span class="sxs-lookup"><span data-stu-id="b0273-222">Log searches with custom log records</span></span>
<span data-ttu-id="b0273-223">Rekordy z dzienników niestandardowych są przechowywane w repozytorium OMS, tak jak rekordy z innego źródła danych.</span><span class="sxs-lookup"><span data-stu-id="b0273-223">Records from custom logs are stored in the OMS repository just like records from any other data source.</span></span>  <span data-ttu-id="b0273-224">Dysponują typu zgodnego z nazwą podane podczas definiowania dziennika, dzięki czemu można używać właściwości typu podczas wyszukiwania w celu pobrania rekordów zbierane z określonego dziennika.</span><span class="sxs-lookup"><span data-stu-id="b0273-224">They will have a type matching the name that you provide when you define the log, so you can use the Type property in your search to retrieve records collected from a specific log.</span></span>

<span data-ttu-id="b0273-225">Poniższa tabela zawiera różne przykłady wyszukiwania dziennika, które pobieranie rekordów z dzienników niestandardowych.</span><span class="sxs-lookup"><span data-stu-id="b0273-225">The following table provides different examples of log searches that retrieve records from custom logs.</span></span>

| <span data-ttu-id="b0273-226">Zapytanie</span><span class="sxs-lookup"><span data-stu-id="b0273-226">Query</span></span> | <span data-ttu-id="b0273-227">Opis</span><span class="sxs-lookup"><span data-stu-id="b0273-227">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="b0273-228">Typ = MyApp_CL</span><span class="sxs-lookup"><span data-stu-id="b0273-228">Type=MyApp_CL</span></span> |<span data-ttu-id="b0273-229">Wszystkie zdarzenia z niestandardowego dziennika o nazwie MyApp_CL.</span><span class="sxs-lookup"><span data-stu-id="b0273-229">All events from a custom log named MyApp_CL.</span></span> |
| <span data-ttu-id="b0273-230">Typ = MyApp_CL Severity_CF = błąd</span><span class="sxs-lookup"><span data-stu-id="b0273-230">Type=MyApp_CL Severity_CF=error</span></span> |<span data-ttu-id="b0273-231">Wszystkie zdarzenia z niestandardowego dziennika o nazwie MyApp_CL o wartości *błąd* w pole niestandardowe o nazwie *Severity_CF*.</span><span class="sxs-lookup"><span data-stu-id="b0273-231">All events from a custom log named MyApp_CL with a value of *error* in a custom field named *Severity_CF*.</span></span> |

>[!NOTE]
> <span data-ttu-id="b0273-232">Jeśli Twój obszar roboczy został uaktualniony do [nowego języka zapytań usługi Log Analytics](log-analytics-log-search-upgrade.md), powyższe zapytania zmienią się w następujący sposób.</span><span class="sxs-lookup"><span data-stu-id="b0273-232">If your workspace has been upgraded to the [new Log Analytics query language](log-analytics-log-search-upgrade.md), then the above queries would change to the following.</span></span>

> | <span data-ttu-id="b0273-233">Zapytanie</span><span class="sxs-lookup"><span data-stu-id="b0273-233">Query</span></span> | <span data-ttu-id="b0273-234">Opis</span><span class="sxs-lookup"><span data-stu-id="b0273-234">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="b0273-235">MyApp_CL</span><span class="sxs-lookup"><span data-stu-id="b0273-235">MyApp_CL</span></span> |<span data-ttu-id="b0273-236">Wszystkie zdarzenia z niestandardowego dziennika o nazwie MyApp_CL.</span><span class="sxs-lookup"><span data-stu-id="b0273-236">All events from a custom log named MyApp_CL.</span></span> |
| <span data-ttu-id="b0273-237">MyApp_CL &#124; gdzie Severity_CF == "error"</span><span class="sxs-lookup"><span data-stu-id="b0273-237">MyApp_CL &#124; where Severity_CF=="error"</span></span> |<span data-ttu-id="b0273-238">Wszystkie zdarzenia z niestandardowego dziennika o nazwie MyApp_CL o wartości *błąd* w pole niestandardowe o nazwie *Severity_CF*.</span><span class="sxs-lookup"><span data-stu-id="b0273-238">All events from a custom log named MyApp_CL with a value of *error* in a custom field named *Severity_CF*.</span></span> |


## <a name="sample-walkthrough-of-adding-a-custom-log"></a><span data-ttu-id="b0273-239">Przykładowe wskazówki dodawania dziennik niestandardowy</span><span class="sxs-lookup"><span data-stu-id="b0273-239">Sample walkthrough of adding a custom log</span></span>
<span data-ttu-id="b0273-240">Poniższej sekcji przedstawiono przykład tworzenia dziennik niestandardowy.</span><span class="sxs-lookup"><span data-stu-id="b0273-240">The following section walks through an example of creating a custom log.</span></span>  <span data-ttu-id="b0273-241">Przykładowy dziennik zbieranych ma pojedynczy wpis w każdym wierszu, począwszy od daty i czasu, a następnie rozdzielana przecinkami pól dla kodu, stanu i komunikatu.</span><span class="sxs-lookup"><span data-stu-id="b0273-241">The sample log being collected has a single entry on each line starting with a date and time and then comma-delimited fields for code, status, and message.</span></span>  <span data-ttu-id="b0273-242">Poniżej przedstawiono kilka przykładowych wpisów.</span><span class="sxs-lookup"><span data-stu-id="b0273-242">Several sample entries are shown below.</span></span>

    2016-03-10 01:34:36 207,Success,Client 05a26a97-272a-4bc9-8f64-269d154b0e39 connected
    2016-03-10 01:33:33 208,Warning,Client ec53d95c-1c88-41ae-8174-92104212de5d disconnected
    2016-03-10 01:35:44 209,Success,Transaction 10d65890-b003-48f8-9cfc-9c74b51189c8 succeeded
    2016-03-10 01:38:22 302,Error,Application could not connect to database
    2016-03-10 01:31:34 303,Error,Application lost connection to database

### <a name="upload-and-parse-a-sample-log"></a><span data-ttu-id="b0273-243">Przekazywanie i przeanalizować przykładowy dziennik</span><span class="sxs-lookup"><span data-stu-id="b0273-243">Upload and parse a sample log</span></span>
<span data-ttu-id="b0273-244">Firma Microsoft Podaj jeden z plików dziennika i można przeglądać zdarzenia, które będzie zbierać.</span><span class="sxs-lookup"><span data-stu-id="b0273-244">We provide one of the log files and can see the events that it will be collecting.</span></span>  <span data-ttu-id="b0273-245">W takim przypadku nowy wiersz jest wystarczające ogranicznika.</span><span class="sxs-lookup"><span data-stu-id="b0273-245">In this case New Line is a sufficient delimiter.</span></span>  <span data-ttu-id="b0273-246">Jeśli pojedynczy wpis dziennika można jednak podzielony na wiele wierszy, a następnie ogranicznik sygnatury czasowej potrzebny do użycia.</span><span class="sxs-lookup"><span data-stu-id="b0273-246">If a single entry in the log could span multiple lines though, then a timestamp delimiter would need to be used.</span></span>

![Przekazywanie i przeanalizować przykładowy dziennik](media/log-analytics-data-sources-custom-logs/delimiter.png)

### <a name="add-log-collection-paths"></a><span data-ttu-id="b0273-248">Dodaj ścieżki zbierania dzienników</span><span class="sxs-lookup"><span data-stu-id="b0273-248">Add log collection paths</span></span>
<span data-ttu-id="b0273-249">Pliki dziennika będą znajdować się w *C:\MyApp\Logs*.</span><span class="sxs-lookup"><span data-stu-id="b0273-249">The log files will be located in *C:\MyApp\Logs*.</span></span>  <span data-ttu-id="b0273-250">Nowy plik będzie można utworzyć każdego dnia o nazwie zawierającej daty we wzorcu *appYYYYMMDD.log*.</span><span class="sxs-lookup"><span data-stu-id="b0273-250">A new file will be created each day with a name that includes the date in the pattern *appYYYYMMDD.log*.</span></span>  <span data-ttu-id="b0273-251">Będą wystarczające wzorca dla tego dziennika *C:\MyApp\Logs\\\*log*.</span><span class="sxs-lookup"><span data-stu-id="b0273-251">A sufficient pattern for this log would be *C:\MyApp\Logs\\\*.log*.</span></span>

![Ścieżka zbierania dzienników](media/log-analytics-data-sources-custom-logs/collection-path.png)

### <a name="provide-a-name-and-description-for-the-log"></a><span data-ttu-id="b0273-253">Podaj nazwę i opis dziennika</span><span class="sxs-lookup"><span data-stu-id="b0273-253">Provide a name and description for the log</span></span>
<span data-ttu-id="b0273-254">Używamy nazwę *MyApp_CL* i wpisz **opis**.</span><span class="sxs-lookup"><span data-stu-id="b0273-254">We use a name of *MyApp_CL* and type in a **Description**.</span></span>

![Nazwa dziennika](media/log-analytics-data-sources-custom-logs/log-name.png)

### <a name="validate-that-the-custom-logs-are-being-collected"></a><span data-ttu-id="b0273-256">Zweryfikuj, że są zbierane dzienników niestandardowych</span><span class="sxs-lookup"><span data-stu-id="b0273-256">Validate that the custom logs are being collected</span></span>
<span data-ttu-id="b0273-257">Używamy zapytania *typu = MyApp_CL* aby zwrócić wszystkie rekordy z zebranych dziennika.</span><span class="sxs-lookup"><span data-stu-id="b0273-257">We use a query of *Type=MyApp_CL* to return all records from the collected log.</span></span>

![Dziennik zapytań bez pól niestandardowych](media/log-analytics-data-sources-custom-logs/query-01.png)

### <a name="parse-the-custom-log-entries"></a><span data-ttu-id="b0273-259">Przeanalizować wpisów dziennika niestandardowego</span><span class="sxs-lookup"><span data-stu-id="b0273-259">Parse the custom log entries</span></span>
<span data-ttu-id="b0273-260">Możemy użyć pola niestandardowe, aby zdefiniować *EventTime*, *kod*, *stan*, i *komunikat* pól i firma Microsoft mogą przeglądać różnica w rekordach które są zwracane przez zapytanie.</span><span class="sxs-lookup"><span data-stu-id="b0273-260">We use Custom Fields to define the *EventTime*, *Code*, *Status*, and *Message* fields and we can see the difference in the records that are returned by the query.</span></span>

![Kwerenda dziennika z polami niestandardowymi](media/log-analytics-data-sources-custom-logs/query-02.png)

## <a name="next-steps"></a><span data-ttu-id="b0273-262">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="b0273-262">Next steps</span></span>
* <span data-ttu-id="b0273-263">Użyj [pól niestandardowych](log-analytics-custom-fields.md) przeanalizować wpisy w dzienniku niestandardowe w poszczególnych pól.</span><span class="sxs-lookup"><span data-stu-id="b0273-263">Use [Custom Fields](log-analytics-custom-fields.md) to parse the entries in the custom log in to individual fields.</span></span>
* <span data-ttu-id="b0273-264">Dowiedz się więcej o [dziennika wyszukiwania](log-analytics-log-searches.md) analizować dane zebrane ze źródeł danych i rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="b0273-264">Learn about [log searches](log-analytics-log-searches.md) to analyze the data collected from data sources and solutions.</span></span>
