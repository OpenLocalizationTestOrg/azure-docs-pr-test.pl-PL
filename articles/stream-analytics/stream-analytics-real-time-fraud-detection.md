# <a name="get-started-using-azure-stream-analytics-real-time-fraud-detection"></a><span data-ttu-id="5c2b8-101">Rozpoczynanie pracy przy użyciu usługi Azure Stream Analytics: wykrywanie oszustw w czasie rzeczywistym</span><span class="sxs-lookup"><span data-stu-id="5c2b8-101">Get started using Azure Stream Analytics: Real-time fraud detection</span></span>

<span data-ttu-id="5c2b8-102">Ten samouczek zawiera ilustrację end-to-end można używać usługi Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-102">This tutorial provides an end-to-end illustration of how to use Azure Stream Analytics.</span></span> <span data-ttu-id="5c2b8-103">Omawiane kwestie:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-103">You learn how to:</span></span> 

* <span data-ttu-id="5c2b8-104">Przełącz strumienia zdarzeń do wystąpienia usługi Azure Event hubs.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-104">Bring streaming events into an instance of Azure Event Hubs.</span></span> <span data-ttu-id="5c2b8-105">W tym samouczku użyjesz aplikacji, która udostępniamy symulujący strumienia rekordów metadanych telefonu komórkowego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-105">In this tutorial, you'll use an app that we provide that simulates a stream of mobile-phone metadata records.</span></span>

* <span data-ttu-id="5c2b8-106">Pisanie zapytań usługi Stream Analytics przypominającego SQL do przekształcania danych, agregowanie informacji lub będzie zaglądać wzorców.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-106">Write SQL-like Stream Analytics queries to transform data, aggregating information or looking for patterns.</span></span> <span data-ttu-id="5c2b8-107">Pojawi się jak używać kwerendy do badania strumienia przychodzącego i wyszukaj wywołania, które mogą być fałszywe.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-107">You will see how to use a query to examine the incoming stream and look for calls that might be fraudulent.</span></span>

* <span data-ttu-id="5c2b8-108">Wysyłać wyniki do ujścia danych wyjściowych (magazyn), który można analizować, aby uzyskać dodatkowe informacje szczegółowe.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-108">Send the results to an output sink (storage) that you can analyze for additional insights.</span></span> <span data-ttu-id="5c2b8-109">W takim przypadku będzie wysłać dane podejrzane wywołania do magazynu obiektów Blob Azure.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-109">In this case, you'll send the suspicious call data to Azure Blob storage.</span></span>

<span data-ttu-id="5c2b8-110">W tym samouczku używamy przykład wykrywanie oszustw w czasie rzeczywistym na podstawie danych z połączenia telefonicznego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-110">In  this tutorial, we use the example of real-time fraud detection based on phone-call data.</span></span> <span data-ttu-id="5c2b8-111">Jednak techniki, które firma Microsoft ilustrują nadaje się również dla innych typów wykrywania oszustw, takie jak karty kredytowej oszustwa lub kradzieży tożsamości.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-111">But the technique we illustrate is also suited for other types of fraud detection, such as credit card fraud or identity theft.</span></span> 

## <a name="scenario-telecommunications-and-sim-fraud-detection-in-real-time"></a><span data-ttu-id="5c2b8-112">Scenariusz: Telekomunikacyjnych i SIM wykrywanie oszustw w czasie rzeczywistym</span><span class="sxs-lookup"><span data-stu-id="5c2b8-112">Scenario: Telecommunications and SIM fraud detection in real time</span></span>

<span data-ttu-id="5c2b8-113">Firmy telekomunikacyjnych ma duże ilości danych na połączenia przychodzące.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-113">A telecommunications company has a large volume of data for incoming calls.</span></span> <span data-ttu-id="5c2b8-114">Firma chce, aby wykryć fałszywych wywołań w czasie rzeczywistym, aby mogli powiadamiać klientów lub wyłączyć usługi dla określonej liczby.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-114">The company wants to detect fraudulent calls in real time so that they can notify customers or shut down service for a specific number.</span></span> <span data-ttu-id="5c2b8-115">Jeden typ oszustwa SIM obejmuje wiele wywołań z tej samej tożsamości zbliżonym do czasu, ale w geograficznie różnych lokalizacjach.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-115">One type of SIM fraud involves multiple calls from the same identity around the same time but in geographically different locations.</span></span> <span data-ttu-id="5c2b8-116">Do wykrywania oszustw tego typu, firma musi zbadać przychodzące rekordów telefonu i szukania wzorców określonych — w takim przypadku dla wywołań zbliżonym do czasu z różnych krajów.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-116">To detect this type of fraud, the company needs to examine incoming phone records and look for specific patterns—in this case, for calls made around the same time in different countries.</span></span> <span data-ttu-id="5c2b8-117">Rekordy telefonu, które należą do tej kategorii są zapisywane w pamięci masowej do dalszej analizy.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-117">Any phone records that fall into this category are written to storage for subsequent analysis.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="5c2b8-118">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="5c2b8-118">Prerequisites</span></span>

<span data-ttu-id="5c2b8-119">W tym samouczku będzie symulować rozmowy telefonicznej danych przy użyciu aplikacji klienta, która generuje próbki rozmowy telefonicznej metadanych.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-119">In this tutorial, you'll simulate phone-call data by using a client app that generates sample phone call metadata.</span></span> <span data-ttu-id="5c2b8-120">Niektóre rekordy, które tworzy aplikację wyglądać fałszywych wywołania.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-120">Some of the records that the app produces look like fraudulent calls.</span></span> 

<span data-ttu-id="5c2b8-121">Przed rozpoczęciem upewnij się, że należy dysponować następującymi elementami:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-121">Before you start, make sure you have the following:</span></span>

* <span data-ttu-id="5c2b8-122">Konto platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-122">An Azure account.</span></span>
* <span data-ttu-id="5c2b8-123">Zdarzenie wywołania generator aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-123">The call-event generator app.</span></span> <span data-ttu-id="5c2b8-124">Możesz uzyskać dostęp do tej pobierając [pliku TelcoGenerator.zip](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) z Microsoft Download Center.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-124">You can get this by downloading the [TelcoGenerator.zip file](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) from the Microsoft Download Center.</span></span> <span data-ttu-id="5c2b8-125">Rozpakuj pakiet do folderu na komputerze.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-125">Unzip this package into a folder on your computer.</span></span> <span data-ttu-id="5c2b8-126">Jeśli chcesz wyświetlić źródła kodu i uruchamianie aplikacji w debugerze, można pobrać kodu źródłowego aplikacji z [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-126">If you want to see the source code and run the app in a debugger, you can get the app source code from [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span></span> 

    >[!NOTE]
    ><span data-ttu-id="5c2b8-127">System Windows może blokować pliku zip pobranego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-127">Windows might block the downloaded .zip file.</span></span> <span data-ttu-id="5c2b8-128">Jeśli nie można rozpakować go, kliknij prawym przyciskiem myszy plik i wybierz **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-128">If you can't unzip it, right-click the file and select **Properties**.</span></span> <span data-ttu-id="5c2b8-129">Jeśli zostanie wyświetlony komunikat "ten plik pochodzi z innego komputera i może zostać zablokowany w celu ochrony tego komputera", wybierz **Odblokuj** opcji, a następnie kliknij przycisk **Zastosuj**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-129">If you see the "This file came from another computer and might be blocked to help protect this computer" message, select the **Unblock** option and then click **Apply**.</span></span>

<span data-ttu-id="5c2b8-130">Jeśli chcesz przejrzeć wyniki zadanie analizy przesyłania strumieniowego, należy również narzędzia do wyświetlania zawartości kontenera magazynu obiektów Blob Azure.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-130">If you want to examine the results of the Streaming Analytics job, you also need a tool for viewing the contents of a Azure Blob Storage container.</span></span> <span data-ttu-id="5c2b8-131">Jeśli używasz programu Visual Studio, możesz użyć [Azure Tools dla programu Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) lub [programu Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-131">If you use Visual Studio, you can use [Azure Tools for Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) or [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span></span> <span data-ttu-id="5c2b8-132">Alternatywnie można zainstalować narzędzi autonomicznych, takich jak [Eksploratora usługi Storage Azure](http://storageexplorer.com/) lub [Eksploratora Azure](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-132">Alternatively, you can install standalone tools like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

## <a name="create-an-azure-event-hubs-to-ingest-events"></a><span data-ttu-id="5c2b8-133">Tworzenie usługi Azure event koncentratory pozyskiwanie zdarzenia</span><span class="sxs-lookup"><span data-stu-id="5c2b8-133">Create an Azure event hubs to ingest events</span></span>

<span data-ttu-id="5c2b8-134">Do analizy strumienia danych, możesz *pozyskiwania* go na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-134">To analyze a data stream, you *ingest* it into Azure.</span></span> <span data-ttu-id="5c2b8-135">Typowy sposób pozyskiwania danych jest użycie [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), które pozwala obsługiwać miliony zdarzeń na sekundę, a następnie przetwarzania i przechowywania informacji o zdarzeniu.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-135">A typical way to ingest data is to use [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), which lets you ingest millions of events per second and then process and store the event information.</span></span> <span data-ttu-id="5c2b8-136">W tym samouczku tworzenia Centrum zdarzeń i mieć aplikacji generator zdarzenie wywołania wysyłać dane wywołania do tego Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-136">For this tutorial, you create an event hub and then have the call-event generator app send call data to that event hub.</span></span> <span data-ttu-id="5c2b8-137">Aby uzyskać więcej informacji na temat usługi event hubs, zobacz [dokumentacji usługi Azure Service Bus](https://docs.microsoft.com/en-us/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-137">For more about event hubs, see the [Azure Service Bus documentation](https://docs.microsoft.com/en-us/azure/service-bus/).</span></span>

>[!NOTE]
><span data-ttu-id="5c2b8-138">Bardziej szczegółowe wersja tej procedury dla [tworzenie przestrzeni nazw usługi Event Hubs i Centrum zdarzeń za pomocą portalu Azure](../event-hubs/event-hubs-create.md).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-138">For a more detailed version of this procedure, see [Create an Event Hubs namespace and an event hub using the Azure portal](../event-hubs/event-hubs-create.md).</span></span> 

### <a name="create-a-namespace-and-event-hub"></a><span data-ttu-id="5c2b8-139">Tworzenie Centrum przestrzeń nazw i zdarzeń</span><span class="sxs-lookup"><span data-stu-id="5c2b8-139">Create a namespace and event hub</span></span>
<span data-ttu-id="5c2b8-140">W tej procedurze należy najpierw utworzyć przestrzeń nazw Centrum zdarzeń, a następnie dodaj Centrum zdarzeń do tego namepsace.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-140">In this procedure, you first create an event hub namespace, and then you add an event hub to that namepsace.</span></span> <span data-ttu-id="5c2b8-141">Przestrzenie nazw Centrum zdarzeń są używane do logicznego grupowania wystąpień magistrali powiązanych zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-141">Event hub namespaces are used to logically group related event bus instances.</span></span> 

1. <span data-ttu-id="5c2b8-142">Zaloguj się do portalu Azure i kliknij przycisk **nowy** > **Internetu rzeczy** > **Centrum zdarzeń**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-142">Log  into the Azure portal and click **New** > **Internet of Things** > **Event Hub**.</span></span> 

2. <span data-ttu-id="5c2b8-143">W **tworzenie przestrzeni nazw** bloku, wprowadź nazwę przestrzeni nazw, takich jak `<yourname>-eh-ns-demo`.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-143">In the **Create namespace** blade, enter a namespace name such as `<yourname>-eh-ns-demo`.</span></span> <span data-ttu-id="5c2b8-144">Można użyć dowolnej nazwy przestrzeni nazw, ale nazwa musi być prawidłowa dla danego adresu URL i między Azure musi być unikatowa.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-144">You can use any name for the namespace, but the name must be valid for a URL and it must be unique across Azure.</span></span> 
    
3. <span data-ttu-id="5c2b8-145">Wybierz subskrypcję i Utwórz lub wybierz grupę zasobów, a następnie kliknij przycisk **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-145">Select a subscription and create or choose a resource group , then click **Create**.</span></span> 

    ![Tworzenie przestrzeni nazw Centrum zdarzeń](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-namespace-new-portal.png)
 
4. <span data-ttu-id="5c2b8-147">Po zakończeniu przestrzeń nazw wdrażania można znaleźć przestrzeni nazw zdarzenia koncentratora na liście zasobów platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-147">When the namespace has finished deploying, find the event hub namespace in your list of Azure resources.</span></span> 

5. <span data-ttu-id="5c2b8-148">Kliknij nowy obszar nazw, a w bloku przestrzeni nazw kliknij  **+ &nbsp;Centrum zdarzeń**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-148">Click the new namespace, and in the namespace blade, click **+&nbsp;Event Hub**.</span></span> 

    ![<span data-ttu-id="5c2b8-149">Przycisk Dodaj Centrum zdarzeń do tworzenia nowego Centrum zdarzeń</span><span class="sxs-lookup"><span data-stu-id="5c2b8-149">The Add Event Hub button for creating a new event hub</span></span> ](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-button-new-portal.png)    
 
6. <span data-ttu-id="5c2b8-150">Nazwa nowego Centrum zdarzeń `sa-eh-frauddetection-demo`.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-150">Name the new event hub `sa-eh-frauddetection-demo`.</span></span> <span data-ttu-id="5c2b8-151">Można użyć innej nazwy.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-151">You can use a different name.</span></span> <span data-ttu-id="5c2b8-152">Jeśli to zrobisz, zanotuj, ponieważ później potrzebne.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-152">If you do, make a note of it, because you need the name later.</span></span> <span data-ttu-id="5c2b8-153">Nie musisz teraz Ustaw inne opcje dla Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-153">You don't need to set any other options for the event hub right now.</span></span>

    ![Blok do tworzenia nowego Centrum zdarzeń](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-new-portal.png)
    
 
7. <span data-ttu-id="5c2b8-155">Kliknij przycisk **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-155">Click **Create**.</span></span>
### <a name="grant-access-to-the-event-hub-and-get-a-connection-string"></a><span data-ttu-id="5c2b8-156">Zezwalaj na dostęp do Centrum zdarzeń i pobrać ciągu połączenia</span><span class="sxs-lookup"><span data-stu-id="5c2b8-156">Grant access to the event hub and get a connection string</span></span>

<span data-ttu-id="5c2b8-157">Aby proces może wysyłać dane do Centrum zdarzeń, Centrum zdarzeń muszą mieć zasadę, która umożliwia uzyskanie odpowiedniego dostępu.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-157">Before a process can send data to an event hub, the event hub must have a policy that allows appropriate access.</span></span> <span data-ttu-id="5c2b8-158">Zasady dostępu generuje ciąg połączenia, który zawiera informacje o autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-158">The access policy produces a connection string that includes authorization information.</span></span>

1.  <span data-ttu-id="5c2b8-159">W bloku przestrzeni nazw zdarzeń, kliknij przycisk **usługi Event Hubs** , a następnie kliknij nazwę nowego Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-159">In the event namespace blade, click **Event Hubs** and then click the name of your new event hub.</span></span>

2.  <span data-ttu-id="5c2b8-160">W bloku Centrum zdarzeń, kliknij przycisk **zasady dostępu współużytkowanego** , a następnie kliknij przycisk  **+ &nbsp;Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-160">In the event hub blade, click **Shared access policies** and then click **+&nbsp;Add**.</span></span>

    >[!NOTE]
    ><span data-ttu-id="5c2b8-161">Upewnij się, że pracujesz z Centrum zdarzeń, a nie nazw Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-161">Make sure you're working with the event hub, not the event hub namespace.</span></span>

3.  <span data-ttu-id="5c2b8-162">Dodaj zasady o nazwie `sa-policy-manage-demo` i **oświadczeń**, wybierz pozycję **Zarządzaj**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-162">Add a policy named `sa-policy-manage-demo` and for **Claim**, select **Manage**.</span></span>

    ![Blok do tworzenia nowych zasad dostępu do Centrum zdarzeń](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-shared-access-policy-manage-new-portal.png)
 
4.  <span data-ttu-id="5c2b8-164">Kliknij przycisk **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-164">Click **Create**.</span></span>

5.  <span data-ttu-id="5c2b8-165">Po wdrożeniu zasad, kliknij go na liście zasady dostępu współdzielonego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-165">After the policy has been deployed, click it in the list of shared access policies.</span></span>

6.  <span data-ttu-id="5c2b8-166">Znajdź pole o nazwie **klucz podstawowy ciąg połączenia** i kliknij przycisk Kopiuj obok ciągu połączenia.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-166">Find the box labeled **CONNECTION STRING-PRIMARY KEY** and click the copy button next to the connection string.</span></span> 
    
    ![Kopiowanie klucza podstawowego połączenia ciągu z zasad dostępu](./media/stream-analytics-real-time-fraud-detection/stream-analytics-shared-access-policy-copy-connection-string-new-portal.png)
 
7.  <span data-ttu-id="5c2b8-168">Wklej parametry połączenia w edytorze tekstu.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-168">Paste the connection string into a text editor.</span></span> <span data-ttu-id="5c2b8-169">Należy tego ciągu połączenia dla następnej sekcji, po wprowadzeniu niektóre zmiany mała do niego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-169">You need this connection string for the next section, after you make some small edits to it.</span></span>

    <span data-ttu-id="5c2b8-170">Parametry połączenia wygląda następująco:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-170">The connection string looks like this:</span></span>

        Endpoint=sb://YOURNAME-eh-ns-demo.servicebus.windows.net/;SharedAccessKeyName=sa-policy-manage-demo;SharedAccessKey=Gw2NFZwU1Di+rxA2T+6hJYAtFExKRXaC2oSQa0ZsPkI=;EntityPath=sa-eh-frauddetection-demo

    <span data-ttu-id="5c2b8-171">Powiadomienie, że parametry połączenia zawierają wiele par klucz wartość, oddzielając je średnikami: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, i `EntityPath`.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-171">Notice that the connection string contains multiple key-value pairs, separated with semicolons: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, and `EntityPath`.</span></span>  

## <a name="configure-and-start-the-event-generator-application"></a><span data-ttu-id="5c2b8-172">Skonfiguruj i uruchom aplikację generator zdarzeń</span><span class="sxs-lookup"><span data-stu-id="5c2b8-172">Configure and start the event generator application</span></span>

<span data-ttu-id="5c2b8-173">Przed rozpoczęciem TelcoGenerator aplikacji, możesz ją skonfigurować tak, aby wysyła wywołania rekordów do Centrum zdarzeń, który został utworzony.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-173">Before you start the TelcoGenerator app, you configure it so that it will send call records to the event hub you just created.</span></span>

### <a name="configure-the-telcogeneratorapp"></a><span data-ttu-id="5c2b8-174">Skonfiguruj TelcoGeneratorapp</span><span class="sxs-lookup"><span data-stu-id="5c2b8-174">Configure the TelcoGeneratorapp</span></span>

1.  <span data-ttu-id="5c2b8-175">W edytorze, której są kopiowane parametry połączenia, zanotuj `EntityPath` wartość, a następnie usuń `EntityPath` pary (nie zapomnij Usuń średnik przechwyceniem).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-175">In the editor where you copied the connection string, make a note of the `EntityPath` value, and then remove the `EntityPath` pair (don't forget to remove the semicolon that precedes it).</span></span> 

2.  <span data-ttu-id="5c2b8-176">W folderze, gdzie unzipped pliku TelcoGenerator.zip Otwórz plik telcodatagen.exe.config w edytorze.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-176">In the folder where you unzipped the TelcoGenerator.zip file, open the telcodatagen.exe.config file in an editor.</span></span> <span data-ttu-id="5c2b8-177">(Istnieje więcej niż jeden plik .config, dlatego upewnij się, że otworzyć właściwy).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-177">(There is more than one .config file, so be sure that you open the right one.)</span></span>

3.  <span data-ttu-id="5c2b8-178">W `<appSettings>` element, w tym:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-178">In the `<appSettings>` element, do this:</span></span>

    * <span data-ttu-id="5c2b8-179">Ustaw wartość `EventHubName` klucza do nazwy Centrum zdarzeń (oznacza to, że wartość jednostek ścieżki).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-179">Set the value of the `EventHubName` key to the event hub name (that is, to the value of the entity path).</span></span>
    * <span data-ttu-id="5c2b8-180">Ustaw wartość `Microsoft.ServiceBus.ConnectionString` klucza w parametrach połączenia.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-180">Set the value of the `Microsoft.ServiceBus.ConnectionString` key to the connection string.</span></span> 

    <span data-ttu-id="5c2b8-181">`<appSettings>` Sekcji będzie wyglądać jak w następującym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-181">The `<appSettings>` section will look like the following example.</span></span> <span data-ttu-id="5c2b8-182">(Dla uzyskania przejrzystości, możemy opakowana wiersze i usunąć niektóre znaki z tokenu autoryzacji.)</span><span class="sxs-lookup"><span data-stu-id="5c2b8-182">(For clarity, we wrapped the lines and removed some characters from the authorization token.)</span></span>

    ![Plik konfiguracji aplikacji TelcoGenerator przedstawiający ciąg połączenia i nazwę Centrum zdarzeń](./media/stream-analytics-real-time-fraud-detection/stream-analytics-telcogenerator-config-file-app-settings.png)
 
4.  <span data-ttu-id="5c2b8-184">Zapisz plik.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-184">Save the file.</span></span> 

### <a name="start-the-app"></a><span data-ttu-id="5c2b8-185">Uruchom aplikację</span><span class="sxs-lookup"><span data-stu-id="5c2b8-185">Start the app</span></span>
1.  <span data-ttu-id="5c2b8-186">Otwórz okno polecenia i przejdź do folderu, gdzie jest rozpakowanej aplikacji TelcoGenerator.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-186">Open a command window and change to the folder where the TelcoGenerator app is unzipped.</span></span>
2.  <span data-ttu-id="5c2b8-187">Wprowadź następujące polecenie:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-187">Enter the following command:</span></span>

        telcodatagen.exe 1000 .2 2

    <span data-ttu-id="5c2b8-188">Dostępne są następujące parametry:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-188">The parameters are:</span></span> 

    * <span data-ttu-id="5c2b8-189">Liczba CDR na godzinę.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-189">Number of CDRs per hour.</span></span> 
    * <span data-ttu-id="5c2b8-190">Prawdopodobieństwo oszustwa karta SIM: Jak często jako procent wszystkich wywołań, że aplikacja powinny symulować fałszywych wywołania.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-190">SIM Card Fraud Probability: How often, as a percentage of all calls, that the app should simulate a fraudulent call.</span></span> <span data-ttu-id="5c2b8-191">Wartość.2 oznacza, że który około 20% rekordów wywołania będzie wyglądać fałszywe.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-191">The value .2 means that about 20% of the call records will look fraudulent.</span></span>
    * <span data-ttu-id="5c2b8-192">Czas trwania w godzinach.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-192">Duration in hours.</span></span> <span data-ttu-id="5c2b8-193">Liczba godzin, które powinny być uruchamiane w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-193">The number of hours that the app should run.</span></span> <span data-ttu-id="5c2b8-194">Można również zatrzymać aplikację dowolnej chwili, naciskając klawisze Ctrl + C w wierszu polecenia.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-194">You can also stop the app any time by pressing Ctrl+C at the command line.</span></span>

    <span data-ttu-id="5c2b8-195">Po kilku sekundach uruchomieniu aplikacji wyświetlanie rekordy połączeń telefonicznych na ekranie, jak wysyła je do Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-195">After a few seconds, the app starts displaying phone call records on the screen as it sends them to the event hub.</span></span>

<span data-ttu-id="5c2b8-196">Niektóre pola klucza, które będą używane w tej aplikacji wykrywanie oszustw w czasie rzeczywistym, są następujące:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-196">Some of the key fields that you will be using in this real-time fraud detection application are the following:</span></span>

|<span data-ttu-id="5c2b8-197">**Rekord**</span><span class="sxs-lookup"><span data-stu-id="5c2b8-197">**Record**</span></span>|<span data-ttu-id="5c2b8-198">**Definicja**</span><span class="sxs-lookup"><span data-stu-id="5c2b8-198">**Definition**</span></span>|
|----------|--------------|
|`CallrecTime`|<span data-ttu-id="5c2b8-199">Godzina rozpoczęcia znacznik czasu wywołania.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-199">The timestamp for the call start time.</span></span> |
|`SwitchNum`|<span data-ttu-id="5c2b8-200">Przełącznik telefonów używane do połączenia.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-200">The telephone switch used to connect the call.</span></span> <span data-ttu-id="5c2b8-201">W tym przykładzie przełączniki są ciągów reprezentujących kraj pochodzenia (USA, Chinach, UK, Niemcy lub Australii).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-201">For this example, the switches are strings that represent the country of origin (US, China, UK, Germany, or Australia).</span></span> |
|`CallingNum`|<span data-ttu-id="5c2b8-202">Numer telefonu obiektu wywołującego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-202">The phone number of the caller.</span></span> |
|`CallingIMSI`|<span data-ttu-id="5c2b8-203">Tożsamość subskrybenta przenośnych międzynarodowe (firmy IMSI).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-203">The International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="5c2b8-204">Jest to unikatowy identyfikator obiektu wywołującego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-204">This is the Unique identifier of the caller.</span></span> |
|`CalledNum`|<span data-ttu-id="5c2b8-205">Numer telefonu adresata wywołania.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-205">The phone number of the call recipient.</span></span> |
|`CalledIMSI`|<span data-ttu-id="5c2b8-206">Subskrybent międzynarodowy przenośnych tożsamość (firmy IMSI).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-206">International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="5c2b8-207">Jest to unikatowy identyfikator odbiorcy wywołania.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-207">This is the unique identifier of the call recipient.</span></span> |


## <a name="create-a-stream-analytics-job-to-manage-streaming-data"></a><span data-ttu-id="5c2b8-208">Utwórz zadanie usługi Stream Analytics do zarządzania danymi przesyłania strumieniowego</span><span class="sxs-lookup"><span data-stu-id="5c2b8-208">Create a Stream Analytics job to manage streaming data</span></span>

<span data-ttu-id="5c2b8-209">Teraz, gdy masz strumienia zdarzeń wywołania można skonfigurować zadania usługi analiza strumienia.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-209">Now that you have a stream of call events, you can set up a Stream Analytics job.</span></span> <span data-ttu-id="5c2b8-210">Zadanie będzie odczytywać dane z Centrum zdarzeń, które można skonfigurować.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-210">The job will read data from the event hub that you set up.</span></span> 

### <a name="create-the-job"></a><span data-ttu-id="5c2b8-211">Utwórz zadanie</span><span class="sxs-lookup"><span data-stu-id="5c2b8-211">Create the job</span></span> 

1. <span data-ttu-id="5c2b8-212">W portalu Azure kliknij **nowy** > **Internetu rzeczy** > **zadanie usługi Stream Analytics**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-212">In the Azure portal, click **New** > **Internet of Things** > **Stream Analytics job**.</span></span>

2. <span data-ttu-id="5c2b8-213">Nazwa zadania `sa_frauddetection_job_demo`, określ subskrypcję, lokalizacji i grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-213">Name the job `sa_frauddetection_job_demo`, specify a subscription, resource group, and location.</span></span>

    <span data-ttu-id="5c2b8-214">Należy dobrze jest umieścić zadania i Centrum zdarzeń, w tym samym regionie, w celu uzyskania najlepszej wydajności i tak, aby nie płaci się na przesyłanie danych między regionami.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-214">It's a good idea to place the job and the event hub in the same region for best performance and so that you don't pay to transfer data between regions.</span></span>

    ![Tworzenie nowego zadania usługi analiza strumienia](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-job-new-portal.png)

3. <span data-ttu-id="5c2b8-216">Kliknij przycisk **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-216">Click **Create**.</span></span>

    <span data-ttu-id="5c2b8-217">Zadanie jest tworzony i portalu Wyświetla szczegóły zadania.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-217">The job is created and the portal displays job details.</span></span> <span data-ttu-id="5c2b8-218">Nic nie jest jeszcze uruchomiona, ale — należy skonfigurować zadania, aby można było go uruchomić.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-218">Nothing is running yet, though—you have to configure the job before it can be started.</span></span>

### <a name="configure-job-input"></a><span data-ttu-id="5c2b8-219">Skonfiguruj zadania w danych wejściowych</span><span class="sxs-lookup"><span data-stu-id="5c2b8-219">Configure job input</span></span>

1. <span data-ttu-id="5c2b8-220">Na pulpicie nawigacyjnym lub **wszystkie zasoby** bloku, Znajdź i wybierz `sa_frauddetection_job_demo` zadania usługi analiza strumienia.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-220">In the dashboard or the **All resources** blade, find and select the `sa_frauddetection_job_demo` Stream Analytics job.</span></span> 
2. <span data-ttu-id="5c2b8-221">W **topologii zadania** sekcji bloku zadania Stream Analytics, kliknij przycisk **dane wejściowe** pole.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-221">In the **Job Topology** section of the Stream Analytics job blade, click the **Input** box.</span></span>

    ![Pole wprowadzania w topologii w bloku zadanie analizy przesyłania strumieniowego](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-input-box-new-portal.png)
 
3. <span data-ttu-id="5c2b8-223">Kliknij przycisk  **+ &nbsp;Dodaj** , a następnie wypełnij bloku z tymi wartościami:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-223">Click **+&nbsp;Add** and then fill out the blade with these values:</span></span>

    * <span data-ttu-id="5c2b8-224">**Alias wejściowy**: Użyj nazwy `CallStream`.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-224">**Input alias**: Use the name `CallStream`.</span></span> <span data-ttu-id="5c2b8-225">Użyj innej nazwy, aby je zapisać, ponieważ będzie on potrzebny później.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-225">If you use a different name, make a note of it because you'll need it later.</span></span>
    * <span data-ttu-id="5c2b8-226">**Typ źródła**: Wybierz **strumienia danych**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-226">**Source type**: Select **Data stream**.</span></span> <span data-ttu-id="5c2b8-227">(**Danych referencyjnych** odwołuje się do danych statycznych wyszukiwania, które nie będą korzystać z tego samouczka.)</span><span class="sxs-lookup"><span data-stu-id="5c2b8-227">(**Reference data** refers to static lookup data, which you won't use in this tutorial.)</span></span>
    * <span data-ttu-id="5c2b8-228">**Źródło**: Wybierz **Centrum zdarzeń**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-228">**Source**: Select **Event hub**.</span></span>
    * <span data-ttu-id="5c2b8-229">**Opcji importowania**: Wybierz **Użyj Centrum zdarzeń z bieżącej subskrypcji**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-229">**Import option**: Select **Use event hub from current subscription**.</span></span> 
    * <span data-ttu-id="5c2b8-230">**Przestrzeń nazw magistrali usług**: Wybierz obszar nazw Centrum zdarzeń utworzonego wcześniej (`<yourname>-eh-ns-demo`).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-230">**Service bus namespace**: Select the event hub namespace that you created earlier (`<yourname>-eh-ns-demo`).</span></span>
    * <span data-ttu-id="5c2b8-231">**Centrum zdarzeń**: wybierz utworzony wcześniej Centrum zdarzeń (`sa-eh-frauddetection-demo`).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-231">**Event hub**: Select the event hub that you created earlier (`sa-eh-frauddetection-demo`).</span></span>
    * <span data-ttu-id="5c2b8-232">**Nazwa zasad Centrum zdarzeń**: Wybierz zasady dostępu, który został utworzony wcześniej (`sa-policy-manage-demo`).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-232">**Event hub policy name**: Select the access policy that you created earlier (`sa-policy-manage-demo`).</span></span>

    ![Utwórz nowe dane wejściowe zadania przesyłania strumieniowego usługi analiza](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-input-new-portal.png)

4. <span data-ttu-id="5c2b8-234">Kliknij przycisk **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-234">Click **Create**.</span></span>

## <a name="create-queries-to-transform-real-time-data"></a><span data-ttu-id="5c2b8-235">Tworzenie zapytań do przekształcania danych w czasie rzeczywistym</span><span class="sxs-lookup"><span data-stu-id="5c2b8-235">Create queries to transform real-time data</span></span>

<span data-ttu-id="5c2b8-236">W tym momencie masz zadanie usługi Stream Analytics, konfigurowanie odczytać przychodzącego strumienia danych.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-236">At this point, you have a Stream Analytics job set up to read an incoming data stream.</span></span> <span data-ttu-id="5c2b8-237">Następnym krokiem jest, aby utworzyć transformację, która analizuje dane w czasie rzeczywistym.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-237">The next step is to create a transformation that analyzes the data in real time.</span></span> <span data-ttu-id="5c2b8-238">Można to zrobić, tworząc kwerendy.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-238">You do this by creating a query.</span></span> <span data-ttu-id="5c2b8-239">Analiza strumienia obsługuje prosty, deklaratywny model zapytań opisujący przekształceń do przetworzenia w czasie rzeczywistym.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-239">Stream Analytics supports a simple, declarative query model that describes transformations for real-time processing.</span></span> <span data-ttu-id="5c2b8-240">Zapytania używać języka przypominającego SQL, który ma niektóre rozszerzenia, które są specyficzne dla usługi analiza strumienia.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-240">The queries use a SQL-like language that has some extensions specific to stream analytics.</span></span> 

<span data-ttu-id="5c2b8-241">Bardzo proste zapytanie po prostu może odczytać wszystkich danych przychodzących.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-241">A very simple query might simply read all the incoming data.</span></span> <span data-ttu-id="5c2b8-242">Jednak często tworzyć zapytania, które wyglądają dla określonych danych lub w przypadku relacji w danych.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-242">However, you often create queries that look for specific data or for relationships in the data.</span></span> <span data-ttu-id="5c2b8-243">W tej części samouczka utworzysz i przetestować kilka zapytań, aby dowiedzieć się więcej na kilka sposobów, w których można przekształcać strumień wejściowy do analizy.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-243">In this section of the tutorial, you will create and test several queries to learn a few ways in which you can transform an input stream for analysis.</span></span> 

<span data-ttu-id="5c2b8-244">Zapytania tworzone w tym miejscu wyświetli tylko przekształconych danych do ekranu.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-244">The queries you create here will just display the transformed data to the screen.</span></span> <span data-ttu-id="5c2b8-245">W dalszej części artykułu należy skonfigurować ujście danych wyjściowych i zapytania, który zapisuje przekształcone dane do tego obiektu sink.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-245">In a later section, you'll configure an output sink and a query that writes the transformed data to that sink.</span></span>

<span data-ttu-id="5c2b8-246">Aby dowiedzieć się więcej na temat języka, zobacz [Azure Stream Analytics zapytania Language Reference](https://msdn.microsoft.com/library/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-246">To learn more about the language, see the [Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/dn834998.aspx).</span></span>

### <a name="get-sample-data-for-testing-queries"></a><span data-ttu-id="5c2b8-247">Pobierz przykładowe dane do testowania zapytań</span><span class="sxs-lookup"><span data-stu-id="5c2b8-247">Get sample data for testing queries</span></span>

<span data-ttu-id="5c2b8-248">Aplikacja TelcoGenerator wysyła wywołania rekordów do Centrum zdarzeń i zadania usługi Stream Analytics jest skonfigurowany do odczytu z Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-248">The TelcoGenerator app is sending call records to the event hub, and your Stream Analytics job is configured to read from the event hub.</span></span> <span data-ttu-id="5c2b8-249">Zapytanie służy do zadania, aby upewnić się, że jest poprawnie odczytywania testowego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-249">You can use a query to test the job to make sure that it's reading correctly.</span></span> <span data-ttu-id="5c2b8-250">Aby przetestować zapytanie w konsoli platformy Azure, należy przykładowych danych.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-250">To  test a query in the Azure console, you need sample data.</span></span> <span data-ttu-id="5c2b8-251">W ramach tego przewodnika będą Wyodrębnij przykładowych danych ze strumienia, który będzie dostępna w Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-251">For this walkthrough, you'll extract sample data from the stream that's coming into the event hub.</span></span>

1. <span data-ttu-id="5c2b8-252">Upewnij się, że TelcoGenerator aplikacji działa i tworzenie rekordów wywołania.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-252">Make sure that the TelcoGenerator app is running and producing call records.</span></span>
2. <span data-ttu-id="5c2b8-253">W portalu wróć do bloku zadanie analizy przesyłania strumieniowego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-253">In the portal, return to the Streaming Analytics job blade.</span></span> <span data-ttu-id="5c2b8-254">(Jeśli został zamknięty bloku, wyszukaj `sa_frauddetection_job_demo` w **wszystkie zasoby** bloku.)</span><span class="sxs-lookup"><span data-stu-id="5c2b8-254">(If you closed the blade, search for `sa_frauddetection_job_demo` in the **All resources** blade.)</span></span>
3. <span data-ttu-id="5c2b8-255">Kliknij przycisk **zapytania** pole.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-255">Click the **Query** box.</span></span> <span data-ttu-id="5c2b8-256">Azure wymieniono wejściach i wyjściach, które są skonfigurowane dla zadania i umożliwia utworzenie zapytania umożliwiające przekształcanie strumień wejściowy podczas przesyłania danych wyjściowych.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-256">Azure lists the inputs and outputs that are configured for the job, and lets you create a query that lets you transform the input stream as it is sent to the output.</span></span>
4. <span data-ttu-id="5c2b8-257">W **zapytania** bloku, kliknij punkty `CallStream` danych wejściowych, a następnie wybierz **przykładowe dane z danych wejściowych**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-257">In the **Query** blade, click the dots next to the `CallStream` input and then select **Sample data from input**.</span></span>

    ![Opcje menu do użycia dla wpisu zadanie analizy przesyłania strumieniowego, z "Przykładowych danych z danych wejściowych" wybrane przykładowe dane](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sample-data-from-input.png)

    <span data-ttu-id="5c2b8-259">Spowoduje to otwarcie bloku, który pozwala określić, ile przykładowych danych, aby uzyskać zdefiniowanych pod względem czasu odczytu strumienia wejściowego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-259">This opens a blade that lets you specify how much sample data to get, defined in terms of how long to read the input stream.</span></span>

5. <span data-ttu-id="5c2b8-260">Ustaw **minut** 3, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-260">Set **Minutes** to 3 and then click **OK**.</span></span> 
    
    ![Próbkowanie strumienia wejściowego z "3 minuty" wybrane opcje.](./media/stream-analytics-real-time-fraud-detection/stream-analytics-input-create-sample-data.png)

    <span data-ttu-id="5c2b8-262">Azure przykłady 3 minut, przez które danych ze strumienia wejściowego i powiadamia użytkownika, gdy będzie gotowy przykładowych danych.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-262">Azure samples 3 minutes' worth of data from the input stream and notifies you when the sample data is ready.</span></span> <span data-ttu-id="5c2b8-263">(Trwa to krótki czas).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-263">(This takes a short while.)</span></span> 

<span data-ttu-id="5c2b8-264">Przykładowe dane są tymczasowo przechowywane i jest dostępny, gdy masz okna kwerendy.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-264">The sample data is stored temporarily and is available while you have the query window open.</span></span> <span data-ttu-id="5c2b8-265">Jeśli zamkniesz okno kwerendy przykładowe dane są usuwane, a następnie musisz utworzyć nowy zestaw przykładowych danych.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-265">If you close the query window, the sample data is discarded, and you'll have to create a new set of sample data.</span></span> 

<span data-ttu-id="5c2b8-266">Alternatywnie, można uzyskać pliku JSON, który zawiera przykładowe dane w nim [z usługi GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json), a następnie przekaż ten plik JSON ma być używana jako dane przykładowe dla `CallStream` wejściowego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-266">As an alternative, you can get a .json file that has sample data in it [from GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json), and then upload that .json file to use as sample data for the `CallStream` input .</span></span> 

### <a name="test-using-a-pass-through-query"></a><span data-ttu-id="5c2b8-267">Testowanie przy użyciu zapytania przekazującego</span><span class="sxs-lookup"><span data-stu-id="5c2b8-267">Test using a pass-through query</span></span>

<span data-ttu-id="5c2b8-268">Jeśli chcesz zarchiwizować każde zdarzenie, można użyć zapytania przekazującego, do odczytu wszystkich pól w ładunku zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-268">If you want to archive every event, you can use a pass-through query to read all the fields in the payload of the event.</span></span>

1. <span data-ttu-id="5c2b8-269">W oknie zapytania wprowadź tego zapytania:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-269">In the query window, enter this query:</span></span>

        SELECT 
            *
        FROM 
            CallStream

    >[!NOTE]
    ><span data-ttu-id="5c2b8-270">Podobnie jak w przypadku SQL, słowa kluczowe nie jest uwzględniana wielkość liter, a odstępem, nie ma znaczenia.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-270">As with SQL, keywords are not case sensitive, and whitespace is not significant.</span></span>

    <span data-ttu-id="5c2b8-271">W tym zapytaniu `CallStream` jest alias określony podczas tworzenia danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-271">In this query, `CallStream` is the alias that you specified when you created the input.</span></span> <span data-ttu-id="5c2b8-272">Jeśli używasz inny alias, należy użyć tej nazwy.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-272">If you used a different alias, use that name instead.</span></span>

2. <span data-ttu-id="5c2b8-273">Kliknij przycisk **testu**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-273">Click **Test**.</span></span>

    <span data-ttu-id="5c2b8-274">Zadanie Stream Analytics jest uruchamiana zapytanie dla przykładowych danych i wyświetla dane wyjściowe w dolnej części okna.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-274">The Stream Analytics job runs the query against the sample data and displays the output at the bottom of the window.</span></span> <span data-ttu-id="5c2b8-275">Oznacza to, że Centrum zdarzeń i zadanie analizy przesyłania strumieniowego są prawidłowo skonfigurowane.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-275">This tells you that the event hub and the Streaming Analytics job are configured correctly.</span></span> <span data-ttu-id="5c2b8-276">(Jak wspomniano, później utworzysz ujścia danych wyjściowych, który kwerendy można zapisywać danych.)</span><span class="sxs-lookup"><span data-stu-id="5c2b8-276">(As noted, later you'll create an output sink that the query can write data to.)</span></span>

    ![Zadania usługi analiza strumienia wyjściowego, wyświetlanie 73 rekordów wygenerowany](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output.png)

    <span data-ttu-id="5c2b8-278">Dokładna liczba rekordów wyświetlanych będzie zależeć od liczbę rekordów zostały przechwycone w Twoim przykładzie 3 minuty.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-278">The exact number of records you see will depend on how many records were captured in your 3-minute sample.</span></span>
 
### <a name="reduce-the-number-of-fields-using-a-column-projection"></a><span data-ttu-id="5c2b8-279">Zmniejsz liczbę pól przy użyciu projekcji kolumny</span><span class="sxs-lookup"><span data-stu-id="5c2b8-279">Reduce the number of fields using a column projection</span></span>

<span data-ttu-id="5c2b8-280">W wielu przypadkach analizy nie potrzebuje wszystkich kolumn ze strumienia wejściowego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-280">In many cases, your analysis doesn't need all the columns from the input stream.</span></span> <span data-ttu-id="5c2b8-281">Zapytanie służy do projektu był mniejszy zestaw zwrócony pól niż zapytania przekazującego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-281">You can use a query to project a smaller set of returned fields than in the pass-through query.</span></span>

1. <span data-ttu-id="5c2b8-282">Zmień zapytanie w edytorze kodu do następującego:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-282">Change the query in the code editor to the following:</span></span>

        SELECT CallRecTime, SwitchNum, CallingIMSI, CallingNum, CalledNum 
        FROM 
            CallStream

2. <span data-ttu-id="5c2b8-283">Kliknij przycisk **testu** ponownie.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-283">Click **Test** again.</span></span> 

    ![Zadania Stream Analytics wyjściowego dla projekcji, wyświetlanie 25 rekordów wygenerowany](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-projection.png)
 
### <a name="count-incoming-calls-by-region-tumbling-window-with-aggregation"></a><span data-ttu-id="5c2b8-285">Liczba przychodzących wywołuje według regionu: okno wirowania z agregacją</span><span class="sxs-lookup"><span data-stu-id="5c2b8-285">Count incoming calls by region: Tumbling window with aggregation</span></span>

<span data-ttu-id="5c2b8-286">Załóżmy, że chcesz liczbę połączeń przychodzących na region.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-286">Suppose you want to count the number of incoming calls per region.</span></span> <span data-ttu-id="5c2b8-287">W przesyłanie strumieniowe danych, jeśli chcesz wykonywać funkcje agregujące, takie jak zliczanie, należy segmentów strumienia na jednostki danych czasowych (ponieważ sam strumień danych jest skutecznie nieskończone).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-287">In streaming data, when you want to perform aggregate functions like counting, you need to segment the stream into temporal units (since the data stream itself is effectively endless).</span></span> <span data-ttu-id="5c2b8-288">Można to zrobić przy użyciu usługi analiza strumienia [funkcji okna](stream-analytics-window-functions.md).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-288">You do this using a Streaming Analytics [window function](stream-analytics-window-functions.md).</span></span> <span data-ttu-id="5c2b8-289">Możesz następnie pracować z danymi w danym przedziale jako jednostka.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-289">You can then work with the data inside that window as a unit.</span></span>

<span data-ttu-id="5c2b8-290">Dla tej transformacji sekwencja danych czasowych systemu Windows, które nie nakładają się na — każde okno będzie mieć odrębny zestaw danych, które można grupować i agregacji.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-290">For this transformation, you want a sequence of temporal windows that don't overlap—each window will have a discrete set of data that you can group and aggregate.</span></span> <span data-ttu-id="5c2b8-291">Ten typ okna jest określany jako *okno wirowania* .</span><span class="sxs-lookup"><span data-stu-id="5c2b8-291">This type of window is referred to as a *Tumbling window* .</span></span> <span data-ttu-id="5c2b8-292">W ramach okno wirowania można uzyskać liczbę przychodzących pogrupowane według `SwitchNum`, który reprezentuje kraju, w którym zainicjowano wywołanie.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-292">Within the Tumbling window, you can get a count of the incoming calls grouped by `SwitchNum`, which represents the country where the call originated.</span></span> 

1. <span data-ttu-id="5c2b8-293">Zmień zapytanie w edytorze kodu do następującego:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-293">Change the query in the code editor to the following:</span></span>

        SELECT 
            System.Timestamp as WindowEnd, SwitchNum, COUNT(*) as CallCount 
        FROM
            CallStream TIMESTAMP BY CallRecTime 
        GROUP BY TUMBLINGWINDOW(s, 5), SwitchNum

    <span data-ttu-id="5c2b8-294">To zapytanie używa `Timestamp By` — słowo kluczowe w `FROM` klauzuli, aby określić w strumieniu wejściowym można użyć, aby zdefiniować okno wirowania pola sygnatury czasowej.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-294">This query uses the `Timestamp By` keyword in the `FROM` clause to specify which timestamp field in the input stream to use to define the Tumbling window.</span></span> <span data-ttu-id="5c2b8-295">W takim przypadku okno dzieli dane na segmenty przez `CallRecTime` w każdego rekordu.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-295">In this case, the window divides the data into segments by the `CallRecTime` field in each record.</span></span> <span data-ttu-id="5c2b8-296">(Jeśli żadne pole nie zostanie określony, operacja okien używa podczas każdego zdarzenia dociera do Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-296">(If no field is specified, the windowing operation uses the time that each event arrives at the event hub.</span></span> <span data-ttu-id="5c2b8-297">Zobacz sekcję "Godzina aplikacji Vs Godzina nadejścia" w [strumienia Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-297">See "Arrival Time Vs Application Time" in [Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span></span> 

    <span data-ttu-id="5c2b8-298">Obejmuje projekcji `System.Timestamp`, która zwraca sygnatury czasowej do końca każde okno.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-298">The projection includes `System.Timestamp`, which returns a timestamp for the end of each window.</span></span> 

    <span data-ttu-id="5c2b8-299">Aby określić, że okno wirowania, należy użyć [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) działać w `GROUP BY `klauzuli.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-299">To specify that you want to use a Tumbling window, you use the [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) function in the `GROUP BY `clause.</span></span> <span data-ttu-id="5c2b8-300">W funkcji należy określić jednostki czasu (dowolnym z mikrosekundy na dzień) i rozmiaru okna (liczbę jednostek).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-300">In the function, you specify a time unit (anywhere from a microsecond to a day) and a window size (how many units).</span></span> <span data-ttu-id="5c2b8-301">W tym przykładzie okno wirowania składa się z 5 sekund, tak liczba według kraju będzie uzyskać co 5 sekund, przez które wywołania.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-301">In this example, the Tumbling window consists of 5-second intervals, so you will get a count by country for every 5 seconds' worth of calls.</span></span>

2. <span data-ttu-id="5c2b8-302">Kliknij przycisk **testu** ponownie.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-302">Click **Test** again.</span></span> <span data-ttu-id="5c2b8-303">W wynikach, zwróć uwagę, że sygnatury czasowe w obszarze **WindowEnd** w przyrostach 5 sekund.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-303">In the results, notice that the timestamps under **WindowEnd** are in 5-second increments.</span></span>

    ![Zadania Stream Analytics dane wyjściowe do agregacji, wyświetlanie rekordów 13 wygenerowany](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-aggregation.png)
 
### <a name="detect-sim-fraud-using-a-self-join"></a><span data-ttu-id="5c2b8-305">Wykrywanie oszustw SIM przy użyciu samosprzężenie</span><span class="sxs-lookup"><span data-stu-id="5c2b8-305">Detect SIM fraud using a self-join</span></span>

<span data-ttu-id="5c2b8-306">Na przykład firma Microsoft należy rozważyć użycie fałszywych jako wywołania, które pochodzą z tego samego użytkownika, ale w różnych lokalizacjach w ciągu 5 sekund od siebie.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-306">For this example, we can consider fraudulent usage to be calls that originate from the same user but in different locations within 5 seconds of one another.</span></span> <span data-ttu-id="5c2b8-307">Na przykład tego samego użytkownika nie legalnie wywoływania z USA i klientów w Australii w tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-307">For example, the same user can't legitimately make a call from the US and Australia at the same time.</span></span> 

<span data-ttu-id="5c2b8-308">Aby sprawdzić, czy te przypadki, umożliwia samosprzężenia potrzebne dane przesyłane strumieniowo przyłączyć się do samego siebie na podstawie strumienia `CallRecTime` wartość.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-308">To check for these cases, you can use a self-join of the streaming data to join the stream to itself based on the `CallRecTime` value.</span></span> <span data-ttu-id="5c2b8-309">Następnie można wyszukać wywołania rekordy, w których `CallingIMSI` wartość (liczba źródłowego) jest taka sama, ale `SwitchNum` wartość (kraj pochodzenia) nie jest taka sama.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-309">You can then look for call records where the `CallingIMSI` value (the originating number) is the same, but the `SwitchNum` value (country of origin) is not the same.</span></span>

<span data-ttu-id="5c2b8-310">Gdy używasz sprzężenia na danych przesyłanych strumieniowo sprzężenie należy udostępnić niektóre limity, jak daleko pasujących wierszy mogą być oddzielone w czasie.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-310">When you use a join with streaming data, the join must provide some limits on how far the matching rows can be separated in time.</span></span> <span data-ttu-id="5c2b8-311">(Jak wspomniano wcześniej, dane przesyłane strumieniowo to skutecznie nieskończone). Granice czasu dla relacji są określone wewnątrz `ON` klauzuli sprzężenia, przy użyciu `DATEDIFF` funkcji.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-311">(As noted earlier, the streaming data is effectively endless.) The time bounds for the relationship are specified inside the `ON` clause of the join, using the `DATEDIFF` function .</span></span> <span data-ttu-id="5c2b8-312">W takim przypadku sprzężenia jest oparta na interwał 5 sekund, połączenie danych.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-312">In this case, the join is based on a 5-second interval of call data .</span></span>

1. <span data-ttu-id="5c2b8-313">Zmień zapytanie w edytorze kodu do następującego:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-313">Change the query in the code editor to the following:</span></span> 

        SELECT  System.Timestamp as Time, 
            CS1.CallingIMSI, 
            CS1.CallingNum as CallingNum1, 
            CS2.CallingNum as CallingNum2, 
            CS1.SwitchNum as Switch1, 
            CS2.SwitchNum as Switch2 
        FROM CallStream CS1 TIMESTAMP BY CallRecTime 
            JOIN CallStream CS2 TIMESTAMP BY CallRecTime 
            ON CS1.CallingIMSI = CS2.CallingIMSI 
            AND DATEDIFF(ss, CS1, CS2) BETWEEN 1 AND 5 
        WHERE CS1.SwitchNum != CS2.SwitchNum

    <span data-ttu-id="5c2b8-314">To zapytanie jest podobna wszelkich sprzężenia SQL, z wyjątkiem `DATEDIFF` funkcja sprzężenia.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-314">This query is like any SQL join except for the `DATEDIFF` function in the join.</span></span> <span data-ttu-id="5c2b8-315">To jest wersja `DATEDIFF` jest specyficzne dla analizy przesyłania strumieniowego i musi znajdować się w `ON...BETWEEN` klauzuli.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-315">This is a version of `DATEDIFF` that's specific to Streaming Analytics, and it must appear in the `ON...BETWEEN` clause.</span></span> <span data-ttu-id="5c2b8-316">Parametry są jednostka czasu (w sekundach w tym przykładzie) i aliasy dwóch źródeł w celu utworzenia sprzężenia.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-316">The parameters are a time unit (seconds in this example) and the aliases of the two sources for the join.</span></span> <span data-ttu-id="5c2b8-317">(Ta różni się od standardowego SQL `DATEDIFF` funkcji.)</span><span class="sxs-lookup"><span data-stu-id="5c2b8-317">(This is different from the standard SQL `DATEDIFF` function.)</span></span> 

    <span data-ttu-id="5c2b8-318">`WHERE` Klauzula zawiera warunek, który flagi fałszywych wywołania: przełączniki źródłowego nie są takie same.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-318">The `WHERE` clause includes the condition that flags the fraudulent call: the originating switches are not the same.</span></span> 

2. <span data-ttu-id="5c2b8-319">Kliknij przycisk **testu** ponownie.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-319">Click **Test** again.</span></span> 

    ![Dane wyjściowe samosprzężenie, wyświetlony 6 rekordy generowane zadania Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-self-join.png)

3. <span data-ttu-id="5c2b8-321">Kliknij pozycję **Zapisz**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-321">Click **Save**.</span></span> <span data-ttu-id="5c2b8-322">Spowoduje to zapisanie samosprzężenie zapytania jako część zadania przesyłania strumieniowego Analytics.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-322">This saves the self-join query as part of the Streaming Analytics job.</span></span> <span data-ttu-id="5c2b8-323">(Nie zostanie on zapisany przykładowe dane).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-323">(It doesn't save the sample data.)</span></span>

    ![Zapisz zadanie usługi analiza strumienia](./media/stream-analytics-real-time-fraud-detection/stream-analytics-query-editor-save-button-new-portal.png)

## <a name="create-an-output-sink-to-store-transformed-data"></a><span data-ttu-id="5c2b8-325">Utwórz ujście danych wyjściowych do przechowywania przekształcone dane</span><span class="sxs-lookup"><span data-stu-id="5c2b8-325">Create an output sink to store transformed data</span></span>

<span data-ttu-id="5c2b8-326">Zdefiniowany przez użytkownika strumienia zdarzeń Centrum zdarzeń wejście do pozyskiwania zdarzenia i zapytanie w celu wykonania transformację przez strumień.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-326">You've defined an event stream, an event hub input to ingest events, and a query to perform a transformation over the stream.</span></span> <span data-ttu-id="5c2b8-327">Ostatnim krokiem jest zdefiniowanie ujście danych wyjściowych zadania, czyli miejsce do przekształcony potok do zapisu.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-327">The last step is to define an output sink for the job—that is, a place to write the transformed stream to.</span></span> 

<span data-ttu-id="5c2b8-328">Wiele zasobów można używać jako dane wyjściowe wychwytywanie — bazy danych programu SQL Server, Magazyn tabel, Data Lake storage, usługi Power BI i nawet innej Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-328">You can use many resources as output sinks—a SQL Server database, table storage, Data Lake storage, Power BI, and even another event hub.</span></span> <span data-ttu-id="5c2b8-329">W tym samouczku przedstawiono tworzenie strumienia do magazynu obiektów Blob Azure, co typowe nadaje się do zbierania informacji o zdarzeniach dotyczących późniejszej analizy, ponieważ bierze pod uwagę danych bez struktury.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-329">For this tutorial, you'll write the stream to Azure Blob Storage, which is a typical choice for collecting event information for later analysis, since it accommodates unstructured data .</span></span>

<span data-ttu-id="5c2b8-330">Jeśli masz istniejące konto magazynu obiektów blob, można użyć, który.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-330">If you have an existing blob storage account, you can use that.</span></span> <span data-ttu-id="5c2b8-331">W tym samouczku pokażemy ci Tworzenie nowego konta magazynu tylko do celów tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-331">For this tutorial, we'll show you how to create a new storage account just for this tutorial.</span></span>

### <a name="create-an-azure-blob-storage-account"></a><span data-ttu-id="5c2b8-332">Tworzenie konta usługi Magazyn obiektów Blob Azure</span><span class="sxs-lookup"><span data-stu-id="5c2b8-332">Create an Azure Blob Storage account</span></span>

1. <span data-ttu-id="5c2b8-333">W portalu Azure wróć do bloku zadanie analizy przesyłania strumieniowego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-333">In the Azure portal, return to the Streaming Analytics job blade.</span></span> <span data-ttu-id="5c2b8-334">(Jeśli został zamknięty bloku, wyszukaj `sa_frauddetection_job_demo` w **wszystkie zasoby** bloku.)</span><span class="sxs-lookup"><span data-stu-id="5c2b8-334">(If you closed the blade, search for `sa_frauddetection_job_demo` in the **All resources** blade.)</span></span>
2. <span data-ttu-id="5c2b8-335">W **topologii zadania** kliknij **dane wyjściowe** pole.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-335">In the **Job Topology** section, click the **Output** box.</span></span> 
3. <span data-ttu-id="5c2b8-336">W **dane wyjściowe** bloku, kliknij przycisk  **+ &nbsp;Dodaj** , a następnie wypełnij bloku z tymi wartościami:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-336">In the **Outputs** blade, click **+&nbsp;Add** and then fill out the blade with these values:</span></span>

    * <span data-ttu-id="5c2b8-337">**Alias wyjściowy**: Użyj nazwy `CallStream-FraudulentCalls`.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-337">**Output alias**: Use the name `CallStream-FraudulentCalls`.</span></span> 
    * <span data-ttu-id="5c2b8-338">**Obiekt sink**: Wybierz **magazynu obiektów Blob**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-338">**Sink**: Select **Blob storage**.</span></span>
    * <span data-ttu-id="5c2b8-339">**Opcje importowania**: Wybierz **Użyj magazynu obiektów blob z bieżącej subskrypcji**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-339">**Import options**: Select **Use blob storage from current subscription**.</span></span>
    * <span data-ttu-id="5c2b8-340">**Konto magazynu**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-340">**Storage account**.</span></span> <span data-ttu-id="5c2b8-341">Wybierz **Utwórz nowe konto magazynu.**</span><span class="sxs-lookup"><span data-stu-id="5c2b8-341">Select **Create new storage account.**</span></span>
    * <span data-ttu-id="5c2b8-342">**Konto magazynu** (drugie pole).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-342">**Storage account** (second box).</span></span> <span data-ttu-id="5c2b8-343">Wprowadź `YOURNAMEsademo`, gdzie `YOURNAME` jest nazwa użytkownika lub inny unikatowy ciąg.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-343">Enter `YOURNAMEsademo`, where `YOURNAME` is your name or another unique string.</span></span> <span data-ttu-id="5c2b8-344">Nazwę można użyć tylko małe litery i cyfry, i między Azure musi być unikatowa.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-344">The name can use only lowercase letters and numbers, and it must be unique across Azure.</span></span> 
    * <span data-ttu-id="5c2b8-345">**Kontener**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-345">**Container**.</span></span> <span data-ttu-id="5c2b8-346">Wprowadź `sa-fraudulentcalls-demo`.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-346">Enter `sa-fraudulentcalls-demo`.</span></span>
    <span data-ttu-id="5c2b8-347">Nazwa konta magazynu i nazwę kontenera są używane razem zapewnienie identyfikator URI magazynu obiektów blob, jak to:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-347">The storage account name and container name are used together to provide a URI for the blob storage, like this:</span></span> 

    `http://yournamesademo.blob.core.windows.net/sa-fraudulentcalls-demo/...`
    
    ![Blok "Nowe dane wyjściowe" zadania usługi analiza strumienia](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-output-blob-storage-new-console.png)
    
4. <span data-ttu-id="5c2b8-349">Kliknij przycisk **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-349">Click **Create**.</span></span> 

    <span data-ttu-id="5c2b8-350">Azure tworzy konto magazynu i automatycznie generuje klucz.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-350">Azure creates the storage account and generates a key automatically.</span></span> 

5. <span data-ttu-id="5c2b8-351">Zamknij **dane wyjściowe** bloku.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-351">Close the **Outputs** blade.</span></span> 

## <a name="start-the-streaming-analytics-job"></a><span data-ttu-id="5c2b8-352">Uruchom zadanie analizy przesyłania strumieniowego</span><span class="sxs-lookup"><span data-stu-id="5c2b8-352">Start the Streaming Analytics job</span></span>

<span data-ttu-id="5c2b8-353">Zadanie jest teraz skonfigurowany.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-353">The job is now configured.</span></span> <span data-ttu-id="5c2b8-354">Zostały określone dane wejściowe (Centrum zdarzeń), transformacji (zapytanie do wyszukania fałszywych wywołań) i danych wyjściowych (magazynu obiektów blob).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-354">You've specified an input (the event hub), a transformation (the query to look for fraudulent calls), and an output (blob storage).</span></span> <span data-ttu-id="5c2b8-355">Można teraz uruchomić zadania.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-355">You can now start the job.</span></span> 

1. <span data-ttu-id="5c2b8-356">Upewnij się, że aplikacja TelcoGenerator jest uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-356">Make sure the TelcoGenerator app is running.</span></span>

2. <span data-ttu-id="5c2b8-357">W bloku zadania kliknij **Start**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-357">In the job blade, click **Start**.</span></span>

    ![Uruchom zadanie usługi analiza strumienia](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-output.png)

3. <span data-ttu-id="5c2b8-359">W **rozpoczęcia zadania** bloku dla danych wyjściowych czas uruchomienia zadania, wybierz opcję **teraz**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-359">In the **Start job** blade, for Job output start time, select **Now**.</span></span> 

4. <span data-ttu-id="5c2b8-360">Kliknij przycisk **Start**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-360">Click **Start**.</span></span> 

    ![Blok "Uruchomić zadanie" zadania usługi analiza strumienia](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-job-blade.png)

    <span data-ttu-id="5c2b8-362">Azure umożliwia powiadomienie, gdy zadanie została uruchomiona, a następnie w bloku zadania stan jest wyświetlany jako **systemem**.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-362">Azure notifies you when the job has started, and in the job blade, the status is displayed as **Running**.</span></span>

    ![Stan zadania Stream Analytics, przedstawiający "Uruchomiona"](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-running-status.png)
    

## <a name="examine-the-transformed-data"></a><span data-ttu-id="5c2b8-364">Sprawdź przekształcone dane</span><span class="sxs-lookup"><span data-stu-id="5c2b8-364">Examine the transformed data</span></span>

<span data-ttu-id="5c2b8-365">Masz teraz pełną zadanie analizy przesyłania strumieniowego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-365">You now have a complete Streaming Analytics job.</span></span> <span data-ttu-id="5c2b8-366">Zadanie jest badanie strumienia metadanych rozmowy telefonicznej, wyszukiwanie fałszywych rozmowy telefoniczne w czasie rzeczywistym i zapisywania informacji o fałszywych wywołań do magazynu.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-366">The job is examining a stream of phone call metadata, looking for fraudulent phone calls in real time, and writing information about those fraudulent calls to storage.</span></span> 

<span data-ttu-id="5c2b8-367">Do ukończenia tego samouczka można znaleźć w danych są przechwytywane przez zadanie analizy przesyłania strumieniowego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-367">To complete this tutorial, you might want to look at the data being captured by the Streaming Analytics job.</span></span> <span data-ttu-id="5c2b8-368">Dane są zapisywane do magazynu Azure w blogu w fragmentów (pliki).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-368">The data is being written to Azure Blog Storage in chunks (files).</span></span> <span data-ttu-id="5c2b8-369">Można użyć dowolnego narzędzia, które odczytuje magazynu obiektów Blob Azure.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-369">You can use any tool that reads Azure Blob Storage.</span></span> <span data-ttu-id="5c2b8-370">Jak wspomniano w sekcji wymagania wstępne, można użyć rozszerzeń Azure w programie Visual Studio lub skorzystać z narzędzia, takiego jak [Eksploratora usługi Storage Azure](http://storageexplorer.com/) lub [Eksploratora Azure](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-370">As noted in the Prerequisites section, you can use Azure extensions in Visual Studio, or you can use a tool like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

<span data-ttu-id="5c2b8-371">Po sprawdzeniu zawartości pliku w magazynie obiektów blob, zostanie wyświetlony ekran podobny do następującego:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-371">When you examine the contents of a file in blob storage, you see something like the following :</span></span>

![Magazyn obiektów blob platformy Azure z analizy strumienia wyjściowego](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-blob-storage-view.png)
 

## <a name="clean-up-resources"></a><span data-ttu-id="5c2b8-373">Oczyszczanie zasobów</span><span class="sxs-lookup"><span data-stu-id="5c2b8-373">Clean up resources</span></span>

<span data-ttu-id="5c2b8-374">Mamy dodatkowe artykuły, które kontynuować ze scenariuszem wykrywania oszustw, które korzystają z zasobów, które zostały utworzone w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-374">We have additional articles that continue with the fraud-detection scenario and that use the resources that you've created in this tutorial.</span></span> <span data-ttu-id="5c2b8-375">Jeśli chcesz kontynuować, zobacz sugestie pod **następne kroki** później.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-375">If you want to continue, see the suggestions under **Next steps** later.</span></span>

<span data-ttu-id="5c2b8-376">Jednak jeśli wszystko będzie gotowe, a nie ma potrzeby zasoby, które zostały utworzone, można usunąć je, aby nie wiąże się z opłatami Azure niepotrzebne.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-376">However, if you're done and you don't need the resources you've created, you can delete them so that you don't incur unnecessary Azure charges.</span></span> <span data-ttu-id="5c2b8-377">W takim przypadku zaleca się wykonanie następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-377">In that case, we suggest that you do the following:</span></span>

1. <span data-ttu-id="5c2b8-378">Zatrzymaj zadanie analizy przesyłania strumieniowego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-378">Stop the Streaming Analytics job.</span></span> <span data-ttu-id="5c2b8-379">W **zadania** bloku, kliknij przycisk **zatrzymać** u góry.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-379">In the **Jobs** blade, click **Stop** at the top.</span></span>
2. <span data-ttu-id="5c2b8-380">Zatrzymaj Telco Generator aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-380">Stop the Telco Generator app.</span></span> <span data-ttu-id="5c2b8-381">W oknie polecenia, w którym uruchomiono aplikację naciśnij klawisze Ctrl + C.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-381">In the command window where you started the app, press Ctrl+C.</span></span>
3. <span data-ttu-id="5c2b8-382">Jeśli utworzono nowe konto magazynu obiektów blob tylko do celów tego samouczka, należy ją usunąć.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-382">If you created a new blob storage account just for this tutorial, delete it.</span></span> 
4. <span data-ttu-id="5c2b8-383">Usuń zadanie analizy przesyłania strumieniowego.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-383">Delete the Streaming Analytics job.</span></span>
5. <span data-ttu-id="5c2b8-384">Usuń Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-384">Delete the event hub.</span></span>
6. <span data-ttu-id="5c2b8-385">Usuń przestrzeń nazw Centrum zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-385">Delete the event hub namespace.</span></span>

## <a name="get-support"></a><span data-ttu-id="5c2b8-386">Uzyskiwanie pomocy technicznej</span><span class="sxs-lookup"><span data-stu-id="5c2b8-386">Get support</span></span>

<span data-ttu-id="5c2b8-387">Aby uzyskać dodatkową pomoc, spróbuj naszych [forum usługi Azure Stream Analytics](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-387">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="5c2b8-388">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="5c2b8-388">Next steps</span></span>

<span data-ttu-id="5c2b8-389">Można kontynuować tego samouczka z następujących artykułów:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-389">You can continue this tutorial with the following articles:</span></span>

* <span data-ttu-id="5c2b8-390">[Strumienia analizy i usługi Power BI: pulpitu nawigacyjnego analytics w czasie rzeczywistym do strumieniowego przesyłania danych](stream-analytics-power-bi-dashboard.md).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-390">[Stream Analytics and Power BI: A real-time analytics dashboard for streaming data](stream-analytics-power-bi-dashboard.md).</span></span> <span data-ttu-id="5c2b8-391">W tym artykule przedstawiono sposób wysyłania TelCo dane wyjściowe zadania Stream Analytics z usługą Power BI w czasie rzeczywistym wizualizacji i analizy.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-391">This article shows you how to send the TelCo output of the Stream Analytics job to Power BI for real-time visualization and analysis.</span></span>
* <span data-ttu-id="5c2b8-392">[Jak przechowywać dane z usługi Azure Stream Analytics w pamięci podręcznej Redis Azure za pomocą usługi Azure Functions](stream-analytics-functions-redis.md).</span><span class="sxs-lookup"><span data-stu-id="5c2b8-392">[How to store data from Azure Stream Analytics in an Azure Redis Cache using Azure Functions](stream-analytics-functions-redis.md).</span></span> <span data-ttu-id="5c2b8-393">W tym artykule pokazano, jak użyć usługi Azure Functions, aby zapisać fałszywych wywołań Azure pamięcią podręczną Redis za pośrednictwem kolejki usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="5c2b8-393">This article shows how to use Azure Functions to write fraudulent calls to an Azure Redis cache via a Service Bus queue.</span></span>

<span data-ttu-id="5c2b8-394">Aby uzyskać więcej informacji na temat usługi Stream Analytics ogólnie rzecz biorąc, wypróbuj następujące artykuły:</span><span class="sxs-lookup"><span data-stu-id="5c2b8-394">For more information about Stream Analytics in general, try these articles:</span></span>

* [<span data-ttu-id="5c2b8-395">Wprowadzenie do usługi Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="5c2b8-395">Introduction to Azure Stream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="5c2b8-396">Scale Azure Stream Analytics jobs (Skalowanie zadań usługi Azure Stream Analytics)</span><span class="sxs-lookup"><span data-stu-id="5c2b8-396">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="5c2b8-397">Azure Stream Analytics Query Language Reference (Dokumentacja dotycząca języka zapytań usługi Azure Stream Analytics)</span><span class="sxs-lookup"><span data-stu-id="5c2b8-397">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="5c2b8-398">Azure Stream Analytics Management REST API Reference (Dokumentacja interfejsu API REST zarządzania usługą Azure Stream Analytics)</span><span class="sxs-lookup"><span data-stu-id="5c2b8-398">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
