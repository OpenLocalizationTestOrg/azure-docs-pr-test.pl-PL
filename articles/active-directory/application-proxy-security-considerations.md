---
title: "aaaSecurity zagadnienia dotyczące serwera Proxy aplikacji usługi Azure AD | Dokumentacja firmy Microsoft"
description: "Obejmuje zagadnienia dotyczące zabezpieczeń dla przy użyciu serwera Proxy aplikacji usługi Azure AD"
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: ebd14b9d1fc8f4629c5916e5a910595727d935d5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="security-considerations-for-accessing-apps-remotely-with-azure-ad-application-proxy"></a><span data-ttu-id="181f0-103">Zagadnienia dotyczące zabezpieczeń w celu uzyskania dostępu do aplikacji zdalnie z serwera Proxy aplikacji usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="181f0-103">Security considerations for accessing apps remotely with Azure AD Application Proxy</span></span>

<span data-ttu-id="181f0-104">W tym artykule opisano, jak serwer Proxy usługi Azure Active Directory aplikacji udostępnia usługa bezpiecznego publikowania i zdalny dostęp do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="181f0-104">This article explains how Azure Active Directory Application Proxy provides a secure service for publishing and accessing your applications remotely.</span></span>

<span data-ttu-id="181f0-105">powitania po diagramie przedstawiono sposób usługi Azure AD umożliwia aplikacji lokalnych tooyour bezpieczny dostęp zdalny.</span><span class="sxs-lookup"><span data-stu-id="181f0-105">hello following diagram shows how Azure AD enables secure remote access tooyour on-premises applications.</span></span>

 ![Diagram bezpieczny dostęp zdalny za pośrednictwem serwera Proxy aplikacji usługi Azure AD](./media/application-proxy-security-considerations/secure-remote-access.png)

## <a name="security-benefits"></a><span data-ttu-id="181f0-107">Korzyści w zakresie zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="181f0-107">Security benefits</span></span>

<span data-ttu-id="181f0-108">Serwer Proxy aplikacji usługi Azure AD oferują hello następujące korzyści w zakresie zabezpieczeń:</span><span class="sxs-lookup"><span data-stu-id="181f0-108">Azure AD Application Proxy offers hello following security benefits:</span></span>

### <a name="authenticated-access"></a><span data-ttu-id="181f0-109">Uwierzytelniony dostęp</span><span class="sxs-lookup"><span data-stu-id="181f0-109">Authenticated access</span></span> 

<span data-ttu-id="181f0-110">Jeśli toouse usługi Azure Active Directory wstępnego uwierzytelniania, następnie tylko uwierzytelnionego połączenia można uzyskać dostęp do sieci.</span><span class="sxs-lookup"><span data-stu-id="181f0-110">If you choose toouse Azure Active Directory preauthentication, then only authenticated connections can access your network.</span></span>

<span data-ttu-id="181f0-111">Serwer Proxy aplikacji usługi Azure AD zależy od hello Azure AD usługi tokenu zabezpieczającego (STS) do wszystkich uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="181f0-111">Azure AD Application Proxy relies on hello Azure AD security token service (STS) for all authentication.</span></span>  <span data-ttu-id="181f0-112">Wstępnego uwierzytelniania, ze swej natury blokuje znaczących anonimowe ataki, ponieważ tylko uwierzytelnionych tożsamości można uzyskać dostępu do aplikacji zaplecza hello.</span><span class="sxs-lookup"><span data-stu-id="181f0-112">Preauthentication, by its very nature, blocks a significant number of anonymous attacks, because only authenticated identities can access hello back-end application.</span></span>

<span data-ttu-id="181f0-113">Jeśli wybierzesz Passthrough jako metody uwierzytelniania wstępnego nie pobieraj takich korzyści.</span><span class="sxs-lookup"><span data-stu-id="181f0-113">If you choose Passthrough as your preauthentication method, you don't get this benefit.</span></span> 

### <a name="conditional-access"></a><span data-ttu-id="181f0-114">Dostęp warunkowy</span><span class="sxs-lookup"><span data-stu-id="181f0-114">Conditional access</span></span>

<span data-ttu-id="181f0-115">Zastosowanie bardziej zaawansowane funkcje kontroli zasad przed tooyour sieciowe są wyznaczane połączenia.</span><span class="sxs-lookup"><span data-stu-id="181f0-115">Apply richer policy controls before connections tooyour network are established.</span></span>

<span data-ttu-id="181f0-116">Z [dostępu warunkowego](active-directory-conditional-access-azuread-connected-apps.md), można zdefiniować ograniczenia w jaki ruch jest dozwolony tooaccess aplikacji zaplecza.</span><span class="sxs-lookup"><span data-stu-id="181f0-116">With [conditional access](active-directory-conditional-access-azuread-connected-apps.md), you can define restrictions on what traffic is allowed tooaccess your back-end applications.</span></span> <span data-ttu-id="181f0-117">Można utworzyć zasady, które ograniczają logowania na podstawie lokalizacji, siły uwierzytelniania i profil użytkownika ryzyka.</span><span class="sxs-lookup"><span data-stu-id="181f0-117">You can create policies that restrict sign-ins based on location, strength of authentication, and user risk profile.</span></span>

<span data-ttu-id="181f0-118">Umożliwia także zasady dostępu warunkowego tooconfigure uwierzytelnianie wieloskładnikowe, dodając kolejną warstwę zabezpieczeń tooyour użytkownika uwierzytelnienia.</span><span class="sxs-lookup"><span data-stu-id="181f0-118">You can also use conditional access tooconfigure Multi-Factor Authentication policies, adding another layer of security tooyour user authentications.</span></span> 

### <a name="traffic-termination"></a><span data-ttu-id="181f0-119">Zakończenie ruchu</span><span class="sxs-lookup"><span data-stu-id="181f0-119">Traffic termination</span></span>

<span data-ttu-id="181f0-120">Cały ruch zakończeniem w chmurze hello.</span><span class="sxs-lookup"><span data-stu-id="181f0-120">All traffic is terminated in hello cloud.</span></span>

<span data-ttu-id="181f0-121">Ponieważ serwera Proxy aplikacji usługi Azure AD jest wstecznego serwera proxy, wszystkie aplikacje tooback-end ruchu jest kończona na powitania usługi.</span><span class="sxs-lookup"><span data-stu-id="181f0-121">Because Azure AD Application Proxy is a reverse-proxy, all traffic tooback-end applications is terminated at hello service.</span></span> <span data-ttu-id="181f0-122">Witaj sesji można pobrać przywróciła tylko z serwerem zaplecza hello, co oznacza, że serwery zaplecza nie są widoczne ruchu toodirect HTTP.</span><span class="sxs-lookup"><span data-stu-id="181f0-122">hello session can get reestablished only with hello back-end server, which means that your back-end servers are not exposed toodirect HTTP traffic.</span></span> <span data-ttu-id="181f0-123">Ta konfiguracja oznacza lepszej ochrony przed atakami ukierunkowanymi.</span><span class="sxs-lookup"><span data-stu-id="181f0-123">This configuration means that you are better protected from targeted attacks.</span></span>

### <a name="all-access-is-outbound"></a><span data-ttu-id="181f0-124">Dostęp jest wychodzący</span><span class="sxs-lookup"><span data-stu-id="181f0-124">All access is outbound</span></span> 

<span data-ttu-id="181f0-125">Nie trzeba tooopen sieci firmowej toohello połączeń przychodzących.</span><span class="sxs-lookup"><span data-stu-id="181f0-125">You don't need tooopen inbound connections toohello corporate network.</span></span>

<span data-ttu-id="181f0-126">Łączniki serwera Proxy aplikacji należy używać tylko połączeń wychodzących toohello usługi Azure AD serwera Proxy aplikacji usługi, co oznacza, że nie jest konieczne tooopen portów zapory dla połączeń przychodzących.</span><span class="sxs-lookup"><span data-stu-id="181f0-126">Application Proxy connectors only use outbound connections toohello Azure AD Application Proxy service, which means that there is no need tooopen firewall ports for incoming connections.</span></span> <span data-ttu-id="181f0-127">Serwery proxy tradycyjnych wymagane sieci obwodowej (znanej także jako *DMZ*, *strefą zdemilitaryzowaną*, lub *podsiecią ekranowaną*) i dozwolone toounauthenticated dostępu połączenia na krawędzi sieci hello.</span><span class="sxs-lookup"><span data-stu-id="181f0-127">Traditional proxies required a perimeter network (also known as *DMZ*, *demilitarized zone*, or *screened subnet*) and allowed access toounauthenticated connections at hello network edge.</span></span> <span data-ttu-id="181f0-128">Ten scenariusz wymaga wiele dodatkowych inwestycji w aplikacji sieci web zapory ruchu tooanalyze produktów, a oferują dodanie ochrony toohello środowiska.</span><span class="sxs-lookup"><span data-stu-id="181f0-128">This scenario required many additional investments in web application firewall products tooanalyze traffic and offer addition protections toohello environment.</span></span> <span data-ttu-id="181f0-129">Przy użyciu serwera Proxy aplikacji nie wymagają sieci obwodowej, ponieważ wszystkie połączenia są wychodzących i odbywać za pośrednictwem bezpiecznego kanału.</span><span class="sxs-lookup"><span data-stu-id="181f0-129">With Application Proxy, you don't need a perimeter network because all connections are outbound and take place over a secure channel.</span></span>

<span data-ttu-id="181f0-130">Aby uzyskać więcej informacji na temat łączników, zobacz [łączniki serwera Proxy aplikacji usługi AD zrozumieć Azure](application-proxy-understand-connectors.md).</span><span class="sxs-lookup"><span data-stu-id="181f0-130">For more information about connectors, see [Understand Azure AD Application Proxy connectors](application-proxy-understand-connectors.md).</span></span>

### <a name="cloud-scale-analytics-and-machine-learning"></a><span data-ttu-id="181f0-131">Analizy skali chmury i uczenia maszynowego</span><span class="sxs-lookup"><span data-stu-id="181f0-131">Cloud-scale analytics and machine learning</span></span> 

<span data-ttu-id="181f0-132">Pobierz najnowocześniejsze zabezpieczenia.</span><span class="sxs-lookup"><span data-stu-id="181f0-132">Get cutting-edge security protection.</span></span>

<span data-ttu-id="181f0-133">Ponieważ jest częścią usługi Azure Active Directory, mogą korzystać z serwera Proxy aplikacji [Azure AD Identity Protection](active-directory-identityprotection.md), machine learning-driven analizy i danych z hello Microsoft Security Response Center i jednostki.</span><span class="sxs-lookup"><span data-stu-id="181f0-133">Because it's part of Azure Active Directory, Application Proxy can leverage [Azure AD Identity Protection](active-directory-identityprotection.md), with machine learning-driven intelligence and data from hello Microsoft Security Response Center and Digital Crimes Unit.</span></span> <span data-ttu-id="181f0-134">Razem możemy aktywne identyfikowanie złamany kont i zapewniają ochronę w czasie rzeczywistym z logowania o wysokim ryzyku. Firma Microsoft uwzględniać wiele czynników, takich jak dostęp z zainfekowanych urządzeń przez nadanie sieci i lokalizacje nietypowe i prawdopodobne.</span><span class="sxs-lookup"><span data-stu-id="181f0-134">Together we proactively identify compromised accounts and offer real-time protection from high-risk sign-ins. We take into account numerous factors, such as access from infected devices, through anonymizing networks, and from atypical and unlikely locations.</span></span>

<span data-ttu-id="181f0-135">Wiele z tych raportów i zdarzenia są już dostępne za pośrednictwem interfejsu API dla integracji z informacji o zabezpieczeniach i systemami zarządzania (SIEM) zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="181f0-135">Many of these reports and events are already available through an API for integration with your security information and event management (SIEM) systems.</span></span>

### <a name="remote-access-as-a-service"></a><span data-ttu-id="181f0-136">Dostęp zdalny w trybie usługi</span><span class="sxs-lookup"><span data-stu-id="181f0-136">Remote access as a service</span></span>

<span data-ttu-id="181f0-137">Nie masz tooworry o zachowaniu i stosowanie poprawek serwerów lokalnych.</span><span class="sxs-lookup"><span data-stu-id="181f0-137">You don’t have tooworry about maintaining and patching on-premises servers.</span></span>

<span data-ttu-id="181f0-138">Konta nadal atakowany oprogramowania dla dużej liczby ataków.</span><span class="sxs-lookup"><span data-stu-id="181f0-138">Unpatched software still accounts for a large number of attacks.</span></span> <span data-ttu-id="181f0-139">Serwer Proxy aplikacji usługi Azure AD jest usługi Internet skalowania, która jest właścicielem firmy Microsoft, dzięki czemu zawsze uzyskać hello najnowsze poprawki zabezpieczeń i aktualizacje.</span><span class="sxs-lookup"><span data-stu-id="181f0-139">Azure AD Application Proxy is an Internet-scale service that Microsoft owns, so you always get hello latest security patches and upgrades.</span></span>

<span data-ttu-id="181f0-140">tooimprove hello zabezpieczeń aplikacji opublikowanych przez serwer Proxy aplikacji usługi Azure AD, możemy zablokować robotów przez przeszukiwarkę sieci web do indeksowania i archiwizowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="181f0-140">tooimprove hello security of applications published by Azure AD Application Proxy, we block web crawler robots from indexing and archiving your applications.</span></span> <span data-ttu-id="181f0-141">Zawsze robota przez przeszukiwarkę sieci web próbuje pobrać ustawienia robota opublikowanej aplikacji, serwer Proxy aplikacji odpowiedzi z plikiem robots.txt, która obejmuje `User-agent: * Disallow: /`.</span><span class="sxs-lookup"><span data-stu-id="181f0-141">Each time a web crawler robot tries to retrieve the robot's settings for a published app, Application Proxy replies with a robots.txt file that includes `User-agent: * Disallow: /`.</span></span>

## <a name="under-hello-hood"></a><span data-ttu-id="181f0-142">Pod maską hello</span><span class="sxs-lookup"><span data-stu-id="181f0-142">Under hello hood</span></span>

<span data-ttu-id="181f0-143">Serwer Proxy aplikacji usługi Azure AD składa się z dwóch części:</span><span class="sxs-lookup"><span data-stu-id="181f0-143">Azure AD Application Proxy consists of two parts:</span></span>

* <span data-ttu-id="181f0-144">Witaj w usłudze w chmurze: ta usługa działa na platformie Azure i jest, gdzie powitania klienta/użytkownika zewnętrznego połączenia są nawiązywane.</span><span class="sxs-lookup"><span data-stu-id="181f0-144">hello cloud-based service: This service runs in Azure, and is where hello external client/user connections are made.</span></span>
* <span data-ttu-id="181f0-145">[Witaj łącznika lokalnego](application-proxy-understand-connectors.md): składnik lokalnego łącznika hello nasłuchuje żądań z usługi Serwer Proxy aplikacji hello Azure AD i obsługuje połączenia toohello wewnętrznych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="181f0-145">[hello on-premises connector](application-proxy-understand-connectors.md): An on-premises component, hello connector listens for requests from hello Azure AD Application Proxy service and handles connections toohello internal applications.</span></span> 

<span data-ttu-id="181f0-146">Przepływ między hello łącznika i usługę serwera Proxy aplikacji hello jest ustanawiane po:</span><span class="sxs-lookup"><span data-stu-id="181f0-146">A flow between hello connector and hello Application Proxy service is established when:</span></span>

* <span data-ttu-id="181f0-147">Łącznik Hello jest najpierw skonfigurować.</span><span class="sxs-lookup"><span data-stu-id="181f0-147">hello connector is first set up.</span></span>
* <span data-ttu-id="181f0-148">Łącznik Hello pobiera informacje o konfiguracji na powitania serwera Proxy aplikacji usługi.</span><span class="sxs-lookup"><span data-stu-id="181f0-148">hello connector pulls configuration information from hello Application Proxy service.</span></span>
* <span data-ttu-id="181f0-149">Użytkownik uzyskuje dostęp do opublikowanej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="181f0-149">A user accesses a published application.</span></span>

>[!NOTE]
><span data-ttu-id="181f0-150">Cała komunikacja odbywa się za pośrednictwem protokołu SSL, a pochodzą zawsze na powitania toohello łącznika serwera Proxy aplikacji usługi.</span><span class="sxs-lookup"><span data-stu-id="181f0-150">All communications occur over SSL, and they always originate at hello connector toohello Application Proxy service.</span></span> <span data-ttu-id="181f0-151">Usługa Hello jest tylko ruchu wychodzącego.</span><span class="sxs-lookup"><span data-stu-id="181f0-151">hello service is outbound only.</span></span>

<span data-ttu-id="181f0-152">Łącznik Hello używa toohello tooauthenticate certyfikatu klienta usługi Serwer Proxy aplikacji dla prawie wszystkich połączeń.</span><span class="sxs-lookup"><span data-stu-id="181f0-152">hello connector uses a client certificate tooauthenticate toohello Application Proxy service for nearly all calls.</span></span> <span data-ttu-id="181f0-153">Hello tylko wyjątek toothis proces jest hello kroku konfiguracji początkowej, której certyfikat klienta na powitania zostanie nawiązane.</span><span class="sxs-lookup"><span data-stu-id="181f0-153">hello only exception toothis process is hello initial setup step, where hello client certificate is established.</span></span>

### <a name="installing-hello-connector"></a><span data-ttu-id="181f0-154">Instalowanie łącznika hello</span><span class="sxs-lookup"><span data-stu-id="181f0-154">Installing hello connector</span></span>

<span data-ttu-id="181f0-155">Jeśli najpierw skonfigurowano łącznik hello hello następujących zdarzeń przepływu miejsce:</span><span class="sxs-lookup"><span data-stu-id="181f0-155">When hello connector is first set up, hello following flow events take place:</span></span>

1. <span data-ttu-id="181f0-156">Usługa toohello rejestracji łącznika Hello odbywa się w ramach instalacji hello hello łącznika.</span><span class="sxs-lookup"><span data-stu-id="181f0-156">hello connector registration toohello service happens as part of hello installation of hello connector.</span></span> <span data-ttu-id="181f0-157">Użytkownicy są tooenter zostanie wyświetlony monit o ich poświadczeń administratora usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="181f0-157">Users are prompted tooenter their Azure AD admin credentials.</span></span> <span data-ttu-id="181f0-158">Token z tego uwierzytelnienia zostanie przedstawiony toohello usługi serwera Proxy aplikacji usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="181f0-158">The token acquired from this authentication is then presented toohello Azure AD Application Proxy service.</span></span>
2. <span data-ttu-id="181f0-159">powitania serwera Proxy aplikacji usługi oblicza hello tokenu.</span><span class="sxs-lookup"><span data-stu-id="181f0-159">hello Application Proxy service evaluates hello token.</span></span> <span data-ttu-id="181f0-160">Zapewnia hello użytkownik jest administratorem firmy, w ramach dzierżawy hello, który hello token został wystawiony dla.</span><span class="sxs-lookup"><span data-stu-id="181f0-160">It ensures that hello user is a company administrator within hello tenant that hello token was issued for.</span></span> <span data-ttu-id="181f0-161">Jeśli użytkownik hello nie jest administratorem, hello proces zostanie zakończony.</span><span class="sxs-lookup"><span data-stu-id="181f0-161">If hello user is not an administrator, hello process is terminated.</span></span>
3. <span data-ttu-id="181f0-162">Łącznik Hello generuje żądanie certyfikatu klienta i przekazuje je, wraz z tokenu, toohello powitania serwera Proxy aplikacji usługi.</span><span class="sxs-lookup"><span data-stu-id="181f0-162">hello connector generates a client certificate request and passes it, along with hello token, toohello Application Proxy service.</span></span> <span data-ttu-id="181f0-163">Usługa Hello z kolei weryfikuje hello token i podpisuje żądanie certyfikatu powitania klienta.</span><span class="sxs-lookup"><span data-stu-id="181f0-163">hello service in turn verifies hello token and signs hello client certificate request.</span></span>
4. <span data-ttu-id="181f0-164">Łącznik Hello korzysta z certyfikatu klienta hello przyszłych komunikacji z powitania serwera Proxy aplikacji usługi.</span><span class="sxs-lookup"><span data-stu-id="181f0-164">hello connector uses hello client certificate for future communication with hello Application Proxy service.</span></span>
5. <span data-ttu-id="181f0-165">Łącznik Hello wykonuje początkowej ściągania danych konfiguracji systemu hello z hello usługi za pomocą swojego certyfikatu klienta, a jest teraz gotowy tootake żądań.</span><span class="sxs-lookup"><span data-stu-id="181f0-165">hello connector performs an initial pull of hello system configuration data from hello service using its client certificate, and it is now ready tootake requests.</span></span>

### <a name="updating-hello-configuration-settings"></a><span data-ttu-id="181f0-166">Aktualizowanie ustawień konfiguracji hello</span><span class="sxs-lookup"><span data-stu-id="181f0-166">Updating hello configuration settings</span></span>

<span data-ttu-id="181f0-167">Zawsze, gdy usługa serwera Proxy aplikacji hello aktualizuje ustawienia konfiguracji hello, hello następujących zdarzeń przepływu miejsce:</span><span class="sxs-lookup"><span data-stu-id="181f0-167">Whenever hello Application Proxy service updates hello configuration settings, hello following flow events take place:</span></span>

1. <span data-ttu-id="181f0-168">Łącznik Hello łączy punktu końcowego konfiguracji toohello w powitania serwera Proxy aplikacji usługi za pomocą swojego certyfikatu klienta.</span><span class="sxs-lookup"><span data-stu-id="181f0-168">hello connector connects toohello configuration endpoint within hello Application Proxy service by using its client certificate.</span></span>
2. <span data-ttu-id="181f0-169">Po zweryfikowaniu certyfikat klienta na powitania powitania serwera Proxy aplikacji usługi zwraca łącznik toohello danych konfiguracji (na przykład grupy łącznika hello hello łącznik powinien być częścią).</span><span class="sxs-lookup"><span data-stu-id="181f0-169">After hello client certificate has been validated, hello Application Proxy service returns configuration data toohello connector (for example, hello connector group that hello connector should be part of).</span></span>
3. <span data-ttu-id="181f0-170">Jeśli bieżący certyfikat hello jest więcej niż 180 dni, łącznik hello generuje żądania nowego certyfikatu, które skutecznie aktualizuje certyfikat klienta na powitania raz na 180 dni.</span><span class="sxs-lookup"><span data-stu-id="181f0-170">If hello current certificate is more than 180 days old, hello connector generates a new certificate request, which effectively updates hello client certificate every 180 days.</span></span>

### <a name="accessing-published-applications"></a><span data-ttu-id="181f0-171">Uzyskiwanie dostępu do opublikowanych aplikacji</span><span class="sxs-lookup"><span data-stu-id="181f0-171">Accessing published applications</span></span>

<span data-ttu-id="181f0-172">Gdy użytkownicy uzyskują dostęp do opublikowanej aplikacji, hello następujące zdarzenia miejsce między usługą Serwer Proxy aplikacji hello i łącznika serwera Proxy aplikacji hello:</span><span class="sxs-lookup"><span data-stu-id="181f0-172">When users access a published application, hello following events take place between hello Application Proxy service and hello Application Proxy connector:</span></span>

1. [<span data-ttu-id="181f0-173">Usługa Hello uwierzytelnia użytkownika hello aplikacji hello</span><span class="sxs-lookup"><span data-stu-id="181f0-173">hello service authenticates hello user for hello app</span></span>](#the-service-checks-the-configuration-settings-for-the-app)
2. [<span data-ttu-id="181f0-174">Usługa Hello umieszcza żądania w kolejce łącznika hello</span><span class="sxs-lookup"><span data-stu-id="181f0-174">hello service places a request in hello connector queue</span></span>](#The-service-places-a-request-in-the-connector-queue)
3. [<span data-ttu-id="181f0-175">Łącznik przetworzy żądanie hello z kolejki hello</span><span class="sxs-lookup"><span data-stu-id="181f0-175">A connector processes hello request from hello queue</span></span>](#the-connector-receives-the-request-from-the-queue)
4. [<span data-ttu-id="181f0-176">Łącznik Hello czeka na odpowiedź</span><span class="sxs-lookup"><span data-stu-id="181f0-176">hello connector waits for a response</span></span>](#the-connector-waits-for-a-response)
5. [<span data-ttu-id="181f0-177">Witaj usługi strumieni danych toohello użytkownika</span><span class="sxs-lookup"><span data-stu-id="181f0-177">hello service streams data toohello user</span></span>](#the-service-streams-data-to-the-user)

<span data-ttu-id="181f0-178">Zachowaj odczytu toolearn więcej informacji na temat co ma miejsce w każdej z tych kroków.</span><span class="sxs-lookup"><span data-stu-id="181f0-178">toolearn more about what takes place in each of these steps, keep reading.</span></span>


#### <a name="1-hello-service-authenticates-hello-user-for-hello-app"></a><span data-ttu-id="181f0-179">1. Witaj usługa uwierzytelnia użytkownika hello aplikacji hello</span><span class="sxs-lookup"><span data-stu-id="181f0-179">1. hello service authenticates hello user for hello app</span></span>

<span data-ttu-id="181f0-180">Jeśli toouse aplikacji hello Passthrough jest skonfigurowany jako metody uwierzytelniania wstępnego, są pomijane kroki hello w tej sekcji.</span><span class="sxs-lookup"><span data-stu-id="181f0-180">If you configured hello app toouse Passthrough as its preauthentication method, hello steps in this section are skipped.</span></span>

<span data-ttu-id="181f0-181">Jeśli toopreauthenticate aplikacji hello jest skonfigurowany z usługą Azure AD, użytkownicy są przekierowane toohello tooauthenticate STS usługi Azure AD i hello następujące kroki została wykonana:</span><span class="sxs-lookup"><span data-stu-id="181f0-181">If you configured hello app toopreauthenticate with Azure AD, users are redirected toohello Azure AD STS tooauthenticate, and hello following steps take place:</span></span>

1. <span data-ttu-id="181f0-182">Serwer Proxy aplikacji sprawdza, czy wszystkie wymagania dotyczące zasad dostępu warunkowego dla określonej aplikacji hello.</span><span class="sxs-lookup"><span data-stu-id="181f0-182">Application Proxy checks for any conditional access policy requirements for hello specific application.</span></span> <span data-ttu-id="181f0-183">Ten krok zapewnia, że użytkownik hello przypisano toohello aplikacji.</span><span class="sxs-lookup"><span data-stu-id="181f0-183">This step ensures that hello user has been assigned toohello application.</span></span> <span data-ttu-id="181f0-184">Jeśli wymagana jest weryfikacja dwuetapowa, hello uwierzytelniania sekwencji monituje użytkownika hello drugiej metody uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="181f0-184">If two-step verification is required, hello authentication sequence prompts hello user for a second authentication method.</span></span>

2. <span data-ttu-id="181f0-185">Po upływie wszystkie testy, hello Zabezpieczającego usług Azure AD wystawia token podpisanej aplikacji hello i przekierowuje hello toohello wstecz użytkownika serwera Proxy aplikacji usługi.</span><span class="sxs-lookup"><span data-stu-id="181f0-185">After all checks have passed, hello Azure AD STS issues a signed token for hello application and redirects hello user back toohello Application Proxy service.</span></span>

3. <span data-ttu-id="181f0-186">Serwer Proxy aplikacji sprawdza, czy hello token został wystawiony toocorrect hello aplikacji.</span><span class="sxs-lookup"><span data-stu-id="181f0-186">Application Proxy verifies that hello token was issued toocorrect hello application.</span></span> <span data-ttu-id="181f0-187">Wykonuje także inne kontrole, takich jak zapewnienie, że hello token został podpisany przez usługę Azure AD i że jest nadal okna hello prawidłowe.</span><span class="sxs-lookup"><span data-stu-id="181f0-187">It performs other checks also, such as ensuring that hello token was signed by Azure AD, and that it is still within hello valid window.</span></span>

4. <span data-ttu-id="181f0-188">Serwer Proxy aplikacji ustawia tooindicate pliku cookie uwierzytelniania szyfrowanego wystąpienia aplikacji toohello uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="181f0-188">Application Proxy sets an encrypted authentication cookie tooindicate that authentication toohello application has occurred.</span></span> <span data-ttu-id="181f0-189">Hello pliku cookie zawiera znacznik czasu wygaśnięcia, oparty na powitania token z usługi Azure AD i innych danych, takie jak nazwa użytkownika hello hello uwierzytelniania jest oparta na.</span><span class="sxs-lookup"><span data-stu-id="181f0-189">hello cookie includes an expiration timestamp that's based on hello token from Azure AD and other data, such as hello user name that hello authentication is based on.</span></span> <span data-ttu-id="181f0-190">Witaj plik cookie jest zaszyfrowany przy użyciu klucza prywatnego znane toohello serwera Proxy aplikacji usługi.</span><span class="sxs-lookup"><span data-stu-id="181f0-190">hello cookie is encrypted with a private key known only toohello Application Proxy service.</span></span>

5. <span data-ttu-id="181f0-191">Aplikacji serwera Proxy przekierowania hello użytkownika wstecz toohello pierwotnie żądanego adresu URL.</span><span class="sxs-lookup"><span data-stu-id="181f0-191">Application Proxy redirects hello user back toohello originally requested URL.</span></span>

<span data-ttu-id="181f0-192">W przypadku niepowodzenia dowolną część hello kroki wstępnego uwierzytelniania użytkownika hello żądanie zostanie odrzucone i użytkownika hello jest wyświetlany komunikat informujący o hello źródłem problemu hello.</span><span class="sxs-lookup"><span data-stu-id="181f0-192">If any part of hello preauthentication steps fails, hello user’s request is denied, and hello user is shown a message indicating hello source of hello problem.</span></span>


#### <a name="2-hello-service-places-a-request-in-hello-connector-queue"></a><span data-ttu-id="181f0-193">2. hello usługi umieszcza żądania w kolejce łącznika hello</span><span class="sxs-lookup"><span data-stu-id="181f0-193">2. hello service places a request in hello connector queue</span></span>

<span data-ttu-id="181f0-194">Łączniki Zachowaj toohello otwarte połączenia wychodzącego serwera Proxy aplikacji usługi.</span><span class="sxs-lookup"><span data-stu-id="181f0-194">Connectors keep an outbound connection open toohello Application Proxy service.</span></span> <span data-ttu-id="181f0-195">Gdy nadejdzie żądanie, usługi hello kolejkuje Żądanie hello na jednym z hello otwarte połączenia dla toopick łącznika hello w górę.</span><span class="sxs-lookup"><span data-stu-id="181f0-195">When a request comes in, hello service queues up hello request on one of hello open connections for hello connector toopick up.</span></span>

<span data-ttu-id="181f0-196">Żądanie hello zawiera elementy z aplikacji hello, takich jak nagłówki żądania hello, dane z pliku cookie hello zaszyfrowane, hello użytkownika hello żądanie i co hello żądań identyfikatora.</span><span class="sxs-lookup"><span data-stu-id="181f0-196">hello request includes items from hello application, such as hello request headers, data from hello encrypted cookie, hello user making hello request, and hello request ID.</span></span> <span data-ttu-id="181f0-197">Mimo że danych z zaszyfrowanego pliku cookie hello są wysyłane z żądaniem hello, nie jest hello uwierzytelniania samego pliku cookie.</span><span class="sxs-lookup"><span data-stu-id="181f0-197">Although data from hello encrypted cookie is sent with hello request, hello authentication cookie itself is not.</span></span>

#### <a name="3-hello-connector-processes-hello-request-from-hello-queue"></a><span data-ttu-id="181f0-198">3. hello łącznika przetwarza żądanie hello z hello kolejki.</span><span class="sxs-lookup"><span data-stu-id="181f0-198">3. hello connector processes hello request from hello queue.</span></span> 

<span data-ttu-id="181f0-199">Na podstawie hello żądania, serwer Proxy aplikacji wykonuje jeden z hello następujące akcje:</span><span class="sxs-lookup"><span data-stu-id="181f0-199">Based on hello request, Application Proxy performs one of hello following actions:</span></span>

* <span data-ttu-id="181f0-200">Jeśli Żądanie hello jest prostą operacją (na przykład, Brak danych w treści hello, ponieważ jest z RESTful *UZYSKAĆ* żądania), łącznik hello sprawia, że połączenie toohello wewnętrzny zasób docelowy i czeka na odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="181f0-200">If hello request is a simple operation (for example, there is no data within hello body as is with a RESTful *GET* request), hello connector makes a connection toohello target internal resource and then waits for a response.</span></span>

* <span data-ttu-id="181f0-201">Jeśli Żądanie hello ma danych skojarzonych z nim w treści hello (na przykład RESTful *POST* operacji), łącznik hello ustanawia wychodzące połączenie przy użyciu powitania klienta certyfikatu toohello serwera Proxy aplikacji wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="181f0-201">If hello request has data associated with it in hello body (for example, a RESTful *POST* operation), hello connector makes an outbound connection by using hello client certificate toohello Application Proxy instance.</span></span> <span data-ttu-id="181f0-202">Sprawia, że te dane hello toorequest połączenia, a otworzyć zasobu wewnętrznego toohello połączenia.</span><span class="sxs-lookup"><span data-stu-id="181f0-202">It makes this connection toorequest hello data and open a connection toohello internal resource.</span></span> <span data-ttu-id="181f0-203">Po otrzymaniu żądania hello z hello łącznika usługi Serwer Proxy aplikacji hello zaczyna akceptować zawartości z hello użytkownika i przekazuje łącznik toohello danych.</span><span class="sxs-lookup"><span data-stu-id="181f0-203">After it receives hello request from hello connector, hello Application Proxy service begins accepting content from hello user and forwards data toohello connector.</span></span> <span data-ttu-id="181f0-204">Łącznik Hello przekazuje z kolei hello zasobu wewnętrznego toohello danych.</span><span class="sxs-lookup"><span data-stu-id="181f0-204">hello connector, in turn, forwards hello data toohello internal resource.</span></span>

#### <a name="4-hello-connector-waits-for-a-response"></a><span data-ttu-id="181f0-205">4. łącznik hello czeka na odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="181f0-205">4. hello connector waits for a response.</span></span>

<span data-ttu-id="181f0-206">Po hello żądań i przekazywanie toohello całą zawartość kopii end została ukończona, łącznik hello czeka na odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="181f0-206">After hello request and transmission of all content toohello back end is complete, hello connector waits for a response.</span></span>

<span data-ttu-id="181f0-207">Po otrzymaniu odpowiedzi łącznika hello sprawia, że usługi serwera Proxy aplikacji toohello wychodzące połączenie, tooreturn hello szczegółów nagłówka i rozpocząć przesyłanie strumieniowe hello zwracanych danych.</span><span class="sxs-lookup"><span data-stu-id="181f0-207">After it receives a response, hello connector makes an outbound connection toohello Application Proxy service, tooreturn hello header details and begin streaming hello return data.</span></span>

#### <a name="5-hello-service-streams-data-toohello-user"></a><span data-ttu-id="181f0-208">5. użytkownik toohello hello usługi strumieni danych.</span><span class="sxs-lookup"><span data-stu-id="181f0-208">5. hello service streams data toohello user.</span></span> 

<span data-ttu-id="181f0-209">Przetwarza aplikacji hello może występować w tym miejscu.</span><span class="sxs-lookup"><span data-stu-id="181f0-209">Some processing of hello application may occur here.</span></span> <span data-ttu-id="181f0-210">Jeśli skonfigurowano serwer Proxy aplikacji tootranslate nagłówków i adresy URL w aplikacji, przetwarzanie odbywa się zgodnie z potrzebami w tym kroku.</span><span class="sxs-lookup"><span data-stu-id="181f0-210">If you configured Application Proxy tootranslate headers or URLs in your application, that processing happens as needed during this step.</span></span>


## <a name="next-steps"></a><span data-ttu-id="181f0-211">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="181f0-211">Next steps</span></span>

[<span data-ttu-id="181f0-212">Zagadnienia dotyczące topologii sieci przy użyciu serwera Proxy aplikacji usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="181f0-212">Network topology considerations when using Azure AD Application Proxy</span></span>](application-proxy-network-topology-considerations.md)

[<span data-ttu-id="181f0-213">Zrozumienie łączniki serwera Proxy aplikacji usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="181f0-213">Understand Azure AD Application Proxy connectors</span></span>](application-proxy-understand-connectors.md)
