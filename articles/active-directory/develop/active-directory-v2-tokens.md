---
title: "Azure Active Directory v2.0 tokeny odwołania | Dokumentacja firmy Microsoft"
description: "Typy tokenów i oświadczeń emitowane przez punktu końcowego v2.0 usługi Azure AD"
services: active-directory
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: dc58c282-9684-4b38-b151-f3e079f034fd
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/07/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: a3611a239fe044cf1b953220a6e96b0e101f47a4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/11/2017
---
# <a name="azure-active-directory-v20-tokens-reference"></a><span data-ttu-id="fd0db-103">Azure Active Directory w wersji 2.0 tokeny odwołania</span><span class="sxs-lookup"><span data-stu-id="fd0db-103">Azure Active Directory v2.0 tokens reference</span></span>
<span data-ttu-id="fd0db-104">Punktu końcowego v2.0 usługi Azure Active Directory (Azure AD) emituje kilka typów tokenów zabezpieczających w każdym [przepływ uwierzytelniania](active-directory-v2-flows.md).</span><span class="sxs-lookup"><span data-stu-id="fd0db-104">The Azure Active Directory (Azure AD) v2.0 endpoint emits several types of security tokens in each [authentication flow](active-directory-v2-flows.md).</span></span> <span data-ttu-id="fd0db-105">To odwołanie opisuje format właściwości zabezpieczeń i zawartości każdego typu tokenu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-105">This reference describes the format, security characteristics, and contents of each type of token.</span></span>

> [!NOTE]
> <span data-ttu-id="fd0db-106">Punktu końcowego v2.0 nie obsługuje wszystkich scenariuszy Azure Active Directory i funkcji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-106">The v2.0 endpoint does not support all Azure Active Directory scenarios and features.</span></span> <span data-ttu-id="fd0db-107">Aby ustalić, czy należy używać punktu końcowego v2.0, przeczytaj o [ograniczenia v2.0](active-directory-v2-limitations.md).</span><span class="sxs-lookup"><span data-stu-id="fd0db-107">To determine whether you should use the v2.0 endpoint, read about [v2.0 limitations](active-directory-v2-limitations.md).</span></span>
>
>

## <a name="types-of-tokens"></a><span data-ttu-id="fd0db-108">Typy tokenów</span><span class="sxs-lookup"><span data-stu-id="fd0db-108">Types of tokens</span></span>
<span data-ttu-id="fd0db-109">Obsługuje punktu końcowego v2.0 [protokół OAuth 2.0](active-directory-v2-protocols.md), który korzysta z tokenów dostępu i tokenów odświeżania.</span><span class="sxs-lookup"><span data-stu-id="fd0db-109">The v2.0 endpoint supports the [OAuth 2.0 authorization protocol](active-directory-v2-protocols.md), which uses access tokens and refresh tokens.</span></span> <span data-ttu-id="fd0db-110">Punktu końcowego v2.0 obsługuje również uwierzytelniania i logowania za pomocą [OpenID Connect](active-directory-v2-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="fd0db-110">The v2.0 endpoint also supports authentication and sign-in via [OpenID Connect](active-directory-v2-protocols.md).</span></span> <span data-ttu-id="fd0db-111">OpenID Connect wprowadza trzeci typ tokenu, token Identyfikatora.</span><span class="sxs-lookup"><span data-stu-id="fd0db-111">OpenID Connect introduces a third type of token, the ID token.</span></span> <span data-ttu-id="fd0db-112">Każdy z tych tokenów jest reprezentowany jako *elementu nośnego* tokenu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-112">Each of these tokens is represented as a *bearer* token.</span></span>

<span data-ttu-id="fd0db-113">Token elementu nośnego jest tokenem zabezpieczającym lekkie, która udziela dostępu elementu nośnego do chronionego zasobu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-113">A bearer token is a lightweight security token that grants the bearer access to a protected resource.</span></span> <span data-ttu-id="fd0db-114">Przenoszącej jest każda strona, która może ona powodować tokenu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-114">The bearer is any party that can present the token.</span></span> <span data-ttu-id="fd0db-115">Mimo że strona musi uwierzytelniać się z usługą Azure AD do odbierania tokenu elementu nośnego, jeśli kroki nie zostaną podjęte w celu bezpiecznego tokenu podczas transmisji i przechowywania, można przechwycony i używane przez niezamierzone strony.</span><span class="sxs-lookup"><span data-stu-id="fd0db-115">Although a party must authenticate with Azure AD to receive the bearer token, if steps are not taken to secure the token during transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="fd0db-116">Niektóre tokeny zabezpieczające mają wbudowany mechanizm uniemożliwić nieupoważnione ich użycie, ale nie tokenów elementu nośnego.</span><span class="sxs-lookup"><span data-stu-id="fd0db-116">Some security tokens have a built-in mechanism to prevent unauthorized parties from using them, but bearer tokens do not.</span></span> <span data-ttu-id="fd0db-117">Musi być transportowane tokenów elementu nośnego bezpiecznego kanału, takie jak zabezpieczeń warstwy transportu (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="fd0db-117">Bearer tokens must be transported in a secure channel such as transport layer security (HTTPS).</span></span> <span data-ttu-id="fd0db-118">Jeśli token elementu nośnego, są przesyłane bez zabezpieczeń tego typu, za pomocą strony złośliwych atak"man-in--middle" Aby uzyskać token i użyć jej do nieautoryzowanego dostępu do chronionego zasobu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-118">If a bearer token is transmitted without this type of security, a malicious party could use a "man-in-the-middle attack" to acquire the token and use it for unauthorized access to a protected resource.</span></span> <span data-ttu-id="fd0db-119">Te same zasady zabezpieczeń mają zastosowanie po zapisaniu lub buforowanie tokenów elementu nośnego do późniejszego użycia.</span><span class="sxs-lookup"><span data-stu-id="fd0db-119">The same security principles apply when storing or caching bearer tokens for later use.</span></span> <span data-ttu-id="fd0db-120">Zawsze upewnij się, że aplikacji bezpiecznego przesyła i przechowuje tokenów elementu nośnego.</span><span class="sxs-lookup"><span data-stu-id="fd0db-120">Always ensure that your app securely transmits and stores bearer tokens.</span></span> <span data-ttu-id="fd0db-121">Aby uzyskać więcej uwagi dotyczące zabezpieczeń tokenów elementu nośnego, zobacz [RFC 6750 sekcji 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="fd0db-121">For more security considerations for bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="fd0db-122">Wiele tokenów wystawionych przez punktu końcowego v2.0 są zaimplementowane jako tokenów sieci Web JSON (Jwt).</span><span class="sxs-lookup"><span data-stu-id="fd0db-122">Many of the tokens issued by the v2.0 endpoint are implemented as JSON Web Tokens (JWTs).</span></span> <span data-ttu-id="fd0db-123">Token JWT jest compact, adres URL bezpiecznego sposób przekazywania informacji między dwiema stronami.</span><span class="sxs-lookup"><span data-stu-id="fd0db-123">A JWT is a compact, URL-safe way to transfer information between two parties.</span></span> <span data-ttu-id="fd0db-124">Informacje zawarte w token JWT jest nazywany *oświadczeń*.</span><span class="sxs-lookup"><span data-stu-id="fd0db-124">The information in a JWT is called a *claim*.</span></span> <span data-ttu-id="fd0db-125">Jest potwierdzenie informacji na temat elementów nośnych i temat tokenu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-125">It's an assertion of information about the bearer and subject of the token.</span></span> <span data-ttu-id="fd0db-126">Oświadczenia w token JWT są obiektów JavaScript Object Notation (JSON), które są zakodowane i serializację do transmisji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-126">The claims in a JWT are JavaScript Object Notation (JSON) objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="fd0db-127">Ponieważ Jwt wystawione przez punktu końcowego v2.0 podpisany, ale nie są szyfrowane, możesz łatwo sprawdzić zawartość token JWT na potrzeby debugowania.</span><span class="sxs-lookup"><span data-stu-id="fd0db-127">Because the JWTs issued by the v2.0 endpoint are signed but not encrypted, you can easily inspect the contents of a JWT for debugging purposes.</span></span> <span data-ttu-id="fd0db-128">Aby uzyskać więcej informacji dotyczących tokenów Jwt, zobacz [specyfikacji JWT](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span><span class="sxs-lookup"><span data-stu-id="fd0db-128">For more information about JWTs, see the [JWT specification](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="fd0db-129">Tokeny Identyfikatora</span><span class="sxs-lookup"><span data-stu-id="fd0db-129">ID tokens</span></span>
<span data-ttu-id="fd0db-130">Identyfikator tokenu jest formą logowania w tokenie zabezpieczającym aplikacja odbiera podczas uwierzytelniania przy użyciu [OpenID Connect](active-directory-v2-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="fd0db-130">An ID token is a form of sign-in security token that your app receives when it performs authentication by using [OpenID Connect](active-directory-v2-protocols.md).</span></span> <span data-ttu-id="fd0db-131">Identyfikator tokeny są reprezentowane jako [Jwt](#types-of-tokens), i zawierają oświadczeń, których używasz do logowania użytkownika do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-131">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use to sign the user in to your app.</span></span> <span data-ttu-id="fd0db-132">Można użyć oświadczenia w tokenie identyfikator na różne sposoby.</span><span class="sxs-lookup"><span data-stu-id="fd0db-132">You can use the claims in an ID token in various ways.</span></span> <span data-ttu-id="fd0db-133">Zazwyczaj Administratorzy korzystają tokeny Identyfikatora, aby wyświetlić informacje o koncie, lub aby wprowadzić decyzje dotyczące kontroli dostępu w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-133">Typically, admins use ID tokens to display account information or to make access control decisions in an app.</span></span> <span data-ttu-id="fd0db-134">Problemy z punktem końcowym v2.0 tylko jeden typ tokenu identyfikator, który ma spójny zestaw oświadczeń, bez względu na typ użytkownika, który jest zalogowany.</span><span class="sxs-lookup"><span data-stu-id="fd0db-134">The v2.0 endpoint issues only one type of ID token, which has a consistent set of claims, regardless of the type of user that is signed in.</span></span> <span data-ttu-id="fd0db-135">Format i zawartość tokeny Identyfikatora są takie same dla osobistych użytkowników kont Microsoft i konta firmowego lub szkolnego.</span><span class="sxs-lookup"><span data-stu-id="fd0db-135">The format and content of ID tokens are the same for personal Microsoft account users and for work or school accounts.</span></span>

<span data-ttu-id="fd0db-136">Tokeny Identyfikatora są obecnie podpisany, ale nie jest zaszyfrowany.</span><span class="sxs-lookup"><span data-stu-id="fd0db-136">Currently, ID tokens are signed but not encrypted.</span></span> <span data-ttu-id="fd0db-137">Gdy aplikacja odbiera token Identyfikatora, należy [weryfikuje podpisu](#validating-tokens) potwierdzenia autentyczności tokenu i sprawdzić poprawności kilku oświadczenia w tokenie potwierdzenie jego ważności.</span><span class="sxs-lookup"><span data-stu-id="fd0db-137">When your app receives an ID token, it must [validate the signature](#validating-tokens) to prove the token's authenticity and validate a few claims in the token to prove its validity.</span></span> <span data-ttu-id="fd0db-138">Oświadczenia zweryfikowany przez aplikację różny w zależności od wymagań scenariusza, ale aplikacji należy wykonać niektóre [typowych operacji sprawdzania poprawności oświadczeń](#validating-tokens) w każdym scenariuszu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-138">The claims validated by an app vary depending on scenario requirements, but your app must perform some [common claim validations](#validating-tokens) in every scenario.</span></span>

<span data-ttu-id="fd0db-139">Firma Microsoft zapewniają wszystkich szczegółów dotyczących oświadczenia w tokenach identyfikator w poniższych sekcjach, oprócz Identyfikatora przykładowy token.</span><span class="sxs-lookup"><span data-stu-id="fd0db-139">We give you the full details about claims in ID tokens in the following sections, in addition to a sample ID token.</span></span> <span data-ttu-id="fd0db-140">Należy pamiętać, że oświadczenia w tokenach identyfikator nie są zwracane w określonej kolejności.</span><span class="sxs-lookup"><span data-stu-id="fd0db-140">Note that claims in ID tokens are not returned in a specific order.</span></span> <span data-ttu-id="fd0db-141">Ponadto oświadczeń nowy mogą zostać wprowadzone do tokeny Identyfikatora, w dowolnym momencie.</span><span class="sxs-lookup"><span data-stu-id="fd0db-141">Also, new claims can be introduced into ID tokens at any time.</span></span> <span data-ttu-id="fd0db-142">Aplikacji nie powinna Przerwij, gdy wprowadzono nowych oświadczeń.</span><span class="sxs-lookup"><span data-stu-id="fd0db-142">Your app should not break when new claims are introduced.</span></span> <span data-ttu-id="fd0db-143">Poniższa lista zawiera oświadczenia, które aplikacji obecnie można niezawodnie zinterpretować.</span><span class="sxs-lookup"><span data-stu-id="fd0db-143">The following list includes the claims that your app currently can reliably interpret.</span></span> <span data-ttu-id="fd0db-144">Szczegółowe informacje można znaleźć [OpenID Connect specyfikacji](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="fd0db-144">You can find more details in the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="fd0db-145">Przykładowy identyfikator token</span><span class="sxs-lookup"><span data-stu-id="fd0db-145">Sample ID token</span></span>
```
eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6Ik1uQ19WWmNBVGZNNXBPWWlKSE1iYTlnb0VLWSJ9.eyJhdWQiOiI2NzMxZGU3Ni0xNGE2LTQ5YWUtOTdiYy02ZWJhNjkxNDM5MWUiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vYjk0MTk4MTgtMDlhZi00OWMyLWIwYzMtNjUzYWRjMWYzNzZlL3YyLjAiLCJpYXQiOjE0NTIyODUzMzEsIm5iZiI6MTQ1MjI4NTMzMSwiZXhwIjoxNDUyMjg5MjMxLCJuYW1lIjoiQmFiZSBSdXRoIiwibm9uY2UiOiIxMjM0NSIsIm9pZCI6ImExZGJkZGU4LWU0ZjktNDU3MS1hZDkzLTMwNTllMzc1MGQyMyIsInByZWZlcnJlZF91c2VybmFtZSI6InRoZWdyZWF0YmFtYmlub0BueXkub25taWNyb3NvZnQuY29tIiwic3ViIjoiTUY0Zi1nZ1dNRWppMTJLeW5KVU5RWnBoYVVUdkxjUXVnNWpkRjJubDAxUSIsInRpZCI6ImI5NDE5ODE4LTA5YWYtNDljMi1iMGMzLTY1M2FkYzFmMzc2ZSIsInZlciI6IjIuMCJ9.p_rYdrtJ1oCmgDBggNHB9O38KTnLCMGbMDODdirdmZbmJcTHiZDdtTc-hguu3krhbtOsoYM2HJeZM3Wsbp_YcfSKDY--X_NobMNsxbT7bqZHxDnA2jTMyrmt5v2EKUnEeVtSiJXyO3JWUq9R0dO-m4o9_8jGP6zHtR62zLaotTBYHmgeKpZgTFB9WtUq8DVdyMn_HSvQEfz-LWqckbcTwM_9RNKoGRVk38KChVJo4z5LkksYRarDo8QgQ7xEKmYmPvRr_I7gvM2bmlZQds2OeqWLB1NSNbFZqyFOCgYn3bAQ-nEQSKwBaA36jYGPOVG2r2Qv1uKcpSOxzxaQybzYpQ
```

> [!TIP]
> <span data-ttu-id="fd0db-146">Praktyki, aby sprawdzić oświadczenia w tokenie identyfikator próbki, wklej przykładowy token identyfikator do [calebb.net](http://calebb.net/).</span><span class="sxs-lookup"><span data-stu-id="fd0db-146">For practice, to inspect the claims in the sample ID token, paste the sample ID token into [calebb.net](http://calebb.net/).</span></span>
>
>

#### <a name="claims-in-id-tokens"></a><span data-ttu-id="fd0db-147">Oświadczenia w tokenach identyfikator</span><span class="sxs-lookup"><span data-stu-id="fd0db-147">Claims in ID tokens</span></span>
| <span data-ttu-id="fd0db-148">Nazwa</span><span class="sxs-lookup"><span data-stu-id="fd0db-148">Name</span></span> | <span data-ttu-id="fd0db-149">Claim</span><span class="sxs-lookup"><span data-stu-id="fd0db-149">Claim</span></span> | <span data-ttu-id="fd0db-150">Przykładowa wartość</span><span class="sxs-lookup"><span data-stu-id="fd0db-150">Example value</span></span> | <span data-ttu-id="fd0db-151">Opis</span><span class="sxs-lookup"><span data-stu-id="fd0db-151">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="fd0db-152">grupy odbiorców</span><span class="sxs-lookup"><span data-stu-id="fd0db-152">audience</span></span> |`aud` |`6731de76-14a6-49ae-97bc-6eba6914391e` |<span data-ttu-id="fd0db-153">Identyfikuje adresata tokenu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-153">Identifies the intended recipient of the token.</span></span> <span data-ttu-id="fd0db-154">W tokenach identyfikator odbiorców jest identyfikator aplikacji aplikacji, przypisany do aplikacji w portalu rejestracji aplikacji firmy Microsoft.</span><span class="sxs-lookup"><span data-stu-id="fd0db-154">In ID tokens, the audience is your app's Application ID, assigned to your app in the Microsoft Application Registration Portal.</span></span> <span data-ttu-id="fd0db-155">Aplikację należy sprawdzić tę wartość i odrzucenie tokenu, jeśli wartość nie jest zgodna.</span><span class="sxs-lookup"><span data-stu-id="fd0db-155">Your app should validate this value, and reject the token if the value does not match.</span></span> |
| <span data-ttu-id="fd0db-156">Wystawcy</span><span class="sxs-lookup"><span data-stu-id="fd0db-156">issuer</span></span> |`iss` |`https://login.microsoftonline.com/b9419818-09af-49c2-b0c3-653adc1f376e/v2.0 ` |<span data-ttu-id="fd0db-157">Identyfikuje usługę tokenu zabezpieczającego (STS), które tworzy i zwraca token i dzierżawy usługi Azure AD, w którym użytkownik został uwierzytelniony.</span><span class="sxs-lookup"><span data-stu-id="fd0db-157">Identifies the security token service (STS) that constructs and returns the token, and the Azure AD tenant in which the user was authenticated.</span></span> <span data-ttu-id="fd0db-158">Aplikację należy zweryfikować oświadczenia wystawcy, aby upewnić się, że token pochodzą z punktem końcowym v2.0.</span><span class="sxs-lookup"><span data-stu-id="fd0db-158">Your app should validate the issuer claim to ensure that the token came from the v2.0 endpoint.</span></span> <span data-ttu-id="fd0db-159">On również należy używać części identyfikatora GUID oświadczenie tak, aby ograniczyć zestaw dzierżawcami, które można zalogować się do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-159">It also should use the GUID portion of the claim to restrict the set of tenants that can sign in to the app.</span></span> <span data-ttu-id="fd0db-160">Identyfikator GUID, który wskazuje, czy użytkownik jest użytkownikiem użytkownika z konta Microsoft jest `9188040d-6c67-4c5b-b112-36a304b66dad`.</span><span class="sxs-lookup"><span data-stu-id="fd0db-160">The GUID that indicates that the user is a consumer user from a Microsoft account is `9188040d-6c67-4c5b-b112-36a304b66dad`.</span></span> |
| <span data-ttu-id="fd0db-161">wystawiony w</span><span class="sxs-lookup"><span data-stu-id="fd0db-161">issued at</span></span> |`iat` |`1452285331` |<span data-ttu-id="fd0db-162">Czas, w którym token został wystawiony, reprezentowane w czasie epoki.</span><span class="sxs-lookup"><span data-stu-id="fd0db-162">The time at which the token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="fd0db-163">czas wygaśnięcia</span><span class="sxs-lookup"><span data-stu-id="fd0db-163">expiration time</span></span> |`exp` |`1452289231` |<span data-ttu-id="fd0db-164">Czas, w którym token staje się nieprawidłowy, reprezentowane w czasie epoki.</span><span class="sxs-lookup"><span data-stu-id="fd0db-164">The time at which the token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="fd0db-165">Aby sprawdzić ważność okres istnienia tokenu aplikacji należy użyć tego oświadczenia.</span><span class="sxs-lookup"><span data-stu-id="fd0db-165">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="fd0db-166">nie wcześniej niż</span><span class="sxs-lookup"><span data-stu-id="fd0db-166">not before</span></span> |`nbf` |`1452285331` |<span data-ttu-id="fd0db-167">Czas, w którym token staje się nieprawidłowy, reprezentowane w czasie epoki.</span><span class="sxs-lookup"><span data-stu-id="fd0db-167">The time at which the token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="fd0db-168">Zazwyczaj jest taka sama jak godzina wystawienia.</span><span class="sxs-lookup"><span data-stu-id="fd0db-168">It is usually the same as the issuance time.</span></span> <span data-ttu-id="fd0db-169">Aby sprawdzić ważność okres istnienia tokenu aplikacji należy użyć tego oświadczenia.</span><span class="sxs-lookup"><span data-stu-id="fd0db-169">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="fd0db-170">Wersja</span><span class="sxs-lookup"><span data-stu-id="fd0db-170">version</span></span> |`ver` |`2.0` |<span data-ttu-id="fd0db-171">Wersja token Identyfikatora, zgodnie z definicją w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="fd0db-171">The version of the ID token, as defined by Azure AD.</span></span> <span data-ttu-id="fd0db-172">Wartość dla punktu końcowego v2.0 jest `2.0`.</span><span class="sxs-lookup"><span data-stu-id="fd0db-172">For the v2.0 endpoint, the value is `2.0`.</span></span> |
| <span data-ttu-id="fd0db-173">Identyfikator dzierżawy</span><span class="sxs-lookup"><span data-stu-id="fd0db-173">tenant ID</span></span> |`tid` |`b9419818-09af-49c2-b0c3-653adc1f376e` |<span data-ttu-id="fd0db-174">Identyfikator GUID reprezentujący dzierżawy usługi Azure AD, do której należy użytkownik z.</span><span class="sxs-lookup"><span data-stu-id="fd0db-174">A GUID that represents the Azure AD tenant that the user is from.</span></span> <span data-ttu-id="fd0db-175">Dla kont służbowych identyfikator GUID jest Identyfikatorem niezmienne dzierżawy organizacji, do której należy użytkownik.</span><span class="sxs-lookup"><span data-stu-id="fd0db-175">For work and school accounts, the GUID is the immutable tenant ID of the organization that the user belongs to.</span></span> <span data-ttu-id="fd0db-176">Dla konta osobiste, wartość jest `9188040d-6c67-4c5b-b112-36a304b66dad`.</span><span class="sxs-lookup"><span data-stu-id="fd0db-176">For personal accounts, the value is `9188040d-6c67-4c5b-b112-36a304b66dad`.</span></span> <span data-ttu-id="fd0db-177">`profile` Zakres jest wymagany w celu odbierania tego oświadczenia.</span><span class="sxs-lookup"><span data-stu-id="fd0db-177">The `profile` scope is required in order to receive this claim.</span></span> |
| <span data-ttu-id="fd0db-178">Kod skrótu</span><span class="sxs-lookup"><span data-stu-id="fd0db-178">code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="fd0db-179">Skrót kod znajduje się w tokeny Identyfikatora tylko wtedy, gdy wystawiony token Identyfikatora z kodu autoryzacji protokołu OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="fd0db-179">The code hash is included in ID tokens only when the ID token is issued with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="fd0db-180">Może służyć do zweryfikowania autentyczności kod autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-180">It can be used to validate the authenticity of an authorization code.</span></span> <span data-ttu-id="fd0db-181">Aby uzyskać szczegółowe informacje o wykonywaniu tej weryfikacji, zobacz [OpenID Connect specyfikacji](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="fd0db-181">For details about performing this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span> |
| <span data-ttu-id="fd0db-182">Skrót token dostępu</span><span class="sxs-lookup"><span data-stu-id="fd0db-182">access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="fd0db-183">Tokeny dostępu, których token wyznaczania wartości skrótu jest uwzględniona w identyfikatorze, tylko gdy wydano tokenu identyfikator z tokenem dostępu protokołu OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="fd0db-183">The access token hash is included in ID tokens only when the ID token is issued with an OAuth 2.0 access token.</span></span> <span data-ttu-id="fd0db-184">Może służyć do zweryfikowania autentyczności tokenu dostępu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-184">It can be used to validate the authenticity of an access token.</span></span> <span data-ttu-id="fd0db-185">Aby uzyskać szczegółowe informacje o wykonywaniu tej weryfikacji, zobacz [OpenID Connect specyfikacji](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="fd0db-185">For details about performing this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span> |
| <span data-ttu-id="fd0db-186">Identyfikator jednorazowy</span><span class="sxs-lookup"><span data-stu-id="fd0db-186">nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="fd0db-187">Identyfikator jednorazowy jest strategii łagodzenia ataków powtórzeń tokenów.</span><span class="sxs-lookup"><span data-stu-id="fd0db-187">The nonce is a strategy for mitigating token replay attacks.</span></span> <span data-ttu-id="fd0db-188">Aplikację można określić identyfikatora jednorazowego w żądaniu autoryzacji przy użyciu `nonce` parametr zapytania.</span><span class="sxs-lookup"><span data-stu-id="fd0db-188">Your app can specify a nonce in an authorization request by using the `nonce` query parameter.</span></span> <span data-ttu-id="fd0db-189">Wartości podane w żądaniu jest emitowany w tokenie identyfikator `nonce` oświadczenia, nie mają być modyfikowane.</span><span class="sxs-lookup"><span data-stu-id="fd0db-189">The value you provide in the request is emitted in the ID token's `nonce` claim, unmodified.</span></span> <span data-ttu-id="fd0db-190">Aplikację można sprawdzić wartość względem wartości określone dla żądania, który kojarzy z określonym tokenem identyfikator sesji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-190">Your app can verify the value against the value it specified on the request, which associates the app's session with a specific ID token.</span></span> <span data-ttu-id="fd0db-191">Aplikację należy wykonać tej weryfikacji w procesie weryfikacji tokenu identyfikator.</span><span class="sxs-lookup"><span data-stu-id="fd0db-191">Your app should perform this validation during the ID token validation process.</span></span> |
| <span data-ttu-id="fd0db-192">name</span><span class="sxs-lookup"><span data-stu-id="fd0db-192">name</span></span> |`name` |`Babe Ruth` |<span data-ttu-id="fd0db-193">Oświadczenia nazwy zawiera wartość zrozumiałą dla użytkownika, która identyfikuje podmiotu tokenu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-193">The name claim provides a human-readable value that identifies the subject of the token.</span></span> <span data-ttu-id="fd0db-194">Wartość nie musi być unikatowy, jest modyfikowalna, i został zaprojektowany tak, aby można używać tylko do wyświetlania.</span><span class="sxs-lookup"><span data-stu-id="fd0db-194">The value is not guaranteed to be unique, it is mutable, and it's designed to be used only for display purposes.</span></span> <span data-ttu-id="fd0db-195">`profile` Zakres jest wymagany w celu odbierania tego oświadczenia.</span><span class="sxs-lookup"><span data-stu-id="fd0db-195">The `profile` scope is required in order to receive this claim.</span></span> |
| <span data-ttu-id="fd0db-196">Adres e-mail</span><span class="sxs-lookup"><span data-stu-id="fd0db-196">email</span></span> |`email` |`thegreatbambino@nyy.onmicrosoft.com` |<span data-ttu-id="fd0db-197">Podstawowego adresu e-mail skojarzonego z konta użytkownika, jeśli taka istnieje.</span><span class="sxs-lookup"><span data-stu-id="fd0db-197">The primary email address associated with the user account, if one exists.</span></span> <span data-ttu-id="fd0db-198">Jego wartość jest modyfikowalna i może ulec zmianie.</span><span class="sxs-lookup"><span data-stu-id="fd0db-198">Its value is mutable and might change over time.</span></span> <span data-ttu-id="fd0db-199">`email` Zakres jest wymagany w celu odbierania tego oświadczenia.</span><span class="sxs-lookup"><span data-stu-id="fd0db-199">The `email` scope is required in order to receive this claim.</span></span> |
| <span data-ttu-id="fd0db-200">Preferowany nazwy użytkownika</span><span class="sxs-lookup"><span data-stu-id="fd0db-200">preferred username</span></span> |`preferred_username` |`thegreatbambino@nyy.onmicrosoft.com` |<span data-ttu-id="fd0db-201">Nazwa głównej reprezentuje użytkownika w punkcie końcowym v2.0.</span><span class="sxs-lookup"><span data-stu-id="fd0db-201">The primary username that represents the user in the v2.0 endpoint.</span></span> <span data-ttu-id="fd0db-202">Może to być adres e-mail, numer telefonu lub ogólny nazwy użytkownika bez określonego formatu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-202">It could be an email address, phone number, or a generic username without a specified format.</span></span> <span data-ttu-id="fd0db-203">Jego wartość jest modyfikowalna i może ulec zmianie.</span><span class="sxs-lookup"><span data-stu-id="fd0db-203">Its value is mutable and might change over time.</span></span> <span data-ttu-id="fd0db-204">`profile` Zakres jest wymagany w celu odbierania tego oświadczenia.</span><span class="sxs-lookup"><span data-stu-id="fd0db-204">The `profile` scope is required in order to receive this claim.</span></span> |
| <span data-ttu-id="fd0db-205">Temat</span><span class="sxs-lookup"><span data-stu-id="fd0db-205">subject</span></span> |`sub` |`MF4f-ggWMEji12KynJUNQZphaUTvLcQug5jdF2nl01Q` | <span data-ttu-id="fd0db-206">Podmiot zabezpieczeń o tym, które token deklaracji rozkazujących informacje, takie jak użytkownika aplikacji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-206">The principal about which the token asserts information, such as the user of an app.</span></span> <span data-ttu-id="fd0db-207">Ta wartość jest niezmienne i nie można ponownie przypisać lub ponownie.</span><span class="sxs-lookup"><span data-stu-id="fd0db-207">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="fd0db-208">Może służyć do wykonywania sprawdzeń autoryzacji bezpiecznie, np. gdy jest używany do uzyskania dostępu do zasobu, a może być używany jako klucz w tabelach bazy danych.</span><span class="sxs-lookup"><span data-stu-id="fd0db-208">It can be used to perform authorization checks safely, such as when the token is used to access a resource, and can be used as a key in database tables.</span></span> <span data-ttu-id="fd0db-209">Ponieważ podmiot jest zawsze znajdujących się w tokeny problemów z usługą Azure AD, zaleca się korzystanie z tej wartości w systemie autoryzacji ogólnego przeznaczenia.</span><span class="sxs-lookup"><span data-stu-id="fd0db-209">Because the subject is always present in the tokens that Azure AD issues, we recommend using this value in a general-purpose authorization system.</span></span> <span data-ttu-id="fd0db-210">Podmiot jest jednak parowania identyfikator — unikatowy identyfikator aplikacji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-210">The subject is, however, a pairwise identifier - it is unique to a particular application ID.</span></span>  <span data-ttu-id="fd0db-211">W związku z tym jeśli jeden użytkownik zaloguje się do dwóch różnych aplikacji przy użyciu dwóch identyfikatorów innego klienta, tych aplikacji zostanie wyświetlony dwóch różnych wartości oświadczeń podmiotu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-211">Therefore, if a single user signs into two different apps using two different client IDs, those apps will receive two different values for the subject claim.</span></span>  <span data-ttu-id="fd0db-212">To może lub nie może być wskazane w zależności od wymagań architektury i ochrony prywatności.</span><span class="sxs-lookup"><span data-stu-id="fd0db-212">This may or may not be desired depending on your architecture and privacy requirements.</span></span> |
| <span data-ttu-id="fd0db-213">Identyfikator obiektu:</span><span class="sxs-lookup"><span data-stu-id="fd0db-213">object ID</span></span> |`oid` |`a1dbdde8-e4f9-4571-ad93-3059e3750d23` | <span data-ttu-id="fd0db-214">Niezmienne identyfikator obiektu programu Microsoft identity system, w tym przypadku konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="fd0db-214">The immutable identifier for an object in the Microsoft identity system, in this case, a user account.</span></span>  <span data-ttu-id="fd0db-215">Można go również używane do wykonywania sprawdzeń autoryzacji i bezpiecznie jako klucz w tabelach bazy danych.</span><span class="sxs-lookup"><span data-stu-id="fd0db-215">It can also be used to perform authorization checks safely and as a key in database tables.</span></span> <span data-ttu-id="fd0db-216">Ten identyfikator unikatowo identyfikuje użytkownika w aplikacjach — dwóch różnych aplikacji podpisywania w ten sam użytkownik otrzyma tę samą wartość w `oid` oświadczeń.</span><span class="sxs-lookup"><span data-stu-id="fd0db-216">This ID uniquely identifies the user across applications - two different applications signing in the same user will receive the same value in the `oid` claim.</span></span>  <span data-ttu-id="fd0db-217">Oznacza to, że mogą być używane podczas wykonywania kwerend do usług online firmy Microsoft, takich jak Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="fd0db-217">This means that it can be used when making queries to Microsoft online services, such as the Microsoft Graph.</span></span>  <span data-ttu-id="fd0db-218">Program Microsoft Graph, którą będzie zwracać ten identyfikator jako `id` właściwości dla danego konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="fd0db-218">The Microsoft Graph will return this ID as the `id` property for a given user account.</span></span>  <span data-ttu-id="fd0db-219">Ponieważ `oid` umożliwia wielu aplikacjom do skorelowania użytkowników, `profile` zakres jest wymagany w celu odbierania tego oświadczenia.</span><span class="sxs-lookup"><span data-stu-id="fd0db-219">Because the `oid` allows multiple apps to correlate users, the `profile` scope is required in order to receive this claim.</span></span> <span data-ttu-id="fd0db-220">Należy pamiętać, że jeden użytkownik istnieje w wielu dzierżawców, użytkownik będzie zawierać identyfikator inny obiekt, w każdej dzierżawy — są traktowane jako różne konta, nawet jeśli użytkownik loguje się do wszystkich kont z tymi samymi poświadczeniami.</span><span class="sxs-lookup"><span data-stu-id="fd0db-220">Note that if a single user exists in multiple tenants, the user will contain a different object ID in each tenant - they are considered different accounts, even though the user logs into each account with the same credentials.</span></span> |

### <a name="access-tokens"></a><span data-ttu-id="fd0db-221">Tokeny dostępu</span><span class="sxs-lookup"><span data-stu-id="fd0db-221">Access tokens</span></span>
<span data-ttu-id="fd0db-222">Obecnie wystawiony przez punktu końcowego v2.0 tokenów dostępu mogą być używane tylko przez program Microsoft Services.</span><span class="sxs-lookup"><span data-stu-id="fd0db-222">Currently, access tokens issued by the v2.0 endpoint can be consumed only by Microsoft Services.</span></span> <span data-ttu-id="fd0db-223">Aplikacje nie powinny konieczne jest wykonanie weryfikacji ani kontroli tokenów dostępu dla każdego z aktualnie obsługiwanych scenariuszach.</span><span class="sxs-lookup"><span data-stu-id="fd0db-223">Your apps shouldn't need to perform any validation or inspection of access tokens for any of the currently supported scenarios.</span></span> <span data-ttu-id="fd0db-224">Tokeny dostępu można traktować jako całkowicie przezroczystości.</span><span class="sxs-lookup"><span data-stu-id="fd0db-224">You can treat access tokens as completely opaque.</span></span> <span data-ttu-id="fd0db-225">Są one tylko ciągi, które aplikacji można przekazać do firmy Microsoft w żądaniach HTTP.</span><span class="sxs-lookup"><span data-stu-id="fd0db-225">They are just strings that your app can pass to Microsoft in HTTP requests.</span></span>

<span data-ttu-id="fd0db-226">W niedalekiej przyszłości punktu końcowego v2.0 przedstawiono możliwości aplikacji na odbieranie tokenów dostępu z innymi klientami.</span><span class="sxs-lookup"><span data-stu-id="fd0db-226">In the near future, the v2.0 endpoint will introduce the ability for your app to receive access tokens from other clients.</span></span> <span data-ttu-id="fd0db-227">W tym czasie informacje w tym temacie będą aktualizowane z zawiera informacje dotyczące aplikacji do wykonywania sprawdzania poprawności tokenu dostępu i inne podobne zadania.</span><span class="sxs-lookup"><span data-stu-id="fd0db-227">At that time, the information in this reference topic will be updated with the information that you need for your app to perform access token validation and other similar tasks.</span></span>

<span data-ttu-id="fd0db-228">W przypadku żądania tokenu dostępu z punktem końcowym v2.0, punktu końcowego v2.0 również zwraca metadane dotyczące tokenu dostępu dla aplikacji do użycia.</span><span class="sxs-lookup"><span data-stu-id="fd0db-228">When you request an access token from the v2.0 endpoint, the v2.0 endpoint also returns metadata about the access token for your app to use.</span></span> <span data-ttu-id="fd0db-229">Informacje te obejmują czas wygaśnięcia tokenu dostępu i zakresów, dla których jest prawidłowy.</span><span class="sxs-lookup"><span data-stu-id="fd0db-229">This information includes the expiry time of the access token and the scopes for which it is valid.</span></span> <span data-ttu-id="fd0db-230">Aplikacja wykorzystuje te metadane, aby wykonać inteligentne buforowanie tokenów dostępu bez konieczności przeanalizować otwórz sam token dostępu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-230">Your app uses this metadata to perform intelligent caching of access tokens without having to parse open the access token itself.</span></span>

### <a name="refresh-tokens"></a><span data-ttu-id="fd0db-231">Tokenów odświeżania</span><span class="sxs-lookup"><span data-stu-id="fd0db-231">Refresh tokens</span></span>
<span data-ttu-id="fd0db-232">Odśwież tokeny to tokeny zabezpieczające, które można pobrać nowe tokeny dostępu w przepływu OAuth 2.0 może używać aplikacja.</span><span class="sxs-lookup"><span data-stu-id="fd0db-232">Refresh tokens are security tokens that your app can use to get new access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="fd0db-233">Tokeny odświeżania może używać aplikacja do osiągnięcia długoterminowej dostęp do zasobów w imieniu użytkownika bez konieczności interakcji z użytkownikiem.</span><span class="sxs-lookup"><span data-stu-id="fd0db-233">Your app can use refresh tokens to achieve long-term access to resources on behalf of a user without requiring interaction with the user.</span></span>

<span data-ttu-id="fd0db-234">Tokeny odświeżania są wielu zasobów.</span><span class="sxs-lookup"><span data-stu-id="fd0db-234">Refresh tokens are multi-resource.</span></span> <span data-ttu-id="fd0db-235">Token odświeżania otrzymał podczas żądania tokenu dla jednego zasobu można wykorzystać tokenów dostępu na zupełnie innego zasobu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-235">A refresh token received during a token request for one resource can be redeemed for access tokens to a completely different resource.</span></span>

<span data-ttu-id="fd0db-236">Aby otrzymywać odświeżania w odpowiedzi tokenu, aplikacji należy zażądać i otrzymać `offline_acesss` zakresu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-236">To receive a refresh in a token response, your app must request and be granted the `offline_acesss` scope.</span></span> <span data-ttu-id="fd0db-237">Aby dowiedzieć się więcej o `offline_access` zakres, zobacz [zgody i zakresy](active-directory-v2-scopes.md) artykułu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-237">To learn more about the `offline_access` scope, see the [consent and scopes](active-directory-v2-scopes.md) article.</span></span>

<span data-ttu-id="fd0db-238">Tokenów odświeżania są i zawsze będą, całkowicie nieprzezroczysta dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-238">Refresh tokens are, and always will be, completely opaque to your app.</span></span> <span data-ttu-id="fd0db-239">One są wystawiane przez punktu końcowego v2.0 usługi Azure AD i można tylko inspekcji, a interpretowane przez punktu końcowego v2.0.</span><span class="sxs-lookup"><span data-stu-id="fd0db-239">They are issued by the Azure AD v2.0 endpoint and can only be inspected and interpreted by the v2.0 endpoint.</span></span> <span data-ttu-id="fd0db-240">Są one długotrwałe, ale aplikacji nie powinna być zapisana można oczekiwać, że token odświeżania będą trwać przez dowolnego okresu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-240">They are long-lived, but your app should not be written to expect that a refresh token will last for any period of time.</span></span> <span data-ttu-id="fd0db-241">Tokeny odświeżania nieważne można w dowolnym momencie z różnych przyczyn.</span><span class="sxs-lookup"><span data-stu-id="fd0db-241">Refresh tokens can be invalidated at any moment for various reasons.</span></span> <span data-ttu-id="fd0db-242">Jedynym sposobem na aplikację, aby sprawdzić, czy token odświeżania jest prawidłowy jest próba Zrealizuj go, wykonując żądania tokenu do punktu końcowego v2.0.</span><span class="sxs-lookup"><span data-stu-id="fd0db-242">The only way for your app to know if a refresh token is valid is to attempt to redeem it by making a token request to the v2.0 endpoint.</span></span>

<span data-ttu-id="fd0db-243">Gdy zrealizować token odświeżania, aby uzyskać nowy token dostępu (i jeśli przyznano aplikacji `offline_access` zakresu), zostanie wyświetlony nowy token odświeżania w odpowiedzi tokenu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-243">When you redeem a refresh token for a new access token (and if your app had been granted the `offline_access` scope), you receive a new refresh token in the token response.</span></span> <span data-ttu-id="fd0db-244">Zapisz token odświeżania nowo wystawione, aby zastąpić ten, który zostanie użyty w żądaniu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-244">Save the newly issued refresh token, to replace the one you used in the request.</span></span> <span data-ttu-id="fd0db-245">Gwarantuje to, że tokenów odświeżania ważność tak długo, jak to możliwe.</span><span class="sxs-lookup"><span data-stu-id="fd0db-245">This guarantees that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="validating-tokens"></a><span data-ttu-id="fd0db-246">Sprawdzanie poprawności tokenów</span><span class="sxs-lookup"><span data-stu-id="fd0db-246">Validating tokens</span></span>
<span data-ttu-id="fd0db-247">Obecnie tylko token weryfikacji, należy potrzebnych do wykonania dla aplikacji jest sprawdzanie poprawności tokenów identyfikator.</span><span class="sxs-lookup"><span data-stu-id="fd0db-247">Currently, the only token validation your apps should need to perform is validating ID tokens.</span></span> <span data-ttu-id="fd0db-248">Aby sprawdzić poprawność Identyfikatora tokenu, aplikacji powinni sprawdzać zarówno token Identyfikatora podpisu i oświadczenia w tokenie identyfikator.</span><span class="sxs-lookup"><span data-stu-id="fd0db-248">To validate an ID token, your app should validate both the ID token's signature and the claims in the ID token.</span></span>

<!-- TODO: Link -->
<span data-ttu-id="fd0db-249">Firma Microsoft udostępnia biblioteki i przykłady kodu, których opisano, jak łatwo obsługi tokenu weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-249">Microsoft provides libraries and code samples that show you how to easily handle token validation.</span></span> <span data-ttu-id="fd0db-250">W kolejnych sekcjach opisano proces podstawowej.</span><span class="sxs-lookup"><span data-stu-id="fd0db-250">In the next sections, we describe the underlying process.</span></span> <span data-ttu-id="fd0db-251">Kilka bibliotek open source innych firm również są dostępne do weryfikacji tokenu JWT.</span><span class="sxs-lookup"><span data-stu-id="fd0db-251">Several third-party open-source libraries also are available for JWT validation.</span></span> <span data-ttu-id="fd0db-252">Ma co najmniej jedną bibliotekę opcji dla prawie wszystkich platform i języków.</span><span class="sxs-lookup"><span data-stu-id="fd0db-252">There's at least one library option for almost every platform and language.</span></span>

### <a name="validate-the-signature"></a><span data-ttu-id="fd0db-253">Sprawdzanie poprawności podpisu</span><span class="sxs-lookup"><span data-stu-id="fd0db-253">Validate the signature</span></span>
<span data-ttu-id="fd0db-254">Token JWT zawiera trzy segmentów, które są rozdzielone `.` znaków.</span><span class="sxs-lookup"><span data-stu-id="fd0db-254">A JWT contains three segments, which are separated by the `.` character.</span></span> <span data-ttu-id="fd0db-255">Pierwszy segment nosi nazwę *nagłówka*, drugi segment jest *treści*, a trzeci segment jest *podpisu*.</span><span class="sxs-lookup"><span data-stu-id="fd0db-255">The first segment is known as the *header*, the second segment is the *body*, and the third segment is the *signature*.</span></span> <span data-ttu-id="fd0db-256">Segment podpisu umożliwia sprawdzenie oryginalności token Identyfikatora, dzięki czemu mogą być zaufane przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="fd0db-256">The signature segment can be used to validate the authenticity of the ID token so that it can be trusted by your app.</span></span>

<span data-ttu-id="fd0db-257">Tokeny Identyfikatora zalogowano się za pomocą standardowych szyfrowanie asymetryczne algorytmy, takie jak RSA 256.</span><span class="sxs-lookup"><span data-stu-id="fd0db-257">ID tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="fd0db-258">Nagłówek token identyfikator ma informacje o metodzie kluczy i szyfrowania używany do podpisywania tokenu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-258">The header of the ID token has information about the key and encryption method used to sign the token.</span></span> <span data-ttu-id="fd0db-259">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="fd0db-259">For example:</span></span>

```
{
  "typ": "JWT",
  "alg": "RS256",
  "kid": "MnC_VZcATfM5pOYiJHMba9goEKY"
}
```

<span data-ttu-id="fd0db-260">`alg` Oświadczeń wskazuje algorytm używany do podpisywania tokenu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-260">The `alg` claim indicates the algorithm that was used to sign the token.</span></span> <span data-ttu-id="fd0db-261">`kid` Oświadczeń wskazuje klucz publiczny, który został użyty do podpisania tokenu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-261">The `kid` claim indicates the public key that was used to sign the token.</span></span>

<span data-ttu-id="fd0db-262">W dowolnym momencie punktu końcowego v2.0 może podpisać identyfikator tokenu przy użyciu jednej z określonych par kluczy publicznych i prywatnych.</span><span class="sxs-lookup"><span data-stu-id="fd0db-262">At any time, the v2.0 endpoint might sign an ID token by using any one of a specific set of public-private key pairs.</span></span> <span data-ttu-id="fd0db-263">Punktu końcowego v2.0 okresowo obraca możliwe zestaw kluczy, więc aplikacja powinna być zapisana automatycznie obsługiwać te zmiany klucza.</span><span class="sxs-lookup"><span data-stu-id="fd0db-263">The v2.0 endpoint periodically rotates the possible set of keys, so your app should be written to handle those key changes automatically.</span></span> <span data-ttu-id="fd0db-264">Uzasadnione częstotliwość, aby wyszukać aktualizacje do kluczy publicznych używane przez punktu końcowego v2.0 jest co 24 godziny.</span><span class="sxs-lookup"><span data-stu-id="fd0db-264">A reasonable frequency to check for updates to the public keys used by the v2.0 endpoint is every 24 hours.</span></span>

<span data-ttu-id="fd0db-265">Można uzyskać dane klucza podpisywania należy dokonać weryfikacji podpisu za pomocą dokumentów metadanych OpenID Connect w lokalizacji:</span><span class="sxs-lookup"><span data-stu-id="fd0db-265">You can acquire the signing key data that you need to validate the signature by using the OpenID Connect metadata document located at:</span></span>

```
https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration
```

> [!TIP]
> <span data-ttu-id="fd0db-266">Spróbuj użyć adresu URL w przeglądarce!</span><span class="sxs-lookup"><span data-stu-id="fd0db-266">Try the URL in a browser!</span></span>
>
>

<span data-ttu-id="fd0db-267">Ten dokument metadanych jest obiekt JSON, który ma kilka części przydatne informacje, takie jak lokalizacja różne punkty końcowe wymagane do uwierzytelniania OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="fd0db-267">This metadata document is a JSON object that has several useful pieces of information, such as the location of the various endpoints required for OpenID Connect authentication.</span></span>  <span data-ttu-id="fd0db-268">Dokument zawiera również *jwks_uri*, co daje lokalizacji zestawu kluczy publicznych używane do podpisywania tokenów.</span><span class="sxs-lookup"><span data-stu-id="fd0db-268">The document also includes a *jwks_uri*, which gives the location of the set of public keys used to sign tokens.</span></span> <span data-ttu-id="fd0db-269">Dokument JSON, znajdujący się w jwks_uri ma wszystkie informacje klucza publicznego, który jest aktualnie używany.</span><span class="sxs-lookup"><span data-stu-id="fd0db-269">The JSON document located at the jwks_uri has all the public key information that is currently in use.</span></span> <span data-ttu-id="fd0db-270">Może używać aplikacja `kid` oświadczeń w nagłówku JWT, aby wybrać, które klucz publiczny w tym dokumencie został użyty do podpisywania tokenu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-270">Your app can use the `kid` claim in the JWT header to select which public key in this document has been used to sign a token.</span></span> <span data-ttu-id="fd0db-271">Następnie wykonuje sprawdzanie poprawności podpisu za pomocą prawidłowy klucz publiczny i algorytm wskazane.</span><span class="sxs-lookup"><span data-stu-id="fd0db-271">It then performs signature validation by using the correct public key and the indicated algorithm.</span></span>

<span data-ttu-id="fd0db-272">Zostanie wykonana Walidacja podpisu wykracza poza zakres tego dokumentu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-272">Performing signature validation is outside the scope of this document.</span></span> <span data-ttu-id="fd0db-273">Wiele open source biblioteki są dostępne dla pomocy w związku z tym.</span><span class="sxs-lookup"><span data-stu-id="fd0db-273">Many open-source libraries are available to help you with this.</span></span>

### <a name="validate-the-claims"></a><span data-ttu-id="fd0db-274">Sprawdzanie poprawności oświadczenia</span><span class="sxs-lookup"><span data-stu-id="fd0db-274">Validate the claims</span></span>
<span data-ttu-id="fd0db-275">Gdy aplikacja odbiera token identyfikator podczas logowania użytkownika, jego również wykonywać kilka kontroli względem oświadczenia w tokenie identyfikator.</span><span class="sxs-lookup"><span data-stu-id="fd0db-275">When your app receives an ID token upon user sign-in, it should also perform a few checks against the claims in the ID token.</span></span> <span data-ttu-id="fd0db-276">Te obejmują, ale nie są ograniczone do:</span><span class="sxs-lookup"><span data-stu-id="fd0db-276">These include but are not limited to:</span></span>

* <span data-ttu-id="fd0db-277">**grupy odbiorców** oświadczeń, aby sprawdzić, czy identyfikator tokenu jest przeznaczona do aplikacji</span><span class="sxs-lookup"><span data-stu-id="fd0db-277">**audience** claim, to verify that the ID token was intended to be given to your app</span></span>
* <span data-ttu-id="fd0db-278">**nie wcześniej niż** i **czas wygaśnięcia** oświadczeń, aby sprawdzić, czy nie wygasł token Identyfikatora</span><span class="sxs-lookup"><span data-stu-id="fd0db-278">**not before** and **expiration time** claims, to verify that the ID token has not expired</span></span>
* <span data-ttu-id="fd0db-279">**Wystawca** oświadczeń, aby sprawdzić, czy token został wystawiony do aplikacji przez punktu końcowego v2.0</span><span class="sxs-lookup"><span data-stu-id="fd0db-279">**issuer** claim, to verify that the token was issued to your app by the v2.0 endpoint</span></span>
* <span data-ttu-id="fd0db-280">**Identyfikator jednorazowy**, jako token powtarzania ograniczenie ataków</span><span class="sxs-lookup"><span data-stu-id="fd0db-280">**nonce**, as a token replay attack mitigation</span></span>

<span data-ttu-id="fd0db-281">Aby uzyskać pełną listę operacji sprawdzania poprawności oświadczenia, które należy wykonać w aplikacji, zobacz [OpenID Connect specyfikacji](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation).</span><span class="sxs-lookup"><span data-stu-id="fd0db-281">For a full list of claim validations that your app should perform, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation).</span></span>

<span data-ttu-id="fd0db-282">Szczegóły oczekiwanych wartości oświadczenia te są objęte [tokeny Identyfikatora](# ID tokens) sekcji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-282">Details of the expected values for these claims are included in the [ID tokens](# ID tokens) section.</span></span>

## <a name="token-lifetimes"></a><span data-ttu-id="fd0db-283">Okresy istnienia tokenu</span><span class="sxs-lookup"><span data-stu-id="fd0db-283">Token lifetimes</span></span>
<span data-ttu-id="fd0db-284">Firma Microsoft udostępnia następujące okresy tokenu tylko charakter informacyjny.</span><span class="sxs-lookup"><span data-stu-id="fd0db-284">We provide the following token lifetimes for your information only.</span></span> <span data-ttu-id="fd0db-285">Informacje mogą ułatwić opracowanie i debugowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-285">The information might help you as you develop and debug apps.</span></span> <span data-ttu-id="fd0db-286">Aplikacji nie powinna być zapisana oczekiwać żadnego z tych okresy istnienia pozostaje stała.</span><span class="sxs-lookup"><span data-stu-id="fd0db-286">Your apps should not be written to expect any of these lifetimes to remain constant.</span></span> <span data-ttu-id="fd0db-287">Token może okresy istnienia i zmieni się w dowolnym momencie.</span><span class="sxs-lookup"><span data-stu-id="fd0db-287">Token lifetimes can and will change at any time.</span></span>

| <span data-ttu-id="fd0db-288">Token</span><span class="sxs-lookup"><span data-stu-id="fd0db-288">Token</span></span> | <span data-ttu-id="fd0db-289">Cykl życia</span><span class="sxs-lookup"><span data-stu-id="fd0db-289">Lifetime</span></span> | <span data-ttu-id="fd0db-290">Opis</span><span class="sxs-lookup"><span data-stu-id="fd0db-290">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="fd0db-291">Identyfikator tokeny (konta firmowego lub szkolnego)</span><span class="sxs-lookup"><span data-stu-id="fd0db-291">ID tokens (work or school accounts)</span></span> |<span data-ttu-id="fd0db-292">1 godzina</span><span class="sxs-lookup"><span data-stu-id="fd0db-292">1 hour</span></span> |<span data-ttu-id="fd0db-293">Tokeny Identyfikatora zwykle są prawidłowe dla 1 godzina.</span><span class="sxs-lookup"><span data-stu-id="fd0db-293">ID tokens typically are valid for 1 hour.</span></span> <span data-ttu-id="fd0db-294">Aplikacja sieci web można użyć ten sam okres istnienia do obsługi własnej sesji użytkownika (zalecane), lub można wybrać okres istnienia całkowicie innej sesji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-294">Your web app can use this same lifetime to maintain its own session with the user (recommended), or you can choose a completely different session lifetime.</span></span> <span data-ttu-id="fd0db-295">Jeśli Twoja aplikacja powinna Uzyskaj nowy identyfikator tokenu, musi utworzyć nowego logowania żądanie v2.0 punktu końcowego autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-295">If your app needs to get a new ID token, it needs to make a new sign-in request to the v2.0 authorize endpoint.</span></span> <span data-ttu-id="fd0db-296">Jeśli użytkownik ma prawidłowy sesję z punktem końcowym v2.0, użytkownik nie może być konieczne, aby ponownie wprowadzić swoje poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="fd0db-296">If the user has a valid browser session with the v2.0 endpoint, the user might not be required to enter their credentials again.</span></span> |
| <span data-ttu-id="fd0db-297">Identyfikator tokeny (konta osobiste)</span><span class="sxs-lookup"><span data-stu-id="fd0db-297">ID tokens (personal accounts)</span></span> |<span data-ttu-id="fd0db-298">24 godziny</span><span class="sxs-lookup"><span data-stu-id="fd0db-298">24 hours</span></span> |<span data-ttu-id="fd0db-299">Identyfikator tokeny dla kont osobistych zwykle są ważne przez 24 godziny.</span><span class="sxs-lookup"><span data-stu-id="fd0db-299">ID tokens for personal accounts typically are valid for 24 hours.</span></span> <span data-ttu-id="fd0db-300">Aplikacja sieci web można użyć ten sam okres istnienia do obsługi własnej sesji użytkownika (zalecane), lub można wybrać okres istnienia całkowicie innej sesji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-300">Your web app can use this same lifetime to maintain its own session with the user (recommended), or you can choose a completely different session lifetime.</span></span> <span data-ttu-id="fd0db-301">Jeśli Twoja aplikacja powinna Uzyskaj nowy identyfikator tokenu, musi utworzyć nowego logowania żądanie v2.0 punktu końcowego autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="fd0db-301">If your app needs to get a new ID token, it needs to make a new sign-in request to the v2.0 authorize endpoint.</span></span> <span data-ttu-id="fd0db-302">Jeśli użytkownik ma prawidłowy sesję z punktem końcowym v2.0, użytkownik nie może być konieczne, aby ponownie wprowadzić swoje poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="fd0db-302">If the user has a valid browser session with the v2.0 endpoint, the user might not be required to enter their credentials again.</span></span> |
| <span data-ttu-id="fd0db-303">Tokeny dostępu (konta firmowego lub szkolnego)</span><span class="sxs-lookup"><span data-stu-id="fd0db-303">Access tokens (work or school accounts)</span></span> |<span data-ttu-id="fd0db-304">1 godzina</span><span class="sxs-lookup"><span data-stu-id="fd0db-304">1 hour</span></span> |<span data-ttu-id="fd0db-305">Wskazane jako część tokenu metadanych odpowiedzi tokenu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-305">Indicated in token responses as part of the token metadata.</span></span> |
| <span data-ttu-id="fd0db-306">Tokeny dostępu (konta osobiste)</span><span class="sxs-lookup"><span data-stu-id="fd0db-306">Access tokens (personal accounts)</span></span> |<span data-ttu-id="fd0db-307">1 godzina</span><span class="sxs-lookup"><span data-stu-id="fd0db-307">1 hour</span></span> |<span data-ttu-id="fd0db-308">Wskazane jako część tokenu metadanych odpowiedzi tokenu.</span><span class="sxs-lookup"><span data-stu-id="fd0db-308">Indicated in token responses as part of the token metadata.</span></span> <span data-ttu-id="fd0db-309">Tokenów dostępu, które są wydawane w imieniu kont osobistych można skonfigurować dla różnych okres istnienia, ale jest typowy 1 godzina.</span><span class="sxs-lookup"><span data-stu-id="fd0db-309">Access tokens that are issued on behalf of personal accounts can be configured for a different lifetime, but 1 hour is typical.</span></span> |
| <span data-ttu-id="fd0db-310">Odśwież tokeny (konta firmowego lub szkolnego)</span><span class="sxs-lookup"><span data-stu-id="fd0db-310">Refresh tokens (work or school account)</span></span> |<span data-ttu-id="fd0db-311">Do 14 dni</span><span class="sxs-lookup"><span data-stu-id="fd0db-311">Up to 14 days</span></span> |<span data-ttu-id="fd0db-312">Token odświeżania pojedynczego jest prawidłowa dla maksymalnie 14 dni.</span><span class="sxs-lookup"><span data-stu-id="fd0db-312">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="fd0db-313">Jednak token odświeżania mogą być nieprawidłowe w dowolnym momencie z różnych powodów, więc aplikacji będą nadal próbować użyć token odświeżania, do momentu jej nie powiedzie się lub aplikacja zastępuje go nowy token odświeżania.</span><span class="sxs-lookup"><span data-stu-id="fd0db-313">However, the refresh token might become invalid at any time for various reasons, so your app should continue to try to use a refresh token until it fails, or until your app replaces it with a new refresh token.</span></span> <span data-ttu-id="fd0db-314">Token odświeżania również staje się nieprawidłowy, jeśli został 90 dni od momentu użytkownik wprowadził swoje poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="fd0db-314">A refresh token also becomes invalid if it has been 90 days since the user has entered their credentials.</span></span> |
| <span data-ttu-id="fd0db-315">Odśwież tokeny (konta osobiste)</span><span class="sxs-lookup"><span data-stu-id="fd0db-315">Refresh tokens (personal accounts)</span></span> |<span data-ttu-id="fd0db-316">Maksymalnie 1 rok</span><span class="sxs-lookup"><span data-stu-id="fd0db-316">Up to 1 year</span></span> |<span data-ttu-id="fd0db-317">Token odświeżania pojedynczego jest prawidłowa dla maksymalnie 1 rok.</span><span class="sxs-lookup"><span data-stu-id="fd0db-317">A single refresh token is valid for a maximum of 1 year.</span></span> <span data-ttu-id="fd0db-318">Jednak token odświeżania mogą być nieprawidłowe w dowolnym momencie z różnych powodów, więc aplikacji będą nadal próbować używać token odświeżania, dopóki nie jest on.</span><span class="sxs-lookup"><span data-stu-id="fd0db-318">However, the refresh token might become invalid at any time for various reasons, so your app should continue to try to use a refresh token until it fails.</span></span> |
| <span data-ttu-id="fd0db-319">Kodach autoryzacji (konta firmowego lub szkolnego)</span><span class="sxs-lookup"><span data-stu-id="fd0db-319">Authorization codes (work or school accounts)</span></span> |<span data-ttu-id="fd0db-320">10 minut</span><span class="sxs-lookup"><span data-stu-id="fd0db-320">10 minutes</span></span> |<span data-ttu-id="fd0db-321">Kodach autoryzacji są celowo krótkim okresie i powinny być natychmiast zrealizowane tokenów dostępu i tokenów odświeżania, po odebraniu tokenów.</span><span class="sxs-lookup"><span data-stu-id="fd0db-321">Authorization codes are purposely short-lived, and should be immediately redeemed for access tokens and refresh tokens when the tokens are received.</span></span> |
| <span data-ttu-id="fd0db-322">Kodach autoryzacji (konta osobiste)</span><span class="sxs-lookup"><span data-stu-id="fd0db-322">Authorization codes (personal accounts)</span></span> |<span data-ttu-id="fd0db-323">5 minut</span><span class="sxs-lookup"><span data-stu-id="fd0db-323">5 minutes</span></span> |<span data-ttu-id="fd0db-324">Kodach autoryzacji są celowo krótkim okresie i powinny być natychmiast zrealizowane tokenów dostępu i tokenów odświeżania, po odebraniu tokenów.</span><span class="sxs-lookup"><span data-stu-id="fd0db-324">Authorization codes are purposely short-lived, and should be immediately redeemed for access tokens and refresh tokens when the tokens are received.</span></span> <span data-ttu-id="fd0db-325">Kodach autoryzacji, które są wydawane w imieniu kont osobistych jest przeznaczony do jednorazowego użytku.</span><span class="sxs-lookup"><span data-stu-id="fd0db-325">Authorization codes that are issued on behalf of personal accounts are for one-time use.</span></span> |
