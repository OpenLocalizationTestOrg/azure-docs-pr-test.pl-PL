---
title: "Scenariusze uwierzytelniania dla usługi Azure AD | Dokumentacja firmy Microsoft"
description: "Omówienie pięciu najbardziej typowych scenariuszy uwierzytelniania dla usługi Azure Active Directory (AAD)"
services: active-directory
documentationcenter: dev-center-name
author: skwan
manager: mbaldwin
editor: 
ms.assetid: 0c84e7d0-16aa-4897-82f2-f53c6c990fd9
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/27/2017
ms.author: skwan
ms.custom: aaddev
ms.openlocfilehash: 2f9410bdaa037f1839cf7c12c3532b51be669ed5
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/18/2017
---
# <a name="authentication-scenarios-for-azure-ad"></a><span data-ttu-id="83c56-103">Scenariusze uwierzytelniania dla usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="83c56-103">Authentication Scenarios for Azure AD</span></span>
<span data-ttu-id="83c56-104">Azure Active Directory (Azure AD) ułatwia uwierzytelniania dla deweloperów, zapewniając tożsamości jako źródło usługi o obsługę standardowych protokołów, takich jak OAuth 2.0 i OpenID Connect, a także otwarte biblioteki dla różnych platform, które ułatwiają rozpoczęcie kodowania szybko.</span><span class="sxs-lookup"><span data-stu-id="83c56-104">Azure Active Directory (Azure AD) simplifies authentication for developers by providing identity as a service, with support for industry-standard protocols such as OAuth 2.0 and OpenID Connect, as well as open source libraries for different platforms to help you start coding quickly.</span></span> <span data-ttu-id="83c56-105">Ten dokument pomaga zrozumieć różne obsługuje scenariusze usługi Azure AD i opisano, jak rozpocząć pracę.</span><span class="sxs-lookup"><span data-stu-id="83c56-105">This document will help you understand the various scenarios Azure AD supports and will show you how to get started.</span></span> <span data-ttu-id="83c56-106">Scenariusz jest podzielony na następujące sekcje:</span><span class="sxs-lookup"><span data-stu-id="83c56-106">It’s divided into the following sections:</span></span>

* [<span data-ttu-id="83c56-107">Podstawy uwierzytelniania w usłudze Azure AD</span><span class="sxs-lookup"><span data-stu-id="83c56-107">Basics of Authentication in Azure AD</span></span>](#basics-of-authentication-in-azure-ad)
* [<span data-ttu-id="83c56-108">Oświadczenia w tokenach zabezpieczających usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="83c56-108">Claims in Azure AD Security Tokens</span></span>](#claims-in-azure-ad-security-tokens)
* [<span data-ttu-id="83c56-109">Podstawowe informacje dotyczące rejestrowania aplikacji w usłudze Azure AD</span><span class="sxs-lookup"><span data-stu-id="83c56-109">Basics of Registering an Application in Azure AD</span></span>](#basics-of-registering-an-application-in-azure-ad)
* [<span data-ttu-id="83c56-110">Typy aplikacji i scenariusze</span><span class="sxs-lookup"><span data-stu-id="83c56-110">Application Types and Scenarios</span></span>](#application-types-and-scenarios)
  
  * [<span data-ttu-id="83c56-111">Przeglądarki sieci Web do aplikacji sieci Web</span><span class="sxs-lookup"><span data-stu-id="83c56-111">Web Browser to Web Application</span></span>](#web-browser-to-web-application)
  * [<span data-ttu-id="83c56-112">Jednostronicowej aplikacji JEDNOSTRONICOWEJ</span><span class="sxs-lookup"><span data-stu-id="83c56-112">Single Page Application (SPA)</span></span>](#single-page-application-spa)
  * [<span data-ttu-id="83c56-113">Aplikacji natywnej do interfejsu API sieci Web</span><span class="sxs-lookup"><span data-stu-id="83c56-113">Native Application to Web API</span></span>](#native-application-to-web-api)
  * [<span data-ttu-id="83c56-114">Aplikacja sieci Web do interfejsu API sieci Web</span><span class="sxs-lookup"><span data-stu-id="83c56-114">Web Application to Web API</span></span>](#web-application-to-web-api)
  * [<span data-ttu-id="83c56-115">Demon lub aplikacji serwera do interfejsu API sieci Web</span><span class="sxs-lookup"><span data-stu-id="83c56-115">Daemon or Server Application to Web API</span></span>](#daemon-or-server-application-to-web-api)

## <a name="basics-of-authentication-in-azure-ad"></a><span data-ttu-id="83c56-116">Podstawy uwierzytelniania w usłudze Azure AD</span><span class="sxs-lookup"><span data-stu-id="83c56-116">Basics of Authentication in Azure AD</span></span>
<span data-ttu-id="83c56-117">Jeśli znasz podstawowe koncepcje uwierzytelniania w usłudze Azure AD, do odczytu w tej sekcji.</span><span class="sxs-lookup"><span data-stu-id="83c56-117">If you are unfamiliar with basic concepts of authentication in Azure AD, read this section.</span></span> <span data-ttu-id="83c56-118">W przeciwnym razie można pominąć w dół do [typy aplikacji i scenariusze](#application-types-and-scenarios).</span><span class="sxs-lookup"><span data-stu-id="83c56-118">Otherwise, you may want to skip down to [Application Types and Scenarios](#application-types-and-scenarios).</span></span>

<span data-ttu-id="83c56-119">Teraz Rozważmy scenariusz najbardziej podstawowa, gdy wymagana jest tożsamość: użytkownik w przeglądarce sieci web musi zostać uwierzytelniona aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-119">Let’s consider the most basic scenario where identity is required: a user in a web browser needs to authenticate to a web application.</span></span> <span data-ttu-id="83c56-120">Ten scenariusz jest opisany bardziej szczegółowo w [przeglądarki sieci Web do aplikacji sieci Web](#web-browser-to-web-application) sekcji, ale stanowi dobry punkt wyjścia ilustrują możliwości usługi Azure AD i conceptualize, jak działa scenariusza użytkownika.</span><span class="sxs-lookup"><span data-stu-id="83c56-120">This scenario is described in greater detail in the [Web Browser to Web Application](#web-browser-to-web-application) section, but it’s a useful starting point to illustrate the capabilities of Azure AD and conceptualize how the scenario works.</span></span> <span data-ttu-id="83c56-121">Na poniższym diagramie tego scenariusza należy wziąć pod uwagę:</span><span class="sxs-lookup"><span data-stu-id="83c56-121">Consider the following diagram for this scenario:</span></span>

![Omówienie logowania jednokrotnego do aplikacji sieci web](./media/active-directory-authentication-scenarios/basics_of_auth_in_aad.png)

<span data-ttu-id="83c56-123">Diagram powyżej pamiętać tutaj jest, co należy wiedzieć o jego różne składniki:</span><span class="sxs-lookup"><span data-stu-id="83c56-123">With the diagram above in mind, here’s what you need to know about its various components:</span></span>

* <span data-ttu-id="83c56-124">Usługi Azure AD jest dostawcy tożsamości, odpowiada za weryfikację tożsamości użytkowników i aplikacje, które znajdują się w katalogu organizacji, a ostatecznie wystawiania tokenów zabezpieczających na pomyślne uwierzytelnienie tych użytkowników i aplikacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-124">Azure AD is the identity provider, responsible for verifying the identity of users and applications that exist in an organization’s directory, and ultimately issuing security tokens upon successful authentication of those users and applications.</span></span>
* <span data-ttu-id="83c56-125">Aplikacja, która chce zewnętrzny uwierzytelniania do usługi Azure AD musi być zarejestrowana w usłudze Azure AD, który rejestruje i unikatowo identyfikuje aplikację w katalogu.</span><span class="sxs-lookup"><span data-stu-id="83c56-125">An application that wants to outsource authentication to Azure AD must be registered in Azure AD, which registers and uniquely identifies the app in the directory.</span></span>
* <span data-ttu-id="83c56-126">Deweloperzy mogą używać biblioteki uwierzytelniania usługi Azure AD typu open source, aby ułatwić uwierzytelniania dzięki obsłudze szczegółów protokołu dla Ciebie.</span><span class="sxs-lookup"><span data-stu-id="83c56-126">Developers can use the open source Azure AD authentication libraries to make authentication easy by handling the protocol details for you.</span></span> <span data-ttu-id="83c56-127">Zobacz [bibliotek uwierzytelniania usługi Azure Active Directory](active-directory-authentication-libraries.md) Aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-127">See [Azure Active Directory Authentication Libraries](active-directory-authentication-libraries.md) for more information.</span></span>

<span data-ttu-id="83c56-128">• Po uwierzytelnieniu użytkownika, aplikacja musi zweryfikować użytkownika tokenie zabezpieczającym, aby upewnić się, że tego uwierzytelnianie zakończyło się pomyślnie dla danego oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="83c56-128">• Once a user has been authenticated, the application must validate the user’s security token to ensure that authentication was successful for the intended parties.</span></span> <span data-ttu-id="83c56-129">Deweloperzy mogą używać biblioteki uwierzytelniania podany do obsługi sprawdzania poprawności żadnych tokenu z usługi Azure AD, w tym tokenów sieci Web JSON (JWT) lub SAML 2.0.</span><span class="sxs-lookup"><span data-stu-id="83c56-129">Developers can use the provided authentication libraries to handle validation of any token from Azure AD, including JSON Web Tokens (JWT) or SAML 2.0.</span></span> <span data-ttu-id="83c56-130">Jeśli chcesz przeprowadzić sprawdzanie poprawności ręcznie, zobacz [programu obsługi tokenów JWT](https://msdn.microsoft.com/library/dn205065.aspx) dokumentacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-130">If you want to perform validation manually, see the [JWT Token Handler](https://msdn.microsoft.com/library/dn205065.aspx) documentation.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="83c56-131">Usługi Azure AD wykorzystuje kryptografię klucza publicznego do podpisywania tokenów i sprawdź, czy są prawidłowe.</span><span class="sxs-lookup"><span data-stu-id="83c56-131">Azure AD uses public key cryptography to sign tokens and verify that they are valid.</span></span> <span data-ttu-id="83c56-132">Zobacz [ważne informacje dotyczące podpisywania klucza przerzucania w usłudze Azure AD](active-directory-signing-key-rollover.md) Aby uzyskać więcej informacji na potrzeby logiki musi mieć w aplikacji, aby upewnić się, zawsze jest aktualizowany przy użyciu najnowszych klawiszy.</span><span class="sxs-lookup"><span data-stu-id="83c56-132">See [Important Information About Signing Key Rollover in Azure AD](active-directory-signing-key-rollover.md) for more information on the necessary logic you must have in your application to ensure it’s always updated with the latest keys.</span></span>
> 
> 

<span data-ttu-id="83c56-133">• Przepływ żądań i odpowiedzi do procesu uwierzytelniania jest określany przez protokół uwierzytelniania, który był używany, takich jak OAuth 2.0, OpenID Connect, WS-Federation oraz SAML 2.0.</span><span class="sxs-lookup"><span data-stu-id="83c56-133">• The flow of requests and responses for the authentication process is determined by the authentication protocol that was used, such as OAuth 2.0, OpenID Connect, WS-Federation, or SAML 2.0.</span></span> <span data-ttu-id="83c56-134">Te protokoły omówiono bardziej szczegółowo w [protokoły uwierzytelniania usługi Active Directory Azure](active-directory-authentication-protocols.md) tematu w poniższych sekcjach.</span><span class="sxs-lookup"><span data-stu-id="83c56-134">These protocols are discussed in more detail in the [Azure Active Directory Authentication Protocols](active-directory-authentication-protocols.md) topic and in the sections below.</span></span>

> [!NOTE]
> <span data-ttu-id="83c56-135">Usługi Azure AD obsługuje OAuth 2.0 i standardów OpenID Connect, które szeroką gamę wykorzystanie tokenów elementu nośnego, łącznie z tokenów elementu nośnego reprezentowane jako tokenów Jwt.</span><span class="sxs-lookup"><span data-stu-id="83c56-135">Azure AD supports the OAuth 2.0 and OpenID Connect standards that make extensive use of bearer tokens, including bearer tokens represented as JWTs.</span></span> <span data-ttu-id="83c56-136">Token elementu nośnego jest tokenem zabezpieczającym lekkie, która udziela dostępu "bearer" do chronionego zasobu.</span><span class="sxs-lookup"><span data-stu-id="83c56-136">A bearer token is a lightweight security token that grants the “bearer” access to a protected resource.</span></span> <span data-ttu-id="83c56-137">W tym sensie "bearer" jest każda strona, która może ona powodować tokenu.</span><span class="sxs-lookup"><span data-stu-id="83c56-137">In this sense, the “bearer” is any party that can present the token.</span></span> <span data-ttu-id="83c56-138">Jeśli strona muszą najpierw zostać uwierzytelnione z usługą Azure AD do odbierania tokenu elementu nośnego, jeśli wymagane kroki nie są brane do zabezpieczania token w transmisji i przechowywania, można przechwycony i używane przez firmę niezamierzone.</span><span class="sxs-lookup"><span data-stu-id="83c56-138">Though a party must first authenticate with Azure AD to receive the bearer token, if the required steps are not taken to secure the token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="83c56-139">Chociaż w niektórych tokeny zabezpieczające wbudowany mechanizm uniemożliwia ich użycie przez osoby nieupoważnione, tokenów elementu nośnego nie mają ten mechanizm i musi być transportowane bezpiecznego kanału, takie jak zabezpieczeń warstwy transportu (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="83c56-139">While some security tokens have a built-in mechanism for preventing unauthorized parties from using them, bearer tokens do not have this mechanism and must be transported in a secure channel such as transport layer security (HTTPS).</span></span> <span data-ttu-id="83c56-140">Jeśli token elementu nośnego są przesyłane bez zabezpieczeń, man-in środkowej ataku można przez złośliwe stronę do uzyskania tokenu i użyć jej do nieautoryzowanego dostępu do chronionego zasobu.</span><span class="sxs-lookup"><span data-stu-id="83c56-140">If a bearer token is transmitted in the clear, a man-in the middle attack can be used by a malicious party to acquire the token and use it for an unauthorized access to a protected resource.</span></span> <span data-ttu-id="83c56-141">Te same zasady zabezpieczeń mają zastosowanie po zapisaniu lub buforowanie tokenów elementu nośnego do późniejszego użycia.</span><span class="sxs-lookup"><span data-stu-id="83c56-141">The same security principles apply when storing or caching bearer tokens for later use.</span></span> <span data-ttu-id="83c56-142">Zawsze upewnij się, że aplikacja przesyła i przechowuje tokenów elementu nośnego w bezpieczny sposób.</span><span class="sxs-lookup"><span data-stu-id="83c56-142">Always ensure that your application transmits and stores bearer tokens in a secure manner.</span></span> <span data-ttu-id="83c56-143">Aby uzyskać więcej zagadnienia dotyczące zabezpieczeń na tokenów elementu nośnego, zobacz [RFC 6750 sekcji 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="83c56-143">For more security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>
> 
> 

<span data-ttu-id="83c56-144">Teraz, gdy masz omówienie podstawy odczytać sekcji poniżej, aby zrozumieć, jak działa inicjowania obsługi administracyjnej w usłudze Azure AD i obsługuje typowych scenariuszy usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-144">Now that you have an overview of the basics, read the sections below to understand how provisioning works in Azure AD and the common scenarios Azure AD supports.</span></span>

## <a name="claims-in-azure-ad-security-tokens"></a><span data-ttu-id="83c56-145">Oświadczenia w tokenach zabezpieczających usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="83c56-145">Claims in Azure AD Security Tokens</span></span>
<span data-ttu-id="83c56-146">Tokenów zabezpieczających wydanych przez usługę Azure AD zawiera oświadczenia lub potwierdzenia informacji na temat, który został uwierzytelniony.</span><span class="sxs-lookup"><span data-stu-id="83c56-146">Security tokens issued by Azure AD contain claims, or assertions of information about the subject that has been authenticated.</span></span> <span data-ttu-id="83c56-147">Te oświadczenia mogą posłużyć aplikacji dla różnych zadań.</span><span class="sxs-lookup"><span data-stu-id="83c56-147">These claims can be used by the application for various tasks.</span></span> <span data-ttu-id="83c56-148">Na przykład mogą być używane sprawdzania poprawności tokenu, zidentyfikować dzierżawy directory podmiotu, wyświetlane informacje o użytkowniku, określa autoryzację podmiotu i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="83c56-148">For example, they can be used to validate the token, identify the subject's directory tenant, display user information, determine the subject's authorization, and so on.</span></span> <span data-ttu-id="83c56-149">W dowolnym tokenu zabezpieczeń oświadczeń są zależne od typu tokenu, typ poświadczeń używanych do uwierzytelniania użytkownika i konfiguracji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-149">The claims present in any given security token are dependent upon the type of token, the type of credential used to authenticate the user, and the application configuration.</span></span> <span data-ttu-id="83c56-150">W poniższej tabeli znajduje się krótki opis każdego typu oświadczenia emitowane przez usługę Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-150">A brief description of each type of claim emitted by Azure AD is provided in the table below.</span></span> <span data-ttu-id="83c56-151">Aby uzyskać więcej informacji, zapoznaj się [obsługiwany Token i typy oświadczeń](active-directory-token-and-claims.md).</span><span class="sxs-lookup"><span data-stu-id="83c56-151">For more information, refer to [Supported Token and Claim Types](active-directory-token-and-claims.md).</span></span>

| <span data-ttu-id="83c56-152">Claim</span><span class="sxs-lookup"><span data-stu-id="83c56-152">Claim</span></span> | <span data-ttu-id="83c56-153">Opis</span><span class="sxs-lookup"><span data-stu-id="83c56-153">Description</span></span> |
| --- | --- |
| <span data-ttu-id="83c56-154">Identyfikator aplikacji</span><span class="sxs-lookup"><span data-stu-id="83c56-154">Application ID</span></span> |<span data-ttu-id="83c56-155">Identyfikuje aplikację, która używa tokenu.</span><span class="sxs-lookup"><span data-stu-id="83c56-155">Identifies the application that is using the token.</span></span> |
| <span data-ttu-id="83c56-156">Grupy odbiorców</span><span class="sxs-lookup"><span data-stu-id="83c56-156">Audience</span></span> |<span data-ttu-id="83c56-157">Określa zasób adresata, który token jest przeznaczony dla.</span><span class="sxs-lookup"><span data-stu-id="83c56-157">Identifies the recipient resource the token is intended for.</span></span> |
| <span data-ttu-id="83c56-158">Application Authentication Context Class Reference</span><span class="sxs-lookup"><span data-stu-id="83c56-158">Application Authentication Context Class Reference</span></span> |<span data-ttu-id="83c56-159">Wskazuje, jak klient został uwierzytelniony (publicznego klienta a poufne klienta).</span><span class="sxs-lookup"><span data-stu-id="83c56-159">Indicates how the client was authenticated (public client vs. confidential client).</span></span> |
| <span data-ttu-id="83c56-160">Błyskawiczne uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="83c56-160">Authentication Instant</span></span> |<span data-ttu-id="83c56-161">Rejestruje datę i godzinę wystąpienia uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="83c56-161">Records the date and time when the authentication occurred.</span></span> |
| <span data-ttu-id="83c56-162">Metoda uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="83c56-162">Authentication Method</span></span> |<span data-ttu-id="83c56-163">Wskazuje, jak został uwierzytelniony podmiot tokenu (hasło, certyfikat itp.).</span><span class="sxs-lookup"><span data-stu-id="83c56-163">Indicates how the subject of the token was authenticated (password, certificate, etc.).</span></span> |
| <span data-ttu-id="83c56-164">Imię</span><span class="sxs-lookup"><span data-stu-id="83c56-164">First Name</span></span> |<span data-ttu-id="83c56-165">Udostępnia imię użytkownika, zgodnie z ustawieniami w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-165">Provides the given name of the user as set in Azure AD.</span></span> |
| <span data-ttu-id="83c56-166">Grupy</span><span class="sxs-lookup"><span data-stu-id="83c56-166">Groups</span></span> |<span data-ttu-id="83c56-167">Zawiera grupy identyfikatorów Azure AD obiektów, których użytkownik jest członkiem.</span><span class="sxs-lookup"><span data-stu-id="83c56-167">Contains object Ids of Azure AD groups the user is a member of.</span></span> |
| <span data-ttu-id="83c56-168">Dostawca tożsamości</span><span class="sxs-lookup"><span data-stu-id="83c56-168">Identity Provider</span></span> |<span data-ttu-id="83c56-169">Rejestruje dostawcę tożsamości, który uwierzytelniony podmiot tokenu.</span><span class="sxs-lookup"><span data-stu-id="83c56-169">Records the identity provider that authenticated the subject of the token.</span></span> |
| <span data-ttu-id="83c56-170">Wystawiony w</span><span class="sxs-lookup"><span data-stu-id="83c56-170">Issued At</span></span> |<span data-ttu-id="83c56-171">Rejestruje czas, w którym token został wystawiony, często używany do tokenu świeżości.</span><span class="sxs-lookup"><span data-stu-id="83c56-171">Records the time at which the token was issued, often used for token freshness.</span></span> |
| <span data-ttu-id="83c56-172">Wystawcy</span><span class="sxs-lookup"><span data-stu-id="83c56-172">Issuer</span></span> |<span data-ttu-id="83c56-173">Identyfikuje Usługa tokenu Zabezpieczającego, które są emitowane token, a także dzierżawy usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-173">Identifies the STS that emitted the token as well as the Azure AD tenant.</span></span> |
| <span data-ttu-id="83c56-174">Nazwisko</span><span class="sxs-lookup"><span data-stu-id="83c56-174">Last Name</span></span> |<span data-ttu-id="83c56-175">Udostępnia nazwisko użytkownika zgodnie z ustawieniami w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-175">Provides the surname of the user as set in Azure AD.</span></span> |
| <span data-ttu-id="83c56-176">Nazwa</span><span class="sxs-lookup"><span data-stu-id="83c56-176">Name</span></span> |<span data-ttu-id="83c56-177">Udostępnia człowieka wartość do odczytu, która identyfikuje podmiotu tokenu.</span><span class="sxs-lookup"><span data-stu-id="83c56-177">Provides a human readable value that identifies the subject of the token.</span></span> |
| <span data-ttu-id="83c56-178">Identyfikator obiektu:</span><span class="sxs-lookup"><span data-stu-id="83c56-178">Object Id</span></span> |<span data-ttu-id="83c56-179">Zawiera niezmienne, unikatowy identyfikator tematu w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-179">Contains an immutable, unique identifier of the subject in Azure AD.</span></span> |
| <span data-ttu-id="83c56-180">Role</span><span class="sxs-lookup"><span data-stu-id="83c56-180">Roles</span></span> |<span data-ttu-id="83c56-181">Zawiera przyjaznych nazw Azure ról aplikacji AD użytkownikowi zostało udzielone.</span><span class="sxs-lookup"><span data-stu-id="83c56-181">Contains friendly names of Azure AD Application Roles that the user has been granted.</span></span> |
| <span data-ttu-id="83c56-182">Zakres</span><span class="sxs-lookup"><span data-stu-id="83c56-182">Scope</span></span> |<span data-ttu-id="83c56-183">Wskazuje uprawnienia do aplikacji klienckiej.</span><span class="sxs-lookup"><span data-stu-id="83c56-183">Indicates the permissions granted to the client application.</span></span> |
| <span data-ttu-id="83c56-184">Temat</span><span class="sxs-lookup"><span data-stu-id="83c56-184">Subject</span></span> |<span data-ttu-id="83c56-185">Wskazuje o tym, które token deklaracji rozkazujących informacji podmiotu zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="83c56-185">Indicates the principal about which the token asserts information.</span></span> |
| <span data-ttu-id="83c56-186">Identyfikator dzierżawy</span><span class="sxs-lookup"><span data-stu-id="83c56-186">Tenant Id</span></span> |<span data-ttu-id="83c56-187">Zawiera niezmienne, unikatowy identyfikator dzierżawy katalogu, który wystawił token.</span><span class="sxs-lookup"><span data-stu-id="83c56-187">Contains an immutable, unique identifier of the directory tenant that issued the token.</span></span> |
| <span data-ttu-id="83c56-188">Okres istnienia tokenu</span><span class="sxs-lookup"><span data-stu-id="83c56-188">Token Lifetime</span></span> |<span data-ttu-id="83c56-189">Określa przedział czasu, w którym token jest prawidłowy.</span><span class="sxs-lookup"><span data-stu-id="83c56-189">Defines the time interval within which a token is valid.</span></span> |
| <span data-ttu-id="83c56-190">Główna nazwa użytkownika</span><span class="sxs-lookup"><span data-stu-id="83c56-190">User Principal Name</span></span> |<span data-ttu-id="83c56-191">Zawiera główną nazwę użytkownika tematu.</span><span class="sxs-lookup"><span data-stu-id="83c56-191">Contains the user principal name of the subject.</span></span> |
| <span data-ttu-id="83c56-192">Wersja</span><span class="sxs-lookup"><span data-stu-id="83c56-192">Version</span></span> |<span data-ttu-id="83c56-193">Zawiera numer wersji tokenu.</span><span class="sxs-lookup"><span data-stu-id="83c56-193">Contains the version number of the token.</span></span> |

## <a name="basics-of-registering-an-application-in-azure-ad"></a><span data-ttu-id="83c56-194">Podstawowe informacje dotyczące rejestrowania aplikacji w usłudze Azure AD</span><span class="sxs-lookup"><span data-stu-id="83c56-194">Basics of Registering an Application in Azure AD</span></span>
<span data-ttu-id="83c56-195">Każda aplikacja, która outsources uwierzytelniania do usługi Azure AD musi być zarejestrowana w katalogu.</span><span class="sxs-lookup"><span data-stu-id="83c56-195">Any application that outsources authentication to Azure AD must be registered in a directory.</span></span> <span data-ttu-id="83c56-196">Ten krok obejmuje informuje o aplikacji, w tym adres URL go ma lokalizację, adres URL do wysyłania odpowiedzi po uwierzytelnieniu identyfikator URI do identyfikowania Twojej aplikacji i inne usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-196">This step involves telling Azure AD about your application, including the URL where it’s located, the URL to send replies after authentication, the URI to identify your application, and more.</span></span> <span data-ttu-id="83c56-197">Te informacje są niezbędne dla kilka przyczyn, dla klucza:</span><span class="sxs-lookup"><span data-stu-id="83c56-197">This information is required for a few key reasons:</span></span>

* <span data-ttu-id="83c56-198">Usługi Azure AD musi współrzędnych w celu komunikacji z aplikacją podczas obsługi logowania jednokrotnego lub wymianę tokenów.</span><span class="sxs-lookup"><span data-stu-id="83c56-198">Azure AD needs coordinates to communicate with the application when handling sign-on or exchanging tokens.</span></span> <span data-ttu-id="83c56-199">Te obejmują:</span><span class="sxs-lookup"><span data-stu-id="83c56-199">These include the following:</span></span>
  
  * <span data-ttu-id="83c56-200">Identyfikator URI Identyfikatora aplikacji: Identyfikator dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-200">Application ID URI: The identifier for an application.</span></span> <span data-ttu-id="83c56-201">Ta wartość jest wysyłany do usługi Azure AD podczas uwierzytelniania wskaż, która aplikacja potrzebuje wywołującego token dla.</span><span class="sxs-lookup"><span data-stu-id="83c56-201">This value is sent to Azure AD during authentication to indicate which application the caller wants a token for.</span></span> <span data-ttu-id="83c56-202">Ponadto, aby aplikacja wiedziała, że był docelową tę wartość znajduje się w tokenie.</span><span class="sxs-lookup"><span data-stu-id="83c56-202">Additionally, this value is included in the token so that the application knows it was the intended target.</span></span>
  * <span data-ttu-id="83c56-203">Odpowiedz na adres URL i identyfikator URI przekierowania: w przypadku interfejsu API sieci web lub aplikacji sieci web, adres URL odpowiedzi jest lokalizacja, do której usługi Azure AD będzie wysyłać odpowiedzi uwierzytelniania, w tym tokenu, jeśli uwierzytelnianie zakończyło się pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="83c56-203">Reply URL and Redirect URI: In the case of a web API or web application, the Reply URL is the location to which Azure AD will send the authentication response, including a token if authentication was successful.</span></span> <span data-ttu-id="83c56-204">W przypadku aplikacji natywnej identyfikator URI przekierowania jest unikatowy identyfikator, do którego usługi Azure AD przekieruje agenta użytkownika żądania OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="83c56-204">In the case of a native application, the Redirect URI is a unique identifier to which Azure AD will redirect the user-agent in an OAuth 2.0 request.</span></span>
  * <span data-ttu-id="83c56-205">Identyfikator aplikacji: Identyfikator dla aplikacji, który jest generowany przez usługę Azure AD, kiedy aplikacja jest zarejestrowany.</span><span class="sxs-lookup"><span data-stu-id="83c56-205">Application ID: The ID for an application, which is generated by Azure AD when the application is registered.</span></span> <span data-ttu-id="83c56-206">Żądający kod autoryzacji lub tokenu aplikacji identyfikator i klucz są wysyłane do usługi Azure AD podczas uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="83c56-206">When requesting an authorization code or token, the Application ID and key are sent to Azure AD during authentication.</span></span>
  * <span data-ttu-id="83c56-207">Klucz: Klucz, który jest przesyłany wraz identyfikator aplikacji podczas uwierzytelniania do usługi Azure AD do wywołania interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-207">Key: The key that is sent along with a Application ID when authenticating to Azure AD to call a web API.</span></span>
* <span data-ttu-id="83c56-208">Należy upewnić się, że aplikacja ma wymagane uprawnienia dostępu do danych katalogu innych aplikacji w organizacji, i tak dalej usługi Azure AD</span><span class="sxs-lookup"><span data-stu-id="83c56-208">Azure AD needs to ensure the application has the required permissions to access your directory data, other applications in your organization, and so on</span></span>

<span data-ttu-id="83c56-209">Inicjowanie obsługi administracyjnej staje się jaśniejszy po zapoznaniu się, że istnieją dwie kategorie aplikacji, które mogą być opracowane i zintegrowane z usługą Azure AD:</span><span class="sxs-lookup"><span data-stu-id="83c56-209">Provisioning becomes clearer when you understand that there are two categories of applications that can be developed and integrated with Azure AD:</span></span>

* <span data-ttu-id="83c56-210">Pojedyncza aplikacja dzierżawy: aplikacji pojedynczej dzierżawy jest przeznaczony do użytku w jednej z organizacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-210">Single tenant application: A single tenant application is intended for use in one organization.</span></span> <span data-ttu-id="83c56-211">Są to zazwyczaj — biznesowych (LoB) aplikacje napisane przez autora przedsiębiorstwa.</span><span class="sxs-lookup"><span data-stu-id="83c56-211">These are typically line-of-business (LoB) applications written by an enterprise developer.</span></span> <span data-ttu-id="83c56-212">Stosowanie pojedynczej dzierżawy tylko musi mieć dostęp użytkownicy w jednym katalogu, a w związku z tym wymaga tylko na potrzeby aprowizacji w jednym katalogu.</span><span class="sxs-lookup"><span data-stu-id="83c56-212">A single tenant application only needs to be accessed by users in one directory, and as a result, it only needs to be provisioned in one directory.</span></span> <span data-ttu-id="83c56-213">Te aplikacje zwykle są rejestrowane przez dewelopera w organizacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-213">These applications are typically registered by a developer in the organization.</span></span>
* <span data-ttu-id="83c56-214">Wielodostępne aplikacji: aplikacji wielodostępnych jest przeznaczony do użycia w wielu organizacjach nie tylko jednej z organizacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-214">Multi-tenant application: A multi-tenant application is intended for use in many organizations, not just one organization.</span></span> <span data-ttu-id="83c56-215">Są to zazwyczaj oprogramowania jako — usługa (SaaS) aplikacje napisane przez niezależnego dostawcy oprogramowania (ISV).</span><span class="sxs-lookup"><span data-stu-id="83c56-215">These are typically software-as-a-service (SaaS) applications written by an independent software vendor (ISV).</span></span> <span data-ttu-id="83c56-216">Aplikacje wielodostępne konieczne udostępniane w każdym katalogu gdzie będą one używane, wymaga zgody użytkownika lub administratora, aby je zarejestrować.</span><span class="sxs-lookup"><span data-stu-id="83c56-216">Multi-tenant applications need to be provisioned in each directory where they will be used, which requires user or administrator consent to register them.</span></span> <span data-ttu-id="83c56-217">Ten proces zgody uruchamiana, gdy aplikacja został zarejestrowany w katalogu i otrzyma dostęp do interfejsu API programu Graph lub być może inny interfejs API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-217">This consent process starts when an application has been registered in the directory and is given access to the Graph API or perhaps another web API.</span></span> <span data-ttu-id="83c56-218">Gdy użytkownik lub administrator z innej organizacji zarejestruje się w celu korzystania z aplikacji, mają być przedstawiane z okna dialogowego, które wyświetla uprawnienia wymagane przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="83c56-218">When a user or administrator from a different organization signs up to use the application, they are presented with a dialog that displays the permissions the application requires.</span></span> <span data-ttu-id="83c56-219">Użytkownik lub administrator może następnie zgodę na aplikacji, która zapewnia dostęp do aplikacji do określonych danych, a na koniec rejestruje aplikację w ich katalogu.</span><span class="sxs-lookup"><span data-stu-id="83c56-219">The user or administrator can then consent to the application, which gives the application access to the stated data, and finally registers the application in their directory.</span></span> <span data-ttu-id="83c56-220">Aby uzyskać więcej informacji, zobacz [omówienie Framework zgody](active-directory-integrating-applications.md#overview-of-the-consent-framework).</span><span class="sxs-lookup"><span data-stu-id="83c56-220">For more information, see [Overview of the Consent Framework](active-directory-integrating-applications.md#overview-of-the-consent-framework).</span></span>

<span data-ttu-id="83c56-221">Kilka dodatkowych kwestii dotyczących wystąpić podczas opracowywania aplikacji wielodostępnych, zamiast aplikacji pojedynczej dzierżawy.</span><span class="sxs-lookup"><span data-stu-id="83c56-221">Some additional considerations arise when developing a multi-tenant application instead of a single tenant application.</span></span> <span data-ttu-id="83c56-222">Na przykład, jeśli tworzysz aplikację dostępne dla użytkowników w wielu katalogach, należy mechanizm, aby określić, które dzierżawy są one w.</span><span class="sxs-lookup"><span data-stu-id="83c56-222">For example, if you are making your application available to users in multiple directories, you need a mechanism to determine which tenant they’re in.</span></span> <span data-ttu-id="83c56-223">Stosowanie pojedynczej dzierżawy musi tylko do przeszukania własnego katalogu dla użytkownika, gdy aplikacja wielodostępne musi zidentyfikować określonego użytkownika ze wszystkich katalogów w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-223">A single tenant application only needs to look in its own directory for a user, while a multi-tenant application needs to identify a specific user from all the directories in Azure AD.</span></span> <span data-ttu-id="83c56-224">Aby wykonać to zadanie, usługa Azure AD zapewnia wspólnego punktu końcowego uwierzytelniania gdzie wszelkie aplikacje wielodostępne może kierować żądań logowania, zamiast punktu końcowego specyficznego dla dzierżawy.</span><span class="sxs-lookup"><span data-stu-id="83c56-224">To accomplish this task, Azure AD provides a common authentication endpoint where any multi-tenant application can direct sign-in requests, instead of a tenant-specific endpoint.</span></span> <span data-ttu-id="83c56-225">Ten punkt końcowy jest https://login.microsoftonline.com/common dla wszystkich katalogów w usłudze Azure AD, punkt końcowy specyficznego dla dzierżawy może być https://login.microsoftonline.com/contoso.onmicrosoft.com. Typowe punkt końcowy jest szczególnie ważne podczas tworzenia aplikacji, ponieważ będą potrzebne logiki niezbędne do obsługi wielu dzierżawców podczas logowania, wylogowania i weryfikacji tokenu.</span><span class="sxs-lookup"><span data-stu-id="83c56-225">This endpoint is https://login.microsoftonline.com/common for all directories in Azure AD, whereas a tenant-specific endpoint might be https://login.microsoftonline.com/contoso.onmicrosoft.com. The common endpoint is especially important to consider when developing your application because you’ll need the necessary logic to handle multiple tenants during sign-in, sign-out, and token validation.</span></span>

<span data-ttu-id="83c56-226">Jeśli obecnie opracowujesz aplikację pojedynczej dzierżawy, ale chcesz udostępnić wiele organizacji, można łatwo wprowadzić zmiany do aplikacji i jego konfiguracja w usłudze Azure AD, aby była wielodostępne stanie.</span><span class="sxs-lookup"><span data-stu-id="83c56-226">If you are currently developing a single tenant application but want to make it available to many organizations, you can easily make changes to the application and its configuration in Azure AD to make it multi-tenant capable.</span></span> <span data-ttu-id="83c56-227">Ponadto usługi Azure AD używa tego samego klucza podpisywania wszystkich tokenów we wszystkich katalogach czy udostępniasz uwierzytelniania w pojedynczej dzierżawy lub aplikacji wielu dzierżawców.</span><span class="sxs-lookup"><span data-stu-id="83c56-227">In addition, Azure AD uses the same signing key for all tokens in all directories, whether you are providing authentication in a single tenant or multi-tenant application.</span></span>

<span data-ttu-id="83c56-228">Każdy scenariusz wymienione w niniejszym dokumencie zawiera podsekcja opisującą jego wymagania inicjowania obsługi administracyjnej.</span><span class="sxs-lookup"><span data-stu-id="83c56-228">Each scenario listed in this document includes a sub-section that describes its provisioning requirements.</span></span> <span data-ttu-id="83c56-229">Aby uzyskać bardziej szczegółowe informacje dotyczące inicjowania obsługi aplikacji w usłudze Azure AD i różnice między aplikacjami pojedynczych i wielu dzierżawców, zobacz [integracji aplikacji z usługą Azure Active Directory](active-directory-integrating-applications.md) Aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-229">For more in-depth information about provisioning an application in Azure AD and the differences between single and multi-tenant applications, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md) for more information.</span></span> <span data-ttu-id="83c56-230">Kontynuuj lekturę zrozumienie typowych scenariuszy aplikacji w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-230">Continue reading to understand the common application scenarios in Azure AD.</span></span>

## <a name="application-types-and-scenarios"></a><span data-ttu-id="83c56-231">Typy aplikacji i scenariusze</span><span class="sxs-lookup"><span data-stu-id="83c56-231">Application Types and Scenarios</span></span>
<span data-ttu-id="83c56-232">Każdy z opisanych w tym dokumencie scenariuszy należy opracować przy użyciu różnych języków i platform.</span><span class="sxs-lookup"><span data-stu-id="83c56-232">Each of the scenarios described in this document can be developed using various languages and platforms.</span></span> <span data-ttu-id="83c56-233">One wszystkich bazują na pełną przykłady, które są dostępne w naszym [przewodnik przykłady kodu](active-directory-code-samples.md), lub bezpośrednio z odpowiadającego [repozytoriów GitHub próbki](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory).</span><span class="sxs-lookup"><span data-stu-id="83c56-233">They are all backed by complete code samples which are available in our [Code Samples guide](active-directory-code-samples.md), or directly from the corresponding [GitHub sample repositories](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory).</span></span> <span data-ttu-id="83c56-234">Ponadto jeśli aplikacja wymaga konkretne lub segment end-to-end scenariusz, w większości przypadków te funkcje można dodać niezależnie.</span><span class="sxs-lookup"><span data-stu-id="83c56-234">In addition, if your application needs a specific piece or segment of an end-to-end scenario, in most cases that functionality can be added independently.</span></span> <span data-ttu-id="83c56-235">Na przykład jeśli masz natywnych aplikacji, która wywołuje interfejs API sieci web, można łatwo dodać aplikacji sieci web, która również wywołuje interfejs API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-235">For example, if you have a native application that calls a web API, you can easily add a web application that also calls the web API.</span></span> <span data-ttu-id="83c56-236">Na poniższym diagramie przedstawiono te scenariusze i typy aplikacji i w jaki sposób można dodać różnych składników:</span><span class="sxs-lookup"><span data-stu-id="83c56-236">The following diagram illustrates these scenarios and application types, and how different components can be added:</span></span>

![Typy aplikacji i scenariusze](./media/active-directory-authentication-scenarios/application_types_and_scenarios.png)

<span data-ttu-id="83c56-238">Są to pięć scenariuszy głównej aplikacji obsługiwanych przez usługę Azure AD:</span><span class="sxs-lookup"><span data-stu-id="83c56-238">These are the five primary application scenarios supported by Azure AD:</span></span>

* <span data-ttu-id="83c56-239">[Przeglądarki sieci Web aplikacji sieci Web](#web-browser-to-web-application): użytkownik musi zalogować się do aplikacji sieci web chronionej przez usługę Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-239">[Web Browser to Web Application](#web-browser-to-web-application): A user needs to sign in to a web application that is secured by Azure AD.</span></span>
* <span data-ttu-id="83c56-240">[Pojedynczy strony aplikacji JEDNOSTRONICOWEJ](#single-page-application-spa): użytkownik musi zalogować się do aplikacji jednej strony, która jest zabezpieczone przez usługę Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-240">[Single Page Application (SPA)](#single-page-application-spa): A user needs to sign in to a single page application that is secured by Azure AD.</span></span>
* <span data-ttu-id="83c56-241">[Aplikacji natywnej do interfejsu API sieci Web](#native-application-to-web-api): natywnych aplikacji, która działa na telefonie, tablecie lub komputerze wymaga uwierzytelnienia użytkownika można pobrać zasobów z składnika web API, który jest zabezpieczony przez usługę Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-241">[Native Application to Web API](#native-application-to-web-api): A native application that runs on a phone, tablet, or PC needs to authenticate a user to get resources from a web API that is secured by Azure AD.</span></span>
* <span data-ttu-id="83c56-242">[Aplikacja sieci Web interfejsu API sieci Web](#web-application-to-web-api): aplikacja sieci web musi pobrać zasobów z składnika web API zabezpieczone przez usługę Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-242">[Web Application to Web API](#web-application-to-web-api): A web application needs to get resources from a web API secured by Azure AD.</span></span>
* <span data-ttu-id="83c56-243">[Demon lub aplikacji serwera do interfejsu API sieci Web](#daemon-or-server-application-to-web-api): aplikację demona lub serwera bez interfejsu użytkownika sieci web musi pobrać zasobów z składnika web API zabezpieczone przez usługę Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-243">[Daemon or Server Application to Web API](#daemon-or-server-application-to-web-api): A daemon application or a server application with no web user interface needs to get resources from a web API secured by Azure AD.</span></span>

### <a name="web-browser-to-web-application"></a><span data-ttu-id="83c56-244">Przeglądarki sieci Web do aplikacji sieci Web</span><span class="sxs-lookup"><span data-stu-id="83c56-244">Web Browser to Web Application</span></span>
<span data-ttu-id="83c56-245">W tej sekcji opisano aplikację, która służy do uwierzytelniania użytkowników w przeglądarce sieci web do aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-245">This section describes an application that authenticates a user in a web browser to a web application.</span></span> <span data-ttu-id="83c56-246">W tym scenariuszu aplikacja sieci web kieruje przeglądarki użytkownika do logowania do usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-246">In this scenario, the web application directs the user’s browser to sign them in to Azure AD.</span></span> <span data-ttu-id="83c56-247">Usługi Azure AD zwraca odpowiedź logowania za pośrednictwem przeglądarki użytkownika, który zawiera oświadczenia dotyczące użytkownika w tokenie zabezpieczającym.</span><span class="sxs-lookup"><span data-stu-id="83c56-247">Azure AD returns a sign-in response through the user’s browser, which contains claims about the user in a security token.</span></span> <span data-ttu-id="83c56-248">Ten scenariusz obsługuje logowania przy użyciu protokołów WS-Federation, SAML 2.0 i OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="83c56-248">This scenario supports sign-on using the WS-Federation, SAML 2.0, and OpenID Connect protocols.</span></span>

#### <a name="diagram"></a><span data-ttu-id="83c56-249">Diagram</span><span class="sxs-lookup"><span data-stu-id="83c56-249">Diagram</span></span>
![Przepływ uwierzytelniania dla przeglądarki do aplikacji sieci web](./media/active-directory-authentication-scenarios/web_browser_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="83c56-251">Opis protokołu przepływu</span><span class="sxs-lookup"><span data-stu-id="83c56-251">Description of Protocol Flow</span></span>
1. <span data-ttu-id="83c56-252">Gdy użytkownik odwiedza aplikacji i musi się zalogować, zostanie przekierowany przy użyciu żądania logowania do punktu końcowego uwierzytelniania w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-252">When a user visits the application and needs to sign in, they are redirected via a sign-in request to the authentication endpoint in Azure AD.</span></span>
2. <span data-ttu-id="83c56-253">Użytkownik loguje się na stronie logowania.</span><span class="sxs-lookup"><span data-stu-id="83c56-253">The user signs in on the sign-in page.</span></span>
3. <span data-ttu-id="83c56-254">Jeśli uwierzytelnianie zakończy się pomyślnie, usługi Azure AD umożliwia utworzenie tokenu uwierzytelniania i zwraca odpowiedź logowania do adresu URL odpowiedzi aplikacji, które zostały skonfigurowane w portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="83c56-254">If authentication is successful, Azure AD creates an authentication token and returns a sign-in response to the application’s Reply URL that was configured in the Azure Portal.</span></span> <span data-ttu-id="83c56-255">W przypadku aplikacji produkcyjnej ten adres URL odpowiedzi powinna być HTTPS.</span><span class="sxs-lookup"><span data-stu-id="83c56-255">For a production application, this Reply URL should be HTTPS.</span></span> <span data-ttu-id="83c56-256">Zwrócony token zawiera oświadczenia dotyczące użytkownika i Azure AD, które są wymagane przez aplikację do sprawdzania poprawności tokenu.</span><span class="sxs-lookup"><span data-stu-id="83c56-256">The returned token includes claims about the user and Azure AD that are required by the application to validate the token.</span></span>
4. <span data-ttu-id="83c56-257">Aplikacja sprawdza poprawność tokenu przy użyciu publicznego klucza podpisywania i wystawcy informacji dostępnych w dokumencie metadanych Federacji dla usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-257">The application validates the token by using a public signing key and issuer information available at the federation metadata document for Azure AD.</span></span> <span data-ttu-id="83c56-258">Po zgłoszeniu weryfikuje token, usługi Azure AD nowa sesja rozpoczyna się od użytkownika.</span><span class="sxs-lookup"><span data-stu-id="83c56-258">After the application validates the token, Azure AD starts a new session with the user.</span></span> <span data-ttu-id="83c56-259">Ta sesja zezwala użytkownikowi na dostęp do aplikacji, do momentu wygaśnięcia.</span><span class="sxs-lookup"><span data-stu-id="83c56-259">This session allows the user to access the application until it expires.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="83c56-260">Przykłady kodu</span><span class="sxs-lookup"><span data-stu-id="83c56-260">Code Samples</span></span>
<span data-ttu-id="83c56-261">Zobacz przykłady kodu dla przeglądarki sieci Web, aby scenariusze aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="83c56-261">See the code samples for Web Browser to Web Application scenarios.</span></span> <span data-ttu-id="83c56-262">I wrócić tu często — możemy dodać nowe próbki cały czas.</span><span class="sxs-lookup"><span data-stu-id="83c56-262">And, check back frequently -- we add new samples all the time.</span></span> <span data-ttu-id="83c56-263">[Przeglądarki sieci Web aplikacji sieci Web](active-directory-code-samples.md#web-browser-to-web-application).</span><span class="sxs-lookup"><span data-stu-id="83c56-263">[Web Browser to Web Application](active-directory-code-samples.md#web-browser-to-web-application).</span></span>

#### <a name="registering"></a><span data-ttu-id="83c56-264">Rejestrowanie</span><span class="sxs-lookup"><span data-stu-id="83c56-264">Registering</span></span>
* <span data-ttu-id="83c56-265">Pojedynczej dzierżawy: Jeśli tworzysz aplikację tylko dla organizacji, musi być zarejestrowana w katalogu firmy przy użyciu portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="83c56-265">Single Tenant: If you are building an application just for your organization, it must be registered in your company’s directory by using the Azure Portal.</span></span>
* <span data-ttu-id="83c56-266">Wielodostępne: Jeśli tworzysz aplikację, która może być używane przez użytkowników spoza organizacji, to musi być zarejestrowana w katalogu firmy, ale musi być zarejestrowana w poszczególnych organizacji w katalogu, który będzie używany w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-266">Multi-Tenant: If you are building an application that can be used by users outside your organization, it must be registered in your company’s directory, but also must be registered in each organization’s directory that will be using the application.</span></span> <span data-ttu-id="83c56-267">Aby udostępnić w ich katalogu aplikacji, można dołączyć procesu tworzenia konta dla klientów, które umożliwia im wyrażenia zgody na aplikację.</span><span class="sxs-lookup"><span data-stu-id="83c56-267">To make your application available in their directory, you can include a sign-up process for your customers that enables them to consent to your application.</span></span> <span data-ttu-id="83c56-268">Po zapisaniu się aplikacji one zostanie wyświetlone okno dialogowe, które zawiera uprawnienia wymagane przez aplikację, a następnie opcję wyrażenia zgody.</span><span class="sxs-lookup"><span data-stu-id="83c56-268">When they sign up for your application, they will be presented with a dialog that shows the permissions the application requires, and then the option to consent.</span></span> <span data-ttu-id="83c56-269">W zależności od wymagane uprawnienia administratora w innej organizacji może być konieczna wyrażenia zgody.</span><span class="sxs-lookup"><span data-stu-id="83c56-269">Depending on the required permissions, an administrator in the other organization may be required to give consent.</span></span> <span data-ttu-id="83c56-270">Po wyrażeniu zgody przez użytkownika lub administratora, aplikacja jest zarejestrowany w ich katalogu.</span><span class="sxs-lookup"><span data-stu-id="83c56-270">When the user or administrator consents, the application is registered in their directory.</span></span> <span data-ttu-id="83c56-271">Aby uzyskać więcej informacji, zobacz [integracji aplikacji z usługą Azure Active Directory](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="83c56-271">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="83c56-272">Wygaśnięcia tokenu</span><span class="sxs-lookup"><span data-stu-id="83c56-272">Token Expiration</span></span>
<span data-ttu-id="83c56-273">Sesja użytkownika wygasa po wygaśnięciu ważności tokenu wystawiony przez usługę Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-273">The user’s session expires when the lifetime of the token issued by Azure AD expires.</span></span> <span data-ttu-id="83c56-274">Aplikację można zmniejszyć tym okresie, w razie potrzeby, takie jak wylogowywania użytkowników oparte na okresie braku aktywności.</span><span class="sxs-lookup"><span data-stu-id="83c56-274">Your application can shorten this time period if desired, such as signing out users based on a period of inactivity.</span></span> <span data-ttu-id="83c56-275">Po wygaśnięciu sesji użytkownika pojawi się monit, aby zalogować się ponownie.</span><span class="sxs-lookup"><span data-stu-id="83c56-275">When the session expires, the user will be prompted to sign in again.</span></span>

### <a name="single-page-application-spa"></a><span data-ttu-id="83c56-276">Jednostronicowej aplikacji JEDNOSTRONICOWEJ</span><span class="sxs-lookup"><span data-stu-id="83c56-276">Single Page Application (SPA)</span></span>
<span data-ttu-id="83c56-277">W tej sekcji opisano uwierzytelnianie dla jednej aplikacji strony, którego używa usługi Azure AD i autoryzacji niejawne OAuth 2.0 są przyznawane do zabezpieczania jego zakończenia interfejsu API z powrotem w sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-277">This section describes authentication for a Single Page Application, that uses Azure AD and the OAuth 2.0 implicit authorization grant to secure its web API back end.</span></span> <span data-ttu-id="83c56-278">Aplikacje jednostronicowe są zwykle struktury jako Warstwa prezentacji JavaScript (frontonu) działającym w przeglądarce i interfejsu API sieci Web wewnętrznej działa na serwerze, który implementuje logiki biznesowej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-278">Single Page Applications are typically structured as a JavaScript presentation layer (front end) that runs in the browser and a Web API back end that runs on a server and implements the application’s business logic.</span></span> <span data-ttu-id="83c56-279">Aby dowiedzieć się więcej o udzielania autoryzacji niejawne i pomóc zdecydować, czy jest odpowiednie dla danego scenariusza aplikacji, zobacz [opis OAuth2 niejawne Przyznaj przepływu w usłudze Azure Active Directory](active-directory-dev-understanding-oauth2-implicit-grant.md).</span><span class="sxs-lookup"><span data-stu-id="83c56-279">To learn more about the implicit authorization grant, and help you decide whether it's right for your application scenario, see [Understanding the OAuth2 implicit grant flow in Azure Active Directory](active-directory-dev-understanding-oauth2-implicit-grant.md).</span></span>

<span data-ttu-id="83c56-280">W tym scenariuszu, gdy użytkownik się zaloguje, JavaScript FrontPage używa zakończenia [biblioteki uwierzytelniania usługi Active Directory dla języka JavaScript (ADAL. JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) i przyznać niejawne autoryzacji można uzyskać Identyfikatora tokenu (żądaniu) z usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-280">In this scenario, when the user signs in, the JavaScript front end uses [Active Directory Authentication Library for JavaScript (ADAL.JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) and the implicit authorization grant to obtain an ID token (id_token) from Azure AD.</span></span> <span data-ttu-id="83c56-281">Token jest buforowany i klient dołącza go do żądania jako token elementu nośnego wywołania do jego interfejsu API sieci Web zaplecza, która jest zabezpieczone przy użyciu oprogramowania pośredniczącego OWIN.</span><span class="sxs-lookup"><span data-stu-id="83c56-281">The token is cached and the client attaches it to the request as the bearer token when making calls to its Web API back end, which is secured using the OWIN middleware.</span></span> 

#### <a name="diagram"></a><span data-ttu-id="83c56-282">Diagram</span><span class="sxs-lookup"><span data-stu-id="83c56-282">Diagram</span></span>
![Jeden diagram strony aplikacji](./media/active-directory-authentication-scenarios/single_page_app.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="83c56-284">Opis protokołu przepływu</span><span class="sxs-lookup"><span data-stu-id="83c56-284">Description of Protocol Flow</span></span>
1. <span data-ttu-id="83c56-285">Użytkownik przechodzi do aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-285">The user navigates to the web application.</span></span>
2. <span data-ttu-id="83c56-286">Aplikacja zwraca JavaScript frontonu (Warstwa prezentacji) do przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="83c56-286">The application returns the JavaScript front end (presentation layer) to the browser.</span></span>
3. <span data-ttu-id="83c56-287">Użytkownik inicjuje logowania, na przykład klikając znak łącza.</span><span class="sxs-lookup"><span data-stu-id="83c56-287">The user initiates sign in, for example by clicking a sign in link.</span></span> <span data-ttu-id="83c56-288">Przeglądarka wysyła GET do żądania tokenu identyfikator punktu końcowego autoryzacji usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-288">The browser sends a GET to the Azure AD authorization endpoint to request an ID token.</span></span> <span data-ttu-id="83c56-289">To żądanie zawiera adres URL Identyfikatora i odpowiedzi aplikacji w parametrach zapytania.</span><span class="sxs-lookup"><span data-stu-id="83c56-289">This request includes the application ID and reply URL in the query parameters.</span></span>
4. <span data-ttu-id="83c56-290">Usługi Azure AD weryfikuje adres URL odpowiedzi przed zarejestrowany adres URL odpowiedzi, który został skonfigurowany w portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="83c56-290">Azure AD validates the Reply URL against the registered Reply URL that was configured in the Azure Portal.</span></span>
5. <span data-ttu-id="83c56-291">Użytkownik loguje się na stronie logowania.</span><span class="sxs-lookup"><span data-stu-id="83c56-291">The user signs in on the sign-in page.</span></span>
6. <span data-ttu-id="83c56-292">Jeśli uwierzytelnianie zakończy się pomyślnie, usługi Azure AD umożliwia utworzenie tokenu identyfikator i zwraca jako fragmentu adresu URL (#) do adresu URL odpowiedzi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-292">If authentication is successful, Azure AD creates an ID token and returns it as a URL fragment (#) to the application’s Reply URL.</span></span> <span data-ttu-id="83c56-293">W przypadku aplikacji produkcyjnej ten adres URL odpowiedzi powinna być HTTPS.</span><span class="sxs-lookup"><span data-stu-id="83c56-293">For a production application, this Reply URL should be HTTPS.</span></span> <span data-ttu-id="83c56-294">Zwrócony token zawiera oświadczenia dotyczące użytkownika i Azure AD, które są wymagane przez aplikację do sprawdzania poprawności tokenu.</span><span class="sxs-lookup"><span data-stu-id="83c56-294">The returned token includes claims about the user and Azure AD that are required by the application to validate the token.</span></span>
7. <span data-ttu-id="83c56-295">Kod klienta JavaScript w przeglądarce token zostanie wyodrębniony z odpowiedzi do użycia w zabezpieczanie wywołań do aplikacji sieci web zakończenie interfejsu API z powrotem.</span><span class="sxs-lookup"><span data-stu-id="83c56-295">The JavaScript client code running in the browser extracts the token from the response to use in securing calls to the application’s web API back end.</span></span>
8. <span data-ttu-id="83c56-296">Przeglądarka wywołuje aplikacji sieci web interfejsu API z powrotem kończyć się przy użyciu tokenu dostępu w nagłówku autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-296">The browser calls the application’s web API back end with the access token in the authorization header.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="83c56-297">Przykłady kodu</span><span class="sxs-lookup"><span data-stu-id="83c56-297">Code Samples</span></span>
<span data-ttu-id="83c56-298">Zobacz przykłady kodu dla scenariuszy jednej strony aplikacji JEDNOSTRONICOWEJ.</span><span class="sxs-lookup"><span data-stu-id="83c56-298">See the code samples for Single Page Application (SPA) scenarios.</span></span> <span data-ttu-id="83c56-299">Pamiętaj wrócić tu często — możemy dodać nowe próbki cały czas.</span><span class="sxs-lookup"><span data-stu-id="83c56-299">Be sure to check back frequently -- we add new samples all the time.</span></span> <span data-ttu-id="83c56-300">[Pojedynczy strony aplikacji JEDNOSTRONICOWEJ](active-directory-code-samples.md#single-page-application-spa).</span><span class="sxs-lookup"><span data-stu-id="83c56-300">[Single Page Application (SPA)](active-directory-code-samples.md#single-page-application-spa).</span></span>

#### <a name="registering"></a><span data-ttu-id="83c56-301">Rejestrowanie</span><span class="sxs-lookup"><span data-stu-id="83c56-301">Registering</span></span>
* <span data-ttu-id="83c56-302">Pojedynczej dzierżawy: Jeśli tworzysz aplikację tylko dla organizacji, musi być zarejestrowana w katalogu firmy przy użyciu portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="83c56-302">Single Tenant: If you are building an application just for your organization, it must be registered in your company’s directory by using the Azure Portal.</span></span>
* <span data-ttu-id="83c56-303">Wielodostępne: Jeśli tworzysz aplikację, która może być używane przez użytkowników spoza organizacji, to musi być zarejestrowana w katalogu firmy, ale musi być zarejestrowana w poszczególnych organizacji w katalogu, który będzie używany w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-303">Multi-Tenant: If you are building an application that can be used by users outside your organization, it must be registered in your company’s directory, but also must be registered in each organization’s directory that will be using the application.</span></span> <span data-ttu-id="83c56-304">Aby udostępnić w ich katalogu aplikacji, można dołączyć procesu tworzenia konta dla klientów, które umożliwia im wyrażenia zgody na aplikację.</span><span class="sxs-lookup"><span data-stu-id="83c56-304">To make your application available in their directory, you can include a sign-up process for your customers that enables them to consent to your application.</span></span> <span data-ttu-id="83c56-305">Po zapisaniu się aplikacji one zostanie wyświetlone okno dialogowe, które zawiera uprawnienia wymagane przez aplikację, a następnie opcję wyrażenia zgody.</span><span class="sxs-lookup"><span data-stu-id="83c56-305">When they sign up for your application, they will be presented with a dialog that shows the permissions the application requires, and then the option to consent.</span></span> <span data-ttu-id="83c56-306">W zależności od wymagane uprawnienia administratora w innej organizacji może być konieczna wyrażenia zgody.</span><span class="sxs-lookup"><span data-stu-id="83c56-306">Depending on the required permissions, an administrator in the other organization may be required to give consent.</span></span> <span data-ttu-id="83c56-307">Po wyrażeniu zgody przez użytkownika lub administratora, aplikacja jest zarejestrowany w ich katalogu.</span><span class="sxs-lookup"><span data-stu-id="83c56-307">When the user or administrator consents, the application is registered in their directory.</span></span> <span data-ttu-id="83c56-308">Aby uzyskać więcej informacji, zobacz [integracji aplikacji z usługą Azure Active Directory](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="83c56-308">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

<span data-ttu-id="83c56-309">Po zarejestrowaniu aplikacji musi być skonfigurowana do używania protokołu OAuth 2.0 niejawne Przyznaj.</span><span class="sxs-lookup"><span data-stu-id="83c56-309">After registering the application, it must be configured to use OAuth 2.0 Implicit Grant protocol.</span></span> <span data-ttu-id="83c56-310">Domyślnie ten protokół jest wyłączone dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-310">By default, this protocol is disabled for applications.</span></span> <span data-ttu-id="83c56-311">Aby włączyć protokół OAuth2 niejawne Przyznaj aplikacji, Edytuj jej w manifeście aplikacji z portalu Azure i ustaw wartość "oauth2AllowImplicitFlow" na true.</span><span class="sxs-lookup"><span data-stu-id="83c56-311">To enable the OAuth2 Implicit Grant protocol for your application, edit its application manifest from the Azure Portal and set the “oauth2AllowImplicitFlow” value to true.</span></span> <span data-ttu-id="83c56-312">Aby uzyskać szczegółowe instrukcje, zobacz [włączenie OAuth 2.0 niejawne Przyznaj dla aplikacje jednostronicowe](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="83c56-312">For detailed instructions, see [Enabling OAuth 2.0 Implicit Grant for Single Page Applications](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="83c56-313">Wygaśnięcia tokenu</span><span class="sxs-lookup"><span data-stu-id="83c56-313">Token Expiration</span></span>
<span data-ttu-id="83c56-314">Gdy używasz ADAL.js Aby zarządzać uwierzytelnianiem z usługą Azure AD, korzystać z kilku funkcji, które ułatwiają wygasły token odświeżania, a także uzyskiwania tokenów zasobów interfejsu API sieci web dodatkowe, które może zostać wywołana przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="83c56-314">When you use ADAL.js to manage authentication with Azure AD, you benefit from several features that facilitate refreshing an expired token as well as getting tokens for additional web API resources that may be called by the application.</span></span> <span data-ttu-id="83c56-315">Jeśli użytkownik zostanie pomyślnie uwierzytelniony z usługą Azure AD, zabezpieczone przez plik cookie sesji jest nawiązywane dla użytkownika między przeglądarką a usługą Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-315">When the user successfully authenticates with Azure AD, a session secured by a cookie is established for the user between the browser and Azure AD.</span></span> <span data-ttu-id="83c56-316">Należy pamiętać, że sesja istnieje między użytkownikiem a usługą Azure AD i nie między użytkownikiem i aplikacji sieci web uruchomiony na serwerze.</span><span class="sxs-lookup"><span data-stu-id="83c56-316">It’s important to note that the session exists between the user and Azure AD and not between the user and the web application running on the server.</span></span> <span data-ttu-id="83c56-317">Po wygaśnięciu tokenu ADAL.js używa tej sesji dyskretnie uzyskać inny token.</span><span class="sxs-lookup"><span data-stu-id="83c56-317">When a token expires, ADAL.js uses this session to silently obtain another token.</span></span> <span data-ttu-id="83c56-318">Robi to przy użyciu ukryte iFrame do wysyłania i odbierania za pomocą protokołu OAuth niejawne Przyznaj żądania.</span><span class="sxs-lookup"><span data-stu-id="83c56-318">It does this by using a hidden iFrame to send and receive the request using the OAuth Implicit Grant protocol.</span></span> <span data-ttu-id="83c56-319">ADAL.js umożliwia także ten sam mechanizm dyskretnie uzyskanie tokenów dostępu z usługi Azure AD dla innych sieci web interfejsu API zasobów, które wywołuje aplikację tak długo, jak te zasoby obsługuje współużytkowanie zasobów między źródłami (CORS), do udostępniania są rejestrowane w katalogu użytkownika i wszystkie wymagane zgody zostało przydzielone przez użytkownika podczas logowania.</span><span class="sxs-lookup"><span data-stu-id="83c56-319">ADAL.js can also use this same mechanism to silently obtain access tokens from Azure AD for other web API resources that the application calls as long as these resources support cross-origin resource sharing (CORS), are registered in the user’s directory, and any required consent was given by the user during sign-in.</span></span>

### <a name="native-application-to-web-api"></a><span data-ttu-id="83c56-320">Aplikacji natywnej do interfejsu API sieci Web</span><span class="sxs-lookup"><span data-stu-id="83c56-320">Native Application to Web API</span></span>
<span data-ttu-id="83c56-321">W tej sekcji opisano natywnych aplikacji, która wywołuje interfejs API sieci web w imieniu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="83c56-321">This section describes a native application that calls a web API on behalf of a user.</span></span> <span data-ttu-id="83c56-322">Ten scenariusz jest zbudowany na typ grant kodu autoryzacji OAuth 2.0 za pomocą publicznego klienta zgodnie z opisem w sekcji 4.1 [Specyfikacja protokołu OAuth 2.0](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="83c56-322">This scenario is built on the OAuth 2.0 authorization code grant type with a public client, as described in section 4.1 of the [OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="83c56-323">Aplikacji natywnej uzyskuje token dostępu dla użytkownika za pomocą protokołu OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="83c56-323">The native application obtains an access token for the user by using the OAuth 2.0 protocol.</span></span> <span data-ttu-id="83c56-324">Ten token dostępu jest następnie wysyłane żądania sieci Web interfejsu API, które udzielają użytkownikowi autoryzacji i zwraca wartość żądanego zasobu.</span><span class="sxs-lookup"><span data-stu-id="83c56-324">This access token is then sent in the request to the web API, which authorizes the user and returns the desired resource.</span></span>

#### <a name="diagram"></a><span data-ttu-id="83c56-325">Diagram</span><span class="sxs-lookup"><span data-stu-id="83c56-325">Diagram</span></span>
![Aplikacji natywnej do diagramu interfejsu API w sieci Web](./media/active-directory-authentication-scenarios/native_app_to_web_api.png)

#### <a name="authentication-flow-for-native-application-to-api"></a><span data-ttu-id="83c56-327">Przepływ uwierzytelniania dla aplikacji natywnej do interfejsu API</span><span class="sxs-lookup"><span data-stu-id="83c56-327">Authentication flow for native application to API</span></span>
#### <a name="description-of-protocol-flow"></a><span data-ttu-id="83c56-328">Opis protokołu przepływu</span><span class="sxs-lookup"><span data-stu-id="83c56-328">Description of Protocol Flow</span></span>
<span data-ttu-id="83c56-329">Jeśli korzystasz z biblioteki uwierzytelniania usługi AD, większość szczegóły protokołu opisanych poniżej są obsługiwane, takich jak okienko wyskakujące przeglądarki, buforowaniem tokena i Obsługa tokenów odświeżania.</span><span class="sxs-lookup"><span data-stu-id="83c56-329">If you are using the AD Authentication Libraries, most of the protocol details described below are handled for you, such as the browser pop-up, token caching, and handling of refresh tokens.</span></span>

1. <span data-ttu-id="83c56-330">Przy użyciu przeglądarki wyskakujących aplikacji natywnej zgłasza żądanie do punktu końcowego autoryzacji w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-330">Using a browser pop-up, the native application makes a request to the authorization endpoint in Azure AD.</span></span> <span data-ttu-id="83c56-331">To żądanie zawiera identyfikator aplikacji i Przekierowanie URI aplikacji natywnej, jak pokazano w portalu Azure i aplikacji identyfikator URI dla interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-331">This request includes the Application ID and the redirect URI of the native application as shown in the Azure Portal, and the application ID URI for the web API.</span></span> <span data-ttu-id="83c56-332">Jeśli użytkownik nie już zalogowany, są monitowani o ponownie się zalogować</span><span class="sxs-lookup"><span data-stu-id="83c56-332">If the user hasn’t already signed in, they are prompted to sign in again</span></span>
2. <span data-ttu-id="83c56-333">Usługi Azure AD uwierzytelnia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="83c56-333">Azure AD authenticates the user.</span></span> <span data-ttu-id="83c56-334">Jeśli jest to aplikacja wielodostępnej i zgody jest wymagana do korzystania z aplikacji, użytkownika będą musieli zgody, jeśli ich nie zostało to jeszcze zrobione.</span><span class="sxs-lookup"><span data-stu-id="83c56-334">If it is a multi-tenant application and consent is required to use the application, the user will be required to consent if they haven’t already done so.</span></span> <span data-ttu-id="83c56-335">Po przyznaniu zgody i po pomyślnym uwierzytelnieniu usługa Azure AD wystawia odpowiedź kodu autoryzacji do identyfikatora URI przekierowania aplikacji klienckiej.</span><span class="sxs-lookup"><span data-stu-id="83c56-335">After granting consent and upon successful authentication, Azure AD issues an authorization code response back to the client application’s redirect URI.</span></span>
3. <span data-ttu-id="83c56-336">Gdy usługa Azure AD wystawia odpowiedź kodu autoryzacji do identyfikatora URI przekierowania, aplikacja kliencka zatrzymuje interakcji z przeglądarką i wyodrębnia kod autoryzacji z odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="83c56-336">When Azure AD issues an authorization code response back to the redirect URI, the client application stops browser interaction and extracts the authorization code from the response.</span></span> <span data-ttu-id="83c56-337">Przy użyciu tego kodu autoryzacji, aplikacja kliencka wysyła żądanie do punktu końcowego tokenu usługi Azure AD, który zawiera kod autoryzacji, szczegółowe informacje o aplikacji klienta (identyfikator aplikacji i identyfikator URI przekierowania) i żądanego zasobu (aplikacji identyfikator URI dla interfejsu API sieci web).</span><span class="sxs-lookup"><span data-stu-id="83c56-337">Using this authorization code, the client application sends a request to Azure AD’s token endpoint that includes the authorization code, details about the client application (Application ID and redirect URI), and the desired resource (application ID URI for the web API).</span></span>
4. <span data-ttu-id="83c56-338">Kod autoryzacji i informacji na temat interfejsu API sieci web i aplikacji klienta są weryfikowane przez usługę Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-338">The authorization code and information about the client application and web API are validated by Azure AD.</span></span> <span data-ttu-id="83c56-339">Po pomyślnym zweryfikowaniem usługi Azure AD zwraca dwa tokeny: token JWT dostępu i token odświeżania JWT.</span><span class="sxs-lookup"><span data-stu-id="83c56-339">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span> <span data-ttu-id="83c56-340">Ponadto usługi Azure AD zwraca podstawowe informacje o użytkowniku, takie jak ich wyświetlaną nazwę i dzierżawy identyfikatorów.</span><span class="sxs-lookup"><span data-stu-id="83c56-340">In addition, Azure AD returns basic information about the user, such as their display name and tenant ID.</span></span>
5. <span data-ttu-id="83c56-341">Za pośrednictwem protokołu HTTPS aplikacja kliencka używa zwrócony tokenu dostępu JWT, aby dodać ciąg tokenu JWT z oznaczeniem "Bearer" w nagłówku autoryzacji żądania do interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-341">Over HTTPS, the client application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="83c56-342">Interfejs API sieci web sprawdza poprawność tokenu JWT i Jeśli weryfikacja zakończy się pomyślnie, zwraca wartość żądanego zasobu.</span><span class="sxs-lookup"><span data-stu-id="83c56-342">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>
6. <span data-ttu-id="83c56-343">Po wygaśnięciu tokenu dostępu, aplikacja kliencka zostanie wyświetlony błąd, który wskazuje, że użytkownik musi uwierzytelnić się ponownie.</span><span class="sxs-lookup"><span data-stu-id="83c56-343">When the access token expires, the client application will receive an error that indicates the user needs to authenticate again.</span></span> <span data-ttu-id="83c56-344">Aplikacja ma token odświeżania nieprawidłowy, może służyć uzyskać nowy token dostępu bez monitowania użytkownika, aby zalogować się ponownie.</span><span class="sxs-lookup"><span data-stu-id="83c56-344">If the application has a valid refresh token, it can be used to acquire a new access token without prompting the user to sign in again.</span></span> <span data-ttu-id="83c56-345">Jeśli token odświeżania, aplikacji należy ponownie interakcyjnego uwierzytelniania użytkownika.</span><span class="sxs-lookup"><span data-stu-id="83c56-345">If the refresh token expires, the application will need to interactively authenticate the user once again.</span></span>

> [!NOTE]
> <span data-ttu-id="83c56-346">Token odświeżania wystawiony przez usługę Azure AD można uzyskać dostęp do wielu zasobów.</span><span class="sxs-lookup"><span data-stu-id="83c56-346">The refresh token issued by Azure AD can be used to access multiple resources.</span></span> <span data-ttu-id="83c56-347">Na przykład jeśli masz aplikacji klienckiej, która ma uprawnienia do wywoływania dwóch interfejsów API sieci web token odświeżania można uzyskać dostęp do tokenu do innych sieci web interfejsu API oraz.</span><span class="sxs-lookup"><span data-stu-id="83c56-347">For example, if you have a client application that has permission to call two web APIs, the refresh token can be used to get an access token to the other web API as well.</span></span>
> 
> 

#### <a name="code-samples"></a><span data-ttu-id="83c56-348">Przykłady kodu</span><span class="sxs-lookup"><span data-stu-id="83c56-348">Code Samples</span></span>
<span data-ttu-id="83c56-349">Zobacz przykłady kodu dla aplikacji natywnej do scenariuszy interfejsu Web API.</span><span class="sxs-lookup"><span data-stu-id="83c56-349">See the code samples for Native Application to Web API scenarios.</span></span> <span data-ttu-id="83c56-350">I wrócić tu często — możemy dodać nowe próbki cały czas.</span><span class="sxs-lookup"><span data-stu-id="83c56-350">And, check back frequently -- we add new samples all the time.</span></span> <span data-ttu-id="83c56-351">[Aplikacji natywnej do interfejsu API sieci Web](active-directory-code-samples.md#native-application-to-web-api).</span><span class="sxs-lookup"><span data-stu-id="83c56-351">[Native Application to Web API](active-directory-code-samples.md#native-application-to-web-api).</span></span>

#### <a name="registering"></a><span data-ttu-id="83c56-352">Rejestrowanie</span><span class="sxs-lookup"><span data-stu-id="83c56-352">Registering</span></span>
* <span data-ttu-id="83c56-353">Pojedynczej dzierżawy: Natywnego aplikacji i interfejs API sieci web musi być zarejestrowana w tym samym katalogu w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-353">Single Tenant: Both the native application and the web API must be registered in the same directory in Azure AD.</span></span> <span data-ttu-id="83c56-354">Interfejs API sieci web można skonfigurować do udostępnienia zestaw uprawnień, które są używane do ograniczenia dostępu aplikacji natywnej do jej zasobów.</span><span class="sxs-lookup"><span data-stu-id="83c56-354">The web API can be configured to expose a set of permissions, which are used to limit the native application’s access to its resources.</span></span> <span data-ttu-id="83c56-355">Aplikacja kliencka następnie wybiera odpowiednie uprawnienia, z menu rozwijanego "Uprawnień do innych aplikacji" w portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="83c56-355">The client application then selects the desired permissions from the “Permissions to Other Applications” drop-down menu in the Azure Portal.</span></span>
* <span data-ttu-id="83c56-356">Wielodostępne: Po raz pierwszy, aplikacji natywnej tylko zarejestrowane w katalogu wydawcy lub dewelopera.</span><span class="sxs-lookup"><span data-stu-id="83c56-356">Multi-Tenant: First, the native application only ever registered in the developer or publisher’s directory.</span></span> <span data-ttu-id="83c56-357">Po drugie natywnych aplikacji skonfigurowano wskazać uprawnienia, które wymaga, aby działała.</span><span class="sxs-lookup"><span data-stu-id="83c56-357">Second, the native application is configured to indicate the permissions it requires to be functional.</span></span> <span data-ttu-id="83c56-358">Ta lista wymaganych uprawnień jest wyświetlany w oknie dialogowym, jeśli użytkownik lub administrator w katalogu docelowym daje zgody do aplikacji, która udostępnia w organizacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-358">This list of required permissions is shown in a dialog when a user or administrator in the destination directory gives consent to the application, which makes it available to their organization.</span></span> <span data-ttu-id="83c56-359">Niektóre aplikacje wymagają tylko użytkownika poziomu uprawnień, które każdy użytkownik w organizacji można wyrazić zgodę na.</span><span class="sxs-lookup"><span data-stu-id="83c56-359">Some applications require just user-level permissions, which any user in the organization can consent to.</span></span> <span data-ttu-id="83c56-360">Inne aplikacje wymagają uprawnień na poziomie administratora, które użytkownik w organizacji nie można wyrazić zgodę na.</span><span class="sxs-lookup"><span data-stu-id="83c56-360">Other applications require administrator-level permissions, which a user in the organization cannot consent to.</span></span> <span data-ttu-id="83c56-361">Tylko administrator katalogu można wyrazić zgodę dla aplikacji, które wymagają tego poziomu uprawnień.</span><span class="sxs-lookup"><span data-stu-id="83c56-361">Only a directory administrator can give consent to applications that require this level of permissions.</span></span> <span data-ttu-id="83c56-362">Po wyrażeniu zgody przez użytkownika lub administratora, tylko interfejs API sieci web jest zarejestrowany w ich katalogu.</span><span class="sxs-lookup"><span data-stu-id="83c56-362">When the user or administrator consents, only the web API is registered in their directory.</span></span> <span data-ttu-id="83c56-363">Aby uzyskać więcej informacji, zobacz [integracji aplikacji z usługą Azure Active Directory](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="83c56-363">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="83c56-364">Wygaśnięcia tokenu</span><span class="sxs-lookup"><span data-stu-id="83c56-364">Token Expiration</span></span>
<span data-ttu-id="83c56-365">Gdy aplikacji natywnej korzysta z jego kod autoryzacji, Uzyskaj token dostępu JWT, ponadto otrzymuje token odświeżania JWT.</span><span class="sxs-lookup"><span data-stu-id="83c56-365">When the native application uses its authorization code to get a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="83c56-366">Po wygaśnięciu tokenu dostępu, token odświeżania może służyć do ponownego uwierzytelnienia użytkownika bez konieczności je, aby zalogować się ponownie.</span><span class="sxs-lookup"><span data-stu-id="83c56-366">When the access token expires, the refresh token can be used to re-authenticate the user without requiring them to sign in again.</span></span> <span data-ttu-id="83c56-367">Ten token odświeżania jest następnie używany do uwierzytelniania użytkownika, który powoduje nowy token dostępu i token odświeżania.</span><span class="sxs-lookup"><span data-stu-id="83c56-367">This refresh token is then used to authenticate the user, which results in a new access token and refresh token.</span></span>

### <a name="web-application-to-web-api"></a><span data-ttu-id="83c56-368">Aplikacja sieci Web do interfejsu API sieci Web</span><span class="sxs-lookup"><span data-stu-id="83c56-368">Web Application to Web API</span></span>
<span data-ttu-id="83c56-369">W tej sekcji opisano aplikacji sieci web, które należy uzyskać zasobów z interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-369">This section describes a web application that needs to get resources from a web API.</span></span> <span data-ttu-id="83c56-370">W tym scenariuszu istnieją dwa typy tożsamości, które aplikacji sieci web można użyć do uwierzytelniania i wywołania interfejsu API sieci web: tożsamość aplikacji lub tożsamości użytkownika delegowanego.</span><span class="sxs-lookup"><span data-stu-id="83c56-370">In this scenario, there are two identity types that the web application can use to authenticate and call the web API: an application identity, or a delegated user identity.</span></span>

<span data-ttu-id="83c56-371">*Tożsamość aplikacji:* przyznania poświadczeń klienta OAuth 2.0 w tym scenariuszu są używane do uwierzytelnienia się jako aplikacji i dostępu do interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-371">*Application identity:* This scenario uses OAuth 2.0 client credentials grant to authenticate as the application and access the web API.</span></span> <span data-ttu-id="83c56-372">Korzystając z tożsamością aplikacji sieci web interfejsu API tylko może wykryć, czy wywołanie aplikacji sieci web, co sieć web interfejsu API nie otrzymuje żadnych informacji o użytkowniku.</span><span class="sxs-lookup"><span data-stu-id="83c56-372">When using an application identity, the web API can only detect that the web application is calling it, as the web API does not receive any information about the user.</span></span> <span data-ttu-id="83c56-373">Jeśli aplikacja odbiera informacje o użytkowniku, zostaną wysłane za pośrednictwem protokołu aplikacji, a nie jest podpisany przez usługę Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-373">If the application receives information about the user, it will be sent via the application protocol, and it is not signed by Azure AD.</span></span> <span data-ttu-id="83c56-374">Interfejs API sieci web ufa, że aplikacja sieci web uwierzytelnił użytkownika.</span><span class="sxs-lookup"><span data-stu-id="83c56-374">The web API trusts that the web application authenticated the user.</span></span> <span data-ttu-id="83c56-375">Z tego powodu ten wzorzec jest wywoływana zaufany podsystem.</span><span class="sxs-lookup"><span data-stu-id="83c56-375">For this reason, this pattern is called a trusted subsystem.</span></span>

<span data-ttu-id="83c56-376">*Delegowane tożsamości użytkownika:* w tym scenariuszu można przeprowadzić na dwa sposoby: OpenID Connect i udzielania kodu autoryzacji protokołu OAuth 2.0 z klientem poufne.</span><span class="sxs-lookup"><span data-stu-id="83c56-376">*Delegated user identity:* This scenario can be accomplished in two ways: OpenID Connect, and OAuth 2.0 authorization code grant with a confidential client.</span></span> <span data-ttu-id="83c56-377">Aplikacja sieci web uzyskuje token dostępu dla użytkownika, co gwarantuje sieci web interfejsu API, że użytkownik pomyślnie uwierzytelniony do aplikacji sieci web i aplikacji sieci web był w stanie uzyskać identyfikatora użytkownika delegowane do wywołania interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-377">The web application obtains an access token for the user, which proves to the web API that the user successfully authenticated to the web application and that the web application was able to obtain a delegated user identity to call the web API.</span></span> <span data-ttu-id="83c56-378">Ten token dostępu jest wysyłane żądania sieci Web interfejsu API, które udzielają użytkownikowi autoryzacji i zwraca wartość żądanego zasobu.</span><span class="sxs-lookup"><span data-stu-id="83c56-378">This access token is sent in the request to the web API, which authorizes the user and returns the desired resource.</span></span>

#### <a name="diagram"></a><span data-ttu-id="83c56-379">Diagram</span><span class="sxs-lookup"><span data-stu-id="83c56-379">Diagram</span></span>
![Aplikacja sieci Web do diagramu interfejsu API sieci Web](./media/active-directory-authentication-scenarios/web_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="83c56-381">Opis protokołu przepływu</span><span class="sxs-lookup"><span data-stu-id="83c56-381">Description of Protocol Flow</span></span>
<span data-ttu-id="83c56-382">W poniższym przepływie omówiono tożsamości aplikacji i typów tożsamości użytkownika delegowanego.</span><span class="sxs-lookup"><span data-stu-id="83c56-382">Both the application identity and delegated user identity types are discussed in the flow below.</span></span> <span data-ttu-id="83c56-383">Najważniejsza różnica między nimi jest, że tożsamość użytkownika delegowanego najpierw muszą uzyskać kod autoryzacji, zanim użytkownik może zalogować i uzyskać dostęp do interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-383">The key difference between them is that the delegated user identity must first acquire an authorization code before the user can sign-in and gain access to the web API.</span></span>

##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a><span data-ttu-id="83c56-384">Udziel poświadczenia tożsamości aplikacji z klienta OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="83c56-384">Application Identity with OAuth 2.0 Client Credentials Grant</span></span>
1. <span data-ttu-id="83c56-385">Użytkownik jest zalogowany do usługi Azure AD w aplikacji sieci web (zobacz [przeglądarki sieci Web do aplikacji sieci Web](#web-browser-to-web-application) powyżej).</span><span class="sxs-lookup"><span data-stu-id="83c56-385">A user is signed in to Azure AD in the web application (see the [Web Browser to Web Application](#web-browser-to-web-application) above).</span></span>
2. <span data-ttu-id="83c56-386">Aplikacja sieci web musi uzyskać token dostępu, który można uwierzytelniać się na interfejsie API sieci web i pobrać żądanego zasobu.</span><span class="sxs-lookup"><span data-stu-id="83c56-386">The web application needs to acquire an access token so that it can authenticate to the web API and retrieve the desired resource.</span></span> <span data-ttu-id="83c56-387">Go żąda token punktu końcowego usługi Azure AD, podanie poświadczeń, identyfikator aplikacji i aplikacji sieci web interfejsu API identyfikator URI.</span><span class="sxs-lookup"><span data-stu-id="83c56-387">It makes a request to Azure AD’s token endpoint, providing the credential, Application ID, and web API’s application ID URI.</span></span>
3. <span data-ttu-id="83c56-388">Usługi Azure AD uwierzytelnia aplikacji i zwraca token dostępu JWT, który służy do wywołania interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-388">Azure AD authenticates the application and returns a JWT access token that is used to call the web API.</span></span>
4. <span data-ttu-id="83c56-389">Przy użyciu protokołu HTTPS aplikacji sieci web używa zwróconych tokenu dostępu JWT Aby dodać ciąg tokenu JWT z oznaczeniem "Bearer" w nagłówku autoryzacji żądania do interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-389">Over HTTPS, the web application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="83c56-390">Interfejs API sieci web sprawdza poprawność tokenu JWT i Jeśli weryfikacja zakończy się pomyślnie, zwraca wartość żądanego zasobu.</span><span class="sxs-lookup"><span data-stu-id="83c56-390">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>

##### <a name="delegated-user-identity-with-openid-connect"></a><span data-ttu-id="83c56-391">Tożsamość użytkownika delegowanego z OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="83c56-391">Delegated User Identity with OpenID Connect</span></span>
1. <span data-ttu-id="83c56-392">Użytkownik jest zalogowany do aplikacji sieci web przy użyciu usługi Azure AD (zobacz [przeglądarki sieci Web do aplikacji sieci Web](#web-browser-to-web-application) powyższej sekcji).</span><span class="sxs-lookup"><span data-stu-id="83c56-392">A user is signed in to a web application using Azure AD (see the [Web Browser to Web Application](#web-browser-to-web-application) section above).</span></span> <span data-ttu-id="83c56-393">Jeśli użytkownik aplikacji sieci web nie ma jeszcze zgodę na zezwolenie aplikacji sieci web do wywołania interfejsu API sieci web w jego imieniu, użytkownik musi wyrazić zgodę.</span><span class="sxs-lookup"><span data-stu-id="83c56-393">If the user of the web application has not yet consented to allowing the web application to call the web API on its behalf, the user will need to consent.</span></span> <span data-ttu-id="83c56-394">Aplikacja Wyświetla uprawnienia, które wymaga, a jeśli którakolwiek z tych uprawnień na poziomie administratora, zwykłego użytkownika w katalogu nie będzie mógł zgody.</span><span class="sxs-lookup"><span data-stu-id="83c56-394">The application will display the permissions it requires, and if any of these are administrator-level permissions, a normal user in the directory will not be able to consent.</span></span> <span data-ttu-id="83c56-395">Ten proces zgody dotyczy tylko wielodostępne, aplikacje nie pojedynczej dzierżawy jako aplikacja będzie już ma niezbędne uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="83c56-395">This consent process only applies to multi-tenant applications, not single tenant applications, as the application will already have the necessary permissions.</span></span> <span data-ttu-id="83c56-396">Gdy użytkownik jest zalogowany, aplikacji sieci web odebrał identyfikator tokenu z informacjami o użytkownika, a także kod autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-396">When the user signed in, the web application received an ID token with information about the user, as well as an authorization code.</span></span>
2. <span data-ttu-id="83c56-397">Przy użyciu kodu autoryzacji wystawiony przez usługę Azure AD, aplikacji sieci web wysyła żądanie do punktu końcowego tokenu usługi Azure AD, który zawiera kod autoryzacji, szczegółowe informacje o aplikacji klienta (identyfikator aplikacji i identyfikator URI przekierowania) i żądanego zasobu (aplikacji identyfikator URI dla interfejsu API sieci web).</span><span class="sxs-lookup"><span data-stu-id="83c56-397">Using the authorization code issued by Azure AD, the web application sends a request to Azure AD’s token endpoint that includes the authorization code, details about the client application (Application ID and redirect URI), and the desired resource (application ID URI for the web API).</span></span>
3. <span data-ttu-id="83c56-398">Kod autoryzacji i informacji na temat interfejsu API sieci web i aplikacji sieci web są weryfikowane przez usługę Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-398">The authorization code and information about the web application and web API are validated by Azure AD.</span></span> <span data-ttu-id="83c56-399">Po pomyślnym zweryfikowaniem usługi Azure AD zwraca dwa tokeny: token JWT dostępu i token odświeżania JWT.</span><span class="sxs-lookup"><span data-stu-id="83c56-399">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span>
4. <span data-ttu-id="83c56-400">Przy użyciu protokołu HTTPS aplikacji sieci web używa zwróconych tokenu dostępu JWT Aby dodać ciąg tokenu JWT z oznaczeniem "Bearer" w nagłówku autoryzacji żądania do interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-400">Over HTTPS, the web application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="83c56-401">Interfejs API sieci web sprawdza poprawność tokenu JWT i Jeśli weryfikacja zakończy się pomyślnie, zwraca wartość żądanego zasobu.</span><span class="sxs-lookup"><span data-stu-id="83c56-401">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>

##### <a name="delegated-user-identity-with-oauth-20-authorization-code-grant"></a><span data-ttu-id="83c56-402">Tożsamość użytkownika delegowanej za udzielania kodu autoryzacji OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="83c56-402">Delegated User Identity with OAuth 2.0 Authorization Code Grant</span></span>
1. <span data-ttu-id="83c56-403">Użytkownik jest już zalogowany do aplikacji sieci web, w których mechanizm uwierzytelniania jest niezależna od usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-403">A user is already signed in to a web application, whose authentication mechanism is independent of Azure AD.</span></span>
2. <span data-ttu-id="83c56-404">Aplikacja sieci web wymaga kod autoryzacji do uzyskania tokenu dostępu, więc emituje żądanie za pomocą przeglądarki na punkt końcowy autoryzacji usługi Azure AD, podając identyfikator aplikacji i identyfikator URI przekierowania dla aplikacji sieci web po pomyślnym uwierzytelnieniu.</span><span class="sxs-lookup"><span data-stu-id="83c56-404">The web application requires an authorization code to acquire an access token, so it issues a request through the browser to Azure AD’s authorization endpoint, providing the Application ID and redirect URI for the web application after successful authentication.</span></span> <span data-ttu-id="83c56-405">Użytkownik loguje się do usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-405">The user signs in to Azure AD.</span></span>
3. <span data-ttu-id="83c56-406">Jeśli użytkownik aplikacji sieci web nie ma jeszcze zgodę na zezwolenie aplikacji sieci web do wywołania interfejsu API sieci web w jego imieniu, użytkownik musi wyrazić zgodę.</span><span class="sxs-lookup"><span data-stu-id="83c56-406">If the user of the web application has not yet consented to allowing the web application to call the web API on its behalf, the user will need to consent.</span></span> <span data-ttu-id="83c56-407">Aplikacja Wyświetla uprawnienia, które wymaga, a jeśli którakolwiek z tych uprawnień na poziomie administratora, zwykłego użytkownika w katalogu nie będzie mógł zgody.</span><span class="sxs-lookup"><span data-stu-id="83c56-407">The application will display the permissions it requires, and if any of these are administrator-level permissions, a normal user in the directory will not be able to consent.</span></span> <span data-ttu-id="83c56-408">Tej zgody ma zastosowanie do aplikacji w jednym i wieloma dzierżawami.</span><span class="sxs-lookup"><span data-stu-id="83c56-408">This consent applies to both single and multi-tenant application.</span></span>  <span data-ttu-id="83c56-409">W przypadku pojedynczej dzierżawy administrator może wykonywać zgody na zgody administratora w imieniu użytkowników.</span><span class="sxs-lookup"><span data-stu-id="83c56-409">In the single tenant case, an admin can perform admin consent to consent on behalf of their users.</span></span>  <span data-ttu-id="83c56-410">Można to zrobić za pomocą `Grant Permissions` przycisk [Azure Portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="83c56-410">This can be done using the `Grant Permissions` button in the [Azure Portal](https://portal.azure.com).</span></span> 
4. <span data-ttu-id="83c56-411">Po użytkownik zgodził, aplikacji sieci web otrzymuje kod autoryzacji, który należy uzyskać token dostępu.</span><span class="sxs-lookup"><span data-stu-id="83c56-411">After the user has consented, the web application receives the authorization code that it needs to acquire an access token.</span></span>
5. <span data-ttu-id="83c56-412">Przy użyciu kodu autoryzacji wystawiony przez usługę Azure AD, aplikacji sieci web wysyła żądanie do punktu końcowego tokenu usługi Azure AD, który zawiera kod autoryzacji, szczegółowe informacje o aplikacji klienta (identyfikator aplikacji i identyfikator URI przekierowania) i żądanego zasobu (aplikacji identyfikator URI dla interfejsu API sieci web).</span><span class="sxs-lookup"><span data-stu-id="83c56-412">Using the authorization code issued by Azure AD, the web application sends a request to Azure AD’s token endpoint that includes the authorization code, details about the client application (Application ID and redirect URI), and the desired resource (application ID URI for the web API).</span></span>
6. <span data-ttu-id="83c56-413">Kod autoryzacji i informacji na temat interfejsu API sieci web i aplikacji sieci web są weryfikowane przez usługę Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-413">The authorization code and information about the web application and web API are validated by Azure AD.</span></span> <span data-ttu-id="83c56-414">Po pomyślnym zweryfikowaniem usługi Azure AD zwraca dwa tokeny: token JWT dostępu i token odświeżania JWT.</span><span class="sxs-lookup"><span data-stu-id="83c56-414">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span>
7. <span data-ttu-id="83c56-415">Przy użyciu protokołu HTTPS aplikacji sieci web używa zwróconych tokenu dostępu JWT Aby dodać ciąg tokenu JWT z oznaczeniem "Bearer" w nagłówku autoryzacji żądania do interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-415">Over HTTPS, the web application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="83c56-416">Interfejs API sieci web sprawdza poprawność tokenu JWT i Jeśli weryfikacja zakończy się pomyślnie, zwraca wartość żądanego zasobu.</span><span class="sxs-lookup"><span data-stu-id="83c56-416">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="83c56-417">Przykłady kodu</span><span class="sxs-lookup"><span data-stu-id="83c56-417">Code Samples</span></span>
<span data-ttu-id="83c56-418">Zobacz przykłady kodu dla aplikacji sieci Web w scenariuszach interfejsu API sieci Web.</span><span class="sxs-lookup"><span data-stu-id="83c56-418">See the code samples for Web Application to Web API scenarios.</span></span> <span data-ttu-id="83c56-419">I wrócić tu często — możemy dodać nowe próbki cały czas.</span><span class="sxs-lookup"><span data-stu-id="83c56-419">And, check back frequently -- we add new samples all the time.</span></span> <span data-ttu-id="83c56-420">Web [aplikacji sieci Web interfejsu API](active-directory-code-samples.md#web-application-to-web-api).</span><span class="sxs-lookup"><span data-stu-id="83c56-420">Web [Application to Web API](active-directory-code-samples.md#web-application-to-web-api).</span></span>

#### <a name="registering"></a><span data-ttu-id="83c56-421">Rejestrowanie</span><span class="sxs-lookup"><span data-stu-id="83c56-421">Registering</span></span>
* <span data-ttu-id="83c56-422">Pojedynczej dzierżawy: Dla tożsamości aplikacji i użytkownika delegowanej tożsamości przypadków, interfejsu API sieci web i aplikacji sieci web musi być zarejestrowany w tym samym katalogu w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-422">Single Tenant: For both the application identity and delegated user identity cases, the web application and the web API must be registered in the same directory in Azure AD.</span></span> <span data-ttu-id="83c56-423">Interfejs API sieci web można skonfigurować do udostępnienia zestaw uprawnień, które służą do ograniczania dostępu do aplikacji sieci web do jej zasobów.</span><span class="sxs-lookup"><span data-stu-id="83c56-423">The web API can be configured to expose a set of permissions, which are used to limit the web application’s access to its resources.</span></span> <span data-ttu-id="83c56-424">Jeśli używany jest typ tożsamości użytkownika delegowanego, aplikacji sieci web musi wybrać żądane uprawnienia z menu rozwijanego "Uprawnień do innych aplikacji" w portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="83c56-424">If a delegated user identity type is being used, the web application needs to select the desired permissions from the “Permissions to Other Applications” drop-down menu in the Azure Portal.</span></span> <span data-ttu-id="83c56-425">Ten krok nie jest wymagany, jeśli jest używany typ tożsamości aplikacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-425">This step is not required if the application identity type is being used.</span></span>
* <span data-ttu-id="83c56-426">Wielodostępne: Najpierw aplikacji sieci web skonfigurowano wskazać uprawnienia, które wymaga, aby działała.</span><span class="sxs-lookup"><span data-stu-id="83c56-426">Multi-Tenant: First, the web application is configured to indicate the permissions it requires to be functional.</span></span> <span data-ttu-id="83c56-427">Ta lista wymaganych uprawnień jest wyświetlany w oknie dialogowym, jeśli użytkownik lub administrator w katalogu docelowym daje zgody do aplikacji, która udostępnia w organizacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-427">This list of required permissions is shown in a dialog when a user or administrator in the destination directory gives consent to the application, which makes it available to their organization.</span></span> <span data-ttu-id="83c56-428">Niektóre aplikacje wymagają tylko użytkownika poziomu uprawnień, które każdy użytkownik w organizacji można wyrazić zgodę na.</span><span class="sxs-lookup"><span data-stu-id="83c56-428">Some applications require just user-level permissions, which any user in the organization can consent to.</span></span> <span data-ttu-id="83c56-429">Inne aplikacje wymagają uprawnień na poziomie administratora, które użytkownik w organizacji nie można wyrazić zgodę na.</span><span class="sxs-lookup"><span data-stu-id="83c56-429">Other applications require administrator-level permissions, which a user in the organization cannot consent to.</span></span> <span data-ttu-id="83c56-430">Tylko administrator katalogu można wyrazić zgodę dla aplikacji, które wymagają tego poziomu uprawnień.</span><span class="sxs-lookup"><span data-stu-id="83c56-430">Only a directory administrator can give consent to applications that require this level of permissions.</span></span> <span data-ttu-id="83c56-431">Po wyrażeniu zgody przez użytkownika lub administratora, interfejsu API sieci web i aplikacji sieci web są oba zarejestrowane w ich katalogu.</span><span class="sxs-lookup"><span data-stu-id="83c56-431">When the user or administrator consents, the web application and the web API are both registered in their directory.</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="83c56-432">Wygaśnięcia tokenu</span><span class="sxs-lookup"><span data-stu-id="83c56-432">Token Expiration</span></span>
<span data-ttu-id="83c56-433">Gdy aplikacja sieci web używa jej kod autoryzacji do Uzyskaj token dostępu JWT, ponadto otrzymuje token odświeżania JWT.</span><span class="sxs-lookup"><span data-stu-id="83c56-433">When the web application uses its authorization code to get a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="83c56-434">Po wygaśnięciu tokenu dostępu, token odświeżania może służyć do ponownego uwierzytelnienia użytkownika bez konieczności je, aby zalogować się ponownie.</span><span class="sxs-lookup"><span data-stu-id="83c56-434">When the access token expires, the refresh token can be used to re-authenticate the user without requiring them to sign in again.</span></span> <span data-ttu-id="83c56-435">Ten token odświeżania jest następnie używany do uwierzytelniania użytkownika, który powoduje nowy token dostępu i token odświeżania.</span><span class="sxs-lookup"><span data-stu-id="83c56-435">This refresh token is then used to authenticate the user, which results in a new access token and refresh token.</span></span>

### <a name="daemon-or-server-application-to-web-api"></a><span data-ttu-id="83c56-436">Demon lub aplikacji serwera do interfejsu API sieci Web</span><span class="sxs-lookup"><span data-stu-id="83c56-436">Daemon or Server Application to Web API</span></span>
<span data-ttu-id="83c56-437">W tej sekcji opisano demon lub serwera aplikacji, która musi pobrać zasobów z interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-437">This section describes a daemon or server application that needs to get resources from a web API.</span></span> <span data-ttu-id="83c56-438">Istnieją dwa scenariusze podrzędne, które mają zastosowanie do tej sekcji: demon, który musi wywołać składnika web API oparty na typ przydziału poświadczeń klienta OAuth 2.0; i aplikacji serwera (np. interfejsu API sieci web), który musi wywołać składnika web API oparty na OAuth 2.0 On-Behalf-Of specyfikacji wersji roboczej.</span><span class="sxs-lookup"><span data-stu-id="83c56-438">There are two sub-scenarios that apply to this section: A daemon that needs to call a web API, built on OAuth 2.0 client credentials grant type; and a server application (such as a web API) that needs to call a web API, built on OAuth 2.0 On-Behalf-Of draft specification.</span></span>

<span data-ttu-id="83c56-439">Scenariusz podczas aplikacji demon musi wywołać składnika web API, jest wziąć pod uwagę kilka rzeczy.</span><span class="sxs-lookup"><span data-stu-id="83c56-439">For the scenario when a daemon application needs to call a web API, it’s important to understand a few things.</span></span> <span data-ttu-id="83c56-440">Po pierwsze interakcji z użytkownikiem nie jest możliwe z aplikacją demon, które wymaga, aby mieć własną tożsamość aplikacja.</span><span class="sxs-lookup"><span data-stu-id="83c56-440">First, user interaction is not possible with a daemon application, which requires the application to have its own identity.</span></span> <span data-ttu-id="83c56-441">Przykładem aplikacji demon jest zadanie wsadowe lub usługa systemu operacyjnego działającej w tle.</span><span class="sxs-lookup"><span data-stu-id="83c56-441">An example of a daemon application is a batch job, or an operating system service running in the background.</span></span> <span data-ttu-id="83c56-442">Aplikacje tego typu żądania tokenu dostępu przy użyciu tożsamości aplikacji i umożliwienie korzystania z jego identyfikator aplikacji, dostęp do poświadczeń (hasło lub certyfikat) i aplikacji identyfikator URI do usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-442">This type of application requests an access token by using its application identity and presenting its Application ID, credential (password or certificate), and application ID URI to Azure AD.</span></span> <span data-ttu-id="83c56-443">Po pomyślnym uwierzytelnieniu demona odbiera token dostępu z usługi Azure AD, które są następnie używane do wywoływania interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-443">After successful authentication, the daemon receives an access token from Azure AD, which is then used to call the web API.</span></span>

<span data-ttu-id="83c56-444">Dla tego scenariusza gdy aplikacja serwera wymaga wywoływanie składnika web API, warto użyć przykładu.</span><span class="sxs-lookup"><span data-stu-id="83c56-444">For the scenario when a server application needs to call a web API, it’s helpful to use an example.</span></span> <span data-ttu-id="83c56-445">Załóżmy, że użytkownik został uwierzytelniony w natywnej aplikacji i tej aplikacji natywnej musi wywołać interfejs API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-445">Imagine that a user has authenticated on a native application, and this native application needs to call a web API.</span></span> <span data-ttu-id="83c56-446">Usługa Azure AD wystawia token JWT dostępu do wywołania interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-446">Azure AD issues a JWT access token to call the web API.</span></span> <span data-ttu-id="83c56-447">Jeśli interfejs API sieci web musi wywołać inny podrzędny interfejs API sieci web, imieniu-przepływ "w" można użyć do delegowania tożsamości użytkownika i uwierzytelniania na sekundę warstwy interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-447">If the web API needs to call another downstream web API, it can use the on-behalf-of flow to delegate the user’s identity and authenticate to the second-tier web API.</span></span>

#### <a name="diagram"></a><span data-ttu-id="83c56-448">Diagram</span><span class="sxs-lookup"><span data-stu-id="83c56-448">Diagram</span></span>
![Demon lub aplikacji serwera do interfejsu API sieci Web diagramu](./media/active-directory-authentication-scenarios/daemon_server_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="83c56-450">Opis protokołu przepływu</span><span class="sxs-lookup"><span data-stu-id="83c56-450">Description of Protocol Flow</span></span>
##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a><span data-ttu-id="83c56-451">Udziel poświadczenia tożsamości aplikacji z klienta OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="83c56-451">Application Identity with OAuth 2.0 Client Credentials Grant</span></span>
1. <span data-ttu-id="83c56-452">Najpierw aplikacji serwera wymaga uwierzytelniania za pomocą usługi Azure AD jako, bez interakcji ludzi, takich jak interakcyjne logowania jednokrotnego w oknie dialogowym.</span><span class="sxs-lookup"><span data-stu-id="83c56-452">First, the server application needs to authenticate with Azure AD as itself, without any human interaction such as an interactive sign-on dialog.</span></span> <span data-ttu-id="83c56-453">Go żąda token punktu końcowego usługi Azure AD, podanie poświadczeń, identyfikator aplikacji i identyfikator URI aplikacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-453">It makes a request to Azure AD’s token endpoint, providing the credential, Application ID, and application ID URI.</span></span>
2. <span data-ttu-id="83c56-454">Usługi Azure AD uwierzytelnia aplikacji i zwraca token dostępu JWT, który służy do wywołania interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-454">Azure AD authenticates the application and returns a JWT access token that is used to call the web API.</span></span>
3. <span data-ttu-id="83c56-455">Przy użyciu protokołu HTTPS aplikacji sieci web używa zwróconych tokenu dostępu JWT Aby dodać ciąg tokenu JWT z oznaczeniem "Bearer" w nagłówku autoryzacji żądania do interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="83c56-455">Over HTTPS, the web application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="83c56-456">Interfejs API sieci web sprawdza poprawność tokenu JWT i Jeśli weryfikacja zakończy się pomyślnie, zwraca wartość żądanego zasobu.</span><span class="sxs-lookup"><span data-stu-id="83c56-456">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>

##### <a name="delegated-user-identity-with-oauth-20-on-behalf-of-draft-specification"></a><span data-ttu-id="83c56-457">Tożsamość użytkownika delegowanego ze specyfikacją w imieniu — z wersji próbnej OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="83c56-457">Delegated User Identity with OAuth 2.0 On-Behalf-Of Draft Specification</span></span>
<span data-ttu-id="83c56-458">Przepływ omówiony poniżej założono, że użytkownik został uwierzytelniony w innej aplikacji (na przykład aplikacji natywnej) i tożsamości użytkownika został użyty do uzyskania tokenu dostępu do interfejsu API sieci web warstwy pierwszej.</span><span class="sxs-lookup"><span data-stu-id="83c56-458">The flow discussed below assumes that a user has been authenticated on another application (such as a native application), and their user identity has been used to acquire an access token to the first-tier web API.</span></span>

1. <span data-ttu-id="83c56-459">Aplikacji natywnej wysyła ten token dostępu do interfejsu API sieci web warstwy pierwszej.</span><span class="sxs-lookup"><span data-stu-id="83c56-459">The native application sends the access token to the first-tier web API.</span></span>
2. <span data-ttu-id="83c56-460">Interfejs API sieci web warstwy pierwszej wysyła żądanie do tokenu punktu końcowego usługi Azure AD, podając jego identyfikator aplikacji i poświadczenia, a także tokenu dostępu.</span><span class="sxs-lookup"><span data-stu-id="83c56-460">The first-tier web API sends a request to Azure AD’s token endpoint, providing its Application ID and credentials, as well as the user’s access token.</span></span> <span data-ttu-id="83c56-461">Ponadto, żądanie zostanie wysłane z on_behalf_of parametrem, który wskazuje sieci web interfejsu API żąda nowe tokeny do wywołania podrzędne składnika web API imieniu pierwotnego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="83c56-461">In addition, the request is sent with an on_behalf_of parameter that indicates the web API is requesting new tokens to call a downstream web API on behalf of the original user.</span></span>
3. <span data-ttu-id="83c56-462">Usługi Azure AD sprawdza, czy interfejs API sieci web warstwy pierwszej ma uprawnienia dostępu do interfejsu API sieci web podrzędne i weryfikuje żądanie zwracanie tokenu JWT dostępu i token JWT odświeżać token do interfejsu API sieci web warstwy pierwszej.</span><span class="sxs-lookup"><span data-stu-id="83c56-462">Azure AD verifies that the first-tier web API has permissions to access the second-tier web API and validates the request, returning a JWT access token and a JWT refresh token to the first-tier web API.</span></span>
4. <span data-ttu-id="83c56-463">Przy użyciu protokołu HTTPS interfejsu API sieci web warstwy pierwszej wywołuje interfejs API sieci web warstwy sekundę ciąg tokenu w nagłówku autoryzacji w żądaniu.</span><span class="sxs-lookup"><span data-stu-id="83c56-463">Over HTTPS, the first-tier web API then calls the second-tier web API by appending the token string in the Authorization header in the request.</span></span> <span data-ttu-id="83c56-464">Interfejs API sieci web warstwy pierwszej mogą w dalszym ciągu wywołania interfejsu API sieci web warstwy sekundę tak długo, jak uzyskać token dostępu i tokenów odświeżania są prawidłowe.</span><span class="sxs-lookup"><span data-stu-id="83c56-464">The first-tier web API can continue to call the second-tier web API as long as the access token and refresh tokens are valid.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="83c56-465">Przykłady kodu</span><span class="sxs-lookup"><span data-stu-id="83c56-465">Code Samples</span></span>
<span data-ttu-id="83c56-466">Zobacz przykłady kodu dla demon lub aplikacji serwera do interfejsu API sieci Web scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="83c56-466">See the code samples for Daemon or Server Application to Web API scenarios.</span></span> <span data-ttu-id="83c56-467">I wrócić tu często — możemy dodać nowe próbki cały czas.</span><span class="sxs-lookup"><span data-stu-id="83c56-467">And, check back frequently -- we add new samples all the time.</span></span> [<span data-ttu-id="83c56-468">Serwera lub demon aplikacji interfejsu API sieci Web</span><span class="sxs-lookup"><span data-stu-id="83c56-468">Server or Daemon Application to Web API</span></span>](active-directory-code-samples.md#server-or-daemon-application-to-web-api)

#### <a name="registering"></a><span data-ttu-id="83c56-469">Rejestrowanie</span><span class="sxs-lookup"><span data-stu-id="83c56-469">Registering</span></span>
* <span data-ttu-id="83c56-470">Pojedynczej dzierżawy: Dla tożsamości aplikacji i użytkownika delegowanej tożsamości przypadków, demon lub serwera aplikacji musi być zarejestrowany w tym samym katalogu w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="83c56-470">Single Tenant: For both the application identity and delegated user identity cases, the daemon or server application must be registered in the same directory in Azure AD.</span></span> <span data-ttu-id="83c56-471">Interfejs API sieci web można skonfigurować do udostępnienia zestaw uprawnień, które służą do ograniczania demona lub serwera dostępu do zasobów.</span><span class="sxs-lookup"><span data-stu-id="83c56-471">The web API can be configured to expose a set of permissions, which are used to limit the daemon or server’s access to its resources.</span></span> <span data-ttu-id="83c56-472">Jeśli używany jest typ tożsamości użytkownika delegowanego, aplikacja serwera musi wybierz żądane uprawnienia z menu rozwijanego "Uprawnień do innych aplikacji" w portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="83c56-472">If a delegated user identity type is being used, the server application needs to select the desired permissions from the “Permissions to Other Applications” drop-down menu in the Azure Portal.</span></span> <span data-ttu-id="83c56-473">Ten krok nie jest wymagany, jeśli jest używany typ tożsamości aplikacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-473">This step is not required if the application identity type is being used.</span></span>
* <span data-ttu-id="83c56-474">Wielodostępne: Najpierw demon lub serwera aplikacji skonfigurowano wskazać uprawnienia, które wymaga, aby działała.</span><span class="sxs-lookup"><span data-stu-id="83c56-474">Multi-Tenant: First, the daemon or server application is configured to indicate the permissions it requires to be functional.</span></span> <span data-ttu-id="83c56-475">Ta lista wymaganych uprawnień jest wyświetlany w oknie dialogowym, jeśli użytkownik lub administrator w katalogu docelowym daje zgody do aplikacji, która udostępnia w organizacji.</span><span class="sxs-lookup"><span data-stu-id="83c56-475">This list of required permissions is shown in a dialog when a user or administrator in the destination directory gives consent to the application, which makes it available to their organization.</span></span> <span data-ttu-id="83c56-476">Niektóre aplikacje wymagają tylko użytkownika poziomu uprawnień, które każdy użytkownik w organizacji można wyrazić zgodę na.</span><span class="sxs-lookup"><span data-stu-id="83c56-476">Some applications require just user-level permissions, which any user in the organization can consent to.</span></span> <span data-ttu-id="83c56-477">Inne aplikacje wymagają uprawnień na poziomie administratora, które użytkownik w organizacji nie można wyrazić zgodę na.</span><span class="sxs-lookup"><span data-stu-id="83c56-477">Other applications require administrator-level permissions, which a user in the organization cannot consent to.</span></span> <span data-ttu-id="83c56-478">Tylko administrator katalogu można wyrazić zgodę dla aplikacji, które wymagają tego poziomu uprawnień.</span><span class="sxs-lookup"><span data-stu-id="83c56-478">Only a directory administrator can give consent to applications that require this level of permissions.</span></span> <span data-ttu-id="83c56-479">Po wyrażeniu zgody przez użytkownika lub administratora, zarówno z interfejsów API sieci web są rejestrowane w ich katalogu.</span><span class="sxs-lookup"><span data-stu-id="83c56-479">When the user or administrator consents, both of the web APIs are registered in their directory.</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="83c56-480">Wygaśnięcia tokenu</span><span class="sxs-lookup"><span data-stu-id="83c56-480">Token Expiration</span></span>
<span data-ttu-id="83c56-481">Podczas pierwszej aplikacji korzysta z kodu autoryzacji, Uzyskaj token dostępu JWT, ponadto otrzymuje token odświeżania JWT.</span><span class="sxs-lookup"><span data-stu-id="83c56-481">When the first application uses its authorization code to get a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="83c56-482">Po wygaśnięciu tokenu dostępu, token odświeżania może służyć do ponownego uwierzytelnienia użytkownika bez wyświetlania monitu o poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="83c56-482">When the access token expires, the refresh token can be used to re-authenticate the user without prompting for credentials.</span></span> <span data-ttu-id="83c56-483">Ten token odświeżania jest następnie używany do uwierzytelniania użytkownika, który powoduje nowy token dostępu i token odświeżania.</span><span class="sxs-lookup"><span data-stu-id="83c56-483">This refresh token is then used to authenticate the user, which results in a new access token and refresh token.</span></span>

## <a name="see-also"></a><span data-ttu-id="83c56-484">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="83c56-484">See Also</span></span>
[<span data-ttu-id="83c56-485">Przewodnik dewelopera usługi Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="83c56-485">Azure Active Directory Developer's Guide</span></span>](active-directory-developers-guide.md)

[<span data-ttu-id="83c56-486">Przykłady kodu usługi Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="83c56-486">Azure Active Directory Code Samples</span></span>](active-directory-code-samples.md)

[<span data-ttu-id="83c56-487">Ważne informacje dotyczące podpisywania przerzucania kluczy w usłudze Azure AD</span><span class="sxs-lookup"><span data-stu-id="83c56-487">Important Information About Signing Key Rollover in Azure AD</span></span>](active-directory-signing-key-rollover.md)

[<span data-ttu-id="83c56-488">OAuth 2.0 w usłudze Azure AD</span><span class="sxs-lookup"><span data-stu-id="83c56-488">OAuth 2.0 in Azure AD</span></span>](https://msdn.microsoft.com/library/azure/dn645545.aspx)

