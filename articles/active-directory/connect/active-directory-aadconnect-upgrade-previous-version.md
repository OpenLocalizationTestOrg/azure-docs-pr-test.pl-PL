---
title: 'Azure AD Connect: Uaktualnianie z poprzedniej wersji | Dokumentacja firmy Microsoft'
description: "W tym artykule wyjaśniono hello różnych metod tooupgrade toohello najnowszej wersji programu Azure Active Directory Connect, w tym uaktualnienia w miejscu i migracji kierunku."
services: active-directory
documentationcenter: 
author: AndKjell
manager: femila
editor: 
ms.assetid: 31f084d8-2b89-478c-9079-76cf92e6618f
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: 57bd5b094654e4983cafa303b6f3daecadafb01c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-upgrade-from-a-previous-version-toohello-latest"></a><span data-ttu-id="23a5c-103">Azure AD Connect: Uaktualnianie z poprzedniej wersji toohello najnowsza wersja</span><span class="sxs-lookup"><span data-stu-id="23a5c-103">Azure AD Connect: Upgrade from a previous version toohello latest</span></span>
<span data-ttu-id="23a5c-104">W tym temacie opisano różne metody hello, których można używać tooupgrade Twojego połączenia usługi Azure Active Directory (Azure AD) instalacji toohello najnowszej wersji.</span><span class="sxs-lookup"><span data-stu-id="23a5c-104">This topic describes hello different methods that you can use tooupgrade your Azure Active Directory (Azure AD) Connect installation toohello latest release.</span></span> <span data-ttu-id="23a5c-105">Zaleca się pozostawienie samodzielnie bieżącego z wersjami hello programu Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="23a5c-105">We recommend that you keep yourself current with hello releases of Azure AD Connect.</span></span> <span data-ttu-id="23a5c-106">Można także użyć kroki hello w hello [migracji w kierunku](#swing-migration) sekcji podczas wprowadzania istotne zmiany konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="23a5c-106">You also use hello steps in hello [Swing migration](#swing-migration) section when you make a substantial configuration change.</span></span>

<span data-ttu-id="23a5c-107">Jeśli chcesz tooupgrade z narzędzia DirSync, zobacz [uaktualnienie z narzędzia Azure AD sync (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) zamiast tego.</span><span class="sxs-lookup"><span data-stu-id="23a5c-107">If you want tooupgrade from DirSync, see [Upgrade from Azure AD sync tool (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) instead.</span></span>

<span data-ttu-id="23a5c-108">Istnieje kilka różne strategie, których można używać tooupgrade Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="23a5c-108">There are a few different strategies that you can use tooupgrade Azure AD Connect.</span></span>

| <span data-ttu-id="23a5c-109">Metoda</span><span class="sxs-lookup"><span data-stu-id="23a5c-109">Method</span></span> | <span data-ttu-id="23a5c-110">Opis</span><span class="sxs-lookup"><span data-stu-id="23a5c-110">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="23a5c-111">Automatycznie uaktualnianie</span><span class="sxs-lookup"><span data-stu-id="23a5c-111">Automatic upgrade</span></span>](active-directory-aadconnect-feature-automatic-upgrade.md) |<span data-ttu-id="23a5c-112">Jest to najprostsza hello w przypadku klientów z instalacji ekspresowej.</span><span class="sxs-lookup"><span data-stu-id="23a5c-112">This is hello easiest method for customers with an express installation.</span></span> |
| [<span data-ttu-id="23a5c-113">Uaktualnienie w miejscu</span><span class="sxs-lookup"><span data-stu-id="23a5c-113">In-place upgrade</span></span>](#in-place-upgrade) |<span data-ttu-id="23a5c-114">Jeśli masz pojedynczego serwera, możesz uaktualnić hello instalacji w miejscu na hello na tym samym serwerze.</span><span class="sxs-lookup"><span data-stu-id="23a5c-114">If you have a single server, you can upgrade hello installation in-place on hello same server.</span></span> |
| [<span data-ttu-id="23a5c-115">Zasięg migracji</span><span class="sxs-lookup"><span data-stu-id="23a5c-115">Swing migration</span></span>](#swing-migration) |<span data-ttu-id="23a5c-116">Przy użyciu dwóch serwerów przygotowanie jednego z serwerów hello z nową wersją hello lub konfiguracji i zmień hello aktywnego serwera, gdy wszystko jest gotowe.</span><span class="sxs-lookup"><span data-stu-id="23a5c-116">With two servers, you can prepare one of hello servers with hello new release or configuration, and change hello active server when you're ready.</span></span> |

<span data-ttu-id="23a5c-117">Aby uzyskać informacje o uprawnieniach, zobacz hello [uprawnienia wymagane do uaktualnienia](active-directory-aadconnect-accounts-permissions.md#upgrade).</span><span class="sxs-lookup"><span data-stu-id="23a5c-117">For permissions information, see hello [permissions required for an upgrade](active-directory-aadconnect-accounts-permissions.md#upgrade).</span></span>

> [!NOTE]
> <span data-ttu-id="23a5c-118">Po włączeniu Twoje nowe Azure AD Connect serwera toostart synchronizowanie zmian tooAzure AD musi nie wycofasz toousing narzędzia DirSync i Azure AD Sync. Zmiana wersji na starszą od klientów toolegacy Azure AD Connect, łącznie z narzędzia DirSync i Azure AD Sync, nie jest obsługiwana i może prowadzić tooissues, takich jak utraty danych w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="23a5c-118">After you've enabled your new Azure AD Connect server toostart synchronizing changes tooAzure AD, you must not roll back toousing DirSync or Azure AD Sync. Downgrading from Azure AD Connect toolegacy clients, including DirSync and Azure AD Sync, isn't supported and can lead tooissues such as data loss in Azure AD.</span></span>

## <a name="in-place-upgrade"></a><span data-ttu-id="23a5c-119">Uaktualnienie w miejscu</span><span class="sxs-lookup"><span data-stu-id="23a5c-119">In-place upgrade</span></span>
<span data-ttu-id="23a5c-120">Uaktualnienie w miejscu działa w przypadku przenoszenia z usługi Azure AD Sync lub Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="23a5c-120">An in-place upgrade works for moving from Azure AD Sync or Azure AD Connect.</span></span> <span data-ttu-id="23a5c-121">Ta funkcja nie działa z narzędzia DirSync lub rozwiązanie z programu Forefront Identity Manager (FIM) + Azure AD Connector.</span><span class="sxs-lookup"><span data-stu-id="23a5c-121">It doesn't work for moving from DirSync or for a solution with Forefront Identity Manager (FIM) + Azure AD Connector.</span></span>

<span data-ttu-id="23a5c-122">Ta metoda jest preferowana pojedynczego serwera i mniejsza niż około 100 000 obiektów.</span><span class="sxs-lookup"><span data-stu-id="23a5c-122">This method is preferred when you have a single server and less than about 100,000 objects.</span></span> <span data-ttu-id="23a5c-123">Jeśli istnieją zmiany reguły synchronizacji out-of-box toohello, pełny import i pełną synchronizację wystąpić po uaktualnieniu hello.</span><span class="sxs-lookup"><span data-stu-id="23a5c-123">If there are any changes toohello out-of-box sync rules, a full import and full synchronization occur after hello upgrade.</span></span> <span data-ttu-id="23a5c-124">Ta metoda gwarantuje, że tej nowej konfiguracji hello jest stosowane tooall istniejące obiekty w systemie hello.</span><span class="sxs-lookup"><span data-stu-id="23a5c-124">This method ensures that hello new configuration is applied tooall existing objects in hello system.</span></span> <span data-ttu-id="23a5c-125">Uruchom ten może potrwać kilka godzin w zależności od hello liczbę obiektów, które znajdują się w zakresie hello aparatu synchronizacji.</span><span class="sxs-lookup"><span data-stu-id="23a5c-125">This run might take a few hours, depending on hello number of objects that are in scope of hello sync engine.</span></span> <span data-ttu-id="23a5c-126">Harmonogram synchronizacji normalne delta Hello (który domyślnie synchronizuje co 30 minut) jest wstrzymana, ale nadal synchronizacji haseł.</span><span class="sxs-lookup"><span data-stu-id="23a5c-126">hello normal delta synchronization scheduler (which synchronizes every 30 minutes by default) is suspended, but password synchronization continues.</span></span> <span data-ttu-id="23a5c-127">Należy rozważyć sposób uaktualnienia w miejscu hello weekend.</span><span class="sxs-lookup"><span data-stu-id="23a5c-127">You might consider doing hello in-place upgrade during a weekend.</span></span> <span data-ttu-id="23a5c-128">Jeśli nie ma żadnych zmian toohello out-of-box konfiguracji o hello nowej usługi Azure AD Connect wersji, następnie normalne import/synchronizacja różnicowa uruchamia zamiast tego.</span><span class="sxs-lookup"><span data-stu-id="23a5c-128">If there are no changes toohello out-of-box configuration with hello new Azure AD Connect release, then a normal delta import/sync starts instead.</span></span>  
![Uaktualnienie w miejscu](./media/active-directory-aadconnect-upgrade-previous-version/inplaceupgrade.png)

<span data-ttu-id="23a5c-130">Jeśli wprowadzono zmiany toohello synchronizacji out-of-box reguły następnie te reguły są cofnięcie toohello domyślnej konfiguracji w uaktualnieniu.</span><span class="sxs-lookup"><span data-stu-id="23a5c-130">If you've made changes toohello out-of-box synchronization rules, then these rules are set back toohello default configuration on upgrade.</span></span> <span data-ttu-id="23a5c-131">toomake się upewnić, że konfigurację jest przechowywana między uaktualnień, upewnij się, wprowadzić zmiany, ponieważ są one opisane w [najlepsze rozwiązania dotyczące zmieniania konfiguracji domyślnej hello](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="23a5c-131">toomake sure that your configuration is kept between upgrades, make sure that you make changes as they're described in [Best practices for changing hello default configuration](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span></span>

<span data-ttu-id="23a5c-132">Podczas uaktualniania w miejscu, mogą występować zmian wprowadzonych, które wymagają synchronizacji określonego działania (w tym kroki pełny Import i pełną synchronizację) toobe wykonywany po zakończeniu uaktualniania.</span><span class="sxs-lookup"><span data-stu-id="23a5c-132">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) toobe executed after upgrade completes.</span></span> <span data-ttu-id="23a5c-133">toodefer takich działań można znaleźć toosection [jak toodefer pełnej synchronizacji po uaktualnieniu](#how-to-defer-full-synchronization-after-upgrade).</span><span class="sxs-lookup"><span data-stu-id="23a5c-133">toodefer such activities, refer toosection [How toodefer full synchronization after upgrade](#how-to-defer-full-synchronization-after-upgrade).</span></span>

## <a name="swing-migration"></a><span data-ttu-id="23a5c-134">Migracja typu swing</span><span class="sxs-lookup"><span data-stu-id="23a5c-134">Swing migration</span></span>
<span data-ttu-id="23a5c-135">Jeśli masz złożone wdrożenia lub wiele obiektów, może być niepraktyczne toodo uaktualnienia w miejscu, w systemie hello na żywo.</span><span class="sxs-lookup"><span data-stu-id="23a5c-135">If you have a complex deployment or many objects, it might be impractical toodo an in-place upgrade on hello live system.</span></span> <span data-ttu-id="23a5c-136">W przypadku niektórych klientów ten proces może potrwać kilka dni — i w tym czasie nie zmiany różnicowe są przetwarzane.</span><span class="sxs-lookup"><span data-stu-id="23a5c-136">For some customers, this process might take multiple days--and during this time, no delta changes are processed.</span></span> <span data-ttu-id="23a5c-137">Tej metody można użyć również w przypadku planowania konfiguracji tooyour istotne zmiany toomake tootry ich limit przed ich jest wypychana toohello chmury.</span><span class="sxs-lookup"><span data-stu-id="23a5c-137">You can also use this method when you plan toomake substantial changes tooyour configuration and you want tootry them out before they're pushed toohello cloud.</span></span>

<span data-ttu-id="23a5c-138">zalecana metoda w tych scenariuszach Hello jest toouse migracji kierunku.</span><span class="sxs-lookup"><span data-stu-id="23a5c-138">hello recommended method for these scenarios is toouse a swing migration.</span></span> <span data-ttu-id="23a5c-139">Należy (co najmniej) dwa serwery — jeden serwer aktywnego i jeden serwer tymczasowej.</span><span class="sxs-lookup"><span data-stu-id="23a5c-139">You need (at least) two servers--one active server and one staging server.</span></span> <span data-ttu-id="23a5c-140">Witaj aktywnego serwera (blue linia ciągła w hello poniższej ilustracji przedstawiono) jest odpowiedzialny za hello active produkcji obciążenia.</span><span class="sxs-lookup"><span data-stu-id="23a5c-140">hello active server (shown with solid blue lines in hello following picture) is responsible for hello active production load.</span></span> <span data-ttu-id="23a5c-141">powitania serwera (przedstawiono linie przerywane purpurowa) na potrzeby przemieszczania jest przygotowana z nową wersją hello lub konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="23a5c-141">hello staging server (shown with dashed purple lines) is prepared with hello new release or configuration.</span></span> <span data-ttu-id="23a5c-142">Gdy będzie gotowy pełni, ten serwer jest uaktywniona.</span><span class="sxs-lookup"><span data-stu-id="23a5c-142">When it's fully ready, this server is made active.</span></span> <span data-ttu-id="23a5c-143">Hello poprzedniej aktywnego serwera, który teraz ma hello starej wersji lub konfiguracji zainstalowane, staje się na serwerze tymczasowym hello i zostanie uaktualniony.</span><span class="sxs-lookup"><span data-stu-id="23a5c-143">hello previous active server, which now has hello old version or configuration installed, is made into hello staging server and is upgraded.</span></span>

<span data-ttu-id="23a5c-144">dwa serwery Hello możesz użyć innej wersji.</span><span class="sxs-lookup"><span data-stu-id="23a5c-144">hello two servers can use different versions.</span></span> <span data-ttu-id="23a5c-145">Na przykład ASP hello zaplanowanie toodecommission można użyć usługi Azure AD Sync, a nowy serwer przemieszczania hello można używać usługi Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="23a5c-145">For example, hello active server that you plan toodecommission can use Azure AD Sync, and hello new staging server can use Azure AD Connect.</span></span> <span data-ttu-id="23a5c-146">Jeśli używasz opcji migracji toodevelop nową konfigurację, jego toohave dobrze hello tej samej wersji na hello dwa serwery.</span><span class="sxs-lookup"><span data-stu-id="23a5c-146">If you use swing migration toodevelop a new configuration, it's a good idea toohave hello same versions on hello two servers.</span></span>  
![Serwer przemieszczania](./media/active-directory-aadconnect-upgrade-previous-version/stagingserver1.png)

> [!NOTE]
> <span data-ttu-id="23a5c-148">Niektórzy klienci preferują toohave trzech lub czterech serwerów dla tego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="23a5c-148">Some customers prefer toohave three or four servers for this scenario.</span></span> <span data-ttu-id="23a5c-149">Po uaktualnieniu serwera na potrzeby przemieszczania hello nie masz kopii zapasowej serwera dla [odzyskiwania po awarii](active-directory-aadconnectsync-operations.md#disaster-recovery).</span><span class="sxs-lookup"><span data-stu-id="23a5c-149">When hello staging server is upgraded, you don't have a backup server for [disaster recovery](active-directory-aadconnectsync-operations.md#disaster-recovery).</span></span> <span data-ttu-id="23a5c-150">Przy użyciu trzech lub czterech serwerów można przygotować jednego zestawu serwerów podstawowych/w gotowości hello nowej wersji, która zapewnia, że jest zawsze przemieszczania serwera, który jest gotowy tootake za pośrednictwem.</span><span class="sxs-lookup"><span data-stu-id="23a5c-150">With three or four servers, you can prepare one set of primary/standby servers with hello new version, which ensures that there is always a staging server that's ready tootake over.</span></span>

<span data-ttu-id="23a5c-151">Te kroki są również działać toomove z usługi Azure AD Sync lub rozwiązania z FIM + Azure AD Connector.</span><span class="sxs-lookup"><span data-stu-id="23a5c-151">These steps also work toomove from Azure AD Sync or a solution with FIM + Azure AD Connector.</span></span> <span data-ttu-id="23a5c-152">Te kroki nie działają narzędzia DirSync, ale jest hello kroki tej samej zasięg metody migracji (nazywanych również wdrożenie równoległe) z narzędzia DirSync w [uaktualnienia usługi Azure Active Directory sync (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="23a5c-152">These steps don't work for DirSync, but hello same swing migration method (also called parallel deployment) with steps for DirSync is in [Upgrade Azure Active Directory sync (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span></span>

### <a name="use-a-swing-migration-tooupgrade"></a><span data-ttu-id="23a5c-153">Użyj tooupgrade migracji zasięg</span><span class="sxs-lookup"><span data-stu-id="23a5c-153">Use a swing migration tooupgrade</span></span>
1. <span data-ttu-id="23a5c-154">Jeśli używasz usługi Azure AD Connect na serwerach i Utwórz tooonly plan zmian w konfiguracji, upewnij się, że aktywnego serwera i serwerze są zarówno przy użyciu hello tej samej wersji.</span><span class="sxs-lookup"><span data-stu-id="23a5c-154">If you use Azure AD Connect on both servers and plan tooonly make a configuration change, make sure that your active server and staging server are both using hello same version.</span></span> <span data-ttu-id="23a5c-155">Dzięki temu łatwiej różnice toocompare później.</span><span class="sxs-lookup"><span data-stu-id="23a5c-155">That makes it easier toocompare differences later.</span></span> <span data-ttu-id="23a5c-156">Jeśli uaktualniasz z programu Azure AD Sync, te serwery mają różne wersje.</span><span class="sxs-lookup"><span data-stu-id="23a5c-156">If you're upgrading from Azure AD Sync, then these servers have different versions.</span></span> <span data-ttu-id="23a5c-157">Jeśli uaktualniasz ze starszej wersji programu Azure AD Connect jest dobrym rozwiązaniem toostart z hello dwa serwery, które są za pomocą hello tej samej wersji, ale nie jest to wymagane.</span><span class="sxs-lookup"><span data-stu-id="23a5c-157">If you're upgrading from an older version of Azure AD Connect, it's a good idea toostart with hello two servers that are using hello same version, but it's not required.</span></span>
2. <span data-ttu-id="23a5c-158">Jeśli wprowadzono niestandardowej konfiguracji i przemieszczania serwera nie ma go, wykonaj kroki hello w obszarze [przenieść Konfiguracja niestandardowa z toohello aktywnego serwera hello przemieszczania serwera](#move-custom-configuration-from-active-to-staging-server).</span><span class="sxs-lookup"><span data-stu-id="23a5c-158">If you've made a custom configuration and your staging server doesn't have it, follow hello steps under [Move a custom configuration from hello active server toohello staging server](#move-custom-configuration-from-active-to-staging-server).</span></span>
3. <span data-ttu-id="23a5c-159">Jeśli uaktualniasz z wcześniejszych wersji programu Azure AD Connect, należy uaktualnić hello przemieszczania serwera toohello najnowszej wersji.</span><span class="sxs-lookup"><span data-stu-id="23a5c-159">If you're upgrading from an earlier release of Azure AD Connect, upgrade hello staging server toohello latest version.</span></span> <span data-ttu-id="23a5c-160">Jeśli przenosisz z narzędzia Azure AD Sync, zainstaluj Azure AD Connect na serwerze tymczasowe.</span><span class="sxs-lookup"><span data-stu-id="23a5c-160">If you're moving from Azure AD Sync, then install Azure AD Connect on your staging server.</span></span>
4. <span data-ttu-id="23a5c-161">Let hello synchronizacji aparat Uruchom pełny import i pełną synchronizację na serwerze tymczasowe.</span><span class="sxs-lookup"><span data-stu-id="23a5c-161">Let hello sync engine run full import and full synchronization on your staging server.</span></span>
5. <span data-ttu-id="23a5c-162">Sprawdź, czy tej nowej konfiguracji hello nie spowodować nieoczekiwane zmiany przy użyciu kroków hello w obszarze "Zweryfikuj" w [hello Sprawdź konfigurację serwera](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="23a5c-162">Verify that hello new configuration didn't cause any unexpected changes by using hello steps under "Verify" in [Verify hello configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span> <span data-ttu-id="23a5c-163">Jeśli coś nie jest w oczekiwanym, poprawne, uruchom hello importowania i synchronizacji i sprawdź hello danych, dopóki wygląd, wykonując kroki hello.</span><span class="sxs-lookup"><span data-stu-id="23a5c-163">If something isn't as expected, correct it, run hello import and sync, and verify hello data until it looks good, by following hello steps.</span></span>
6. <span data-ttu-id="23a5c-164">Przełącz hello przemieszczania toobe hello aktywnego serwera.</span><span class="sxs-lookup"><span data-stu-id="23a5c-164">Switch hello staging server toobe hello active server.</span></span> <span data-ttu-id="23a5c-165">To ostatni krok hello "Przełącznika active server" w [hello Sprawdź konfigurację serwera](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="23a5c-165">This is hello final step "Switch active server" in [Verify hello configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span>
7. <span data-ttu-id="23a5c-166">Jeśli uaktualniasz Azure AD Connect, należy uaktualnić serwer hello, który jest teraz tymczasowej w trybie toohello najnowszej wersji.</span><span class="sxs-lookup"><span data-stu-id="23a5c-166">If you're upgrading Azure AD Connect, upgrade hello server that's now in staging mode toohello latest release.</span></span> <span data-ttu-id="23a5c-167">Wykonaj kroki takie same jak przed tooget hello danych i konfiguracji uaktualnione hello.</span><span class="sxs-lookup"><span data-stu-id="23a5c-167">Follow hello same steps as before tooget hello data and configuration upgraded.</span></span> <span data-ttu-id="23a5c-168">Po uaktualnieniu z programu Azure AD Sync, możesz teraz wyłączyć i zlikwidować stary serwer.</span><span class="sxs-lookup"><span data-stu-id="23a5c-168">If you upgraded from Azure AD Sync, you can now turn off and decommission your old server.</span></span>

### <a name="move-a-custom-configuration-from-hello-active-server-toohello-staging-server"></a><span data-ttu-id="23a5c-169">Przenieś niestandardowej konfiguracji z hello active toohello przemieszczania serwera</span><span class="sxs-lookup"><span data-stu-id="23a5c-169">Move a custom configuration from hello active server toohello staging server</span></span>
<span data-ttu-id="23a5c-170">Jeśli wprowadzono zmiany konfiguracji toohello aktywnego serwera należy toomake się, że które hello same zmiany zostaną zastosowane toohello przemieszczania serwera.</span><span class="sxs-lookup"><span data-stu-id="23a5c-170">If you've made configuration changes toohello active server, you need toomake sure that hello same changes are applied toohello staging server.</span></span> <span data-ttu-id="23a5c-171">Przenieś toohelp z tym, można użyć hello [Dokumentatora konfiguracji usługi Azure AD Connect](https://github.com/Microsoft/AADConnectConfigDocumenter).</span><span class="sxs-lookup"><span data-stu-id="23a5c-171">toohelp with this move, you can use hello [Azure AD Connect configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter).</span></span>

<span data-ttu-id="23a5c-172">Można przenieść hello synchronizacji niestandardowych reguł został utworzony przy użyciu programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="23a5c-172">You can move hello custom sync rules that you've created by using PowerShell.</span></span> <span data-ttu-id="23a5c-173">Należy najpierw zastosować inne zmiany hello tak samo w obu systemów, a nie można migrować hello zmiany.</span><span class="sxs-lookup"><span data-stu-id="23a5c-173">You must apply other changes hello same way on both systems, and you can't migrate hello changes.</span></span> <span data-ttu-id="23a5c-174">Witaj [Dokumentatora konfiguracji](https://github.com/Microsoft/AADConnectConfigDocumenter) ułatwia porównanie hello dwa systemy toomake się, że są one identyczne.</span><span class="sxs-lookup"><span data-stu-id="23a5c-174">hello [configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter) can help you comparing hello two systems toomake sure they are identical.</span></span> <span data-ttu-id="23a5c-175">Narzędzie Hello może również pomóc w automatyzacji hello znaleziono w tej sekcji.</span><span class="sxs-lookup"><span data-stu-id="23a5c-175">hello tool can also help in automating hello steps found in this section.</span></span>

<span data-ttu-id="23a5c-176">Potrzebujesz następujących hello tooconfigure rzeczy hello sam sposób na obu serwerach:</span><span class="sxs-lookup"><span data-stu-id="23a5c-176">You need tooconfigure hello following things hello same way on both servers:</span></span>

* <span data-ttu-id="23a5c-177">Toohello połączenia tego samego lasów</span><span class="sxs-lookup"><span data-stu-id="23a5c-177">Connection toohello same forests</span></span>
* <span data-ttu-id="23a5c-178">Domeny i jednostki Organizacyjnej filtrowania</span><span class="sxs-lookup"><span data-stu-id="23a5c-178">Any domain and OU filtering</span></span>
* <span data-ttu-id="23a5c-179">Witaj tej samej funkcji opcjonalnych, takich jak synchronizacja haseł i zapisywania zwrotnego haseł</span><span class="sxs-lookup"><span data-stu-id="23a5c-179">hello same optional features, such as password sync and password writeback</span></span>

<span data-ttu-id="23a5c-180">**Przenoszenie reguł niestandardowych**</span><span class="sxs-lookup"><span data-stu-id="23a5c-180">**Move custom synchronization rules**</span></span>  
<span data-ttu-id="23a5c-181">Reguły niestandardowe synchronizacji toomove, hello następujące:</span><span class="sxs-lookup"><span data-stu-id="23a5c-181">toomove custom synchronization rules, do hello following:</span></span>

1. <span data-ttu-id="23a5c-182">Otwórz **Edytor reguł synchronizacji** aktywnego serwera.</span><span class="sxs-lookup"><span data-stu-id="23a5c-182">Open **Synchronization Rules Editor** on your active server.</span></span>
2. <span data-ttu-id="23a5c-183">Wybierz regułę niestandardową.</span><span class="sxs-lookup"><span data-stu-id="23a5c-183">Select a custom rule.</span></span> <span data-ttu-id="23a5c-184">Kliknij przycisk **wyeksportować**.</span><span class="sxs-lookup"><span data-stu-id="23a5c-184">Click **Export**.</span></span> <span data-ttu-id="23a5c-185">Spowoduje to wyświetlenie okna Notatnika.</span><span class="sxs-lookup"><span data-stu-id="23a5c-185">This brings up a Notepad window.</span></span> <span data-ttu-id="23a5c-186">Zapisz plik tymczasowy hello z rozszerzeniem nazwy PS1.</span><span class="sxs-lookup"><span data-stu-id="23a5c-186">Save hello temporary file with a PS1 extension.</span></span> <span data-ttu-id="23a5c-187">Dzięki temu skrypt programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="23a5c-187">This makes it a PowerShell script.</span></span> <span data-ttu-id="23a5c-188">Skopiuj toohello pliku PS1 hello przemieszczania serwera.</span><span class="sxs-lookup"><span data-stu-id="23a5c-188">Copy hello PS1 file toohello staging server.</span></span>  
   <span data-ttu-id="23a5c-189">![Wyeksportowanie reguły synchronizacji](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span><span class="sxs-lookup"><span data-stu-id="23a5c-189">![Sync rule export](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span></span>
3. <span data-ttu-id="23a5c-190">Hello GUID łącznika różni się na powitania serwera na potrzeby przemieszczania i muszą go zmienić.</span><span class="sxs-lookup"><span data-stu-id="23a5c-190">hello Connector GUID is different on hello staging server, and you must change it.</span></span> <span data-ttu-id="23a5c-191">start hello tooget identyfikator GUID, **Edytor reguł synchronizacji**, wybierz jedną z zasad out-of-box hello tego hello reprezentuje sama połączona systemu i kliknij przycisk **wyeksportować**.</span><span class="sxs-lookup"><span data-stu-id="23a5c-191">tooget hello GUID, start **Synchronization Rules Editor**, select one of hello out-of-box rules that represent hello same connected system, and click **Export**.</span></span> <span data-ttu-id="23a5c-192">Zastąp hello identyfikatora GUID w pliku PS1 hello identyfikatora GUID z hello przemieszczania serwera.</span><span class="sxs-lookup"><span data-stu-id="23a5c-192">Replace hello GUID in your PS1 file with hello GUID from hello staging server.</span></span>
4. <span data-ttu-id="23a5c-193">W wierszu programu PowerShell Uruchom plik hello PS1.</span><span class="sxs-lookup"><span data-stu-id="23a5c-193">In a PowerShell prompt, run hello PS1 file.</span></span> <span data-ttu-id="23a5c-194">Spowoduje to utworzenie reguły synchronizacji niestandardowych hello na powitania serwera na potrzeby przemieszczania.</span><span class="sxs-lookup"><span data-stu-id="23a5c-194">This creates hello custom synchronization rule on hello staging server.</span></span>
5. <span data-ttu-id="23a5c-195">Powtórz tę czynność dla wszystkich reguł niestandardowych.</span><span class="sxs-lookup"><span data-stu-id="23a5c-195">Repeat this for all your custom rules.</span></span>

## <a name="how-toodefer-full-synchronization-after-upgrade"></a><span data-ttu-id="23a5c-196">Jak toodefer pełnej synchronizacji po uaktualnieniu</span><span class="sxs-lookup"><span data-stu-id="23a5c-196">How toodefer full synchronization after upgrade</span></span>
<span data-ttu-id="23a5c-197">Podczas uaktualniania w miejscu, mogą występować zmian wprowadzonych, które wymagają synchronizacji określonego działania (w tym kroki pełny Import i pełną synchronizację) toobe wykonywane.</span><span class="sxs-lookup"><span data-stu-id="23a5c-197">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) toobe executed.</span></span> <span data-ttu-id="23a5c-198">Na przykład, wymagają zmian schematu łącznika **pełny import** wymagają zmian reguły synchronizacji krok i out-of-box **pełnej synchronizacji** krok toobe wykonane na zainfekowanym łączników.</span><span class="sxs-lookup"><span data-stu-id="23a5c-198">For example, connector schema changes require **full import** step and out-of-box synchronization rule changes require **full synchronization** step toobe executed on affected connectors.</span></span> <span data-ttu-id="23a5c-199">Podczas uaktualniania, Azure AD Connect Określa, jakie działania synchronizacji są wymagane i zapisuje je jako *zastępuje*.</span><span class="sxs-lookup"><span data-stu-id="23a5c-199">During upgrade, Azure AD Connect determines what synchronization activities are required and records them as *overrides*.</span></span> <span data-ttu-id="23a5c-200">W hello następującego cyklu synchronizacji harmonogram synchronizacji hello przejmuje te zastąpienia i je wykonuje.</span><span class="sxs-lookup"><span data-stu-id="23a5c-200">In hello following synchronization cycle, hello synchronization scheduler picks up these overrides and executes them.</span></span> <span data-ttu-id="23a5c-201">Gdy przesłonięcie jest prawidłowo wykonane, zostanie ono usunięte.</span><span class="sxs-lookup"><span data-stu-id="23a5c-201">Once an override is successfully executed, it is removed.</span></span>

<span data-ttu-id="23a5c-202">Mogą wystąpić sytuacje, w którym nie ma miejsce tootake te zastąpienia natychmiast po uaktualnieniu.</span><span class="sxs-lookup"><span data-stu-id="23a5c-202">There may be situations where you do not want these overrides tootake place immediately after upgrade.</span></span> <span data-ttu-id="23a5c-203">Na przykład masz wiele obiektów synchronizowanych i chcesz toooccur kroki te synchronizacji godzinami.</span><span class="sxs-lookup"><span data-stu-id="23a5c-203">For example, you have numerous synchronized objects and you would like these synchronization steps toooccur after business hours.</span></span> <span data-ttu-id="23a5c-204">tooremove te zastąpienia:</span><span class="sxs-lookup"><span data-stu-id="23a5c-204">tooremove these overrides:</span></span>

1. <span data-ttu-id="23a5c-205">Podczas uaktualniania **Usuń zaznaczenie pola wyboru** hello opcja **Uruchom proces synchronizacji powitania po zakończeniu konfiguracji**.</span><span class="sxs-lookup"><span data-stu-id="23a5c-205">During upgrade, **uncheck** hello option **Start hello synchronization process when configuration completes**.</span></span> <span data-ttu-id="23a5c-206">To wyłącza harmonogram synchronizacji hello i zapobiega cykl synchronizacji miejsce automatycznie przed zastąpienia hello są usuwane.</span><span class="sxs-lookup"><span data-stu-id="23a5c-206">This disables hello synchronization scheduler and prevents synchronization cycle from taking place automatically before hello overrides are removed.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync01.png)

2. <span data-ttu-id="23a5c-208">Po zakończeniu uaktualniania, uruchom hello następującego polecenia cmdlet toofind się zastąpienia, które zostały dodane:`Get-ADSyncSchedulerConnectorOverride | fl`</span><span class="sxs-lookup"><span data-stu-id="23a5c-208">After upgrade completes, run hello following cmdlet toofind out what overrides have been added: `Get-ADSyncSchedulerConnectorOverride | fl`</span></span>

   >[!NOTE]
   > <span data-ttu-id="23a5c-209">zastąpienia Hello są specyficzne dla łącznika.</span><span class="sxs-lookup"><span data-stu-id="23a5c-209">hello overrides are connector-specific.</span></span> <span data-ttu-id="23a5c-210">W hello poniższy przykład, krok pełny Import i pełną synchronizację dodano tooboth hello AD łącznika lokalnego i łącznik usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="23a5c-210">In hello following example, Full Import step and Full Synchronization step have been added tooboth hello on-premises AD Connector and Azure AD Connector.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync02.png)

3. <span data-ttu-id="23a5c-212">Należy zanotować hello istniejących zastąpień, które zostały dodane.</span><span class="sxs-lookup"><span data-stu-id="23a5c-212">Note down hello existing overrides that have been added.</span></span>
   
4. <span data-ttu-id="23a5c-213">Witaj tooremove zastąpienia dla pełny import i pełną synchronizację łącznika dowolnego, uruchom następujące polecenie cmdlet hello:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span><span class="sxs-lookup"><span data-stu-id="23a5c-213">tooremove hello overrides for both full import and full synchronization on an arbitrary connector, run hello following cmdlet: `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span></span>

   <span data-ttu-id="23a5c-214">tooremove hello zastąpień dla wszystkich łączników, wykonaj hello następującego skryptu programu PowerShell:</span><span class="sxs-lookup"><span data-stu-id="23a5c-214">tooremove hello overrides on all connectors, execute hello following PowerShell script:</span></span>

   ```
   foreach ($connectorOverride in Get-ADSyncSchedulerConnectorOverride)
   {
       Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier $connectorOverride.ConnectorIdentifier.Guid -FullSyncRequired $false -FullImportRequired $false
   }
   ```

5. <span data-ttu-id="23a5c-215">tooresume hello harmonogramu, uruchom następujące polecenie cmdlet hello:`Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="23a5c-215">tooresume hello scheduler, run hello following cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>

   >[!IMPORTANT]
   > <span data-ttu-id="23a5c-216">Należy pamiętać, kroki synchronizacji hello wymagane tooexecute najwcześniejszą wygodne.</span><span class="sxs-lookup"><span data-stu-id="23a5c-216">Remember tooexecute hello required synchronization steps at your earliest convenience.</span></span> <span data-ttu-id="23a5c-217">Możesz ręcznie wykonać te czynności przy użyciu hello Synchronization Service Manager lub dodać zastąpienia hello przy użyciu polecenia cmdlet Set-ADSyncSchedulerConnectorOverride hello.</span><span class="sxs-lookup"><span data-stu-id="23a5c-217">You can either manually execute these steps using hello Synchronization Service Manager or add hello overrides back using hello Set-ADSyncSchedulerConnectorOverride cmdlet.</span></span>

<span data-ttu-id="23a5c-218">Witaj tooadd zastąpienia dla pełny import i pełną synchronizację łącznika dowolnego, uruchom następujące polecenie cmdlet hello:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span><span class="sxs-lookup"><span data-stu-id="23a5c-218">tooadd hello overrides for both full import and full synchronization on an arbitrary connector, run hello following cmdlet:  `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span></span>

## <a name="next-steps"></a><span data-ttu-id="23a5c-219">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="23a5c-219">Next steps</span></span>
<span data-ttu-id="23a5c-220">Dowiedz się więcej o [integrowanie tożsamości lokalnych z usługą Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="23a5c-220">Learn more about [integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
