---
title: "Azure AD Connect: Zagadnienia dotyczące projektowania | Dokumentacja firmy Microsoft"
description: "W tym temacie szczegółowo niektórych obszarach projektowania implementacji"
services: active-directory
documentationcenter: 
author: billmath
manager: femila
editor: 
ms.assetid: 4114a6c0-f96a-493c-be74-1153666ce6c9
ms.service: active-directory
ms.custom: azure-ad-connect
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 1e5d5c6a716ca653fb14fc059e8155124b433732
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-design-concepts"></a><span data-ttu-id="8b578-103">Azure AD Connect: Zagadnienia dotyczące projektowania</span><span class="sxs-lookup"><span data-stu-id="8b578-103">Azure AD Connect: Design concepts</span></span>
<span data-ttu-id="8b578-104">Celem tego tematu Hello jest toodescribe obszarów, które muszą być uważane za pośrednictwem podczas projektu implementacji hello programu Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="8b578-104">hello purpose of this topic is toodescribe areas that must be thought through during hello implementation design of Azure AD Connect.</span></span> <span data-ttu-id="8b578-105">Ten temat jest nowości w niektórych obszarach i tych pojęć krótko opisano w innych tematach również.</span><span class="sxs-lookup"><span data-stu-id="8b578-105">This topic is a deep dive on certain areas and these concepts are briefly described in other topics as well.</span></span>

## <a name="sourceanchor"></a><span data-ttu-id="8b578-106">sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="8b578-106">sourceAnchor</span></span>
<span data-ttu-id="8b578-107">Atrybut sourceAnchor Hello jest zdefiniowany jako *atrybutu niezmienialny w okresie istnienia hello obiektu*.</span><span class="sxs-lookup"><span data-stu-id="8b578-107">hello sourceAnchor attribute is defined as *an attribute immutable during hello lifetime of an object*.</span></span> <span data-ttu-id="8b578-108">Sposób unikatowy identyfikuje obiekt jako hello sam obiekt lokalnych i w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b578-108">It uniquely identifies an object as being hello same object on-premises and in Azure AD.</span></span> <span data-ttu-id="8b578-109">Atrybut Hello jest również nazywany **nazwę immutableId** i Witaj dwie nazwy są używane wymienne.</span><span class="sxs-lookup"><span data-stu-id="8b578-109">hello attribute is also called **immutableId** and hello two names are used interchangeable.</span></span>

<span data-ttu-id="8b578-110">Hello słowo niemodyfikowalny, "nie można zmienić", jest ważne toothis tematu.</span><span class="sxs-lookup"><span data-stu-id="8b578-110">hello word immutable, that is "cannot be changed", is important toothis topic.</span></span> <span data-ttu-id="8b578-111">Ponieważ wartość tego atrybutu nie można zmienić po ustawieniu, jest ważne toopick projekt, który obsługuje danego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="8b578-111">Since this attribute’s value cannot be changed after it has been set, it is important toopick a design that supports your scenario.</span></span>

<span data-ttu-id="8b578-112">Atrybut Hello jest używany dla hello następujące scenariusze:</span><span class="sxs-lookup"><span data-stu-id="8b578-112">hello attribute is used for hello following scenarios:</span></span>

* <span data-ttu-id="8b578-113">Gdy nowy serwer aparatu synchronizacji jest skompilowany lub ponownie skompilowany od scenariusza odzyskiwania po awarii, ten atrybut łączy istniejące obiekty w usłudze Azure AD z obiektami lokalnymi.</span><span class="sxs-lookup"><span data-stu-id="8b578-113">When a new sync engine server is built, or rebuilt after a disaster recovery scenario, this attribute links existing objects in Azure AD with objects on-premises.</span></span>
* <span data-ttu-id="8b578-114">Jeśli przeniesiesz z modelu synchronizowanych tożsamości tooa tożsamości tylko w chmurze, a następnie ten atrybut umożliwia obiektów za "twardych dopasowania" istniejące obiekty w usłudze Azure AD z lokalnymi obiektami.</span><span class="sxs-lookup"><span data-stu-id="8b578-114">If you move from a cloud-only identity tooa synchronized identity model, then this attribute allows objects too"hard match" existing objects in Azure AD with on-premises objects.</span></span>
* <span data-ttu-id="8b578-115">Jeśli używasz federacyjnego, a następnie ten atrybut wraz z hello **userPrincipalName** jest używany w hello oświadczeń toouniquely identyfikacji użytkownika.</span><span class="sxs-lookup"><span data-stu-id="8b578-115">If you use federation, then this attribute together with hello **userPrincipalName** is used in hello claim toouniquely identify a user.</span></span>

<span data-ttu-id="8b578-116">W tym temacie wspomniana sourceAnchor tylko pod kątem toousers.</span><span class="sxs-lookup"><span data-stu-id="8b578-116">This topic only talks about sourceAnchor as it relates toousers.</span></span> <span data-ttu-id="8b578-117">Witaj te same zasady stosowane tooall typów obiektów, ale tego problemu jest zwykle problemem jest tylko dla użytkowników.</span><span class="sxs-lookup"><span data-stu-id="8b578-117">hello same rules apply tooall object types, but it is only for users this problem usually is a concern.</span></span>

### <a name="selecting-a-good-sourceanchor-attribute"></a><span data-ttu-id="8b578-118">Wybranie atrybutu sourceAnchor dobra</span><span class="sxs-lookup"><span data-stu-id="8b578-118">Selecting a good sourceAnchor attribute</span></span>
<span data-ttu-id="8b578-119">wartość atrybutu Hello wykonaj hello następujące reguły:</span><span class="sxs-lookup"><span data-stu-id="8b578-119">hello attribute value must follow hello following rules:</span></span>

* <span data-ttu-id="8b578-120">Zawierać mniej niż 60 znaków</span><span class="sxs-lookup"><span data-stu-id="8b578-120">Be less than 60 characters in length</span></span>
  * <span data-ttu-id="8b578-121">Kodowania i liczone jak znaki 3 znaki nie są a-z, A-Z i 0-9</span><span class="sxs-lookup"><span data-stu-id="8b578-121">Characters not being a-z, A-Z, or 0-9 are encoded and counted as 3 characters</span></span>
* <span data-ttu-id="8b578-122">Zawiera znaki specjalne: &#92;!</span><span class="sxs-lookup"><span data-stu-id="8b578-122">Not contain a special character: &#92; !</span></span> <span data-ttu-id="8b578-123"># $ % & * + / = ?</span><span class="sxs-lookup"><span data-stu-id="8b578-123"># $ % & * + / = ?</span></span> <span data-ttu-id="8b578-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span><span class="sxs-lookup"><span data-stu-id="8b578-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span></span>
* <span data-ttu-id="8b578-125">Musi być globalnie unikatowa</span><span class="sxs-lookup"><span data-stu-id="8b578-125">Must be globally unique</span></span>
* <span data-ttu-id="8b578-126">Musi być ciągiem, liczbą całkowitą lub danych binarnych</span><span class="sxs-lookup"><span data-stu-id="8b578-126">Must be either a string, integer, or binary</span></span>
* <span data-ttu-id="8b578-127">Nie powinna być oparta na nazwę użytkownika, te zmiany</span><span class="sxs-lookup"><span data-stu-id="8b578-127">Should not be based on user's name, these changes</span></span>
* <span data-ttu-id="8b578-128">Nie powinny być uwzględniana wielkość liter i uniknąć wartości, które mogą różnić się wielkością liter</span><span class="sxs-lookup"><span data-stu-id="8b578-128">Should not be case-sensitive and avoid values that may vary by case</span></span>
* <span data-ttu-id="8b578-129">Powinien być przypisany podczas tworzenia obiektu hello</span><span class="sxs-lookup"><span data-stu-id="8b578-129">Should be assigned when hello object is created</span></span>

<span data-ttu-id="8b578-130">Jeśli hello wybrana sourceAnchor nie jest typu String, a następnie tooensure wartość atrybutu hello Azure AD Connect Base64Encode znaków specjalnych nie są wyświetlane.</span><span class="sxs-lookup"><span data-stu-id="8b578-130">If hello selected sourceAnchor is not of type string, then Azure AD Connect Base64Encode hello attribute value tooensure no special characters appear.</span></span> <span data-ttu-id="8b578-131">Użycie innego serwera federacyjnego niż usługi AD FS, upewnij się, serwer może również Base64Encode hello atrybutu.</span><span class="sxs-lookup"><span data-stu-id="8b578-131">If you use another federation server than ADFS, make sure your server can also Base64Encode hello attribute.</span></span>

<span data-ttu-id="8b578-132">Atrybut sourceAnchor Hello jest rozróżniana wielkość liter.</span><span class="sxs-lookup"><span data-stu-id="8b578-132">hello sourceAnchor attribute is case-sensitive.</span></span> <span data-ttu-id="8b578-133">Wartość "JanNowak" nie jest hello taki sam jak "JanNowak".</span><span class="sxs-lookup"><span data-stu-id="8b578-133">A value of “JohnDoe” is not hello same as “johndoe”.</span></span> <span data-ttu-id="8b578-134">Ale nie powinien mieć dwa różne obiekty z różnicą tylko wielkością liter.</span><span class="sxs-lookup"><span data-stu-id="8b578-134">But you should not have two different objects with only a difference in case.</span></span>

<span data-ttu-id="8b578-135">Jeśli pojedynczy las jest w infrastrukturze lokalnej, następnie atrybutu hello należy używać **objectGUID**.</span><span class="sxs-lookup"><span data-stu-id="8b578-135">If you have a single forest on-premises, then hello attribute you should use is **objectGUID**.</span></span> <span data-ttu-id="8b578-136">Dotyczy to również atrybut hello używany, gdy Użyj ustawień ekspresowych w programie Azure AD Connect, a także hello atrybutu używane przez narzędzie DirSync.</span><span class="sxs-lookup"><span data-stu-id="8b578-136">This is also hello attribute used when you use express settings in Azure AD Connect and also hello attribute used by DirSync.</span></span>

<span data-ttu-id="8b578-137">Jeśli masz wiele lasów i nie przenoś użytkowników między lasami i domenami, następnie **objectGUID** toouse właściwego atrybutu nawet w tym przypadku jest.</span><span class="sxs-lookup"><span data-stu-id="8b578-137">If you have multiple forests and do not move users between forests and domains, then **objectGUID** is a good attribute toouse even in this case.</span></span>

<span data-ttu-id="8b578-138">Jeśli użytkownicy są przenoszone między lasami i domenami, następnie należy znaleźć atrybut, który nie ulega zmianie lub mogą zostać przeniesione z użytkownikami hello podczas przenoszenia hello.</span><span class="sxs-lookup"><span data-stu-id="8b578-138">If you move users between forests and domains, then you must find an attribute that does not change or can be moved with hello users during hello move.</span></span> <span data-ttu-id="8b578-139">Zalecanym podejściem jest toointroduce syntetycznych atrybutu.</span><span class="sxs-lookup"><span data-stu-id="8b578-139">A recommended approach is toointroduce a synthetic attribute.</span></span> <span data-ttu-id="8b578-140">Atrybut, który można umieścić element, który wygląda na to odpowiednia może być identyfikatorem GUID.</span><span class="sxs-lookup"><span data-stu-id="8b578-140">An attribute that could hold something that looks like a GUID would be suitable.</span></span> <span data-ttu-id="8b578-141">Podczas tworzenia obiektu nowego identyfikatora GUID jest tworzony i widnieć hello użytkownika.</span><span class="sxs-lookup"><span data-stu-id="8b578-141">During object creation, a new GUID is created and stamped on hello user.</span></span> <span data-ttu-id="8b578-142">Reguły niestandardowe synchronizacji mogą być tworzone w toocreate serwer aparatu synchronizacji hello tę wartość na powitania podstawie **objectGUID** i aktualizacji hello wybranego atrybutu w DODAJE.</span><span class="sxs-lookup"><span data-stu-id="8b578-142">A custom sync rule can be created in hello sync engine server toocreate this value based on hello **objectGUID** and update hello selected attribute in ADDS.</span></span> <span data-ttu-id="8b578-143">Podczas przenoszenia obiektu hello, upewnij się, że tooalso kopiowania hello zawartości tej wartości.</span><span class="sxs-lookup"><span data-stu-id="8b578-143">When you move hello object, make sure tooalso copy hello content of this value.</span></span>

<span data-ttu-id="8b578-144">Innym rozwiązaniem jest toopick istniejący atrybut, których znasz nie ulega zmianie.</span><span class="sxs-lookup"><span data-stu-id="8b578-144">Another solution is toopick an existing attribute you know does not change.</span></span> <span data-ttu-id="8b578-145">Często używane atrybuty obejmują **identyfikator pracownika**.</span><span class="sxs-lookup"><span data-stu-id="8b578-145">Commonly used attributes include **employeeID**.</span></span> <span data-ttu-id="8b578-146">Należy wziąć pod uwagę atrybut, który zawiera litery, aby upewnić się, że nie hello szansy (wielkie i małe litery), można zmienić wartości atrybutu hello.</span><span class="sxs-lookup"><span data-stu-id="8b578-146">If you consider an attribute that contains letters, make sure there is no chance hello case (upper case vs. lower case) can change for hello attribute's value.</span></span> <span data-ttu-id="8b578-147">Złe atrybuty, które nie powinny być używane zawiera te atrybuty o nazwie hello hello użytkownika.</span><span class="sxs-lookup"><span data-stu-id="8b578-147">Bad attributes that should not be used include those attributes with hello name of hello user.</span></span> <span data-ttu-id="8b578-148">Unieważnienie lub rozwodu nazwa hello jest oczekiwany toochange, co jest niedozwolone dla tego atrybutu.</span><span class="sxs-lookup"><span data-stu-id="8b578-148">In a marriage or divorce, hello name is expected toochange, which is not allowed for this attribute.</span></span> <span data-ttu-id="8b578-149">Dotyczy to również jedną z przyczyn Dlaczego atrybutów, takich jak **userPrincipalName**, **poczty**, i **targetAddress** nie są możliwe nawet tooselect hello Azure AD Connect instalacji Kreator.</span><span class="sxs-lookup"><span data-stu-id="8b578-149">This is also one reason why attributes such as **userPrincipalName**, **mail**, and **targetAddress** are not even possible tooselect in hello Azure AD Connect installation wizard.</span></span> <span data-ttu-id="8b578-150">Te atrybuty również zawierać hello "@" znak, który jest niedozwolony w hello sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="8b578-150">Those attributes also contain hello "@" character, which is not allowed in hello sourceAnchor.</span></span>

### <a name="changing-hello-sourceanchor-attribute"></a><span data-ttu-id="8b578-151">Zmiana atrybutu sourceAnchor hello</span><span class="sxs-lookup"><span data-stu-id="8b578-151">Changing hello sourceAnchor attribute</span></span>
<span data-ttu-id="8b578-152">wartość atrybutu sourceAnchor Hello nie można zmienić po utworzeniu obiektu hello w usłudze Azure AD i hello tożsamość jest zsynchronizowana.</span><span class="sxs-lookup"><span data-stu-id="8b578-152">hello sourceAnchor attribute value cannot be changed after hello object has been created in Azure AD and hello identity is synchronized.</span></span>

<span data-ttu-id="8b578-153">Z tego powodu hello następujące ograniczenia zastosować tooAzure AD Connect:</span><span class="sxs-lookup"><span data-stu-id="8b578-153">For this reason, hello following restrictions apply tooAzure AD Connect:</span></span>

* <span data-ttu-id="8b578-154">Atrybut sourceAnchor Hello można ustawić tylko podczas instalacji początkowej.</span><span class="sxs-lookup"><span data-stu-id="8b578-154">hello sourceAnchor attribute can only be set during initial installation.</span></span> <span data-ttu-id="8b578-155">Jeśli uruchomisz hello Kreatora instalacji, ta opcja jest tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="8b578-155">If you rerun hello installation wizard, this option is read-only.</span></span> <span data-ttu-id="8b578-156">Jeśli potrzebujesz toochange to ustawienie, należy odinstalować i zainstalować ponownie.</span><span class="sxs-lookup"><span data-stu-id="8b578-156">If you need toochange this setting, then you must uninstall and reinstall.</span></span>
* <span data-ttu-id="8b578-157">Jeśli zainstalujesz innego serwera Azure AD Connect, możesz musi wybierz hello tego samego atrybutu sourceAnchor wcześniej używane.</span><span class="sxs-lookup"><span data-stu-id="8b578-157">If you install another Azure AD Connect server, then you must select hello same sourceAnchor attribute as previously used.</span></span> <span data-ttu-id="8b578-158">Jeśli wcześniej została przy użyciu narzędzia DirSync i przenieść tooAzure AD Connect, należy użyć **objectGUID** ponieważ jest atrybutem hello używanym przez narzędzie DirSync.</span><span class="sxs-lookup"><span data-stu-id="8b578-158">If you have earlier been using DirSync and move tooAzure AD Connect, then you must use **objectGUID** since that is hello attribute used by DirSync.</span></span>
* <span data-ttu-id="8b578-159">Jeśli wartość hello sourceAnchor zostaną zmienione po hello obiekt został wyeksportowany tooAzure AD, następnie Azure AD Connect synchronizacji wygeneruje błąd i nie zezwala na zmiany w tym obiekcie przed hello problem został rozwiązany i hello sourceAnchor jest zmieniany na powitania katalog źródłowy.</span><span class="sxs-lookup"><span data-stu-id="8b578-159">If hello value for sourceAnchor is changed after hello object has been exported tooAzure AD, then Azure AD Connect sync throws an error and does not allow any more changes on that object before hello issue has been fixed and hello sourceAnchor is changed back in hello source directory.</span></span>

## <a name="using-msds-consistencyguid-as-sourceanchor"></a><span data-ttu-id="8b578-160">Przy użyciu msDS-ConsistencyGuid jako sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="8b578-160">Using msDS-ConsistencyGuid as sourceAnchor</span></span>
<span data-ttu-id="8b578-161">Domyślnie program Azure AD Connect (wersja 1.1.486.0 i starszych) używa objectGUID jako hello atrybutu sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="8b578-161">By default, Azure AD Connect (version 1.1.486.0 and older) uses objectGUID as hello sourceAnchor attribute.</span></span> <span data-ttu-id="8b578-162">Atrybut ObjectGUID jest generowanych przez system.</span><span class="sxs-lookup"><span data-stu-id="8b578-162">ObjectGUID is system-generated.</span></span> <span data-ttu-id="8b578-163">Nie można określić jego wartości podczas tworzenia lokalnych obiektów usługi AD.</span><span class="sxs-lookup"><span data-stu-id="8b578-163">You cannot specify its value when creating on-premises AD objects.</span></span> <span data-ttu-id="8b578-164">Jak opisano w sekcji [sourceAnchor](#sourceanchor), istnieją scenariusze, w których należy toospecify hello sourceAnchor wartość.</span><span class="sxs-lookup"><span data-stu-id="8b578-164">As explained in section [sourceAnchor](#sourceanchor), there are scenarios where you need toospecify hello sourceAnchor value.</span></span> <span data-ttu-id="8b578-165">Jeśli scenariusze hello są stosowane tooyou, należy użyć jako atrybut sourceAnchor hello można skonfigurować atrybut AD (na przykład msDS-ConsistencyGuid).</span><span class="sxs-lookup"><span data-stu-id="8b578-165">If hello scenarios are applicable tooyou, you must use a configurable AD attribute (for example, msDS-ConsistencyGuid) as hello sourceAnchor attribute.</span></span>

<span data-ttu-id="8b578-166">Azure AD Connect (wersja 1.1.524.0 oraz po) ułatwia teraz hello użycie msDS-ConsistencyGuid jako atrybut sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="8b578-166">Azure AD Connect (version 1.1.524.0 and after) now facilitates hello use of msDS-ConsistencyGuid as sourceAnchor attribute.</span></span> <span data-ttu-id="8b578-167">Podczas korzystania z tej funkcji Azure AD Connect automatycznie konfiguruje reguły synchronizacji hello:</span><span class="sxs-lookup"><span data-stu-id="8b578-167">When using this feature, Azure AD Connect automatically configures hello synchronization rules to:</span></span>

1. <span data-ttu-id="8b578-168">Użyj msDS-ConsistencyGuid jako atrybut sourceAnchor hello obiektów użytkownika.</span><span class="sxs-lookup"><span data-stu-id="8b578-168">Use msDS-ConsistencyGuid as hello sourceAnchor attribute for User objects.</span></span> <span data-ttu-id="8b578-169">Atrybut ObjectGUID jest używana do innych obiektów.</span><span class="sxs-lookup"><span data-stu-id="8b578-169">ObjectGUID is used for other object types.</span></span>

2. <span data-ttu-id="8b578-170">Dla żadnej podanej lokalnych użytkowników usługi AD obiektu, którego atrybut msDS-ConsistencyGuid nie jest wypełnione, Azure AD Connect zapisuje jej atrybutu msDS-ConsistencyGuid objectGUID wartość toohello Wstecz w lokalnej usłudze Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8b578-170">For any given on-premises AD User object whose msDS-ConsistencyGuid attribute isn't populated, Azure AD Connect writes its objectGUID value back toohello msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span> <span data-ttu-id="8b578-171">Po atrybutu msDS-ConsistencyGuid hello zostanie wypełnione, Azure AD Connect następnie eksportuje hello tooAzure obiektu AD.</span><span class="sxs-lookup"><span data-stu-id="8b578-171">After hello msDS-ConsistencyGuid attribute is populated, Azure AD Connect then exports hello object tooAzure AD.</span></span>

>[!NOTE]
> <span data-ttu-id="8b578-172">Raz lokalnego obiektu usługi Active Directory jest importowany do usługi Azure AD Connect (który jest importowany do hello przestrzeni łącznika usługi AD i przedstawione jako hello Metaverse), nie można już zmienić jej wartość sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="8b578-172">Once an on-premises AD object is imported into Azure AD Connect (that is, imported into hello AD Connector Space and projected into hello Metaverse), you cannot change its sourceAnchor value anymore.</span></span> <span data-ttu-id="8b578-173">wartość sourceAnchor hello toospecify podane lokalnymi AD obiektów, skonfiguruj jego atrybut msDS-ConsistencyGuid przed ich zaimportowaniem do usługi Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="8b578-173">toospecify hello sourceAnchor value for a given on-premises AD object, configure its msDS-ConsistencyGuid attribute before it is imported into Azure AD Connect.</span></span>

### <a name="permission-required"></a><span data-ttu-id="8b578-174">Wymagane uprawnienia</span><span class="sxs-lookup"><span data-stu-id="8b578-174">Permission required</span></span>
<span data-ttu-id="8b578-175">Ta toowork funkcja hello AD DS konto używane toosynchronize z lokalną usługą Active Directory muszą mieć uprawnienie zapisu uprawnienia toohello msDS-ConsistencyGuid atrybutu w lokalnej usłudze Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8b578-175">For this feature toowork, hello AD DS account used toosynchronize with on-premises Active Directory must be granted write permission toohello msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span>

### <a name="how-tooenable-hello-consistencyguid-feature---new-installation"></a><span data-ttu-id="8b578-176">Jak tooenable hello funkcji ConsistencyGuid — nowa instalacja</span><span class="sxs-lookup"><span data-stu-id="8b578-176">How tooenable hello ConsistencyGuid feature - New installation</span></span>
<span data-ttu-id="8b578-177">Użycie hello ConsistencyGuid jako sourceAnchor można włączyć podczas instalacji nowego.</span><span class="sxs-lookup"><span data-stu-id="8b578-177">You can enable hello use of ConsistencyGuid as sourceAnchor during new installation.</span></span> <span data-ttu-id="8b578-178">W tej sekcji omówiono zarówno Express, jak i niestandardowe instalacji w szczegółach.</span><span class="sxs-lookup"><span data-stu-id="8b578-178">This section covers both Express and Custom installation in details.</span></span>

  >[!NOTE]
  > <span data-ttu-id="8b578-179">Tylko nowsze wersje programu Azure AD Connect (1.1.524.0 oraz po) obsługuje hello użyciem ConsistencyGuid sourceAnchor podczas instalacji nowego.</span><span class="sxs-lookup"><span data-stu-id="8b578-179">Only newer versions of Azure AD Connect (1.1.524.0 and after) supports hello use of ConsistencyGuid as sourceAnchor during new installation.</span></span>

### <a name="how-tooenable-hello-consistencyguid-feature"></a><span data-ttu-id="8b578-180">Jak tooenable hello ConsistencyGuid funkcji</span><span class="sxs-lookup"><span data-stu-id="8b578-180">How tooenable hello ConsistencyGuid feature</span></span>
<span data-ttu-id="8b578-181">Obecnie funkcja hello można włączyć tylko podczas nowej instalacji usługi Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="8b578-181">Currently, hello feature can only be enabled during new Azure AD Connect installation only.</span></span>

#### <a name="express-installation"></a><span data-ttu-id="8b578-182">Instalacja ekspresowa</span><span class="sxs-lookup"><span data-stu-id="8b578-182">Express Installation</span></span>
<span data-ttu-id="8b578-183">Podczas instalacji programu Azure AD Connect z trybem Express, Kreator Azure AD Connect hello automatycznie określa hello AD najbardziej odpowiedni atrybut toouse jako atrybut sourceAnchor hello przy użyciu następującego logiki hello:</span><span class="sxs-lookup"><span data-stu-id="8b578-183">When installing Azure AD Connect with Express mode, hello Azure AD Connect wizard automatically determines hello most appropriate AD attribute toouse as hello sourceAnchor attribute using hello following logic:</span></span>

* <span data-ttu-id="8b578-184">Po pierwsze hello Azure AD Connect Kreatora kwerend atrybut hello AD tooretrieve dzierżawy usługi Azure AD stosowane hello atrybutu sourceAnchor hello poprzedniej usługi Azure AD Connect instalacji (jeśli istnieje).</span><span class="sxs-lookup"><span data-stu-id="8b578-184">First, hello Azure AD Connect wizard queries your Azure AD tenant tooretrieve hello AD attribute used as hello sourceAnchor attribute in hello previous Azure AD Connect installation (if any).</span></span> <span data-ttu-id="8b578-185">Jeśli te informacje są dostępne, Azure AD Connect używa atrybutu hello tego samego AD.</span><span class="sxs-lookup"><span data-stu-id="8b578-185">If this information is available, Azure AD Connect uses hello same AD attribute.</span></span>

  >[!NOTE]
  > <span data-ttu-id="8b578-186">Tylko nowsze wersje programu Azure AD Connect (1.1.524.0 oraz po) magazynów informacje w dzierżawie usługi Azure AD atrybutu sourceAnchor hello jest używany podczas instalacji.</span><span class="sxs-lookup"><span data-stu-id="8b578-186">Only newer versions of Azure AD Connect (1.1.524.0 and after) stores information in your Azure AD tenant about hello sourceAnchor attribute used during installation.</span></span> <span data-ttu-id="8b578-187">Starsze wersje programu Azure AD Connect, czy nie.</span><span class="sxs-lookup"><span data-stu-id="8b578-187">Older versions of Azure AD Connect do not.</span></span>

* <span data-ttu-id="8b578-188">Jeśli informacje o hello atrybut sourceAnchor jest niedostępna, Kreator hello sprawdza, stan hello atrybutu msDS-ConsistencyGuid hello w lokalnej usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8b578-188">If information about hello sourceAnchor attribute used isn't available, hello wizard checks hello state of hello msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="8b578-189">Jeśli atrybut hello nie jest skonfigurowana dla dowolnego obiektu w katalogu hello, Kreator hello używa hello msDS-ConsistencyGuid jako atrybut sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="8b578-189">If hello attribute isn't configured on any object in hello directory, hello wizard uses hello msDS-ConsistencyGuid as hello sourceAnchor attribute.</span></span> <span data-ttu-id="8b578-190">Jeśli atrybut hello jest skonfigurowany w co najmniej jednego obiektu w katalogu hello, Kreator hello zawiera atrybut hello jest używany przez inne aplikacje i nie nadaje się jako atrybut sourceAnchor...</span><span class="sxs-lookup"><span data-stu-id="8b578-190">If hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by other applications and is not suitable as sourceAnchor attribute...</span></span>

* <span data-ttu-id="8b578-191">W takim przypadku Kreator hello powraca toousing objectGUID jako hello atrybutu sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="8b578-191">In which case, hello wizard falls back toousing objectGUID as hello sourceAnchor attribute.</span></span>

* <span data-ttu-id="8b578-192">Po decyzji atrybutu sourceAnchor hello hello kreator zapisuje informacje hello w dzierżawy usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b578-192">Once hello sourceAnchor attribute is decided, hello wizard stores hello information in your Azure AD tenant.</span></span> <span data-ttu-id="8b578-193">Witaj informacje będą korzystali przyszłych instalacji programu Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="8b578-193">hello information will be used by future installation of Azure AD Connect.</span></span>

<span data-ttu-id="8b578-194">Po zakończeniu instalacji ekspresowej, Kreator hello informuje, atrybut, którego została pobrana jako atrybut zakotwiczenia źródła hello.</span><span class="sxs-lookup"><span data-stu-id="8b578-194">Once Express installation completes, hello wizard informs you which attribute has been picked as hello Source Anchor attribute.</span></span>

![Kreator informuje pobrane dla elementu sourceAnchor atrybutów AD](./media/active-directory-aadconnect-design-concepts/consistencyGuid-01.png)

#### <a name="custom-installation"></a><span data-ttu-id="8b578-196">Instalacja niestandardowa</span><span class="sxs-lookup"><span data-stu-id="8b578-196">Custom installation</span></span>
<span data-ttu-id="8b578-197">Podczas instalacji programu Azure AD Connect z trybem niestandardowe, Kreator Azure AD Connect hello oferuje dwie opcje podczas konfigurowania atrybutu sourceAnchor:</span><span class="sxs-lookup"><span data-stu-id="8b578-197">When installing Azure AD Connect with Custom mode, hello Azure AD Connect wizard provides two options when configuring sourceAnchor attribute:</span></span>

![Instalacja niestandardowa - sourceAnchor konfiguracji](./media/active-directory-aadconnect-design-concepts/consistencyGuid-02.png)

| <span data-ttu-id="8b578-199">Ustawienie</span><span class="sxs-lookup"><span data-stu-id="8b578-199">Setting</span></span> | <span data-ttu-id="8b578-200">Opis</span><span class="sxs-lookup"><span data-stu-id="8b578-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="8b578-201">Let Zarządzanie zakotwiczenie źródła hello Azure</span><span class="sxs-lookup"><span data-stu-id="8b578-201">Let Azure manage hello source anchor for me</span></span> | <span data-ttu-id="8b578-202">Wybierz tę opcję, jeśli ma atrybut hello toopick usługi Azure AD dla Ciebie.</span><span class="sxs-lookup"><span data-stu-id="8b578-202">Select this option if you want Azure AD toopick hello attribute for you.</span></span> <span data-ttu-id="8b578-203">Jeśli wybierzesz tę opcję, Azure AD Connect, Kreator stosuje hello sam [logiki wybór atrybutu sourceAnchor używane podczas instalacji ekspresowej](#express-installation).</span><span class="sxs-lookup"><span data-stu-id="8b578-203">If you select this option, Azure AD Connect wizard applies hello same [sourceAnchor attribute selection logic used during Express installation](#express-installation).</span></span> <span data-ttu-id="8b578-204">Podobne tooExpress instalacji, Kreator hello informuje o atrybut, którego została pobrana jako hello atrybut zakotwiczenia źródła po zakończeniu instalacji niestandardowej.</span><span class="sxs-lookup"><span data-stu-id="8b578-204">Similar tooExpress installation, hello wizard informs you which attribute has been picked as hello Source Anchor attribute after Custom installation completes.</span></span> |
| <span data-ttu-id="8b578-205">Określony atrybut</span><span class="sxs-lookup"><span data-stu-id="8b578-205">A specific attribute</span></span> | <span data-ttu-id="8b578-206">Wybierz tę opcję, jeśli chcesz toospecify istniejący atrybut AD jako atrybut sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="8b578-206">Select this option if you wish toospecify an existing AD attribute as hello sourceAnchor attribute.</span></span> |

### <a name="how-tooenable-hello-consistencyguid-feature---existing-deployment"></a><span data-ttu-id="8b578-207">Jak tooenable hello funkcji ConsistencyGuid - istniejącego wdrożenia</span><span class="sxs-lookup"><span data-stu-id="8b578-207">How tooenable hello ConsistencyGuid feature - Existing deployment</span></span>
<span data-ttu-id="8b578-208">Jeśli masz istniejące wdrożenie usługi Azure AD Connect, za pomocą objectGUID jako atrybut zakotwiczenia źródła hello można przełączać jej toousing ConsistencyGuid zamiast tego.</span><span class="sxs-lookup"><span data-stu-id="8b578-208">If you have an existing Azure AD Connect deployment which is using objectGUID as hello Source Anchor attribute, you can switch it toousing ConsistencyGuid instead.</span></span>

>[!NOTE]
> <span data-ttu-id="8b578-209">Tylko nowsze wersje programu Azure AD Connect (1.1.552.0 oraz po) obsługuje przełączenie z tooConsistencyGuid ObjectGuid jako atrybut zakotwiczenia źródła hello.</span><span class="sxs-lookup"><span data-stu-id="8b578-209">Only newer versions of Azure AD Connect (1.1.552.0 and after) supports switching from ObjectGuid tooConsistencyGuid as hello Source Anchor attribute.</span></span>

<span data-ttu-id="8b578-210">tooswitch z tooConsistencyGuid objectGUID jako atrybut zakotwiczenia źródła hello:</span><span class="sxs-lookup"><span data-stu-id="8b578-210">tooswitch from objectGUID tooConsistencyGuid as hello Source Anchor attribute:</span></span>

1. <span data-ttu-id="8b578-211">Uruchom kreatora Połącz hello Azure AD i kliknij przycisk **Konfiguruj** toogo toohello zadania ekranu.</span><span class="sxs-lookup"><span data-stu-id="8b578-211">Start hello Azure AD Connect wizard and click **Configure** toogo toohello Tasks screen.</span></span>

2. <span data-ttu-id="8b578-212">Wybierz hello **Konfiguruj zakotwiczenia źródła** zadań opcję i kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="8b578-212">Select hello **Configure Source Anchor** task option and click **Next**.</span></span>

   ![Włącz ConsistencyGuid dla istniejącego wdrożenia — krok 2](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment01.png)

3. <span data-ttu-id="8b578-214">Wprowadź swoje poświadczenia usługi Azure AD administratora, a następnie kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="8b578-214">Enter your Azure AD Administrator credentials and click **Next**.</span></span>

4. <span data-ttu-id="8b578-215">Kreator Azure AD Connect analizuje stan hello atrybutu msDS-ConsistencyGuid hello w lokalnej usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8b578-215">Azure AD Connect wizard analyzes hello state of hello msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="8b578-216">Jeśli atrybut hello nie jest skonfigurowane na żadnym obiektu w katalogu, Azure AD Connect stwierdza, że żadna inna aplikacja używa obecnie atrybut hello i jest bezpieczne toouse powitalne go jako atrybut zakotwiczenia źródła hello.</span><span class="sxs-lookup"><span data-stu-id="8b578-216">If hello attribute isn't configured on any object in hello directory, Azure AD Connect concludes that no other application is currently using hello attribute and is safe toouse it as hello Source Anchor attribute.</span></span> <span data-ttu-id="8b578-217">Kliknij przycisk **dalej** toocontinue.</span><span class="sxs-lookup"><span data-stu-id="8b578-217">Click **Next** toocontinue.</span></span>

   ![Włącz ConsistencyGuid dla istniejącego wdrożenia — krok 4](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment02.png)

5. <span data-ttu-id="8b578-219">W hello **gotowe tooConfigure** kliknij **Konfiguruj** zmianę konfiguracji hello toomake.</span><span class="sxs-lookup"><span data-stu-id="8b578-219">In hello **Ready tooConfigure** screen, click **Configure** toomake hello configuration change.</span></span>

   ![Włącz ConsistencyGuid dla istniejącego wdrożenia — krok 5](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment03.png)

6. <span data-ttu-id="8b578-221">Po zakończeniu konfiguracji hello, Kreator hello wskazuje, że ten msDS-ConsistencyGuid jest teraz używany jako atrybut zakotwiczenia źródła hello.</span><span class="sxs-lookup"><span data-stu-id="8b578-221">Once hello configuration completes, hello wizard indicates that msDS-ConsistencyGuid is now being used as hello Source Anchor attribute.</span></span>

   ![Włącz ConsistencyGuid dla istniejącego wdrożenia — krok 6](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment04.png)

<span data-ttu-id="8b578-223">Podczas analizy hello (krok 4) Jeśli atrybut hello jest skonfigurowany w co najmniej jednego obiektu w katalogu hello kreatora hello zawiera atrybut hello jest używany przez inną aplikację i zwraca błąd, jak pokazano na poniższym diagramie hello.</span><span class="sxs-lookup"><span data-stu-id="8b578-223">During hello analysis (step 4), if hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by another application and returns an error as illustrated in hello diagram below.</span></span> <span data-ttu-id="8b578-224">Jeśli masz pewność, że ten atrybut hello nie jest używana przez istniejące aplikacje, należy toocontact pomocy technicznej Aby uzyskać informacje dotyczące sposobu toosuppress hello błędu.</span><span class="sxs-lookup"><span data-stu-id="8b578-224">If you are certain that hello attribute isn't used by existing applications, you need toocontact Support for information on how toosuppress hello error.</span></span>

![Włącz ConsistencyGuid dla istniejącego wdrożenia — błąd](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeploymenterror.png)

### <a name="impact-on-ad-fs-or-third-party-federation-configuration"></a><span data-ttu-id="8b578-226">Wpływ na usługi AD FS lub konfiguracji federacyjne innych firm</span><span class="sxs-lookup"><span data-stu-id="8b578-226">Impact on AD FS or third-party federation configuration</span></span>
<span data-ttu-id="8b578-227">Jeśli używasz usługi Azure AD Connect toomanage lokalnego wdrożenia usług AD FS, hello Azure AD Connect automatycznie aktualizuje atrybut reguły oświadczeń hello hello tego samego AD toouse jako sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="8b578-227">If you are using Azure AD Connect toomanage on-premises AD FS deployment, hello Azure AD Connect automatically updates hello claim rules toouse hello same AD attribute as sourceAnchor.</span></span> <span data-ttu-id="8b578-228">Dzięki temu roszczenie nazwę ImmutableID hello generowanych przez usługi AD FS jest zgodna z hello sourceAnchor wartości wyeksportowanej tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="8b578-228">This ensures that hello ImmutableID claim generated by ADFS is consistent with hello sourceAnchor values exported tooAzure AD.</span></span>

<span data-ttu-id="8b578-229">Jeśli zarządzasz usług AD FS poza Azure AD Connect lub serwery federacyjne innych firm jest używany do uwierzytelniania, należy ręcznie zaktualizować reguły oświadczeń hello na nazwę ImmutableID toobe oświadczenie zgodne z wartościami sourceAnchor hello wyeksportowane tooAzure AD jako opisane w sekcji artykułu [reguł oświadczeń Modyfikuj AD FS](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span><span class="sxs-lookup"><span data-stu-id="8b578-229">If you are managing AD FS outside of Azure AD Connect or you are using third-party federation servers for authentication, you must manually update hello claim rules for ImmutableID claim toobe consistent with hello sourceAnchor values exported tooAzure AD as described in article section [Modify AD FS claim rules](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span></span> <span data-ttu-id="8b578-230">Kreator Hello zwraca hello następujące ostrzeżenie po zakończeniu instalacji:</span><span class="sxs-lookup"><span data-stu-id="8b578-230">hello wizard returns hello following warning after installation completes:</span></span>

![Konfiguracja federacyjnego innych firm](./media/active-directory-aadconnect-design-concepts/consistencyGuid-03.png)

### <a name="adding-new-directories-tooexisting-deployment"></a><span data-ttu-id="8b578-232">Dodawanie nowego wdrożenia tooexisting katalogów</span><span class="sxs-lookup"><span data-stu-id="8b578-232">Adding new directories tooexisting deployment</span></span>
<span data-ttu-id="8b578-233">Załóżmy, że wdrożono Azure AD Connect z włączoną funkcją ConsistencyGuid hello, a teraz chcesz tooadd inne wdrożenie toohello katalogu.</span><span class="sxs-lookup"><span data-stu-id="8b578-233">Suppose you have deployed Azure AD Connect with hello ConsistencyGuid feature enabled, and now you would like tooadd another directory toohello deployment.</span></span> <span data-ttu-id="8b578-234">Podczas próby tooadd hello katalogu Kreator Azure AD Connect sprawdza stan hello atrybutu mSDS-ConsistencyGuid hello w katalogu hello.</span><span class="sxs-lookup"><span data-stu-id="8b578-234">When you try tooadd hello directory, Azure AD Connect wizard checks hello state of hello mSDS-ConsistencyGuid attribute in hello directory.</span></span> <span data-ttu-id="8b578-235">Jeśli atrybut hello jest skonfigurowany w co najmniej jednego obiektu w katalogu hello, Kreator hello zawiera atrybut hello jest używany przez inne aplikacje i zwraca błąd, jak pokazano na poniższym diagramie hello.</span><span class="sxs-lookup"><span data-stu-id="8b578-235">If hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by other applications and returns an error as illustrated in hello diagram below.</span></span> <span data-ttu-id="8b578-236">Jeśli masz pewność, że ten atrybut hello nie jest używana przez istniejące aplikacje, należy toocontact pomocy technicznej Aby uzyskać informacje dotyczące sposobu toosuppress hello błędu.</span><span class="sxs-lookup"><span data-stu-id="8b578-236">If you are certain that hello attribute isn't used by existing applications, you need toocontact Support for information on how toosuppress hello error.</span></span>

![Dodawanie nowego wdrożenia tooexisting katalogów](./media/active-directory-aadconnect-design-concepts/consistencyGuid-04.png)

## <a name="azure-ad-sign-in"></a><span data-ttu-id="8b578-238">Azure AD logowania</span><span class="sxs-lookup"><span data-stu-id="8b578-238">Azure AD sign-in</span></span>
<span data-ttu-id="8b578-239">Podczas integracji katalogu lokalnego z usługą Azure AD, jest ważne toounderstand wpływ hello sposób użytkownika ustawienia synchronizacji hello uwierzytelnia.</span><span class="sxs-lookup"><span data-stu-id="8b578-239">While integrating your on-premises directory with Azure AD, it is important toounderstand how hello synchronization settings can affect hello way user authenticates.</span></span> <span data-ttu-id="8b578-240">Użytkownik hello tooauthenticate userPrincipalName (UPN) korzysta z usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b578-240">Azure AD uses userPrincipalName (UPN) tooauthenticate hello user.</span></span> <span data-ttu-id="8b578-241">Jednak po zsynchronizowaniu użytkowników, musisz wybrać toobe atrybutu hello używany dla wartości userPrincipalName uważnie.</span><span class="sxs-lookup"><span data-stu-id="8b578-241">However, when you synchronize your users, you must choose hello attribute toobe used for value of userPrincipalName carefully.</span></span>

### <a name="choosing-hello-attribute-for-userprincipalname"></a><span data-ttu-id="8b578-242">Wybieranie atrybutu userPrincipalName hello</span><span class="sxs-lookup"><span data-stu-id="8b578-242">Choosing hello attribute for userPrincipalName</span></span>
<span data-ttu-id="8b578-243">Podczas wybierania atrybutu hello zapewniające hello wartość UPN toobe używane w przypadku Azure powinien zapewnić</span><span class="sxs-lookup"><span data-stu-id="8b578-243">When you are selecting hello attribute for providing hello value of UPN toobe used in Azure one should ensure</span></span>

* <span data-ttu-id="8b578-244">wartości atrybutów Hello jest zgodna z składnię nazwy UPN toohello (RFC 822), która jest powinna mieć ona hello formatusername@domain</span><span class="sxs-lookup"><span data-stu-id="8b578-244">hello attribute values conform toohello UPN syntax (RFC 822), that is it should be of hello format username@domain</span></span>
* <span data-ttu-id="8b578-245">sufiks Hello tooone dopasowania wartości hello z hello zweryfikować domen niestandardowych w usłudze Azure AD</span><span class="sxs-lookup"><span data-stu-id="8b578-245">hello suffix in hello values matches tooone of hello verified custom domains in Azure AD</span></span>

<span data-ttu-id="8b578-246">W ustawieniach ekspresowych hello przyjęto userPrincipalName jest rozwiązaniem dla atrybutu hello.</span><span class="sxs-lookup"><span data-stu-id="8b578-246">In express settings, hello assumed choice for hello attribute is userPrincipalName.</span></span> <span data-ttu-id="8b578-247">Jeśli atrybut userPrincipalName hello nie zawiera wartości hello ma toosign Twojego użytkowników w tooAzure, a następnie należy wybrać **Instalacja niestandardowa**.</span><span class="sxs-lookup"><span data-stu-id="8b578-247">If hello userPrincipalName attribute does not contain hello value you want your users toosign in tooAzure, then you must choose **Custom Installation**.</span></span>

### <a name="custom-domain-state-and-upn"></a><span data-ttu-id="8b578-248">Stan domeny niestandardowe i UPN</span><span class="sxs-lookup"><span data-stu-id="8b578-248">Custom domain state and UPN</span></span>
<span data-ttu-id="8b578-249">Jest ważne tooensure zweryfikowanej domeny dla sufiks nazwy UPN hello istnieje.</span><span class="sxs-lookup"><span data-stu-id="8b578-249">It is important tooensure that there is a verified domain for hello UPN suffix.</span></span>

<span data-ttu-id="8b578-250">Jan jest użytkownikiem w domenie contoso.com. Ma Jan toouse hello UPN lokalnymi john@contoso.com toosign w tooAzure po zsynchronizowaniu użytkowników tooyour usługi Azure AD directory contoso.onmicrosoft.com. toodo tak, należy tooadd i sprawdź contoso.com jako niestandardową domenę, w usłudze Azure AD przed rozpoczęciem Trwa synchronizowanie hello użytkowników.</span><span class="sxs-lookup"><span data-stu-id="8b578-250">John is a user in contoso.com. You want John toouse hello on-premises UPN john@contoso.com toosign in tooAzure after you have synced users tooyour Azure AD directory contoso.onmicrosoft.com. toodo so, you need tooadd and verify contoso.com as a custom domain in Azure AD before you can start syncing hello users.</span></span> <span data-ttu-id="8b578-251">Jeśli sufiks nazwy UPN hello John, na przykład contoso.com, nie odpowiada zweryfikowanej domeny w usłudze Azure AD, następnie usługi Azure AD zastępuje sufiks nazwy UPN hello contoso.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="8b578-251">If hello UPN suffix of John, for example contoso.com, does not match a verified domain in Azure AD, then Azure AD replaces hello UPN suffix with contoso.onmicrosoft.com.</span></span>

### <a name="non-routable-on-premises-domains-and-upn-for-azure-ad"></a><span data-ttu-id="8b578-252">UPN dla usługi Azure AD i lokalnej obsługi routingu domen</span><span class="sxs-lookup"><span data-stu-id="8b578-252">Non-routable on-premises domains and UPN for Azure AD</span></span>
<span data-ttu-id="8b578-253">Niektóre organizacje mają nierutowalny domen, takich jak contoso.local lub prostego domen jak contoso.</span><span class="sxs-lookup"><span data-stu-id="8b578-253">Some organizations have non-routable domains, like contoso.local, or simple single label domains like contoso.</span></span> <span data-ttu-id="8b578-254">Nie jesteś tooverify stanie nierutowalny domeny w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b578-254">You are not able tooverify a non-routable domain in Azure AD.</span></span> <span data-ttu-id="8b578-255">Azure AD Connect można synchronizować tooonly zweryfikowanej domeny w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8b578-255">Azure AD Connect can sync tooonly a verified domain in Azure AD.</span></span> <span data-ttu-id="8b578-256">Podczas tworzenia katalogu usługi Azure AD, tworzy domenę routingu, która staje się domyślną domenę usługi Azure AD na przykład contoso.onmicrosoft.com. W związku z tym okaże się konieczne tooverify innej domeny routingu w takiej sytuacji w przypadku, gdy nie chcesz, aby toosync toohello domyślnej domeny onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="8b578-256">When you create an Azure AD directory, it creates a routable domain that becomes default domain for your Azure AD for example, contoso.onmicrosoft.com. Therefore, it becomes necessary tooverify any other routable domain in such a scenario in case you don't want toosync toohello default onmicrosoft.com domain.</span></span>

<span data-ttu-id="8b578-257">Odczyt [tooAzure nazwa Twojej niestandardową domenę usługi Active Directory dodać](../active-directory-add-domain.md) uzyskać więcej informacji dotyczących dodawania i weryfikowania domeny.</span><span class="sxs-lookup"><span data-stu-id="8b578-257">Read [Add your custom domain name tooAzure Active Directory](../active-directory-add-domain.md) for more info on adding and verifying domains.</span></span>

<span data-ttu-id="8b578-258">Wykrywa Azure AD Connect, jeśli są uruchomione w środowisku domeny bez obsługi routingu i będzie odpowiednio ostrzegać z wyprzedzeniem korzystanie z ustawień ekspresowych.</span><span class="sxs-lookup"><span data-stu-id="8b578-258">Azure AD Connect detects if you are running in a non-routable domain environment and would appropriately warn you from going ahead with express settings.</span></span> <span data-ttu-id="8b578-259">Jeśli pracujesz w domenie bez obsługi routingu, a następnie prawdopodobne jest, że hello UPN użytkowników hello ma zbyt sufiksy bez obsługi routingu.</span><span class="sxs-lookup"><span data-stu-id="8b578-259">If you are operating in a non-routable domain, then it is likely that hello UPN of hello users have non-routable suffixes too.</span></span> <span data-ttu-id="8b578-260">Na przykład jeśli używane do uruchamiania contoso.local, Azure AD Connect sugeruje możesz toouse ustawienia niestandardowe, a nie przy użyciu ustawień ekspresowych.</span><span class="sxs-lookup"><span data-stu-id="8b578-260">For example, if you are running under contoso.local, Azure AD Connect suggests you toouse custom settings rather than using express settings.</span></span> <span data-ttu-id="8b578-261">Za pomocą ustawień niestandardowych, jest możliwe toospecify hello atrybut, który powinien być używany jako toosign nazwy UPN w tooAzure po hello użytkownicy są zsynchronizowane tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="8b578-261">Using custom settings, you are able toospecify hello attribute that should be used as UPN toosign in tooAzure after hello users are synced tooAzure AD.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8b578-262">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="8b578-262">Next steps</span></span>
<span data-ttu-id="8b578-263">Dowiedz się więcej na temat [integrowania tożsamości lokalnych z usługą Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="8b578-263">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
