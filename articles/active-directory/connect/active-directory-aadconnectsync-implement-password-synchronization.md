---
title: "Synchronizacja haseł aaaImplement z synchronizacji Azure AD Connect | Dokumentacja firmy Microsoft"
description: "Zawiera informacje na temat sposobu działania synchronizacji haseł i w jaki sposób tooset w górę."
services: active-directory
documentationcenter: 
author: MarkusVi
manager: femila
editor: 
ms.assetid: 05f16c3e-9d23-45dc-afca-3d0fa9dbf501
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: billmath
ms.openlocfilehash: a0401640f2a4d914419ee4446f923bb3a972389d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="implement-password-synchronization-with-azure-ad-connect-sync"></a><span data-ttu-id="1de8d-103">Implementowanie synchronizacji haseł z synchronizacji Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="1de8d-103">Implement password synchronization with Azure AD Connect sync</span></span>
<span data-ttu-id="1de8d-104">Ten artykuł zawiera informacje dotyczące toosynchronize Twojego hasła użytkowników z lokalnej usługi Active Directory wystąpienia tooa oparte na chmurze usługi Azure Active Directory (Azure AD) wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="1de8d-104">This article provides information that you need toosynchronize your user passwords from an on-premises Active Directory instance tooa cloud-based Azure Active Directory (Azure AD) instance.</span></span>

## <a name="what-is-password-synchronization"></a><span data-ttu-id="1de8d-105">Co to jest synchronizacja haseł</span><span class="sxs-lookup"><span data-stu-id="1de8d-105">What is password synchronization</span></span>
<span data-ttu-id="1de8d-106">Witaj prawdopodobieństwo czy jest blokowane pracę powodu tooa zapomniane hasło jest powiązany numer toohello różnych haseł należy tooremember.</span><span class="sxs-lookup"><span data-stu-id="1de8d-106">hello probability that you're blocked from getting your work done due tooa forgotten password is related toohello number of different passwords you need tooremember.</span></span> <span data-ttu-id="1de8d-107">Witaj więcej haseł należy tooremember, hello wyższej hello prawdopodobieństwo tooforget jeden.</span><span class="sxs-lookup"><span data-stu-id="1de8d-107">hello more passwords you need tooremember, hello higher hello probability tooforget one.</span></span> <span data-ttu-id="1de8d-108">Pytania i wywołania dotyczące resetowania hasła i inne żądanie problemy związane z hasłem hello najwięcej zasobów pomocy technicznej.</span><span class="sxs-lookup"><span data-stu-id="1de8d-108">Questions and calls about password resets and other password-related issues demand hello most helpdesk resources.</span></span>

<span data-ttu-id="1de8d-109">Synchronizacja haseł to funkcja używanych toosynchronize haseł użytkowników z lokalnej usługi Active Directory wystąpienia tooa oparte na chmurze usługi Azure AD wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="1de8d-109">Password synchronization is a feature used toosynchronize user passwords from an on-premises Active Directory instance tooa cloud-based Azure AD instance.</span></span>
<span data-ttu-id="1de8d-110">Użyj tej funkcji toosign w tooAzure AD usług, takich jak usługi Office 365, Microsoft Intune CRM Online i Azure Active Directory Domain Services (Azure AD DS).</span><span class="sxs-lookup"><span data-stu-id="1de8d-110">Use this feature toosign in tooAzure AD services like Office 365, Microsoft Intune, CRM Online, and Azure Active Directory Domain Services (Azure AD DS).</span></span> <span data-ttu-id="1de8d-111">Zaloguj się toohello usługi za pomocą hello tego samego hasła, użyj toosign w tooyour lokalne wystąpienie usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="1de8d-111">You sign in toohello service by using hello same password you use toosign in tooyour on-premises Active Directory instance.</span></span>

![Co to jest program Azure AD Connect](./media/active-directory-aadconnectsync-implement-password-synchronization/arch1.png)

<span data-ttu-id="1de8d-113">Dzięki zmniejszeniu liczby hello haseł, użytkownicy będą potrzebowali toojust toomaintain, jeden.</span><span class="sxs-lookup"><span data-stu-id="1de8d-113">By reducing hello number of passwords, your users need toomaintain toojust one.</span></span> <span data-ttu-id="1de8d-114">Synchronizacja haseł ułatwia:</span><span class="sxs-lookup"><span data-stu-id="1de8d-114">Password synchronization helps you to:</span></span>

* <span data-ttu-id="1de8d-115">Zwiększenie produktywności hello użytkowników.</span><span class="sxs-lookup"><span data-stu-id="1de8d-115">Improve hello productivity of your users.</span></span>
* <span data-ttu-id="1de8d-116">Obniżyć koszty pomocy technicznej.</span><span class="sxs-lookup"><span data-stu-id="1de8d-116">Reduce your helpdesk costs.</span></span>  

<span data-ttu-id="1de8d-117">Ponadto jeśli zdecydujesz toouse [federacji z usługi Active Directory Federation Services (AD FS)](https://channel9.msdn.com/Series/Azure-Active-Directory-Videos-Demos/Configuring-AD-FS-for-user-sign-in-with-Azure-AD-Connect), można opcjonalnie skonfigurować synchronizacji haseł jako zapasowy na wypadek awarii infrastruktury usług AD FS.</span><span class="sxs-lookup"><span data-stu-id="1de8d-117">Also, if you decide toouse [Federation with Active Directory Federation Services (AD FS)](https://channel9.msdn.com/Series/Azure-Active-Directory-Videos-Demos/Configuring-AD-FS-for-user-sign-in-with-Azure-AD-Connect), you can optionally set up password synchronization as a backup in case your AD FS infrastructure fails.</span></span>

<span data-ttu-id="1de8d-118">Synchronizacja haseł to funkcja synchronizacji katalogu toohello rozszerzenia implementowane przez synchronizacja programu Azure AD Connect. Synchronizacja haseł toouse w danym środowisku, należy:</span><span class="sxs-lookup"><span data-stu-id="1de8d-118">Password synchronization is an extension toohello directory synchronization feature implemented by Azure AD Connect sync. toouse password synchronization in your environment, you need to:</span></span>

* <span data-ttu-id="1de8d-119">Instalowanie usługi Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="1de8d-119">Install Azure AD Connect.</span></span>  
* <span data-ttu-id="1de8d-120">Skonfigurować synchronizację katalogów między lokalnym wystąpieniem usługi Active Directory i wystąpienie usługi Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="1de8d-120">Configure directory synchronization between your on-premises Active Directory instance and your Azure Active Directory instance.</span></span>
* <span data-ttu-id="1de8d-121">Włączanie synchronizacji haseł.</span><span class="sxs-lookup"><span data-stu-id="1de8d-121">Enable password synchronization.</span></span>

<span data-ttu-id="1de8d-122">Aby uzyskać więcej informacji, zobacz [Integrowanie tożsamości lokalnych z usługą Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="1de8d-122">For more details, see [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>

> [!NOTE]
> <span data-ttu-id="1de8d-123">Aby uzyskać więcej informacji na temat usługi Azure Active Directory Domain Services skonfigurowany dla FIPS i synchronizacja haseł, zobacz "synchronizacji haseł i FIPS" w dalszej części tego artykułu.</span><span class="sxs-lookup"><span data-stu-id="1de8d-123">For more details about Azure Active Directory Domain Services configured for FIPS and password synchronization, see "Password synchronization and FIPS" later in this article.</span></span>
>
>

## <a name="how-password-synchronization-works"></a><span data-ttu-id="1de8d-124">Opis działania synchronizacji haseł</span><span class="sxs-lookup"><span data-stu-id="1de8d-124">How password synchronization works</span></span>
<span data-ttu-id="1de8d-125">Witaj usług domenowych Active Directory przechowuje hasła w postaci hello reprezentacji wartość skrótu hasła użytkownika rzeczywiste hello.</span><span class="sxs-lookup"><span data-stu-id="1de8d-125">hello Active Directory domain service stores passwords in hello form of a hash value representation of hello actual user password.</span></span> <span data-ttu-id="1de8d-126">Wartość skrótu jest wynikiem jednokierunkowej funkcji matematycznych (hello *algorytmem wyznaczania wartości skrótu*).</span><span class="sxs-lookup"><span data-stu-id="1de8d-126">A hash value is a result of a one-way mathematical function (hello *hashing algorithm*).</span></span> <span data-ttu-id="1de8d-127">Nie ma żadnych wyników hello toorevert metody w wersji jednokierunkowa funkcja toohello zwykłego tekstu hasła.</span><span class="sxs-lookup"><span data-stu-id="1de8d-127">There is no method toorevert hello result of a one-way function toohello plain text version of a password.</span></span> <span data-ttu-id="1de8d-128">Nie można użyć toosign skrótu hasła tooyour sieci lokalnej.</span><span class="sxs-lookup"><span data-stu-id="1de8d-128">You cannot use a password hash toosign in tooyour on-premises network.</span></span>

<span data-ttu-id="1de8d-129">toosynchronize, który hasła, synchronizacja programu Azure AD Connect wyodrębnia z skrót hasła z hello lokalnego wystąpienia usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="1de8d-129">toosynchronize your password, Azure AD Connect sync extracts your password hash from hello on-premises Active Directory instance.</span></span> <span data-ttu-id="1de8d-130">Zastosowano dodatkowe zabezpieczenia przetwarzania toohello skrót hasła, zanim zostanie zsynchronizowany Usługa uwierzytelniania usługi Azure Active Directory toohello.</span><span class="sxs-lookup"><span data-stu-id="1de8d-130">Extra security processing is applied toohello password hash before it is synchronized toohello Azure Active Directory authentication service.</span></span> <span data-ttu-id="1de8d-131">Hasła są synchronizowane na poszczególnych użytkowników i w kolejności chronologicznej.</span><span class="sxs-lookup"><span data-stu-id="1de8d-131">Passwords are synchronized on a per-user basis and in chronological order.</span></span>

<span data-ttu-id="1de8d-132">Przepływ danych rzeczywistych Hello proces synchronizacji haseł hello jest podobne toohello synchronizacji danych użytkownika, takich jak DisplayName lub adresy E-mail.</span><span class="sxs-lookup"><span data-stu-id="1de8d-132">hello actual data flow of hello password synchronization process is similar toohello synchronization of user data such as DisplayName or Email Addresses.</span></span> <span data-ttu-id="1de8d-133">Jednak hasła są synchronizowane częściej niż okno synchronizacji katalogu standard hello innych atrybutów.</span><span class="sxs-lookup"><span data-stu-id="1de8d-133">However, passwords are synchronized more frequently than hello standard directory synchronization window for other attributes.</span></span> <span data-ttu-id="1de8d-134">proces synchronizacji haseł Hello jest uruchamiane co 2 minut.</span><span class="sxs-lookup"><span data-stu-id="1de8d-134">hello password synchronization process runs every 2 minutes.</span></span> <span data-ttu-id="1de8d-135">Nie można zmodyfikować częstotliwości hello tego procesu.</span><span class="sxs-lookup"><span data-stu-id="1de8d-135">You cannot modify hello frequency of this process.</span></span> <span data-ttu-id="1de8d-136">Podczas synchronizowania hasła, zastępuje on istniejące hasło chmury hello.</span><span class="sxs-lookup"><span data-stu-id="1de8d-136">When you synchronize a password, it overwrites hello existing cloud password.</span></span>

<span data-ttu-id="1de8d-137">Witaj pierwszym włączeniu funkcji synchronizacji haseł hello, wykonuje wstępnej synchronizacji haseł hello wszystkich użytkowników w zakresie.</span><span class="sxs-lookup"><span data-stu-id="1de8d-137">hello first time you enable hello password synchronization feature, it performs an initial synchronization of hello passwords of all in-scope users.</span></span> <span data-ttu-id="1de8d-138">Nie można jawnie definiować podzbiór, które mają toosynchronize haseł użytkowników.</span><span class="sxs-lookup"><span data-stu-id="1de8d-138">You cannot explicitly define a subset of user passwords that you want toosynchronize.</span></span>

<span data-ttu-id="1de8d-139">Jeśli zmienisz hasło lokalne powitania zaktualizować hasło jest zsynchronizowany, najczęściej w ciągu kilku minut.</span><span class="sxs-lookup"><span data-stu-id="1de8d-139">When you change an on-premises password, hello updated password is synchronized, most often in a matter of minutes.</span></span>
<span data-ttu-id="1de8d-140">Funkcja synchronizacji hasła Hello ma automatycznie ponawiać próby synchronizacji nie powiodło się.</span><span class="sxs-lookup"><span data-stu-id="1de8d-140">hello password synchronization feature automatically retries failed synchronization attempts.</span></span> <span data-ttu-id="1de8d-141">Jeśli wystąpi błąd podczas próby toosynchronize hasła, błąd jest rejestrowany w podglądu zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="1de8d-141">If an error occurs during an attempt toosynchronize a password, an error is logged in your event viewer.</span></span>

<span data-ttu-id="1de8d-142">Witaj Synchronizacja hasła nie ma wpływu na powitania użytkownika, który jest aktualnie zalogowany.</span><span class="sxs-lookup"><span data-stu-id="1de8d-142">hello synchronization of a password has no impact on hello user  who is currently signed in.</span></span>
<span data-ttu-id="1de8d-143">Zmiany hasła zsynchronizowane, która występuje, gdy użytkownik jest zarejestrowany w usłudze w chmurze tooa nie występuje od razu w bieżącej sesji usługi chmury.</span><span class="sxs-lookup"><span data-stu-id="1de8d-143">Your current cloud service session is not immediately affected by a synchronized password change that occurs while you are signed in tooa cloud service.</span></span> <span data-ttu-id="1de8d-144">Gdy usługa w chmurze hello wymaga tooauthenticate ponownie, jednak tooprovide nowego hasła.</span><span class="sxs-lookup"><span data-stu-id="1de8d-144">However, when hello cloud service requires you tooauthenticate again, you need tooprovide your new password.</span></span>

<span data-ttu-id="1de8d-145">Użytkownik musi wprowadzić poświadczenia firmowe drugi czasu tooauthenticate tooAzure AD, niezależnie od tego, czy jest zalogowany w sieci firmowej tootheir.</span><span class="sxs-lookup"><span data-stu-id="1de8d-145">A user must enter their corporate credentials a second time tooauthenticate tooAzure AD, regardless of whether they're signed in tootheir corporate network.</span></span> <span data-ttu-id="1de8d-146">Wzorzec te można zminimalizować, jednak jeśli hello użytkownik wybiera hello Keep mnie podpisany w pole wyboru (KMSI) podczas logowania.</span><span class="sxs-lookup"><span data-stu-id="1de8d-146">These pattern can be minimized, however, if hello user selects hello Keep me signed in (KMSI) check box at sign in.</span></span> <span data-ttu-id="1de8d-147">Wybranie tej opcji ustawia plik cookie sesji omija uwierzytelniania krótki okres.</span><span class="sxs-lookup"><span data-stu-id="1de8d-147">This selection sets a session cookie that bypasses authentication for a short period.</span></span> <span data-ttu-id="1de8d-148">Zachowanie KMSI można włączona lub wyłączona przez administratora usługi Azure AD hello.</span><span class="sxs-lookup"><span data-stu-id="1de8d-148">KMSI behavior can be enabled or disabled by hello Azure AD administrator.</span></span>

> [!NOTE]
> <span data-ttu-id="1de8d-149">Synchronizacja haseł jest obsługiwana tylko dla hello obiektu Typ użytkownika w usłudze Active Directory.</span><span class="sxs-lookup"><span data-stu-id="1de8d-149">Password sync is only supported for hello object type user in Active Directory.</span></span> <span data-ttu-id="1de8d-150">Nie jest obsługiwana dla typu obiektu iNetOrgPerson hello.</span><span class="sxs-lookup"><span data-stu-id="1de8d-150">It is not supported for hello iNetOrgPerson object type.</span></span>

### <a name="detailed-description-of-how-password-synchronization-works"></a><span data-ttu-id="1de8d-151">Szczegółowy opis działania synchronizacji haseł</span><span class="sxs-lookup"><span data-stu-id="1de8d-151">Detailed description of how password synchronization works</span></span>
<span data-ttu-id="1de8d-152">niżej Hello przedstawiono szczegółowy opis działania synchronizacji haseł od usługi Active Directory i Azure AD.</span><span class="sxs-lookup"><span data-stu-id="1de8d-152">hello following describes in-depth how password synchronization works between Active Directory and Azure AD.</span></span>

![Przepływ szczegółowe hasła](./media/active-directory-aadconnectsync-implement-password-synchronization/arch3.png)


1. <span data-ttu-id="1de8d-154">Co dwie minuty hello agent synchronizacji haseł na serwerze Connect hello AD żądań skrótów haseł przechowywanych (atrybut unicodePwd hello) z kontrolera domeny za pomocą standardowych hello [MS-DRSR](https://msdn.microsoft.com/library/cc228086.aspx) toosynchronize danych używany przez protokół replikacji między kontrolerów domeny.</span><span class="sxs-lookup"><span data-stu-id="1de8d-154">Every two minutes, hello password synchronization agent on hello AD Connect server requests stored password hashes (hello unicodePwd attribute) from a DC via hello standard [MS-DRSR](https://msdn.microsoft.com/library/cc228086.aspx) replication protocol used toosynchronize data between DCs.</span></span> <span data-ttu-id="1de8d-155">Konto usługi Hello musi mieć replikować zmiany katalogu i replikować katalogu zmiany wszystkich AD skrótów haseł hello tooobtain uprawnienia (domyślnie na instalację).</span><span class="sxs-lookup"><span data-stu-id="1de8d-155">hello service account must have Replicate Directory Changes and Replicate Directory Changes All AD permissions (granted by default on installation) tooobtain hello password hashes.</span></span>
2. <span data-ttu-id="1de8d-156">Przed wysłaniem, hello DC szyfruje hello MD4 skrót hasła przy użyciu klucza, który jest [MD5](http://www.rfc-editor.org/rfc/rfc1321.txt) skrótu klucza sesji hello RPC i soli.</span><span class="sxs-lookup"><span data-stu-id="1de8d-156">Before sending, hello DC encrypts hello MD4 password hash by using a key that is a [MD5](http://www.rfc-editor.org/rfc/rfc1321.txt) hash of hello RPC session key and a salt.</span></span> <span data-ttu-id="1de8d-157">Wysyła następnie agent synchronizacji haseł hello wynik toohello za pośrednictwem wywołania RPC.</span><span class="sxs-lookup"><span data-stu-id="1de8d-157">It then sends hello result toohello password synchronization agent over RPC.</span></span> <span data-ttu-id="1de8d-158">Witaj DC przekazuje także hello soli toohello synchronizacji agenta przy użyciu protokołu replikacji hello kontrolera domeny, więc agenta hello będą mogli toodecrypt hello koperty.</span><span class="sxs-lookup"><span data-stu-id="1de8d-158">hello DC also passes hello salt toohello synchronization agent by using hello DC replication protocol, so hello agent will be able toodecrypt hello envelope.</span></span>
3.  <span data-ttu-id="1de8d-159">Agent synchronizacji haseł powitania po koperty zaszyfrowanych hello używa [MD5CryptoServiceProvider](https://msdn.microsoft.com/library/System.Security.Cryptography.MD5CryptoServiceProvider.aspx) i hello soli toogenerate klucza toodecrypt hello Odebrano wstecz tooits oryginalnego MD4 format danych.</span><span class="sxs-lookup"><span data-stu-id="1de8d-159">After hello password synchronization agent has hello encrypted envelope, it uses [MD5CryptoServiceProvider](https://msdn.microsoft.com/library/System.Security.Cryptography.MD5CryptoServiceProvider.aspx) and hello salt toogenerate a key toodecrypt hello received data back tooits original MD4 format.</span></span> <span data-ttu-id="1de8d-160">W żadnym punkcie agent synchronizacji haseł hello mają dostęp toohello nieszyfrowanego hasła.</span><span class="sxs-lookup"><span data-stu-id="1de8d-160">At no point does hello password synchronization agent have access toohello clear text password.</span></span> <span data-ttu-id="1de8d-161">Witaj agent synchronizacji haseł zastosowaniem MD5 jest ściśle zgodność z protokołem replikacji z hello kontrolera domeny i jest używana tylko na lokalne między hello kontrolera domeny i agent synchronizacji haseł hello.</span><span class="sxs-lookup"><span data-stu-id="1de8d-161">hello password synchronization agent’s use of MD5 is strictly for replication protocol compatibility with hello DC, and it is only used on premises between hello DC and hello password synchronization agent.</span></span>
4.  <span data-ttu-id="1de8d-162">agent synchronizacji haseł Hello rozszerza bajtów too64 skrótu hasła binarne 16-bajtowych hello przez pierwszy konwertowania hello skrótu tooa 32-bajtowych ciąg szesnastkowy, a następnie konwertowania tego ciągu z powrotem do binarną, używając kodowania UTF-16.</span><span class="sxs-lookup"><span data-stu-id="1de8d-162">hello password synchronization agent expands hello 16-byte binary password hash too64 bytes by first converting hello hash tooa 32-byte hexadecimal string, then converting this string back into binary with UTF-16 encoding.</span></span>
5.  <span data-ttu-id="1de8d-163">agent synchronizacji haseł Hello dodaje soli, składające się soli długość 10-bajtowych, toofurther binarne 64-bajtowych toohello chronić hello oryginalnego wyznaczania wartości skrótu.</span><span class="sxs-lookup"><span data-stu-id="1de8d-163">hello password synchronization agent adds a salt, consisting of a 10-byte length salt, toohello 64-byte binary toofurther protect hello original hash.</span></span>
6.  <span data-ttu-id="1de8d-164">agent synchronizacji haseł Hello następnie łączy skrót hello MD4 plus soli i danych wejściowych go do hello [PBKDF2](https://www.ietf.org/rfc/rfc2898.txt) funkcji.</span><span class="sxs-lookup"><span data-stu-id="1de8d-164">hello password synchronization agent then combines hello MD4 hash plus salt, and inputs it into hello [PBKDF2](https://www.ietf.org/rfc/rfc2898.txt) function.</span></span> <span data-ttu-id="1de8d-165">1000 iteracji hello [HMAC SHA256](https://msdn.microsoft.com/library/system.security.cryptography.hmacsha256.aspx) kluczem algorytmu wyznaczania wartości skrótu jest używany.</span><span class="sxs-lookup"><span data-stu-id="1de8d-165">1000 iterations of hello [HMAC-SHA256](https://msdn.microsoft.com/library/system.security.cryptography.hmacsha256.aspx) keyed hashing algorithm is used.</span></span> 
7.  <span data-ttu-id="1de8d-166">agent synchronizacji haseł Hello przyjmuje hello wynikowy 32 bajtów skrótu, łączy zarówno soli hello hello liczba SHA256 tooit iteracji (na potrzeby używania przez usługę Azure AD), a następnie przesyła ciąg hello z usługi Azure AD Connect tooAzure AD przy użyciu protokołu SSL.</span><span class="sxs-lookup"><span data-stu-id="1de8d-166">hello password synchronization agent takes hello resulting 32-byte hash, concatenates both hello salt and hello number of SHA256 iterations tooit (for use by Azure AD), then transmits hello string from Azure AD Connect tooAzure AD over SSL.</span></span></br> 
8.  <span data-ttu-id="1de8d-167">Podczas prób toosign w tooAzure AD i wprowadza swoje hasło, hello hasło użytkownika, które jest uruchamiane za pomocą hello tego samego MD4 + ziarna + PBKDF2 + HMAC SHA256 procesu.</span><span class="sxs-lookup"><span data-stu-id="1de8d-167">When a user attempts toosign in tooAzure AD and enters their password, hello password is run through hello same MD4+salt+PBKDF2+HMAC-SHA256 process.</span></span> <span data-ttu-id="1de8d-168">Jeśli hello wynikowy skrót zgodny hello wyznaczania wartości skrótu, przechowywane w usłudze Azure AD, hello użytkownik wprowadził hello prawidłowe hasło i zostanie uwierzytelniony.</span><span class="sxs-lookup"><span data-stu-id="1de8d-168">If hello resulting hash matches hello hash stored in Azure AD, hello user has entered hello correct password and is authenticated.</span></span> 

>[!Note] 
><span data-ttu-id="1de8d-169">wyznaczania wartości skrótu MD4 oryginalnego Hello nie jest przesyłane tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="1de8d-169">hello original MD4 hash is not transmitted tooAzure AD.</span></span> <span data-ttu-id="1de8d-170">Zamiast tego są przesyłane hello wyznaczania wartości skrótu MD4 oryginalnego hello skrót SHA256.</span><span class="sxs-lookup"><span data-stu-id="1de8d-170">Instead, hello SHA256 hash of hello original MD4 hash is transmitted.</span></span> <span data-ttu-id="1de8d-171">W związku z tym Jeśli skrót hello przechowywane w usłudze Azure AD są uzyskiwane, nie można użyć w ataku pass--hash lokalnymi.</span><span class="sxs-lookup"><span data-stu-id="1de8d-171">As a result, if hello hash stored in Azure AD is obtained, it cannot be used in an on-premises pass-the-hash attack.</span></span>

### <a name="how-password-synchronization-works-with-azure-active-directory-domain-services"></a><span data-ttu-id="1de8d-172">Opis działania synchronizacji haseł z usług domenowych Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="1de8d-172">How password synchronization works with Azure Active Directory Domain Services</span></span>
<span data-ttu-id="1de8d-173">Umożliwia także toosynchronize funkcji synchronizacji haseł hello lokalnego hasła zbyt[Azure Active Directory Domain Services](../../active-directory-domain-services/active-directory-ds-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1de8d-173">You can also use hello password synchronization feature toosynchronize your on-premises passwords too[Azure Active Directory Domain Services](../../active-directory-domain-services/active-directory-ds-overview.md).</span></span> <span data-ttu-id="1de8d-174">W tym scenariuszu wystąpienia usługi Azure Active Directory Domain Services hello uwierzytelnia użytkowników w chmurze hello ze wszystkich metod hello dostępnych w lokalnym wystąpieniu usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="1de8d-174">In this scenario, hello Azure Active Directory Domain Services instance authenticates your users in hello cloud with all hello methods available in your on-premises Active Directory instance.</span></span> <span data-ttu-id="1de8d-175">środowisko Hello tego scenariusza jest podobne hello toousing narzędzie migracji usługi Active Directory (ADMT) w środowisku lokalnym.</span><span class="sxs-lookup"><span data-stu-id="1de8d-175">hello experience of this scenario is similar toousing hello Active Directory Migration Tool (ADMT) in an on-premises environment.</span></span>

### <a name="security-considerations"></a><span data-ttu-id="1de8d-176">Zagadnienia związane z zabezpieczeniami</span><span class="sxs-lookup"><span data-stu-id="1de8d-176">Security considerations</span></span>
<span data-ttu-id="1de8d-177">Podczas synchronizacji haseł hello zwykłego tekstu wersja hasła nie jest funkcja synchronizacji hasła narażonych toohello, tooAzure AD lub hello skojarzone usługi.</span><span class="sxs-lookup"><span data-stu-id="1de8d-177">When synchronizing passwords, hello plain-text version of your password is not exposed toohello password synchronization feature, tooAzure AD, or any of hello associated services.</span></span>

<span data-ttu-id="1de8d-178">Uwierzytelnianie użytkownika ma miejsce przed usługi Azure AD, a nie na wystąpieniu usługi Active Directory w organizacji hello.</span><span class="sxs-lookup"><span data-stu-id="1de8d-178">User authentication takes place against Azure AD rather than against hello organization's own Active Directory instance.</span></span> <span data-ttu-id="1de8d-179">Jeśli Twoja organizacja ma problemów dotyczących danych hasła w jakimkolwiek formularzu, pozostawiając hello lokalne, należy wziąć pod uwagę fakt hello tego hello SHA256 hasło danych przechowywanych w usłudze Azure AD — skrót hello oryginalnego skrótu MD4 — jest znacznie bezpieczniejsze niż co to jest przechowywane w usłudze Active Directory.</span><span class="sxs-lookup"><span data-stu-id="1de8d-179">If your organization has concerns about password data in any form leaving hello premises, consider hello fact that hello SHA256 password data stored in Azure AD--a hash of hello original MD4 hash--is significantly more secure than what is stored in Active Directory.</span></span> <span data-ttu-id="1de8d-180">Co więcej ponieważ nie można odszyfrować ten skrót SHA256, uniemożliwiający przywrócone środowiska usługi Active Directory w firmie toohello i widoczne jako prawidłowego użytkownika hasła w ataku typu pass--hash.</span><span class="sxs-lookup"><span data-stu-id="1de8d-180">Further, because this SHA256 hash cannot be decrypted, it cannot be brought back toohello organization's Active Directory environment and presented as a valid user password in a pass-the-hash attack.</span></span>





### <a name="password-policy-considerations"></a><span data-ttu-id="1de8d-181">Zagadnienia dotyczące zasad haseł</span><span class="sxs-lookup"><span data-stu-id="1de8d-181">Password policy considerations</span></span>
<span data-ttu-id="1de8d-182">Istnieją dwa typy zasad haseł, których dotyczy Włączanie synchronizacji haseł:</span><span class="sxs-lookup"><span data-stu-id="1de8d-182">There are two types of password policies that are affected by enabling password synchronization:</span></span>

* <span data-ttu-id="1de8d-183">Zasady złożoności haseł</span><span class="sxs-lookup"><span data-stu-id="1de8d-183">Password complexity policy</span></span>
* <span data-ttu-id="1de8d-184">Zasady wygasania haseł</span><span class="sxs-lookup"><span data-stu-id="1de8d-184">Password expiration policy</span></span>

#### <a name="password-complexity-policy"></a><span data-ttu-id="1de8d-185">Zasady złożoności haseł</span><span class="sxs-lookup"><span data-stu-id="1de8d-185">Password complexity policy</span></span>  
<span data-ttu-id="1de8d-186">Po włączeniu synchronizacji haseł hello zasady złożoności haseł w lokalnym wystąpieniu usługi Active Directory zastępują zasady złożoności w chmurze hello zsynchronizowanych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="1de8d-186">When password synchronization is enabled, hello password complexity policies in your on-premises Active Directory instance override complexity policies in hello cloud for synchronized users.</span></span> <span data-ttu-id="1de8d-187">Możliwość używania wszystkich hello prawidłowy haseł z tooaccess wystąpienia usługi Azure AD z lokalnej usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="1de8d-187">You can use all of hello valid passwords from your on-premises Active Directory instance tooaccess Azure AD services.</span></span>

> [!NOTE]
> <span data-ttu-id="1de8d-188">Hasła użytkowników, które są tworzone bezpośrednio w chmurze hello są nadal podmiotu toopassword zasady zgodnie z definicją w chmurze hello.</span><span class="sxs-lookup"><span data-stu-id="1de8d-188">Passwords for users that are created directly in hello cloud are still subject toopassword policies as defined in hello cloud.</span></span>

#### <a name="password-expiration-policy"></a><span data-ttu-id="1de8d-189">Zasady wygasania haseł</span><span class="sxs-lookup"><span data-stu-id="1de8d-189">Password expiration policy</span></span>  
<span data-ttu-id="1de8d-190">Jeśli użytkownik jest w zakresie hello synchronizacji haseł, hello chmury ustawione hasło konta jest zbyt*nigdy nie wygasa*.</span><span class="sxs-lookup"><span data-stu-id="1de8d-190">If a user is in hello scope of password synchronization, hello cloud account password is set too*Never Expire*.</span></span>

<span data-ttu-id="1de8d-191">Możesz kontynuować toosign tooyour usług w chmurze przy użyciu hasła zsynchronizowane, który wygasł w środowisku lokalnym.</span><span class="sxs-lookup"><span data-stu-id="1de8d-191">You can continue toosign in tooyour cloud services by using a synchronized password that is expired in your on-premises environment.</span></span> <span data-ttu-id="1de8d-192">Hasło chmury jest aktualizowany hello następnym zmienić hasło hello w hello w środowisku lokalnym.</span><span class="sxs-lookup"><span data-stu-id="1de8d-192">Your cloud password is updated hello next time you change hello password in hello on-premises environment.</span></span>

#### <a name="account-expiration"></a><span data-ttu-id="1de8d-193">Okres ważności konta</span><span class="sxs-lookup"><span data-stu-id="1de8d-193">Account expiration</span></span>
<span data-ttu-id="1de8d-194">Jeśli organizacja używa atrybutu accountExpires hello jako część Zarządzanie kontami użytkowników, należy pamiętać, że ten atrybut nie jest zsynchronizowane tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="1de8d-194">If your organization uses hello accountExpires attribute as part of user account management, be aware that this attribute is not synchronized tooAzure AD.</span></span> <span data-ttu-id="1de8d-195">W związku z tym wygasłe konto usługi Active Directory w środowisku skonfigurowana z synchronizacją hasła pozostaje aktywna w usłudze Azure AD.</span><span class="sxs-lookup"><span data-stu-id="1de8d-195">As a result, an expired Active Directory account in an environment configured for password synchronization will still be active in Azure AD.</span></span> <span data-ttu-id="1de8d-196">Zaleca się, że wygasł hello konta akcji przepływu pracy powinno spowodować skrypt PowerShell, który powoduje wyłączenie konta usługi Azure AD hello użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1de8d-196">We recommend that if hello account is expired, a workflow action should trigger a PowerShell script that disables hello user's Azure AD account.</span></span> <span data-ttu-id="1de8d-197">Z drugiej strony gdy konto hello jest włączona, wystąpienia usługi Azure AD hello powinna być włączona.</span><span class="sxs-lookup"><span data-stu-id="1de8d-197">Conversely, when hello account is turned on, hello Azure AD instance should be turned on.</span></span>

### <a name="overwrite-synchronized-passwords"></a><span data-ttu-id="1de8d-198">Zastąp synchronizowane hasła</span><span class="sxs-lookup"><span data-stu-id="1de8d-198">Overwrite synchronized passwords</span></span>
<span data-ttu-id="1de8d-199">Administrator może ręcznie zresetować hasło przy użyciu programu Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="1de8d-199">An administrator can manually reset your password by using Windows PowerShell.</span></span>

<span data-ttu-id="1de8d-200">W takim przypadku nowe hasło hello zastępuje synchronizowane hasła, a wszystkie zasady haseł zdefiniowane w chmurze hello są stosowane toohello nowe hasło.</span><span class="sxs-lookup"><span data-stu-id="1de8d-200">In this case, hello new password overrides your synchronized password, and all password policies defined in hello cloud are applied toohello new password.</span></span>

<span data-ttu-id="1de8d-201">W przypadku zmiany hasła lokalne powitania nowe hasło jest zsynchronizowany chmury toohello i zastępuje on hello ręcznie zaktualizować hasło.</span><span class="sxs-lookup"><span data-stu-id="1de8d-201">If you change your on-premises password again, hello new password is synchronized toohello cloud, and it overrides hello manually updated password.</span></span>

<span data-ttu-id="1de8d-202">Witaj Synchronizacja hasła nie ma wpływu na hello Azure, użytkownik jest zalogowany.</span><span class="sxs-lookup"><span data-stu-id="1de8d-202">hello synchronization of a password has no impact on hello Azure user who is signed in.</span></span> <span data-ttu-id="1de8d-203">Zmiany hasła zsynchronizowane występujący po zarejestrowaniu w usłudze w chmurze tooa nie występuje od razu w bieżącej sesji usługi chmury.</span><span class="sxs-lookup"><span data-stu-id="1de8d-203">Your current cloud service session is not immediately affected by a synchronized password change that occurs while you're signed in tooa cloud service.</span></span> <span data-ttu-id="1de8d-204">KMSI rozszerza hello czas trwania tej różnicy.</span><span class="sxs-lookup"><span data-stu-id="1de8d-204">KMSI extends hello duration of this difference.</span></span> <span data-ttu-id="1de8d-205">Gdy usługa w chmurze hello wymaga tooauthenticate ponownie, należy tooprovide nowego hasła.</span><span class="sxs-lookup"><span data-stu-id="1de8d-205">When hello cloud service requires you tooauthenticate again, you need tooprovide your new password.</span></span>

### <a name="additional-advantages"></a><span data-ttu-id="1de8d-206">Dodatkowe korzyści</span><span class="sxs-lookup"><span data-stu-id="1de8d-206">Additional advantages</span></span>

- <span data-ttu-id="1de8d-207">Ogólnie rzecz biorąc synchronizacja haseł jest łatwiejsze tooimplement niż usługi federacyjnej.</span><span class="sxs-lookup"><span data-stu-id="1de8d-207">Generally, password synchronization is simpler tooimplement than a federation service.</span></span> <span data-ttu-id="1de8d-208">Nie wymaga żadnych dodatkowych serwerów i eliminuje zależność od użytkowników tooauthenticate usługi federacyjnej wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="1de8d-208">It doesn't require any additional servers, and eliminates dependence on a highly available federation service tooauthenticate users.</span></span> 
- <span data-ttu-id="1de8d-209">Synchronizację haseł można włączyć w taki sposób, w toofederation dodanie.</span><span class="sxs-lookup"><span data-stu-id="1de8d-209">Password synchronization can also be enabled in addition toofederation.</span></span> <span data-ttu-id="1de8d-210">Mogą być używane jako rezerwowe, jeśli usługi federacyjnej ulegnie awarii.</span><span class="sxs-lookup"><span data-stu-id="1de8d-210">It may be used as a fallback if your federation service experiences an outage.</span></span>












## <a name="enable-password-synchronization"></a><span data-ttu-id="1de8d-211">Włączanie synchronizacji haseł</span><span class="sxs-lookup"><span data-stu-id="1de8d-211">Enable password synchronization</span></span>
<span data-ttu-id="1de8d-212">Po zainstalowaniu usługi Azure AD Connect przy użyciu hello **ustawień ekspresowych** opcji synchronizacji haseł jest automatycznie włączone.</span><span class="sxs-lookup"><span data-stu-id="1de8d-212">When you install Azure AD Connect by using hello **Express Settings** option, password synchronization is automatically enabled.</span></span> <span data-ttu-id="1de8d-213">Aby uzyskać więcej informacji, zobacz [wprowadzenie do korzystania z usługi Azure AD Connect przy użyciu ustawień ekspresowych](active-directory-aadconnect-get-started-express.md).</span><span class="sxs-lookup"><span data-stu-id="1de8d-213">For more details, see [Getting started with Azure AD Connect using express settings](active-directory-aadconnect-get-started-express.md).</span></span>

<span data-ttu-id="1de8d-214">Jeśli używasz ustawienia niestandardowe, po zainstalowaniu usługi Azure AD Connect, synchronizacja haseł jest dostępne na stronie logowania użytkownika hello.</span><span class="sxs-lookup"><span data-stu-id="1de8d-214">If you use custom settings when you install Azure AD Connect, password synchronization is available on hello user sign-in page.</span></span> <span data-ttu-id="1de8d-215">Aby uzyskać więcej informacji, zobacz [Instalacja niestandardowa programu Azure AD Connect](active-directory-aadconnect-get-started-custom.md).</span><span class="sxs-lookup"><span data-stu-id="1de8d-215">For more details, see [Custom installation of Azure AD Connect](active-directory-aadconnect-get-started-custom.md).</span></span>

![Włączanie synchronizacji haseł](./media/active-directory-aadconnectsync-implement-password-synchronization/usersignin.png)

### <a name="password-synchronization-and-fips"></a><span data-ttu-id="1de8d-217">Synchronizacja haseł i FIPS</span><span class="sxs-lookup"><span data-stu-id="1de8d-217">Password synchronization and FIPS</span></span>
<span data-ttu-id="1de8d-218">Jeśli serwer został zablokowany zgodnie z tooFederal Information Processing (Standard FIPS), MD5 jest wyłączone.</span><span class="sxs-lookup"><span data-stu-id="1de8d-218">If your server has been locked down according tooFederal Information Processing Standard (FIPS), then MD5 is disabled.</span></span>

<span data-ttu-id="1de8d-219">**tooenable MD5, aby synchronizować hasła, wykonaj hello następujące kroki:**</span><span class="sxs-lookup"><span data-stu-id="1de8d-219">**tooenable MD5 for password synchronization, perform hello following steps:**</span></span>

1. <span data-ttu-id="1de8d-220">Przejdź Sync\Bin too%programfiles%\Azure AD.</span><span class="sxs-lookup"><span data-stu-id="1de8d-220">Go too%programfiles%\Azure AD Sync\Bin.</span></span>
2. <span data-ttu-id="1de8d-221">Otwórz miiserver.exe.config.</span><span class="sxs-lookup"><span data-stu-id="1de8d-221">Open miiserver.exe.config.</span></span>
3. <span data-ttu-id="1de8d-222">Przejdź węzła konfiguracji/runtime toohello na końcu hello hello pliku.</span><span class="sxs-lookup"><span data-stu-id="1de8d-222">Go toohello configuration/runtime node at hello end of hello file.</span></span>
4. <span data-ttu-id="1de8d-223">Dodaj hello następującego węzła:`<enforceFIPSPolicy enabled="false"/>`</span><span class="sxs-lookup"><span data-stu-id="1de8d-223">Add hello following node: `<enforceFIPSPolicy enabled="false"/>`</span></span>
5. <span data-ttu-id="1de8d-224">Zapisz zmiany.</span><span class="sxs-lookup"><span data-stu-id="1de8d-224">Save your changes.</span></span>

<span data-ttu-id="1de8d-225">Odwołanie ta Wstawka kodu jest jak go powinna wyglądać:</span><span class="sxs-lookup"><span data-stu-id="1de8d-225">For reference, this snippet is what it should look like:</span></span>

```
    <configuration>
        <runtime>
            <enforceFIPSPolicy enabled="false"/>
        </runtime>
    </configuration>
```

<span data-ttu-id="1de8d-226">Aby uzyskać informacje o zabezpieczeniach i FIPS, zobacz [zgodności AAD Sync hasła, szyfrowania i FIPS](https://blogs.technet.microsoft.com/enterprisemobility/2014/06/28/aad-password-sync-encryption-and-fips-compliance/).</span><span class="sxs-lookup"><span data-stu-id="1de8d-226">For information about security and FIPS, see [AAD Password Sync, encryption and FIPS compliance](https://blogs.technet.microsoft.com/enterprisemobility/2014/06/28/aad-password-sync-encryption-and-fips-compliance/).</span></span>

## <a name="troubleshoot-password-synchronization"></a><span data-ttu-id="1de8d-227">Rozwiązywanie problemów z synchronizacją haseł</span><span class="sxs-lookup"><span data-stu-id="1de8d-227">Troubleshoot password synchronization</span></span>
<span data-ttu-id="1de8d-228">Jeśli masz problemy z synchronizacją haseł, zobacz [Rozwiązywanie problemów z synchronizacją hasła](active-directory-aadconnectsync-troubleshoot-password-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="1de8d-228">If you have problems with password synchronization, see [Troubleshoot password synchronization](active-directory-aadconnectsync-troubleshoot-password-synchronization.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="1de8d-229">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="1de8d-229">Next steps</span></span>
* [<span data-ttu-id="1de8d-230">Synchronizacja programu Azure AD Connect: Dostosowywanie opcji synchronizacji</span><span class="sxs-lookup"><span data-stu-id="1de8d-230">Azure AD Connect sync: Customizing synchronization options</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="1de8d-231">Integrowanie tożsamości lokalnych z usługą Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="1de8d-231">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)
