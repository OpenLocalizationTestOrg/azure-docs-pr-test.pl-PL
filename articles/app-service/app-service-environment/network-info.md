---
title: "zagadnienia dotyczące aaaNetworking ze środowiska usługi aplikacji Azure"
description: "Wyjaśniono hello ASE ruchu sieciowego i w jaki sposób tooset grup NSG i Udr z Twojej ASE"
services: app-service
documentationcenter: na
author: ccompy
manager: stefsch
ms.assetid: 955a4d84-94ca-418d-aa79-b57a5eb8cb85
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/08/2017
ms.author: ccompy
ms.openlocfilehash: d4d3000f4d4d75814b1e6d47079d967334eb1a3b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="networking-considerations-for-an-app-service-environment"></a><span data-ttu-id="5dc37-103">Zagadnienia dotyczące sieci dla środowiska usługi aplikacji</span><span class="sxs-lookup"><span data-stu-id="5dc37-103">Networking considerations for an App Service environment</span></span> #

## <a name="overview"></a><span data-ttu-id="5dc37-104">Omówienie</span><span class="sxs-lookup"><span data-stu-id="5dc37-104">Overview</span></span> ##

 <span data-ttu-id="5dc37-105">Azure [środowiska usługi aplikacji] [ Intro] wdrożenie usługi Azure App Service w podsieci sieci wirtualnej platformy Azure (VNet).</span><span class="sxs-lookup"><span data-stu-id="5dc37-105">Azure [App Service Environment][Intro] is a deployment of Azure App Service into a subnet in your Azure virtual network (VNet).</span></span> <span data-ttu-id="5dc37-106">Istnieją dwa typy wdrażania dla środowiska usługi App Service (ASE):</span><span class="sxs-lookup"><span data-stu-id="5dc37-106">There are two deployment types for an App Service environment (ASE):</span></span>

- <span data-ttu-id="5dc37-107">**Zewnętrzne ASE**: ujawnia hello aplikacji hostowanej ASE na internet dostępny adres IP.</span><span class="sxs-lookup"><span data-stu-id="5dc37-107">**External ASE**: Exposes hello ASE-hosted apps on an internet-accessible IP address.</span></span> <span data-ttu-id="5dc37-108">Aby uzyskać więcej informacji, zobacz [Tworzenie zewnętrznych ASE][MakeExternalASE].</span><span class="sxs-lookup"><span data-stu-id="5dc37-108">For more information, see [Create an External ASE][MakeExternalASE].</span></span>
- <span data-ttu-id="5dc37-109">**ILB ASE**: ujawnia hello hostowanej ASE aplikacji na adres IP w sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="5dc37-109">**ILB ASE**: Exposes hello ASE-hosted apps on an IP address inside your VNet.</span></span> <span data-ttu-id="5dc37-110">Wewnętrzny punkt końcowy Hello jest wewnętrzny moduł równoważenia obciążenia (ILB), dlatego jest określana mianem ASE ILB.</span><span class="sxs-lookup"><span data-stu-id="5dc37-110">hello internal endpoint is an internal load balancer (ILB), which is why it's called an ILB ASE.</span></span> <span data-ttu-id="5dc37-111">Aby uzyskać więcej informacji, zobacz [tworzenie i używanie ASE ILB][MakeILBASE].</span><span class="sxs-lookup"><span data-stu-id="5dc37-111">For more information, see [Create and use an ILB ASE][MakeILBASE].</span></span>

<span data-ttu-id="5dc37-112">Teraz są dwie wersje środowiska usługi aplikacji: ASEv1 i ASEv2.</span><span class="sxs-lookup"><span data-stu-id="5dc37-112">There are now two versions of App Service Environment: ASEv1 and ASEv2.</span></span> <span data-ttu-id="5dc37-113">Aby uzyskać informacje na ASEv1, zobacz [tooApp wprowadzenie v1 środowiska usługi][ASEv1Intro].</span><span class="sxs-lookup"><span data-stu-id="5dc37-113">For information on ASEv1, see [Introduction tooApp Service Environment v1][ASEv1Intro].</span></span> <span data-ttu-id="5dc37-114">ASEv1 można wdrożyć w klasyczny lub Menedżera zasobów w sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="5dc37-114">ASEv1 can be deployed in a classic or Resource Manager VNet.</span></span> <span data-ttu-id="5dc37-115">ASEv2 mogą być wdrażane tylko w sieci wirtualnej Menedżera zasobów.</span><span class="sxs-lookup"><span data-stu-id="5dc37-115">ASEv2 can only be deployed into a Resource Manager VNet.</span></span>

<span data-ttu-id="5dc37-116">Wywołania z ASE wykraczające toohello internet pozostaw hello sieci wirtualnej za pośrednictwem adresu VIP przypisanych do hello ASE.</span><span class="sxs-lookup"><span data-stu-id="5dc37-116">All calls from an ASE that go toohello internet leave hello VNet through a VIP assigned for hello ASE.</span></span> <span data-ttu-id="5dc37-117">Witaj publicznego adresu IP z tego adresu VIP jest następnie hello źródłowy adres IP dla wszystkich wywołań z hello ASE Przejdź toohello internet.</span><span class="sxs-lookup"><span data-stu-id="5dc37-117">hello public IP of this VIP is then hello source IP for all calls from hello ASE that go toohello internet.</span></span> <span data-ttu-id="5dc37-118">Jeśli aplikacji hello w Twojej ASE tooresources wywołań w sieci lub sieci VPN, hello źródłowy adres IP jest jednym z hello adresów IP w podsieci hello używany przez Twoje ASE.</span><span class="sxs-lookup"><span data-stu-id="5dc37-118">If hello apps in your ASE make calls tooresources in your VNet or across a VPN, hello source IP is one of hello IPs in hello subnet used by your ASE.</span></span> <span data-ttu-id="5dc37-119">Ponieważ hello ASE znajduje się wewnątrz hello sieci wirtualnej, można także używać zasobów w ramach hello sieci wirtualnej bez przeprowadzania dodatkowej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="5dc37-119">Because hello ASE is within hello VNet, it can also access resources within hello VNet without any additional configuration.</span></span> <span data-ttu-id="5dc37-120">Jeśli hello sieci wirtualnej sieci lokalnej podłączonej tooyour, aplikacje w Twojej ASE również mają tooresources dostępu istnieje.</span><span class="sxs-lookup"><span data-stu-id="5dc37-120">If hello VNet is connected tooyour on-premises network, apps in your ASE also have access tooresources there.</span></span> <span data-ttu-id="5dc37-121">Nie trzeba tooconfigure hello ASE lub aplikacji żadnych dalszych.</span><span class="sxs-lookup"><span data-stu-id="5dc37-121">You don't need tooconfigure hello ASE or your app any further.</span></span>

![Zewnętrzne ASE][1] 

<span data-ttu-id="5dc37-123">Jeśli masz zewnętrznych ASE hello publicznego adresu VIP jest również hello punktu końcowego, że aplikacje ASE rozpoznać toofor:</span><span class="sxs-lookup"><span data-stu-id="5dc37-123">If you have an External ASE, hello public VIP is also hello endpoint that your ASE apps resolve toofor:</span></span>

* <span data-ttu-id="5dc37-124">HTTP/S</span><span class="sxs-lookup"><span data-stu-id="5dc37-124">HTTP/S.</span></span> 
* <span data-ttu-id="5dc37-125">FTP/S.</span><span class="sxs-lookup"><span data-stu-id="5dc37-125">FTP/S.</span></span> 
* <span data-ttu-id="5dc37-126">Wdrażanie sieci Web.</span><span class="sxs-lookup"><span data-stu-id="5dc37-126">Web deployment.</span></span>
* <span data-ttu-id="5dc37-127">Debugowanie zdalne.</span><span class="sxs-lookup"><span data-stu-id="5dc37-127">Remote debugging.</span></span>

![ILB ASE][2]

<span data-ttu-id="5dc37-129">Jeśli masz ASE ILB, adres IP hello hello ILB jest hello końcowy dla protokołu HTTP/S, FTP/S, wdrożenie w sieci web i debugowanie zdalne.</span><span class="sxs-lookup"><span data-stu-id="5dc37-129">If you have an ILB ASE, hello IP address of hello ILB is hello endpoint for HTTP/S, FTP/S, web deployment, and remote debugging.</span></span>

<span data-ttu-id="5dc37-130">porty dostępu normalne aplikacji Hello są:</span><span class="sxs-lookup"><span data-stu-id="5dc37-130">hello normal app access ports are:</span></span>

| <span data-ttu-id="5dc37-131">Użycie</span><span class="sxs-lookup"><span data-stu-id="5dc37-131">Use</span></span> | <span data-ttu-id="5dc37-132">Z</span><span class="sxs-lookup"><span data-stu-id="5dc37-132">From</span></span> | <span data-ttu-id="5dc37-133">zbyt</span><span class="sxs-lookup"><span data-stu-id="5dc37-133">too</span></span>|
|----------|---------|-------------|
|  <span data-ttu-id="5dc37-134">HTTP/HTTPS.</span><span class="sxs-lookup"><span data-stu-id="5dc37-134">HTTP/HTTPS</span></span>  | <span data-ttu-id="5dc37-135">Konfigurowane przez użytkownika</span><span class="sxs-lookup"><span data-stu-id="5dc37-135">User configurable</span></span> |  <span data-ttu-id="5dc37-136">80, 443</span><span class="sxs-lookup"><span data-stu-id="5dc37-136">80, 443</span></span> |
|  <span data-ttu-id="5dc37-137">FTP/FTPS</span><span class="sxs-lookup"><span data-stu-id="5dc37-137">FTP/FTPS</span></span>    | <span data-ttu-id="5dc37-138">Konfigurowane przez użytkownika</span><span class="sxs-lookup"><span data-stu-id="5dc37-138">User configurable</span></span> |  <span data-ttu-id="5dc37-139">21, 990, 10001-10020</span><span class="sxs-lookup"><span data-stu-id="5dc37-139">21, 990, 10001-10020</span></span> |
|  <span data-ttu-id="5dc37-140">Visual Studio debugowanie zdalne</span><span class="sxs-lookup"><span data-stu-id="5dc37-140">Visual Studio remote debugging</span></span>  |  <span data-ttu-id="5dc37-141">Konfigurowane przez użytkownika</span><span class="sxs-lookup"><span data-stu-id="5dc37-141">User configurable</span></span> |  <span data-ttu-id="5dc37-142">4016, 4018, 4020, 4022</span><span class="sxs-lookup"><span data-stu-id="5dc37-142">4016, 4018, 4020, 4022</span></span> |

<span data-ttu-id="5dc37-143">Jest to wartość true, jeśli jesteś w elemencie ASE zewnętrznych lub w elemencie ASE ILB.</span><span class="sxs-lookup"><span data-stu-id="5dc37-143">This is true if you're on an External ASE or on an ILB ASE.</span></span> <span data-ttu-id="5dc37-144">Jeśli używasz zewnętrznego ASE naciśniesz tych portów na powitania publicznego adresu VIP.</span><span class="sxs-lookup"><span data-stu-id="5dc37-144">If you're on an External ASE, you hit those ports on hello public VIP.</span></span> <span data-ttu-id="5dc37-145">Jeśli jesteś w elemencie ASE ILB naciśniesz tych portów na powitania ILB.</span><span class="sxs-lookup"><span data-stu-id="5dc37-145">If you're on an ILB ASE, you hit those ports on hello ILB.</span></span> <span data-ttu-id="5dc37-146">Jeśli Zablokowanie portu 443, może być wpływ na niektóre funkcje widoczne w portalu hello.</span><span class="sxs-lookup"><span data-stu-id="5dc37-146">If you lock down port 443, there can be an effect on some features exposed in hello portal.</span></span> <span data-ttu-id="5dc37-147">Aby uzyskać więcej informacji, zobacz [zależności Portal](#portaldep).</span><span class="sxs-lookup"><span data-stu-id="5dc37-147">For more information, see [Portal dependencies](#portaldep).</span></span>

## <a name="ase-dependencies"></a><span data-ttu-id="5dc37-148">Zależności ASE</span><span class="sxs-lookup"><span data-stu-id="5dc37-148">ASE dependencies</span></span> ##

<span data-ttu-id="5dc37-149">ASE zależność dostępu ruchu przychodzącego jest:</span><span class="sxs-lookup"><span data-stu-id="5dc37-149">An ASE inbound access dependency is:</span></span>

| <span data-ttu-id="5dc37-150">Użycie</span><span class="sxs-lookup"><span data-stu-id="5dc37-150">Use</span></span> | <span data-ttu-id="5dc37-151">Z</span><span class="sxs-lookup"><span data-stu-id="5dc37-151">From</span></span> | <span data-ttu-id="5dc37-152">zbyt</span><span class="sxs-lookup"><span data-stu-id="5dc37-152">too</span></span>|
|-----|------|----|
| <span data-ttu-id="5dc37-153">Zarządzanie</span><span class="sxs-lookup"><span data-stu-id="5dc37-153">Management</span></span> | <span data-ttu-id="5dc37-154">Adresy zarządzania usługi aplikacji</span><span class="sxs-lookup"><span data-stu-id="5dc37-154">App Service management addresses</span></span> | <span data-ttu-id="5dc37-155">Podsieci ASE: 454, 455</span><span class="sxs-lookup"><span data-stu-id="5dc37-155">ASE subnet: 454, 455</span></span> |
|  <span data-ttu-id="5dc37-156">Wewnętrznej komunikacji ASE</span><span class="sxs-lookup"><span data-stu-id="5dc37-156">ASE internal communication</span></span> | <span data-ttu-id="5dc37-157">Podsieci ASE: wszystkie porty</span><span class="sxs-lookup"><span data-stu-id="5dc37-157">ASE subnet: All ports</span></span> | <span data-ttu-id="5dc37-158">Podsieci ASE: wszystkie porty</span><span class="sxs-lookup"><span data-stu-id="5dc37-158">ASE subnet: All ports</span></span>
|  <span data-ttu-id="5dc37-159">Zezwalaj na usługi równoważenia obciążenia Azure dla ruchu przychodzącego</span><span class="sxs-lookup"><span data-stu-id="5dc37-159">Allow Azure load balancer inbound</span></span> | <span data-ttu-id="5dc37-160">Moduł równoważenia obciążenia Azure</span><span class="sxs-lookup"><span data-stu-id="5dc37-160">Azure load balancer</span></span> | <span data-ttu-id="5dc37-161">Podsieci ASE: wszystkie porty</span><span class="sxs-lookup"><span data-stu-id="5dc37-161">ASE subnet: All ports</span></span>
|  <span data-ttu-id="5dc37-162">Aplikacji przypisanych adresów IP</span><span class="sxs-lookup"><span data-stu-id="5dc37-162">App assigned IP addresses</span></span> | <span data-ttu-id="5dc37-163">Adresy przypisywane aplikacji</span><span class="sxs-lookup"><span data-stu-id="5dc37-163">App assigned addresses</span></span> | <span data-ttu-id="5dc37-164">Podsieci ASE: wszystkie porty</span><span class="sxs-lookup"><span data-stu-id="5dc37-164">ASE subnet: All ports</span></span>

<span data-ttu-id="5dc37-165">Hello ruchu przychodzącego udostępnia polecenia i kontroli ASE hello dodanie toosystem monitorowania.</span><span class="sxs-lookup"><span data-stu-id="5dc37-165">hello inbound traffic provides command and control of hello ASE in addition toosystem monitoring.</span></span> <span data-ttu-id="5dc37-166">Źródło Hello adresów IP dla tego rodzaju ruch, są wyświetlane w hello [dotyczy zarządzania ASE] [ ASEManagement] dokumentu.</span><span class="sxs-lookup"><span data-stu-id="5dc37-166">hello source IPs for this traffic are listed in hello [ASE Management addresses][ASEManagement] document.</span></span> <span data-ttu-id="5dc37-167">Konfiguracja zabezpieczeń sieci Hello wymaga dostępu tooallow z wszystkich adresów IP w portach 454 i 455.</span><span class="sxs-lookup"><span data-stu-id="5dc37-167">hello network security configuration needs tooallow access from all IPs on ports 454 and 455.</span></span>

<span data-ttu-id="5dc37-168">W podsieci hello ASE istnieje wiele porty używane do wewnętrznej komunikacji i mogą zmieniać.</span><span class="sxs-lookup"><span data-stu-id="5dc37-168">Within hello ASE subnet there are many ports used for internal component communication and they can change.</span></span>  <span data-ttu-id="5dc37-169">Wymaga to wszystkie porty hello w hello ASE podsieci toobe dostępny z hello ASE podsieci.</span><span class="sxs-lookup"><span data-stu-id="5dc37-169">This requires all of hello ports in hello ASE subnet toobe accessible from hello ASE subnet.</span></span> 

<span data-ttu-id="5dc37-170">Witaj komunikacji między modułu równoważenia obciążenia Azure hello i hello ASE podsieci hello niezbędne porty tego toobe potrzeby otwórz są 454 i 455 16001.</span><span class="sxs-lookup"><span data-stu-id="5dc37-170">For hello communication between hello Azure load balancer and hello ASE subnet hello minimum ports that need toobe open are 454, 455 and 16001.</span></span> <span data-ttu-id="5dc37-171">Hello 16001 port jest używany keep alive ruch między hello modułu równoważenia obciążenia i hello ASE.</span><span class="sxs-lookup"><span data-stu-id="5dc37-171">hello 16001 port is used for keep alive traffic between hello load balancer and hello ASE.</span></span> <span data-ttu-id="5dc37-172">Jeśli używasz ASE ILB można zablokować ruch w dół toojust hello 454, 455, 16001 portów.</span><span class="sxs-lookup"><span data-stu-id="5dc37-172">If you are using an ILB ASE then you can lock traffic down toojust hello 454, 455, 16001 ports.</span></span>  <span data-ttu-id="5dc37-173">Jeśli używasz zewnętrznego ASE należy tootake do konta hello normalne aplikacji dostępu do portów.</span><span class="sxs-lookup"><span data-stu-id="5dc37-173">If you are using an External ASE then you need tootake into account hello normal app access ports.</span></span>  <span data-ttu-id="5dc37-174">Jeśli używane są adresy aplikację przypisaną należy tooopen go tooall portów.</span><span class="sxs-lookup"><span data-stu-id="5dc37-174">If you are using app assigned addresses you need tooopen it tooall ports.</span></span>  <span data-ttu-id="5dc37-175">Adres przypisany tooa specyficzne dla aplikacji, usługi równoważenia obciążenia hello użyje portów, które nie są znane z wyprzedzeniem toosend HTTP i HTTPS ruchu toohello ASE.</span><span class="sxs-lookup"><span data-stu-id="5dc37-175">When an address is assigned tooa specific app, then hello load balancer will use ports that are not known of in advance toosend HTTP and HTTPS traffic toohello ASE.</span></span>

<span data-ttu-id="5dc37-176">Jeśli używane są adresy IP przypisane aplikacji należy tooallow ruch z powitalne adresy IP przypisane tooyour aplikacji toohello ASE podsieci.</span><span class="sxs-lookup"><span data-stu-id="5dc37-176">If you are using app assigned IP addresses you need tooallow traffic from hello IPs assigned tooyour apps toohello ASE subnet.</span></span>

<span data-ttu-id="5dc37-177">Dla ruchu wychodzącego dostępu ASE zależy od wielu systemami zewnętrznymi.</span><span class="sxs-lookup"><span data-stu-id="5dc37-177">For outbound access, an ASE depends on multiple external systems.</span></span> <span data-ttu-id="5dc37-178">Te zależności systemu są zdefiniowane z nazwami DNS i nie mapują tooa ustalony zbiór adresów IP.</span><span class="sxs-lookup"><span data-stu-id="5dc37-178">Those system dependencies are defined with DNS names and don't map tooa fixed set of IP addresses.</span></span> <span data-ttu-id="5dc37-179">W związku z tym hello ASE wymaga wychodzący dostęp z tooall podsieci hello ASE zewnętrznych adresów IP w różnych portów.</span><span class="sxs-lookup"><span data-stu-id="5dc37-179">Thus, hello ASE requires outbound access from hello ASE subnet tooall external IPs across a variety of ports.</span></span> <span data-ttu-id="5dc37-180">ASE ma powitania po wychodzącego zależności:</span><span class="sxs-lookup"><span data-stu-id="5dc37-180">An ASE has hello following outbound dependencies:</span></span>

| <span data-ttu-id="5dc37-181">Użycie</span><span class="sxs-lookup"><span data-stu-id="5dc37-181">Use</span></span> | <span data-ttu-id="5dc37-182">Z</span><span class="sxs-lookup"><span data-stu-id="5dc37-182">From</span></span> | <span data-ttu-id="5dc37-183">zbyt</span><span class="sxs-lookup"><span data-stu-id="5dc37-183">too</span></span>|
|-----|------|----|
| <span data-ttu-id="5dc37-184">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="5dc37-184">Azure Storage</span></span> | <span data-ttu-id="5dc37-185">Podsieci ASE</span><span class="sxs-lookup"><span data-stu-id="5dc37-185">ASE subnet</span></span> | <span data-ttu-id="5dc37-186">TABLE.Core.Windows.NET, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445 (445 jest potrzebna tylko dla ASEv1.)</span><span class="sxs-lookup"><span data-stu-id="5dc37-186">table.core.windows.net, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445 (445 is only needed for ASEv1.)</span></span> |
| <span data-ttu-id="5dc37-187">Usługa Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="5dc37-187">Azure SQL Database</span></span> | <span data-ttu-id="5dc37-188">Podsieci ASE</span><span class="sxs-lookup"><span data-stu-id="5dc37-188">ASE subnet</span></span> | <span data-ttu-id="5dc37-189">Database.Windows.NET: 1433, 11000 11999, 14000 14999 (Aby uzyskać więcej informacji, zobacz [użycia portu bazy danych SQL V12](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).)</span><span class="sxs-lookup"><span data-stu-id="5dc37-189">database.windows.net: 1433, 11000-11999, 14000-14999 (For more information, see [SQL Database V12 port usage](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).)</span></span>|
| <span data-ttu-id="5dc37-190">Zarządzania platformy Azure</span><span class="sxs-lookup"><span data-stu-id="5dc37-190">Azure management</span></span> | <span data-ttu-id="5dc37-191">Podsieci ASE</span><span class="sxs-lookup"><span data-stu-id="5dc37-191">ASE subnet</span></span> | <span data-ttu-id="5dc37-192">Management.Core.Windows.NET, management.azure.com: 443</span><span class="sxs-lookup"><span data-stu-id="5dc37-192">management.core.windows.net, management.azure.com: 443</span></span> 
| <span data-ttu-id="5dc37-193">Weryfikacja certyfikatu SSL</span><span class="sxs-lookup"><span data-stu-id="5dc37-193">SSL certificate verification</span></span> |  <span data-ttu-id="5dc37-194">Podsieci ASE</span><span class="sxs-lookup"><span data-stu-id="5dc37-194">ASE subnet</span></span>            |  <span data-ttu-id="5dc37-195">OCSP.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span><span class="sxs-lookup"><span data-stu-id="5dc37-195">ocsp.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span></span>
| <span data-ttu-id="5dc37-196">Usługa Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="5dc37-196">Azure Active Directory</span></span>        | <span data-ttu-id="5dc37-197">Podsieci ASE</span><span class="sxs-lookup"><span data-stu-id="5dc37-197">ASE subnet</span></span>            |  <span data-ttu-id="5dc37-198">Internet: 443</span><span class="sxs-lookup"><span data-stu-id="5dc37-198">Internet: 443</span></span>
| <span data-ttu-id="5dc37-199">Zarządzanie usługami aplikacji</span><span class="sxs-lookup"><span data-stu-id="5dc37-199">App Service management</span></span>        | <span data-ttu-id="5dc37-200">Podsieci ASE</span><span class="sxs-lookup"><span data-stu-id="5dc37-200">ASE subnet</span></span>            |  <span data-ttu-id="5dc37-201">Internet: 443</span><span class="sxs-lookup"><span data-stu-id="5dc37-201">Internet: 443</span></span>
| <span data-ttu-id="5dc37-202">System DNS platformy Azure</span><span class="sxs-lookup"><span data-stu-id="5dc37-202">Azure DNS</span></span>                     | <span data-ttu-id="5dc37-203">Podsieci ASE</span><span class="sxs-lookup"><span data-stu-id="5dc37-203">ASE subnet</span></span>            |  <span data-ttu-id="5dc37-204">Internet: 53</span><span class="sxs-lookup"><span data-stu-id="5dc37-204">Internet: 53</span></span>
| <span data-ttu-id="5dc37-205">Wewnętrznej komunikacji ASE</span><span class="sxs-lookup"><span data-stu-id="5dc37-205">ASE internal communication</span></span>    | <span data-ttu-id="5dc37-206">Podsieci ASE: wszystkie porty</span><span class="sxs-lookup"><span data-stu-id="5dc37-206">ASE subnet: All ports</span></span> |  <span data-ttu-id="5dc37-207">Podsieci ASE: wszystkie porty</span><span class="sxs-lookup"><span data-stu-id="5dc37-207">ASE subnet: All ports</span></span>

<span data-ttu-id="5dc37-208">Jeśli hello ASE utracenia dostępu toothese zależności, przestanie działać.</span><span class="sxs-lookup"><span data-stu-id="5dc37-208">If hello ASE loses access toothese dependencies, it stops working.</span></span> <span data-ttu-id="5dc37-209">Jeśli tak się stanie długo za mało, ASE hello jest wstrzymana.</span><span class="sxs-lookup"><span data-stu-id="5dc37-209">When that happens long enough, hello ASE is suspended.</span></span>

### <a name="customer-dns"></a><span data-ttu-id="5dc37-210">Klient DNS</span><span class="sxs-lookup"><span data-stu-id="5dc37-210">Customer DNS</span></span> ###

<span data-ttu-id="5dc37-211">Jeśli hello sieć wirtualna jest skonfigurowana na serwerze DNS przez klienta, obciążeń dzierżawców hello go użyć.</span><span class="sxs-lookup"><span data-stu-id="5dc37-211">If hello VNet is configured with a customer-defined DNS server, hello tenant workloads use it.</span></span> <span data-ttu-id="5dc37-212">Witaj ASE nadal wymaga toocommunicate z usługi Azure DNS do celów zarządzania.</span><span class="sxs-lookup"><span data-stu-id="5dc37-212">hello ASE still needs toocommunicate with Azure DNS for management purposes.</span></span> 

<span data-ttu-id="5dc37-213">Jeśli hello sieć wirtualna jest skonfigurowana z klienta DNS na hello drugiej stronie sieci VPN, hello serwer DNS musi być dostępny z hello podsieci, która zawiera hello ASE.</span><span class="sxs-lookup"><span data-stu-id="5dc37-213">If hello VNet is configured with a customer DNS on hello other side of a VPN, hello DNS server must be reachable from hello subnet that contains hello ASE.</span></span>

<a name="portaldep"></a>

## <a name="portal-dependencies"></a><span data-ttu-id="5dc37-214">Zależności portalu</span><span class="sxs-lookup"><span data-stu-id="5dc37-214">Portal dependencies</span></span> ##

<span data-ttu-id="5dc37-215">W toohello ASE dodawania funkcjonalności zależności istnieje kilka dodatkowych elementów powiązanych toohello portalu obsługi.</span><span class="sxs-lookup"><span data-stu-id="5dc37-215">In addition toohello ASE functional dependencies, there are a few extra items related toohello portal experience.</span></span> <span data-ttu-id="5dc37-216">Niektóre możliwości hello w portalu Azure hello są zależne od site_ too_SCM bezpośredni dostęp.</span><span class="sxs-lookup"><span data-stu-id="5dc37-216">Some of hello capabilities in hello Azure portal depend on direct access too_SCM site_.</span></span> <span data-ttu-id="5dc37-217">Istnieją dwa adresy URL, dla każdej aplikacji w usłudze Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="5dc37-217">For every app in Azure App Service, there are two URLs.</span></span> <span data-ttu-id="5dc37-218">pierwszy adres URL Hello jest tooaccess aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5dc37-218">hello first URL is tooaccess your app.</span></span> <span data-ttu-id="5dc37-219">Witaj drugi adres URL jest tooaccess hello SCM lokacji, który jest również nazywany hello _konsoli Kudu_.</span><span class="sxs-lookup"><span data-stu-id="5dc37-219">hello second URL is tooaccess hello SCM site, which is also called hello _Kudu console_.</span></span> <span data-ttu-id="5dc37-220">Funkcje używające hello SCM lokacji:</span><span class="sxs-lookup"><span data-stu-id="5dc37-220">Features that use hello SCM site include:</span></span>

-   <span data-ttu-id="5dc37-221">Zadania sieci Web</span><span class="sxs-lookup"><span data-stu-id="5dc37-221">Web jobs</span></span>
-   <span data-ttu-id="5dc37-222">Funkcje</span><span class="sxs-lookup"><span data-stu-id="5dc37-222">Functions</span></span>
-   <span data-ttu-id="5dc37-223">Dziennik przesyłania strumieniowego</span><span class="sxs-lookup"><span data-stu-id="5dc37-223">Log streaming</span></span>
-   <span data-ttu-id="5dc37-224">Kudu</span><span class="sxs-lookup"><span data-stu-id="5dc37-224">Kudu</span></span>
-   <span data-ttu-id="5dc37-225">Rozszerzenia</span><span class="sxs-lookup"><span data-stu-id="5dc37-225">Extensions</span></span>
-   <span data-ttu-id="5dc37-226">Eksplorator procesów</span><span class="sxs-lookup"><span data-stu-id="5dc37-226">Process Explorer</span></span>
-   <span data-ttu-id="5dc37-227">Konsola</span><span class="sxs-lookup"><span data-stu-id="5dc37-227">Console</span></span>

<span data-ttu-id="5dc37-228">Użycie ASE ILB, hello SCM lokacji nie jest dostępny spoza sieci wirtualnej hello internet.</span><span class="sxs-lookup"><span data-stu-id="5dc37-228">When you use an ILB ASE, hello SCM site isn't internet accessible from outside hello VNet.</span></span> <span data-ttu-id="5dc37-229">Kiedy aplikacji znajduje się w elemencie ASE ILB, niektóre funkcje nie będą działać z hello portalu.</span><span class="sxs-lookup"><span data-stu-id="5dc37-229">When your app is hosted on an ILB ASE, some capabilities will not work from hello portal.</span></span>  

<span data-ttu-id="5dc37-230">Wiele z tych funkcji, które zależą od lokacji SCM hello są również dostępne bezpośrednio w konsoli Kudu hello.</span><span class="sxs-lookup"><span data-stu-id="5dc37-230">Many of those capabilities that depend upon hello SCM site are also available directly in hello Kudu console.</span></span> <span data-ttu-id="5dc37-231">Możesz połączyć tooit bezpośrednio, a nie za pomocą portalu hello.</span><span class="sxs-lookup"><span data-stu-id="5dc37-231">You can connect tooit directly rather than by using hello portal.</span></span> <span data-ttu-id="5dc37-232">Jeśli aplikacja jest obsługiwana w elemencie ASE ILB, użyj programu publikowania toosign poświadczeń w.</span><span class="sxs-lookup"><span data-stu-id="5dc37-232">If your app is hosted in an ILB ASE, use your publishing credentials toosign in.</span></span> <span data-ttu-id="5dc37-233">Hello lokacji SCM hello tooaccess adres URL aplikacji hostowanej w elemencie ASE ILB ma hello następującego formatu:</span><span class="sxs-lookup"><span data-stu-id="5dc37-233">hello URL tooaccess hello SCM site of an app hosted in an ILB ASE has hello following format:</span></span> 

```
<appname>.scm.<domain name hello ILB ASE was created with> 
```

<span data-ttu-id="5dc37-234">Jeśli Twoje ASE ILB jest nazwą domeny hello *contoso.net* i Twoja nazwa aplikacji jest *testapp*, aplikacja hello osiągnięciu na *testapp.contoso.net*.</span><span class="sxs-lookup"><span data-stu-id="5dc37-234">If your ILB ASE is hello domain name *contoso.net* and your app name is *testapp*, hello app is reached at *testapp.contoso.net*.</span></span> <span data-ttu-id="5dc37-235">Hello SCM lokacji, która łączy się z jego osiągnięciu na *testapp.scm.contoso.net*.</span><span class="sxs-lookup"><span data-stu-id="5dc37-235">hello SCM site that goes with it is reached at *testapp.scm.contoso.net*.</span></span>

### <a name="functions-and-web-jobs"></a><span data-ttu-id="5dc37-236">Funkcje i zadania sieci Web</span><span class="sxs-lookup"><span data-stu-id="5dc37-236">Functions and Web jobs</span></span> ###

<span data-ttu-id="5dc37-237">Zarówno funkcje, jak i sieci Web zadania są zależne od hello SCM lokacji, ale można używać w portalu hello, nawet jeśli aplikacje będą w elemencie ASE ILB tak długo, jak przeglądarka może nawiązać połączenie hello SCM lokacji.</span><span class="sxs-lookup"><span data-stu-id="5dc37-237">Both Functions and Web jobs depend on hello SCM site but are supported for use in hello portal, even if your apps are in an ILB ASE, so long as your browser can reach hello SCM site.</span></span>  <span data-ttu-id="5dc37-238">Jeśli używasz certyfikatu z podpisem własnym z Twojej ASE ILB, konieczne będzie tooenable Twojego tootrust przeglądarki, który certyfikat.</span><span class="sxs-lookup"><span data-stu-id="5dc37-238">If you are using a self-signed certificate with your ILB ASE, you will need tooenable your browser tootrust that certificate.</span></span>  <span data-ttu-id="5dc37-239">Dla programu Internet Explorer i krawędzi, który oznacza, że certyfikat hello ma toobe w relacji zaufania komputera hello przechowywania.</span><span class="sxs-lookup"><span data-stu-id="5dc37-239">For IE and Edge that means hello certificate has toobe in hello computer trust store.</span></span>  <span data-ttu-id="5dc37-240">Jeśli używasz programu Chrome, a następnie oznacza to, że wcześniej zaakceptowane hello certyfikatu w przeglądarce hello przez prawdopodobnie naciśnięcie hello scm lokacji bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="5dc37-240">If you are using Chrome then that means you accepted hello certificate in hello browser earlier by presumably hitting hello scm site directly.</span></span>  <span data-ttu-id="5dc37-241">Witaj najlepszym rozwiązaniem jest toouse komercyjnych certyfikat w łańcuchu przeglądarki hello zaufania.</span><span class="sxs-lookup"><span data-stu-id="5dc37-241">hello best solution is toouse a commercial certificate that is in hello browser chain of trust.</span></span>  

## <a name="ase-ip-addresses"></a><span data-ttu-id="5dc37-242">Adresy ASE IP</span><span class="sxs-lookup"><span data-stu-id="5dc37-242">ASE IP addresses</span></span> ##

<span data-ttu-id="5dc37-243">ASE ma kilka toobe adresy IP znane.</span><span class="sxs-lookup"><span data-stu-id="5dc37-243">An ASE has a few IP addresses toobe aware of.</span></span> <span data-ttu-id="5dc37-244">Są to:</span><span class="sxs-lookup"><span data-stu-id="5dc37-244">They are:</span></span>

- <span data-ttu-id="5dc37-245">**Publiczny adres IP dla ruchu przychodzącego**: używany do ruchu aplikacji w elemencie ASE zewnętrznych i ruch związany z zarządzaniem w elemencie ASE zewnętrznych i ASE ILB.</span><span class="sxs-lookup"><span data-stu-id="5dc37-245">**Public inbound IP address**: Used for app traffic in an External ASE, and management traffic in both an External ASE and an ILB ASE.</span></span>
- <span data-ttu-id="5dc37-246">**Wychodzące publicznego adresu IP**: używany jako hello "od" IP dla połączenia wychodzące z hello ASE tego hello pozostaw sieci wirtualnej, które nie są przesyłane w dół sieci VPN.</span><span class="sxs-lookup"><span data-stu-id="5dc37-246">**Outbound public IP**: Used as hello "from" IP for outbound connections from hello ASE that leave hello VNet, which aren't routed down a VPN.</span></span>
- <span data-ttu-id="5dc37-247">**Adres ILB IP**: Jeśli używasz ASE ILB.</span><span class="sxs-lookup"><span data-stu-id="5dc37-247">**ILB IP address**: If you use an ILB ASE.</span></span>
- <span data-ttu-id="5dc37-248">**Adresy przypisane aplikacji opartych na protokole SSL**: tylko to możliwe z zewnętrznego ASE i opartych na protokole SSL jest skonfigurowany.</span><span class="sxs-lookup"><span data-stu-id="5dc37-248">**App-assigned IP-based SSL addresses**: Only possible with an External ASE and when IP-based SSL is configured.</span></span>

<span data-ttu-id="5dc37-249">Te adresy IP są łatwo widoczna w ASEv2 w portalu Azure hello z hello ASE interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="5dc37-249">All these IP addresses are easily visible in an ASEv2 in hello Azure portal from hello ASE UI.</span></span> <span data-ttu-id="5dc37-250">Jeśli masz ASE ILB hello IP dla hello ILB, znajduje się.</span><span class="sxs-lookup"><span data-stu-id="5dc37-250">If you have an ILB ASE, hello IP for hello ILB is listed.</span></span>

![Adresy IP][3]

### <a name="app-assigned-ip-addresses"></a><span data-ttu-id="5dc37-252">Adresy IP przypisane aplikacji</span><span class="sxs-lookup"><span data-stu-id="5dc37-252">App-assigned IP addresses</span></span> ###

<span data-ttu-id="5dc37-253">Za pomocą zewnętrznego ASE można przypisać adresów IP tooindividual aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5dc37-253">With an External ASE, you can assign IP addresses tooindividual apps.</span></span> <span data-ttu-id="5dc37-254">Nie możesz tego zrobić z ASE ILB.</span><span class="sxs-lookup"><span data-stu-id="5dc37-254">You can't do that with an ILB ASE.</span></span> <span data-ttu-id="5dc37-255">Aby uzyskać więcej informacji na temat tooconfigure toohave Twojej aplikacji własnego adresu IP, zobacz [Powiąż istniejący niestandardowy SSL certyfikatu tooAzure aplikacje sieci web](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span><span class="sxs-lookup"><span data-stu-id="5dc37-255">For more information on how tooconfigure your app toohave its own IP address, see [Bind an existing custom SSL certificate tooAzure web apps](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span></span>

<span data-ttu-id="5dc37-256">Gdy aplikacja ma własny adres opartych na protokole SSL, hello ASE rezerwuje dwa porty toomap toothat adresu IP.</span><span class="sxs-lookup"><span data-stu-id="5dc37-256">When an app has its own IP-based SSL address, hello ASE reserves two ports toomap toothat IP address.</span></span> <span data-ttu-id="5dc37-257">Jeden port dla ruchu HTTP, i hello innych port jest dla protokołu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="5dc37-257">One port is for HTTP traffic, and hello other port is for HTTPS.</span></span> <span data-ttu-id="5dc37-258">Te porty są wyświetlane w hello ASE interfejsu użytkownika, w sekcji adresy IP hello.</span><span class="sxs-lookup"><span data-stu-id="5dc37-258">Those ports are listed in hello ASE UI in hello IP addresses section.</span></span> <span data-ttu-id="5dc37-259">Ruch musi być możliwe tooreach tych portów z aplikacji hello lub hello VIP są niedostępne.</span><span class="sxs-lookup"><span data-stu-id="5dc37-259">Traffic must be able tooreach those ports from hello VIP or hello apps are inaccessible.</span></span> <span data-ttu-id="5dc37-260">To wymaganie dotyczy tooremember ważne podczas konfigurowania grup zabezpieczeń sieci (NSG).</span><span class="sxs-lookup"><span data-stu-id="5dc37-260">This requirement is important tooremember when you configure Network Security Groups (NSGs).</span></span>

## <a name="network-security-groups"></a><span data-ttu-id="5dc37-261">Grupy zabezpieczeń sieci</span><span class="sxs-lookup"><span data-stu-id="5dc37-261">Network Security Groups</span></span> ##

<span data-ttu-id="5dc37-262">[Sieciowe grupy zabezpieczeń] [ NSGs] zapewnić hello możliwości toocontrol dostęp w sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="5dc37-262">[Network Security Groups][NSGs] provide hello ability toocontrol network access within a VNet.</span></span> <span data-ttu-id="5dc37-263">Korzystając z portalu hello, istnieje niejawna odmowa reguły na powitania najniższy priorytet toodeny wszystko.</span><span class="sxs-lookup"><span data-stu-id="5dc37-263">When you use hello portal, there's an implicit deny rule at hello lowest priority toodeny everything.</span></span> <span data-ttu-id="5dc37-264">Możesz utworzyć są z reguły zezwalania.</span><span class="sxs-lookup"><span data-stu-id="5dc37-264">What you build are your allow rules.</span></span>

<span data-ttu-id="5dc37-265">W elemencie ASE nie ma systemu dostępu toohello maszyn wirtualnych użyć toohost hello ASE samej siebie.</span><span class="sxs-lookup"><span data-stu-id="5dc37-265">In an ASE, you don't have access toohello VMs used toohost hello ASE itself.</span></span> <span data-ttu-id="5dc37-266">Są one w ramach subskrypcji zarządzany przez firmę Microsoft.</span><span class="sxs-lookup"><span data-stu-id="5dc37-266">They're in a Microsoft-managed subscription.</span></span> <span data-ttu-id="5dc37-267">Jeśli chcesz, aby toorestrict dostępu toohello aplikacje na powitania ASE, należy ustawić grup NSG podsieci ASE hello.</span><span class="sxs-lookup"><span data-stu-id="5dc37-267">If you want toorestrict access toohello apps on hello ASE, set NSGs on hello ASE subnet.</span></span> <span data-ttu-id="5dc37-268">W ten sposób należy zwrócić uwagę dokładne toohello ASE zależności.</span><span class="sxs-lookup"><span data-stu-id="5dc37-268">In doing so, pay careful attention toohello ASE dependencies.</span></span> <span data-ttu-id="5dc37-269">Jeśli zablokujesz wszelkie zależności hello ASE przestaje działać.</span><span class="sxs-lookup"><span data-stu-id="5dc37-269">If you block any dependencies, hello ASE stops working.</span></span>

<span data-ttu-id="5dc37-270">Grupy NSG można skonfigurować za pomocą hello portalu Azure lub za pomocą programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5dc37-270">NSGs can be configured through hello Azure portal or via PowerShell.</span></span> <span data-ttu-id="5dc37-271">tutaj informacje Hello pokazuje hello portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="5dc37-271">hello information here shows hello Azure portal.</span></span> <span data-ttu-id="5dc37-272">Utwórz i Zarządzaj grup NSG w portalu hello jako zasób najwyższego poziomu w obszarze **sieci**.</span><span class="sxs-lookup"><span data-stu-id="5dc37-272">You create and manage NSGs in hello portal as a top-level resource under **Networking**.</span></span>

<span data-ttu-id="5dc37-273">Gdy hello wymagania dla ruchu przychodzącego i wychodzącego są brane pod uwagę, hello grup NSG powinien wyglądać podobnie toohello grup NSG w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="5dc37-273">When hello inbound and outbound requirements are taken into account, hello NSGs should look similar toohello NSGs shown in this example.</span></span> <span data-ttu-id="5dc37-274">Witaj zakres adresów sieci wirtualnej jest _192.168.250.0/16_, i jest hello podsieci, która jest hello ASE _192.168.251.128/25_.</span><span class="sxs-lookup"><span data-stu-id="5dc37-274">hello VNet address range is _192.168.250.0/16_, and hello subnet that hello ASE is in is _192.168.251.128/25_.</span></span>

<span data-ttu-id="5dc37-275">Hello dwóch pierwszych przychodzących wymagania dotyczące hello ASE toofunction są wyświetlane u góry hello lista hello w tym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="5dc37-275">hello first two inbound requirements for hello ASE toofunction are shown at hello top of hello list in this example.</span></span> <span data-ttu-id="5dc37-276">Włącz zarządzanie ASE, a Zezwalaj toocommunicate ASE hello z samym sobą.</span><span class="sxs-lookup"><span data-stu-id="5dc37-276">They enable ASE management and allow hello ASE toocommunicate with itself.</span></span> <span data-ttu-id="5dc37-277">Hello inne pozycje są wszystkie konfigurowalne dzierżawy i można kontrolować aplikacje hostowanej ASE toohello dostępu do sieci.</span><span class="sxs-lookup"><span data-stu-id="5dc37-277">hello other entries are all tenant configurable and can govern network access toohello ASE-hosted applications.</span></span> 

![Reguły zabezpieczeń ruchu przychodzącego][4]

<span data-ttu-id="5dc37-279">Domyślna reguła umożliwia hello adresów IP w hello sieci wirtualnej tootalk toohello ASE podsieci.</span><span class="sxs-lookup"><span data-stu-id="5dc37-279">A default rule enables hello IPs in hello VNet tootalk toohello ASE subnet.</span></span> <span data-ttu-id="5dc37-280">Inna reguła domyślna umożliwia hello równoważenia obciążenia, nazywane również hello publicznego adresu VIP, toocommunicate z hello ASE.</span><span class="sxs-lookup"><span data-stu-id="5dc37-280">Another default rule enables hello load balancer, also known as hello public VIP, toocommunicate with hello ASE.</span></span> <span data-ttu-id="5dc37-281">reguły domyślne hello toosee, wybierz **domyślne zasady** dalej toohello **Dodaj** ikony.</span><span class="sxs-lookup"><span data-stu-id="5dc37-281">toosee hello default rules, select **Default rules** next toohello **Add** icon.</span></span> <span data-ttu-id="5dc37-282">Umieszczenie Odmów, wszystkie inne reguły po hello NSG zasady pokazano, uniemożliwia ruch między hello VIP i hello ASE.</span><span class="sxs-lookup"><span data-stu-id="5dc37-282">If you put a deny everything else rule after hello NSG rules shown, you prevent traffic between hello VIP and hello ASE.</span></span> <span data-ttu-id="5dc37-283">tooprevent ruchu przychodzącego z wewnątrz hello sieci wirtualnej, dodać własną tooallow reguły ruchu przychodzącego.</span><span class="sxs-lookup"><span data-stu-id="5dc37-283">tooprevent traffic coming from inside hello VNet, add your own rule tooallow inbound.</span></span> <span data-ttu-id="5dc37-284">Użyj tooAzureLoadBalancer równy źródła z docelowym **żadnych** i zakres portów  **\*** .</span><span class="sxs-lookup"><span data-stu-id="5dc37-284">Use a source equal tooAzureLoadBalancer with a destination of **Any** and a port range of **\***.</span></span> <span data-ttu-id="5dc37-285">Ponieważ reguły NSG hello jest stosowane toohello ASE podsieci, nie potrzebujesz toobe określonych w lokalizacji docelowej hello.</span><span class="sxs-lookup"><span data-stu-id="5dc37-285">Because hello NSG rule is applied toohello ASE subnet, you don't need toobe specific in hello destination.</span></span>

<span data-ttu-id="5dc37-286">Po przypisaniu aplikacji tooyour adres IP, upewnij się, że zachowasz hello otwartych portów.</span><span class="sxs-lookup"><span data-stu-id="5dc37-286">If you assigned an IP address tooyour app, make sure you keep hello ports open.</span></span> <span data-ttu-id="5dc37-287">Wybierz toosee hello portów, **środowiska usługi aplikacji** > **adresów IP**.</span><span class="sxs-lookup"><span data-stu-id="5dc37-287">toosee hello ports, select **App Service Environment** > **IP addresses**.</span></span>  

<span data-ttu-id="5dc37-288">Wszystkie elementy hello pokazano hello następujące reguły wychodzące są potrzebne, z wyjątkiem ostatniego elementu hello.</span><span class="sxs-lookup"><span data-stu-id="5dc37-288">All hello items shown in hello following outbound rules are needed, except for hello last item.</span></span> <span data-ttu-id="5dc37-289">Umożliwiają one zależności ASE toohello dostępu do sieci, które zostały wymienione w tym artykule.</span><span class="sxs-lookup"><span data-stu-id="5dc37-289">They enable network access toohello ASE dependencies that were noted earlier in this article.</span></span> <span data-ttu-id="5dc37-290">Jeśli zablokujesz ich z ASE przestanie działać.</span><span class="sxs-lookup"><span data-stu-id="5dc37-290">If you block any of them, your ASE stops working.</span></span> <span data-ttu-id="5dc37-291">Witaj ostatniego elementu na liście hello umożliwia toocommunicate Twojego ASE z innymi zasobami w sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="5dc37-291">hello last item in hello list enables your ASE toocommunicate with other resources in your VNet.</span></span>

![Zasady zabezpieczeń dla ruchu wychodzącego][5]

<span data-ttu-id="5dc37-293">Po zdefiniowaniu grup NSG, przypisz toohello podsieci, która jest Twoje ASE na.</span><span class="sxs-lookup"><span data-stu-id="5dc37-293">After your NSGs are defined, assign them toohello subnet that your ASE is on.</span></span> <span data-ttu-id="5dc37-294">Jeśli nie pamiętasz hello ASE sieci wirtualnej lub podsieci, można to sprawdzić w portalu zarządzania ASE hello.</span><span class="sxs-lookup"><span data-stu-id="5dc37-294">If you don’t remember hello ASE VNet or subnet, you can see it from hello ASE management portal.</span></span> <span data-ttu-id="5dc37-295">tooassign hello podsieci tooyour NSG, przejdź toohello podsieci interfejsu użytkownika i wybierz hello NSG.</span><span class="sxs-lookup"><span data-stu-id="5dc37-295">tooassign hello NSG tooyour subnet, go toohello subnet UI and select hello NSG.</span></span>

## <a name="routes"></a><span data-ttu-id="5dc37-296">Trasy</span><span class="sxs-lookup"><span data-stu-id="5dc37-296">Routes</span></span> ##

<span data-ttu-id="5dc37-297">Trasy stanie najczęściej powodować problemy podczas konfigurowania sieci wirtualnej z platformy Azure ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="5dc37-297">Routes become problematic most commonly when you configure your VNet with Azure ExpressRoute.</span></span> <span data-ttu-id="5dc37-298">Istnieją trzy typy tras w sieci wirtualnej:</span><span class="sxs-lookup"><span data-stu-id="5dc37-298">There are three types of routes in a VNet:</span></span>

-   <span data-ttu-id="5dc37-299">Trasy systemowe</span><span class="sxs-lookup"><span data-stu-id="5dc37-299">System routes</span></span>
-   <span data-ttu-id="5dc37-300">Trasy protokołu BGP</span><span class="sxs-lookup"><span data-stu-id="5dc37-300">BGP routes</span></span>
-   <span data-ttu-id="5dc37-301">Trasy zdefiniowane przez użytkownika (Udr)</span><span class="sxs-lookup"><span data-stu-id="5dc37-301">User-defined routes (UDRs)</span></span>

<span data-ttu-id="5dc37-302">Trasy protokołu BGP musi zostać zastąpiona tras systemowych.</span><span class="sxs-lookup"><span data-stu-id="5dc37-302">BGP routes override system routes.</span></span> <span data-ttu-id="5dc37-303">Udr zastąpić trasy protokołu BGP.</span><span class="sxs-lookup"><span data-stu-id="5dc37-303">UDRs override BGP routes.</span></span> <span data-ttu-id="5dc37-304">Aby uzyskać więcej informacji dotyczących tras w sieci wirtualnych platformy Azure, zobacz [trasy zdefiniowane przez użytkownika — omówienie][UDRs].</span><span class="sxs-lookup"><span data-stu-id="5dc37-304">For more information about routes in Azure virtual networks, see [User-defined routes overview][UDRs].</span></span>

<span data-ttu-id="5dc37-305">Baza danych Azure SQL Hello hello ASE używany toomanage hello system ma zapory.</span><span class="sxs-lookup"><span data-stu-id="5dc37-305">hello Azure SQL database that hello ASE uses toomanage hello system has a firewall.</span></span> <span data-ttu-id="5dc37-306">Wymaga to toooriginate komunikacji z hello ASE publicznego adresu VIP.</span><span class="sxs-lookup"><span data-stu-id="5dc37-306">It requires communication toooriginate from hello ASE public VIP.</span></span> <span data-ttu-id="5dc37-307">Baza danych SQL toohello połączeń z hello ASE będą odrzucane, jeśli są one wysyłane w dół hello połączenia ExpressRoute i innego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="5dc37-307">Connections toohello SQL database from hello ASE will be denied if they are sent down hello ExpressRoute connection and out another IP address.</span></span>

<span data-ttu-id="5dc37-308">Jeśli żądań zarządzania tooincoming odpowiedzi są wysyłane w dół hello ExpressRoute, adres zwrotny hello jest inny niż hello początkowego miejsca docelowego.</span><span class="sxs-lookup"><span data-stu-id="5dc37-308">If replies tooincoming management requests are sent down hello ExpressRoute, hello reply address is different than hello original destination.</span></span> <span data-ttu-id="5dc37-309">Ta niezgodność dzieli hello TCP komunikacji.</span><span class="sxs-lookup"><span data-stu-id="5dc37-309">This mismatch breaks hello TCP communication.</span></span>

<span data-ttu-id="5dc37-310">Dla Twojego toowork ASE sieci wirtualnej jest konfigurowana ExpressRoute najprostszym toodo operacją hello jest:</span><span class="sxs-lookup"><span data-stu-id="5dc37-310">For your ASE toowork while your VNet is configured with an ExpressRoute, hello easiest thing toodo is:</span></span>

-   <span data-ttu-id="5dc37-311">Konfigurowanie usługi ExpressRoute tooadvertise _0.0.0.0/0_.</span><span class="sxs-lookup"><span data-stu-id="5dc37-311">Configure ExpressRoute tooadvertise _0.0.0.0/0_.</span></span> <span data-ttu-id="5dc37-312">Domyślnie go wymusić tuneli wszystkie wychodzący ruch lokalnymi.</span><span class="sxs-lookup"><span data-stu-id="5dc37-312">By default, it force tunnels all outbound traffic on-premises.</span></span>
-   <span data-ttu-id="5dc37-313">Utwórz przez.</span><span class="sxs-lookup"><span data-stu-id="5dc37-313">Create a UDR.</span></span> <span data-ttu-id="5dc37-314">Zastosować toohello podsieci, która zawiera ASE hello z prefiksem adresu o _0.0.0.0/0_ i następnego przeskoku typu _Internet_.</span><span class="sxs-lookup"><span data-stu-id="5dc37-314">Apply it toohello subnet that contains hello ASE with an address prefix of _0.0.0.0/0_ and a next hop type of _Internet_.</span></span>

<span data-ttu-id="5dc37-315">Jeśli te dwie zmiany, ruch kierowany przez internet pochodzący z hello ASE podsieci nie jest wymuszone hello ExpressRoute i hello ASE działa.</span><span class="sxs-lookup"><span data-stu-id="5dc37-315">If you make these two changes, internet-destined traffic that originates from hello ASE subnet isn't forced down hello ExpressRoute and hello ASE works.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="5dc37-316">Hello tras określonych w przez musi być wystarczająco konkretny tootake pierwszeństwo za pośrednictwem żadnych trasy anonsowane przez hello konfiguracji usługi ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="5dc37-316">hello routes defined in a UDR must be specific enough tootake precedence over any routes advertised by hello ExpressRoute configuration.</span></span> <span data-ttu-id="5dc37-317">Witaj poprzedniego przykładu używa hello szerokie 0.0.0.0/0 adres zakresu.</span><span class="sxs-lookup"><span data-stu-id="5dc37-317">hello preceding example uses hello broad 0.0.0.0/0 address range.</span></span> <span data-ttu-id="5dc37-318">Go może potencjalnie być przypadkowo zastąpione anonsów tras, korzystających z bardziej szczegółowych zakresów adresów.</span><span class="sxs-lookup"><span data-stu-id="5dc37-318">It can potentially be accidentally overridden by route advertisements that use more specific address ranges.</span></span>
>
> <span data-ttu-id="5dc37-319">ASEs nie są obsługiwane w przypadku konfiguracji usługi ExpressRoute, które między anonsować tras z hello publicznej komunikacji równorzędnej ścieżki toohello prywatnej komunikacji równorzędnej ścieżki.</span><span class="sxs-lookup"><span data-stu-id="5dc37-319">ASEs aren't supported with ExpressRoute configurations that cross-advertise routes from hello public-peering path toohello private-peering path.</span></span> <span data-ttu-id="5dc37-320">Konfiguracji usługi ExpressRoute z publicznej komunikacji równorzędnej skonfigurowane otrzymywać anonsów tras od firmy Microsoft.</span><span class="sxs-lookup"><span data-stu-id="5dc37-320">ExpressRoute configurations with public peering configured receive route advertisements from Microsoft.</span></span> <span data-ttu-id="5dc37-321">anonse Hello zawiera duży zbiór zakresów adresów IP firmy Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="5dc37-321">hello advertisements contain a large set of Microsoft Azure IP address ranges.</span></span> <span data-ttu-id="5dc37-322">Jeśli między anonsowane w ścieżce prywatnej komunikacji równorzędnej hello hello zakresów adresów, wszystkie pakiety wychodzącego z podsieci hello ASE na są infrastruktury sieci lokalnej klienta tunelowane tooa force.</span><span class="sxs-lookup"><span data-stu-id="5dc37-322">If hello address ranges are cross-advertised on hello private-peering path, all outbound network packets from hello ASE's subnet are force tunneled tooa customer's on-premises network infrastructure.</span></span> <span data-ttu-id="5dc37-323">Ten przepływ sieci nie jest obecnie obsługiwane z ASEs.</span><span class="sxs-lookup"><span data-stu-id="5dc37-323">This network flow is currently not supported with ASEs.</span></span> <span data-ttu-id="5dc37-324">Rozwiązanie toothis problemem jest toostop tras między reklamy hello publicznej komunikacji równorzędnej ścieżka toohello prywatnej komunikacji równorzędnej ścieżka.</span><span class="sxs-lookup"><span data-stu-id="5dc37-324">One solution toothis problem is toostop cross-advertising routes from hello public-peering path toohello private-peering path.</span></span>

<span data-ttu-id="5dc37-325">toocreate przez, wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="5dc37-325">toocreate a UDR, follow these steps:</span></span>

1. <span data-ttu-id="5dc37-326">Przejdź toohello portalu Azure.</span><span class="sxs-lookup"><span data-stu-id="5dc37-326">Go toohello Azure portal.</span></span> <span data-ttu-id="5dc37-327">Wybierz **sieci** > **tabel tras**.</span><span class="sxs-lookup"><span data-stu-id="5dc37-327">Select **Networking** > **Route Tables**.</span></span>

2. <span data-ttu-id="5dc37-328">Utwórz nową tabelę tras hello — w tym samym regionie co sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="5dc37-328">Create a new route table in hello same region as your VNet.</span></span>

3. <span data-ttu-id="5dc37-329">W tabeli routingu interfejsu użytkownika, zaznacz **tras** > **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="5dc37-329">From within your route table UI, select **Routes** > **Add**.</span></span>

4. <span data-ttu-id="5dc37-330">Zestaw hello **następnego przeskoku typu** za**Internet** i hello **prefiks adresu** za**0.0.0.0/0**.</span><span class="sxs-lookup"><span data-stu-id="5dc37-330">Set hello **Next hop type** too**Internet** and hello **Address prefix** too**0.0.0.0/0**.</span></span> <span data-ttu-id="5dc37-331">Wybierz pozycję **Zapisz**.</span><span class="sxs-lookup"><span data-stu-id="5dc37-331">Select **Save**.</span></span>

    <span data-ttu-id="5dc37-332">Zostanie wyświetlony ekran podobny do następujących hello:</span><span class="sxs-lookup"><span data-stu-id="5dc37-332">You then see something like hello following:</span></span>

    ![Trasy funkcjonalności][6]

5. <span data-ttu-id="5dc37-334">Po utworzeniu nowej tabeli tras hello Przejdź toohello podsieci, która zawiera ASE użytkownika.</span><span class="sxs-lookup"><span data-stu-id="5dc37-334">After you create hello new route table, go toohello subnet that contains your ASE.</span></span> <span data-ttu-id="5dc37-335">Wybierz z tabeli tras z listy hello w portalu hello.</span><span class="sxs-lookup"><span data-stu-id="5dc37-335">Select your route table from hello list in hello portal.</span></span> <span data-ttu-id="5dc37-336">Po zapisaniu zmian hello należy następnie zobacz grupy NSG hello i oznaczane przy użyciu podsieci trasy.</span><span class="sxs-lookup"><span data-stu-id="5dc37-336">After you save hello change, you should then see hello NSGs and routes noted with your subnet.</span></span>

    ![Tras i grupy NSG][7]

### <a name="deploy-into-existing-azure-virtual-networks-that-are-integrated-with-expressroute"></a><span data-ttu-id="5dc37-338">Wdróż do istniejącej sieci wirtualnych platformy Azure zintegrowanych z usługi ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="5dc37-338">Deploy into existing Azure virtual networks that are integrated with ExpressRoute</span></span> ###

<span data-ttu-id="5dc37-339">toodeploy Twojego ASE w sieci wirtualnej, który jest zintegrowany z usługi ExpressRoute, należy wstępnie skonfigurować podsieci hello miejscu ASE hello wdrożone.</span><span class="sxs-lookup"><span data-stu-id="5dc37-339">toodeploy your ASE into a VNet that's integrated with ExpressRoute, preconfigure hello subnet where you want hello ASE deployed.</span></span> <span data-ttu-id="5dc37-340">Następnie użyj toodeploy szablonu usługi Resource Manager go.</span><span class="sxs-lookup"><span data-stu-id="5dc37-340">Then use a Resource Manager template toodeploy it.</span></span> <span data-ttu-id="5dc37-341">toocreate ASE w sieci wirtualnej ma już ExpressRoute skonfigurowane:</span><span class="sxs-lookup"><span data-stu-id="5dc37-341">toocreate an ASE in a VNet that already has ExpressRoute configured:</span></span>

- <span data-ttu-id="5dc37-342">Utwórz podsieć toohost hello ASE.</span><span class="sxs-lookup"><span data-stu-id="5dc37-342">Create a subnet toohost hello ASE.</span></span>

    > [!NOTE]
    > <span data-ttu-id="5dc37-343">Nic znajdować się w podsieci hello, ale hello ASE.</span><span class="sxs-lookup"><span data-stu-id="5dc37-343">Nothing else can be in hello subnet but hello ASE.</span></span> <span data-ttu-id="5dc37-344">Można toochoose się na przestrzeń adresową, która umożliwia rozwój w przyszłości.</span><span class="sxs-lookup"><span data-stu-id="5dc37-344">Be sure toochoose an address space that allows for future growth.</span></span> <span data-ttu-id="5dc37-345">Nie można zmienić tego ustawienia później.</span><span class="sxs-lookup"><span data-stu-id="5dc37-345">You can't change this setting later.</span></span> <span data-ttu-id="5dc37-346">Firma Microsoft zaleca rozmiar `/25` z adresami 128.</span><span class="sxs-lookup"><span data-stu-id="5dc37-346">We recommend a size of `/25` with 128 addresses.</span></span>

- <span data-ttu-id="5dc37-347">Tworzenie Udr (na przykład, tabele tras), jak opisano wcześniej i ustawić go na powitania podsieci.</span><span class="sxs-lookup"><span data-stu-id="5dc37-347">Create UDRs (for example, route tables) as described earlier, and set that on hello subnet.</span></span>
- <span data-ttu-id="5dc37-348">Tworzenie hello ASE przy użyciu szablonu usługi Resource Manager, zgodnie z opisem w [utworzyć ASE przy użyciu szablonu usługi Resource Manager][MakeASEfromTemplate].</span><span class="sxs-lookup"><span data-stu-id="5dc37-348">Create hello ASE by using a Resource Manager template as described in [Create an ASE by using a Resource Manager template][MakeASEfromTemplate].</span></span>

<!--Image references-->
[1]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow.png
[2]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow2.png
[3]: ./media/network_considerations_with_an_app_service_environment/networkase-ipaddresses.png
[4]: ./media/network_considerations_with_an_app_service_environment/networkase-inboundnsg.png
[5]: ./media/network_considerations_with_an_app_service_environment/networkase-outboundnsg.png
[6]: ./media/network_considerations_with_an_app_service_environment/networkase-udr.png
[7]: ./media/network_considerations_with_an_app_service_environment/networkase-subnet.png

<!--Links-->
[Intro]: ./intro.md
[MakeExternalASE]: ./create-external-ase.md
[MakeASEfromTemplate]: ./create-from-template.md
[MakeILBASE]: ./create-ilb-ase.md
[ASENetwork]: ./network-info.md
[ASEReadme]: ./readme.md
[UsingASE]: ./using-an-ase.md
[UDRs]: ../../virtual-network/virtual-networks-udr-overview.md
[NSGs]: ../../virtual-network/virtual-networks-nsg.md
[ConfigureASEv1]: ../../app-service-web/app-service-web-configure-an-app-service-environment.md
[ASEv1Intro]: ../../app-service-web/app-service-app-service-environment-intro.md
[webapps]: ../../app-service-web/app-service-web-overview.md
[mobileapps]: ../../app-service-mobile/app-service-mobile-value-prop.md
[APIapps]: ../../app-service-api/app-service-api-apps-why-best-platform.md
[Functions]: ../../azure-functions/index.yml
[Pricing]: http://azure.microsoft.com/pricing/details/app-service/
[ARMOverview]: ../../azure-resource-manager/resource-group-overview.md
[ConfigureSSL]: ../../app-service-web/web-sites-purchase-ssl-web-site.md
[Kudu]: http://azure.microsoft.com/resources/videos/super-secret-kudu-debug-console-for-azure-web-sites/
[AppDeploy]: ../../app-service-web/web-sites-deploy.md
[ASEWAF]: ../../app-service-web/app-service-app-service-environment-web-application-firewall.md
[AppGW]: ../../application-gateway/application-gateway-web-application-firewall-overview.md
[ASEManagement]: ./management-addresses.md
