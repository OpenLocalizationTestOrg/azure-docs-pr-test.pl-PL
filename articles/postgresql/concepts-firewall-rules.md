---
title: "Bazy danych platformy Azure dla reguł zapory serwera PostgreSQL | Dokumentacja firmy Microsoft"
description: "Opisuje reguły zapory bazy danych Azure, aby serwer PostgreSQL."
services: postgresql
author: jasonwhowell
ms.author: jasonh
manager: jhubbard
editor: jasonwhowell
ms.service: postgresql
ms.topic: article
ms.date: 05/10/2017
ms.openlocfilehash: 1d46a4434c483c3612a9a7b4cdef718d6dc3e765
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2017
---
# <a name="azure-database-for-postgresql-server-firewall-rules"></a><span data-ttu-id="a78bb-103">Bazy danych platformy Azure dla reguł zapory serwera PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="a78bb-103">Azure Database for PostgreSQL Server firewall rules</span></span>
<span data-ttu-id="a78bb-104">Zapory uniemożliwiają wszystkich serwera bazy danych tooyour dostępu do chwili określenia komputery, które ma uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="a78bb-104">Firewalls prevent all access tooyour database server until you specify which computers have permission.</span></span> <span data-ttu-id="a78bb-105">Zapora Hello przyznaje serwera toohello dostępu oparte na powitania pochodzące z adresu IP dla każdego żądania.</span><span class="sxs-lookup"><span data-stu-id="a78bb-105">hello firewall grants access toohello server based on hello originating IP address of each request.</span></span>
<span data-ttu-id="a78bb-106">tooconfigure zapory, tworzenie reguł zapory, które określ zakresy adresów IP dopuszczalne.</span><span class="sxs-lookup"><span data-stu-id="a78bb-106">tooconfigure your firewall, you create firewall rules that specify ranges of acceptable IP addresses.</span></span> <span data-ttu-id="a78bb-107">Można tworzyć reguły zapory na poziomie serwera hello.</span><span class="sxs-lookup"><span data-stu-id="a78bb-107">You can create firewall rules at hello server level.</span></span>

<span data-ttu-id="a78bb-108">**Reguły zapory:** te reguły włączyć tooaccess klientów całej bazy danych Azure PostgreSQL serwera, oznacza to, że wszystkie hello bazy danych w ramach hello tym samym serwerze logicznym.</span><span class="sxs-lookup"><span data-stu-id="a78bb-108">**Firewall rules:** These rules enable clients tooaccess your entire Azure Database for PostgreSQL Server, that is, all hello databases within hello same logical server.</span></span> <span data-ttu-id="a78bb-109">Reguły zapory poziomu serwera można skonfigurować za pomocą portalu Azure hello lub przy użyciu poleceń wiersza polecenia platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="a78bb-109">Server-level firewall rules can be configured by using hello Azure portal or using Azure CLI commands.</span></span> <span data-ttu-id="a78bb-110">reguły zapory poziomu serwera toocreate, musi być hello subskrypcji właścicielem lub współautorem subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="a78bb-110">toocreate server-level firewall rules, you must be hello subscription owner or a subscription contributor.</span></span>

## <a name="firewall-overview"></a><span data-ttu-id="a78bb-111">Omówienie zapory</span><span class="sxs-lookup"><span data-stu-id="a78bb-111">Firewall overview</span></span>
<span data-ttu-id="a78bb-112">Wszystkie bazy danych tooyour dostępu do bazy danych Azure PostgreSQL serwera jest blokowany przez zaporę hello domyślnie.</span><span class="sxs-lookup"><span data-stu-id="a78bb-112">All database access tooyour Azure Database for PostgreSQL server is blocked by hello firewall by default.</span></span> <span data-ttu-id="a78bb-113">toobegin korzysta z serwera z innego komputera należy toospecify jedną lub więcej poziomu serwera zapory reguły tooenable dostępu tooyour serwera.</span><span class="sxs-lookup"><span data-stu-id="a78bb-113">toobegin using your server from another computer, you need toospecify one or more server-level firewall rules tooenable access tooyour server.</span></span> <span data-ttu-id="a78bb-114">Użyj toospecify reguły zapory hello zakresów adresów IP, które z hello Internet tooallow.</span><span class="sxs-lookup"><span data-stu-id="a78bb-114">Use hello firewall rules toospecify which IP address ranges from hello Internet tooallow.</span></span> <span data-ttu-id="a78bb-115">Toohello Access Azure witryny sieci Web portalu sam nie ma wpływu na powitania reguł zapory.</span><span class="sxs-lookup"><span data-stu-id="a78bb-115">Access toohello Azure portal website itself is not impacted by hello firewall rules.</span></span>
<span data-ttu-id="a78bb-116">Próby nawiązania połączenia z hello Internet i Azure musi najpierw przejść przez zaporę Windows hello przed może nawiązać połączenie z bazą danych PostgreSQL, pokazane na powitania po diagramu:</span><span class="sxs-lookup"><span data-stu-id="a78bb-116">Connection attempts from hello Internet and Azure must first pass through hello firewall before they can reach your PostgreSQL Database, as shown in hello following diagram:</span></span>

![Przykładowy przepływ działania hello zapory](media/concepts-firewall-rules/1-firewall-concept.png)

## <a name="connecting-from-hello-internet"></a><span data-ttu-id="a78bb-118">Łączenie z hello Internet</span><span class="sxs-lookup"><span data-stu-id="a78bb-118">Connecting from hello Internet</span></span>
<span data-ttu-id="a78bb-119">Reguły zapory poziomu serwera Zastosuj hello Azure bazy danych dla serwera PostgreSQL tooall baz danych.</span><span class="sxs-lookup"><span data-stu-id="a78bb-119">Server-level firewall rules apply tooall databases on hello Azure Database for PostgreSQL server.</span></span> <span data-ttu-id="a78bb-120">Jeśli adres IP hello żądania hello jest w jednej z określonych w regułach zapory poziomu serwera hello zakresach hello, zostanie ustanowione połączenie hello.</span><span class="sxs-lookup"><span data-stu-id="a78bb-120">If hello IP address of hello request is within one of hello ranges specified in hello server-level firewall rules, hello connection is granted.</span></span>
<span data-ttu-id="a78bb-121">Jeśli adres IP hello hello żądania nie jest w hello zakresy określone w żadnym hello poziom bazy danych lub reguły zapory poziomu serwera hello żądanie połączenia zakończy się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="a78bb-121">If hello IP address of hello request is not within hello ranges specified in any of hello database-level or server-level firewall rules, hello connection request fails.</span></span>
<span data-ttu-id="a78bb-122">Na przykład jeśli aplikacja łączy się z sterownik JDBC dla PostgreSQL, mogą wystąpić ten błąd podjęciem próby wykonania tooconnect hello Zapora blokuje hello połączenia.</span><span class="sxs-lookup"><span data-stu-id="a78bb-122">For example, if your application connects with JDBC driver for PostgreSQL, you may encounter this error attempting tooconnect when hello firewall is blocking hello connection.</span></span>
> <span data-ttu-id="a78bb-123">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: błąd krytyczny: nie pg\_hba.conf wpis dla hosta: "123.45.67.890" użytkownika "adminuser", bazy danych "postgresql", SSL</span><span class="sxs-lookup"><span data-stu-id="a78bb-123">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: no pg\_hba.conf entry for host "123.45.67.890", user "adminuser", database "postgresql", SSL</span></span>

## <a name="programmatically-managing-firewall-rules"></a><span data-ttu-id="a78bb-124">Programowe zarządzanie regułami zapory</span><span class="sxs-lookup"><span data-stu-id="a78bb-124">Programmatically managing firewall rules</span></span>
<span data-ttu-id="a78bb-125">Ponadto toohello portalu Azure, zapory, zasady mogą być zarządzane, programowo przy użyciu wiersza polecenia platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="a78bb-125">In addition toohello Azure portal, firewall rules can be managed programmatically using Azure CLI.</span></span>
<span data-ttu-id="a78bb-126">Zobacz też [tworzenie i zarządzanie bazą danych Azure PostgreSQL reguł zapory przy użyciu wiersza polecenia platformy Azure](howto-manage-firewall-using-cli.md)</span><span class="sxs-lookup"><span data-stu-id="a78bb-126">See also [Create and manage Azure Database for PostgreSQL firewall rules using Azure CLI](howto-manage-firewall-using-cli.md)</span></span>

## <a name="troubleshooting-hello-database-firewall"></a><span data-ttu-id="a78bb-127">Rozwiązywanie problemów dotyczących zapory bazy danych hello</span><span class="sxs-lookup"><span data-stu-id="a78bb-127">Troubleshooting hello database firewall</span></span>
<span data-ttu-id="a78bb-128">Należy wziąć pod uwagę następujące punkty, gdy toohello dostępu do bazy danych programu Microsoft Azure dla usługi serwera PostgreSQL nie działają zgodnie z oczekiwaniami hello:</span><span class="sxs-lookup"><span data-stu-id="a78bb-128">Consider hello following points when access toohello Microsoft Azure Database for PostgreSQL Server service does not behave as you expect:</span></span>

* <span data-ttu-id="a78bb-129">**Lista dozwolonych toohello zmiany nie zostały uwzględnione jeszcze:** może być jak opóźnienie 5 minutową zmienia toohello bazy danych platformy Azure dla efektu tootake konfiguracji zapory serwera PostgreSQL.</span><span class="sxs-lookup"><span data-stu-id="a78bb-129">**Changes toohello allow list have not taken effect yet:** There may be as much as a five-minute delay for changes toohello Azure Database for PostgreSQL Server firewall configuration tootake effect.</span></span>

* <span data-ttu-id="a78bb-130">**nie ma uprawnień logowania Hello lub niepoprawne hasło było używane:** Jeśli identyfikator logowania nie ma uprawnień na powitania bazy danych Azure, PostgreSQL serwera lub hello hasło używane jest nieprawidłowa, hello toohello połączenia bazy danych Azure jest PostgreSQL serwera Odmowa dostępu.</span><span class="sxs-lookup"><span data-stu-id="a78bb-130">**hello login is not authorized or an incorrect password was used:** If a login does not have permissions on hello Azure Database for PostgreSQL server or hello password used is incorrect, hello connection toohello Azure Database for PostgreSQL server is denied.</span></span> <span data-ttu-id="a78bb-131">Tworzenie ustawień zapory tylko zapewnia klientom tooattempt możliwość łączenia serwera tooyour; Każdy klient musi podać poświadczenia zabezpieczeń wymaganymi hello.</span><span class="sxs-lookup"><span data-stu-id="a78bb-131">Creating a firewall setting only provides clients with an opportunity tooattempt connecting tooyour server; each client must provide hello necessary security credentials.</span></span>

<span data-ttu-id="a78bb-132">Na przykład za pomocą klienta JDBC hello następujący błąd może pojawić się.</span><span class="sxs-lookup"><span data-stu-id="a78bb-132">For example, using a JDBC client, hello following error may appear.</span></span>
> <span data-ttu-id="a78bb-133">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: błąd krytyczny: nie można przeprowadzić uwierzytelniania hasła dla użytkownika "nazwa_użytkownika"</span><span class="sxs-lookup"><span data-stu-id="a78bb-133">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: password authentication failed for user "yourusername"</span></span>

* <span data-ttu-id="a78bb-134">**Dynamicznego adresu IP:** Jeśli masz kłopot przez zaporę Windows hello ma połączenia internetowego z dynamicznych adresów IP, można Wypróbuj jedną z następujących rozwiązań hello:</span><span class="sxs-lookup"><span data-stu-id="a78bb-134">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through hello firewall, you could try one of hello following solutions:</span></span>

* <span data-ttu-id="a78bb-135">Zapytaj dostawcę usługi internetowego (ISP) dla zakresu adresów IP hello przypisane komputery klienckie tooyour hello tego dostępu do bazy danych Azure PostgreSQL serwera, a następnie Dodaj zakres adresów IP hello jako regułę zapory.</span><span class="sxs-lookup"><span data-stu-id="a78bb-135">Ask your Internet Service Provider (ISP) for hello IP address range assigned tooyour client computers that access hello Azure Database for PostgreSQL Server, and then add hello IP address range as a firewall rule.</span></span>

* <span data-ttu-id="a78bb-136">Pobierz statycznych adresów IP zamiast tego dla komputerów klienckich, a następnie dodaj adresy IP hello jako reguły zapory.</span><span class="sxs-lookup"><span data-stu-id="a78bb-136">Get static IP addressing instead for your client computers, and then add hello IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a78bb-137">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="a78bb-137">Next steps</span></span>
<span data-ttu-id="a78bb-138">W przypadku artykułów na temat tworzenia reguł zapory serwera i na poziomie bazy danych zobacz:</span><span class="sxs-lookup"><span data-stu-id="a78bb-138">For articles on creating server-level and database-level firewall rules, see:</span></span>
* [<span data-ttu-id="a78bb-139">Tworzenie i zarządzanie bazą danych Azure dla reguł zapory PostgreSQL przy użyciu hello portalu Azure</span><span class="sxs-lookup"><span data-stu-id="a78bb-139">Create and manage Azure Database for PostgreSQL firewall rules using hello Azure portal</span></span>](howto-manage-firewall-using-portal.md)
* [<span data-ttu-id="a78bb-140">Tworzenie i zarządzanie bazą danych Azure dla reguł zapory PostgreSQL przy użyciu wiersza polecenia platformy Azure</span><span class="sxs-lookup"><span data-stu-id="a78bb-140">Create and manage Azure Database for PostgreSQL firewall rules using Azure CLI</span></span>](howto-manage-firewall-using-cli.md)